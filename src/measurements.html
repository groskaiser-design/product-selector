<!DOCTYPE html>
<html lang="ru">
<head>
<script src="version-control.js?t=1"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
<meta charset="UTF-8" />
<meta name="tma:home-url" content="./index.html" />
<meta name="tma:home-hash" content="" />
<title>–ó–∞–º–µ—Ä—ã —Ç–µ–ª–∞</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
  /* === –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–ï –°–ö–†–´–¢–ò–ï –°–ö–†–û–õ–õ–ë–ê–†–ê === */

/* –î–ª—è Chrome, Safari, Edge, Opera –∏ iOS */
*::-webkit-scrollbar {
  width: 0 !important;
  height: 0 !important;
  display: none !important;
  background: transparent !important;
}

/* –î–ª—è Firefox –∏ IE */
* {
  -ms-overflow-style: none !important;  /* IE –∏ —Å—Ç–∞—Ä—ã–π Edge */
  scrollbar-width: none !important;  /* Firefox */
}
/* ===== CSS –±–ª–æ–∫ ==== */
/* ===== –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (:root) ==== */

  :root {
    /* --- PALETTE (Core from KBJU) --- */
    --bg-core: #050505;
    --text-main: #ffffff;
    --text-muted: rgba(255, 255, 255, 0.55);
    
    /* --- GLASS SURFACES --- */
    --surface-glass: rgba(255, 255, 255, 0.07);
    --surface-list: rgba(255, 255, 255, 0.04);
    --surface-border: rgba(255, 255, 255, 0.1);
    --surface-highlight: rgba(255, 255, 255, 0.25);
    
    /* --- ACCENTS --- */
    --acc-orange: #ff9f0a;
    --acc-green: #30d158;
    --acc-blue: #0a84ff;
    --acc-red: #ff453a;
    --acc-purple: #5e60ce;

    /* --- METRICS --- */
    --radius-xl: 28px;
    --radius-l: 22px;
    --radius-m: 16px;
    --pad: 16px;
    --gap: 12px;
    
    /* --- LEGACY VARS (–°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å JS –∫–æ–ª–µ—Å–∞–º–∏) --- */
    --okA: #4facfe;
    --okB: #0a84ff;
    --row: 36px;
    --contentW: 420px;
    
    /* --- CHART SPECIFIC (–û—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ measurements) --- */
    --chart-name-size: clamp(12px, 3.2vw, 16px);
    --chart-name-weight: 400;
    --chart-value-size: clamp(12px, 3.2vw, 16px);
    --chart-value-weight: 400;
    --chart-line-height: 1.25;
    --chart-gauge-height: 25px;
    --chart-plan-radius: 6px;
    --chart-fact-radius: 3px;
    --chart-fact-height: 40%;
    --chart-muted: rgba(255,255,255,.82);
    --chart-fact-green: #30d158;  /* Updated to match KBJU accent */
    --chart-fact-orange: #ff9f0a; /* Updated to match KBJU accent */
    --chart-fact-red: #ff453a;    /* Updated to match KBJU accent */
  }

  /* RESET & BODY */
  * { box-sizing: border-box; margin: 0; padding: 0; }
  
  body {
    background-color: var(--bg-core) !important;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', Roboto, sans-serif;
    color: var(--text-main) !important;
    min-height: 100vh;
    overflow-x: hidden;
    overscroll-behavior-y: none;
    -webkit-font-smoothing: antialiased;
    position: relative;
    isolation: isolate;
  }

  /* –£–±–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç measurements */
  body::before { display: none !important; }

  /* --- FX LAYER (Background Effects) --- */
  .fx-layer { position: fixed; inset: 0; z-index: -1; pointer-events: none; transform: translate3d(0,0,0); }
  .orb { position: absolute; border-radius: 50%; will-change: transform; animation: float 30s infinite linear; }
  
  /* Orb 1: –í–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
  .orb-1 { 
    width: 90vw; height: 90vw; 
    opacity: 0.4; 
    background: radial-gradient(circle, rgba(108, 92, 231, 0.8) 0%, transparent 70%); 
    top: -20%; left: -20%; 
  }
  
  /* Orb 2: –ù–∏–∂–Ω–∏–π –ø—Ä–∞–≤—ã–π, –¥—ã—à–∞—â–∏–π */
  .orb-2 { 
    width: 400px; height: 400px; 
    opacity: 0.5; 
    background: radial-gradient(circle, rgba(108, 92, 231, 0.8) 0%, transparent 70%); 
    bottom: -150px; right: -100px; 
    animation: breathe 6s infinite ease-in-out; 
  }

  @keyframes float { 0% {transform:rotate(0deg)} 100% {transform:rotate(360deg)} }
  @keyframes breathe { 0%, 100% { transform: scale(1); opacity: 0.4; } 50% { transform: scale(1.1); opacity: 0.6; } }

  .noise { 
    position: fixed; inset: 0; z-index: -1; opacity: 0.04; 
    background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); 
    pointer-events: none; 
  }

  /* --- UI UTILS --- */
  html, body, button, [role="button"], .btn, .choice-item { touch-action: manipulation; }
  input, select, textarea { font-size: 16px; }


/* ============================================
   –ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
   ============================================ */
.page {
  max-width: 560px;
  margin: 0 auto;
  padding: 18px 14px 24px;
  position: relative;
  z-index: 1;
}

/* –ê–∫–∫–æ—Ä–¥–µ–æ–Ω (–°—Ç–µ–∫–ª—è–Ω–Ω—ã–π —Å—Ç–∏–ª—å) */
.section {
  background: var(--surface-glass);
  border: 1px solid var(--surface-border);
  border-radius: var(--radius-l);
  box-shadow: 0 12px 32px rgba(0,0,0,0.3);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  overflow: hidden;
  margin-bottom: 14px;
}
.section-h {
  display: flex; align-items: center; gap: 10px; padding: 14px 16px;
  cursor: pointer; user-select: none;
}
.section-h h2 { font-size: 16px; font-weight: 800; flex: 1; }
.meta { font-size: 11px; opacity: .9; }
.toggle {
  width: 22px; height: 22px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center; opacity: .9;
}
.toggle svg { transition: transform .18s ease; }
.section.collapsed .toggle svg { transform: rotate(-90deg); }
.section-content { padding: 0; }
.section.collapsed .section-content { display: none; }

/* üî• –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–û: –û—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–µ–∫—Ü–∏–∏.
   –≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.
*/
.section-content { 
  padding: 0 12px 12px; 
}

/* ============================================
   –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ü–æ–ª, –ü–æ–ª—è, –ö–æ–ª–µ—Å–∞
   ============================================ */

/* –ë–∏–Ω–∞—Ä–Ω—ã–π –≤—ã–±–æ—Ä –ø–æ–ª–∞ (–°—Ç–µ–∫–ª—è–Ω–Ω—ã–π —Å—Ç–∏–ª—å) */
.binary-choice {
  display: flex; gap: 8px; padding: 12px; border-radius: 14px;
  max-width: var(--contentW); width: 100%; margin: 8px auto 0;
  
  /* –§–æ–Ω —Ç–µ–º–Ω—ã–π —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–π */
  background: linear-gradient(165deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
}
.binary-btn {
  flex: 1; padding: 10px 16px; border: 0; border-radius: 12px;
  background: rgba(255, 255, 255, 0.05); 
  color: #fff;
  font-weight: 700; font-size: 14px;
  transition: all .2s ease; cursor: pointer;
}
.binary-btn.active {
  background: linear-gradient(135deg, var(--okA), var(--okB));
  box-shadow: 0 6px 16px rgba(10, 132, 255, 0.4), inset 0 1px 0 rgba(255,255,255,0.3);
  transform: scale(1.02);
}

.binary-choice + .duo {
  border-top: 1px solid rgba(255,255,255,.14);
  margin-top: 12px; padding-top: 12px;
}
#fields {
  border-top: 1px solid rgba(255,255,255,.14);
  margin-top: 8px; padding-top: 8px;
}

/* –ü–æ–ª—è –≤–≤–æ–¥–∞ (–°—Ç—Ä–æ–∫–∏) */
/* üî• –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–±—Ä–∞–Ω—ã –±–æ–∫–æ–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã (padding: 12px 0), 
   —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Ç–µ–ø–µ—Ä—å –∑–∞–¥–∞—é—Ç—Å—è —Ä–æ–¥–∏—Ç–µ–ª–µ–º .section-content */
.field { padding: 12px 0; }

.field + .field { border-top: 1px solid rgba(255,255,255,.14); }
.row { display: flex; align-items: center; justify-content: space-between; }
.label { font-size: 13px; font-weight: 800; }
.unit { font-size: 12px; opacity: .9; }
.help { margin-top: 6px; text-align: center; font-size: 12px; opacity: .8; }

.duo {
  position: relative; display: flex; gap: 6px; padding: 12px; border-radius: 14px;
  max-width: var(--contentW); width: 100%; margin: 8px auto 0;
  justify-content: center; touch-action: pan-y;
  
  /* –§–æ–Ω –∫–æ–ª–µ—Å (—Ç–µ–º–Ω–∞—è –ø–æ–¥–ª–æ–∂–∫–∞) */
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
}
.duo::after {
  content: ""; position: absolute; left: 4px; right: 4px; top: 50%;
  height: var(--row); transform: translateY(-50%);
  border-radius: 10px; pointer-events: none;
  
  /* –õ–∏–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω–∏—è */
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.col {
  flex: 0 0 92px; height: 180px; overflow: auto;
  -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
  scrollbar-width: none; scroll-snap-type: y mandatory; padding: 0;
  
  /* –ú–∞—Å–∫–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
  mask-image: linear-gradient(180deg, transparent, #000 18%, #000 82%, transparent);
  -webkit-mask-image: linear-gradient(180deg, transparent, #000 18%, #000 82%, transparent);
  touch-action: pan-y;
}
.col::-webkit-scrollbar { display: none; }

.option {
  height: var(--row); display: flex; align-items: center; justify-content: center;
  font-weight: 900; font-size: 18px;
  color: #fff; opacity: 0.4; /* –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ü–∏—Ñ—Ä—ã */
  scroll-snap-align: center;
}
.option.active {
  color: #fff; opacity: 1; /* –ê–∫—Ç–∏–≤–Ω–∞—è —Ü–∏—Ñ—Ä–∞ */
  text-shadow: 0 0 10px rgba(0,0,0,0.5);
}
.sep {
  display: flex; align-items: center; justify-content: center; width: 10px;
  color: #fff; font-weight: 800; opacity: 0.5;
}

/* ========================================================
   –ß–ï–ö–ë–û–ö–°–´ –ò –û–ü–¶–ò–ò (–°—Ç–∏–ª—å: –ö–≤–∞–¥—Ä–∞—Ç–∏–∫)
   ======================================================== */
.optline { display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 8px; }

/* –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞—Ç–∏–≤–Ω—ã–π —á–µ–∫–±–æ–∫—Å */
.optline input, #opt_fat { 
  -webkit-appearance: none; appearance: none; position: absolute; 
  width: 1px; height: 1px; margin: 0; padding: 0; border: 0; 
  clip-path: inset(50%); overflow: hidden; 
}

/* --- –°–ü–ï–¶–ò–§–ò–ö–ê –î–õ–Ø –ñ–ò–†–ê (Legacy Support) --- */
.field[data-key="fat"] .optline { display: flex; justify-content: center; margin-top: 8px; }
.field[data-key="fat"] .optline #bf-none-wrap { display: inline-flex; }

/* –õ–µ–π–±–ª —á–µ–∫–±–æ–∫—Å–∞ */
.field[data-key="fat"] .optline label {
  display: inline-flex; align-items: center; gap: 10px;
  cursor: pointer; font-weight: 700;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  position: relative; /* –í–∞–∂–Ω–æ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∞ */
}

/* –í–Ω–µ—à–Ω—è—è —Ä–∞–º–∫–∞ (–ö–æ—Ä–æ–±–∫–∞) */
.field[data-key="fat"] .optline label::before {
  content: ""; width: 22px; height: 22px; border-radius: 6px;
  border: 2px solid rgba(255,255,255,.65);
  background: transparent;
  transition: all .2s ease;
  flex-shrink: 0;
  box-sizing: border-box;
}

/* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–µ–ª—ã–π –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) */
.field[data-key="fat"] .optline label::after {
  content: "";
  position: absolute;
  left: 11px; /* –¶–µ–Ω—Ç—Ä –∫–æ—Ä–æ–±–∫–∏ (22px / 2) */
  top: 50%;
  width: 10px; height: 10px;
  background: #fff;
  border-radius: 2px;
  transform: translate(-50%, -50%) scale(0); /* –°–∫—Ä—ã—Ç (scale 0) */
  opacity: 0;
  transition: all .2s ease;
  pointer-events: none;
}

/* --- –°–û–°–¢–û–Ø–ù–ò–ï CHECKED --- */

/* 1. –ö—Ä–∞—Å–∏–º –∫–æ—Ä–æ–±–∫—É –≤ —Å–∏–Ω–∏–π */
.field[data-key="fat"] .optline label:has(#opt_fat:checked)::before {
  background: linear-gradient(135deg, var(--okA), var(--okB));
  border-color: var(--okB);
  box-shadow: 0 0 10px rgba(10, 132, 255, 0.4);
}

/* 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–ª—ã–π –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ */
.field[data-key="fat"] .optline label:has(#opt_fat:checked)::after {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* --- –û–ë–©–ò–ï –ß–ï–ö–ë–û–ö–°–´ (.check-square) --- */
/* (–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö, –µ—Å–ª–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã) */
.check { display: inline-flex; align-items: center; gap: 10px; cursor: pointer; user-select: none; }

.check-square {
  width: 22px; height: 22px; border-radius: 6px; border: 2px solid rgba(255,255,255,.65);
  display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0;
  transition: all .2s ease; background: transparent;
}
.check-square::after {
  content: ""; width: 12px; height: 12px; border-radius: 3px; background: #fff;
  opacity: 0; transform: scale(.7); transition: all .2s ease;
}

.check.checked .check-square { background: linear-gradient(135deg,var(--okA),var(--okB)); border-color: var(--okB); }
.check.checked .check-square::after { opacity: 1; transform: scale(1); }

/* –ü–∞–Ω–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */
.savebar {
  display: flex; justify-content: center; padding: 12px;
  border-top: 1px solid rgba(255,255,255,.14);
  padding-bottom: calc(12px + env(safe-area-inset-bottom));
}

/* –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" */
.btn {
  min-width: 160px; padding: 12px 16px; border: 0; border-radius: 14px;
  background: linear-gradient(135deg, var(--okA), var(--okB));
  color: #fff; font-weight: 900;
  
  /* –°–∏–Ω—è—è —Ç–µ–Ω—å (Glow) */
  box-shadow: 0 8px 32px rgba(10, 132, 255, 0.4);
  
  transition: transform .08s ease, box-shadow .12s ease, filter .12s ease, opacity .12s ease;
  -webkit-tap-highlight-color: transparent; touch-action: manipulation;
  display: inline-flex; align-items: center; justify-content: center; gap: 10px;
}
.btn:focus-visible { outline: 2px solid rgba(255,255,255,.7); outline-offset: 2px; border-radius: 16px; }
@media (prefers-reduced-motion: reduce){ .btn{transition:none;} }
.btn.pressed { transform: translateY(1px) scale(.98); box-shadow: var(--shadow); filter: saturate(.95); }
.btn.loading { opacity: .9; pointer-events: none; }
.spinner { width: 16px; height: 16px; border: 2px solid rgba(255,255,255,.55); border-top-color: #fff; border-radius: 50%; animation: spin .8s linear infinite; }
@keyframes spin { to { transform:rotate(360deg); } }
.disabled { opacity: .4; filter: saturate(.6); }

.bump { animation: bump .08s ease; }
@keyframes bump { 0%{transform:scale(1)} 50%{transform:scale(.98)} 100%{transform:scale(1)} }

/* ============================================
   –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Äî –ø–ª–∏—Ç–∫–∞ –∏–∑ 4—Ö –º–µ—Ç—Ä–∏–∫ (Dark Glass)
   ============================================ */
.macros-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  padding: 0;
}

.macro-card {
  /* –°—Ç–∏–ª—å Dark Glass (–∫–æ–ø–∏—è –∏–∑ KBJU) */
  background: rgba(0, 0, 0, 0.3) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  /* –í–µ—Ä—Ö–Ω–∏–π –±–ª–∏–∫ –¥–ª—è –æ–±—ä–µ–º–∞ */
  border-top: 1px solid rgba(255, 255, 255, 0.2) !important;
  
  border-radius: 24px !important;
  
  /* –°–∏–ª—å–Ω—ã–π –±–ª—é—Ä */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  
  /* –ú—è–≥–∫–∞—è —Ç–µ–Ω—å */
  box-shadow: 0 8px 24px rgba(0,0,0,0.2) !important;

  padding: 16px 12px;
  text-align: center;
  color: #fff;
  min-width: 0;
  overflow: hidden;
}

.macro-card .m-label {
  font-size: 12px;
  opacity: .9;
  margin-bottom: 6px;
  font-weight: 700;
  letter-spacing: 0.3px;
}

.macro-card .m-value {
  font-size: 26px; /* –ö—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç */
  font-weight: 900;
  line-height: 1;
  letter-spacing: -0.5px;
}

.macro-card .m-unit {
  font-size: 12px;
  opacity: .7;
  margin-top: 4px;
  font-weight: 500;
}

.macro-hint {
  margin: 12px 0 0;
  text-align: center;
  font-size: 13px;
  opacity: .6;
  font-weight: 500;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –æ—Å—Ç–∞–ª—Å—è –∫–ª–∞—Å—Å .kbju7-card */
.kbju7-card {
  background: rgba(255,255,255,.12) !important;
  border: 1px solid rgba(255,255,255,.24) !important;
  border-radius: 24px !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
  box-shadow: none !important;
}

/* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–µ—Ä–µ–¥ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ */
.macros-grid + #pfHApp,
.macros-grid + .wc-root {
  border-top: 1px solid rgba(255,255,255,.14);
  margin-top: 12px;
  padding-top: 12px;
}

/* ============================================
   –ì—Ä–∞—Ñ–∏–∫ –ó–∞–º–µ—Ä—ã (–ü–ª–∞–Ω/–§–∞–∫—Ç) - DARK GLASS EDITION
   ============================================ */

/* –°–∫—Ä–æ–ª–ª–µ—Ä —Å–ø–∏—Å–∫–∞ */
#pfHApp .scroller {
  position: relative;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  scroll-snap-type: y proximity;
  scroll-behavior: smooth;
  border-radius: 24px; /* –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å —Ä–∞–¥–∏—É—Å–æ–º –∫–∞—Ä—Ç–æ—á–∫–∏ */
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,.35) transparent;
  max-height: calc(var(--chart-gauge-height)*4.5 + 60px); 
}
#pfHApp .scroller::-webkit-scrollbar { width: 4px; }
#pfHApp .scroller::-webkit-scrollbar-thumb {
  background-color: rgba(255,255,255,.2);
  border-radius: 4px;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ø–∏—Å–∫–∞ (–¢–ï–ü–ï–†–¨ –ö–ê–ö –ü–õ–ò–¢–ö–ê) */
#pfHApp .list {
  display: flex; flex-direction: column; gap: 0;
  padding: 12px 14px;
  
  /* üî• COPY-PASTE —Å—Ç–∏–ª—è .macro-card */
  background: rgba(0, 0, 0, 0.3) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-top: 1px solid rgba(255, 255, 255, 0.2) !important; /* –ë–ª–∏–∫ */
  border-radius: 24px !important;
  
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.2) !important;
  
  overflow: hidden;
}

/* –°—Ç—Ä–æ–∫–∞ –æ–¥–Ω–æ–≥–æ –∑–∞–º–µ—Ä–∞ */
#pfHApp .list .row {
  display: flex; flex-direction: column; gap: 4px;
  padding: 8px 4px;
  scroll-snap-align: start;
  justify-content: flex-start; align-items: stretch;
}
#pfHApp .list .row + .row {
  border-top: 1px solid rgba(255,255,255,.1);
  margin-top: 4px; padding-top: 12px;
}

/* –¢–µ–∫—Å—Ç: –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –ó–Ω–∞—á–µ–Ω–∏—è */
#pfHApp .top {
  display: flex; flex-wrap: wrap; align-items: baseline; gap: 6px;
  margin-bottom: 2px;
  padding-left: 4px;
}
#pfHApp .name {
  display: block; flex-basis: 100%;
  font-size: 14px; font-weight: 500;
  line-height: 1.3; color: #fff;
  letter-spacing: 0.2px;
}
#pfHApp .vals {
  display: flex; flex-wrap: wrap; gap: 8px;
  font-size: 12px; line-height: 1.25;
  opacity: 0.85;
}
#pfHApp .vals .kv { display: inline-flex; align-items: baseline; gap: 3px; }
#pfHApp .vals .lab { color: rgba(255,255,255,0.6); font-weight: 400; }
#pfHApp .vals .val { font-weight: 400; font-variant-numeric: tabular-nums; color: #fff; }
#pfHApp .dot { color: rgba(255,255,255,0.3); margin: 0 2px; }

/* –®–∫–∞–ª–∞ (Gauge) - –¢–µ–º–Ω—ã–π —Å–ª–æ—Ç */
#pfHApp .gauge {
  position: relative;
  height: 18px; 
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.4) !important; 
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.4);
  border: 1px solid rgba(255, 255, 255, 0.05);
  overflow: hidden;
}

/* –ü–ª–∞–Ω */
#pfHApp .plan {
  position: absolute; inset: 0 auto 0 0;
  width: var(--wp, 0%);
  background: rgba(255, 255, 255, 0.08);
  border-right: 1px solid rgba(255, 255, 255, 0.2);
  z-index: 1;
  border-radius: 6px 0 0 6px;
}

/* –§–∞–∫—Ç */
#pfHApp .fact {
  position: absolute; left: 0; top: 50%; transform: translateY(-50%);
  width: var(--wf, 0%); min-width: 4px;
  height: 8px; 
  border-radius: 4px;
  z-index: 2;
  transition: width .3s ease;
  background: var(--acc-green);
  box-shadow: none; 
}
#pfHApp .fact.orange { background: var(--acc-orange); }
#pfHApp .fact.red    { background: var(--acc-red); }
#pfHApp .fact.neutral{ background: rgba(255, 255, 255, 0.5); }

/* --- TIMELINE (–ö–æ–ª–µ—Å–æ –¥–∞—Ç) --- */
#pfHApp .timeline {
  position: relative; display: flex; align-items: center; gap: 10px;
  padding: 16px 0 8px;
}
#pfHApp .timeline[hidden] { display: none !important; }

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ–ª–µ—Å–∞ - –¢–û–ñ–ï –°–¢–ï–ö–õ–û, –ß–¢–û–ë–´ –°–û–ß–ï–¢–ê–õ–û–°–¨ */
#pfHApp .wheel {
  position: relative; flex: 1; display: flex; align-items: center; gap: 0;
  overflow-x: auto; overflow-y: hidden;
  scroll-snap-type: x mandatory; 
  -webkit-overflow-scrolling: touch;
  padding: 10px 0;
  scrollbar-width: none;
  
  /* –°—Ç–∏–ª—å —Ç–µ–º–Ω–æ–≥–æ —Å—Ç–µ–∫–ª–∞ –¥–ª—è —Ç–∞–π–º–ª–∞–π–Ω–∞ */
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  backdrop-filter: blur(12px);
}
#pfHApp .wheel::-webkit-scrollbar { display: none; }

/* –≠–ª–µ–º–µ–Ω—Ç –¥–∞—Ç—ã */
#pfHApp .wheel .item {
  flex: 0 0 auto; min-width: 72px;
  padding: 8px 4px; margin: 0 4px;
  display: flex; align-items: center; justify-content: center; text-align: center;
  font-size: 13px; font-weight: 500; color: rgba(255,255,255,0.7);
  border-radius: 12px; border: 1px solid transparent;
  scroll-snap-align: center;
  opacity: 0.6; transform: scale(0.95); transition: all .2s ease; user-select: none;
}
#pfHApp .wheel .item.active {
  opacity: 1; transform: scale(1);
  color: #fff; font-weight: 700;
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
#pfHApp .wheel .spacer { flex: 0 0 50%; scroll-snap-align: none; }
#pfHApp .wheel-mask { display: none; }

/* ============================================
   AI-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (Clean Typography)
 ============================================ */
#ai-comment .field {
  margin-top: 12px;
  padding: 16px 18px; /* –ß—É—Ç—å —à–∏—Ä–µ –ø–∞–¥–¥–∏–Ω–≥–∏ */
  
  /* Dark Glass Style */
  background: rgba(0, 0, 0, 0.3) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-top: 1px solid rgba(255, 255, 255, 0.2) !important;
  border-radius: 24px !important;
  
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.2) !important;
  
  max-height: 80svh;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  color: #fff;
}

/* –ó–ê–ì–û–õ–û–í–ö–ò (–°–µ–∫—Ü–∏–∏) - –ú–µ–ª–∫–∏–µ, –∫–∞–∫ –ª–µ–π–±–ª—ã */
#ai-comment .field h3,
#ai-comment .field h4,
#ai-comment .field h5 {
  margin: 20px 0 8px; /* –ë–æ–ª—å—à–µ –≤–æ–∑–¥—É—Ö–∞ —Å–≤–µ—Ä—Ö—É */
  font-size: 12px;    /* –ú–µ–ª–∫–∏–π —à—Ä–∏—Ñ—Ç */
  font-weight: 700;
  text-transform: uppercase; /* –ö–∞–ø—Å –¥–ª—è —Å—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ */
  letter-spacing: 0.8px;     /* –†–∞–∑—Ä—è–¥–∫–∞ –±—É–∫–≤ */
  color: rgba(255, 255, 255, 0.5); /* –ü—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç */
}

/* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø —É —Å–∞–º–æ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –¥—ã—Ä—ã —Å–≤–µ—Ä—Ö—É */
#ai-comment .field > *:first-child { margin-top: 0; }

/* –û–ë–´–ß–ù–´–ô –¢–ï–ö–°–¢ */
#ai-comment .field p {
  margin: 0 0 12px;
  font-size: 14px;
  line-height: 1.5;
  color: rgba(255, 255, 255, 0.95);
}

/* –°–ü–ò–°–ö–ò - –£–±–∏—Ä–∞–µ–º –±—É–ª–ª–∏—Ç—ã, –¥–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–¥—É—Ö */
#ai-comment .field ul,
#ai-comment .field ol {
  margin: 0 0 12px;
  padding: 0;        /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ */
  list-style: none;  /* –£–±–∏—Ä–∞–µ–º —Ç–æ—á–∫–∏/—Ü–∏—Ñ—Ä—ã */
}

#ai-comment .field li {
  margin: 0 0 10px;  /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –ø—É–Ω–∫—Ç–∞–º–∏ –≤–º–µ—Å—Ç–æ —Ç–æ—á–µ–∫ */
  padding: 0;
  font-size: 14px;
  line-height: 1.5;
  color: rgba(255, 255, 255, 0.95);
}

/* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
#ai-comment .field hr {
  border: 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin: 20px 0;
}

/* –°—Å—ã–ª–∫–∏ */
#ai-comment .field a {
  color: var(--acc-blue);
  text-decoration: none;
  border-bottom: 1px solid rgba(10, 132, 255, 0.3);
}

/* ============================================
   –ì—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∞ –≤–µ—Å–∞ (White Neon + Points)
 ============================================ */
.wc-root {
  --wc-font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', Roboto, sans-serif;
  --wc-text-color: rgba(255, 255, 255, 0.5); 
  --wc-text-highlight: #ffffff;              
  --wc-line-color: #ffffff;
  
  --wc-height: 220px;
  --wc-y-axis-width: 32px;
  
  --wc-grid-color: rgba(255, 255, 255, 0.05);
}

.wc-root *, .wc-root *::before, .wc-root *::after { box-sizing: border-box; }

/* –ö–∞—Ä—Ç–æ—á–∫–∞ (Dark Glass) */
.wc-card {
  max-width: 100%; margin: 0;
  padding: 20px 12px 12px; 
  
  background: rgba(0, 0, 0, 0.3) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-top: 1px solid rgba(255, 255, 255, 0.2) !important;
  border-radius: 24px !important;
  
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: 0 8px 32px rgba(0,0,0,0.3) !important;
  
  font-family: var(--wc-font-family);
  -webkit-font-smoothing: antialiased;
}

.wc-container { position: relative; display: flex; align-items: stretch; padding: 0; }

.wc-y-axis {
  flex-shrink: 0; width: var(--wc-y-axis-width); height: var(--wc-height);
  margin-right: 4px;
}

.wc-scroll {
  flex: 1; overflow-x: auto; overflow-y: hidden;
  -webkit-overflow-scrolling: touch; scrollbar-width: none;
  
  /* –û—Ç—Å—Ç—É–ø—ã, —á—Ç–æ–±—ã –ø–µ—Ä–≤–∞—è/–ø–æ—Å–ª–µ–¥–Ω—è—è —Ç–æ—á–∫–∞ –Ω–µ –æ–±—Ä–µ–∑–∞–ª–∏—Å—å */
  padding-left: 16px; padding-right: 16px;
  
  mask-image: linear-gradient(90deg, transparent 0%, #000 5%, #000 95%, transparent 100%);
  -webkit-mask-image: linear-gradient(90deg, transparent 0%, #000 5%, #000 95%, transparent 100%);
}
.wc-scroll::-webkit-scrollbar { display: none; }

.wc-inner { height: var(--wc-height); min-width: 100%; }

/* –°–µ—Ç–∫–∞ */
.wc-grid-line { stroke: var(--wc-grid-color); stroke-width: 1; stroke-dasharray: 4 4; }
.wc-grid-label { fill: var(--wc-text-color); font-size: 10px; font-weight: 500; font-family: var(--wc-font-family); }
.wc-axis-label {
  fill: var(--wc-text-color); font-size: 11px; font-weight: 600; font-family: var(--wc-font-family);
  text-transform: uppercase; letter-spacing: 0.5px;
}

/* –õ–ò–ù–ò–Ø - –ü—Ä–æ—Å—Ç–æ –±–µ–ª–∞—è (—Å–≤–µ—á–µ–Ω–∏–µ –¥–æ–±–∞–≤–∏–º —á–µ—Ä–µ–∑ SVG-—Ñ–∏–ª—å—Ç—Ä –≤ JS) */
.wc-line {
  fill: none;
  stroke: #fff;
  stroke-width: 1px;
  stroke-linecap: round;
  stroke-linejoin: round;
  /* –£–±–∏—Ä–∞–µ–º –≤—Å–µ filter: drop-shadow... –æ–Ω–∏ –ª–æ–º–∞—é—Ç—Å—è –Ω–∞ iOS */
}

/* –ó–∞–ª–∏–≤–∫—É —É–±–∏—Ä–∞–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é */
.wc-area { display: none; }

/* –¢–û–ß–ö–ò - –ë–µ–ª—ã–µ –∫–æ–ª—å—Ü–∞ */
.wc-point {
  fill: #1c1c1e; /* –¢–µ–º–Ω—ã–π —Ü–µ–Ω—Ç—Ä (–ø–æ–¥ —Ü–≤–µ—Ç —Ñ–æ–Ω–∞) */
  stroke: #fff;  /* –ë–µ–ª—ã–π –∫–æ–Ω—Ç—É—Ä */
  stroke-width: 1.5px;
  /* –°–≤–µ—á–µ–Ω–∏–µ —Ç–æ—á–∫–∏ */
  -webkit-filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.8));
  filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.8));
}

.wc-point-label {
  fill: var(--wc-text-highlight);
  font-size: 12px; font-weight: 700;
  font-family: var(--wc-font-family);
  text-shadow: 0 2px 4px rgba(0,0,0,0.8);
}

.wc-tooltip { display: none; }

</style>
</head>

<body>
  <div class="fx-layer">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="noise"></div>
  </div>
<!-- ===== HTML –±–ª–æ–∫ ==== -->
<div class="page">

  <!-- –°–ï–ö–¶–ò–Ø 1: –ê–Ω–∫–µ—Ç–∞ (–∫–æ–ª—ë—Å–∞ + –∫–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å") -->
  <section class="section collapsed" id="sec-measures">
    <div class="section-h" data-toggle="sec-measures" role="button" tabindex="0"
         aria-controls="sec-measures" aria-expanded="false">
      <h2>–ê–Ω–∫–µ—Ç–∞</h2>
      <div class="meta" id="lastTime">–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–º–µ—Ä: –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>
      <div class="toggle" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M8 10l4 4 4-4" stroke="white" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>

    <div class="section-content">
      <!-- –ü–æ–ª: –±–∏–Ω–∞—Ä–Ω—ã–π –≤—ã–±–æ—Ä -->
      <div class="field">
        <div class="row"><div class="label">–ü–æ–ª</div></div>
        <div class="binary-choice" role="group" aria-label="–ü–æ–ª" aria-required="true">
          <button class="binary-btn" data-field="gender" data-value="male" aria-pressed="false">–ú—É–∂—Å–∫–æ–π</button>
          <button class="binary-btn" data-field="gender" data-value="female" aria-pressed="false">–ñ–µ–Ω—Å–∫–∏–π</button>
        </div>
        <div class="help">–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç</div>
      </div>

      <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º—ã–µ –ø–æ–ª—è —Å –∫–æ–ª—ë—Å–∞–º–∏ (—Ä–æ—Å—Ç, –≤–µ—Å, % –∂–∏—Ä–∞ –∏ —Ç.–¥.) -->
      <div id="fields"></div>

      <!-- –ü–∞–Ω–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–Ω–∫–µ—Ç—ã -->
      <div class="savebar">
        <button class="btn" id="saveBtn" aria-busy="false">
          <span class="btn-label">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
          <span class="spinner" aria-hidden="true" hidden></span>
        </button>
      </div>
    </div>
  </section>

 <!-- –°–ï–ö–¶–ò–Ø 2: –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–ø–ª–∏—Ç–∫–∞ + –≥—Ä–∞—Ñ–∏–∫ –∑–∞–º–µ—Ä–æ–≤) -->
<section class="section" id="sec-analytics">
  <div class="section-h" data-toggle="sec-analytics" role="button" tabindex="0"
       aria-controls="sec-analytics" aria-expanded="true">
    <h2>–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h2>
    <div class="toggle" aria-hidden="true">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
        <path d="M8 10l4 4 4-4" stroke="white" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
  </div>

  <div class="section-content">
    <!-- –•–æ—Å—Ç –¥–ª—è –ø–ª–∏—Ç–∫–∏ –º–µ—Ç—Ä–∏–∫; JS —Å–∞–º –∑–∞–ª—å—ë—Ç —Å—é–¥–∞ .field + .macros-grid -->
    <div id="analytics"></div>

<!-- ==================== –ì—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∞ –≤–µ—Å–∞ ==================== -->
<div class="wc-root">
  <div class="wc-card">
    <div class="wc-container">
      <svg class="wc-y-axis" id="wcYAxis"></svg>
      <div class="wc-scroll" id="wcScroll">
        <div class="wc-inner" id="wcInner">
          <svg id="wcChart"></svg>
        </div>
      </div>
      <div class="wc-tooltip" id="wcTooltip">
        <div class="wc-tooltip-date" id="wcTooltipDate"></div>
        <div class="wc-tooltip-value" id="wcTooltipValue"></div>
      </div>
    </div>
  </div>
</div>
<div class="macro-hint">–î–∏–Ω–∞–º–∏–∫–∞ –≤–∞—à–µ–≥–æ –≤–µ—Å–∞ (–∫–≥)</div>
    
    <!-- –ë–ª–æ–∫ —Å –≥—Ä–∞—Ñ–∏–∫–æ–º –ø–ª–∞–Ω/—Ñ–∞–∫—Ç/–¥–µ–ª—å—Ç–∞ –ø–æ –∑–∞–º–µ—Ä–∞–º —Ç–µ–ª–∞ -->
    <div class="field" id="pf-chart-field">
      <div id="pfHApp" role="region" aria-label="–ü–ª–∞–Ω –ø—Ä–æ—Ç–∏–≤ —Ñ–∞–∫—Ç–∞">

        <!-- –í–ï–†–¢–ò–ö–ê–õ–¨–ù–´–ô –°–ü–ò–°–û–ö –ó–ê–ú–ï–†–û–í (—Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–Ω) -->
        <div class="scroller" id="scroller">
          <div class="list" id="rows"></div>
        </div>

        <!-- –ì–û–†–ò–ó–û–ù–¢–ê–õ–¨–ù–ê–Ø –í–†–ï–ú–ï–ù–ù–ê–Ø –®–ö–ê–õ–ê –° –î–ê–¢–ê–ú–ò -->
        <div class="timeline" id="timeline" hidden>
          <div class="wheel" id="dateWheel"
               tabindex="0"
               aria-label="–í—ã–±–æ—Ä –¥–∞—Ç—ã"
               role="listbox"></div>
          <div class="wheel-mask" aria-hidden="true"></div>
        </div>

        <!-- –ü–û–î–ü–ò–°–¨ –ü–û–î –î–ê–¢–ê–ú–ò -->
        <div id="pfHApp-title" class="macro-hint">
          –î–∏–Ω–∞–º–∏–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–º–µ—Ä–æ–≤ —Ç–µ–ª–∞
        </div>

      </div>
    </div>
  </div> <!-- /section-content -->
</section>


  <!-- –°–ï–ö–¶–ò–Ø 3: AI-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
  <section class="section" id="sec-ai">
    <div class="section-h" data-toggle="sec-ai" role="button" tabindex="0"
         aria-controls="sec-ai" aria-expanded="true">
      <h2>–ê–Ω–∞–ª–∏–∑ –ò–ò</h2>
      <div class="toggle" aria-hidden="true">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M8 10l4 4 4-4" stroke="white" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>

    <div class="section-content" id="ai-comment">
      <div class="field">
        <div class="help">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É, –ò–ò —Å–¥–µ–ª–∞–µ—Ç –∞–Ω–∞–ª–∏–∑.</div>
      </div>
    </div>
  </section>

  <!-- –ê–¥–º–∏–Ω—Å–∫–∞—è "–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã" (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ user_id) -->
  <div id="admin-section-anchor"></div>
</div>

<script src="measurements.js"></script>


</body>
</html>
