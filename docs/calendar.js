const a2_0x29ac28=a2_0x246e;(function(_0x13369b,_0x130151){const _0x2bf470=a2_0x246e,_0x5cbf0b=_0x13369b();while(!![]){try{const _0x54e23d=parseInt(_0x2bf470(0xf2))/0x1*(parseInt(_0x2bf470(0xe4))/0x2)+-parseInt(_0x2bf470(0x11f))/0x3+-parseInt(_0x2bf470(0x103))/0x4+parseInt(_0x2bf470(0x9c))/0x5*(-parseInt(_0x2bf470(0x107))/0x6)+-parseInt(_0x2bf470(0xc2))/0x7+-parseInt(_0x2bf470(0x1d5))/0x8*(-parseInt(_0x2bf470(0x124))/0x9)+-parseInt(_0x2bf470(0x1f7))/0xa*(-parseInt(_0x2bf470(0xe7))/0xb);if(_0x54e23d===_0x130151)break;else _0x5cbf0b['push'](_0x5cbf0b['shift']());}catch(_0x6cb08b){_0x5cbf0b['push'](_0x5cbf0b['shift']());}}}(a2_0x4583,0xcb2b3),function initTMA(){const _0x2df56b=a2_0x246e;try{const _0x18cbd4=window[_0x2df56b(0x1ee)]?.[_0x2df56b(0x16a)];if(!_0x18cbd4)return;_0x18cbd4[_0x2df56b(0xb4)](),_0x18cbd4['expand']();try{_0x18cbd4['setHeaderColor'](_0x2df56b(0x1fb)),_0x18cbd4[_0x2df56b(0xbb)]&&_0x18cbd4[_0x2df56b(0xbb)](_0x2df56b(0x1fb));}catch(_0x1d0f7c){console[_0x2df56b(0x90)]('Error\x20setting\x20color:',_0x1d0f7c);}try{_0x18cbd4[_0x2df56b(0x126)]&&(_0x18cbd4['BackButton'][_0x2df56b(0x102)](),_0x18cbd4[_0x2df56b(0x126)][_0x2df56b(0xe1)](),_0x18cbd4['BackButton'][_0x2df56b(0x168)](function(){const _0x5ca94d=_0x2df56b;window[_0x5ca94d(0x150)][_0x5ca94d(0x119)]=_0x5ca94d(0x196);}));}catch(_0x936270){console[_0x2df56b(0x90)](_0x2df56b(0x204),_0x936270);}try{if(_0x18cbd4[_0x2df56b(0x91)])_0x18cbd4[_0x2df56b(0x91)]();}catch(_0x42eff3){}}catch(_0x2b9b34){console[_0x2df56b(0x1b8)](_0x2df56b(0x14d),_0x2b9b34);}}());function isAdmin(){const _0x219643=a2_0x246e;try{const _0x413675=Number(window[_0x219643(0x1ee)]?.[_0x219643(0x16a)]?.[_0x219643(0xc3)]?.['user']?.['id']);return _0x413675===0xbaf7174;}catch(_0x5204cc){return![];}}const APP_VERSION='v9.0-BATCH-CALENDAR',API_URL=a2_0x29ac28(0x1bd),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x29ac28(0x8c),KEY_SESSIONS='uc_sessions_v9',KEY_SETTINGS='uc_settings_v9';let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x35481f=a2_0x29ac28;return window['Telegram']?.[_0x35481f(0x16a)]?.[_0x35481f(0xc3)]?.[_0x35481f(0x125)]?.['id']||_0x35481f(0x147);},'saveLocally'(){const _0x1dd655=a2_0x29ac28;try{localStorage['setItem'](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x1dd655(0xfd)](KEY_SESSIONS,JSON[_0x1dd655(0x173)](sessions)),localStorage[_0x1dd655(0xfd)](KEY_SETTINGS,JSON[_0x1dd655(0x173)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x5e3b4c){console[_0x1dd655(0x1b8)](_0x1dd655(0x1cb),_0x5e3b4c);}},'loadLocal'(){const _0x4deae0=a2_0x29ac28;try{const _0x220d2c=localStorage[_0x4deae0(0xa5)](KEY_CLIENTS);if(_0x220d2c)clients=JSON[_0x4deae0(0x152)](_0x220d2c);const _0x420a68=localStorage['getItem'](KEY_SESSIONS);if(_0x420a68)sessions=JSON['parse'](_0x420a68);const _0x529ccf=localStorage['getItem'](KEY_SETTINGS);if(_0x529ccf){const _0x358cb0=JSON[_0x4deae0(0x152)](_0x529ccf);if(_0x358cb0[_0x4deae0(0x1b0)])availabilityPattern=_0x358cb0['pattern'];if(_0x358cb0[_0x4deae0(0xf6)])dateExceptions=_0x358cb0[_0x4deae0(0xf6)];if(_0x358cb0[_0x4deae0(0x112)])specialRanges=_0x358cb0[_0x4deae0(0x112)];}else{for(let _0x4a114d=0x0;_0x4a114d<0x7;_0x4a114d++)availabilityPattern[_0x4a114d]=Array[_0x4deae0(0x180)]({'length':0xc},(_0x355875,_0x459e44)=>_0x459e44+0x9);}}catch(_0x37ef77){console['error'](_0x4deae0(0x167),_0x37ef77);}},async 'fetchFromServer'(_0x532565,_0x2ebd63={}){const _0x30c40c=a2_0x29ac28,_0x297498=window[_0x30c40c(0x1ee)]?.[_0x30c40c(0x16a)],_0xbcea={'action':_0x532565,'init_data':_0x297498?.[_0x30c40c(0x15f)]||'',..._0x2ebd63};try{const _0x8e4422=await fetch(API_URL,{'method':'POST','headers':{'Content-Type':_0x30c40c(0xd0)},'body':JSON['stringify'](_0xbcea)}),_0x2b453c=await _0x8e4422[_0x30c40c(0x116)]();if(!_0x2b453c['ok'])throw new Error(_0x2b453c['error']||_0x30c40c(0x1dd));return _0x2b453c[_0x30c40c(0xcc)];}catch(_0x34754d){console[_0x30c40c(0x1b8)](_0x30c40c(0x164)+_0x532565+_0x30c40c(0x1b7),_0x34754d);throw _0x34754d;}},async 'syncLoad'(){const _0x2851e3=a2_0x29ac28,_0x5c8220=new Date(),_0x19e2aa=_0x5c8220['getFullYear']()+'-'+String(_0x5c8220[_0x2851e3(0x1cd)]()+0x1)[_0x2851e3(0x209)](0x2,'0'),_0x1f80e0=new Date(_0x5c8220);_0x1f80e0['setMonth'](_0x5c8220[_0x2851e3(0x1cd)]()+0x1);const _0x1b48d5=_0x1f80e0[_0x2851e3(0xea)]()+'-'+String(_0x1f80e0[_0x2851e3(0x1cd)]()+0x1)[_0x2851e3(0x209)](0x2,'0'),_0x28c72d=Date[_0x2851e3(0xd7)]();console[_0x2851e3(0x90)](_0x2851e3(0x1bc)+_0x19e2aa+',\x20'+_0x1b48d5+_0x2851e3(0x1dc));try{const [_0x32011a,_0x4190be]=await Promise['all']([this['fetchFromServer'](_0x2851e3(0x1c1),{'month_str':_0x19e2aa}),this[_0x2851e3(0x207)](_0x2851e3(0x1c1),{'month_str':_0x1b48d5})]);if(lastUserActionTime>_0x28c72d)return console[_0x2851e3(0x11e)](_0x2851e3(0x1da)),![];return this[_0x2851e3(0x18a)](_0x32011a,_0x19e2aa),this[_0x2851e3(0x18a)](_0x4190be,_0x1b48d5),this[_0x2851e3(0xc0)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0xdcd52d){console[_0x2851e3(0x1b8)](_0xdcd52d);throw _0xdcd52d;}},'mergeServerData'(_0x6db2d6,_0x3345c8){const _0x29fd00=a2_0x29ac28;if(!_0x6db2d6)return;_0x6db2d6[_0x29fd00(0x101)]&&Array['isArray'](_0x6db2d6[_0x29fd00(0x101)])&&(clients=_0x6db2d6[_0x29fd00(0x101)]);if(_0x6db2d6[_0x29fd00(0x132)]){if(_0x6db2d6['settings'][_0x29fd00(0x1b0)])availabilityPattern=_0x6db2d6[_0x29fd00(0x132)][_0x29fd00(0x1b0)];if(_0x6db2d6[_0x29fd00(0x132)][_0x29fd00(0xf6)])dateExceptions=_0x6db2d6[_0x29fd00(0x132)][_0x29fd00(0xf6)];if(_0x6db2d6[_0x29fd00(0x132)][_0x29fd00(0x112)])specialRanges=_0x6db2d6['settings']['ranges'];if(_0x6db2d6['settings'][_0x29fd00(0x14c)]){localStorage[_0x29fd00(0xfd)]('uc_settings_cancel_window',_0x6db2d6[_0x29fd00(0x132)][_0x29fd00(0x14c)]);const _0x156696=document[_0x29fd00(0x156)]('settingCancelWindow');if(_0x156696)_0x156696['value']=_0x6db2d6['settings'][_0x29fd00(0x14c)];}}_0x6db2d6[_0x29fd00(0x203)]&&(sessions=sessions[_0x29fd00(0x12b)](_0x182bd5=>!_0x182bd5[_0x29fd00(0x97)][_0x29fd00(0x1e8)](_0x3345c8)),Object[_0x29fd00(0x1c3)](_0x6db2d6[_0x29fd00(0x203)])[_0x29fd00(0x14b)](_0x3b9468=>{const _0xc4538b=_0x29fd00,_0x525aa6=_0x6db2d6[_0xc4538b(0x203)][_0x3b9468];_0x525aa6[_0xc4538b(0x14b)](_0x594c14=>{const _0x1d8310=_0xc4538b,_0x38cde4=clients['find'](_0x1ec627=>String(_0x1ec627['id'])===String(_0x594c14['c']));sessions[_0x1d8310(0x149)]({'id':_0x594c14['i'],'clientId':_0x594c14['c'],'client':_0x38cde4?_0x38cde4[_0x1d8310(0xf3)]:'Unknown','dateStr':_0x3345c8+'-'+_0x3b9468['padStart'](0x2,'0'),'start':_0x594c14['s'],'end':_0x594c14['e'],'status':_0x594c14['st']||_0x1d8310(0xdd),'note':_0x594c14['n']||'','seriesId':_0x594c14[_0x1d8310(0x1b4)]||null});});}));},async 'syncBatch'(_0x132002){const _0x289fd9=a2_0x29ac28,_0x50c54f=[...new Set(_0x132002)],_0xe2a7f4=_0x50c54f[_0x289fd9(0xb0)](_0x7e90b8=>{const _0x31f979=_0x289fd9,_0x12858b=sessions[_0x31f979(0x12b)](_0x14ad58=>_0x14ad58[_0x31f979(0x97)]===_0x7e90b8&&_0x14ad58[_0x31f979(0x11a)]!==_0x31f979(0x15b)),_0x220b80=_0x12858b[_0x31f979(0xb0)](_0x3cc283=>({'i':_0x3cc283['id'],'c':_0x3cc283[_0x31f979(0x1ea)],'s':_0x3cc283[_0x31f979(0xd1)],'e':_0x3cc283[_0x31f979(0x1f2)],'st':_0x3cc283[_0x31f979(0x11a)],'n':_0x3cc283[_0x31f979(0x17e)],'sid':_0x3cc283['seriesId']}));return{'date':_0x7e90b8,'day_data':_0x220b80};});if(_0xe2a7f4[_0x289fd9(0x114)]===0x0)return;console['log'](_0x289fd9(0x18e)+_0xe2a7f4[_0x289fd9(0x114)]+_0x289fd9(0x122)),await this['fetchFromServer']('batch_sync',{'changes':_0xe2a7f4});}};async function init(){const _0x253541=a2_0x29ac28;DataManager[_0x253541(0x1ec)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x253541(0x159))[_0x253541(0xe8)](_0x253541(0x137),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x253541(0x16c)]()[_0x253541(0xc5)](()=>{const _0x189a7f=_0x253541;showToast(_0x189a7f(0x1fc),!![]);})[_0x253541(0xd4)](_0x2431b9=>{const _0x5988e2=_0x253541;showToast(_0x5988e2(0x154),![]);});}function generateId(){const _0x1bde60=a2_0x29ac28;return Date[_0x1bde60(0xd7)]()[_0x1bde60(0xec)](0x24)+Math['random']()['toString'](0x24)[_0x1bde60(0x12a)](0x2,0x5);}function toggleSeriesInput(){const _0x3343df=a2_0x29ac28,_0xfb6f4=document[_0x3343df(0x156)]('inpRecurring')[_0x3343df(0x179)],_0x383722=document['getElementById'](_0x3343df(0x1b6));_0x383722[_0x3343df(0x12f)][_0x3343df(0x108)]=_0xfb6f4?_0x3343df(0x1e3):_0x3343df(0x205);const _0x3151a3=document[_0x3343df(0x156)](_0x3343df(0x17f));_0x3151a3['style'][_0x3343df(0x98)]=_0xfb6f4?'10px\x2010px\x200\x200':_0x3343df(0xe6);}function openAddSession(_0x100b17){const _0x23d634=a2_0x29ac28;editingId=null,populateClientSelect(),document[_0x23d634(0x156)](_0x23d634(0x185))['textContent']='Новая\x20запись',document['getElementById'](_0x23d634(0x1c8))[_0x23d634(0x12f)]['display']=_0x23d634(0x205),document[_0x23d634(0x156)](_0x23d634(0x1df))[_0x23d634(0x12f)][_0x23d634(0x108)]=_0x23d634(0x205);const _0x58fe6d=document[_0x23d634(0x156)](_0x23d634(0x17f)),_0x38730b=document['getElementById'](_0x23d634(0x1b6));_0x58fe6d['style'][_0x23d634(0x108)]=_0x23d634(0x19e),_0x58fe6d[_0x23d634(0x12f)][_0x23d634(0x98)]=_0x23d634(0xe6),document[_0x23d634(0x156)](_0x23d634(0x1ab))[_0x23d634(0x179)]=![],document[_0x23d634(0x156)]('inpSeriesCount')[_0x23d634(0x208)]=0x4,_0x38730b[_0x23d634(0x12f)][_0x23d634(0x108)]=_0x23d634(0x205),document['getElementById'](_0x23d634(0x175))['value']=getLocalDateStr(_0x100b17),updateDateDisplay();const _0x257017=_0x100b17['getHours']();document[_0x23d634(0x156)](_0x23d634(0x10e))[_0x23d634(0x208)]=String(_0x257017)['padStart'](0x2,'0')+':00',document[_0x23d634(0x156)](_0x23d634(0x16b))[_0x23d634(0x208)]=String(_0x257017+0x1)[_0x23d634(0x209)](0x2,'0')+':00',openSheet('sessionSheet');}function openEdit(_0x336933){const _0x2e8180=a2_0x29ac28;editingId=_0x336933['id'],populateClientSelect(),document[_0x2e8180(0x156)](_0x2e8180(0x185))[_0x2e8180(0x13d)]=_0x2e8180(0x191),document['getElementById'](_0x2e8180(0x1c8))[_0x2e8180(0x12f)]['display']=_0x2e8180(0x1e3);const _0xaa6b65=document[_0x2e8180(0x156)](_0x2e8180(0x1df));_0xaa6b65[_0x2e8180(0x12f)]['display']='flex';_0x336933[_0x2e8180(0x11a)]===_0x2e8180(0x19f)?(_0xaa6b65[_0x2e8180(0x182)]=_0x2e8180(0xb8),_0xaa6b65[_0x2e8180(0x1b2)]=_0x2e8180(0x1e2)):(_0xaa6b65[_0x2e8180(0x182)]=_0x2e8180(0x96),_0xaa6b65[_0x2e8180(0x1b2)]='<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку');const _0xf5675=!!_0x336933[_0x2e8180(0x121)];document[_0x2e8180(0x156)](_0x2e8180(0x17f))[_0x2e8180(0x12f)][_0x2e8180(0x108)]='none',document['getElementById'](_0x2e8180(0x1b6))[_0x2e8180(0x12f)][_0x2e8180(0x108)]=_0x2e8180(0x205),_0xf5675?(document[_0x2e8180(0x156)]('patternInfoBox')['style'][_0x2e8180(0x108)]=_0x2e8180(0x19e),document[_0x2e8180(0x156)](_0x2e8180(0xab))[_0x2e8180(0x8d)](_0x2e8180(0xd3))[_0x2e8180(0x13d)]=_0x2e8180(0xd6)):document[_0x2e8180(0x156)](_0x2e8180(0xab))[_0x2e8180(0x12f)][_0x2e8180(0x108)]=_0x2e8180(0x205),document[_0x2e8180(0x156)](_0x2e8180(0x1d3))[_0x2e8180(0x208)]=_0x336933[_0x2e8180(0xde)],document[_0x2e8180(0x156)](_0x2e8180(0x175))[_0x2e8180(0x208)]=_0x336933[_0x2e8180(0x97)],document[_0x2e8180(0x156)]('inpStart')['value']=_0x336933[_0x2e8180(0xd1)],document[_0x2e8180(0x156)](_0x2e8180(0x16b))['value']=_0x336933['end'],document[_0x2e8180(0x156)]('inpNote')[_0x2e8180(0x208)]=_0x336933[_0x2e8180(0x17e)]||'',updateDateDisplay(),openSheet(_0x2e8180(0x183));}async function trySaveSession(){const _0x152339=a2_0x29ac28,_0x4507f8=document[_0x152339(0x156)](_0x152339(0x1d3))[_0x152339(0x208)],_0x1054ab=document[_0x152339(0x156)](_0x152339(0x175))[_0x152339(0x208)],_0x35bfa3=document['getElementById'](_0x152339(0x10e))['value'],_0x421bde=document['getElementById'](_0x152339(0x16b))[_0x152339(0x208)],_0x1ceefa=document['getElementById']('inpNote')[_0x152339(0x208)],_0x3c2a34=document['getElementById'](_0x152339(0x1ab))[_0x152339(0x179)];let _0x51a386=0x4;if(_0x3c2a34){const _0x5b2ab9=parseInt(document[_0x152339(0x156)]('inpSeriesCount')[_0x152339(0x208)]);if(!_0x5b2ab9||_0x5b2ab9<0x2){showToast(_0x152339(0x1e6),![]);return;}if(_0x5b2ab9>0x64){showToast(_0x152339(0x129),![]);return;}_0x51a386=_0x5b2ab9;}const _0x4f6bad=clients[_0x152339(0xa6)](_0x484d0f=>_0x484d0f[_0x152339(0xf3)]===_0x4507f8);if(!_0x4f6bad){showToast('Ошибка:\x20Выберите\x20клиента\x20из\x20списка',![]);return;}const _0x58d8bc=validateAppointment(_0x1054ab,_0x35bfa3,_0x421bde,editingId,_0x4f6bad['id']);if(!_0x58d8bc[_0x152339(0x1b1)]){showToast(_0x58d8bc[_0x152339(0x1bf)],![]);return;}_0x58d8bc[_0x152339(0x1ce)]&&showToast(_0x58d8bc[_0x152339(0x1ce)],![]);const _0x32e6fc={'client':_0x4507f8,'clientId':_0x4f6bad['id'],'start':_0x35bfa3,'end':_0x421bde,'note':_0x1ceefa,'status':_0x152339(0xdd)},_0x5529e5=editingId?sessions[_0x152339(0xa6)](_0x21fb34=>_0x21fb34['id']===editingId):null;if(_0x5529e5&&_0x5529e5[_0x152339(0x121)]){tempSessionData={..._0x32e6fc,'dateStr':_0x1054ab,'id':editingId,'seriesId':_0x5529e5['seriesId']},openActionSheet('save');return;}let _0x468ec0=null;if(!editingId)_0x468ec0='create';else{if(_0x5529e5){if(String(_0x5529e5[_0x152339(0x1ea)])!==String(_0x4f6bad['id']))console[_0x152339(0x90)]('[Notify]\x20Client\x20SWAP\x20detected'),NotificationManager['send'](_0x152339(0x15e),_0x5529e5),_0x468ec0=_0x152339(0x172);else(_0x5529e5[_0x152339(0xd1)]!==_0x35bfa3||_0x5529e5['end']!==_0x421bde||_0x5529e5[_0x152339(0x97)]!==_0x1054ab)&&(_0x468ec0='update');}}if(!editingId&&_0x3c2a34){createBatchSeries(_0x32e6fc,_0x1054ab,_0x51a386),NotificationManager[_0x152339(0x200)](_0x152339(0x172),{..._0x32e6fc,'dateStr':_0x1054ab});return;}lastUserActionTime=Date[_0x152339(0xd7)]();const _0x3078dd={..._0x32e6fc,'dateStr':_0x1054ab,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x3078dd),_0x468ec0&&NotificationManager[_0x152339(0x200)](_0x468ec0,_0x3078dd);}function toggleSessionStatus(){const _0x264e43=a2_0x29ac28;lastUserActionTime=Date['now']();const _0x927e0b=sessions[_0x264e43(0xa6)](_0x13234b=>_0x13234b['id']===editingId);if(!_0x927e0b)return;const _0x28b426=_0x927e0b[_0x264e43(0x11a)]===_0x264e43(0x19f)?_0x264e43(0xdd):_0x264e43(0x19f);_0x927e0b[_0x264e43(0x11a)]=_0x28b426,saveSingleSession(_0x927e0b),_0x28b426===_0x264e43(0x19f)&&NotificationManager[_0x264e43(0x200)](_0x264e43(0x127),_0x927e0b),showToast(_0x28b426===_0x264e43(0x19f)?'Тренировка\x20завершена':_0x264e43(0xed),!![]);}function validateAppointment(_0x550edc,_0x41eeaa,_0x18b403,_0x19da19,_0x5f5d9c){const _0x31762e=a2_0x29ac28,[_0xe02c3d,_0x21850a]=_0x41eeaa[_0x31762e(0xaa)](':')[_0x31762e(0xb0)](Number),[_0xc5d33d,_0x4955c0]=_0x18b403[_0x31762e(0xaa)](':')['map'](Number),_0x5eaab3=_0xe02c3d*0x3c+_0x21850a,_0xe6e8b4=_0xc5d33d*0x3c+_0x4955c0,_0xde2a8d=String(_0x5f5d9c);let _0x378af3=![],_0x5ed4b3='';for(let _0x10ced4 of sessions){if(_0x10ced4['dateStr']!==_0x550edc)continue;if(_0x10ced4[_0x31762e(0x11a)]==='cancelled')continue;if(_0x19da19&&String(_0x10ced4['id'])===String(_0x19da19))continue;const [_0x4859e2,_0x6dbedd]=_0x10ced4[_0x31762e(0xd1)]['split'](':')[_0x31762e(0xb0)](Number),[_0x72b5cb,_0x27f1b2]=_0x10ced4[_0x31762e(0x1f2)][_0x31762e(0xaa)](':')[_0x31762e(0xb0)](Number),_0x45610c=_0x4859e2*0x3c+_0x6dbedd,_0x460363=_0x72b5cb*0x3c+_0x27f1b2;if(Math[_0x31762e(0x1ca)](_0x5eaab3,_0x45610c)<Math['min'](_0xe6e8b4,_0x460363)){if(_0x10ced4[_0x31762e(0x1ea)]&&String(_0x10ced4[_0x31762e(0x1ea)])===_0xde2a8d)return{'valid':![],'msg':_0x31762e(0x1ff)+_0x10ced4['client']+_0x31762e(0x17c)};_0x378af3=!![],_0x5ed4b3=_0x10ced4[_0x31762e(0xde)];}}if(_0x378af3)return{'valid':!![],'warning':'Групповая:\x20также\x20записан\x20'+_0x5ed4b3};return{'valid':!![]};}function saveSingleSession(_0x5e1963){const _0x464cb5=a2_0x29ac28;if(editingId){const _0x632fb9=sessions[_0x464cb5(0x1ad)](_0x43f7cc=>_0x43f7cc['id']===editingId);if(_0x632fb9!==-0x1)sessions[_0x632fb9]=_0x5e1963;}else sessions[_0x464cb5(0x149)](_0x5e1963);afterSaveAction([_0x5e1963[_0x464cb5(0x97)]]);}function createBatchSeries(_0x3479d8,_0xa9fea1,_0x5ed4a0){const _0x163f03=a2_0x29ac28,_0x251d64=generateId(),_0xa69bdb=[],_0x111534=[];let _0x1372fb=0x0,_0x4ec28c=new Date(_0xa9fea1);for(let _0x25704b=0x0;_0x25704b<_0x5ed4a0;_0x25704b++){const _0x157c9a=getLocalDateStr(_0x4ec28c),_0x5e0e70=validateAppointment(_0x157c9a,_0x3479d8[_0x163f03(0xd1)],_0x3479d8[_0x163f03(0x1f2)],null,_0x3479d8[_0x163f03(0x1ea)]);if(!_0x5e0e70[_0x163f03(0x1b1)])console[_0x163f03(0x90)]('[Series]\x20Skipped\x20'+_0x157c9a+':\x20Client\x20already\x20booked'),_0x1372fb++;else{const _0x405000={..._0x3479d8,'id':generateId(),'dateStr':_0x157c9a,'seriesId':_0x251d64};_0x111534[_0x163f03(0x149)](_0x405000),_0xa69bdb[_0x163f03(0x149)](_0x157c9a);}_0x4ec28c[_0x163f03(0x201)](_0x4ec28c[_0x163f03(0x181)]()+0x7);}if(_0x111534[_0x163f03(0x114)]===0x0){showToast('Все\x20даты\x20заняты\x20этим\x20клиентом!',![]);return;}sessions[_0x163f03(0x149)](..._0x111534),lastUserActionTime=Date[_0x163f03(0xd7)]();let _0xe464db=_0x163f03(0x1eb)+_0x111534[_0x163f03(0x114)];_0x1372fb>0x0&&(_0xe464db+=_0x163f03(0x145)+_0x1372fb+')'),showToast(_0xe464db,!![]),afterSaveAction(_0xa69bdb);}function updateSeriesBatch(_0x19775f,_0x243024){const _0x302b9c=a2_0x29ac28,_0x2f60ab=[],_0x481cf5=_0x243024['seriesId'];if(_0x19775f===_0x302b9c(0x10b)){const _0x3a671e={..._0x243024,'seriesId':null},_0x504875=sessions['findIndex'](_0x286374=>_0x286374['id']===_0x243024['id']);if(_0x504875!==-0x1)sessions[_0x504875]=_0x3a671e;_0x2f60ab[_0x302b9c(0x149)](_0x3a671e['dateStr']);}else{if(_0x19775f==='series'){const _0x429705=_0x243024[_0x302b9c(0x97)];sessions['forEach']((_0x35bc56,_0x234b2f)=>{const _0x6285e=_0x302b9c;_0x35bc56['seriesId']===_0x481cf5&&_0x35bc56[_0x6285e(0x97)]>=_0x429705&&(sessions[_0x234b2f]={...sessions[_0x234b2f],'start':_0x243024[_0x6285e(0xd1)],'end':_0x243024[_0x6285e(0x1f2)],'note':_0x243024[_0x6285e(0x17e)],'client':_0x243024[_0x6285e(0xde)],'clientId':_0x243024[_0x6285e(0x1ea)]},_0x2f60ab['push'](_0x35bc56[_0x6285e(0x97)]));});}}afterSaveAction(_0x2f60ab);}function tryDeleteSession(){const _0xf2078=a2_0x29ac28,_0x12463c=sessions[_0xf2078(0xa6)](_0x9cd25d=>_0x9cd25d['id']===editingId);if(!_0x12463c)return;_0x12463c[_0xf2078(0x121)]?openActionSheet(_0xf2078(0x19d)):commitDelete(_0xf2078(0x10b),_0x12463c);}function commitDelete(_0x523250,_0xdf829f){const _0x277604=a2_0x29ac28;lastUserActionTime=Date[_0x277604(0xd7)](),NotificationManager['send']('cancel',_0xdf829f);const _0x38b291=[];if(_0x523250===_0x277604(0x10b))sessions=sessions[_0x277604(0x12b)](_0x35e5de=>_0x35e5de['id']!==_0xdf829f['id']),_0x38b291[_0x277604(0x149)](_0xdf829f['dateStr']);else{if(_0x523250==='series'){const _0x3fa4a3=_0xdf829f[_0x277604(0x97)],_0x314256=_0xdf829f['seriesId'];sessions[_0x277604(0x14b)](_0x487ea4=>{const _0x3a4cd5=_0x277604;_0x487ea4['seriesId']===_0x314256&&_0x487ea4['dateStr']>=_0x3fa4a3&&_0x38b291[_0x3a4cd5(0x149)](_0x487ea4[_0x3a4cd5(0x97)]);}),sessions=sessions[_0x277604(0x12b)](_0x21f9fb=>!(_0x21f9fb[_0x277604(0x121)]===_0x314256&&_0x21f9fb['dateStr']>=_0x3fa4a3));}}afterSaveAction(_0x38b291);}function afterSaveAction(_0x281552){const _0x4afdff=a2_0x29ac28;DataManager[_0x4afdff(0xc0)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x4afdff(0xef)](_0x281552)[_0x4afdff(0xc5)](()=>console[_0x4afdff(0x90)](_0x4afdff(0x162)))[_0x4afdff(0xd4)](_0x400ef8=>showToast(_0x4afdff(0xa4),![]));}const NotificationManager={'formatDate'(_0x39aa3f){const _0x19cc97=a2_0x29ac28,_0x4937fd=new Date(_0x39aa3f),_0x5a0912={'weekday':_0x19cc97(0x1aa),'day':_0x19cc97(0xcd),'month':_0x19cc97(0x1aa)};let _0x39e32d=_0x4937fd[_0x19cc97(0x1ba)]('ru-RU',_0x5a0912);return _0x39e32d['charAt'](0x0)[_0x19cc97(0x157)]()+_0x39e32d[_0x19cc97(0x163)](0x1);},'getText'(_0x3cf7c0,_0x34a37f){const _0x39a0ba=a2_0x29ac28,_0x3a6def=this[_0x39a0ba(0xf9)](_0x34a37f[_0x39a0ba(0x97)]);switch(_0x3cf7c0){case _0x39a0ba(0x172):return _0x39a0ba(0xe3)+(_0x39a0ba(0x110)+_0x3a6def+'\x0a')+(_0x39a0ba(0x18c)+_0x34a37f[_0x39a0ba(0xd1)]+_0x39a0ba(0x165)+_0x34a37f[_0x39a0ba(0x1f2)]+'\x0a\x0a')+_0x39a0ba(0x1d1);case _0x39a0ba(0x169):return _0x39a0ba(0xb2)+'Ваша\x20тренировка\x20перенесена:\x0a\x0a'+('<b>✅\x20'+_0x34a37f['start']+'\x20—\x20'+_0x34a37f[_0x39a0ba(0x1f2)]+_0x39a0ba(0x1d6))+(_0x39a0ba(0x110)+_0x3a6def);case _0x39a0ba(0x15e):return _0x39a0ba(0xf4)+(_0x39a0ba(0xda)+_0x3a6def+'\x20('+_0x34a37f['start']+')</b>\x20была\x20удалена\x20из\x20расписания.');case _0x39a0ba(0x127):return _0x39a0ba(0x1a7)+_0x39a0ba(0xb5)+_0x39a0ba(0x1a9);default:return'';}},async 'send'(_0x2df5bd,_0x55462c){const _0x1e8bb5=a2_0x29ac28;console[_0x1e8bb5(0x90)](_0x1e8bb5(0x12e),_0x2df5bd,_0x55462c);if(!_0x55462c){console[_0x1e8bb5(0x1b8)](_0x1e8bb5(0x1de));return;}const _0x596973=String(_0x55462c[_0x1e8bb5(0x1ea)]);console[_0x1e8bb5(0x90)](_0x1e8bb5(0xee),_0x596973);if(!_0x55462c[_0x1e8bb5(0x1ea)]||_0x596973===_0x1e8bb5(0x20c)||_0x596973===_0x1e8bb5(0x17d)){console[_0x1e8bb5(0x1b8)](_0x1e8bb5(0x195));if(_0x55462c[_0x1e8bb5(0xde)]){const _0x155d75=clients[_0x1e8bb5(0xa6)](_0x419271=>_0x419271[_0x1e8bb5(0xf3)]===_0x55462c[_0x1e8bb5(0xde)]);if(_0x155d75)return console[_0x1e8bb5(0x90)](_0x1e8bb5(0xc9),_0x155d75['id']),this['send'](_0x2df5bd,{..._0x55462c,'clientId':_0x155d75['id']});}return;}if(_0x596973[_0x1e8bb5(0x114)]<0x5){console[_0x1e8bb5(0x11e)](_0x1e8bb5(0x19a),_0x596973);return;}const _0x54b31c=this[_0x1e8bb5(0x99)](_0x2df5bd,_0x55462c);if(!_0x54b31c){console['error']('[Notify]\x20Error:\x20Text\x20generation\x20failed');return;}console[_0x1e8bb5(0x90)](_0x1e8bb5(0x141)+_0x596973+'...'),DataManager[_0x1e8bb5(0x207)](_0x1e8bb5(0xb1),{'chatId':_0x596973,'text':_0x54b31c})[_0x1e8bb5(0xc5)](_0x13af8b=>console[_0x1e8bb5(0x90)](_0x1e8bb5(0x1d2),_0x13af8b))['catch'](_0x54d890=>console['error'](_0x1e8bb5(0x187),_0x54d890));}};function getLocalDateStr(_0x4dfa25){const _0x9aa684=a2_0x29ac28,_0x39e3e9=_0x4dfa25[_0x9aa684(0xea)](),_0x42744a=String(_0x4dfa25[_0x9aa684(0x1cd)]()+0x1)['padStart'](0x2,'0'),_0x18c4d6=String(_0x4dfa25[_0x9aa684(0x181)]())[_0x9aa684(0x209)](0x2,'0');return _0x39e3e9+'-'+_0x42744a+'-'+_0x18c4d6;}function getDateStr(_0x281ac8){const _0x3bc38a=a2_0x29ac28,_0x5474c1=new Date();return _0x5474c1[_0x3bc38a(0x201)](_0x5474c1[_0x3bc38a(0x181)]()+_0x281ac8),getLocalDateStr(_0x5474c1);}function getStartOfWeek(_0x23cce2){const _0x3a726b=a2_0x29ac28,_0x484dc0=(function(){let _0x2318c2=!![];return function(_0x239685,_0x40cad0){const _0x315389=_0x2318c2?function(){if(_0x40cad0){const _0x53f550=_0x40cad0['apply'](_0x239685,arguments);return _0x40cad0=null,_0x53f550;}}:function(){};return _0x2318c2=![],_0x315389;};}()),_0x551bd1=_0x484dc0(this,function(){const _0x2d510c=a2_0x246e;return _0x551bd1[_0x2d510c(0xec)]()[_0x2d510c(0xd2)]('(((.+)+)+)+$')['toString']()['constructor'](_0x551bd1)[_0x2d510c(0xd2)](_0x2d510c(0x15d));});_0x551bd1();const _0x4a67e2=new Date(_0x23cce2),_0x9bf197=_0x4a67e2[_0x3a726b(0x10d)](),_0x387e75=_0x4a67e2['getDate']()-_0x9bf197+(_0x9bf197===0x0?-0x6:0x1);return _0x4a67e2['setDate'](_0x387e75),_0x4a67e2[_0x3a726b(0x1fe)](0x0,0x0,0x0,0x0),_0x4a67e2;}function hexToRgba(_0x11d539,_0x2c2ab){const _0x34b8b8=a2_0x29ac28;if(!_0x11d539)return _0x34b8b8(0xa9);let _0x31ac98=0x0,_0x56ceab=0x0,_0x36b696=0x0;if(_0x11d539[_0x34b8b8(0x114)]===0x4)_0x31ac98='0x'+_0x11d539[0x1]+_0x11d539[0x1],_0x56ceab='0x'+_0x11d539[0x2]+_0x11d539[0x2],_0x36b696='0x'+_0x11d539[0x3]+_0x11d539[0x3];else _0x11d539['length']===0x7&&(_0x31ac98='0x'+_0x11d539[0x1]+_0x11d539[0x2],_0x56ceab='0x'+_0x11d539[0x3]+_0x11d539[0x4],_0x36b696='0x'+_0x11d539[0x5]+_0x11d539[0x6]);return'rgba('+ +_0x31ac98+',\x20'+ +_0x56ceab+',\x20'+ +_0x36b696+',\x20'+_0x2c2ab+')';}function renderTimeColumn(){const _0xf2fdfd=a2_0x29ac28,_0x264811=document[_0xf2fdfd(0x156)](_0xf2fdfd(0x190)),_0x5079ee=document[_0xf2fdfd(0x156)](_0xf2fdfd(0x1f5));_0x264811[_0xf2fdfd(0x1b2)]='',_0x264811[_0xf2fdfd(0x10c)](_0x5079ee);for(let _0x521ffd=0x0;_0x521ffd<0x18;_0x521ffd++){const _0x241aee=document[_0xf2fdfd(0xb7)](_0xf2fdfd(0x1c4));_0x241aee[_0xf2fdfd(0x182)]='time-label';if(_0x521ffd>0x0)_0x241aee[_0xf2fdfd(0x1b2)]='<span>'+String(_0x521ffd)[_0xf2fdfd(0x209)](0x2,'0')+':00</span>';_0x264811[_0xf2fdfd(0x10c)](_0x241aee);}}function renderDayRange(_0x558cfb,_0x4a1edc){const _0x4e02ac=a2_0x29ac28,_0x27a428=document['getElementById']('daysHeaderTrack'),_0x5372f1=document[_0x4e02ac(0x156)](_0x4e02ac(0x178)),_0x2912df=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x3eb6ca=new Date();_0x3eb6ca[_0x4e02ac(0x1fe)](0x0,0x0,0x0,0x0);const _0x164bce=getLocalDateStr(new Date());for(let _0x50e782=_0x558cfb;_0x50e782<=_0x4a1edc;_0x50e782++){const _0x579a6b=new Date(_0x3eb6ca);_0x579a6b[_0x4e02ac(0x201)](_0x579a6b[_0x4e02ac(0x181)]()+_0x50e782);const _0x1c29ec=getLocalDateStr(_0x579a6b);let _0x3babb7=_0x579a6b['getDay']()-0x1;if(_0x3babb7===-0x1)_0x3babb7=0x6;const _0x5426fb=_0x1c29ec===_0x164bce,_0x40c965=document[_0x4e02ac(0xb7)](_0x4e02ac(0x1c4));_0x40c965['className']=_0x4e02ac(0xad)+(_0x5426fb?_0x4e02ac(0xcf):''),_0x40c965['id']=_0x4e02ac(0x1b9)+_0x1c29ec,_0x40c965['setAttribute'](_0x4e02ac(0x135),_0x1c29ec),_0x40c965[_0x4e02ac(0x1b2)]=_0x4e02ac(0x1c0)+_0x2912df[_0x3babb7]+_0x4e02ac(0xba)+_0x579a6b[_0x4e02ac(0x181)]()+_0x4e02ac(0x1e1)+_0x1c29ec+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x40c965[_0x4e02ac(0x19c)]=()=>openDayOptions(_0x1c29ec,_0x2912df[_0x3babb7]+'\x20'+_0x579a6b['getDate']()),_0x27a428[_0x4e02ac(0x10c)](_0x40c965);const _0x47c87c=document['createElement'](_0x4e02ac(0x1c4));_0x47c87c['className']=_0x4e02ac(0x128)+(_0x5426fb?_0x4e02ac(0xcf):''),_0x47c87c[_0x4e02ac(0x1bb)](_0x4e02ac(0x135),_0x1c29ec),_0x47c87c['setAttribute'](_0x4e02ac(0x198),_0x3babb7),renderEventsForColumn(_0x47c87c,_0x1c29ec,_0x3babb7),attachLongPressHandler(_0x47c87c,_0x579a6b),_0x5372f1[_0x4e02ac(0x10c)](_0x47c87c),updateDayStats(_0x1c29ec);}}function reRenderBlocks(){const _0x55ae6d=a2_0x29ac28;document[_0x55ae6d(0x1e5)](_0x55ae6d(0x12d))[_0x55ae6d(0x14b)](_0x4ceeef=>{const _0x291387=_0x55ae6d;_0x4ceeef['querySelectorAll'](_0x291387(0x115))[_0x291387(0x14b)](_0x283b2e=>_0x283b2e[_0x291387(0xdb)]());const _0x75b1de=_0x4ceeef[_0x291387(0x1cf)](_0x291387(0x135)),_0x40e51b=parseInt(_0x4ceeef['getAttribute'](_0x291387(0x198))),_0x1d5dec=Math[_0x291387(0x20a)](_0x4ceeef[_0x291387(0x19b)]);(availabilityPattern[_0x40e51b]||[])[_0x291387(0x14b)](_0x1b8992=>{const _0x2ea425=_0x291387,_0x51966e=document[_0x2ea425(0xb7)](_0x2ea425(0x1c4));_0x51966e[_0x2ea425(0x182)]=_0x2ea425(0x14e);const _0x333c87=_0x1b8992*GRID_H;_0x51966e[_0x2ea425(0x12f)][_0x2ea425(0x1cc)]=_0x333c87+'px',_0x51966e[_0x2ea425(0x12f)][_0x2ea425(0x16d)]='-'+_0x1d5dec+_0x2ea425(0x1c2)+_0x333c87+'px',_0x4ceeef[_0x2ea425(0x10c)](_0x51966e);});if(specialRanges&&specialRanges[_0x291387(0x114)]>0x0){const _0x11df75=new Date(_0x75b1de+'T00:00:00')[_0x291387(0xe5)](),_0x102db8=new Date(_0x75b1de+_0x291387(0x1f4))[_0x291387(0xe5)]();specialRanges[_0x291387(0x14b)](_0x239150=>{const _0x58a96e=_0x291387,_0x502d53=new Date(_0x239150[_0x58a96e(0xd1)])[_0x58a96e(0xe5)](),_0x295225=new Date(_0x239150[_0x58a96e(0x1f2)])[_0x58a96e(0xe5)](),_0x33a1cc=Math[_0x58a96e(0x1ca)](_0x11df75,_0x502d53),_0x43c581=Math[_0x58a96e(0x1a6)](_0x102db8,_0x295225);if(_0x33a1cc<_0x43c581){if(_0x33a1cc<=_0x11df75&&_0x43c581>=_0x102db8-0xea60){if(!_0x4ceeef[_0x58a96e(0x8d)](_0x58a96e(0x9a))){const _0x5e909c=document[_0x58a96e(0xb7)]('div');_0x5e909c['className']=_0x58a96e(0x113),_0x5e909c['style'][_0x58a96e(0x16d)]='-'+_0x1d5dec+'px\x200px',_0x4ceeef[_0x58a96e(0x10c)](_0x5e909c);}}else{const _0x177779=(_0x33a1cc-_0x11df75)/0x36ee80*GRID_H,_0x474ce9=(_0x43c581-_0x33a1cc)/0x36ee80*GRID_H,_0x1aa4e8=document[_0x58a96e(0xb7)](_0x58a96e(0x1c4));_0x1aa4e8[_0x58a96e(0x182)]='blocked-range-part\x20stripe-bg',_0x1aa4e8[_0x58a96e(0x12f)][_0x58a96e(0x1cc)]=_0x177779+'px',_0x1aa4e8[_0x58a96e(0x12f)][_0x58a96e(0x1ae)]=_0x474ce9+'px',_0x1aa4e8[_0x58a96e(0x12f)][_0x58a96e(0x16d)]='-'+_0x1d5dec+_0x58a96e(0x1c2)+_0x177779+'px',_0x4ceeef[_0x58a96e(0x10c)](_0x1aa4e8);}}});}if(dateExceptions[_0x75b1de]==='off'){if(!_0x4ceeef['querySelector'](_0x291387(0x9a))){const _0x5138ba=document['createElement'](_0x291387(0x1c4));_0x5138ba[_0x291387(0x182)]=_0x291387(0x113),_0x5138ba[_0x291387(0x12f)][_0x291387(0x16d)]='-'+_0x1d5dec+_0x291387(0x1f0),_0x4ceeef[_0x291387(0x10c)](_0x5138ba);}}renderEventsForColumn(_0x4ceeef,_0x75b1de,_0x40e51b),updateDayStats(_0x75b1de);});}function updateAllDayStats(){const _0x3d4a6d=a2_0x29ac28;document[_0x3d4a6d(0x1e5)](_0x3d4a6d(0x177))[_0x3d4a6d(0x14b)](_0xd95abc=>{const _0x5ec735=_0x3d4a6d;updateDayStats(_0xd95abc[_0x5ec735(0x1cf)](_0x5ec735(0x135)));});}function updateDayStats(_0x4526e0){const _0x155a63=a2_0x29ac28,_0x1e71b6=document['getElementById'](_0x155a63(0x1f9)+_0x4526e0);if(!_0x1e71b6)return;const _0x4ca3d2=new Date(_0x4526e0);let _0xc1bc20=_0x4ca3d2[_0x155a63(0x10d)]()-0x1;if(_0xc1bc20===-0x1)_0xc1bc20=0x6;if(dateExceptions[_0x4526e0]===_0x155a63(0x148)){_0x1e71b6[_0x155a63(0x12f)][_0x155a63(0x108)]=_0x155a63(0x205);return;}const _0x2b3677=availabilityPattern[_0xc1bc20]||[],_0x497887=0x18-_0x2b3677[_0x155a63(0x114)],_0xc8899a=_0x497887*0x3c,_0x515558=sessions[_0x155a63(0x12b)](_0x4b8a85=>_0x4b8a85['dateStr']===_0x4526e0&&_0x4b8a85[_0x155a63(0x11a)]!==_0x155a63(0x158));if(_0x515558[_0x155a63(0x114)]===0x0){_0x1e71b6[_0x155a63(0x12f)][_0x155a63(0x108)]=_0x155a63(0x205);return;}let _0x36e2fd=_0x515558[_0x155a63(0xb0)](_0xd595ca=>{const _0x23b8e9=_0x155a63,[_0xd7f8ed,_0x35549b]=_0xd595ca[_0x23b8e9(0xd1)][_0x23b8e9(0xaa)](':')['map'](Number),[_0x32e318,_0x483ab6]=_0xd595ca[_0x23b8e9(0x1f2)]['split'](':')[_0x23b8e9(0xb0)](Number);return[_0xd7f8ed*0x3c+_0x35549b,_0x32e318*0x3c+_0x483ab6];});_0x36e2fd[_0x155a63(0xe0)]((_0x5e506d,_0x3e640a)=>_0x5e506d[0x0]-_0x3e640a[0x0]);let _0x285559=[];if(_0x36e2fd[_0x155a63(0x114)]>0x0){let _0x330c62=_0x36e2fd[0x0];for(let _0x3d1849=0x1;_0x3d1849<_0x36e2fd['length'];_0x3d1849++){_0x36e2fd[_0x3d1849][0x0]<_0x330c62[0x1]?_0x330c62[0x1]=Math[_0x155a63(0x1ca)](_0x330c62[0x1],_0x36e2fd[_0x3d1849][0x1]):(_0x285559[_0x155a63(0x149)](_0x330c62),_0x330c62=_0x36e2fd[_0x3d1849]);}_0x285559['push'](_0x330c62);}let _0x11c928=0x0;_0x285559[_0x155a63(0x14b)](_0x17e1f1=>_0x11c928+=_0x17e1f1[0x1]-_0x17e1f1[0x0]),_0x1e71b6[_0x155a63(0x12f)][_0x155a63(0x108)]=_0x155a63(0x19e);const _0x1427ad=_0x1e71b6[_0x155a63(0x8d)](_0x155a63(0x1af));if(_0xc8899a===0x0){_0x1427ad[_0x155a63(0x12f)][_0x155a63(0x151)]=_0x155a63(0x12c),_0x1427ad[_0x155a63(0x12f)][_0x155a63(0x1f8)]=_0x155a63(0x166);return;}const _0x542db1=_0x11c928/_0xc8899a*0x64;console[_0x155a63(0x90)]('['+_0x4526e0+_0x155a63(0x17b)+_0x497887+'ч,\x20Занято:\x20'+_0x11c928+'мин,\x20Загрузка:\x20'+_0x542db1[_0x155a63(0x104)](0x1)+'%'),_0x542db1>0x64?(_0x1427ad[_0x155a63(0x12f)][_0x155a63(0x151)]='100%',_0x1427ad[_0x155a63(0x12f)]['background']=_0x155a63(0x166)):(_0x1427ad[_0x155a63(0x12f)]['width']=_0x542db1+'%',_0x1427ad[_0x155a63(0x12f)]['background']=_0x155a63(0x1a1));}function renderEventsForColumn(_0x41cdd9,_0x3a96e1,_0x4072a6){const _0x50292f=a2_0x29ac28,_0x58291c=sessions['filter'](_0x39774f=>_0x39774f[_0x50292f(0x97)]===_0x3a96e1),_0x3b9111=_0x58291c[_0x50292f(0xb0)](_0x1b6e9a=>{const _0x495305=_0x50292f,[_0x2d9e37,_0x29f82a]=_0x1b6e9a[_0x495305(0xd1)][_0x495305(0xaa)](':')['map'](Number),[_0x565d9a,_0x3697c0]=_0x1b6e9a[_0x495305(0x1f2)]['split'](':')[_0x495305(0xb0)](Number);return{'data':_0x1b6e9a,'start':_0x2d9e37*0x3c+_0x29f82a,'end':_0x565d9a*0x3c+_0x3697c0,'colIndex':0x0};});_0x3b9111[_0x50292f(0xe0)]((_0xfcba75,_0x45367e)=>{const _0x1feedb=_0x50292f;if(_0xfcba75[_0x1feedb(0xd1)]!==_0x45367e[_0x1feedb(0xd1)])return _0xfcba75[_0x1feedb(0xd1)]-_0x45367e[_0x1feedb(0xd1)];return _0x45367e[_0x1feedb(0x1f2)]-_0x45367e[_0x1feedb(0xd1)]-(_0xfcba75['end']-_0xfcba75['start']);});const _0x21a0e9=[];_0x3b9111['forEach'](_0x2610a4=>{const _0x284ec3=_0x50292f;let _0x17576d=![];for(let _0x1c4c2a=0x0;_0x1c4c2a<_0x21a0e9[_0x284ec3(0x114)];_0x1c4c2a++){const _0xb59d00=_0x21a0e9[_0x1c4c2a],_0xfa9e2a=_0xb59d00[_0xb59d00['length']-0x1];if(_0x2610a4[_0x284ec3(0xd1)]>=_0xfa9e2a[_0x284ec3(0x1f2)]){_0xb59d00['push'](_0x2610a4),_0x2610a4[_0x284ec3(0xc4)]=_0x1c4c2a,_0x17576d=!![];break;}}!_0x17576d&&(_0x21a0e9[_0x284ec3(0x149)]([_0x2610a4]),_0x2610a4['colIndex']=_0x21a0e9['length']-0x1);}),_0x3b9111[_0x50292f(0x14b)](_0xf3b31b=>{const _0x2f2ec4=_0x50292f;let _0xacb999=0x0;_0x3b9111[_0x2f2ec4(0x14b)](_0x572c7f=>{const _0x568206=_0x2f2ec4;if(Math[_0x568206(0x1ca)](_0xf3b31b[_0x568206(0xd1)],_0x572c7f[_0x568206(0xd1)])<Math[_0x568206(0x1a6)](_0xf3b31b[_0x568206(0x1f2)],_0x572c7f[_0x568206(0x1f2)])){if(_0x572c7f[_0x568206(0xc4)]>_0xacb999)_0xacb999=_0x572c7f['colIndex'];}});const _0x4c279d=_0xacb999+0x1,_0x3dcf02=0x64/_0x4c279d,_0x1b497c=_0xf3b31b[_0x2f2ec4(0xc4)]*_0x3dcf02,_0x3a935d=createEventEl(_0xf3b31b[_0x2f2ec4(0xcc)]);_0x3a935d[_0x2f2ec4(0x12f)]['width']=_0x2f2ec4(0x174)+_0x3dcf02+_0x2f2ec4(0x14f),_0x3a935d[_0x2f2ec4(0x12f)][_0x2f2ec4(0x13a)]=_0x2f2ec4(0x174)+_0x1b497c+'%\x20+\x202px)',_0x3a935d[_0x2f2ec4(0x12f)][_0x2f2ec4(0x118)]=0xa+_0xf3b31b[_0x2f2ec4(0xc4)],_0x3dcf02<0x55&&_0x3a935d[_0x2f2ec4(0xfe)][_0x2f2ec4(0x8e)]('mini'),_0x41cdd9[_0x2f2ec4(0x10c)](_0x3a935d);});}function createEventEl(_0x308d1e){const _0x5a8048=a2_0x29ac28,[_0x5c220d,_0x509617]=_0x308d1e[_0x5a8048(0xd1)][_0x5a8048(0xaa)](':')[_0x5a8048(0xb0)](Number),[_0x2399f8,_0x5411ff]=_0x308d1e[_0x5a8048(0x1f2)]['split'](':')[_0x5a8048(0xb0)](Number),_0x484252=(_0x5c220d*0x3c+_0x509617)/0x3c*GRID_H,_0x1eb8b5=(_0x2399f8*0x3c+_0x5411ff-(_0x5c220d*0x3c+_0x509617))/0x3c*GRID_H,_0x25d8af=document[_0x5a8048(0xb7)](_0x5a8048(0x1c4)),_0x39ecf0=_0x308d1e[_0x5a8048(0x11a)]===_0x5a8048(0x19f)?_0x5a8048(0xbf):'';_0x25d8af[_0x5a8048(0x182)]='event-card'+_0x39ecf0,_0x25d8af[_0x5a8048(0x12f)][_0x5a8048(0x1cc)]=_0x484252+'px',_0x25d8af[_0x5a8048(0x12f)]['height']=Math[_0x5a8048(0x1ca)](_0x1eb8b5,0x14)+'px';const _0x395351=clients[_0x5a8048(0xa6)](_0x26510b=>_0x308d1e['clientId']&&String(_0x26510b['id'])===String(_0x308d1e[_0x5a8048(0x1ea)])||_0x26510b[_0x5a8048(0xf3)]===_0x308d1e['client']),_0x11c562=_0x395351?_0x395351[_0x5a8048(0x1a4)]:_0x5a8048(0xa2);_0x25d8af[_0x5a8048(0x12f)][_0x5a8048(0x1a2)]=_0x11c562,_0x25d8af[_0x5a8048(0x12f)][_0x5a8048(0x15c)]=hexToRgba(_0x11c562,0.85);let _0x33cea6=_0x5a8048(0x9f)+_0x308d1e[_0x5a8048(0xde)]+_0x5a8048(0x20b)+_0x308d1e[_0x5a8048(0xd1)]+_0x5a8048(0xf1)+_0x308d1e[_0x5a8048(0x1f2)]+_0x5a8048(0xb6);return _0x308d1e['seriesId']&&(_0x33cea6+='<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>'),_0x308d1e[_0x5a8048(0x11a)]===_0x5a8048(0x19f)&&(_0x33cea6+='<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>'),_0x25d8af['innerHTML']=_0x33cea6,_0x25d8af[_0x5a8048(0x19c)]=_0x525fc0=>{const _0x2b5887=_0x5a8048;_0x525fc0[_0x2b5887(0x16f)](),openEdit(_0x308d1e);},_0x25d8af;}function attachLongPressHandler(_0x1d3a5f,_0x594cdc){const _0x524827=a2_0x29ac28;let _0x1c8fe9=0x0,_0x2728f3=null;const _0x5a46db=_0x3d55bf=>{const _0x372924=a2_0x246e;if(_0x3d55bf[_0x372924(0x1ed)][_0x372924(0x1fa)](_0x372924(0x138)))return;isScrolling=![],_0x1c8fe9=_0x3d55bf[_0x372924(0x93)]?_0x3d55bf[_0x372924(0x93)][0x0]['clientY']:_0x3d55bf[_0x372924(0x1b5)],_0x2728f3=setTimeout(()=>{const _0x70868=_0x372924;if(!isScrolling){navigator[_0x70868(0x94)]?.(0x32);const _0x1ef61a=_0x1d3a5f[_0x70868(0xfc)](),_0x4b75f5=Math['floor']((_0x1c8fe9-_0x1ef61a['top'])/GRID_H);_0x594cdc['setHours'](_0x4b75f5,0x0),openAddSession(_0x594cdc);}},0x1f4);},_0x5ce275=()=>{isScrolling=!![],clearTimeout(_0x2728f3);},_0x3e3c63=()=>{clearTimeout(_0x2728f3);};_0x1d3a5f[_0x524827(0xe8)](_0x524827(0x1e4),_0x5a46db,{'passive':!![]}),_0x1d3a5f[_0x524827(0xe8)](_0x524827(0x197),_0x5ce275,{'passive':!![]}),_0x1d3a5f[_0x524827(0xe8)]('touchend',_0x3e3c63),_0x1d3a5f['addEventListener'](_0x524827(0x188),_0x5a46db),_0x1d3a5f[_0x524827(0xe8)]('mousemove',_0x5ce275),_0x1d3a5f[_0x524827(0xe8)](_0x524827(0x11b),_0x3e3c63);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x25e303=a2_0x29ac28,_0x2473cb=document[_0x25e303(0x156)](_0x25e303(0x159)),_0x2cb148=_0x2473cb['scrollLeft'],_0xf4ef0f=_0x2473cb[_0x25e303(0xfa)],_0x4a8f32=_0x2473cb[_0x25e303(0x17a)];if(_0xf4ef0f-(_0x2cb148+_0x4a8f32)<0x12c){const _0x31f7aa=endOffset;endOffset+=0xe,renderDayRange(_0x31f7aa+0x1,endOffset),reRenderBlocks();}if(_0x2cb148<0x12c){const _0x3c8e32=startOffset;startOffset-=0xe,prependDays(startOffset,_0x3c8e32-0x1),_0x2473cb['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x13e9e1,_0x173086){const _0x5e11b3=a2_0x29ac28,_0x272d64=document['getElementById']('daysHeaderTrack'),_0x6d645d=document[_0x5e11b3(0x156)](_0x5e11b3(0x178)),_0x5e1671=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x5b961f=new Date();_0x5b961f[_0x5e11b3(0x1fe)](0x0,0x0,0x0,0x0);const _0x43f437=getLocalDateStr(new Date()),_0x84164e=document[_0x5e11b3(0x9d)](),_0x90b517=document[_0x5e11b3(0x9d)]();for(let _0x5d8d9e=_0x13e9e1;_0x5d8d9e<=_0x173086;_0x5d8d9e++){const _0x4c4010=new Date(_0x5b961f);_0x4c4010[_0x5e11b3(0x201)](_0x4c4010['getDate']()+_0x5d8d9e);const _0x49b4bc=getLocalDateStr(_0x4c4010);let _0x30518e=_0x4c4010[_0x5e11b3(0x10d)]()-0x1;if(_0x30518e===-0x1)_0x30518e=0x6;const _0x49e43=_0x49b4bc===_0x43f437,_0x9b3213=document[_0x5e11b3(0xb7)](_0x5e11b3(0x1c4));_0x9b3213[_0x5e11b3(0x182)]='day-col-header\x20'+(_0x49e43?_0x5e11b3(0xcf):''),_0x9b3213['id']=_0x5e11b3(0x1b9)+_0x49b4bc,_0x9b3213[_0x5e11b3(0x1bb)]('data-date',_0x49b4bc),_0x9b3213[_0x5e11b3(0x1b2)]=_0x5e11b3(0x1c0)+_0x5e1671[_0x30518e]+_0x5e11b3(0xba)+_0x4c4010[_0x5e11b3(0x181)]()+'</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-'+_0x49b4bc+_0x5e11b3(0x9b),_0x9b3213['onclick']=()=>openDayOptions(_0x49b4bc,_0x5e1671[_0x30518e]+'\x20'+_0x4c4010[_0x5e11b3(0x181)]()),_0x84164e[_0x5e11b3(0x10c)](_0x9b3213);const _0x1a3906=document[_0x5e11b3(0xb7)](_0x5e11b3(0x1c4));_0x1a3906[_0x5e11b3(0x182)]=_0x5e11b3(0x128)+(_0x49e43?_0x5e11b3(0xcf):''),_0x1a3906['setAttribute'](_0x5e11b3(0x135),_0x49b4bc),_0x1a3906[_0x5e11b3(0x1bb)](_0x5e11b3(0x198),_0x30518e),renderEventsForColumn(_0x1a3906,_0x49b4bc,_0x30518e),attachLongPressHandler(_0x1a3906,_0x4c4010),_0x90b517[_0x5e11b3(0x10c)](_0x1a3906),updateDayStats(_0x49b4bc);}_0x272d64['insertBefore'](_0x84164e,_0x272d64[_0x5e11b3(0x1be)]),_0x6d645d[_0x5e11b3(0x133)](_0x90b517,_0x6d645d[_0x5e11b3(0x8d)](_0x5e11b3(0xcb)));}function a2_0x246e(_0x29a963,_0x1d9d4c){_0x29a963=_0x29a963-0x8c;const _0x5dcd34=a2_0x4583();let _0x430075=_0x5dcd34[_0x29a963];return _0x430075;}function validateAppointment(_0xdc76f4,_0x2ffa45,_0x11d085,_0x3a28ad,_0x3382a8){const _0x441544=a2_0x29ac28,[_0x170922,_0x138e32]=_0x2ffa45[_0x441544(0xaa)](':')[_0x441544(0xb0)](Number),[_0x4e097b,_0x1183c0]=_0x11d085[_0x441544(0xaa)](':')['map'](Number),_0x2feeaf=_0x170922*0x3c+_0x138e32,_0x2a982f=_0x4e097b*0x3c+_0x1183c0,_0x359ac9=String(_0x3382a8);let _0x987dcc=![],_0x1f2e62='';for(let _0x309e95 of sessions){if(_0x309e95[_0x441544(0x97)]!==_0xdc76f4)continue;if(_0x309e95['status']===_0x441544(0x158))continue;if(_0x3a28ad&&String(_0x309e95['id'])===String(_0x3a28ad))continue;const [_0xaaceae,_0x960865]=_0x309e95[_0x441544(0xd1)][_0x441544(0xaa)](':')[_0x441544(0xb0)](Number),[_0x4f72d1,_0x510098]=_0x309e95[_0x441544(0x1f2)][_0x441544(0xaa)](':')[_0x441544(0xb0)](Number),_0x4458ba=_0xaaceae*0x3c+_0x960865,_0x6cc63=_0x4f72d1*0x3c+_0x510098;if(Math['max'](_0x2feeaf,_0x4458ba)<Math[_0x441544(0x1a6)](_0x2a982f,_0x6cc63)){if(_0x309e95[_0x441544(0x1ea)]&&String(_0x309e95[_0x441544(0x1ea)])===_0x359ac9)return{'valid':![],'msg':_0x441544(0x1ff)+_0x309e95[_0x441544(0xde)]+')\x20уже\x20записан\x20на\x20это\x20время!'};_0x987dcc=!![],_0x1f2e62=_0x309e95[_0x441544(0xde)];}}if(_0x987dcc)return{'valid':!![],'warning':_0x441544(0x11c)+_0x1f2e62};return{'valid':!![]};}function updateDateDisplay(){const _0x1fb723=a2_0x29ac28,_0x192549=document[_0x1fb723(0x156)](_0x1fb723(0x175))[_0x1fb723(0x208)],_0x4ffca7=document[_0x1fb723(0x156)](_0x1fb723(0x9e));if(!_0x192549){_0x4ffca7[_0x1fb723(0x13d)]='';return;}const [_0x233a8a,_0x3e6009,_0x57eaf0]=_0x192549[_0x1fb723(0xaa)]('-')[_0x1fb723(0xb0)](Number),_0x1a1fb6=new Date(_0x233a8a,_0x3e6009-0x1,_0x57eaf0),_0x46cbca={'weekday':'long','day':_0x1fb723(0xcd),'month':_0x1fb723(0x1aa),'year':_0x1fb723(0xcd)};let _0x5f3051=_0x1a1fb6[_0x1fb723(0x1ba)](_0x1fb723(0x136),_0x46cbca);_0x5f3051=_0x5f3051[_0x1fb723(0x170)](0x0)[_0x1fb723(0x157)]()+_0x5f3051['slice'](0x1),_0x4ffca7[_0x1fb723(0x13d)]=_0x5f3051;}function autoSetEndTime(){const _0x1c5cb7=a2_0x29ac28,_0x5a7fa3=document['getElementById']('inpStart')[_0x1c5cb7(0x208)];if(!_0x5a7fa3)return;const [_0x58ca66,_0x33c800]=_0x5a7fa3[_0x1c5cb7(0xaa)](':')[_0x1c5cb7(0xb0)](Number);let _0x5a5cf4=_0x58ca66+0x1;if(_0x5a5cf4>0x17)_0x5a5cf4=0x0;const _0xb815b9=String(_0x5a5cf4)['padStart'](0x2,'0')+':'+String(_0x33c800)[_0x1c5cb7(0x209)](0x2,'0');document[_0x1c5cb7(0x156)](_0x1c5cb7(0x16b))[_0x1c5cb7(0x208)]=_0xb815b9;}function populateClientSelect(){const _0x121a7d=a2_0x29ac28,_0x55df1d=document[_0x121a7d(0x156)](_0x121a7d(0x1d3));_0x55df1d['innerHTML']='';if(clients[_0x121a7d(0x114)]===0x0){const _0xc40e=document['createElement'](_0x121a7d(0x161));_0xc40e['text']=_0x121a7d(0x1c6),_0x55df1d['appendChild'](_0xc40e);return;}clients[_0x121a7d(0x14b)](_0x28949e=>{const _0x3be053=_0x121a7d,_0x388b1f=document[_0x3be053(0xb7)](_0x3be053(0x161));_0x388b1f[_0x3be053(0x208)]=_0x28949e[_0x3be053(0xf3)],_0x388b1f[_0x3be053(0x13d)]=_0x28949e[_0x3be053(0xf3)],_0x55df1d['appendChild'](_0x388b1f);});}function openActionSheet(_0x3df9e7){const _0x43a0c8=a2_0x29ac28,_0x1ab234=document[_0x43a0c8(0x156)](_0x43a0c8(0x1e0)),_0x1dcf68=document[_0x43a0c8(0x156)](_0x43a0c8(0xd8)),_0xc5c6fe=document[_0x43a0c8(0x156)](_0x43a0c8(0xb9)),_0x5460e0=document[_0x43a0c8(0x156)](_0x43a0c8(0x155)),_0x3d1a8c=document[_0x43a0c8(0x156)](_0x43a0c8(0x14a));_0x1dcf68[_0x43a0c8(0xfe)][_0x43a0c8(0x8e)](_0x43a0c8(0xd9)),_0x1ab234[_0x43a0c8(0xfe)][_0x43a0c8(0x8e)](_0x43a0c8(0xc8));if(_0x3df9e7===_0x43a0c8(0x1a0))_0xc5c6fe[_0x43a0c8(0x13d)]=_0x43a0c8(0x143),_0x5460e0[_0x43a0c8(0x13d)]=_0x43a0c8(0xf0),_0x5460e0[_0x43a0c8(0x19c)]=()=>{closeActionSheet(),updateSeriesBatch('single',tempSessionData);},_0x3d1a8c[_0x43a0c8(0x13d)]=_0x43a0c8(0xa3),_0x3d1a8c[_0x43a0c8(0x19c)]=()=>{const _0xd372d6=_0x43a0c8;closeActionSheet(),updateSeriesBatch(_0xd372d6(0xc6),tempSessionData);};else _0x3df9e7===_0x43a0c8(0x19d)&&(_0xc5c6fe[_0x43a0c8(0x13d)]=_0x43a0c8(0x1f6),_0x5460e0['textContent']=_0x43a0c8(0xf0),_0x5460e0[_0x43a0c8(0x182)]=_0x43a0c8(0x120),_0x5460e0[_0x43a0c8(0x19c)]=()=>{const _0x56718c=_0x43a0c8;closeActionSheet(),commitDelete('single',sessions[_0x56718c(0xa6)](_0x4a5497=>_0x4a5497['id']===editingId));},_0x3d1a8c[_0x43a0c8(0x13d)]='Эту\x20и\x20будущие',_0x3d1a8c[_0x43a0c8(0x182)]='as-button\x20danger\x20bold',_0x3d1a8c[_0x43a0c8(0x19c)]=()=>{const _0x275228=_0x43a0c8;closeActionSheet(),commitDelete(_0x275228(0xc6),sessions[_0x275228(0xa6)](_0x35690c=>_0x35690c['id']===editingId));});}function closeActionSheet(){const _0x2299e3=a2_0x29ac28;document[_0x2299e3(0x156)](_0x2299e3(0x1e0))['classList'][_0x2299e3(0xdb)]('open'),document['getElementById'](_0x2299e3(0xd8))[_0x2299e3(0xfe)][_0x2299e3(0xdb)](_0x2299e3(0xd9));}function openSettings(){const _0x10f8f5=a2_0x29ac28;openSheet(_0x10f8f5(0x146));}function saveCoachSettings(){const _0x2ba0e2=a2_0x29ac28,_0x55d701=document[_0x2ba0e2(0x156)](_0x2ba0e2(0x1d9))[_0x2ba0e2(0x208)];localStorage[_0x2ba0e2(0xfd)]('uc_settings_cancel_window',_0x55d701),console[_0x2ba0e2(0x90)](_0x2ba0e2(0xe9),_0x55d701),DataManager[_0x2ba0e2(0x207)](_0x2ba0e2(0xa1),{'settings':{'cancel_window':_0x55d701}})[_0x2ba0e2(0xd4)](_0xfb4463=>{const _0x198821=_0x2ba0e2;console[_0x198821(0x1b8)]('Save\x20settings\x20error:',_0xfb4463),showToast(_0x198821(0xf5),![]);});}function loadCoachSettings(){const _0x1908ae=a2_0x29ac28,_0x17892a=localStorage[_0x1908ae(0xa5)](_0x1908ae(0x1db));_0x17892a&&(document['getElementById']('settingCancelWindow')[_0x1908ae(0x208)]=_0x17892a);}function openRangesSheet(){const _0x454f28=a2_0x29ac28;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x454f28(0x130));}function addRange(){const _0x21fa66=a2_0x29ac28,_0x272303=document[_0x21fa66(0x156)](_0x21fa66(0x111))[_0x21fa66(0x208)],_0x36e586=document['getElementById'](_0x21fa66(0x1f1))['value'],_0x137b80=document['getElementById'](_0x21fa66(0xf8))[_0x21fa66(0x208)],_0x213db6=document[_0x21fa66(0x156)](_0x21fa66(0xbd))[_0x21fa66(0x208)];if(!_0x272303||!_0x36e586||!_0x137b80||!_0x213db6)return alert('Заполните\x20все\x20поля');const _0x1631ff=_0x272303+'T'+_0x36e586,_0x28d2de=_0x137b80+'T'+_0x213db6;if(_0x1631ff>=_0x28d2de)return alert('Ошибка\x20дат');specialRanges['push']({'start':_0x1631ff,'end':_0x28d2de}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x21fa66(0xc0)](),DataManager[_0x21fa66(0x207)]('save_settings',{'settings':{'ranges':specialRanges}});}function deleteRange(_0x5890f8){const _0x19ef03=a2_0x29ac28;specialRanges[_0x19ef03(0x139)](_0x5890f8,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x19ef03(0xc0)](),DataManager['fetchFromServer'](_0x19ef03(0xa1),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x2fe50c=a2_0x29ac28;document[_0x2fe50c(0x156)](_0x2fe50c(0x111))['value']='',document['getElementById'](_0x2fe50c(0x1f1))[_0x2fe50c(0x208)]=_0x2fe50c(0xc7),document[_0x2fe50c(0x156)]('rangeEndDate')[_0x2fe50c(0x208)]='',document['getElementById']('rangeEndTime')[_0x2fe50c(0x208)]='23:59';}function renderRangesList(){const _0x515083=a2_0x29ac28,_0x47e057=document['getElementById'](_0x515083(0x95));_0x47e057['innerHTML']='';if(!specialRanges['length']){_0x47e057[_0x515083(0x1b2)]=_0x515083(0xeb);return;}specialRanges[_0x515083(0x14b)]((_0x8ce834,_0x3ccb2f)=>{const _0x3ac7c2=_0x515083,_0x34a616=document['createElement'](_0x3ac7c2(0x1c4));_0x34a616[_0x3ac7c2(0x182)]=_0x3ac7c2(0x1e9);const _0x207650=_0x4e30b8=>{const _0x1ad588=_0x3ac7c2,_0x231861=new Date(_0x4e30b8);return _0x231861['getDate']()+'.'+String(_0x231861[_0x1ad588(0x1cd)]()+0x1)[_0x1ad588(0x209)](0x2,'0')+'\x20'+String(_0x231861[_0x1ad588(0x153)]())['padStart'](0x2,'0')+':'+String(_0x231861[_0x1ad588(0x1d0)]())[_0x1ad588(0x209)](0x2,'0');};_0x34a616[_0x3ac7c2(0x1b2)]=_0x3ac7c2(0xd5)+_0x207650(_0x8ce834[_0x3ac7c2(0xd1)])+'\x20—\x20'+_0x207650(_0x8ce834['end'])+'</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange('+_0x3ccb2f+_0x3ac7c2(0x199),_0x47e057[_0x3ac7c2(0x10c)](_0x34a616);});}function scrollToToday(){const _0x766c7e=a2_0x29ac28,_0x234a31=getLocalDateStr(new Date()),_0x24aae0=document[_0x766c7e(0x156)](_0x766c7e(0x1b9)+_0x234a31),_0x4bc9da=document[_0x766c7e(0x156)](_0x766c7e(0x159));if(_0x24aae0&&_0x4bc9da){const _0x1c6870=_0x4bc9da[_0x766c7e(0x17a)],_0x5501fa=_0x24aae0[_0x766c7e(0x19b)],_0x4ac3ca=_0x24aae0[_0x766c7e(0xae)];_0x4bc9da[_0x766c7e(0xca)]=_0x5501fa-_0x1c6870/0x2+_0x4ac3ca/0x2,_0x4bc9da[_0x766c7e(0xce)]=0x9*GRID_H;}}function onScroll(){const _0x298acd=a2_0x29ac28,_0x3e1903=document[_0x298acd(0x156)](_0x298acd(0x159)),_0x5bb921=document['querySelectorAll'](_0x298acd(0x177));for(let _0x14eb96 of _0x5bb921)if(_0x14eb96['offsetLeft']>=_0x3e1903[_0x298acd(0xca)]){const _0x4b4e55=new Date(_0x14eb96[_0x298acd(0x1cf)]('data-date'));document[_0x298acd(0x156)](_0x298acd(0x189))[_0x298acd(0x13d)]=_0x4b4e55[_0x298acd(0x160)]('ru',{'month':'long'})[_0x298acd(0x157)]()+'\x20'+_0x4b4e55['getFullYear']();break;}}function showToast(_0xcb2cfe,_0x21f869=![]){const _0x45ff90=a2_0x29ac28,_0x2901e9=document['getElementById'](_0x45ff90(0xb3));_0x2901e9[_0x45ff90(0x182)]='toast-notification\x20'+(_0x21f869?_0x45ff90(0xbc):''),document['getElementById'](_0x45ff90(0x10a))[_0x45ff90(0x13d)]=_0x21f869?_0x45ff90(0x1e7):'Инфо',document[_0x45ff90(0x156)](_0x45ff90(0x117))[_0x45ff90(0x13d)]=_0xcb2cfe,_0x2901e9[_0x45ff90(0xfe)][_0x45ff90(0x8e)](_0x45ff90(0x102)),setTimeout(()=>{const _0x24bac4=_0x45ff90;_0x2901e9[_0x24bac4(0xfe)][_0x24bac4(0xdb)]('show');},0xbb8);}function openDayOptions(_0xe13b32,_0x304bf8){const _0x41daa9=a2_0x29ac28;selectedDayForOptions=_0xe13b32,document['getElementById'](_0x41daa9(0x144))[_0x41daa9(0x13d)]=_0x304bf8,openSheet(_0x41daa9(0x13f));}function toggleDayOff(){const _0x335e13=a2_0x29ac28;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]='off',reRenderBlocks(),closeAllSheets(),DataManager['saveLocally'](),DataManager[_0x335e13(0x207)](_0x335e13(0xa1),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x3bd54f=a2_0x29ac28;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x3bd54f(0xc0)](),DataManager[_0x3bd54f(0x207)]('save_settings',{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x3432c1){const _0x3fcb13=a2_0x29ac28;document['getElementById'](_0x3fcb13(0x202))['classList'][_0x3fcb13(0x8e)](_0x3fcb13(0xd9)),document[_0x3fcb13(0x156)](_0x3432c1)[_0x3fcb13(0xfe)][_0x3fcb13(0x8e)](_0x3fcb13(0xc8));}function closeAllSheets(){const _0x533e39=a2_0x29ac28;document[_0x533e39(0x156)]('overlay')['classList'][_0x533e39(0xdb)](_0x533e39(0xd9)),document[_0x533e39(0x1e5)]('.sheet')[_0x533e39(0x14b)](_0x2cdefb=>_0x2cdefb['classList'][_0x533e39(0xdb)](_0x533e39(0xc8)));}function openPatternEditor(){const _0x2891e5=a2_0x29ac28;closeAllSheets(),document[_0x2891e5(0x156)]('patternEditor')[_0x2891e5(0xfe)][_0x2891e5(0x8e)](_0x2891e5(0xc8)),renderPatternEditor();}function closePatternEditor(){const _0x162927=a2_0x29ac28;document[_0x162927(0x156)](_0x162927(0x1a8))[_0x162927(0xfe)]['remove'](_0x162927(0xc8));}function savePattern(){const _0x51a38d=a2_0x29ac28;document['getElementById'](_0x51a38d(0x1a8))[_0x51a38d(0xfe)][_0x51a38d(0xdb)](_0x51a38d(0xc8)),reRenderBlocks(),DataManager[_0x51a38d(0xc0)](),DataManager[_0x51a38d(0x207)](_0x51a38d(0xa1),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x1d9e54=a2_0x29ac28,_0x1c6d2=document[_0x1d9e54(0x156)](_0x1d9e54(0x142));_0x1c6d2[_0x1d9e54(0x1b2)]='';const _0x23b479=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x4d09ba=document[_0x1d9e54(0xb7)](_0x1d9e54(0x1c4));_0x4d09ba[_0x1d9e54(0x182)]=_0x1d9e54(0x105),_0x1c6d2['appendChild'](_0x4d09ba),_0x23b479[_0x1d9e54(0x14b)]((_0x3567e0,_0xfa81ad)=>{const _0x4f7ea1=_0x1d9e54,_0x28338f=document[_0x4f7ea1(0xb7)]('div');_0x28338f[_0x4f7ea1(0x182)]='pe-col-header',_0x28338f[_0x4f7ea1(0x1b2)]=_0x3567e0+_0x4f7ea1(0x1c9),_0x28338f[_0x4f7ea1(0x19c)]=()=>toggleColPattern(_0xfa81ad),_0x1c6d2[_0x4f7ea1(0x10c)](_0x28338f);});for(let _0xfbfa6=0x0;_0xfbfa6<0x18;_0xfbfa6++){const _0x42e56b=document[_0x1d9e54(0xb7)](_0x1d9e54(0x1c4));_0x42e56b[_0x1d9e54(0x182)]='pe-time-label',_0x42e56b[_0x1d9e54(0x1b2)]='<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>'+String(_0xfbfa6)[_0x1d9e54(0x209)](0x2,'0')+_0x1d9e54(0xaf),_0x42e56b[_0x1d9e54(0x19c)]=()=>toggleRowPattern(_0xfbfa6),_0x1c6d2[_0x1d9e54(0x10c)](_0x42e56b);for(let _0x1628b1=0x0;_0x1628b1<0x7;_0x1628b1++){const _0x3b227b=document['createElement']('div'),_0x2ebdde=(availabilityPattern[_0x1628b1]||[])[_0x1d9e54(0x1d7)](_0xfbfa6),_0xb7f32b=!_0x2ebdde;_0x3b227b['className']=_0x1d9e54(0x1c5)+(_0xb7f32b?_0x1d9e54(0xd9):''),_0x3b227b[_0x1d9e54(0x19c)]=()=>toggleSinglePattern(_0x1628b1,_0xfbfa6),_0x1c6d2[_0x1d9e54(0x10c)](_0x3b227b);}}}function toggleSinglePattern(_0x2ce35a,_0xd50717){const _0x48ca14=a2_0x29ac28;if(!availabilityPattern[_0x2ce35a])availabilityPattern[_0x2ce35a]=[];const _0x53c202=availabilityPattern[_0x2ce35a],_0x1d58e7=_0x53c202[_0x48ca14(0x140)](_0xd50717);_0x1d58e7===-0x1?_0x53c202[_0x48ca14(0x149)](_0xd50717):_0x53c202[_0x48ca14(0x139)](_0x1d58e7,0x1),renderPatternEditor();}function toggleColPattern(_0x29ebdf){const _0x30a9c3=a2_0x29ac28;if(!availabilityPattern[_0x29ebdf])availabilityPattern[_0x29ebdf]=[];const _0x1bbd1d=availabilityPattern[_0x29ebdf];_0x1bbd1d[_0x30a9c3(0x114)]===0x0?availabilityPattern[_0x29ebdf]=Array[_0x30a9c3(0x180)]({'length':0x18},(_0x183bc5,_0x51f48a)=>_0x51f48a):availabilityPattern[_0x29ebdf]=[],renderPatternEditor();}function toggleRowPattern(_0x379474){const _0x770d0b=a2_0x29ac28;let _0x49cf02=!![];for(let _0x4c3e05=0x0;_0x4c3e05<0x7;_0x4c3e05++){if((availabilityPattern[_0x4c3e05]||[])['includes'](_0x379474)){_0x49cf02=![];break;}}for(let _0x43d12f=0x0;_0x43d12f<0x7;_0x43d12f++){if(!availabilityPattern[_0x43d12f])availabilityPattern[_0x43d12f]=[];const _0xf1145a=availabilityPattern[_0x43d12f][_0x770d0b(0x140)](_0x379474);if(_0x49cf02){if(_0xf1145a===-0x1)availabilityPattern[_0x43d12f][_0x770d0b(0x149)](_0x379474);}else{if(_0xf1145a!==-0x1)availabilityPattern[_0x43d12f][_0x770d0b(0x139)](_0xf1145a,0x1);}}renderPatternEditor();}function renderPCol(_0x47acb7,_0x26ef5f){const _0x398b1f=a2_0x29ac28;_0x47acb7[_0x398b1f(0x1b2)]='';const _0x302238=Math[_0x398b1f(0x20a)](_0x47acb7['offsetLeft']);(availabilityPattern[_0x26ef5f]||[])[_0x398b1f(0x14b)](_0x5d159e=>{const _0x380606=_0x398b1f,_0xf37d2=document[_0x380606(0xb7)](_0x380606(0x1c4));_0xf37d2[_0x380606(0x182)]=_0x380606(0x14e);const _0x540baa=_0x5d159e*GRID_H;_0xf37d2[_0x380606(0x12f)][_0x380606(0x1cc)]=_0x540baa+'px',_0xf37d2['style'][_0x380606(0x16d)]='-'+_0x302238+_0x380606(0x1c2)+_0x540baa+'px',_0xf37d2[_0x380606(0x19c)]=_0x309eed=>{const _0x40915e=_0x380606;_0x309eed[_0x40915e(0x16f)](),toggleSinglePattern(_0x26ef5f,_0x5d159e);},_0x47acb7[_0x380606(0x10c)](_0xf37d2);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x3af529=a2_0x29ac28,_0x4fe0e4=new Date(),_0x2a4ea5=document[_0x3af529(0x156)](_0x3af529(0x109)),_0x454c2d=document[_0x3af529(0x156)](_0x3af529(0x1f5)),_0x40643b=(_0x4fe0e4[_0x3af529(0x153)]()*0x3c+_0x4fe0e4[_0x3af529(0x1d0)]())/0x3c*GRID_H;_0x2a4ea5[_0x3af529(0x12f)]['top']=_0x40643b+'px',_0x2a4ea5['style'][_0x3af529(0x108)]=_0x3af529(0x1e3),_0x454c2d['textContent']=String(_0x4fe0e4[_0x3af529(0x153)]())['padStart'](0x2,'0')+':'+String(_0x4fe0e4[_0x3af529(0x1d0)]())['padStart'](0x2,'0'),_0x454c2d[_0x3af529(0x12f)][_0x3af529(0x108)]=_0x3af529(0x1e3),_0x454c2d[_0x3af529(0x12f)]['top']=_0x40643b+'px';}document[a2_0x29ac28(0xe8)](a2_0x29ac28(0x1fd),init);function openDayOptions(_0x301359){const _0xff991a=a2_0x29ac28;selectedDayForOptions=_0x301359;const _0x33ee6a=new Date(_0x301359),_0x2f81cf={'weekday':_0xff991a(0x1aa),'day':'numeric','month':'long','year':_0xff991a(0xcd)},_0x4fac95=_0x33ee6a[_0xff991a(0x1ba)](_0xff991a(0x136),_0x2f81cf);document[_0xff991a(0x156)](_0xff991a(0xac))[_0xff991a(0x13d)]=_0x4fac95[_0xff991a(0x170)](0x0)[_0xff991a(0x157)]()+_0x4fac95[_0xff991a(0x163)](0x1);let _0x5b81dd=_0x33ee6a[_0xff991a(0x10d)]()-0x1;if(_0x5b81dd===-0x1)_0x5b81dd=0x6;const _0x5548d1=availabilityPattern[_0x5b81dd]||[],_0x4c88de=0x18-_0x5548d1[_0xff991a(0x114)],_0x6b9c53=_0x4c88de*0x3c,_0x369458=sessions['filter'](_0x479fc5=>_0x479fc5[_0xff991a(0x97)]===_0x301359&&_0x479fc5[_0xff991a(0x11a)]!==_0xff991a(0x158));let _0x1fa9a4=_0x369458[_0xff991a(0xb0)](_0x2c3e99=>{const _0x107d46=_0xff991a,[_0x1b46d7,_0x1238aa]=_0x2c3e99[_0x107d46(0xd1)]['split'](':')[_0x107d46(0xb0)](Number),[_0x33e000,_0x591087]=_0x2c3e99[_0x107d46(0x1f2)]['split'](':')[_0x107d46(0xb0)](Number);return[_0x1b46d7*0x3c+_0x1238aa,_0x33e000*0x3c+_0x591087];});_0x1fa9a4['sort']((_0x146cfc,_0xdd76bf)=>_0x146cfc[0x0]-_0xdd76bf[0x0]);let _0x46ec8e=[];if(_0x1fa9a4[_0xff991a(0x114)]>0x0){let _0x4b1515=_0x1fa9a4[0x0];for(let _0x3eb512=0x1;_0x3eb512<_0x1fa9a4[_0xff991a(0x114)];_0x3eb512++){_0x1fa9a4[_0x3eb512][0x0]<_0x4b1515[0x1]?_0x4b1515[0x1]=Math[_0xff991a(0x1ca)](_0x4b1515[0x1],_0x1fa9a4[_0x3eb512][0x1]):(_0x46ec8e[_0xff991a(0x149)](_0x4b1515),_0x4b1515=_0x1fa9a4[_0x3eb512]);}_0x46ec8e[_0xff991a(0x149)](_0x4b1515);}let _0x4be7d6=0x0;_0x46ec8e[_0xff991a(0x14b)](_0x4c0b3a=>_0x4be7d6+=_0x4c0b3a[0x1]-_0x4c0b3a[0x0]),document[_0xff991a(0x156)](_0xff991a(0xdf))[_0xff991a(0x13d)]=formatMinsToHrs(_0x6b9c53),document[_0xff991a(0x156)](_0xff991a(0x18d))['textContent']=formatMinsToHrs(_0x4be7d6);const _0x308783=_0x6b9c53>0x0?Math[_0xff991a(0x20a)](_0x4be7d6/_0x6b9c53*0x64):0x0,_0x10ad5c=document['getElementById'](_0xff991a(0x1ef));_0x10ad5c[_0xff991a(0x13d)]=_0x308783+'%';const _0x99a03e=document['getElementById'](_0xff991a(0x13e));if(_0x308783>0x64)_0x10ad5c[_0xff991a(0x12f)][_0xff991a(0x1a4)]='var(--acc-red)',_0x99a03e[_0xff991a(0x12f)][_0xff991a(0x176)]=_0xff991a(0x194);else _0x308783>0x50?(_0x10ad5c[_0xff991a(0x12f)]['color']=_0xff991a(0x1a5),_0x99a03e[_0xff991a(0x12f)][_0xff991a(0x176)]=_0xff991a(0x106)):(_0x10ad5c[_0xff991a(0x12f)][_0xff991a(0x1a4)]=_0xff991a(0x131),_0x99a03e[_0xff991a(0x12f)][_0xff991a(0x176)]=_0xff991a(0x10f));const _0x29802c=document[_0xff991a(0x156)](_0xff991a(0x13b));_0x29802c['innerHTML']='';_0x369458[_0xff991a(0x114)]===0x0?_0x29802c[_0xff991a(0x1b2)]=_0xff991a(0x18b):(_0x369458[_0xff991a(0xe0)]((_0x2eb504,_0x26be0b)=>_0x2eb504['start']['localeCompare'](_0x26be0b[_0xff991a(0xd1)])),_0x369458['forEach'](_0xcd8e23=>{const _0x5cff15=_0xff991a,_0x513f04=clients[_0x5cff15(0xa6)](_0x2ace17=>_0x2ace17[_0x5cff15(0xf3)]===_0xcd8e23[_0x5cff15(0xde)]),_0x3b270e=_0x513f04?_0x513f04[_0x5cff15(0x1a4)]:'#fff',_0x3e26f5=_0xcd8e23[_0x5cff15(0x11a)]===_0x5cff15(0x19f),_0xa35536=_0x3e26f5?_0x5cff15(0xe2):'',_0x19246f=document[_0x5cff15(0xb7)](_0x5cff15(0x1c4));_0x19246f[_0x5cff15(0x182)]='de-item',_0x19246f[_0x5cff15(0x12f)]['borderLeftColor']=_0x3b270e,_0x19246f[_0x5cff15(0x1b2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>'+_0xcd8e23[_0x5cff15(0xd1)]+_0x5cff15(0xf1)+_0xcd8e23[_0x5cff15(0x1f2)]+_0x5cff15(0x123)+_0xcd8e23[_0x5cff15(0xde)]+_0x5cff15(0xff)+_0xa35536+_0x5cff15(0x1a3),_0x29802c[_0x5cff15(0x10c)](_0x19246f);}));const _0x487f28=document[_0xff991a(0x156)](_0xff991a(0x8f)),_0x2ac3be=dateExceptions[_0x301359]==='off';_0x2ac3be?(_0x487f28[_0xff991a(0x13d)]='Сделать\x20рабочим\x20днем',_0x487f28[_0xff991a(0x182)]=_0xff991a(0xfb),_0x487f28[_0xff991a(0x12f)][_0xff991a(0x1a4)]=_0xff991a(0x131),_0x487f28[_0xff991a(0x12f)][_0xff991a(0x1f8)]=_0xff991a(0x15a)):(_0x487f28[_0xff991a(0x13d)]=_0xff991a(0x11d),_0x487f28[_0xff991a(0x182)]='btn-primary\x20btn-danger',_0x487f28[_0xff991a(0x12f)][_0xff991a(0x1a4)]=_0xff991a(0x166),_0x487f28['style']['background']=_0xff991a(0x134)),openSheet(_0xff991a(0x13f));}let currentAnPeriod=a2_0x29ac28(0x1f3);function openAnalytics(){const _0x4aa0fe=a2_0x29ac28,_0x35ec89=document[_0x4aa0fe(0x8d)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x4aa0fe(0x1f3),_0x35ec89),closeAllSheets(),openSheet(_0x4aa0fe(0xc1));}function a2_0x4583(){const _0x9e461f=['getTime','10px','10603406CbLNCn','addEventListener','[Settings]\x20Cancel\x20window\x20set\x20to:','getFullYear','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','toString','Статус\x20сброшен','[Notify]\x20Detected\x20Client\x20ID:','syncBatch','Только\x20эту','\x20-\x20','30826FpCVXY','name','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','Ошибка\x20сохранения\x20настроек','exceptions','</span>\x20/\x20','rangeEndDate','formatDate','scrollWidth','btn-primary\x20btn-secondary','getBoundingClientRect','setItem','classList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','anStart','clients','show','233476IyNbvd','toFixed','pe-corner','rgba(255,\x20159,\x2010,\x200.3)','16272HGLqYk','display','globalTimeLine','toastTitle','single','appendChild','getDay','inpStart','rgba(255,255,255,0.05)','<b>📅\x20Дата:</b>\x20','rangeStartDate','ranges','day-off-overlay\x20stripe-bg','length','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','json','toastMessage','zIndex','href','status','mouseup','Групповая:\x20также\x20записан\x20','Сделать\x20выходным','warn','726825CpnWPi','as-button\x20danger','seriesId','\x20days','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','6800013huBPSD','user','BackButton','complete','day-column\x20','Максимум\x20100\x20за\x20раз','substr','filter','100%','#gridColumns\x20.day-column','[Notify]\x20Attempting\x20to\x20send:','style','rangesSheet','var(--acc-green)','settings','insertBefore','rgba(255,\x2069,\x2058,\x200.15)','data-date','ru-RU','scroll','.event-card','splice','left','doEventsList','anCustomDates','textContent','statLoadCard','dayOptionsSheet','indexOf','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','peGrid','Изменение\x20серии','dayOptionsTitle','\x20(пропущено:\x20','settingsSheet','guest','off','push','asBtnSeries','forEach','cancel_window','Critical\x20TMA\x20Error:','blocked-slot\x20stripe-bg','%\x20-\x204px)','location','width','parse','getHours','Оффлайн\x20режим','asBtnOne','getElementById','toUpperCase','cancelled','matrixViewport','rgba(48,\x20209,\x2088,\x200.15)','deleted','backgroundColor','(((.+)+)+)+$','cancel','initData','toLocaleString','option','Batch\x20Sync\x20OK','slice','[API\x20','\x20—\x20','var(--acc-red)','Local\x20Load\x20Error','onClick','update','WebApp','inpEnd','syncLoad','backgroundPosition','.period-switch\x20.p-btn','stopPropagation','charAt','floor','create','stringify','calc(','inpDate','borderColor','.day-col-header','gridColumns','checked','clientWidth',']\x20Доступно:\x20',')\x20уже\x20записан\x20на\x20это\x20время!','null','note','recurringOptionContainer','from','getDate','className','sessionSheet','anTotalStats','sheetTitle','#fff','[Notify]\x20Network\x20Failed','mousedown','headerMonth','mergeServerData','<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>','<b>⏰\x20Время:</b>\x20','doBusyHours','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','timeColumn','Редактировать','\x20выполнено','entries','rgba(255,\x2069,\x2058,\x200.3)','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','router.html','touchmove','data-day-idx',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','offsetLeft','onclick','delete','flex','completed','save','var(--acc-current)','borderLeftColor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','color','var(--acc-orange)','min','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','patternEditor','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','long','inpRecurring','\x20из\x20','findIndex','height','.dch-stats-fill','pattern','valid','innerHTML','anEnd','sid','clientY','seriesCountContainer',']\x20Failed:','error','header-','toLocaleDateString','setAttribute','[Sync]\x20Loading\x20','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','firstChild','msg','<div\x20class=\x22dch-day\x22>','init_load','px\x20-','keys','div','pe-cell\x20','Нет\x20клиентов','done','btnDelete','\x20<span\x20class=\x22arrow\x22>↓</span>','max','Local\x20Save\x20Error','top','getMonth','warning','getAttribute','getMinutes','Жду\x20вас\x20в\x20зале!\x20💪','[Notify]\x20Server\x20Response:','inpClient','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','8AyyWOs','</b>\x0a\x0a','includes','client-stat-card','settingCancelWindow','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','uc_settings_cancel_window','...','Server\x20Error','[Notify]\x20Error:\x20sessionData\x20is\x20null','btnStatusToggle','actionSheet','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','Вернуть\x20в\x20запланированные','block','touchstart','querySelectorAll','Минимум\x202\x20тренировки','Успешно','startsWith','range-item','clientId','Создана\x20серия:\x20','loadLocal','target','Telegram','doLoadPercent','px\x200px','rangeStartTime','end','week','T23:59:59','timeLineBadge','Удаление','10vsFsVt','background','stat-','closest','#050505','Синхронизировано','DOMContentLoaded','setHours','Этот\x20клиент\x20(','send','setDate','overlay','calendar','Error\x20setting\x20back\x20button:','none','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','fetchFromServer','value','padStart','round','</div><div\x20class=\x22ev-time\x22>','undefined','uc_clients_v9','querySelector','add','btnDayToggle','log','disableVerticalSwipes','total','touches','vibrate','rangesList','btn-status-toggle','dateStr','borderRadius','getText','.day-off-overlay','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','750SoVHXP','createDocumentFragment','sheetDateSubtitle','<div\x20class=\x22ev-title\x22>','anDonutCircle','save_settings','#0a84ff','Эту\x20и\x20будущие','Ошибка\x20сохранения\x20в\x20облако','getItem','find','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','rgba(100,100,100,0.5)','split','patternInfoBox','doDateHeader','day-col-header\x20','offsetWidth',':00','map','send_notification','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','toast','ready','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','</div>','createElement','btn-status-toggle\x20undo-mode','asTitle','</div><div\x20class=\x22dch-num\x22>','setBackgroundColor','success','rangeEndTime','month','\x20status-completed','saveLocally','analyticsSheet','1690724QZddyq','initDataUnsafe','colIndex','then','series','00:00','open','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:','scrollLeft','.day-column','data','numeric','scrollTop','today','text/plain;charset=UTF-8','start','search','.pib-text','catch','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','Это\x20часть\x20серии\x20тренировок','now','actionSheetOverlay','active','Запись\x20на\x20<b>','remove','strokeDashoffset','planned','client','doWorkHours','sort','offClick','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','4KMHbnf'];a2_0x4583=function(){return _0x9e461f;};return a2_0x4583();}function setAnalyticsPeriod(_0xf5e295,_0x1f8b3d){const _0x4c62ae=a2_0x29ac28;currentAnPeriod=_0xf5e295,document['querySelectorAll'](_0x4c62ae(0x16e))[_0x4c62ae(0x14b)](_0x594509=>_0x594509[_0x4c62ae(0xfe)]['remove'](_0x4c62ae(0xd9)));if(_0x1f8b3d)_0x1f8b3d[_0x4c62ae(0xfe)][_0x4c62ae(0x8e)](_0x4c62ae(0xd9));const _0x167e5=document[_0x4c62ae(0x156)](_0x4c62ae(0x13c));_0x167e5['style'][_0x4c62ae(0x108)]=_0xf5e295==='custom'?_0x4c62ae(0x19e):_0x4c62ae(0x205);const _0x290a20=new Date();let _0xa088f4=new Date(),_0x382a65=new Date();if(_0xf5e295===_0x4c62ae(0x1f3))_0xa088f4=getStartOfWeek(_0x290a20),_0x382a65=new Date(_0xa088f4),_0x382a65[_0x4c62ae(0x201)](_0x382a65['getDate']()+0x6);else{if(_0xf5e295===_0x4c62ae(0xbe))_0xa088f4=new Date(_0x290a20[_0x4c62ae(0xea)](),_0x290a20[_0x4c62ae(0x1cd)](),0x1),_0x382a65=new Date(_0x290a20[_0x4c62ae(0xea)](),_0x290a20[_0x4c62ae(0x1cd)]()+0x1,0x0);else{!document['getElementById']('anStart')[_0x4c62ae(0x208)]&&(document['getElementById'](_0x4c62ae(0x100))[_0x4c62ae(0x208)]=getLocalDateStr(_0x290a20),document[_0x4c62ae(0x156)]('anEnd')[_0x4c62ae(0x208)]=getLocalDateStr(_0x290a20));refreshAnalytics();return;}}document[_0x4c62ae(0x156)](_0x4c62ae(0x100))[_0x4c62ae(0x208)]=getLocalDateStr(_0xa088f4),document[_0x4c62ae(0x156)](_0x4c62ae(0x1b3))[_0x4c62ae(0x208)]=getLocalDateStr(_0x382a65),refreshAnalytics();}function refreshAnalytics(){const _0x2cf811=a2_0x29ac28,_0x2fc5c1=document[_0x2cf811(0x156)]('anStart')['value'],_0x5a101f=document[_0x2cf811(0x156)](_0x2cf811(0x1b3))[_0x2cf811(0x208)];if(!_0x2fc5c1||!_0x5a101f)return;const _0x9ecb03=sessions[_0x2cf811(0x12b)](_0xf3d6b4=>_0xf3d6b4[_0x2cf811(0x97)]>=_0x2fc5c1&&_0xf3d6b4[_0x2cf811(0x97)]<=_0x5a101f&&_0xf3d6b4[_0x2cf811(0x11a)]!==_0x2cf811(0x158)),_0x503b7c=_0x9ecb03[_0x2cf811(0x114)],_0x170372=_0x9ecb03[_0x2cf811(0x12b)](_0x3381e9=>_0x3381e9[_0x2cf811(0x11a)]===_0x2cf811(0x19f))['length'],_0x3b6296=_0x503b7c>0x0?Math[_0x2cf811(0x20a)](_0x170372/_0x503b7c*0x64):0x0;document[_0x2cf811(0x156)]('anPercent')['textContent']=_0x3b6296+'%',document[_0x2cf811(0x156)](_0x2cf811(0x184))[_0x2cf811(0x13d)]=_0x170372+_0x2cf811(0x1ac)+_0x503b7c+_0x2cf811(0x192);const _0x98ac33=document[_0x2cf811(0x156)](_0x2cf811(0xa0)),_0x574f62=0x2*Math['PI']*0x23,_0x41a4a9=_0x574f62-_0x3b6296/0x64*_0x574f62;_0x98ac33[_0x2cf811(0x12f)][_0x2cf811(0xdc)]=_0x41a4a9;const _0x535a47={};_0x9ecb03[_0x2cf811(0x14b)](_0x522a9f=>{const _0x137b9f=_0x2cf811;if(!_0x535a47[_0x522a9f[_0x137b9f(0xde)]]){const _0x3317c0=clients[_0x137b9f(0xa6)](_0x9fb8ac=>_0x9fb8ac['name']===_0x522a9f[_0x137b9f(0xde)]);_0x535a47[_0x522a9f[_0x137b9f(0xde)]]={'total':0x0,'done':0x0,'color':_0x3317c0?_0x3317c0[_0x137b9f(0x1a4)]:_0x137b9f(0x186)};}_0x535a47[_0x522a9f[_0x137b9f(0xde)]][_0x137b9f(0x92)]++;if(_0x522a9f[_0x137b9f(0x11a)]==='completed')_0x535a47[_0x522a9f[_0x137b9f(0xde)]][_0x137b9f(0x1c7)]++;});const _0x52d9fb=document['getElementById']('analyticsList');_0x52d9fb[_0x2cf811(0x1b2)]='';const _0x164b3e=Object[_0x2cf811(0x193)](_0x535a47)[_0x2cf811(0xe0)]((_0x2635f2,_0x566080)=>_0x566080[0x1][_0x2cf811(0x92)]-_0x2635f2[0x1][_0x2cf811(0x92)]);if(_0x164b3e[_0x2cf811(0x114)]===0x0){_0x52d9fb[_0x2cf811(0x1b2)]=_0x2cf811(0xa7);return;}_0x164b3e['forEach'](([_0x5974d0,_0x4e7677])=>{const _0x4e31cd=_0x2cf811,_0x4e95af=Math['round'](_0x4e7677[_0x4e31cd(0x1c7)]/_0x4e7677[_0x4e31cd(0x92)]*0x64),_0x3bb5dc=document[_0x4e31cd(0xb7)](_0x4e31cd(0x1c4));_0x3bb5dc[_0x4e31cd(0x182)]=_0x4e31cd(0x1d8),_0x3bb5dc['style'][_0x4e31cd(0x1a2)]=_0x4e7677[_0x4e31cd(0x1a4)],_0x3bb5dc['innerHTML']=_0x4e31cd(0xa8)+_0x5974d0+_0x4e31cd(0x1d4)+_0x4e7677['done']+_0x4e31cd(0xf7)+_0x4e7677[_0x4e31cd(0x92)]+_0x4e31cd(0x18f)+_0x4e95af+_0x4e31cd(0x206),_0x52d9fb[_0x4e31cd(0x10c)](_0x3bb5dc);});}function formatMinsToHrs(_0x5a759f){const _0x4f59c4=a2_0x29ac28;if(_0x5a759f===0x0)return'0';const _0x2d15f1=Math[_0x4f59c4(0x171)](_0x5a759f/0x3c),_0x13ef49=_0x5a759f%0x3c;if(_0x13ef49===0x0)return _0x2d15f1+'ч';return _0x2d15f1+'ч\x20'+_0x13ef49+'м';}