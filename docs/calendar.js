const a2_0x3b5f76=a2_0x59fe;(function(_0x36d093,_0x25d1e4){const _0x4444a9=a2_0x59fe,_0x5f4227=_0x36d093();while(!![]){try{const _0x7784d7=-parseInt(_0x4444a9(0x175))/0x1*(-parseInt(_0x4444a9(0x27a))/0x2)+-parseInt(_0x4444a9(0x186))/0x3*(-parseInt(_0x4444a9(0x22c))/0x4)+parseInt(_0x4444a9(0x22a))/0x5*(-parseInt(_0x4444a9(0x2ae))/0x6)+parseInt(_0x4444a9(0x189))/0x7*(-parseInt(_0x4444a9(0x2a9))/0x8)+parseInt(_0x4444a9(0x2a0))/0x9*(parseInt(_0x4444a9(0x1c6))/0xa)+parseInt(_0x4444a9(0x292))/0xb+parseInt(_0x4444a9(0x23f))/0xc;if(_0x7784d7===_0x25d1e4)break;else _0x5f4227['push'](_0x5f4227['shift']());}catch(_0x584663){_0x5f4227['push'](_0x5f4227['shift']());}}}(a2_0x53cd,0x4d2b2),function initTMA(){const _0x4d5fba=a2_0x59fe;try{const _0x5a424f=window[_0x4d5fba(0x1f9)]?.[_0x4d5fba(0x2a5)];if(!_0x5a424f)return;_0x5a424f['ready'](),_0x5a424f[_0x4d5fba(0x201)]();try{_0x5a424f[_0x4d5fba(0x233)](_0x4d5fba(0x227)),_0x5a424f[_0x4d5fba(0x162)]&&_0x5a424f['setBackgroundColor'](_0x4d5fba(0x227));}catch(_0x146b9e){console[_0x4d5fba(0x2be)](_0x4d5fba(0x208),_0x146b9e);}try{_0x5a424f['BackButton']&&(_0x5a424f['BackButton'][_0x4d5fba(0x25b)](),_0x5a424f[_0x4d5fba(0x28f)][_0x4d5fba(0x270)](),_0x5a424f[_0x4d5fba(0x28f)]['onClick'](function(){const _0x43403c=_0x4d5fba;window['location'][_0x43403c(0x1d2)]='router.html';}));}catch(_0x4a61d1){console['log'](_0x4d5fba(0x2ad),_0x4a61d1);}try{if(_0x5a424f['disableVerticalSwipes'])_0x5a424f[_0x4d5fba(0x241)]();}catch(_0x1877be){}}catch(_0x5b8173){console[_0x4d5fba(0x225)](_0x4d5fba(0x27b),_0x5b8173);}}());function isAdmin(){const _0x3570ea=a2_0x59fe;try{const _0x586a25=Number(window[_0x3570ea(0x1f9)]?.['WebApp']?.[_0x3570ea(0x2c5)]?.[_0x3570ea(0x224)]?.['id']);return _0x586a25===0xbaf7174;}catch(_0x21e88a){return![];}}const APP_VERSION=a2_0x3b5f76(0x25c),API_URL=a2_0x3b5f76(0x257),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS='uc_clients_v9',KEY_SESSIONS=a2_0x3b5f76(0x166),KEY_SETTINGS='uc_settings_v9';let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x5e4288=a2_0x3b5f76;return window[_0x5e4288(0x1f9)]?.[_0x5e4288(0x2a5)]?.['initDataUnsafe']?.[_0x5e4288(0x224)]?.['id']||_0x5e4288(0x1bf);},'saveLocally'(){const _0x596e77=a2_0x3b5f76;try{localStorage[_0x596e77(0x28b)](KEY_CLIENTS,JSON[_0x596e77(0x22b)](clients)),localStorage[_0x596e77(0x28b)](KEY_SESSIONS,JSON[_0x596e77(0x22b)](sessions)),localStorage[_0x596e77(0x28b)](KEY_SETTINGS,JSON[_0x596e77(0x22b)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x3eafda){console[_0x596e77(0x225)](_0x596e77(0x24b),_0x3eafda);}},'loadLocal'(){const _0x39a80c=a2_0x3b5f76;try{const _0x3dca2c=localStorage[_0x39a80c(0x1c1)](KEY_CLIENTS);if(_0x3dca2c)clients=JSON['parse'](_0x3dca2c);const _0x5edf3e=localStorage[_0x39a80c(0x1c1)](KEY_SESSIONS);if(_0x5edf3e)sessions=JSON[_0x39a80c(0x180)](_0x5edf3e);const _0x3c3a60=localStorage[_0x39a80c(0x1c1)](KEY_SETTINGS);if(_0x3c3a60){const _0x3226d2=JSON[_0x39a80c(0x180)](_0x3c3a60);if(_0x3226d2['pattern'])availabilityPattern=_0x3226d2[_0x39a80c(0x1c5)];if(_0x3226d2['exceptions'])dateExceptions=_0x3226d2['exceptions'];if(_0x3226d2[_0x39a80c(0x240)])specialRanges=_0x3226d2[_0x39a80c(0x240)];}else{for(let _0x2b52fa=0x0;_0x2b52fa<0x7;_0x2b52fa++)availabilityPattern[_0x2b52fa]=Array[_0x39a80c(0x2ab)]({'length':0xc},(_0x55a1a3,_0x460d23)=>_0x460d23+0x9);}}catch(_0x4a4aff){console[_0x39a80c(0x225)](_0x39a80c(0x1b1),_0x4a4aff);}},async 'fetchFromServer'(_0x16ce1b,_0x4aafa3={}){const _0x4d3881=a2_0x3b5f76,_0x5659d8=window['Telegram']?.['WebApp'],_0x190d30={'action':_0x16ce1b,'init_data':_0x5659d8?.['initData']||'',..._0x4aafa3};try{const _0x5d12f7=await fetch(API_URL,{'method':_0x4d3881(0x1d6),'headers':{'Content-Type':_0x4d3881(0x157)},'body':JSON['stringify'](_0x190d30)}),_0xdc66e0=await _0x5d12f7[_0x4d3881(0x298)]();if(!_0xdc66e0['ok'])throw new Error(_0xdc66e0['error']||_0x4d3881(0x226));return _0xdc66e0[_0x4d3881(0x176)];}catch(_0x2349fd){console[_0x4d3881(0x225)](_0x4d3881(0x196)+_0x16ce1b+_0x4d3881(0x220),_0x2349fd);throw _0x2349fd;}},async 'syncLoad'(){const _0x33a6d0=a2_0x3b5f76,_0xeb85d3=new Date(),_0x241565=_0xeb85d3[_0x33a6d0(0x1b5)]()+'-'+String(_0xeb85d3[_0x33a6d0(0x1db)]()+0x1)[_0x33a6d0(0x1e6)](0x2,'0'),_0x576299=new Date(_0xeb85d3);_0x576299[_0x33a6d0(0x2b3)](_0xeb85d3[_0x33a6d0(0x1db)]()+0x1);const _0x5bf70d=_0x576299[_0x33a6d0(0x1b5)]()+'-'+String(_0x576299['getMonth']()+0x1)[_0x33a6d0(0x1e6)](0x2,'0'),_0x4a8e12=Date[_0x33a6d0(0x283)]();console['log']('[Sync]\x20Loading\x20'+_0x241565+',\x20'+_0x5bf70d+_0x33a6d0(0x243));try{const [_0x5be7d0,_0x3e52a7]=await Promise[_0x33a6d0(0x19b)]([this[_0x33a6d0(0x29a)](_0x33a6d0(0x26c),{'month_str':_0x241565}),this[_0x33a6d0(0x29a)](_0x33a6d0(0x26c),{'month_str':_0x5bf70d})]);if(lastUserActionTime>_0x4a8e12)return console['warn'](_0x33a6d0(0x1e2)),![];return this[_0x33a6d0(0x25f)](_0x5be7d0,_0x241565),this['mergeServerData'](_0x3e52a7,_0x5bf70d),this[_0x33a6d0(0x21f)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x483701){console[_0x33a6d0(0x225)](_0x483701);throw _0x483701;}},'mergeServerData'(_0x560384,_0x3b6fbd){const _0x1a2dcc=a2_0x3b5f76;if(!_0x560384)return;_0x560384['clients']&&Array['isArray'](_0x560384[_0x1a2dcc(0x18c)])&&(clients=_0x560384[_0x1a2dcc(0x18c)]);if(_0x560384[_0x1a2dcc(0x1a6)]){if(_0x560384[_0x1a2dcc(0x1a6)][_0x1a2dcc(0x1c5)])availabilityPattern=_0x560384[_0x1a2dcc(0x1a6)][_0x1a2dcc(0x1c5)];if(_0x560384['settings'][_0x1a2dcc(0x17f)])dateExceptions=_0x560384[_0x1a2dcc(0x1a6)][_0x1a2dcc(0x17f)];if(_0x560384[_0x1a2dcc(0x1a6)]['ranges'])specialRanges=_0x560384[_0x1a2dcc(0x1a6)]['ranges'];if(_0x560384['settings'][_0x1a2dcc(0x149)]){localStorage[_0x1a2dcc(0x28b)](_0x1a2dcc(0x1bd),_0x560384['settings'][_0x1a2dcc(0x149)]);const _0x3c7264=document[_0x1a2dcc(0x24e)](_0x1a2dcc(0x20f));if(_0x3c7264)_0x3c7264[_0x1a2dcc(0x14d)]=_0x560384[_0x1a2dcc(0x1a6)][_0x1a2dcc(0x149)];}}_0x560384[_0x1a2dcc(0x179)]&&(sessions=sessions[_0x1a2dcc(0x221)](_0x29d8c0=>!_0x29d8c0[_0x1a2dcc(0x26a)]['startsWith'](_0x3b6fbd)),Object['keys'](_0x560384[_0x1a2dcc(0x179)])['forEach'](_0x1a22d1=>{const _0x130512=_0x1a2dcc,_0x120375=_0x560384[_0x130512(0x179)][_0x1a22d1];_0x120375[_0x130512(0x27e)](_0x4d45d1=>{const _0x45ed17=_0x130512,_0x35bc39=clients[_0x45ed17(0x23c)](_0x353e2f=>String(_0x353e2f['id'])===String(_0x4d45d1['c']));sessions[_0x45ed17(0x29b)]({'id':_0x4d45d1['i'],'clientId':_0x4d45d1['c'],'client':_0x35bc39?_0x35bc39[_0x45ed17(0x293)]:_0x45ed17(0x252),'dateStr':_0x3b6fbd+'-'+_0x1a22d1[_0x45ed17(0x1e6)](0x2,'0'),'start':_0x4d45d1['s'],'end':_0x4d45d1['e'],'status':_0x4d45d1['st']||_0x45ed17(0x259),'note':_0x4d45d1['n']||'','seriesId':_0x4d45d1[_0x45ed17(0x2a8)]||null});});}));},async 'syncBatch'(_0xc79612){const _0x2cfdf0=a2_0x3b5f76,_0x32b3f9=[...new Set(_0xc79612)],_0x522734=_0x32b3f9[_0x2cfdf0(0x211)](_0x5cae07=>{const _0x2c3ac6=_0x2cfdf0,_0x5cde71=sessions['filter'](_0x2a2da9=>_0x2a2da9[_0x2c3ac6(0x26a)]===_0x5cae07&&_0x2a2da9[_0x2c3ac6(0x1a8)]!==_0x2c3ac6(0x16d)),_0x4217bf=_0x5cde71['map'](_0xc50a29=>({'i':_0xc50a29['id'],'c':_0xc50a29['clientId'],'s':_0xc50a29['start'],'e':_0xc50a29[_0x2c3ac6(0x228)],'st':_0xc50a29[_0x2c3ac6(0x1a8)],'n':_0xc50a29[_0x2c3ac6(0x1f4)],'sid':_0xc50a29[_0x2c3ac6(0x244)]}));return{'date':_0x5cae07,'day_data':_0x4217bf};});if(_0x522734[_0x2cfdf0(0x1c4)]===0x0)return;console[_0x2cfdf0(0x2be)](_0x2cfdf0(0x1ef)+_0x522734[_0x2cfdf0(0x1c4)]+_0x2cfdf0(0x1da)),await this[_0x2cfdf0(0x29a)](_0x2cfdf0(0x1f8),{'changes':_0x522734});}};async function init(){const _0x1c92fe=a2_0x3b5f76;DataManager['loadLocal'](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x1c92fe(0x14f))['addEventListener'](_0x1c92fe(0x256),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']()[_0x1c92fe(0x209)](()=>{const _0x10942e=_0x1c92fe;showToast(_0x10942e(0x1ff),!![]);})[_0x1c92fe(0x26f)](_0x2820b1=>{const _0x3e91e0=_0x1c92fe;showToast(_0x3e91e0(0x206),![]);});}function generateId(){const _0x543ba9=a2_0x3b5f76;return Date[_0x543ba9(0x283)]()[_0x543ba9(0x1ae)](0x24)+Math[_0x543ba9(0x1d3)]()[_0x543ba9(0x1ae)](0x24)[_0x543ba9(0x161)](0x2,0x5);}function toggleSeriesInput(){const _0x5ddc0e=a2_0x3b5f76,_0x3eb5c5=document[_0x5ddc0e(0x24e)](_0x5ddc0e(0x21d))[_0x5ddc0e(0x2b7)],_0x5ee18a=document[_0x5ddc0e(0x24e)](_0x5ddc0e(0x215));_0x5ee18a['style'][_0x5ddc0e(0x1ea)]=_0x3eb5c5?_0x5ddc0e(0x28e):_0x5ddc0e(0x165);const _0x1dd924=document[_0x5ddc0e(0x24e)](_0x5ddc0e(0x17e));_0x1dd924[_0x5ddc0e(0x15b)][_0x5ddc0e(0x213)]=_0x3eb5c5?_0x5ddc0e(0x1e3):_0x5ddc0e(0x190);}function openAddSession(_0x40e465){const _0x3c67b6=a2_0x3b5f76;editingId=null,populateClientSelect(),document[_0x3c67b6(0x24e)](_0x3c67b6(0x2b8))[_0x3c67b6(0x1ab)]=_0x3c67b6(0x1ec),document[_0x3c67b6(0x24e)](_0x3c67b6(0x19f))[_0x3c67b6(0x15b)][_0x3c67b6(0x1ea)]=_0x3c67b6(0x165),document[_0x3c67b6(0x24e)](_0x3c67b6(0x24a))[_0x3c67b6(0x15b)][_0x3c67b6(0x1ea)]=_0x3c67b6(0x165);const _0x45b6ce=document[_0x3c67b6(0x24e)](_0x3c67b6(0x17e)),_0x18a5b6=document[_0x3c67b6(0x24e)]('seriesCountContainer');_0x45b6ce[_0x3c67b6(0x15b)]['display']='flex',_0x45b6ce[_0x3c67b6(0x15b)][_0x3c67b6(0x213)]='10px',document[_0x3c67b6(0x24e)]('inpRecurring')['checked']=![],document[_0x3c67b6(0x24e)](_0x3c67b6(0x1cb))['value']=0x4,_0x18a5b6[_0x3c67b6(0x15b)][_0x3c67b6(0x1ea)]='none',document[_0x3c67b6(0x24e)]('inpDate')['value']=getLocalDateStr(_0x40e465),updateDateDisplay();const _0x534227=_0x40e465[_0x3c67b6(0x29c)]();document[_0x3c67b6(0x24e)](_0x3c67b6(0x2ac))['value']=String(_0x534227)[_0x3c67b6(0x1e6)](0x2,'0')+_0x3c67b6(0x187),document['getElementById'](_0x3c67b6(0x14e))['value']=String(_0x534227+0x1)[_0x3c67b6(0x1e6)](0x2,'0')+_0x3c67b6(0x187),openSheet(_0x3c67b6(0x160));}function openEdit(_0x22de8d){const _0x20a036=a2_0x3b5f76;editingId=_0x22de8d['id'],populateClientSelect(),document[_0x20a036(0x24e)](_0x20a036(0x2b8))[_0x20a036(0x1ab)]='Редактировать',document[_0x20a036(0x24e)]('btnDelete')[_0x20a036(0x15b)][_0x20a036(0x1ea)]=_0x20a036(0x28e);const _0x2fffeb=document[_0x20a036(0x24e)](_0x20a036(0x24a));_0x2fffeb[_0x20a036(0x15b)][_0x20a036(0x1ea)]='flex';_0x22de8d[_0x20a036(0x1a8)]===_0x20a036(0x26b)?(_0x2fffeb[_0x20a036(0x2c1)]=_0x20a036(0x2a7),_0x2fffeb[_0x20a036(0x1c9)]=_0x20a036(0x27f)):(_0x2fffeb[_0x20a036(0x2c1)]='btn-status-toggle',_0x2fffeb[_0x20a036(0x1c9)]=_0x20a036(0x1fd));const _0x2bd86e=!!_0x22de8d['seriesId'];document[_0x20a036(0x24e)]('recurringOptionContainer')[_0x20a036(0x15b)][_0x20a036(0x1ea)]='none',document['getElementById']('seriesCountContainer')[_0x20a036(0x15b)][_0x20a036(0x1ea)]='none',_0x2bd86e?(document['getElementById'](_0x20a036(0x1d1))[_0x20a036(0x15b)][_0x20a036(0x1ea)]=_0x20a036(0x1d9),document[_0x20a036(0x24e)](_0x20a036(0x1d1))[_0x20a036(0x1d8)](_0x20a036(0x1e0))[_0x20a036(0x1ab)]=_0x20a036(0x1c0)):document[_0x20a036(0x24e)](_0x20a036(0x1d1))['style'][_0x20a036(0x1ea)]=_0x20a036(0x165),document[_0x20a036(0x24e)]('inpClient')[_0x20a036(0x14d)]=_0x22de8d[_0x20a036(0x277)],document[_0x20a036(0x24e)](_0x20a036(0x2b1))[_0x20a036(0x14d)]=_0x22de8d[_0x20a036(0x26a)],document[_0x20a036(0x24e)](_0x20a036(0x2ac))[_0x20a036(0x14d)]=_0x22de8d[_0x20a036(0x279)],document[_0x20a036(0x24e)](_0x20a036(0x14e))[_0x20a036(0x14d)]=_0x22de8d[_0x20a036(0x228)],document['getElementById'](_0x20a036(0x198))[_0x20a036(0x14d)]=_0x22de8d[_0x20a036(0x1f4)]||'',updateDateDisplay(),openSheet(_0x20a036(0x160));}async function trySaveSession(){const _0x1cb10d=a2_0x3b5f76,_0x2bacde=document[_0x1cb10d(0x24e)](_0x1cb10d(0x1fc))[_0x1cb10d(0x14d)],_0x1edc65=document[_0x1cb10d(0x24e)]('inpDate')[_0x1cb10d(0x14d)],_0x39841c=document[_0x1cb10d(0x24e)](_0x1cb10d(0x2ac))[_0x1cb10d(0x14d)],_0x4e6974=document[_0x1cb10d(0x24e)]('inpEnd')['value'],_0x46d0bc=document[_0x1cb10d(0x24e)](_0x1cb10d(0x198))[_0x1cb10d(0x14d)],_0x1eb7a5=document['getElementById'](_0x1cb10d(0x21d))[_0x1cb10d(0x2b7)];let _0x1ce0c2=0x4;if(_0x1eb7a5){const _0x2f4398=parseInt(document[_0x1cb10d(0x24e)](_0x1cb10d(0x1cb))[_0x1cb10d(0x14d)]);if(!_0x2f4398||_0x2f4398<0x2){showToast('Минимум\x202\x20тренировки',![]);return;}if(_0x2f4398>0x64){showToast('Максимум\x20100\x20за\x20раз',![]);return;}_0x1ce0c2=_0x2f4398;}const _0x1b1f48=clients[_0x1cb10d(0x23c)](_0x262a7b=>_0x262a7b['name']===_0x2bacde);if(!_0x1b1f48){showToast(_0x1cb10d(0x184),![]);return;}const _0x7734c7=validateAppointment(_0x1edc65,_0x39841c,_0x4e6974,editingId,_0x1b1f48['id']);if(!_0x7734c7[_0x1cb10d(0x230)]){showToast(_0x7734c7['msg'],![]);return;}_0x7734c7[_0x1cb10d(0x21c)]&&showToast(_0x7734c7[_0x1cb10d(0x21c)],![]);const _0x3d5242={'client':_0x2bacde,'clientId':_0x1b1f48['id'],'start':_0x39841c,'end':_0x4e6974,'note':_0x46d0bc,'status':_0x1cb10d(0x259)},_0x27a18f=editingId?sessions[_0x1cb10d(0x23c)](_0x1ea247=>_0x1ea247['id']===editingId):null;if(_0x27a18f&&_0x27a18f[_0x1cb10d(0x244)]){tempSessionData={..._0x3d5242,'dateStr':_0x1edc65,'id':editingId,'seriesId':_0x27a18f[_0x1cb10d(0x244)]},openActionSheet(_0x1cb10d(0x2c4));return;}let _0x5a5a06=null;if(!editingId)_0x5a5a06=_0x1cb10d(0x170);else{if(_0x27a18f){if(String(_0x27a18f[_0x1cb10d(0x20c)])!==String(_0x1b1f48['id']))console['log'](_0x1cb10d(0x1ac)),NotificationManager['send'](_0x1cb10d(0x1a5),_0x27a18f),_0x5a5a06=_0x1cb10d(0x170);else(_0x27a18f['start']!==_0x39841c||_0x27a18f[_0x1cb10d(0x228)]!==_0x4e6974||_0x27a18f[_0x1cb10d(0x26a)]!==_0x1edc65)&&(_0x5a5a06=_0x1cb10d(0x280));}}if(!editingId&&_0x1eb7a5){createBatchSeries(_0x3d5242,_0x1edc65,_0x1ce0c2),NotificationManager['send'](_0x1cb10d(0x170),{..._0x3d5242,'dateStr':_0x1edc65});return;}lastUserActionTime=Date['now']();const _0x433113={..._0x3d5242,'dateStr':_0x1edc65,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x433113),_0x5a5a06&&NotificationManager[_0x1cb10d(0x164)](_0x5a5a06,_0x433113);}function toggleSessionStatus(){const _0x2a517c=a2_0x3b5f76;lastUserActionTime=Date[_0x2a517c(0x283)]();const _0x59c342=sessions['find'](_0x173ee5=>_0x173ee5['id']===editingId);if(!_0x59c342)return;const _0x3224a0=_0x59c342['status']===_0x2a517c(0x26b)?_0x2a517c(0x259):_0x2a517c(0x26b);_0x59c342[_0x2a517c(0x1a8)]=_0x3224a0,saveSingleSession(_0x59c342),_0x3224a0===_0x2a517c(0x26b)&&NotificationManager['send'](_0x2a517c(0x27c),_0x59c342),showToast(_0x3224a0===_0x2a517c(0x26b)?'Тренировка\x20завершена':'Статус\x20сброшен',!![]);}function validateAppointment(_0x517acd,_0xe6b62f,_0x1162fe,_0x37caf4,_0x3ae17c){const _0x3ef3ab=a2_0x3b5f76,[_0x42c1a1,_0x1f973b]=_0xe6b62f['split'](':')[_0x3ef3ab(0x211)](Number),[_0x358b61,_0x305a8a]=_0x1162fe[_0x3ef3ab(0x14b)](':')['map'](Number),_0x190039=_0x42c1a1*0x3c+_0x1f973b,_0x113026=_0x358b61*0x3c+_0x305a8a,_0x34e83c=String(_0x3ae17c);let _0x272eb5=![],_0x35d8ef='';for(let _0x5a2394 of sessions){if(_0x5a2394['dateStr']!==_0x517acd)continue;if(_0x5a2394[_0x3ef3ab(0x1a8)]===_0x3ef3ab(0x177))continue;if(_0x37caf4&&String(_0x5a2394['id'])===String(_0x37caf4))continue;const [_0x37d22a,_0x11e5c5]=_0x5a2394[_0x3ef3ab(0x279)][_0x3ef3ab(0x14b)](':')[_0x3ef3ab(0x211)](Number),[_0x15bd9b,_0x44b5e9]=_0x5a2394[_0x3ef3ab(0x228)][_0x3ef3ab(0x14b)](':')['map'](Number),_0x4891bf=_0x37d22a*0x3c+_0x11e5c5,_0x47ddc7=_0x15bd9b*0x3c+_0x44b5e9;if(Math[_0x3ef3ab(0x1e5)](_0x190039,_0x4891bf)<Math['min'](_0x113026,_0x47ddc7)){if(_0x5a2394[_0x3ef3ab(0x20c)]&&String(_0x5a2394[_0x3ef3ab(0x20c)])===_0x34e83c)return{'valid':![],'msg':_0x3ef3ab(0x1cf)+_0x5a2394[_0x3ef3ab(0x277)]+_0x3ef3ab(0x1ed)};_0x272eb5=!![],_0x35d8ef=_0x5a2394[_0x3ef3ab(0x277)];}}if(_0x272eb5)return{'valid':!![],'warning':_0x3ef3ab(0x247)+_0x35d8ef};return{'valid':!![]};}function saveSingleSession(_0x4fc9b4){const _0x21df07=a2_0x3b5f76;if(editingId){const _0x26d0b0=sessions['findIndex'](_0x17fd94=>_0x17fd94['id']===editingId);if(_0x26d0b0!==-0x1)sessions[_0x26d0b0]=_0x4fc9b4;}else sessions['push'](_0x4fc9b4);afterSaveAction([_0x4fc9b4[_0x21df07(0x26a)]]);}function createBatchSeries(_0x4d2fc0,_0x2fff20,_0x109433){const _0x293f5b=a2_0x3b5f76,_0x18652e=generateId(),_0x3c41a0=[],_0x492759=[];let _0x46a931=0x0,_0x3db96b=new Date(_0x2fff20);for(let _0x4a6345=0x0;_0x4a6345<_0x109433;_0x4a6345++){const _0x3013e3=getLocalDateStr(_0x3db96b),_0x439d52=validateAppointment(_0x3013e3,_0x4d2fc0[_0x293f5b(0x279)],_0x4d2fc0[_0x293f5b(0x228)],null,_0x4d2fc0[_0x293f5b(0x20c)]);if(!_0x439d52[_0x293f5b(0x230)])console[_0x293f5b(0x2be)](_0x293f5b(0x265)+_0x3013e3+_0x293f5b(0x1fa)),_0x46a931++;else{const _0x5eb094={..._0x4d2fc0,'id':generateId(),'dateStr':_0x3013e3,'seriesId':_0x18652e};_0x492759[_0x293f5b(0x29b)](_0x5eb094),_0x3c41a0['push'](_0x3013e3);}_0x3db96b['setDate'](_0x3db96b[_0x293f5b(0x2c2)]()+0x7);}if(_0x492759[_0x293f5b(0x1c4)]===0x0){showToast('Все\x20даты\x20заняты\x20этим\x20клиентом!',![]);return;}sessions['push'](..._0x492759),lastUserActionTime=Date[_0x293f5b(0x283)]();let _0x103939=_0x293f5b(0x272)+_0x492759[_0x293f5b(0x1c4)];_0x46a931>0x0&&(_0x103939+=_0x293f5b(0x275)+_0x46a931+')'),showToast(_0x103939,!![]),afterSaveAction(_0x3c41a0);}function updateSeriesBatch(_0x31db25,_0x6d58ae){const _0x2fb26e=a2_0x3b5f76,_0x289717=[],_0x505bfe=_0x6d58ae[_0x2fb26e(0x244)];if(_0x31db25===_0x2fb26e(0x16b)){const _0x45a4bb={..._0x6d58ae,'seriesId':null},_0x27936d=sessions[_0x2fb26e(0x200)](_0xf034b6=>_0xf034b6['id']===_0x6d58ae['id']);if(_0x27936d!==-0x1)sessions[_0x27936d]=_0x45a4bb;_0x289717[_0x2fb26e(0x29b)](_0x45a4bb['dateStr']);}else{if(_0x31db25===_0x2fb26e(0x199)){const _0x4a594b=_0x6d58ae[_0x2fb26e(0x26a)];sessions[_0x2fb26e(0x27e)]((_0x54f441,_0x456251)=>{const _0x159f41=_0x2fb26e;_0x54f441[_0x159f41(0x244)]===_0x505bfe&&_0x54f441[_0x159f41(0x26a)]>=_0x4a594b&&(sessions[_0x456251]={...sessions[_0x456251],'start':_0x6d58ae['start'],'end':_0x6d58ae['end'],'note':_0x6d58ae[_0x159f41(0x1f4)],'client':_0x6d58ae['client'],'clientId':_0x6d58ae[_0x159f41(0x20c)]},_0x289717['push'](_0x54f441['dateStr']));});}}afterSaveAction(_0x289717);}function tryDeleteSession(){const _0xa2d659=a2_0x3b5f76,_0x33aaf6=sessions[_0xa2d659(0x23c)](_0x3cdfb9=>_0x3cdfb9['id']===editingId);if(!_0x33aaf6)return;_0x33aaf6[_0xa2d659(0x244)]?openActionSheet('delete'):commitDelete(_0xa2d659(0x16b),_0x33aaf6);}function commitDelete(_0x58775d,_0x127c6b){const _0xeac1d9=a2_0x3b5f76;lastUserActionTime=Date[_0xeac1d9(0x283)](),NotificationManager['send'](_0xeac1d9(0x1a5),_0x127c6b);const _0x51c54a=[];if(_0x58775d===_0xeac1d9(0x16b))sessions=sessions[_0xeac1d9(0x221)](_0x40bc62=>_0x40bc62['id']!==_0x127c6b['id']),_0x51c54a[_0xeac1d9(0x29b)](_0x127c6b[_0xeac1d9(0x26a)]);else{if(_0x58775d===_0xeac1d9(0x199)){const _0xd4cf43=_0x127c6b['dateStr'],_0x176b27=_0x127c6b[_0xeac1d9(0x244)];sessions[_0xeac1d9(0x27e)](_0x43be7c=>{const _0x22c59f=_0xeac1d9;_0x43be7c[_0x22c59f(0x244)]===_0x176b27&&_0x43be7c[_0x22c59f(0x26a)]>=_0xd4cf43&&_0x51c54a[_0x22c59f(0x29b)](_0x43be7c['dateStr']);}),sessions=sessions[_0xeac1d9(0x221)](_0x1188f7=>!(_0x1188f7[_0xeac1d9(0x244)]===_0x176b27&&_0x1188f7[_0xeac1d9(0x26a)]>=_0xd4cf43));}}afterSaveAction(_0x51c54a);}function afterSaveAction(_0x5839f4){const _0x1d049f=a2_0x3b5f76;DataManager[_0x1d049f(0x21f)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x1d049f(0x1b8)](_0x5839f4)[_0x1d049f(0x209)](()=>console[_0x1d049f(0x2be)](_0x1d049f(0x25a)))[_0x1d049f(0x26f)](_0x4dc42e=>showToast(_0x1d049f(0x183),![]));}const NotificationManager={'formatDate'(_0x1fad5a){const _0x59c923=a2_0x3b5f76,_0x3cd5cd=new Date(_0x1fad5a),_0x3febd2={'weekday':_0x59c923(0x1ee),'day':'numeric','month':_0x59c923(0x1ee)};let _0x2609ec=_0x3cd5cd[_0x59c923(0x285)](_0x59c923(0x276),_0x3febd2);return _0x2609ec['charAt'](0x0)[_0x59c923(0x295)]()+_0x2609ec[_0x59c923(0x1c8)](0x1);},'getText'(_0x313fdc,_0x48df00){const _0x3448a5=a2_0x3b5f76,_0x4a10eb=this[_0x3448a5(0x2b6)](_0x48df00[_0x3448a5(0x26a)]);switch(_0x313fdc){case _0x3448a5(0x170):return _0x3448a5(0x246)+(_0x3448a5(0x156)+_0x4a10eb+'\x0a')+(_0x3448a5(0x2b4)+_0x48df00[_0x3448a5(0x279)]+_0x3448a5(0x264)+_0x48df00[_0x3448a5(0x228)]+'\x0a\x0a')+_0x3448a5(0x1d0);case _0x3448a5(0x280):return _0x3448a5(0x23b)+_0x3448a5(0x237)+(_0x3448a5(0x178)+_0x48df00['start']+_0x3448a5(0x264)+_0x48df00[_0x3448a5(0x228)]+_0x3448a5(0x212))+(_0x3448a5(0x156)+_0x4a10eb);case _0x3448a5(0x1a5):return _0x3448a5(0x299)+(_0x3448a5(0x282)+_0x4a10eb+'\x20('+_0x48df00[_0x3448a5(0x279)]+_0x3448a5(0x205));case _0x3448a5(0x27c):return _0x3448a5(0x2b2)+_0x3448a5(0x258)+_0x3448a5(0x2bb);default:return'';}},async 'send'(_0x105714,_0x20df92){const _0x43e00f=a2_0x3b5f76;console['log']('[Notify]\x20Attempting\x20to\x20send:',_0x105714,_0x20df92);if(!_0x20df92){console[_0x43e00f(0x225)]('[Notify]\x20Error:\x20sessionData\x20is\x20null');return;}const _0x562044=String(_0x20df92[_0x43e00f(0x20c)]);console[_0x43e00f(0x2be)]('[Notify]\x20Detected\x20Client\x20ID:',_0x562044);if(!_0x20df92[_0x43e00f(0x20c)]||_0x562044===_0x43e00f(0x15d)||_0x562044===_0x43e00f(0x1dc)){console[_0x43e00f(0x225)]('[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!');if(_0x20df92[_0x43e00f(0x277)]){const _0x56cf92=clients[_0x43e00f(0x23c)](_0x796e=>_0x796e[_0x43e00f(0x293)]===_0x20df92[_0x43e00f(0x277)]);if(_0x56cf92)return console[_0x43e00f(0x2be)](_0x43e00f(0x1ca),_0x56cf92['id']),this[_0x43e00f(0x164)](_0x105714,{..._0x20df92,'clientId':_0x56cf92['id']});}return;}if(_0x562044[_0x43e00f(0x1c4)]<0x5){console['warn'](_0x43e00f(0x291),_0x562044);return;}const _0x5f30b6=this['getText'](_0x105714,_0x20df92);if(!_0x5f30b6){console[_0x43e00f(0x225)](_0x43e00f(0x2a1));return;}console[_0x43e00f(0x2be)](_0x43e00f(0x262)+_0x562044+_0x43e00f(0x243)),DataManager[_0x43e00f(0x29a)](_0x43e00f(0x1c2),{'chatId':_0x562044,'text':_0x5f30b6})[_0x43e00f(0x209)](_0x15d6f5=>console['log'](_0x43e00f(0x2c3),_0x15d6f5))[_0x43e00f(0x26f)](_0xd3d5c=>console['error'](_0x43e00f(0x1ba),_0xd3d5c));}};function getLocalDateStr(_0x2c4fdd){const _0x5720bf=a2_0x3b5f76,_0x5dc712=_0x2c4fdd[_0x5720bf(0x1b5)](),_0x30f6c8=String(_0x2c4fdd[_0x5720bf(0x1db)]()+0x1)['padStart'](0x2,'0'),_0x535570=String(_0x2c4fdd[_0x5720bf(0x2c2)]())[_0x5720bf(0x1e6)](0x2,'0');return _0x5dc712+'-'+_0x30f6c8+'-'+_0x535570;}function getDateStr(_0x3ffc16){const _0x437f31=a2_0x3b5f76,_0x41b021=new Date();return _0x41b021['setDate'](_0x41b021[_0x437f31(0x2c2)]()+_0x3ffc16),getLocalDateStr(_0x41b021);}function getStartOfWeek(_0xc9271b){const _0x1dfc1f=a2_0x3b5f76,_0x116c93=(function(){let _0x12fbce=!![];return function(_0x2ac6e1,_0x27c587){const _0x188b32=_0x12fbce?function(){const _0x5a96df=a2_0x59fe;if(_0x27c587){const _0x18d570=_0x27c587[_0x5a96df(0x278)](_0x2ac6e1,arguments);return _0x27c587=null,_0x18d570;}}:function(){};return _0x12fbce=![],_0x188b32;};}()),_0x9bafcb=_0x116c93(this,function(){const _0x5a1ffc=a2_0x59fe;return _0x9bafcb[_0x5a1ffc(0x1ae)]()[_0x5a1ffc(0x23d)](_0x5a1ffc(0x22f))[_0x5a1ffc(0x1ae)]()['constructor'](_0x9bafcb)[_0x5a1ffc(0x23d)](_0x5a1ffc(0x22f));});_0x9bafcb();const _0x4788d8=new Date(_0xc9271b),_0x17cacf=_0x4788d8[_0x1dfc1f(0x14a)](),_0x1dd38d=_0x4788d8[_0x1dfc1f(0x2c2)]()-_0x17cacf+(_0x17cacf===0x0?-0x6:0x1);return _0x4788d8['setDate'](_0x1dd38d),_0x4788d8[_0x1dfc1f(0x204)](0x0,0x0,0x0,0x0),_0x4788d8;}function hexToRgba(_0x52c616,_0x2043ed){const _0x412618=a2_0x3b5f76;if(!_0x52c616)return'rgba(100,100,100,0.5)';let _0x472baf=0x0,_0x12432c=0x0,_0x3e578f=0x0;if(_0x52c616[_0x412618(0x1c4)]===0x4)_0x472baf='0x'+_0x52c616[0x1]+_0x52c616[0x1],_0x12432c='0x'+_0x52c616[0x2]+_0x52c616[0x2],_0x3e578f='0x'+_0x52c616[0x3]+_0x52c616[0x3];else _0x52c616[_0x412618(0x1c4)]===0x7&&(_0x472baf='0x'+_0x52c616[0x1]+_0x52c616[0x2],_0x12432c='0x'+_0x52c616[0x3]+_0x52c616[0x4],_0x3e578f='0x'+_0x52c616[0x5]+_0x52c616[0x6]);return _0x412618(0x181)+ +_0x472baf+',\x20'+ +_0x12432c+',\x20'+ +_0x3e578f+',\x20'+_0x2043ed+')';}function renderTimeColumn(){const _0x590166=a2_0x3b5f76,_0x138cad=document[_0x590166(0x24e)](_0x590166(0x281)),_0x3425ea=document[_0x590166(0x24e)](_0x590166(0x287));_0x138cad['innerHTML']='',_0x138cad['appendChild'](_0x3425ea);for(let _0x45ee78=0x0;_0x45ee78<0x18;_0x45ee78++){const _0x2fcea4=document[_0x590166(0x297)](_0x590166(0x20e));_0x2fcea4[_0x590166(0x2c1)]=_0x590166(0x1af);if(_0x45ee78>0x0)_0x2fcea4['innerHTML']=_0x590166(0x1ce)+String(_0x45ee78)[_0x590166(0x1e6)](0x2,'0')+_0x590166(0x2aa);_0x138cad[_0x590166(0x16e)](_0x2fcea4);}}function renderDayRange(_0x26efb1,_0x62c702){const _0x3e3f64=a2_0x3b5f76,_0x572f38=document[_0x3e3f64(0x24e)](_0x3e3f64(0x274)),_0x14709d=document[_0x3e3f64(0x24e)]('gridColumns'),_0x4b5011=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x37f284=new Date();_0x37f284['setHours'](0x0,0x0,0x0,0x0);const _0x9b9acc=getLocalDateStr(new Date());for(let _0x8bc403=_0x26efb1;_0x8bc403<=_0x62c702;_0x8bc403++){const _0x918baa=new Date(_0x37f284);_0x918baa[_0x3e3f64(0x2ba)](_0x918baa[_0x3e3f64(0x2c2)]()+_0x8bc403);const _0x411198=getLocalDateStr(_0x918baa);let _0x4e1559=_0x918baa[_0x3e3f64(0x14a)]()-0x1;if(_0x4e1559===-0x1)_0x4e1559=0x6;const _0xe95001=_0x411198===_0x9b9acc,_0x1a6353=document[_0x3e3f64(0x297)](_0x3e3f64(0x20e));_0x1a6353['className']=_0x3e3f64(0x171)+(_0xe95001?_0x3e3f64(0x26e):''),_0x1a6353['id']='header-'+_0x411198,_0x1a6353[_0x3e3f64(0x1b2)](_0x3e3f64(0x1f2),_0x411198),_0x1a6353['innerHTML']=_0x3e3f64(0x248)+_0x4b5011[_0x4e1559]+_0x3e3f64(0x1d5)+_0x918baa[_0x3e3f64(0x2c2)]()+'</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-'+_0x411198+_0x3e3f64(0x182),_0x1a6353['onclick']=()=>openDayOptions(_0x411198,_0x4b5011[_0x4e1559]+'\x20'+_0x918baa['getDate']()),_0x572f38[_0x3e3f64(0x16e)](_0x1a6353);const _0x5d9800=document['createElement'](_0x3e3f64(0x20e));_0x5d9800['className']=_0x3e3f64(0x1a0)+(_0xe95001?_0x3e3f64(0x26e):''),_0x5d9800['setAttribute'](_0x3e3f64(0x1f2),_0x411198),_0x5d9800[_0x3e3f64(0x1b2)](_0x3e3f64(0x154),_0x4e1559),renderEventsForColumn(_0x5d9800,_0x411198,_0x4e1559),attachLongPressHandler(_0x5d9800,_0x918baa),_0x14709d['appendChild'](_0x5d9800),updateDayStats(_0x411198);}}function reRenderBlocks(){const _0x4dd884=a2_0x3b5f76;document[_0x4dd884(0x263)]('#gridColumns\x20.day-column')[_0x4dd884(0x27e)](_0x395aee=>{const _0x131186=_0x4dd884;_0x395aee['querySelectorAll'](_0x131186(0x1d4))[_0x131186(0x27e)](_0x2bdbe0=>_0x2bdbe0[_0x131186(0x192)]());const _0x1b31ad=_0x395aee[_0x131186(0x1b9)](_0x131186(0x1f2)),_0xa64ef4=parseInt(_0x395aee[_0x131186(0x1b9)](_0x131186(0x154))),_0x10495d=Math['round'](_0x395aee['offsetLeft']);(availabilityPattern[_0xa64ef4]||[])[_0x131186(0x27e)](_0x4ed211=>{const _0x473147=_0x131186,_0x158288=document[_0x473147(0x297)](_0x473147(0x20e));_0x158288['className']=_0x473147(0x21a);const _0x1e61c2=_0x4ed211*GRID_H;_0x158288[_0x473147(0x15b)][_0x473147(0x1f7)]=_0x1e61c2+'px',_0x158288[_0x473147(0x15b)]['backgroundPosition']='-'+_0x10495d+'px\x20-'+_0x1e61c2+'px',_0x395aee[_0x473147(0x16e)](_0x158288);});if(specialRanges&&specialRanges[_0x131186(0x1c4)]>0x0){const _0xf96870=new Date(_0x1b31ad+_0x131186(0x18b))[_0x131186(0x174)](),_0xbc0a3c=new Date(_0x1b31ad+_0x131186(0x1df))[_0x131186(0x174)]();specialRanges[_0x131186(0x27e)](_0x11fde2=>{const _0x407678=_0x131186,_0x2c4988=new Date(_0x11fde2['start'])[_0x407678(0x174)](),_0x5d74cd=new Date(_0x11fde2[_0x407678(0x228)])[_0x407678(0x174)](),_0xf62588=Math[_0x407678(0x1e5)](_0xf96870,_0x2c4988),_0x3eacf6=Math['min'](_0xbc0a3c,_0x5d74cd);if(_0xf62588<_0x3eacf6){if(_0xf62588<=_0xf96870&&_0x3eacf6>=_0xbc0a3c-0xea60){if(!_0x395aee['querySelector']('.day-off-overlay')){const _0x32f24d=document[_0x407678(0x297)](_0x407678(0x20e));_0x32f24d[_0x407678(0x2c1)]=_0x407678(0x253),_0x32f24d[_0x407678(0x15b)][_0x407678(0x1f5)]='-'+_0x10495d+'px\x200px',_0x395aee[_0x407678(0x16e)](_0x32f24d);}}else{const _0x343892=(_0xf62588-_0xf96870)/0x36ee80*GRID_H,_0xc3875e=(_0x3eacf6-_0xf62588)/0x36ee80*GRID_H,_0xf2efc3=document['createElement'](_0x407678(0x20e));_0xf2efc3[_0x407678(0x2c1)]='blocked-range-part\x20stripe-bg',_0xf2efc3[_0x407678(0x15b)][_0x407678(0x1f7)]=_0x343892+'px',_0xf2efc3[_0x407678(0x15b)][_0x407678(0x1a9)]=_0xc3875e+'px',_0xf2efc3[_0x407678(0x15b)]['backgroundPosition']='-'+_0x10495d+_0x407678(0x219)+_0x343892+'px',_0x395aee[_0x407678(0x16e)](_0xf2efc3);}}});}if(dateExceptions[_0x1b31ad]==='off'){if(!_0x395aee[_0x131186(0x1d8)](_0x131186(0x19e))){const _0x4308f2=document[_0x131186(0x297)](_0x131186(0x20e));_0x4308f2[_0x131186(0x2c1)]=_0x131186(0x253),_0x4308f2[_0x131186(0x15b)][_0x131186(0x1f5)]='-'+_0x10495d+'px\x200px',_0x395aee[_0x131186(0x16e)](_0x4308f2);}}renderEventsForColumn(_0x395aee,_0x1b31ad,_0xa64ef4),updateDayStats(_0x1b31ad);});}function updateAllDayStats(){const _0x315580=a2_0x3b5f76;document['querySelectorAll'](_0x315580(0x1e9))[_0x315580(0x27e)](_0x470d7f=>{const _0x2f79f9=_0x315580;updateDayStats(_0x470d7f[_0x2f79f9(0x1b9)](_0x2f79f9(0x1f2)));});}function updateDayStats(_0x4e2c8e){const _0x5b607e=a2_0x3b5f76,_0x5a45a3=document['getElementById'](_0x5b607e(0x25e)+_0x4e2c8e);if(!_0x5a45a3)return;const _0x21f430=new Date(_0x4e2c8e);let _0x25b1dd=_0x21f430[_0x5b607e(0x14a)]()-0x1;if(_0x25b1dd===-0x1)_0x25b1dd=0x6;if(dateExceptions[_0x4e2c8e]===_0x5b607e(0x268)){_0x5a45a3[_0x5b607e(0x15b)][_0x5b607e(0x1ea)]='none';return;}const _0x171f61=availabilityPattern[_0x25b1dd]||[],_0x582466=0x18-_0x171f61[_0x5b607e(0x1c4)],_0x447167=_0x582466*0x3c,_0xce8aec=sessions['filter'](_0x12a49b=>_0x12a49b['dateStr']===_0x4e2c8e&&_0x12a49b[_0x5b607e(0x1a8)]!==_0x5b607e(0x177));if(_0xce8aec[_0x5b607e(0x1c4)]===0x0){_0x5a45a3[_0x5b607e(0x15b)][_0x5b607e(0x1ea)]=_0x5b607e(0x165);return;}let _0x2e34a5=_0xce8aec[_0x5b607e(0x211)](_0x2bbacf=>{const _0x2d3a51=_0x5b607e,[_0x430c3e,_0x35f50d]=_0x2bbacf[_0x2d3a51(0x279)][_0x2d3a51(0x14b)](':')['map'](Number),[_0x1e96ed,_0x268ff8]=_0x2bbacf['end'][_0x2d3a51(0x14b)](':')['map'](Number);return[_0x430c3e*0x3c+_0x35f50d,_0x1e96ed*0x3c+_0x268ff8];});_0x2e34a5[_0x5b607e(0x1eb)]((_0x63176d,_0x177f7b)=>_0x63176d[0x0]-_0x177f7b[0x0]);let _0x5af97f=[];if(_0x2e34a5[_0x5b607e(0x1c4)]>0x0){let _0x777090=_0x2e34a5[0x0];for(let _0x2595a4=0x1;_0x2595a4<_0x2e34a5[_0x5b607e(0x1c4)];_0x2595a4++){_0x2e34a5[_0x2595a4][0x0]<_0x777090[0x1]?_0x777090[0x1]=Math[_0x5b607e(0x1e5)](_0x777090[0x1],_0x2e34a5[_0x2595a4][0x1]):(_0x5af97f[_0x5b607e(0x29b)](_0x777090),_0x777090=_0x2e34a5[_0x2595a4]);}_0x5af97f[_0x5b607e(0x29b)](_0x777090);}let _0x36248c=0x0;_0x5af97f[_0x5b607e(0x27e)](_0x51d2f2=>_0x36248c+=_0x51d2f2[0x1]-_0x51d2f2[0x0]),_0x5a45a3['style'][_0x5b607e(0x1ea)]=_0x5b607e(0x1d9);const _0x1a2e0c=_0x5a45a3[_0x5b607e(0x1d8)](_0x5b607e(0x148));if(_0x447167===0x0){_0x1a2e0c[_0x5b607e(0x15b)][_0x5b607e(0x290)]=_0x5b607e(0x217),_0x1a2e0c['style'][_0x5b607e(0x234)]=_0x5b607e(0x1fb);return;}const _0x5e1796=_0x36248c/_0x447167*0x64;console['log']('['+_0x4e2c8e+']\x20Доступно:\x20'+_0x582466+_0x5b607e(0x16f)+_0x36248c+_0x5b607e(0x152)+_0x5e1796['toFixed'](0x1)+'%'),_0x5e1796>0x64?(_0x1a2e0c[_0x5b607e(0x15b)][_0x5b607e(0x290)]=_0x5b607e(0x217),_0x1a2e0c[_0x5b607e(0x15b)][_0x5b607e(0x234)]='var(--acc-red)'):(_0x1a2e0c[_0x5b607e(0x15b)][_0x5b607e(0x290)]=_0x5e1796+'%',_0x1a2e0c[_0x5b607e(0x15b)][_0x5b607e(0x234)]=_0x5b607e(0x19d));}function renderEventsForColumn(_0x6fc1f8,_0x359624,_0xd6b8f2){const _0x373bdc=a2_0x3b5f76,_0xfa710d=sessions[_0x373bdc(0x221)](_0x147c2e=>_0x147c2e[_0x373bdc(0x26a)]===_0x359624),_0x19ff6d=_0xfa710d[_0x373bdc(0x211)](_0x1ba1d2=>{const _0x297b9b=_0x373bdc,[_0x432b37,_0x11aa18]=_0x1ba1d2[_0x297b9b(0x279)][_0x297b9b(0x14b)](':')[_0x297b9b(0x211)](Number),[_0x2f32d0,_0x2cefb3]=_0x1ba1d2[_0x297b9b(0x228)][_0x297b9b(0x14b)](':')[_0x297b9b(0x211)](Number);return{'data':_0x1ba1d2,'start':_0x432b37*0x3c+_0x11aa18,'end':_0x2f32d0*0x3c+_0x2cefb3,'colIndex':0x0};});_0x19ff6d[_0x373bdc(0x1eb)]((_0x23a71a,_0x2df5b0)=>{const _0x2f61a0=_0x373bdc;if(_0x23a71a[_0x2f61a0(0x279)]!==_0x2df5b0[_0x2f61a0(0x279)])return _0x23a71a[_0x2f61a0(0x279)]-_0x2df5b0['start'];return _0x2df5b0[_0x2f61a0(0x228)]-_0x2df5b0[_0x2f61a0(0x279)]-(_0x23a71a[_0x2f61a0(0x228)]-_0x23a71a[_0x2f61a0(0x279)]);});const _0x4e001e=[];_0x19ff6d['forEach'](_0x518834=>{const _0x1b8b3c=_0x373bdc;let _0x1506d9=![];for(let _0x3d90c8=0x0;_0x3d90c8<_0x4e001e[_0x1b8b3c(0x1c4)];_0x3d90c8++){const _0x22fd11=_0x4e001e[_0x3d90c8],_0x24708e=_0x22fd11[_0x22fd11[_0x1b8b3c(0x1c4)]-0x1];if(_0x518834[_0x1b8b3c(0x279)]>=_0x24708e[_0x1b8b3c(0x228)]){_0x22fd11[_0x1b8b3c(0x29b)](_0x518834),_0x518834[_0x1b8b3c(0x147)]=_0x3d90c8,_0x1506d9=!![];break;}}!_0x1506d9&&(_0x4e001e[_0x1b8b3c(0x29b)]([_0x518834]),_0x518834[_0x1b8b3c(0x147)]=_0x4e001e['length']-0x1);}),_0x19ff6d['forEach'](_0x5b5584=>{const _0x24859b=_0x373bdc;let _0x106197=0x0;_0x19ff6d[_0x24859b(0x27e)](_0x52540c=>{const _0xb032ee=_0x24859b;if(Math[_0xb032ee(0x1e5)](_0x5b5584['start'],_0x52540c[_0xb032ee(0x279)])<Math[_0xb032ee(0x22d)](_0x5b5584[_0xb032ee(0x228)],_0x52540c['end'])){if(_0x52540c[_0xb032ee(0x147)]>_0x106197)_0x106197=_0x52540c[_0xb032ee(0x147)];}});const _0x11f640=_0x106197+0x1,_0x1e4c5a=0x64/_0x11f640,_0x560060=_0x5b5584[_0x24859b(0x147)]*_0x1e4c5a,_0xe2c52c=createEventEl(_0x5b5584[_0x24859b(0x176)]);_0xe2c52c[_0x24859b(0x15b)][_0x24859b(0x290)]='calc('+_0x1e4c5a+_0x24859b(0x2b5),_0xe2c52c['style']['left']='calc('+_0x560060+'%\x20+\x202px)',_0xe2c52c['style'][_0x24859b(0x1c7)]=0xa+_0x5b5584[_0x24859b(0x147)],_0x1e4c5a<0x55&&_0xe2c52c[_0x24859b(0x2af)][_0x24859b(0x254)](_0x24859b(0x1a3)),_0x6fc1f8['appendChild'](_0xe2c52c);});}function createEventEl(_0x4cab89){const _0x4432ca=a2_0x3b5f76,[_0x1c2124,_0xbd88ad]=_0x4cab89['start'][_0x4432ca(0x14b)](':')[_0x4432ca(0x211)](Number),[_0x17f1a4,_0x1f6cdf]=_0x4cab89['end'][_0x4432ca(0x14b)](':')[_0x4432ca(0x211)](Number),_0x130372=(_0x1c2124*0x3c+_0xbd88ad)/0x3c*GRID_H,_0x949c62=(_0x17f1a4*0x3c+_0x1f6cdf-(_0x1c2124*0x3c+_0xbd88ad))/0x3c*GRID_H,_0x283000=document[_0x4432ca(0x297)](_0x4432ca(0x20e)),_0x2f17b1=_0x4cab89['status']===_0x4432ca(0x26b)?_0x4432ca(0x1d7):'';_0x283000[_0x4432ca(0x2c1)]=_0x4432ca(0x250)+_0x2f17b1,_0x283000[_0x4432ca(0x15b)][_0x4432ca(0x1f7)]=_0x130372+'px',_0x283000[_0x4432ca(0x15b)][_0x4432ca(0x1a9)]=Math['max'](_0x949c62,0x14)+'px';const _0x48a689=clients['find'](_0x13a17b=>_0x4cab89['clientId']&&String(_0x13a17b['id'])===String(_0x4cab89[_0x4432ca(0x20c)])||_0x13a17b[_0x4432ca(0x293)]===_0x4cab89[_0x4432ca(0x277)]),_0x217974=_0x48a689?_0x48a689[_0x4432ca(0x289)]:_0x4432ca(0x222);_0x283000['style'][_0x4432ca(0x1ad)]=_0x217974,_0x283000['style']['backgroundColor']=hexToRgba(_0x217974,0.85);let _0x578466=_0x4432ca(0x29d)+_0x4cab89[_0x4432ca(0x277)]+_0x4432ca(0x24f)+_0x4cab89[_0x4432ca(0x279)]+'\x20-\x20'+_0x4cab89[_0x4432ca(0x228)]+_0x4432ca(0x25d);return _0x4cab89[_0x4432ca(0x244)]&&(_0x578466+=_0x4432ca(0x286)),_0x4cab89[_0x4432ca(0x1a8)]===_0x4432ca(0x26b)&&(_0x578466+=_0x4432ca(0x17b)),_0x283000['innerHTML']=_0x578466,_0x283000[_0x4432ca(0x1b3)]=_0x15c18f=>{_0x15c18f['stopPropagation'](),openEdit(_0x4cab89);},_0x283000;}function attachLongPressHandler(_0x458014,_0x444a43){const _0x1706a5=a2_0x3b5f76;let _0x393767=0x0,_0x2ada09=null;const _0x3e9d22=_0x32136d=>{const _0x3db48d=a2_0x59fe;if(_0x32136d[_0x3db48d(0x172)][_0x3db48d(0x288)](_0x3db48d(0x296)))return;isScrolling=![],_0x393767=_0x32136d[_0x3db48d(0x2a3)]?_0x32136d[_0x3db48d(0x2a3)][0x0]['clientY']:_0x32136d[_0x3db48d(0x1e4)],_0x2ada09=setTimeout(()=>{const _0x112eeb=_0x3db48d;if(!isScrolling){navigator[_0x112eeb(0x202)]?.(0x32);const _0x2ea731=_0x458014['getBoundingClientRect'](),_0x4e64db=Math[_0x112eeb(0x1b4)]((_0x393767-_0x2ea731[_0x112eeb(0x1f7)])/GRID_H);_0x444a43[_0x112eeb(0x204)](_0x4e64db,0x0),openAddSession(_0x444a43);}},0x1f4);},_0x23533d=()=>{isScrolling=!![],clearTimeout(_0x2ada09);},_0x1f15de=()=>{clearTimeout(_0x2ada09);};_0x458014[_0x1706a5(0x1a7)](_0x1706a5(0x159),_0x3e9d22,{'passive':!![]}),_0x458014[_0x1706a5(0x1a7)]('touchmove',_0x23533d,{'passive':!![]}),_0x458014[_0x1706a5(0x1a7)](_0x1706a5(0x1f0),_0x1f15de),_0x458014[_0x1706a5(0x1a7)]('mousedown',_0x3e9d22),_0x458014['addEventListener'](_0x1706a5(0x163),_0x23533d),_0x458014[_0x1706a5(0x1a7)](_0x1706a5(0x145),_0x1f15de);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x109f0a=a2_0x3b5f76,_0x427a20=document['getElementById'](_0x109f0a(0x14f)),_0x4c9d62=_0x427a20[_0x109f0a(0x23a)],_0x56f9da=_0x427a20[_0x109f0a(0x2b9)],_0x872fbb=_0x427a20[_0x109f0a(0x1dd)];if(_0x56f9da-(_0x4c9d62+_0x872fbb)<0x12c){const _0x5a280e=endOffset;endOffset+=0xe,renderDayRange(_0x5a280e+0x1,endOffset),reRenderBlocks();}if(_0x4c9d62<0x12c){const _0x13773e=startOffset;startOffset-=0xe,prependDays(startOffset,_0x13773e-0x1),_0x427a20[_0x109f0a(0x23a)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x679559,_0x10743a){const _0xc0d82d=a2_0x3b5f76,_0x317939=document[_0xc0d82d(0x24e)](_0xc0d82d(0x274)),_0x258b1f=document[_0xc0d82d(0x24e)]('gridColumns'),_0x419bbb=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x5e465f=new Date();_0x5e465f[_0xc0d82d(0x204)](0x0,0x0,0x0,0x0);const _0x4346f8=getLocalDateStr(new Date()),_0x47bae3=document[_0xc0d82d(0x18d)](),_0xdbd572=document['createDocumentFragment']();for(let _0x5151f2=_0x679559;_0x5151f2<=_0x10743a;_0x5151f2++){const _0x12fa9a=new Date(_0x5e465f);_0x12fa9a['setDate'](_0x12fa9a[_0xc0d82d(0x2c2)]()+_0x5151f2);const _0x66ddc8=getLocalDateStr(_0x12fa9a);let _0x7e869d=_0x12fa9a[_0xc0d82d(0x14a)]()-0x1;if(_0x7e869d===-0x1)_0x7e869d=0x6;const _0x2ab414=_0x66ddc8===_0x4346f8,_0x37154c=document[_0xc0d82d(0x297)](_0xc0d82d(0x20e));_0x37154c[_0xc0d82d(0x2c1)]=_0xc0d82d(0x171)+(_0x2ab414?_0xc0d82d(0x26e):''),_0x37154c['id']=_0xc0d82d(0x2bc)+_0x66ddc8,_0x37154c[_0xc0d82d(0x1b2)](_0xc0d82d(0x1f2),_0x66ddc8),_0x37154c[_0xc0d82d(0x1c9)]=_0xc0d82d(0x248)+_0x419bbb[_0x7e869d]+'</div><div\x20class=\x22dch-num\x22>'+_0x12fa9a[_0xc0d82d(0x2c2)]()+_0xc0d82d(0x16a)+_0x66ddc8+_0xc0d82d(0x182),_0x37154c[_0xc0d82d(0x1b3)]=()=>openDayOptions(_0x66ddc8,_0x419bbb[_0x7e869d]+'\x20'+_0x12fa9a[_0xc0d82d(0x2c2)]()),_0x47bae3[_0xc0d82d(0x16e)](_0x37154c);const _0x552a75=document[_0xc0d82d(0x297)](_0xc0d82d(0x20e));_0x552a75[_0xc0d82d(0x2c1)]=_0xc0d82d(0x1a0)+(_0x2ab414?_0xc0d82d(0x26e):''),_0x552a75[_0xc0d82d(0x1b2)]('data-date',_0x66ddc8),_0x552a75[_0xc0d82d(0x1b2)](_0xc0d82d(0x154),_0x7e869d),renderEventsForColumn(_0x552a75,_0x66ddc8,_0x7e869d),attachLongPressHandler(_0x552a75,_0x12fa9a),_0xdbd572[_0xc0d82d(0x16e)](_0x552a75),updateDayStats(_0x66ddc8);}_0x317939[_0xc0d82d(0x168)](_0x47bae3,_0x317939[_0xc0d82d(0x2bd)]),_0x258b1f[_0xc0d82d(0x168)](_0xdbd572,_0x258b1f[_0xc0d82d(0x1d8)]('.day-column'));}function validateAppointment(_0x1b15fc,_0xf89bdf,_0x2c0d8f,_0x22ab57,_0x4711b0){const _0x1e5480=a2_0x3b5f76,[_0x4a2afd,_0x4abaf3]=_0xf89bdf[_0x1e5480(0x14b)](':')[_0x1e5480(0x211)](Number),[_0x14a45b,_0x33df34]=_0x2c0d8f[_0x1e5480(0x14b)](':')[_0x1e5480(0x211)](Number),_0x466252=_0x4a2afd*0x3c+_0x4abaf3,_0x8310b4=_0x14a45b*0x3c+_0x33df34,_0x4b7f3f=String(_0x4711b0);let _0x36e730=![],_0xbc3e7b='';for(let _0x409563 of sessions){if(_0x409563[_0x1e5480(0x26a)]!==_0x1b15fc)continue;if(_0x409563[_0x1e5480(0x1a8)]===_0x1e5480(0x177))continue;if(_0x22ab57&&String(_0x409563['id'])===String(_0x22ab57))continue;const [_0x5d881d,_0x2c22df]=_0x409563[_0x1e5480(0x279)][_0x1e5480(0x14b)](':')['map'](Number),[_0x1cd5b6,_0x54b05c]=_0x409563[_0x1e5480(0x228)][_0x1e5480(0x14b)](':')[_0x1e5480(0x211)](Number),_0x54eab4=_0x5d881d*0x3c+_0x2c22df,_0x167dc6=_0x1cd5b6*0x3c+_0x54b05c;if(Math[_0x1e5480(0x1e5)](_0x466252,_0x54eab4)<Math[_0x1e5480(0x22d)](_0x8310b4,_0x167dc6)){if(_0x409563['clientId']&&String(_0x409563[_0x1e5480(0x20c)])===_0x4b7f3f)return{'valid':![],'msg':'Этот\x20клиент\x20('+_0x409563[_0x1e5480(0x277)]+_0x1e5480(0x1ed)};_0x36e730=!![],_0xbc3e7b=_0x409563['client'];}}if(_0x36e730)return{'valid':!![],'warning':'Групповая:\x20также\x20записан\x20'+_0xbc3e7b};return{'valid':!![]};}function updateDateDisplay(){const _0x3dcd84=a2_0x3b5f76,_0x2ef8a3=document[_0x3dcd84(0x24e)](_0x3dcd84(0x2b1))[_0x3dcd84(0x14d)],_0x59ea06=document[_0x3dcd84(0x24e)](_0x3dcd84(0x216));if(!_0x2ef8a3){_0x59ea06[_0x3dcd84(0x1ab)]='';return;}const [_0x18b7ca,_0x2b9879,_0x2b11f5]=_0x2ef8a3['split']('-')[_0x3dcd84(0x211)](Number),_0x3a55c9=new Date(_0x18b7ca,_0x2b9879-0x1,_0x2b11f5),_0x1df333={'weekday':_0x3dcd84(0x1ee),'day':'numeric','month':_0x3dcd84(0x1ee),'year':_0x3dcd84(0x195)};let _0x264376=_0x3a55c9['toLocaleDateString']('ru-RU',_0x1df333);_0x264376=_0x264376[_0x3dcd84(0x239)](0x0)[_0x3dcd84(0x295)]()+_0x264376[_0x3dcd84(0x1c8)](0x1),_0x59ea06[_0x3dcd84(0x1ab)]=_0x264376;}function autoSetEndTime(){const _0x11d5a9=a2_0x3b5f76,_0x1fe36c=document[_0x11d5a9(0x24e)]('inpStart')[_0x11d5a9(0x14d)];if(!_0x1fe36c)return;const [_0x7bba2a,_0x25a274]=_0x1fe36c[_0x11d5a9(0x14b)](':')['map'](Number);let _0x317428=_0x7bba2a+0x1;if(_0x317428>0x17)_0x317428=0x0;const _0x55f224=String(_0x317428)[_0x11d5a9(0x1e6)](0x2,'0')+':'+String(_0x25a274)[_0x11d5a9(0x1e6)](0x2,'0');document['getElementById'](_0x11d5a9(0x14e))[_0x11d5a9(0x14d)]=_0x55f224;}function populateClientSelect(){const _0x2e7f51=a2_0x3b5f76,_0x49596d=document[_0x2e7f51(0x24e)](_0x2e7f51(0x1fc));_0x49596d[_0x2e7f51(0x1c9)]='';if(clients[_0x2e7f51(0x1c4)]===0x0){const _0x323822=document[_0x2e7f51(0x297)](_0x2e7f51(0x24c));_0x323822[_0x2e7f51(0x255)]=_0x2e7f51(0x1a2),_0x49596d[_0x2e7f51(0x16e)](_0x323822);return;}clients['forEach'](_0x2df979=>{const _0x20fa4b=_0x2e7f51,_0x5b21d0=document[_0x20fa4b(0x297)](_0x20fa4b(0x24c));_0x5b21d0[_0x20fa4b(0x14d)]=_0x2df979[_0x20fa4b(0x293)],_0x5b21d0[_0x20fa4b(0x1ab)]=_0x2df979[_0x20fa4b(0x293)],_0x49596d[_0x20fa4b(0x16e)](_0x5b21d0);});}function openActionSheet(_0x36fb51){const _0x1370ec=a2_0x3b5f76,_0x21f7ca=document[_0x1370ec(0x24e)](_0x1370ec(0x21b)),_0x4c19a6=document[_0x1370ec(0x24e)]('actionSheetOverlay'),_0xc6f5d5=document[_0x1370ec(0x24e)](_0x1370ec(0x20a)),_0x46f1f6=document[_0x1370ec(0x24e)](_0x1370ec(0x1f6)),_0x215624=document[_0x1370ec(0x24e)](_0x1370ec(0x150));_0x4c19a6[_0x1370ec(0x2af)][_0x1370ec(0x254)](_0x1370ec(0x20b)),_0x21f7ca[_0x1370ec(0x2af)][_0x1370ec(0x254)](_0x1370ec(0x16c));if(_0x36fb51===_0x1370ec(0x2c4))_0xc6f5d5['textContent']=_0x1370ec(0x17d),_0x46f1f6['textContent']=_0x1370ec(0x173),_0x46f1f6[_0x1370ec(0x1b3)]=()=>{const _0x179474=_0x1370ec;closeActionSheet(),updateSeriesBatch(_0x179474(0x16b),tempSessionData);},_0x215624['textContent']='Эту\x20и\x20будущие',_0x215624[_0x1370ec(0x1b3)]=()=>{const _0x3ea394=_0x1370ec;closeActionSheet(),updateSeriesBatch(_0x3ea394(0x199),tempSessionData);};else _0x36fb51===_0x1370ec(0x1f3)&&(_0xc6f5d5[_0x1370ec(0x1ab)]='Удаление',_0x46f1f6[_0x1370ec(0x1ab)]=_0x1370ec(0x173),_0x46f1f6[_0x1370ec(0x2c1)]=_0x1370ec(0x143),_0x46f1f6[_0x1370ec(0x1b3)]=()=>{const _0x5c303a=_0x1370ec;closeActionSheet(),commitDelete('single',sessions[_0x5c303a(0x23c)](_0x32aba4=>_0x32aba4['id']===editingId));},_0x215624[_0x1370ec(0x1ab)]=_0x1370ec(0x2a4),_0x215624[_0x1370ec(0x2c1)]='as-button\x20danger\x20bold',_0x215624[_0x1370ec(0x1b3)]=()=>{const _0xd82c37=_0x1370ec;closeActionSheet(),commitDelete(_0xd82c37(0x199),sessions[_0xd82c37(0x23c)](_0x1b4bc7=>_0x1b4bc7['id']===editingId));});}function closeActionSheet(){const _0x4d187d=a2_0x3b5f76;document[_0x4d187d(0x24e)](_0x4d187d(0x21b))[_0x4d187d(0x2af)][_0x4d187d(0x192)]('open'),document[_0x4d187d(0x24e)]('actionSheetOverlay')[_0x4d187d(0x2af)][_0x4d187d(0x192)]('active');}function openSettings(){openSheet('settingsSheet');}function saveCoachSettings(){const _0x5a87e7=a2_0x3b5f76,_0x43661f=document['getElementById'](_0x5a87e7(0x20f))[_0x5a87e7(0x14d)];localStorage[_0x5a87e7(0x28b)](_0x5a87e7(0x1bd),_0x43661f),console['log'](_0x5a87e7(0x1cc),_0x43661f),DataManager[_0x5a87e7(0x29a)](_0x5a87e7(0x267),{'settings':{'cancel_window':_0x43661f}})[_0x5a87e7(0x26f)](_0x118468=>{const _0x194c0a=_0x5a87e7;console[_0x194c0a(0x225)](_0x194c0a(0x2c0),_0x118468),showToast(_0x194c0a(0x19a),![]);});}function loadCoachSettings(){const _0x1279be=a2_0x3b5f76,_0x4d8c31=localStorage[_0x1279be(0x1c1)](_0x1279be(0x1bd));_0x4d8c31&&(document[_0x1279be(0x24e)](_0x1279be(0x20f))[_0x1279be(0x14d)]=_0x4d8c31);}function openRangesSheet(){closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet('rangesSheet');}function addRange(){const _0x5cc8fa=a2_0x3b5f76,_0x537236=document[_0x5cc8fa(0x24e)](_0x5cc8fa(0x251))[_0x5cc8fa(0x14d)],_0x52ba6e=document[_0x5cc8fa(0x24e)](_0x5cc8fa(0x193))[_0x5cc8fa(0x14d)],_0x28e210=document[_0x5cc8fa(0x24e)](_0x5cc8fa(0x231))[_0x5cc8fa(0x14d)],_0x5c650e=document[_0x5cc8fa(0x24e)](_0x5cc8fa(0x21e))[_0x5cc8fa(0x14d)];if(!_0x537236||!_0x52ba6e||!_0x28e210||!_0x5c650e)return alert(_0x5cc8fa(0x28d));const _0x4db78f=_0x537236+'T'+_0x52ba6e,_0x371396=_0x28e210+'T'+_0x5c650e;if(_0x4db78f>=_0x371396)return alert(_0x5cc8fa(0x1e1));specialRanges['push']({'start':_0x4db78f,'end':_0x371396}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x5cc8fa(0x21f)](),DataManager[_0x5cc8fa(0x29a)]('save_settings',{'settings':{'ranges':specialRanges}});}function deleteRange(_0x5702ee){const _0x1e6590=a2_0x3b5f76;specialRanges[_0x1e6590(0x269)](_0x5702ee,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x1e6590(0x21f)](),DataManager[_0x1e6590(0x29a)](_0x1e6590(0x267),{'settings':{'ranges':specialRanges}});}function a2_0x59fe(_0x2c431d,_0x4301d7){_0x2c431d=_0x2c431d-0x143;const _0x51052d=a2_0x53cd();let _0x2ca3e4=_0x51052d[_0x2c431d];return _0x2ca3e4;}function resetRangeForm(){const _0x36807d=a2_0x3b5f76;document[_0x36807d(0x24e)]('rangeStartDate')[_0x36807d(0x14d)]='',document['getElementById'](_0x36807d(0x193))[_0x36807d(0x14d)]=_0x36807d(0x29e),document[_0x36807d(0x24e)](_0x36807d(0x231))[_0x36807d(0x14d)]='',document['getElementById'](_0x36807d(0x21e))['value']=_0x36807d(0x18e);}function renderRangesList(){const _0x160629=a2_0x3b5f76,_0x47c064=document[_0x160629(0x24e)]('rangesList');_0x47c064[_0x160629(0x1c9)]='';if(!specialRanges[_0x160629(0x1c4)]){_0x47c064[_0x160629(0x1c9)]=_0x160629(0x1bb);return;}specialRanges[_0x160629(0x27e)]((_0x3b295a,_0x48b70d)=>{const _0x396e4f=_0x160629,_0x24dc55=document['createElement'](_0x396e4f(0x20e));_0x24dc55[_0x396e4f(0x2c1)]='range-item';const _0x486e4f=_0x5e5a39=>{const _0x2ba744=_0x396e4f,_0x3626a4=new Date(_0x5e5a39);return _0x3626a4[_0x2ba744(0x2c2)]()+'.'+String(_0x3626a4[_0x2ba744(0x1db)]()+0x1)[_0x2ba744(0x1e6)](0x2,'0')+'\x20'+String(_0x3626a4['getHours']())[_0x2ba744(0x1e6)](0x2,'0')+':'+String(_0x3626a4['getMinutes']())[_0x2ba744(0x1e6)](0x2,'0');};_0x24dc55[_0x396e4f(0x1c9)]=_0x396e4f(0x2bf)+_0x486e4f(_0x3b295a[_0x396e4f(0x279)])+_0x396e4f(0x264)+_0x486e4f(_0x3b295a['end'])+_0x396e4f(0x1e8)+_0x48b70d+_0x396e4f(0x1f1),_0x47c064['appendChild'](_0x24dc55);});}function scrollToToday(){const _0x459ba2=a2_0x3b5f76,_0x200da7=getLocalDateStr(new Date()),_0x527bf0=document['getElementById'](_0x459ba2(0x2bc)+_0x200da7),_0x244707=document['getElementById'](_0x459ba2(0x14f));if(_0x527bf0&&_0x244707){const _0x187e68=_0x244707[_0x459ba2(0x1dd)],_0x20a731=_0x527bf0[_0x459ba2(0x167)],_0x34842e=_0x527bf0['offsetWidth'];_0x244707[_0x459ba2(0x23a)]=_0x20a731-_0x187e68/0x2+_0x34842e/0x2,_0x244707[_0x459ba2(0x27d)]=0x9*GRID_H;}}function onScroll(){const _0x34bd69=a2_0x3b5f76,_0x33def6=document[_0x34bd69(0x24e)](_0x34bd69(0x14f)),_0x3a0090=document[_0x34bd69(0x263)](_0x34bd69(0x1e9));for(let _0x2f7d4c of _0x3a0090)if(_0x2f7d4c[_0x34bd69(0x167)]>=_0x33def6[_0x34bd69(0x23a)]){const _0x21dcb8=new Date(_0x2f7d4c['getAttribute'](_0x34bd69(0x1f2)));document['getElementById'](_0x34bd69(0x185))[_0x34bd69(0x1ab)]=_0x21dcb8[_0x34bd69(0x17c)]('ru',{'month':'long'})[_0x34bd69(0x295)]()+'\x20'+_0x21dcb8['getFullYear']();break;}}function showToast(_0x320e42,_0x4cc4e7=![]){const _0x587b1e=a2_0x3b5f76,_0x10de8a=document['getElementById'](_0x587b1e(0x1be));_0x10de8a[_0x587b1e(0x2c1)]=_0x587b1e(0x294)+(_0x4cc4e7?'success':''),document[_0x587b1e(0x24e)](_0x587b1e(0x2a6))['textContent']=_0x4cc4e7?_0x587b1e(0x249):_0x587b1e(0x1b6),document[_0x587b1e(0x24e)](_0x587b1e(0x284))[_0x587b1e(0x1ab)]=_0x320e42,_0x10de8a['classList']['add']('show'),setTimeout(()=>{const _0x39e913=_0x587b1e;_0x10de8a['classList'][_0x39e913(0x192)](_0x39e913(0x25b));},0xbb8);}function openDayOptions(_0x1e8831,_0x1132f0){const _0x4fd3b9=a2_0x3b5f76;selectedDayForOptions=_0x1e8831,document['getElementById'](_0x4fd3b9(0x1b0))[_0x4fd3b9(0x1ab)]=_0x1132f0,openSheet('dayOptionsSheet');}function toggleDayOff(){const _0x11189a=a2_0x3b5f76;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x11189a(0x268),reRenderBlocks(),closeAllSheets(),DataManager[_0x11189a(0x21f)](),DataManager['fetchFromServer']('save_settings',{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x4dee09=a2_0x3b5f76;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x4dee09(0x21f)](),DataManager['fetchFromServer'](_0x4dee09(0x267),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x2a4cce){const _0xe0937f=a2_0x3b5f76;document['getElementById'](_0xe0937f(0x15f))[_0xe0937f(0x2af)][_0xe0937f(0x254)]('active'),document[_0xe0937f(0x24e)](_0x2a4cce)[_0xe0937f(0x2af)][_0xe0937f(0x254)](_0xe0937f(0x16c));}function closeAllSheets(){const _0x183367=a2_0x3b5f76;document[_0x183367(0x24e)](_0x183367(0x15f))[_0x183367(0x2af)][_0x183367(0x192)](_0x183367(0x20b)),document[_0x183367(0x263)](_0x183367(0x223))[_0x183367(0x27e)](_0x9020b3=>_0x9020b3[_0x183367(0x2af)][_0x183367(0x192)](_0x183367(0x16c)));}function openPatternEditor(){const _0x177f5e=a2_0x3b5f76;closeAllSheets(),document[_0x177f5e(0x24e)](_0x177f5e(0x153))['classList']['add'](_0x177f5e(0x16c)),renderPatternEditor();}function closePatternEditor(){const _0x43d381=a2_0x3b5f76;document[_0x43d381(0x24e)](_0x43d381(0x153))['classList'][_0x43d381(0x192)](_0x43d381(0x16c));}function savePattern(){const _0x66b7f5=a2_0x3b5f76;document[_0x66b7f5(0x24e)](_0x66b7f5(0x153))[_0x66b7f5(0x2af)][_0x66b7f5(0x192)](_0x66b7f5(0x16c)),reRenderBlocks(),DataManager['saveLocally'](),DataManager[_0x66b7f5(0x29a)]('save_settings',{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x4e5d6d=a2_0x3b5f76,_0x4c7d22=document[_0x4e5d6d(0x24e)](_0x4e5d6d(0x151));_0x4c7d22[_0x4e5d6d(0x1c9)]='';const _0x2a1c4f=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x377642=document[_0x4e5d6d(0x297)](_0x4e5d6d(0x20e));_0x377642[_0x4e5d6d(0x2c1)]=_0x4e5d6d(0x260),_0x4c7d22['appendChild'](_0x377642),_0x2a1c4f[_0x4e5d6d(0x27e)]((_0x3666c0,_0x37f403)=>{const _0x4fbe66=_0x4e5d6d,_0x2852f8=document[_0x4fbe66(0x297)](_0x4fbe66(0x20e));_0x2852f8[_0x4fbe66(0x2c1)]='pe-col-header',_0x2852f8[_0x4fbe66(0x1c9)]=_0x3666c0+'\x20<span\x20class=\x22arrow\x22>↓</span>',_0x2852f8[_0x4fbe66(0x1b3)]=()=>toggleColPattern(_0x37f403),_0x4c7d22['appendChild'](_0x2852f8);});for(let _0x2c77f2=0x0;_0x2c77f2<0x18;_0x2c77f2++){const _0x258df4=document[_0x4e5d6d(0x297)](_0x4e5d6d(0x20e));_0x258df4[_0x4e5d6d(0x2c1)]='pe-time-label',_0x258df4[_0x4e5d6d(0x1c9)]=_0x4e5d6d(0x19c)+String(_0x2c77f2)[_0x4e5d6d(0x1e6)](0x2,'0')+':00',_0x258df4['onclick']=()=>toggleRowPattern(_0x2c77f2),_0x4c7d22['appendChild'](_0x258df4);for(let _0x5b4839=0x0;_0x5b4839<0x7;_0x5b4839++){const _0xd653c3=document[_0x4e5d6d(0x297)]('div'),_0x323ca8=(availabilityPattern[_0x5b4839]||[])[_0x4e5d6d(0x2b0)](_0x2c77f2),_0x1a02e7=!_0x323ca8;_0xd653c3[_0x4e5d6d(0x2c1)]='pe-cell\x20'+(_0x1a02e7?_0x4e5d6d(0x20b):''),_0xd653c3['onclick']=()=>toggleSinglePattern(_0x5b4839,_0x2c77f2),_0x4c7d22[_0x4e5d6d(0x16e)](_0xd653c3);}}}function toggleSinglePattern(_0x38e149,_0x54a849){const _0x1cf359=a2_0x3b5f76;if(!availabilityPattern[_0x38e149])availabilityPattern[_0x38e149]=[];const _0x1daa3a=availabilityPattern[_0x38e149],_0x192f54=_0x1daa3a[_0x1cf359(0x207)](_0x54a849);_0x192f54===-0x1?_0x1daa3a[_0x1cf359(0x29b)](_0x54a849):_0x1daa3a[_0x1cf359(0x269)](_0x192f54,0x1),renderPatternEditor();}function toggleColPattern(_0x4319d3){if(!availabilityPattern[_0x4319d3])availabilityPattern[_0x4319d3]=[];const _0x464490=availabilityPattern[_0x4319d3];_0x464490['length']===0x0?availabilityPattern[_0x4319d3]=Array['from']({'length':0x18},(_0x4aceb1,_0x11a5dc)=>_0x11a5dc):availabilityPattern[_0x4319d3]=[],renderPatternEditor();}function toggleRowPattern(_0x439dcc){const _0x24f1d0=a2_0x3b5f76;let _0x18ad3f=!![];for(let _0x26817f=0x0;_0x26817f<0x7;_0x26817f++){if((availabilityPattern[_0x26817f]||[])[_0x24f1d0(0x2b0)](_0x439dcc)){_0x18ad3f=![];break;}}for(let _0x48cfcb=0x0;_0x48cfcb<0x7;_0x48cfcb++){if(!availabilityPattern[_0x48cfcb])availabilityPattern[_0x48cfcb]=[];const _0x226870=availabilityPattern[_0x48cfcb][_0x24f1d0(0x207)](_0x439dcc);if(_0x18ad3f){if(_0x226870===-0x1)availabilityPattern[_0x48cfcb][_0x24f1d0(0x29b)](_0x439dcc);}else{if(_0x226870!==-0x1)availabilityPattern[_0x48cfcb][_0x24f1d0(0x269)](_0x226870,0x1);}}renderPatternEditor();}function renderPCol(_0x40ef8e,_0xf6a89a){const _0x150b10=a2_0x3b5f76;_0x40ef8e['innerHTML']='';const _0x399921=Math['round'](_0x40ef8e[_0x150b10(0x167)]);(availabilityPattern[_0xf6a89a]||[])[_0x150b10(0x27e)](_0x47f0ae=>{const _0x1a6ee3=_0x150b10,_0x16680d=document[_0x1a6ee3(0x297)]('div');_0x16680d['className']=_0x1a6ee3(0x21a);const _0x2b4cff=_0x47f0ae*GRID_H;_0x16680d[_0x1a6ee3(0x15b)][_0x1a6ee3(0x1f7)]=_0x2b4cff+'px',_0x16680d[_0x1a6ee3(0x15b)]['backgroundPosition']='-'+_0x399921+_0x1a6ee3(0x219)+_0x2b4cff+'px',_0x16680d[_0x1a6ee3(0x1b3)]=_0x32be3f=>{const _0x389649=_0x1a6ee3;_0x32be3f[_0x389649(0x28a)](),toggleSinglePattern(_0xf6a89a,_0x47f0ae);},_0x40ef8e[_0x1a6ee3(0x16e)](_0x16680d);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x571254=a2_0x3b5f76,_0x1d6fd3=new Date(),_0x2282a5=document[_0x571254(0x24e)](_0x571254(0x1de)),_0x575b31=document['getElementById'](_0x571254(0x287)),_0x176abe=(_0x1d6fd3[_0x571254(0x29c)]()*0x3c+_0x1d6fd3['getMinutes']())/0x3c*GRID_H;_0x2282a5[_0x571254(0x15b)][_0x571254(0x1f7)]=_0x176abe+'px',_0x2282a5[_0x571254(0x15b)][_0x571254(0x1ea)]=_0x571254(0x28e),_0x575b31[_0x571254(0x1ab)]=String(_0x1d6fd3[_0x571254(0x29c)]())[_0x571254(0x1e6)](0x2,'0')+':'+String(_0x1d6fd3[_0x571254(0x17a)]())[_0x571254(0x1e6)](0x2,'0'),_0x575b31[_0x571254(0x15b)][_0x571254(0x1ea)]=_0x571254(0x28e),_0x575b31[_0x571254(0x15b)][_0x571254(0x1f7)]=_0x176abe+'px';}document[a2_0x3b5f76(0x1a7)](a2_0x3b5f76(0x238),init);function openDayOptions(_0x27443f){const _0x3f7eb5=a2_0x3b5f76;selectedDayForOptions=_0x27443f;const _0xe68595=new Date(_0x27443f),_0x4c5f5c={'weekday':_0x3f7eb5(0x1ee),'day':_0x3f7eb5(0x195),'month':'long','year':_0x3f7eb5(0x195)},_0x143a41=_0xe68595[_0x3f7eb5(0x285)](_0x3f7eb5(0x276),_0x4c5f5c);document['getElementById'](_0x3f7eb5(0x210))['textContent']=_0x143a41[_0x3f7eb5(0x239)](0x0)[_0x3f7eb5(0x295)]()+_0x143a41['slice'](0x1);let _0x149f16=_0xe68595[_0x3f7eb5(0x14a)]()-0x1;if(_0x149f16===-0x1)_0x149f16=0x6;const _0x2bc907=availabilityPattern[_0x149f16]||[],_0x5c1b9e=0x18-_0x2bc907['length'],_0x3b56a3=_0x5c1b9e*0x3c,_0x5d8b83=sessions[_0x3f7eb5(0x221)](_0x3dd289=>_0x3dd289['dateStr']===_0x27443f&&_0x3dd289[_0x3f7eb5(0x1a8)]!==_0x3f7eb5(0x177));let _0x1858ce=_0x5d8b83[_0x3f7eb5(0x211)](_0x2486ca=>{const _0x4c32bb=_0x3f7eb5,[_0x392a3b,_0x59a2c2]=_0x2486ca[_0x4c32bb(0x279)]['split'](':')[_0x4c32bb(0x211)](Number),[_0x362ddb,_0x124d85]=_0x2486ca[_0x4c32bb(0x228)][_0x4c32bb(0x14b)](':')['map'](Number);return[_0x392a3b*0x3c+_0x59a2c2,_0x362ddb*0x3c+_0x124d85];});_0x1858ce[_0x3f7eb5(0x1eb)]((_0x316bfb,_0xa410b7)=>_0x316bfb[0x0]-_0xa410b7[0x0]);let _0x52aa78=[];if(_0x1858ce[_0x3f7eb5(0x1c4)]>0x0){let _0xad5abd=_0x1858ce[0x0];for(let _0x5b18df=0x1;_0x5b18df<_0x1858ce[_0x3f7eb5(0x1c4)];_0x5b18df++){_0x1858ce[_0x5b18df][0x0]<_0xad5abd[0x1]?_0xad5abd[0x1]=Math[_0x3f7eb5(0x1e5)](_0xad5abd[0x1],_0x1858ce[_0x5b18df][0x1]):(_0x52aa78[_0x3f7eb5(0x29b)](_0xad5abd),_0xad5abd=_0x1858ce[_0x5b18df]);}_0x52aa78[_0x3f7eb5(0x29b)](_0xad5abd);}let _0x3a1745=0x0;_0x52aa78[_0x3f7eb5(0x27e)](_0x3db836=>_0x3a1745+=_0x3db836[0x1]-_0x3db836[0x0]),document[_0x3f7eb5(0x24e)](_0x3f7eb5(0x15c))['textContent']=formatMinsToHrs(_0x3b56a3),document[_0x3f7eb5(0x24e)](_0x3f7eb5(0x197))[_0x3f7eb5(0x1ab)]=formatMinsToHrs(_0x3a1745);const _0x5ba063=_0x3b56a3>0x0?Math[_0x3f7eb5(0x29f)](_0x3a1745/_0x3b56a3*0x64):0x0,_0xcd197=document[_0x3f7eb5(0x24e)](_0x3f7eb5(0x1c3));_0xcd197['textContent']=_0x5ba063+'%';const _0xd85532=document[_0x3f7eb5(0x24e)](_0x3f7eb5(0x1bc));if(_0x5ba063>0x64)_0xcd197['style'][_0x3f7eb5(0x289)]='var(--acc-red)',_0xd85532[_0x3f7eb5(0x15b)][_0x3f7eb5(0x1a1)]='rgba(255,\x2069,\x2058,\x200.3)';else _0x5ba063>0x50?(_0xcd197['style']['color']=_0x3f7eb5(0x23e),_0xd85532['style'][_0x3f7eb5(0x1a1)]='rgba(255,\x20159,\x2010,\x200.3)'):(_0xcd197[_0x3f7eb5(0x15b)]['color']=_0x3f7eb5(0x188),_0xd85532[_0x3f7eb5(0x15b)][_0x3f7eb5(0x1a1)]='rgba(255,255,255,0.05)');const _0x424ceb=document[_0x3f7eb5(0x24e)](_0x3f7eb5(0x261));_0x424ceb['innerHTML']='';_0x5d8b83[_0x3f7eb5(0x1c4)]===0x0?_0x424ceb[_0x3f7eb5(0x1c9)]=_0x3f7eb5(0x1aa):(_0x5d8b83[_0x3f7eb5(0x1eb)]((_0x2e138b,_0x291884)=>_0x2e138b[_0x3f7eb5(0x279)][_0x3f7eb5(0x203)](_0x291884[_0x3f7eb5(0x279)])),_0x5d8b83[_0x3f7eb5(0x27e)](_0x2973f1=>{const _0x43663c=_0x3f7eb5,_0x51be74=clients[_0x43663c(0x23c)](_0x670770=>_0x670770[_0x43663c(0x293)]===_0x2973f1['client']),_0x1ef65b=_0x51be74?_0x51be74['color']:_0x43663c(0x245),_0x1d2c3f=_0x2973f1['status']===_0x43663c(0x26b),_0x12aabb=_0x1d2c3f?_0x43663c(0x232):'',_0x3a1903=document['createElement'](_0x43663c(0x20e));_0x3a1903[_0x43663c(0x2c1)]=_0x43663c(0x1a4),_0x3a1903['style']['borderLeftColor']=_0x1ef65b,_0x3a1903[_0x43663c(0x1c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>'+_0x2973f1[_0x43663c(0x279)]+_0x43663c(0x271)+_0x2973f1[_0x43663c(0x228)]+_0x43663c(0x15e)+_0x2973f1[_0x43663c(0x277)]+_0x43663c(0x194)+_0x12aabb+_0x43663c(0x236),_0x424ceb['appendChild'](_0x3a1903);}));const _0x3eef72=document[_0x3f7eb5(0x24e)](_0x3f7eb5(0x1fe)),_0x5609ee=dateExceptions[_0x27443f]===_0x3f7eb5(0x268);_0x5609ee?(_0x3eef72['textContent']=_0x3f7eb5(0x155),_0x3eef72[_0x3f7eb5(0x2c1)]='btn-primary\x20btn-secondary',_0x3eef72[_0x3f7eb5(0x15b)][_0x3f7eb5(0x289)]=_0x3f7eb5(0x188),_0x3eef72[_0x3f7eb5(0x15b)][_0x3f7eb5(0x234)]=_0x3f7eb5(0x191)):(_0x3eef72['textContent']=_0x3f7eb5(0x18f),_0x3eef72['className']=_0x3f7eb5(0x1e7),_0x3eef72[_0x3f7eb5(0x15b)]['color']=_0x3f7eb5(0x1fb),_0x3eef72['style']['background']=_0x3f7eb5(0x146)),openSheet(_0x3f7eb5(0x266));}let currentAnPeriod=a2_0x3b5f76(0x273);function openAnalytics(){const _0x54377a=a2_0x3b5f76,_0x129c92=document[_0x54377a(0x1d8)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x54377a(0x273),_0x129c92),closeAllSheets(),openSheet('analyticsSheet');}function a2_0x53cd(){const _0x2cd0b5=['</b>\x0a\x0a','borderRadius','done','seriesCountContainer','sheetDateSubtitle','100%','total','px\x20-','blocked-slot\x20stripe-bg','actionSheet','warning','inpRecurring','rangeEndTime','saveLocally',']\x20Failed:','filter','#0a84ff','.sheet','user','error','Server\x20Error','#050505','end','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','12755HfxNFz','stringify','579092Iqdmyd','min','</span>\x20/\x20','(((.+)+)+)+$','valid','rangeEndDate','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','setHeaderColor','background','anEnd','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Ваша\x20тренировка\x20перенесена:\x0a\x0a','DOMContentLoaded','charAt','scrollLeft','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','find','search','var(--acc-orange)','1375332aFrdVA','ranges','disableVerticalSwipes','month','...','seriesId','#fff','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','Групповая:\x20также\x20записан\x20','<div\x20class=\x22dch-day\x22>','Успешно','btnStatusToggle','Local\x20Save\x20Error','option','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getElementById','</div><div\x20class=\x22ev-time\x22>','event-card','rangeStartDate','Unknown','day-off-overlay\x20stripe-bg','add','text','scroll','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','planned','Batch\x20Sync\x20OK','show','v9.0-BATCH-CALENDAR','</div>','stat-','mergeServerData','pe-corner','doEventsList','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','querySelectorAll','\x20—\x20','[Series]\x20Skipped\x20','dayOptionsSheet','save_settings','off','splice','dateStr','completed','init_load','.period-switch\x20.p-btn','today','catch','offClick','\x20-\x20','Создана\x20серия:\x20','week','daysHeaderTrack','\x20(пропущено:\x20','ru-RU','client','apply','start','136TFjYof','Critical\x20TMA\x20Error:','complete','scrollTop','forEach','Вернуть\x20в\x20запланированные','update','timeColumn','Запись\x20на\x20<b>','now','toastMessage','toLocaleDateString','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','timeLineBadge','closest','color','stopPropagation','setItem','entries','Заполните\x20все\x20поля','block','BackButton','width','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','723954WBrlIt','name','toast-notification\x20','toUpperCase','.event-card','createElement','json','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','fetchFromServer','push','getHours','<div\x20class=\x22ev-title\x22>','00:00','round','126wOytHm','[Notify]\x20Error:\x20Text\x20generation\x20failed','strokeDashoffset','touches','Эту\x20и\x20будущие','WebApp','toastTitle','btn-status-toggle\x20undo-mode','sid','8osdMNz',':00</span>','from','inpStart','Error\x20setting\x20back\x20button:','822QaiPXn','classList','includes','inpDate','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','setMonth','<b>⏰\x20Время:</b>\x20','%\x20-\x204px)','formatDate','checked','sheetTitle','scrollWidth','setDate','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','header-','firstChild','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','Save\x20settings\x20error:','className','getDate','[Notify]\x20Server\x20Response:','save','initDataUnsafe','as-button\x20danger','anPercent','mouseup','rgba(255,\x2069,\x2058,\x200.15)','colIndex','.dch-stats-fill','cancel_window','getDay','split','analyticsList','value','inpEnd','matrixViewport','asBtnSeries','peGrid','мин,\x20Загрузка:\x20','patternEditor','data-day-idx','Сделать\x20рабочим\x20днем','<b>📅\x20Дата:</b>\x20','text/plain;charset=UTF-8','client-stat-card','touchstart','anStart','style','doWorkHours','undefined','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','overlay','sessionSheet','substr','setBackgroundColor','mousemove','send','none','uc_sessions_v9','offsetLeft','insertBefore','anDonutCircle','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','single','open','deleted','appendChild','ч,\x20Занято:\x20','create','day-col-header\x20','target','Только\x20эту','getTime','5227gPwKke','data','cancelled','<b>✅\x20','calendar','getMinutes','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','toLocaleString','Изменение\x20серии','recurringOptionContainer','exceptions','parse','rgba(','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','Ошибка\x20сохранения\x20в\x20облако','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','headerMonth','9FFdNSZ',':00','var(--acc-green)','4144511COXTdA','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','T00:00:00','clients','createDocumentFragment','23:59','Сделать\x20выходным','10px','rgba(48,\x20209,\x2088,\x200.15)','remove','rangeStartTime','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','numeric','[API\x20','doBusyHours','inpNote','series','Ошибка\x20сохранения\x20настроек','all','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','var(--acc-current)','.day-off-overlay','btnDelete','day-column\x20','borderColor','Нет\x20клиентов','mini','de-item','cancel','settings','addEventListener','status','height','<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>','textContent','[Notify]\x20Client\x20SWAP\x20detected','borderLeftColor','toString','time-label','dayOptionsTitle','Local\x20Load\x20Error','setAttribute','onclick','floor','getFullYear','Инфо','\x20выполнено','syncBatch','getAttribute','[Notify]\x20Network\x20Failed','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','statLoadCard','uc_settings_cancel_window','toast','guest','Это\x20часть\x20серии\x20тренировок','getItem','send_notification','doLoadPercent','length','pattern','205330KyXIWQ','zIndex','slice','innerHTML','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:','inpSeriesCount','[Settings]\x20Cancel\x20window\x20set\x20to:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','<span>','Этот\x20клиент\x20(','Жду\x20вас\x20в\x20зале!\x20💪','patternInfoBox','href','random','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','</div><div\x20class=\x22dch-num\x22>','POST','\x20status-completed','querySelector','flex','\x20days','getMonth','null','clientWidth','globalTimeLine','T23:59:59','.pib-text','Ошибка\x20дат','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','10px\x2010px\x200\x200','clientY','max','padStart','btn-primary\x20btn-danger','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','.day-col-header','display','sort','Новая\x20запись',')\x20уже\x20записан\x20на\x20это\x20время!','long','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','touchend',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','data-date','delete','note','backgroundPosition','asBtnOne','top','batch_sync','Telegram',':\x20Client\x20already\x20booked','var(--acc-red)','inpClient','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','btnDayToggle','Синхронизировано','findIndex','expand','vibrate','localeCompare','setHours',')</b>\x20была\x20удалена\x20из\x20расписания.','Оффлайн\x20режим','indexOf','Error\x20setting\x20color:','then','asTitle','active','clientId','anCustomDates','div','settingCancelWindow','doDateHeader','map'];a2_0x53cd=function(){return _0x2cd0b5;};return a2_0x53cd();}function setAnalyticsPeriod(_0x13e112,_0x5650b8){const _0x43de24=a2_0x3b5f76;currentAnPeriod=_0x13e112,document[_0x43de24(0x263)](_0x43de24(0x26d))[_0x43de24(0x27e)](_0x1aa883=>_0x1aa883[_0x43de24(0x2af)][_0x43de24(0x192)](_0x43de24(0x20b)));if(_0x5650b8)_0x5650b8['classList'][_0x43de24(0x254)](_0x43de24(0x20b));const _0x49bae1=document[_0x43de24(0x24e)](_0x43de24(0x20d));_0x49bae1[_0x43de24(0x15b)][_0x43de24(0x1ea)]=_0x13e112==='custom'?'flex':_0x43de24(0x165);const _0x2bdd45=new Date();let _0xde930e=new Date(),_0x1ec3f1=new Date();if(_0x13e112==='week')_0xde930e=getStartOfWeek(_0x2bdd45),_0x1ec3f1=new Date(_0xde930e),_0x1ec3f1[_0x43de24(0x2ba)](_0x1ec3f1[_0x43de24(0x2c2)]()+0x6);else{if(_0x13e112===_0x43de24(0x242))_0xde930e=new Date(_0x2bdd45['getFullYear'](),_0x2bdd45[_0x43de24(0x1db)](),0x1),_0x1ec3f1=new Date(_0x2bdd45['getFullYear'](),_0x2bdd45['getMonth']()+0x1,0x0);else{!document[_0x43de24(0x24e)](_0x43de24(0x15a))[_0x43de24(0x14d)]&&(document[_0x43de24(0x24e)]('anStart')[_0x43de24(0x14d)]=getLocalDateStr(_0x2bdd45),document[_0x43de24(0x24e)](_0x43de24(0x235))['value']=getLocalDateStr(_0x2bdd45));refreshAnalytics();return;}}document[_0x43de24(0x24e)](_0x43de24(0x15a))[_0x43de24(0x14d)]=getLocalDateStr(_0xde930e),document[_0x43de24(0x24e)](_0x43de24(0x235))[_0x43de24(0x14d)]=getLocalDateStr(_0x1ec3f1),refreshAnalytics();}function refreshAnalytics(){const _0xc8a34d=a2_0x3b5f76,_0x328ebc=document[_0xc8a34d(0x24e)]('anStart')[_0xc8a34d(0x14d)],_0x2d1f6e=document[_0xc8a34d(0x24e)](_0xc8a34d(0x235))[_0xc8a34d(0x14d)];if(!_0x328ebc||!_0x2d1f6e)return;const _0x8ca2fa=sessions[_0xc8a34d(0x221)](_0x4b5c41=>_0x4b5c41['dateStr']>=_0x328ebc&&_0x4b5c41['dateStr']<=_0x2d1f6e&&_0x4b5c41['status']!==_0xc8a34d(0x177)),_0x1c3f24=_0x8ca2fa[_0xc8a34d(0x1c4)],_0x2c6897=_0x8ca2fa[_0xc8a34d(0x221)](_0x49cc3a=>_0x49cc3a[_0xc8a34d(0x1a8)]===_0xc8a34d(0x26b))['length'],_0x21615f=_0x1c3f24>0x0?Math['round'](_0x2c6897/_0x1c3f24*0x64):0x0;document['getElementById'](_0xc8a34d(0x144))[_0xc8a34d(0x1ab)]=_0x21615f+'%',document[_0xc8a34d(0x24e)]('anTotalStats')[_0xc8a34d(0x1ab)]=_0x2c6897+'\x20из\x20'+_0x1c3f24+_0xc8a34d(0x1b7);const _0x2cc2a8=document[_0xc8a34d(0x24e)](_0xc8a34d(0x169)),_0x1c3e5c=0x2*Math['PI']*0x23,_0x2afcea=_0x1c3e5c-_0x21615f/0x64*_0x1c3e5c;_0x2cc2a8['style'][_0xc8a34d(0x2a2)]=_0x2afcea;const _0x113eab={};_0x8ca2fa[_0xc8a34d(0x27e)](_0x5928e6=>{const _0x4e39ec=_0xc8a34d;if(!_0x113eab[_0x5928e6['client']]){const _0x2a1da9=clients[_0x4e39ec(0x23c)](_0x23c7e8=>_0x23c7e8[_0x4e39ec(0x293)]===_0x5928e6['client']);_0x113eab[_0x5928e6[_0x4e39ec(0x277)]]={'total':0x0,'done':0x0,'color':_0x2a1da9?_0x2a1da9[_0x4e39ec(0x289)]:_0x4e39ec(0x245)};}_0x113eab[_0x5928e6['client']]['total']++;if(_0x5928e6[_0x4e39ec(0x1a8)]===_0x4e39ec(0x26b))_0x113eab[_0x5928e6[_0x4e39ec(0x277)]][_0x4e39ec(0x214)]++;});const _0x3b373e=document[_0xc8a34d(0x24e)](_0xc8a34d(0x14c));_0x3b373e[_0xc8a34d(0x1c9)]='';const _0x1cdc17=Object[_0xc8a34d(0x28c)](_0x113eab)[_0xc8a34d(0x1eb)]((_0xdf6838,_0x3ecc72)=>_0x3ecc72[0x1][_0xc8a34d(0x218)]-_0xdf6838[0x1][_0xc8a34d(0x218)]);if(_0x1cdc17[_0xc8a34d(0x1c4)]===0x0){_0x3b373e['innerHTML']='<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>';return;}_0x1cdc17['forEach'](([_0x3355fe,_0x25d610])=>{const _0x12bf52=_0xc8a34d,_0x3764a6=Math['round'](_0x25d610[_0x12bf52(0x214)]/_0x25d610[_0x12bf52(0x218)]*0x64),_0x42a427=document['createElement'](_0x12bf52(0x20e));_0x42a427[_0x12bf52(0x2c1)]=_0x12bf52(0x158),_0x42a427[_0x12bf52(0x15b)][_0x12bf52(0x1ad)]=_0x25d610[_0x12bf52(0x289)],_0x42a427['innerHTML']=_0x12bf52(0x229)+_0x3355fe+_0x12bf52(0x1cd)+_0x25d610['done']+_0x12bf52(0x22e)+_0x25d610[_0x12bf52(0x218)]+_0x12bf52(0x18a)+_0x3764a6+_0x12bf52(0x24d),_0x3b373e['appendChild'](_0x42a427);});}function formatMinsToHrs(_0x244c63){const _0x426438=a2_0x3b5f76;if(_0x244c63===0x0)return'0';const _0x4c1274=Math[_0x426438(0x1b4)](_0x244c63/0x3c),_0x1cf152=_0x244c63%0x3c;if(_0x1cf152===0x0)return _0x4c1274+'ч';return _0x4c1274+'ч\x20'+_0x1cf152+'м';}