const a2_0x289135=a2_0x53e3;(function(_0xf34c44,_0x52e5b4){const _0x31e2b6=a2_0x53e3,_0x5171a5=_0xf34c44();while(!![]){try{const _0x49a28a=-parseInt(_0x31e2b6(0x24e))/0x1*(-parseInt(_0x31e2b6(0x1d1))/0x2)+-parseInt(_0x31e2b6(0x18a))/0x3*(parseInt(_0x31e2b6(0x192))/0x4)+-parseInt(_0x31e2b6(0x2bc))/0x5+parseInt(_0x31e2b6(0x224))/0x6+parseInt(_0x31e2b6(0x22f))/0x7*(parseInt(_0x31e2b6(0x2ca))/0x8)+parseInt(_0x31e2b6(0x1da))/0x9+-parseInt(_0x31e2b6(0x2ed))/0xa*(parseInt(_0x31e2b6(0x243))/0xb);if(_0x49a28a===_0x52e5b4)break;else _0x5171a5['push'](_0x5171a5['shift']());}catch(_0x3a244c){_0x5171a5['push'](_0x5171a5['shift']());}}}(a2_0x5705,0xb868b),function initTMA(){const _0x26c117=a2_0x53e3,_0x4329da=(function(){let _0x57c773=!![];return function(_0x319851,_0x23962d){const _0x13bd2c=_0x57c773?function(){const _0x5b5405=a2_0x53e3;if(_0x23962d){const _0x3c2cd4=_0x23962d[_0x5b5405(0x237)](_0x319851,arguments);return _0x23962d=null,_0x3c2cd4;}}:function(){};return _0x57c773=![],_0x13bd2c;};}()),_0x5d120f=_0x4329da(this,function(){const _0x4df6f4=a2_0x53e3;return _0x5d120f[_0x4df6f4(0x242)]()[_0x4df6f4(0x1b5)](_0x4df6f4(0x26e))[_0x4df6f4(0x242)]()['constructor'](_0x5d120f)[_0x4df6f4(0x1b5)](_0x4df6f4(0x26e));});_0x5d120f();try{const _0x3fc4d0=window[_0x26c117(0x1c1)]?.[_0x26c117(0x253)];if(!_0x3fc4d0)return;_0x3fc4d0[_0x26c117(0x2e3)](),_0x3fc4d0[_0x26c117(0x1f6)]();try{_0x3fc4d0[_0x26c117(0x291)](_0x26c117(0x1ec)),_0x3fc4d0[_0x26c117(0x25c)]&&_0x3fc4d0['setBackgroundColor']('#050505');}catch(_0x527533){console[_0x26c117(0x18b)](_0x26c117(0x1fe),_0x527533);}try{_0x3fc4d0[_0x26c117(0x1ee)]&&(_0x3fc4d0[_0x26c117(0x1ee)][_0x26c117(0x1be)](),_0x3fc4d0['BackButton']['offClick'](),_0x3fc4d0[_0x26c117(0x1ee)][_0x26c117(0x22e)](function(){const _0x480173=_0x26c117;window[_0x480173(0x2c9)][_0x480173(0x2b1)]='router.html';}));}catch(_0x559afe){console['log']('Error\x20setting\x20back\x20button:',_0x559afe);}try{if(_0x3fc4d0['disableVerticalSwipes'])_0x3fc4d0[_0x26c117(0x29d)]();}catch(_0x58dc83){}}catch(_0x193e94){console[_0x26c117(0x1b8)]('Critical\x20TMA\x20Error:',_0x193e94);}}());function isAdmin(){const _0x2f4c02=a2_0x53e3;try{const _0x28e966=Number(window['Telegram']?.[_0x2f4c02(0x253)]?.[_0x2f4c02(0x1ad)]?.['user']?.['id']);return _0x28e966===0xbaf7174;}catch(_0x1e17d5){return![];}}const APP_VERSION=a2_0x289135(0x1d6),API_URL=a2_0x289135(0x258),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS='uc_clients_v9',KEY_SESSIONS='uc_sessions_v9',KEY_SETTINGS=a2_0x289135(0x2ad);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x37e680=a2_0x289135;return window[_0x37e680(0x1c1)]?.[_0x37e680(0x253)]?.[_0x37e680(0x1ad)]?.['user']?.['id']||_0x37e680(0x2ce);},'saveLocally'(){const _0x393f8e=a2_0x289135;try{localStorage[_0x393f8e(0x2cf)](KEY_CLIENTS,JSON[_0x393f8e(0x23c)](clients)),localStorage[_0x393f8e(0x2cf)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x393f8e(0x2cf)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x408d44){console[_0x393f8e(0x1b8)](_0x393f8e(0x2f0),_0x408d44);}},'loadLocal'(){const _0x234475=a2_0x289135;try{const _0x11f756=localStorage[_0x234475(0x267)](KEY_CLIENTS);if(_0x11f756)clients=JSON['parse'](_0x11f756);const _0x13f7cb=localStorage['getItem'](KEY_SESSIONS);if(_0x13f7cb)sessions=JSON[_0x234475(0x1bb)](_0x13f7cb);const _0x9a5c51=localStorage['getItem'](KEY_SETTINGS);if(_0x9a5c51){const _0x54d5b9=JSON['parse'](_0x9a5c51);if(_0x54d5b9[_0x234475(0x1b4)])availabilityPattern=_0x54d5b9[_0x234475(0x1b4)];if(_0x54d5b9[_0x234475(0x296)])dateExceptions=_0x54d5b9[_0x234475(0x296)];if(_0x54d5b9[_0x234475(0x2c8)])specialRanges=_0x54d5b9['ranges'];}else{for(let _0x2bfe8a=0x0;_0x2bfe8a<0x7;_0x2bfe8a++)availabilityPattern[_0x2bfe8a]=Array['from']({'length':0xc},(_0x181b03,_0x1e0bf9)=>_0x1e0bf9+0x9);}}catch(_0x16c999){console['error'](_0x234475(0x25a),_0x16c999);}},async 'fetchFromServer'(_0x48a222,_0x53d18a={}){const _0x1e0efe=a2_0x289135,_0x2b5612=window['Telegram']?.[_0x1e0efe(0x253)],_0x33703b={'action':_0x48a222,'init_data':_0x2b5612?.[_0x1e0efe(0x231)]||'',..._0x53d18a};try{const _0x59e5d3=await fetch(API_URL,{'method':_0x1e0efe(0x2bf),'headers':{'Content-Type':'text/plain;charset=UTF-8'},'body':JSON[_0x1e0efe(0x23c)](_0x33703b)}),_0x13d4bd=await _0x59e5d3[_0x1e0efe(0x252)]();if(!_0x13d4bd['ok'])throw new Error(_0x13d4bd[_0x1e0efe(0x1b8)]||'Server\x20Error');return _0x13d4bd['data'];}catch(_0x36120c){console['error'](_0x1e0efe(0x1a3)+_0x48a222+_0x1e0efe(0x275),_0x36120c);throw _0x36120c;}},async 'syncLoad'(){const _0xd46e48=a2_0x289135,_0x324fb3=new Date(),_0x579114=_0x324fb3[_0xd46e48(0x18e)]()+'-'+String(_0x324fb3[_0xd46e48(0x208)]()+0x1)[_0xd46e48(0x239)](0x2,'0'),_0x4378a3=new Date(_0x324fb3);_0x4378a3['setMonth'](_0x324fb3[_0xd46e48(0x208)]()+0x1);const _0x5cf89c=_0x4378a3[_0xd46e48(0x18e)]()+'-'+String(_0x4378a3[_0xd46e48(0x208)]()+0x1)[_0xd46e48(0x239)](0x2,'0'),_0x538230=Date['now']();console[_0xd46e48(0x18b)](_0xd46e48(0x2ee)+_0x579114+',\x20'+_0x5cf89c+_0xd46e48(0x2d2));try{const [_0x379b60,_0x15fac1]=await Promise[_0xd46e48(0x215)]([this[_0xd46e48(0x236)](_0xd46e48(0x25b),{'month_str':_0x579114}),this['fetchFromServer'](_0xd46e48(0x25b),{'month_str':_0x5cf89c})]);if(lastUserActionTime>_0x538230)return console[_0xd46e48(0x1f3)](_0xd46e48(0x2ef)),![];return this[_0xd46e48(0x255)](_0x379b60,_0x579114),this[_0xd46e48(0x255)](_0x15fac1,_0x5cf89c),this['saveLocally'](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0xef097b){console['error'](_0xef097b);throw _0xef097b;}},'mergeServerData'(_0x10c252,_0x1f9f5e){const _0x49b1ac=a2_0x289135;if(!_0x10c252)return;_0x10c252['clients']&&Array[_0x49b1ac(0x1f7)](_0x10c252[_0x49b1ac(0x27b)])&&(clients=_0x10c252['clients']);if(_0x10c252[_0x49b1ac(0x222)]){if(_0x10c252['settings'][_0x49b1ac(0x1b4)])availabilityPattern=_0x10c252[_0x49b1ac(0x222)][_0x49b1ac(0x1b4)];if(_0x10c252[_0x49b1ac(0x222)][_0x49b1ac(0x296)])dateExceptions=_0x10c252[_0x49b1ac(0x222)][_0x49b1ac(0x296)];if(_0x10c252['settings'][_0x49b1ac(0x2c8)])specialRanges=_0x10c252[_0x49b1ac(0x222)][_0x49b1ac(0x2c8)];if(_0x10c252['settings'][_0x49b1ac(0x22a)]){localStorage[_0x49b1ac(0x2cf)](_0x49b1ac(0x28d),_0x10c252[_0x49b1ac(0x222)][_0x49b1ac(0x22a)]);const _0x5d52d2=document[_0x49b1ac(0x24a)](_0x49b1ac(0x19d));if(_0x5d52d2)_0x5d52d2[_0x49b1ac(0x263)]=_0x10c252['settings'][_0x49b1ac(0x22a)];}}_0x10c252[_0x49b1ac(0x1c4)]&&(sessions=sessions[_0x49b1ac(0x2c5)](_0x991bdb=>!_0x991bdb[_0x49b1ac(0x1cc)][_0x49b1ac(0x2c2)](_0x1f9f5e)),Object[_0x49b1ac(0x2b9)](_0x10c252[_0x49b1ac(0x1c4)])[_0x49b1ac(0x21d)](_0x41f12d=>{const _0x3fb51b=_0x49b1ac,_0x37f5ce=_0x10c252[_0x3fb51b(0x1c4)][_0x41f12d];_0x37f5ce[_0x3fb51b(0x21d)](_0x5104c8=>{const _0x522a3a=_0x3fb51b,_0x3c9022=clients[_0x522a3a(0x183)](_0x5a1609=>String(_0x5a1609['id'])===String(_0x5104c8['c']));sessions['push']({'id':_0x5104c8['i'],'clientId':_0x5104c8['c'],'client':_0x3c9022?_0x3c9022[_0x522a3a(0x20e)]:_0x522a3a(0x2c3),'dateStr':_0x1f9f5e+'-'+_0x41f12d[_0x522a3a(0x239)](0x2,'0'),'start':_0x5104c8['s'],'end':_0x5104c8['e'],'status':_0x5104c8['st']||_0x522a3a(0x247),'note':_0x5104c8['n']||'','seriesId':_0x5104c8[_0x522a3a(0x1c2)]||null});});}));},async 'syncBatch'(_0x41ad2e){const _0xcf738f=a2_0x289135,_0x59d9b4=[...new Set(_0x41ad2e)],_0x75106d=_0x59d9b4[_0xcf738f(0x2d3)](_0x414a52=>{const _0x469d31=_0xcf738f,_0x5dc22e=sessions[_0x469d31(0x2c5)](_0x234e69=>_0x234e69['dateStr']===_0x414a52&&_0x234e69['status']!=='deleted'),_0x23a3d6=_0x5dc22e[_0x469d31(0x2d3)](_0x4402c4=>({'i':_0x4402c4['id'],'c':_0x4402c4['clientId'],'s':_0x4402c4[_0x469d31(0x2d4)],'e':_0x4402c4[_0x469d31(0x184)],'st':_0x4402c4[_0x469d31(0x262)],'n':_0x4402c4[_0x469d31(0x1d3)],'sid':_0x4402c4['seriesId']}));return{'date':_0x414a52,'day_data':_0x23a3d6};});if(_0x75106d['length']===0x0)return;console[_0xcf738f(0x18b)](_0xcf738f(0x27e)+_0x75106d[_0xcf738f(0x17c)]+_0xcf738f(0x1e2)),await this[_0xcf738f(0x236)](_0xcf738f(0x2bb),{'changes':_0x75106d});}};async function init(){const _0x100fc5=a2_0x289135;DataManager['loadLocal'](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x100fc5(0x24a)](_0x100fc5(0x2d5))[_0x100fc5(0x2e8)](_0x100fc5(0x1e1),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x100fc5(0x23f)]()[_0x100fc5(0x21f)](()=>{const _0x5515ab=_0x100fc5;showToast(_0x5515ab(0x1e4),!![]);})[_0x100fc5(0x261)](_0xba00cb=>{const _0x44543b=_0x100fc5;showToast(_0x44543b(0x1fb),![]);});}function generateId(){const _0x555ae2=a2_0x289135;return Date['now']()[_0x555ae2(0x242)](0x24)+Math[_0x555ae2(0x272)]()[_0x555ae2(0x242)](0x24)[_0x555ae2(0x18f)](0x2,0x5);}function toggleSeriesInput(){const _0x5d805b=a2_0x289135,_0x7410be=document['getElementById'](_0x5d805b(0x1c8))[_0x5d805b(0x177)],_0x7f7dff=document[_0x5d805b(0x24a)](_0x5d805b(0x1e9));_0x7f7dff[_0x5d805b(0x254)][_0x5d805b(0x228)]=_0x7410be?'block':_0x5d805b(0x2da);const _0x3347f2=document['getElementById'](_0x5d805b(0x18d));_0x3347f2[_0x5d805b(0x254)][_0x5d805b(0x2d7)]=_0x7410be?_0x5d805b(0x2b4):_0x5d805b(0x175);}function openAddSession(_0x37cd65){const _0x58a93e=a2_0x289135;editingId=null,populateClientSelect(),document[_0x58a93e(0x24a)](_0x58a93e(0x281))[_0x58a93e(0x2e9)]=_0x58a93e(0x190),document[_0x58a93e(0x24a)](_0x58a93e(0x1b3))[_0x58a93e(0x254)]['display']=_0x58a93e(0x2da),document[_0x58a93e(0x24a)](_0x58a93e(0x2c0))[_0x58a93e(0x254)][_0x58a93e(0x228)]='none';const _0x224029=document[_0x58a93e(0x24a)]('recurringOptionContainer'),_0x3f18a4=document[_0x58a93e(0x24a)]('seriesCountContainer');_0x224029['style'][_0x58a93e(0x228)]='flex',_0x224029[_0x58a93e(0x254)][_0x58a93e(0x2d7)]=_0x58a93e(0x175),document[_0x58a93e(0x24a)]('inpRecurring')['checked']=![],document[_0x58a93e(0x24a)](_0x58a93e(0x229))[_0x58a93e(0x263)]=0x4,_0x3f18a4['style'][_0x58a93e(0x228)]=_0x58a93e(0x2da),document[_0x58a93e(0x24a)](_0x58a93e(0x2c4))[_0x58a93e(0x263)]=getLocalDateStr(_0x37cd65),updateDateDisplay();const _0x359724=_0x37cd65[_0x58a93e(0x1cf)]();document[_0x58a93e(0x24a)](_0x58a93e(0x217))['value']=String(_0x359724)[_0x58a93e(0x239)](0x2,'0')+_0x58a93e(0x2a7),document[_0x58a93e(0x24a)]('inpEnd')['value']=String(_0x359724+0x1)['padStart'](0x2,'0')+_0x58a93e(0x2a7),openSheet(_0x58a93e(0x277));}function openEdit(_0x1c6f89){const _0x3385ad=a2_0x289135;editingId=_0x1c6f89['id'],populateClientSelect(),document['getElementById']('sheetTitle')[_0x3385ad(0x2e9)]='Редактировать',document['getElementById'](_0x3385ad(0x1b3))[_0x3385ad(0x254)]['display']=_0x3385ad(0x2d9);const _0x39e751=document[_0x3385ad(0x24a)](_0x3385ad(0x2c0));_0x39e751[_0x3385ad(0x254)][_0x3385ad(0x228)]='flex';_0x1c6f89[_0x3385ad(0x262)]==='completed'?(_0x39e751[_0x3385ad(0x257)]=_0x3385ad(0x2b0),_0x39e751['innerHTML']='Вернуть\x20в\x20запланированные'):(_0x39e751['className']=_0x3385ad(0x269),_0x39e751['innerHTML']=_0x3385ad(0x1f1));const _0x50c4d5=!!_0x1c6f89[_0x3385ad(0x290)];document['getElementById']('recurringOptionContainer')[_0x3385ad(0x254)][_0x3385ad(0x228)]=_0x3385ad(0x2da),document[_0x3385ad(0x24a)]('seriesCountContainer')[_0x3385ad(0x254)][_0x3385ad(0x228)]='none',_0x50c4d5?(document[_0x3385ad(0x24a)](_0x3385ad(0x207))[_0x3385ad(0x254)][_0x3385ad(0x228)]='flex',document['getElementById'](_0x3385ad(0x207))[_0x3385ad(0x24d)](_0x3385ad(0x2e4))['textContent']=_0x3385ad(0x1d2)):document[_0x3385ad(0x24a)](_0x3385ad(0x207))[_0x3385ad(0x254)]['display']=_0x3385ad(0x2da),document[_0x3385ad(0x24a)]('inpClient')['value']=_0x1c6f89[_0x3385ad(0x22b)],document[_0x3385ad(0x24a)](_0x3385ad(0x2c4))[_0x3385ad(0x263)]=_0x1c6f89[_0x3385ad(0x1cc)],document['getElementById'](_0x3385ad(0x217))['value']=_0x1c6f89[_0x3385ad(0x2d4)],document[_0x3385ad(0x24a)](_0x3385ad(0x1a0))[_0x3385ad(0x263)]=_0x1c6f89['end'],document['getElementById'](_0x3385ad(0x198))[_0x3385ad(0x263)]=_0x1c6f89[_0x3385ad(0x1d3)]||'',updateDateDisplay(),openSheet(_0x3385ad(0x277));}async function trySaveSession(){const _0xe14c65=a2_0x289135,_0x1a704b=document[_0xe14c65(0x24a)](_0xe14c65(0x1f5))['value'],_0x2ef576=document['getElementById'](_0xe14c65(0x2c4))['value'],_0x38f4db=document['getElementById'](_0xe14c65(0x217))[_0xe14c65(0x263)],_0x582942=document[_0xe14c65(0x24a)](_0xe14c65(0x1a0))[_0xe14c65(0x263)],_0x4c43ac=document[_0xe14c65(0x24a)](_0xe14c65(0x198))['value'],_0x5590aa=document['getElementById'](_0xe14c65(0x1c8))[_0xe14c65(0x177)];let _0x385f02=0x4;if(_0x5590aa){const _0x5645cf=parseInt(document[_0xe14c65(0x24a)](_0xe14c65(0x229))[_0xe14c65(0x263)]);if(!_0x5645cf||_0x5645cf<0x2){showToast(_0xe14c65(0x1ea),![]);return;}if(_0x5645cf>0x64){showToast(_0xe14c65(0x2d1),![]);return;}_0x385f02=_0x5645cf;}const _0xfcdcec=clients['find'](_0x11e6eb=>_0x11e6eb['name']===_0x1a704b);if(!_0xfcdcec){showToast(_0xe14c65(0x206),![]);return;}const _0x4857cc=validateAppointment(_0x2ef576,_0x38f4db,_0x582942,editingId,_0xfcdcec['id']);if(!_0x4857cc[_0xe14c65(0x2e0)]){showToast(_0x4857cc['msg'],![]);return;}_0x4857cc[_0xe14c65(0x19e)]&&showToast(_0x4857cc[_0xe14c65(0x19e)],![]);const _0x354a1d={'client':_0x1a704b,'clientId':_0xfcdcec['id'],'start':_0x38f4db,'end':_0x582942,'note':_0x4c43ac,'status':_0xe14c65(0x247)},_0x157c9b=editingId?sessions[_0xe14c65(0x183)](_0x46b5df=>_0x46b5df['id']===editingId):null;if(_0x157c9b&&_0x157c9b['seriesId']){tempSessionData={..._0x354a1d,'dateStr':_0x2ef576,'id':editingId,'seriesId':_0x157c9b[_0xe14c65(0x290)]},openActionSheet(_0xe14c65(0x1aa));return;}let _0x5cc98b=null;if(!editingId)_0x5cc98b=_0xe14c65(0x249);else{if(_0x157c9b){if(String(_0x157c9b['clientId'])!==String(_0xfcdcec['id']))console[_0xe14c65(0x18b)](_0xe14c65(0x1cb)),NotificationManager['send'](_0xe14c65(0x181),_0x157c9b),_0x5cc98b=_0xe14c65(0x249);else(_0x157c9b[_0xe14c65(0x2d4)]!==_0x38f4db||_0x157c9b['end']!==_0x582942||_0x157c9b[_0xe14c65(0x1cc)]!==_0x2ef576)&&(_0x5cc98b=_0xe14c65(0x278));}}if(!editingId&&_0x5590aa){createBatchSeries(_0x354a1d,_0x2ef576,_0x385f02),NotificationManager[_0xe14c65(0x280)](_0xe14c65(0x249),{..._0x354a1d,'dateStr':_0x2ef576});return;}lastUserActionTime=Date[_0xe14c65(0x218)]();const _0x237b57={..._0x354a1d,'dateStr':_0x2ef576,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x237b57),_0x5cc98b&&NotificationManager[_0xe14c65(0x280)](_0x5cc98b,_0x237b57);}function a2_0x53e3(_0x19b142,_0x52751b){_0x19b142=_0x19b142-0x174;const _0x1a7a4f=a2_0x5705();let _0x40c9f8=_0x1a7a4f[_0x19b142];return _0x40c9f8;}function toggleSessionStatus(){const _0x1c571f=a2_0x289135;lastUserActionTime=Date[_0x1c571f(0x218)]();const _0x5e7144=sessions['find'](_0x1144b0=>_0x1144b0['id']===editingId);if(!_0x5e7144)return;const _0x3a9e38=_0x5e7144['status']===_0x1c571f(0x180)?'planned':_0x1c571f(0x180);_0x5e7144['status']=_0x3a9e38,saveSingleSession(_0x5e7144),_0x3a9e38===_0x1c571f(0x180)&&NotificationManager[_0x1c571f(0x280)](_0x1c571f(0x221),_0x5e7144),showToast(_0x3a9e38===_0x1c571f(0x180)?'Тренировка\x20завершена':_0x1c571f(0x2cb),!![]);}function validateAppointment(_0xe01cfb,_0x3dfbc5,_0x33aba8,_0x18fbc9,_0x15c4d5){const _0x52c212=a2_0x289135,[_0xbef860,_0x5a23b6]=_0x3dfbc5[_0x52c212(0x2b7)](':')[_0x52c212(0x2d3)](Number),[_0x490eec,_0x2b3ea1]=_0x33aba8[_0x52c212(0x2b7)](':')[_0x52c212(0x2d3)](Number),_0x22b509=_0xbef860*0x3c+_0x5a23b6,_0x4a8b64=_0x490eec*0x3c+_0x2b3ea1,_0x32f940=String(_0x15c4d5);let _0x3b73ac=![],_0x24aec5='';for(let _0x2e9464 of sessions){if(_0x2e9464['dateStr']!==_0xe01cfb)continue;if(_0x2e9464[_0x52c212(0x262)]===_0x52c212(0x26c))continue;if(_0x18fbc9&&String(_0x2e9464['id'])===String(_0x18fbc9))continue;const [_0x23b44e,_0x7780f3]=_0x2e9464[_0x52c212(0x2d4)][_0x52c212(0x2b7)](':')[_0x52c212(0x2d3)](Number),[_0x54ddca,_0x3707a8]=_0x2e9464[_0x52c212(0x184)][_0x52c212(0x2b7)](':')['map'](Number),_0x5d2ad8=_0x23b44e*0x3c+_0x7780f3,_0x3a9c63=_0x54ddca*0x3c+_0x3707a8;if(Math[_0x52c212(0x1fd)](_0x22b509,_0x5d2ad8)<Math[_0x52c212(0x1a9)](_0x4a8b64,_0x3a9c63)){if(_0x2e9464[_0x52c212(0x1fc)]&&String(_0x2e9464[_0x52c212(0x1fc)])===_0x32f940)return{'valid':![],'msg':_0x52c212(0x27a)+_0x2e9464[_0x52c212(0x22b)]+_0x52c212(0x285)};_0x3b73ac=!![],_0x24aec5=_0x2e9464['client'];}}if(_0x3b73ac)return{'valid':!![],'warning':'Групповая:\x20также\x20записан\x20'+_0x24aec5};return{'valid':!![]};}function saveSingleSession(_0x9069dd){const _0x28a582=a2_0x289135;if(editingId){const _0x9e29a8=sessions[_0x28a582(0x2b6)](_0xa27e4f=>_0xa27e4f['id']===editingId);if(_0x9e29a8!==-0x1)sessions[_0x9e29a8]=_0x9069dd;}else sessions[_0x28a582(0x2a0)](_0x9069dd);afterSaveAction([_0x9069dd[_0x28a582(0x1cc)]]);}function createBatchSeries(_0x121d01,_0x338a50,_0x11cfb0){const _0x95543a=a2_0x289135,_0x328415=generateId(),_0x15963=[],_0x23866a=[];let _0x129c12=0x0,_0x4b462f=new Date(_0x338a50);for(let _0x483bb8=0x0;_0x483bb8<_0x11cfb0;_0x483bb8++){const _0x94f432=getLocalDateStr(_0x4b462f),_0x209089=validateAppointment(_0x94f432,_0x121d01['start'],_0x121d01[_0x95543a(0x184)],null,_0x121d01[_0x95543a(0x1fc)]);if(!_0x209089[_0x95543a(0x2e0)])console[_0x95543a(0x18b)](_0x95543a(0x268)+_0x94f432+_0x95543a(0x1c3)),_0x129c12++;else{const _0x47563d={..._0x121d01,'id':generateId(),'dateStr':_0x94f432,'seriesId':_0x328415};_0x23866a[_0x95543a(0x2a0)](_0x47563d),_0x15963['push'](_0x94f432);}_0x4b462f[_0x95543a(0x1d0)](_0x4b462f['getDate']()+0x7);}if(_0x23866a[_0x95543a(0x17c)]===0x0){showToast('Все\x20даты\x20заняты\x20этим\x20клиентом!',![]);return;}sessions['push'](..._0x23866a),lastUserActionTime=Date[_0x95543a(0x218)]();let _0xe1d6b1=_0x95543a(0x24f)+_0x23866a[_0x95543a(0x17c)];_0x129c12>0x0&&(_0xe1d6b1+=_0x95543a(0x1b0)+_0x129c12+')'),showToast(_0xe1d6b1,!![]),afterSaveAction(_0x15963);}function updateSeriesBatch(_0x4c616f,_0x5c80f4){const _0x415fe1=a2_0x289135,_0x84dbb7=[],_0x472ee8=_0x5c80f4[_0x415fe1(0x290)];if(_0x4c616f===_0x415fe1(0x266)){const _0x31c526={..._0x5c80f4,'seriesId':null},_0x3d2764=sessions[_0x415fe1(0x2b6)](_0x280652=>_0x280652['id']===_0x5c80f4['id']);if(_0x3d2764!==-0x1)sessions[_0x3d2764]=_0x31c526;_0x84dbb7['push'](_0x31c526[_0x415fe1(0x1cc)]);}else{if(_0x4c616f===_0x415fe1(0x251)){const _0x3e0a6d=_0x5c80f4[_0x415fe1(0x1cc)];sessions[_0x415fe1(0x21d)]((_0x4226ba,_0x190789)=>{const _0x7c560c=_0x415fe1;_0x4226ba[_0x7c560c(0x290)]===_0x472ee8&&_0x4226ba['dateStr']>=_0x3e0a6d&&(sessions[_0x190789]={...sessions[_0x190789],'start':_0x5c80f4['start'],'end':_0x5c80f4[_0x7c560c(0x184)],'note':_0x5c80f4[_0x7c560c(0x1d3)],'client':_0x5c80f4[_0x7c560c(0x22b)],'clientId':_0x5c80f4[_0x7c560c(0x1fc)]},_0x84dbb7[_0x7c560c(0x2a0)](_0x4226ba[_0x7c560c(0x1cc)]));});}}afterSaveAction(_0x84dbb7);}function tryDeleteSession(){const _0xd5eb36=a2_0x289135,_0x519d2a=sessions[_0xd5eb36(0x183)](_0x18ef23=>_0x18ef23['id']===editingId);if(!_0x519d2a)return;_0x519d2a[_0xd5eb36(0x290)]?openActionSheet(_0xd5eb36(0x28f)):commitDelete('single',_0x519d2a);}function commitDelete(_0x9958f1,_0x1142e4){const _0x40bab6=a2_0x289135;lastUserActionTime=Date[_0x40bab6(0x218)](),NotificationManager[_0x40bab6(0x280)](_0x40bab6(0x181),_0x1142e4);const _0x38f869=[];if(_0x9958f1==='single')sessions=sessions['filter'](_0x534094=>_0x534094['id']!==_0x1142e4['id']),_0x38f869[_0x40bab6(0x2a0)](_0x1142e4['dateStr']);else{if(_0x9958f1===_0x40bab6(0x251)){const _0x576ade=_0x1142e4[_0x40bab6(0x1cc)],_0x4c869f=_0x1142e4['seriesId'];sessions[_0x40bab6(0x21d)](_0x3aeb2e=>{const _0x20411b=_0x40bab6;_0x3aeb2e['seriesId']===_0x4c869f&&_0x3aeb2e[_0x20411b(0x1cc)]>=_0x576ade&&_0x38f869[_0x20411b(0x2a0)](_0x3aeb2e['dateStr']);}),sessions=sessions[_0x40bab6(0x2c5)](_0x3acd9f=>!(_0x3acd9f['seriesId']===_0x4c869f&&_0x3acd9f['dateStr']>=_0x576ade));}}afterSaveAction(_0x38f869);}function afterSaveAction(_0x3a5026){const _0x2b5431=a2_0x289135;DataManager['saveLocally'](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager['syncBatch'](_0x3a5026)[_0x2b5431(0x21f)](()=>console['log'](_0x2b5431(0x226)))['catch'](_0x5a7bb4=>showToast(_0x2b5431(0x233),![]));}const NotificationManager={'formatDate'(_0x40014d){const _0x30d0ef=a2_0x289135,_0x337c36=new Date(_0x40014d),_0x437c26={'weekday':_0x30d0ef(0x270),'day':_0x30d0ef(0x201),'month':_0x30d0ef(0x270)};let _0x23e699=_0x337c36['toLocaleDateString'](_0x30d0ef(0x179),_0x437c26);return _0x23e699[_0x30d0ef(0x240)](0x0)['toUpperCase']()+_0x23e699['slice'](0x1);},'getText'(_0x5e24e1,_0x188f5c){const _0xfd2641=a2_0x289135,_0x32e092=this['formatDate'](_0x188f5c[_0xfd2641(0x1cc)]);switch(_0x5e24e1){case _0xfd2641(0x249):return _0xfd2641(0x1e5)+(_0xfd2641(0x193)+_0x32e092+'\x0a')+(_0xfd2641(0x2be)+_0x188f5c['start']+'\x20—\x20'+_0x188f5c[_0xfd2641(0x184)]+'\x0a\x0a')+_0xfd2641(0x1a4);case _0xfd2641(0x278):return _0xfd2641(0x191)+_0xfd2641(0x211)+(_0xfd2641(0x20f)+_0x188f5c[_0xfd2641(0x2d4)]+_0xfd2641(0x1d5)+_0x188f5c[_0xfd2641(0x184)]+_0xfd2641(0x292))+(_0xfd2641(0x193)+_0x32e092);case _0xfd2641(0x181):return _0xfd2641(0x1b2)+(_0xfd2641(0x18c)+_0x32e092+'\x20('+_0x188f5c['start']+_0xfd2641(0x2a8));case _0xfd2641(0x221):return _0xfd2641(0x2a1)+_0xfd2641(0x287)+_0xfd2641(0x2ba);default:return'';}},async 'send'(_0x1ccc71,_0x595b74){const _0x57453b=a2_0x289135;console[_0x57453b(0x18b)](_0x57453b(0x1fa),_0x1ccc71,_0x595b74);if(!_0x595b74){console[_0x57453b(0x1b8)](_0x57453b(0x23b));return;}const _0xd69ac0=String(_0x595b74[_0x57453b(0x1fc)]);console['log'](_0x57453b(0x1ca),_0xd69ac0);if(!_0x595b74[_0x57453b(0x1fc)]||_0xd69ac0===_0x57453b(0x1f9)||_0xd69ac0===_0x57453b(0x1f2)){console[_0x57453b(0x1b8)](_0x57453b(0x235));if(_0x595b74[_0x57453b(0x22b)]){const _0x554ea4=clients[_0x57453b(0x183)](_0x33039a=>_0x33039a[_0x57453b(0x20e)]===_0x595b74['client']);if(_0x554ea4)return console[_0x57453b(0x18b)](_0x57453b(0x1dd),_0x554ea4['id']),this[_0x57453b(0x280)](_0x1ccc71,{..._0x595b74,'clientId':_0x554ea4['id']});}return;}if(_0xd69ac0[_0x57453b(0x17c)]<0x5){console[_0x57453b(0x1f3)]('[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)',_0xd69ac0);return;}const _0x56f96f=this['getText'](_0x1ccc71,_0x595b74);if(!_0x56f96f){console['error'](_0x57453b(0x2c6));return;}console[_0x57453b(0x18b)]('[Notify]\x20Sending\x20to\x20GAS\x20for\x20'+_0xd69ac0+_0x57453b(0x2d2)),DataManager[_0x57453b(0x236)]('send_notification',{'chatId':_0xd69ac0,'text':_0x56f96f})[_0x57453b(0x21f)](_0x26bb96=>console[_0x57453b(0x18b)]('[Notify]\x20Server\x20Response:',_0x26bb96))['catch'](_0xe8a168=>console['error']('[Notify]\x20Network\x20Failed',_0xe8a168));}};function getLocalDateStr(_0x1f79e0){const _0x57d4db=a2_0x289135,_0x2e4eed=_0x1f79e0[_0x57d4db(0x18e)](),_0x174b68=String(_0x1f79e0[_0x57d4db(0x208)]()+0x1)[_0x57d4db(0x239)](0x2,'0'),_0x509c27=String(_0x1f79e0[_0x57d4db(0x17b)]())[_0x57d4db(0x239)](0x2,'0');return _0x2e4eed+'-'+_0x174b68+'-'+_0x509c27;}function getDateStr(_0x322c70){const _0x39509b=a2_0x289135,_0x520967=new Date();return _0x520967[_0x39509b(0x1d0)](_0x520967[_0x39509b(0x17b)]()+_0x322c70),getLocalDateStr(_0x520967);}function getStartOfWeek(_0x1dbe16){const _0x3ae37d=a2_0x289135,_0x3892a4=new Date(_0x1dbe16),_0xf57746=_0x3892a4[_0x3ae37d(0x250)](),_0x56d572=_0x3892a4[_0x3ae37d(0x17b)]()-_0xf57746+(_0xf57746===0x0?-0x6:0x1);return _0x3892a4['setDate'](_0x56d572),_0x3892a4[_0x3ae37d(0x1d9)](0x0,0x0,0x0,0x0),_0x3892a4;}function hexToRgba(_0x2ec4cc,_0x3d13ba){const _0x5e0753=a2_0x289135;if(!_0x2ec4cc)return _0x5e0753(0x200);let _0x52a711=0x0,_0x3dd9ec=0x0,_0x369d9b=0x0;if(_0x2ec4cc[_0x5e0753(0x17c)]===0x4)_0x52a711='0x'+_0x2ec4cc[0x1]+_0x2ec4cc[0x1],_0x3dd9ec='0x'+_0x2ec4cc[0x2]+_0x2ec4cc[0x2],_0x369d9b='0x'+_0x2ec4cc[0x3]+_0x2ec4cc[0x3];else _0x2ec4cc[_0x5e0753(0x17c)]===0x7&&(_0x52a711='0x'+_0x2ec4cc[0x1]+_0x2ec4cc[0x2],_0x3dd9ec='0x'+_0x2ec4cc[0x3]+_0x2ec4cc[0x4],_0x369d9b='0x'+_0x2ec4cc[0x5]+_0x2ec4cc[0x6]);return _0x5e0753(0x282)+ +_0x52a711+',\x20'+ +_0x3dd9ec+',\x20'+ +_0x369d9b+',\x20'+_0x3d13ba+')';}function renderTimeColumn(){const _0x2970e1=a2_0x289135,_0x14c866=document[_0x2970e1(0x24a)](_0x2970e1(0x210)),_0x371424=document['getElementById'](_0x2970e1(0x2ac));_0x14c866['innerHTML']='',_0x14c866['appendChild'](_0x371424);for(let _0x2b5e53=0x0;_0x2b5e53<0x18;_0x2b5e53++){const _0x276868=document[_0x2970e1(0x2a4)](_0x2970e1(0x28b));_0x276868[_0x2970e1(0x257)]=_0x2970e1(0x232);if(_0x2b5e53>0x0)_0x276868['innerHTML']='<span>'+String(_0x2b5e53)[_0x2970e1(0x239)](0x2,'0')+':00</span>';_0x14c866[_0x2970e1(0x1c0)](_0x276868);}}function renderDayRange(_0x2f7746,_0x40c425){const _0xc83860=a2_0x289135,_0x540b3b=document[_0xc83860(0x24a)](_0xc83860(0x2c7)),_0x3be898=document['getElementById'](_0xc83860(0x2af)),_0x43ab7b=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x4627a1=new Date();_0x4627a1[_0xc83860(0x1d9)](0x0,0x0,0x0,0x0);const _0x218f1c=getLocalDateStr(new Date());for(let _0x31ff1b=_0x2f7746;_0x31ff1b<=_0x40c425;_0x31ff1b++){const _0xf38118=new Date(_0x4627a1);_0xf38118[_0xc83860(0x1d0)](_0xf38118[_0xc83860(0x17b)]()+_0x31ff1b);const _0x3e78c0=getLocalDateStr(_0xf38118);let _0x5531ca=_0xf38118['getDay']()-0x1;if(_0x5531ca===-0x1)_0x5531ca=0x6;const _0x4b9926=_0x3e78c0===_0x218f1c,_0x4c1d4a=document['createElement'](_0xc83860(0x28b));_0x4c1d4a[_0xc83860(0x257)]='day-col-header\x20'+(_0x4b9926?_0xc83860(0x1a1):''),_0x4c1d4a['id']=_0xc83860(0x264)+_0x3e78c0,_0x4c1d4a['setAttribute']('data-date',_0x3e78c0),_0x4c1d4a[_0xc83860(0x299)]=_0xc83860(0x1f4)+_0x43ab7b[_0x5531ca]+_0xc83860(0x1e0)+_0xf38118[_0xc83860(0x17b)]()+_0xc83860(0x1eb)+_0x3e78c0+_0xc83860(0x227),_0x4c1d4a['onclick']=()=>openDayOptions(_0x3e78c0,_0x43ab7b[_0x5531ca]+'\x20'+_0xf38118[_0xc83860(0x17b)]()),_0x540b3b[_0xc83860(0x1c0)](_0x4c1d4a);const _0x25ccd3=document[_0xc83860(0x2a4)]('div');_0x25ccd3['className']=_0xc83860(0x214)+(_0x4b9926?_0xc83860(0x1a1):''),_0x25ccd3[_0xc83860(0x21a)](_0xc83860(0x1ba),_0x3e78c0),_0x25ccd3['setAttribute'](_0xc83860(0x2ae),_0x5531ca),renderEventsForColumn(_0x25ccd3,_0x3e78c0,_0x5531ca),attachLongPressHandler(_0x25ccd3,_0xf38118),_0x3be898['appendChild'](_0x25ccd3),updateDayStats(_0x3e78c0);}}function reRenderBlocks(){const _0x5689e6=a2_0x289135;document[_0x5689e6(0x248)](_0x5689e6(0x2b5))['forEach'](_0x212f88=>{const _0x350044=_0x5689e6;_0x212f88[_0x350044(0x248)](_0x350044(0x1ae))[_0x350044(0x21d)](_0x45a653=>_0x45a653[_0x350044(0x22d)]());const _0x5f59bb=_0x212f88[_0x350044(0x283)](_0x350044(0x1ba)),_0x917a15=parseInt(_0x212f88[_0x350044(0x283)](_0x350044(0x2ae))),_0x1f4ff4=Math[_0x350044(0x220)](_0x212f88[_0x350044(0x2dd)]);(availabilityPattern[_0x917a15]||[])[_0x350044(0x21d)](_0x249000=>{const _0x2d4e91=_0x350044,_0x2a3930=document[_0x2d4e91(0x2a4)](_0x2d4e91(0x28b));_0x2a3930[_0x2d4e91(0x257)]=_0x2d4e91(0x25f);const _0x4d1527=_0x249000*GRID_H;_0x2a3930['style']['top']=_0x4d1527+'px',_0x2a3930[_0x2d4e91(0x254)][_0x2d4e91(0x1e3)]='-'+_0x1f4ff4+'px\x20-'+_0x4d1527+'px',_0x212f88['appendChild'](_0x2a3930);});if(specialRanges&&specialRanges['length']>0x0){const _0x1cf643=new Date(_0x5f59bb+_0x350044(0x1f8))[_0x350044(0x241)](),_0x3d4a20=new Date(_0x5f59bb+_0x350044(0x245))[_0x350044(0x241)]();specialRanges[_0x350044(0x21d)](_0x27e17e=>{const _0x25ccf6=_0x350044,_0x38e830=new Date(_0x27e17e['start'])[_0x25ccf6(0x241)](),_0x51477a=new Date(_0x27e17e['end'])[_0x25ccf6(0x241)](),_0x2b6783=Math[_0x25ccf6(0x1fd)](_0x1cf643,_0x38e830),_0x436c33=Math[_0x25ccf6(0x1a9)](_0x3d4a20,_0x51477a);if(_0x2b6783<_0x436c33){if(_0x2b6783<=_0x1cf643&&_0x436c33>=_0x3d4a20-0xea60){if(!_0x212f88['querySelector']('.day-off-overlay')){const _0x33b6fd=document[_0x25ccf6(0x2a4)](_0x25ccf6(0x28b));_0x33b6fd[_0x25ccf6(0x257)]=_0x25ccf6(0x2bd),_0x33b6fd['style'][_0x25ccf6(0x1e3)]='-'+_0x1f4ff4+'px\x200px',_0x212f88[_0x25ccf6(0x1c0)](_0x33b6fd);}}else{const _0x1b3f25=(_0x2b6783-_0x1cf643)/0x36ee80*GRID_H,_0x11cba0=(_0x436c33-_0x2b6783)/0x36ee80*GRID_H,_0x3f54b5=document[_0x25ccf6(0x2a4)](_0x25ccf6(0x28b));_0x3f54b5[_0x25ccf6(0x257)]=_0x25ccf6(0x21c),_0x3f54b5[_0x25ccf6(0x254)][_0x25ccf6(0x2a5)]=_0x1b3f25+'px',_0x3f54b5[_0x25ccf6(0x254)][_0x25ccf6(0x260)]=_0x11cba0+'px',_0x3f54b5[_0x25ccf6(0x254)][_0x25ccf6(0x1e3)]='-'+_0x1f4ff4+_0x25ccf6(0x1e8)+_0x1b3f25+'px',_0x212f88['appendChild'](_0x3f54b5);}}});}if(dateExceptions[_0x5f59bb]==='off'){if(!_0x212f88[_0x350044(0x24d)](_0x350044(0x1b9))){const _0x10d16f=document[_0x350044(0x2a4)](_0x350044(0x28b));_0x10d16f['className']=_0x350044(0x2bd),_0x10d16f[_0x350044(0x254)]['backgroundPosition']='-'+_0x1f4ff4+'px\x200px',_0x212f88['appendChild'](_0x10d16f);}}renderEventsForColumn(_0x212f88,_0x5f59bb,_0x917a15),updateDayStats(_0x5f59bb);});}function updateAllDayStats(){const _0x402d2e=a2_0x289135;document['querySelectorAll'](_0x402d2e(0x26b))[_0x402d2e(0x21d)](_0x5088e2=>{const _0x3bfe8b=_0x402d2e;updateDayStats(_0x5088e2['getAttribute'](_0x3bfe8b(0x1ba)));});}function updateDayStats(_0x56b742){const _0x2c2a07=a2_0x289135,_0x59cb34=document[_0x2c2a07(0x24a)](_0x2c2a07(0x1b1)+_0x56b742);if(!_0x59cb34)return;const _0x4feb2e=new Date(_0x56b742);let _0x385456=_0x4feb2e[_0x2c2a07(0x250)]()-0x1;if(_0x385456===-0x1)_0x385456=0x6;if(dateExceptions[_0x56b742]===_0x2c2a07(0x28a)){_0x59cb34[_0x2c2a07(0x254)][_0x2c2a07(0x228)]='none';return;}const _0x4c2804=availabilityPattern[_0x385456]||[],_0x57fc40=0x18-_0x4c2804['length'],_0x1e691f=_0x57fc40*0x3c,_0xd8dcd9=sessions[_0x2c2a07(0x2c5)](_0x289253=>_0x289253[_0x2c2a07(0x1cc)]===_0x56b742&&_0x289253[_0x2c2a07(0x262)]!==_0x2c2a07(0x26c));if(_0xd8dcd9[_0x2c2a07(0x17c)]===0x0){_0x59cb34[_0x2c2a07(0x254)][_0x2c2a07(0x228)]=_0x2c2a07(0x2da);return;}let _0x1ab04f=_0xd8dcd9[_0x2c2a07(0x2d3)](_0x4cf595=>{const _0x300c83=_0x2c2a07,[_0x449733,_0x499fdf]=_0x4cf595['start'][_0x300c83(0x2b7)](':')[_0x300c83(0x2d3)](Number),[_0x4227c4,_0x3f0a1f]=_0x4cf595[_0x300c83(0x184)][_0x300c83(0x2b7)](':')[_0x300c83(0x2d3)](Number);return[_0x449733*0x3c+_0x499fdf,_0x4227c4*0x3c+_0x3f0a1f];});_0x1ab04f[_0x2c2a07(0x2e2)]((_0xa7ec51,_0x17c58d)=>_0xa7ec51[0x0]-_0x17c58d[0x0]);let _0x4dece4=[];if(_0x1ab04f['length']>0x0){let _0x4d6364=_0x1ab04f[0x0];for(let _0x5bf884=0x1;_0x5bf884<_0x1ab04f[_0x2c2a07(0x17c)];_0x5bf884++){_0x1ab04f[_0x5bf884][0x0]<_0x4d6364[0x1]?_0x4d6364[0x1]=Math[_0x2c2a07(0x1fd)](_0x4d6364[0x1],_0x1ab04f[_0x5bf884][0x1]):(_0x4dece4[_0x2c2a07(0x2a0)](_0x4d6364),_0x4d6364=_0x1ab04f[_0x5bf884]);}_0x4dece4[_0x2c2a07(0x2a0)](_0x4d6364);}let _0x5b20c9=0x0;_0x4dece4[_0x2c2a07(0x21d)](_0x5dd704=>_0x5b20c9+=_0x5dd704[0x1]-_0x5dd704[0x0]),_0x59cb34['style']['display']=_0x2c2a07(0x20b);const _0x171684=_0x59cb34[_0x2c2a07(0x24d)]('.dch-stats-fill');if(_0x1e691f===0x0){_0x171684[_0x2c2a07(0x254)][_0x2c2a07(0x187)]=_0x2c2a07(0x234),_0x171684[_0x2c2a07(0x254)][_0x2c2a07(0x219)]=_0x2c2a07(0x2b2);return;}const _0x12738f=_0x5b20c9/_0x1e691f*0x64;console[_0x2c2a07(0x18b)]('['+_0x56b742+_0x2c2a07(0x209)+_0x57fc40+_0x2c2a07(0x24b)+_0x5b20c9+_0x2c2a07(0x1af)+_0x12738f[_0x2c2a07(0x271)](0x1)+'%'),_0x12738f>0x64?(_0x171684[_0x2c2a07(0x254)][_0x2c2a07(0x187)]=_0x2c2a07(0x234),_0x171684['style'][_0x2c2a07(0x219)]=_0x2c2a07(0x2b2)):(_0x171684[_0x2c2a07(0x254)][_0x2c2a07(0x187)]=_0x12738f+'%',_0x171684['style'][_0x2c2a07(0x219)]='var(--acc-current)');}function renderEventsForColumn(_0x25b0af,_0x11c227,_0x11c17e){const _0xf382b5=a2_0x289135,_0x37e81b=sessions[_0xf382b5(0x2c5)](_0x5ab6a9=>_0x5ab6a9[_0xf382b5(0x1cc)]===_0x11c227),_0x379b9b=_0x37e81b[_0xf382b5(0x2d3)](_0x2c103e=>{const _0x46b44d=_0xf382b5,[_0xdc9da5,_0x45db70]=_0x2c103e[_0x46b44d(0x2d4)]['split'](':')['map'](Number),[_0x33c2dd,_0x5a4437]=_0x2c103e['end'][_0x46b44d(0x2b7)](':')[_0x46b44d(0x2d3)](Number);return{'data':_0x2c103e,'start':_0xdc9da5*0x3c+_0x45db70,'end':_0x33c2dd*0x3c+_0x5a4437,'colIndex':0x0};});_0x379b9b[_0xf382b5(0x2e2)]((_0x4b2591,_0x2ecab3)=>{const _0x29a77b=_0xf382b5;if(_0x4b2591[_0x29a77b(0x2d4)]!==_0x2ecab3[_0x29a77b(0x2d4)])return _0x4b2591[_0x29a77b(0x2d4)]-_0x2ecab3['start'];return _0x2ecab3[_0x29a77b(0x184)]-_0x2ecab3[_0x29a77b(0x2d4)]-(_0x4b2591[_0x29a77b(0x184)]-_0x4b2591[_0x29a77b(0x2d4)]);});const _0x1c944e=[];_0x379b9b[_0xf382b5(0x21d)](_0x3069d2=>{const _0x3571ff=_0xf382b5;let _0x5f1a7d=![];for(let _0x3facb2=0x0;_0x3facb2<_0x1c944e[_0x3571ff(0x17c)];_0x3facb2++){const _0x374563=_0x1c944e[_0x3facb2],_0x1675d7=_0x374563[_0x374563[_0x3571ff(0x17c)]-0x1];if(_0x3069d2[_0x3571ff(0x2d4)]>=_0x1675d7[_0x3571ff(0x184)]){_0x374563[_0x3571ff(0x2a0)](_0x3069d2),_0x3069d2[_0x3571ff(0x20c)]=_0x3facb2,_0x5f1a7d=!![];break;}}!_0x5f1a7d&&(_0x1c944e['push']([_0x3069d2]),_0x3069d2[_0x3571ff(0x20c)]=_0x1c944e[_0x3571ff(0x17c)]-0x1);}),_0x379b9b[_0xf382b5(0x21d)](_0x19eb96=>{const _0x2fe5d5=_0xf382b5;let _0x5c156f=0x0;_0x379b9b[_0x2fe5d5(0x21d)](_0xd4b35d=>{const _0x1d9c3f=_0x2fe5d5;if(Math[_0x1d9c3f(0x1fd)](_0x19eb96[_0x1d9c3f(0x2d4)],_0xd4b35d[_0x1d9c3f(0x2d4)])<Math[_0x1d9c3f(0x1a9)](_0x19eb96[_0x1d9c3f(0x184)],_0xd4b35d['end'])){if(_0xd4b35d[_0x1d9c3f(0x20c)]>_0x5c156f)_0x5c156f=_0xd4b35d[_0x1d9c3f(0x20c)];}});const _0x3e773b=_0x5c156f+0x1,_0x5a91d0=0x64/_0x3e773b,_0x17642c=_0x19eb96[_0x2fe5d5(0x20c)]*_0x5a91d0,_0x49b582=createEventEl(_0x19eb96[_0x2fe5d5(0x176)]);_0x49b582[_0x2fe5d5(0x254)][_0x2fe5d5(0x187)]=_0x2fe5d5(0x19a)+_0x5a91d0+_0x2fe5d5(0x1ff),_0x49b582['style'][_0x2fe5d5(0x1cd)]='calc('+_0x17642c+_0x2fe5d5(0x29e),_0x49b582[_0x2fe5d5(0x254)][_0x2fe5d5(0x213)]=0xa+_0x19eb96[_0x2fe5d5(0x20c)],_0x5a91d0<0x55&&_0x49b582['classList'][_0x2fe5d5(0x246)](_0x2fe5d5(0x2d0)),_0x25b0af[_0x2fe5d5(0x1c0)](_0x49b582);});}function createEventEl(_0x41be1d){const _0x486b49=a2_0x289135,[_0x43ed53,_0x1f28cd]=_0x41be1d['start'][_0x486b49(0x2b7)](':')[_0x486b49(0x2d3)](Number),[_0x3b253a,_0x10b8cc]=_0x41be1d[_0x486b49(0x184)][_0x486b49(0x2b7)](':')['map'](Number),_0x5722c4=(_0x43ed53*0x3c+_0x1f28cd)/0x3c*GRID_H,_0x749fa2=(_0x3b253a*0x3c+_0x10b8cc-(_0x43ed53*0x3c+_0x1f28cd))/0x3c*GRID_H,_0x8c89c5=document[_0x486b49(0x2a4)](_0x486b49(0x28b)),_0x1bbe92=_0x41be1d['status']==='completed'?_0x486b49(0x2db):'';_0x8c89c5[_0x486b49(0x257)]='event-card'+_0x1bbe92,_0x8c89c5[_0x486b49(0x254)][_0x486b49(0x2a5)]=_0x5722c4+'px',_0x8c89c5[_0x486b49(0x254)][_0x486b49(0x260)]=Math[_0x486b49(0x1fd)](_0x749fa2,0x14)+'px';const _0x2c672b=clients[_0x486b49(0x183)](_0x21ca4d=>_0x41be1d[_0x486b49(0x1fc)]&&String(_0x21ca4d['id'])===String(_0x41be1d['clientId'])||_0x21ca4d[_0x486b49(0x20e)]===_0x41be1d[_0x486b49(0x22b)]),_0x3a1c7b=_0x2c672b?_0x2c672b[_0x486b49(0x1c6)]:_0x486b49(0x2a9);_0x8c89c5[_0x486b49(0x254)]['borderLeftColor']=_0x3a1c7b,_0x8c89c5['style']['backgroundColor']=hexToRgba(_0x3a1c7b,0.85);let _0x47894d=_0x486b49(0x205)+_0x41be1d['client']+_0x486b49(0x1c9)+_0x41be1d[_0x486b49(0x2d4)]+'\x20-\x20'+_0x41be1d[_0x486b49(0x184)]+_0x486b49(0x1db);return _0x41be1d[_0x486b49(0x290)]&&(_0x47894d+=_0x486b49(0x2dc)),_0x41be1d[_0x486b49(0x262)]===_0x486b49(0x180)&&(_0x47894d+='<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>'),_0x8c89c5[_0x486b49(0x299)]=_0x47894d,_0x8c89c5['onclick']=_0x23a35d=>{_0x23a35d['stopPropagation'](),openEdit(_0x41be1d);},_0x8c89c5;}function attachLongPressHandler(_0x4b6fa0,_0x337d82){const _0x15b5a4=a2_0x289135;let _0x4cd595=0x0,_0x16fc05=null;const _0x35bbb4=_0x2883eb=>{const _0x3a4807=a2_0x53e3;if(_0x2883eb[_0x3a4807(0x2de)][_0x3a4807(0x1a5)](_0x3a4807(0x259)))return;isScrolling=![],_0x4cd595=_0x2883eb[_0x3a4807(0x1de)]?_0x2883eb['touches'][0x0][_0x3a4807(0x28c)]:_0x2883eb[_0x3a4807(0x28c)],_0x16fc05=setTimeout(()=>{const _0x2e3701=_0x3a4807;if(!isScrolling){navigator[_0x2e3701(0x189)]?.(0x32);const _0x2289c5=_0x4b6fa0['getBoundingClientRect'](),_0x100139=Math[_0x2e3701(0x19c)]((_0x4cd595-_0x2289c5['top'])/GRID_H);_0x337d82[_0x2e3701(0x1d9)](_0x100139,0x0),openAddSession(_0x337d82);}},0x1f4);},_0x32b6d6=()=>{isScrolling=!![],clearTimeout(_0x16fc05);},_0xcc4ee1=()=>{clearTimeout(_0x16fc05);};_0x4b6fa0['addEventListener'](_0x15b5a4(0x1b6),_0x35bbb4,{'passive':!![]}),_0x4b6fa0['addEventListener']('touchmove',_0x32b6d6,{'passive':!![]}),_0x4b6fa0[_0x15b5a4(0x2e8)](_0x15b5a4(0x196),_0xcc4ee1),_0x4b6fa0[_0x15b5a4(0x2e8)](_0x15b5a4(0x29c),_0x35bbb4),_0x4b6fa0[_0x15b5a4(0x2e8)](_0x15b5a4(0x279),_0x32b6d6),_0x4b6fa0[_0x15b5a4(0x2e8)](_0x15b5a4(0x1a7),_0xcc4ee1);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x1f8a76=a2_0x289135,_0x35c51f=document[_0x1f8a76(0x24a)](_0x1f8a76(0x2d5)),_0x5e6b31=_0x35c51f['scrollLeft'],_0x34ee77=_0x35c51f[_0x1f8a76(0x293)],_0x4535ea=_0x35c51f[_0x1f8a76(0x1c5)];if(_0x34ee77-(_0x5e6b31+_0x4535ea)<0x12c){const _0x2529c8=endOffset;endOffset+=0xe,renderDayRange(_0x2529c8+0x1,endOffset),reRenderBlocks();}if(_0x5e6b31<0x12c){const _0x5b8327=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5b8327-0x1),_0x35c51f[_0x1f8a76(0x29f)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x3df39a,_0x30f41d){const _0xa7b913=a2_0x289135,_0x4d15da=document['getElementById']('daysHeaderTrack'),_0x444061=document[_0xa7b913(0x24a)](_0xa7b913(0x2af)),_0x5c6e09=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x340b0c=new Date();_0x340b0c[_0xa7b913(0x1d9)](0x0,0x0,0x0,0x0);const _0x27df4d=getLocalDateStr(new Date()),_0x26cec3=document['createDocumentFragment'](),_0x27842d=document[_0xa7b913(0x1ac)]();for(let _0xf95fff=_0x3df39a;_0xf95fff<=_0x30f41d;_0xf95fff++){const _0x4f0f88=new Date(_0x340b0c);_0x4f0f88['setDate'](_0x4f0f88[_0xa7b913(0x17b)]()+_0xf95fff);const _0x3ec6df=getLocalDateStr(_0x4f0f88);let _0xc6aba9=_0x4f0f88[_0xa7b913(0x250)]()-0x1;if(_0xc6aba9===-0x1)_0xc6aba9=0x6;const _0x23e2f4=_0x3ec6df===_0x27df4d,_0x12f074=document[_0xa7b913(0x2a4)](_0xa7b913(0x28b));_0x12f074[_0xa7b913(0x257)]='day-col-header\x20'+(_0x23e2f4?_0xa7b913(0x1a1):''),_0x12f074['id']=_0xa7b913(0x264)+_0x3ec6df,_0x12f074[_0xa7b913(0x21a)](_0xa7b913(0x1ba),_0x3ec6df),_0x12f074[_0xa7b913(0x299)]='<div\x20class=\x22dch-day\x22>'+_0x5c6e09[_0xc6aba9]+_0xa7b913(0x1e0)+_0x4f0f88['getDate']()+_0xa7b913(0x1eb)+_0x3ec6df+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x12f074[_0xa7b913(0x186)]=()=>openDayOptions(_0x3ec6df,_0x5c6e09[_0xc6aba9]+'\x20'+_0x4f0f88['getDate']()),_0x26cec3[_0xa7b913(0x1c0)](_0x12f074);const _0x259da3=document[_0xa7b913(0x2a4)](_0xa7b913(0x28b));_0x259da3['className']=_0xa7b913(0x214)+(_0x23e2f4?_0xa7b913(0x1a1):''),_0x259da3['setAttribute'](_0xa7b913(0x1ba),_0x3ec6df),_0x259da3[_0xa7b913(0x21a)](_0xa7b913(0x2ae),_0xc6aba9),renderEventsForColumn(_0x259da3,_0x3ec6df,_0xc6aba9),attachLongPressHandler(_0x259da3,_0x4f0f88),_0x27842d[_0xa7b913(0x1c0)](_0x259da3),updateDayStats(_0x3ec6df);}_0x4d15da[_0xa7b913(0x2a2)](_0x26cec3,_0x4d15da[_0xa7b913(0x2e1)]),_0x444061[_0xa7b913(0x2a2)](_0x27842d,_0x444061[_0xa7b913(0x24d)](_0xa7b913(0x199)));}function validateAppointment(_0x3aac2c,_0x220bd5,_0x366578,_0x3140c2,_0x4dd7a1){const _0x4f9e08=a2_0x289135,[_0x36b611,_0x5bcfbf]=_0x220bd5[_0x4f9e08(0x2b7)](':')[_0x4f9e08(0x2d3)](Number),[_0x3e8ba2,_0x4c850c]=_0x366578[_0x4f9e08(0x2b7)](':')[_0x4f9e08(0x2d3)](Number),_0x128f03=_0x36b611*0x3c+_0x5bcfbf,_0x3774f2=_0x3e8ba2*0x3c+_0x4c850c,_0x22e1e7=String(_0x4dd7a1);let _0xc4b364=![],_0x1c0b19='';for(let _0x2a8250 of sessions){if(_0x2a8250['dateStr']!==_0x3aac2c)continue;if(_0x2a8250[_0x4f9e08(0x262)]===_0x4f9e08(0x26c))continue;if(_0x3140c2&&String(_0x2a8250['id'])===String(_0x3140c2))continue;const [_0x5caa1d,_0x1a001b]=_0x2a8250[_0x4f9e08(0x2d4)]['split'](':')[_0x4f9e08(0x2d3)](Number),[_0x2c9df1,_0xf043d2]=_0x2a8250[_0x4f9e08(0x184)]['split'](':')[_0x4f9e08(0x2d3)](Number),_0x5baa59=_0x5caa1d*0x3c+_0x1a001b,_0x4f8739=_0x2c9df1*0x3c+_0xf043d2;if(Math['max'](_0x128f03,_0x5baa59)<Math[_0x4f9e08(0x1a9)](_0x3774f2,_0x4f8739)){if(_0x2a8250['clientId']&&String(_0x2a8250['clientId'])===_0x22e1e7)return{'valid':![],'msg':'Этот\x20клиент\x20('+_0x2a8250['client']+_0x4f9e08(0x285)};_0xc4b364=!![],_0x1c0b19=_0x2a8250['client'];}}if(_0xc4b364)return{'valid':!![],'warning':_0x4f9e08(0x2e6)+_0x1c0b19};return{'valid':!![]};}function updateDateDisplay(){const _0x6fdca7=a2_0x289135,_0x3cefe3=document[_0x6fdca7(0x24a)](_0x6fdca7(0x2c4))[_0x6fdca7(0x263)],_0x10d1ee=document[_0x6fdca7(0x24a)]('sheetDateSubtitle');if(!_0x3cefe3){_0x10d1ee['textContent']='';return;}const [_0x287f7b,_0x228f65,_0x342b25]=_0x3cefe3['split']('-')[_0x6fdca7(0x2d3)](Number),_0x2ccbcc=new Date(_0x287f7b,_0x228f65-0x1,_0x342b25),_0x2f3e52={'weekday':_0x6fdca7(0x270),'day':_0x6fdca7(0x201),'month':_0x6fdca7(0x270),'year':_0x6fdca7(0x201)};let _0x234180=_0x2ccbcc[_0x6fdca7(0x26d)](_0x6fdca7(0x179),_0x2f3e52);_0x234180=_0x234180['charAt'](0x0)['toUpperCase']()+_0x234180[_0x6fdca7(0x2d6)](0x1),_0x10d1ee[_0x6fdca7(0x2e9)]=_0x234180;}function autoSetEndTime(){const _0x1fd4c1=a2_0x289135,_0x1a16b0=document[_0x1fd4c1(0x24a)]('inpStart')[_0x1fd4c1(0x263)];if(!_0x1a16b0)return;const [_0x4642a,_0x20caf5]=_0x1a16b0[_0x1fd4c1(0x2b7)](':')[_0x1fd4c1(0x2d3)](Number);let _0x2b5cf4=_0x4642a+0x1;if(_0x2b5cf4>0x17)_0x2b5cf4=0x0;const _0x50a228=String(_0x2b5cf4)[_0x1fd4c1(0x239)](0x2,'0')+':'+String(_0x20caf5)[_0x1fd4c1(0x239)](0x2,'0');document[_0x1fd4c1(0x24a)](_0x1fd4c1(0x1a0))[_0x1fd4c1(0x263)]=_0x50a228;}function populateClientSelect(){const _0x2370fa=a2_0x289135,_0x1c472a=document[_0x2370fa(0x24a)](_0x2370fa(0x1f5));_0x1c472a[_0x2370fa(0x299)]='';if(clients[_0x2370fa(0x17c)]===0x0){const _0x56cd=document['createElement']('option');_0x56cd[_0x2370fa(0x1e7)]='Нет\x20клиентов',_0x1c472a[_0x2370fa(0x1c0)](_0x56cd);return;}clients[_0x2370fa(0x21d)](_0x42a422=>{const _0x457e73=_0x2370fa,_0x3448ee=document[_0x457e73(0x2a4)](_0x457e73(0x1df));_0x3448ee[_0x457e73(0x263)]=_0x42a422['name'],_0x3448ee[_0x457e73(0x2e9)]=_0x42a422[_0x457e73(0x20e)],_0x1c472a[_0x457e73(0x1c0)](_0x3448ee);});}function openActionSheet(_0x4ccc08){const _0x1d3243=a2_0x289135,_0x33310d=document[_0x1d3243(0x24a)](_0x1d3243(0x1bc)),_0x40448a=document[_0x1d3243(0x24a)]('actionSheetOverlay'),_0xe689b8=document[_0x1d3243(0x24a)]('asTitle'),_0x12b25b=document[_0x1d3243(0x24a)](_0x1d3243(0x178)),_0x6dfc1b=document[_0x1d3243(0x24a)](_0x1d3243(0x17e));_0x40448a['classList'][_0x1d3243(0x246)](_0x1d3243(0x289)),_0x33310d[_0x1d3243(0x288)][_0x1d3243(0x246)](_0x1d3243(0x25e));if(_0x4ccc08===_0x1d3243(0x1aa))_0xe689b8[_0x1d3243(0x2e9)]=_0x1d3243(0x19b),_0x12b25b[_0x1d3243(0x2e9)]=_0x1d3243(0x2ea),_0x12b25b[_0x1d3243(0x186)]=()=>{const _0x59a3f8=_0x1d3243;closeActionSheet(),updateSeriesBatch(_0x59a3f8(0x266),tempSessionData);},_0x6dfc1b[_0x1d3243(0x2e9)]=_0x1d3243(0x27f),_0x6dfc1b['onclick']=()=>{const _0x4d56a6=_0x1d3243;closeActionSheet(),updateSeriesBatch(_0x4d56a6(0x251),tempSessionData);};else _0x4ccc08==='delete'&&(_0xe689b8[_0x1d3243(0x2e9)]=_0x1d3243(0x23e),_0x12b25b[_0x1d3243(0x2e9)]=_0x1d3243(0x2ea),_0x12b25b[_0x1d3243(0x257)]='as-button\x20danger',_0x12b25b[_0x1d3243(0x186)]=()=>{const _0x4995f9=_0x1d3243;closeActionSheet(),commitDelete('single',sessions[_0x4995f9(0x183)](_0x5c4d0c=>_0x5c4d0c['id']===editingId));},_0x6dfc1b['textContent']=_0x1d3243(0x27f),_0x6dfc1b[_0x1d3243(0x257)]=_0x1d3243(0x2b3),_0x6dfc1b[_0x1d3243(0x186)]=()=>{const _0x55103c=_0x1d3243;closeActionSheet(),commitDelete(_0x55103c(0x251),sessions[_0x55103c(0x183)](_0x5152b0=>_0x5152b0['id']===editingId));});}function closeActionSheet(){const _0xee6450=a2_0x289135;document[_0xee6450(0x24a)](_0xee6450(0x1bc))['classList'][_0xee6450(0x22d)](_0xee6450(0x25e)),document[_0xee6450(0x24a)]('actionSheetOverlay')[_0xee6450(0x288)][_0xee6450(0x22d)](_0xee6450(0x289));}function openSettings(){const _0x3a0684=a2_0x289135;openSheet(_0x3a0684(0x203));}function saveCoachSettings(){const _0x34a972=a2_0x289135,_0x5aa649=document['getElementById'](_0x34a972(0x19d))[_0x34a972(0x263)];localStorage[_0x34a972(0x2cf)]('uc_settings_cancel_window',_0x5aa649),console[_0x34a972(0x18b)]('[Settings]\x20Cancel\x20window\x20set\x20to:',_0x5aa649),DataManager['fetchFromServer']('save_settings',{'settings':{'cancel_window':_0x5aa649}})['catch'](_0x35ae7e=>{const _0x2f6301=_0x34a972;console[_0x2f6301(0x1b8)](_0x2f6301(0x274),_0x35ae7e),showToast(_0x2f6301(0x2d8),![]);});}function loadCoachSettings(){const _0x4b00c0=a2_0x289135,_0x50e5cf=localStorage[_0x4b00c0(0x267)](_0x4b00c0(0x28d));_0x50e5cf&&(document[_0x4b00c0(0x24a)](_0x4b00c0(0x19d))[_0x4b00c0(0x263)]=_0x50e5cf);}function openRangesSheet(){closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet('rangesSheet');}function addRange(){const _0x156f4a=a2_0x289135,_0x2d7ab5=document[_0x156f4a(0x24a)](_0x156f4a(0x1b7))['value'],_0x5b356d=document[_0x156f4a(0x24a)]('rangeStartTime')[_0x156f4a(0x263)],_0x2fd61=document['getElementById']('rangeEndDate')[_0x156f4a(0x263)],_0x4eafab=document['getElementById']('rangeEndTime')[_0x156f4a(0x263)];if(!_0x2d7ab5||!_0x5b356d||!_0x2fd61||!_0x4eafab)return alert(_0x156f4a(0x1ab));const _0x2e8470=_0x2d7ab5+'T'+_0x5b356d,_0x3463bd=_0x2fd61+'T'+_0x4eafab;if(_0x2e8470>=_0x3463bd)return alert(_0x156f4a(0x17a));specialRanges[_0x156f4a(0x2a0)]({'start':_0x2e8470,'end':_0x3463bd}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x156f4a(0x2a6)](),DataManager['fetchFromServer'](_0x156f4a(0x256),{'settings':{'ranges':specialRanges}});}function deleteRange(_0x5c5126){const _0x2054db=a2_0x289135;specialRanges['splice'](_0x5c5126,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x2054db(0x2a6)](),DataManager[_0x2054db(0x236)](_0x2054db(0x256),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x3fa182=a2_0x289135;document[_0x3fa182(0x24a)](_0x3fa182(0x1b7))[_0x3fa182(0x263)]='',document[_0x3fa182(0x24a)](_0x3fa182(0x2ec))['value']=_0x3fa182(0x204),document[_0x3fa182(0x24a)](_0x3fa182(0x1a8))[_0x3fa182(0x263)]='',document[_0x3fa182(0x24a)](_0x3fa182(0x23d))[_0x3fa182(0x263)]=_0x3fa182(0x2cd);}function renderRangesList(){const _0x591883=a2_0x289135,_0x333e8b=document[_0x591883(0x24a)](_0x591883(0x212));_0x333e8b[_0x591883(0x299)]='';if(!specialRanges[_0x591883(0x17c)]){_0x333e8b[_0x591883(0x299)]=_0x591883(0x197);return;}specialRanges[_0x591883(0x21d)]((_0x25241f,_0x4c9cf5)=>{const _0x3f927b=_0x591883,_0x475f86=document[_0x3f927b(0x2a4)](_0x3f927b(0x28b));_0x475f86[_0x3f927b(0x257)]='range-item';const _0x2158d8=_0x4e1198=>{const _0x2e6b17=_0x3f927b,_0x39031d=new Date(_0x4e1198);return _0x39031d[_0x2e6b17(0x17b)]()+'.'+String(_0x39031d[_0x2e6b17(0x208)]()+0x1)[_0x2e6b17(0x239)](0x2,'0')+'\x20'+String(_0x39031d[_0x2e6b17(0x1cf)]())['padStart'](0x2,'0')+':'+String(_0x39031d[_0x2e6b17(0x17d)]())['padStart'](0x2,'0');};_0x475f86[_0x3f927b(0x299)]=_0x3f927b(0x202)+_0x2158d8(_0x25241f[_0x3f927b(0x2d4)])+_0x3f927b(0x1d5)+_0x2158d8(_0x25241f[_0x3f927b(0x184)])+_0x3f927b(0x2aa)+_0x4c9cf5+_0x3f927b(0x1bd),_0x333e8b[_0x3f927b(0x1c0)](_0x475f86);});}function scrollToToday(){const _0x4379f3=a2_0x289135,_0x573169=getLocalDateStr(new Date()),_0x3c8b25=document['getElementById'](_0x4379f3(0x264)+_0x573169),_0x3c606c=document['getElementById']('matrixViewport');if(_0x3c8b25&&_0x3c606c){const _0xdd3b90=_0x3c606c['clientWidth'],_0x349bd8=_0x3c8b25[_0x4379f3(0x2dd)],_0x1106b7=_0x3c8b25[_0x4379f3(0x225)];_0x3c606c[_0x4379f3(0x29f)]=_0x349bd8-_0xdd3b90/0x2+_0x1106b7/0x2,_0x3c606c[_0x4379f3(0x1a6)]=0x9*GRID_H;}}function onScroll(){const _0x18a3e0=a2_0x289135,_0x26a641=document[_0x18a3e0(0x24a)](_0x18a3e0(0x2d5)),_0x3c6de5=document[_0x18a3e0(0x248)]('.day-col-header');for(let _0x1264e1 of _0x3c6de5)if(_0x1264e1[_0x18a3e0(0x2dd)]>=_0x26a641[_0x18a3e0(0x29f)]){const _0x26c503=new Date(_0x1264e1[_0x18a3e0(0x283)](_0x18a3e0(0x1ba)));document[_0x18a3e0(0x24a)](_0x18a3e0(0x182))[_0x18a3e0(0x2e9)]=_0x26c503['toLocaleString']('ru',{'month':_0x18a3e0(0x270)})[_0x18a3e0(0x17f)]()+'\x20'+_0x26c503[_0x18a3e0(0x18e)]();break;}}function showToast(_0xad75e1,_0x35e740=![]){const _0x85b3f0=a2_0x289135,_0x4eb377=document[_0x85b3f0(0x24a)](_0x85b3f0(0x1f0));_0x4eb377[_0x85b3f0(0x257)]=_0x85b3f0(0x23a)+(_0x35e740?'success':''),document[_0x85b3f0(0x24a)]('toastTitle')[_0x85b3f0(0x2e9)]=_0x35e740?'Успешно':_0x85b3f0(0x1ed),document[_0x85b3f0(0x24a)]('toastMessage')[_0x85b3f0(0x2e9)]=_0xad75e1,_0x4eb377['classList'][_0x85b3f0(0x246)](_0x85b3f0(0x1be)),setTimeout(()=>{const _0x36a78b=_0x85b3f0;_0x4eb377[_0x36a78b(0x288)][_0x36a78b(0x22d)](_0x36a78b(0x1be));},0xbb8);}function openDayOptions(_0x1a216b,_0x3124c8){const _0x455cde=a2_0x289135;selectedDayForOptions=_0x1a216b,document[_0x455cde(0x24a)]('dayOptionsTitle')[_0x455cde(0x2e9)]=_0x3124c8,openSheet(_0x455cde(0x20d));}function toggleDayOff(){const _0x237b7a=a2_0x289135;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x237b7a(0x28a),reRenderBlocks(),closeAllSheets(),DataManager[_0x237b7a(0x2a6)](),DataManager['fetchFromServer'](_0x237b7a(0x256),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x8b9fea=a2_0x289135;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager['saveLocally'](),DataManager[_0x8b9fea(0x236)]('save_settings',{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x248cb0){const _0x1b9560=a2_0x289135;document[_0x1b9560(0x24a)](_0x1b9560(0x2e7))['classList'][_0x1b9560(0x246)](_0x1b9560(0x289)),document['getElementById'](_0x248cb0)[_0x1b9560(0x288)]['add']('open');}function closeAllSheets(){const _0x2f8912=a2_0x289135;document[_0x2f8912(0x24a)](_0x2f8912(0x2e7))[_0x2f8912(0x288)][_0x2f8912(0x22d)](_0x2f8912(0x289)),document[_0x2f8912(0x248)](_0x2f8912(0x25d))[_0x2f8912(0x21d)](_0x51629d=>_0x51629d[_0x2f8912(0x288)]['remove']('open'));}function openPatternEditor(){const _0x594a79=a2_0x289135;closeAllSheets(),document['getElementById'](_0x594a79(0x284))[_0x594a79(0x288)][_0x594a79(0x246)](_0x594a79(0x25e)),renderPatternEditor();}function closePatternEditor(){const _0x440c25=a2_0x289135;document[_0x440c25(0x24a)](_0x440c25(0x284))[_0x440c25(0x288)][_0x440c25(0x22d)](_0x440c25(0x25e));}function savePattern(){const _0x20aeb2=a2_0x289135;document[_0x20aeb2(0x24a)](_0x20aeb2(0x284))[_0x20aeb2(0x288)][_0x20aeb2(0x22d)](_0x20aeb2(0x25e)),reRenderBlocks(),DataManager[_0x20aeb2(0x2a6)](),DataManager[_0x20aeb2(0x236)](_0x20aeb2(0x256),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x4f05e3=a2_0x289135,_0x1d3163=document['getElementById'](_0x4f05e3(0x174));_0x1d3163[_0x4f05e3(0x299)]='';const _0x538369=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x403e31=document['createElement']('div');_0x403e31[_0x4f05e3(0x257)]=_0x4f05e3(0x29b),_0x1d3163[_0x4f05e3(0x1c0)](_0x403e31),_0x538369['forEach']((_0x2e5f7a,_0x333afe)=>{const _0x301d9d=_0x4f05e3,_0x59dba1=document[_0x301d9d(0x2a4)]('div');_0x59dba1[_0x301d9d(0x257)]=_0x301d9d(0x27c),_0x59dba1[_0x301d9d(0x299)]=_0x2e5f7a+'\x20<span\x20class=\x22arrow\x22>↓</span>',_0x59dba1['onclick']=()=>toggleColPattern(_0x333afe),_0x1d3163[_0x301d9d(0x1c0)](_0x59dba1);});for(let _0x2e0c59=0x0;_0x2e0c59<0x18;_0x2e0c59++){const _0x1e1918=document['createElement'](_0x4f05e3(0x28b));_0x1e1918[_0x4f05e3(0x257)]='pe-time-label',_0x1e1918[_0x4f05e3(0x299)]=_0x4f05e3(0x1d7)+String(_0x2e0c59)['padStart'](0x2,'0')+_0x4f05e3(0x2a7),_0x1e1918[_0x4f05e3(0x186)]=()=>toggleRowPattern(_0x2e0c59),_0x1d3163[_0x4f05e3(0x1c0)](_0x1e1918);for(let _0x23664f=0x0;_0x23664f<0x7;_0x23664f++){const _0x581f4f=document['createElement']('div'),_0x13a330=(availabilityPattern[_0x23664f]||[])[_0x4f05e3(0x26a)](_0x2e0c59),_0xbd0f5f=!_0x13a330;_0x581f4f[_0x4f05e3(0x257)]=_0x4f05e3(0x1d4)+(_0xbd0f5f?_0x4f05e3(0x289):''),_0x581f4f['onclick']=()=>toggleSinglePattern(_0x23664f,_0x2e0c59),_0x1d3163[_0x4f05e3(0x1c0)](_0x581f4f);}}}function toggleSinglePattern(_0x3096c7,_0x4f085b){const _0x517b21=a2_0x289135;if(!availabilityPattern[_0x3096c7])availabilityPattern[_0x3096c7]=[];const _0x3a9439=availabilityPattern[_0x3096c7],_0xb67c5e=_0x3a9439[_0x517b21(0x295)](_0x4f085b);_0xb67c5e===-0x1?_0x3a9439[_0x517b21(0x2a0)](_0x4f085b):_0x3a9439[_0x517b21(0x20a)](_0xb67c5e,0x1),renderPatternEditor();}function toggleColPattern(_0x25948e){const _0x43f3ce=a2_0x289135;if(!availabilityPattern[_0x25948e])availabilityPattern[_0x25948e]=[];const _0x314e7e=availabilityPattern[_0x25948e];_0x314e7e['length']===0x0?availabilityPattern[_0x25948e]=Array[_0x43f3ce(0x273)]({'length':0x18},(_0x1aa5e2,_0x5de15d)=>_0x5de15d):availabilityPattern[_0x25948e]=[],renderPatternEditor();}function toggleRowPattern(_0x53e1ab){const _0x558587=a2_0x289135;let _0x108da1=!![];for(let _0x427ee0=0x0;_0x427ee0<0x7;_0x427ee0++){if((availabilityPattern[_0x427ee0]||[])[_0x558587(0x26a)](_0x53e1ab)){_0x108da1=![];break;}}for(let _0x516c67=0x0;_0x516c67<0x7;_0x516c67++){if(!availabilityPattern[_0x516c67])availabilityPattern[_0x516c67]=[];const _0x1af7ba=availabilityPattern[_0x516c67][_0x558587(0x295)](_0x53e1ab);if(_0x108da1){if(_0x1af7ba===-0x1)availabilityPattern[_0x516c67][_0x558587(0x2a0)](_0x53e1ab);}else{if(_0x1af7ba!==-0x1)availabilityPattern[_0x516c67]['splice'](_0x1af7ba,0x1);}}renderPatternEditor();}function renderPCol(_0x14e5ca,_0x1d3b4c){const _0x395a08=a2_0x289135;_0x14e5ca[_0x395a08(0x299)]='';const _0x309f52=Math[_0x395a08(0x220)](_0x14e5ca['offsetLeft']);(availabilityPattern[_0x1d3b4c]||[])[_0x395a08(0x21d)](_0x2dd216=>{const _0x66a56c=_0x395a08,_0x20ff6c=document['createElement'](_0x66a56c(0x28b));_0x20ff6c[_0x66a56c(0x257)]=_0x66a56c(0x25f);const _0x376d57=_0x2dd216*GRID_H;_0x20ff6c[_0x66a56c(0x254)][_0x66a56c(0x2a5)]=_0x376d57+'px',_0x20ff6c[_0x66a56c(0x254)]['backgroundPosition']='-'+_0x309f52+_0x66a56c(0x1e8)+_0x376d57+'px',_0x20ff6c[_0x66a56c(0x186)]=_0x1bd595=>{_0x1bd595['stopPropagation'](),toggleSinglePattern(_0x1d3b4c,_0x2dd216);},_0x14e5ca['appendChild'](_0x20ff6c);});}function a2_0x5705(){const _0x1da438=['open','blocked-slot\x20stripe-bg','height','catch','status','value','header-','custom','single','getItem','[Series]\x20Skipped\x20','btn-status-toggle','includes','.day-col-header','cancelled','toLocaleDateString','(((.+)+)+)+$','rgba(255,255,255,0.05)','long','toFixed','random','from','Save\x20settings\x20error:',']\x20Failed:','anTotalStats','sessionSheet','update','mousemove','Этот\x20клиент\x20(','clients','pe-col-header','rgba(255,\x2069,\x2058,\x200.15)','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','Эту\x20и\x20будущие','send','sheetTitle','rgba(','getAttribute','patternEditor',')\x20уже\x20записан\x20на\x20это\x20время!','de-item','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','classList','active','off','div','clientY','uc_settings_cancel_window','doEventsList','delete','seriesId','setHeaderColor','</b>\x0a\x0a','scrollWidth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','indexOf','exceptions','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','var(--acc-orange)','innerHTML','Сделать\x20выходным','pe-corner','mousedown','disableVerticalSwipes','%\x20+\x202px)','scrollLeft','push','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','insertBefore','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','createElement','top','saveLocally',':00',')</b>\x20была\x20удалена\x20из\x20расписания.','#0a84ff','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','doBusyHours','timeLineBadge','uc_settings_v9','data-day-idx','gridColumns','btn-status-toggle\x20undo-mode','href','var(--acc-red)','as-button\x20danger\x20bold','10px\x2010px\x200\x200','#gridColumns\x20.day-column','findIndex','split','btn-primary\x20btn-danger','keys','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','batch_sync','3284010gROREe','day-off-overlay\x20stripe-bg','<b>⏰\x20Время:</b>\x20','POST','btnStatusToggle','anEnd','startsWith','Unknown','inpDate','filter','[Notify]\x20Error:\x20Text\x20generation\x20failed','daysHeaderTrack','ranges','location','1239848VSnsfm','Статус\x20сброшен','\x20из\x20','23:59','guest','setItem','mini','Максимум\x20100\x20за\x20раз','...','map','start','matrixViewport','slice','borderRadius','Ошибка\x20сохранения\x20настроек','block','none','\x20status-completed','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','offsetLeft','target','globalTimeLine','valid','firstChild','sort','ready','.pib-text','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','Групповая:\x20также\x20записан\x20','overlay','addEventListener','textContent','Только\x20эту','client-stat-card','rangeStartTime','494110WOFJgX','[Sync]\x20Loading\x20','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','Local\x20Save\x20Error','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','peGrid','10px','data','checked','asBtnOne','ru-RU','Ошибка\x20дат','getDate','length','getMinutes','asBtnSeries','toUpperCase','completed','cancel','headerMonth','find','end','doLoadPercent','onclick','width','\x20-\x20','vibrate','113226bcFxBy','log','Запись\x20на\x20<b>','recurringOptionContainer','getFullYear','substr','Новая\x20запись','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','72SAbVpf','<b>📅\x20Дата:</b>\x20','doDateHeader','month','touchend','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','inpNote','.day-column','calc(','Изменение\x20серии','floor','settingCancelWindow','warning','analyticsSheet','inpEnd','today','anCustomDates','[API\x20','Жду\x20вас\x20в\x20зале!\x20💪','closest','scrollTop','mouseup','rangeEndDate','min','save','Заполните\x20все\x20поля','createDocumentFragment','initDataUnsafe','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','мин,\x20Загрузка:\x20','\x20(пропущено:\x20','stat-','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','btnDelete','pattern','search','touchstart','rangeStartDate','error','.day-off-overlay','data-date','parse','actionSheet',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','show','anDonutCircle','appendChild','Telegram','sid',':\x20Client\x20already\x20booked','calendar','clientWidth','color','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','inpRecurring','</div><div\x20class=\x22ev-time\x22>','[Notify]\x20Detected\x20Client\x20ID:','[Notify]\x20Client\x20SWAP\x20detected','dateStr','left','anStart','getHours','setDate','2773590MKQOdj','Это\x20часть\x20серии\x20тренировок','note','pe-cell\x20','\x20—\x20','v9.0-BATCH-CALENDAR','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','done','setHours','6235587cluZhf','</div>','#fff','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:','touches','option','</div><div\x20class=\x22dch-num\x22>','scroll','\x20days','backgroundPosition','Синхронизировано','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','rgba(48,\x20209,\x2088,\x200.15)','text','px\x20-','seriesCountContainer','Минимум\x202\x20тренировки','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','#050505','Инфо','BackButton','total','toast','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','null','warn','<div\x20class=\x22dch-day\x22>','inpClient','expand','isArray','T00:00:00','undefined','[Notify]\x20Attempting\x20to\x20send:','Оффлайн\x20режим','clientId','max','Error\x20setting\x20color:','%\x20-\x204px)','rgba(100,100,100,0.5)','numeric','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','settingsSheet','00:00','<div\x20class=\x22ev-title\x22>','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','patternInfoBox','getMonth',']\x20Доступно:\x20','splice','flex','colIndex','dayOptionsSheet','name','<b>✅\x20','timeColumn','Ваша\x20тренировка\x20перенесена:\x0a\x0a','rangesList','zIndex','day-column\x20','all','borderColor','inpStart','now','background','setAttribute','strokeDashoffset','blocked-range-part\x20stripe-bg','forEach','week','then','round','complete','settings','var(--acc-green)','1472508SRHxUd','offsetWidth','Batch\x20Sync\x20OK','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','display','inpSeriesCount','cancel_window','client','doWorkHours','remove','onClick','14yPOhTo','</span>\x20/\x20','initData','time-label','Ошибка\x20сохранения\x20в\x20облако','100%','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','fetchFromServer','apply','rgba(255,\x20159,\x2010,\x200.3)','padStart','toast-notification\x20','[Notify]\x20Error:\x20sessionData\x20is\x20null','stringify','rangeEndTime','Удаление','syncLoad','charAt','getTime','toString','121MkpdnV','DOMContentLoaded','T23:59:59','add','planned','querySelectorAll','create','getElementById','ч,\x20Занято:\x20','btn-primary\x20btn-secondary','querySelector','1BMOzaN','Создана\x20серия:\x20','getDay','series','json','WebApp','style','mergeServerData','save_settings','className','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','.event-card','Local\x20Load\x20Error','init_load','setBackgroundColor','.sheet'];a2_0x5705=function(){return _0x1da438;};return a2_0x5705();}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x1071c5=a2_0x289135,_0x30432f=new Date(),_0x48609a=document[_0x1071c5(0x24a)](_0x1071c5(0x2df)),_0x182d01=document[_0x1071c5(0x24a)](_0x1071c5(0x2ac)),_0x52950e=(_0x30432f['getHours']()*0x3c+_0x30432f[_0x1071c5(0x17d)]())/0x3c*GRID_H;_0x48609a[_0x1071c5(0x254)]['top']=_0x52950e+'px',_0x48609a[_0x1071c5(0x254)]['display']='block',_0x182d01[_0x1071c5(0x2e9)]=String(_0x30432f[_0x1071c5(0x1cf)]())[_0x1071c5(0x239)](0x2,'0')+':'+String(_0x30432f[_0x1071c5(0x17d)]())['padStart'](0x2,'0'),_0x182d01[_0x1071c5(0x254)][_0x1071c5(0x228)]=_0x1071c5(0x2d9),_0x182d01[_0x1071c5(0x254)][_0x1071c5(0x2a5)]=_0x52950e+'px';}document[a2_0x289135(0x2e8)](a2_0x289135(0x244),init);function openDayOptions(_0x46df71){const _0x23e4a9=a2_0x289135;selectedDayForOptions=_0x46df71;const _0x23f9c1=new Date(_0x46df71),_0x3feaaf={'weekday':'long','day':_0x23e4a9(0x201),'month':_0x23e4a9(0x270),'year':_0x23e4a9(0x201)},_0x5ad92b=_0x23f9c1[_0x23e4a9(0x26d)]('ru-RU',_0x3feaaf);document[_0x23e4a9(0x24a)](_0x23e4a9(0x194))[_0x23e4a9(0x2e9)]=_0x5ad92b['charAt'](0x0)['toUpperCase']()+_0x5ad92b[_0x23e4a9(0x2d6)](0x1);let _0x1991d9=_0x23f9c1[_0x23e4a9(0x250)]()-0x1;if(_0x1991d9===-0x1)_0x1991d9=0x6;const _0x10aeae=availabilityPattern[_0x1991d9]||[],_0x3ce32a=0x18-_0x10aeae[_0x23e4a9(0x17c)],_0x42fdbb=_0x3ce32a*0x3c,_0x483fef=sessions['filter'](_0x17282a=>_0x17282a['dateStr']===_0x46df71&&_0x17282a[_0x23e4a9(0x262)]!==_0x23e4a9(0x26c));let _0x5b7c82=_0x483fef[_0x23e4a9(0x2d3)](_0x200703=>{const _0x4717d3=_0x23e4a9,[_0xea6ba,_0x98b13d]=_0x200703[_0x4717d3(0x2d4)]['split'](':')[_0x4717d3(0x2d3)](Number),[_0x5ea0be,_0x47f394]=_0x200703[_0x4717d3(0x184)][_0x4717d3(0x2b7)](':')[_0x4717d3(0x2d3)](Number);return[_0xea6ba*0x3c+_0x98b13d,_0x5ea0be*0x3c+_0x47f394];});_0x5b7c82[_0x23e4a9(0x2e2)]((_0x4c93f1,_0x17444d)=>_0x4c93f1[0x0]-_0x17444d[0x0]);let _0x33cae2=[];if(_0x5b7c82[_0x23e4a9(0x17c)]>0x0){let _0x2a39ae=_0x5b7c82[0x0];for(let _0x2a2cbf=0x1;_0x2a2cbf<_0x5b7c82[_0x23e4a9(0x17c)];_0x2a2cbf++){_0x5b7c82[_0x2a2cbf][0x0]<_0x2a39ae[0x1]?_0x2a39ae[0x1]=Math['max'](_0x2a39ae[0x1],_0x5b7c82[_0x2a2cbf][0x1]):(_0x33cae2[_0x23e4a9(0x2a0)](_0x2a39ae),_0x2a39ae=_0x5b7c82[_0x2a2cbf]);}_0x33cae2['push'](_0x2a39ae);}let _0x3aeb87=0x0;_0x33cae2[_0x23e4a9(0x21d)](_0x3f516e=>_0x3aeb87+=_0x3f516e[0x1]-_0x3f516e[0x0]),document[_0x23e4a9(0x24a)](_0x23e4a9(0x22c))['textContent']=formatMinsToHrs(_0x42fdbb),document[_0x23e4a9(0x24a)](_0x23e4a9(0x2ab))['textContent']=formatMinsToHrs(_0x3aeb87);const _0x21b41f=_0x42fdbb>0x0?Math[_0x23e4a9(0x220)](_0x3aeb87/_0x42fdbb*0x64):0x0,_0x21ebd4=document[_0x23e4a9(0x24a)](_0x23e4a9(0x185));_0x21ebd4[_0x23e4a9(0x2e9)]=_0x21b41f+'%';const _0xe2b214=document[_0x23e4a9(0x24a)]('statLoadCard');if(_0x21b41f>0x64)_0x21ebd4[_0x23e4a9(0x254)][_0x23e4a9(0x1c6)]='var(--acc-red)',_0xe2b214['style']['borderColor']='rgba(255,\x2069,\x2058,\x200.3)';else _0x21b41f>0x50?(_0x21ebd4['style'][_0x23e4a9(0x1c6)]=_0x23e4a9(0x298),_0xe2b214[_0x23e4a9(0x254)]['borderColor']=_0x23e4a9(0x238)):(_0x21ebd4[_0x23e4a9(0x254)][_0x23e4a9(0x1c6)]='var(--acc-green)',_0xe2b214[_0x23e4a9(0x254)][_0x23e4a9(0x216)]=_0x23e4a9(0x26f));const _0x2ab3e2=document[_0x23e4a9(0x24a)](_0x23e4a9(0x28e));_0x2ab3e2[_0x23e4a9(0x299)]='';_0x483fef[_0x23e4a9(0x17c)]===0x0?_0x2ab3e2[_0x23e4a9(0x299)]='<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>':(_0x483fef['sort']((_0x369461,_0x3b1007)=>_0x369461[_0x23e4a9(0x2d4)]['localeCompare'](_0x3b1007[_0x23e4a9(0x2d4)])),_0x483fef[_0x23e4a9(0x21d)](_0x1d3f8f=>{const _0x1194c0=_0x23e4a9,_0x37e069=clients[_0x1194c0(0x183)](_0x5836cd=>_0x5836cd[_0x1194c0(0x20e)]===_0x1d3f8f[_0x1194c0(0x22b)]),_0x4413cd=_0x37e069?_0x37e069[_0x1194c0(0x1c6)]:_0x1194c0(0x1dc),_0x1d16a3=_0x1d3f8f[_0x1194c0(0x262)]===_0x1194c0(0x180),_0x2dafcb=_0x1d16a3?_0x1194c0(0x2e5):'',_0x2f615b=document[_0x1194c0(0x2a4)](_0x1194c0(0x28b));_0x2f615b[_0x1194c0(0x257)]=_0x1194c0(0x286),_0x2f615b[_0x1194c0(0x254)]['borderLeftColor']=_0x4413cd,_0x2f615b[_0x1194c0(0x299)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>'+_0x1d3f8f[_0x1194c0(0x2d4)]+_0x1194c0(0x188)+_0x1d3f8f[_0x1194c0(0x184)]+_0x1194c0(0x2f1)+_0x1d3f8f[_0x1194c0(0x22b)]+_0x1194c0(0x1c7)+_0x2dafcb+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2ab3e2[_0x1194c0(0x1c0)](_0x2f615b);}));const _0x56ef8d=document['getElementById']('btnDayToggle'),_0x3f88d9=dateExceptions[_0x46df71]===_0x23e4a9(0x28a);_0x3f88d9?(_0x56ef8d[_0x23e4a9(0x2e9)]='Сделать\x20рабочим\x20днем',_0x56ef8d[_0x23e4a9(0x257)]=_0x23e4a9(0x24c),_0x56ef8d[_0x23e4a9(0x254)][_0x23e4a9(0x1c6)]=_0x23e4a9(0x223),_0x56ef8d['style'][_0x23e4a9(0x219)]=_0x23e4a9(0x1e6)):(_0x56ef8d[_0x23e4a9(0x2e9)]=_0x23e4a9(0x29a),_0x56ef8d[_0x23e4a9(0x257)]=_0x23e4a9(0x2b8),_0x56ef8d[_0x23e4a9(0x254)]['color']=_0x23e4a9(0x2b2),_0x56ef8d['style'][_0x23e4a9(0x219)]=_0x23e4a9(0x27d)),openSheet(_0x23e4a9(0x20d));}let currentAnPeriod=a2_0x289135(0x21e);function openAnalytics(){const _0x45df7e=a2_0x289135,_0x4e1514=document[_0x45df7e(0x24d)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x45df7e(0x21e),_0x4e1514),closeAllSheets(),openSheet(_0x45df7e(0x19f));}function setAnalyticsPeriod(_0x38542d,_0xd36a5e){const _0x49587b=a2_0x289135;currentAnPeriod=_0x38542d,document[_0x49587b(0x248)]('.period-switch\x20.p-btn')[_0x49587b(0x21d)](_0x2e7614=>_0x2e7614[_0x49587b(0x288)][_0x49587b(0x22d)](_0x49587b(0x289)));if(_0xd36a5e)_0xd36a5e[_0x49587b(0x288)][_0x49587b(0x246)](_0x49587b(0x289));const _0x4987ca=document[_0x49587b(0x24a)](_0x49587b(0x1a2));_0x4987ca[_0x49587b(0x254)]['display']=_0x38542d===_0x49587b(0x265)?_0x49587b(0x20b):_0x49587b(0x2da);const _0x5282a9=new Date();let _0xe112ec=new Date(),_0x538b49=new Date();if(_0x38542d===_0x49587b(0x21e))_0xe112ec=getStartOfWeek(_0x5282a9),_0x538b49=new Date(_0xe112ec),_0x538b49[_0x49587b(0x1d0)](_0x538b49['getDate']()+0x6);else{if(_0x38542d===_0x49587b(0x195))_0xe112ec=new Date(_0x5282a9[_0x49587b(0x18e)](),_0x5282a9[_0x49587b(0x208)](),0x1),_0x538b49=new Date(_0x5282a9[_0x49587b(0x18e)](),_0x5282a9[_0x49587b(0x208)]()+0x1,0x0);else{!document[_0x49587b(0x24a)](_0x49587b(0x1ce))[_0x49587b(0x263)]&&(document[_0x49587b(0x24a)](_0x49587b(0x1ce))['value']=getLocalDateStr(_0x5282a9),document['getElementById'](_0x49587b(0x2c1))[_0x49587b(0x263)]=getLocalDateStr(_0x5282a9));refreshAnalytics();return;}}document[_0x49587b(0x24a)]('anStart')['value']=getLocalDateStr(_0xe112ec),document[_0x49587b(0x24a)](_0x49587b(0x2c1))[_0x49587b(0x263)]=getLocalDateStr(_0x538b49),refreshAnalytics();}function refreshAnalytics(){const _0x22810b=a2_0x289135,_0x53d916=document[_0x22810b(0x24a)]('anStart')['value'],_0x23b9de=document[_0x22810b(0x24a)](_0x22810b(0x2c1))[_0x22810b(0x263)];if(!_0x53d916||!_0x23b9de)return;const _0x228baf=sessions[_0x22810b(0x2c5)](_0x338ff5=>_0x338ff5['dateStr']>=_0x53d916&&_0x338ff5[_0x22810b(0x1cc)]<=_0x23b9de&&_0x338ff5[_0x22810b(0x262)]!==_0x22810b(0x26c)),_0x5e9a9e=_0x228baf['length'],_0x32419b=_0x228baf['filter'](_0x5aba3c=>_0x5aba3c['status']===_0x22810b(0x180))[_0x22810b(0x17c)],_0x5cba52=_0x5e9a9e>0x0?Math['round'](_0x32419b/_0x5e9a9e*0x64):0x0;document['getElementById']('anPercent')[_0x22810b(0x2e9)]=_0x5cba52+'%',document['getElementById'](_0x22810b(0x276))[_0x22810b(0x2e9)]=_0x32419b+_0x22810b(0x2cc)+_0x5e9a9e+'\x20выполнено';const _0x860d3e=document[_0x22810b(0x24a)](_0x22810b(0x1bf)),_0x264f83=0x2*Math['PI']*0x23,_0x106644=_0x264f83-_0x5cba52/0x64*_0x264f83;_0x860d3e['style'][_0x22810b(0x21b)]=_0x106644;const _0x3b7c4f={};_0x228baf[_0x22810b(0x21d)](_0x3dde4a=>{const _0x43fe6b=_0x22810b;if(!_0x3b7c4f[_0x3dde4a[_0x43fe6b(0x22b)]]){const _0x298a2c=clients[_0x43fe6b(0x183)](_0x580371=>_0x580371[_0x43fe6b(0x20e)]===_0x3dde4a['client']);_0x3b7c4f[_0x3dde4a[_0x43fe6b(0x22b)]]={'total':0x0,'done':0x0,'color':_0x298a2c?_0x298a2c[_0x43fe6b(0x1c6)]:_0x43fe6b(0x1dc)};}_0x3b7c4f[_0x3dde4a[_0x43fe6b(0x22b)]][_0x43fe6b(0x1ef)]++;if(_0x3dde4a[_0x43fe6b(0x262)]===_0x43fe6b(0x180))_0x3b7c4f[_0x3dde4a[_0x43fe6b(0x22b)]]['done']++;});const _0x58bcfc=document[_0x22810b(0x24a)]('analyticsList');_0x58bcfc[_0x22810b(0x299)]='';const _0x40c482=Object['entries'](_0x3b7c4f)[_0x22810b(0x2e2)]((_0x228952,_0x3ea05a)=>_0x3ea05a[0x1][_0x22810b(0x1ef)]-_0x228952[0x1][_0x22810b(0x1ef)]);if(_0x40c482[_0x22810b(0x17c)]===0x0){_0x58bcfc[_0x22810b(0x299)]='<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>';return;}_0x40c482['forEach'](([_0x1d6b80,_0x2a946c])=>{const _0x400feb=_0x22810b,_0x4b74f7=Math[_0x400feb(0x220)](_0x2a946c['done']/_0x2a946c[_0x400feb(0x1ef)]*0x64),_0x5078bc=document['createElement'](_0x400feb(0x28b));_0x5078bc[_0x400feb(0x257)]=_0x400feb(0x2eb),_0x5078bc[_0x400feb(0x254)]['borderLeftColor']=_0x2a946c[_0x400feb(0x1c6)],_0x5078bc[_0x400feb(0x299)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>'+_0x1d6b80+_0x400feb(0x2a3)+_0x2a946c[_0x400feb(0x1d8)]+_0x400feb(0x230)+_0x2a946c[_0x400feb(0x1ef)]+_0x400feb(0x294)+_0x4b74f7+_0x400feb(0x297),_0x58bcfc[_0x400feb(0x1c0)](_0x5078bc);});}function formatMinsToHrs(_0x23423e){const _0x45bbba=a2_0x289135;if(_0x23423e===0x0)return'0';const _0x3e02bb=Math[_0x45bbba(0x19c)](_0x23423e/0x3c),_0x53e995=_0x23423e%0x3c;if(_0x53e995===0x0)return _0x3e02bb+'ч';return _0x3e02bb+'ч\x20'+_0x53e995+'м';}