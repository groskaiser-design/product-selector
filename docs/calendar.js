const a2_0x18a60d=a2_0x5e6b;(function(_0x32cf39,_0x1042cb){const _0x4845f2=a2_0x5e6b,_0x573b79=_0x32cf39();while(!![]){try{const _0x109d0e=parseInt(_0x4845f2(0x21c))/0x1*(-parseInt(_0x4845f2(0xea))/0x2)+-parseInt(_0x4845f2(0xf1))/0x3*(parseInt(_0x4845f2(0x229))/0x4)+parseInt(_0x4845f2(0xab))/0x5+-parseInt(_0x4845f2(0xc8))/0x6*(-parseInt(_0x4845f2(0x173))/0x7)+-parseInt(_0x4845f2(0x1e8))/0x8+parseInt(_0x4845f2(0x1e6))/0x9*(parseInt(_0x4845f2(0x1de))/0xa)+-parseInt(_0x4845f2(0x219))/0xb*(-parseInt(_0x4845f2(0x12f))/0xc);if(_0x109d0e===_0x1042cb)break;else _0x573b79['push'](_0x573b79['shift']());}catch(_0x578f6b){_0x573b79['push'](_0x573b79['shift']());}}}(a2_0x2447,0xc01c5),function initTMA(){const _0x46091e=a2_0x5e6b,_0x4b30a1=(function(){let _0x1e8f1e=!![];return function(_0x47efbf,_0x5ee48c){const _0x44b304=_0x1e8f1e?function(){const _0x38cff8=a2_0x5e6b;if(_0x5ee48c){const _0x51b13f=_0x5ee48c[_0x38cff8(0x17d)](_0x47efbf,arguments);return _0x5ee48c=null,_0x51b13f;}}:function(){};return _0x1e8f1e=![],_0x44b304;};}()),_0x57b4e8=_0x4b30a1(this,function(){const _0x589dc9=a2_0x5e6b;return _0x57b4e8['toString']()[_0x589dc9(0x203)](_0x589dc9(0x214))[_0x589dc9(0x123)]()[_0x589dc9(0x22a)](_0x57b4e8)[_0x589dc9(0x203)](_0x589dc9(0x214));});_0x57b4e8();try{const _0x2a5dea=window[_0x46091e(0x16d)]?.[_0x46091e(0x1c2)];if(!_0x2a5dea)return;_0x2a5dea[_0x46091e(0x1a7)](),_0x2a5dea[_0x46091e(0x13f)]();try{_0x2a5dea[_0x46091e(0x1c9)](_0x46091e(0x140)),_0x2a5dea['setBackgroundColor']&&_0x2a5dea[_0x46091e(0x16e)]('#050505');}catch(_0x3bc191){console[_0x46091e(0x230)](_0x46091e(0x1f6),_0x3bc191);}try{_0x2a5dea['BackButton']&&(_0x2a5dea['BackButton'][_0x46091e(0x17a)](),_0x2a5dea[_0x46091e(0x1ad)][_0x46091e(0x152)](),_0x2a5dea[_0x46091e(0x1ad)][_0x46091e(0x13d)](function(){const _0x532de3=_0x46091e;window[_0x532de3(0x189)]['href']=_0x532de3(0x1dc);}));}catch(_0x377098){console[_0x46091e(0x230)]('Error\x20setting\x20back\x20button:',_0x377098);}try{if(_0x2a5dea['disableVerticalSwipes'])_0x2a5dea[_0x46091e(0x1cb)]();}catch(_0x326f0f){}}catch(_0x2ae086){console[_0x46091e(0x1b0)]('Critical\x20TMA\x20Error:',_0x2ae086);}}());function isAdmin(){const _0x5576ca=a2_0x5e6b;try{const _0x193e37=Number(window[_0x5576ca(0x16d)]?.[_0x5576ca(0x1c2)]?.['initDataUnsafe']?.['user']?.['id']);return _0x193e37===0xbaf7174;}catch(_0x32a053){return![];}}const APP_VERSION=a2_0x18a60d(0x200),API_URL=a2_0x18a60d(0x12e),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS='uc_clients_v9',KEY_SESSIONS=a2_0x18a60d(0x127),KEY_SETTINGS=a2_0x18a60d(0x201);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x42419b=a2_0x18a60d;return window[_0x42419b(0x16d)]?.[_0x42419b(0x1c2)]?.[_0x42419b(0xff)]?.[_0x42419b(0x1e0)]?.['id']||_0x42419b(0x162);},'saveLocally'(){const _0x3438fc=a2_0x18a60d;try{localStorage['setItem'](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x3438fc(0xc7)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x3438fc(0xc7)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x27f3cc){console['error']('Local\x20Save\x20Error',_0x27f3cc);}},'loadLocal'(){const _0x1d6160=a2_0x18a60d;try{const _0x48ed7d=localStorage[_0x1d6160(0x114)](KEY_CLIENTS);if(_0x48ed7d)clients=JSON[_0x1d6160(0xf0)](_0x48ed7d);const _0x5b07ec=localStorage['getItem'](KEY_SESSIONS);if(_0x5b07ec)sessions=JSON[_0x1d6160(0xf0)](_0x5b07ec);const _0x85b244=localStorage[_0x1d6160(0x114)](KEY_SETTINGS);if(_0x85b244){const _0x2dadde=JSON['parse'](_0x85b244);if(_0x2dadde['pattern'])availabilityPattern=_0x2dadde[_0x1d6160(0xca)];if(_0x2dadde[_0x1d6160(0x19f)])dateExceptions=_0x2dadde[_0x1d6160(0x19f)];if(_0x2dadde[_0x1d6160(0x1c8)])specialRanges=_0x2dadde[_0x1d6160(0x1c8)];}else{for(let _0x154bc3=0x0;_0x154bc3<0x7;_0x154bc3++)availabilityPattern[_0x154bc3]=Array[_0x1d6160(0x206)]({'length':0xc},(_0x11a0d4,_0x16f467)=>_0x16f467+0x9);}}catch(_0x4352e5){console[_0x1d6160(0x1b0)]('Local\x20Load\x20Error',_0x4352e5);}},async 'fetchFromServer'(_0x4b4053,_0x539e15={}){const _0xfd8171=a2_0x18a60d,_0x554ad6=window[_0xfd8171(0x16d)]?.[_0xfd8171(0x1c2)],_0x50a551={'action':_0x4b4053,'init_data':_0x554ad6?.[_0xfd8171(0x20f)]||'',..._0x539e15};try{const _0x493666=await fetch(API_URL,{'method':_0xfd8171(0x11b),'headers':{'Content-Type':_0xfd8171(0x13b)},'body':JSON[_0xfd8171(0x10f)](_0x50a551)}),_0x298c53=await _0x493666[_0xfd8171(0x10c)]();if(!_0x298c53['ok'])throw new Error(_0x298c53[_0xfd8171(0x1b0)]||'Server\x20Error');return _0x298c53['data'];}catch(_0x2c83d7){console[_0xfd8171(0x1b0)](_0xfd8171(0x1e3)+_0x4b4053+']\x20Failed:',_0x2c83d7);throw _0x2c83d7;}},async 'syncLoad'(){const _0x54f5d9=a2_0x18a60d,_0x3bda8a=new Date(),_0x5e73da=_0x3bda8a[_0x54f5d9(0x226)]()+'-'+String(_0x3bda8a['getMonth']()+0x1)['padStart'](0x2,'0'),_0x24d134=new Date(_0x3bda8a);_0x24d134[_0x54f5d9(0x1fa)](_0x3bda8a['getMonth']()+0x1);const _0x515199=_0x24d134[_0x54f5d9(0x226)]()+'-'+String(_0x24d134['getMonth']()+0x1)['padStart'](0x2,'0'),_0x58d47e=Date[_0x54f5d9(0xfe)]();console[_0x54f5d9(0x230)](_0x54f5d9(0xc2)+_0x5e73da+',\x20'+_0x515199+'...');try{const [_0x3ad1c1,_0x19a1f7]=await Promise[_0x54f5d9(0x14a)]([this[_0x54f5d9(0x116)]('init_load',{'month_str':_0x5e73da}),this[_0x54f5d9(0x116)](_0x54f5d9(0xd6),{'month_str':_0x515199})]);if(lastUserActionTime>_0x58d47e)return console[_0x54f5d9(0xa8)](_0x54f5d9(0x174)),![];return this[_0x54f5d9(0x18a)](_0x3ad1c1,_0x5e73da),this['mergeServerData'](_0x19a1f7,_0x515199),this['saveLocally'](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x1cd4ba){console['error'](_0x1cd4ba);throw _0x1cd4ba;}},'mergeServerData'(_0x481ac4,_0x403865){const _0x3e9a4e=a2_0x18a60d;if(!_0x481ac4)return;_0x481ac4['clients']&&Array[_0x3e9a4e(0x107)](_0x481ac4['clients'])&&(clients=_0x481ac4['clients']);if(_0x481ac4[_0x3e9a4e(0xc4)]){if(_0x481ac4[_0x3e9a4e(0xc4)][_0x3e9a4e(0xca)])availabilityPattern=_0x481ac4[_0x3e9a4e(0xc4)][_0x3e9a4e(0xca)];if(_0x481ac4['settings'][_0x3e9a4e(0x19f)])dateExceptions=_0x481ac4[_0x3e9a4e(0xc4)][_0x3e9a4e(0x19f)];if(_0x481ac4['settings']['ranges'])specialRanges=_0x481ac4[_0x3e9a4e(0xc4)][_0x3e9a4e(0x1c8)];if(_0x481ac4[_0x3e9a4e(0xc4)][_0x3e9a4e(0x138)]){localStorage[_0x3e9a4e(0xc7)](_0x3e9a4e(0xe9),_0x481ac4['settings']['cancel_window']);const _0x533212=document[_0x3e9a4e(0x1c3)]('settingCancelWindow');if(_0x533212)_0x533212[_0x3e9a4e(0x1bb)]=_0x481ac4[_0x3e9a4e(0xc4)][_0x3e9a4e(0x138)];}}_0x481ac4[_0x3e9a4e(0xf9)]&&(sessions=sessions[_0x3e9a4e(0x15c)](_0x1f5607=>!_0x1f5607[_0x3e9a4e(0x130)][_0x3e9a4e(0xfd)](_0x403865)),Object[_0x3e9a4e(0x179)](_0x481ac4[_0x3e9a4e(0xf9)])[_0x3e9a4e(0x16f)](_0x5cdae0=>{const _0xe070a4=_0x3e9a4e,_0x2fc3c9=_0x481ac4[_0xe070a4(0xf9)][_0x5cdae0];_0x2fc3c9['forEach'](_0x132a99=>{const _0x12aee6=_0xe070a4,_0x4d4e84=clients[_0x12aee6(0x175)](_0x9ae922=>String(_0x9ae922['id'])===String(_0x132a99['c']));sessions[_0x12aee6(0x106)]({'id':_0x132a99['i'],'clientId':_0x132a99['c'],'client':_0x4d4e84?_0x4d4e84[_0x12aee6(0x170)]:'Unknown','dateStr':_0x403865+'-'+_0x5cdae0[_0x12aee6(0xbb)](0x2,'0'),'start':_0x132a99['s'],'end':_0x132a99['e'],'status':_0x132a99['st']||_0x12aee6(0xd1),'note':_0x132a99['n']||'','seriesId':_0x132a99[_0x12aee6(0xcd)]||null});});}));},async 'syncBatch'(_0x1384b1){const _0x396326=a2_0x18a60d,_0x402c2b=[...new Set(_0x1384b1)],_0x1ab2d7=_0x402c2b[_0x396326(0x14c)](_0x5928c1=>{const _0x598f2c=_0x396326,_0x593a06=sessions['filter'](_0x35b3c7=>_0x35b3c7[_0x598f2c(0x130)]===_0x5928c1&&_0x35b3c7[_0x598f2c(0x12b)]!==_0x598f2c(0xd3)),_0x42391e=_0x593a06[_0x598f2c(0x14c)](_0x16beb2=>({'i':_0x16beb2['id'],'c':_0x16beb2['clientId'],'s':_0x16beb2[_0x598f2c(0x1e5)],'e':_0x16beb2[_0x598f2c(0x137)],'st':_0x16beb2[_0x598f2c(0x12b)],'n':_0x16beb2['note'],'sid':_0x16beb2[_0x598f2c(0x155)]}));return{'date':_0x5928c1,'day_data':_0x42391e};});if(_0x1ab2d7[_0x396326(0x1f1)]===0x0)return;console['log'](_0x396326(0x19c)+_0x1ab2d7[_0x396326(0x1f1)]+_0x396326(0x165)),await this['fetchFromServer'](_0x396326(0xb0),{'changes':_0x1ab2d7});}};async function init(){const _0x251c42=a2_0x18a60d;DataManager[_0x251c42(0xb9)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x251c42(0x1c3)](_0x251c42(0x11a))[_0x251c42(0x221)](_0x251c42(0x1ab),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x251c42(0x1ea)]()[_0x251c42(0xac)](()=>{const _0x3b608a=_0x251c42;showToast(_0x3b608a(0x158),!![]);})[_0x251c42(0x1b6)](_0x3e2e7b=>{const _0x10fc54=_0x251c42;showToast(_0x10fc54(0xbe),![]);});}function generateId(){const _0x13395a=a2_0x18a60d;return Date['now']()[_0x13395a(0x123)](0x24)+Math[_0x13395a(0x125)]()[_0x13395a(0x123)](0x24)[_0x13395a(0x22e)](0x2,0x5);}function toggleSeriesInput(){const _0x443ac7=a2_0x18a60d,_0x983582=document[_0x443ac7(0x1c3)](_0x443ac7(0x13c))[_0x443ac7(0x193)],_0x5c78db=document[_0x443ac7(0x1c3)](_0x443ac7(0x1a3));_0x5c78db[_0x443ac7(0x1e9)]['display']=_0x983582?_0x443ac7(0xb1):_0x443ac7(0x104);const _0x93d0be=document[_0x443ac7(0x1c3)](_0x443ac7(0x18c));_0x93d0be[_0x443ac7(0x1e9)]['borderRadius']=_0x983582?_0x443ac7(0xf7):_0x443ac7(0x10b);}function openAddSession(_0x49b438){const _0x487205=a2_0x18a60d;editingId=null,populateClientSelect(),document[_0x487205(0x1c3)](_0x487205(0x103))[_0x487205(0xc9)]=_0x487205(0x209),document[_0x487205(0x1c3)](_0x487205(0x148))[_0x487205(0x1e9)][_0x487205(0x1fb)]=_0x487205(0x104),document[_0x487205(0x1c3)](_0x487205(0xdb))[_0x487205(0x1e9)]['display']=_0x487205(0x104);const _0x4b5394=document[_0x487205(0x1c3)](_0x487205(0x18c)),_0x275ba9=document[_0x487205(0x1c3)](_0x487205(0x1a3));_0x4b5394[_0x487205(0x1e9)][_0x487205(0x1fb)]=_0x487205(0x182),_0x4b5394[_0x487205(0x1e9)][_0x487205(0x1be)]=_0x487205(0x10b),document[_0x487205(0x1c3)](_0x487205(0x13c))['checked']=![],document[_0x487205(0x1c3)](_0x487205(0x16b))[_0x487205(0x1bb)]=0x4,_0x275ba9[_0x487205(0x1e9)][_0x487205(0x1fb)]=_0x487205(0x104),document['getElementById'](_0x487205(0xf3))[_0x487205(0x1bb)]=getLocalDateStr(_0x49b438),updateDateDisplay();const _0x1951bd=_0x49b438[_0x487205(0xec)]();document[_0x487205(0x1c3)]('inpStart')[_0x487205(0x1bb)]=String(_0x1951bd)[_0x487205(0xbb)](0x2,'0')+_0x487205(0x136),document['getElementById'](_0x487205(0x185))[_0x487205(0x1bb)]=String(_0x1951bd+0x1)['padStart'](0x2,'0')+_0x487205(0x136),openSheet(_0x487205(0x192));}function openEdit(_0x2451f9){const _0x27602e=a2_0x18a60d;editingId=_0x2451f9['id'],populateClientSelect(),document[_0x27602e(0x1c3)](_0x27602e(0x103))[_0x27602e(0xc9)]='Редактировать',document[_0x27602e(0x1c3)]('btnDelete')[_0x27602e(0x1e9)]['display']=_0x27602e(0xb1);const _0x2c37dc=document[_0x27602e(0x1c3)](_0x27602e(0xdb));_0x2c37dc['style'][_0x27602e(0x1fb)]='flex';_0x2451f9['status']===_0x27602e(0x224)?(_0x2c37dc['className']=_0x27602e(0x172),_0x2c37dc[_0x27602e(0x112)]=_0x27602e(0x1a9)):(_0x2c37dc[_0x27602e(0x188)]='btn-status-toggle',_0x2c37dc[_0x27602e(0x112)]=_0x27602e(0x202));const _0x2838fa=!!_0x2451f9[_0x27602e(0x155)];document[_0x27602e(0x1c3)](_0x27602e(0x18c))[_0x27602e(0x1e9)][_0x27602e(0x1fb)]=_0x27602e(0x104),document[_0x27602e(0x1c3)]('seriesCountContainer')['style'][_0x27602e(0x1fb)]=_0x27602e(0x104),_0x2838fa?(document[_0x27602e(0x1c3)]('patternInfoBox')[_0x27602e(0x1e9)][_0x27602e(0x1fb)]=_0x27602e(0x182),document[_0x27602e(0x1c3)](_0x27602e(0x109))[_0x27602e(0x131)](_0x27602e(0x129))[_0x27602e(0xc9)]=_0x27602e(0x215)):document[_0x27602e(0x1c3)](_0x27602e(0x109))[_0x27602e(0x1e9)][_0x27602e(0x1fb)]=_0x27602e(0x104),document[_0x27602e(0x1c3)]('inpClient')[_0x27602e(0x1bb)]=_0x2451f9[_0x27602e(0x227)],document['getElementById']('inpDate')[_0x27602e(0x1bb)]=_0x2451f9[_0x27602e(0x130)],document[_0x27602e(0x1c3)](_0x27602e(0xb4))[_0x27602e(0x1bb)]=_0x2451f9[_0x27602e(0x1e5)],document[_0x27602e(0x1c3)]('inpEnd')['value']=_0x2451f9[_0x27602e(0x137)],document['getElementById'](_0x27602e(0x159))[_0x27602e(0x1bb)]=_0x2451f9[_0x27602e(0xd0)]||'',updateDateDisplay(),openSheet('sessionSheet');}async function trySaveSession(){const _0x5998ff=a2_0x18a60d,_0xee075b=document[_0x5998ff(0x1c3)](_0x5998ff(0x1db))[_0x5998ff(0x1bb)],_0xcca663=document[_0x5998ff(0x1c3)](_0x5998ff(0xf3))[_0x5998ff(0x1bb)],_0x1e0583=document[_0x5998ff(0x1c3)]('inpStart')[_0x5998ff(0x1bb)],_0x1bb44a=document[_0x5998ff(0x1c3)](_0x5998ff(0x185))[_0x5998ff(0x1bb)],_0x2e0764=document[_0x5998ff(0x1c3)](_0x5998ff(0x159))[_0x5998ff(0x1bb)],_0x416fdb=document['getElementById']('inpRecurring')[_0x5998ff(0x193)];let _0x19479b=0x4;if(_0x416fdb){const _0x4cf1d1=parseInt(document[_0x5998ff(0x1c3)](_0x5998ff(0x16b))[_0x5998ff(0x1bb)]);if(!_0x4cf1d1||_0x4cf1d1<0x2){showToast(_0x5998ff(0xc0),![]);return;}if(_0x4cf1d1>0x64){showToast(_0x5998ff(0x20d),![]);return;}_0x19479b=_0x4cf1d1;}const _0x7f38a2=clients[_0x5998ff(0x175)](_0x21938b=>_0x21938b['name']===_0xee075b);if(!_0x7f38a2){showToast(_0x5998ff(0x19b),![]);return;}const _0x38856c=validateAppointment(_0xcca663,_0x1e0583,_0x1bb44a,editingId,_0x7f38a2['id']);if(!_0x38856c['valid']){showToast(_0x38856c[_0x5998ff(0xde)],![]);return;}_0x38856c[_0x5998ff(0x19a)]&&showToast(_0x38856c['warning'],![]);const _0x2f4183={'client':_0xee075b,'clientId':_0x7f38a2['id'],'start':_0x1e0583,'end':_0x1bb44a,'note':_0x2e0764,'status':_0x5998ff(0xd1)},_0x576430=editingId?sessions['find'](_0x316efd=>_0x316efd['id']===editingId):null;if(_0x576430&&_0x576430[_0x5998ff(0x155)]){tempSessionData={..._0x2f4183,'dateStr':_0xcca663,'id':editingId,'seriesId':_0x576430[_0x5998ff(0x155)]},openActionSheet(_0x5998ff(0x146));return;}let _0x2169e0=null;if(!editingId)_0x2169e0=_0x5998ff(0xe5);else{if(_0x576430){if(String(_0x576430[_0x5998ff(0x1c6)])!==String(_0x7f38a2['id']))console[_0x5998ff(0x230)](_0x5998ff(0x1b8)),NotificationManager[_0x5998ff(0x207)]('cancel',_0x576430),_0x2169e0=_0x5998ff(0xe5);else(_0x576430[_0x5998ff(0x1e5)]!==_0x1e0583||_0x576430[_0x5998ff(0x137)]!==_0x1bb44a||_0x576430[_0x5998ff(0x130)]!==_0xcca663)&&(_0x2169e0=_0x5998ff(0xe2));}}if(!editingId&&_0x416fdb){createBatchSeries(_0x2f4183,_0xcca663,_0x19479b),NotificationManager['send'](_0x5998ff(0xe5),{..._0x2f4183,'dateStr':_0xcca663});return;}lastUserActionTime=Date[_0x5998ff(0xfe)]();const _0x24a5dd={..._0x2f4183,'dateStr':_0xcca663,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x24a5dd),_0x2169e0&&NotificationManager['send'](_0x2169e0,_0x24a5dd);}function toggleSessionStatus(){const _0x4b3d88=a2_0x18a60d;lastUserActionTime=Date[_0x4b3d88(0xfe)]();const _0x42b75e=sessions[_0x4b3d88(0x175)](_0x2c840e=>_0x2c840e['id']===editingId);if(!_0x42b75e)return;const _0x5c702a=_0x42b75e['status']==='completed'?_0x4b3d88(0xd1):_0x4b3d88(0x224);_0x42b75e['status']=_0x5c702a,saveSingleSession(_0x42b75e),_0x5c702a===_0x4b3d88(0x224)&&NotificationManager[_0x4b3d88(0x207)](_0x4b3d88(0x19e),_0x42b75e),showToast(_0x5c702a===_0x4b3d88(0x224)?_0x4b3d88(0x21a):_0x4b3d88(0x149),!![]);}function validateAppointment(_0x42f8a5,_0x188c07,_0xe7c503,_0x25d299,_0x331f8c){const _0x1d9f90=a2_0x18a60d,[_0x3b316c,_0x174311]=_0x188c07[_0x1d9f90(0x233)](':')[_0x1d9f90(0x14c)](Number),[_0x60c85c,_0x24da2d]=_0xe7c503[_0x1d9f90(0x233)](':')[_0x1d9f90(0x14c)](Number),_0x37bc63=_0x3b316c*0x3c+_0x174311,_0x4b0c3e=_0x60c85c*0x3c+_0x24da2d,_0x54bf07=String(_0x331f8c);let _0x403c35=![],_0x4fb85f='';for(let _0x140821 of sessions){if(_0x140821[_0x1d9f90(0x130)]!==_0x42f8a5)continue;if(_0x140821[_0x1d9f90(0x12b)]==='cancelled')continue;if(_0x25d299&&String(_0x140821['id'])===String(_0x25d299))continue;const [_0x18256a,_0x155cb2]=_0x140821['start']['split'](':')[_0x1d9f90(0x14c)](Number),[_0x4fe7eb,_0x116821]=_0x140821[_0x1d9f90(0x137)][_0x1d9f90(0x233)](':')[_0x1d9f90(0x14c)](Number),_0xed4791=_0x18256a*0x3c+_0x155cb2,_0x5bfba1=_0x4fe7eb*0x3c+_0x116821;if(Math[_0x1d9f90(0xdf)](_0x37bc63,_0xed4791)<Math['min'](_0x4b0c3e,_0x5bfba1)){if(_0x140821[_0x1d9f90(0x1c6)]&&String(_0x140821['clientId'])===_0x54bf07)return{'valid':![],'msg':_0x1d9f90(0x1c4)+_0x140821[_0x1d9f90(0x227)]+')\x20уже\x20записан\x20на\x20это\x20время!'};_0x403c35=!![],_0x4fb85f=_0x140821[_0x1d9f90(0x227)];}}if(_0x403c35)return{'valid':!![],'warning':_0x1d9f90(0x14b)+_0x4fb85f};return{'valid':!![]};}function saveSingleSession(_0x10d918){const _0x1105cc=a2_0x18a60d;if(editingId){const _0x220708=sessions[_0x1105cc(0x1bd)](_0x338ea4=>_0x338ea4['id']===editingId);if(_0x220708!==-0x1)sessions[_0x220708]=_0x10d918;}else sessions[_0x1105cc(0x106)](_0x10d918);afterSaveAction([_0x10d918[_0x1105cc(0x130)]]);}function createBatchSeries(_0x4d32b6,_0x1da9ad,_0x47141f){const _0x44c67e=a2_0x18a60d,_0x38965b=generateId(),_0x2fde04=[],_0x3e160e=[];let _0x1caa59=0x0,_0x2b3520=new Date(_0x1da9ad);for(let _0xdd6934=0x0;_0xdd6934<_0x47141f;_0xdd6934++){const _0x52be07=getLocalDateStr(_0x2b3520),_0x1ee139=validateAppointment(_0x52be07,_0x4d32b6[_0x44c67e(0x1e5)],_0x4d32b6['end'],null,_0x4d32b6[_0x44c67e(0x1c6)]);if(!_0x1ee139[_0x44c67e(0x145)])console['log']('[Series]\x20Skipped\x20'+_0x52be07+_0x44c67e(0xc3)),_0x1caa59++;else{const _0x49e377={..._0x4d32b6,'id':generateId(),'dateStr':_0x52be07,'seriesId':_0x38965b};_0x3e160e[_0x44c67e(0x106)](_0x49e377),_0x2fde04['push'](_0x52be07);}_0x2b3520[_0x44c67e(0x151)](_0x2b3520[_0x44c67e(0xf4)]()+0x7);}if(_0x3e160e[_0x44c67e(0x1f1)]===0x0){showToast(_0x44c67e(0x101),![]);return;}sessions[_0x44c67e(0x106)](..._0x3e160e),lastUserActionTime=Date[_0x44c67e(0xfe)]();let _0x56e638=_0x44c67e(0x142)+_0x3e160e[_0x44c67e(0x1f1)];_0x1caa59>0x0&&(_0x56e638+=_0x44c67e(0x180)+_0x1caa59+')'),showToast(_0x56e638,!![]),afterSaveAction(_0x2fde04);}function updateSeriesBatch(_0x103f16,_0x617688){const _0x542050=a2_0x18a60d,_0x57a1ea=[],_0x2b9e24=_0x617688[_0x542050(0x155)];if(_0x103f16==='single'){const _0x500882={..._0x617688,'seriesId':null},_0x5dac28=sessions[_0x542050(0x1bd)](_0x2131fd=>_0x2131fd['id']===_0x617688['id']);if(_0x5dac28!==-0x1)sessions[_0x5dac28]=_0x500882;_0x57a1ea[_0x542050(0x106)](_0x500882[_0x542050(0x130)]);}else{if(_0x103f16===_0x542050(0x11e)){const _0x2b41f1=_0x617688[_0x542050(0x130)];sessions[_0x542050(0x16f)]((_0x3121ac,_0x4b86ff)=>{const _0x1bc589=_0x542050;_0x3121ac[_0x1bc589(0x155)]===_0x2b9e24&&_0x3121ac[_0x1bc589(0x130)]>=_0x2b41f1&&(sessions[_0x4b86ff]={...sessions[_0x4b86ff],'start':_0x617688['start'],'end':_0x617688['end'],'note':_0x617688['note'],'client':_0x617688[_0x1bc589(0x227)],'clientId':_0x617688['clientId']},_0x57a1ea[_0x1bc589(0x106)](_0x3121ac[_0x1bc589(0x130)]));});}}afterSaveAction(_0x57a1ea);}function tryDeleteSession(){const _0x149a7f=a2_0x18a60d,_0x105b83=sessions['find'](_0x259407=>_0x259407['id']===editingId);if(!_0x105b83)return;_0x105b83[_0x149a7f(0x155)]?openActionSheet(_0x149a7f(0xbf)):commitDelete(_0x149a7f(0xaa),_0x105b83);}function commitDelete(_0x193b81,_0x14cc1f){const _0x4ddc4d=a2_0x18a60d;lastUserActionTime=Date[_0x4ddc4d(0xfe)](),NotificationManager['send'](_0x4ddc4d(0x120),_0x14cc1f);const _0x156cc3=[];if(_0x193b81===_0x4ddc4d(0xaa))sessions=sessions[_0x4ddc4d(0x15c)](_0x405930=>_0x405930['id']!==_0x14cc1f['id']),_0x156cc3[_0x4ddc4d(0x106)](_0x14cc1f[_0x4ddc4d(0x130)]);else{if(_0x193b81==='series'){const _0x292b65=_0x14cc1f[_0x4ddc4d(0x130)],_0x3e74f2=_0x14cc1f[_0x4ddc4d(0x155)];sessions[_0x4ddc4d(0x16f)](_0x577160=>{const _0x41bc21=_0x4ddc4d;_0x577160[_0x41bc21(0x155)]===_0x3e74f2&&_0x577160[_0x41bc21(0x130)]>=_0x292b65&&_0x156cc3[_0x41bc21(0x106)](_0x577160[_0x41bc21(0x130)]);}),sessions=sessions[_0x4ddc4d(0x15c)](_0x56e624=>!(_0x56e624[_0x4ddc4d(0x155)]===_0x3e74f2&&_0x56e624[_0x4ddc4d(0x130)]>=_0x292b65));}}afterSaveAction(_0x156cc3);}function afterSaveAction(_0x5c9bf3){const _0x1a0c78=a2_0x18a60d;DataManager[_0x1a0c78(0x22f)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x1a0c78(0x14e)](_0x5c9bf3)[_0x1a0c78(0xac)](()=>console[_0x1a0c78(0x230)]('Batch\x20Sync\x20OK'))[_0x1a0c78(0x1b6)](_0x13bbeb=>showToast(_0x1a0c78(0x176),![]));}const NotificationManager={'formatDate'(_0x21d5eb){const _0x31345c=a2_0x18a60d,_0x3bcaba=new Date(_0x21d5eb),_0x48d112={'weekday':_0x31345c(0x1ba),'day':_0x31345c(0x1cd),'month':'long'};let _0x1e9cb6=_0x3bcaba[_0x31345c(0x210)](_0x31345c(0xc1),_0x48d112);return _0x1e9cb6[_0x31345c(0x18d)](0x0)[_0x31345c(0x235)]()+_0x1e9cb6[_0x31345c(0x234)](0x1);},'getText'(_0x258f83,_0x2918b2){const _0x3dad49=a2_0x18a60d,_0x3d6e7c=this[_0x3dad49(0xe3)](_0x2918b2[_0x3dad49(0x130)]);switch(_0x258f83){case _0x3dad49(0xe5):return _0x3dad49(0x222)+(_0x3dad49(0x1c7)+_0x3d6e7c+'\x0a')+(_0x3dad49(0x1a0)+_0x2918b2[_0x3dad49(0x1e5)]+'\x20—\x20'+_0x2918b2[_0x3dad49(0x137)]+'\x0a\x0a')+_0x3dad49(0xd4);case _0x3dad49(0xe2):return _0x3dad49(0x220)+_0x3dad49(0x1d5)+(_0x3dad49(0x128)+_0x2918b2[_0x3dad49(0x1e5)]+'\x20—\x20'+_0x2918b2[_0x3dad49(0x137)]+_0x3dad49(0x1a4))+(_0x3dad49(0x1c7)+_0x3d6e7c);case _0x3dad49(0x120):return _0x3dad49(0x204)+(_0x3dad49(0x164)+_0x3d6e7c+'\x20('+_0x2918b2[_0x3dad49(0x1e5)]+')</b>\x20была\x20удалена\x20из\x20расписания.');case _0x3dad49(0x19e):return _0x3dad49(0x20e)+_0x3dad49(0x161)+_0x3dad49(0x228);default:return'';}},async 'send'(_0x28ada8,_0x5cd51f){const _0x3769ec=a2_0x18a60d;console[_0x3769ec(0x230)](_0x3769ec(0x21f),_0x28ada8,_0x5cd51f);if(!_0x5cd51f){console[_0x3769ec(0x1b0)](_0x3769ec(0xe0));return;}const _0x26a635=String(_0x5cd51f['clientId']);console['log']('[Notify]\x20Detected\x20Client\x20ID:',_0x26a635);if(!_0x5cd51f['clientId']||_0x26a635===_0x3769ec(0x1b5)||_0x26a635===_0x3769ec(0x1a1)){console[_0x3769ec(0x1b0)](_0x3769ec(0xd8));if(_0x5cd51f['client']){const _0x52aa26=clients['find'](_0x4f6b72=>_0x4f6b72['name']===_0x5cd51f[_0x3769ec(0x227)]);if(_0x52aa26)return console[_0x3769ec(0x230)](_0x3769ec(0x1f9),_0x52aa26['id']),this['send'](_0x28ada8,{..._0x5cd51f,'clientId':_0x52aa26['id']});}return;}if(_0x26a635[_0x3769ec(0x1f1)]<0x5){console[_0x3769ec(0xa8)](_0x3769ec(0x11f),_0x26a635);return;}const _0x1f434d=this['getText'](_0x28ada8,_0x5cd51f);if(!_0x1f434d){console[_0x3769ec(0x1b0)]('[Notify]\x20Error:\x20Text\x20generation\x20failed');return;}console['log'](_0x3769ec(0x178)+_0x26a635+'...'),DataManager[_0x3769ec(0x116)](_0x3769ec(0x20a),{'chatId':_0x26a635,'text':_0x1f434d})['then'](_0x12ffc3=>console[_0x3769ec(0x230)](_0x3769ec(0x144),_0x12ffc3))['catch'](_0x2d56d3=>console[_0x3769ec(0x1b0)](_0x3769ec(0xfa),_0x2d56d3));}};function getLocalDateStr(_0x4594c1){const _0x1103f4=a2_0x18a60d,_0x124f9b=_0x4594c1[_0x1103f4(0x226)](),_0x3aa1e0=String(_0x4594c1[_0x1103f4(0x1ce)]()+0x1)[_0x1103f4(0xbb)](0x2,'0'),_0x441aee=String(_0x4594c1[_0x1103f4(0xf4)]())[_0x1103f4(0xbb)](0x2,'0');return _0x124f9b+'-'+_0x3aa1e0+'-'+_0x441aee;}function getDateStr(_0x25934f){const _0x3a235e=a2_0x18a60d,_0x9e8f5f=new Date();return _0x9e8f5f['setDate'](_0x9e8f5f[_0x3a235e(0xf4)]()+_0x25934f),getLocalDateStr(_0x9e8f5f);}function getStartOfWeek(_0x3694ba){const _0x5bbf1c=a2_0x18a60d,_0x423c99=new Date(_0x3694ba),_0xac49c4=_0x423c99[_0x5bbf1c(0x183)](),_0x428a70=_0x423c99[_0x5bbf1c(0xf4)]()-_0xac49c4+(_0xac49c4===0x0?-0x6:0x1);return _0x423c99[_0x5bbf1c(0x151)](_0x428a70),_0x423c99[_0x5bbf1c(0xd5)](0x0,0x0,0x0,0x0),_0x423c99;}function hexToRgba(_0x37bc1e,_0x3b1352){const _0xf2f253=a2_0x18a60d;if(!_0x37bc1e)return _0xf2f253(0x1e2);let _0x4378e8=0x0,_0x182298=0x0,_0x1d2837=0x0;if(_0x37bc1e[_0xf2f253(0x1f1)]===0x4)_0x4378e8='0x'+_0x37bc1e[0x1]+_0x37bc1e[0x1],_0x182298='0x'+_0x37bc1e[0x2]+_0x37bc1e[0x2],_0x1d2837='0x'+_0x37bc1e[0x3]+_0x37bc1e[0x3];else _0x37bc1e[_0xf2f253(0x1f1)]===0x7&&(_0x4378e8='0x'+_0x37bc1e[0x1]+_0x37bc1e[0x2],_0x182298='0x'+_0x37bc1e[0x3]+_0x37bc1e[0x4],_0x1d2837='0x'+_0x37bc1e[0x5]+_0x37bc1e[0x6]);return _0xf2f253(0x225)+ +_0x4378e8+',\x20'+ +_0x182298+',\x20'+ +_0x1d2837+',\x20'+_0x3b1352+')';}function renderTimeColumn(){const _0x1b497f=a2_0x18a60d,_0x293715=document[_0x1b497f(0x1c3)](_0x1b497f(0x1b9)),_0xb03fc0=document[_0x1b497f(0x1c3)](_0x1b497f(0x17c));_0x293715['innerHTML']='',_0x293715[_0x1b497f(0x216)](_0xb03fc0);for(let _0x3a5d76=0x0;_0x3a5d76<0x18;_0x3a5d76++){const _0x40810a=document['createElement'](_0x1b497f(0x1d7));_0x40810a[_0x1b497f(0x188)]=_0x1b497f(0x17f);if(_0x3a5d76>0x0)_0x40810a[_0x1b497f(0x112)]=_0x1b497f(0x13a)+String(_0x3a5d76)[_0x1b497f(0xbb)](0x2,'0')+_0x1b497f(0x122);_0x293715[_0x1b497f(0x216)](_0x40810a);}}function renderDayRange(_0x44dc50,_0x1fdb81){const _0x27e971=a2_0x18a60d,_0x5b0b39=document[_0x27e971(0x1c3)](_0x27e971(0x1e4)),_0x1eb0b3=document[_0x27e971(0x1c3)](_0x27e971(0x102)),_0x405e14=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x59fd66=new Date();_0x59fd66[_0x27e971(0xd5)](0x0,0x0,0x0,0x0);const _0x28d573=getLocalDateStr(new Date());for(let _0x4c40da=_0x44dc50;_0x4c40da<=_0x1fdb81;_0x4c40da++){const _0x25c4e1=new Date(_0x59fd66);_0x25c4e1[_0x27e971(0x151)](_0x25c4e1[_0x27e971(0xf4)]()+_0x4c40da);const _0xe224d2=getLocalDateStr(_0x25c4e1);let _0x2507c1=_0x25c4e1[_0x27e971(0x183)]()-0x1;if(_0x2507c1===-0x1)_0x2507c1=0x6;const _0x46754b=_0xe224d2===_0x28d573,_0x36d1c3=document[_0x27e971(0x1f2)](_0x27e971(0x1d7));_0x36d1c3[_0x27e971(0x188)]=_0x27e971(0xaf)+(_0x46754b?'today':''),_0x36d1c3['id']=_0x27e971(0x20c)+_0xe224d2,_0x36d1c3[_0x27e971(0x17b)](_0x27e971(0x1c5),_0xe224d2),_0x36d1c3[_0x27e971(0x112)]='<div\x20class=\x22dch-day\x22>'+_0x405e14[_0x2507c1]+_0x27e971(0x105)+_0x25c4e1[_0x27e971(0xf4)]()+'</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-'+_0xe224d2+_0x27e971(0x18e),_0x36d1c3[_0x27e971(0x19d)]=()=>openDayOptions(_0xe224d2,_0x405e14[_0x2507c1]+'\x20'+_0x25c4e1[_0x27e971(0xf4)]()),_0x5b0b39[_0x27e971(0x216)](_0x36d1c3);const _0x250110=document[_0x27e971(0x1f2)](_0x27e971(0x1d7));_0x250110[_0x27e971(0x188)]=_0x27e971(0x1c0)+(_0x46754b?_0x27e971(0x115):''),_0x250110['setAttribute'](_0x27e971(0x1c5),_0xe224d2),_0x250110['setAttribute'](_0x27e971(0x211),_0x2507c1),renderEventsForColumn(_0x250110,_0xe224d2,_0x2507c1),attachLongPressHandler(_0x250110,_0x25c4e1),_0x1eb0b3[_0x27e971(0x216)](_0x250110),updateDayStats(_0xe224d2);}}function reRenderBlocks(){const _0x5615dc=a2_0x18a60d;document[_0x5615dc(0xf2)](_0x5615dc(0x17e))[_0x5615dc(0x16f)](_0x2392a9=>{const _0x5accdc=_0x5615dc;_0x2392a9[_0x5accdc(0xf2)](_0x5accdc(0x181))[_0x5accdc(0x16f)](_0x382e88=>_0x382e88['remove']());const _0x169c12=_0x2392a9[_0x5accdc(0xee)](_0x5accdc(0x1c5)),_0x1bda92=parseInt(_0x2392a9[_0x5accdc(0xee)](_0x5accdc(0x211))),_0x47b1bc=Math['round'](_0x2392a9['offsetLeft']);(availabilityPattern[_0x1bda92]||[])['forEach'](_0x598645=>{const _0x300ce1=_0x5accdc,_0x1cf0d0=document[_0x300ce1(0x1f2)](_0x300ce1(0x1d7));_0x1cf0d0[_0x300ce1(0x188)]='blocked-slot\x20stripe-bg';const _0x15790d=_0x598645*GRID_H;_0x1cf0d0[_0x300ce1(0x1e9)]['top']=_0x15790d+'px',_0x1cf0d0[_0x300ce1(0x1e9)][_0x300ce1(0xfc)]='-'+_0x47b1bc+_0x300ce1(0x12d)+_0x15790d+'px',_0x2392a9[_0x300ce1(0x216)](_0x1cf0d0);});if(specialRanges&&specialRanges['length']>0x0){const _0x294941=new Date(_0x169c12+'T00:00:00')[_0x5accdc(0xfb)](),_0x5f8d9c=new Date(_0x169c12+'T23:59:59')[_0x5accdc(0xfb)]();specialRanges[_0x5accdc(0x16f)](_0x300fc3=>{const _0x228489=_0x5accdc,_0x1aa7f4=new Date(_0x300fc3[_0x228489(0x1e5)])[_0x228489(0xfb)](),_0x134496=new Date(_0x300fc3[_0x228489(0x137)])[_0x228489(0xfb)](),_0x4ae788=Math['max'](_0x294941,_0x1aa7f4),_0x14a4e7=Math[_0x228489(0x190)](_0x5f8d9c,_0x134496);if(_0x4ae788<_0x14a4e7){if(_0x4ae788<=_0x294941&&_0x14a4e7>=_0x5f8d9c-0xea60){if(!_0x2392a9['querySelector']('.day-off-overlay')){const _0x47df05=document[_0x228489(0x1f2)]('div');_0x47df05[_0x228489(0x188)]=_0x228489(0x143),_0x47df05[_0x228489(0x1e9)][_0x228489(0xfc)]='-'+_0x47b1bc+_0x228489(0xa7),_0x2392a9[_0x228489(0x216)](_0x47df05);}}else{const _0x49c1a0=(_0x4ae788-_0x294941)/0x36ee80*GRID_H,_0x34dd9f=(_0x14a4e7-_0x4ae788)/0x36ee80*GRID_H,_0x47ace5=document[_0x228489(0x1f2)](_0x228489(0x1d7));_0x47ace5[_0x228489(0x188)]=_0x228489(0xed),_0x47ace5[_0x228489(0x1e9)][_0x228489(0x117)]=_0x49c1a0+'px',_0x47ace5[_0x228489(0x1e9)][_0x228489(0x147)]=_0x34dd9f+'px',_0x47ace5['style'][_0x228489(0xfc)]='-'+_0x47b1bc+_0x228489(0x12d)+_0x49c1a0+'px',_0x2392a9[_0x228489(0x216)](_0x47ace5);}}});}if(dateExceptions[_0x169c12]===_0x5accdc(0x1fe)){if(!_0x2392a9[_0x5accdc(0x131)](_0x5accdc(0x18b))){const _0x40aebf=document[_0x5accdc(0x1f2)]('div');_0x40aebf['className']=_0x5accdc(0x143),_0x40aebf[_0x5accdc(0x1e9)]['backgroundPosition']='-'+_0x47b1bc+'px\x200px',_0x2392a9[_0x5accdc(0x216)](_0x40aebf);}}renderEventsForColumn(_0x2392a9,_0x169c12,_0x1bda92),updateDayStats(_0x169c12);});}function updateAllDayStats(){const _0x129aa8=a2_0x18a60d;document[_0x129aa8(0xf2)](_0x129aa8(0x111))['forEach'](_0x37fbb2=>{const _0x5c8b98=_0x129aa8;updateDayStats(_0x37fbb2[_0x5c8b98(0xee)]('data-date'));});}function updateDayStats(_0x9c87b1){const _0x5e6ed6=a2_0x18a60d,_0x5c2c74=document['getElementById'](_0x5e6ed6(0xcf)+_0x9c87b1);if(!_0x5c2c74)return;const _0x21a6bb=new Date(_0x9c87b1);let _0x3ee270=_0x21a6bb[_0x5e6ed6(0x183)]()-0x1;if(_0x3ee270===-0x1)_0x3ee270=0x6;if(dateExceptions[_0x9c87b1]===_0x5e6ed6(0x1fe)){_0x5c2c74['style']['display']='none';return;}const _0x38f86b=availabilityPattern[_0x3ee270]||[],_0x167606=0x18-_0x38f86b[_0x5e6ed6(0x1f1)],_0xf392b4=_0x167606*0x3c,_0x370499=sessions[_0x5e6ed6(0x15c)](_0x44a34c=>_0x44a34c['dateStr']===_0x9c87b1&&_0x44a34c[_0x5e6ed6(0x12b)]!==_0x5e6ed6(0x1fd));if(_0x370499[_0x5e6ed6(0x1f1)]===0x0){_0x5c2c74[_0x5e6ed6(0x1e9)][_0x5e6ed6(0x1fb)]=_0x5e6ed6(0x104);return;}let _0x1464d9=_0x370499['map'](_0x45da87=>{const _0x499d1e=_0x5e6ed6,[_0x37ae20,_0x210706]=_0x45da87[_0x499d1e(0x1e5)][_0x499d1e(0x233)](':')[_0x499d1e(0x14c)](Number),[_0x5cbcf5,_0x5004dc]=_0x45da87[_0x499d1e(0x137)][_0x499d1e(0x233)](':')[_0x499d1e(0x14c)](Number);return[_0x37ae20*0x3c+_0x210706,_0x5cbcf5*0x3c+_0x5004dc];});_0x1464d9['sort']((_0x39cd1a,_0x5253d2)=>_0x39cd1a[0x0]-_0x5253d2[0x0]);let _0x1e0d8f=[];if(_0x1464d9['length']>0x0){let _0x1d9d89=_0x1464d9[0x0];for(let _0x19c3ec=0x1;_0x19c3ec<_0x1464d9[_0x5e6ed6(0x1f1)];_0x19c3ec++){_0x1464d9[_0x19c3ec][0x0]<_0x1d9d89[0x1]?_0x1d9d89[0x1]=Math[_0x5e6ed6(0xdf)](_0x1d9d89[0x1],_0x1464d9[_0x19c3ec][0x1]):(_0x1e0d8f[_0x5e6ed6(0x106)](_0x1d9d89),_0x1d9d89=_0x1464d9[_0x19c3ec]);}_0x1e0d8f[_0x5e6ed6(0x106)](_0x1d9d89);}let _0x84578c=0x0;_0x1e0d8f[_0x5e6ed6(0x16f)](_0x388b3a=>_0x84578c+=_0x388b3a[0x1]-_0x388b3a[0x0]),_0x5c2c74[_0x5e6ed6(0x1e9)][_0x5e6ed6(0x1fb)]=_0x5e6ed6(0x182);const _0x1ed1ef=_0x5c2c74[_0x5e6ed6(0x131)]('.dch-stats-fill');if(_0xf392b4===0x0){_0x1ed1ef[_0x5e6ed6(0x1e9)][_0x5e6ed6(0x1ca)]='100%',_0x1ed1ef[_0x5e6ed6(0x1e9)][_0x5e6ed6(0x1f5)]='var(--acc-red)';return;}const _0x278fa5=_0x84578c/_0xf392b4*0x64;console[_0x5e6ed6(0x230)]('['+_0x9c87b1+_0x5e6ed6(0x196)+_0x167606+_0x5e6ed6(0x199)+_0x84578c+_0x5e6ed6(0xef)+_0x278fa5[_0x5e6ed6(0x1f4)](0x1)+'%'),_0x278fa5>0x64?(_0x1ed1ef[_0x5e6ed6(0x1e9)][_0x5e6ed6(0x1ca)]=_0x5e6ed6(0x1ff),_0x1ed1ef[_0x5e6ed6(0x1e9)][_0x5e6ed6(0x1f5)]=_0x5e6ed6(0xbd)):(_0x1ed1ef['style'][_0x5e6ed6(0x1ca)]=_0x278fa5+'%',_0x1ed1ef[_0x5e6ed6(0x1e9)][_0x5e6ed6(0x1f5)]=_0x5e6ed6(0xb6));}function renderEventsForColumn(_0x4ad07a,_0x169f8b,_0x62d659){const _0x3127ee=a2_0x18a60d,_0x1c7003=sessions[_0x3127ee(0x15c)](_0x4df559=>_0x4df559['dateStr']===_0x169f8b),_0xdf3dda=_0x1c7003[_0x3127ee(0x14c)](_0x2d283d=>{const _0x6357ec=_0x3127ee,[_0x602ada,_0x21ec78]=_0x2d283d['start'][_0x6357ec(0x233)](':')['map'](Number),[_0x3c54ee,_0xeb17d7]=_0x2d283d[_0x6357ec(0x137)]['split'](':')[_0x6357ec(0x14c)](Number);return{'data':_0x2d283d,'start':_0x602ada*0x3c+_0x21ec78,'end':_0x3c54ee*0x3c+_0xeb17d7,'colIndex':0x0};});_0xdf3dda[_0x3127ee(0x113)]((_0x5beeb3,_0x40a196)=>{const _0x5576f8=_0x3127ee;if(_0x5beeb3[_0x5576f8(0x1e5)]!==_0x40a196['start'])return _0x5beeb3[_0x5576f8(0x1e5)]-_0x40a196[_0x5576f8(0x1e5)];return _0x40a196[_0x5576f8(0x137)]-_0x40a196[_0x5576f8(0x1e5)]-(_0x5beeb3[_0x5576f8(0x137)]-_0x5beeb3[_0x5576f8(0x1e5)]);});const _0x559417=[];_0xdf3dda['forEach'](_0x369cfb=>{const _0x292c50=_0x3127ee;let _0x3bec6b=![];for(let _0x55772c=0x0;_0x55772c<_0x559417[_0x292c50(0x1f1)];_0x55772c++){const _0x32a4ef=_0x559417[_0x55772c],_0x11f439=_0x32a4ef[_0x32a4ef[_0x292c50(0x1f1)]-0x1];if(_0x369cfb['start']>=_0x11f439[_0x292c50(0x137)]){_0x32a4ef[_0x292c50(0x106)](_0x369cfb),_0x369cfb['colIndex']=_0x55772c,_0x3bec6b=!![];break;}}!_0x3bec6b&&(_0x559417[_0x292c50(0x106)]([_0x369cfb]),_0x369cfb[_0x292c50(0x10a)]=_0x559417['length']-0x1);}),_0xdf3dda[_0x3127ee(0x16f)](_0x56fb4b=>{const _0x2f1c56=_0x3127ee;let _0x5c162d=0x0;_0xdf3dda['forEach'](_0x221d87=>{const _0x38518c=a2_0x5e6b;if(Math[_0x38518c(0xdf)](_0x56fb4b['start'],_0x221d87[_0x38518c(0x1e5)])<Math['min'](_0x56fb4b[_0x38518c(0x137)],_0x221d87[_0x38518c(0x137)])){if(_0x221d87[_0x38518c(0x10a)]>_0x5c162d)_0x5c162d=_0x221d87['colIndex'];}});const _0x3e49d5=_0x5c162d+0x1,_0x415a37=0x64/_0x3e49d5,_0x1aa8fc=_0x56fb4b['colIndex']*_0x415a37,_0x223295=createEventEl(_0x56fb4b[_0x2f1c56(0xe7)]);_0x223295[_0x2f1c56(0x1e9)]['width']=_0x2f1c56(0x1da)+_0x415a37+_0x2f1c56(0x1f8),_0x223295[_0x2f1c56(0x1e9)][_0x2f1c56(0xb8)]=_0x2f1c56(0x1da)+_0x1aa8fc+_0x2f1c56(0x13e),_0x223295['style'][_0x2f1c56(0x1bf)]=0xa+_0x56fb4b[_0x2f1c56(0x10a)],_0x415a37<0x55&&_0x223295['classList'][_0x2f1c56(0x135)](_0x2f1c56(0x12a)),_0x4ad07a[_0x2f1c56(0x216)](_0x223295);});}function createEventEl(_0x4c8847){const _0x163ac5=a2_0x18a60d,[_0x472506,_0x107cde]=_0x4c8847['start']['split'](':')[_0x163ac5(0x14c)](Number),[_0x4773f7,_0x576312]=_0x4c8847['end']['split'](':')[_0x163ac5(0x14c)](Number),_0x3b19f7=(_0x472506*0x3c+_0x107cde)/0x3c*GRID_H,_0x606f50=(_0x4773f7*0x3c+_0x576312-(_0x472506*0x3c+_0x107cde))/0x3c*GRID_H,_0x2ac2b5=document[_0x163ac5(0x1f2)]('div'),_0x4037d9=_0x4c8847[_0x163ac5(0x12b)]===_0x163ac5(0x224)?'\x20status-completed':'';_0x2ac2b5['className']=_0x163ac5(0x157)+_0x4037d9,_0x2ac2b5[_0x163ac5(0x1e9)][_0x163ac5(0x117)]=_0x3b19f7+'px',_0x2ac2b5[_0x163ac5(0x1e9)][_0x163ac5(0x147)]=Math[_0x163ac5(0xdf)](_0x606f50,0x14)+'px';const _0x139d17=clients[_0x163ac5(0x175)](_0x3c952f=>_0x4c8847[_0x163ac5(0x1c6)]&&String(_0x3c952f['id'])===String(_0x4c8847[_0x163ac5(0x1c6)])||_0x3c952f[_0x163ac5(0x170)]===_0x4c8847[_0x163ac5(0x227)]),_0xda4e78=_0x139d17?_0x139d17[_0x163ac5(0x11c)]:_0x163ac5(0xeb);_0x2ac2b5[_0x163ac5(0x1e9)][_0x163ac5(0x191)]=_0xda4e78,_0x2ac2b5[_0x163ac5(0x1e9)][_0x163ac5(0x110)]=hexToRgba(_0xda4e78,0.85);let _0x30dc91=_0x163ac5(0xf8)+_0x4c8847['client']+_0x163ac5(0x1dd)+_0x4c8847[_0x163ac5(0x1e5)]+'\x20-\x20'+_0x4c8847[_0x163ac5(0x137)]+_0x163ac5(0x139);return _0x4c8847[_0x163ac5(0x155)]&&(_0x30dc91+=_0x163ac5(0x177)),_0x4c8847[_0x163ac5(0x12b)]===_0x163ac5(0x224)&&(_0x30dc91+='<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>'),_0x2ac2b5[_0x163ac5(0x112)]=_0x30dc91,_0x2ac2b5['onclick']=_0x107c82=>{const _0x216edd=_0x163ac5;_0x107c82[_0x216edd(0x218)](),openEdit(_0x4c8847);},_0x2ac2b5;}function attachLongPressHandler(_0x4198a,_0xf0afec){const _0x17b41a=a2_0x18a60d;let _0x5cbc2f=0x0,_0x8f374a=null;const _0x5cc275=_0xea2467=>{const _0x4fef9b=a2_0x5e6b;if(_0xea2467[_0x4fef9b(0x198)][_0x4fef9b(0x169)](_0x4fef9b(0x208)))return;isScrolling=![],_0x5cbc2f=_0xea2467[_0x4fef9b(0x232)]?_0xea2467[_0x4fef9b(0x232)][0x0]['clientY']:_0xea2467[_0x4fef9b(0x1e1)],_0x8f374a=setTimeout(()=>{const _0x3cf9d4=_0x4fef9b;if(!isScrolling){navigator[_0x3cf9d4(0x1b1)]?.(0x32);const _0x3d253a=_0x4198a[_0x3cf9d4(0x1d6)](),_0x5c9756=Math['floor']((_0x5cbc2f-_0x3d253a[_0x3cf9d4(0x117)])/GRID_H);_0xf0afec[_0x3cf9d4(0xd5)](_0x5c9756,0x0),openAddSession(_0xf0afec);}},0x1f4);},_0x18a8f6=()=>{isScrolling=!![],clearTimeout(_0x8f374a);},_0x4fe13a=()=>{clearTimeout(_0x8f374a);};_0x4198a[_0x17b41a(0x221)](_0x17b41a(0x213),_0x5cc275,{'passive':!![]}),_0x4198a[_0x17b41a(0x221)]('touchmove',_0x18a8f6,{'passive':!![]}),_0x4198a[_0x17b41a(0x221)](_0x17b41a(0x18f),_0x4fe13a),_0x4198a['addEventListener'](_0x17b41a(0xc6),_0x5cc275),_0x4198a[_0x17b41a(0x221)](_0x17b41a(0x1fc),_0x18a8f6),_0x4198a[_0x17b41a(0x221)]('mouseup',_0x4fe13a);}function a2_0x5e6b(_0x285c3f,_0x1067a2){_0x285c3f=_0x285c3f-0xa7;const _0x2fa9a7=a2_0x2447();let _0x11b17d=_0x2fa9a7[_0x285c3f];return _0x11b17d;}function cancelLongPress(){}function handleInfiniteScroll(){const _0x17c5e0=a2_0x18a60d,_0x3b1628=document[_0x17c5e0(0x1c3)](_0x17c5e0(0x11a)),_0x45deaa=_0x3b1628[_0x17c5e0(0x1d8)],_0x99d2a7=_0x3b1628['scrollWidth'],_0x11bc6d=_0x3b1628[_0x17c5e0(0x1ee)];if(_0x99d2a7-(_0x45deaa+_0x11bc6d)<0x12c){const _0x5af287=endOffset;endOffset+=0xe,renderDayRange(_0x5af287+0x1,endOffset),reRenderBlocks();}if(_0x45deaa<0x12c){const _0x15aaed=startOffset;startOffset-=0xe,prependDays(startOffset,_0x15aaed-0x1),_0x3b1628['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x48fba3,_0x209e69){const _0x1842ee=a2_0x18a60d,_0x34977b=document[_0x1842ee(0x1c3)](_0x1842ee(0x1e4)),_0x136590=document[_0x1842ee(0x1c3)](_0x1842ee(0x102)),_0x122dc0=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x4c3ecb=new Date();_0x4c3ecb[_0x1842ee(0xd5)](0x0,0x0,0x0,0x0);const _0x3263a1=getLocalDateStr(new Date()),_0x212870=document[_0x1842ee(0x22c)](),_0x576266=document[_0x1842ee(0x22c)]();for(let _0x329582=_0x48fba3;_0x329582<=_0x209e69;_0x329582++){const _0x4a48fe=new Date(_0x4c3ecb);_0x4a48fe[_0x1842ee(0x151)](_0x4a48fe[_0x1842ee(0xf4)]()+_0x329582);const _0x20e95b=getLocalDateStr(_0x4a48fe);let _0x14e84b=_0x4a48fe['getDay']()-0x1;if(_0x14e84b===-0x1)_0x14e84b=0x6;const _0x2e105e=_0x20e95b===_0x3263a1,_0x1bb2eb=document[_0x1842ee(0x1f2)](_0x1842ee(0x1d7));_0x1bb2eb[_0x1842ee(0x188)]='day-col-header\x20'+(_0x2e105e?_0x1842ee(0x115):''),_0x1bb2eb['id']=_0x1842ee(0x20c)+_0x20e95b,_0x1bb2eb[_0x1842ee(0x17b)](_0x1842ee(0x1c5),_0x20e95b),_0x1bb2eb[_0x1842ee(0x112)]='<div\x20class=\x22dch-day\x22>'+_0x122dc0[_0x14e84b]+_0x1842ee(0x105)+_0x4a48fe[_0x1842ee(0xf4)]()+_0x1842ee(0x187)+_0x20e95b+_0x1842ee(0x18e),_0x1bb2eb[_0x1842ee(0x19d)]=()=>openDayOptions(_0x20e95b,_0x122dc0[_0x14e84b]+'\x20'+_0x4a48fe['getDate']()),_0x212870[_0x1842ee(0x216)](_0x1bb2eb);const _0xebf12b=document[_0x1842ee(0x1f2)](_0x1842ee(0x1d7));_0xebf12b[_0x1842ee(0x188)]=_0x1842ee(0x1c0)+(_0x2e105e?_0x1842ee(0x115):''),_0xebf12b[_0x1842ee(0x17b)](_0x1842ee(0x1c5),_0x20e95b),_0xebf12b['setAttribute'](_0x1842ee(0x211),_0x14e84b),renderEventsForColumn(_0xebf12b,_0x20e95b,_0x14e84b),attachLongPressHandler(_0xebf12b,_0x4a48fe),_0x576266['appendChild'](_0xebf12b),updateDayStats(_0x20e95b);}_0x34977b[_0x1842ee(0x1df)](_0x212870,_0x34977b[_0x1842ee(0x14f)]),_0x136590['insertBefore'](_0x576266,_0x136590[_0x1842ee(0x131)](_0x1842ee(0x1a5)));}function validateAppointment(_0x365f10,_0x3eaaa4,_0x31b78a,_0x550509,_0x307545){const _0x1927ec=a2_0x18a60d,[_0x59498c,_0x332241]=_0x3eaaa4[_0x1927ec(0x233)](':')[_0x1927ec(0x14c)](Number),[_0x17f39a,_0x52ef02]=_0x31b78a[_0x1927ec(0x233)](':')[_0x1927ec(0x14c)](Number),_0x4f1590=_0x59498c*0x3c+_0x332241,_0x545164=_0x17f39a*0x3c+_0x52ef02,_0x4fcea9=String(_0x307545);let _0x1f76b1=![],_0x433207='';for(let _0x5b2992 of sessions){if(_0x5b2992['dateStr']!==_0x365f10)continue;if(_0x5b2992[_0x1927ec(0x12b)]==='cancelled')continue;if(_0x550509&&String(_0x5b2992['id'])===String(_0x550509))continue;const [_0x55d83e,_0x1364bd]=_0x5b2992[_0x1927ec(0x1e5)][_0x1927ec(0x233)](':')[_0x1927ec(0x14c)](Number),[_0x160ab1,_0x110474]=_0x5b2992[_0x1927ec(0x137)][_0x1927ec(0x233)](':')['map'](Number),_0x1ec18b=_0x55d83e*0x3c+_0x1364bd,_0x2d66ab=_0x160ab1*0x3c+_0x110474;if(Math['max'](_0x4f1590,_0x1ec18b)<Math[_0x1927ec(0x190)](_0x545164,_0x2d66ab)){if(_0x5b2992[_0x1927ec(0x1c6)]&&String(_0x5b2992[_0x1927ec(0x1c6)])===_0x4fcea9)return{'valid':![],'msg':'Этот\x20клиент\x20('+_0x5b2992['client']+_0x1927ec(0x21e)};_0x1f76b1=!![],_0x433207=_0x5b2992[_0x1927ec(0x227)];}}if(_0x1f76b1)return{'valid':!![],'warning':_0x1927ec(0x14b)+_0x433207};return{'valid':!![]};}function updateDateDisplay(){const _0x367f4f=a2_0x18a60d,_0x109356=document[_0x367f4f(0x1c3)]('inpDate')[_0x367f4f(0x1bb)],_0x5c0d34=document[_0x367f4f(0x1c3)](_0x367f4f(0x1ac));if(!_0x109356){_0x5c0d34[_0x367f4f(0xc9)]='';return;}const [_0xed3c04,_0x2d7051,_0x1a8f79]=_0x109356[_0x367f4f(0x233)]('-')['map'](Number),_0x385433=new Date(_0xed3c04,_0x2d7051-0x1,_0x1a8f79),_0x721401={'weekday':'long','day':_0x367f4f(0x1cd),'month':_0x367f4f(0x1ba),'year':_0x367f4f(0x1cd)};let _0x2c239d=_0x385433['toLocaleDateString'](_0x367f4f(0xc1),_0x721401);_0x2c239d=_0x2c239d[_0x367f4f(0x18d)](0x0)[_0x367f4f(0x235)]()+_0x2c239d['slice'](0x1),_0x5c0d34[_0x367f4f(0xc9)]=_0x2c239d;}function autoSetEndTime(){const _0x3ba3a4=a2_0x18a60d,_0x3fd375=document['getElementById'](_0x3ba3a4(0xb4))['value'];if(!_0x3fd375)return;const [_0x583cac,_0x4896f0]=_0x3fd375['split'](':')[_0x3ba3a4(0x14c)](Number);let _0x2cfdbf=_0x583cac+0x1;if(_0x2cfdbf>0x17)_0x2cfdbf=0x0;const _0x4f83eb=String(_0x2cfdbf)['padStart'](0x2,'0')+':'+String(_0x4896f0)[_0x3ba3a4(0xbb)](0x2,'0');document[_0x3ba3a4(0x1c3)](_0x3ba3a4(0x185))[_0x3ba3a4(0x1bb)]=_0x4f83eb;}function populateClientSelect(){const _0x356a24=a2_0x18a60d,_0x592ad6=document['getElementById'](_0x356a24(0x1db));_0x592ad6['innerHTML']='';if(clients[_0x356a24(0x1f1)]===0x0){const _0x325d67=document[_0x356a24(0x1f2)](_0x356a24(0x1cf));_0x325d67[_0x356a24(0x20b)]=_0x356a24(0x156),_0x592ad6[_0x356a24(0x216)](_0x325d67);return;}clients[_0x356a24(0x16f)](_0x1d0e15=>{const _0x1cda0e=_0x356a24,_0x541d6b=document[_0x1cda0e(0x1f2)]('option');_0x541d6b[_0x1cda0e(0x1bb)]=_0x1d0e15[_0x1cda0e(0x170)],_0x541d6b[_0x1cda0e(0xc9)]=_0x1d0e15['name'],_0x592ad6[_0x1cda0e(0x216)](_0x541d6b);});}function openActionSheet(_0x41ff13){const _0xa3a99f=a2_0x18a60d,_0x2aec8e=document[_0xa3a99f(0x1c3)](_0xa3a99f(0x223)),_0x5d86fd=document['getElementById']('actionSheetOverlay'),_0x2da164=document[_0xa3a99f(0x1c3)](_0xa3a99f(0x1aa)),_0x20705e=document[_0xa3a99f(0x1c3)](_0xa3a99f(0x153)),_0x1cc5a1=document[_0xa3a99f(0x1c3)](_0xa3a99f(0x21b));_0x5d86fd[_0xa3a99f(0xa9)][_0xa3a99f(0x135)](_0xa3a99f(0x1c1)),_0x2aec8e['classList'][_0xa3a99f(0x135)](_0xa3a99f(0x12c));if(_0x41ff13===_0xa3a99f(0x146))_0x2da164[_0xa3a99f(0xc9)]=_0xa3a99f(0xda),_0x20705e[_0xa3a99f(0xc9)]='Только\x20эту',_0x20705e[_0xa3a99f(0x19d)]=()=>{closeActionSheet(),updateSeriesBatch('single',tempSessionData);},_0x1cc5a1[_0xa3a99f(0xc9)]='Эту\x20и\x20будущие',_0x1cc5a1['onclick']=()=>{const _0x1e0c1c=_0xa3a99f;closeActionSheet(),updateSeriesBatch(_0x1e0c1c(0x11e),tempSessionData);};else _0x41ff13===_0xa3a99f(0xbf)&&(_0x2da164[_0xa3a99f(0xc9)]='Удаление',_0x20705e[_0xa3a99f(0xc9)]=_0xa3a99f(0x154),_0x20705e['className']=_0xa3a99f(0x126),_0x20705e[_0xa3a99f(0x19d)]=()=>{const _0x306d1e=_0xa3a99f;closeActionSheet(),commitDelete(_0x306d1e(0xaa),sessions['find'](_0x51e92c=>_0x51e92c['id']===editingId));},_0x1cc5a1[_0xa3a99f(0xc9)]=_0xa3a99f(0x141),_0x1cc5a1[_0xa3a99f(0x188)]=_0xa3a99f(0x132),_0x1cc5a1[_0xa3a99f(0x19d)]=()=>{const _0x2fb89b=_0xa3a99f;closeActionSheet(),commitDelete(_0x2fb89b(0x11e),sessions[_0x2fb89b(0x175)](_0x2fd6ec=>_0x2fd6ec['id']===editingId));});}function closeActionSheet(){const _0x503e03=a2_0x18a60d;document[_0x503e03(0x1c3)](_0x503e03(0x223))[_0x503e03(0xa9)][_0x503e03(0xdc)](_0x503e03(0x12c)),document[_0x503e03(0x1c3)](_0x503e03(0x11d))[_0x503e03(0xa9)][_0x503e03(0xdc)](_0x503e03(0x1c1));}function openSettings(){const _0x5c6636=a2_0x18a60d;openSheet(_0x5c6636(0x134));}function saveCoachSettings(){const _0x50975e=a2_0x18a60d,_0x3b5b83=document[_0x50975e(0x1c3)](_0x50975e(0x16a))[_0x50975e(0x1bb)];localStorage[_0x50975e(0xc7)](_0x50975e(0xe9),_0x3b5b83),console[_0x50975e(0x230)](_0x50975e(0x1a8),_0x3b5b83),DataManager['fetchFromServer']('save_settings',{'settings':{'cancel_window':_0x3b5b83}})[_0x50975e(0x1b6)](_0x56288e=>{console['error']('Save\x20settings\x20error:',_0x56288e),showToast('Ошибка\x20сохранения\x20настроек',![]);});}function loadCoachSettings(){const _0x1200c4=a2_0x18a60d,_0xb7c95f=localStorage[_0x1200c4(0x114)](_0x1200c4(0xe9));_0xb7c95f&&(document['getElementById'](_0x1200c4(0x16a))[_0x1200c4(0x1bb)]=_0xb7c95f);}function openRangesSheet(){closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet('rangesSheet');}function addRange(){const _0x45bc44=a2_0x18a60d,_0x4b7f47=document[_0x45bc44(0x1c3)](_0x45bc44(0x22d))[_0x45bc44(0x1bb)],_0x5925db=document[_0x45bc44(0x1c3)](_0x45bc44(0x15a))[_0x45bc44(0x1bb)],_0x5d0e24=document['getElementById'](_0x45bc44(0xe1))[_0x45bc44(0x1bb)],_0x100d37=document[_0x45bc44(0x1c3)](_0x45bc44(0x1bc))[_0x45bc44(0x1bb)];if(!_0x4b7f47||!_0x5925db||!_0x5d0e24||!_0x100d37)return alert('Заполните\x20все\x20поля');const _0x510b74=_0x4b7f47+'T'+_0x5925db,_0x19e204=_0x5d0e24+'T'+_0x100d37;if(_0x510b74>=_0x19e204)return alert(_0x45bc44(0x10e));specialRanges['push']({'start':_0x510b74,'end':_0x19e204}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager['saveLocally'](),DataManager[_0x45bc44(0x116)](_0x45bc44(0x1ed),{'settings':{'ranges':specialRanges}});}function deleteRange(_0x3495f2){const _0x418fc9=a2_0x18a60d;specialRanges[_0x418fc9(0xb7)](_0x3495f2,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x418fc9(0x22f)](),DataManager[_0x418fc9(0x116)](_0x418fc9(0x1ed),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x35d814=a2_0x18a60d;document['getElementById'](_0x35d814(0x22d))[_0x35d814(0x1bb)]='',document[_0x35d814(0x1c3)](_0x35d814(0x15a))[_0x35d814(0x1bb)]=_0x35d814(0x10d),document['getElementById'](_0x35d814(0xe1))['value']='',document[_0x35d814(0x1c3)](_0x35d814(0x1bc))['value']='23:59';}function renderRangesList(){const _0x4067a4=a2_0x18a60d,_0xa6129e=document['getElementById']('rangesList');_0xa6129e[_0x4067a4(0x112)]='';if(!specialRanges[_0x4067a4(0x1f1)]){_0xa6129e[_0x4067a4(0x112)]='<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>';return;}specialRanges[_0x4067a4(0x16f)]((_0x5650ae,_0x560cf6)=>{const _0x58f57b=_0x4067a4,_0x38b862=document['createElement'](_0x58f57b(0x1d7));_0x38b862['className']=_0x58f57b(0xba);const _0x309bd0=_0x5dc3b7=>{const _0x12fb5c=_0x58f57b,_0x4ea7fb=new Date(_0x5dc3b7);return _0x4ea7fb[_0x12fb5c(0xf4)]()+'.'+String(_0x4ea7fb[_0x12fb5c(0x1ce)]()+0x1)['padStart'](0x2,'0')+'\x20'+String(_0x4ea7fb[_0x12fb5c(0xec)]())[_0x12fb5c(0xbb)](0x2,'0')+':'+String(_0x4ea7fb[_0x12fb5c(0x1b4)]())[_0x12fb5c(0xbb)](0x2,'0');};_0x38b862[_0x58f57b(0x112)]=_0x58f57b(0x212)+_0x309bd0(_0x5650ae[_0x58f57b(0x1e5)])+_0x58f57b(0x15f)+_0x309bd0(_0x5650ae['end'])+'</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange('+_0x560cf6+_0x58f57b(0x15e),_0xa6129e[_0x58f57b(0x216)](_0x38b862);});}function scrollToToday(){const _0x29678a=a2_0x18a60d,_0x526a1c=getLocalDateStr(new Date()),_0x29f7b4=document[_0x29678a(0x1c3)](_0x29678a(0x20c)+_0x526a1c),_0x18ad5c=document['getElementById']('matrixViewport');if(_0x29f7b4&&_0x18ad5c){const _0x56b6b7=_0x18ad5c['clientWidth'],_0x5f27bd=_0x29f7b4[_0x29678a(0x15b)],_0x114fb2=_0x29f7b4[_0x29678a(0x1b3)];_0x18ad5c[_0x29678a(0x1d8)]=_0x5f27bd-_0x56b6b7/0x2+_0x114fb2/0x2,_0x18ad5c[_0x29678a(0x1d4)]=0x9*GRID_H;}}function onScroll(){const _0xb18944=a2_0x18a60d,_0x31c9db=document['getElementById'](_0xb18944(0x11a)),_0x2faae2=document[_0xb18944(0xf2)]('.day-col-header');for(let _0x520665 of _0x2faae2)if(_0x520665[_0xb18944(0x15b)]>=_0x31c9db[_0xb18944(0x1d8)]){const _0x297b3a=new Date(_0x520665[_0xb18944(0xee)](_0xb18944(0x1c5)));document['getElementById'](_0xb18944(0xe6))[_0xb18944(0xc9)]=_0x297b3a['toLocaleString']('ru',{'month':_0xb18944(0x1ba)})['toUpperCase']()+'\x20'+_0x297b3a['getFullYear']();break;}}function showToast(_0x9b6074,_0x30ade7=![]){const _0x58ee2a=a2_0x18a60d,_0x2b67af=document[_0x58ee2a(0x1c3)](_0x58ee2a(0x121));_0x2b67af[_0x58ee2a(0x188)]=_0x58ee2a(0xce)+(_0x30ade7?_0x58ee2a(0x171):''),document[_0x58ee2a(0x1c3)](_0x58ee2a(0x231))[_0x58ee2a(0xc9)]=_0x30ade7?_0x58ee2a(0x1ae):_0x58ee2a(0x1f3),document[_0x58ee2a(0x1c3)]('toastMessage')[_0x58ee2a(0xc9)]=_0x9b6074,_0x2b67af['classList']['add'](_0x58ee2a(0x17a)),setTimeout(()=>{const _0x3dc174=_0x58ee2a;_0x2b67af[_0x3dc174(0xa9)]['remove'](_0x3dc174(0x17a));},0xbb8);}function openDayOptions(_0x3bce79,_0x1fce07){const _0xf6bac9=a2_0x18a60d;selectedDayForOptions=_0x3bce79,document['getElementById']('dayOptionsTitle')[_0xf6bac9(0xc9)]=_0x1fce07,openSheet(_0xf6bac9(0x195));}function toggleDayOff(){const _0x8a46c9=a2_0x18a60d;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x8a46c9(0x1fe),reRenderBlocks(),closeAllSheets(),DataManager[_0x8a46c9(0x22f)](),DataManager[_0x8a46c9(0x116)](_0x8a46c9(0x1ed),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x534626=a2_0x18a60d;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager['saveLocally'](),DataManager[_0x534626(0x116)]('save_settings',{'settings':{'exceptions':dateExceptions}}));}function a2_0x2447(){const _0x209e8e=['\x20выполнено','calc(','inpClient','router.html','</div><div\x20class=\x22ev-time\x22>','723870bOqRqw','insertBefore','user','clientY','rgba(100,100,100,0.5)','[API\x20','daysHeaderTrack','start','18bpJYMr','round','1866120HvcTlr','style','syncLoad','.sheet','pe-cell\x20','save_settings','clientWidth','borderColor','custom','length','createElement','Инфо','toFixed','background','Error\x20setting\x20color:','total','%\x20-\x204px)','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:','setMonth','display','mousemove','cancelled','off','100%','v9.0-BATCH-CALENDAR','uc_settings_v9','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','search','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','doLoadPercent','from','send','.event-card','Новая\x20запись','send_notification','text','header-','Максимум\x20100\x20за\x20раз','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','initData','toLocaleDateString','data-day-idx','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','touchstart','(((.+)+)+)+$','Это\x20часть\x20серии\x20тренировок','appendChild','rgba(255,\x20159,\x2010,\x200.3)','stopPropagation','582538UwOZjQ','Тренировка\x20завершена','asBtnSeries','105814xiNSst','anPercent',')\x20уже\x20записан\x20на\x20это\x20время!','[Notify]\x20Attempting\x20to\x20send:','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','addEventListener','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','actionSheet','completed','rgba(','getFullYear','client','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','17824eOjbLs','constructor','blocked-slot\x20stripe-bg','createDocumentFragment','rangeStartDate','substr','saveLocally','log','toastTitle','touches','split','slice','toUpperCase','px\x200px','warn','classList','single','4768115YTEkra','then','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','pe-time-label','day-col-header\x20','batch_sync','block','doWorkHours','globalTimeLine','inpStart','#fff','var(--acc-current)','splice','left','loadLocal','range-item','padStart','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','var(--acc-red)','Оффлайн\x20режим','delete','Минимум\x202\x20тренировки','ru-RU','[Sync]\x20Loading\x20',':\x20Client\x20already\x20booked','settings','doDateHeader','mousedown','setItem','14622NXCRzn','textContent','pattern','done','Сделать\x20рабочим\x20днем','sid','toast-notification\x20','stat-','note','planned','doBusyHours','deleted','Жду\x20вас\x20в\x20зале!\x20💪','setHours','init_load','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','Изменение\x20серии','btnStatusToggle','remove','var(--acc-orange)','msg','max','[Notify]\x20Error:\x20sessionData\x20is\x20null','rangeEndDate','update','formatDate','rgba(48,\x20209,\x2088,\x200.15)','create','headerMonth','data','\x20<span\x20class=\x22arrow\x22>↓</span>','uc_settings_cancel_window','14hrMkrK','#0a84ff','getHours','blocked-range-part\x20stripe-bg','getAttribute','мин,\x20Загрузка:\x20','parse','1035nlyAdj','querySelectorAll','inpDate','getDate','patternEditor','indexOf','10px\x2010px\x200\x200','<div\x20class=\x22ev-title\x22>','calendar','[Notify]\x20Network\x20Failed','getTime','backgroundPosition','startsWith','now','initDataUnsafe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','Все\x20даты\x20заняты\x20этим\x20клиентом!','gridColumns','sheetTitle','none','</div><div\x20class=\x22dch-num\x22>','push','isArray','anTotalStats','patternInfoBox','colIndex','10px','json','00:00','Ошибка\x20дат','stringify','backgroundColor','.day-col-header','innerHTML','sort','getItem','today','fetchFromServer','top','client-stat-card','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','matrixViewport','POST','color','actionSheetOverlay','series','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','cancel','toast',':00</span>','toString','week','random','as-button\x20danger','uc_sessions_v9','<b>✅\x20','.pib-text','mini','status','open','px\x20-','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','372pbczkF','dateStr','querySelector','as-button\x20danger\x20bold','anDonutCircle','settingsSheet','add',':00','end','cancel_window','</div>','<span>','text/plain;charset=UTF-8','inpRecurring','onClick','%\x20+\x202px)','expand','#050505','Эту\x20и\x20будущие','Создана\x20серия:\x20','day-off-overlay\x20stripe-bg','[Notify]\x20Server\x20Response:','valid','save','height','btnDelete','Статус\x20сброшен','all','Групповая:\x20также\x20записан\x20','map','floor','syncBatch','firstChild','anEnd','setDate','offClick','asBtnOne','Только\x20эту','seriesId','Нет\x20клиентов','event-card','Синхронизировано','inpNote','rangeStartTime','offsetLeft','filter','statLoadCard',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','\x20—\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','guest','entries','Запись\x20на\x20<b>','\x20days','anStart','\x20из\x20','month','closest','settingCancelWindow','inpSeriesCount','DOMContentLoaded','Telegram','setBackgroundColor','forEach','name','success','btn-status-toggle\x20undo-mode','1603GdTWOP','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','find','Ошибка\x20сохранения\x20в\x20облако','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','keys','show','setAttribute','timeLineBadge','apply','#gridColumns\x20.day-column','time-label','\x20(пропущено:\x20','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','flex','getDay','btn-primary\x20btn-secondary','inpEnd','.period-switch\x20.p-btn','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','className','location','mergeServerData','.day-off-overlay','recurringOptionContainer','charAt','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','touchend','min','borderLeftColor','sessionSheet','checked','\x20-\x20','dayOptionsSheet',']\x20Доступно:\x20','</span>\x20/\x20','target','ч,\x20Занято:\x20','warning','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','onclick','complete','exceptions','<b>⏰\x20Время:</b>\x20','null','peGrid','seriesCountContainer','</b>\x0a\x0a','.day-column','Сделать\x20выходным','ready','[Settings]\x20Cancel\x20window\x20set\x20to:','Вернуть\x20в\x20запланированные','asTitle','scroll','sheetDateSubtitle','BackButton','Успешно','overlay','error','vibrate','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','offsetWidth','getMinutes','undefined','catch','var(--acc-green)','[Notify]\x20Client\x20SWAP\x20detected','timeColumn','long','value','rangeEndTime','findIndex','borderRadius','zIndex','day-column\x20','active','WebApp','getElementById','Этот\x20клиент\x20(','data-date','clientId','<b>📅\x20Дата:</b>\x20','ranges','setHeaderColor','width','disableVerticalSwipes','includes','numeric','getMonth','option','rgba(255,\x2069,\x2058,\x200.3)','analyticsList','localeCompare','pe-corner','scrollTop','Ваша\x20тренировка\x20перенесена:\x0a\x0a','getBoundingClientRect','div','scrollLeft'];a2_0x2447=function(){return _0x209e8e;};return a2_0x2447();}function openSheet(_0x5f185e){const _0x4de5e3=a2_0x18a60d;document['getElementById'](_0x4de5e3(0x1af))[_0x4de5e3(0xa9)]['add'](_0x4de5e3(0x1c1)),document[_0x4de5e3(0x1c3)](_0x5f185e)[_0x4de5e3(0xa9)][_0x4de5e3(0x135)](_0x4de5e3(0x12c));}function closeAllSheets(){const _0x2758a6=a2_0x18a60d;document[_0x2758a6(0x1c3)](_0x2758a6(0x1af))[_0x2758a6(0xa9)]['remove'](_0x2758a6(0x1c1)),document[_0x2758a6(0xf2)](_0x2758a6(0x1eb))[_0x2758a6(0x16f)](_0x4b5b7d=>_0x4b5b7d[_0x2758a6(0xa9)]['remove'](_0x2758a6(0x12c)));}function openPatternEditor(){const _0x514ed9=a2_0x18a60d;closeAllSheets(),document['getElementById']('patternEditor')['classList'][_0x514ed9(0x135)](_0x514ed9(0x12c)),renderPatternEditor();}function closePatternEditor(){const _0x437599=a2_0x18a60d;document[_0x437599(0x1c3)](_0x437599(0xf5))[_0x437599(0xa9)]['remove'](_0x437599(0x12c));}function savePattern(){const _0x53f022=a2_0x18a60d;document['getElementById']('patternEditor')[_0x53f022(0xa9)][_0x53f022(0xdc)](_0x53f022(0x12c)),reRenderBlocks(),DataManager['saveLocally'](),DataManager[_0x53f022(0x116)](_0x53f022(0x1ed),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x25bd73=a2_0x18a60d,_0x117cfd=document['getElementById'](_0x25bd73(0x1a2));_0x117cfd[_0x25bd73(0x112)]='';const _0x2dcfbd=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x571afe=document[_0x25bd73(0x1f2)](_0x25bd73(0x1d7));_0x571afe[_0x25bd73(0x188)]=_0x25bd73(0x1d3),_0x117cfd['appendChild'](_0x571afe),_0x2dcfbd['forEach']((_0x406891,_0x74fd9)=>{const _0x568851=_0x25bd73,_0x53b4dd=document[_0x568851(0x1f2)](_0x568851(0x1d7));_0x53b4dd[_0x568851(0x188)]='pe-col-header',_0x53b4dd[_0x568851(0x112)]=_0x406891+_0x568851(0xe8),_0x53b4dd[_0x568851(0x19d)]=()=>toggleColPattern(_0x74fd9),_0x117cfd['appendChild'](_0x53b4dd);});for(let _0x101f4a=0x0;_0x101f4a<0x18;_0x101f4a++){const _0x1d0613=document[_0x25bd73(0x1f2)](_0x25bd73(0x1d7));_0x1d0613[_0x25bd73(0x188)]=_0x25bd73(0xae),_0x1d0613['innerHTML']=_0x25bd73(0xd9)+String(_0x101f4a)[_0x25bd73(0xbb)](0x2,'0')+_0x25bd73(0x136),_0x1d0613[_0x25bd73(0x19d)]=()=>toggleRowPattern(_0x101f4a),_0x117cfd[_0x25bd73(0x216)](_0x1d0613);for(let _0x10b556=0x0;_0x10b556<0x7;_0x10b556++){const _0x20773c=document[_0x25bd73(0x1f2)](_0x25bd73(0x1d7)),_0x1d47e1=(availabilityPattern[_0x10b556]||[])[_0x25bd73(0x1cc)](_0x101f4a),_0x1aab37=!_0x1d47e1;_0x20773c[_0x25bd73(0x188)]=_0x25bd73(0x1ec)+(_0x1aab37?_0x25bd73(0x1c1):''),_0x20773c[_0x25bd73(0x19d)]=()=>toggleSinglePattern(_0x10b556,_0x101f4a),_0x117cfd[_0x25bd73(0x216)](_0x20773c);}}}function toggleSinglePattern(_0x40a1eb,_0xefcad7){const _0x3ac176=a2_0x18a60d;if(!availabilityPattern[_0x40a1eb])availabilityPattern[_0x40a1eb]=[];const _0x5a9aa2=availabilityPattern[_0x40a1eb],_0x132158=_0x5a9aa2[_0x3ac176(0xf6)](_0xefcad7);_0x132158===-0x1?_0x5a9aa2[_0x3ac176(0x106)](_0xefcad7):_0x5a9aa2[_0x3ac176(0xb7)](_0x132158,0x1),renderPatternEditor();}function toggleColPattern(_0x4b9633){const _0x394373=a2_0x18a60d;if(!availabilityPattern[_0x4b9633])availabilityPattern[_0x4b9633]=[];const _0x329b71=availabilityPattern[_0x4b9633];_0x329b71[_0x394373(0x1f1)]===0x0?availabilityPattern[_0x4b9633]=Array[_0x394373(0x206)]({'length':0x18},(_0x4a097d,_0xe6881e)=>_0xe6881e):availabilityPattern[_0x4b9633]=[],renderPatternEditor();}function toggleRowPattern(_0x1eadc2){const _0x58d619=a2_0x18a60d;let _0x3517ab=!![];for(let _0x50fa91=0x0;_0x50fa91<0x7;_0x50fa91++){if((availabilityPattern[_0x50fa91]||[])[_0x58d619(0x1cc)](_0x1eadc2)){_0x3517ab=![];break;}}for(let _0x4072fe=0x0;_0x4072fe<0x7;_0x4072fe++){if(!availabilityPattern[_0x4072fe])availabilityPattern[_0x4072fe]=[];const _0xaf3986=availabilityPattern[_0x4072fe][_0x58d619(0xf6)](_0x1eadc2);if(_0x3517ab){if(_0xaf3986===-0x1)availabilityPattern[_0x4072fe]['push'](_0x1eadc2);}else{if(_0xaf3986!==-0x1)availabilityPattern[_0x4072fe][_0x58d619(0xb7)](_0xaf3986,0x1);}}renderPatternEditor();}function renderPCol(_0x2648f5,_0x10714b){const _0x123a0c=a2_0x18a60d;_0x2648f5[_0x123a0c(0x112)]='';const _0x42e3df=Math['round'](_0x2648f5[_0x123a0c(0x15b)]);(availabilityPattern[_0x10714b]||[])[_0x123a0c(0x16f)](_0x393949=>{const _0x5e71e9=_0x123a0c,_0x3ebac5=document[_0x5e71e9(0x1f2)](_0x5e71e9(0x1d7));_0x3ebac5['className']=_0x5e71e9(0x22b);const _0x5a0271=_0x393949*GRID_H;_0x3ebac5[_0x5e71e9(0x1e9)][_0x5e71e9(0x117)]=_0x5a0271+'px',_0x3ebac5[_0x5e71e9(0x1e9)]['backgroundPosition']='-'+_0x42e3df+_0x5e71e9(0x12d)+_0x5a0271+'px',_0x3ebac5[_0x5e71e9(0x19d)]=_0x1047eb=>{_0x1047eb['stopPropagation'](),toggleSinglePattern(_0x10714b,_0x393949);},_0x2648f5['appendChild'](_0x3ebac5);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x2df6f8=a2_0x18a60d,_0x55d953=new Date(),_0xf10db0=document['getElementById'](_0x2df6f8(0xb3)),_0x2b3518=document[_0x2df6f8(0x1c3)]('timeLineBadge'),_0x1f2bef=(_0x55d953[_0x2df6f8(0xec)]()*0x3c+_0x55d953['getMinutes']())/0x3c*GRID_H;_0xf10db0['style'][_0x2df6f8(0x117)]=_0x1f2bef+'px',_0xf10db0['style'][_0x2df6f8(0x1fb)]=_0x2df6f8(0xb1),_0x2b3518['textContent']=String(_0x55d953[_0x2df6f8(0xec)]())[_0x2df6f8(0xbb)](0x2,'0')+':'+String(_0x55d953[_0x2df6f8(0x1b4)]())[_0x2df6f8(0xbb)](0x2,'0'),_0x2b3518[_0x2df6f8(0x1e9)][_0x2df6f8(0x1fb)]=_0x2df6f8(0xb1),_0x2b3518[_0x2df6f8(0x1e9)][_0x2df6f8(0x117)]=_0x1f2bef+'px';}document[a2_0x18a60d(0x221)](a2_0x18a60d(0x16c),init);function openDayOptions(_0x4fc55f){const _0x25aea0=a2_0x18a60d;selectedDayForOptions=_0x4fc55f;const _0x226523=new Date(_0x4fc55f),_0x12ee6f={'weekday':_0x25aea0(0x1ba),'day':_0x25aea0(0x1cd),'month':_0x25aea0(0x1ba),'year':_0x25aea0(0x1cd)},_0x59f43d=_0x226523[_0x25aea0(0x210)]('ru-RU',_0x12ee6f);document[_0x25aea0(0x1c3)](_0x25aea0(0xc5))['textContent']=_0x59f43d[_0x25aea0(0x18d)](0x0)[_0x25aea0(0x235)]()+_0x59f43d[_0x25aea0(0x234)](0x1);let _0x3c8e12=_0x226523['getDay']()-0x1;if(_0x3c8e12===-0x1)_0x3c8e12=0x6;const _0x2ef98b=availabilityPattern[_0x3c8e12]||[],_0x510b79=0x18-_0x2ef98b[_0x25aea0(0x1f1)],_0x2ff35d=_0x510b79*0x3c,_0x1b5b89=sessions[_0x25aea0(0x15c)](_0x34e8ba=>_0x34e8ba[_0x25aea0(0x130)]===_0x4fc55f&&_0x34e8ba['status']!=='cancelled');let _0x22b180=_0x1b5b89['map'](_0x192ec7=>{const _0x447ea3=_0x25aea0,[_0x571a8c,_0x4b860a]=_0x192ec7[_0x447ea3(0x1e5)][_0x447ea3(0x233)](':')['map'](Number),[_0x2f7de3,_0x2e9c91]=_0x192ec7['end'][_0x447ea3(0x233)](':')[_0x447ea3(0x14c)](Number);return[_0x571a8c*0x3c+_0x4b860a,_0x2f7de3*0x3c+_0x2e9c91];});_0x22b180[_0x25aea0(0x113)]((_0x4f929e,_0x4f4640)=>_0x4f929e[0x0]-_0x4f4640[0x0]);let _0x19df48=[];if(_0x22b180[_0x25aea0(0x1f1)]>0x0){let _0x35ba69=_0x22b180[0x0];for(let _0x3f7b09=0x1;_0x3f7b09<_0x22b180['length'];_0x3f7b09++){_0x22b180[_0x3f7b09][0x0]<_0x35ba69[0x1]?_0x35ba69[0x1]=Math[_0x25aea0(0xdf)](_0x35ba69[0x1],_0x22b180[_0x3f7b09][0x1]):(_0x19df48[_0x25aea0(0x106)](_0x35ba69),_0x35ba69=_0x22b180[_0x3f7b09]);}_0x19df48['push'](_0x35ba69);}let _0x5864ae=0x0;_0x19df48[_0x25aea0(0x16f)](_0xaa7f48=>_0x5864ae+=_0xaa7f48[0x1]-_0xaa7f48[0x0]),document[_0x25aea0(0x1c3)](_0x25aea0(0xb2))[_0x25aea0(0xc9)]=formatMinsToHrs(_0x2ff35d),document[_0x25aea0(0x1c3)](_0x25aea0(0xd2))[_0x25aea0(0xc9)]=formatMinsToHrs(_0x5864ae);const _0x499b83=_0x2ff35d>0x0?Math['round'](_0x5864ae/_0x2ff35d*0x64):0x0,_0x1d28f0=document[_0x25aea0(0x1c3)](_0x25aea0(0x205));_0x1d28f0[_0x25aea0(0xc9)]=_0x499b83+'%';const _0x43d431=document[_0x25aea0(0x1c3)](_0x25aea0(0x15d));if(_0x499b83>0x64)_0x1d28f0['style'][_0x25aea0(0x11c)]=_0x25aea0(0xbd),_0x43d431[_0x25aea0(0x1e9)]['borderColor']=_0x25aea0(0x1d0);else _0x499b83>0x50?(_0x1d28f0[_0x25aea0(0x1e9)][_0x25aea0(0x11c)]=_0x25aea0(0xdd),_0x43d431[_0x25aea0(0x1e9)][_0x25aea0(0x1ef)]=_0x25aea0(0x217)):(_0x1d28f0[_0x25aea0(0x1e9)]['color']=_0x25aea0(0x1b7),_0x43d431['style'][_0x25aea0(0x1ef)]='rgba(255,255,255,0.05)');const _0xe25894=document[_0x25aea0(0x1c3)]('doEventsList');_0xe25894[_0x25aea0(0x112)]='';_0x1b5b89['length']===0x0?_0xe25894[_0x25aea0(0x112)]='<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>':(_0x1b5b89[_0x25aea0(0x113)]((_0x4024cd,_0x105149)=>_0x4024cd[_0x25aea0(0x1e5)][_0x25aea0(0x1d2)](_0x105149[_0x25aea0(0x1e5)])),_0x1b5b89[_0x25aea0(0x16f)](_0x5aba5d=>{const _0x3ecedc=_0x25aea0,_0xfbe0fa=clients[_0x3ecedc(0x175)](_0x9acb16=>_0x9acb16['name']===_0x5aba5d[_0x3ecedc(0x227)]),_0x1a6c87=_0xfbe0fa?_0xfbe0fa['color']:_0x3ecedc(0xb5),_0x3a92bf=_0x5aba5d[_0x3ecedc(0x12b)]===_0x3ecedc(0x224),_0x106283=_0x3a92bf?'<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>':'',_0x238b6c=document[_0x3ecedc(0x1f2)]('div');_0x238b6c[_0x3ecedc(0x188)]='de-item',_0x238b6c[_0x3ecedc(0x1e9)]['borderLeftColor']=_0x1a6c87,_0x238b6c[_0x3ecedc(0x112)]=_0x3ecedc(0x100)+_0x5aba5d[_0x3ecedc(0x1e5)]+_0x3ecedc(0x194)+_0x5aba5d['end']+_0x3ecedc(0x1b2)+_0x5aba5d['client']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x106283+_0x3ecedc(0x119),_0xe25894['appendChild'](_0x238b6c);}));const _0xe00b5c=document[_0x25aea0(0x1c3)]('btnDayToggle'),_0x1e84f5=dateExceptions[_0x4fc55f]===_0x25aea0(0x1fe);_0x1e84f5?(_0xe00b5c[_0x25aea0(0xc9)]=_0x25aea0(0xcc),_0xe00b5c[_0x25aea0(0x188)]=_0x25aea0(0x184),_0xe00b5c[_0x25aea0(0x1e9)]['color']=_0x25aea0(0x1b7),_0xe00b5c[_0x25aea0(0x1e9)]['background']=_0x25aea0(0xe4)):(_0xe00b5c['textContent']=_0x25aea0(0x1a6),_0xe00b5c[_0x25aea0(0x188)]='btn-primary\x20btn-danger',_0xe00b5c[_0x25aea0(0x1e9)]['color']='var(--acc-red)',_0xe00b5c[_0x25aea0(0x1e9)]['background']='rgba(255,\x2069,\x2058,\x200.15)'),openSheet(_0x25aea0(0x195));}let currentAnPeriod=a2_0x18a60d(0x124);function openAnalytics(){const _0x7ed6e4=a2_0x18a60d,_0x2e9bfb=document['querySelector']('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x7ed6e4(0x124),_0x2e9bfb),closeAllSheets(),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x5b388f,_0x390eed){const _0x247dc5=a2_0x18a60d;currentAnPeriod=_0x5b388f,document[_0x247dc5(0xf2)](_0x247dc5(0x186))[_0x247dc5(0x16f)](_0xf91163=>_0xf91163[_0x247dc5(0xa9)][_0x247dc5(0xdc)]('active'));if(_0x390eed)_0x390eed[_0x247dc5(0xa9)][_0x247dc5(0x135)](_0x247dc5(0x1c1));const _0x360332=document[_0x247dc5(0x1c3)]('anCustomDates');_0x360332[_0x247dc5(0x1e9)]['display']=_0x5b388f===_0x247dc5(0x1f0)?_0x247dc5(0x182):_0x247dc5(0x104);const _0x6479cb=new Date();let _0x40a0db=new Date(),_0x4a820c=new Date();if(_0x5b388f===_0x247dc5(0x124))_0x40a0db=getStartOfWeek(_0x6479cb),_0x4a820c=new Date(_0x40a0db),_0x4a820c['setDate'](_0x4a820c[_0x247dc5(0xf4)]()+0x6);else{if(_0x5b388f===_0x247dc5(0x168))_0x40a0db=new Date(_0x6479cb[_0x247dc5(0x226)](),_0x6479cb[_0x247dc5(0x1ce)](),0x1),_0x4a820c=new Date(_0x6479cb[_0x247dc5(0x226)](),_0x6479cb['getMonth']()+0x1,0x0);else{!document[_0x247dc5(0x1c3)](_0x247dc5(0x166))[_0x247dc5(0x1bb)]&&(document[_0x247dc5(0x1c3)](_0x247dc5(0x166))[_0x247dc5(0x1bb)]=getLocalDateStr(_0x6479cb),document[_0x247dc5(0x1c3)](_0x247dc5(0x150))[_0x247dc5(0x1bb)]=getLocalDateStr(_0x6479cb));refreshAnalytics();return;}}document[_0x247dc5(0x1c3)](_0x247dc5(0x166))[_0x247dc5(0x1bb)]=getLocalDateStr(_0x40a0db),document[_0x247dc5(0x1c3)](_0x247dc5(0x150))['value']=getLocalDateStr(_0x4a820c),refreshAnalytics();}function refreshAnalytics(){const _0x2aeb9b=a2_0x18a60d,_0x162f25=document[_0x2aeb9b(0x1c3)](_0x2aeb9b(0x166))[_0x2aeb9b(0x1bb)],_0x4b2350=document[_0x2aeb9b(0x1c3)]('anEnd')['value'];if(!_0x162f25||!_0x4b2350)return;const _0x1a5dae=sessions['filter'](_0x545f15=>_0x545f15['dateStr']>=_0x162f25&&_0x545f15['dateStr']<=_0x4b2350&&_0x545f15[_0x2aeb9b(0x12b)]!==_0x2aeb9b(0x1fd)),_0x2800cf=_0x1a5dae[_0x2aeb9b(0x1f1)],_0x3a02b2=_0x1a5dae['filter'](_0x3fa65e=>_0x3fa65e['status']===_0x2aeb9b(0x224))[_0x2aeb9b(0x1f1)],_0x2050dc=_0x2800cf>0x0?Math[_0x2aeb9b(0x1e7)](_0x3a02b2/_0x2800cf*0x64):0x0;document[_0x2aeb9b(0x1c3)](_0x2aeb9b(0x21d))['textContent']=_0x2050dc+'%',document[_0x2aeb9b(0x1c3)](_0x2aeb9b(0x108))[_0x2aeb9b(0xc9)]=_0x3a02b2+_0x2aeb9b(0x167)+_0x2800cf+_0x2aeb9b(0x1d9);const _0x560b34=document[_0x2aeb9b(0x1c3)](_0x2aeb9b(0x133)),_0x3d72ba=0x2*Math['PI']*0x23,_0x469f99=_0x3d72ba-_0x2050dc/0x64*_0x3d72ba;_0x560b34[_0x2aeb9b(0x1e9)]['strokeDashoffset']=_0x469f99;const _0x498b47={};_0x1a5dae['forEach'](_0x3a4b20=>{const _0x4ee1c1=_0x2aeb9b;if(!_0x498b47[_0x3a4b20['client']]){const _0x4124d0=clients[_0x4ee1c1(0x175)](_0x20175e=>_0x20175e[_0x4ee1c1(0x170)]===_0x3a4b20[_0x4ee1c1(0x227)]);_0x498b47[_0x3a4b20[_0x4ee1c1(0x227)]]={'total':0x0,'done':0x0,'color':_0x4124d0?_0x4124d0['color']:_0x4ee1c1(0xb5)};}_0x498b47[_0x3a4b20[_0x4ee1c1(0x227)]]['total']++;if(_0x3a4b20['status']===_0x4ee1c1(0x224))_0x498b47[_0x3a4b20['client']]['done']++;});const _0x4fb96f=document['getElementById'](_0x2aeb9b(0x1d1));_0x4fb96f[_0x2aeb9b(0x112)]='';const _0x21c8b3=Object[_0x2aeb9b(0x163)](_0x498b47)[_0x2aeb9b(0x113)]((_0x1bb6d9,_0x369852)=>_0x369852[0x1][_0x2aeb9b(0x1f7)]-_0x1bb6d9[0x1][_0x2aeb9b(0x1f7)]);if(_0x21c8b3['length']===0x0){_0x4fb96f[_0x2aeb9b(0x112)]=_0x2aeb9b(0xd7);return;}_0x21c8b3['forEach'](([_0x3b3d79,_0x34e81c])=>{const _0x4121fd=_0x2aeb9b,_0xb1c901=Math[_0x4121fd(0x1e7)](_0x34e81c[_0x4121fd(0xcb)]/_0x34e81c['total']*0x64),_0x3ed1be=document[_0x4121fd(0x1f2)](_0x4121fd(0x1d7));_0x3ed1be[_0x4121fd(0x188)]=_0x4121fd(0x118),_0x3ed1be[_0x4121fd(0x1e9)][_0x4121fd(0x191)]=_0x34e81c[_0x4121fd(0x11c)],_0x3ed1be[_0x4121fd(0x112)]=_0x4121fd(0xad)+_0x3b3d79+_0x4121fd(0x160)+_0x34e81c[_0x4121fd(0xcb)]+_0x4121fd(0x197)+_0x34e81c['total']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0xb1c901+_0x4121fd(0xbc),_0x4fb96f[_0x4121fd(0x216)](_0x3ed1be);});}function formatMinsToHrs(_0x5b51e8){const _0x23cbfb=a2_0x18a60d;if(_0x5b51e8===0x0)return'0';const _0x2a8e00=Math[_0x23cbfb(0x14d)](_0x5b51e8/0x3c),_0x125d1c=_0x5b51e8%0x3c;if(_0x125d1c===0x0)return _0x2a8e00+'ч';return _0x2a8e00+'ч\x20'+_0x125d1c+'м';}