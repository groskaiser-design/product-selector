const a2_0x4860a0=a2_0x1b11;(function(_0x467b1a,_0x1c3e39){const _0x3c5726=a2_0x1b11,_0x47a882=_0x467b1a();while(!![]){try{const _0x1a27d5=-parseInt(_0x3c5726(0x223))/0x1+-parseInt(_0x3c5726(0x246))/0x2+-parseInt(_0x3c5726(0x2ac))/0x3*(-parseInt(_0x3c5726(0x1d2))/0x4)+parseInt(_0x3c5726(0x231))/0x5*(-parseInt(_0x3c5726(0x310))/0x6)+-parseInt(_0x3c5726(0x2d4))/0x7*(parseInt(_0x3c5726(0x22e))/0x8)+parseInt(_0x3c5726(0x248))/0x9+-parseInt(_0x3c5726(0x25a))/0xa*(-parseInt(_0x3c5726(0x2cd))/0xb);if(_0x1a27d5===_0x1c3e39)break;else _0x47a882['push'](_0x47a882['shift']());}catch(_0x4c7f71){_0x47a882['push'](_0x47a882['shift']());}}}(a2_0x274b,0x6cf9c),function initTMA(){const _0x3f8520=a2_0x1b11,_0x3d1a20=(function(){let _0x3441e8=!![];return function(_0x36132e,_0x102b29){const _0xd0046c=_0x3441e8?function(){const _0x5b80b8=a2_0x1b11;if(_0x102b29){const _0x5e4da8=_0x102b29[_0x5b80b8(0x335)](_0x36132e,arguments);return _0x102b29=null,_0x5e4da8;}}:function(){};return _0x3441e8=![],_0xd0046c;};}()),_0x3a2dc9=_0x3d1a20(this,function(){const _0x1f2921=a2_0x1b11;return _0x3a2dc9[_0x1f2921(0x329)]()[_0x1f2921(0x1fe)](_0x1f2921(0x1d7))['toString']()[_0x1f2921(0x27e)](_0x3a2dc9)[_0x1f2921(0x1fe)](_0x1f2921(0x1d7));});_0x3a2dc9();try{const _0x188269=window['Telegram']?.['WebApp'];if(!_0x188269)return;_0x188269[_0x3f8520(0x2ea)](),_0x188269['expand']();try{_0x188269[_0x3f8520(0x2f4)](_0x3f8520(0x23d)),_0x188269[_0x3f8520(0x301)]&&_0x188269[_0x3f8520(0x301)](_0x3f8520(0x23d));}catch(_0x4cd231){console[_0x3f8520(0x2d8)]('Error\x20setting\x20color:',_0x4cd231);}try{_0x188269[_0x3f8520(0x339)]&&(_0x188269['BackButton'][_0x3f8520(0x218)](),_0x188269[_0x3f8520(0x339)]['offClick'](),_0x188269['BackButton'][_0x3f8520(0x205)](function(){const _0x254e00=_0x3f8520;window[_0x254e00(0x23b)][_0x254e00(0x2b7)]='router.html';}));}catch(_0x21dc6d){console[_0x3f8520(0x2d8)]('Error\x20setting\x20back\x20button:',_0x21dc6d);}try{if(_0x188269['disableVerticalSwipes'])_0x188269[_0x3f8520(0x293)]();}catch(_0x5ae5fb){}}catch(_0x3705cd){console[_0x3f8520(0x269)](_0x3f8520(0x306),_0x3705cd);}}());function isAdmin(){const _0x5105e2=a2_0x1b11;try{const _0xdd9721=Number(window[_0x5105e2(0x237)]?.[_0x5105e2(0x2a1)]?.[_0x5105e2(0x228)]?.['user']?.['id']);return _0xdd9721===0xbaf7174;}catch(_0x56f9c6){return![];}}const APP_VERSION='v9.0-BATCH-CALENDAR',API_URL=a2_0x4860a0(0x1f8),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x4860a0(0x1d0),KEY_SESSIONS='uc_sessions_v9',KEY_SETTINGS=a2_0x4860a0(0x1fd);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x7d1694=a2_0x4860a0;return window[_0x7d1694(0x237)]?.[_0x7d1694(0x2a1)]?.['initDataUnsafe']?.[_0x7d1694(0x2ba)]?.['id']||'guest';},'saveLocally'(){const _0x138faa=a2_0x4860a0;try{localStorage[_0x138faa(0x31b)](KEY_CLIENTS,JSON[_0x138faa(0x253)](clients)),localStorage[_0x138faa(0x31b)](KEY_SESSIONS,JSON[_0x138faa(0x253)](sessions)),localStorage[_0x138faa(0x31b)](KEY_SETTINGS,JSON[_0x138faa(0x253)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x3a518e){console['error'](_0x138faa(0x1e6),_0x3a518e);}},'loadLocal'(){const _0x5a0561=a2_0x4860a0;try{const _0x3426d6=localStorage[_0x5a0561(0x2f0)](KEY_CLIENTS);if(_0x3426d6)clients=JSON['parse'](_0x3426d6);const _0x5a2c9a=localStorage[_0x5a0561(0x2f0)](KEY_SESSIONS);if(_0x5a2c9a)sessions=JSON['parse'](_0x5a2c9a);const _0x2c4571=localStorage[_0x5a0561(0x2f0)](KEY_SETTINGS);if(_0x2c4571){const _0x135e2f=JSON[_0x5a0561(0x221)](_0x2c4571);if(_0x135e2f[_0x5a0561(0x2e3)])availabilityPattern=_0x135e2f[_0x5a0561(0x2e3)];if(_0x135e2f[_0x5a0561(0x2a9)])dateExceptions=_0x135e2f['exceptions'];if(_0x135e2f[_0x5a0561(0x2f9)])specialRanges=_0x135e2f[_0x5a0561(0x2f9)];}else{for(let _0x12086e=0x0;_0x12086e<0x7;_0x12086e++)availabilityPattern[_0x12086e]=Array[_0x5a0561(0x20e)]({'length':0xc},(_0x382ae1,_0x101176)=>_0x101176+0x9);}}catch(_0x570238){console[_0x5a0561(0x269)](_0x5a0561(0x2a4),_0x570238);}},async 'fetchFromServer'(_0x2ae7ab,_0x5c8169={}){const _0x8bc86a=a2_0x4860a0,_0x24e4e8=window[_0x8bc86a(0x237)]?.[_0x8bc86a(0x2a1)],_0x50ba85={'action':_0x2ae7ab,'init_data':_0x24e4e8?.['initData']||'',..._0x5c8169};try{const _0x20bc73=await fetch(API_URL,{'method':_0x8bc86a(0x1cf),'headers':{'Content-Type':_0x8bc86a(0x27d)},'body':JSON[_0x8bc86a(0x253)](_0x50ba85)}),_0x425f04=await _0x20bc73[_0x8bc86a(0x321)]();if(!_0x425f04['ok'])throw new Error(_0x425f04[_0x8bc86a(0x269)]||_0x8bc86a(0x26d));return _0x425f04[_0x8bc86a(0x33d)];}catch(_0xf60168){console[_0x8bc86a(0x269)]('[API\x20'+_0x2ae7ab+_0x8bc86a(0x200),_0xf60168);throw _0xf60168;}},async 'syncLoad'(){const _0x202071=a2_0x4860a0,_0x4e6807=new Date(),_0x45dffb=_0x4e6807[_0x202071(0x25c)]()+'-'+String(_0x4e6807[_0x202071(0x2c9)]()+0x1)['padStart'](0x2,'0'),_0x4a5653=new Date(_0x4e6807);_0x4a5653[_0x202071(0x1e1)](_0x4e6807[_0x202071(0x2c9)]()+0x1);const _0x1fd595=_0x4a5653[_0x202071(0x25c)]()+'-'+String(_0x4a5653[_0x202071(0x2c9)]()+0x1)[_0x202071(0x26f)](0x2,'0'),_0x516632=Date[_0x202071(0x322)]();console[_0x202071(0x2d8)]('[Sync]\x20Loading\x20'+_0x45dffb+',\x20'+_0x1fd595+_0x202071(0x331));try{const [_0x4e3495,_0x4fee46]=await Promise[_0x202071(0x260)]([this[_0x202071(0x291)](_0x202071(0x327),{'month_str':_0x45dffb}),this[_0x202071(0x291)](_0x202071(0x327),{'month_str':_0x1fd595})]);if(lastUserActionTime>_0x516632)return console[_0x202071(0x29f)]('[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response'),![];return this['mergeServerData'](_0x4e3495,_0x45dffb),this['mergeServerData'](_0x4fee46,_0x1fd595),this[_0x202071(0x2c3)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x590102){console[_0x202071(0x269)](_0x590102);throw _0x590102;}},'mergeServerData'(_0x2c0eb3,_0x4964b8){const _0x29059c=a2_0x4860a0;if(!_0x2c0eb3)return;_0x2c0eb3['clients']&&Array[_0x29059c(0x33b)](_0x2c0eb3[_0x29059c(0x1f1)])&&(clients=_0x2c0eb3[_0x29059c(0x1f1)]);if(_0x2c0eb3[_0x29059c(0x309)]){if(_0x2c0eb3[_0x29059c(0x309)][_0x29059c(0x2e3)])availabilityPattern=_0x2c0eb3['settings']['pattern'];if(_0x2c0eb3[_0x29059c(0x309)][_0x29059c(0x2a9)])dateExceptions=_0x2c0eb3[_0x29059c(0x309)]['exceptions'];if(_0x2c0eb3[_0x29059c(0x309)][_0x29059c(0x2f9)])specialRanges=_0x2c0eb3['settings']['ranges'];if(_0x2c0eb3[_0x29059c(0x309)][_0x29059c(0x2d0)]){localStorage[_0x29059c(0x31b)](_0x29059c(0x232),_0x2c0eb3[_0x29059c(0x309)][_0x29059c(0x2d0)]);const _0x531fbe=document[_0x29059c(0x26a)](_0x29059c(0x314));if(_0x531fbe)_0x531fbe[_0x29059c(0x1df)]=_0x2c0eb3[_0x29059c(0x309)][_0x29059c(0x2d0)];}}_0x2c0eb3[_0x29059c(0x2aa)]&&(sessions=sessions[_0x29059c(0x224)](_0x3be6df=>!_0x3be6df[_0x29059c(0x2ca)][_0x29059c(0x33e)](_0x4964b8)),Object[_0x29059c(0x1d1)](_0x2c0eb3[_0x29059c(0x2aa)])['forEach'](_0x55d725=>{const _0x523bc7=_0x29059c,_0x5c4f8a=_0x2c0eb3['calendar'][_0x55d725];_0x5c4f8a[_0x523bc7(0x274)](_0xacb749=>{const _0x2cb6c0=_0x523bc7,_0x17ac32=clients['find'](_0x4ed125=>String(_0x4ed125['id'])===String(_0xacb749['c']));sessions[_0x2cb6c0(0x320)]({'id':_0xacb749['i'],'clientId':_0xacb749['c'],'client':_0x17ac32?_0x17ac32[_0x2cb6c0(0x23e)]:_0x2cb6c0(0x226),'dateStr':_0x4964b8+'-'+_0x55d725[_0x2cb6c0(0x26f)](0x2,'0'),'start':_0xacb749['s'],'end':_0xacb749['e'],'status':_0xacb749['st']||'planned','note':_0xacb749['n']||'','seriesId':_0xacb749[_0x2cb6c0(0x1f9)]||null});});}));},async 'syncBatch'(_0x536627){const _0x312ea3=a2_0x4860a0,_0x4d1cbf=[...new Set(_0x536627)],_0x1f593e=_0x4d1cbf[_0x312ea3(0x30d)](_0x2470a3=>{const _0x88cc2b=_0x312ea3,_0x5bfa62=sessions[_0x88cc2b(0x224)](_0xf29224=>_0xf29224[_0x88cc2b(0x2ca)]===_0x2470a3&&_0xf29224[_0x88cc2b(0x326)]!==_0x88cc2b(0x328)),_0x41b6fb=_0x5bfa62[_0x88cc2b(0x30d)](_0x14a244=>({'i':_0x14a244['id'],'c':_0x14a244[_0x88cc2b(0x22b)],'s':_0x14a244[_0x88cc2b(0x284)],'e':_0x14a244[_0x88cc2b(0x2d3)],'st':_0x14a244[_0x88cc2b(0x326)],'n':_0x14a244[_0x88cc2b(0x2d6)],'sid':_0x14a244[_0x88cc2b(0x2a8)]}));return{'date':_0x2470a3,'day_data':_0x41b6fb};});if(_0x1f593e[_0x312ea3(0x338)]===0x0)return;console[_0x312ea3(0x2d8)]('[Sync]\x20Pushing\x20batch\x20updates\x20for\x20'+_0x1f593e[_0x312ea3(0x338)]+'\x20days'),await this[_0x312ea3(0x291)](_0x312ea3(0x33a),{'changes':_0x1f593e});}};async function init(){const _0x5e6ac1=a2_0x4860a0;DataManager[_0x5e6ac1(0x243)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x5e6ac1(0x26a)](_0x5e6ac1(0x340))[_0x5e6ac1(0x266)](_0x5e6ac1(0x2a6),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x5e6ac1(0x1f6)]()['then'](()=>{const _0x432f94=_0x5e6ac1;showToast(_0x432f94(0x26c),!![]);})[_0x5e6ac1(0x30e)](_0x36deb5=>{const _0x5640db=_0x5e6ac1;showToast(_0x5640db(0x220),![]);});}function generateId(){const _0xbe4f41=a2_0x4860a0;return Date[_0xbe4f41(0x322)]()[_0xbe4f41(0x329)](0x24)+Math['random']()['toString'](0x24)['substr'](0x2,0x5);}function toggleSeriesInput(){const _0x3bc961=a2_0x4860a0,_0x15a694=document[_0x3bc961(0x26a)]('inpRecurring')[_0x3bc961(0x1dd)],_0x10cd5b=document[_0x3bc961(0x26a)](_0x3bc961(0x2c7));_0x10cd5b[_0x3bc961(0x1f0)]['display']=_0x15a694?_0x3bc961(0x22c):'none';const _0xd5411=document[_0x3bc961(0x26a)](_0x3bc961(0x298));_0xd5411['style'][_0x3bc961(0x29e)]=_0x15a694?'10px\x2010px\x200\x200':_0x3bc961(0x209);}function openAddSession(_0x3566a8){const _0x45680f=a2_0x4860a0;editingId=null,populateClientSelect(),document['getElementById'](_0x45680f(0x2e0))[_0x45680f(0x245)]=_0x45680f(0x268),document['getElementById'](_0x45680f(0x2e1))['style']['display']=_0x45680f(0x2ef),document['getElementById']('btnStatusToggle')[_0x45680f(0x1f0)][_0x45680f(0x2d7)]=_0x45680f(0x2ef);const _0x39d171=document[_0x45680f(0x26a)]('recurringOptionContainer'),_0x77fb5f=document[_0x45680f(0x26a)](_0x45680f(0x2c7));_0x39d171[_0x45680f(0x1f0)]['display']=_0x45680f(0x211),_0x39d171[_0x45680f(0x1f0)][_0x45680f(0x29e)]=_0x45680f(0x209),document[_0x45680f(0x26a)](_0x45680f(0x341))[_0x45680f(0x1dd)]=![],document[_0x45680f(0x26a)]('inpSeriesCount')[_0x45680f(0x1df)]=0x4,_0x77fb5f['style']['display']=_0x45680f(0x2ef),document[_0x45680f(0x26a)](_0x45680f(0x1fa))[_0x45680f(0x1df)]=getLocalDateStr(_0x3566a8),updateDateDisplay();const _0x3e8c29=_0x3566a8['getHours']();document[_0x45680f(0x26a)]('inpStart')[_0x45680f(0x1df)]=String(_0x3e8c29)[_0x45680f(0x26f)](0x2,'0')+_0x45680f(0x21d),document[_0x45680f(0x26a)](_0x45680f(0x256))[_0x45680f(0x1df)]=String(_0x3e8c29+0x1)[_0x45680f(0x26f)](0x2,'0')+_0x45680f(0x21d),openSheet(_0x45680f(0x1e9));}function openEdit(_0x539e3d){const _0x35c5b8=a2_0x4860a0;editingId=_0x539e3d['id'],populateClientSelect(),document[_0x35c5b8(0x26a)](_0x35c5b8(0x2e0))[_0x35c5b8(0x245)]='Редактировать',document[_0x35c5b8(0x26a)]('btnDelete')['style'][_0x35c5b8(0x2d7)]='block';const _0x5b7093=document[_0x35c5b8(0x26a)](_0x35c5b8(0x2a2));_0x5b7093[_0x35c5b8(0x1f0)][_0x35c5b8(0x2d7)]=_0x35c5b8(0x211);_0x539e3d[_0x35c5b8(0x326)]===_0x35c5b8(0x203)?(_0x5b7093[_0x35c5b8(0x2da)]=_0x35c5b8(0x258),_0x5b7093[_0x35c5b8(0x236)]=_0x35c5b8(0x27b)):(_0x5b7093[_0x35c5b8(0x2da)]='btn-status-toggle',_0x5b7093[_0x35c5b8(0x236)]=_0x35c5b8(0x273));const _0x5a487d=!!_0x539e3d[_0x35c5b8(0x2a8)];document[_0x35c5b8(0x26a)](_0x35c5b8(0x298))[_0x35c5b8(0x1f0)][_0x35c5b8(0x2d7)]=_0x35c5b8(0x2ef),document['getElementById'](_0x35c5b8(0x2c7))[_0x35c5b8(0x1f0)][_0x35c5b8(0x2d7)]=_0x35c5b8(0x2ef),_0x5a487d?(document['getElementById'](_0x35c5b8(0x2d1))[_0x35c5b8(0x1f0)]['display']='flex',document[_0x35c5b8(0x26a)](_0x35c5b8(0x2d1))[_0x35c5b8(0x2d5)](_0x35c5b8(0x288))[_0x35c5b8(0x245)]=_0x35c5b8(0x308)):document[_0x35c5b8(0x26a)]('patternInfoBox')[_0x35c5b8(0x1f0)][_0x35c5b8(0x2d7)]=_0x35c5b8(0x2ef),document[_0x35c5b8(0x26a)](_0x35c5b8(0x22f))[_0x35c5b8(0x1df)]=_0x539e3d['client'],document[_0x35c5b8(0x26a)](_0x35c5b8(0x1fa))[_0x35c5b8(0x1df)]=_0x539e3d['dateStr'],document[_0x35c5b8(0x26a)](_0x35c5b8(0x2ad))[_0x35c5b8(0x1df)]=_0x539e3d[_0x35c5b8(0x284)],document[_0x35c5b8(0x26a)](_0x35c5b8(0x256))[_0x35c5b8(0x1df)]=_0x539e3d['end'],document[_0x35c5b8(0x26a)](_0x35c5b8(0x21a))[_0x35c5b8(0x1df)]=_0x539e3d['note']||'',updateDateDisplay(),openSheet(_0x35c5b8(0x1e9));}async function trySaveSession(){const _0x10f185=a2_0x4860a0,_0x1ec006=document[_0x10f185(0x26a)](_0x10f185(0x22f))[_0x10f185(0x1df)],_0x6628bd=document['getElementById'](_0x10f185(0x1fa))[_0x10f185(0x1df)],_0x1194cf=document[_0x10f185(0x26a)](_0x10f185(0x2ad))[_0x10f185(0x1df)],_0x4fee9a=document['getElementById'](_0x10f185(0x256))[_0x10f185(0x1df)],_0x1ad350=document[_0x10f185(0x26a)](_0x10f185(0x21a))[_0x10f185(0x1df)],_0x54f646=document['getElementById']('inpRecurring')[_0x10f185(0x1dd)];let _0x350cc3=0x4;if(_0x54f646){const _0x1e1f1c=parseInt(document[_0x10f185(0x26a)](_0x10f185(0x1da))[_0x10f185(0x1df)]);if(!_0x1e1f1c||_0x1e1f1c<0x2){showToast('Минимум\x202\x20тренировки',![]);return;}if(_0x1e1f1c>0x64){showToast(_0x10f185(0x296),![]);return;}_0x350cc3=_0x1e1f1c;}const _0x29cd98=clients['find'](_0x1b6c86=>_0x1b6c86[_0x10f185(0x23e)]===_0x1ec006);if(!_0x29cd98){showToast(_0x10f185(0x2b6),![]);return;}const _0x12020d=validateAppointment(_0x6628bd,_0x1194cf,_0x4fee9a,editingId,_0x29cd98['id']);if(!_0x12020d['valid']){showToast(_0x12020d['msg'],![]);return;}_0x12020d[_0x10f185(0x29b)]&&showToast(_0x12020d[_0x10f185(0x29b)],![]);const _0x3f2a57={'client':_0x1ec006,'clientId':_0x29cd98['id'],'start':_0x1194cf,'end':_0x4fee9a,'note':_0x1ad350,'status':_0x10f185(0x1eb)},_0x34e466=editingId?sessions[_0x10f185(0x277)](_0x58b616=>_0x58b616['id']===editingId):null;if(_0x34e466&&_0x34e466[_0x10f185(0x2a8)]){tempSessionData={..._0x3f2a57,'dateStr':_0x6628bd,'id':editingId,'seriesId':_0x34e466['seriesId']},openActionSheet('save');return;}let _0x2df44b=null;if(!editingId)_0x2df44b=_0x10f185(0x2ab);else{if(_0x34e466){if(String(_0x34e466[_0x10f185(0x22b)])!==String(_0x29cd98['id']))console[_0x10f185(0x2d8)](_0x10f185(0x2ed)),NotificationManager[_0x10f185(0x2f1)](_0x10f185(0x2c6),_0x34e466),_0x2df44b=_0x10f185(0x2ab);else(_0x34e466[_0x10f185(0x284)]!==_0x1194cf||_0x34e466[_0x10f185(0x2d3)]!==_0x4fee9a||_0x34e466[_0x10f185(0x2ca)]!==_0x6628bd)&&(_0x2df44b=_0x10f185(0x206));}}if(!editingId&&_0x54f646){createBatchSeries(_0x3f2a57,_0x6628bd,_0x350cc3),NotificationManager[_0x10f185(0x2f1)]('create',{..._0x3f2a57,'dateStr':_0x6628bd});return;}lastUserActionTime=Date[_0x10f185(0x322)]();const _0x521e62={..._0x3f2a57,'dateStr':_0x6628bd,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x521e62),_0x2df44b&&NotificationManager[_0x10f185(0x2f1)](_0x2df44b,_0x521e62);}function toggleSessionStatus(){const _0x6107ac=a2_0x4860a0;lastUserActionTime=Date[_0x6107ac(0x322)]();const _0x1565fd=sessions[_0x6107ac(0x277)](_0x75a3f4=>_0x75a3f4['id']===editingId);if(!_0x1565fd)return;const _0x2a4b20=_0x1565fd['status']===_0x6107ac(0x203)?_0x6107ac(0x1eb):_0x6107ac(0x203);_0x1565fd['status']=_0x2a4b20,saveSingleSession(_0x1565fd),_0x2a4b20===_0x6107ac(0x203)&&NotificationManager[_0x6107ac(0x2f1)](_0x6107ac(0x315),_0x1565fd),showToast(_0x2a4b20==='completed'?'Тренировка\x20завершена':_0x6107ac(0x225),!![]);}function validateAppointment(_0x52e68c,_0x2a2d90,_0x11e666,_0x284af3,_0x5417a2){const _0x3a946c=a2_0x4860a0,[_0x2b920a,_0x6710cc]=_0x2a2d90[_0x3a946c(0x25d)](':')[_0x3a946c(0x30d)](Number),[_0x1a9941,_0x5892fa]=_0x11e666[_0x3a946c(0x25d)](':')['map'](Number),_0x3db5a3=_0x2b920a*0x3c+_0x6710cc,_0x21d463=_0x1a9941*0x3c+_0x5892fa,_0x21333d=String(_0x5417a2);let _0x29297a=![],_0x5405b3='';for(let _0x995dc5 of sessions){if(_0x995dc5['dateStr']!==_0x52e68c)continue;if(_0x995dc5[_0x3a946c(0x326)]==='cancelled')continue;if(_0x284af3&&String(_0x995dc5['id'])===String(_0x284af3))continue;const [_0x65d18a,_0x111cfe]=_0x995dc5[_0x3a946c(0x284)]['split'](':')[_0x3a946c(0x30d)](Number),[_0x54d360,_0x469c01]=_0x995dc5[_0x3a946c(0x2d3)][_0x3a946c(0x25d)](':')[_0x3a946c(0x30d)](Number),_0x13dbe5=_0x65d18a*0x3c+_0x111cfe,_0x4ff690=_0x54d360*0x3c+_0x469c01;if(Math[_0x3a946c(0x282)](_0x3db5a3,_0x13dbe5)<Math['min'](_0x21d463,_0x4ff690)){if(_0x995dc5['clientId']&&String(_0x995dc5['clientId'])===_0x21333d)return{'valid':![],'msg':_0x3a946c(0x2fe)+_0x995dc5[_0x3a946c(0x30c)]+_0x3a946c(0x29a)};_0x29297a=!![],_0x5405b3=_0x995dc5[_0x3a946c(0x30c)];}}if(_0x29297a)return{'valid':!![],'warning':_0x3a946c(0x2b5)+_0x5405b3};return{'valid':!![]};}function saveSingleSession(_0x5c2998){const _0x4dc7e5=a2_0x4860a0;if(editingId){const _0xcdca6a=sessions['findIndex'](_0x57eff9=>_0x57eff9['id']===editingId);if(_0xcdca6a!==-0x1)sessions[_0xcdca6a]=_0x5c2998;}else sessions[_0x4dc7e5(0x320)](_0x5c2998);afterSaveAction([_0x5c2998[_0x4dc7e5(0x2ca)]]);}function createBatchSeries(_0xc40512,_0x1a11d0,_0xe09678){const _0x1007f9=a2_0x4860a0,_0x23028c=generateId(),_0x1ea730=[],_0x2d586d=[];let _0x52bc71=0x0,_0x49ac97=new Date(_0x1a11d0);for(let _0x1ee4d2=0x0;_0x1ee4d2<_0xe09678;_0x1ee4d2++){const _0x2f4815=getLocalDateStr(_0x49ac97),_0x49faf7=validateAppointment(_0x2f4815,_0xc40512['start'],_0xc40512[_0x1007f9(0x2d3)],null,_0xc40512['clientId']);if(!_0x49faf7[_0x1007f9(0x32e)])console[_0x1007f9(0x2d8)](_0x1007f9(0x259)+_0x2f4815+':\x20Client\x20already\x20booked'),_0x52bc71++;else{const _0x1da0f0={..._0xc40512,'id':generateId(),'dateStr':_0x2f4815,'seriesId':_0x23028c};_0x2d586d[_0x1007f9(0x320)](_0x1da0f0),_0x1ea730[_0x1007f9(0x320)](_0x2f4815);}_0x49ac97['setDate'](_0x49ac97[_0x1007f9(0x1ea)]()+0x7);}if(_0x2d586d['length']===0x0){showToast('Все\x20даты\x20заняты\x20этим\x20клиентом!',![]);return;}sessions[_0x1007f9(0x320)](..._0x2d586d),lastUserActionTime=Date['now']();let _0x17c953=_0x1007f9(0x272)+_0x2d586d[_0x1007f9(0x338)];_0x52bc71>0x0&&(_0x17c953+=_0x1007f9(0x2f6)+_0x52bc71+')'),showToast(_0x17c953,!![]),afterSaveAction(_0x1ea730);}function updateSeriesBatch(_0x4d7ffa,_0x12a058){const _0x4417ac=a2_0x4860a0,_0xee5dc2=[],_0x51eddd=_0x12a058['seriesId'];if(_0x4d7ffa===_0x4417ac(0x2fd)){const _0x37b79e={..._0x12a058,'seriesId':null},_0x3e2133=sessions[_0x4417ac(0x25b)](_0x39a3d7=>_0x39a3d7['id']===_0x12a058['id']);if(_0x3e2133!==-0x1)sessions[_0x3e2133]=_0x37b79e;_0xee5dc2['push'](_0x37b79e[_0x4417ac(0x2ca)]);}else{if(_0x4d7ffa===_0x4417ac(0x2cc)){const _0x6627d7=_0x12a058[_0x4417ac(0x2ca)];sessions[_0x4417ac(0x274)]((_0x519aa1,_0x5bfb3c)=>{const _0x130798=_0x4417ac;_0x519aa1['seriesId']===_0x51eddd&&_0x519aa1[_0x130798(0x2ca)]>=_0x6627d7&&(sessions[_0x5bfb3c]={...sessions[_0x5bfb3c],'start':_0x12a058[_0x130798(0x284)],'end':_0x12a058[_0x130798(0x2d3)],'note':_0x12a058[_0x130798(0x2d6)],'client':_0x12a058[_0x130798(0x30c)],'clientId':_0x12a058[_0x130798(0x22b)]},_0xee5dc2[_0x130798(0x320)](_0x519aa1[_0x130798(0x2ca)]));});}}afterSaveAction(_0xee5dc2);}function tryDeleteSession(){const _0x22c99d=a2_0x4860a0,_0x32c9c0=sessions[_0x22c99d(0x277)](_0x13dbfd=>_0x13dbfd['id']===editingId);if(!_0x32c9c0)return;_0x32c9c0['seriesId']?openActionSheet(_0x22c99d(0x255)):commitDelete(_0x22c99d(0x2fd),_0x32c9c0);}function a2_0x1b11(_0x45f19c,_0x2c241e){_0x45f19c=_0x45f19c-0x1ce;const _0x1f7850=a2_0x274b();let _0x215474=_0x1f7850[_0x45f19c];return _0x215474;}function commitDelete(_0x58f47c,_0x2e50f7){const _0x144bd7=a2_0x4860a0;lastUserActionTime=Date[_0x144bd7(0x322)](),NotificationManager[_0x144bd7(0x2f1)](_0x144bd7(0x2c6),_0x2e50f7);const _0x18fb6d=[];if(_0x58f47c==='single')sessions=sessions[_0x144bd7(0x224)](_0x49a459=>_0x49a459['id']!==_0x2e50f7['id']),_0x18fb6d['push'](_0x2e50f7[_0x144bd7(0x2ca)]);else{if(_0x58f47c===_0x144bd7(0x2cc)){const _0x4bab3c=_0x2e50f7['dateStr'],_0x1cec21=_0x2e50f7[_0x144bd7(0x2a8)];sessions['forEach'](_0x5053ba=>{const _0x592148=_0x144bd7;_0x5053ba[_0x592148(0x2a8)]===_0x1cec21&&_0x5053ba['dateStr']>=_0x4bab3c&&_0x18fb6d[_0x592148(0x320)](_0x5053ba[_0x592148(0x2ca)]);}),sessions=sessions[_0x144bd7(0x224)](_0x5abc2e=>!(_0x5abc2e[_0x144bd7(0x2a8)]===_0x1cec21&&_0x5abc2e[_0x144bd7(0x2ca)]>=_0x4bab3c));}}afterSaveAction(_0x18fb6d);}function afterSaveAction(_0x5e0a5d){const _0x135df3=a2_0x4860a0;DataManager['saveLocally'](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager['syncBatch'](_0x5e0a5d)['then'](()=>console[_0x135df3(0x2d8)]('Batch\x20Sync\x20OK'))[_0x135df3(0x30e)](_0x4daae9=>showToast(_0x135df3(0x267),![]));}const NotificationManager={'formatDate'(_0x590198){const _0x1e0918=a2_0x4860a0,_0x46f605=new Date(_0x590198),_0x203595={'weekday':_0x1e0918(0x27f),'day':_0x1e0918(0x2a0),'month':_0x1e0918(0x27f)};let _0xf814c9=_0x46f605[_0x1e0918(0x23f)](_0x1e0918(0x215),_0x203595);return _0xf814c9[_0x1e0918(0x297)](0x0)[_0x1e0918(0x336)]()+_0xf814c9[_0x1e0918(0x1e3)](0x1);},'getText'(_0x4c5f61,_0x46ff2f){const _0x148ad3=a2_0x4860a0,_0x43c74e=this[_0x148ad3(0x337)](_0x46ff2f[_0x148ad3(0x2ca)]);switch(_0x4c5f61){case _0x148ad3(0x2ab):return _0x148ad3(0x2f5)+(_0x148ad3(0x2e4)+_0x43c74e+'\x0a')+(_0x148ad3(0x2c0)+_0x46ff2f[_0x148ad3(0x284)]+'\x20—\x20'+_0x46ff2f[_0x148ad3(0x2d3)]+'\x0a\x0a')+_0x148ad3(0x313);case _0x148ad3(0x206):return _0x148ad3(0x238)+_0x148ad3(0x287)+(_0x148ad3(0x2ec)+_0x46ff2f[_0x148ad3(0x284)]+_0x148ad3(0x286)+_0x46ff2f[_0x148ad3(0x2d3)]+_0x148ad3(0x28d))+(_0x148ad3(0x2e4)+_0x43c74e);case _0x148ad3(0x2c6):return _0x148ad3(0x24a)+('Запись\x20на\x20<b>'+_0x43c74e+'\x20('+_0x46ff2f[_0x148ad3(0x284)]+_0x148ad3(0x2ee));case'complete':return'<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a'+_0x148ad3(0x20f)+_0x148ad3(0x240);default:return'';}},async 'send'(_0x27e66a,_0xd2aad5){const _0x2c48ec=a2_0x4860a0;console['log'](_0x2c48ec(0x1ef),_0x27e66a,_0xd2aad5);if(!_0xd2aad5){console['error'](_0x2c48ec(0x30a));return;}const _0x32630e=String(_0xd2aad5[_0x2c48ec(0x22b)]);console['log'](_0x2c48ec(0x202),_0x32630e);if(!_0xd2aad5[_0x2c48ec(0x22b)]||_0x32630e===_0x2c48ec(0x323)||_0x32630e===_0x2c48ec(0x1f3)){console['error']('[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!');if(_0xd2aad5[_0x2c48ec(0x30c)]){const _0xc61619=clients[_0x2c48ec(0x277)](_0x55d5d7=>_0x55d5d7[_0x2c48ec(0x23e)]===_0xd2aad5[_0x2c48ec(0x30c)]);if(_0xc61619)return console[_0x2c48ec(0x2d8)]('[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:',_0xc61619['id']),this['send'](_0x27e66a,{..._0xd2aad5,'clientId':_0xc61619['id']});}return;}if(_0x32630e['length']<0x5){console[_0x2c48ec(0x29f)](_0x2c48ec(0x31d),_0x32630e);return;}const _0x1cef8a=this[_0x2c48ec(0x334)](_0x27e66a,_0xd2aad5);if(!_0x1cef8a){console[_0x2c48ec(0x269)]('[Notify]\x20Error:\x20Text\x20generation\x20failed');return;}console[_0x2c48ec(0x2d8)]('[Notify]\x20Sending\x20to\x20GAS\x20for\x20'+_0x32630e+_0x2c48ec(0x331)),DataManager[_0x2c48ec(0x291)](_0x2c48ec(0x2d2),{'chatId':_0x32630e,'text':_0x1cef8a})[_0x2c48ec(0x32f)](_0x29cd3d=>console[_0x2c48ec(0x2d8)](_0x2c48ec(0x324),_0x29cd3d))['catch'](_0x20dbc7=>console['error']('[Notify]\x20Network\x20Failed',_0x20dbc7));}};function getLocalDateStr(_0x315684){const _0x5ef092=a2_0x4860a0,_0x72ddf3=_0x315684['getFullYear'](),_0x3e53f0=String(_0x315684[_0x5ef092(0x2c9)]()+0x1)[_0x5ef092(0x26f)](0x2,'0'),_0xf910b4=String(_0x315684[_0x5ef092(0x1ea)]())[_0x5ef092(0x26f)](0x2,'0');return _0x72ddf3+'-'+_0x3e53f0+'-'+_0xf910b4;}function getDateStr(_0x2de91f){const _0x185dd1=a2_0x4860a0,_0x880bf8=new Date();return _0x880bf8[_0x185dd1(0x295)](_0x880bf8[_0x185dd1(0x1ea)]()+_0x2de91f),getLocalDateStr(_0x880bf8);}function getStartOfWeek(_0x26d982){const _0x2fe609=a2_0x4860a0,_0x173722=new Date(_0x26d982),_0x55ed50=_0x173722['getDay'](),_0x2ca94e=_0x173722[_0x2fe609(0x1ea)]()-_0x55ed50+(_0x55ed50===0x0?-0x6:0x1);return _0x173722[_0x2fe609(0x295)](_0x2ca94e),_0x173722['setHours'](0x0,0x0,0x0,0x0),_0x173722;}function hexToRgba(_0x596179,_0x4a7af6){const _0x1d3997=a2_0x4860a0;if(!_0x596179)return _0x1d3997(0x2fa);let _0x45cc06=0x0,_0x472fe1=0x0,_0x22b816=0x0;if(_0x596179[_0x1d3997(0x338)]===0x4)_0x45cc06='0x'+_0x596179[0x1]+_0x596179[0x1],_0x472fe1='0x'+_0x596179[0x2]+_0x596179[0x2],_0x22b816='0x'+_0x596179[0x3]+_0x596179[0x3];else _0x596179[_0x1d3997(0x338)]===0x7&&(_0x45cc06='0x'+_0x596179[0x1]+_0x596179[0x2],_0x472fe1='0x'+_0x596179[0x3]+_0x596179[0x4],_0x22b816='0x'+_0x596179[0x5]+_0x596179[0x6]);return _0x1d3997(0x2ae)+ +_0x45cc06+',\x20'+ +_0x472fe1+',\x20'+ +_0x22b816+',\x20'+_0x4a7af6+')';}function renderTimeColumn(){const _0x5202bb=a2_0x4860a0,_0x1450ed=document[_0x5202bb(0x26a)](_0x5202bb(0x212)),_0x4944bb=document['getElementById'](_0x5202bb(0x292));_0x1450ed[_0x5202bb(0x236)]='',_0x1450ed[_0x5202bb(0x2f8)](_0x4944bb);for(let _0x2c8af0=0x0;_0x2c8af0<0x18;_0x2c8af0++){const _0x35de73=document[_0x5202bb(0x325)](_0x5202bb(0x21f));_0x35de73[_0x5202bb(0x2da)]=_0x5202bb(0x289);if(_0x2c8af0>0x0)_0x35de73['innerHTML']=_0x5202bb(0x24c)+String(_0x2c8af0)[_0x5202bb(0x26f)](0x2,'0')+':00</span>';_0x1450ed[_0x5202bb(0x2f8)](_0x35de73);}}function renderDayRange(_0x13439f,_0x30e17a){const _0x2bf1c7=a2_0x4860a0,_0x2da32d=document[_0x2bf1c7(0x26a)](_0x2bf1c7(0x2de)),_0x41effa=document[_0x2bf1c7(0x26a)]('gridColumns'),_0xf70b96=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x4c3085=new Date();_0x4c3085['setHours'](0x0,0x0,0x0,0x0);const _0x3b01c3=getLocalDateStr(new Date());for(let _0x4de716=_0x13439f;_0x4de716<=_0x30e17a;_0x4de716++){const _0x357b59=new Date(_0x4c3085);_0x357b59[_0x2bf1c7(0x295)](_0x357b59['getDate']()+_0x4de716);const _0x1fb4cf=getLocalDateStr(_0x357b59);let _0x294b53=_0x357b59[_0x2bf1c7(0x1e8)]()-0x1;if(_0x294b53===-0x1)_0x294b53=0x6;const _0x557329=_0x1fb4cf===_0x3b01c3,_0x3addef=document[_0x2bf1c7(0x325)](_0x2bf1c7(0x21f));_0x3addef['className']=_0x2bf1c7(0x2ce)+(_0x557329?_0x2bf1c7(0x2a5):''),_0x3addef['id']=_0x2bf1c7(0x1d8)+_0x1fb4cf,_0x3addef[_0x2bf1c7(0x2bd)](_0x2bf1c7(0x2fb),_0x1fb4cf),_0x3addef['innerHTML']=_0x2bf1c7(0x28a)+_0xf70b96[_0x294b53]+'</div><div\x20class=\x22dch-num\x22>'+_0x357b59['getDate']()+_0x2bf1c7(0x239)+_0x1fb4cf+_0x2bf1c7(0x252),_0x3addef['onclick']=()=>openDayOptions(_0x1fb4cf,_0xf70b96[_0x294b53]+'\x20'+_0x357b59[_0x2bf1c7(0x1ea)]()),_0x2da32d['appendChild'](_0x3addef);const _0x21de21=document[_0x2bf1c7(0x325)]('div');_0x21de21[_0x2bf1c7(0x2da)]=_0x2bf1c7(0x2f7)+(_0x557329?_0x2bf1c7(0x2a5):''),_0x21de21[_0x2bf1c7(0x2bd)](_0x2bf1c7(0x2fb),_0x1fb4cf),_0x21de21[_0x2bf1c7(0x2bd)]('data-day-idx',_0x294b53),renderEventsForColumn(_0x21de21,_0x1fb4cf,_0x294b53),attachLongPressHandler(_0x21de21,_0x357b59),_0x41effa[_0x2bf1c7(0x2f8)](_0x21de21),updateDayStats(_0x1fb4cf);}}function reRenderBlocks(){const _0x1668a7=a2_0x4860a0;document[_0x1668a7(0x316)]('#gridColumns\x20.day-column')['forEach'](_0x1112e2=>{const _0x7f5e9e=_0x1668a7;_0x1112e2[_0x7f5e9e(0x316)](_0x7f5e9e(0x27a))['forEach'](_0x2953be=>_0x2953be[_0x7f5e9e(0x303)]());const _0x50bd08=_0x1112e2[_0x7f5e9e(0x2c5)](_0x7f5e9e(0x2fb)),_0x78ffed=parseInt(_0x1112e2['getAttribute'](_0x7f5e9e(0x1dc))),_0x3f657f=Math['round'](_0x1112e2['offsetLeft']);(availabilityPattern[_0x78ffed]||[])[_0x7f5e9e(0x274)](_0xe40159=>{const _0x3d3abc=_0x7f5e9e,_0xfff48=document[_0x3d3abc(0x325)](_0x3d3abc(0x21f));_0xfff48[_0x3d3abc(0x2da)]=_0x3d3abc(0x29c);const _0x27a8cc=_0xe40159*GRID_H;_0xfff48['style'][_0x3d3abc(0x1d6)]=_0x27a8cc+'px',_0xfff48['style']['backgroundPosition']='-'+_0x3f657f+_0x3d3abc(0x242)+_0x27a8cc+'px',_0x1112e2[_0x3d3abc(0x2f8)](_0xfff48);});if(specialRanges&&specialRanges[_0x7f5e9e(0x338)]>0x0){const _0xe4b38f=new Date(_0x50bd08+_0x7f5e9e(0x2af))[_0x7f5e9e(0x2b0)](),_0x554f48=new Date(_0x50bd08+_0x7f5e9e(0x1d9))['getTime']();specialRanges[_0x7f5e9e(0x274)](_0x34df02=>{const _0x1b22dc=_0x7f5e9e,_0xdb6456=new Date(_0x34df02['start'])['getTime'](),_0x2e0cc8=new Date(_0x34df02['end'])[_0x1b22dc(0x2b0)](),_0x293fce=Math[_0x1b22dc(0x282)](_0xe4b38f,_0xdb6456),_0x444d3f=Math['min'](_0x554f48,_0x2e0cc8);if(_0x293fce<_0x444d3f){if(_0x293fce<=_0xe4b38f&&_0x444d3f>=_0x554f48-0xea60){if(!_0x1112e2['querySelector'](_0x1b22dc(0x235))){const _0xaf76b1=document[_0x1b22dc(0x325)](_0x1b22dc(0x21f));_0xaf76b1[_0x1b22dc(0x2da)]=_0x1b22dc(0x1f4),_0xaf76b1[_0x1b22dc(0x1f0)][_0x1b22dc(0x1e5)]='-'+_0x3f657f+_0x1b22dc(0x2b9),_0x1112e2[_0x1b22dc(0x2f8)](_0xaf76b1);}}else{const _0x18bb20=(_0x293fce-_0xe4b38f)/0x36ee80*GRID_H,_0x47bdbb=(_0x444d3f-_0x293fce)/0x36ee80*GRID_H,_0x4ef0e2=document['createElement'](_0x1b22dc(0x21f));_0x4ef0e2['className']=_0x1b22dc(0x1f2),_0x4ef0e2[_0x1b22dc(0x1f0)]['top']=_0x18bb20+'px',_0x4ef0e2['style']['height']=_0x47bdbb+'px',_0x4ef0e2[_0x1b22dc(0x1f0)][_0x1b22dc(0x1e5)]='-'+_0x3f657f+_0x1b22dc(0x242)+_0x18bb20+'px',_0x1112e2['appendChild'](_0x4ef0e2);}}});}if(dateExceptions[_0x50bd08]==='off'){if(!_0x1112e2[_0x7f5e9e(0x2d5)](_0x7f5e9e(0x235))){const _0x8c0519=document['createElement'](_0x7f5e9e(0x21f));_0x8c0519[_0x7f5e9e(0x2da)]='day-off-overlay\x20stripe-bg',_0x8c0519[_0x7f5e9e(0x1f0)][_0x7f5e9e(0x1e5)]='-'+_0x3f657f+_0x7f5e9e(0x2b9),_0x1112e2[_0x7f5e9e(0x2f8)](_0x8c0519);}}renderEventsForColumn(_0x1112e2,_0x50bd08,_0x78ffed),updateDayStats(_0x50bd08);});}function updateAllDayStats(){const _0x465797=a2_0x4860a0;document[_0x465797(0x316)](_0x465797(0x278))['forEach'](_0x4c9d24=>{const _0x33e9c0=_0x465797;updateDayStats(_0x4c9d24[_0x33e9c0(0x2c5)](_0x33e9c0(0x2fb)));});}function updateDayStats(_0x541a87){const _0x3d8df2=a2_0x4860a0,_0x5b63b2=document[_0x3d8df2(0x26a)](_0x3d8df2(0x1db)+_0x541a87);if(!_0x5b63b2)return;const _0x5399fc=new Date(_0x541a87);let _0x50f30d=_0x5399fc[_0x3d8df2(0x1e8)]()-0x1;if(_0x50f30d===-0x1)_0x50f30d=0x6;if(dateExceptions[_0x541a87]==='off'){_0x5b63b2[_0x3d8df2(0x1f0)][_0x3d8df2(0x2d7)]=_0x3d8df2(0x2ef);return;}const _0x56faba=availabilityPattern[_0x50f30d]||[],_0x18ce67=0x18-_0x56faba[_0x3d8df2(0x338)],_0x25ac7d=_0x18ce67*0x3c,_0x429db4=sessions['filter'](_0x4e06f8=>_0x4e06f8['dateStr']===_0x541a87&&_0x4e06f8[_0x3d8df2(0x326)]!==_0x3d8df2(0x318));if(_0x429db4[_0x3d8df2(0x338)]===0x0){_0x5b63b2[_0x3d8df2(0x1f0)]['display']=_0x3d8df2(0x2ef);return;}let _0x3484b1=_0x429db4[_0x3d8df2(0x30d)](_0x2fe789=>{const _0x29395b=_0x3d8df2,[_0xd6a043,_0x479155]=_0x2fe789[_0x29395b(0x284)][_0x29395b(0x25d)](':')[_0x29395b(0x30d)](Number),[_0x2a6d21,_0x7f8651]=_0x2fe789[_0x29395b(0x2d3)]['split'](':')[_0x29395b(0x30d)](Number);return[_0xd6a043*0x3c+_0x479155,_0x2a6d21*0x3c+_0x7f8651];});_0x3484b1[_0x3d8df2(0x207)]((_0x1b7757,_0x1c7d4a)=>_0x1b7757[0x0]-_0x1c7d4a[0x0]);let _0x4791d1=[];if(_0x3484b1[_0x3d8df2(0x338)]>0x0){let _0x1f039c=_0x3484b1[0x0];for(let _0xa9bf38=0x1;_0xa9bf38<_0x3484b1[_0x3d8df2(0x338)];_0xa9bf38++){_0x3484b1[_0xa9bf38][0x0]<_0x1f039c[0x1]?_0x1f039c[0x1]=Math[_0x3d8df2(0x282)](_0x1f039c[0x1],_0x3484b1[_0xa9bf38][0x1]):(_0x4791d1[_0x3d8df2(0x320)](_0x1f039c),_0x1f039c=_0x3484b1[_0xa9bf38]);}_0x4791d1[_0x3d8df2(0x320)](_0x1f039c);}let _0x133e8d=0x0;_0x4791d1[_0x3d8df2(0x274)](_0x544163=>_0x133e8d+=_0x544163[0x1]-_0x544163[0x0]),_0x5b63b2[_0x3d8df2(0x1f0)][_0x3d8df2(0x2d7)]=_0x3d8df2(0x211);const _0x56f09c=_0x5b63b2['querySelector']('.dch-stats-fill');if(_0x25ac7d===0x0){_0x56f09c[_0x3d8df2(0x1f0)][_0x3d8df2(0x26b)]=_0x3d8df2(0x217),_0x56f09c[_0x3d8df2(0x1f0)]['background']=_0x3d8df2(0x270);return;}const _0x18f741=_0x133e8d/_0x25ac7d*0x64;console[_0x3d8df2(0x2d8)]('['+_0x541a87+']\x20Доступно:\x20'+_0x18ce67+_0x3d8df2(0x275)+_0x133e8d+_0x3d8df2(0x247)+_0x18f741['toFixed'](0x1)+'%'),_0x18f741>0x64?(_0x56f09c[_0x3d8df2(0x1f0)][_0x3d8df2(0x26b)]=_0x3d8df2(0x217),_0x56f09c[_0x3d8df2(0x1f0)][_0x3d8df2(0x2dc)]='var(--acc-red)'):(_0x56f09c[_0x3d8df2(0x1f0)][_0x3d8df2(0x26b)]=_0x18f741+'%',_0x56f09c[_0x3d8df2(0x1f0)][_0x3d8df2(0x2dc)]=_0x3d8df2(0x227));}function renderEventsForColumn(_0x125fbe,_0x525552,_0x9dbc16){const _0x3f873e=a2_0x4860a0,_0x2ef875=sessions[_0x3f873e(0x224)](_0x4aa46a=>_0x4aa46a[_0x3f873e(0x2ca)]===_0x525552),_0x2a17c6=_0x2ef875[_0x3f873e(0x30d)](_0x1d6bb7=>{const _0x4d5c4a=_0x3f873e,[_0x21685d,_0x1fdd90]=_0x1d6bb7[_0x4d5c4a(0x284)][_0x4d5c4a(0x25d)](':')[_0x4d5c4a(0x30d)](Number),[_0x53f468,_0x2338dd]=_0x1d6bb7[_0x4d5c4a(0x2d3)][_0x4d5c4a(0x25d)](':')['map'](Number);return{'data':_0x1d6bb7,'start':_0x21685d*0x3c+_0x1fdd90,'end':_0x53f468*0x3c+_0x2338dd,'colIndex':0x0};});_0x2a17c6[_0x3f873e(0x207)]((_0x497762,_0x51f1bf)=>{const _0x1f0578=_0x3f873e;if(_0x497762[_0x1f0578(0x284)]!==_0x51f1bf[_0x1f0578(0x284)])return _0x497762['start']-_0x51f1bf[_0x1f0578(0x284)];return _0x51f1bf[_0x1f0578(0x2d3)]-_0x51f1bf['start']-(_0x497762[_0x1f0578(0x2d3)]-_0x497762['start']);});const _0x432d0a=[];_0x2a17c6[_0x3f873e(0x274)](_0x5036bc=>{const _0x2b01fb=_0x3f873e;let _0x45890f=![];for(let _0x5d6e83=0x0;_0x5d6e83<_0x432d0a[_0x2b01fb(0x338)];_0x5d6e83++){const _0x48dfe5=_0x432d0a[_0x5d6e83],_0x17d213=_0x48dfe5[_0x48dfe5[_0x2b01fb(0x338)]-0x1];if(_0x5036bc[_0x2b01fb(0x284)]>=_0x17d213[_0x2b01fb(0x2d3)]){_0x48dfe5[_0x2b01fb(0x320)](_0x5036bc),_0x5036bc[_0x2b01fb(0x2eb)]=_0x5d6e83,_0x45890f=!![];break;}}!_0x45890f&&(_0x432d0a['push']([_0x5036bc]),_0x5036bc['colIndex']=_0x432d0a[_0x2b01fb(0x338)]-0x1);}),_0x2a17c6[_0x3f873e(0x274)](_0x2522e5=>{const _0x176379=_0x3f873e;let _0x151005=0x0;_0x2a17c6[_0x176379(0x274)](_0x120399=>{const _0x4d2394=_0x176379;if(Math[_0x4d2394(0x282)](_0x2522e5['start'],_0x120399[_0x4d2394(0x284)])<Math['min'](_0x2522e5[_0x4d2394(0x2d3)],_0x120399[_0x4d2394(0x2d3)])){if(_0x120399[_0x4d2394(0x2eb)]>_0x151005)_0x151005=_0x120399[_0x4d2394(0x2eb)];}});const _0x5a23da=_0x151005+0x1,_0x20e18a=0x64/_0x5a23da,_0x418043=_0x2522e5[_0x176379(0x2eb)]*_0x20e18a,_0x378f81=createEventEl(_0x2522e5[_0x176379(0x33d)]);_0x378f81[_0x176379(0x1f0)][_0x176379(0x26b)]=_0x176379(0x32b)+_0x20e18a+_0x176379(0x271),_0x378f81['style'][_0x176379(0x2bf)]=_0x176379(0x32b)+_0x418043+'%\x20+\x202px)',_0x378f81[_0x176379(0x1f0)][_0x176379(0x23a)]=0xa+_0x2522e5[_0x176379(0x2eb)],_0x20e18a<0x55&&_0x378f81[_0x176379(0x312)][_0x176379(0x31c)]('mini'),_0x125fbe[_0x176379(0x2f8)](_0x378f81);});}function createEventEl(_0x136ea6){const _0x5d2aa8=a2_0x4860a0,[_0xc0ddb0,_0x40e47f]=_0x136ea6['start'][_0x5d2aa8(0x25d)](':')[_0x5d2aa8(0x30d)](Number),[_0x1cce68,_0x526491]=_0x136ea6[_0x5d2aa8(0x2d3)]['split'](':')['map'](Number),_0x13ef6c=(_0xc0ddb0*0x3c+_0x40e47f)/0x3c*GRID_H,_0x53a403=(_0x1cce68*0x3c+_0x526491-(_0xc0ddb0*0x3c+_0x40e47f))/0x3c*GRID_H,_0x3eba97=document[_0x5d2aa8(0x325)](_0x5d2aa8(0x21f)),_0x429b7a=_0x136ea6[_0x5d2aa8(0x326)]==='completed'?_0x5d2aa8(0x2e5):'';_0x3eba97['className']=_0x5d2aa8(0x30b)+_0x429b7a,_0x3eba97[_0x5d2aa8(0x1f0)][_0x5d2aa8(0x1d6)]=_0x13ef6c+'px',_0x3eba97[_0x5d2aa8(0x1f0)]['height']=Math[_0x5d2aa8(0x282)](_0x53a403,0x14)+'px';const _0x41f18d=clients[_0x5d2aa8(0x277)](_0x112733=>_0x136ea6[_0x5d2aa8(0x22b)]&&String(_0x112733['id'])===String(_0x136ea6['clientId'])||_0x112733[_0x5d2aa8(0x23e)]===_0x136ea6[_0x5d2aa8(0x30c)]),_0x2c0d72=_0x41f18d?_0x41f18d[_0x5d2aa8(0x28e)]:'#0a84ff';_0x3eba97[_0x5d2aa8(0x1f0)]['borderLeftColor']=_0x2c0d72,_0x3eba97['style'][_0x5d2aa8(0x2f3)]=hexToRgba(_0x2c0d72,0.85);let _0x47add7=_0x5d2aa8(0x2f2)+_0x136ea6[_0x5d2aa8(0x30c)]+_0x5d2aa8(0x263)+_0x136ea6[_0x5d2aa8(0x284)]+'\x20-\x20'+_0x136ea6[_0x5d2aa8(0x2d3)]+'</div>';return _0x136ea6[_0x5d2aa8(0x2a8)]&&(_0x47add7+=_0x5d2aa8(0x1d3)),_0x136ea6[_0x5d2aa8(0x326)]===_0x5d2aa8(0x203)&&(_0x47add7+=_0x5d2aa8(0x244)),_0x3eba97[_0x5d2aa8(0x236)]=_0x47add7,_0x3eba97['onclick']=_0x50086e=>{const _0x5a269c=_0x5d2aa8;_0x50086e[_0x5a269c(0x204)](),openEdit(_0x136ea6);},_0x3eba97;}function attachLongPressHandler(_0x26d602,_0x3719be){const _0x5219ce=a2_0x4860a0;let _0x368224=0x0,_0x1136ee=null;const _0x54fb20=_0x434684=>{const _0xf33b4f=a2_0x1b11;if(_0x434684[_0xf33b4f(0x213)][_0xf33b4f(0x20a)]('.event-card'))return;isScrolling=![],_0x368224=_0x434684[_0xf33b4f(0x20d)]?_0x434684[_0xf33b4f(0x20d)][0x0]['clientY']:_0x434684[_0xf33b4f(0x294)],_0x1136ee=setTimeout(()=>{const _0x2e64ed=_0xf33b4f;if(!isScrolling){navigator[_0x2e64ed(0x33f)]?.(0x32);const _0x487998=_0x26d602[_0x2e64ed(0x1ff)](),_0x64018d=Math['floor']((_0x368224-_0x487998[_0x2e64ed(0x1d6)])/GRID_H);_0x3719be[_0x2e64ed(0x2bc)](_0x64018d,0x0),openAddSession(_0x3719be);}},0x1f4);},_0x29cf20=()=>{isScrolling=!![],clearTimeout(_0x1136ee);},_0x29f8f4=()=>{clearTimeout(_0x1136ee);};_0x26d602[_0x5219ce(0x266)]('touchstart',_0x54fb20,{'passive':!![]}),_0x26d602[_0x5219ce(0x266)]('touchmove',_0x29cf20,{'passive':!![]}),_0x26d602[_0x5219ce(0x266)]('touchend',_0x29f8f4),_0x26d602[_0x5219ce(0x266)]('mousedown',_0x54fb20),_0x26d602['addEventListener'](_0x5219ce(0x2db),_0x29cf20),_0x26d602[_0x5219ce(0x266)](_0x5219ce(0x1ed),_0x29f8f4);}function cancelLongPress(){}function handleInfiniteScroll(){const _0xbd70c4=a2_0x4860a0,_0x4c8db4=document[_0xbd70c4(0x26a)](_0xbd70c4(0x340)),_0x5e2cf9=_0x4c8db4[_0xbd70c4(0x31f)],_0x4f28e0=_0x4c8db4[_0xbd70c4(0x2b4)],_0x43d290=_0x4c8db4[_0xbd70c4(0x210)];if(_0x4f28e0-(_0x5e2cf9+_0x43d290)<0x12c){const _0x5804d1=endOffset;endOffset+=0xe,renderDayRange(_0x5804d1+0x1,endOffset),reRenderBlocks();}if(_0x5e2cf9<0x12c){const _0x5f2469=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5f2469-0x1),_0x4c8db4[_0xbd70c4(0x31f)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x2b9ea4,_0x1ee9d1){const _0x310aa4=a2_0x4860a0,_0x280670=document[_0x310aa4(0x26a)](_0x310aa4(0x2de)),_0x40cf4c=document['getElementById'](_0x310aa4(0x2dd)),_0x319292=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x106d29=new Date();_0x106d29['setHours'](0x0,0x0,0x0,0x0);const _0x2b8bdc=getLocalDateStr(new Date()),_0x2deae2=document['createDocumentFragment'](),_0x4246ed=document['createDocumentFragment']();for(let _0x4ed921=_0x2b9ea4;_0x4ed921<=_0x1ee9d1;_0x4ed921++){const _0x100bb9=new Date(_0x106d29);_0x100bb9[_0x310aa4(0x295)](_0x100bb9['getDate']()+_0x4ed921);const _0x3a664f=getLocalDateStr(_0x100bb9);let _0x2af9e3=_0x100bb9[_0x310aa4(0x1e8)]()-0x1;if(_0x2af9e3===-0x1)_0x2af9e3=0x6;const _0xf90efc=_0x3a664f===_0x2b8bdc,_0x55cf21=document['createElement'](_0x310aa4(0x21f));_0x55cf21['className']=_0x310aa4(0x2ce)+(_0xf90efc?'today':''),_0x55cf21['id']='header-'+_0x3a664f,_0x55cf21['setAttribute'](_0x310aa4(0x2fb),_0x3a664f),_0x55cf21['innerHTML']=_0x310aa4(0x28a)+_0x319292[_0x2af9e3]+_0x310aa4(0x214)+_0x100bb9[_0x310aa4(0x1ea)]()+_0x310aa4(0x239)+_0x3a664f+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x55cf21['onclick']=()=>openDayOptions(_0x3a664f,_0x319292[_0x2af9e3]+'\x20'+_0x100bb9['getDate']()),_0x2deae2[_0x310aa4(0x2f8)](_0x55cf21);const _0x3d5e59=document[_0x310aa4(0x325)](_0x310aa4(0x21f));_0x3d5e59[_0x310aa4(0x2da)]=_0x310aa4(0x2f7)+(_0xf90efc?_0x310aa4(0x2a5):''),_0x3d5e59['setAttribute'](_0x310aa4(0x2fb),_0x3a664f),_0x3d5e59[_0x310aa4(0x2bd)](_0x310aa4(0x1dc),_0x2af9e3),renderEventsForColumn(_0x3d5e59,_0x3a664f,_0x2af9e3),attachLongPressHandler(_0x3d5e59,_0x100bb9),_0x4246ed['appendChild'](_0x3d5e59),updateDayStats(_0x3a664f);}_0x280670['insertBefore'](_0x2deae2,_0x280670[_0x310aa4(0x2c8)]),_0x40cf4c[_0x310aa4(0x317)](_0x4246ed,_0x40cf4c['querySelector']('.day-column'));}function validateAppointment(_0x1cd62c,_0x4346bb,_0x35fb2f,_0x534556,_0x49963c){const _0x11d67e=a2_0x4860a0,[_0x50b047,_0x55454a]=_0x4346bb[_0x11d67e(0x25d)](':')['map'](Number),[_0x291c1c,_0x5c99fc]=_0x35fb2f[_0x11d67e(0x25d)](':')['map'](Number),_0x1161b5=_0x50b047*0x3c+_0x55454a,_0x3334b0=_0x291c1c*0x3c+_0x5c99fc,_0x491a90=String(_0x49963c);let _0x3c2f53=![],_0x12967e='';for(let _0x410a8a of sessions){if(_0x410a8a['dateStr']!==_0x1cd62c)continue;if(_0x410a8a[_0x11d67e(0x326)]===_0x11d67e(0x318))continue;if(_0x534556&&String(_0x410a8a['id'])===String(_0x534556))continue;const [_0x1780c8,_0x564cfd]=_0x410a8a[_0x11d67e(0x284)]['split'](':')[_0x11d67e(0x30d)](Number),[_0x557965,_0x57b3ac]=_0x410a8a[_0x11d67e(0x2d3)][_0x11d67e(0x25d)](':')[_0x11d67e(0x30d)](Number),_0x38c210=_0x1780c8*0x3c+_0x564cfd,_0x473227=_0x557965*0x3c+_0x57b3ac;if(Math['max'](_0x1161b5,_0x38c210)<Math[_0x11d67e(0x285)](_0x3334b0,_0x473227)){if(_0x410a8a[_0x11d67e(0x22b)]&&String(_0x410a8a[_0x11d67e(0x22b)])===_0x491a90)return{'valid':![],'msg':_0x11d67e(0x2fe)+_0x410a8a[_0x11d67e(0x30c)]+_0x11d67e(0x29a)};_0x3c2f53=!![],_0x12967e=_0x410a8a['client'];}}if(_0x3c2f53)return{'valid':!![],'warning':_0x11d67e(0x2b5)+_0x12967e};return{'valid':!![]};}function updateDateDisplay(){const _0x2542a9=a2_0x4860a0,_0x2c7cbf=document[_0x2542a9(0x26a)]('inpDate')[_0x2542a9(0x1df)],_0x5c43d9=document['getElementById'](_0x2542a9(0x21e));if(!_0x2c7cbf){_0x5c43d9[_0x2542a9(0x245)]='';return;}const [_0x5d72bd,_0x59475f,_0x33af2f]=_0x2c7cbf[_0x2542a9(0x25d)]('-')['map'](Number),_0xda1be7=new Date(_0x5d72bd,_0x59475f-0x1,_0x33af2f),_0x30d5ff={'weekday':'long','day':_0x2542a9(0x2a0),'month':_0x2542a9(0x27f),'year':_0x2542a9(0x2a0)};let _0x144045=_0xda1be7[_0x2542a9(0x23f)]('ru-RU',_0x30d5ff);_0x144045=_0x144045['charAt'](0x0)['toUpperCase']()+_0x144045[_0x2542a9(0x1e3)](0x1),_0x5c43d9[_0x2542a9(0x245)]=_0x144045;}function autoSetEndTime(){const _0x27e0cf=a2_0x4860a0,_0x3fadd7=document['getElementById'](_0x27e0cf(0x2ad))[_0x27e0cf(0x1df)];if(!_0x3fadd7)return;const [_0xfff761,_0x2eec9f]=_0x3fadd7[_0x27e0cf(0x25d)](':')[_0x27e0cf(0x30d)](Number);let _0x5db109=_0xfff761+0x1;if(_0x5db109>0x17)_0x5db109=0x0;const _0xabbc30=String(_0x5db109)[_0x27e0cf(0x26f)](0x2,'0')+':'+String(_0x2eec9f)[_0x27e0cf(0x26f)](0x2,'0');document[_0x27e0cf(0x26a)]('inpEnd')[_0x27e0cf(0x1df)]=_0xabbc30;}function populateClientSelect(){const _0x1d93eb=a2_0x4860a0,_0x7b01fa=document['getElementById'](_0x1d93eb(0x22f));_0x7b01fa[_0x1d93eb(0x236)]='';if(clients[_0x1d93eb(0x338)]===0x0){const _0x780705=document[_0x1d93eb(0x325)]('option');_0x780705[_0x1d93eb(0x342)]=_0x1d93eb(0x2c4),_0x7b01fa['appendChild'](_0x780705);return;}clients['forEach'](_0x6e00a3=>{const _0x26dfde=_0x1d93eb,_0x4f87fd=document['createElement']('option');_0x4f87fd['value']=_0x6e00a3['name'],_0x4f87fd['textContent']=_0x6e00a3[_0x26dfde(0x23e)],_0x7b01fa[_0x26dfde(0x2f8)](_0x4f87fd);});}function openActionSheet(_0xca90f4){const _0x5f3d98=a2_0x4860a0,_0x3414f2=document[_0x5f3d98(0x26a)](_0x5f3d98(0x307)),_0x16001e=document['getElementById'](_0x5f3d98(0x201)),_0x5abb26=document[_0x5f3d98(0x26a)]('asTitle'),_0x57e83d=document[_0x5f3d98(0x26a)]('asBtnOne'),_0x587d92=document['getElementById'](_0x5f3d98(0x33c));_0x16001e[_0x5f3d98(0x312)][_0x5f3d98(0x31c)](_0x5f3d98(0x20c)),_0x3414f2['classList'][_0x5f3d98(0x31c)](_0x5f3d98(0x31e));if(_0xca90f4===_0x5f3d98(0x27c))_0x5abb26[_0x5f3d98(0x245)]='Изменение\x20серии',_0x57e83d['textContent']=_0x5f3d98(0x233),_0x57e83d[_0x5f3d98(0x21c)]=()=>{const _0x1e0c17=_0x5f3d98;closeActionSheet(),updateSeriesBatch(_0x1e0c17(0x2fd),tempSessionData);},_0x587d92[_0x5f3d98(0x245)]=_0x5f3d98(0x276),_0x587d92[_0x5f3d98(0x21c)]=()=>{const _0x226503=_0x5f3d98;closeActionSheet(),updateSeriesBatch(_0x226503(0x2cc),tempSessionData);};else _0xca90f4===_0x5f3d98(0x255)&&(_0x5abb26[_0x5f3d98(0x245)]=_0x5f3d98(0x1fc),_0x57e83d[_0x5f3d98(0x245)]=_0x5f3d98(0x233),_0x57e83d[_0x5f3d98(0x2da)]='as-button\x20danger',_0x57e83d[_0x5f3d98(0x21c)]=()=>{const _0x27df4e=_0x5f3d98;closeActionSheet(),commitDelete(_0x27df4e(0x2fd),sessions[_0x27df4e(0x277)](_0x53d034=>_0x53d034['id']===editingId));},_0x587d92['textContent']='Эту\x20и\x20будущие',_0x587d92[_0x5f3d98(0x2da)]=_0x5f3d98(0x251),_0x587d92[_0x5f3d98(0x21c)]=()=>{const _0x5aebf8=_0x5f3d98;closeActionSheet(),commitDelete(_0x5aebf8(0x2cc),sessions[_0x5aebf8(0x277)](_0x1423bf=>_0x1423bf['id']===editingId));});}function closeActionSheet(){const _0x5e0370=a2_0x4860a0;document['getElementById'](_0x5e0370(0x307))['classList']['remove'](_0x5e0370(0x31e)),document['getElementById'](_0x5e0370(0x201))[_0x5e0370(0x312)][_0x5e0370(0x303)](_0x5e0370(0x20c));}function openSettings(){openSheet('settingsSheet');}function saveCoachSettings(){const _0x62b140=a2_0x4860a0,_0x19aec0=document[_0x62b140(0x26a)](_0x62b140(0x314))[_0x62b140(0x1df)];localStorage[_0x62b140(0x31b)](_0x62b140(0x232),_0x19aec0),console[_0x62b140(0x2d8)](_0x62b140(0x28b),_0x19aec0),DataManager[_0x62b140(0x291)]('save_settings',{'settings':{'cancel_window':_0x19aec0}})['catch'](_0x215650=>{const _0x4a1d87=_0x62b140;console[_0x4a1d87(0x269)](_0x4a1d87(0x2fc),_0x215650),showToast(_0x4a1d87(0x24f),![]);});}function loadCoachSettings(){const _0x2374bf=a2_0x4860a0,_0x574101=localStorage[_0x2374bf(0x2f0)](_0x2374bf(0x232));_0x574101&&(document[_0x2374bf(0x26a)](_0x2374bf(0x314))['value']=_0x574101);}function openRangesSheet(){closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet('rangesSheet');}function addRange(){const _0x1e0f9f=a2_0x4860a0,_0x153e07=document['getElementById'](_0x1e0f9f(0x30f))[_0x1e0f9f(0x1df)],_0x55d7a6=document[_0x1e0f9f(0x26a)](_0x1e0f9f(0x22d))[_0x1e0f9f(0x1df)],_0xcadfe6=document[_0x1e0f9f(0x26a)](_0x1e0f9f(0x234))[_0x1e0f9f(0x1df)],_0x3987f0=document[_0x1e0f9f(0x26a)]('rangeEndTime')[_0x1e0f9f(0x1df)];if(!_0x153e07||!_0x55d7a6||!_0xcadfe6||!_0x3987f0)return alert(_0x1e0f9f(0x281));const _0x3febc7=_0x153e07+'T'+_0x55d7a6,_0x2cf36c=_0xcadfe6+'T'+_0x3987f0;if(_0x3febc7>=_0x2cf36c)return alert(_0x1e0f9f(0x1ee));specialRanges['push']({'start':_0x3febc7,'end':_0x2cf36c}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x1e0f9f(0x2c3)](),DataManager[_0x1e0f9f(0x291)](_0x1e0f9f(0x1fb),{'settings':{'ranges':specialRanges}});}function deleteRange(_0x2994e7){const _0x2daa22=a2_0x4860a0;specialRanges[_0x2daa22(0x300)](_0x2994e7,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x2daa22(0x2c3)](),DataManager[_0x2daa22(0x291)](_0x2daa22(0x1fb),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x196aa9=a2_0x4860a0;document['getElementById'](_0x196aa9(0x30f))[_0x196aa9(0x1df)]='',document[_0x196aa9(0x26a)]('rangeStartTime')[_0x196aa9(0x1df)]=_0x196aa9(0x32c),document[_0x196aa9(0x26a)](_0x196aa9(0x234))[_0x196aa9(0x1df)]='',document[_0x196aa9(0x26a)]('rangeEndTime')[_0x196aa9(0x1df)]='23:59';}function renderRangesList(){const _0x278e08=a2_0x4860a0,_0x22801f=document[_0x278e08(0x26a)](_0x278e08(0x264));_0x22801f['innerHTML']='';if(!specialRanges[_0x278e08(0x338)]){_0x22801f[_0x278e08(0x236)]=_0x278e08(0x265);return;}specialRanges[_0x278e08(0x274)]((_0x2a098f,_0x39ebf9)=>{const _0xe6fca4=_0x278e08,_0x56a384=document[_0xe6fca4(0x325)](_0xe6fca4(0x21f));_0x56a384[_0xe6fca4(0x2da)]='range-item';const _0x41990b=_0x10d844=>{const _0xdd6f59=_0xe6fca4,_0x393be4=new Date(_0x10d844);return _0x393be4[_0xdd6f59(0x1ea)]()+'.'+String(_0x393be4[_0xdd6f59(0x2c9)]()+0x1)[_0xdd6f59(0x26f)](0x2,'0')+'\x20'+String(_0x393be4[_0xdd6f59(0x230)]())[_0xdd6f59(0x26f)](0x2,'0')+':'+String(_0x393be4[_0xdd6f59(0x254)]())[_0xdd6f59(0x26f)](0x2,'0');};_0x56a384['innerHTML']=_0xe6fca4(0x28c)+_0x41990b(_0x2a098f['start'])+_0xe6fca4(0x286)+_0x41990b(_0x2a098f[_0xe6fca4(0x2d3)])+_0xe6fca4(0x1ec)+_0x39ebf9+')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>',_0x22801f[_0xe6fca4(0x2f8)](_0x56a384);});}function scrollToToday(){const _0x1ce4bf=a2_0x4860a0,_0xa808f=getLocalDateStr(new Date()),_0x53e202=document[_0x1ce4bf(0x26a)](_0x1ce4bf(0x1d8)+_0xa808f),_0x517697=document[_0x1ce4bf(0x26a)]('matrixViewport');if(_0x53e202&&_0x517697){const _0x57b578=_0x517697['clientWidth'],_0x12d932=_0x53e202[_0x1ce4bf(0x283)],_0x5e06c2=_0x53e202[_0x1ce4bf(0x299)];_0x517697[_0x1ce4bf(0x31f)]=_0x12d932-_0x57b578/0x2+_0x5e06c2/0x2,_0x517697[_0x1ce4bf(0x222)]=0x9*GRID_H;}}function onScroll(){const _0x18a37e=a2_0x4860a0,_0x4b8cbc=document['getElementById'](_0x18a37e(0x340)),_0x3f32d9=document[_0x18a37e(0x316)](_0x18a37e(0x278));for(let _0x375b0b of _0x3f32d9)if(_0x375b0b[_0x18a37e(0x283)]>=_0x4b8cbc['scrollLeft']){const _0x567577=new Date(_0x375b0b[_0x18a37e(0x2c5)](_0x18a37e(0x2fb)));document['getElementById'](_0x18a37e(0x249))[_0x18a37e(0x245)]=_0x567577[_0x18a37e(0x208)]('ru',{'month':'long'})['toUpperCase']()+'\x20'+_0x567577[_0x18a37e(0x25c)]();break;}}function showToast(_0x3461a8,_0xcbe5ef=![]){const _0x306296=a2_0x4860a0,_0x356409=document['getElementById'](_0x306296(0x25f));_0x356409[_0x306296(0x2da)]=_0x306296(0x229)+(_0xcbe5ef?_0x306296(0x1e7):''),document[_0x306296(0x26a)](_0x306296(0x23c))['textContent']=_0xcbe5ef?_0x306296(0x333):_0x306296(0x311),document[_0x306296(0x26a)]('toastMessage')[_0x306296(0x245)]=_0x3461a8,_0x356409[_0x306296(0x312)][_0x306296(0x31c)](_0x306296(0x218)),setTimeout(()=>{const _0x58385a=_0x306296;_0x356409[_0x58385a(0x312)][_0x58385a(0x303)]('show');},0xbb8);}function openDayOptions(_0x2cf401,_0x17402b){const _0x267f63=a2_0x4860a0;selectedDayForOptions=_0x2cf401,document['getElementById'](_0x267f63(0x24b))[_0x267f63(0x245)]=_0x17402b,openSheet(_0x267f63(0x261));}function toggleDayOff(){const _0x204b51=a2_0x4860a0;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x204b51(0x216),reRenderBlocks(),closeAllSheets(),DataManager[_0x204b51(0x2c3)](),DataManager['fetchFromServer'](_0x204b51(0x1fb),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x1fd069=a2_0x4860a0;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x1fd069(0x2c3)](),DataManager[_0x1fd069(0x291)](_0x1fd069(0x1fb),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x4d1f70){const _0x248a40=a2_0x4860a0;document[_0x248a40(0x26a)](_0x248a40(0x1f7))[_0x248a40(0x312)][_0x248a40(0x31c)]('active'),document[_0x248a40(0x26a)](_0x4d1f70)[_0x248a40(0x312)]['add']('open');}function closeAllSheets(){const _0x424cba=a2_0x4860a0;document[_0x424cba(0x26a)](_0x424cba(0x1f7))[_0x424cba(0x312)]['remove'](_0x424cba(0x20c)),document['querySelectorAll'](_0x424cba(0x2df))[_0x424cba(0x274)](_0x2c8050=>_0x2c8050[_0x424cba(0x312)][_0x424cba(0x303)](_0x424cba(0x31e)));}function a2_0x274b(){const _0x243755=['\x20выполнено','px\x20-','loadLocal','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','textContent','1050192bjLZEk','мин,\x20Загрузка:\x20','641295MlAZYY','headerMonth','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','dayOptionsTitle','<span>','done','\x20<span\x20class=\x22arrow\x22>↓</span>','Ошибка\x20сохранения\x20настроек','Сделать\x20рабочим\x20днем','as-button\x20danger\x20bold','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','stringify','getMinutes','delete','inpEnd','pe-col-header','btn-status-toggle\x20undo-mode','[Series]\x20Skipped\x20','6103730RINcXh','findIndex','getFullYear','split','doBusyHours','toast','all','dayOptionsSheet','var(--acc-green)','</div><div\x20class=\x22ev-time\x22>','rangesList','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','addEventListener','Ошибка\x20сохранения\x20в\x20облако','Новая\x20запись','error','getElementById','width','Синхронизировано','Server\x20Error','includes','padStart','var(--acc-red)','%\x20-\x204px)','Создана\x20серия:\x20','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','forEach','ч,\x20Занято:\x20','Эту\x20и\x20будущие','find','.day-col-header','client-stat-card','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','Вернуть\x20в\x20запланированные','save','text/plain;charset=UTF-8','constructor','long','floor','Заполните\x20все\x20поля','max','offsetLeft','start','min','\x20—\x20','Ваша\x20тренировка\x20перенесена:\x0a\x0a','.pib-text','time-label','<div\x20class=\x22dch-day\x22>','[Settings]\x20Cancel\x20window\x20set\x20to:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','</b>\x0a\x0a','color','btnDayToggle','rgba(255,255,255,0.05)','fetchFromServer','timeLineBadge','disableVerticalSwipes','clientY','setDate','Максимум\x20100\x20за\x20раз','charAt','recurringOptionContainer','offsetWidth',')\x20уже\x20записан\x20на\x20это\x20время!','warning','blocked-slot\x20stripe-bg','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','borderRadius','warn','numeric','WebApp','btnStatusToggle','anPercent','Local\x20Load\x20Error','today','scroll','rgba(255,\x20159,\x2010,\x200.3)','seriesId','exceptions','calendar','create','1843329EMCFFI','inpStart','rgba(','T00:00:00','getTime','analyticsSheet','Сделать\x20выходным','analyticsList','scrollWidth','Групповая:\x20также\x20записан\x20','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','href','doDateHeader','px\x200px','user','week','setHours','setAttribute','rgba(255,\x2069,\x2058,\x200.3)','left','<b>⏰\x20Время:</b>\x20','DOMContentLoaded','peGrid','saveLocally','Нет\x20клиентов','getAttribute','cancel','seriesCountContainer','firstChild','getMonth','dateStr','strokeDashoffset','series','33BagYgd','day-col-header\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel_window','patternInfoBox','send_notification','end','35PSCjRD','querySelector','note','display','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','className','mousemove','background','gridColumns','daysHeaderTrack','.sheet','sheetTitle','btnDelete','#fff','pattern','<b>📅\x20Дата:</b>\x20','\x20status-completed','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','doEventsList','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','rgba(48,\x20209,\x2088,\x200.15)','ready','colIndex','<b>✅\x20','[Notify]\x20Client\x20SWAP\x20detected',')</b>\x20была\x20удалена\x20из\x20расписания.','none','getItem','send','<div\x20class=\x22ev-title\x22>','backgroundColor','setHeaderColor','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','\x20(пропущено:\x20','day-column\x20','appendChild','ranges','rgba(100,100,100,0.5)','data-date','Save\x20settings\x20error:','single','Этот\x20клиент\x20(','borderColor','splice','setBackgroundColor','entries','remove','pe-time-label','doLoadPercent','Critical\x20TMA\x20Error:','actionSheet','Это\x20часть\x20серии\x20тренировок','settings','[Notify]\x20Error:\x20sessionData\x20is\x20null','event-card','client','map','catch','rangeStartDate','547554QafiDH','Инфо','classList','Жду\x20вас\x20в\x20зале!\x20💪','settingCancelWindow','complete','querySelectorAll','insertBefore','cancelled','doWorkHours','custom','setItem','add','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','open','scrollLeft','push','json','now','undefined','[Notify]\x20Server\x20Response:','createElement','status','init_load','deleted','toString','anEnd','calc(','00:00','anStart','valid','then','anCustomDates','...','.period-switch\x20.p-btn','Успешно','getText','apply','toUpperCase','formatDate','length','BackButton','batch_sync','isArray','asBtnSeries','data','startsWith','vibrate','matrixViewport','inpRecurring','text','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','POST','uc_clients_v9','keys','4HyYyLe','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','month','de-item','top','(((.+)+)+)+$','header-','T23:59:59','inpSeriesCount','stat-','data-day-idx','checked','globalTimeLine','value','indexOf','setMonth','round','slice','total','backgroundPosition','Local\x20Save\x20Error','success','getDay','sessionSheet','getDate','planned','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','mouseup','Ошибка\x20дат','[Notify]\x20Attempting\x20to\x20send:','style','clients','blocked-range-part\x20stripe-bg','null','day-off-overlay\x20stripe-bg','patternEditor','syncLoad','overlay','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','sid','inpDate','save_settings','Удаление','uc_settings_v9','search','getBoundingClientRect',']\x20Failed:','actionSheetOverlay','[Notify]\x20Detected\x20Client\x20ID:','completed','stopPropagation','onClick','update','sort','toLocaleString','10px','closest','pe-corner','active','touches','from','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','clientWidth','flex','timeColumn','target','</div><div\x20class=\x22dch-num\x22>','ru-RU','off','100%','show','anTotalStats','inpNote','borderLeftColor','onclick',':00','sheetDateSubtitle','div','Оффлайн\x20режим','parse','scrollTop','541296AvNFPi','filter','Статус\x20сброшен','Unknown','var(--acc-current)','initDataUnsafe','toast-notification\x20','btn-primary\x20btn-secondary','clientId','block','rangeStartTime','1022440ANSqGy','inpClient','getHours','20lEsbMW','uc_settings_cancel_window','Только\x20эту','rangeEndDate','.day-off-overlay','innerHTML','Telegram','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','zIndex','location','toastTitle','#050505','name','toLocaleDateString','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>'];a2_0x274b=function(){return _0x243755;};return a2_0x274b();}function openPatternEditor(){const _0x310cf2=a2_0x4860a0;closeAllSheets(),document[_0x310cf2(0x26a)](_0x310cf2(0x1f5))['classList'][_0x310cf2(0x31c)]('open'),renderPatternEditor();}function closePatternEditor(){const _0x18452b=a2_0x4860a0;document[_0x18452b(0x26a)](_0x18452b(0x1f5))[_0x18452b(0x312)]['remove'](_0x18452b(0x31e));}function savePattern(){const _0x49f30f=a2_0x4860a0;document[_0x49f30f(0x26a)](_0x49f30f(0x1f5))[_0x49f30f(0x312)][_0x49f30f(0x303)]('open'),reRenderBlocks(),DataManager[_0x49f30f(0x2c3)](),DataManager[_0x49f30f(0x291)](_0x49f30f(0x1fb),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x441777=a2_0x4860a0,_0x208665=document['getElementById'](_0x441777(0x2c2));_0x208665[_0x441777(0x236)]='';const _0x4464e0=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x2bf449=document['createElement'](_0x441777(0x21f));_0x2bf449[_0x441777(0x2da)]=_0x441777(0x20b),_0x208665[_0x441777(0x2f8)](_0x2bf449),_0x4464e0[_0x441777(0x274)]((_0x32016a,_0x556aee)=>{const _0x56cec2=_0x441777,_0x135f51=document[_0x56cec2(0x325)](_0x56cec2(0x21f));_0x135f51[_0x56cec2(0x2da)]=_0x56cec2(0x257),_0x135f51[_0x56cec2(0x236)]=_0x32016a+_0x56cec2(0x24e),_0x135f51[_0x56cec2(0x21c)]=()=>toggleColPattern(_0x556aee),_0x208665['appendChild'](_0x135f51);});for(let _0x1ff5c0=0x0;_0x1ff5c0<0x18;_0x1ff5c0++){const _0x1a3320=document[_0x441777(0x325)](_0x441777(0x21f));_0x1a3320[_0x441777(0x2da)]=_0x441777(0x304),_0x1a3320[_0x441777(0x236)]=_0x441777(0x2e8)+String(_0x1ff5c0)['padStart'](0x2,'0')+_0x441777(0x21d),_0x1a3320[_0x441777(0x21c)]=()=>toggleRowPattern(_0x1ff5c0),_0x208665[_0x441777(0x2f8)](_0x1a3320);for(let _0x397a9c=0x0;_0x397a9c<0x7;_0x397a9c++){const _0x26278f=document['createElement'](_0x441777(0x21f)),_0x49f2bc=(availabilityPattern[_0x397a9c]||[])[_0x441777(0x26e)](_0x1ff5c0),_0x5be2cd=!_0x49f2bc;_0x26278f['className']='pe-cell\x20'+(_0x5be2cd?'active':''),_0x26278f['onclick']=()=>toggleSinglePattern(_0x397a9c,_0x1ff5c0),_0x208665[_0x441777(0x2f8)](_0x26278f);}}}function toggleSinglePattern(_0x19ef9e,_0x3c60d7){const _0x1b47ae=a2_0x4860a0;if(!availabilityPattern[_0x19ef9e])availabilityPattern[_0x19ef9e]=[];const _0xc91fa=availabilityPattern[_0x19ef9e],_0x26db36=_0xc91fa[_0x1b47ae(0x1e0)](_0x3c60d7);_0x26db36===-0x1?_0xc91fa[_0x1b47ae(0x320)](_0x3c60d7):_0xc91fa[_0x1b47ae(0x300)](_0x26db36,0x1),renderPatternEditor();}function toggleColPattern(_0x45115b){const _0x39d811=a2_0x4860a0;if(!availabilityPattern[_0x45115b])availabilityPattern[_0x45115b]=[];const _0x3e23b7=availabilityPattern[_0x45115b];_0x3e23b7[_0x39d811(0x338)]===0x0?availabilityPattern[_0x45115b]=Array['from']({'length':0x18},(_0x326067,_0x24ee63)=>_0x24ee63):availabilityPattern[_0x45115b]=[],renderPatternEditor();}function toggleRowPattern(_0x6b279){const _0x143a7e=a2_0x4860a0;let _0x27d099=!![];for(let _0x3d432a=0x0;_0x3d432a<0x7;_0x3d432a++){if((availabilityPattern[_0x3d432a]||[])[_0x143a7e(0x26e)](_0x6b279)){_0x27d099=![];break;}}for(let _0x504f46=0x0;_0x504f46<0x7;_0x504f46++){if(!availabilityPattern[_0x504f46])availabilityPattern[_0x504f46]=[];const _0x5331b1=availabilityPattern[_0x504f46][_0x143a7e(0x1e0)](_0x6b279);if(_0x27d099){if(_0x5331b1===-0x1)availabilityPattern[_0x504f46][_0x143a7e(0x320)](_0x6b279);}else{if(_0x5331b1!==-0x1)availabilityPattern[_0x504f46][_0x143a7e(0x300)](_0x5331b1,0x1);}}renderPatternEditor();}function renderPCol(_0x48f0fc,_0x4dbac8){const _0x5c1433=a2_0x4860a0;_0x48f0fc[_0x5c1433(0x236)]='';const _0x5c28c9=Math['round'](_0x48f0fc['offsetLeft']);(availabilityPattern[_0x4dbac8]||[])['forEach'](_0x57c71b=>{const _0x5f3e54=_0x5c1433,_0x350cd5=document[_0x5f3e54(0x325)](_0x5f3e54(0x21f));_0x350cd5['className']=_0x5f3e54(0x29c);const _0x396d79=_0x57c71b*GRID_H;_0x350cd5[_0x5f3e54(0x1f0)][_0x5f3e54(0x1d6)]=_0x396d79+'px',_0x350cd5[_0x5f3e54(0x1f0)][_0x5f3e54(0x1e5)]='-'+_0x5c28c9+'px\x20-'+_0x396d79+'px',_0x350cd5['onclick']=_0x4a5293=>{_0x4a5293['stopPropagation'](),toggleSinglePattern(_0x4dbac8,_0x57c71b);},_0x48f0fc[_0x5f3e54(0x2f8)](_0x350cd5);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4672ce=a2_0x4860a0,_0x238087=new Date(),_0x221eb2=document['getElementById'](_0x4672ce(0x1de)),_0x32e883=document['getElementById'](_0x4672ce(0x292)),_0x247ff9=(_0x238087[_0x4672ce(0x230)]()*0x3c+_0x238087[_0x4672ce(0x254)]())/0x3c*GRID_H;_0x221eb2['style'][_0x4672ce(0x1d6)]=_0x247ff9+'px',_0x221eb2[_0x4672ce(0x1f0)]['display']=_0x4672ce(0x22c),_0x32e883[_0x4672ce(0x245)]=String(_0x238087[_0x4672ce(0x230)]())[_0x4672ce(0x26f)](0x2,'0')+':'+String(_0x238087['getMinutes']())['padStart'](0x2,'0'),_0x32e883[_0x4672ce(0x1f0)]['display']=_0x4672ce(0x22c),_0x32e883['style'][_0x4672ce(0x1d6)]=_0x247ff9+'px';}document[a2_0x4860a0(0x266)](a2_0x4860a0(0x2c1),init);function openDayOptions(_0xedf762){const _0x156339=a2_0x4860a0;selectedDayForOptions=_0xedf762;const _0x5c4a9f=new Date(_0xedf762),_0x528a45={'weekday':_0x156339(0x27f),'day':_0x156339(0x2a0),'month':_0x156339(0x27f),'year':_0x156339(0x2a0)},_0x4d47e2=_0x5c4a9f[_0x156339(0x23f)](_0x156339(0x215),_0x528a45);document['getElementById'](_0x156339(0x2b8))['textContent']=_0x4d47e2[_0x156339(0x297)](0x0)[_0x156339(0x336)]()+_0x4d47e2[_0x156339(0x1e3)](0x1);let _0x26b0d=_0x5c4a9f[_0x156339(0x1e8)]()-0x1;if(_0x26b0d===-0x1)_0x26b0d=0x6;const _0x1dc83f=availabilityPattern[_0x26b0d]||[],_0x2986ec=0x18-_0x1dc83f[_0x156339(0x338)],_0xcb968=_0x2986ec*0x3c,_0x341c94=sessions[_0x156339(0x224)](_0x25110b=>_0x25110b[_0x156339(0x2ca)]===_0xedf762&&_0x25110b[_0x156339(0x326)]!==_0x156339(0x318));let _0x4461be=_0x341c94[_0x156339(0x30d)](_0x2bb392=>{const _0xe2170=_0x156339,[_0x29e25f,_0x4447d4]=_0x2bb392['start']['split'](':')[_0xe2170(0x30d)](Number),[_0x398cbf,_0x174e66]=_0x2bb392[_0xe2170(0x2d3)][_0xe2170(0x25d)](':')[_0xe2170(0x30d)](Number);return[_0x29e25f*0x3c+_0x4447d4,_0x398cbf*0x3c+_0x174e66];});_0x4461be[_0x156339(0x207)]((_0x3e10c1,_0x4cac30)=>_0x3e10c1[0x0]-_0x4cac30[0x0]);let _0x38bef3=[];if(_0x4461be[_0x156339(0x338)]>0x0){let _0x4599bb=_0x4461be[0x0];for(let _0x3ac27b=0x1;_0x3ac27b<_0x4461be[_0x156339(0x338)];_0x3ac27b++){_0x4461be[_0x3ac27b][0x0]<_0x4599bb[0x1]?_0x4599bb[0x1]=Math[_0x156339(0x282)](_0x4599bb[0x1],_0x4461be[_0x3ac27b][0x1]):(_0x38bef3['push'](_0x4599bb),_0x4599bb=_0x4461be[_0x3ac27b]);}_0x38bef3[_0x156339(0x320)](_0x4599bb);}let _0x1d7c85=0x0;_0x38bef3[_0x156339(0x274)](_0x1f6634=>_0x1d7c85+=_0x1f6634[0x1]-_0x1f6634[0x0]),document[_0x156339(0x26a)](_0x156339(0x319))[_0x156339(0x245)]=formatMinsToHrs(_0xcb968),document['getElementById'](_0x156339(0x25e))[_0x156339(0x245)]=formatMinsToHrs(_0x1d7c85);const _0x29ed53=_0xcb968>0x0?Math[_0x156339(0x1e2)](_0x1d7c85/_0xcb968*0x64):0x0,_0x3945df=document['getElementById'](_0x156339(0x305));_0x3945df[_0x156339(0x245)]=_0x29ed53+'%';const _0x2ed315=document[_0x156339(0x26a)]('statLoadCard');if(_0x29ed53>0x64)_0x3945df[_0x156339(0x1f0)][_0x156339(0x28e)]=_0x156339(0x270),_0x2ed315[_0x156339(0x1f0)][_0x156339(0x2ff)]=_0x156339(0x2be);else _0x29ed53>0x50?(_0x3945df[_0x156339(0x1f0)][_0x156339(0x28e)]='var(--acc-orange)',_0x2ed315[_0x156339(0x1f0)][_0x156339(0x2ff)]=_0x156339(0x2a7)):(_0x3945df['style'][_0x156339(0x28e)]=_0x156339(0x262),_0x2ed315[_0x156339(0x1f0)][_0x156339(0x2ff)]=_0x156339(0x290));const _0x2a43fe=document[_0x156339(0x26a)](_0x156339(0x2e7));_0x2a43fe[_0x156339(0x236)]='';_0x341c94[_0x156339(0x338)]===0x0?_0x2a43fe['innerHTML']='<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>':(_0x341c94[_0x156339(0x207)]((_0xc5c698,_0x24f886)=>_0xc5c698[_0x156339(0x284)]['localeCompare'](_0x24f886[_0x156339(0x284)])),_0x341c94['forEach'](_0x4a61ca=>{const _0x19e448=_0x156339,_0x55a196=clients[_0x19e448(0x277)](_0x1882ab=>_0x1882ab['name']===_0x4a61ca[_0x19e448(0x30c)]),_0x5c3d6a=_0x55a196?_0x55a196[_0x19e448(0x28e)]:_0x19e448(0x2e2),_0x31f84c=_0x4a61ca['status']===_0x19e448(0x203),_0x49349f=_0x31f84c?'<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>':'',_0x539a8c=document[_0x19e448(0x325)](_0x19e448(0x21f));_0x539a8c[_0x19e448(0x2da)]=_0x19e448(0x1d5),_0x539a8c[_0x19e448(0x1f0)][_0x19e448(0x21b)]=_0x5c3d6a,_0x539a8c[_0x19e448(0x236)]=_0x19e448(0x1ce)+_0x4a61ca['start']+'\x20-\x20'+_0x4a61ca[_0x19e448(0x2d3)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4a61ca['client']+_0x19e448(0x2d9)+_0x49349f+_0x19e448(0x2cf),_0x2a43fe['appendChild'](_0x539a8c);}));const _0x481c45=document[_0x156339(0x26a)](_0x156339(0x28f)),_0x24fad0=dateExceptions[_0xedf762]===_0x156339(0x216);_0x24fad0?(_0x481c45[_0x156339(0x245)]=_0x156339(0x250),_0x481c45[_0x156339(0x2da)]=_0x156339(0x22a),_0x481c45[_0x156339(0x1f0)]['color']='var(--acc-green)',_0x481c45[_0x156339(0x1f0)]['background']=_0x156339(0x2e9)):(_0x481c45[_0x156339(0x245)]=_0x156339(0x2b2),_0x481c45['className']='btn-primary\x20btn-danger',_0x481c45[_0x156339(0x1f0)][_0x156339(0x28e)]=_0x156339(0x270),_0x481c45[_0x156339(0x1f0)][_0x156339(0x2dc)]='rgba(255,\x2069,\x2058,\x200.15)'),openSheet('dayOptionsSheet');}let currentAnPeriod='week';function openAnalytics(){const _0x27fb28=a2_0x4860a0,_0x5a5e2a=document[_0x27fb28(0x2d5)](_0x27fb28(0x332));setAnalyticsPeriod(_0x27fb28(0x2bb),_0x5a5e2a),closeAllSheets(),openSheet(_0x27fb28(0x2b1));}function setAnalyticsPeriod(_0x4365ce,_0x4b1cea){const _0x472290=a2_0x4860a0;currentAnPeriod=_0x4365ce,document[_0x472290(0x316)](_0x472290(0x332))[_0x472290(0x274)](_0x437294=>_0x437294[_0x472290(0x312)][_0x472290(0x303)](_0x472290(0x20c)));if(_0x4b1cea)_0x4b1cea['classList'][_0x472290(0x31c)](_0x472290(0x20c));const _0x311f8b=document[_0x472290(0x26a)](_0x472290(0x330));_0x311f8b[_0x472290(0x1f0)][_0x472290(0x2d7)]=_0x4365ce===_0x472290(0x31a)?_0x472290(0x211):'none';const _0x4dfd98=new Date();let _0x2ef20f=new Date(),_0x52537c=new Date();if(_0x4365ce===_0x472290(0x2bb))_0x2ef20f=getStartOfWeek(_0x4dfd98),_0x52537c=new Date(_0x2ef20f),_0x52537c[_0x472290(0x295)](_0x52537c[_0x472290(0x1ea)]()+0x6);else{if(_0x4365ce===_0x472290(0x1d4))_0x2ef20f=new Date(_0x4dfd98['getFullYear'](),_0x4dfd98[_0x472290(0x2c9)](),0x1),_0x52537c=new Date(_0x4dfd98[_0x472290(0x25c)](),_0x4dfd98[_0x472290(0x2c9)]()+0x1,0x0);else{!document[_0x472290(0x26a)](_0x472290(0x32d))[_0x472290(0x1df)]&&(document['getElementById'](_0x472290(0x32d))['value']=getLocalDateStr(_0x4dfd98),document[_0x472290(0x26a)](_0x472290(0x32a))[_0x472290(0x1df)]=getLocalDateStr(_0x4dfd98));refreshAnalytics();return;}}document[_0x472290(0x26a)](_0x472290(0x32d))[_0x472290(0x1df)]=getLocalDateStr(_0x2ef20f),document[_0x472290(0x26a)](_0x472290(0x32a))['value']=getLocalDateStr(_0x52537c),refreshAnalytics();}function refreshAnalytics(){const _0x164aac=a2_0x4860a0,_0x3647ad=document[_0x164aac(0x26a)](_0x164aac(0x32d))[_0x164aac(0x1df)],_0x3172c1=document[_0x164aac(0x26a)](_0x164aac(0x32a))[_0x164aac(0x1df)];if(!_0x3647ad||!_0x3172c1)return;const _0x54d5f2=sessions[_0x164aac(0x224)](_0x35a679=>_0x35a679[_0x164aac(0x2ca)]>=_0x3647ad&&_0x35a679[_0x164aac(0x2ca)]<=_0x3172c1&&_0x35a679[_0x164aac(0x326)]!==_0x164aac(0x318)),_0xb0d90d=_0x54d5f2['length'],_0x4d1d46=_0x54d5f2['filter'](_0x5629b0=>_0x5629b0[_0x164aac(0x326)]===_0x164aac(0x203))[_0x164aac(0x338)],_0x44e0ec=_0xb0d90d>0x0?Math[_0x164aac(0x1e2)](_0x4d1d46/_0xb0d90d*0x64):0x0;document['getElementById'](_0x164aac(0x2a3))[_0x164aac(0x245)]=_0x44e0ec+'%',document[_0x164aac(0x26a)](_0x164aac(0x219))[_0x164aac(0x245)]=_0x4d1d46+'\x20из\x20'+_0xb0d90d+_0x164aac(0x241);const _0x33e8e6=document[_0x164aac(0x26a)]('anDonutCircle'),_0x246f20=0x2*Math['PI']*0x23,_0x304933=_0x246f20-_0x44e0ec/0x64*_0x246f20;_0x33e8e6[_0x164aac(0x1f0)][_0x164aac(0x2cb)]=_0x304933;const _0x49a41b={};_0x54d5f2[_0x164aac(0x274)](_0x537bdb=>{const _0x2f6373=_0x164aac;if(!_0x49a41b[_0x537bdb[_0x2f6373(0x30c)]]){const _0xe58a71=clients['find'](_0x1d5595=>_0x1d5595[_0x2f6373(0x23e)]===_0x537bdb[_0x2f6373(0x30c)]);_0x49a41b[_0x537bdb['client']]={'total':0x0,'done':0x0,'color':_0xe58a71?_0xe58a71[_0x2f6373(0x28e)]:'#fff'};}_0x49a41b[_0x537bdb[_0x2f6373(0x30c)]][_0x2f6373(0x1e4)]++;if(_0x537bdb[_0x2f6373(0x326)]===_0x2f6373(0x203))_0x49a41b[_0x537bdb[_0x2f6373(0x30c)]][_0x2f6373(0x24d)]++;});const _0x418baf=document[_0x164aac(0x26a)](_0x164aac(0x2b3));_0x418baf[_0x164aac(0x236)]='';const _0x3ce8fb=Object[_0x164aac(0x302)](_0x49a41b)[_0x164aac(0x207)]((_0x38fa21,_0x2cac32)=>_0x2cac32[0x1]['total']-_0x38fa21[0x1]['total']);if(_0x3ce8fb[_0x164aac(0x338)]===0x0){_0x418baf[_0x164aac(0x236)]=_0x164aac(0x29d);return;}_0x3ce8fb[_0x164aac(0x274)](([_0x4e23b8,_0x33287c])=>{const _0x2f22c9=_0x164aac,_0x164186=Math['round'](_0x33287c[_0x2f22c9(0x24d)]/_0x33287c[_0x2f22c9(0x1e4)]*0x64),_0x224007=document[_0x2f22c9(0x325)](_0x2f22c9(0x21f));_0x224007[_0x2f22c9(0x2da)]=_0x2f22c9(0x279),_0x224007['style'][_0x2f22c9(0x21b)]=_0x33287c[_0x2f22c9(0x28e)],_0x224007[_0x2f22c9(0x236)]=_0x2f22c9(0x343)+_0x4e23b8+_0x2f22c9(0x2e6)+_0x33287c[_0x2f22c9(0x24d)]+'</span>\x20/\x20'+_0x33287c[_0x2f22c9(0x1e4)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x164186+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x418baf[_0x2f22c9(0x2f8)](_0x224007);});}function formatMinsToHrs(_0xf4038f){const _0x22b8f6=a2_0x4860a0;if(_0xf4038f===0x0)return'0';const _0x2c9f86=Math[_0x22b8f6(0x280)](_0xf4038f/0x3c),_0x5df2ca=_0xf4038f%0x3c;if(_0x5df2ca===0x0)return _0x2c9f86+'ч';return _0x2c9f86+'ч\x20'+_0x5df2ca+'м';}