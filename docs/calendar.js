const a2_0x1f1f85=a2_0xaa02;(function(_0x1de423,_0x96c463){const _0x21e6b7=a2_0xaa02,_0x4a1a56=_0x1de423();while(!![]){try{const _0xa890ed=-parseInt(_0x21e6b7(0x120))/0x1*(-parseInt(_0x21e6b7(0x93))/0x2)+parseInt(_0x21e6b7(0xbc))/0x3+parseInt(_0x21e6b7(0xe0))/0x4+-parseInt(_0x21e6b7(0x198))/0x5+-parseInt(_0x21e6b7(0x16d))/0x6*(parseInt(_0x21e6b7(0x1c7))/0x7)+parseInt(_0x21e6b7(0x1f1))/0x8+-parseInt(_0x21e6b7(0xec))/0x9*(-parseInt(_0x21e6b7(0x14e))/0xa);if(_0xa890ed===_0x96c463)break;else _0x4a1a56['push'](_0x4a1a56['shift']());}catch(_0x22730b){_0x4a1a56['push'](_0x4a1a56['shift']());}}}(a2_0x342e,0x65dcb),function initTMA(){const _0x587603=a2_0xaa02;try{const _0x3e5619=window[_0x587603(0xee)]?.[_0x587603(0x109)];if(!_0x3e5619)return;_0x3e5619['ready'](),_0x3e5619[_0x587603(0xb1)]();try{_0x3e5619[_0x587603(0xa7)](_0x587603(0x123)),_0x3e5619[_0x587603(0x177)]&&_0x3e5619[_0x587603(0x177)](_0x587603(0x123));}catch(_0xe3da5f){console[_0x587603(0x15f)]('Error\x20setting\x20color:',_0xe3da5f);}try{_0x3e5619[_0x587603(0xa0)]&&(_0x3e5619['BackButton']['show'](),_0x3e5619['BackButton'][_0x587603(0x14a)](),_0x3e5619[_0x587603(0xa0)][_0x587603(0x1ac)](function(){const _0x50de46=_0x587603;window['location'][_0x50de46(0x1ba)]='router.html';}));}catch(_0xb3d159){console[_0x587603(0x15f)](_0x587603(0x1b7),_0xb3d159);}try{if(_0x3e5619[_0x587603(0x1a6)])_0x3e5619[_0x587603(0x1a6)]();}catch(_0x442111){}}catch(_0x3fe275){console['error'](_0x587603(0x1eb),_0x3fe275);}}());function isAdmin(){const _0x4ec217=a2_0xaa02;try{const _0x239d79=Number(window['Telegram']?.[_0x4ec217(0x109)]?.[_0x4ec217(0xfa)]?.[_0x4ec217(0xc3)]?.['id']);return _0x239d79===0xbaf7174;}catch(_0x430286){return![];}}const APP_VERSION=a2_0x1f1f85(0x15a),API_URL=a2_0x1f1f85(0x72),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x1f1f85(0x1f2),KEY_SESSIONS=a2_0x1f1f85(0xcc),KEY_SETTINGS=a2_0x1f1f85(0x1b8);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x56c92d=a2_0x1f1f85;return window['Telegram']?.['WebApp']?.[_0x56c92d(0xfa)]?.[_0x56c92d(0xc3)]?.['id']||_0x56c92d(0xc2);},'saveLocally'(){const _0x55931d=a2_0x1f1f85;try{localStorage[_0x55931d(0x121)](KEY_CLIENTS,JSON[_0x55931d(0x1e6)](clients)),localStorage['setItem'](KEY_SESSIONS,JSON[_0x55931d(0x1e6)](sessions)),localStorage[_0x55931d(0x121)](KEY_SETTINGS,JSON[_0x55931d(0x1e6)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x1e73a9){console[_0x55931d(0x1a1)](_0x55931d(0x1dc),_0x1e73a9);}},'loadLocal'(){const _0x17012d=a2_0x1f1f85;try{const _0x19a748=localStorage[_0x17012d(0x15e)](KEY_CLIENTS);if(_0x19a748)clients=JSON['parse'](_0x19a748);const _0x554931=localStorage['getItem'](KEY_SESSIONS);if(_0x554931)sessions=JSON[_0x17012d(0x110)](_0x554931);const _0x5d06bf=localStorage[_0x17012d(0x15e)](KEY_SETTINGS);if(_0x5d06bf){const _0x376ff2=JSON[_0x17012d(0x110)](_0x5d06bf);if(_0x376ff2[_0x17012d(0xf5)])availabilityPattern=_0x376ff2['pattern'];if(_0x376ff2['exceptions'])dateExceptions=_0x376ff2['exceptions'];if(_0x376ff2[_0x17012d(0x9e)])specialRanges=_0x376ff2[_0x17012d(0x9e)];}else{for(let _0x20f68e=0x0;_0x20f68e<0x7;_0x20f68e++)availabilityPattern[_0x20f68e]=Array['from']({'length':0xc},(_0x1f7781,_0x543949)=>_0x543949+0x9);}}catch(_0x270928){console[_0x17012d(0x1a1)](_0x17012d(0xb2),_0x270928);}},async 'fetchFromServer'(_0x46010e,_0x27ee1a={}){const _0x7795c9=a2_0x1f1f85,_0x446e0f=window[_0x7795c9(0xee)]?.[_0x7795c9(0x109)],_0x31e632={'action':_0x46010e,'init_data':_0x446e0f?.[_0x7795c9(0x1d3)]||'',..._0x27ee1a};try{const _0x5e340d=await fetch(API_URL,{'method':_0x7795c9(0x151),'headers':{'Content-Type':_0x7795c9(0x74)},'body':JSON[_0x7795c9(0x1e6)](_0x31e632)}),_0x3c1fe7=await _0x5e340d[_0x7795c9(0xd2)]();if(!_0x3c1fe7['ok'])throw new Error(_0x3c1fe7[_0x7795c9(0x1a1)]||_0x7795c9(0x155));return _0x3c1fe7[_0x7795c9(0xce)];}catch(_0x123a21){console[_0x7795c9(0x1a1)](_0x7795c9(0x7b)+_0x46010e+_0x7795c9(0x78),_0x123a21);throw _0x123a21;}},async 'syncLoad'(){const _0x56d5a5=a2_0x1f1f85,_0x4e9dc5=new Date(),_0x3ca5a7=_0x4e9dc5[_0x56d5a5(0xf8)]()+'-'+String(_0x4e9dc5[_0x56d5a5(0x1d4)]()+0x1)['padStart'](0x2,'0'),_0xa9f9d2=new Date(_0x4e9dc5);_0xa9f9d2[_0x56d5a5(0x7e)](_0x4e9dc5['getMonth']()+0x1);const _0x35e599=_0xa9f9d2[_0x56d5a5(0xf8)]()+'-'+String(_0xa9f9d2[_0x56d5a5(0x1d4)]()+0x1)[_0x56d5a5(0x1b5)](0x2,'0'),_0x3784d2=Date[_0x56d5a5(0xb4)]();console[_0x56d5a5(0x15f)](_0x56d5a5(0x181)+_0x3ca5a7+',\x20'+_0x35e599+_0x56d5a5(0x161));try{const [_0x5960b5,_0x49072b]=await Promise[_0x56d5a5(0x12c)]([this['fetchFromServer'](_0x56d5a5(0x14d),{'month_str':_0x3ca5a7}),this[_0x56d5a5(0x141)](_0x56d5a5(0x14d),{'month_str':_0x35e599})]);if(lastUserActionTime>_0x3784d2)return console[_0x56d5a5(0x1c8)]('[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response'),![];return this['mergeServerData'](_0x5960b5,_0x3ca5a7),this['mergeServerData'](_0x49072b,_0x35e599),this[_0x56d5a5(0x89)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x313016){console['error'](_0x313016);throw _0x313016;}},'mergeServerData'(_0x546415,_0xcba062){const _0x2d873d=a2_0x1f1f85;if(!_0x546415)return;_0x546415[_0x2d873d(0x1cb)]&&Array[_0x2d873d(0x1b3)](_0x546415[_0x2d873d(0x1cb)])&&(clients=_0x546415[_0x2d873d(0x1cb)]);if(_0x546415['settings']){if(_0x546415[_0x2d873d(0x7c)][_0x2d873d(0xf5)])availabilityPattern=_0x546415['settings'][_0x2d873d(0xf5)];if(_0x546415[_0x2d873d(0x7c)][_0x2d873d(0x193)])dateExceptions=_0x546415['settings']['exceptions'];if(_0x546415['settings'][_0x2d873d(0x9e)])specialRanges=_0x546415[_0x2d873d(0x7c)]['ranges'];if(_0x546415['settings'][_0x2d873d(0x14b)]){localStorage[_0x2d873d(0x121)](_0x2d873d(0x1da),_0x546415['settings']['cancel_window']);const _0x316d9e=document['getElementById']('settingCancelWindow');if(_0x316d9e)_0x316d9e[_0x2d873d(0xdd)]=_0x546415['settings'][_0x2d873d(0x14b)];}}_0x546415[_0x2d873d(0xc4)]&&(sessions=sessions[_0x2d873d(0x136)](_0x287c6f=>!_0x287c6f[_0x2d873d(0x138)][_0x2d873d(0x143)](_0xcba062)),Object[_0x2d873d(0x97)](_0x546415['calendar'])[_0x2d873d(0xa4)](_0x2d5a65=>{const _0x4e4948=_0x2d873d,_0x31f9de=_0x546415[_0x4e4948(0xc4)][_0x2d5a65];_0x31f9de[_0x4e4948(0xa4)](_0x3fca11=>{const _0x12aefa=_0x4e4948,_0x1a84c4=clients[_0x12aefa(0xb9)](_0x3d2b06=>String(_0x3d2b06['id'])===String(_0x3fca11['c']));sessions[_0x12aefa(0xe6)]({'id':_0x3fca11['i'],'clientId':_0x3fca11['c'],'client':_0x1a84c4?_0x1a84c4[_0x12aefa(0x192)]:'Unknown','dateStr':_0xcba062+'-'+_0x2d5a65[_0x12aefa(0x1b5)](0x2,'0'),'start':_0x3fca11['s'],'end':_0x3fca11['e'],'status':_0x3fca11['st']||'planned','note':_0x3fca11['n']||'','seriesId':_0x3fca11[_0x12aefa(0x6d)]||null});});}));},async 'syncBatch'(_0x483fff){const _0x264c2d=a2_0x1f1f85,_0x315490=[...new Set(_0x483fff)],_0x25e35a=_0x315490[_0x264c2d(0x8c)](_0x593243=>{const _0x1e60f=_0x264c2d,_0x161301=sessions[_0x1e60f(0x136)](_0xab90c9=>_0xab90c9['dateStr']===_0x593243&&_0xab90c9[_0x1e60f(0x1b0)]!==_0x1e60f(0xd0)),_0x3163c9=_0x161301[_0x1e60f(0x8c)](_0x18b56d=>({'i':_0x18b56d['id'],'c':_0x18b56d['clientId'],'s':_0x18b56d[_0x1e60f(0x86)],'e':_0x18b56d[_0x1e60f(0x9d)],'st':_0x18b56d['status'],'n':_0x18b56d[_0x1e60f(0x69)],'sid':_0x18b56d[_0x1e60f(0x139)]}));return{'date':_0x593243,'day_data':_0x3163c9};});if(_0x25e35a['length']===0x0)return;console[_0x264c2d(0x15f)]('[Sync]\x20Pushing\x20batch\x20updates\x20for\x20'+_0x25e35a[_0x264c2d(0x115)]+_0x264c2d(0xe4)),await this[_0x264c2d(0x141)](_0x264c2d(0x94),{'changes':_0x25e35a});}};async function init(){const _0x435af4=a2_0x1f1f85;DataManager[_0x435af4(0x1bb)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x435af4(0xe5)](_0x435af4(0x108))[_0x435af4(0x19f)](_0x435af4(0x188),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x435af4(0x73)]()[_0x435af4(0x19e)](()=>{const _0x31c256=_0x435af4;showToast(_0x31c256(0x1e1),!![]);})[_0x435af4(0x162)](_0x3b7af1=>{const _0x419de8=_0x435af4;showToast(_0x419de8(0x1d9),![]);});}function generateId(){const _0x38be6c=a2_0x1f1f85;return Date[_0x38be6c(0xb4)]()[_0x38be6c(0x148)](0x24)+Math[_0x38be6c(0xca)]()[_0x38be6c(0x148)](0x24)['substr'](0x2,0x5);}function toggleSeriesInput(){const _0x5af695=a2_0x1f1f85,_0x3c1a71=document['getElementById'](_0x5af695(0x80))[_0x5af695(0x18f)],_0x1bc923=document[_0x5af695(0xe5)](_0x5af695(0xe1));_0x1bc923[_0x5af695(0xda)][_0x5af695(0x88)]=_0x3c1a71?_0x5af695(0x159):_0x5af695(0x15d);const _0x1a58a4=document[_0x5af695(0xe5)](_0x5af695(0x16c));_0x1a58a4['style']['borderRadius']=_0x3c1a71?_0x5af695(0xde):_0x5af695(0xa1);}function openAddSession(_0x8af27f){const _0x5c496c=a2_0x1f1f85;editingId=null,populateClientSelect(),document['getElementById'](_0x5c496c(0x1e5))['textContent']=_0x5c496c(0xe8),document[_0x5c496c(0xe5)](_0x5c496c(0x191))['style']['display']=_0x5c496c(0x15d),document[_0x5c496c(0xe5)](_0x5c496c(0xe9))[_0x5c496c(0xda)][_0x5c496c(0x88)]='none';const _0x329f3a=document[_0x5c496c(0xe5)](_0x5c496c(0x16c)),_0x5ccfba=document[_0x5c496c(0xe5)](_0x5c496c(0xe1));_0x329f3a[_0x5c496c(0xda)][_0x5c496c(0x88)]=_0x5c496c(0xb8),_0x329f3a[_0x5c496c(0xda)][_0x5c496c(0x1c2)]='10px',document[_0x5c496c(0xe5)](_0x5c496c(0x80))[_0x5c496c(0x18f)]=![],document[_0x5c496c(0xe5)](_0x5c496c(0x156))['value']=0x4,_0x5ccfba[_0x5c496c(0xda)][_0x5c496c(0x88)]='none',document['getElementById'](_0x5c496c(0x1c9))[_0x5c496c(0xdd)]=getLocalDateStr(_0x8af27f),updateDateDisplay();const _0x1a663e=_0x8af27f[_0x5c496c(0xc9)]();document['getElementById'](_0x5c496c(0x1a0))[_0x5c496c(0xdd)]=String(_0x1a663e)[_0x5c496c(0x1b5)](0x2,'0')+_0x5c496c(0x116),document[_0x5c496c(0xe5)](_0x5c496c(0x1e8))[_0x5c496c(0xdd)]=String(_0x1a663e+0x1)[_0x5c496c(0x1b5)](0x2,'0')+_0x5c496c(0x116),openSheet(_0x5c496c(0xe3));}function openEdit(_0x3b4852){const _0x238039=a2_0x1f1f85;editingId=_0x3b4852['id'],populateClientSelect(),document[_0x238039(0xe5)](_0x238039(0x1e5))[_0x238039(0xbd)]='Редактировать',document[_0x238039(0xe5)]('btnDelete')['style'][_0x238039(0x88)]='block';const _0x5142f4=document[_0x238039(0xe5)]('btnStatusToggle');_0x5142f4[_0x238039(0xda)][_0x238039(0x88)]=_0x238039(0xb8);_0x3b4852[_0x238039(0x1b0)]===_0x238039(0xdf)?(_0x5142f4[_0x238039(0x178)]=_0x238039(0x6f),_0x5142f4[_0x238039(0x168)]=_0x238039(0x152)):(_0x5142f4[_0x238039(0x178)]=_0x238039(0x98),_0x5142f4[_0x238039(0x168)]=_0x238039(0x13a));const _0x488e7d=!!_0x3b4852[_0x238039(0x139)];document['getElementById'](_0x238039(0x16c))[_0x238039(0xda)]['display']=_0x238039(0x15d),document[_0x238039(0xe5)]('seriesCountContainer')[_0x238039(0xda)][_0x238039(0x88)]=_0x238039(0x15d),_0x488e7d?(document[_0x238039(0xe5)]('patternInfoBox')[_0x238039(0xda)][_0x238039(0x88)]=_0x238039(0xb8),document[_0x238039(0xe5)](_0x238039(0x118))[_0x238039(0x184)](_0x238039(0xbf))['textContent']=_0x238039(0x95)):document['getElementById']('patternInfoBox')[_0x238039(0xda)][_0x238039(0x88)]=_0x238039(0x15d),document[_0x238039(0xe5)](_0x238039(0x18e))['value']=_0x3b4852[_0x238039(0x19c)],document[_0x238039(0xe5)](_0x238039(0x1c9))[_0x238039(0xdd)]=_0x3b4852[_0x238039(0x138)],document[_0x238039(0xe5)](_0x238039(0x1a0))[_0x238039(0xdd)]=_0x3b4852[_0x238039(0x86)],document[_0x238039(0xe5)](_0x238039(0x1e8))[_0x238039(0xdd)]=_0x3b4852[_0x238039(0x9d)],document['getElementById'](_0x238039(0xc7))[_0x238039(0xdd)]=_0x3b4852['note']||'',updateDateDisplay(),openSheet('sessionSheet');}async function trySaveSession(){const _0x45c13d=a2_0x1f1f85,_0x14a803=document['getElementById'](_0x45c13d(0x18e))[_0x45c13d(0xdd)],_0x10ddf2=document[_0x45c13d(0xe5)](_0x45c13d(0x1c9))[_0x45c13d(0xdd)],_0x24921f=document[_0x45c13d(0xe5)](_0x45c13d(0x1a0))[_0x45c13d(0xdd)],_0x3a8a91=document['getElementById'](_0x45c13d(0x1e8))[_0x45c13d(0xdd)],_0x4b1ff1=document[_0x45c13d(0xe5)](_0x45c13d(0xc7))[_0x45c13d(0xdd)],_0xc9bfc2=document['getElementById'](_0x45c13d(0x80))[_0x45c13d(0x18f)];let _0x5d9c3a=0x4;if(_0xc9bfc2){const _0x5b5182=parseInt(document['getElementById'](_0x45c13d(0x156))[_0x45c13d(0xdd)]);if(!_0x5b5182||_0x5b5182<0x2){showToast(_0x45c13d(0xe7),![]);return;}if(_0x5b5182>0x64){showToast(_0x45c13d(0x10d),![]);return;}_0x5d9c3a=_0x5b5182;}const _0x2f2742=clients[_0x45c13d(0xb9)](_0x532954=>_0x532954['name']===_0x14a803);if(!_0x2f2742){showToast(_0x45c13d(0xe2),![]);return;}const _0x1faf5a=validateAppointment(_0x10ddf2,_0x24921f,_0x3a8a91,editingId,_0x2f2742['id']);if(!_0x1faf5a[_0x45c13d(0x1b9)]){showToast(_0x1faf5a[_0x45c13d(0x112)],![]);return;}_0x1faf5a[_0x45c13d(0x1d2)]&&showToast(_0x1faf5a[_0x45c13d(0x1d2)],![]);const _0x28fd0={'client':_0x14a803,'clientId':_0x2f2742['id'],'start':_0x24921f,'end':_0x3a8a91,'note':_0x4b1ff1,'status':_0x45c13d(0xa9)},_0x427a95=editingId?sessions[_0x45c13d(0xb9)](_0x13d6ea=>_0x13d6ea['id']===editingId):null;if(_0x427a95&&_0x427a95['seriesId']){tempSessionData={..._0x28fd0,'dateStr':_0x10ddf2,'id':editingId,'seriesId':_0x427a95[_0x45c13d(0x139)]},openActionSheet(_0x45c13d(0xad));return;}let _0x309c0e=null;if(!editingId)_0x309c0e=_0x45c13d(0xd8);else{if(_0x427a95){if(String(_0x427a95[_0x45c13d(0x1ad)])!==String(_0x2f2742['id']))console[_0x45c13d(0x15f)]('[Notify]\x20Client\x20SWAP\x20detected'),NotificationManager['send'](_0x45c13d(0x13c),_0x427a95),_0x309c0e=_0x45c13d(0xd8);else(_0x427a95[_0x45c13d(0x86)]!==_0x24921f||_0x427a95[_0x45c13d(0x9d)]!==_0x3a8a91||_0x427a95['dateStr']!==_0x10ddf2)&&(_0x309c0e=_0x45c13d(0x1f3));}}if(!editingId&&_0xc9bfc2){createBatchSeries(_0x28fd0,_0x10ddf2,_0x5d9c3a),NotificationManager[_0x45c13d(0x119)](_0x45c13d(0xd8),{..._0x28fd0,'dateStr':_0x10ddf2});return;}lastUserActionTime=Date[_0x45c13d(0xb4)]();const _0x2d282c={..._0x28fd0,'dateStr':_0x10ddf2,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x2d282c),_0x309c0e&&NotificationManager[_0x45c13d(0x119)](_0x309c0e,_0x2d282c);}function toggleSessionStatus(){const _0x20833b=a2_0x1f1f85;lastUserActionTime=Date['now']();const _0x1d1fc7=sessions[_0x20833b(0xb9)](_0x55e8d8=>_0x55e8d8['id']===editingId);if(!_0x1d1fc7)return;const _0x446469=_0x1d1fc7[_0x20833b(0x1b0)]==='completed'?_0x20833b(0xa9):_0x20833b(0xdf);_0x1d1fc7[_0x20833b(0x1b0)]=_0x446469,saveSingleSession(_0x1d1fc7),_0x446469===_0x20833b(0xdf)&&NotificationManager[_0x20833b(0x119)](_0x20833b(0x100),_0x1d1fc7),showToast(_0x446469==='completed'?_0x20833b(0x15b):_0x20833b(0x127),!![]);}function validateAppointment(_0x1f8e19,_0x1dfdb3,_0x2355c1,_0x5dad50,_0xf21a40){const _0x47aec7=a2_0x1f1f85,[_0x41e961,_0x1abaf6]=_0x1dfdb3[_0x47aec7(0x176)](':')[_0x47aec7(0x8c)](Number),[_0x3191d6,_0x44d110]=_0x2355c1['split'](':')[_0x47aec7(0x8c)](Number),_0x50af40=_0x41e961*0x3c+_0x1abaf6,_0x4626ad=_0x3191d6*0x3c+_0x44d110,_0x5295ea=String(_0xf21a40);let _0x53f73d=![],_0x5a0844='';for(let _0x30e299 of sessions){if(_0x30e299[_0x47aec7(0x138)]!==_0x1f8e19)continue;if(_0x30e299[_0x47aec7(0x1b0)]==='cancelled')continue;if(_0x5dad50&&String(_0x30e299['id'])===String(_0x5dad50))continue;const [_0x89e8bf,_0x4d4ff2]=_0x30e299[_0x47aec7(0x86)][_0x47aec7(0x176)](':')[_0x47aec7(0x8c)](Number),[_0x4cb73b,_0xc457fc]=_0x30e299['end'][_0x47aec7(0x176)](':')[_0x47aec7(0x8c)](Number),_0x42f07e=_0x89e8bf*0x3c+_0x4d4ff2,_0x52cb5e=_0x4cb73b*0x3c+_0xc457fc;if(Math[_0x47aec7(0x92)](_0x50af40,_0x42f07e)<Math['min'](_0x4626ad,_0x52cb5e)){if(_0x30e299[_0x47aec7(0x1ad)]&&String(_0x30e299[_0x47aec7(0x1ad)])===_0x5295ea)return{'valid':![],'msg':_0x47aec7(0xef)+_0x30e299[_0x47aec7(0x19c)]+_0x47aec7(0x10e)};_0x53f73d=!![],_0x5a0844=_0x30e299[_0x47aec7(0x19c)];}}if(_0x53f73d)return{'valid':!![],'warning':'Групповая:\x20также\x20записан\x20'+_0x5a0844};return{'valid':!![]};}function saveSingleSession(_0x2f00a7){const _0x4db0eb=a2_0x1f1f85;if(editingId){const _0x2bbefb=sessions[_0x4db0eb(0x13b)](_0x3dd4b9=>_0x3dd4b9['id']===editingId);if(_0x2bbefb!==-0x1)sessions[_0x2bbefb]=_0x2f00a7;}else sessions[_0x4db0eb(0xe6)](_0x2f00a7);afterSaveAction([_0x2f00a7[_0x4db0eb(0x138)]]);}function createBatchSeries(_0x2e1487,_0x267d8e,_0x532e73){const _0x33a51e=a2_0x1f1f85,_0x237a3f=generateId(),_0x5e8fac=[],_0x3210ea=[];let _0x1ea0aa=0x0,_0x483307=new Date(_0x267d8e);for(let _0x1dec53=0x0;_0x1dec53<_0x532e73;_0x1dec53++){const _0x31c717=getLocalDateStr(_0x483307),_0x508d63=validateAppointment(_0x31c717,_0x2e1487['start'],_0x2e1487[_0x33a51e(0x9d)],null,_0x2e1487[_0x33a51e(0x1ad)]);if(!_0x508d63['valid'])console[_0x33a51e(0x15f)](_0x33a51e(0xa6)+_0x31c717+':\x20Client\x20already\x20booked'),_0x1ea0aa++;else{const _0x4a7c2d={..._0x2e1487,'id':generateId(),'dateStr':_0x31c717,'seriesId':_0x237a3f};_0x3210ea['push'](_0x4a7c2d),_0x5e8fac[_0x33a51e(0xe6)](_0x31c717);}_0x483307[_0x33a51e(0x1af)](_0x483307[_0x33a51e(0x186)]()+0x7);}if(_0x3210ea[_0x33a51e(0x115)]===0x0){showToast(_0x33a51e(0xfe),![]);return;}sessions[_0x33a51e(0xe6)](..._0x3210ea),lastUserActionTime=Date[_0x33a51e(0xb4)]();let _0x530d9a=_0x33a51e(0xd3)+_0x3210ea[_0x33a51e(0x115)];_0x1ea0aa>0x0&&(_0x530d9a+='\x20(пропущено:\x20'+_0x1ea0aa+')'),showToast(_0x530d9a,!![]),afterSaveAction(_0x5e8fac);}function updateSeriesBatch(_0x45dff2,_0x38a4e8){const _0x4d387a=a2_0x1f1f85,_0x224a52=[],_0x2ddbdb=_0x38a4e8[_0x4d387a(0x139)];if(_0x45dff2===_0x4d387a(0x125)){const _0x2d5916={..._0x38a4e8,'seriesId':null},_0x156c92=sessions[_0x4d387a(0x13b)](_0xfe8266=>_0xfe8266['id']===_0x38a4e8['id']);if(_0x156c92!==-0x1)sessions[_0x156c92]=_0x2d5916;_0x224a52[_0x4d387a(0xe6)](_0x2d5916[_0x4d387a(0x138)]);}else{if(_0x45dff2===_0x4d387a(0x90)){const _0x258085=_0x38a4e8[_0x4d387a(0x138)];sessions[_0x4d387a(0xa4)]((_0x240028,_0x30e811)=>{const _0x38344d=_0x4d387a;_0x240028[_0x38344d(0x139)]===_0x2ddbdb&&_0x240028[_0x38344d(0x138)]>=_0x258085&&(sessions[_0x30e811]={...sessions[_0x30e811],'start':_0x38a4e8[_0x38344d(0x86)],'end':_0x38a4e8['end'],'note':_0x38a4e8[_0x38344d(0x69)],'client':_0x38a4e8['client'],'clientId':_0x38a4e8[_0x38344d(0x1ad)]},_0x224a52[_0x38344d(0xe6)](_0x240028['dateStr']));});}}afterSaveAction(_0x224a52);}function tryDeleteSession(){const _0x4db95d=a2_0x1f1f85,_0x5b3b33=sessions[_0x4db95d(0xb9)](_0x114984=>_0x114984['id']===editingId);if(!_0x5b3b33)return;_0x5b3b33[_0x4db95d(0x139)]?openActionSheet(_0x4db95d(0x1a3)):commitDelete(_0x4db95d(0x125),_0x5b3b33);}function commitDelete(_0xebbf9a,_0x437925){const _0x2cd599=a2_0x1f1f85;lastUserActionTime=Date[_0x2cd599(0xb4)](),NotificationManager[_0x2cd599(0x119)](_0x2cd599(0x13c),_0x437925);const _0x348942=[];if(_0xebbf9a===_0x2cd599(0x125))sessions=sessions[_0x2cd599(0x136)](_0x20eee8=>_0x20eee8['id']!==_0x437925['id']),_0x348942[_0x2cd599(0xe6)](_0x437925[_0x2cd599(0x138)]);else{if(_0xebbf9a===_0x2cd599(0x90)){const _0x4ee514=_0x437925[_0x2cd599(0x138)],_0x5d8df3=_0x437925[_0x2cd599(0x139)];sessions['forEach'](_0x5bb2b8=>{const _0x1205fc=_0x2cd599;_0x5bb2b8[_0x1205fc(0x139)]===_0x5d8df3&&_0x5bb2b8[_0x1205fc(0x138)]>=_0x4ee514&&_0x348942[_0x1205fc(0xe6)](_0x5bb2b8['dateStr']);}),sessions=sessions[_0x2cd599(0x136)](_0x3fd85d=>!(_0x3fd85d['seriesId']===_0x5d8df3&&_0x3fd85d[_0x2cd599(0x138)]>=_0x4ee514));}}afterSaveAction(_0x348942);}function afterSaveAction(_0x43527f){const _0x5d86cc=a2_0x1f1f85;DataManager[_0x5d86cc(0x89)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x5d86cc(0xc8)](_0x43527f)[_0x5d86cc(0x19e)](()=>console[_0x5d86cc(0x15f)](_0x5d86cc(0xaa)))['catch'](_0x457a1f=>showToast(_0x5d86cc(0x1db),![]));}const NotificationManager={'formatDate'(_0x11defe){const _0x3a980f=a2_0x1f1f85,_0xae339=new Date(_0x11defe),_0x111fe1={'weekday':_0x3a980f(0xdb),'day':_0x3a980f(0xab),'month':_0x3a980f(0xdb)};let _0x5dba72=_0xae339['toLocaleDateString']('ru-RU',_0x111fe1);return _0x5dba72[_0x3a980f(0xcb)](0x0)[_0x3a980f(0xc1)]()+_0x5dba72['slice'](0x1);},'getText'(_0x22d073,_0x18fcd7){const _0xcd60ac=a2_0x1f1f85,_0xfb9cb0=this[_0xcd60ac(0x142)](_0x18fcd7[_0xcd60ac(0x138)]);switch(_0x22d073){case _0xcd60ac(0xd8):return _0xcd60ac(0x1cc)+(_0xcd60ac(0x16f)+_0xfb9cb0+'\x0a')+(_0xcd60ac(0xf3)+_0x18fcd7['start']+_0xcd60ac(0xd6)+_0x18fcd7['end']+'\x0a\x0a')+_0xcd60ac(0x19a);case'update':return _0xcd60ac(0x129)+_0xcd60ac(0x1ee)+(_0xcd60ac(0x128)+_0x18fcd7[_0xcd60ac(0x86)]+_0xcd60ac(0xd6)+_0x18fcd7[_0xcd60ac(0x9d)]+_0xcd60ac(0x9a))+(_0xcd60ac(0x16f)+_0xfb9cb0);case'cancel':return _0xcd60ac(0x8a)+('Запись\x20на\x20<b>'+_0xfb9cb0+'\x20('+_0x18fcd7[_0xcd60ac(0x86)]+_0xcd60ac(0x187));case _0xcd60ac(0x100):return'<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a'+_0xcd60ac(0x150)+_0xcd60ac(0x1d1);default:return'';}},async 'send'(_0x4a2e4e,_0x6ec8d5){const _0x12b4b8=a2_0x1f1f85;console[_0x12b4b8(0x15f)](_0x12b4b8(0x113),_0x4a2e4e,_0x6ec8d5);if(!_0x6ec8d5){console['error']('[Notify]\x20Error:\x20sessionData\x20is\x20null');return;}const _0x201006=String(_0x6ec8d5[_0x12b4b8(0x1ad)]);console[_0x12b4b8(0x15f)](_0x12b4b8(0x14f),_0x201006);if(!_0x6ec8d5['clientId']||_0x201006==='undefined'||_0x201006===_0x12b4b8(0x101)){console[_0x12b4b8(0x1a1)](_0x12b4b8(0x124));if(_0x6ec8d5[_0x12b4b8(0x19c)]){const _0x179bad=clients['find'](_0x1571c7=>_0x1571c7[_0x12b4b8(0x192)]===_0x6ec8d5[_0x12b4b8(0x19c)]);if(_0x179bad)return console[_0x12b4b8(0x15f)](_0x12b4b8(0x84),_0x179bad['id']),this['send'](_0x4a2e4e,{..._0x6ec8d5,'clientId':_0x179bad['id']});}return;}if(_0x201006[_0x12b4b8(0x115)]<0x5){console[_0x12b4b8(0x1c8)](_0x12b4b8(0x96),_0x201006);return;}const _0x58521f=this[_0x12b4b8(0x18b)](_0x4a2e4e,_0x6ec8d5);if(!_0x58521f){console[_0x12b4b8(0x1a1)](_0x12b4b8(0x140));return;}console[_0x12b4b8(0x15f)](_0x12b4b8(0xf7)+_0x201006+_0x12b4b8(0x161)),DataManager[_0x12b4b8(0x141)]('send_notification',{'chatId':_0x201006,'text':_0x58521f})[_0x12b4b8(0x19e)](_0x2d998f=>console['log']('[Notify]\x20Server\x20Response:',_0x2d998f))[_0x12b4b8(0x162)](_0x109527=>console[_0x12b4b8(0x1a1)](_0x12b4b8(0x107),_0x109527));}};function getLocalDateStr(_0x313086){const _0x17aff6=a2_0x1f1f85,_0x4babcb=_0x313086['getFullYear'](),_0x40ab34=String(_0x313086['getMonth']()+0x1)[_0x17aff6(0x1b5)](0x2,'0'),_0x4fcbf0=String(_0x313086[_0x17aff6(0x186)]())[_0x17aff6(0x1b5)](0x2,'0');return _0x4babcb+'-'+_0x40ab34+'-'+_0x4fcbf0;}function getDateStr(_0x2018f7){const _0xf4995=a2_0x1f1f85,_0x55aded=new Date();return _0x55aded[_0xf4995(0x1af)](_0x55aded['getDate']()+_0x2018f7),getLocalDateStr(_0x55aded);}function getStartOfWeek(_0x2c3ed4){const _0x231adc=a2_0x1f1f85,_0x10d362=(function(){let _0x33fdc2=!![];return function(_0x1b7a60,_0x50f0be){const _0x3d9b4f=_0x33fdc2?function(){const _0x3c79af=a2_0xaa02;if(_0x50f0be){const _0x250c5f=_0x50f0be[_0x3c79af(0x183)](_0x1b7a60,arguments);return _0x50f0be=null,_0x250c5f;}}:function(){};return _0x33fdc2=![],_0x3d9b4f;};}()),_0x15f669=_0x10d362(this,function(){const _0x3cdcd6=a2_0xaa02;return _0x15f669['toString']()['search'](_0x3cdcd6(0xcd))[_0x3cdcd6(0x148)]()[_0x3cdcd6(0x174)](_0x15f669)['search']('(((.+)+)+)+$');});_0x15f669();const _0x114706=new Date(_0x2c3ed4),_0x3ed265=_0x114706[_0x231adc(0x1df)](),_0x875e97=_0x114706['getDate']()-_0x3ed265+(_0x3ed265===0x0?-0x6:0x1);return _0x114706[_0x231adc(0x1af)](_0x875e97),_0x114706[_0x231adc(0xd7)](0x0,0x0,0x0,0x0),_0x114706;}function hexToRgba(_0x11aa7f,_0x2c7113){const _0x3a5eb6=a2_0x1f1f85;if(!_0x11aa7f)return _0x3a5eb6(0x132);let _0x578faa=0x0,_0xb1053d=0x0,_0x6ab5e7=0x0;if(_0x11aa7f[_0x3a5eb6(0x115)]===0x4)_0x578faa='0x'+_0x11aa7f[0x1]+_0x11aa7f[0x1],_0xb1053d='0x'+_0x11aa7f[0x2]+_0x11aa7f[0x2],_0x6ab5e7='0x'+_0x11aa7f[0x3]+_0x11aa7f[0x3];else _0x11aa7f['length']===0x7&&(_0x578faa='0x'+_0x11aa7f[0x1]+_0x11aa7f[0x2],_0xb1053d='0x'+_0x11aa7f[0x3]+_0x11aa7f[0x4],_0x6ab5e7='0x'+_0x11aa7f[0x5]+_0x11aa7f[0x6]);return _0x3a5eb6(0x1cf)+ +_0x578faa+',\x20'+ +_0xb1053d+',\x20'+ +_0x6ab5e7+',\x20'+_0x2c7113+')';}function renderTimeColumn(){const _0x4a5365=a2_0x1f1f85,_0x59392c=document[_0x4a5365(0xe5)](_0x4a5365(0x18c)),_0x593d96=document['getElementById'](_0x4a5365(0x146));_0x59392c[_0x4a5365(0x168)]='',_0x59392c[_0x4a5365(0x1a7)](_0x593d96);for(let _0x3eb90d=0x0;_0x3eb90d<0x18;_0x3eb90d++){const _0x238895=document[_0x4a5365(0x12d)](_0x4a5365(0x16b));_0x238895[_0x4a5365(0x178)]=_0x4a5365(0x87);if(_0x3eb90d>0x0)_0x238895['innerHTML']=_0x4a5365(0xfd)+String(_0x3eb90d)['padStart'](0x2,'0')+_0x4a5365(0x194);_0x59392c[_0x4a5365(0x1a7)](_0x238895);}}function renderDayRange(_0x273a06,_0x16259d){const _0xeef1b4=a2_0x1f1f85,_0x1bdc96=document[_0xeef1b4(0xe5)](_0xeef1b4(0x14c)),_0x150012=document[_0xeef1b4(0xe5)](_0xeef1b4(0x75)),_0x3d9931=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x32f200=new Date();_0x32f200[_0xeef1b4(0xd7)](0x0,0x0,0x0,0x0);const _0x337036=getLocalDateStr(new Date());for(let _0x56cea7=_0x273a06;_0x56cea7<=_0x16259d;_0x56cea7++){const _0x3c688e=new Date(_0x32f200);_0x3c688e[_0xeef1b4(0x1af)](_0x3c688e[_0xeef1b4(0x186)]()+_0x56cea7);const _0x10ea62=getLocalDateStr(_0x3c688e);let _0x4dc0e3=_0x3c688e['getDay']()-0x1;if(_0x4dc0e3===-0x1)_0x4dc0e3=0x6;const _0x34ced6=_0x10ea62===_0x337036,_0x548dd2=document['createElement']('div');_0x548dd2[_0xeef1b4(0x178)]=_0xeef1b4(0x77)+(_0x34ced6?_0xeef1b4(0x144):''),_0x548dd2['id']=_0xeef1b4(0x10b)+_0x10ea62,_0x548dd2[_0xeef1b4(0x135)](_0xeef1b4(0x9b),_0x10ea62),_0x548dd2[_0xeef1b4(0x168)]=_0xeef1b4(0x1c5)+_0x3d9931[_0x4dc0e3]+_0xeef1b4(0x76)+_0x3c688e[_0xeef1b4(0x186)]()+_0xeef1b4(0x1b1)+_0x10ea62+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x548dd2[_0xeef1b4(0x1e0)]=()=>openDayOptions(_0x10ea62,_0x3d9931[_0x4dc0e3]+'\x20'+_0x3c688e[_0xeef1b4(0x186)]()),_0x1bdc96['appendChild'](_0x548dd2);const _0x1a6dd9=document[_0xeef1b4(0x12d)](_0xeef1b4(0x16b));_0x1a6dd9[_0xeef1b4(0x178)]=_0xeef1b4(0xed)+(_0x34ced6?_0xeef1b4(0x144):''),_0x1a6dd9[_0xeef1b4(0x135)](_0xeef1b4(0x9b),_0x10ea62),_0x1a6dd9[_0xeef1b4(0x135)](_0xeef1b4(0xeb),_0x4dc0e3),renderEventsForColumn(_0x1a6dd9,_0x10ea62,_0x4dc0e3),attachLongPressHandler(_0x1a6dd9,_0x3c688e),_0x150012['appendChild'](_0x1a6dd9),updateDayStats(_0x10ea62);}}function reRenderBlocks(){const _0x3d6a60=a2_0x1f1f85;document[_0x3d6a60(0xf2)](_0x3d6a60(0x1de))[_0x3d6a60(0xa4)](_0x4a4320=>{const _0x283fc7=_0x3d6a60;_0x4a4320[_0x283fc7(0xf2)](_0x283fc7(0x7a))[_0x283fc7(0xa4)](_0x459786=>_0x459786[_0x283fc7(0x19d)]());const _0x46b210=_0x4a4320[_0x283fc7(0x196)](_0x283fc7(0x9b)),_0x277fd6=parseInt(_0x4a4320[_0x283fc7(0x196)](_0x283fc7(0xeb))),_0x1dc57b=Math['round'](_0x4a4320[_0x283fc7(0x169)]);(availabilityPattern[_0x277fd6]||[])['forEach'](_0x24518f=>{const _0x5bae4e=_0x283fc7,_0xef0aa6=document['createElement'](_0x5bae4e(0x16b));_0xef0aa6['className']='blocked-slot\x20stripe-bg';const _0x131da7=_0x24518f*GRID_H;_0xef0aa6[_0x5bae4e(0xda)][_0x5bae4e(0x166)]=_0x131da7+'px',_0xef0aa6[_0x5bae4e(0xda)][_0x5bae4e(0x6b)]='-'+_0x1dc57b+'px\x20-'+_0x131da7+'px',_0x4a4320[_0x5bae4e(0x1a7)](_0xef0aa6);});if(specialRanges&&specialRanges[_0x283fc7(0x115)]>0x0){const _0x547058=new Date(_0x46b210+'T00:00:00')[_0x283fc7(0x17a)](),_0x58ab97=new Date(_0x46b210+'T23:59:59')['getTime']();specialRanges[_0x283fc7(0xa4)](_0x34eb48=>{const _0x1080ed=_0x283fc7,_0x312e55=new Date(_0x34eb48['start'])[_0x1080ed(0x17a)](),_0x366bf8=new Date(_0x34eb48[_0x1080ed(0x9d)])['getTime'](),_0x36f616=Math[_0x1080ed(0x92)](_0x547058,_0x312e55),_0x14c87d=Math[_0x1080ed(0x103)](_0x58ab97,_0x366bf8);if(_0x36f616<_0x14c87d){if(_0x36f616<=_0x547058&&_0x14c87d>=_0x58ab97-0xea60){if(!_0x4a4320[_0x1080ed(0x184)]('.day-off-overlay')){const _0x5379fc=document['createElement'](_0x1080ed(0x16b));_0x5379fc[_0x1080ed(0x178)]=_0x1080ed(0x131),_0x5379fc[_0x1080ed(0xda)][_0x1080ed(0x6b)]='-'+_0x1dc57b+_0x1080ed(0x145),_0x4a4320[_0x1080ed(0x1a7)](_0x5379fc);}}else{const _0x19a1b2=(_0x36f616-_0x547058)/0x36ee80*GRID_H,_0x221857=(_0x14c87d-_0x36f616)/0x36ee80*GRID_H,_0x3b8624=document[_0x1080ed(0x12d)]('div');_0x3b8624[_0x1080ed(0x178)]=_0x1080ed(0x11c),_0x3b8624[_0x1080ed(0xda)]['top']=_0x19a1b2+'px',_0x3b8624[_0x1080ed(0xda)][_0x1080ed(0xc5)]=_0x221857+'px',_0x3b8624[_0x1080ed(0xda)][_0x1080ed(0x6b)]='-'+_0x1dc57b+_0x1080ed(0xf9)+_0x19a1b2+'px',_0x4a4320['appendChild'](_0x3b8624);}}});}if(dateExceptions[_0x46b210]===_0x283fc7(0x1e9)){if(!_0x4a4320[_0x283fc7(0x184)]('.day-off-overlay')){const _0x55d861=document['createElement'](_0x283fc7(0x16b));_0x55d861[_0x283fc7(0x178)]=_0x283fc7(0x131),_0x55d861[_0x283fc7(0xda)]['backgroundPosition']='-'+_0x1dc57b+'px\x200px',_0x4a4320[_0x283fc7(0x1a7)](_0x55d861);}}renderEventsForColumn(_0x4a4320,_0x46b210,_0x277fd6),updateDayStats(_0x46b210);});}function updateAllDayStats(){const _0x3e0200=a2_0x1f1f85;document[_0x3e0200(0xf2)](_0x3e0200(0x180))[_0x3e0200(0xa4)](_0xdf32f2=>{const _0x1b7964=_0x3e0200;updateDayStats(_0xdf32f2[_0x1b7964(0x196)](_0x1b7964(0x9b)));});}function updateDayStats(_0x202879){const _0x7acfcc=a2_0x1f1f85,_0x49bd43=document[_0x7acfcc(0xe5)](_0x7acfcc(0xf4)+_0x202879);if(!_0x49bd43)return;const _0x26f513=new Date(_0x202879);let _0x324f68=_0x26f513[_0x7acfcc(0x1df)]()-0x1;if(_0x324f68===-0x1)_0x324f68=0x6;if(dateExceptions[_0x202879]===_0x7acfcc(0x1e9)){_0x49bd43[_0x7acfcc(0xda)][_0x7acfcc(0x88)]=_0x7acfcc(0x15d);return;}const _0x25b81c=availabilityPattern[_0x324f68]||[],_0x160e3a=0x18-_0x25b81c[_0x7acfcc(0x115)],_0x848b9a=_0x160e3a*0x3c,_0x136ae9=sessions['filter'](_0x14aaae=>_0x14aaae[_0x7acfcc(0x138)]===_0x202879&&_0x14aaae[_0x7acfcc(0x1b0)]!==_0x7acfcc(0x170));if(_0x136ae9[_0x7acfcc(0x115)]===0x0){_0x49bd43[_0x7acfcc(0xda)]['display']=_0x7acfcc(0x15d);return;}let _0x1085a3=_0x136ae9[_0x7acfcc(0x8c)](_0x2e5ebf=>{const _0x23c215=_0x7acfcc,[_0x94cd4b,_0x25110a]=_0x2e5ebf[_0x23c215(0x86)]['split'](':')[_0x23c215(0x8c)](Number),[_0x3e880e,_0x330848]=_0x2e5ebf[_0x23c215(0x9d)][_0x23c215(0x176)](':')[_0x23c215(0x8c)](Number);return[_0x94cd4b*0x3c+_0x25110a,_0x3e880e*0x3c+_0x330848];});_0x1085a3[_0x7acfcc(0x1aa)]((_0x47d10e,_0x181671)=>_0x47d10e[0x0]-_0x181671[0x0]);let _0x162c9d=[];if(_0x1085a3[_0x7acfcc(0x115)]>0x0){let _0x5482c9=_0x1085a3[0x0];for(let _0x3dedcb=0x1;_0x3dedcb<_0x1085a3[_0x7acfcc(0x115)];_0x3dedcb++){_0x1085a3[_0x3dedcb][0x0]<_0x5482c9[0x1]?_0x5482c9[0x1]=Math[_0x7acfcc(0x92)](_0x5482c9[0x1],_0x1085a3[_0x3dedcb][0x1]):(_0x162c9d[_0x7acfcc(0xe6)](_0x5482c9),_0x5482c9=_0x1085a3[_0x3dedcb]);}_0x162c9d[_0x7acfcc(0xe6)](_0x5482c9);}let _0x2a5fa5=0x0;_0x162c9d[_0x7acfcc(0xa4)](_0x543c04=>_0x2a5fa5+=_0x543c04[0x1]-_0x543c04[0x0]),_0x49bd43[_0x7acfcc(0xda)][_0x7acfcc(0x88)]=_0x7acfcc(0xb8);const _0x3a41ed=_0x49bd43['querySelector'](_0x7acfcc(0x1bf));if(_0x848b9a===0x0){_0x3a41ed['style'][_0x7acfcc(0x1d0)]=_0x7acfcc(0x83),_0x3a41ed['style'][_0x7acfcc(0x126)]='var(--acc-red)';return;}const _0xd80775=_0x2a5fa5/_0x848b9a*0x64;console[_0x7acfcc(0x15f)]('['+_0x202879+']\x20Доступно:\x20'+_0x160e3a+_0x7acfcc(0x197)+_0x2a5fa5+_0x7acfcc(0x11f)+_0xd80775[_0x7acfcc(0x185)](0x1)+'%'),_0xd80775>0x64?(_0x3a41ed[_0x7acfcc(0xda)][_0x7acfcc(0x1d0)]='100%',_0x3a41ed[_0x7acfcc(0xda)][_0x7acfcc(0x126)]='var(--acc-red)'):(_0x3a41ed[_0x7acfcc(0xda)][_0x7acfcc(0x1d0)]=_0xd80775+'%',_0x3a41ed['style'][_0x7acfcc(0x126)]=_0x7acfcc(0x12a));}function renderEventsForColumn(_0x26a68f,_0x583683,_0x32b991){const _0x15c507=a2_0x1f1f85,_0x50cf7=sessions[_0x15c507(0x136)](_0x2245c4=>_0x2245c4['dateStr']===_0x583683),_0x47cf00=_0x50cf7[_0x15c507(0x8c)](_0x252ce4=>{const _0x2b331a=_0x15c507,[_0x55b1c0,_0x23c789]=_0x252ce4[_0x2b331a(0x86)][_0x2b331a(0x176)](':')['map'](Number),[_0x5b9e4c,_0x3f05e9]=_0x252ce4[_0x2b331a(0x9d)][_0x2b331a(0x176)](':')[_0x2b331a(0x8c)](Number);return{'data':_0x252ce4,'start':_0x55b1c0*0x3c+_0x23c789,'end':_0x5b9e4c*0x3c+_0x3f05e9,'colIndex':0x0};});_0x47cf00[_0x15c507(0x1aa)]((_0xe9c65f,_0x4c4eaf)=>{const _0x4dd6be=_0x15c507;if(_0xe9c65f[_0x4dd6be(0x86)]!==_0x4c4eaf['start'])return _0xe9c65f[_0x4dd6be(0x86)]-_0x4c4eaf[_0x4dd6be(0x86)];return _0x4c4eaf['end']-_0x4c4eaf[_0x4dd6be(0x86)]-(_0xe9c65f[_0x4dd6be(0x9d)]-_0xe9c65f[_0x4dd6be(0x86)]);});const _0x3318f4=[];_0x47cf00[_0x15c507(0xa4)](_0x3babb4=>{const _0x373acc=_0x15c507;let _0x1734f5=![];for(let _0x185749=0x0;_0x185749<_0x3318f4[_0x373acc(0x115)];_0x185749++){const _0x248ab6=_0x3318f4[_0x185749],_0x1add2b=_0x248ab6[_0x248ab6[_0x373acc(0x115)]-0x1];if(_0x3babb4[_0x373acc(0x86)]>=_0x1add2b[_0x373acc(0x9d)]){_0x248ab6[_0x373acc(0xe6)](_0x3babb4),_0x3babb4[_0x373acc(0x1b4)]=_0x185749,_0x1734f5=!![];break;}}!_0x1734f5&&(_0x3318f4[_0x373acc(0xe6)]([_0x3babb4]),_0x3babb4[_0x373acc(0x1b4)]=_0x3318f4[_0x373acc(0x115)]-0x1);}),_0x47cf00['forEach'](_0x276f53=>{const _0x13f18c=_0x15c507;let _0x2fb8de=0x0;_0x47cf00['forEach'](_0x5cdd01=>{const _0x3a1fdb=a2_0xaa02;if(Math[_0x3a1fdb(0x92)](_0x276f53[_0x3a1fdb(0x86)],_0x5cdd01[_0x3a1fdb(0x86)])<Math['min'](_0x276f53[_0x3a1fdb(0x9d)],_0x5cdd01[_0x3a1fdb(0x9d)])){if(_0x5cdd01[_0x3a1fdb(0x1b4)]>_0x2fb8de)_0x2fb8de=_0x5cdd01[_0x3a1fdb(0x1b4)];}});const _0x120dc6=_0x2fb8de+0x1,_0x481702=0x64/_0x120dc6,_0x336ac4=_0x276f53[_0x13f18c(0x1b4)]*_0x481702,_0x233cab=createEventEl(_0x276f53['data']);_0x233cab[_0x13f18c(0xda)][_0x13f18c(0x1d0)]=_0x13f18c(0x17c)+_0x481702+'%\x20-\x204px)',_0x233cab[_0x13f18c(0xda)][_0x13f18c(0x1ae)]=_0x13f18c(0x17c)+_0x336ac4+_0x13f18c(0x91),_0x233cab[_0x13f18c(0xda)][_0x13f18c(0xb0)]=0xa+_0x276f53[_0x13f18c(0x1b4)],_0x481702<0x55&&_0x233cab[_0x13f18c(0x158)]['add']('mini'),_0x26a68f['appendChild'](_0x233cab);});}function createEventEl(_0x2f6aba){const _0x309822=a2_0x1f1f85,[_0xeb1ffc,_0x26f84c]=_0x2f6aba[_0x309822(0x86)]['split'](':')[_0x309822(0x8c)](Number),[_0x81ead3,_0x315100]=_0x2f6aba['end'][_0x309822(0x176)](':')['map'](Number),_0x1b125a=(_0xeb1ffc*0x3c+_0x26f84c)/0x3c*GRID_H,_0x3229ca=(_0x81ead3*0x3c+_0x315100-(_0xeb1ffc*0x3c+_0x26f84c))/0x3c*GRID_H,_0xabf337=document[_0x309822(0x12d)](_0x309822(0x16b)),_0x207cb5=_0x2f6aba['status']===_0x309822(0xdf)?_0x309822(0x9f):'';_0xabf337['className']=_0x309822(0x165)+_0x207cb5,_0xabf337[_0x309822(0xda)][_0x309822(0x166)]=_0x1b125a+'px',_0xabf337[_0x309822(0xda)][_0x309822(0xc5)]=Math[_0x309822(0x92)](_0x3229ca,0x14)+'px';const _0x54b519=clients[_0x309822(0xb9)](_0x28fdcb=>_0x2f6aba[_0x309822(0x1ad)]&&String(_0x28fdcb['id'])===String(_0x2f6aba[_0x309822(0x1ad)])||_0x28fdcb[_0x309822(0x192)]===_0x2f6aba[_0x309822(0x19c)]),_0x11261e=_0x54b519?_0x54b519[_0x309822(0x147)]:'#0a84ff';_0xabf337[_0x309822(0xda)][_0x309822(0x17e)]=_0x11261e,_0xabf337[_0x309822(0xda)][_0x309822(0x1a8)]=hexToRgba(_0x11261e,0.85);let _0x36ff63=_0x309822(0x17b)+_0x2f6aba['client']+_0x309822(0x8b)+_0x2f6aba['start']+_0x309822(0xcf)+_0x2f6aba[_0x309822(0x9d)]+'</div>';return _0x2f6aba[_0x309822(0x139)]&&(_0x36ff63+=_0x309822(0xd9)),_0x2f6aba[_0x309822(0x1b0)]===_0x309822(0xdf)&&(_0x36ff63+=_0x309822(0x163)),_0xabf337['innerHTML']=_0x36ff63,_0xabf337['onclick']=_0x5bed4c=>{const _0x819c01=_0x309822;_0x5bed4c[_0x819c01(0xea)](),openEdit(_0x2f6aba);},_0xabf337;}function attachLongPressHandler(_0x51d1ac,_0x44a9a6){const _0x11f333=a2_0x1f1f85;let _0x4c5364=0x0,_0x5d275c=null;const _0x643e55=_0x270e40=>{const _0x28e74f=a2_0xaa02;if(_0x270e40[_0x28e74f(0x19b)][_0x28e74f(0x1e3)](_0x28e74f(0x8d)))return;isScrolling=![],_0x4c5364=_0x270e40['touches']?_0x270e40['touches'][0x0][_0x28e74f(0x7d)]:_0x270e40[_0x28e74f(0x7d)],_0x5d275c=setTimeout(()=>{const _0x5472ce=_0x28e74f;if(!isScrolling){navigator[_0x5472ce(0x1e7)]?.(0x32);const _0x5efb9a=_0x51d1ac['getBoundingClientRect'](),_0x620466=Math['floor']((_0x4c5364-_0x5efb9a['top'])/GRID_H);_0x44a9a6[_0x5472ce(0xd7)](_0x620466,0x0),openAddSession(_0x44a9a6);}},0x1f4);},_0x38bfc3=()=>{isScrolling=!![],clearTimeout(_0x5d275c);},_0x497536=()=>{clearTimeout(_0x5d275c);};_0x51d1ac[_0x11f333(0x19f)]('touchstart',_0x643e55,{'passive':!![]}),_0x51d1ac['addEventListener'](_0x11f333(0x106),_0x38bfc3,{'passive':!![]}),_0x51d1ac[_0x11f333(0x19f)](_0x11f333(0x15c),_0x497536),_0x51d1ac[_0x11f333(0x19f)](_0x11f333(0xb7),_0x643e55),_0x51d1ac[_0x11f333(0x19f)]('mousemove',_0x38bfc3),_0x51d1ac[_0x11f333(0x19f)](_0x11f333(0x160),_0x497536);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x28146c=a2_0x1f1f85,_0x45513e=document['getElementById']('matrixViewport'),_0x4e9000=_0x45513e['scrollLeft'],_0x2ad032=_0x45513e[_0x28146c(0x1d6)],_0x4c1ad7=_0x45513e[_0x28146c(0x71)];if(_0x2ad032-(_0x4e9000+_0x4c1ad7)<0x12c){const _0x28436f=endOffset;endOffset+=0xe,renderDayRange(_0x28436f+0x1,endOffset),reRenderBlocks();}if(_0x4e9000<0x12c){const _0x47ed2c=startOffset;startOffset-=0xe,prependDays(startOffset,_0x47ed2c-0x1),_0x45513e[_0x28146c(0x13f)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x14fc7c,_0x5845df){const _0xfb476=a2_0x1f1f85,_0x13f2e5=document[_0xfb476(0xe5)](_0xfb476(0x14c)),_0x504b3c=document[_0xfb476(0xe5)](_0xfb476(0x75)),_0x4562a1=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x4a34e1=new Date();_0x4a34e1[_0xfb476(0xd7)](0x0,0x0,0x0,0x0);const _0x4e48bc=getLocalDateStr(new Date()),_0x5f4383=document[_0xfb476(0xff)](),_0xe57373=document[_0xfb476(0xff)]();for(let _0x20429f=_0x14fc7c;_0x20429f<=_0x5845df;_0x20429f++){const _0x5b4d55=new Date(_0x4a34e1);_0x5b4d55['setDate'](_0x5b4d55['getDate']()+_0x20429f);const _0x104874=getLocalDateStr(_0x5b4d55);let _0x2996c2=_0x5b4d55[_0xfb476(0x1df)]()-0x1;if(_0x2996c2===-0x1)_0x2996c2=0x6;const _0x308c89=_0x104874===_0x4e48bc,_0x1adc83=document[_0xfb476(0x12d)](_0xfb476(0x16b));_0x1adc83[_0xfb476(0x178)]='day-col-header\x20'+(_0x308c89?_0xfb476(0x144):''),_0x1adc83['id']=_0xfb476(0x10b)+_0x104874,_0x1adc83[_0xfb476(0x135)](_0xfb476(0x9b),_0x104874),_0x1adc83[_0xfb476(0x168)]=_0xfb476(0x1c5)+_0x4562a1[_0x2996c2]+_0xfb476(0x76)+_0x5b4d55['getDate']()+_0xfb476(0x1b1)+_0x104874+_0xfb476(0xc0),_0x1adc83[_0xfb476(0x1e0)]=()=>openDayOptions(_0x104874,_0x4562a1[_0x2996c2]+'\x20'+_0x5b4d55['getDate']()),_0x5f4383[_0xfb476(0x1a7)](_0x1adc83);const _0x2bd72a=document[_0xfb476(0x12d)](_0xfb476(0x16b));_0x2bd72a[_0xfb476(0x178)]='day-column\x20'+(_0x308c89?_0xfb476(0x144):''),_0x2bd72a[_0xfb476(0x135)](_0xfb476(0x9b),_0x104874),_0x2bd72a[_0xfb476(0x135)]('data-day-idx',_0x2996c2),renderEventsForColumn(_0x2bd72a,_0x104874,_0x2996c2),attachLongPressHandler(_0x2bd72a,_0x5b4d55),_0xe57373['appendChild'](_0x2bd72a),updateDayStats(_0x104874);}_0x13f2e5['insertBefore'](_0x5f4383,_0x13f2e5['firstChild']),_0x504b3c[_0xfb476(0x1ef)](_0xe57373,_0x504b3c[_0xfb476(0x184)]('.day-column'));}function validateAppointment(_0x5a502a,_0x590fcb,_0x582c1e,_0x4f1b85,_0x27989d){const _0x12fd67=a2_0x1f1f85,[_0x48ce96,_0x58b992]=_0x590fcb['split'](':')[_0x12fd67(0x8c)](Number),[_0x1d6e08,_0x5cd53c]=_0x582c1e[_0x12fd67(0x176)](':')[_0x12fd67(0x8c)](Number),_0x55ffea=_0x48ce96*0x3c+_0x58b992,_0xc58d28=_0x1d6e08*0x3c+_0x5cd53c,_0x5c9165=String(_0x27989d);let _0x50e7be=![],_0x28abed='';for(let _0x42763c of sessions){if(_0x42763c[_0x12fd67(0x138)]!==_0x5a502a)continue;if(_0x42763c[_0x12fd67(0x1b0)]===_0x12fd67(0x170))continue;if(_0x4f1b85&&String(_0x42763c['id'])===String(_0x4f1b85))continue;const [_0x4f2aef,_0x4018b1]=_0x42763c[_0x12fd67(0x86)][_0x12fd67(0x176)](':')[_0x12fd67(0x8c)](Number),[_0x2e6a8c,_0x1ca2c7]=_0x42763c[_0x12fd67(0x9d)][_0x12fd67(0x176)](':')[_0x12fd67(0x8c)](Number),_0x35decc=_0x4f2aef*0x3c+_0x4018b1,_0x87ae80=_0x2e6a8c*0x3c+_0x1ca2c7;if(Math['max'](_0x55ffea,_0x35decc)<Math[_0x12fd67(0x103)](_0xc58d28,_0x87ae80)){if(_0x42763c[_0x12fd67(0x1ad)]&&String(_0x42763c[_0x12fd67(0x1ad)])===_0x5c9165)return{'valid':![],'msg':_0x12fd67(0xef)+_0x42763c['client']+_0x12fd67(0x10e)};_0x50e7be=!![],_0x28abed=_0x42763c[_0x12fd67(0x19c)];}}if(_0x50e7be)return{'valid':!![],'warning':_0x12fd67(0x102)+_0x28abed};return{'valid':!![]};}function updateDateDisplay(){const _0x15afe8=a2_0x1f1f85,_0x66d5e8=document[_0x15afe8(0xe5)](_0x15afe8(0x1c9))[_0x15afe8(0xdd)],_0x420841=document[_0x15afe8(0xe5)](_0x15afe8(0x7f));if(!_0x66d5e8){_0x420841[_0x15afe8(0xbd)]='';return;}const [_0x34f27b,_0x1726d6,_0x58cdda]=_0x66d5e8[_0x15afe8(0x176)]('-')[_0x15afe8(0x8c)](Number),_0x6f282=new Date(_0x34f27b,_0x1726d6-0x1,_0x58cdda),_0x8eca09={'weekday':_0x15afe8(0xdb),'day':'numeric','month':_0x15afe8(0xdb),'year':'numeric'};let _0x4fb70e=_0x6f282['toLocaleDateString'](_0x15afe8(0x175),_0x8eca09);_0x4fb70e=_0x4fb70e[_0x15afe8(0xcb)](0x0)[_0x15afe8(0xc1)]()+_0x4fb70e[_0x15afe8(0x153)](0x1),_0x420841[_0x15afe8(0xbd)]=_0x4fb70e;}function autoSetEndTime(){const _0x1d972a=a2_0x1f1f85,_0x3aeb4c=document['getElementById'](_0x1d972a(0x1a0))['value'];if(!_0x3aeb4c)return;const [_0x411a9e,_0x2568dd]=_0x3aeb4c[_0x1d972a(0x176)](':')[_0x1d972a(0x8c)](Number);let _0x4e6542=_0x411a9e+0x1;if(_0x4e6542>0x17)_0x4e6542=0x0;const _0x3e22dd=String(_0x4e6542)['padStart'](0x2,'0')+':'+String(_0x2568dd)[_0x1d972a(0x1b5)](0x2,'0');document[_0x1d972a(0xe5)](_0x1d972a(0x1e8))[_0x1d972a(0xdd)]=_0x3e22dd;}function populateClientSelect(){const _0x520477=a2_0x1f1f85,_0x4f4494=document[_0x520477(0xe5)](_0x520477(0x18e));_0x4f4494[_0x520477(0x168)]='';if(clients[_0x520477(0x115)]===0x0){const _0x33b9bb=document[_0x520477(0x12d)]('option');_0x33b9bb['text']=_0x520477(0x1d8),_0x4f4494[_0x520477(0x1a7)](_0x33b9bb);return;}clients[_0x520477(0xa4)](_0x2f711e=>{const _0x3e2130=_0x520477,_0x3ca07b=document[_0x3e2130(0x12d)](_0x3e2130(0x81));_0x3ca07b['value']=_0x2f711e[_0x3e2130(0x192)],_0x3ca07b[_0x3e2130(0xbd)]=_0x2f711e[_0x3e2130(0x192)],_0x4f4494[_0x3e2130(0x1a7)](_0x3ca07b);});}function openActionSheet(_0x2c2572){const _0x422799=a2_0x1f1f85,_0x32e43a=document[_0x422799(0xe5)](_0x422799(0xa5)),_0x4c3cc3=document['getElementById']('actionSheetOverlay'),_0x2eb135=document[_0x422799(0xe5)]('asTitle'),_0x531025=document[_0x422799(0xe5)](_0x422799(0x8e)),_0x572b25=document[_0x422799(0xe5)]('asBtnSeries');_0x4c3cc3[_0x422799(0x158)][_0x422799(0x1c0)](_0x422799(0x13d)),_0x32e43a['classList'][_0x422799(0x1c0)](_0x422799(0x16e));if(_0x2c2572===_0x422799(0xad))_0x2eb135[_0x422799(0xbd)]='Изменение\x20серии',_0x531025['textContent']=_0x422799(0x117),_0x531025[_0x422799(0x1e0)]=()=>{closeActionSheet(),updateSeriesBatch('single',tempSessionData);},_0x572b25[_0x422799(0xbd)]='Эту\x20и\x20будущие',_0x572b25[_0x422799(0x1e0)]=()=>{const _0x5c2ade=_0x422799;closeActionSheet(),updateSeriesBatch(_0x5c2ade(0x90),tempSessionData);};else _0x2c2572===_0x422799(0x1a3)&&(_0x2eb135[_0x422799(0xbd)]=_0x422799(0x1a5),_0x531025['textContent']='Только\x20эту',_0x531025[_0x422799(0x178)]=_0x422799(0xf1),_0x531025[_0x422799(0x1e0)]=()=>{const _0x10b51c=_0x422799;closeActionSheet(),commitDelete('single',sessions[_0x10b51c(0xb9)](_0x24843c=>_0x24843c['id']===editingId));},_0x572b25[_0x422799(0xbd)]=_0x422799(0x179),_0x572b25['className']=_0x422799(0xbb),_0x572b25['onclick']=()=>{const _0x19b57f=_0x422799;closeActionSheet(),commitDelete(_0x19b57f(0x90),sessions[_0x19b57f(0xb9)](_0x38a20f=>_0x38a20f['id']===editingId));});}function closeActionSheet(){const _0x272998=a2_0x1f1f85;document[_0x272998(0xe5)](_0x272998(0xa5))[_0x272998(0x158)]['remove'](_0x272998(0x16e)),document[_0x272998(0xe5)](_0x272998(0x1ec))[_0x272998(0x158)][_0x272998(0x19d)](_0x272998(0x13d));}function openSettings(){const _0x57cc37=a2_0x1f1f85;openSheet(_0x57cc37(0x1e4));}function saveCoachSettings(){const _0x3408f7=a2_0x1f1f85,_0x33c623=document[_0x3408f7(0xe5)](_0x3408f7(0x1ed))[_0x3408f7(0xdd)];localStorage[_0x3408f7(0x121)](_0x3408f7(0x1da),_0x33c623),console[_0x3408f7(0x15f)](_0x3408f7(0x1f0),_0x33c623),DataManager[_0x3408f7(0x141)]('save_settings',{'settings':{'cancel_window':_0x33c623}})[_0x3408f7(0x162)](_0x359399=>{const _0x2dda9d=_0x3408f7;console[_0x2dda9d(0x1a1)](_0x2dda9d(0xf6),_0x359399),showToast(_0x2dda9d(0x1b2),![]);});}function loadCoachSettings(){const _0x37f556=a2_0x1f1f85,_0xc845ea=localStorage['getItem'](_0x37f556(0x1da));_0xc845ea&&(document[_0x37f556(0xe5)](_0x37f556(0x1ed))[_0x37f556(0xdd)]=_0xc845ea);}function openRangesSheet(){const _0x4bf6ce=a2_0x1f1f85;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x4bf6ce(0xdc));}function addRange(){const _0x56c507=a2_0x1f1f85,_0x15fe96=document[_0x56c507(0xe5)](_0x56c507(0x137))[_0x56c507(0xdd)],_0x3f85ac=document[_0x56c507(0xe5)](_0x56c507(0x134))['value'],_0x18f87f=document['getElementById'](_0x56c507(0x12e))[_0x56c507(0xdd)],_0x28474d=document[_0x56c507(0xe5)]('rangeEndTime')['value'];if(!_0x15fe96||!_0x3f85ac||!_0x18f87f||!_0x28474d)return alert(_0x56c507(0x1c1));const _0x52d4a2=_0x15fe96+'T'+_0x3f85ac,_0x32804c=_0x18f87f+'T'+_0x28474d;if(_0x52d4a2>=_0x32804c)return alert('Ошибка\x20дат');specialRanges['push']({'start':_0x52d4a2,'end':_0x32804c}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x56c507(0x89)](),DataManager['fetchFromServer'](_0x56c507(0xa3),{'settings':{'ranges':specialRanges}});}function deleteRange(_0x4ac354){const _0x4cad1b=a2_0x1f1f85;specialRanges[_0x4cad1b(0x122)](_0x4ac354,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x4cad1b(0x89)](),DataManager[_0x4cad1b(0x141)](_0x4cad1b(0xa3),{'settings':{'ranges':specialRanges}});}function a2_0xaa02(_0x21f470,_0x28fdb3){_0x21f470=_0x21f470-0x69;const _0x36da36=a2_0x342e();let _0x453456=_0x36da36[_0x21f470];return _0x453456;}function resetRangeForm(){const _0xc28355=a2_0x1f1f85;document[_0xc28355(0xe5)](_0xc28355(0x137))[_0xc28355(0xdd)]='',document[_0xc28355(0xe5)](_0xc28355(0x134))[_0xc28355(0xdd)]=_0xc28355(0x1ca),document[_0xc28355(0xe5)]('rangeEndDate')[_0xc28355(0xdd)]='',document[_0xc28355(0xe5)](_0xc28355(0xf0))[_0xc28355(0xdd)]=_0xc28355(0x199);}function renderRangesList(){const _0x2cb740=a2_0x1f1f85,_0x2346aa=document[_0x2cb740(0xe5)](_0x2cb740(0x12b));_0x2346aa[_0x2cb740(0x168)]='';if(!specialRanges[_0x2cb740(0x115)]){_0x2346aa['innerHTML']=_0x2cb740(0x105);return;}specialRanges[_0x2cb740(0xa4)]((_0x4363f5,_0x49ca7d)=>{const _0x4ee7c1=_0x2cb740,_0x4a1918=document[_0x4ee7c1(0x12d)](_0x4ee7c1(0x16b));_0x4a1918[_0x4ee7c1(0x178)]=_0x4ee7c1(0x12f);const _0x5e3e6a=_0x33eceb=>{const _0x179ef4=_0x4ee7c1,_0x5822aa=new Date(_0x33eceb);return _0x5822aa[_0x179ef4(0x186)]()+'.'+String(_0x5822aa[_0x179ef4(0x1d4)]()+0x1)[_0x179ef4(0x1b5)](0x2,'0')+'\x20'+String(_0x5822aa[_0x179ef4(0xc9)]())[_0x179ef4(0x1b5)](0x2,'0')+':'+String(_0x5822aa[_0x179ef4(0x173)]())[_0x179ef4(0x1b5)](0x2,'0');};_0x4a1918['innerHTML']=_0x4ee7c1(0xae)+_0x5e3e6a(_0x4363f5['start'])+_0x4ee7c1(0xd6)+_0x5e3e6a(_0x4363f5[_0x4ee7c1(0x9d)])+'</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange('+_0x49ca7d+_0x4ee7c1(0x85),_0x2346aa['appendChild'](_0x4a1918);});}function scrollToToday(){const _0x1c1926=a2_0x1f1f85,_0x2a39e3=getLocalDateStr(new Date()),_0x28e9af=document[_0x1c1926(0xe5)](_0x1c1926(0x10b)+_0x2a39e3),_0x517ff6=document[_0x1c1926(0xe5)](_0x1c1926(0x108));if(_0x28e9af&&_0x517ff6){const _0x28c6fe=_0x517ff6['clientWidth'],_0x3949d6=_0x28e9af[_0x1c1926(0x169)],_0x1b6b46=_0x28e9af[_0x1c1926(0x10f)];_0x517ff6[_0x1c1926(0x13f)]=_0x3949d6-_0x28c6fe/0x2+_0x1b6b46/0x2,_0x517ff6['scrollTop']=0x9*GRID_H;}}function onScroll(){const _0x84394=a2_0x1f1f85,_0x2baa74=document[_0x84394(0xe5)]('matrixViewport'),_0x5c7fac=document[_0x84394(0xf2)](_0x84394(0x180));for(let _0x38973b of _0x5c7fac)if(_0x38973b[_0x84394(0x169)]>=_0x2baa74['scrollLeft']){const _0x1e1ff3=new Date(_0x38973b['getAttribute'](_0x84394(0x9b)));document[_0x84394(0xe5)](_0x84394(0x10c))[_0x84394(0xbd)]=_0x1e1ff3['toLocaleString']('ru',{'month':'long'})[_0x84394(0xc1)]()+'\x20'+_0x1e1ff3[_0x84394(0xf8)]();break;}}function showToast(_0x2bfbee,_0xba5377=![]){const _0x2c362b=a2_0x1f1f85,_0x106498=document[_0x2c362b(0xe5)](_0x2c362b(0x1dd));_0x106498['className']='toast-notification\x20'+(_0xba5377?_0x2c362b(0xd5):''),document[_0x2c362b(0xe5)](_0x2c362b(0x189))[_0x2c362b(0xbd)]=_0xba5377?'Успешно':_0x2c362b(0x154),document[_0x2c362b(0xe5)](_0x2c362b(0x182))['textContent']=_0x2bfbee,_0x106498[_0x2c362b(0x158)]['add'](_0x2c362b(0x1a9)),setTimeout(()=>{const _0x1f28cc=_0x2c362b;_0x106498[_0x1f28cc(0x158)][_0x1f28cc(0x19d)](_0x1f28cc(0x1a9));},0xbb8);}function openDayOptions(_0x17c42b,_0x5b68c0){const _0x568322=a2_0x1f1f85;selectedDayForOptions=_0x17c42b,document['getElementById']('dayOptionsTitle')[_0x568322(0xbd)]=_0x5b68c0,openSheet(_0x568322(0x190));}function toggleDayOff(){const _0x1481f0=a2_0x1f1f85;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x1481f0(0x1e9),reRenderBlocks(),closeAllSheets(),DataManager[_0x1481f0(0x89)](),DataManager['fetchFromServer'](_0x1481f0(0xa3),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x5904cf=a2_0x1f1f85;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x5904cf(0x89)](),DataManager[_0x5904cf(0x141)](_0x5904cf(0xa3),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x351175){const _0xb42dfb=a2_0x1f1f85;document[_0xb42dfb(0xe5)](_0xb42dfb(0x111))[_0xb42dfb(0x158)][_0xb42dfb(0x1c0)](_0xb42dfb(0x13d)),document[_0xb42dfb(0xe5)](_0x351175)[_0xb42dfb(0x158)][_0xb42dfb(0x1c0)]('open');}function closeAllSheets(){const _0x328d2d=a2_0x1f1f85;document[_0x328d2d(0xe5)]('overlay')[_0x328d2d(0x158)][_0x328d2d(0x19d)](_0x328d2d(0x13d)),document[_0x328d2d(0xf2)](_0x328d2d(0x99))[_0x328d2d(0xa4)](_0x704f3e=>_0x704f3e['classList'][_0x328d2d(0x19d)](_0x328d2d(0x16e)));}function openPatternEditor(){const _0x2256d8=a2_0x1f1f85;closeAllSheets(),document[_0x2256d8(0xe5)](_0x2256d8(0x1c6))[_0x2256d8(0x158)]['add'](_0x2256d8(0x16e)),renderPatternEditor();}function closePatternEditor(){const _0x514738=a2_0x1f1f85;document['getElementById'](_0x514738(0x1c6))[_0x514738(0x158)][_0x514738(0x19d)](_0x514738(0x16e));}function savePattern(){const _0x49a2ab=a2_0x1f1f85;document['getElementById'](_0x49a2ab(0x1c6))[_0x49a2ab(0x158)]['remove']('open'),reRenderBlocks(),DataManager[_0x49a2ab(0x89)](),DataManager[_0x49a2ab(0x141)](_0x49a2ab(0xa3),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x30e70b=a2_0x1f1f85,_0x49451c=document['getElementById'](_0x30e70b(0x1a2));_0x49451c[_0x30e70b(0x168)]='';const _0x4217d3=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x53e671=document[_0x30e70b(0x12d)](_0x30e70b(0x16b));_0x53e671[_0x30e70b(0x178)]=_0x30e70b(0x70),_0x49451c[_0x30e70b(0x1a7)](_0x53e671),_0x4217d3[_0x30e70b(0xa4)]((_0x1938c6,_0x3446e3)=>{const _0x31b7c3=_0x30e70b,_0x40524d=document['createElement'](_0x31b7c3(0x16b));_0x40524d[_0x31b7c3(0x178)]=_0x31b7c3(0x16a),_0x40524d[_0x31b7c3(0x168)]=_0x1938c6+'\x20<span\x20class=\x22arrow\x22>↓</span>',_0x40524d[_0x31b7c3(0x1e0)]=()=>toggleColPattern(_0x3446e3),_0x49451c[_0x31b7c3(0x1a7)](_0x40524d);});for(let _0x5e2b01=0x0;_0x5e2b01<0x18;_0x5e2b01++){const _0x467bd7=document[_0x30e70b(0x12d)](_0x30e70b(0x16b));_0x467bd7[_0x30e70b(0x178)]=_0x30e70b(0x167),_0x467bd7['innerHTML']=_0x30e70b(0x164)+String(_0x5e2b01)[_0x30e70b(0x1b5)](0x2,'0')+':00',_0x467bd7[_0x30e70b(0x1e0)]=()=>toggleRowPattern(_0x5e2b01),_0x49451c[_0x30e70b(0x1a7)](_0x467bd7);for(let _0x15cca7=0x0;_0x15cca7<0x7;_0x15cca7++){const _0x5a7667=document[_0x30e70b(0x12d)](_0x30e70b(0x16b)),_0x19cf4d=(availabilityPattern[_0x15cca7]||[])[_0x30e70b(0x11e)](_0x5e2b01),_0x2f6729=!_0x19cf4d;_0x5a7667[_0x30e70b(0x178)]=_0x30e70b(0x79)+(_0x2f6729?_0x30e70b(0x13d):''),_0x5a7667[_0x30e70b(0x1e0)]=()=>toggleSinglePattern(_0x15cca7,_0x5e2b01),_0x49451c[_0x30e70b(0x1a7)](_0x5a7667);}}}function toggleSinglePattern(_0x27d1bc,_0x18ed7f){const _0x3288e5=a2_0x1f1f85;if(!availabilityPattern[_0x27d1bc])availabilityPattern[_0x27d1bc]=[];const _0x2dc869=availabilityPattern[_0x27d1bc],_0x466446=_0x2dc869[_0x3288e5(0x6c)](_0x18ed7f);_0x466446===-0x1?_0x2dc869[_0x3288e5(0xe6)](_0x18ed7f):_0x2dc869[_0x3288e5(0x122)](_0x466446,0x1),renderPatternEditor();}function toggleColPattern(_0x5d4564){const _0x4fe57a=a2_0x1f1f85;if(!availabilityPattern[_0x5d4564])availabilityPattern[_0x5d4564]=[];const _0xb3d970=availabilityPattern[_0x5d4564];_0xb3d970[_0x4fe57a(0x115)]===0x0?availabilityPattern[_0x5d4564]=Array[_0x4fe57a(0x1c4)]({'length':0x18},(_0x4f03c5,_0x22ca7c)=>_0x22ca7c):availabilityPattern[_0x5d4564]=[],renderPatternEditor();}function toggleRowPattern(_0x394ab1){const _0x408228=a2_0x1f1f85;let _0x1a8561=!![];for(let _0x252a24=0x0;_0x252a24<0x7;_0x252a24++){if((availabilityPattern[_0x252a24]||[])[_0x408228(0x11e)](_0x394ab1)){_0x1a8561=![];break;}}for(let _0x43c2e9=0x0;_0x43c2e9<0x7;_0x43c2e9++){if(!availabilityPattern[_0x43c2e9])availabilityPattern[_0x43c2e9]=[];const _0x49a302=availabilityPattern[_0x43c2e9][_0x408228(0x6c)](_0x394ab1);if(_0x1a8561){if(_0x49a302===-0x1)availabilityPattern[_0x43c2e9][_0x408228(0xe6)](_0x394ab1);}else{if(_0x49a302!==-0x1)availabilityPattern[_0x43c2e9][_0x408228(0x122)](_0x49a302,0x1);}}renderPatternEditor();}function renderPCol(_0x31fd20,_0x580914){const _0x105f78=a2_0x1f1f85;_0x31fd20[_0x105f78(0x168)]='';const _0x3f7667=Math[_0x105f78(0xb5)](_0x31fd20[_0x105f78(0x169)]);(availabilityPattern[_0x580914]||[])[_0x105f78(0xa4)](_0x4749bd=>{const _0x5d7616=_0x105f78,_0x4e20d0=document[_0x5d7616(0x12d)](_0x5d7616(0x16b));_0x4e20d0[_0x5d7616(0x178)]=_0x5d7616(0x13e);const _0x4c86ab=_0x4749bd*GRID_H;_0x4e20d0[_0x5d7616(0xda)][_0x5d7616(0x166)]=_0x4c86ab+'px',_0x4e20d0[_0x5d7616(0xda)]['backgroundPosition']='-'+_0x3f7667+_0x5d7616(0xf9)+_0x4c86ab+'px',_0x4e20d0[_0x5d7616(0x1e0)]=_0x8e82d=>{const _0x395662=_0x5d7616;_0x8e82d[_0x395662(0xea)](),toggleSinglePattern(_0x580914,_0x4749bd);},_0x31fd20['appendChild'](_0x4e20d0);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0xa106a0=a2_0x1f1f85,_0x5e5b77=new Date(),_0x95baff=document[_0xa106a0(0xe5)](_0xa106a0(0xa2)),_0xa8b30c=document['getElementById'](_0xa106a0(0x146)),_0x488a3b=(_0x5e5b77[_0xa106a0(0xc9)]()*0x3c+_0x5e5b77[_0xa106a0(0x173)]())/0x3c*GRID_H;_0x95baff['style'][_0xa106a0(0x166)]=_0x488a3b+'px',_0x95baff[_0xa106a0(0xda)][_0xa106a0(0x88)]=_0xa106a0(0x159),_0xa8b30c[_0xa106a0(0xbd)]=String(_0x5e5b77[_0xa106a0(0xc9)]())[_0xa106a0(0x1b5)](0x2,'0')+':'+String(_0x5e5b77[_0xa106a0(0x173)]())['padStart'](0x2,'0'),_0xa8b30c['style']['display']=_0xa106a0(0x159),_0xa8b30c['style'][_0xa106a0(0x166)]=_0x488a3b+'px';}document[a2_0x1f1f85(0x19f)](a2_0x1f1f85(0x195),init);function a2_0x342e(){const _0x49e820=['Error\x20setting\x20back\x20button:','uc_settings_v9','valid','href','loadLocal','week','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','btn-primary\x20btn-secondary','.dch-stats-fill','add','Заполните\x20все\x20поля','borderRadius','doWorkHours','from','<div\x20class=\x22dch-day\x22>','patternEditor','112ySDbtt','warn','inpDate','00:00','clients','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','rgba(255,255,255,0.05)','rgba(48,\x20209,\x2088,\x200.15)','rgba(','width','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','warning','initData','getMonth','de-item','scrollWidth','var(--acc-orange)','Нет\x20клиентов','Оффлайн\x20режим','uc_settings_cancel_window','Ошибка\x20сохранения\x20в\x20облако','Local\x20Save\x20Error','toast','#gridColumns\x20.day-column','getDay','onclick','Синхронизировано','anPercent','closest','settingsSheet','sheetTitle','stringify','vibrate','inpEnd','off','anEnd','Critical\x20TMA\x20Error:','actionSheetOverlay','settingCancelWindow','Ваша\x20тренировка\x20перенесена:\x0a\x0a','insertBefore','[Settings]\x20Cancel\x20window\x20set\x20to:','4594216wcnnHS','uc_clients_v9','update','note','analyticsSheet','backgroundPosition','indexOf','sid','anTotalStats','btn-status-toggle\x20undo-mode','pe-corner','clientWidth','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','syncLoad','text/plain;charset=UTF-8','gridColumns','</div><div\x20class=\x22dch-num\x22>','day-col-header\x20',']\x20Failed:','pe-cell\x20','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','[API\x20','settings','clientY','setMonth','sheetDateSubtitle','inpRecurring','option','analyticsList','100%','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','start','time-label','display','saveLocally','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','</div><div\x20class=\x22ev-time\x22>','map','.event-card','asBtnOne','anStart','series','%\x20+\x202px)','max','2300gpFnXU','batch_sync','Это\x20часть\x20серии\x20тренировок','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','keys','btn-status-toggle','.sheet','</b>\x0a\x0a','data-date','doLoadPercent','end','ranges','\x20status-completed','BackButton','10px','globalTimeLine','save_settings','forEach','actionSheet','[Series]\x20Skipped\x20','setHeaderColor','custom','planned','Batch\x20Sync\x20OK','numeric','btnDayToggle','save','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','.period-switch\x20.p-btn','zIndex','expand','Local\x20Load\x20Error','var(--acc-red)','now','round','doEventsList','mousedown','flex','find','month','as-button\x20danger\x20bold','276915TOaHMl','textContent','localeCompare','.pib-text','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','toUpperCase','guest','user','calendar','height','done','inpNote','syncBatch','getHours','random','charAt','uc_sessions_v9','(((.+)+)+)+$','data','\x20-\x20','deleted','total','json','Создана\x20серия:\x20','\x20выполнено','success','\x20—\x20','setHours','create','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','style','long','rangesSheet','value','10px\x2010px\x200\x200','completed','145768mEIInq','seriesCountContainer','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','sessionSheet','\x20days','getElementById','push','Минимум\x202\x20тренировки','Новая\x20запись','btnStatusToggle','stopPropagation','data-day-idx','9711AScHDf','day-column\x20','Telegram','Этот\x20клиент\x20(','rangeEndTime','as-button\x20danger','querySelectorAll','<b>⏰\x20Время:</b>\x20','stat-','pattern','Save\x20settings\x20error:','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','getFullYear','px\x20-','initDataUnsafe','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','toLocaleDateString','<span>','Все\x20даты\x20заняты\x20этим\x20клиентом!','createDocumentFragment','complete','null','Групповая:\x20также\x20записан\x20','min','strokeDashoffset','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','touchmove','[Notify]\x20Network\x20Failed','matrixViewport','WebApp','Сделать\x20рабочим\x20днем','header-','headerMonth','Максимум\x20100\x20за\x20раз',')\x20уже\x20записан\x20на\x20это\x20время!','offsetWidth','parse','overlay','msg','[Notify]\x20Attempting\x20to\x20send:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','length',':00','Только\x20эту','patternInfoBox','send','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','blocked-range-part\x20stripe-bg','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','includes','мин,\x20Загрузка:\x20','63HIZWAZ','setItem','splice','#050505','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','single','background','Статус\x20сброшен','<b>✅\x20','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','var(--acc-current)','rangesList','all','createElement','rangeEndDate','range-item','floor','day-off-overlay\x20stripe-bg','rgba(100,100,100,0.5)','\x20из\x20','rangeStartTime','setAttribute','filter','rangeStartDate','dateStr','seriesId','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','findIndex','cancel','active','blocked-slot\x20stripe-bg','scrollLeft','[Notify]\x20Error:\x20Text\x20generation\x20failed','fetchFromServer','formatDate','startsWith','today','px\x200px','timeLineBadge','color','toString','rgba(255,\x20159,\x2010,\x200.3)','offClick','cancel_window','daysHeaderTrack','init_load','6980CnqgTj','[Notify]\x20Detected\x20Client\x20ID:','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','POST','Вернуть\x20в\x20запланированные','slice','Инфо','Server\x20Error','inpSeriesCount','entries','classList','block','v9.0-BATCH-CALENDAR','Тренировка\x20завершена','touchend','none','getItem','log','mouseup','...','catch','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','event-card','top','pe-time-label','innerHTML','offsetLeft','pe-col-header','div','recurringOptionContainer','181644EndWra','open','<b>📅\x20Дата:</b>\x20','cancelled','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','borderColor','getMinutes','constructor','ru-RU','split','setBackgroundColor','className','Эту\x20и\x20будущие','getTime','<div\x20class=\x22ev-title\x22>','calc(','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','borderLeftColor','anDonutCircle','.day-col-header','[Sync]\x20Loading\x20','toastMessage','apply','querySelector','toFixed','getDate',')</b>\x20была\x20удалена\x20из\x20расписания.','scroll','toastTitle','var(--acc-green)','getText','timeColumn','#fff','inpClient','checked','dayOptionsSheet','btnDelete','name','exceptions',':00</span>','DOMContentLoaded','getAttribute','ч,\x20Занято:\x20','3135025WVVTuY','23:59','Жду\x20вас\x20в\x20зале!\x20💪','target','client','remove','then','addEventListener','inpStart','error','peGrid','delete','client-stat-card','Удаление','disableVerticalSwipes','appendChild','backgroundColor','show','sort','</span>\x20/\x20','onClick','clientId','left','setDate','status','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','Ошибка\x20сохранения\x20настроек','isArray','colIndex','padStart','doDateHeader'];a2_0x342e=function(){return _0x49e820;};return a2_0x342e();}function openDayOptions(_0x4d0b20){const _0x3c2fc8=a2_0x1f1f85;selectedDayForOptions=_0x4d0b20;const _0x2fa362=new Date(_0x4d0b20),_0x2b04f7={'weekday':_0x3c2fc8(0xdb),'day':_0x3c2fc8(0xab),'month':_0x3c2fc8(0xdb),'year':'numeric'},_0x3678a4=_0x2fa362[_0x3c2fc8(0xfc)](_0x3c2fc8(0x175),_0x2b04f7);document[_0x3c2fc8(0xe5)](_0x3c2fc8(0x1b6))['textContent']=_0x3678a4['charAt'](0x0)[_0x3c2fc8(0xc1)]()+_0x3678a4[_0x3c2fc8(0x153)](0x1);let _0x8a6a6e=_0x2fa362[_0x3c2fc8(0x1df)]()-0x1;if(_0x8a6a6e===-0x1)_0x8a6a6e=0x6;const _0x3e5894=availabilityPattern[_0x8a6a6e]||[],_0x367bf0=0x18-_0x3e5894['length'],_0x7a2f18=_0x367bf0*0x3c,_0x54347e=sessions[_0x3c2fc8(0x136)](_0x86a2b6=>_0x86a2b6[_0x3c2fc8(0x138)]===_0x4d0b20&&_0x86a2b6[_0x3c2fc8(0x1b0)]!==_0x3c2fc8(0x170));let _0x1d224c=_0x54347e[_0x3c2fc8(0x8c)](_0x19d2ba=>{const _0x573847=_0x3c2fc8,[_0x3158a5,_0x209ba7]=_0x19d2ba['start']['split'](':')[_0x573847(0x8c)](Number),[_0x2d6203,_0x21dd99]=_0x19d2ba[_0x573847(0x9d)][_0x573847(0x176)](':')['map'](Number);return[_0x3158a5*0x3c+_0x209ba7,_0x2d6203*0x3c+_0x21dd99];});_0x1d224c[_0x3c2fc8(0x1aa)]((_0x270dfc,_0x285a6f)=>_0x270dfc[0x0]-_0x285a6f[0x0]);let _0x439823=[];if(_0x1d224c['length']>0x0){let _0x338d37=_0x1d224c[0x0];for(let _0x2ebe37=0x1;_0x2ebe37<_0x1d224c['length'];_0x2ebe37++){_0x1d224c[_0x2ebe37][0x0]<_0x338d37[0x1]?_0x338d37[0x1]=Math[_0x3c2fc8(0x92)](_0x338d37[0x1],_0x1d224c[_0x2ebe37][0x1]):(_0x439823[_0x3c2fc8(0xe6)](_0x338d37),_0x338d37=_0x1d224c[_0x2ebe37]);}_0x439823['push'](_0x338d37);}let _0x38b291=0x0;_0x439823[_0x3c2fc8(0xa4)](_0x55e939=>_0x38b291+=_0x55e939[0x1]-_0x55e939[0x0]),document[_0x3c2fc8(0xe5)](_0x3c2fc8(0x1c3))['textContent']=formatMinsToHrs(_0x7a2f18),document[_0x3c2fc8(0xe5)]('doBusyHours')['textContent']=formatMinsToHrs(_0x38b291);const _0x24d62d=_0x7a2f18>0x0?Math[_0x3c2fc8(0xb5)](_0x38b291/_0x7a2f18*0x64):0x0,_0x4434d2=document[_0x3c2fc8(0xe5)](_0x3c2fc8(0x9c));_0x4434d2[_0x3c2fc8(0xbd)]=_0x24d62d+'%';const _0x3e767b=document[_0x3c2fc8(0xe5)]('statLoadCard');if(_0x24d62d>0x64)_0x4434d2[_0x3c2fc8(0xda)][_0x3c2fc8(0x147)]=_0x3c2fc8(0xb3),_0x3e767b[_0x3c2fc8(0xda)][_0x3c2fc8(0x172)]='rgba(255,\x2069,\x2058,\x200.3)';else _0x24d62d>0x50?(_0x4434d2['style']['color']=_0x3c2fc8(0x1d7),_0x3e767b[_0x3c2fc8(0xda)][_0x3c2fc8(0x172)]=_0x3c2fc8(0x149)):(_0x4434d2['style']['color']='var(--acc-green)',_0x3e767b[_0x3c2fc8(0xda)][_0x3c2fc8(0x172)]=_0x3c2fc8(0x1cd));const _0x7584bc=document[_0x3c2fc8(0xe5)](_0x3c2fc8(0xb6));_0x7584bc['innerHTML']='';_0x54347e['length']===0x0?_0x7584bc[_0x3c2fc8(0x168)]='<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>':(_0x54347e[_0x3c2fc8(0x1aa)]((_0x3e76c8,_0x379963)=>_0x3e76c8[_0x3c2fc8(0x86)][_0x3c2fc8(0xbe)](_0x379963[_0x3c2fc8(0x86)])),_0x54347e['forEach'](_0x1740eb=>{const _0x173c1f=_0x3c2fc8,_0x588369=clients['find'](_0x3704b6=>_0x3704b6['name']===_0x1740eb['client']),_0x137f18=_0x588369?_0x588369[_0x173c1f(0x147)]:_0x173c1f(0x18d),_0x62c0e6=_0x1740eb[_0x173c1f(0x1b0)]===_0x173c1f(0xdf),_0xfc633d=_0x62c0e6?_0x173c1f(0x11d):'',_0x365d0e=document['createElement'](_0x173c1f(0x16b));_0x365d0e[_0x173c1f(0x178)]=_0x173c1f(0x1d5),_0x365d0e[_0x173c1f(0xda)][_0x173c1f(0x17e)]=_0x137f18,_0x365d0e[_0x173c1f(0x168)]=_0x173c1f(0x114)+_0x1740eb[_0x173c1f(0x86)]+_0x173c1f(0xcf)+_0x1740eb[_0x173c1f(0x9d)]+_0x173c1f(0x11a)+_0x1740eb[_0x173c1f(0x19c)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xfc633d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x7584bc[_0x173c1f(0x1a7)](_0x365d0e);}));const _0x240846=document[_0x3c2fc8(0xe5)](_0x3c2fc8(0xac)),_0xe5c793=dateExceptions[_0x4d0b20]==='off';_0xe5c793?(_0x240846[_0x3c2fc8(0xbd)]=_0x3c2fc8(0x10a),_0x240846[_0x3c2fc8(0x178)]=_0x3c2fc8(0x1be),_0x240846[_0x3c2fc8(0xda)][_0x3c2fc8(0x147)]=_0x3c2fc8(0x18a),_0x240846[_0x3c2fc8(0xda)][_0x3c2fc8(0x126)]=_0x3c2fc8(0x1ce)):(_0x240846[_0x3c2fc8(0xbd)]='Сделать\x20выходным',_0x240846[_0x3c2fc8(0x178)]='btn-primary\x20btn-danger',_0x240846['style'][_0x3c2fc8(0x147)]=_0x3c2fc8(0xb3),_0x240846[_0x3c2fc8(0xda)][_0x3c2fc8(0x126)]='rgba(255,\x2069,\x2058,\x200.15)'),openSheet('dayOptionsSheet');}let currentAnPeriod='week';function openAnalytics(){const _0x4a9aca=a2_0x1f1f85,_0x16f10f=document[_0x4a9aca(0x184)](_0x4a9aca(0xaf));setAnalyticsPeriod(_0x4a9aca(0x1bc),_0x16f10f),closeAllSheets(),openSheet(_0x4a9aca(0x6a));}function setAnalyticsPeriod(_0x4d0ca3,_0x4f32aa){const _0x913d56=a2_0x1f1f85;currentAnPeriod=_0x4d0ca3,document['querySelectorAll'](_0x913d56(0xaf))['forEach'](_0x5a4fc4=>_0x5a4fc4[_0x913d56(0x158)][_0x913d56(0x19d)](_0x913d56(0x13d)));if(_0x4f32aa)_0x4f32aa[_0x913d56(0x158)][_0x913d56(0x1c0)]('active');const _0x3e8a1b=document[_0x913d56(0xe5)]('anCustomDates');_0x3e8a1b[_0x913d56(0xda)]['display']=_0x4d0ca3===_0x913d56(0xa8)?_0x913d56(0xb8):'none';const _0x5b7006=new Date();let _0x91aa7=new Date(),_0xebca4f=new Date();if(_0x4d0ca3===_0x913d56(0x1bc))_0x91aa7=getStartOfWeek(_0x5b7006),_0xebca4f=new Date(_0x91aa7),_0xebca4f[_0x913d56(0x1af)](_0xebca4f['getDate']()+0x6);else{if(_0x4d0ca3===_0x913d56(0xba))_0x91aa7=new Date(_0x5b7006[_0x913d56(0xf8)](),_0x5b7006[_0x913d56(0x1d4)](),0x1),_0xebca4f=new Date(_0x5b7006['getFullYear'](),_0x5b7006[_0x913d56(0x1d4)]()+0x1,0x0);else{!document[_0x913d56(0xe5)]('anStart')[_0x913d56(0xdd)]&&(document['getElementById'](_0x913d56(0x8f))[_0x913d56(0xdd)]=getLocalDateStr(_0x5b7006),document[_0x913d56(0xe5)](_0x913d56(0x1ea))[_0x913d56(0xdd)]=getLocalDateStr(_0x5b7006));refreshAnalytics();return;}}document[_0x913d56(0xe5)]('anStart')[_0x913d56(0xdd)]=getLocalDateStr(_0x91aa7),document['getElementById'](_0x913d56(0x1ea))['value']=getLocalDateStr(_0xebca4f),refreshAnalytics();}function refreshAnalytics(){const _0x309375=a2_0x1f1f85,_0x57e065=document[_0x309375(0xe5)]('anStart')[_0x309375(0xdd)],_0x1d969b=document[_0x309375(0xe5)](_0x309375(0x1ea))[_0x309375(0xdd)];if(!_0x57e065||!_0x1d969b)return;const _0x3068c7=sessions[_0x309375(0x136)](_0xb28f83=>_0xb28f83[_0x309375(0x138)]>=_0x57e065&&_0xb28f83[_0x309375(0x138)]<=_0x1d969b&&_0xb28f83[_0x309375(0x1b0)]!==_0x309375(0x170)),_0x32c2fa=_0x3068c7['length'],_0x230739=_0x3068c7[_0x309375(0x136)](_0x597e67=>_0x597e67[_0x309375(0x1b0)]===_0x309375(0xdf))['length'],_0x234d5a=_0x32c2fa>0x0?Math[_0x309375(0xb5)](_0x230739/_0x32c2fa*0x64):0x0;document[_0x309375(0xe5)](_0x309375(0x1e2))[_0x309375(0xbd)]=_0x234d5a+'%',document[_0x309375(0xe5)](_0x309375(0x6e))[_0x309375(0xbd)]=_0x230739+_0x309375(0x133)+_0x32c2fa+_0x309375(0xd4);const _0x32aed2=document[_0x309375(0xe5)](_0x309375(0x17f)),_0x58867f=0x2*Math['PI']*0x23,_0x5e1bbb=_0x58867f-_0x234d5a/0x64*_0x58867f;_0x32aed2[_0x309375(0xda)][_0x309375(0x104)]=_0x5e1bbb;const _0x5c334b={};_0x3068c7[_0x309375(0xa4)](_0x247464=>{const _0x308b10=_0x309375;if(!_0x5c334b[_0x247464[_0x308b10(0x19c)]]){const _0x1699c3=clients[_0x308b10(0xb9)](_0x418ffb=>_0x418ffb[_0x308b10(0x192)]===_0x247464[_0x308b10(0x19c)]);_0x5c334b[_0x247464[_0x308b10(0x19c)]]={'total':0x0,'done':0x0,'color':_0x1699c3?_0x1699c3[_0x308b10(0x147)]:_0x308b10(0x18d)};}_0x5c334b[_0x247464[_0x308b10(0x19c)]][_0x308b10(0xd1)]++;if(_0x247464['status']===_0x308b10(0xdf))_0x5c334b[_0x247464[_0x308b10(0x19c)]][_0x308b10(0xc6)]++;});const _0x5e1f68=document[_0x309375(0xe5)](_0x309375(0x82));_0x5e1f68[_0x309375(0x168)]='';const _0x1f8f38=Object[_0x309375(0x157)](_0x5c334b)[_0x309375(0x1aa)]((_0x43e59f,_0x494364)=>_0x494364[0x1][_0x309375(0xd1)]-_0x43e59f[0x1][_0x309375(0xd1)]);if(_0x1f8f38[_0x309375(0x115)]===0x0){_0x5e1f68[_0x309375(0x168)]=_0x309375(0xfb);return;}_0x1f8f38[_0x309375(0xa4)](([_0x51f868,_0x2d877a])=>{const _0x5275a7=_0x309375,_0xf94274=Math['round'](_0x2d877a[_0x5275a7(0xc6)]/_0x2d877a[_0x5275a7(0xd1)]*0x64),_0x3fcd1b=document[_0x5275a7(0x12d)](_0x5275a7(0x16b));_0x3fcd1b[_0x5275a7(0x178)]=_0x5275a7(0x1a4),_0x3fcd1b[_0x5275a7(0xda)]['borderLeftColor']=_0x2d877a[_0x5275a7(0x147)],_0x3fcd1b['innerHTML']=_0x5275a7(0x11b)+_0x51f868+_0x5275a7(0x1bd)+_0x2d877a[_0x5275a7(0xc6)]+_0x5275a7(0x1ab)+_0x2d877a['total']+_0x5275a7(0x171)+_0xf94274+_0x5275a7(0x17d),_0x5e1f68['appendChild'](_0x3fcd1b);});}function formatMinsToHrs(_0x1cf27c){const _0x2cd6a5=a2_0x1f1f85;if(_0x1cf27c===0x0)return'0';const _0x5d16fe=Math[_0x2cd6a5(0x130)](_0x1cf27c/0x3c),_0x2cfbe2=_0x1cf27c%0x3c;if(_0x2cfbe2===0x0)return _0x5d16fe+'ч';return _0x5d16fe+'ч\x20'+_0x2cfbe2+'м';}