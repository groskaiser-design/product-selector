const a2_0x4c7610=a2_0x725a;(function(_0x59dc84,_0x5617c3){const _0x4f3248=a2_0x725a,_0x48bd63=_0x59dc84();while(!![]){try{const _0x3109ea=parseInt(_0x4f3248(0x10c))/0x1*(parseInt(_0x4f3248(0x128))/0x2)+-parseInt(_0x4f3248(0x26d))/0x3*(parseInt(_0x4f3248(0x228))/0x4)+-parseInt(_0x4f3248(0x224))/0x5+parseInt(_0x4f3248(0x244))/0x6+parseInt(_0x4f3248(0x1a1))/0x7+parseInt(_0x4f3248(0x220))/0x8*(parseInt(_0x4f3248(0x20d))/0x9)+parseInt(_0x4f3248(0x164))/0xa*(-parseInt(_0x4f3248(0x266))/0xb);if(_0x3109ea===_0x5617c3)break;else _0x48bd63['push'](_0x48bd63['shift']());}catch(_0x31cf1c){_0x48bd63['push'](_0x48bd63['shift']());}}}(a2_0x4815,0xe0c40),function initTMA(){const _0x853b8b=a2_0x725a,_0x3d1c17=(function(){let _0x1cca52=!![];return function(_0x36a78f,_0x18de35){const _0xfe5d85=_0x1cca52?function(){if(_0x18de35){const _0x33e2d3=_0x18de35['apply'](_0x36a78f,arguments);return _0x18de35=null,_0x33e2d3;}}:function(){};return _0x1cca52=![],_0xfe5d85;};}()),_0x83fd7=_0x3d1c17(this,function(){const _0x1fbbc5=a2_0x725a;return _0x83fd7[_0x1fbbc5(0x1e6)]()[_0x1fbbc5(0x169)](_0x1fbbc5(0x260))[_0x1fbbc5(0x1e6)]()[_0x1fbbc5(0x217)](_0x83fd7)[_0x1fbbc5(0x169)](_0x1fbbc5(0x260));});_0x83fd7();try{const _0x2dc5ee=window[_0x853b8b(0x20e)]?.[_0x853b8b(0x1e9)];if(!_0x2dc5ee)return;_0x2dc5ee[_0x853b8b(0x236)](),_0x2dc5ee[_0x853b8b(0x1f5)]();try{_0x2dc5ee[_0x853b8b(0x21d)]('#050505'),_0x2dc5ee['setBackgroundColor']&&_0x2dc5ee[_0x853b8b(0x20a)](_0x853b8b(0x1cf));}catch(_0x20a0f6){console[_0x853b8b(0x202)]('Error\x20setting\x20color:',_0x20a0f6);}try{_0x2dc5ee[_0x853b8b(0x271)]&&(_0x2dc5ee['BackButton'][_0x853b8b(0x1b6)](),_0x2dc5ee[_0x853b8b(0x271)]['offClick'](),_0x2dc5ee[_0x853b8b(0x271)][_0x853b8b(0x166)](function(){const _0x271b6a=_0x853b8b;window[_0x271b6a(0x270)][_0x271b6a(0x171)]=_0x271b6a(0x1be);}));}catch(_0x46fa2e){console[_0x853b8b(0x202)]('Error\x20setting\x20back\x20button:',_0x46fa2e);}try{if(_0x2dc5ee[_0x853b8b(0x234)])_0x2dc5ee[_0x853b8b(0x234)]();}catch(_0xac2a83){}}catch(_0x224df2){console['error'](_0x853b8b(0x1c7),_0x224df2);}}());function isAdmin(){const _0x5f4c15=a2_0x725a;try{const _0x553d5d=Number(window[_0x5f4c15(0x20e)]?.[_0x5f4c15(0x1e9)]?.[_0x5f4c15(0x1c1)]?.[_0x5f4c15(0x18d)]?.['id']);return _0x553d5d===0xbaf7174;}catch(_0x55a6cc){return![];}}const APP_VERSION=a2_0x4c7610(0x242),API_URL=a2_0x4c7610(0x231),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x4c7610(0x204),KEY_SESSIONS=a2_0x4c7610(0x225),KEY_SETTINGS=a2_0x4c7610(0x23b);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x2d19a2=a2_0x4c7610;return window[_0x2d19a2(0x20e)]?.[_0x2d19a2(0x1e9)]?.['initDataUnsafe']?.[_0x2d19a2(0x18d)]?.['id']||_0x2d19a2(0x1c5);},'saveLocally'(){const _0x559d2e=a2_0x4c7610;try{localStorage[_0x559d2e(0x198)](KEY_CLIENTS,JSON[_0x559d2e(0x18a)](clients)),localStorage['setItem'](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x559d2e(0x18a)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x3d8b4d){console[_0x559d2e(0x14d)](_0x559d2e(0x129),_0x3d8b4d);}},'loadLocal'(){const _0x187e4e=a2_0x4c7610;try{const _0x1a59b2=localStorage[_0x187e4e(0x16c)](KEY_CLIENTS);if(_0x1a59b2)clients=JSON[_0x187e4e(0x232)](_0x1a59b2);const _0x453e5f=localStorage[_0x187e4e(0x16c)](KEY_SESSIONS);if(_0x453e5f)sessions=JSON['parse'](_0x453e5f);const _0x54bc01=localStorage[_0x187e4e(0x16c)](KEY_SETTINGS);if(_0x54bc01){const _0x3a03bc=JSON['parse'](_0x54bc01);if(_0x3a03bc[_0x187e4e(0x248)])availabilityPattern=_0x3a03bc[_0x187e4e(0x248)];if(_0x3a03bc[_0x187e4e(0x209)])dateExceptions=_0x3a03bc[_0x187e4e(0x209)];if(_0x3a03bc[_0x187e4e(0x286)])specialRanges=_0x3a03bc[_0x187e4e(0x286)];}else{for(let _0x683bee=0x0;_0x683bee<0x7;_0x683bee++)availabilityPattern[_0x683bee]=Array[_0x187e4e(0x243)]({'length':0xc},(_0x595475,_0x41cc6b)=>_0x41cc6b+0x9);}}catch(_0x567998){console['error'](_0x187e4e(0x17b),_0x567998);}},async 'fetchFromServer'(_0x4b4cc3,_0x1a7f45={}){const _0x1db146=a2_0x4c7610,_0x5b1ba9=window['Telegram']?.[_0x1db146(0x1e9)],_0x1be404={'action':_0x4b4cc3,'init_data':_0x5b1ba9?.[_0x1db146(0x229)]||'',..._0x1a7f45};try{const _0x4affb0=await fetch(API_URL,{'method':_0x1db146(0x1cc),'headers':{'Content-Type':_0x1db146(0x15b)},'body':JSON[_0x1db146(0x18a)](_0x1be404)}),_0x5c10b8=await _0x4affb0[_0x1db146(0x216)]();if(!_0x5c10b8['ok'])throw new Error(_0x5c10b8[_0x1db146(0x14d)]||_0x1db146(0x26a));return _0x5c10b8[_0x1db146(0x218)];}catch(_0x35a456){console[_0x1db146(0x14d)](_0x1db146(0x185)+_0x4b4cc3+_0x1db146(0x17c),_0x35a456);throw _0x35a456;}},async 'syncLoad'(){const _0x1a0d07=a2_0x4c7610,_0x3cc2b7=new Date(),_0x3f9bb4=_0x3cc2b7[_0x1a0d07(0x14f)]()+'-'+String(_0x3cc2b7[_0x1a0d07(0x187)]()+0x1)[_0x1a0d07(0x15a)](0x2,'0'),_0x116a9d=new Date(_0x3cc2b7);_0x116a9d['setMonth'](_0x3cc2b7[_0x1a0d07(0x187)]()+0x1);const _0x48acb2=_0x116a9d[_0x1a0d07(0x14f)]()+'-'+String(_0x116a9d[_0x1a0d07(0x187)]()+0x1)[_0x1a0d07(0x15a)](0x2,'0'),_0x5ac0ad=Date['now']();console[_0x1a0d07(0x202)](_0x1a0d07(0x1ab)+_0x3f9bb4+',\x20'+_0x48acb2+_0x1a0d07(0x1ad));try{const [_0x54915d,_0x14b1d5]=await Promise['all']([this[_0x1a0d07(0x247)]('init_load',{'month_str':_0x3f9bb4}),this['fetchFromServer'](_0x1a0d07(0x1ac),{'month_str':_0x48acb2})]);if(lastUserActionTime>_0x5ac0ad)return console[_0x1a0d07(0x1d8)](_0x1a0d07(0x11e)),![];return this[_0x1a0d07(0x133)](_0x54915d,_0x3f9bb4),this['mergeServerData'](_0x14b1d5,_0x48acb2),this[_0x1a0d07(0x1d0)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x279f75){console[_0x1a0d07(0x14d)](_0x279f75);throw _0x279f75;}},'mergeServerData'(_0x1527ab,_0x3ab091){const _0x5ec025=a2_0x4c7610;if(!_0x1527ab)return;_0x1527ab[_0x5ec025(0x1bc)]&&Array[_0x5ec025(0x11a)](_0x1527ab[_0x5ec025(0x1bc)])&&(clients=_0x1527ab[_0x5ec025(0x1bc)]);if(_0x1527ab[_0x5ec025(0x170)]){if(_0x1527ab[_0x5ec025(0x170)]['pattern'])availabilityPattern=_0x1527ab[_0x5ec025(0x170)][_0x5ec025(0x248)];if(_0x1527ab[_0x5ec025(0x170)][_0x5ec025(0x209)])dateExceptions=_0x1527ab[_0x5ec025(0x170)][_0x5ec025(0x209)];if(_0x1527ab[_0x5ec025(0x170)][_0x5ec025(0x286)])specialRanges=_0x1527ab[_0x5ec025(0x170)][_0x5ec025(0x286)];if(_0x1527ab[_0x5ec025(0x170)][_0x5ec025(0x154)]){localStorage[_0x5ec025(0x198)](_0x5ec025(0x163),_0x1527ab[_0x5ec025(0x170)]['cancel_window']);const _0x36e2a4=document[_0x5ec025(0x1df)](_0x5ec025(0x15f));if(_0x36e2a4)_0x36e2a4[_0x5ec025(0x10b)]=_0x1527ab['settings'][_0x5ec025(0x154)];}}_0x1527ab[_0x5ec025(0x140)]&&(sessions=sessions[_0x5ec025(0x132)](_0x2dd5f4=>!_0x2dd5f4[_0x5ec025(0x237)]['startsWith'](_0x3ab091)),Object[_0x5ec025(0x152)](_0x1527ab[_0x5ec025(0x140)])[_0x5ec025(0x1a2)](_0x34aa20=>{const _0x26297f=_0x5ec025,_0x342760=_0x1527ab[_0x26297f(0x140)][_0x34aa20];_0x342760[_0x26297f(0x1a2)](_0x12b3b1=>{const _0x5d7aa7=_0x26297f,_0x5b96a3=clients['find'](_0x59ff55=>String(_0x59ff55['id'])===String(_0x12b3b1['c']));sessions['push']({'id':_0x12b3b1['i'],'clientId':_0x12b3b1['c'],'client':_0x5b96a3?_0x5b96a3[_0x5d7aa7(0x151)]:_0x5d7aa7(0x1f2),'dateStr':_0x3ab091+'-'+_0x34aa20[_0x5d7aa7(0x15a)](0x2,'0'),'start':_0x12b3b1['s'],'end':_0x12b3b1['e'],'status':_0x12b3b1['st']||_0x5d7aa7(0x1cd),'note':_0x12b3b1['n']||'','seriesId':_0x12b3b1['sid']||null});});}));},async 'syncBatch'(_0x2f81f0){const _0x77b0f0=a2_0x4c7610,_0x2df7cd=[...new Set(_0x2f81f0)],_0x2bd92e=_0x2df7cd[_0x77b0f0(0x1a4)](_0x34a24e=>{const _0x4ba497=_0x77b0f0,_0x496850=sessions[_0x4ba497(0x132)](_0x5943d8=>_0x5943d8[_0x4ba497(0x237)]===_0x34a24e&&_0x5943d8['status']!==_0x4ba497(0x285)),_0x2827bc=_0x496850[_0x4ba497(0x1a4)](_0x1237b1=>({'i':_0x1237b1['id'],'c':_0x1237b1[_0x4ba497(0x126)],'s':_0x1237b1['start'],'e':_0x1237b1[_0x4ba497(0x16b)],'st':_0x1237b1[_0x4ba497(0x264)],'n':_0x1237b1[_0x4ba497(0x19a)],'sid':_0x1237b1[_0x4ba497(0x26c)]}));return{'date':_0x34a24e,'day_data':_0x2827bc};});if(_0x2bd92e[_0x77b0f0(0x1c6)]===0x0)return;console[_0x77b0f0(0x202)](_0x77b0f0(0x26b)+_0x2bd92e[_0x77b0f0(0x1c6)]+_0x77b0f0(0x20b)),await this['fetchFromServer'](_0x77b0f0(0x14c),{'changes':_0x2bd92e});}};async function init(){const _0x551631=a2_0x4c7610;DataManager[_0x551631(0x124)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById']('matrixViewport')['addEventListener'](_0x551631(0x279),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x551631(0x1e7)]()[_0x551631(0x267)](()=>{const _0x120934=_0x551631;showToast(_0x120934(0x11c),!![]);})['catch'](_0x415419=>{const _0x2a188e=_0x551631;showToast(_0x2a188e(0x13d),![]);});}function generateId(){const _0x4c445b=a2_0x4c7610;return Date[_0x4c445b(0x282)]()[_0x4c445b(0x1e6)](0x24)+Math['random']()[_0x4c445b(0x1e6)](0x24)[_0x4c445b(0x1c2)](0x2,0x5);}function toggleSeriesInput(){const _0xc35693=a2_0x4c7610,_0xd00cca=document[_0xc35693(0x1df)](_0xc35693(0x1c9))[_0xc35693(0x168)],_0x470ef0=document[_0xc35693(0x1df)](_0xc35693(0x149));_0x470ef0[_0xc35693(0x11d)][_0xc35693(0x265)]=_0xd00cca?'block':_0xc35693(0x1d6);const _0xc42346=document[_0xc35693(0x1df)]('recurringOptionContainer');_0xc42346[_0xc35693(0x11d)][_0xc35693(0x13f)]=_0xd00cca?'10px\x2010px\x200\x200':'10px';}function openAddSession(_0x46bae5){const _0x4aa241=a2_0x4c7610;editingId=null,populateClientSelect(),document['getElementById']('sheetTitle')['textContent']='Новая\x20запись',document['getElementById']('btnDelete')[_0x4aa241(0x11d)][_0x4aa241(0x265)]=_0x4aa241(0x1d6),document['getElementById'](_0x4aa241(0x240))[_0x4aa241(0x11d)]['display']=_0x4aa241(0x1d6);const _0x184859=document[_0x4aa241(0x1df)](_0x4aa241(0x18b)),_0x2a30c4=document[_0x4aa241(0x1df)](_0x4aa241(0x149));_0x184859[_0x4aa241(0x11d)][_0x4aa241(0x265)]=_0x4aa241(0x219),_0x184859[_0x4aa241(0x11d)][_0x4aa241(0x13f)]=_0x4aa241(0x226),document['getElementById'](_0x4aa241(0x1c9))[_0x4aa241(0x168)]=![],document['getElementById'](_0x4aa241(0x1d9))[_0x4aa241(0x10b)]=0x4,_0x2a30c4[_0x4aa241(0x11d)][_0x4aa241(0x265)]=_0x4aa241(0x1d6),document[_0x4aa241(0x1df)](_0x4aa241(0x22f))[_0x4aa241(0x10b)]=getLocalDateStr(_0x46bae5),updateDateDisplay();const _0x582d8c=_0x46bae5[_0x4aa241(0x131)]();document[_0x4aa241(0x1df)](_0x4aa241(0x268))[_0x4aa241(0x10b)]=String(_0x582d8c)['padStart'](0x2,'0')+_0x4aa241(0x12a),document[_0x4aa241(0x1df)](_0x4aa241(0x11b))[_0x4aa241(0x10b)]=String(_0x582d8c+0x1)[_0x4aa241(0x15a)](0x2,'0')+_0x4aa241(0x12a),openSheet('sessionSheet');}function openEdit(_0x332bc4){const _0x14bf1d=a2_0x4c7610;editingId=_0x332bc4['id'],populateClientSelect(),document[_0x14bf1d(0x1df)]('sheetTitle')['textContent']=_0x14bf1d(0x193),document[_0x14bf1d(0x1df)]('btnDelete')[_0x14bf1d(0x11d)][_0x14bf1d(0x265)]=_0x14bf1d(0x23c);const _0x2dc34a=document['getElementById']('btnStatusToggle');_0x2dc34a['style'][_0x14bf1d(0x265)]=_0x14bf1d(0x219);_0x332bc4[_0x14bf1d(0x264)]==='completed'?(_0x2dc34a[_0x14bf1d(0x1b9)]='btn-status-toggle\x20undo-mode',_0x2dc34a['innerHTML']=_0x14bf1d(0x256)):(_0x2dc34a['className']='btn-status-toggle',_0x2dc34a[_0x14bf1d(0x25c)]=_0x14bf1d(0x21b));const _0x1abc33=!!_0x332bc4['seriesId'];document[_0x14bf1d(0x1df)](_0x14bf1d(0x18b))[_0x14bf1d(0x11d)][_0x14bf1d(0x265)]=_0x14bf1d(0x1d6),document[_0x14bf1d(0x1df)](_0x14bf1d(0x149))[_0x14bf1d(0x11d)][_0x14bf1d(0x265)]=_0x14bf1d(0x1d6),_0x1abc33?(document['getElementById'](_0x14bf1d(0x121))[_0x14bf1d(0x11d)][_0x14bf1d(0x265)]=_0x14bf1d(0x219),document[_0x14bf1d(0x1df)](_0x14bf1d(0x121))[_0x14bf1d(0x239)]('.pib-text')['textContent']=_0x14bf1d(0x280)):document['getElementById'](_0x14bf1d(0x121))[_0x14bf1d(0x11d)][_0x14bf1d(0x265)]='none',document[_0x14bf1d(0x1df)](_0x14bf1d(0x11f))[_0x14bf1d(0x10b)]=_0x332bc4[_0x14bf1d(0x10f)],document[_0x14bf1d(0x1df)]('inpDate')[_0x14bf1d(0x10b)]=_0x332bc4[_0x14bf1d(0x237)],document[_0x14bf1d(0x1df)](_0x14bf1d(0x268))['value']=_0x332bc4[_0x14bf1d(0x22d)],document[_0x14bf1d(0x1df)](_0x14bf1d(0x11b))[_0x14bf1d(0x10b)]=_0x332bc4[_0x14bf1d(0x16b)],document[_0x14bf1d(0x1df)](_0x14bf1d(0x215))['value']=_0x332bc4[_0x14bf1d(0x19a)]||'',updateDateDisplay(),openSheet(_0x14bf1d(0x213));}async function trySaveSession(){const _0x2d0b62=a2_0x4c7610,_0x59693c=document[_0x2d0b62(0x1df)](_0x2d0b62(0x11f))[_0x2d0b62(0x10b)],_0x4bd9f8=document[_0x2d0b62(0x1df)]('inpDate')[_0x2d0b62(0x10b)],_0x55af0c=document['getElementById']('inpStart')[_0x2d0b62(0x10b)],_0x291721=document[_0x2d0b62(0x1df)]('inpEnd')[_0x2d0b62(0x10b)],_0x585800=document[_0x2d0b62(0x1df)](_0x2d0b62(0x215))[_0x2d0b62(0x10b)],_0x19c475=document[_0x2d0b62(0x1df)]('inpRecurring')[_0x2d0b62(0x168)];let _0x3aa61c=0x4;if(_0x19c475){const _0x51acc4=parseInt(document[_0x2d0b62(0x1df)]('inpSeriesCount')[_0x2d0b62(0x10b)]);if(!_0x51acc4||_0x51acc4<0x2){showToast(_0x2d0b62(0x10e),![]);return;}if(_0x51acc4>0x64){showToast(_0x2d0b62(0x287),![]);return;}_0x3aa61c=_0x51acc4;}const _0x3b3551=clients[_0x2d0b62(0x255)](_0x20546a=>_0x20546a[_0x2d0b62(0x151)]===_0x59693c);if(!_0x3b3551){showToast(_0x2d0b62(0x123),![]);return;}const _0x2b64aa=validateAppointment(_0x4bd9f8,_0x55af0c,_0x291721,editingId,_0x3b3551['id']);if(!_0x2b64aa[_0x2d0b62(0x197)]){showToast(_0x2b64aa[_0x2d0b62(0x1b2)],![]);return;}_0x2b64aa[_0x2d0b62(0x288)]&&showToast(_0x2b64aa[_0x2d0b62(0x288)],![]);const _0x5dc5d5={'client':_0x59693c,'clientId':_0x3b3551['id'],'start':_0x55af0c,'end':_0x291721,'note':_0x585800,'status':'planned'},_0x4be85f=editingId?sessions[_0x2d0b62(0x255)](_0x52d026=>_0x52d026['id']===editingId):null;if(_0x4be85f&&_0x4be85f[_0x2d0b62(0x26c)]){tempSessionData={..._0x5dc5d5,'dateStr':_0x4bd9f8,'id':editingId,'seriesId':_0x4be85f[_0x2d0b62(0x26c)]},openActionSheet(_0x2d0b62(0x109));return;}let _0x1447ab=null;if(!editingId)_0x1447ab=_0x2d0b62(0x274);else{if(_0x4be85f){if(String(_0x4be85f['clientId'])!==String(_0x3b3551['id']))console[_0x2d0b62(0x202)](_0x2d0b62(0x205)),NotificationManager['send'](_0x2d0b62(0x24f),_0x4be85f),_0x1447ab=_0x2d0b62(0x274);else(_0x4be85f[_0x2d0b62(0x22d)]!==_0x55af0c||_0x4be85f[_0x2d0b62(0x16b)]!==_0x291721||_0x4be85f[_0x2d0b62(0x237)]!==_0x4bd9f8)&&(_0x1447ab='update');}}if(!editingId&&_0x19c475){createBatchSeries(_0x5dc5d5,_0x4bd9f8,_0x3aa61c),NotificationManager['send'](_0x2d0b62(0x274),{..._0x5dc5d5,'dateStr':_0x4bd9f8});return;}lastUserActionTime=Date[_0x2d0b62(0x282)]();const _0x253d52={..._0x5dc5d5,'dateStr':_0x4bd9f8,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x253d52),_0x1447ab&&NotificationManager[_0x2d0b62(0x1ea)](_0x1447ab,_0x253d52);}function toggleSessionStatus(){const _0x1a4c02=a2_0x4c7610;lastUserActionTime=Date['now']();const _0x181411=sessions[_0x1a4c02(0x255)](_0x481ecd=>_0x481ecd['id']===editingId);if(!_0x181411)return;const _0x28eb37=_0x181411[_0x1a4c02(0x264)]==='completed'?_0x1a4c02(0x1cd):'completed';_0x181411[_0x1a4c02(0x264)]=_0x28eb37,saveSingleSession(_0x181411),_0x28eb37===_0x1a4c02(0x1c8)&&NotificationManager[_0x1a4c02(0x1ea)](_0x1a4c02(0x18f),_0x181411),showToast(_0x28eb37===_0x1a4c02(0x1c8)?'Тренировка\x20завершена':_0x1a4c02(0x1c4),!![]);}function validateAppointment(_0x4abb2f,_0x2729ee,_0x175306,_0x5c4d09,_0x4f8dfd){const _0x71a92f=a2_0x4c7610,[_0x3ef55f,_0xc10ff6]=_0x2729ee[_0x71a92f(0x275)](':')[_0x71a92f(0x1a4)](Number),[_0x1a5948,_0x50a6dc]=_0x175306[_0x71a92f(0x275)](':')[_0x71a92f(0x1a4)](Number),_0x24df6b=_0x3ef55f*0x3c+_0xc10ff6,_0x586a7a=_0x1a5948*0x3c+_0x50a6dc,_0x4cf5ae=String(_0x4f8dfd);let _0x4fb9b3=![],_0x6622a3='';for(let _0x4c2d7f of sessions){if(_0x4c2d7f[_0x71a92f(0x237)]!==_0x4abb2f)continue;if(_0x4c2d7f['status']===_0x71a92f(0x16f))continue;if(_0x5c4d09&&String(_0x4c2d7f['id'])===String(_0x5c4d09))continue;const [_0x29a230,_0x9f48f7]=_0x4c2d7f['start']['split'](':')['map'](Number),[_0x167ee9,_0x52ef8a]=_0x4c2d7f[_0x71a92f(0x16b)][_0x71a92f(0x275)](':')[_0x71a92f(0x1a4)](Number),_0x54a26c=_0x29a230*0x3c+_0x9f48f7,_0x413f4d=_0x167ee9*0x3c+_0x52ef8a;if(Math[_0x71a92f(0x136)](_0x24df6b,_0x54a26c)<Math[_0x71a92f(0x118)](_0x586a7a,_0x413f4d)){if(_0x4c2d7f[_0x71a92f(0x126)]&&String(_0x4c2d7f['clientId'])===_0x4cf5ae)return{'valid':![],'msg':_0x71a92f(0x142)+_0x4c2d7f['client']+')\x20уже\x20записан\x20на\x20это\x20время!'};_0x4fb9b3=!![],_0x6622a3=_0x4c2d7f['client'];}}if(_0x4fb9b3)return{'valid':!![],'warning':_0x71a92f(0x20f)+_0x6622a3};return{'valid':!![]};}function saveSingleSession(_0x4ccc19){const _0x325f38=a2_0x4c7610;if(editingId){const _0x4b02a2=sessions[_0x325f38(0x227)](_0x4eb63c=>_0x4eb63c['id']===editingId);if(_0x4b02a2!==-0x1)sessions[_0x4b02a2]=_0x4ccc19;}else sessions['push'](_0x4ccc19);afterSaveAction([_0x4ccc19[_0x325f38(0x237)]]);}function createBatchSeries(_0x5899aa,_0x2b6d19,_0x56b2c5){const _0x2d20d6=a2_0x4c7610,_0x507e97=generateId(),_0x34f874=[],_0x49ce8b=[];let _0x3002bc=0x0,_0x60bfa2=new Date(_0x2b6d19);for(let _0x1948d8=0x0;_0x1948d8<_0x56b2c5;_0x1948d8++){const _0x59d538=getLocalDateStr(_0x60bfa2),_0x435a82=validateAppointment(_0x59d538,_0x5899aa['start'],_0x5899aa[_0x2d20d6(0x16b)],null,_0x5899aa['clientId']);if(!_0x435a82['valid'])console[_0x2d20d6(0x202)](_0x2d20d6(0x111)+_0x59d538+_0x2d20d6(0x27b)),_0x3002bc++;else{const _0x2037bb={..._0x5899aa,'id':generateId(),'dateStr':_0x59d538,'seriesId':_0x507e97};_0x49ce8b[_0x2d20d6(0x162)](_0x2037bb),_0x34f874[_0x2d20d6(0x162)](_0x59d538);}_0x60bfa2[_0x2d20d6(0x281)](_0x60bfa2[_0x2d20d6(0x134)]()+0x7);}if(_0x49ce8b[_0x2d20d6(0x1c6)]===0x0){showToast(_0x2d20d6(0x214),![]);return;}sessions[_0x2d20d6(0x162)](..._0x49ce8b),lastUserActionTime=Date['now']();let _0xabede=_0x2d20d6(0x27a)+_0x49ce8b[_0x2d20d6(0x1c6)];_0x3002bc>0x0&&(_0xabede+=_0x2d20d6(0x1a6)+_0x3002bc+')'),showToast(_0xabede,!![]),afterSaveAction(_0x34f874);}function updateSeriesBatch(_0x409543,_0x188377){const _0x1e4669=a2_0x4c7610,_0x4369f3=[],_0x14039a=_0x188377[_0x1e4669(0x26c)];if(_0x409543==='single'){const _0x392892={..._0x188377,'seriesId':null},_0x106ec8=sessions[_0x1e4669(0x227)](_0x10d4fc=>_0x10d4fc['id']===_0x188377['id']);if(_0x106ec8!==-0x1)sessions[_0x106ec8]=_0x392892;_0x4369f3[_0x1e4669(0x162)](_0x392892[_0x1e4669(0x237)]);}else{if(_0x409543===_0x1e4669(0x1d4)){const _0x34eca1=_0x188377[_0x1e4669(0x237)];sessions[_0x1e4669(0x1a2)]((_0x265ab1,_0x115835)=>{const _0xfa27fe=_0x1e4669;_0x265ab1[_0xfa27fe(0x26c)]===_0x14039a&&_0x265ab1['dateStr']>=_0x34eca1&&(sessions[_0x115835]={...sessions[_0x115835],'start':_0x188377[_0xfa27fe(0x22d)],'end':_0x188377[_0xfa27fe(0x16b)],'note':_0x188377[_0xfa27fe(0x19a)],'client':_0x188377['client'],'clientId':_0x188377[_0xfa27fe(0x126)]},_0x4369f3[_0xfa27fe(0x162)](_0x265ab1['dateStr']));});}}afterSaveAction(_0x4369f3);}function tryDeleteSession(){const _0x239f53=a2_0x4c7610,_0x2ba2a7=sessions[_0x239f53(0x255)](_0x297556=>_0x297556['id']===editingId);if(!_0x2ba2a7)return;_0x2ba2a7['seriesId']?openActionSheet(_0x239f53(0x1a0)):commitDelete(_0x239f53(0x26f),_0x2ba2a7);}function commitDelete(_0x5b8dee,_0x109709){const _0x4214c7=a2_0x4c7610;lastUserActionTime=Date[_0x4214c7(0x282)](),NotificationManager['send'](_0x4214c7(0x24f),_0x109709);const _0x22e312=[];if(_0x5b8dee==='single')sessions=sessions['filter'](_0x277313=>_0x277313['id']!==_0x109709['id']),_0x22e312['push'](_0x109709[_0x4214c7(0x237)]);else{if(_0x5b8dee===_0x4214c7(0x1d4)){const _0x32f0f1=_0x109709['dateStr'],_0x20e84c=_0x109709['seriesId'];sessions[_0x4214c7(0x1a2)](_0x134ba1=>{const _0x42f014=_0x4214c7;_0x134ba1[_0x42f014(0x26c)]===_0x20e84c&&_0x134ba1[_0x42f014(0x237)]>=_0x32f0f1&&_0x22e312[_0x42f014(0x162)](_0x134ba1[_0x42f014(0x237)]);}),sessions=sessions[_0x4214c7(0x132)](_0x2b704d=>!(_0x2b704d[_0x4214c7(0x26c)]===_0x20e84c&&_0x2b704d[_0x4214c7(0x237)]>=_0x32f0f1));}}afterSaveAction(_0x22e312);}function afterSaveAction(_0x5c68a7){const _0x4621ca=a2_0x4c7610;DataManager[_0x4621ca(0x1d0)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x4621ca(0x1e8)](_0x5c68a7)[_0x4621ca(0x267)](()=>console[_0x4621ca(0x202)]('Batch\x20Sync\x20OK'))[_0x4621ca(0x262)](_0x3a6224=>showToast(_0x4621ca(0x15c),![]));}const NotificationManager={'formatDate'(_0x48ffb2){const _0x355db4=a2_0x4c7610,_0x192fbb=new Date(_0x48ffb2),_0x3e3c33={'weekday':_0x355db4(0x120),'day':_0x355db4(0x14b),'month':_0x355db4(0x120)};let _0x95db64=_0x192fbb['toLocaleDateString'](_0x355db4(0x17f),_0x3e3c33);return _0x95db64['charAt'](0x0)[_0x355db4(0x148)]()+_0x95db64['slice'](0x1);},'getText'(_0x3682bc,_0x5ac347){const _0x2d6b59=a2_0x4c7610,_0x615aed=this[_0x2d6b59(0x261)](_0x5ac347[_0x2d6b59(0x237)]);switch(_0x3682bc){case _0x2d6b59(0x274):return _0x2d6b59(0x1e5)+(_0x2d6b59(0x116)+_0x615aed+'\x0a')+('<b>⏰\x20Время:</b>\x20'+_0x5ac347[_0x2d6b59(0x22d)]+'\x20—\x20'+_0x5ac347[_0x2d6b59(0x16b)]+'\x0a\x0a')+_0x2d6b59(0x211);case _0x2d6b59(0x1de):return _0x2d6b59(0x12f)+'Ваша\x20тренировка\x20перенесена:\x0a\x0a'+(_0x2d6b59(0x1d2)+_0x5ac347[_0x2d6b59(0x22d)]+_0x2d6b59(0x1ef)+_0x5ac347['end']+_0x2d6b59(0x1aa))+(_0x2d6b59(0x116)+_0x615aed);case _0x2d6b59(0x24f):return _0x2d6b59(0x200)+(_0x2d6b59(0x221)+_0x615aed+'\x20('+_0x5ac347[_0x2d6b59(0x22d)]+')</b>\x20была\x20удалена\x20из\x20расписания.');case _0x2d6b59(0x18f):return _0x2d6b59(0x145)+_0x2d6b59(0x183)+_0x2d6b59(0x1b4);default:return'';}},async 'send'(_0x5be459,_0x3b899f){const _0x4d1bcf=a2_0x4c7610;console['log'](_0x4d1bcf(0x181),_0x5be459,_0x3b899f);if(!_0x3b899f){console[_0x4d1bcf(0x14d)]('[Notify]\x20Error:\x20sessionData\x20is\x20null');return;}const _0x52f196=String(_0x3b899f['clientId']);console[_0x4d1bcf(0x202)]('[Notify]\x20Detected\x20Client\x20ID:',_0x52f196);if(!_0x3b899f['clientId']||_0x52f196===_0x4d1bcf(0x251)||_0x52f196===_0x4d1bcf(0x180)){console['error']('[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!');if(_0x3b899f[_0x4d1bcf(0x10f)]){const _0x4f9b3d=clients[_0x4d1bcf(0x255)](_0x560108=>_0x560108[_0x4d1bcf(0x151)]===_0x3b899f[_0x4d1bcf(0x10f)]);if(_0x4f9b3d)return console['log']('[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:',_0x4f9b3d['id']),this[_0x4d1bcf(0x1ea)](_0x5be459,{..._0x3b899f,'clientId':_0x4f9b3d['id']});}return;}if(_0x52f196['length']<0x5){console[_0x4d1bcf(0x1d8)](_0x4d1bcf(0x24c),_0x52f196);return;}const _0x53c2d8=this['getText'](_0x5be459,_0x3b899f);if(!_0x53c2d8){console[_0x4d1bcf(0x14d)](_0x4d1bcf(0x155));return;}console['log']('[Notify]\x20Sending\x20to\x20GAS\x20for\x20'+_0x52f196+_0x4d1bcf(0x1ad)),DataManager['fetchFromServer']('send_notification',{'chatId':_0x52f196,'text':_0x53c2d8})['then'](_0x4a4e96=>console[_0x4d1bcf(0x202)]('[Notify]\x20Server\x20Response:',_0x4a4e96))['catch'](_0x468baa=>console['error'](_0x4d1bcf(0x167),_0x468baa));}};function getLocalDateStr(_0x52bd03){const _0x5b36ba=a2_0x4c7610,_0x5c7385=_0x52bd03[_0x5b36ba(0x14f)](),_0x3c7338=String(_0x52bd03[_0x5b36ba(0x187)]()+0x1)['padStart'](0x2,'0'),_0x38a98a=String(_0x52bd03[_0x5b36ba(0x134)]())[_0x5b36ba(0x15a)](0x2,'0');return _0x5c7385+'-'+_0x3c7338+'-'+_0x38a98a;}function getDateStr(_0x5523a8){const _0x53b02a=a2_0x4c7610,_0x5754ac=new Date();return _0x5754ac[_0x53b02a(0x281)](_0x5754ac['getDate']()+_0x5523a8),getLocalDateStr(_0x5754ac);}function getStartOfWeek(_0x3e70b2){const _0x2a9c50=a2_0x4c7610,_0x3d2581=new Date(_0x3e70b2),_0x2e4220=_0x3d2581[_0x2a9c50(0x1f6)](),_0x5bc31f=_0x3d2581['getDate']()-_0x2e4220+(_0x2e4220===0x0?-0x6:0x1);return _0x3d2581[_0x2a9c50(0x281)](_0x5bc31f),_0x3d2581[_0x2a9c50(0x25b)](0x0,0x0,0x0,0x0),_0x3d2581;}function hexToRgba(_0x5eea83,_0x262a71){const _0x12a89a=a2_0x4c7610;if(!_0x5eea83)return'rgba(100,100,100,0.5)';let _0x48d526=0x0,_0x4a4939=0x0,_0x12c64d=0x0;if(_0x5eea83['length']===0x4)_0x48d526='0x'+_0x5eea83[0x1]+_0x5eea83[0x1],_0x4a4939='0x'+_0x5eea83[0x2]+_0x5eea83[0x2],_0x12c64d='0x'+_0x5eea83[0x3]+_0x5eea83[0x3];else _0x5eea83[_0x12a89a(0x1c6)]===0x7&&(_0x48d526='0x'+_0x5eea83[0x1]+_0x5eea83[0x2],_0x4a4939='0x'+_0x5eea83[0x3]+_0x5eea83[0x4],_0x12c64d='0x'+_0x5eea83[0x5]+_0x5eea83[0x6]);return _0x12a89a(0x1d3)+ +_0x48d526+',\x20'+ +_0x4a4939+',\x20'+ +_0x12c64d+',\x20'+_0x262a71+')';}function renderTimeColumn(){const _0x52cb29=a2_0x4c7610,_0x41d996=document['getElementById'](_0x52cb29(0x1f8)),_0x3639fe=document[_0x52cb29(0x1df)](_0x52cb29(0x161));_0x41d996[_0x52cb29(0x25c)]='',_0x41d996[_0x52cb29(0x1f0)](_0x3639fe);for(let _0x4a15ed=0x0;_0x4a15ed<0x18;_0x4a15ed++){const _0x4bd5f0=document['createElement'](_0x52cb29(0x144));_0x4bd5f0[_0x52cb29(0x1b9)]='time-label';if(_0x4a15ed>0x0)_0x4bd5f0[_0x52cb29(0x25c)]='<span>'+String(_0x4a15ed)[_0x52cb29(0x15a)](0x2,'0')+_0x52cb29(0x135);_0x41d996[_0x52cb29(0x1f0)](_0x4bd5f0);}}function a2_0x725a(_0x5456d5,_0x5a9c97){_0x5456d5=_0x5456d5-0x109;const _0x2a5d30=a2_0x4815();let _0x7c3572=_0x2a5d30[_0x5456d5];return _0x7c3572;}function renderDayRange(_0x4a1fba,_0x3d09ea){const _0xdc1f37=a2_0x4c7610,_0x15f40e=document['getElementById']('daysHeaderTrack'),_0x5af57d=document[_0xdc1f37(0x1df)](_0xdc1f37(0x1ce)),_0x37c475=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x197f79=new Date();_0x197f79[_0xdc1f37(0x25b)](0x0,0x0,0x0,0x0);const _0x47e02f=getLocalDateStr(new Date());for(let _0xe8b9f7=_0x4a1fba;_0xe8b9f7<=_0x3d09ea;_0xe8b9f7++){const _0x1da529=new Date(_0x197f79);_0x1da529[_0xdc1f37(0x281)](_0x1da529[_0xdc1f37(0x134)]()+_0xe8b9f7);const _0x268e7f=getLocalDateStr(_0x1da529);let _0x57d098=_0x1da529[_0xdc1f37(0x1f6)]()-0x1;if(_0x57d098===-0x1)_0x57d098=0x6;const _0x2bacbd=_0x268e7f===_0x47e02f,_0xa308d4=document[_0xdc1f37(0x1eb)](_0xdc1f37(0x144));_0xa308d4[_0xdc1f37(0x1b9)]='day-col-header\x20'+(_0x2bacbd?_0xdc1f37(0x115):''),_0xa308d4['id']=_0xdc1f37(0x1da)+_0x268e7f,_0xa308d4[_0xdc1f37(0x158)](_0xdc1f37(0x1ed),_0x268e7f),_0xa308d4[_0xdc1f37(0x25c)]=_0xdc1f37(0x15e)+_0x37c475[_0x57d098]+_0xdc1f37(0x207)+_0x1da529[_0xdc1f37(0x134)]()+_0xdc1f37(0x1a9)+_0x268e7f+_0xdc1f37(0x12e),_0xa308d4[_0xdc1f37(0x24e)]=()=>openDayOptions(_0x268e7f,_0x37c475[_0x57d098]+'\x20'+_0x1da529[_0xdc1f37(0x134)]()),_0x15f40e['appendChild'](_0xa308d4);const _0x422fc3=document[_0xdc1f37(0x1eb)](_0xdc1f37(0x144));_0x422fc3[_0xdc1f37(0x1b9)]=_0xdc1f37(0x127)+(_0x2bacbd?_0xdc1f37(0x115):''),_0x422fc3[_0xdc1f37(0x158)]('data-date',_0x268e7f),_0x422fc3[_0xdc1f37(0x158)](_0xdc1f37(0x1f1),_0x57d098),renderEventsForColumn(_0x422fc3,_0x268e7f,_0x57d098),attachLongPressHandler(_0x422fc3,_0x1da529),_0x5af57d[_0xdc1f37(0x1f0)](_0x422fc3),updateDayStats(_0x268e7f);}}function reRenderBlocks(){const _0x8ea673=a2_0x4c7610;document[_0x8ea673(0x182)](_0x8ea673(0x159))[_0x8ea673(0x1a2)](_0x33de78=>{const _0xa26e69=_0x8ea673;_0x33de78[_0xa26e69(0x182)](_0xa26e69(0x22a))[_0xa26e69(0x1a2)](_0x3ee28e=>_0x3ee28e[_0xa26e69(0x245)]());const _0x457ecc=_0x33de78[_0xa26e69(0x16d)]('data-date'),_0x5551c2=parseInt(_0x33de78['getAttribute'](_0xa26e69(0x1f1))),_0x290e97=Math['round'](_0x33de78[_0xa26e69(0x278)]);(availabilityPattern[_0x5551c2]||[])[_0xa26e69(0x1a2)](_0x5a98c6=>{const _0x3f7ea1=_0xa26e69,_0x43b902=document[_0x3f7ea1(0x1eb)](_0x3f7ea1(0x144));_0x43b902[_0x3f7ea1(0x1b9)]=_0x3f7ea1(0x13a);const _0x2c08f9=_0x5a98c6*GRID_H;_0x43b902['style'][_0x3f7ea1(0x21e)]=_0x2c08f9+'px',_0x43b902[_0x3f7ea1(0x11d)][_0x3f7ea1(0x273)]='-'+_0x290e97+_0x3f7ea1(0x194)+_0x2c08f9+'px',_0x33de78[_0x3f7ea1(0x1f0)](_0x43b902);});if(specialRanges&&specialRanges['length']>0x0){const _0x2b5d19=new Date(_0x457ecc+_0xa26e69(0x14a))['getTime'](),_0x19defb=new Date(_0x457ecc+_0xa26e69(0x1a7))[_0xa26e69(0x199)]();specialRanges[_0xa26e69(0x1a2)](_0x4b5062=>{const _0x28674d=_0xa26e69,_0x337708=new Date(_0x4b5062[_0x28674d(0x22d)])[_0x28674d(0x199)](),_0x31f490=new Date(_0x4b5062[_0x28674d(0x16b)])[_0x28674d(0x199)](),_0x49fd94=Math[_0x28674d(0x136)](_0x2b5d19,_0x337708),_0x10aeb1=Math['min'](_0x19defb,_0x31f490);if(_0x49fd94<_0x10aeb1){if(_0x49fd94<=_0x2b5d19&&_0x10aeb1>=_0x19defb-0xea60){if(!_0x33de78['querySelector'](_0x28674d(0x1f3))){const _0x4ea120=document[_0x28674d(0x1eb)](_0x28674d(0x144));_0x4ea120[_0x28674d(0x1b9)]=_0x28674d(0x12c),_0x4ea120[_0x28674d(0x11d)]['backgroundPosition']='-'+_0x290e97+_0x28674d(0x1b0),_0x33de78[_0x28674d(0x1f0)](_0x4ea120);}}else{const _0x1d041f=(_0x49fd94-_0x2b5d19)/0x36ee80*GRID_H,_0x232cf5=(_0x10aeb1-_0x49fd94)/0x36ee80*GRID_H,_0x4b0e4b=document[_0x28674d(0x1eb)](_0x28674d(0x144));_0x4b0e4b[_0x28674d(0x1b9)]=_0x28674d(0x130),_0x4b0e4b[_0x28674d(0x11d)][_0x28674d(0x21e)]=_0x1d041f+'px',_0x4b0e4b[_0x28674d(0x11d)][_0x28674d(0x113)]=_0x232cf5+'px',_0x4b0e4b[_0x28674d(0x11d)][_0x28674d(0x273)]='-'+_0x290e97+_0x28674d(0x194)+_0x1d041f+'px',_0x33de78['appendChild'](_0x4b0e4b);}}});}if(dateExceptions[_0x457ecc]===_0xa26e69(0x26e)){if(!_0x33de78[_0xa26e69(0x239)]('.day-off-overlay')){const _0x41a37c=document['createElement'](_0xa26e69(0x144));_0x41a37c[_0xa26e69(0x1b9)]=_0xa26e69(0x12c),_0x41a37c[_0xa26e69(0x11d)][_0xa26e69(0x273)]='-'+_0x290e97+_0xa26e69(0x1b0),_0x33de78[_0xa26e69(0x1f0)](_0x41a37c);}}renderEventsForColumn(_0x33de78,_0x457ecc,_0x5551c2),updateDayStats(_0x457ecc);});}function updateAllDayStats(){const _0x30e591=a2_0x4c7610;document[_0x30e591(0x182)]('.day-col-header')[_0x30e591(0x1a2)](_0x13445c=>{const _0x457188=_0x30e591;updateDayStats(_0x13445c[_0x457188(0x16d)](_0x457188(0x1ed)));});}function updateDayStats(_0x290b68){const _0x96563d=a2_0x4c7610,_0x1c234c=document['getElementById']('stat-'+_0x290b68);if(!_0x1c234c)return;const _0x587257=new Date(_0x290b68);let _0x21206a=_0x587257[_0x96563d(0x1f6)]()-0x1;if(_0x21206a===-0x1)_0x21206a=0x6;if(dateExceptions[_0x290b68]===_0x96563d(0x26e)){_0x1c234c[_0x96563d(0x11d)][_0x96563d(0x265)]=_0x96563d(0x1d6);return;}const _0x3a9e09=availabilityPattern[_0x21206a]||[],_0x311ed3=0x18-_0x3a9e09['length'],_0x1913b8=_0x311ed3*0x3c,_0x38af86=sessions[_0x96563d(0x132)](_0x4aa04f=>_0x4aa04f[_0x96563d(0x237)]===_0x290b68&&_0x4aa04f[_0x96563d(0x264)]!==_0x96563d(0x16f));if(_0x38af86[_0x96563d(0x1c6)]===0x0){_0x1c234c['style']['display']='none';return;}let _0x15b311=_0x38af86[_0x96563d(0x1a4)](_0x117eab=>{const _0x1b6f29=_0x96563d,[_0x262054,_0x46f703]=_0x117eab[_0x1b6f29(0x22d)][_0x1b6f29(0x275)](':')[_0x1b6f29(0x1a4)](Number),[_0x3f55da,_0x22b837]=_0x117eab['end'][_0x1b6f29(0x275)](':')[_0x1b6f29(0x1a4)](Number);return[_0x262054*0x3c+_0x46f703,_0x3f55da*0x3c+_0x22b837];});_0x15b311[_0x96563d(0x1e3)]((_0x11898b,_0x3f0bf0)=>_0x11898b[0x0]-_0x3f0bf0[0x0]);let _0x3b6b08=[];if(_0x15b311['length']>0x0){let _0x37ddbf=_0x15b311[0x0];for(let _0x3f6c94=0x1;_0x3f6c94<_0x15b311[_0x96563d(0x1c6)];_0x3f6c94++){_0x15b311[_0x3f6c94][0x0]<_0x37ddbf[0x1]?_0x37ddbf[0x1]=Math['max'](_0x37ddbf[0x1],_0x15b311[_0x3f6c94][0x1]):(_0x3b6b08[_0x96563d(0x162)](_0x37ddbf),_0x37ddbf=_0x15b311[_0x3f6c94]);}_0x3b6b08[_0x96563d(0x162)](_0x37ddbf);}let _0x146162=0x0;_0x3b6b08[_0x96563d(0x1a2)](_0x344a22=>_0x146162+=_0x344a22[0x1]-_0x344a22[0x0]),_0x1c234c['style'][_0x96563d(0x265)]='flex';const _0x1c1ba0=_0x1c234c[_0x96563d(0x239)](_0x96563d(0x1ec));if(_0x1913b8===0x0){_0x1c1ba0[_0x96563d(0x11d)][_0x96563d(0x15d)]=_0x96563d(0x263),_0x1c1ba0[_0x96563d(0x11d)][_0x96563d(0x250)]=_0x96563d(0x1bf);return;}const _0x4b548b=_0x146162/_0x1913b8*0x64;console[_0x96563d(0x202)]('['+_0x290b68+_0x96563d(0x1a5)+_0x311ed3+'ч,\x20Занято:\x20'+_0x146162+'мин,\x20Загрузка:\x20'+_0x4b548b[_0x96563d(0x1af)](0x1)+'%'),_0x4b548b>0x64?(_0x1c1ba0[_0x96563d(0x11d)][_0x96563d(0x15d)]='100%',_0x1c1ba0[_0x96563d(0x11d)]['background']=_0x96563d(0x1bf)):(_0x1c1ba0['style'][_0x96563d(0x15d)]=_0x4b548b+'%',_0x1c1ba0[_0x96563d(0x11d)][_0x96563d(0x250)]=_0x96563d(0x1e2));}function renderEventsForColumn(_0x331ca5,_0x3b23d3,_0x43fd12){const _0x12b33a=a2_0x4c7610,_0x4a485c=sessions[_0x12b33a(0x132)](_0x56420d=>_0x56420d['dateStr']===_0x3b23d3),_0x27ab1c=_0x4a485c[_0x12b33a(0x1a4)](_0x16d7db=>{const _0x1a5f77=_0x12b33a,[_0x3f82be,_0x737630]=_0x16d7db['start'][_0x1a5f77(0x275)](':')['map'](Number),[_0x5f22a6,_0x1c6ed0]=_0x16d7db[_0x1a5f77(0x16b)][_0x1a5f77(0x275)](':')['map'](Number);return{'data':_0x16d7db,'start':_0x3f82be*0x3c+_0x737630,'end':_0x5f22a6*0x3c+_0x1c6ed0,'colIndex':0x0};});_0x27ab1c['sort']((_0x4bd552,_0x328bb3)=>{const _0x7b01b=_0x12b33a;if(_0x4bd552['start']!==_0x328bb3[_0x7b01b(0x22d)])return _0x4bd552[_0x7b01b(0x22d)]-_0x328bb3[_0x7b01b(0x22d)];return _0x328bb3['end']-_0x328bb3[_0x7b01b(0x22d)]-(_0x4bd552[_0x7b01b(0x16b)]-_0x4bd552[_0x7b01b(0x22d)]);});const _0x10dd30=[];_0x27ab1c[_0x12b33a(0x1a2)](_0x2a231f=>{const _0x2fa258=_0x12b33a;let _0x537bb2=![];for(let _0x3c85a8=0x0;_0x3c85a8<_0x10dd30[_0x2fa258(0x1c6)];_0x3c85a8++){const _0x48c8a5=_0x10dd30[_0x3c85a8],_0x50230b=_0x48c8a5[_0x48c8a5[_0x2fa258(0x1c6)]-0x1];if(_0x2a231f[_0x2fa258(0x22d)]>=_0x50230b[_0x2fa258(0x16b)]){_0x48c8a5[_0x2fa258(0x162)](_0x2a231f),_0x2a231f['colIndex']=_0x3c85a8,_0x537bb2=!![];break;}}!_0x537bb2&&(_0x10dd30['push']([_0x2a231f]),_0x2a231f[_0x2fa258(0x206)]=_0x10dd30[_0x2fa258(0x1c6)]-0x1);}),_0x27ab1c[_0x12b33a(0x1a2)](_0x24d182=>{const _0x3019b5=_0x12b33a;let _0x48f375=0x0;_0x27ab1c[_0x3019b5(0x1a2)](_0x2b2f48=>{const _0x1403d1=_0x3019b5;if(Math[_0x1403d1(0x136)](_0x24d182[_0x1403d1(0x22d)],_0x2b2f48[_0x1403d1(0x22d)])<Math[_0x1403d1(0x118)](_0x24d182[_0x1403d1(0x16b)],_0x2b2f48[_0x1403d1(0x16b)])){if(_0x2b2f48[_0x1403d1(0x206)]>_0x48f375)_0x48f375=_0x2b2f48['colIndex'];}});const _0x69da6b=_0x48f375+0x1,_0x17569d=0x64/_0x69da6b,_0xf7a967=_0x24d182[_0x3019b5(0x206)]*_0x17569d,_0x139cb3=createEventEl(_0x24d182[_0x3019b5(0x218)]);_0x139cb3[_0x3019b5(0x11d)][_0x3019b5(0x15d)]=_0x3019b5(0x249)+_0x17569d+_0x3019b5(0x1a3),_0x139cb3[_0x3019b5(0x11d)]['left']=_0x3019b5(0x249)+_0xf7a967+'%\x20+\x202px)',_0x139cb3[_0x3019b5(0x11d)][_0x3019b5(0x139)]=0xa+_0x24d182[_0x3019b5(0x206)],_0x17569d<0x55&&_0x139cb3[_0x3019b5(0x201)][_0x3019b5(0x138)](_0x3019b5(0x175)),_0x331ca5[_0x3019b5(0x1f0)](_0x139cb3);});}function createEventEl(_0x394370){const _0x1e864c=a2_0x4c7610,[_0x15bf5f,_0x20274f]=_0x394370[_0x1e864c(0x22d)][_0x1e864c(0x275)](':')['map'](Number),[_0x4718c6,_0x5bef27]=_0x394370['end']['split'](':')[_0x1e864c(0x1a4)](Number),_0xc9ae48=(_0x15bf5f*0x3c+_0x20274f)/0x3c*GRID_H,_0x9ca396=(_0x4718c6*0x3c+_0x5bef27-(_0x15bf5f*0x3c+_0x20274f))/0x3c*GRID_H,_0x4b2f57=document[_0x1e864c(0x1eb)](_0x1e864c(0x144)),_0x5b47f0=_0x394370[_0x1e864c(0x264)]===_0x1e864c(0x1c8)?_0x1e864c(0x1b1):'';_0x4b2f57[_0x1e864c(0x1b9)]='event-card'+_0x5b47f0,_0x4b2f57['style'][_0x1e864c(0x21e)]=_0xc9ae48+'px',_0x4b2f57['style'][_0x1e864c(0x113)]=Math[_0x1e864c(0x136)](_0x9ca396,0x14)+'px';const _0x278b37=clients['find'](_0x27fba9=>_0x394370[_0x1e864c(0x126)]&&String(_0x27fba9['id'])===String(_0x394370['clientId'])||_0x27fba9[_0x1e864c(0x151)]===_0x394370['client']),_0x5c5d56=_0x278b37?_0x278b37[_0x1e864c(0x253)]:_0x1e864c(0x165);_0x4b2f57[_0x1e864c(0x11d)]['borderLeftColor']=_0x5c5d56,_0x4b2f57[_0x1e864c(0x11d)][_0x1e864c(0x259)]=hexToRgba(_0x5c5d56,0.85);let _0x43e4eb=_0x1e864c(0x22e)+_0x394370[_0x1e864c(0x10f)]+_0x1e864c(0x184)+_0x394370['start']+_0x1e864c(0x119)+_0x394370[_0x1e864c(0x16b)]+_0x1e864c(0x1cb);return _0x394370[_0x1e864c(0x26c)]&&(_0x43e4eb+=_0x1e864c(0x189)),_0x394370[_0x1e864c(0x264)]===_0x1e864c(0x1c8)&&(_0x43e4eb+=_0x1e864c(0x174)),_0x4b2f57['innerHTML']=_0x43e4eb,_0x4b2f57['onclick']=_0x206678=>{_0x206678['stopPropagation'](),openEdit(_0x394370);},_0x4b2f57;}function attachLongPressHandler(_0x4f1722,_0x2457e4){const _0x310454=a2_0x4c7610;let _0xdf212b=0x0,_0x760703=null;const _0x10b750=_0x35f2dc=>{const _0x4b0478=a2_0x725a;if(_0x35f2dc[_0x4b0478(0x1a8)][_0x4b0478(0x173)](_0x4b0478(0x10d)))return;isScrolling=![],_0xdf212b=_0x35f2dc['touches']?_0x35f2dc['touches'][0x0][_0x4b0478(0x1c0)]:_0x35f2dc['clientY'],_0x760703=setTimeout(()=>{const _0x198b8a=_0x4b0478;if(!isScrolling){navigator[_0x198b8a(0x1ee)]?.(0x32);const _0x252f85=_0x4f1722[_0x198b8a(0x24b)](),_0x35fccd=Math[_0x198b8a(0x14e)]((_0xdf212b-_0x252f85['top'])/GRID_H);_0x2457e4['setHours'](_0x35fccd,0x0),openAddSession(_0x2457e4);}},0x1f4);},_0x2965b2=()=>{isScrolling=!![],clearTimeout(_0x760703);},_0x57c5d4=()=>{clearTimeout(_0x760703);};_0x4f1722[_0x310454(0x277)]('touchstart',_0x10b750,{'passive':!![]}),_0x4f1722[_0x310454(0x277)](_0x310454(0x110),_0x2965b2,{'passive':!![]}),_0x4f1722[_0x310454(0x277)]('touchend',_0x57c5d4),_0x4f1722[_0x310454(0x277)]('mousedown',_0x10b750),_0x4f1722[_0x310454(0x277)]('mousemove',_0x2965b2),_0x4f1722[_0x310454(0x277)](_0x310454(0x1fd),_0x57c5d4);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x436dcf=a2_0x4c7610,_0x10c15b=document[_0x436dcf(0x1df)]('matrixViewport'),_0x28e033=_0x10c15b[_0x436dcf(0x10a)],_0x4cae30=_0x10c15b[_0x436dcf(0x195)],_0x25efc9=_0x10c15b[_0x436dcf(0x21f)];if(_0x4cae30-(_0x28e033+_0x25efc9)<0x12c){const _0x34e73c=endOffset;endOffset+=0xe,renderDayRange(_0x34e73c+0x1,endOffset),reRenderBlocks();}if(_0x28e033<0x12c){const _0x4cbd92=startOffset;startOffset-=0xe,prependDays(startOffset,_0x4cbd92-0x1),_0x10c15b['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x4262fd,_0x5c3d81){const _0x5079e8=a2_0x4c7610,_0x183c89=document[_0x5079e8(0x1df)]('daysHeaderTrack'),_0x5f5182=document['getElementById'](_0x5079e8(0x1ce)),_0x473360=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x41b383=new Date();_0x41b383[_0x5079e8(0x25b)](0x0,0x0,0x0,0x0);const _0x496a2d=getLocalDateStr(new Date()),_0x10588b=document[_0x5079e8(0x246)](),_0x5cd918=document[_0x5079e8(0x246)]();for(let _0x189a63=_0x4262fd;_0x189a63<=_0x5c3d81;_0x189a63++){const _0x3cff59=new Date(_0x41b383);_0x3cff59[_0x5079e8(0x281)](_0x3cff59['getDate']()+_0x189a63);const _0x2d3613=getLocalDateStr(_0x3cff59);let _0x275194=_0x3cff59[_0x5079e8(0x1f6)]()-0x1;if(_0x275194===-0x1)_0x275194=0x6;const _0x2c7a73=_0x2d3613===_0x496a2d,_0x395dd2=document[_0x5079e8(0x1eb)](_0x5079e8(0x144));_0x395dd2[_0x5079e8(0x1b9)]='day-col-header\x20'+(_0x2c7a73?'today':''),_0x395dd2['id']=_0x5079e8(0x1da)+_0x2d3613,_0x395dd2['setAttribute'](_0x5079e8(0x1ed),_0x2d3613),_0x395dd2[_0x5079e8(0x25c)]=_0x5079e8(0x15e)+_0x473360[_0x275194]+_0x5079e8(0x207)+_0x3cff59['getDate']()+_0x5079e8(0x1a9)+_0x2d3613+_0x5079e8(0x12e),_0x395dd2[_0x5079e8(0x24e)]=()=>openDayOptions(_0x2d3613,_0x473360[_0x275194]+'\x20'+_0x3cff59['getDate']()),_0x10588b[_0x5079e8(0x1f0)](_0x395dd2);const _0x4954b3=document['createElement'](_0x5079e8(0x144));_0x4954b3['className']=_0x5079e8(0x127)+(_0x2c7a73?_0x5079e8(0x115):''),_0x4954b3['setAttribute'](_0x5079e8(0x1ed),_0x2d3613),_0x4954b3['setAttribute']('data-day-idx',_0x275194),renderEventsForColumn(_0x4954b3,_0x2d3613,_0x275194),attachLongPressHandler(_0x4954b3,_0x3cff59),_0x5cd918[_0x5079e8(0x1f0)](_0x4954b3),updateDayStats(_0x2d3613);}_0x183c89[_0x5079e8(0x190)](_0x10588b,_0x183c89[_0x5079e8(0x1b8)]),_0x5f5182[_0x5079e8(0x190)](_0x5cd918,_0x5f5182[_0x5079e8(0x239)](_0x5079e8(0x235)));}function validateAppointment(_0x32dbd8,_0x252c2c,_0x579ac9,_0x3d53b7,_0x28a724){const _0xd7084e=a2_0x4c7610,[_0xaa5886,_0x370cb9]=_0x252c2c[_0xd7084e(0x275)](':')[_0xd7084e(0x1a4)](Number),[_0x160447,_0x4a788d]=_0x579ac9[_0xd7084e(0x275)](':')[_0xd7084e(0x1a4)](Number),_0x3fb1f3=_0xaa5886*0x3c+_0x370cb9,_0x182c13=_0x160447*0x3c+_0x4a788d,_0xea8045=String(_0x28a724);let _0x452a49=![],_0x21d346='';for(let _0x3abb9c of sessions){if(_0x3abb9c['dateStr']!==_0x32dbd8)continue;if(_0x3abb9c[_0xd7084e(0x264)]==='cancelled')continue;if(_0x3d53b7&&String(_0x3abb9c['id'])===String(_0x3d53b7))continue;const [_0x21b8cf,_0x3514cf]=_0x3abb9c[_0xd7084e(0x22d)][_0xd7084e(0x275)](':')[_0xd7084e(0x1a4)](Number),[_0x3440e4,_0x3d88fc]=_0x3abb9c[_0xd7084e(0x16b)][_0xd7084e(0x275)](':')[_0xd7084e(0x1a4)](Number),_0x538b43=_0x21b8cf*0x3c+_0x3514cf,_0x1687b4=_0x3440e4*0x3c+_0x3d88fc;if(Math[_0xd7084e(0x136)](_0x3fb1f3,_0x538b43)<Math[_0xd7084e(0x118)](_0x182c13,_0x1687b4)){if(_0x3abb9c[_0xd7084e(0x126)]&&String(_0x3abb9c[_0xd7084e(0x126)])===_0xea8045)return{'valid':![],'msg':_0xd7084e(0x142)+_0x3abb9c[_0xd7084e(0x10f)]+_0xd7084e(0x24a)};_0x452a49=!![],_0x21d346=_0x3abb9c[_0xd7084e(0x10f)];}}if(_0x452a49)return{'valid':!![],'warning':_0xd7084e(0x20f)+_0x21d346};return{'valid':!![]};}function updateDateDisplay(){const _0x1d2cc2=a2_0x4c7610,_0x34be67=document['getElementById'](_0x1d2cc2(0x22f))[_0x1d2cc2(0x10b)],_0x2834ec=document[_0x1d2cc2(0x1df)](_0x1d2cc2(0x272));if(!_0x34be67){_0x2834ec[_0x1d2cc2(0x27f)]='';return;}const [_0x4b9b6f,_0x27e343,_0xd9bc86]=_0x34be67[_0x1d2cc2(0x275)]('-')[_0x1d2cc2(0x1a4)](Number),_0x406d92=new Date(_0x4b9b6f,_0x27e343-0x1,_0xd9bc86),_0x1d5504={'weekday':'long','day':_0x1d2cc2(0x14b),'month':_0x1d2cc2(0x120),'year':_0x1d2cc2(0x14b)};let _0x13f91c=_0x406d92[_0x1d2cc2(0x17d)](_0x1d2cc2(0x17f),_0x1d5504);_0x13f91c=_0x13f91c[_0x1d2cc2(0x19c)](0x0)[_0x1d2cc2(0x148)]()+_0x13f91c[_0x1d2cc2(0x27e)](0x1),_0x2834ec[_0x1d2cc2(0x27f)]=_0x13f91c;}function autoSetEndTime(){const _0x1ee87f=a2_0x4c7610,_0x3bc657=document[_0x1ee87f(0x1df)](_0x1ee87f(0x268))[_0x1ee87f(0x10b)];if(!_0x3bc657)return;const [_0x3a4ef4,_0x28529f]=_0x3bc657[_0x1ee87f(0x275)](':')[_0x1ee87f(0x1a4)](Number);let _0x4c416b=_0x3a4ef4+0x1;if(_0x4c416b>0x17)_0x4c416b=0x0;const _0x57bf06=String(_0x4c416b)[_0x1ee87f(0x15a)](0x2,'0')+':'+String(_0x28529f)['padStart'](0x2,'0');document['getElementById']('inpEnd')['value']=_0x57bf06;}function populateClientSelect(){const _0x339814=a2_0x4c7610,_0x266a7e=document[_0x339814(0x1df)](_0x339814(0x11f));_0x266a7e[_0x339814(0x25c)]='';if(clients[_0x339814(0x1c6)]===0x0){const _0xe93c59=document[_0x339814(0x1eb)]('option');_0xe93c59['text']=_0x339814(0x17a),_0x266a7e[_0x339814(0x1f0)](_0xe93c59);return;}clients[_0x339814(0x1a2)](_0x591a27=>{const _0x5d6eb3=_0x339814,_0x47f645=document[_0x5d6eb3(0x1eb)](_0x5d6eb3(0x196));_0x47f645[_0x5d6eb3(0x10b)]=_0x591a27[_0x5d6eb3(0x151)],_0x47f645[_0x5d6eb3(0x27f)]=_0x591a27[_0x5d6eb3(0x151)],_0x266a7e[_0x5d6eb3(0x1f0)](_0x47f645);});}function openActionSheet(_0x25db8c){const _0x209e19=a2_0x4c7610,_0x5e9d5f=document['getElementById']('actionSheet'),_0xdd2447=document[_0x209e19(0x1df)](_0x209e19(0x212)),_0x5c9dee=document['getElementById'](_0x209e19(0x22b)),_0x24ec80=document[_0x209e19(0x1df)]('asBtnOne'),_0x5a94a4=document[_0x209e19(0x1df)](_0x209e19(0x23d));_0xdd2447[_0x209e19(0x201)][_0x209e19(0x138)]('active'),_0x5e9d5f[_0x209e19(0x201)][_0x209e19(0x138)](_0x209e19(0x1ae));if(_0x25db8c==='save')_0x5c9dee[_0x209e19(0x27f)]=_0x209e19(0x157),_0x24ec80[_0x209e19(0x27f)]=_0x209e19(0x25e),_0x24ec80[_0x209e19(0x24e)]=()=>{const _0x5287d4=_0x209e19;closeActionSheet(),updateSeriesBatch(_0x5287d4(0x26f),tempSessionData);},_0x5a94a4[_0x209e19(0x27f)]=_0x209e19(0x117),_0x5a94a4['onclick']=()=>{closeActionSheet(),updateSeriesBatch('series',tempSessionData);};else _0x25db8c==='delete'&&(_0x5c9dee['textContent']='Удаление',_0x24ec80[_0x209e19(0x27f)]=_0x209e19(0x25e),_0x24ec80[_0x209e19(0x1b9)]=_0x209e19(0x25a),_0x24ec80[_0x209e19(0x24e)]=()=>{const _0x2e8055=_0x209e19;closeActionSheet(),commitDelete(_0x2e8055(0x26f),sessions[_0x2e8055(0x255)](_0x3195c0=>_0x3195c0['id']===editingId));},_0x5a94a4[_0x209e19(0x27f)]=_0x209e19(0x117),_0x5a94a4[_0x209e19(0x1b9)]=_0x209e19(0x1ca),_0x5a94a4['onclick']=()=>{const _0x264fbd=_0x209e19;closeActionSheet(),commitDelete(_0x264fbd(0x1d4),sessions[_0x264fbd(0x255)](_0x9843d3=>_0x9843d3['id']===editingId));});}function closeActionSheet(){const _0x460887=a2_0x4c7610;document[_0x460887(0x1df)](_0x460887(0x1fb))['classList'][_0x460887(0x245)]('open'),document[_0x460887(0x1df)](_0x460887(0x212))[_0x460887(0x201)]['remove']('active');}function openSettings(){const _0xf24bd9=a2_0x4c7610;openSheet(_0xf24bd9(0x192));}function saveCoachSettings(){const _0x3b6fc1=a2_0x4c7610,_0x1f6901=document[_0x3b6fc1(0x1df)]('settingCancelWindow')[_0x3b6fc1(0x10b)];localStorage[_0x3b6fc1(0x198)](_0x3b6fc1(0x163),_0x1f6901),console['log'](_0x3b6fc1(0x125),_0x1f6901),DataManager[_0x3b6fc1(0x247)]('save_settings',{'settings':{'cancel_window':_0x1f6901}})['catch'](_0x531383=>{const _0x3dbb55=_0x3b6fc1;console[_0x3dbb55(0x14d)]('Save\x20settings\x20error:',_0x531383),showToast(_0x3dbb55(0x284),![]);});}function loadCoachSettings(){const _0x432b31=a2_0x4c7610,_0x52f72a=localStorage[_0x432b31(0x16c)](_0x432b31(0x163));_0x52f72a&&(document[_0x432b31(0x1df)](_0x432b31(0x15f))['value']=_0x52f72a);}function openRangesSheet(){const _0x3171f2=a2_0x4c7610;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x3171f2(0x112));}function addRange(){const _0x1fdf29=a2_0x4c7610,_0x372c48=document[_0x1fdf29(0x1df)]('rangeStartDate')['value'],_0x6df518=document['getElementById']('rangeStartTime')[_0x1fdf29(0x10b)],_0x3d2324=document[_0x1fdf29(0x1df)](_0x1fdf29(0x18e))[_0x1fdf29(0x10b)],_0x4b90db=document[_0x1fdf29(0x1df)](_0x1fdf29(0x25d))[_0x1fdf29(0x10b)];if(!_0x372c48||!_0x6df518||!_0x3d2324||!_0x4b90db)return alert(_0x1fdf29(0x1fa));const _0x205a37=_0x372c48+'T'+_0x6df518,_0x1cbbd1=_0x3d2324+'T'+_0x4b90db;if(_0x205a37>=_0x1cbbd1)return alert(_0x1fdf29(0x283));specialRanges[_0x1fdf29(0x162)]({'start':_0x205a37,'end':_0x1cbbd1}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x1fdf29(0x1d0)](),DataManager['fetchFromServer']('save_settings',{'settings':{'ranges':specialRanges}});}function deleteRange(_0x58012f){const _0x12b64b=a2_0x4c7610;specialRanges[_0x12b64b(0x1f4)](_0x58012f,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x12b64b(0x1d0)](),DataManager[_0x12b64b(0x247)](_0x12b64b(0x1b5),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x593f3b=a2_0x4c7610;document[_0x593f3b(0x1df)](_0x593f3b(0x1c3))[_0x593f3b(0x10b)]='',document['getElementById']('rangeStartTime')['value']=_0x593f3b(0x1db),document[_0x593f3b(0x1df)]('rangeEndDate')[_0x593f3b(0x10b)]='',document[_0x593f3b(0x1df)](_0x593f3b(0x25d))[_0x593f3b(0x10b)]='23:59';}function renderRangesList(){const _0x542774=a2_0x4c7610,_0x33e2c1=document[_0x542774(0x1df)](_0x542774(0x19b));_0x33e2c1[_0x542774(0x25c)]='';if(!specialRanges[_0x542774(0x1c6)]){_0x33e2c1[_0x542774(0x25c)]=_0x542774(0x1d5);return;}specialRanges[_0x542774(0x1a2)]((_0x46938e,_0x569c9b)=>{const _0x3c8b5b=_0x542774,_0x3f3b04=document[_0x3c8b5b(0x1eb)](_0x3c8b5b(0x144));_0x3f3b04[_0x3c8b5b(0x1b9)]=_0x3c8b5b(0x241);const _0x27c965=_0x2cada4=>{const _0x41f311=_0x3c8b5b,_0xbe66a7=new Date(_0x2cada4);return _0xbe66a7['getDate']()+'.'+String(_0xbe66a7[_0x41f311(0x187)]()+0x1)[_0x41f311(0x15a)](0x2,'0')+'\x20'+String(_0xbe66a7[_0x41f311(0x131)]())[_0x41f311(0x15a)](0x2,'0')+':'+String(_0xbe66a7[_0x41f311(0x160)]())[_0x41f311(0x15a)](0x2,'0');};_0x3f3b04[_0x3c8b5b(0x25c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>'+_0x27c965(_0x46938e[_0x3c8b5b(0x22d)])+'\x20—\x20'+_0x27c965(_0x46938e[_0x3c8b5b(0x16b)])+_0x3c8b5b(0x13b)+_0x569c9b+')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>',_0x33e2c1['appendChild'](_0x3f3b04);});}function scrollToToday(){const _0x5e1ecd=a2_0x4c7610,_0x4879df=getLocalDateStr(new Date()),_0x2af10c=document[_0x5e1ecd(0x1df)](_0x5e1ecd(0x1da)+_0x4879df),_0x19b3f2=document[_0x5e1ecd(0x1df)](_0x5e1ecd(0x233));if(_0x2af10c&&_0x19b3f2){const _0x45822c=_0x19b3f2[_0x5e1ecd(0x21f)],_0x3f340b=_0x2af10c[_0x5e1ecd(0x278)],_0x1acfec=_0x2af10c[_0x5e1ecd(0x258)];_0x19b3f2['scrollLeft']=_0x3f340b-_0x45822c/0x2+_0x1acfec/0x2,_0x19b3f2[_0x5e1ecd(0x13e)]=0x9*GRID_H;}}function onScroll(){const _0x153bf5=a2_0x4c7610,_0x51968d=document['getElementById']('matrixViewport'),_0x192c27=document[_0x153bf5(0x182)](_0x153bf5(0x23f));for(let _0xb2fe0e of _0x192c27)if(_0xb2fe0e[_0x153bf5(0x278)]>=_0x51968d[_0x153bf5(0x10a)]){const _0x2d4150=new Date(_0xb2fe0e['getAttribute'](_0x153bf5(0x1ed)));document['getElementById']('headerMonth')[_0x153bf5(0x27f)]=_0x2d4150[_0x153bf5(0x16a)]('ru',{'month':_0x153bf5(0x120)})[_0x153bf5(0x148)]()+'\x20'+_0x2d4150[_0x153bf5(0x14f)]();break;}}function showToast(_0x28860c,_0x128719=![]){const _0x27bece=a2_0x4c7610,_0xc5a074=document['getElementById'](_0x27bece(0x137));_0xc5a074[_0x27bece(0x1b9)]=_0x27bece(0x27d)+(_0x128719?_0x27bece(0x230):''),document[_0x27bece(0x1df)]('toastTitle')[_0x27bece(0x27f)]=_0x128719?'Успешно':_0x27bece(0x222),document[_0x27bece(0x1df)](_0x27bece(0x1bb))[_0x27bece(0x27f)]=_0x28860c,_0xc5a074[_0x27bece(0x201)][_0x27bece(0x138)](_0x27bece(0x1b6)),setTimeout(()=>{const _0x42cdc3=_0x27bece;_0xc5a074[_0x42cdc3(0x201)][_0x42cdc3(0x245)](_0x42cdc3(0x1b6));},0xbb8);}function openDayOptions(_0x4c54ed,_0x45d588){const _0xff318b=a2_0x4c7610;selectedDayForOptions=_0x4c54ed,document[_0xff318b(0x1df)]('dayOptionsTitle')[_0xff318b(0x27f)]=_0x45d588,openSheet(_0xff318b(0x19e));}function toggleDayOff(){const _0x5ed8f8=a2_0x4c7610;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]='off',reRenderBlocks(),closeAllSheets(),DataManager[_0x5ed8f8(0x1d0)](),DataManager[_0x5ed8f8(0x247)](_0x5ed8f8(0x1b5),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0xe8df42=a2_0x4c7610;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0xe8df42(0x1d0)](),DataManager[_0xe8df42(0x247)](_0xe8df42(0x1b5),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x98d853){const _0x58b649=a2_0x4c7610;document[_0x58b649(0x1df)]('overlay')['classList'][_0x58b649(0x138)]('active'),document[_0x58b649(0x1df)](_0x98d853)[_0x58b649(0x201)][_0x58b649(0x138)](_0x58b649(0x1ae));}function closeAllSheets(){const _0x219720=a2_0x4c7610;document[_0x219720(0x1df)](_0x219720(0x1bd))[_0x219720(0x201)][_0x219720(0x245)](_0x219720(0x254)),document[_0x219720(0x182)](_0x219720(0x177))['forEach'](_0x42e9b3=>_0x42e9b3[_0x219720(0x201)]['remove'](_0x219720(0x1ae)));}function openPatternEditor(){const _0x235ecc=a2_0x4c7610;closeAllSheets(),document[_0x235ecc(0x1df)](_0x235ecc(0x1dc))['classList'][_0x235ecc(0x138)](_0x235ecc(0x1ae)),renderPatternEditor();}function closePatternEditor(){const _0x1a32c3=a2_0x4c7610;document[_0x1a32c3(0x1df)](_0x1a32c3(0x1dc))[_0x1a32c3(0x201)][_0x1a32c3(0x245)](_0x1a32c3(0x1ae));}function savePattern(){const _0x2f6f4f=a2_0x4c7610;document['getElementById'](_0x2f6f4f(0x1dc))['classList']['remove'](_0x2f6f4f(0x1ae)),reRenderBlocks(),DataManager[_0x2f6f4f(0x1d0)](),DataManager[_0x2f6f4f(0x247)](_0x2f6f4f(0x1b5),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x318d23=a2_0x4c7610,_0x23e755=document['getElementById'](_0x318d23(0x1fc));_0x23e755['innerHTML']='';const _0x322e3f=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x1c26f5=document[_0x318d23(0x1eb)](_0x318d23(0x144));_0x1c26f5[_0x318d23(0x1b9)]=_0x318d23(0x21c),_0x23e755[_0x318d23(0x1f0)](_0x1c26f5),_0x322e3f[_0x318d23(0x1a2)]((_0x188068,_0x325b2f)=>{const _0x6bb68b=_0x318d23,_0x1f289c=document[_0x6bb68b(0x1eb)](_0x6bb68b(0x144));_0x1f289c[_0x6bb68b(0x1b9)]='pe-col-header',_0x1f289c['innerHTML']=_0x188068+_0x6bb68b(0x257),_0x1f289c[_0x6bb68b(0x24e)]=()=>toggleColPattern(_0x325b2f),_0x23e755[_0x6bb68b(0x1f0)](_0x1f289c);});for(let _0x47ff29=0x0;_0x47ff29<0x18;_0x47ff29++){const _0x2b8a6e=document['createElement'](_0x318d23(0x144));_0x2b8a6e[_0x318d23(0x1b9)]='pe-time-label',_0x2b8a6e[_0x318d23(0x25c)]=_0x318d23(0x191)+String(_0x47ff29)[_0x318d23(0x15a)](0x2,'0')+_0x318d23(0x12a),_0x2b8a6e['onclick']=()=>toggleRowPattern(_0x47ff29),_0x23e755[_0x318d23(0x1f0)](_0x2b8a6e);for(let _0x32fe4a=0x0;_0x32fe4a<0x7;_0x32fe4a++){const _0x5b0b75=document[_0x318d23(0x1eb)](_0x318d23(0x144)),_0x438d7f=(availabilityPattern[_0x32fe4a]||[])[_0x318d23(0x203)](_0x47ff29),_0x1cfc2c=!_0x438d7f;_0x5b0b75[_0x318d23(0x1b9)]=_0x318d23(0x122)+(_0x1cfc2c?'active':''),_0x5b0b75[_0x318d23(0x24e)]=()=>toggleSinglePattern(_0x32fe4a,_0x47ff29),_0x23e755['appendChild'](_0x5b0b75);}}}function toggleSinglePattern(_0x28c7ec,_0x587472){const _0x4348dc=a2_0x4c7610;if(!availabilityPattern[_0x28c7ec])availabilityPattern[_0x28c7ec]=[];const _0x2bbc94=availabilityPattern[_0x28c7ec],_0x33ead3=_0x2bbc94[_0x4348dc(0x1f7)](_0x587472);_0x33ead3===-0x1?_0x2bbc94[_0x4348dc(0x162)](_0x587472):_0x2bbc94[_0x4348dc(0x1f4)](_0x33ead3,0x1),renderPatternEditor();}function toggleColPattern(_0x2ddf77){const _0x344cf4=a2_0x4c7610;if(!availabilityPattern[_0x2ddf77])availabilityPattern[_0x2ddf77]=[];const _0x405b26=availabilityPattern[_0x2ddf77];_0x405b26[_0x344cf4(0x1c6)]===0x0?availabilityPattern[_0x2ddf77]=Array['from']({'length':0x18},(_0x5f3740,_0x4a0da7)=>_0x4a0da7):availabilityPattern[_0x2ddf77]=[],renderPatternEditor();}function toggleRowPattern(_0x5f3ddd){const _0x49bd33=a2_0x4c7610;let _0x2f1ce6=!![];for(let _0x39fb74=0x0;_0x39fb74<0x7;_0x39fb74++){if((availabilityPattern[_0x39fb74]||[])[_0x49bd33(0x203)](_0x5f3ddd)){_0x2f1ce6=![];break;}}for(let _0x54d7f7=0x0;_0x54d7f7<0x7;_0x54d7f7++){if(!availabilityPattern[_0x54d7f7])availabilityPattern[_0x54d7f7]=[];const _0x150a75=availabilityPattern[_0x54d7f7]['indexOf'](_0x5f3ddd);if(_0x2f1ce6){if(_0x150a75===-0x1)availabilityPattern[_0x54d7f7][_0x49bd33(0x162)](_0x5f3ddd);}else{if(_0x150a75!==-0x1)availabilityPattern[_0x54d7f7][_0x49bd33(0x1f4)](_0x150a75,0x1);}}renderPatternEditor();}function renderPCol(_0x489390,_0x3e1ffa){const _0x4a4449=a2_0x4c7610;_0x489390['innerHTML']='';const _0x7e31a=Math[_0x4a4449(0x141)](_0x489390['offsetLeft']);(availabilityPattern[_0x3e1ffa]||[])[_0x4a4449(0x1a2)](_0x3ffd08=>{const _0x5041da=_0x4a4449,_0x184e2b=document[_0x5041da(0x1eb)](_0x5041da(0x144));_0x184e2b[_0x5041da(0x1b9)]=_0x5041da(0x13a);const _0x18a17f=_0x3ffd08*GRID_H;_0x184e2b[_0x5041da(0x11d)][_0x5041da(0x21e)]=_0x18a17f+'px',_0x184e2b[_0x5041da(0x11d)]['backgroundPosition']='-'+_0x7e31a+'px\x20-'+_0x18a17f+'px',_0x184e2b[_0x5041da(0x24e)]=_0x2136e8=>{_0x2136e8['stopPropagation'](),toggleSinglePattern(_0x3e1ffa,_0x3ffd08);},_0x489390[_0x5041da(0x1f0)](_0x184e2b);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x574fe5=a2_0x4c7610,_0x5eb156=new Date(),_0x23a72d=document[_0x574fe5(0x1df)](_0x574fe5(0x1e0)),_0x40db81=document['getElementById'](_0x574fe5(0x161)),_0x1323bd=(_0x5eb156['getHours']()*0x3c+_0x5eb156[_0x574fe5(0x160)]())/0x3c*GRID_H;_0x23a72d[_0x574fe5(0x11d)][_0x574fe5(0x21e)]=_0x1323bd+'px',_0x23a72d[_0x574fe5(0x11d)][_0x574fe5(0x265)]=_0x574fe5(0x23c),_0x40db81[_0x574fe5(0x27f)]=String(_0x5eb156[_0x574fe5(0x131)]())[_0x574fe5(0x15a)](0x2,'0')+':'+String(_0x5eb156[_0x574fe5(0x160)]())[_0x574fe5(0x15a)](0x2,'0'),_0x40db81[_0x574fe5(0x11d)][_0x574fe5(0x265)]=_0x574fe5(0x23c),_0x40db81[_0x574fe5(0x11d)][_0x574fe5(0x21e)]=_0x1323bd+'px';}document[a2_0x4c7610(0x277)]('DOMContentLoaded',init);function openDayOptions(_0x4c86f0){const _0xdd38ca=a2_0x4c7610;selectedDayForOptions=_0x4c86f0;const _0x596cd8=new Date(_0x4c86f0),_0x1beb05={'weekday':_0xdd38ca(0x120),'day':'numeric','month':_0xdd38ca(0x120),'year':'numeric'},_0x215700=_0x596cd8['toLocaleDateString']('ru-RU',_0x1beb05);document['getElementById'](_0xdd38ca(0x147))[_0xdd38ca(0x27f)]=_0x215700[_0xdd38ca(0x19c)](0x0)[_0xdd38ca(0x148)]()+_0x215700[_0xdd38ca(0x27e)](0x1);let _0xf64e7d=_0x596cd8[_0xdd38ca(0x1f6)]()-0x1;if(_0xf64e7d===-0x1)_0xf64e7d=0x6;const _0x3fc011=availabilityPattern[_0xf64e7d]||[],_0x34d5ce=0x18-_0x3fc011['length'],_0x3e26c8=_0x34d5ce*0x3c,_0x339043=sessions['filter'](_0x329dcc=>_0x329dcc[_0xdd38ca(0x237)]===_0x4c86f0&&_0x329dcc['status']!=='cancelled');let _0xbf6a4b=_0x339043['map'](_0x5f2c52=>{const _0x32fd85=_0xdd38ca,[_0x4978ef,_0x36d95a]=_0x5f2c52[_0x32fd85(0x22d)][_0x32fd85(0x275)](':')[_0x32fd85(0x1a4)](Number),[_0x400734,_0x1f9f8c]=_0x5f2c52['end'][_0x32fd85(0x275)](':')[_0x32fd85(0x1a4)](Number);return[_0x4978ef*0x3c+_0x36d95a,_0x400734*0x3c+_0x1f9f8c];});_0xbf6a4b['sort']((_0x437ca6,_0x4d67b8)=>_0x437ca6[0x0]-_0x4d67b8[0x0]);let _0x4783f2=[];if(_0xbf6a4b['length']>0x0){let _0x1b755f=_0xbf6a4b[0x0];for(let _0x451148=0x1;_0x451148<_0xbf6a4b[_0xdd38ca(0x1c6)];_0x451148++){_0xbf6a4b[_0x451148][0x0]<_0x1b755f[0x1]?_0x1b755f[0x1]=Math['max'](_0x1b755f[0x1],_0xbf6a4b[_0x451148][0x1]):(_0x4783f2[_0xdd38ca(0x162)](_0x1b755f),_0x1b755f=_0xbf6a4b[_0x451148]);}_0x4783f2['push'](_0x1b755f);}let _0x1ec1d2=0x0;_0x4783f2['forEach'](_0x163a21=>_0x1ec1d2+=_0x163a21[0x1]-_0x163a21[0x0]),document[_0xdd38ca(0x1df)](_0xdd38ca(0x176))[_0xdd38ca(0x27f)]=formatMinsToHrs(_0x3e26c8),document['getElementById'](_0xdd38ca(0x1d7))[_0xdd38ca(0x27f)]=formatMinsToHrs(_0x1ec1d2);const _0x2b6adb=_0x3e26c8>0x0?Math['round'](_0x1ec1d2/_0x3e26c8*0x64):0x0,_0x4ce697=document[_0xdd38ca(0x1df)](_0xdd38ca(0x114));_0x4ce697[_0xdd38ca(0x27f)]=_0x2b6adb+'%';const _0x21fee2=document[_0xdd38ca(0x1df)](_0xdd38ca(0x1b3));if(_0x2b6adb>0x64)_0x4ce697[_0xdd38ca(0x11d)][_0xdd38ca(0x253)]=_0xdd38ca(0x1bf),_0x21fee2['style']['borderColor']=_0xdd38ca(0x1e4);else _0x2b6adb>0x50?(_0x4ce697[_0xdd38ca(0x11d)]['color']=_0xdd38ca(0x153),_0x21fee2[_0xdd38ca(0x11d)][_0xdd38ca(0x12b)]=_0xdd38ca(0x238)):(_0x4ce697[_0xdd38ca(0x11d)][_0xdd38ca(0x253)]=_0xdd38ca(0x24d),_0x21fee2[_0xdd38ca(0x11d)][_0xdd38ca(0x12b)]='rgba(255,255,255,0.05)');const _0x288955=document['getElementById'](_0xdd38ca(0x223));_0x288955[_0xdd38ca(0x25c)]='';_0x339043[_0xdd38ca(0x1c6)]===0x0?_0x288955[_0xdd38ca(0x25c)]=_0xdd38ca(0x20c):(_0x339043[_0xdd38ca(0x1e3)]((_0x5d9b9a,_0x954fac)=>_0x5d9b9a[_0xdd38ca(0x22d)]['localeCompare'](_0x954fac[_0xdd38ca(0x22d)])),_0x339043[_0xdd38ca(0x1a2)](_0x47cac3=>{const _0x4c12f9=_0xdd38ca,_0x3bdb3f=clients[_0x4c12f9(0x255)](_0x11f978=>_0x11f978['name']===_0x47cac3[_0x4c12f9(0x10f)]),_0x18d6e6=_0x3bdb3f?_0x3bdb3f[_0x4c12f9(0x253)]:_0x4c12f9(0x150),_0x5b233c=_0x47cac3['status']===_0x4c12f9(0x1c8),_0x4711cb=_0x5b233c?_0x4c12f9(0x23e):'',_0x376732=document[_0x4c12f9(0x1eb)]('div');_0x376732[_0x4c12f9(0x1b9)]='de-item',_0x376732[_0x4c12f9(0x11d)][_0x4c12f9(0x1e1)]=_0x18d6e6,_0x376732[_0x4c12f9(0x25c)]=_0x4c12f9(0x18c)+_0x47cac3[_0x4c12f9(0x22d)]+_0x4c12f9(0x119)+_0x47cac3[_0x4c12f9(0x16b)]+_0x4c12f9(0x19f)+_0x47cac3[_0x4c12f9(0x10f)]+_0x4c12f9(0x1ba)+_0x4711cb+_0x4c12f9(0x1f9),_0x288955['appendChild'](_0x376732);}));const _0x291531=document['getElementById'](_0xdd38ca(0x27c)),_0x28edb4=dateExceptions[_0x4c86f0]===_0xdd38ca(0x26e);_0x28edb4?(_0x291531[_0xdd38ca(0x27f)]=_0xdd38ca(0x17e),_0x291531[_0xdd38ca(0x1b9)]=_0xdd38ca(0x186),_0x291531[_0xdd38ca(0x11d)][_0xdd38ca(0x253)]=_0xdd38ca(0x24d),_0x291531['style']['background']='rgba(48,\x20209,\x2088,\x200.15)'):(_0x291531[_0xdd38ca(0x27f)]=_0xdd38ca(0x21a),_0x291531['className']=_0xdd38ca(0x146),_0x291531[_0xdd38ca(0x11d)][_0xdd38ca(0x253)]=_0xdd38ca(0x1bf),_0x291531['style'][_0xdd38ca(0x250)]=_0xdd38ca(0x22c)),openSheet(_0xdd38ca(0x19e));}let currentAnPeriod=a2_0x4c7610(0x16e);function openAnalytics(){const _0x43f59c=a2_0x4c7610,_0x227101=document[_0x43f59c(0x239)](_0x43f59c(0x179));setAnalyticsPeriod(_0x43f59c(0x16e),_0x227101),closeAllSheets(),openSheet(_0x43f59c(0x1d1));}function setAnalyticsPeriod(_0x4ca504,_0x486d56){const _0x5ebae4=a2_0x4c7610;currentAnPeriod=_0x4ca504,document[_0x5ebae4(0x182)](_0x5ebae4(0x179))['forEach'](_0x4b3fd5=>_0x4b3fd5[_0x5ebae4(0x201)]['remove'](_0x5ebae4(0x254)));if(_0x486d56)_0x486d56[_0x5ebae4(0x201)][_0x5ebae4(0x138)](_0x5ebae4(0x254));const _0x1e8454=document[_0x5ebae4(0x1df)](_0x5ebae4(0x210));_0x1e8454[_0x5ebae4(0x11d)][_0x5ebae4(0x265)]=_0x4ca504==='custom'?_0x5ebae4(0x219):_0x5ebae4(0x1d6);const _0x1b1314=new Date();let _0x599316=new Date(),_0x60a411=new Date();if(_0x4ca504===_0x5ebae4(0x16e))_0x599316=getStartOfWeek(_0x1b1314),_0x60a411=new Date(_0x599316),_0x60a411[_0x5ebae4(0x281)](_0x60a411[_0x5ebae4(0x134)]()+0x6);else{if(_0x4ca504===_0x5ebae4(0x252))_0x599316=new Date(_0x1b1314[_0x5ebae4(0x14f)](),_0x1b1314[_0x5ebae4(0x187)](),0x1),_0x60a411=new Date(_0x1b1314[_0x5ebae4(0x14f)](),_0x1b1314[_0x5ebae4(0x187)]()+0x1,0x0);else{!document['getElementById'](_0x5ebae4(0x208))[_0x5ebae4(0x10b)]&&(document[_0x5ebae4(0x1df)]('anStart')['value']=getLocalDateStr(_0x1b1314),document[_0x5ebae4(0x1df)](_0x5ebae4(0x25f))[_0x5ebae4(0x10b)]=getLocalDateStr(_0x1b1314));refreshAnalytics();return;}}document[_0x5ebae4(0x1df)](_0x5ebae4(0x208))[_0x5ebae4(0x10b)]=getLocalDateStr(_0x599316),document['getElementById'](_0x5ebae4(0x25f))[_0x5ebae4(0x10b)]=getLocalDateStr(_0x60a411),refreshAnalytics();}function refreshAnalytics(){const _0xb8cd5b=a2_0x4c7610,_0x5d93da=document[_0xb8cd5b(0x1df)](_0xb8cd5b(0x208))[_0xb8cd5b(0x10b)],_0x5944eb=document['getElementById']('anEnd')[_0xb8cd5b(0x10b)];if(!_0x5d93da||!_0x5944eb)return;const _0x164acc=sessions[_0xb8cd5b(0x132)](_0x177196=>_0x177196[_0xb8cd5b(0x237)]>=_0x5d93da&&_0x177196['dateStr']<=_0x5944eb&&_0x177196['status']!=='cancelled'),_0x3690f8=_0x164acc[_0xb8cd5b(0x1c6)],_0x39a0d0=_0x164acc[_0xb8cd5b(0x132)](_0x258092=>_0x258092['status']===_0xb8cd5b(0x1c8))[_0xb8cd5b(0x1c6)],_0x3a4c37=_0x3690f8>0x0?Math['round'](_0x39a0d0/_0x3690f8*0x64):0x0;document[_0xb8cd5b(0x1df)]('anPercent')[_0xb8cd5b(0x27f)]=_0x3a4c37+'%',document[_0xb8cd5b(0x1df)](_0xb8cd5b(0x19d))['textContent']=_0x39a0d0+_0xb8cd5b(0x12d)+_0x3690f8+_0xb8cd5b(0x156);const _0x3d1402=document[_0xb8cd5b(0x1df)](_0xb8cd5b(0x1b7)),_0x2b5ebe=0x2*Math['PI']*0x23,_0x3ebb35=_0x2b5ebe-_0x3a4c37/0x64*_0x2b5ebe;_0x3d1402[_0xb8cd5b(0x11d)][_0xb8cd5b(0x143)]=_0x3ebb35;const _0x498664={};_0x164acc[_0xb8cd5b(0x1a2)](_0x4a8e98=>{const _0x45d6ce=_0xb8cd5b;if(!_0x498664[_0x4a8e98[_0x45d6ce(0x10f)]]){const _0x2a7915=clients[_0x45d6ce(0x255)](_0x3d873e=>_0x3d873e[_0x45d6ce(0x151)]===_0x4a8e98[_0x45d6ce(0x10f)]);_0x498664[_0x4a8e98[_0x45d6ce(0x10f)]]={'total':0x0,'done':0x0,'color':_0x2a7915?_0x2a7915[_0x45d6ce(0x253)]:'#fff'};}_0x498664[_0x4a8e98[_0x45d6ce(0x10f)]][_0x45d6ce(0x188)]++;if(_0x4a8e98['status']==='completed')_0x498664[_0x4a8e98[_0x45d6ce(0x10f)]][_0x45d6ce(0x276)]++;});const _0x259fc9=document[_0xb8cd5b(0x1df)](_0xb8cd5b(0x13c));_0x259fc9['innerHTML']='';const _0x1c2f84=Object['entries'](_0x498664)[_0xb8cd5b(0x1e3)]((_0x106a99,_0x137aee)=>_0x137aee[0x1][_0xb8cd5b(0x188)]-_0x106a99[0x1]['total']);if(_0x1c2f84['length']===0x0){_0x259fc9[_0xb8cd5b(0x25c)]=_0xb8cd5b(0x23a);return;}_0x1c2f84[_0xb8cd5b(0x1a2)](([_0x2be8e5,_0x42434e])=>{const _0x495768=_0xb8cd5b,_0xb6a900=Math['round'](_0x42434e[_0x495768(0x276)]/_0x42434e[_0x495768(0x188)]*0x64),_0x158d6c=document[_0x495768(0x1eb)](_0x495768(0x144));_0x158d6c[_0x495768(0x1b9)]=_0x495768(0x269),_0x158d6c['style']['borderLeftColor']=_0x42434e[_0x495768(0x253)],_0x158d6c[_0x495768(0x25c)]=_0x495768(0x1ff)+_0x2be8e5+_0x495768(0x172)+_0x42434e[_0x495768(0x276)]+_0x495768(0x1fe)+_0x42434e[_0x495768(0x188)]+_0x495768(0x178)+_0xb6a900+_0x495768(0x1dd),_0x259fc9['appendChild'](_0x158d6c);});}function formatMinsToHrs(_0x5f6edb){const _0x4d93be=a2_0x4c7610;if(_0x5f6edb===0x0)return'0';const _0x3b8169=Math[_0x4d93be(0x14e)](_0x5f6edb/0x3c),_0x1c54be=_0x5f6edb%0x3c;if(_0x1c54be===0x0)return _0x3b8169+'ч';return _0x3b8169+'ч\x20'+_0x1c54be+'м';}function a2_0x4815(){const _0x326dc6=['day-off-overlay\x20stripe-bg','\x20из\x20','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','blocked-range-part\x20stripe-bg','getHours','filter','mergeServerData','getDate',':00</span>','max','toast','add','zIndex','blocked-slot\x20stripe-bg','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','analyticsList','Оффлайн\x20режим','scrollTop','borderRadius','calendar','round','Этот\x20клиент\x20(','strokeDashoffset','div','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','btn-primary\x20btn-danger','doDateHeader','toUpperCase','seriesCountContainer','T00:00:00','numeric','batch_sync','error','floor','getFullYear','#fff','name','keys','var(--acc-orange)','cancel_window','[Notify]\x20Error:\x20Text\x20generation\x20failed','\x20выполнено','Изменение\x20серии','setAttribute','#gridColumns\x20.day-column','padStart','text/plain;charset=UTF-8','Ошибка\x20сохранения\x20в\x20облако','width','<div\x20class=\x22dch-day\x22>','settingCancelWindow','getMinutes','timeLineBadge','push','uc_settings_cancel_window','10RWJMIU','#0a84ff','onClick','[Notify]\x20Network\x20Failed','checked','search','toLocaleString','end','getItem','getAttribute','week','cancelled','settings','href','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','closest','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','mini','doWorkHours','.sheet','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','.period-switch\x20.p-btn','Нет\x20клиентов','Local\x20Load\x20Error',']\x20Failed:','toLocaleDateString','Сделать\x20рабочим\x20днем','ru-RU','null','[Notify]\x20Attempting\x20to\x20send:','querySelectorAll','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','</div><div\x20class=\x22ev-time\x22>','[API\x20','btn-primary\x20btn-secondary','getMonth','total','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','stringify','recurringOptionContainer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','user','rangeEndDate','complete','insertBefore','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','settingsSheet','Редактировать','px\x20-','scrollWidth','option','valid','setItem','getTime','note','rangesList','charAt','anTotalStats','dayOptionsSheet','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','delete','8301972aNNsgA','forEach','%\x20-\x204px)','map',']\x20Доступно:\x20','\x20(пропущено:\x20','T23:59:59','target','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','</b>\x0a\x0a','[Sync]\x20Loading\x20','init_load','...','open','toFixed','px\x200px','\x20status-completed','msg','statLoadCard','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','save_settings','show','anDonutCircle','firstChild','className','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toastMessage','clients','overlay','router.html','var(--acc-red)','clientY','initDataUnsafe','substr','rangeStartDate','Статус\x20сброшен','guest','length','Critical\x20TMA\x20Error:','completed','inpRecurring','as-button\x20danger\x20bold','</div>','POST','planned','gridColumns','#050505','saveLocally','analyticsSheet','<b>✅\x20','rgba(','series','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','none','doBusyHours','warn','inpSeriesCount','header-','00:00','patternEditor','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','update','getElementById','globalTimeLine','borderLeftColor','var(--acc-current)','sort','rgba(255,\x2069,\x2058,\x200.3)','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','toString','syncLoad','syncBatch','WebApp','send','createElement','.dch-stats-fill','data-date','vibrate','\x20—\x20','appendChild','data-day-idx','Unknown','.day-off-overlay','splice','expand','getDay','indexOf','timeColumn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Заполните\x20все\x20поля','actionSheet','peGrid','mouseup','</span>\x20/\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','classList','log','includes','uc_clients_v9','[Notify]\x20Client\x20SWAP\x20detected','colIndex','</div><div\x20class=\x22dch-num\x22>','anStart','exceptions','setBackgroundColor','\x20days','<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>','784809rhhdoG','Telegram','Групповая:\x20также\x20записан\x20','anCustomDates','Жду\x20вас\x20в\x20зале!\x20💪','actionSheetOverlay','sessionSheet','Все\x20даты\x20заняты\x20этим\x20клиентом!','inpNote','json','constructor','data','flex','Сделать\x20выходным','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','pe-corner','setHeaderColor','top','clientWidth','88kDtwHf','Запись\x20на\x20<b>','Инфо','doEventsList','6981175QSSUXj','uc_sessions_v9','10px','findIndex','4tdfBrH','initData','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','asTitle','rgba(255,\x2069,\x2058,\x200.15)','start','<div\x20class=\x22ev-title\x22>','inpDate','success','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','parse','matrixViewport','disableVerticalSwipes','.day-column','ready','dateStr','rgba(255,\x20159,\x2010,\x200.3)','querySelector','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','uc_settings_v9','block','asBtnSeries','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','.day-col-header','btnStatusToggle','range-item','v9.0-BATCH-CALENDAR','from','7183500nQRSoa','remove','createDocumentFragment','fetchFromServer','pattern','calc(',')\x20уже\x20записан\x20на\x20это\x20время!','getBoundingClientRect','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','var(--acc-green)','onclick','cancel','background','undefined','month','color','active','find','Вернуть\x20в\x20запланированные','\x20<span\x20class=\x22arrow\x22>↓</span>','offsetWidth','backgroundColor','as-button\x20danger','setHours','innerHTML','rangeEndTime','Только\x20эту','anEnd','(((.+)+)+)+$','formatDate','catch','100%','status','display','7010531rZScLs','then','inpStart','client-stat-card','Server\x20Error','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','seriesId','4919334aknRci','off','single','location','BackButton','sheetDateSubtitle','backgroundPosition','create','split','done','addEventListener','offsetLeft','scroll','Создана\x20серия:\x20',':\x20Client\x20already\x20booked','btnDayToggle','toast-notification\x20','slice','textContent','Это\x20часть\x20серии\x20тренировок','setDate','now','Ошибка\x20дат','Ошибка\x20сохранения\x20настроек','deleted','ranges','Максимум\x20100\x20за\x20раз','warning','save','scrollLeft','value','17627zKWcvv','.event-card','Минимум\x202\x20тренировки','client','touchmove','[Series]\x20Skipped\x20','rangesSheet','height','doLoadPercent','today','<b>📅\x20Дата:</b>\x20','Эту\x20и\x20будущие','min','\x20-\x20','isArray','inpEnd','Синхронизировано','style','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','inpClient','long','patternInfoBox','pe-cell\x20','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','loadLocal','[Settings]\x20Cancel\x20window\x20set\x20to:','clientId','day-column\x20','142VzxXGw','Local\x20Save\x20Error',':00','borderColor'];a2_0x4815=function(){return _0x326dc6;};return a2_0x4815();}