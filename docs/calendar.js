const a2_0x2f1aa1=a2_0x3d3f;(function(_0x3c741e,_0x402ac5){const _0x3b6981=a2_0x3d3f,_0x1c9e50=_0x3c741e();while(!![]){try{const _0x1c60c8=-parseInt(_0x3b6981(0x1b4))/0x1*(parseInt(_0x3b6981(0x274))/0x2)+parseInt(_0x3b6981(0x1b5))/0x3*(-parseInt(_0x3b6981(0x1cc))/0x4)+-parseInt(_0x3b6981(0x1e5))/0x5*(parseInt(_0x3b6981(0x22f))/0x6)+-parseInt(_0x3b6981(0x1dd))/0x7*(-parseInt(_0x3b6981(0x255))/0x8)+parseInt(_0x3b6981(0x165))/0x9+parseInt(_0x3b6981(0x202))/0xa*(parseInt(_0x3b6981(0x24c))/0xb)+-parseInt(_0x3b6981(0x183))/0xc;if(_0x1c60c8===_0x402ac5)break;else _0x1c9e50['push'](_0x1c9e50['shift']());}catch(_0x59ec34){_0x1c9e50['push'](_0x1c9e50['shift']());}}}(a2_0x4a59,0x9284d),function initTMA(){const _0x2f89c6=a2_0x3d3f;try{const _0x36d6dd=window[_0x2f89c6(0x251)]?.['WebApp'];if(!_0x36d6dd)return;_0x36d6dd[_0x2f89c6(0x14d)](),_0x36d6dd[_0x2f89c6(0x22d)]();try{_0x36d6dd[_0x2f89c6(0x1ce)](_0x2f89c6(0x226)),_0x36d6dd[_0x2f89c6(0x14f)]&&_0x36d6dd[_0x2f89c6(0x14f)]('#050505');}catch(_0x43e7ec){console[_0x2f89c6(0x292)](_0x2f89c6(0x279),_0x43e7ec);}try{_0x36d6dd[_0x2f89c6(0x157)]&&(_0x36d6dd['BackButton'][_0x2f89c6(0x1ec)](),_0x36d6dd['BackButton'][_0x2f89c6(0x1b3)](),_0x36d6dd[_0x2f89c6(0x157)][_0x2f89c6(0x21c)](function(){const _0x163065=_0x2f89c6;window[_0x163065(0x219)][_0x163065(0x214)]=_0x163065(0x265);}));}catch(_0x54f3e9){console['log']('Error\x20setting\x20back\x20button:',_0x54f3e9);}try{if(_0x36d6dd[_0x2f89c6(0x270)])_0x36d6dd['disableVerticalSwipes']();}catch(_0x314996){}}catch(_0x1d8503){console['error'](_0x2f89c6(0x131),_0x1d8503);}}());function isAdmin(){const _0x51a25e=a2_0x3d3f;try{const _0x1a291d=Number(window['Telegram']?.[_0x51a25e(0x1bd)]?.[_0x51a25e(0x247)]?.[_0x51a25e(0x267)]?.['id']);return _0x1a291d===0xbaf7174;}catch(_0x17fc60){return![];}}const APP_VERSION=a2_0x2f1aa1(0x236),API_URL=a2_0x2f1aa1(0x18c),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x2f1aa1(0x187),KEY_SESSIONS='uc_sessions_v9',KEY_SETTINGS=a2_0x2f1aa1(0x249);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x324bdd=a2_0x2f1aa1;return window[_0x324bdd(0x251)]?.[_0x324bdd(0x1bd)]?.[_0x324bdd(0x247)]?.[_0x324bdd(0x267)]?.['id']||_0x324bdd(0x228);},'saveLocally'(){const _0x51064d=a2_0x2f1aa1;try{localStorage[_0x51064d(0x19d)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x51064d(0x19d)](KEY_SESSIONS,JSON[_0x51064d(0x177)](sessions)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x51064d(0x177)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x10bfa1){console[_0x51064d(0x24b)](_0x51064d(0x299),_0x10bfa1);}},'loadLocal'(){const _0x4f943a=a2_0x2f1aa1;try{const _0x4e5302=localStorage[_0x4f943a(0x132)](KEY_CLIENTS);if(_0x4e5302)clients=JSON['parse'](_0x4e5302);const _0x318781=localStorage['getItem'](KEY_SESSIONS);if(_0x318781)sessions=JSON[_0x4f943a(0x172)](_0x318781);const _0x407156=localStorage['getItem'](KEY_SETTINGS);if(_0x407156){const _0x25f541=JSON['parse'](_0x407156);if(_0x25f541[_0x4f943a(0x155)])availabilityPattern=_0x25f541['pattern'];if(_0x25f541['exceptions'])dateExceptions=_0x25f541[_0x4f943a(0x204)];if(_0x25f541[_0x4f943a(0x164)])specialRanges=_0x25f541[_0x4f943a(0x164)];}else{for(let _0x382fa6=0x0;_0x382fa6<0x7;_0x382fa6++)availabilityPattern[_0x382fa6]=Array[_0x4f943a(0x1d8)]({'length':0xc},(_0x48390f,_0x118699)=>_0x118699+0x9);}}catch(_0x43b0ad){console[_0x4f943a(0x24b)](_0x4f943a(0x253),_0x43b0ad);}},async 'fetchFromServer'(_0x3dd080,_0x539808={}){const _0x4d37a1=a2_0x2f1aa1,_0x2049e3=window[_0x4d37a1(0x251)]?.[_0x4d37a1(0x1bd)],_0x194142={'action':_0x3dd080,'init_data':_0x2049e3?.[_0x4d37a1(0x297)]||'',..._0x539808};try{const _0x5e036a=await fetch(API_URL,{'method':'POST','headers':{'Content-Type':_0x4d37a1(0x20b)},'body':JSON[_0x4d37a1(0x177)](_0x194142)}),_0x1a5da5=await _0x5e036a[_0x4d37a1(0x18f)]();if(!_0x1a5da5['ok'])throw new Error(_0x1a5da5[_0x4d37a1(0x24b)]||_0x4d37a1(0x1e0));return _0x1a5da5[_0x4d37a1(0x17b)];}catch(_0x35d75d){console[_0x4d37a1(0x24b)](_0x4d37a1(0x129)+_0x3dd080+_0x4d37a1(0x169),_0x35d75d);throw _0x35d75d;}},async 'syncLoad'(){const _0x342620=a2_0x2f1aa1,_0x1b208b=new Date(),_0x492fa8=_0x1b208b[_0x342620(0x233)]()+'-'+String(_0x1b208b[_0x342620(0x278)]()+0x1)[_0x342620(0x16c)](0x2,'0'),_0x12da84=new Date(_0x1b208b);_0x12da84['setMonth'](_0x1b208b[_0x342620(0x278)]()+0x1);const _0xd86613=_0x12da84['getFullYear']()+'-'+String(_0x12da84[_0x342620(0x278)]()+0x1)['padStart'](0x2,'0'),_0x5d8098=Date[_0x342620(0x286)]();console[_0x342620(0x292)](_0x342620(0x23f)+_0x492fa8+',\x20'+_0xd86613+_0x342620(0x19a));try{const [_0x372bdc,_0xece6e4]=await Promise[_0x342620(0x163)]([this['fetchFromServer'](_0x342620(0x15c),{'month_str':_0x492fa8}),this[_0x342620(0x1e1)](_0x342620(0x15c),{'month_str':_0xd86613})]);if(lastUserActionTime>_0x5d8098)return console[_0x342620(0x170)](_0x342620(0x16a)),![];return this[_0x342620(0x2a4)](_0x372bdc,_0x492fa8),this[_0x342620(0x2a4)](_0xece6e4,_0xd86613),this[_0x342620(0x1d9)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x15b91d){console[_0x342620(0x24b)](_0x15b91d);throw _0x15b91d;}},'mergeServerData'(_0x4294ab,_0xc006d6){const _0xd2bc3a=a2_0x2f1aa1;if(!_0x4294ab)return;_0x4294ab[_0xd2bc3a(0x264)]&&Array['isArray'](_0x4294ab['clients'])&&(clients=_0x4294ab[_0xd2bc3a(0x264)]);if(_0x4294ab[_0xd2bc3a(0x1ee)]){if(_0x4294ab[_0xd2bc3a(0x1ee)][_0xd2bc3a(0x155)])availabilityPattern=_0x4294ab[_0xd2bc3a(0x1ee)][_0xd2bc3a(0x155)];if(_0x4294ab[_0xd2bc3a(0x1ee)][_0xd2bc3a(0x204)])dateExceptions=_0x4294ab[_0xd2bc3a(0x1ee)][_0xd2bc3a(0x204)];if(_0x4294ab['settings']['ranges'])specialRanges=_0x4294ab[_0xd2bc3a(0x1ee)]['ranges'];if(_0x4294ab['settings'][_0xd2bc3a(0x1f2)]){localStorage[_0xd2bc3a(0x19d)](_0xd2bc3a(0x25e),_0x4294ab['settings']['cancel_window']);const _0x525b87=document['getElementById']('settingCancelWindow');if(_0x525b87)_0x525b87[_0xd2bc3a(0x13f)]=_0x4294ab[_0xd2bc3a(0x1ee)]['cancel_window'];}}_0x4294ab[_0xd2bc3a(0x238)]&&(sessions=sessions[_0xd2bc3a(0x16d)](_0x286892=>!_0x286892['dateStr']['startsWith'](_0xc006d6)),Object['keys'](_0x4294ab['calendar'])[_0xd2bc3a(0x128)](_0x216251=>{const _0x303003=_0xd2bc3a,_0x499110=_0x4294ab[_0x303003(0x238)][_0x216251];_0x499110[_0x303003(0x128)](_0x52cab5=>{const _0x1a79e0=_0x303003,_0x5ec295=clients[_0x1a79e0(0x16b)](_0xad0378=>String(_0xad0378['id'])===String(_0x52cab5['c']));sessions[_0x1a79e0(0x281)]({'id':_0x52cab5['i'],'clientId':_0x52cab5['c'],'client':_0x5ec295?_0x5ec295['name']:_0x1a79e0(0x291),'dateStr':_0xc006d6+'-'+_0x216251[_0x1a79e0(0x16c)](0x2,'0'),'start':_0x52cab5['s'],'end':_0x52cab5['e'],'status':_0x52cab5['st']||_0x1a79e0(0x146),'note':_0x52cab5['n']||'','seriesId':_0x52cab5[_0x1a79e0(0x27e)]||null});});}));},async 'syncBatch'(_0x35e777){const _0x355906=a2_0x2f1aa1,_0x11f265=[...new Set(_0x35e777)],_0x2fb147=_0x11f265[_0x355906(0x182)](_0x3526a6=>{const _0xf02661=_0x355906,_0xe4d536=sessions[_0xf02661(0x16d)](_0x3e5cba=>_0x3e5cba[_0xf02661(0x198)]===_0x3526a6&&_0x3e5cba[_0xf02661(0x17f)]!==_0xf02661(0x1cb)),_0x22c957=_0xe4d536[_0xf02661(0x182)](_0x494b60=>({'i':_0x494b60['id'],'c':_0x494b60[_0xf02661(0x12c)],'s':_0x494b60['start'],'e':_0x494b60[_0xf02661(0x217)],'st':_0x494b60[_0xf02661(0x17f)],'n':_0x494b60['note'],'sid':_0x494b60[_0xf02661(0x2a6)]}));return{'date':_0x3526a6,'day_data':_0x22c957};});if(_0x2fb147[_0x355906(0x237)]===0x0)return;console['log'](_0x355906(0x25b)+_0x2fb147[_0x355906(0x237)]+_0x355906(0x149)),await this[_0x355906(0x1e1)](_0x355906(0x1af),{'changes':_0x2fb147});}};async function init(){const _0xc05b23=a2_0x2f1aa1;DataManager['loadLocal'](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0xc05b23(0x277)]('matrixViewport')[_0xc05b23(0x23b)](_0xc05b23(0x197),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0xc05b23(0x245)]()[_0xc05b23(0x159)](()=>{const _0x420bb8=_0xc05b23;showToast(_0x420bb8(0x1a6),!![]);})[_0xc05b23(0x28e)](_0xe59ad6=>{const _0xc39f80=_0xc05b23;showToast(_0xc39f80(0x208),![]);});}function generateId(){const _0x11f9ea=a2_0x2f1aa1;return Date[_0x11f9ea(0x286)]()['toString'](0x24)+Math[_0x11f9ea(0x1e2)]()[_0x11f9ea(0x296)](0x24)[_0x11f9ea(0x1a8)](0x2,0x5);}function toggleSeriesInput(){const _0x441df6=a2_0x2f1aa1,_0xea0945=document[_0x441df6(0x277)]('inpRecurring')[_0x441df6(0x1f1)],_0x2657b3=document[_0x441df6(0x277)](_0x441df6(0x222));_0x2657b3[_0x441df6(0x141)][_0x441df6(0x14c)]=_0xea0945?_0x441df6(0x250):_0x441df6(0x22a);const _0x2cb73=document[_0x441df6(0x277)](_0x441df6(0x26f));_0x2cb73['style'][_0x441df6(0x190)]=_0xea0945?_0x441df6(0x1a1):_0x441df6(0x260);}function openAddSession(_0x49c13a){const _0x3a66ab=a2_0x2f1aa1;editingId=null,populateClientSelect(),document[_0x3a66ab(0x277)](_0x3a66ab(0x25c))[_0x3a66ab(0x1da)]=_0x3a66ab(0x213),document[_0x3a66ab(0x277)](_0x3a66ab(0x2af))[_0x3a66ab(0x141)]['display']=_0x3a66ab(0x22a),document['getElementById'](_0x3a66ab(0x1b0))[_0x3a66ab(0x141)]['display']=_0x3a66ab(0x22a);const _0x1ea4e2=document[_0x3a66ab(0x277)](_0x3a66ab(0x26f)),_0x1e829a=document[_0x3a66ab(0x277)]('seriesCountContainer');_0x1ea4e2['style'][_0x3a66ab(0x14c)]=_0x3a66ab(0x275),_0x1ea4e2['style']['borderRadius']=_0x3a66ab(0x260),document[_0x3a66ab(0x277)](_0x3a66ab(0x12b))[_0x3a66ab(0x1f1)]=![],document[_0x3a66ab(0x277)](_0x3a66ab(0x216))[_0x3a66ab(0x13f)]=0x4,_0x1e829a[_0x3a66ab(0x141)][_0x3a66ab(0x14c)]=_0x3a66ab(0x22a),document[_0x3a66ab(0x277)](_0x3a66ab(0x1b2))[_0x3a66ab(0x13f)]=getLocalDateStr(_0x49c13a),updateDateDisplay();const _0x12ab28=_0x49c13a[_0x3a66ab(0x189)]();document[_0x3a66ab(0x277)](_0x3a66ab(0x298))[_0x3a66ab(0x13f)]=String(_0x12ab28)['padStart'](0x2,'0')+_0x3a66ab(0x1d6),document['getElementById'](_0x3a66ab(0x1bc))[_0x3a66ab(0x13f)]=String(_0x12ab28+0x1)[_0x3a66ab(0x16c)](0x2,'0')+':00',openSheet(_0x3a66ab(0x1a4));}function openEdit(_0x5f3819){const _0x50a6bd=a2_0x2f1aa1;editingId=_0x5f3819['id'],populateClientSelect(),document[_0x50a6bd(0x277)](_0x50a6bd(0x25c))[_0x50a6bd(0x1da)]=_0x50a6bd(0x156),document[_0x50a6bd(0x277)](_0x50a6bd(0x2af))[_0x50a6bd(0x141)][_0x50a6bd(0x14c)]=_0x50a6bd(0x250);const _0x13f400=document[_0x50a6bd(0x277)](_0x50a6bd(0x1b0));_0x13f400[_0x50a6bd(0x141)][_0x50a6bd(0x14c)]='flex';_0x5f3819[_0x50a6bd(0x17f)]==='completed'?(_0x13f400['className']=_0x50a6bd(0x24f),_0x13f400[_0x50a6bd(0x12d)]=_0x50a6bd(0x285)):(_0x13f400['className']='btn-status-toggle',_0x13f400['innerHTML']=_0x50a6bd(0x263));const _0x23acd1=!!_0x5f3819[_0x50a6bd(0x2a6)];document[_0x50a6bd(0x277)](_0x50a6bd(0x26f))['style'][_0x50a6bd(0x14c)]='none',document[_0x50a6bd(0x277)](_0x50a6bd(0x222))[_0x50a6bd(0x141)][_0x50a6bd(0x14c)]='none',_0x23acd1?(document[_0x50a6bd(0x277)](_0x50a6bd(0x1ab))[_0x50a6bd(0x141)][_0x50a6bd(0x14c)]=_0x50a6bd(0x275),document[_0x50a6bd(0x277)](_0x50a6bd(0x1ab))[_0x50a6bd(0x1c2)](_0x50a6bd(0x1ae))[_0x50a6bd(0x1da)]='Это\x20часть\x20серии\x20тренировок'):document['getElementById'](_0x50a6bd(0x1ab))[_0x50a6bd(0x141)][_0x50a6bd(0x14c)]='none',document[_0x50a6bd(0x277)](_0x50a6bd(0x284))[_0x50a6bd(0x13f)]=_0x5f3819[_0x50a6bd(0x2a2)],document[_0x50a6bd(0x277)](_0x50a6bd(0x1b2))[_0x50a6bd(0x13f)]=_0x5f3819['dateStr'],document['getElementById'](_0x50a6bd(0x298))[_0x50a6bd(0x13f)]=_0x5f3819[_0x50a6bd(0x28d)],document[_0x50a6bd(0x277)](_0x50a6bd(0x1bc))[_0x50a6bd(0x13f)]=_0x5f3819[_0x50a6bd(0x217)],document[_0x50a6bd(0x277)](_0x50a6bd(0x1e9))[_0x50a6bd(0x13f)]=_0x5f3819[_0x50a6bd(0x1d1)]||'',updateDateDisplay(),openSheet(_0x50a6bd(0x1a4));}async function trySaveSession(){const _0x320d9c=a2_0x2f1aa1,_0x251d9c=document[_0x320d9c(0x277)](_0x320d9c(0x284))[_0x320d9c(0x13f)],_0x201ae4=document[_0x320d9c(0x277)](_0x320d9c(0x1b2))[_0x320d9c(0x13f)],_0x29e3ae=document[_0x320d9c(0x277)](_0x320d9c(0x298))['value'],_0x4cd36e=document[_0x320d9c(0x277)](_0x320d9c(0x1bc))['value'],_0x25c258=document[_0x320d9c(0x277)](_0x320d9c(0x1e9))['value'],_0x396397=document[_0x320d9c(0x277)](_0x320d9c(0x12b))[_0x320d9c(0x1f1)];let _0x29e798=0x4;if(_0x396397){const _0x1ee0c7=parseInt(document[_0x320d9c(0x277)](_0x320d9c(0x216))['value']);if(!_0x1ee0c7||_0x1ee0c7<0x2){showToast(_0x320d9c(0x235),![]);return;}if(_0x1ee0c7>0x64){showToast('Максимум\x20100\x20за\x20раз',![]);return;}_0x29e798=_0x1ee0c7;}const _0x27223d=clients[_0x320d9c(0x16b)](_0x121d34=>_0x121d34['name']===_0x251d9c);if(!_0x27223d){showToast(_0x320d9c(0x19f),![]);return;}const _0x4753d5=validateAppointment(_0x201ae4,_0x29e3ae,_0x4cd36e,editingId,_0x27223d['id']);if(!_0x4753d5['valid']){showToast(_0x4753d5[_0x320d9c(0x1c5)],![]);return;}_0x4753d5[_0x320d9c(0x262)]&&showToast(_0x4753d5['warning'],![]);const _0x2d8282={'client':_0x251d9c,'clientId':_0x27223d['id'],'start':_0x29e3ae,'end':_0x4cd36e,'note':_0x25c258,'status':_0x320d9c(0x146)},_0x584209=editingId?sessions[_0x320d9c(0x16b)](_0x5849cc=>_0x5849cc['id']===editingId):null;if(_0x584209&&_0x584209['seriesId']){tempSessionData={..._0x2d8282,'dateStr':_0x201ae4,'id':editingId,'seriesId':_0x584209['seriesId']},openActionSheet('save');return;}let _0x3abc8c=null;if(!editingId)_0x3abc8c='create';else{if(_0x584209){if(String(_0x584209[_0x320d9c(0x12c)])!==String(_0x27223d['id']))console[_0x320d9c(0x292)]('[Notify]\x20Client\x20SWAP\x20detected'),NotificationManager[_0x320d9c(0x194)](_0x320d9c(0x14a),_0x584209),_0x3abc8c=_0x320d9c(0x1f6);else(_0x584209['start']!==_0x29e3ae||_0x584209[_0x320d9c(0x217)]!==_0x4cd36e||_0x584209[_0x320d9c(0x198)]!==_0x201ae4)&&(_0x3abc8c=_0x320d9c(0x232));}}if(!editingId&&_0x396397){createBatchSeries(_0x2d8282,_0x201ae4,_0x29e798),NotificationManager[_0x320d9c(0x194)](_0x320d9c(0x1f6),{..._0x2d8282,'dateStr':_0x201ae4});return;}lastUserActionTime=Date[_0x320d9c(0x286)]();const _0x56ea4c={..._0x2d8282,'dateStr':_0x201ae4,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x56ea4c),_0x3abc8c&&NotificationManager[_0x320d9c(0x194)](_0x3abc8c,_0x56ea4c);}function toggleSessionStatus(){const _0x33c7b2=a2_0x2f1aa1;lastUserActionTime=Date[_0x33c7b2(0x286)]();const _0x2df466=sessions[_0x33c7b2(0x16b)](_0xe823e=>_0xe823e['id']===editingId);if(!_0x2df466)return;const _0x3fdd19=_0x2df466[_0x33c7b2(0x17f)]===_0x33c7b2(0x179)?_0x33c7b2(0x146):_0x33c7b2(0x179);_0x2df466[_0x33c7b2(0x17f)]=_0x3fdd19,saveSingleSession(_0x2df466),_0x3fdd19===_0x33c7b2(0x179)&&NotificationManager[_0x33c7b2(0x194)]('complete',_0x2df466),showToast(_0x3fdd19===_0x33c7b2(0x179)?_0x33c7b2(0x280):_0x33c7b2(0x29b),!![]);}function validateAppointment(_0x15143d,_0x22483e,_0x262e88,_0x3036d2,_0x140254){const _0x434da6=a2_0x2f1aa1,[_0x5cdc2a,_0x521b3c]=_0x22483e[_0x434da6(0x13e)](':')[_0x434da6(0x182)](Number),[_0x515cde,_0x496273]=_0x262e88[_0x434da6(0x13e)](':')[_0x434da6(0x182)](Number),_0x954efb=_0x5cdc2a*0x3c+_0x521b3c,_0x41deff=_0x515cde*0x3c+_0x496273,_0x453252=String(_0x140254);let _0x117f69=![],_0x1319ed='';for(let _0x3de421 of sessions){if(_0x3de421[_0x434da6(0x198)]!==_0x15143d)continue;if(_0x3de421['status']===_0x434da6(0x193))continue;if(_0x3036d2&&String(_0x3de421['id'])===String(_0x3036d2))continue;const [_0x4050fc,_0x4c21c7]=_0x3de421[_0x434da6(0x28d)][_0x434da6(0x13e)](':')[_0x434da6(0x182)](Number),[_0x132adb,_0x3a78d6]=_0x3de421[_0x434da6(0x217)]['split'](':')[_0x434da6(0x182)](Number),_0xf97fe0=_0x4050fc*0x3c+_0x4c21c7,_0x45e076=_0x132adb*0x3c+_0x3a78d6;if(Math[_0x434da6(0x28f)](_0x954efb,_0xf97fe0)<Math[_0x434da6(0x229)](_0x41deff,_0x45e076)){if(_0x3de421[_0x434da6(0x12c)]&&String(_0x3de421[_0x434da6(0x12c)])===_0x453252)return{'valid':![],'msg':_0x434da6(0x14b)+_0x3de421['client']+_0x434da6(0x21e)};_0x117f69=!![],_0x1319ed=_0x3de421[_0x434da6(0x2a2)];}}if(_0x117f69)return{'valid':!![],'warning':_0x434da6(0x27c)+_0x1319ed};return{'valid':!![]};}function saveSingleSession(_0x1a9134){const _0x522b7a=a2_0x2f1aa1;if(editingId){const _0x3be423=sessions[_0x522b7a(0x27d)](_0x418e34=>_0x418e34['id']===editingId);if(_0x3be423!==-0x1)sessions[_0x3be423]=_0x1a9134;}else sessions['push'](_0x1a9134);afterSaveAction([_0x1a9134[_0x522b7a(0x198)]]);}function createBatchSeries(_0x59fd28,_0x56908e,_0x223972){const _0x395848=a2_0x2f1aa1,_0x82d3ac=generateId(),_0x33542b=[],_0x466cf2=[];let _0x2b622b=0x0,_0x2b1c8d=new Date(_0x56908e);for(let _0x180788=0x0;_0x180788<_0x223972;_0x180788++){const _0x251677=getLocalDateStr(_0x2b1c8d),_0x3f8542=validateAppointment(_0x251677,_0x59fd28[_0x395848(0x28d)],_0x59fd28[_0x395848(0x217)],null,_0x59fd28['clientId']);if(!_0x3f8542[_0x395848(0x272)])console[_0x395848(0x292)](_0x395848(0x1e4)+_0x251677+':\x20Client\x20already\x20booked'),_0x2b622b++;else{const _0x31ec3c={..._0x59fd28,'id':generateId(),'dateStr':_0x251677,'seriesId':_0x82d3ac};_0x466cf2['push'](_0x31ec3c),_0x33542b[_0x395848(0x281)](_0x251677);}_0x2b1c8d['setDate'](_0x2b1c8d['getDate']()+0x7);}if(_0x466cf2['length']===0x0){showToast(_0x395848(0x27f),![]);return;}sessions[_0x395848(0x281)](..._0x466cf2),lastUserActionTime=Date[_0x395848(0x286)]();let _0x44be8d=_0x395848(0x1bb)+_0x466cf2['length'];_0x2b622b>0x0&&(_0x44be8d+=_0x395848(0x13d)+_0x2b622b+')'),showToast(_0x44be8d,!![]),afterSaveAction(_0x33542b);}function updateSeriesBatch(_0x1ca26b,_0x2b194d){const _0xa77d08=a2_0x2f1aa1,_0x29bf39=[],_0x48ecb0=_0x2b194d[_0xa77d08(0x2a6)];if(_0x1ca26b===_0xa77d08(0x178)){const _0x251047={..._0x2b194d,'seriesId':null},_0x426acd=sessions[_0xa77d08(0x27d)](_0x169f82=>_0x169f82['id']===_0x2b194d['id']);if(_0x426acd!==-0x1)sessions[_0x426acd]=_0x251047;_0x29bf39[_0xa77d08(0x281)](_0x251047[_0xa77d08(0x198)]);}else{if(_0x1ca26b===_0xa77d08(0x205)){const _0xfda61d=_0x2b194d[_0xa77d08(0x198)];sessions[_0xa77d08(0x128)]((_0x3ba81f,_0x28d750)=>{const _0x33092f=_0xa77d08;_0x3ba81f[_0x33092f(0x2a6)]===_0x48ecb0&&_0x3ba81f['dateStr']>=_0xfda61d&&(sessions[_0x28d750]={...sessions[_0x28d750],'start':_0x2b194d[_0x33092f(0x28d)],'end':_0x2b194d[_0x33092f(0x217)],'note':_0x2b194d[_0x33092f(0x1d1)],'client':_0x2b194d[_0x33092f(0x2a2)],'clientId':_0x2b194d[_0x33092f(0x12c)]},_0x29bf39[_0x33092f(0x281)](_0x3ba81f[_0x33092f(0x198)]));});}}afterSaveAction(_0x29bf39);}function tryDeleteSession(){const _0x4a0bbd=a2_0x2f1aa1,_0x24afff=sessions[_0x4a0bbd(0x16b)](_0x5b097e=>_0x5b097e['id']===editingId);if(!_0x24afff)return;_0x24afff[_0x4a0bbd(0x2a6)]?openActionSheet('delete'):commitDelete(_0x4a0bbd(0x178),_0x24afff);}function commitDelete(_0x59af99,_0x982b58){const _0x53c96a=a2_0x2f1aa1;lastUserActionTime=Date[_0x53c96a(0x286)](),NotificationManager['send'](_0x53c96a(0x14a),_0x982b58);const _0x19ffa3=[];if(_0x59af99===_0x53c96a(0x178))sessions=sessions[_0x53c96a(0x16d)](_0x16ce00=>_0x16ce00['id']!==_0x982b58['id']),_0x19ffa3['push'](_0x982b58[_0x53c96a(0x198)]);else{if(_0x59af99==='series'){const _0x43cee6=_0x982b58[_0x53c96a(0x198)],_0x47b158=_0x982b58['seriesId'];sessions[_0x53c96a(0x128)](_0xce6f4d=>{const _0x6e9b82=_0x53c96a;_0xce6f4d[_0x6e9b82(0x2a6)]===_0x47b158&&_0xce6f4d[_0x6e9b82(0x198)]>=_0x43cee6&&_0x19ffa3[_0x6e9b82(0x281)](_0xce6f4d['dateStr']);}),sessions=sessions[_0x53c96a(0x16d)](_0x5b62aa=>!(_0x5b62aa[_0x53c96a(0x2a6)]===_0x47b158&&_0x5b62aa[_0x53c96a(0x198)]>=_0x43cee6));}}afterSaveAction(_0x19ffa3);}function afterSaveAction(_0x57ab65){const _0x535f6f=a2_0x2f1aa1;DataManager[_0x535f6f(0x1d9)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x535f6f(0x144)](_0x57ab65)[_0x535f6f(0x159)](()=>console['log']('Batch\x20Sync\x20OK'))['catch'](_0x349f60=>showToast('Ошибка\x20сохранения\x20в\x20облако',![]));}const NotificationManager={'formatDate'(_0x516635){const _0x2ae57e=a2_0x2f1aa1,_0xbd3ddc=new Date(_0x516635),_0x20c5a4={'weekday':_0x2ae57e(0x239),'day':_0x2ae57e(0x1cd),'month':_0x2ae57e(0x239)};let _0x3576de=_0xbd3ddc['toLocaleDateString'](_0x2ae57e(0x12e),_0x20c5a4);return _0x3576de[_0x2ae57e(0x1bf)](0x0)[_0x2ae57e(0x1ba)]()+_0x3576de[_0x2ae57e(0x21b)](0x1);},'getText'(_0x145f74,_0x5a9273){const _0x3cb5ed=a2_0x2f1aa1,_0x1c86d8=this['formatDate'](_0x5a9273['dateStr']);switch(_0x145f74){case _0x3cb5ed(0x1f6):return _0x3cb5ed(0x23d)+(_0x3cb5ed(0x188)+_0x1c86d8+'\x0a')+(_0x3cb5ed(0x1a0)+_0x5a9273['start']+_0x3cb5ed(0x287)+_0x5a9273['end']+'\x0a\x0a')+_0x3cb5ed(0x282);case _0x3cb5ed(0x232):return _0x3cb5ed(0x26a)+'Ваша\x20тренировка\x20перенесена:\x0a\x0a'+('<b>✅\x20'+_0x5a9273[_0x3cb5ed(0x28d)]+_0x3cb5ed(0x287)+_0x5a9273['end']+_0x3cb5ed(0x27b))+(_0x3cb5ed(0x188)+_0x1c86d8);case'cancel':return _0x3cb5ed(0x201)+('Запись\x20на\x20<b>'+_0x1c86d8+'\x20('+_0x5a9273[_0x3cb5ed(0x28d)]+_0x3cb5ed(0x176));case _0x3cb5ed(0x234):return _0x3cb5ed(0x220)+_0x3cb5ed(0x1ac)+_0x3cb5ed(0x130);default:return'';}},async 'send'(_0x48a2d5,_0x584802){const _0x42010c=a2_0x2f1aa1;console['log'](_0x42010c(0x17c),_0x48a2d5,_0x584802);if(!_0x584802){console[_0x42010c(0x24b)](_0x42010c(0x195));return;}const _0x33a783=String(_0x584802[_0x42010c(0x12c)]);console['log'](_0x42010c(0x240),_0x33a783);if(!_0x584802[_0x42010c(0x12c)]||_0x33a783===_0x42010c(0x258)||_0x33a783==='null'){console['error']('[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!');if(_0x584802[_0x42010c(0x2a2)]){const _0x12a976=clients[_0x42010c(0x16b)](_0x4ac7e8=>_0x4ac7e8[_0x42010c(0x257)]===_0x584802[_0x42010c(0x2a2)]);if(_0x12a976)return console[_0x42010c(0x292)]('[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:',_0x12a976['id']),this[_0x42010c(0x194)](_0x48a2d5,{..._0x584802,'clientId':_0x12a976['id']});}return;}if(_0x33a783[_0x42010c(0x237)]<0x5){console[_0x42010c(0x170)](_0x42010c(0x16f),_0x33a783);return;}const _0x29a55f=this['getText'](_0x48a2d5,_0x584802);if(!_0x29a55f){console[_0x42010c(0x24b)](_0x42010c(0x1f5));return;}console[_0x42010c(0x292)]('[Notify]\x20Sending\x20to\x20GAS\x20for\x20'+_0x33a783+_0x42010c(0x19a)),DataManager[_0x42010c(0x1e1)](_0x42010c(0x1e6),{'chatId':_0x33a783,'text':_0x29a55f})[_0x42010c(0x159)](_0x26e18c=>console[_0x42010c(0x292)]('[Notify]\x20Server\x20Response:',_0x26e18c))[_0x42010c(0x28e)](_0x4e07cc=>console[_0x42010c(0x24b)](_0x42010c(0x1c1),_0x4e07cc));}};function getLocalDateStr(_0x257b15){const _0x2add21=a2_0x2f1aa1,_0x34eb70=_0x257b15['getFullYear'](),_0x54a619=String(_0x257b15[_0x2add21(0x278)]()+0x1)[_0x2add21(0x16c)](0x2,'0'),_0x238717=String(_0x257b15[_0x2add21(0x19e)]())[_0x2add21(0x16c)](0x2,'0');return _0x34eb70+'-'+_0x54a619+'-'+_0x238717;}function getDateStr(_0x3ad7cf){const _0x1fb1f4=a2_0x2f1aa1,_0x4944e1=new Date();return _0x4944e1[_0x1fb1f4(0x27a)](_0x4944e1[_0x1fb1f4(0x19e)]()+_0x3ad7cf),getLocalDateStr(_0x4944e1);}function getStartOfWeek(_0x49eb8e){const _0x5168f0=a2_0x2f1aa1,_0x5ba784=(function(){let _0x2acbe2=!![];return function(_0x4afcb4,_0x5a235b){const _0x1be129=_0x2acbe2?function(){const _0xe70c4d=a2_0x3d3f;if(_0x5a235b){const _0x1855ad=_0x5a235b[_0xe70c4d(0x1fd)](_0x4afcb4,arguments);return _0x5a235b=null,_0x1855ad;}}:function(){};return _0x2acbe2=![],_0x1be129;};}()),_0x47e627=_0x5ba784(this,function(){const _0x109bce=a2_0x3d3f;return _0x47e627[_0x109bce(0x296)]()[_0x109bce(0x1b1)](_0x109bce(0x256))['toString']()[_0x109bce(0x147)](_0x47e627)[_0x109bce(0x1b1)]('(((.+)+)+)+$');});_0x47e627();const _0x5e74e1=new Date(_0x49eb8e),_0x523c1b=_0x5e74e1[_0x5168f0(0x218)](),_0x1f282c=_0x5e74e1[_0x5168f0(0x19e)]()-_0x523c1b+(_0x523c1b===0x0?-0x6:0x1);return _0x5e74e1['setDate'](_0x1f282c),_0x5e74e1[_0x5168f0(0x12f)](0x0,0x0,0x0,0x0),_0x5e74e1;}function hexToRgba(_0x437825,_0x59cffd){const _0x1fa249=a2_0x2f1aa1;if(!_0x437825)return _0x1fa249(0x254);let _0x5240e2=0x0,_0x1bb13d=0x0,_0x56357a=0x0;if(_0x437825[_0x1fa249(0x237)]===0x4)_0x5240e2='0x'+_0x437825[0x1]+_0x437825[0x1],_0x1bb13d='0x'+_0x437825[0x2]+_0x437825[0x2],_0x56357a='0x'+_0x437825[0x3]+_0x437825[0x3];else _0x437825[_0x1fa249(0x237)]===0x7&&(_0x5240e2='0x'+_0x437825[0x1]+_0x437825[0x2],_0x1bb13d='0x'+_0x437825[0x3]+_0x437825[0x4],_0x56357a='0x'+_0x437825[0x5]+_0x437825[0x6]);return _0x1fa249(0x1a3)+ +_0x5240e2+',\x20'+ +_0x1bb13d+',\x20'+ +_0x56357a+',\x20'+_0x59cffd+')';}function renderTimeColumn(){const _0x2ee0c2=a2_0x2f1aa1,_0x73ab8e=document['getElementById'](_0x2ee0c2(0x12a)),_0x14f6a9=document[_0x2ee0c2(0x277)](_0x2ee0c2(0x288));_0x73ab8e['innerHTML']='',_0x73ab8e['appendChild'](_0x14f6a9);for(let _0x539deb=0x0;_0x539deb<0x18;_0x539deb++){const _0x4a0028=document[_0x2ee0c2(0x1d0)]('div');_0x4a0028[_0x2ee0c2(0x1c7)]=_0x2ee0c2(0x273);if(_0x539deb>0x0)_0x4a0028['innerHTML']=_0x2ee0c2(0x2a1)+String(_0x539deb)[_0x2ee0c2(0x16c)](0x2,'0')+':00</span>';_0x73ab8e['appendChild'](_0x4a0028);}}function renderDayRange(_0x4b3e22,_0x33f734){const _0xc63759=a2_0x2f1aa1,_0x1668db=document[_0xc63759(0x277)](_0xc63759(0x17d)),_0x440eb0=document[_0xc63759(0x277)](_0xc63759(0x17e)),_0x49a641=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x2d6102=new Date();_0x2d6102[_0xc63759(0x12f)](0x0,0x0,0x0,0x0);const _0x5db6b1=getLocalDateStr(new Date());for(let _0x4a206c=_0x4b3e22;_0x4a206c<=_0x33f734;_0x4a206c++){const _0x2cc738=new Date(_0x2d6102);_0x2cc738[_0xc63759(0x27a)](_0x2cc738[_0xc63759(0x19e)]()+_0x4a206c);const _0x31ffcc=getLocalDateStr(_0x2cc738);let _0x4095fc=_0x2cc738[_0xc63759(0x218)]()-0x1;if(_0x4095fc===-0x1)_0x4095fc=0x6;const _0x280403=_0x31ffcc===_0x5db6b1,_0x576050=document[_0xc63759(0x1d0)](_0xc63759(0x293));_0x576050[_0xc63759(0x1c7)]=_0xc63759(0x225)+(_0x280403?_0xc63759(0x133):''),_0x576050['id']=_0xc63759(0x1e7)+_0x31ffcc,_0x576050[_0xc63759(0x134)](_0xc63759(0x23c),_0x31ffcc),_0x576050[_0xc63759(0x12d)]=_0xc63759(0x290)+_0x49a641[_0x4095fc]+_0xc63759(0x25a)+_0x2cc738[_0xc63759(0x19e)]()+_0xc63759(0x1f4)+_0x31ffcc+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x576050[_0xc63759(0x1f9)]=()=>openDayOptions(_0x31ffcc,_0x49a641[_0x4095fc]+'\x20'+_0x2cc738['getDate']()),_0x1668db[_0xc63759(0x2a8)](_0x576050);const _0x3d3b0b=document[_0xc63759(0x1d0)](_0xc63759(0x293));_0x3d3b0b['className']=_0xc63759(0x2ae)+(_0x280403?_0xc63759(0x133):''),_0x3d3b0b['setAttribute']('data-date',_0x31ffcc),_0x3d3b0b['setAttribute']('data-day-idx',_0x4095fc),renderEventsForColumn(_0x3d3b0b,_0x31ffcc,_0x4095fc),attachLongPressHandler(_0x3d3b0b,_0x2cc738),_0x440eb0[_0xc63759(0x2a8)](_0x3d3b0b),updateDayStats(_0x31ffcc);}}function reRenderBlocks(){const _0x59050b=a2_0x2f1aa1;document['querySelectorAll']('#gridColumns\x20.day-column')[_0x59050b(0x128)](_0x1c374f=>{const _0x440179=_0x59050b;_0x1c374f['querySelectorAll']('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')['forEach'](_0x1d6542=>_0x1d6542[_0x440179(0x1fc)]());const _0x4964f1=_0x1c374f['getAttribute'](_0x440179(0x23c)),_0x21b524=parseInt(_0x1c374f[_0x440179(0x173)](_0x440179(0x17a))),_0x18787c=Math[_0x440179(0x1f3)](_0x1c374f[_0x440179(0x21a)]);(availabilityPattern[_0x21b524]||[])[_0x440179(0x128)](_0x9f4aff=>{const _0x38d30c=_0x440179,_0x33c925=document['createElement']('div');_0x33c925[_0x38d30c(0x1c7)]=_0x38d30c(0x145);const _0x323b3d=_0x9f4aff*GRID_H;_0x33c925['style'][_0x38d30c(0x18d)]=_0x323b3d+'px',_0x33c925[_0x38d30c(0x141)][_0x38d30c(0x138)]='-'+_0x18787c+_0x38d30c(0x20d)+_0x323b3d+'px',_0x1c374f[_0x38d30c(0x2a8)](_0x33c925);});if(specialRanges&&specialRanges[_0x440179(0x237)]>0x0){const _0x18fe25=new Date(_0x4964f1+_0x440179(0x171))[_0x440179(0x2a9)](),_0x3a2332=new Date(_0x4964f1+_0x440179(0x230))['getTime']();specialRanges[_0x440179(0x128)](_0x101505=>{const _0x5c6afd=_0x440179,_0x3b0ee6=new Date(_0x101505[_0x5c6afd(0x28d)])[_0x5c6afd(0x2a9)](),_0x45bb31=new Date(_0x101505[_0x5c6afd(0x217)])[_0x5c6afd(0x2a9)](),_0x39517e=Math[_0x5c6afd(0x28f)](_0x18fe25,_0x3b0ee6),_0x6d4c2d=Math[_0x5c6afd(0x229)](_0x3a2332,_0x45bb31);if(_0x39517e<_0x6d4c2d){if(_0x39517e<=_0x18fe25&&_0x6d4c2d>=_0x3a2332-0xea60){if(!_0x1c374f[_0x5c6afd(0x1c2)](_0x5c6afd(0x168))){const _0x457a4c=document[_0x5c6afd(0x1d0)](_0x5c6afd(0x293));_0x457a4c[_0x5c6afd(0x1c7)]=_0x5c6afd(0x271),_0x457a4c[_0x5c6afd(0x141)][_0x5c6afd(0x138)]='-'+_0x18787c+'px\x200px',_0x1c374f[_0x5c6afd(0x2a8)](_0x457a4c);}}else{const _0xcb9c1b=(_0x39517e-_0x18fe25)/0x36ee80*GRID_H,_0xcc89b8=(_0x6d4c2d-_0x39517e)/0x36ee80*GRID_H,_0x26fe49=document['createElement'](_0x5c6afd(0x293));_0x26fe49['className']=_0x5c6afd(0x25f),_0x26fe49[_0x5c6afd(0x141)][_0x5c6afd(0x18d)]=_0xcb9c1b+'px',_0x26fe49['style'][_0x5c6afd(0x180)]=_0xcc89b8+'px',_0x26fe49[_0x5c6afd(0x141)][_0x5c6afd(0x138)]='-'+_0x18787c+_0x5c6afd(0x20d)+_0xcb9c1b+'px',_0x1c374f['appendChild'](_0x26fe49);}}});}if(dateExceptions[_0x4964f1]===_0x440179(0x25d)){if(!_0x1c374f[_0x440179(0x1c2)](_0x440179(0x168))){const _0x57d636=document[_0x440179(0x1d0)](_0x440179(0x293));_0x57d636[_0x440179(0x1c7)]='day-off-overlay\x20stripe-bg',_0x57d636['style'][_0x440179(0x138)]='-'+_0x18787c+_0x440179(0x142),_0x1c374f['appendChild'](_0x57d636);}}renderEventsForColumn(_0x1c374f,_0x4964f1,_0x21b524),updateDayStats(_0x4964f1);});}function updateAllDayStats(){const _0x3d5a4e=a2_0x2f1aa1;document[_0x3d5a4e(0x158)]('.day-col-header')[_0x3d5a4e(0x128)](_0x5b3922=>{const _0xc973ff=_0x3d5a4e;updateDayStats(_0x5b3922[_0xc973ff(0x173)]('data-date'));});}function updateDayStats(_0x528b20){const _0x4638cd=a2_0x2f1aa1,_0x2b228f=document['getElementById'](_0x4638cd(0x1c6)+_0x528b20);if(!_0x2b228f)return;const _0xdbe71f=new Date(_0x528b20);let _0x2972a5=_0xdbe71f['getDay']()-0x1;if(_0x2972a5===-0x1)_0x2972a5=0x6;if(dateExceptions[_0x528b20]===_0x4638cd(0x25d)){_0x2b228f[_0x4638cd(0x141)][_0x4638cd(0x14c)]=_0x4638cd(0x22a);return;}const _0x4655fe=availabilityPattern[_0x2972a5]||[],_0x1a9d97=0x18-_0x4655fe[_0x4638cd(0x237)],_0x164489=_0x1a9d97*0x3c,_0x55bb2f=sessions['filter'](_0x2a1264=>_0x2a1264[_0x4638cd(0x198)]===_0x528b20&&_0x2a1264['status']!==_0x4638cd(0x193));if(_0x55bb2f[_0x4638cd(0x237)]===0x0){_0x2b228f[_0x4638cd(0x141)][_0x4638cd(0x14c)]=_0x4638cd(0x22a);return;}let _0x55b262=_0x55bb2f[_0x4638cd(0x182)](_0x5a97af=>{const _0x2f5211=_0x4638cd,[_0x4e2348,_0x5a6d1f]=_0x5a97af['start'][_0x2f5211(0x13e)](':')[_0x2f5211(0x182)](Number),[_0x4f1f70,_0x3cdf71]=_0x5a97af[_0x2f5211(0x217)][_0x2f5211(0x13e)](':')['map'](Number);return[_0x4e2348*0x3c+_0x5a6d1f,_0x4f1f70*0x3c+_0x3cdf71];});_0x55b262['sort']((_0x3710bc,_0x370841)=>_0x3710bc[0x0]-_0x370841[0x0]);let _0x2cc6d8=[];if(_0x55b262[_0x4638cd(0x237)]>0x0){let _0x4f2dfe=_0x55b262[0x0];for(let _0x3cf4fe=0x1;_0x3cf4fe<_0x55b262[_0x4638cd(0x237)];_0x3cf4fe++){_0x55b262[_0x3cf4fe][0x0]<_0x4f2dfe[0x1]?_0x4f2dfe[0x1]=Math[_0x4638cd(0x28f)](_0x4f2dfe[0x1],_0x55b262[_0x3cf4fe][0x1]):(_0x2cc6d8[_0x4638cd(0x281)](_0x4f2dfe),_0x4f2dfe=_0x55b262[_0x3cf4fe]);}_0x2cc6d8[_0x4638cd(0x281)](_0x4f2dfe);}let _0x3e0511=0x0;_0x2cc6d8[_0x4638cd(0x128)](_0x1179c6=>_0x3e0511+=_0x1179c6[0x1]-_0x1179c6[0x0]),_0x2b228f[_0x4638cd(0x141)]['display']=_0x4638cd(0x275);const _0x144f37=_0x2b228f[_0x4638cd(0x1c2)](_0x4638cd(0x200));if(_0x164489===0x0){_0x144f37[_0x4638cd(0x141)][_0x4638cd(0x26b)]=_0x4638cd(0x26c),_0x144f37[_0x4638cd(0x141)][_0x4638cd(0x1e8)]=_0x4638cd(0x13b);return;}const _0x1262c5=_0x3e0511/_0x164489*0x64;console[_0x4638cd(0x292)]('['+_0x528b20+_0x4638cd(0x22c)+_0x1a9d97+_0x4638cd(0x294)+_0x3e0511+_0x4638cd(0x184)+_0x1262c5[_0x4638cd(0x269)](0x1)+'%'),_0x1262c5>0x64?(_0x144f37[_0x4638cd(0x141)][_0x4638cd(0x26b)]=_0x4638cd(0x26c),_0x144f37[_0x4638cd(0x141)][_0x4638cd(0x1e8)]=_0x4638cd(0x13b)):(_0x144f37[_0x4638cd(0x141)][_0x4638cd(0x26b)]=_0x1262c5+'%',_0x144f37[_0x4638cd(0x141)][_0x4638cd(0x1e8)]=_0x4638cd(0x15e));}function renderEventsForColumn(_0x1b287c,_0x17d345,_0x128c52){const _0x319f58=a2_0x2f1aa1,_0x8d71cf=sessions[_0x319f58(0x16d)](_0x2dc1a9=>_0x2dc1a9['dateStr']===_0x17d345),_0x1a356e=_0x8d71cf[_0x319f58(0x182)](_0x1cfbbb=>{const _0x5bd224=_0x319f58,[_0x5b1a32,_0x230860]=_0x1cfbbb[_0x5bd224(0x28d)][_0x5bd224(0x13e)](':')['map'](Number),[_0x17553b,_0x264b94]=_0x1cfbbb[_0x5bd224(0x217)][_0x5bd224(0x13e)](':')[_0x5bd224(0x182)](Number);return{'data':_0x1cfbbb,'start':_0x5b1a32*0x3c+_0x230860,'end':_0x17553b*0x3c+_0x264b94,'colIndex':0x0};});_0x1a356e[_0x319f58(0x20e)]((_0x4eed0b,_0xf69acf)=>{const _0x583723=_0x319f58;if(_0x4eed0b[_0x583723(0x28d)]!==_0xf69acf[_0x583723(0x28d)])return _0x4eed0b[_0x583723(0x28d)]-_0xf69acf[_0x583723(0x28d)];return _0xf69acf[_0x583723(0x217)]-_0xf69acf['start']-(_0x4eed0b['end']-_0x4eed0b[_0x583723(0x28d)]);});const _0x377981=[];_0x1a356e[_0x319f58(0x128)](_0x3266fe=>{const _0x403837=_0x319f58;let _0xb7b086=![];for(let _0x2a44bc=0x0;_0x2a44bc<_0x377981[_0x403837(0x237)];_0x2a44bc++){const _0x327004=_0x377981[_0x2a44bc],_0x52f0ba=_0x327004[_0x327004[_0x403837(0x237)]-0x1];if(_0x3266fe[_0x403837(0x28d)]>=_0x52f0ba[_0x403837(0x217)]){_0x327004[_0x403837(0x281)](_0x3266fe),_0x3266fe[_0x403837(0x191)]=_0x2a44bc,_0xb7b086=!![];break;}}!_0xb7b086&&(_0x377981[_0x403837(0x281)]([_0x3266fe]),_0x3266fe[_0x403837(0x191)]=_0x377981[_0x403837(0x237)]-0x1);}),_0x1a356e[_0x319f58(0x128)](_0x202311=>{const _0x5ac202=_0x319f58;let _0x39d17e=0x0;_0x1a356e[_0x5ac202(0x128)](_0x68f7f=>{const _0x43ddc7=_0x5ac202;if(Math[_0x43ddc7(0x28f)](_0x202311['start'],_0x68f7f[_0x43ddc7(0x28d)])<Math['min'](_0x202311[_0x43ddc7(0x217)],_0x68f7f[_0x43ddc7(0x217)])){if(_0x68f7f[_0x43ddc7(0x191)]>_0x39d17e)_0x39d17e=_0x68f7f[_0x43ddc7(0x191)];}});const _0x54fb21=_0x39d17e+0x1,_0x428ef1=0x64/_0x54fb21,_0x28f5e7=_0x202311[_0x5ac202(0x191)]*_0x428ef1,_0x2780da=createEventEl(_0x202311[_0x5ac202(0x17b)]);_0x2780da[_0x5ac202(0x141)][_0x5ac202(0x26b)]=_0x5ac202(0x148)+_0x428ef1+_0x5ac202(0x1ad),_0x2780da[_0x5ac202(0x141)][_0x5ac202(0x174)]=_0x5ac202(0x148)+_0x28f5e7+_0x5ac202(0x2ab),_0x2780da['style'][_0x5ac202(0x18a)]=0xa+_0x202311[_0x5ac202(0x191)],_0x428ef1<0x55&&_0x2780da[_0x5ac202(0x242)][_0x5ac202(0x1d2)](_0x5ac202(0x244)),_0x1b287c[_0x5ac202(0x2a8)](_0x2780da);});}function createEventEl(_0x4bba71){const _0x251a9b=a2_0x2f1aa1,[_0x48b17d,_0x312009]=_0x4bba71[_0x251a9b(0x28d)][_0x251a9b(0x13e)](':')[_0x251a9b(0x182)](Number),[_0x49dc31,_0x371495]=_0x4bba71['end'][_0x251a9b(0x13e)](':')['map'](Number),_0x68691d=(_0x48b17d*0x3c+_0x312009)/0x3c*GRID_H,_0x3416f5=(_0x49dc31*0x3c+_0x371495-(_0x48b17d*0x3c+_0x312009))/0x3c*GRID_H,_0x584a74=document[_0x251a9b(0x1d0)]('div'),_0x4c7cf2=_0x4bba71[_0x251a9b(0x17f)]===_0x251a9b(0x179)?_0x251a9b(0x261):'';_0x584a74[_0x251a9b(0x1c7)]='event-card'+_0x4c7cf2,_0x584a74[_0x251a9b(0x141)]['top']=_0x68691d+'px',_0x584a74[_0x251a9b(0x141)][_0x251a9b(0x180)]=Math[_0x251a9b(0x28f)](_0x3416f5,0x14)+'px';const _0x287da1=clients['find'](_0x54aa51=>_0x4bba71[_0x251a9b(0x12c)]&&String(_0x54aa51['id'])===String(_0x4bba71['clientId'])||_0x54aa51[_0x251a9b(0x257)]===_0x4bba71[_0x251a9b(0x2a2)]),_0x35fa32=_0x287da1?_0x287da1[_0x251a9b(0x1c3)]:'#0a84ff';_0x584a74['style']['borderLeftColor']=_0x35fa32,_0x584a74[_0x251a9b(0x141)][_0x251a9b(0x29d)]=hexToRgba(_0x35fa32,0.85);let _0x1e8195=_0x251a9b(0x1dc)+_0x4bba71[_0x251a9b(0x2a2)]+_0x251a9b(0x22e)+_0x4bba71['start']+_0x251a9b(0x13a)+_0x4bba71[_0x251a9b(0x217)]+_0x251a9b(0x153);return _0x4bba71[_0x251a9b(0x2a6)]&&(_0x1e8195+=_0x251a9b(0x1ef)),_0x4bba71[_0x251a9b(0x17f)]===_0x251a9b(0x179)&&(_0x1e8195+=_0x251a9b(0x1ed)),_0x584a74[_0x251a9b(0x12d)]=_0x1e8195,_0x584a74[_0x251a9b(0x1f9)]=_0x372fb1=>{const _0x267a5d=_0x251a9b;_0x372fb1[_0x267a5d(0x24d)](),openEdit(_0x4bba71);},_0x584a74;}function attachLongPressHandler(_0x285417,_0x2c51aa){const _0x535e97=a2_0x2f1aa1;let _0x20b2e3=0x0,_0x4a31c4=null;const _0x3b9701=_0x6edf84=>{const _0x1f1bea=a2_0x3d3f;if(_0x6edf84['target'][_0x1f1bea(0x1f8)]('.event-card'))return;isScrolling=![],_0x20b2e3=_0x6edf84[_0x1f1bea(0x15a)]?_0x6edf84[_0x1f1bea(0x15a)][0x0][_0x1f1bea(0x212)]:_0x6edf84['clientY'],_0x4a31c4=setTimeout(()=>{const _0x2b0574=_0x1f1bea;if(!isScrolling){navigator[_0x2b0574(0x186)]?.(0x32);const _0x3fdccb=_0x285417[_0x2b0574(0x243)](),_0x5680ce=Math[_0x2b0574(0x241)]((_0x20b2e3-_0x3fdccb[_0x2b0574(0x18d)])/GRID_H);_0x2c51aa[_0x2b0574(0x12f)](_0x5680ce,0x0),openAddSession(_0x2c51aa);}},0x1f4);},_0x28828a=()=>{isScrolling=!![],clearTimeout(_0x4a31c4);},_0x32153b=()=>{clearTimeout(_0x4a31c4);};_0x285417[_0x535e97(0x23b)](_0x535e97(0x1db),_0x3b9701,{'passive':!![]}),_0x285417[_0x535e97(0x23b)](_0x535e97(0x1c8),_0x28828a,{'passive':!![]}),_0x285417['addEventListener'](_0x535e97(0x1eb),_0x32153b),_0x285417[_0x535e97(0x23b)](_0x535e97(0x1a5),_0x3b9701),_0x285417[_0x535e97(0x23b)](_0x535e97(0x2a7),_0x28828a),_0x285417[_0x535e97(0x23b)](_0x535e97(0x2a0),_0x32153b);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x3b4ece=a2_0x2f1aa1,_0x3f9fd0=document['getElementById']('matrixViewport'),_0x59ac11=_0x3f9fd0['scrollLeft'],_0x5a1cec=_0x3f9fd0[_0x3b4ece(0x137)],_0x164eca=_0x3f9fd0[_0x3b4ece(0x1de)];if(_0x5a1cec-(_0x59ac11+_0x164eca)<0x12c){const _0x2bbf33=endOffset;endOffset+=0xe,renderDayRange(_0x2bbf33+0x1,endOffset),reRenderBlocks();}if(_0x59ac11<0x12c){const _0x5dd797=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5dd797-0x1),_0x3f9fd0['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1ef6f6,_0x4c019c){const _0x21dd82=a2_0x2f1aa1,_0x3d08cf=document[_0x21dd82(0x277)](_0x21dd82(0x17d)),_0x4d9f91=document['getElementById']('gridColumns'),_0x77aff8=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x58dd26=new Date();_0x58dd26[_0x21dd82(0x12f)](0x0,0x0,0x0,0x0);const _0x291e9a=getLocalDateStr(new Date()),_0x4e0127=document[_0x21dd82(0x16e)](),_0x29e7bc=document[_0x21dd82(0x16e)]();for(let _0x487953=_0x1ef6f6;_0x487953<=_0x4c019c;_0x487953++){const _0x558608=new Date(_0x58dd26);_0x558608[_0x21dd82(0x27a)](_0x558608[_0x21dd82(0x19e)]()+_0x487953);const _0x5a19a=getLocalDateStr(_0x558608);let _0x48f6ca=_0x558608[_0x21dd82(0x218)]()-0x1;if(_0x48f6ca===-0x1)_0x48f6ca=0x6;const _0x2241d4=_0x5a19a===_0x291e9a,_0x36802f=document[_0x21dd82(0x1d0)](_0x21dd82(0x293));_0x36802f['className']='day-col-header\x20'+(_0x2241d4?_0x21dd82(0x133):''),_0x36802f['id']=_0x21dd82(0x1e7)+_0x5a19a,_0x36802f['setAttribute']('data-date',_0x5a19a),_0x36802f[_0x21dd82(0x12d)]=_0x21dd82(0x290)+_0x77aff8[_0x48f6ca]+_0x21dd82(0x25a)+_0x558608[_0x21dd82(0x19e)]()+'</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-'+_0x5a19a+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x36802f[_0x21dd82(0x1f9)]=()=>openDayOptions(_0x5a19a,_0x77aff8[_0x48f6ca]+'\x20'+_0x558608['getDate']()),_0x4e0127[_0x21dd82(0x2a8)](_0x36802f);const _0xf491d0=document[_0x21dd82(0x1d0)](_0x21dd82(0x293));_0xf491d0[_0x21dd82(0x1c7)]='day-column\x20'+(_0x2241d4?_0x21dd82(0x133):''),_0xf491d0[_0x21dd82(0x134)](_0x21dd82(0x23c),_0x5a19a),_0xf491d0[_0x21dd82(0x134)]('data-day-idx',_0x48f6ca),renderEventsForColumn(_0xf491d0,_0x5a19a,_0x48f6ca),attachLongPressHandler(_0xf491d0,_0x558608),_0x29e7bc[_0x21dd82(0x2a8)](_0xf491d0),updateDayStats(_0x5a19a);}_0x3d08cf[_0x21dd82(0x199)](_0x4e0127,_0x3d08cf[_0x21dd82(0x150)]),_0x4d9f91[_0x21dd82(0x199)](_0x29e7bc,_0x4d9f91[_0x21dd82(0x1c2)](_0x21dd82(0x143)));}function validateAppointment(_0x547119,_0x5158fb,_0x41baf3,_0x170349,_0xf2e253){const _0x55ce32=a2_0x2f1aa1,[_0x21651d,_0x56f6ab]=_0x5158fb[_0x55ce32(0x13e)](':')[_0x55ce32(0x182)](Number),[_0x287fb9,_0x551298]=_0x41baf3['split'](':')[_0x55ce32(0x182)](Number),_0x529d3a=_0x21651d*0x3c+_0x56f6ab,_0x87d700=_0x287fb9*0x3c+_0x551298,_0xff775c=String(_0xf2e253);let _0xf0b15=![],_0x4f9a75='';for(let _0x13e6b3 of sessions){if(_0x13e6b3[_0x55ce32(0x198)]!==_0x547119)continue;if(_0x13e6b3[_0x55ce32(0x17f)]===_0x55ce32(0x193))continue;if(_0x170349&&String(_0x13e6b3['id'])===String(_0x170349))continue;const [_0x1b029a,_0xa43620]=_0x13e6b3[_0x55ce32(0x28d)][_0x55ce32(0x13e)](':')[_0x55ce32(0x182)](Number),[_0x3e2d85,_0x49d8d5]=_0x13e6b3[_0x55ce32(0x217)]['split'](':')[_0x55ce32(0x182)](Number),_0x526df4=_0x1b029a*0x3c+_0xa43620,_0x43c18f=_0x3e2d85*0x3c+_0x49d8d5;if(Math[_0x55ce32(0x28f)](_0x529d3a,_0x526df4)<Math[_0x55ce32(0x229)](_0x87d700,_0x43c18f)){if(_0x13e6b3[_0x55ce32(0x12c)]&&String(_0x13e6b3[_0x55ce32(0x12c)])===_0xff775c)return{'valid':![],'msg':_0x55ce32(0x14b)+_0x13e6b3[_0x55ce32(0x2a2)]+')\x20уже\x20записан\x20на\x20это\x20время!'};_0xf0b15=!![],_0x4f9a75=_0x13e6b3['client'];}}if(_0xf0b15)return{'valid':!![],'warning':_0x55ce32(0x27c)+_0x4f9a75};return{'valid':!![]};}function updateDateDisplay(){const _0x4ef30f=a2_0x2f1aa1,_0x4cfce7=document[_0x4ef30f(0x277)](_0x4ef30f(0x1b2))[_0x4ef30f(0x13f)],_0x4ef14a=document[_0x4ef30f(0x277)](_0x4ef30f(0x13c));if(!_0x4cfce7){_0x4ef14a['textContent']='';return;}const [_0x14d59f,_0x55199a,_0x55cf35]=_0x4cfce7['split']('-')[_0x4ef30f(0x182)](Number),_0x49eaaa=new Date(_0x14d59f,_0x55199a-0x1,_0x55cf35),_0x2b22f9={'weekday':'long','day':'numeric','month':_0x4ef30f(0x239),'year':_0x4ef30f(0x1cd)};let _0x4d953f=_0x49eaaa[_0x4ef30f(0x283)](_0x4ef30f(0x12e),_0x2b22f9);_0x4d953f=_0x4d953f['charAt'](0x0)[_0x4ef30f(0x1ba)]()+_0x4d953f[_0x4ef30f(0x21b)](0x1),_0x4ef14a[_0x4ef30f(0x1da)]=_0x4d953f;}function autoSetEndTime(){const _0x26e52a=a2_0x2f1aa1,_0x34b850=document[_0x26e52a(0x277)](_0x26e52a(0x298))['value'];if(!_0x34b850)return;const [_0x47326b,_0x130dce]=_0x34b850[_0x26e52a(0x13e)](':')[_0x26e52a(0x182)](Number);let _0x4fba91=_0x47326b+0x1;if(_0x4fba91>0x17)_0x4fba91=0x0;const _0x12077e=String(_0x4fba91)['padStart'](0x2,'0')+':'+String(_0x130dce)[_0x26e52a(0x16c)](0x2,'0');document['getElementById']('inpEnd')[_0x26e52a(0x13f)]=_0x12077e;}function populateClientSelect(){const _0x9d475a=a2_0x2f1aa1,_0x12b7fb=document[_0x9d475a(0x277)](_0x9d475a(0x284));_0x12b7fb[_0x9d475a(0x12d)]='';if(clients[_0x9d475a(0x237)]===0x0){const _0x240d9a=document[_0x9d475a(0x1d0)](_0x9d475a(0x1f0));_0x240d9a[_0x9d475a(0x29c)]=_0x9d475a(0x21f),_0x12b7fb[_0x9d475a(0x2a8)](_0x240d9a);return;}clients[_0x9d475a(0x128)](_0x5e496f=>{const _0x508ef8=_0x9d475a,_0x1872db=document[_0x508ef8(0x1d0)]('option');_0x1872db['value']=_0x5e496f[_0x508ef8(0x257)],_0x1872db[_0x508ef8(0x1da)]=_0x5e496f[_0x508ef8(0x257)],_0x12b7fb[_0x508ef8(0x2a8)](_0x1872db);});}function openActionSheet(_0x122b21){const _0x5d313a=a2_0x2f1aa1,_0x2c294d=document[_0x5d313a(0x277)]('actionSheet'),_0x134479=document[_0x5d313a(0x277)](_0x5d313a(0x252)),_0x1fbaf1=document[_0x5d313a(0x277)](_0x5d313a(0x1b6)),_0x1f398b=document['getElementById'](_0x5d313a(0x259)),_0x318282=document[_0x5d313a(0x277)]('asBtnSeries');_0x134479[_0x5d313a(0x242)][_0x5d313a(0x1d2)](_0x5d313a(0x1b8)),_0x2c294d[_0x5d313a(0x242)][_0x5d313a(0x1d2)](_0x5d313a(0x268));if(_0x122b21===_0x5d313a(0x1e3))_0x1fbaf1[_0x5d313a(0x1da)]=_0x5d313a(0x15f),_0x1f398b['textContent']=_0x5d313a(0x289),_0x1f398b[_0x5d313a(0x1f9)]=()=>{const _0x43adf5=_0x5d313a;closeActionSheet(),updateSeriesBatch(_0x43adf5(0x178),tempSessionData);},_0x318282[_0x5d313a(0x1da)]=_0x5d313a(0x1df),_0x318282['onclick']=()=>{const _0x2d15fa=_0x5d313a;closeActionSheet(),updateSeriesBatch(_0x2d15fa(0x205),tempSessionData);};else _0x122b21==='delete'&&(_0x1fbaf1[_0x5d313a(0x1da)]=_0x5d313a(0x227),_0x1f398b['textContent']=_0x5d313a(0x289),_0x1f398b[_0x5d313a(0x1c7)]='as-button\x20danger',_0x1f398b[_0x5d313a(0x1f9)]=()=>{const _0x4b10e7=_0x5d313a;closeActionSheet(),commitDelete(_0x4b10e7(0x178),sessions[_0x4b10e7(0x16b)](_0x3e3d40=>_0x3e3d40['id']===editingId));},_0x318282[_0x5d313a(0x1da)]='Эту\x20и\x20будущие',_0x318282['className']=_0x5d313a(0x151),_0x318282[_0x5d313a(0x1f9)]=()=>{const _0x13cad7=_0x5d313a;closeActionSheet(),commitDelete(_0x13cad7(0x205),sessions[_0x13cad7(0x16b)](_0x54f0c5=>_0x54f0c5['id']===editingId));});}function closeActionSheet(){const _0xf3684=a2_0x2f1aa1;document['getElementById'](_0xf3684(0x2b0))[_0xf3684(0x242)][_0xf3684(0x1fc)](_0xf3684(0x268)),document[_0xf3684(0x277)](_0xf3684(0x252))[_0xf3684(0x242)][_0xf3684(0x1fc)]('active');}function openSettings(){const _0x3e06b5=a2_0x2f1aa1;openSheet(_0x3e06b5(0x23e));}function saveCoachSettings(){const _0x58a8a9=a2_0x2f1aa1,_0x16bdce=document[_0x58a8a9(0x277)](_0x58a8a9(0x139))[_0x58a8a9(0x13f)];localStorage[_0x58a8a9(0x19d)](_0x58a8a9(0x25e),_0x16bdce),console['log'](_0x58a8a9(0x1cf),_0x16bdce),DataManager['fetchFromServer']('save_settings',{'settings':{'cancel_window':_0x16bdce}})[_0x58a8a9(0x28e)](_0x5cb669=>{const _0x12e122=_0x58a8a9;console[_0x12e122(0x24b)](_0x12e122(0x18b),_0x5cb669),showToast('Ошибка\x20сохранения\x20настроек',![]);});}function loadCoachSettings(){const _0x5e2d98=a2_0x2f1aa1,_0x9f4c53=localStorage[_0x5e2d98(0x132)]('uc_settings_cancel_window');_0x9f4c53&&(document[_0x5e2d98(0x277)](_0x5e2d98(0x139))['value']=_0x9f4c53);}function openRangesSheet(){const _0x354178=a2_0x2f1aa1;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x354178(0x1b9));}function addRange(){const _0x5c64fd=a2_0x2f1aa1,_0x200577=document[_0x5c64fd(0x277)](_0x5c64fd(0x18e))[_0x5c64fd(0x13f)],_0x5674ac=document[_0x5c64fd(0x277)]('rangeStartTime')['value'],_0x1a534c=document[_0x5c64fd(0x277)]('rangeEndDate')[_0x5c64fd(0x13f)],_0x269ac3=document['getElementById'](_0x5c64fd(0x1b7))[_0x5c64fd(0x13f)];if(!_0x200577||!_0x5674ac||!_0x1a534c||!_0x269ac3)return alert(_0x5c64fd(0x15b));const _0x4afee0=_0x200577+'T'+_0x5674ac,_0x4c1dff=_0x1a534c+'T'+_0x269ac3;if(_0x4afee0>=_0x4c1dff)return alert(_0x5c64fd(0x29e));specialRanges[_0x5c64fd(0x281)]({'start':_0x4afee0,'end':_0x4c1dff}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x5c64fd(0x1d9)](),DataManager['fetchFromServer']('save_settings',{'settings':{'ranges':specialRanges}});}function a2_0x3d3f(_0x7db602,_0x198b42){_0x7db602=_0x7db602-0x128;const _0x46917f=a2_0x4a59();let _0x4e56ee=_0x46917f[_0x7db602];return _0x4e56ee;}function deleteRange(_0x117eab){const _0x47080c=a2_0x2f1aa1;specialRanges[_0x47080c(0x266)](_0x117eab,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x47080c(0x1d9)](),DataManager[_0x47080c(0x1e1)](_0x47080c(0x181),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x38a607=a2_0x2f1aa1;document['getElementById']('rangeStartDate')[_0x38a607(0x13f)]='',document[_0x38a607(0x277)](_0x38a607(0x136))[_0x38a607(0x13f)]=_0x38a607(0x1fe),document['getElementById'](_0x38a607(0x1ff))[_0x38a607(0x13f)]='',document[_0x38a607(0x277)](_0x38a607(0x1b7))[_0x38a607(0x13f)]='23:59';}function renderRangesList(){const _0x28e8c3=a2_0x2f1aa1,_0x4e5ab7=document['getElementById']('rangesList');_0x4e5ab7[_0x28e8c3(0x12d)]='';if(!specialRanges[_0x28e8c3(0x237)]){_0x4e5ab7[_0x28e8c3(0x12d)]='<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>';return;}specialRanges['forEach']((_0x49047f,_0x230edd)=>{const _0x195f7c=_0x28e8c3,_0x2a5cc4=document[_0x195f7c(0x1d0)](_0x195f7c(0x293));_0x2a5cc4[_0x195f7c(0x1c7)]=_0x195f7c(0x28a);const _0x3b75cc=_0x696d94=>{const _0x2c83f3=_0x195f7c,_0x480eb1=new Date(_0x696d94);return _0x480eb1['getDate']()+'.'+String(_0x480eb1[_0x2c83f3(0x278)]()+0x1)['padStart'](0x2,'0')+'\x20'+String(_0x480eb1['getHours']())['padStart'](0x2,'0')+':'+String(_0x480eb1[_0x2c83f3(0x1c0)]())['padStart'](0x2,'0');};_0x2a5cc4[_0x195f7c(0x12d)]=_0x195f7c(0x1c9)+_0x3b75cc(_0x49047f[_0x195f7c(0x28d)])+_0x195f7c(0x287)+_0x3b75cc(_0x49047f[_0x195f7c(0x217)])+_0x195f7c(0x203)+_0x230edd+')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>',_0x4e5ab7[_0x195f7c(0x2a8)](_0x2a5cc4);});}function scrollToToday(){const _0x373c3e=a2_0x2f1aa1,_0x3c96cf=getLocalDateStr(new Date()),_0x2eabb4=document[_0x373c3e(0x277)](_0x373c3e(0x1e7)+_0x3c96cf),_0x5de1f2=document['getElementById'](_0x373c3e(0x248));if(_0x2eabb4&&_0x5de1f2){const _0x392304=_0x5de1f2[_0x373c3e(0x1de)],_0x1d0b1d=_0x2eabb4[_0x373c3e(0x21a)],_0x15b78f=_0x2eabb4['offsetWidth'];_0x5de1f2['scrollLeft']=_0x1d0b1d-_0x392304/0x2+_0x15b78f/0x2,_0x5de1f2[_0x373c3e(0x1c4)]=0x9*GRID_H;}}function onScroll(){const _0x4070aa=a2_0x2f1aa1,_0x4a5c8e=document[_0x4070aa(0x277)](_0x4070aa(0x248)),_0x2aa98f=document['querySelectorAll'](_0x4070aa(0x246));for(let _0x4cfdd9 of _0x2aa98f)if(_0x4cfdd9[_0x4070aa(0x21a)]>=_0x4a5c8e[_0x4070aa(0x231)]){const _0x2b4b93=new Date(_0x4cfdd9[_0x4070aa(0x173)]('data-date'));document['getElementById'](_0x4070aa(0x20a))['textContent']=_0x2b4b93['toLocaleString']('ru',{'month':_0x4070aa(0x239)})[_0x4070aa(0x1ba)]()+'\x20'+_0x2b4b93[_0x4070aa(0x233)]();break;}}function showToast(_0x48bb11,_0x437b6f=![]){const _0x3c48e7=a2_0x2f1aa1,_0x1cfb03=document[_0x3c48e7(0x277)](_0x3c48e7(0x15d));_0x1cfb03[_0x3c48e7(0x1c7)]=_0x3c48e7(0x224)+(_0x437b6f?_0x3c48e7(0x215):''),document['getElementById']('toastTitle')[_0x3c48e7(0x1da)]=_0x437b6f?_0x3c48e7(0x1ea):_0x3c48e7(0x160),document[_0x3c48e7(0x277)](_0x3c48e7(0x29a))[_0x3c48e7(0x1da)]=_0x48bb11,_0x1cfb03[_0x3c48e7(0x242)][_0x3c48e7(0x1d2)](_0x3c48e7(0x1ec)),setTimeout(()=>{const _0x49d0d9=_0x3c48e7;_0x1cfb03[_0x49d0d9(0x242)][_0x49d0d9(0x1fc)]('show');},0xbb8);}function openDayOptions(_0x99275b,_0x5f1a48){const _0x4341c4=a2_0x2f1aa1;selectedDayForOptions=_0x99275b,document[_0x4341c4(0x277)](_0x4341c4(0x20c))['textContent']=_0x5f1a48,openSheet(_0x4341c4(0x14e));}function toggleDayOff(){const _0x365fdb=a2_0x2f1aa1;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x365fdb(0x25d),reRenderBlocks(),closeAllSheets(),DataManager[_0x365fdb(0x1d9)](),DataManager[_0x365fdb(0x1e1)]('save_settings',{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x48d2af=a2_0x2f1aa1;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x48d2af(0x1d9)](),DataManager[_0x48d2af(0x1e1)](_0x48d2af(0x181),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x49a00c){const _0x403c1b=a2_0x2f1aa1;document[_0x403c1b(0x277)]('overlay')[_0x403c1b(0x242)][_0x403c1b(0x1d2)](_0x403c1b(0x1b8)),document[_0x403c1b(0x277)](_0x49a00c)['classList'][_0x403c1b(0x1d2)](_0x403c1b(0x268));}function closeAllSheets(){const _0x54e29d=a2_0x2f1aa1;document[_0x54e29d(0x277)](_0x54e29d(0x2a5))['classList'][_0x54e29d(0x1fc)](_0x54e29d(0x1b8)),document[_0x54e29d(0x158)]('.sheet')[_0x54e29d(0x128)](_0x17cddf=>_0x17cddf[_0x54e29d(0x242)]['remove'](_0x54e29d(0x268)));}function openPatternEditor(){const _0xe27f3e=a2_0x2f1aa1;closeAllSheets(),document[_0xe27f3e(0x277)]('patternEditor')[_0xe27f3e(0x242)]['add']('open'),renderPatternEditor();}function closePatternEditor(){const _0x245d86=a2_0x2f1aa1;document[_0x245d86(0x277)](_0x245d86(0x1a2))[_0x245d86(0x242)][_0x245d86(0x1fc)](_0x245d86(0x268));}function savePattern(){const _0x15714b=a2_0x2f1aa1;document[_0x15714b(0x277)]('patternEditor')[_0x15714b(0x242)][_0x15714b(0x1fc)](_0x15714b(0x268)),reRenderBlocks(),DataManager['saveLocally'](),DataManager[_0x15714b(0x1e1)](_0x15714b(0x181),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x4b29eb=a2_0x2f1aa1,_0x12e34c=document[_0x4b29eb(0x277)](_0x4b29eb(0x26e));_0x12e34c[_0x4b29eb(0x12d)]='';const _0x596f32=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x3664b=document[_0x4b29eb(0x1d0)](_0x4b29eb(0x293));_0x3664b['className']=_0x4b29eb(0x28b),_0x12e34c['appendChild'](_0x3664b),_0x596f32[_0x4b29eb(0x128)]((_0x3367cc,_0x2e8700)=>{const _0x5c6563=_0x4b29eb,_0x5eaa4c=document['createElement'](_0x5c6563(0x293));_0x5eaa4c['className']=_0x5c6563(0x1d3),_0x5eaa4c[_0x5c6563(0x12d)]=_0x3367cc+_0x5c6563(0x152),_0x5eaa4c[_0x5c6563(0x1f9)]=()=>toggleColPattern(_0x2e8700),_0x12e34c['appendChild'](_0x5eaa4c);});for(let _0x521c67=0x0;_0x521c67<0x18;_0x521c67++){const _0x439ff0=document[_0x4b29eb(0x1d0)](_0x4b29eb(0x293));_0x439ff0[_0x4b29eb(0x1c7)]=_0x4b29eb(0x223),_0x439ff0['innerHTML']='<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>'+String(_0x521c67)[_0x4b29eb(0x16c)](0x2,'0')+_0x4b29eb(0x1d6),_0x439ff0[_0x4b29eb(0x1f9)]=()=>toggleRowPattern(_0x521c67),_0x12e34c[_0x4b29eb(0x2a8)](_0x439ff0);for(let _0x5803ee=0x0;_0x5803ee<0x7;_0x5803ee++){const _0x3bf027=document[_0x4b29eb(0x1d0)](_0x4b29eb(0x293)),_0x3e2245=(availabilityPattern[_0x5803ee]||[])[_0x4b29eb(0x276)](_0x521c67),_0x14fbab=!_0x3e2245;_0x3bf027[_0x4b29eb(0x1c7)]=_0x4b29eb(0x1fa)+(_0x14fbab?_0x4b29eb(0x1b8):''),_0x3bf027[_0x4b29eb(0x1f9)]=()=>toggleSinglePattern(_0x5803ee,_0x521c67),_0x12e34c[_0x4b29eb(0x2a8)](_0x3bf027);}}}function toggleSinglePattern(_0x534c1c,_0xee4685){const _0x49214d=a2_0x2f1aa1;if(!availabilityPattern[_0x534c1c])availabilityPattern[_0x534c1c]=[];const _0x52950c=availabilityPattern[_0x534c1c],_0x4884f8=_0x52950c[_0x49214d(0x26d)](_0xee4685);_0x4884f8===-0x1?_0x52950c[_0x49214d(0x281)](_0xee4685):_0x52950c['splice'](_0x4884f8,0x1),renderPatternEditor();}function toggleColPattern(_0x55d4c2){const _0x7eb1a3=a2_0x2f1aa1;if(!availabilityPattern[_0x55d4c2])availabilityPattern[_0x55d4c2]=[];const _0x5edd3e=availabilityPattern[_0x55d4c2];_0x5edd3e[_0x7eb1a3(0x237)]===0x0?availabilityPattern[_0x55d4c2]=Array[_0x7eb1a3(0x1d8)]({'length':0x18},(_0xd2da12,_0x54a7a6)=>_0x54a7a6):availabilityPattern[_0x55d4c2]=[],renderPatternEditor();}function toggleRowPattern(_0x4bae84){const _0x9f8196=a2_0x2f1aa1;let _0x1c1df6=!![];for(let _0x27ca2b=0x0;_0x27ca2b<0x7;_0x27ca2b++){if((availabilityPattern[_0x27ca2b]||[])[_0x9f8196(0x276)](_0x4bae84)){_0x1c1df6=![];break;}}for(let _0x455386=0x0;_0x455386<0x7;_0x455386++){if(!availabilityPattern[_0x455386])availabilityPattern[_0x455386]=[];const _0x2820e0=availabilityPattern[_0x455386]['indexOf'](_0x4bae84);if(_0x1c1df6){if(_0x2820e0===-0x1)availabilityPattern[_0x455386][_0x9f8196(0x281)](_0x4bae84);}else{if(_0x2820e0!==-0x1)availabilityPattern[_0x455386][_0x9f8196(0x266)](_0x2820e0,0x1);}}renderPatternEditor();}function renderPCol(_0x486f5e,_0x4bec23){const _0x16babe=a2_0x2f1aa1;_0x486f5e[_0x16babe(0x12d)]='';const _0x123c2a=Math[_0x16babe(0x1f3)](_0x486f5e[_0x16babe(0x21a)]);(availabilityPattern[_0x4bec23]||[])[_0x16babe(0x128)](_0x1b9796=>{const _0x5d8421=_0x16babe,_0x4e4445=document['createElement']('div');_0x4e4445[_0x5d8421(0x1c7)]='blocked-slot\x20stripe-bg';const _0x3d1f04=_0x1b9796*GRID_H;_0x4e4445[_0x5d8421(0x141)][_0x5d8421(0x18d)]=_0x3d1f04+'px',_0x4e4445[_0x5d8421(0x141)]['backgroundPosition']='-'+_0x123c2a+_0x5d8421(0x20d)+_0x3d1f04+'px',_0x4e4445['onclick']=_0x5273ae=>{const _0x4e1ba6=_0x5d8421;_0x5273ae[_0x4e1ba6(0x24d)](),toggleSinglePattern(_0x4bec23,_0x1b9796);},_0x486f5e[_0x5d8421(0x2a8)](_0x4e4445);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x1eac8c=a2_0x2f1aa1,_0x16d7c0=new Date(),_0x2e2888=document['getElementById']('globalTimeLine'),_0x336133=document['getElementById']('timeLineBadge'),_0x1e8701=(_0x16d7c0['getHours']()*0x3c+_0x16d7c0[_0x1eac8c(0x1c0)]())/0x3c*GRID_H;_0x2e2888['style']['top']=_0x1e8701+'px',_0x2e2888[_0x1eac8c(0x141)][_0x1eac8c(0x14c)]=_0x1eac8c(0x250),_0x336133[_0x1eac8c(0x1da)]=String(_0x16d7c0[_0x1eac8c(0x189)]())[_0x1eac8c(0x16c)](0x2,'0')+':'+String(_0x16d7c0[_0x1eac8c(0x1c0)]())[_0x1eac8c(0x16c)](0x2,'0'),_0x336133['style'][_0x1eac8c(0x14c)]='block',_0x336133[_0x1eac8c(0x141)]['top']=_0x1e8701+'px';}document['addEventListener']('DOMContentLoaded',init);function openDayOptions(_0x4ec8dd){const _0x5e22e0=a2_0x2f1aa1;selectedDayForOptions=_0x4ec8dd;const _0x318886=new Date(_0x4ec8dd),_0x5516c1={'weekday':_0x5e22e0(0x239),'day':'numeric','month':_0x5e22e0(0x239),'year':_0x5e22e0(0x1cd)},_0x17f3fb=_0x318886[_0x5e22e0(0x283)](_0x5e22e0(0x12e),_0x5516c1);document[_0x5e22e0(0x277)](_0x5e22e0(0x24a))['textContent']=_0x17f3fb[_0x5e22e0(0x1bf)](0x0)['toUpperCase']()+_0x17f3fb['slice'](0x1);let _0x343d1c=_0x318886[_0x5e22e0(0x218)]()-0x1;if(_0x343d1c===-0x1)_0x343d1c=0x6;const _0x48f6f7=availabilityPattern[_0x343d1c]||[],_0x1a6098=0x18-_0x48f6f7[_0x5e22e0(0x237)],_0x41faa9=_0x1a6098*0x3c,_0x51ea37=sessions[_0x5e22e0(0x16d)](_0x1ee6a8=>_0x1ee6a8[_0x5e22e0(0x198)]===_0x4ec8dd&&_0x1ee6a8[_0x5e22e0(0x17f)]!==_0x5e22e0(0x193));let _0x25f125=_0x51ea37[_0x5e22e0(0x182)](_0x517c1b=>{const _0xd2a351=_0x5e22e0,[_0xa9e042,_0x2e9a51]=_0x517c1b[_0xd2a351(0x28d)][_0xd2a351(0x13e)](':')[_0xd2a351(0x182)](Number),[_0x38190f,_0x261c9f]=_0x517c1b['end']['split'](':')[_0xd2a351(0x182)](Number);return[_0xa9e042*0x3c+_0x2e9a51,_0x38190f*0x3c+_0x261c9f];});_0x25f125[_0x5e22e0(0x20e)]((_0xe80141,_0x5f9c6c)=>_0xe80141[0x0]-_0x5f9c6c[0x0]);let _0x230714=[];if(_0x25f125[_0x5e22e0(0x237)]>0x0){let _0x41476d=_0x25f125[0x0];for(let _0x5882aa=0x1;_0x5882aa<_0x25f125[_0x5e22e0(0x237)];_0x5882aa++){_0x25f125[_0x5882aa][0x0]<_0x41476d[0x1]?_0x41476d[0x1]=Math['max'](_0x41476d[0x1],_0x25f125[_0x5882aa][0x1]):(_0x230714[_0x5e22e0(0x281)](_0x41476d),_0x41476d=_0x25f125[_0x5882aa]);}_0x230714['push'](_0x41476d);}let _0x268a27=0x0;_0x230714[_0x5e22e0(0x128)](_0x2b4e0e=>_0x268a27+=_0x2b4e0e[0x1]-_0x2b4e0e[0x0]),document[_0x5e22e0(0x277)](_0x5e22e0(0x206))[_0x5e22e0(0x1da)]=formatMinsToHrs(_0x41faa9),document[_0x5e22e0(0x277)](_0x5e22e0(0x1ca))[_0x5e22e0(0x1da)]=formatMinsToHrs(_0x268a27);const _0x1530be=_0x41faa9>0x0?Math[_0x5e22e0(0x1f3)](_0x268a27/_0x41faa9*0x64):0x0,_0x4ee338=document[_0x5e22e0(0x277)](_0x5e22e0(0x2a3));_0x4ee338['textContent']=_0x1530be+'%';const _0x32d87c=document['getElementById'](_0x5e22e0(0x23a));if(_0x1530be>0x64)_0x4ee338[_0x5e22e0(0x141)][_0x5e22e0(0x1c3)]='var(--acc-red)',_0x32d87c[_0x5e22e0(0x141)][_0x5e22e0(0x1fb)]=_0x5e22e0(0x19b);else _0x1530be>0x50?(_0x4ee338[_0x5e22e0(0x141)][_0x5e22e0(0x1c3)]='var(--acc-orange)',_0x32d87c[_0x5e22e0(0x141)]['borderColor']=_0x5e22e0(0x1d7)):(_0x4ee338[_0x5e22e0(0x141)][_0x5e22e0(0x1c3)]=_0x5e22e0(0x209),_0x32d87c[_0x5e22e0(0x141)][_0x5e22e0(0x1fb)]=_0x5e22e0(0x1a7));const _0x108dbd=document[_0x5e22e0(0x277)](_0x5e22e0(0x19c));_0x108dbd['innerHTML']='';_0x51ea37[_0x5e22e0(0x237)]===0x0?_0x108dbd[_0x5e22e0(0x12d)]='<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>':(_0x51ea37[_0x5e22e0(0x20e)]((_0xe98302,_0x5cf26d)=>_0xe98302[_0x5e22e0(0x28d)][_0x5e22e0(0x24e)](_0x5cf26d[_0x5e22e0(0x28d)])),_0x51ea37[_0x5e22e0(0x128)](_0x4ca891=>{const _0x1999e7=_0x5e22e0,_0x2ca1ea=clients[_0x1999e7(0x16b)](_0x37cc82=>_0x37cc82[_0x1999e7(0x257)]===_0x4ca891[_0x1999e7(0x2a2)]),_0x29b67a=_0x2ca1ea?_0x2ca1ea[_0x1999e7(0x1c3)]:_0x1999e7(0x140),_0x109bab=_0x4ca891[_0x1999e7(0x17f)]===_0x1999e7(0x179),_0xfc97c9=_0x109bab?'<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>':'',_0x4cd325=document['createElement'](_0x1999e7(0x293));_0x4cd325[_0x1999e7(0x1c7)]=_0x1999e7(0x161),_0x4cd325[_0x1999e7(0x141)]['borderLeftColor']=_0x29b67a,_0x4cd325['innerHTML']=_0x1999e7(0x21d)+_0x4ca891[_0x1999e7(0x28d)]+'\x20-\x20'+_0x4ca891[_0x1999e7(0x217)]+_0x1999e7(0x135)+_0x4ca891[_0x1999e7(0x2a2)]+_0x1999e7(0x2ad)+_0xfc97c9+_0x1999e7(0x175),_0x108dbd[_0x1999e7(0x2a8)](_0x4cd325);}));const _0x510184=document[_0x5e22e0(0x277)](_0x5e22e0(0x2aa)),_0x1c2908=dateExceptions[_0x4ec8dd]===_0x5e22e0(0x25d);_0x1c2908?(_0x510184[_0x5e22e0(0x1da)]=_0x5e22e0(0x1d5),_0x510184[_0x5e22e0(0x1c7)]=_0x5e22e0(0x29f),_0x510184['style'][_0x5e22e0(0x1c3)]='var(--acc-green)',_0x510184[_0x5e22e0(0x141)][_0x5e22e0(0x1e8)]=_0x5e22e0(0x295)):(_0x510184[_0x5e22e0(0x1da)]=_0x5e22e0(0x20f),_0x510184[_0x5e22e0(0x1c7)]='btn-primary\x20btn-danger',_0x510184[_0x5e22e0(0x141)][_0x5e22e0(0x1c3)]=_0x5e22e0(0x13b),_0x510184[_0x5e22e0(0x141)]['background']=_0x5e22e0(0x1f7)),openSheet(_0x5e22e0(0x14e));}let currentAnPeriod=a2_0x2f1aa1(0x1d4);function openAnalytics(){const _0x8faa51=a2_0x2f1aa1,_0x58c41c=document['querySelector']('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x8faa51(0x1d4),_0x58c41c),closeAllSheets(),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x19f99a,_0x51887b){const _0x3985ed=a2_0x2f1aa1;currentAnPeriod=_0x19f99a,document[_0x3985ed(0x158)]('.period-switch\x20.p-btn')[_0x3985ed(0x128)](_0x37ebbe=>_0x37ebbe[_0x3985ed(0x242)][_0x3985ed(0x1fc)](_0x3985ed(0x1b8)));if(_0x51887b)_0x51887b[_0x3985ed(0x242)][_0x3985ed(0x1d2)]('active');const _0x270252=document[_0x3985ed(0x277)]('anCustomDates');_0x270252[_0x3985ed(0x141)][_0x3985ed(0x14c)]=_0x19f99a==='custom'?_0x3985ed(0x275):'none';const _0x5d78ed=new Date();let _0x30aca8=new Date(),_0x32d3ef=new Date();if(_0x19f99a===_0x3985ed(0x1d4))_0x30aca8=getStartOfWeek(_0x5d78ed),_0x32d3ef=new Date(_0x30aca8),_0x32d3ef[_0x3985ed(0x27a)](_0x32d3ef[_0x3985ed(0x19e)]()+0x6);else{if(_0x19f99a===_0x3985ed(0x221))_0x30aca8=new Date(_0x5d78ed[_0x3985ed(0x233)](),_0x5d78ed[_0x3985ed(0x278)](),0x1),_0x32d3ef=new Date(_0x5d78ed[_0x3985ed(0x233)](),_0x5d78ed[_0x3985ed(0x278)]()+0x1,0x0);else{!document[_0x3985ed(0x277)]('anStart')[_0x3985ed(0x13f)]&&(document[_0x3985ed(0x277)](_0x3985ed(0x166))[_0x3985ed(0x13f)]=getLocalDateStr(_0x5d78ed),document[_0x3985ed(0x277)](_0x3985ed(0x1a9))[_0x3985ed(0x13f)]=getLocalDateStr(_0x5d78ed));refreshAnalytics();return;}}document[_0x3985ed(0x277)](_0x3985ed(0x166))[_0x3985ed(0x13f)]=getLocalDateStr(_0x30aca8),document[_0x3985ed(0x277)](_0x3985ed(0x1a9))[_0x3985ed(0x13f)]=getLocalDateStr(_0x32d3ef),refreshAnalytics();}function refreshAnalytics(){const _0x3ae0cd=a2_0x2f1aa1,_0x2fd0ad=document['getElementById'](_0x3ae0cd(0x166))[_0x3ae0cd(0x13f)],_0x6a8c32=document['getElementById'](_0x3ae0cd(0x1a9))[_0x3ae0cd(0x13f)];if(!_0x2fd0ad||!_0x6a8c32)return;const _0x9544b5=sessions[_0x3ae0cd(0x16d)](_0x24ab75=>_0x24ab75['dateStr']>=_0x2fd0ad&&_0x24ab75[_0x3ae0cd(0x198)]<=_0x6a8c32&&_0x24ab75['status']!==_0x3ae0cd(0x193)),_0x1774b9=_0x9544b5['length'],_0x4c45a6=_0x9544b5['filter'](_0x8fb23d=>_0x8fb23d['status']===_0x3ae0cd(0x179))[_0x3ae0cd(0x237)],_0x3c7b06=_0x1774b9>0x0?Math[_0x3ae0cd(0x1f3)](_0x4c45a6/_0x1774b9*0x64):0x0;document['getElementById']('anPercent')[_0x3ae0cd(0x1da)]=_0x3c7b06+'%',document[_0x3ae0cd(0x277)]('anTotalStats')[_0x3ae0cd(0x1da)]=_0x4c45a6+_0x3ae0cd(0x162)+_0x1774b9+_0x3ae0cd(0x2ac);const _0x538885=document[_0x3ae0cd(0x277)](_0x3ae0cd(0x1be)),_0x201310=0x2*Math['PI']*0x23,_0x1b8cb0=_0x201310-_0x3c7b06/0x64*_0x201310;_0x538885[_0x3ae0cd(0x141)][_0x3ae0cd(0x154)]=_0x1b8cb0;const _0x4cb066={};_0x9544b5[_0x3ae0cd(0x128)](_0x1a5961=>{const _0x53cd76=_0x3ae0cd;if(!_0x4cb066[_0x1a5961[_0x53cd76(0x2a2)]]){const _0xc07ff2=clients[_0x53cd76(0x16b)](_0x336d96=>_0x336d96[_0x53cd76(0x257)]===_0x1a5961[_0x53cd76(0x2a2)]);_0x4cb066[_0x1a5961[_0x53cd76(0x2a2)]]={'total':0x0,'done':0x0,'color':_0xc07ff2?_0xc07ff2[_0x53cd76(0x1c3)]:_0x53cd76(0x140)};}_0x4cb066[_0x1a5961[_0x53cd76(0x2a2)]][_0x53cd76(0x210)]++;if(_0x1a5961[_0x53cd76(0x17f)]===_0x53cd76(0x179))_0x4cb066[_0x1a5961['client']][_0x53cd76(0x192)]++;});const _0x30dfd9=document[_0x3ae0cd(0x277)]('analyticsList');_0x30dfd9[_0x3ae0cd(0x12d)]='';const _0xda2040=Object[_0x3ae0cd(0x207)](_0x4cb066)['sort']((_0x5c1cd0,_0x20fe60)=>_0x20fe60[0x1][_0x3ae0cd(0x210)]-_0x5c1cd0[0x1]['total']);if(_0xda2040[_0x3ae0cd(0x237)]===0x0){_0x30dfd9[_0x3ae0cd(0x12d)]=_0x3ae0cd(0x28c);return;}_0xda2040[_0x3ae0cd(0x128)](([_0x5f2553,_0x51bb05])=>{const _0x3dfad2=_0x3ae0cd,_0x12c11e=Math[_0x3dfad2(0x1f3)](_0x51bb05[_0x3dfad2(0x192)]/_0x51bb05[_0x3dfad2(0x210)]*0x64),_0x47b9f1=document[_0x3dfad2(0x1d0)](_0x3dfad2(0x293));_0x47b9f1[_0x3dfad2(0x1c7)]=_0x3dfad2(0x1aa),_0x47b9f1[_0x3dfad2(0x141)][_0x3dfad2(0x22b)]=_0x51bb05[_0x3dfad2(0x1c3)],_0x47b9f1[_0x3dfad2(0x12d)]=_0x3dfad2(0x185)+_0x5f2553+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x51bb05[_0x3dfad2(0x192)]+_0x3dfad2(0x196)+_0x51bb05[_0x3dfad2(0x210)]+_0x3dfad2(0x167)+_0x12c11e+_0x3dfad2(0x211),_0x30dfd9[_0x3dfad2(0x2a8)](_0x47b9f1);});}function formatMinsToHrs(_0x5d6d9c){const _0x475c78=a2_0x2f1aa1;if(_0x5d6d9c===0x0)return'0';const _0x9a53cb=Math[_0x475c78(0x241)](_0x5d6d9c/0x3c),_0x366cdd=_0x5d6d9c%0x3c;if(_0x366cdd===0x0)return _0x9a53cb+'ч';return _0x9a53cb+'ч\x20'+_0x366cdd+'м';}function a2_0x4a59(){const _0x176c2b=['seriesId','mousemove','appendChild','getTime','btnDayToggle','%\x20+\x202px)','\x20выполнено','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','day-column\x20','btnDelete','actionSheet','forEach','[API\x20','timeColumn','inpRecurring','clientId','innerHTML','ru-RU','setHours','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','Critical\x20TMA\x20Error:','getItem','today','setAttribute','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','rangeStartTime','scrollWidth','backgroundPosition','settingCancelWindow','\x20-\x20','var(--acc-red)','sheetDateSubtitle','\x20(пропущено:\x20','split','value','#fff','style','px\x200px','.day-column','syncBatch','blocked-slot\x20stripe-bg','planned','constructor','calc(','\x20days','cancel','Этот\x20клиент\x20(','display','ready','dayOptionsSheet','setBackgroundColor','firstChild','as-button\x20danger\x20bold','\x20<span\x20class=\x22arrow\x22>↓</span>','</div>','strokeDashoffset','pattern','Редактировать','BackButton','querySelectorAll','then','touches','Заполните\x20все\x20поля','init_load','toast','var(--acc-current)','Изменение\x20серии','Инфо','de-item','\x20из\x20','all','ranges','4783707EZtEIz','anStart','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','.day-off-overlay',']\x20Failed:','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','find','padStart','filter','createDocumentFragment','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','warn','T00:00:00','parse','getAttribute','left','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',')</b>\x20была\x20удалена\x20из\x20расписания.','stringify','single','completed','data-day-idx','data','[Notify]\x20Attempting\x20to\x20send:','daysHeaderTrack','gridColumns','status','height','save_settings','map','9394824WZIkbB','мин,\x20Загрузка:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','vibrate','uc_clients_v9','<b>📅\x20Дата:</b>\x20','getHours','zIndex','Save\x20settings\x20error:','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','top','rangeStartDate','json','borderRadius','colIndex','done','cancelled','send','[Notify]\x20Error:\x20sessionData\x20is\x20null','</span>\x20/\x20','scroll','dateStr','insertBefore','...','rgba(255,\x2069,\x2058,\x200.3)','doEventsList','setItem','getDate','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','<b>⏰\x20Время:</b>\x20','10px\x2010px\x200\x200','patternEditor','rgba(','sessionSheet','mousedown','Синхронизировано','rgba(255,255,255,0.05)','substr','anEnd','client-stat-card','patternInfoBox','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','%\x20-\x204px)','.pib-text','batch_sync','btnStatusToggle','search','inpDate','offClick','331114CkZYtu','382224qyrqlu','asTitle','rangeEndTime','active','rangesSheet','toUpperCase','Создана\x20серия:\x20','inpEnd','WebApp','anDonutCircle','charAt','getMinutes','[Notify]\x20Network\x20Failed','querySelector','color','scrollTop','msg','stat-','className','touchmove','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','doBusyHours','deleted','20kBtYiH','numeric','setHeaderColor','[Settings]\x20Cancel\x20window\x20set\x20to:','createElement','note','add','pe-col-header','week','Сделать\x20рабочим\x20днем',':00','rgba(255,\x20159,\x2010,\x200.3)','from','saveLocally','textContent','touchstart','<div\x20class=\x22ev-title\x22>','2008559YzHFyk','clientWidth','Эту\x20и\x20будущие','Server\x20Error','fetchFromServer','random','save','[Series]\x20Skipped\x20','505qRvFTg','send_notification','header-','background','inpNote','Успешно','touchend','show','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','settings','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','option','checked','cancel_window','round','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','[Notify]\x20Error:\x20Text\x20generation\x20failed','create','rgba(255,\x2069,\x2058,\x200.15)','closest','onclick','pe-cell\x20','borderColor','remove','apply','00:00','rangeEndDate','.dch-stats-fill','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','9540190sxNuBL','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','exceptions','series','doWorkHours','entries','Оффлайн\x20режим','var(--acc-green)','headerMonth','text/plain;charset=UTF-8','dayOptionsTitle','px\x20-','sort','Сделать\x20выходным','total','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','clientY','Новая\x20запись','href','success','inpSeriesCount','end','getDay','location','offsetLeft','slice','onClick','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>',')\x20уже\x20записан\x20на\x20это\x20время!','Нет\x20клиентов','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','month','seriesCountContainer','pe-time-label','toast-notification\x20','day-col-header\x20','#050505','Удаление','guest','min','none','borderLeftColor',']\x20Доступно:\x20','expand','</div><div\x20class=\x22ev-time\x22>','16758gQZufr','T23:59:59','scrollLeft','update','getFullYear','complete','Минимум\x202\x20тренировки','v9.0-BATCH-CALENDAR','length','calendar','long','statLoadCard','addEventListener','data-date','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','settingsSheet','[Sync]\x20Loading\x20','[Notify]\x20Detected\x20Client\x20ID:','floor','classList','getBoundingClientRect','mini','syncLoad','.day-col-header','initDataUnsafe','matrixViewport','uc_settings_v9','doDateHeader','error','11cJftHI','stopPropagation','localeCompare','btn-status-toggle\x20undo-mode','block','Telegram','actionSheetOverlay','Local\x20Load\x20Error','rgba(100,100,100,0.5)','32FJeYBP','(((.+)+)+)+$','name','undefined','asBtnOne','</div><div\x20class=\x22dch-num\x22>','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','sheetTitle','off','uc_settings_cancel_window','blocked-range-part\x20stripe-bg','10px','\x20status-completed','warning','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','clients','router.html','splice','user','open','toFixed','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','width','100%','indexOf','peGrid','recurringOptionContainer','disableVerticalSwipes','day-off-overlay\x20stripe-bg','valid','time-label','2sHilPE','flex','includes','getElementById','getMonth','Error\x20setting\x20color:','setDate','</b>\x0a\x0a','Групповая:\x20также\x20записан\x20','findIndex','sid','Все\x20даты\x20заняты\x20этим\x20клиентом!','Тренировка\x20завершена','push','Жду\x20вас\x20в\x20зале!\x20💪','toLocaleDateString','inpClient','Вернуть\x20в\x20запланированные','now','\x20—\x20','timeLineBadge','Только\x20эту','range-item','pe-corner','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','start','catch','max','<div\x20class=\x22dch-day\x22>','Unknown','log','div','ч,\x20Занято:\x20','rgba(48,\x20209,\x2088,\x200.15)','toString','initData','inpStart','Local\x20Save\x20Error','toastMessage','Статус\x20сброшен','text','backgroundColor','Ошибка\x20дат','btn-primary\x20btn-secondary','mouseup','<span>','client','doLoadPercent','mergeServerData','overlay'];a2_0x4a59=function(){return _0x176c2b;};return a2_0x4a59();}