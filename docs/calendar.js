const a2_0x2c11bc=a2_0x3bfc;(function(_0x13a697,_0x2b0f60){const _0x4b4fb0=a2_0x3bfc,_0x16e981=_0x13a697();while(!![]){try{const _0x39c7e6=parseInt(_0x4b4fb0(0xf7))/0x1+parseInt(_0x4b4fb0(0x1ce))/0x2*(parseInt(_0x4b4fb0(0xda))/0x3)+-parseInt(_0x4b4fb0(0x224))/0x4*(-parseInt(_0x4b4fb0(0x22e))/0x5)+-parseInt(_0x4b4fb0(0xe7))/0x6+-parseInt(_0x4b4fb0(0x153))/0x7*(-parseInt(_0x4b4fb0(0x1ee))/0x8)+parseInt(_0x4b4fb0(0x115))/0x9*(parseInt(_0x4b4fb0(0x1a0))/0xa)+parseInt(_0x4b4fb0(0x1e2))/0xb*(-parseInt(_0x4b4fb0(0x12c))/0xc);if(_0x39c7e6===_0x2b0f60)break;else _0x16e981['push'](_0x16e981['shift']());}catch(_0x58108e){_0x16e981['push'](_0x16e981['shift']());}}}(a2_0x18ec,0x23e7f),function initTMA(){const _0x5e477e=a2_0x3bfc,_0x2e03ef=(function(){let _0x5375d2=!![];return function(_0x59cf2b,_0x253c27){const _0x69fbf0=_0x5375d2?function(){const _0x1efc89=a2_0x3bfc;if(_0x253c27){const _0x33730d=_0x253c27[_0x1efc89(0x21c)](_0x59cf2b,arguments);return _0x253c27=null,_0x33730d;}}:function(){};return _0x5375d2=![],_0x69fbf0;};}()),_0x1b2384=_0x2e03ef(this,function(){const _0x55fee9=a2_0x3bfc;return _0x1b2384['toString']()[_0x55fee9(0x1e5)](_0x55fee9(0x15a))[_0x55fee9(0x1d7)]()[_0x55fee9(0x181)](_0x1b2384)[_0x55fee9(0x1e5)](_0x55fee9(0x15a));});_0x1b2384();try{const _0x2e5257=window[_0x5e477e(0x202)]?.[_0x5e477e(0x14b)];if(!_0x2e5257)return;_0x2e5257['ready'](),_0x2e5257[_0x5e477e(0x105)]();try{_0x2e5257[_0x5e477e(0x201)](_0x5e477e(0x20a)),_0x2e5257[_0x5e477e(0x116)]&&_0x2e5257[_0x5e477e(0x116)](_0x5e477e(0x20a));}catch(_0x1899d8){console[_0x5e477e(0x119)](_0x5e477e(0x13e),_0x1899d8);}try{_0x2e5257['BackButton']&&(_0x2e5257[_0x5e477e(0x1a8)][_0x5e477e(0xd4)](),_0x2e5257[_0x5e477e(0x1a8)][_0x5e477e(0xf6)](),_0x2e5257[_0x5e477e(0x1a8)][_0x5e477e(0x1ff)](function(){const _0x5098c0=_0x5e477e;window[_0x5098c0(0x23f)][_0x5098c0(0x249)]=_0x5098c0(0x1c2);}));}catch(_0x9f20e3){console[_0x5e477e(0x119)](_0x5e477e(0x1fb),_0x9f20e3);}try{if(_0x2e5257[_0x5e477e(0x19d)])_0x2e5257[_0x5e477e(0x19d)]();}catch(_0x314518){}}catch(_0x3268e3){console[_0x5e477e(0x175)]('Critical\x20TMA\x20Error:',_0x3268e3);}}());function isAdmin(){const _0x485834=a2_0x3bfc;try{const _0x480a92=Number(window[_0x485834(0x202)]?.[_0x485834(0x14b)]?.[_0x485834(0x211)]?.['user']?.['id']);return _0x480a92===0xbaf7174;}catch(_0x5746ca){return![];}}const APP_VERSION=a2_0x2c11bc(0x129),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x2c11bc(0x208),KEY_SESSIONS=a2_0x2c11bc(0x187),KEY_SETTINGS='uc_settings_v9';let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x46a0da=a2_0x2c11bc;return window[_0x46a0da(0x202)]?.[_0x46a0da(0x14b)]?.[_0x46a0da(0x211)]?.[_0x46a0da(0x126)]?.['id']||'guest';},'saveLocally'(){const _0x268bb3=a2_0x2c11bc;try{localStorage[_0x268bb3(0xec)](KEY_CLIENTS,JSON[_0x268bb3(0x14f)](clients)),localStorage[_0x268bb3(0xec)](KEY_SESSIONS,JSON[_0x268bb3(0x14f)](sessions)),localStorage[_0x268bb3(0xec)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x4c4ff6){console['error'](_0x268bb3(0x125),_0x4c4ff6);}},'loadLocal'(){const _0x32853b=a2_0x2c11bc;try{const _0x8a6ec1=localStorage['getItem'](KEY_CLIENTS);if(_0x8a6ec1)clients=JSON[_0x32853b(0x155)](_0x8a6ec1);const _0x335015=localStorage[_0x32853b(0x152)](KEY_SESSIONS);if(_0x335015)sessions=JSON[_0x32853b(0x155)](_0x335015);const _0x472e88=localStorage[_0x32853b(0x152)](KEY_SETTINGS);if(_0x472e88){const _0x4c0e1a=JSON['parse'](_0x472e88);if(_0x4c0e1a[_0x32853b(0xe3)])availabilityPattern=_0x4c0e1a[_0x32853b(0xe3)];if(_0x4c0e1a['exceptions'])dateExceptions=_0x4c0e1a[_0x32853b(0x223)];if(_0x4c0e1a['ranges'])specialRanges=_0x4c0e1a[_0x32853b(0x21e)];}else{for(let _0x1020ed=0x0;_0x1020ed<0x7;_0x1020ed++)availabilityPattern[_0x1020ed]=Array[_0x32853b(0x1d2)]({'length':0xc},(_0x2423b,_0x2f3f87)=>_0x2f3f87+0x9);}}catch(_0x5702de){console[_0x32853b(0x175)](_0x32853b(0x204),_0x5702de);}},async 'fetchFromServer'(_0x4d8693,_0x3cd8e2={}){const _0x128848=a2_0x2c11bc,_0x1c9fb3=window[_0x128848(0x202)]?.[_0x128848(0x14b)],_0x58e65d={'action':_0x4d8693,'init_data':_0x1c9fb3?.[_0x128848(0x1dc)]||'',..._0x3cd8e2};try{const _0x2a6653=await fetch(API_URL,{'method':'POST','headers':{'Content-Type':'text/plain;charset=UTF-8'},'body':JSON[_0x128848(0x14f)](_0x58e65d)}),_0x52ce02=await _0x2a6653[_0x128848(0x13d)]();if(!_0x52ce02['ok'])throw new Error(_0x52ce02[_0x128848(0x175)]||_0x128848(0x22d));return _0x52ce02[_0x128848(0x178)];}catch(_0xe65e0b){console['error'](_0x128848(0x18b)+_0x4d8693+_0x128848(0x239),_0xe65e0b);throw _0xe65e0b;}},async 'syncLoad'(){const _0x4e94d5=a2_0x2c11bc,_0x362e9b=new Date(),_0x47ff56=_0x362e9b[_0x4e94d5(0xf2)]()+'-'+String(_0x362e9b[_0x4e94d5(0x136)]()+0x1)[_0x4e94d5(0x23e)](0x2,'0'),_0x7c4850=new Date(_0x362e9b);_0x7c4850[_0x4e94d5(0x13b)](_0x362e9b['getMonth']()+0x1);const _0x25eb55=_0x7c4850['getFullYear']()+'-'+String(_0x7c4850['getMonth']()+0x1)[_0x4e94d5(0x23e)](0x2,'0'),_0x2d200a=Date[_0x4e94d5(0x17a)]();console[_0x4e94d5(0x119)](_0x4e94d5(0x24e)+_0x47ff56+',\x20'+_0x25eb55+_0x4e94d5(0xf3));try{const [_0x44665b,_0x5712f1]=await Promise[_0x4e94d5(0x13a)]([this[_0x4e94d5(0x1e0)](_0x4e94d5(0x160),{'month_str':_0x47ff56}),this[_0x4e94d5(0x1e0)]('init_load',{'month_str':_0x25eb55})]);if(lastUserActionTime>_0x2d200a)return console[_0x4e94d5(0x161)](_0x4e94d5(0x118)),![];return this['mergeServerData'](_0x44665b,_0x47ff56),this[_0x4e94d5(0xe0)](_0x5712f1,_0x25eb55),this['saveLocally'](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x9edca1){console['error'](_0x9edca1);throw _0x9edca1;}},'mergeServerData'(_0x47f60e,_0xff9435){const _0x3d831b=a2_0x2c11bc;if(!_0x47f60e)return;_0x47f60e['clients']&&Array[_0x3d831b(0x24a)](_0x47f60e['clients'])&&(clients=_0x47f60e[_0x3d831b(0x158)]);if(_0x47f60e['settings']){if(_0x47f60e['settings']['pattern'])availabilityPattern=_0x47f60e[_0x3d831b(0x142)][_0x3d831b(0xe3)];if(_0x47f60e[_0x3d831b(0x142)][_0x3d831b(0x223)])dateExceptions=_0x47f60e[_0x3d831b(0x142)][_0x3d831b(0x223)];if(_0x47f60e[_0x3d831b(0x142)][_0x3d831b(0x21e)])specialRanges=_0x47f60e[_0x3d831b(0x142)][_0x3d831b(0x21e)];if(_0x47f60e[_0x3d831b(0x142)]['cancel_window']){localStorage[_0x3d831b(0xec)](_0x3d831b(0xde),_0x47f60e[_0x3d831b(0x142)][_0x3d831b(0x135)]);const _0x442c55=document[_0x3d831b(0x10b)](_0x3d831b(0xf1));if(_0x442c55)_0x442c55[_0x3d831b(0x1b9)]=_0x47f60e[_0x3d831b(0x142)][_0x3d831b(0x135)];}}_0x47f60e[_0x3d831b(0x15b)]&&(sessions=sessions[_0x3d831b(0x11c)](_0x2723b5=>!_0x2723b5['dateStr'][_0x3d831b(0x134)](_0xff9435)),Object[_0x3d831b(0x1e3)](_0x47f60e[_0x3d831b(0x15b)])[_0x3d831b(0x20d)](_0x1dea1a=>{const _0xbbbfdd=_0x3d831b,_0x2564cc=_0x47f60e[_0xbbbfdd(0x15b)][_0x1dea1a];_0x2564cc['forEach'](_0x41bbf7=>{const _0x124015=_0xbbbfdd,_0x4fc959=clients[_0x124015(0x110)](_0x3a982e=>String(_0x3a982e['id'])===String(_0x41bbf7['c']));sessions['push']({'id':_0x41bbf7['i'],'clientId':_0x41bbf7['c'],'client':_0x4fc959?_0x4fc959[_0x124015(0x1d6)]:_0x124015(0x194),'dateStr':_0xff9435+'-'+_0x1dea1a[_0x124015(0x23e)](0x2,'0'),'start':_0x41bbf7['s'],'end':_0x41bbf7['e'],'status':_0x41bbf7['st']||_0x124015(0x150),'note':_0x41bbf7['n']||'','seriesId':_0x41bbf7[_0x124015(0x218)]||null});});}));},async 'syncBatch'(_0x52c9af){const _0x148f56=a2_0x2c11bc,_0x33d5a6=[...new Set(_0x52c9af)],_0x37951f=_0x33d5a6['map'](_0x14d2cf=>{const _0x423860=a2_0x3bfc,_0xf9903b=sessions['filter'](_0x511db8=>_0x511db8[_0x423860(0x1ac)]===_0x14d2cf&&_0x511db8[_0x423860(0x15d)]!=='deleted'),_0x5a0bcc=_0xf9903b['map'](_0xf1bf1e=>({'i':_0xf1bf1e['id'],'c':_0xf1bf1e[_0x423860(0x1a1)],'s':_0xf1bf1e[_0x423860(0x100)],'e':_0xf1bf1e['end'],'st':_0xf1bf1e[_0x423860(0x15d)],'n':_0xf1bf1e[_0x423860(0xe4)],'sid':_0xf1bf1e['seriesId']}));return{'date':_0x14d2cf,'day_data':_0x5a0bcc};});if(_0x37951f[_0x148f56(0x18d)]===0x0)return;console[_0x148f56(0x119)](_0x148f56(0x177)+_0x37951f[_0x148f56(0x18d)]+_0x148f56(0x203)),await this['fetchFromServer'](_0x148f56(0x19e),{'changes':_0x37951f});}};async function init(){const _0xf4bf02=a2_0x2c11bc;DataManager[_0xf4bf02(0x139)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0xf4bf02(0x20f))[_0xf4bf02(0x259)](_0xf4bf02(0x10c),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']()[_0xf4bf02(0xfe)](()=>{const _0x376b98=_0xf4bf02;showToast(_0x376b98(0x112),!![]);})[_0xf4bf02(0x1be)](_0x51bbf3=>{const _0x233eef=_0xf4bf02;showToast(_0x233eef(0xfc),![]);});}function generateId(){const _0x53edbc=a2_0x2c11bc;return Date[_0x53edbc(0x17a)]()[_0x53edbc(0x1d7)](0x24)+Math['random']()['toString'](0x24)['substr'](0x2,0x5);}function toggleSeriesInput(){const _0x332240=a2_0x2c11bc,_0x570761=document[_0x332240(0x10b)](_0x332240(0x146))[_0x332240(0x1ba)],_0x239fbc=document['getElementById'](_0x332240(0x1f1));_0x239fbc[_0x332240(0xed)][_0x332240(0xfb)]=_0x570761?_0x332240(0x1b3):_0x332240(0x147);const _0x1e8e75=document[_0x332240(0x10b)]('recurringOptionContainer');_0x1e8e75['style'][_0x332240(0x15e)]=_0x570761?'10px\x2010px\x200\x200':_0x332240(0x1e4);}function openAddSession(_0x57564b){const _0x3917ae=a2_0x2c11bc;editingId=null,populateClientSelect(),document[_0x3917ae(0x10b)](_0x3917ae(0xd0))[_0x3917ae(0x15f)]=_0x3917ae(0x21b),document['getElementById'](_0x3917ae(0x127))[_0x3917ae(0xed)]['display']=_0x3917ae(0x147),document[_0x3917ae(0x10b)](_0x3917ae(0x1c8))[_0x3917ae(0xed)][_0x3917ae(0xfb)]=_0x3917ae(0x147);const _0x88abf8=document['getElementById'](_0x3917ae(0x138)),_0x8b056=document['getElementById'](_0x3917ae(0x1f1));_0x88abf8['style'][_0x3917ae(0xfb)]=_0x3917ae(0x1a5),_0x88abf8[_0x3917ae(0xed)][_0x3917ae(0x15e)]=_0x3917ae(0x1e4),document[_0x3917ae(0x10b)]('inpRecurring')[_0x3917ae(0x1ba)]=![],document[_0x3917ae(0x10b)](_0x3917ae(0xd8))[_0x3917ae(0x1b9)]=0x4,_0x8b056[_0x3917ae(0xed)][_0x3917ae(0xfb)]=_0x3917ae(0x147),document[_0x3917ae(0x10b)](_0x3917ae(0x1d9))[_0x3917ae(0x1b9)]=getLocalDateStr(_0x57564b),updateDateDisplay();const _0x22d790=_0x57564b['getHours']();document[_0x3917ae(0x10b)]('inpStart')[_0x3917ae(0x1b9)]=String(_0x22d790)[_0x3917ae(0x23e)](0x2,'0')+':00',document[_0x3917ae(0x10b)]('inpEnd')['value']=String(_0x22d790+0x1)['padStart'](0x2,'0')+':00',openSheet(_0x3917ae(0x248));}function openEdit(_0x57ebea){const _0x38ee2e=a2_0x2c11bc;editingId=_0x57ebea['id'],populateClientSelect(),document[_0x38ee2e(0x10b)](_0x38ee2e(0xd0))[_0x38ee2e(0x15f)]='Редактировать',document['getElementById'](_0x38ee2e(0x127))[_0x38ee2e(0xed)][_0x38ee2e(0xfb)]=_0x38ee2e(0x1b3);const _0x16f344=document[_0x38ee2e(0x10b)](_0x38ee2e(0x1c8));_0x16f344[_0x38ee2e(0xed)][_0x38ee2e(0xfb)]=_0x38ee2e(0x1a5);_0x57ebea[_0x38ee2e(0x15d)]===_0x38ee2e(0x1db)?(_0x16f344[_0x38ee2e(0x137)]=_0x38ee2e(0x1f9),_0x16f344['innerHTML']=_0x38ee2e(0x20c)):(_0x16f344[_0x38ee2e(0x137)]='btn-status-toggle',_0x16f344['innerHTML']=_0x38ee2e(0x1ec));const _0x5e3a21=!!_0x57ebea[_0x38ee2e(0x11e)];document[_0x38ee2e(0x10b)](_0x38ee2e(0x138))[_0x38ee2e(0xed)][_0x38ee2e(0xfb)]='none',document[_0x38ee2e(0x10b)]('seriesCountContainer')[_0x38ee2e(0xed)]['display']=_0x38ee2e(0x147),_0x5e3a21?(document['getElementById'](_0x38ee2e(0x236))[_0x38ee2e(0xed)][_0x38ee2e(0xfb)]=_0x38ee2e(0x1a5),document['getElementById'](_0x38ee2e(0x236))[_0x38ee2e(0xea)](_0x38ee2e(0x206))[_0x38ee2e(0x15f)]=_0x38ee2e(0x21a)):document[_0x38ee2e(0x10b)](_0x38ee2e(0x236))[_0x38ee2e(0xed)][_0x38ee2e(0xfb)]=_0x38ee2e(0x147),document[_0x38ee2e(0x10b)](_0x38ee2e(0x247))[_0x38ee2e(0x1b9)]=_0x57ebea[_0x38ee2e(0xcf)],document[_0x38ee2e(0x10b)](_0x38ee2e(0x1d9))['value']=_0x57ebea['dateStr'],document['getElementById']('inpStart')['value']=_0x57ebea[_0x38ee2e(0x100)],document['getElementById'](_0x38ee2e(0xfd))[_0x38ee2e(0x1b9)]=_0x57ebea[_0x38ee2e(0x1dd)],document[_0x38ee2e(0x10b)](_0x38ee2e(0x179))[_0x38ee2e(0x1b9)]=_0x57ebea[_0x38ee2e(0xe4)]||'',updateDateDisplay(),openSheet(_0x38ee2e(0x248));}async function trySaveSession(){const _0x28ffb0=a2_0x2c11bc,_0x2d56e9=document[_0x28ffb0(0x10b)](_0x28ffb0(0x247))[_0x28ffb0(0x1b9)],_0x102915=document[_0x28ffb0(0x10b)](_0x28ffb0(0x1d9))['value'],_0x21423e=document[_0x28ffb0(0x10b)]('inpStart')[_0x28ffb0(0x1b9)],_0x540c43=document[_0x28ffb0(0x10b)](_0x28ffb0(0xfd))[_0x28ffb0(0x1b9)],_0x2665fa=document['getElementById'](_0x28ffb0(0x179))[_0x28ffb0(0x1b9)],_0x2d8955=document['getElementById'](_0x28ffb0(0x146))['checked'];let _0x5ef1a8=0x4;if(_0x2d8955){const _0x30252a=parseInt(document[_0x28ffb0(0x10b)](_0x28ffb0(0xd8))['value']);if(!_0x30252a||_0x30252a<0x2){showToast(_0x28ffb0(0x23a),![]);return;}if(_0x30252a>0x64){showToast(_0x28ffb0(0x165),![]);return;}_0x5ef1a8=_0x30252a;}const _0x471068=clients[_0x28ffb0(0x110)](_0x328913=>_0x328913['name']===_0x2d56e9);if(!_0x471068){showToast(_0x28ffb0(0x109),![]);return;}const _0xf52bf8=validateAppointment(_0x102915,_0x21423e,_0x540c43,editingId,_0x471068['id']);if(!_0xf52bf8['valid']){showToast(_0xf52bf8['msg'],![]);return;}_0xf52bf8['warning']&&showToast(_0xf52bf8['warning'],![]);const _0xbbc219={'client':_0x2d56e9,'clientId':_0x471068['id'],'start':_0x21423e,'end':_0x540c43,'note':_0x2665fa,'status':'planned'},_0xde56cf=editingId?sessions[_0x28ffb0(0x110)](_0xd9a727=>_0xd9a727['id']===editingId):null;if(_0xde56cf&&_0xde56cf['seriesId']){tempSessionData={..._0xbbc219,'dateStr':_0x102915,'id':editingId,'seriesId':_0xde56cf[_0x28ffb0(0x11e)]},openActionSheet('save');return;}let _0x5294b5=null;if(!editingId)_0x5294b5=_0x28ffb0(0x185);else{if(_0xde56cf){if(String(_0xde56cf['clientId'])!==String(_0x471068['id']))console[_0x28ffb0(0x119)](_0x28ffb0(0x162)),NotificationManager[_0x28ffb0(0x145)]('cancel',_0xde56cf),_0x5294b5=_0x28ffb0(0x185);else(_0xde56cf[_0x28ffb0(0x100)]!==_0x21423e||_0xde56cf['end']!==_0x540c43||_0xde56cf['dateStr']!==_0x102915)&&(_0x5294b5='update');}}if(!editingId&&_0x2d8955){createBatchSeries(_0xbbc219,_0x102915,_0x5ef1a8),NotificationManager[_0x28ffb0(0x145)]('create',{..._0xbbc219,'dateStr':_0x102915});return;}lastUserActionTime=Date[_0x28ffb0(0x17a)]();const _0x56c466={..._0xbbc219,'dateStr':_0x102915,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x56c466),_0x5294b5&&NotificationManager['send'](_0x5294b5,_0x56c466);}function toggleSessionStatus(){const _0x22f3dd=a2_0x2c11bc;lastUserActionTime=Date[_0x22f3dd(0x17a)]();const _0x45cf39=sessions[_0x22f3dd(0x110)](_0x628d28=>_0x628d28['id']===editingId);if(!_0x45cf39)return;const _0x12f5a0=_0x45cf39[_0x22f3dd(0x15d)]===_0x22f3dd(0x1db)?_0x22f3dd(0x150):_0x22f3dd(0x1db);_0x45cf39['status']=_0x12f5a0,saveSingleSession(_0x45cf39),_0x12f5a0===_0x22f3dd(0x1db)&&NotificationManager[_0x22f3dd(0x145)](_0x22f3dd(0x13f),_0x45cf39),showToast(_0x12f5a0===_0x22f3dd(0x1db)?_0x22f3dd(0x133):_0x22f3dd(0x169),!![]);}function validateAppointment(_0x136b88,_0x439dbc,_0x2e710b,_0x43f563,_0x66d6f5){const _0x22ce76=a2_0x2c11bc,[_0x39b2ec,_0x14e658]=_0x439dbc[_0x22ce76(0x1ae)](':')[_0x22ce76(0xff)](Number),[_0x3a269b,_0x51a251]=_0x2e710b['split'](':')[_0x22ce76(0xff)](Number),_0x157806=_0x39b2ec*0x3c+_0x14e658,_0x40a961=_0x3a269b*0x3c+_0x51a251,_0x4eaceb=String(_0x66d6f5);let _0x158e80=![],_0x42d4b7='';for(let _0x147f17 of sessions){if(_0x147f17[_0x22ce76(0x1ac)]!==_0x136b88)continue;if(_0x147f17[_0x22ce76(0x15d)]===_0x22ce76(0x1a9))continue;if(_0x43f563&&String(_0x147f17['id'])===String(_0x43f563))continue;const [_0x3757a6,_0x1d88a1]=_0x147f17['start'][_0x22ce76(0x1ae)](':')[_0x22ce76(0xff)](Number),[_0x406e92,_0x16dd10]=_0x147f17[_0x22ce76(0x1dd)][_0x22ce76(0x1ae)](':')[_0x22ce76(0xff)](Number),_0x27448f=_0x3757a6*0x3c+_0x1d88a1,_0x336f6d=_0x406e92*0x3c+_0x16dd10;if(Math[_0x22ce76(0x19b)](_0x157806,_0x27448f)<Math[_0x22ce76(0x1ea)](_0x40a961,_0x336f6d)){if(_0x147f17['clientId']&&String(_0x147f17[_0x22ce76(0x1a1)])===_0x4eaceb)return{'valid':![],'msg':_0x22ce76(0x1f6)+_0x147f17[_0x22ce76(0xcf)]+_0x22ce76(0x1e1)};_0x158e80=!![],_0x42d4b7=_0x147f17['client'];}}if(_0x158e80)return{'valid':!![],'warning':_0x22ce76(0x183)+_0x42d4b7};return{'valid':!![]};}function saveSingleSession(_0x1f9b30){const _0x40926f=a2_0x2c11bc;if(editingId){const _0x7f7533=sessions[_0x40926f(0x101)](_0x5727a9=>_0x5727a9['id']===editingId);if(_0x7f7533!==-0x1)sessions[_0x7f7533]=_0x1f9b30;}else sessions[_0x40926f(0x184)](_0x1f9b30);afterSaveAction([_0x1f9b30[_0x40926f(0x1ac)]]);}function createBatchSeries(_0x4d1963,_0x199b46,_0x50eb92){const _0x4b5dcc=a2_0x2c11bc,_0x5ef26f=generateId(),_0x3e4aed=[],_0x439836=[];let _0x318e4a=0x0,_0x303d53=new Date(_0x199b46);for(let _0x3e08a8=0x0;_0x3e08a8<_0x50eb92;_0x3e08a8++){const _0x42fd31=getLocalDateStr(_0x303d53),_0x29a146=validateAppointment(_0x42fd31,_0x4d1963[_0x4b5dcc(0x100)],_0x4d1963[_0x4b5dcc(0x1dd)],null,_0x4d1963[_0x4b5dcc(0x1a1)]);if(!_0x29a146[_0x4b5dcc(0x18a)])console[_0x4b5dcc(0x119)](_0x4b5dcc(0x209)+_0x42fd31+':\x20Client\x20already\x20booked'),_0x318e4a++;else{const _0x213282={..._0x4d1963,'id':generateId(),'dateStr':_0x42fd31,'seriesId':_0x5ef26f};_0x439836[_0x4b5dcc(0x184)](_0x213282),_0x3e4aed[_0x4b5dcc(0x184)](_0x42fd31);}_0x303d53['setDate'](_0x303d53[_0x4b5dcc(0x132)]()+0x7);}if(_0x439836['length']===0x0){showToast(_0x4b5dcc(0x195),![]);return;}sessions[_0x4b5dcc(0x184)](..._0x439836),lastUserActionTime=Date[_0x4b5dcc(0x17a)]();let _0x58affb=_0x4b5dcc(0x15c)+_0x439836[_0x4b5dcc(0x18d)];_0x318e4a>0x0&&(_0x58affb+=_0x4b5dcc(0x1aa)+_0x318e4a+')'),showToast(_0x58affb,!![]),afterSaveAction(_0x3e4aed);}function updateSeriesBatch(_0x36f38d,_0x551a0e){const _0x4bcac3=a2_0x2c11bc,_0x8c21d9=[],_0x4c3b07=_0x551a0e[_0x4bcac3(0x11e)];if(_0x36f38d==='single'){const _0x2c7b1d={..._0x551a0e,'seriesId':null},_0x237491=sessions[_0x4bcac3(0x101)](_0x180c11=>_0x180c11['id']===_0x551a0e['id']);if(_0x237491!==-0x1)sessions[_0x237491]=_0x2c7b1d;_0x8c21d9['push'](_0x2c7b1d['dateStr']);}else{if(_0x36f38d===_0x4bcac3(0x1eb)){const _0x1ffb2d=_0x551a0e['dateStr'];sessions[_0x4bcac3(0x20d)]((_0x131f8c,_0x4ab794)=>{const _0x39956a=_0x4bcac3;_0x131f8c['seriesId']===_0x4c3b07&&_0x131f8c['dateStr']>=_0x1ffb2d&&(sessions[_0x4ab794]={...sessions[_0x4ab794],'start':_0x551a0e[_0x39956a(0x100)],'end':_0x551a0e[_0x39956a(0x1dd)],'note':_0x551a0e[_0x39956a(0xe4)],'client':_0x551a0e[_0x39956a(0xcf)],'clientId':_0x551a0e[_0x39956a(0x1a1)]},_0x8c21d9[_0x39956a(0x184)](_0x131f8c[_0x39956a(0x1ac)]));});}}afterSaveAction(_0x8c21d9);}function tryDeleteSession(){const _0x47cc76=a2_0x2c11bc,_0x453d54=sessions['find'](_0x13d7d8=>_0x13d7d8['id']===editingId);if(!_0x453d54)return;_0x453d54[_0x47cc76(0x11e)]?openActionSheet(_0x47cc76(0x238)):commitDelete(_0x47cc76(0xe9),_0x453d54);}function commitDelete(_0xf7849e,_0x27dbbf){const _0x1df4af=a2_0x2c11bc;lastUserActionTime=Date[_0x1df4af(0x17a)](),NotificationManager[_0x1df4af(0x145)](_0x1df4af(0x1fa),_0x27dbbf);const _0x31557a=[];if(_0xf7849e===_0x1df4af(0xe9))sessions=sessions[_0x1df4af(0x11c)](_0x1f6456=>_0x1f6456['id']!==_0x27dbbf['id']),_0x31557a[_0x1df4af(0x184)](_0x27dbbf[_0x1df4af(0x1ac)]);else{if(_0xf7849e===_0x1df4af(0x1eb)){const _0x5245d4=_0x27dbbf[_0x1df4af(0x1ac)],_0x589a23=_0x27dbbf['seriesId'];sessions['forEach'](_0x22e7da=>{const _0x190d83=_0x1df4af;_0x22e7da[_0x190d83(0x11e)]===_0x589a23&&_0x22e7da[_0x190d83(0x1ac)]>=_0x5245d4&&_0x31557a[_0x190d83(0x184)](_0x22e7da[_0x190d83(0x1ac)]);}),sessions=sessions[_0x1df4af(0x11c)](_0x4f14c6=>!(_0x4f14c6[_0x1df4af(0x11e)]===_0x589a23&&_0x4f14c6['dateStr']>=_0x5245d4));}}afterSaveAction(_0x31557a);}function afterSaveAction(_0x35466f){const _0x441cbd=a2_0x2c11bc;DataManager[_0x441cbd(0x1c1)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x441cbd(0x1d1)](_0x35466f)[_0x441cbd(0xfe)](()=>console[_0x441cbd(0x119)](_0x441cbd(0x1cd)))[_0x441cbd(0x1be)](_0x12336a=>showToast(_0x441cbd(0x219),![]));}const NotificationManager={'formatDate'(_0x26271c){const _0x16e7fb=a2_0x2c11bc,_0x1e7244=new Date(_0x26271c),_0x3f0fea={'weekday':'long','day':'numeric','month':_0x16e7fb(0x122)};let _0x9e6dae=_0x1e7244[_0x16e7fb(0x12a)](_0x16e7fb(0xdd),_0x3f0fea);return _0x9e6dae[_0x16e7fb(0x167)](0x0)[_0x16e7fb(0x12f)]()+_0x9e6dae[_0x16e7fb(0x24d)](0x1);},'getText'(_0x398c1b,_0x49b127){const _0x4204a7=a2_0x2c11bc,_0x2079a6=this[_0x4204a7(0x258)](_0x49b127['dateStr']);switch(_0x398c1b){case _0x4204a7(0x185):return _0x4204a7(0x1e6)+(_0x4204a7(0x1d3)+_0x2079a6+'\x0a')+(_0x4204a7(0x253)+_0x49b127[_0x4204a7(0x100)]+'\x20—\x20'+_0x49b127['end']+'\x0a\x0a')+_0x4204a7(0xeb);case'update':return _0x4204a7(0x235)+_0x4204a7(0x25a)+(_0x4204a7(0x1bd)+_0x49b127[_0x4204a7(0x100)]+'\x20—\x20'+_0x49b127[_0x4204a7(0x1dd)]+_0x4204a7(0x21f))+(_0x4204a7(0x1d3)+_0x2079a6);case'cancel':return _0x4204a7(0x254)+(_0x4204a7(0x1c4)+_0x2079a6+'\x20('+_0x49b127[_0x4204a7(0x100)]+_0x4204a7(0x234));case _0x4204a7(0x13f):return _0x4204a7(0x207)+_0x4204a7(0x191)+_0x4204a7(0x124);default:return'';}},async 'send'(_0x5955fd,_0x49cc75){const _0xcce7c1=a2_0x2c11bc;console['log']('[Notify]\x20Attempting\x20to\x20send:',_0x5955fd,_0x49cc75);if(!_0x49cc75){console[_0xcce7c1(0x175)](_0xcce7c1(0xe1));return;}const _0x1f7027=String(_0x49cc75[_0xcce7c1(0x1a1)]);console['log'](_0xcce7c1(0x24f),_0x1f7027);if(!_0x49cc75[_0xcce7c1(0x1a1)]||_0x1f7027==='undefined'||_0x1f7027===_0xcce7c1(0x25b)){console[_0xcce7c1(0x175)](_0xcce7c1(0x215));if(_0x49cc75[_0xcce7c1(0xcf)]){const _0x1446cd=clients[_0xcce7c1(0x110)](_0x38002f=>_0x38002f[_0xcce7c1(0x1d6)]===_0x49cc75['client']);if(_0x1446cd)return console[_0xcce7c1(0x119)](_0xcce7c1(0x163),_0x1446cd['id']),this[_0xcce7c1(0x145)](_0x5955fd,{..._0x49cc75,'clientId':_0x1446cd['id']});}return;}if(_0x1f7027[_0xcce7c1(0x18d)]<0x5){console['warn'](_0xcce7c1(0x23b),_0x1f7027);return;}const _0xd996a3=this[_0xcce7c1(0x1a3)](_0x5955fd,_0x49cc75);if(!_0xd996a3){console[_0xcce7c1(0x175)](_0xcce7c1(0x192));return;}console[_0xcce7c1(0x119)](_0xcce7c1(0x1f5)+_0x1f7027+_0xcce7c1(0xf3)),DataManager[_0xcce7c1(0x1e0)](_0xcce7c1(0x188),{'chatId':_0x1f7027,'text':_0xd996a3})[_0xcce7c1(0xfe)](_0x423419=>console['log'](_0xcce7c1(0x23d),_0x423419))[_0xcce7c1(0x1be)](_0x32a86e=>console[_0xcce7c1(0x175)](_0xcce7c1(0x1af),_0x32a86e));}};function getLocalDateStr(_0x3a267d){const _0x2a746a=a2_0x2c11bc,_0x299ff9=_0x3a267d[_0x2a746a(0xf2)](),_0xa3b48e=String(_0x3a267d[_0x2a746a(0x136)]()+0x1)[_0x2a746a(0x23e)](0x2,'0'),_0x45811a=String(_0x3a267d[_0x2a746a(0x132)]())['padStart'](0x2,'0');return _0x299ff9+'-'+_0xa3b48e+'-'+_0x45811a;}function getDateStr(_0x526059){const _0x28cf56=a2_0x2c11bc,_0xb01bd1=new Date();return _0xb01bd1['setDate'](_0xb01bd1[_0x28cf56(0x132)]()+_0x526059),getLocalDateStr(_0xb01bd1);}function getStartOfWeek(_0x2b619d){const _0x30086b=a2_0x2c11bc,_0x2a1f63=new Date(_0x2b619d),_0x2adbe0=_0x2a1f63[_0x30086b(0x130)](),_0x139327=_0x2a1f63[_0x30086b(0x132)]()-_0x2adbe0+(_0x2adbe0===0x0?-0x6:0x1);return _0x2a1f63['setDate'](_0x139327),_0x2a1f63[_0x30086b(0x17b)](0x0,0x0,0x0,0x0),_0x2a1f63;}function hexToRgba(_0x10e6e4,_0x192b25){const _0xa9aaf5=a2_0x2c11bc;if(!_0x10e6e4)return _0xa9aaf5(0x1b0);let _0x3253a3=0x0,_0x1b234e=0x0,_0x3538a5=0x0;if(_0x10e6e4[_0xa9aaf5(0x18d)]===0x4)_0x3253a3='0x'+_0x10e6e4[0x1]+_0x10e6e4[0x1],_0x1b234e='0x'+_0x10e6e4[0x2]+_0x10e6e4[0x2],_0x3538a5='0x'+_0x10e6e4[0x3]+_0x10e6e4[0x3];else _0x10e6e4['length']===0x7&&(_0x3253a3='0x'+_0x10e6e4[0x1]+_0x10e6e4[0x2],_0x1b234e='0x'+_0x10e6e4[0x3]+_0x10e6e4[0x4],_0x3538a5='0x'+_0x10e6e4[0x5]+_0x10e6e4[0x6]);return _0xa9aaf5(0xd2)+ +_0x3253a3+',\x20'+ +_0x1b234e+',\x20'+ +_0x3538a5+',\x20'+_0x192b25+')';}function renderTimeColumn(){const _0x3b5ebc=a2_0x2c11bc,_0x119d14=document[_0x3b5ebc(0x10b)]('timeColumn'),_0xdc557f=document[_0x3b5ebc(0x10b)](_0x3b5ebc(0x1b2));_0x119d14['innerHTML']='',_0x119d14[_0x3b5ebc(0x164)](_0xdc557f);for(let _0x4801fe=0x0;_0x4801fe<0x18;_0x4801fe++){const _0x2cdb29=document['createElement'](_0x3b5ebc(0x120));_0x2cdb29[_0x3b5ebc(0x137)]=_0x3b5ebc(0x229);if(_0x4801fe>0x0)_0x2cdb29[_0x3b5ebc(0x1c5)]=_0x3b5ebc(0x22a)+String(_0x4801fe)['padStart'](0x2,'0')+_0x3b5ebc(0x1b7);_0x119d14[_0x3b5ebc(0x164)](_0x2cdb29);}}function renderDayRange(_0x1308ba,_0x21c4be){const _0x110ec5=a2_0x2c11bc,_0x130f36=document[_0x110ec5(0x10b)](_0x110ec5(0x1bb)),_0x1fa33e=document[_0x110ec5(0x10b)](_0x110ec5(0x149)),_0x2dfe0d=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x61bdc1=new Date();_0x61bdc1[_0x110ec5(0x17b)](0x0,0x0,0x0,0x0);const _0x3053b3=getLocalDateStr(new Date());for(let _0x4e6321=_0x1308ba;_0x4e6321<=_0x21c4be;_0x4e6321++){const _0xc55622=new Date(_0x61bdc1);_0xc55622['setDate'](_0xc55622[_0x110ec5(0x132)]()+_0x4e6321);const _0x21b73d=getLocalDateStr(_0xc55622);let _0x1e362e=_0xc55622[_0x110ec5(0x130)]()-0x1;if(_0x1e362e===-0x1)_0x1e362e=0x6;const _0x3a5d05=_0x21b73d===_0x3053b3,_0x468fb8=document[_0x110ec5(0x244)](_0x110ec5(0x120));_0x468fb8['className']='day-col-header\x20'+(_0x3a5d05?_0x110ec5(0x16d):''),_0x468fb8['id']=_0x110ec5(0x198)+_0x21b73d,_0x468fb8[_0x110ec5(0x1cf)](_0x110ec5(0xd5),_0x21b73d),_0x468fb8['innerHTML']=_0x110ec5(0x1c3)+_0x2dfe0d[_0x1e362e]+'</div><div\x20class=\x22dch-num\x22>'+_0xc55622[_0x110ec5(0x132)]()+_0x110ec5(0x1bc)+_0x21b73d+_0x110ec5(0xcd),_0x468fb8[_0x110ec5(0x240)]=()=>openDayOptions(_0x21b73d,_0x2dfe0d[_0x1e362e]+'\x20'+_0xc55622[_0x110ec5(0x132)]()),_0x130f36[_0x110ec5(0x164)](_0x468fb8);const _0x29b333=document[_0x110ec5(0x244)]('div');_0x29b333[_0x110ec5(0x137)]=_0x110ec5(0x21d)+(_0x3a5d05?_0x110ec5(0x16d):''),_0x29b333[_0x110ec5(0x1cf)](_0x110ec5(0xd5),_0x21b73d),_0x29b333[_0x110ec5(0x1cf)](_0x110ec5(0x14c),_0x1e362e),renderEventsForColumn(_0x29b333,_0x21b73d,_0x1e362e),attachLongPressHandler(_0x29b333,_0xc55622),_0x1fa33e[_0x110ec5(0x164)](_0x29b333),updateDayStats(_0x21b73d);}}function reRenderBlocks(){const _0x13e061=a2_0x2c11bc;document[_0x13e061(0xce)](_0x13e061(0x174))[_0x13e061(0x20d)](_0x36a7e6=>{const _0x2c630a=_0x13e061;_0x36a7e6['querySelectorAll'](_0x2c630a(0x172))[_0x2c630a(0x20d)](_0xdef298=>_0xdef298[_0x2c630a(0x168)]());const _0x11936f=_0x36a7e6[_0x2c630a(0x170)](_0x2c630a(0xd5)),_0x2dde4c=parseInt(_0x36a7e6[_0x2c630a(0x170)](_0x2c630a(0x14c))),_0x2c05c4=Math[_0x2c630a(0x108)](_0x36a7e6[_0x2c630a(0x140)]);(availabilityPattern[_0x2dde4c]||[])[_0x2c630a(0x20d)](_0x4fe9b2=>{const _0x5354fb=_0x2c630a,_0x6e8e0d=document['createElement']('div');_0x6e8e0d[_0x5354fb(0x137)]=_0x5354fb(0x166);const _0x3f4f26=_0x4fe9b2*GRID_H;_0x6e8e0d[_0x5354fb(0xed)][_0x5354fb(0x1c9)]=_0x3f4f26+'px',_0x6e8e0d['style'][_0x5354fb(0x1f2)]='-'+_0x2c05c4+_0x5354fb(0x104)+_0x3f4f26+'px',_0x36a7e6[_0x5354fb(0x164)](_0x6e8e0d);});if(specialRanges&&specialRanges[_0x2c630a(0x18d)]>0x0){const _0x1fa424=new Date(_0x11936f+_0x2c630a(0x1e9))[_0x2c630a(0x11f)](),_0x59275b=new Date(_0x11936f+_0x2c630a(0x14e))[_0x2c630a(0x11f)]();specialRanges[_0x2c630a(0x20d)](_0x1a3240=>{const _0x1767fb=_0x2c630a,_0x6fc932=new Date(_0x1a3240[_0x1767fb(0x100)])['getTime'](),_0x43fe5d=new Date(_0x1a3240[_0x1767fb(0x1dd)])[_0x1767fb(0x11f)](),_0x6f1e06=Math[_0x1767fb(0x19b)](_0x1fa424,_0x6fc932),_0x2c0305=Math['min'](_0x59275b,_0x43fe5d);if(_0x6f1e06<_0x2c0305){if(_0x6f1e06<=_0x1fa424&&_0x2c0305>=_0x59275b-0xea60){if(!_0x36a7e6[_0x1767fb(0xea)](_0x1767fb(0x12e))){const _0x1470a3=document[_0x1767fb(0x244)](_0x1767fb(0x120));_0x1470a3[_0x1767fb(0x137)]=_0x1767fb(0x246),_0x1470a3['style'][_0x1767fb(0x1f2)]='-'+_0x2c05c4+_0x1767fb(0x11a),_0x36a7e6[_0x1767fb(0x164)](_0x1470a3);}}else{const _0x1024ed=(_0x6f1e06-_0x1fa424)/0x36ee80*GRID_H,_0x3f0da3=(_0x2c0305-_0x6f1e06)/0x36ee80*GRID_H,_0x5e2dfb=document[_0x1767fb(0x244)](_0x1767fb(0x120));_0x5e2dfb['className']=_0x1767fb(0x1da),_0x5e2dfb[_0x1767fb(0xed)]['top']=_0x1024ed+'px',_0x5e2dfb['style'][_0x1767fb(0x19a)]=_0x3f0da3+'px',_0x5e2dfb['style'][_0x1767fb(0x1f2)]='-'+_0x2c05c4+'px\x20-'+_0x1024ed+'px',_0x36a7e6[_0x1767fb(0x164)](_0x5e2dfb);}}});}if(dateExceptions[_0x11936f]===_0x2c630a(0x17f)){if(!_0x36a7e6[_0x2c630a(0xea)](_0x2c630a(0x12e))){const _0x3b65b4=document[_0x2c630a(0x244)](_0x2c630a(0x120));_0x3b65b4[_0x2c630a(0x137)]=_0x2c630a(0x246),_0x3b65b4['style'][_0x2c630a(0x1f2)]='-'+_0x2c05c4+_0x2c630a(0x11a),_0x36a7e6[_0x2c630a(0x164)](_0x3b65b4);}}renderEventsForColumn(_0x36a7e6,_0x11936f,_0x2dde4c),updateDayStats(_0x11936f);});}function updateAllDayStats(){const _0x2a7111=a2_0x2c11bc;document[_0x2a7111(0xce)]('.day-col-header')['forEach'](_0x147b72=>{const _0x33ccf5=_0x2a7111;updateDayStats(_0x147b72[_0x33ccf5(0x170)](_0x33ccf5(0xd5)));});}function updateDayStats(_0x64033e){const _0x19c93f=a2_0x2c11bc,_0x423ded=document['getElementById']('stat-'+_0x64033e);if(!_0x423ded)return;const _0x43906f=new Date(_0x64033e);let _0x2dffcc=_0x43906f[_0x19c93f(0x130)]()-0x1;if(_0x2dffcc===-0x1)_0x2dffcc=0x6;if(dateExceptions[_0x64033e]==='off'){_0x423ded[_0x19c93f(0xed)]['display']=_0x19c93f(0x147);return;}const _0x3acca9=availabilityPattern[_0x2dffcc]||[],_0x233504=0x18-_0x3acca9[_0x19c93f(0x18d)],_0x47dc9c=_0x233504*0x3c,_0x253bd2=sessions['filter'](_0x3a0c30=>_0x3a0c30[_0x19c93f(0x1ac)]===_0x64033e&&_0x3a0c30[_0x19c93f(0x15d)]!=='cancelled');if(_0x253bd2[_0x19c93f(0x18d)]===0x0){_0x423ded[_0x19c93f(0xed)]['display']=_0x19c93f(0x147);return;}let _0x2423ac=_0x253bd2['map'](_0x1bd0f1=>{const _0x6e015e=_0x19c93f,[_0x42cbbd,_0x1cef22]=_0x1bd0f1[_0x6e015e(0x100)][_0x6e015e(0x1ae)](':')[_0x6e015e(0xff)](Number),[_0x5972c7,_0xa42c47]=_0x1bd0f1[_0x6e015e(0x1dd)][_0x6e015e(0x1ae)](':')[_0x6e015e(0xff)](Number);return[_0x42cbbd*0x3c+_0x1cef22,_0x5972c7*0x3c+_0xa42c47];});_0x2423ac[_0x19c93f(0x217)]((_0x112329,_0x5a0cd2)=>_0x112329[0x0]-_0x5a0cd2[0x0]);let _0x513cc7=[];if(_0x2423ac[_0x19c93f(0x18d)]>0x0){let _0x260917=_0x2423ac[0x0];for(let _0x4ebc65=0x1;_0x4ebc65<_0x2423ac[_0x19c93f(0x18d)];_0x4ebc65++){_0x2423ac[_0x4ebc65][0x0]<_0x260917[0x1]?_0x260917[0x1]=Math[_0x19c93f(0x19b)](_0x260917[0x1],_0x2423ac[_0x4ebc65][0x1]):(_0x513cc7[_0x19c93f(0x184)](_0x260917),_0x260917=_0x2423ac[_0x4ebc65]);}_0x513cc7[_0x19c93f(0x184)](_0x260917);}let _0x378a6b=0x0;_0x513cc7['forEach'](_0x3bd5c0=>_0x378a6b+=_0x3bd5c0[0x1]-_0x3bd5c0[0x0]),_0x423ded['style']['display']=_0x19c93f(0x1a5);const _0x1149aa=_0x423ded['querySelector'](_0x19c93f(0x1d8));if(_0x47dc9c===0x0){_0x1149aa[_0x19c93f(0xed)][_0x19c93f(0x156)]=_0x19c93f(0x22f),_0x1149aa[_0x19c93f(0xed)][_0x19c93f(0x214)]='var(--acc-red)';return;}const _0x552383=_0x378a6b/_0x47dc9c*0x64;console[_0x19c93f(0x119)]('['+_0x64033e+_0x19c93f(0x14a)+_0x233504+_0x19c93f(0xef)+_0x378a6b+'мин,\x20Загрузка:\x20'+_0x552383[_0x19c93f(0x171)](0x1)+'%'),_0x552383>0x64?(_0x1149aa['style']['width']=_0x19c93f(0x22f),_0x1149aa[_0x19c93f(0xed)][_0x19c93f(0x214)]='var(--acc-red)'):(_0x1149aa[_0x19c93f(0xed)]['width']=_0x552383+'%',_0x1149aa[_0x19c93f(0xed)]['background']=_0x19c93f(0x1d0));}function renderEventsForColumn(_0x17a8f8,_0x15de9c,_0x4678c2){const _0x427570=a2_0x2c11bc,_0x22a65c=sessions[_0x427570(0x11c)](_0x431332=>_0x431332[_0x427570(0x1ac)]===_0x15de9c),_0xfd9949=_0x22a65c['map'](_0x3a5feb=>{const _0x584410=_0x427570,[_0xc520b4,_0x583f3e]=_0x3a5feb[_0x584410(0x100)][_0x584410(0x1ae)](':')[_0x584410(0xff)](Number),[_0x3d2bd6,_0x5e2050]=_0x3a5feb[_0x584410(0x1dd)][_0x584410(0x1ae)](':')[_0x584410(0xff)](Number);return{'data':_0x3a5feb,'start':_0xc520b4*0x3c+_0x583f3e,'end':_0x3d2bd6*0x3c+_0x5e2050,'colIndex':0x0};});_0xfd9949[_0x427570(0x217)]((_0x371eb9,_0x3ad760)=>{const _0xe8cac8=_0x427570;if(_0x371eb9[_0xe8cac8(0x100)]!==_0x3ad760[_0xe8cac8(0x100)])return _0x371eb9[_0xe8cac8(0x100)]-_0x3ad760[_0xe8cac8(0x100)];return _0x3ad760[_0xe8cac8(0x1dd)]-_0x3ad760[_0xe8cac8(0x100)]-(_0x371eb9[_0xe8cac8(0x1dd)]-_0x371eb9['start']);});const _0x281f35=[];_0xfd9949[_0x427570(0x20d)](_0x298ee1=>{const _0x1ca7dd=_0x427570;let _0x5d5071=![];for(let _0x97338c=0x0;_0x97338c<_0x281f35[_0x1ca7dd(0x18d)];_0x97338c++){const _0xd73a9b=_0x281f35[_0x97338c],_0x3ee51f=_0xd73a9b[_0xd73a9b[_0x1ca7dd(0x18d)]-0x1];if(_0x298ee1['start']>=_0x3ee51f[_0x1ca7dd(0x1dd)]){_0xd73a9b[_0x1ca7dd(0x184)](_0x298ee1),_0x298ee1['colIndex']=_0x97338c,_0x5d5071=!![];break;}}!_0x5d5071&&(_0x281f35[_0x1ca7dd(0x184)]([_0x298ee1]),_0x298ee1[_0x1ca7dd(0x241)]=_0x281f35[_0x1ca7dd(0x18d)]-0x1);}),_0xfd9949[_0x427570(0x20d)](_0x44816d=>{const _0x4c827d=_0x427570;let _0x293ace=0x0;_0xfd9949[_0x4c827d(0x20d)](_0x1896e7=>{const _0x3f7637=_0x4c827d;if(Math['max'](_0x44816d[_0x3f7637(0x100)],_0x1896e7[_0x3f7637(0x100)])<Math['min'](_0x44816d['end'],_0x1896e7[_0x3f7637(0x1dd)])){if(_0x1896e7[_0x3f7637(0x241)]>_0x293ace)_0x293ace=_0x1896e7[_0x3f7637(0x241)];}});const _0x244dfa=_0x293ace+0x1,_0x206700=0x64/_0x244dfa,_0x3ac688=_0x44816d['colIndex']*_0x206700,_0xe0aaea=createEventEl(_0x44816d[_0x4c827d(0x178)]);_0xe0aaea[_0x4c827d(0xed)][_0x4c827d(0x156)]='calc('+_0x206700+_0x4c827d(0x19c),_0xe0aaea[_0x4c827d(0xed)]['left']=_0x4c827d(0x193)+_0x3ac688+_0x4c827d(0xf0),_0xe0aaea['style']['zIndex']=0xa+_0x44816d[_0x4c827d(0x241)],_0x206700<0x55&&_0xe0aaea['classList']['add'](_0x4c827d(0x151)),_0x17a8f8[_0x4c827d(0x164)](_0xe0aaea);});}function createEventEl(_0x47aae7){const _0x554aee=a2_0x2c11bc,[_0xaf3e64,_0x144fcf]=_0x47aae7[_0x554aee(0x100)][_0x554aee(0x1ae)](':')[_0x554aee(0xff)](Number),[_0x5440ee,_0x51bf91]=_0x47aae7[_0x554aee(0x1dd)][_0x554aee(0x1ae)](':')[_0x554aee(0xff)](Number),_0x3963e6=(_0xaf3e64*0x3c+_0x144fcf)/0x3c*GRID_H,_0x409efb=(_0x5440ee*0x3c+_0x51bf91-(_0xaf3e64*0x3c+_0x144fcf))/0x3c*GRID_H,_0x4e1288=document['createElement'](_0x554aee(0x120)),_0x5c7c1d=_0x47aae7[_0x554aee(0x15d)]==='completed'?_0x554aee(0x24c):'';_0x4e1288[_0x554aee(0x137)]=_0x554aee(0x17d)+_0x5c7c1d,_0x4e1288[_0x554aee(0xed)][_0x554aee(0x1c9)]=_0x3963e6+'px',_0x4e1288[_0x554aee(0xed)][_0x554aee(0x19a)]=Math[_0x554aee(0x19b)](_0x409efb,0x14)+'px';const _0x1f39d5=clients['find'](_0x4e241f=>_0x47aae7[_0x554aee(0x1a1)]&&String(_0x4e241f['id'])===String(_0x47aae7[_0x554aee(0x1a1)])||_0x4e241f[_0x554aee(0x1d6)]===_0x47aae7[_0x554aee(0xcf)]),_0x8bbd37=_0x1f39d5?_0x1f39d5[_0x554aee(0x10e)]:_0x554aee(0x1fd);_0x4e1288[_0x554aee(0xed)][_0x554aee(0xe8)]=_0x8bbd37,_0x4e1288[_0x554aee(0xed)][_0x554aee(0xdc)]=hexToRgba(_0x8bbd37,0.85);let _0x1648d1=_0x554aee(0x141)+_0x47aae7['client']+_0x554aee(0x11d)+_0x47aae7[_0x554aee(0x100)]+_0x554aee(0x1a2)+_0x47aae7[_0x554aee(0x1dd)]+_0x554aee(0x186);return _0x47aae7['seriesId']&&(_0x1648d1+=_0x554aee(0x200)),_0x47aae7[_0x554aee(0x15d)]===_0x554aee(0x1db)&&(_0x1648d1+='<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>'),_0x4e1288[_0x554aee(0x1c5)]=_0x1648d1,_0x4e1288[_0x554aee(0x240)]=_0x494427=>{const _0x442f0e=_0x554aee;_0x494427[_0x442f0e(0x113)](),openEdit(_0x47aae7);},_0x4e1288;}function attachLongPressHandler(_0x481c6b,_0x1eeb43){const _0x25bb66=a2_0x2c11bc;let _0x1fc6b1=0x0,_0x5b85b3=null;const _0x4feb9c=_0x4fc0ff=>{const _0x39020e=a2_0x3bfc;if(_0x4fc0ff[_0x39020e(0x157)][_0x39020e(0x154)](_0x39020e(0x1f8)))return;isScrolling=![],_0x1fc6b1=_0x4fc0ff['touches']?_0x4fc0ff[_0x39020e(0xe6)][0x0][_0x39020e(0xf4)]:_0x4fc0ff[_0x39020e(0xf4)],_0x5b85b3=setTimeout(()=>{const _0x124a64=_0x39020e;if(!isScrolling){navigator[_0x124a64(0x1b6)]?.(0x32);const _0x332f6b=_0x481c6b[_0x124a64(0x212)](),_0x37750d=Math[_0x124a64(0xd3)]((_0x1fc6b1-_0x332f6b['top'])/GRID_H);_0x1eeb43['setHours'](_0x37750d,0x0),openAddSession(_0x1eeb43);}},0x1f4);},_0x83070e=()=>{isScrolling=!![],clearTimeout(_0x5b85b3);},_0x3ca1bd=()=>{clearTimeout(_0x5b85b3);};_0x481c6b[_0x25bb66(0x259)](_0x25bb66(0x1f7),_0x4feb9c,{'passive':!![]}),_0x481c6b[_0x25bb66(0x259)]('touchmove',_0x83070e,{'passive':!![]}),_0x481c6b['addEventListener'](_0x25bb66(0xcc),_0x3ca1bd),_0x481c6b[_0x25bb66(0x259)](_0x25bb66(0x23c),_0x4feb9c),_0x481c6b['addEventListener'](_0x25bb66(0x1ef),_0x83070e),_0x481c6b['addEventListener'](_0x25bb66(0x1fe),_0x3ca1bd);}function cancelLongPress(){}function handleInfiniteScroll(){const _0xd2d9b6=a2_0x2c11bc,_0x3a2ae4=document[_0xd2d9b6(0x10b)]('matrixViewport'),_0x44806b=_0x3a2ae4[_0xd2d9b6(0x189)],_0x373b89=_0x3a2ae4[_0xd2d9b6(0x148)],_0xdf5f86=_0x3a2ae4['clientWidth'];if(_0x373b89-(_0x44806b+_0xdf5f86)<0x12c){const _0x2b09af=endOffset;endOffset+=0xe,renderDayRange(_0x2b09af+0x1,endOffset),reRenderBlocks();}if(_0x44806b<0x12c){const _0x198ab4=startOffset;startOffset-=0xe,prependDays(startOffset,_0x198ab4-0x1),_0x3a2ae4[_0xd2d9b6(0x189)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x9c98c8,_0x5d34db){const _0x44c0d8=a2_0x2c11bc,_0x1a2caa=document[_0x44c0d8(0x10b)](_0x44c0d8(0x1bb)),_0x5ec675=document['getElementById'](_0x44c0d8(0x149)),_0x87eed9=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x166f74=new Date();_0x166f74[_0x44c0d8(0x17b)](0x0,0x0,0x0,0x0);const _0x174fe6=getLocalDateStr(new Date()),_0x1802a9=document[_0x44c0d8(0x1ca)](),_0x32af79=document[_0x44c0d8(0x1ca)]();for(let _0x3e26bd=_0x9c98c8;_0x3e26bd<=_0x5d34db;_0x3e26bd++){const _0x4fe023=new Date(_0x166f74);_0x4fe023[_0x44c0d8(0x111)](_0x4fe023[_0x44c0d8(0x132)]()+_0x3e26bd);const _0x225e2=getLocalDateStr(_0x4fe023);let _0x2ebf06=_0x4fe023['getDay']()-0x1;if(_0x2ebf06===-0x1)_0x2ebf06=0x6;const _0x2561ff=_0x225e2===_0x174fe6,_0x2acb0c=document['createElement']('div');_0x2acb0c[_0x44c0d8(0x137)]=_0x44c0d8(0xe5)+(_0x2561ff?_0x44c0d8(0x16d):''),_0x2acb0c['id']=_0x44c0d8(0x198)+_0x225e2,_0x2acb0c[_0x44c0d8(0x1cf)](_0x44c0d8(0xd5),_0x225e2),_0x2acb0c['innerHTML']=_0x44c0d8(0x1c3)+_0x87eed9[_0x2ebf06]+'</div><div\x20class=\x22dch-num\x22>'+_0x4fe023['getDate']()+'</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-'+_0x225e2+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x2acb0c[_0x44c0d8(0x240)]=()=>openDayOptions(_0x225e2,_0x87eed9[_0x2ebf06]+'\x20'+_0x4fe023[_0x44c0d8(0x132)]()),_0x1802a9[_0x44c0d8(0x164)](_0x2acb0c);const _0x4ce8e0=document[_0x44c0d8(0x244)](_0x44c0d8(0x120));_0x4ce8e0['className']=_0x44c0d8(0x21d)+(_0x2561ff?_0x44c0d8(0x16d):''),_0x4ce8e0[_0x44c0d8(0x1cf)](_0x44c0d8(0xd5),_0x225e2),_0x4ce8e0[_0x44c0d8(0x1cf)](_0x44c0d8(0x14c),_0x2ebf06),renderEventsForColumn(_0x4ce8e0,_0x225e2,_0x2ebf06),attachLongPressHandler(_0x4ce8e0,_0x4fe023),_0x32af79['appendChild'](_0x4ce8e0),updateDayStats(_0x225e2);}_0x1a2caa[_0x44c0d8(0x1b8)](_0x1802a9,_0x1a2caa[_0x44c0d8(0x16e)]),_0x5ec675[_0x44c0d8(0x1b8)](_0x32af79,_0x5ec675[_0x44c0d8(0xea)](_0x44c0d8(0x237)));}function validateAppointment(_0xcbb9ff,_0x5d336b,_0x10f7f8,_0x2603fb,_0x34df99){const _0x347d90=a2_0x2c11bc,[_0x56d339,_0x3d557e]=_0x5d336b[_0x347d90(0x1ae)](':')[_0x347d90(0xff)](Number),[_0x240977,_0x1ae708]=_0x10f7f8['split'](':')[_0x347d90(0xff)](Number),_0x504d62=_0x56d339*0x3c+_0x3d557e,_0x382a2e=_0x240977*0x3c+_0x1ae708,_0x542b56=String(_0x34df99);let _0x3613d5=![],_0x2546a3='';for(let _0x4a9ef3 of sessions){if(_0x4a9ef3[_0x347d90(0x1ac)]!==_0xcbb9ff)continue;if(_0x4a9ef3[_0x347d90(0x15d)]===_0x347d90(0x1a9))continue;if(_0x2603fb&&String(_0x4a9ef3['id'])===String(_0x2603fb))continue;const [_0x149407,_0x2d8b8a]=_0x4a9ef3[_0x347d90(0x100)][_0x347d90(0x1ae)](':')[_0x347d90(0xff)](Number),[_0x327ca1,_0x21864c]=_0x4a9ef3[_0x347d90(0x1dd)][_0x347d90(0x1ae)](':')['map'](Number),_0x2e125a=_0x149407*0x3c+_0x2d8b8a,_0x14109f=_0x327ca1*0x3c+_0x21864c;if(Math[_0x347d90(0x19b)](_0x504d62,_0x2e125a)<Math[_0x347d90(0x1ea)](_0x382a2e,_0x14109f)){if(_0x4a9ef3[_0x347d90(0x1a1)]&&String(_0x4a9ef3[_0x347d90(0x1a1)])===_0x542b56)return{'valid':![],'msg':_0x347d90(0x1f6)+_0x4a9ef3['client']+_0x347d90(0x1e1)};_0x3613d5=!![],_0x2546a3=_0x4a9ef3[_0x347d90(0xcf)];}}if(_0x3613d5)return{'valid':!![],'warning':'Групповая:\x20также\x20записан\x20'+_0x2546a3};return{'valid':!![]};}function updateDateDisplay(){const _0x1898da=a2_0x2c11bc,_0x5e2fb8=document[_0x1898da(0x10b)](_0x1898da(0x1d9))['value'],_0x59928f=document['getElementById'](_0x1898da(0xf5));if(!_0x5e2fb8){_0x59928f[_0x1898da(0x15f)]='';return;}const [_0x3534f4,_0x11f57b,_0x1191ed]=_0x5e2fb8[_0x1898da(0x1ae)]('-')['map'](Number),_0x5855dd=new Date(_0x3534f4,_0x11f57b-0x1,_0x1191ed),_0x16bcb5={'weekday':_0x1898da(0x122),'day':_0x1898da(0x221),'month':_0x1898da(0x122),'year':_0x1898da(0x221)};let _0x59df62=_0x5855dd[_0x1898da(0x12a)](_0x1898da(0xdd),_0x16bcb5);_0x59df62=_0x59df62[_0x1898da(0x167)](0x0)[_0x1898da(0x12f)]()+_0x59df62[_0x1898da(0x24d)](0x1),_0x59928f['textContent']=_0x59df62;}function autoSetEndTime(){const _0x2ab4bd=a2_0x2c11bc,_0x4098c8=document[_0x2ab4bd(0x10b)]('inpStart')[_0x2ab4bd(0x1b9)];if(!_0x4098c8)return;const [_0x13c296,_0x22e705]=_0x4098c8['split'](':')[_0x2ab4bd(0xff)](Number);let _0x3fa869=_0x13c296+0x1;if(_0x3fa869>0x17)_0x3fa869=0x0;const _0x4362d7=String(_0x3fa869)[_0x2ab4bd(0x23e)](0x2,'0')+':'+String(_0x22e705)[_0x2ab4bd(0x23e)](0x2,'0');document[_0x2ab4bd(0x10b)]('inpEnd')[_0x2ab4bd(0x1b9)]=_0x4362d7;}function populateClientSelect(){const _0x279aac=a2_0x2c11bc,_0x221726=document['getElementById'](_0x279aac(0x247));_0x221726[_0x279aac(0x1c5)]='';if(clients[_0x279aac(0x18d)]===0x0){const _0x5a5eae=document['createElement'](_0x279aac(0x1cb));_0x5a5eae[_0x279aac(0x257)]=_0x279aac(0xd1),_0x221726[_0x279aac(0x164)](_0x5a5eae);return;}clients['forEach'](_0x2eb13a=>{const _0x4ccba9=_0x279aac,_0xa20849=document['createElement'](_0x4ccba9(0x1cb));_0xa20849['value']=_0x2eb13a[_0x4ccba9(0x1d6)],_0xa20849[_0x4ccba9(0x15f)]=_0x2eb13a[_0x4ccba9(0x1d6)],_0x221726[_0x4ccba9(0x164)](_0xa20849);});}function openActionSheet(_0xfd9ef7){const _0x177ef7=a2_0x2c11bc,_0x64ed39=document['getElementById'](_0x177ef7(0x10f)),_0x51fbcc=document[_0x177ef7(0x10b)](_0x177ef7(0x22c)),_0x391dd6=document[_0x177ef7(0x10b)](_0x177ef7(0x199)),_0x50ec93=document[_0x177ef7(0x10b)]('asBtnOne'),_0x51d024=document[_0x177ef7(0x10b)](_0x177ef7(0x210));_0x51fbcc[_0x177ef7(0x196)][_0x177ef7(0x159)](_0x177ef7(0x225)),_0x64ed39[_0x177ef7(0x196)][_0x177ef7(0x159)]('open');if(_0xfd9ef7===_0x177ef7(0xfa))_0x391dd6['textContent']='Изменение\x20серии',_0x50ec93[_0x177ef7(0x15f)]=_0x177ef7(0x1f4),_0x50ec93[_0x177ef7(0x240)]=()=>{const _0x4f8dc4=_0x177ef7;closeActionSheet(),updateSeriesBatch(_0x4f8dc4(0xe9),tempSessionData);},_0x51d024[_0x177ef7(0x15f)]='Эту\x20и\x20будущие',_0x51d024[_0x177ef7(0x240)]=()=>{const _0xff787b=_0x177ef7;closeActionSheet(),updateSeriesBatch(_0xff787b(0x1eb),tempSessionData);};else _0xfd9ef7===_0x177ef7(0x238)&&(_0x391dd6['textContent']=_0x177ef7(0x243),_0x50ec93[_0x177ef7(0x15f)]=_0x177ef7(0x1f4),_0x50ec93[_0x177ef7(0x137)]='as-button\x20danger',_0x50ec93[_0x177ef7(0x240)]=()=>{const _0x43ce8d=_0x177ef7;closeActionSheet(),commitDelete(_0x43ce8d(0xe9),sessions[_0x43ce8d(0x110)](_0x1d201e=>_0x1d201e['id']===editingId));},_0x51d024[_0x177ef7(0x15f)]=_0x177ef7(0x251),_0x51d024[_0x177ef7(0x137)]=_0x177ef7(0x18e),_0x51d024[_0x177ef7(0x240)]=()=>{closeActionSheet(),commitDelete('series',sessions['find'](_0x389ccc=>_0x389ccc['id']===editingId));});}function closeActionSheet(){const _0x4674b4=a2_0x2c11bc;document[_0x4674b4(0x10b)]('actionSheet')[_0x4674b4(0x196)][_0x4674b4(0x168)](_0x4674b4(0x1ed)),document[_0x4674b4(0x10b)]('actionSheetOverlay')[_0x4674b4(0x196)]['remove'](_0x4674b4(0x225));}function openSettings(){const _0x1a35d7=a2_0x2c11bc;openSheet(_0x1a35d7(0x1d5));}function saveCoachSettings(){const _0x36b8a9=a2_0x2c11bc,_0x54ef6f=document[_0x36b8a9(0x10b)](_0x36b8a9(0xf1))[_0x36b8a9(0x1b9)];localStorage['setItem'](_0x36b8a9(0xde),_0x54ef6f),console['log'](_0x36b8a9(0x106),_0x54ef6f),DataManager[_0x36b8a9(0x1e0)](_0x36b8a9(0x143),{'settings':{'cancel_window':_0x54ef6f}})['catch'](_0x3fde01=>{const _0xf59b6a=_0x36b8a9;console[_0xf59b6a(0x175)](_0xf59b6a(0x176),_0x3fde01),showToast(_0xf59b6a(0x18f),![]);});}function loadCoachSettings(){const _0x4add76=a2_0x2c11bc,_0x27b13e=localStorage[_0x4add76(0x152)](_0x4add76(0xde));_0x27b13e&&(document[_0x4add76(0x10b)](_0x4add76(0xf1))[_0x4add76(0x1b9)]=_0x27b13e);}function openRangesSheet(){const _0x336bee=a2_0x2c11bc;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x336bee(0xdb));}function addRange(){const _0x25745c=a2_0x2c11bc,_0x475c5d=document[_0x25745c(0x10b)]('rangeStartDate')[_0x25745c(0x1b9)],_0x4b1403=document['getElementById'](_0x25745c(0x1e8))[_0x25745c(0x1b9)],_0x4af849=document[_0x25745c(0x10b)](_0x25745c(0x1f0))[_0x25745c(0x1b9)],_0x5b9cfb=document[_0x25745c(0x10b)](_0x25745c(0x1ad))[_0x25745c(0x1b9)];if(!_0x475c5d||!_0x4b1403||!_0x4af849||!_0x5b9cfb)return alert(_0x25745c(0xee));const _0x2fc462=_0x475c5d+'T'+_0x4b1403,_0xc43426=_0x4af849+'T'+_0x5b9cfb;if(_0x2fc462>=_0xc43426)return alert(_0x25745c(0x205));specialRanges[_0x25745c(0x184)]({'start':_0x2fc462,'end':_0xc43426}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x25745c(0x1c1)](),DataManager[_0x25745c(0x1e0)]('save_settings',{'settings':{'ranges':specialRanges}});}function deleteRange(_0x4cf8d6){const _0xc7cbfd=a2_0x2c11bc;specialRanges['splice'](_0x4cf8d6,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0xc7cbfd(0x1c1)](),DataManager['fetchFromServer'](_0xc7cbfd(0x143),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x361306=a2_0x2c11bc;document[_0x361306(0x10b)]('rangeStartDate')[_0x361306(0x1b9)]='',document[_0x361306(0x10b)](_0x361306(0x1e8))['value']=_0x361306(0x10d),document['getElementById']('rangeEndDate')[_0x361306(0x1b9)]='',document['getElementById'](_0x361306(0x1ad))['value']=_0x361306(0x11b);}function renderRangesList(){const _0x5b5e70=a2_0x2c11bc,_0x57d922=document[_0x5b5e70(0x10b)](_0x5b5e70(0x1ab));_0x57d922['innerHTML']='';if(!specialRanges['length']){_0x57d922[_0x5b5e70(0x1c5)]=_0x5b5e70(0x128);return;}specialRanges[_0x5b5e70(0x20d)]((_0x1cf271,_0x47b9bf)=>{const _0x754c8d=_0x5b5e70,_0x1e31fb=document['createElement'](_0x754c8d(0x120));_0x1e31fb[_0x754c8d(0x137)]=_0x754c8d(0x1df);const _0x35d07f=_0x3e2a46=>{const _0x3367dd=_0x754c8d,_0x4f0e3a=new Date(_0x3e2a46);return _0x4f0e3a[_0x3367dd(0x132)]()+'.'+String(_0x4f0e3a[_0x3367dd(0x136)]()+0x1)[_0x3367dd(0x23e)](0x2,'0')+'\x20'+String(_0x4f0e3a[_0x3367dd(0x1a6)]())['padStart'](0x2,'0')+':'+String(_0x4f0e3a[_0x3367dd(0x10a)]())[_0x3367dd(0x23e)](0x2,'0');};_0x1e31fb[_0x754c8d(0x1c5)]=_0x754c8d(0x242)+_0x35d07f(_0x1cf271[_0x754c8d(0x100)])+_0x754c8d(0x1c7)+_0x35d07f(_0x1cf271[_0x754c8d(0x1dd)])+_0x754c8d(0x245)+_0x47b9bf+_0x754c8d(0x16f),_0x57d922[_0x754c8d(0x164)](_0x1e31fb);});}function scrollToToday(){const _0x3bd4f8=a2_0x2c11bc,_0x469032=getLocalDateStr(new Date()),_0x1356b8=document[_0x3bd4f8(0x10b)](_0x3bd4f8(0x198)+_0x469032),_0x562c17=document[_0x3bd4f8(0x10b)]('matrixViewport');if(_0x1356b8&&_0x562c17){const _0x36d683=_0x562c17[_0x3bd4f8(0x180)],_0x30d038=_0x1356b8[_0x3bd4f8(0x140)],_0x56ade9=_0x1356b8[_0x3bd4f8(0x16a)];_0x562c17['scrollLeft']=_0x30d038-_0x36d683/0x2+_0x56ade9/0x2,_0x562c17[_0x3bd4f8(0x14d)]=0x9*GRID_H;}}function onScroll(){const _0x3ae72c=a2_0x2c11bc,_0x232704=document[_0x3ae72c(0x10b)](_0x3ae72c(0x20f)),_0x4074a8=document[_0x3ae72c(0xce)]('.day-col-header');for(let _0xa39d19 of _0x4074a8)if(_0xa39d19['offsetLeft']>=_0x232704['scrollLeft']){const _0x57c587=new Date(_0xa39d19['getAttribute']('data-date'));document[_0x3ae72c(0x10b)](_0x3ae72c(0x1bf))['textContent']=_0x57c587[_0x3ae72c(0x16c)]('ru',{'month':_0x3ae72c(0x122)})[_0x3ae72c(0x12f)]()+'\x20'+_0x57c587[_0x3ae72c(0xf2)]();break;}}function showToast(_0x17cf66,_0x5cc6e7=![]){const _0x6f86d7=a2_0x2c11bc,_0x213869=document[_0x6f86d7(0x10b)]('toast');_0x213869['className']=_0x6f86d7(0x252)+(_0x5cc6e7?_0x6f86d7(0x233):''),document[_0x6f86d7(0x10b)](_0x6f86d7(0x102))[_0x6f86d7(0x15f)]=_0x5cc6e7?'Успешно':_0x6f86d7(0x123),document[_0x6f86d7(0x10b)]('toastMessage')[_0x6f86d7(0x15f)]=_0x17cf66,_0x213869[_0x6f86d7(0x196)][_0x6f86d7(0x159)](_0x6f86d7(0xd4)),setTimeout(()=>{const _0x40ec68=_0x6f86d7;_0x213869[_0x40ec68(0x196)][_0x40ec68(0x168)]('show');},0xbb8);}function openDayOptions(_0x10ac9f,_0x2c3842){const _0x685fc=a2_0x2c11bc;selectedDayForOptions=_0x10ac9f,document[_0x685fc(0x10b)](_0x685fc(0x1a7))[_0x685fc(0x15f)]=_0x2c3842,openSheet(_0x685fc(0x182));}function toggleDayOff(){const _0x42bddc=a2_0x2c11bc;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]='off',reRenderBlocks(),closeAllSheets(),DataManager[_0x42bddc(0x1c1)](),DataManager[_0x42bddc(0x1e0)]('save_settings',{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x389579=a2_0x2c11bc;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x389579(0x1c1)](),DataManager[_0x389579(0x1e0)](_0x389579(0x143),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x4554c6){const _0x475957=a2_0x2c11bc;document[_0x475957(0x10b)](_0x475957(0x173))[_0x475957(0x196)][_0x475957(0x159)](_0x475957(0x225)),document[_0x475957(0x10b)](_0x4554c6)[_0x475957(0x196)]['add']('open');}function closeAllSheets(){const _0x3cd79a=a2_0x2c11bc;document['getElementById'](_0x3cd79a(0x173))[_0x3cd79a(0x196)]['remove'](_0x3cd79a(0x225)),document[_0x3cd79a(0xce)](_0x3cd79a(0x1a4))[_0x3cd79a(0x20d)](_0x4bac68=>_0x4bac68[_0x3cd79a(0x196)][_0x3cd79a(0x168)](_0x3cd79a(0x1ed)));}function openPatternEditor(){const _0x35055d=a2_0x2c11bc;closeAllSheets(),document[_0x35055d(0x10b)]('patternEditor')['classList'][_0x35055d(0x159)](_0x35055d(0x1ed)),renderPatternEditor();}function closePatternEditor(){const _0x27572a=a2_0x2c11bc;document['getElementById'](_0x27572a(0x18c))['classList'][_0x27572a(0x168)](_0x27572a(0x1ed));}function savePattern(){const _0x53a8c0=a2_0x2c11bc;document[_0x53a8c0(0x10b)](_0x53a8c0(0x18c))['classList'][_0x53a8c0(0x168)](_0x53a8c0(0x1ed)),reRenderBlocks(),DataManager[_0x53a8c0(0x1c1)](),DataManager['fetchFromServer']('save_settings',{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x33503a=a2_0x2c11bc,_0x26de18=document['getElementById']('peGrid');_0x26de18['innerHTML']='';const _0x3570ac=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x25e6e5=document[_0x33503a(0x244)](_0x33503a(0x120));_0x25e6e5[_0x33503a(0x137)]=_0x33503a(0x17e),_0x26de18[_0x33503a(0x164)](_0x25e6e5),_0x3570ac[_0x33503a(0x20d)]((_0xd26ff9,_0x44949c)=>{const _0x4dd591=_0x33503a,_0x3ffa44=document[_0x4dd591(0x244)]('div');_0x3ffa44[_0x4dd591(0x137)]=_0x4dd591(0x1b5),_0x3ffa44[_0x4dd591(0x1c5)]=_0xd26ff9+_0x4dd591(0x256),_0x3ffa44[_0x4dd591(0x240)]=()=>toggleColPattern(_0x44949c),_0x26de18['appendChild'](_0x3ffa44);});for(let _0x4e4c2d=0x0;_0x4e4c2d<0x18;_0x4e4c2d++){const _0x37e658=document['createElement']('div');_0x37e658[_0x33503a(0x137)]=_0x33503a(0x232),_0x37e658[_0x33503a(0x1c5)]='<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>'+String(_0x4e4c2d)[_0x33503a(0x23e)](0x2,'0')+_0x33503a(0xd9),_0x37e658[_0x33503a(0x240)]=()=>toggleRowPattern(_0x4e4c2d),_0x26de18[_0x33503a(0x164)](_0x37e658);for(let _0x4b90ad=0x0;_0x4b90ad<0x7;_0x4b90ad++){const _0x10d568=document[_0x33503a(0x244)](_0x33503a(0x120)),_0x1f565c=(availabilityPattern[_0x4b90ad]||[])[_0x33503a(0x103)](_0x4e4c2d),_0x22c9f7=!_0x1f565c;_0x10d568[_0x33503a(0x137)]='pe-cell\x20'+(_0x22c9f7?_0x33503a(0x225):''),_0x10d568[_0x33503a(0x240)]=()=>toggleSinglePattern(_0x4b90ad,_0x4e4c2d),_0x26de18[_0x33503a(0x164)](_0x10d568);}}}function toggleSinglePattern(_0x1f023f,_0x8c1daa){const _0x3f6df1=a2_0x2c11bc;if(!availabilityPattern[_0x1f023f])availabilityPattern[_0x1f023f]=[];const _0x16a62e=availabilityPattern[_0x1f023f],_0x32d5b4=_0x16a62e['indexOf'](_0x8c1daa);_0x32d5b4===-0x1?_0x16a62e[_0x3f6df1(0x184)](_0x8c1daa):_0x16a62e[_0x3f6df1(0x12d)](_0x32d5b4,0x1),renderPatternEditor();}function a2_0x3bfc(_0x5df551,_0x41ac52){_0x5df551=_0x5df551-0xcb;const _0x1d3225=a2_0x18ec();let _0x11b1e9=_0x1d3225[_0x5df551];return _0x11b1e9;}function toggleColPattern(_0x1779d5){const _0xab841=a2_0x2c11bc;if(!availabilityPattern[_0x1779d5])availabilityPattern[_0x1779d5]=[];const _0x111d6e=availabilityPattern[_0x1779d5];_0x111d6e[_0xab841(0x18d)]===0x0?availabilityPattern[_0x1779d5]=Array[_0xab841(0x1d2)]({'length':0x18},(_0x29b96a,_0x17837d)=>_0x17837d):availabilityPattern[_0x1779d5]=[],renderPatternEditor();}function toggleRowPattern(_0x12b457){const _0x322ece=a2_0x2c11bc;let _0x40f261=!![];for(let _0x108394=0x0;_0x108394<0x7;_0x108394++){if((availabilityPattern[_0x108394]||[])[_0x322ece(0x103)](_0x12b457)){_0x40f261=![];break;}}for(let _0xd145f5=0x0;_0xd145f5<0x7;_0xd145f5++){if(!availabilityPattern[_0xd145f5])availabilityPattern[_0xd145f5]=[];const _0x27db90=availabilityPattern[_0xd145f5][_0x322ece(0x1b4)](_0x12b457);if(_0x40f261){if(_0x27db90===-0x1)availabilityPattern[_0xd145f5][_0x322ece(0x184)](_0x12b457);}else{if(_0x27db90!==-0x1)availabilityPattern[_0xd145f5][_0x322ece(0x12d)](_0x27db90,0x1);}}renderPatternEditor();}function renderPCol(_0xd3839,_0x2814dc){const _0x8c5aed=a2_0x2c11bc;_0xd3839[_0x8c5aed(0x1c5)]='';const _0x55b354=Math[_0x8c5aed(0x108)](_0xd3839[_0x8c5aed(0x140)]);(availabilityPattern[_0x2814dc]||[])[_0x8c5aed(0x20d)](_0x42d702=>{const _0x1551b0=_0x8c5aed,_0x5abdfa=document[_0x1551b0(0x244)]('div');_0x5abdfa[_0x1551b0(0x137)]=_0x1551b0(0x166);const _0x440c80=_0x42d702*GRID_H;_0x5abdfa['style']['top']=_0x440c80+'px',_0x5abdfa['style'][_0x1551b0(0x1f2)]='-'+_0x55b354+_0x1551b0(0x104)+_0x440c80+'px',_0x5abdfa[_0x1551b0(0x240)]=_0x1d9b6e=>{const _0x19e7d4=_0x1551b0;_0x1d9b6e[_0x19e7d4(0x113)](),toggleSinglePattern(_0x2814dc,_0x42d702);},_0xd3839[_0x1551b0(0x164)](_0x5abdfa);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function a2_0x18ec(){const _0x24fb16=['.sheet','flex','getHours','dayOptionsTitle','BackButton','cancelled','\x20(пропущено:\x20','rangesList','dateStr','rangeEndTime','split','[Notify]\x20Network\x20Failed','rgba(100,100,100,0.5)','statLoadCard','timeLineBadge','block','indexOf','pe-col-header','vibrate',':00</span>','insertBefore','value','checked','daysHeaderTrack','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','<b>✅\x20','catch','headerMonth','var(--acc-orange)','saveLocally','router.html','<div\x20class=\x22dch-day\x22>','Запись\x20на\x20<b>','innerHTML','borderColor','\x20—\x20','btnStatusToggle','top','createDocumentFragment','option','anTotalStats','Batch\x20Sync\x20OK','2QNVWzI','setAttribute','var(--acc-current)','syncBatch','from','<b>📅\x20Дата:</b>\x20','anCustomDates','settingsSheet','name','toString','.dch-stats-fill','inpDate','blocked-range-part\x20stripe-bg','completed','initData','end','rgba(48,\x20209,\x2088,\x200.15)','range-item','fetchFromServer',')\x20уже\x20записан\x20на\x20это\x20время!','81103zekXga','keys','10px','search','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','de-item','rangeStartTime','T00:00:00','min','series','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','open','8Futyxu','mousemove','rangeEndDate','seriesCountContainer','backgroundPosition','done','Только\x20эту','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','Этот\x20клиент\x20(','touchstart','.event-card','btn-status-toggle\x20undo-mode','cancel','Error\x20setting\x20back\x20button:','doLoadPercent','#0a84ff','mouseup','onClick','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','setHeaderColor','Telegram','\x20days','Local\x20Load\x20Error','Ошибка\x20дат','.pib-text','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','uc_clients_v9','[Series]\x20Skipped\x20','#050505','rgba(255,\x2069,\x2058,\x200.3)','Вернуть\x20в\x20запланированные','forEach','total','matrixViewport','asBtnSeries','initDataUnsafe','getBoundingClientRect','var(--acc-red)','background','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','doBusyHours','sort','sid','Ошибка\x20сохранения\x20в\x20облако','Это\x20часть\x20серии\x20тренировок','Новая\x20запись','apply','day-column\x20','ranges','</b>\x0a\x0a','anPercent','numeric','#fff','exceptions','71412rvXoaN','active','analyticsList','analyticsSheet','rgba(255,\x20159,\x2010,\x200.3)','time-label','<span>','rgba(255,\x2069,\x2058,\x200.15)','actionSheetOverlay','Server\x20Error','70kNCbsR','100%','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20выполнено','pe-time-label','success',')</b>\x20была\x20удалена\x20из\x20расписания.','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','patternInfoBox','.day-column','delete',']\x20Failed:','Минимум\x202\x20тренировки','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','mousedown','[Notify]\x20Server\x20Response:','padStart','location','onclick','colIndex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','Удаление','createElement','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','day-off-overlay\x20stripe-bg','inpClient','sessionSheet','href','isArray','doWorkHours','\x20status-completed','slice','[Sync]\x20Loading\x20','[Notify]\x20Detected\x20Client\x20ID:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Эту\x20и\x20будущие','toast-notification\x20','<b>⏰\x20Время:</b>\x20','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','anEnd','\x20<span\x20class=\x22arrow\x22>↓</span>','text','formatDate','addEventListener','Ваша\x20тренировка\x20перенесена:\x0a\x0a','null','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','touchend','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','querySelectorAll','client','sheetTitle','Нет\x20клиентов','rgba(','floor','show','data-date','custom','var(--acc-green)','inpSeriesCount',':00','528987txxYJJ','rangesSheet','backgroundColor','ru-RU','uc_settings_cancel_window','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','mergeServerData','[Notify]\x20Error:\x20sessionData\x20is\x20null','btn-primary\x20btn-danger','pattern','note','day-col-header\x20','touches','1710978XHTVkM','borderLeftColor','single','querySelector','Жду\x20вас\x20в\x20зале!\x20💪','setItem','style','Заполните\x20все\x20поля','ч,\x20Занято:\x20','%\x20+\x202px)','settingCancelWindow','getFullYear','...','clientY','sheetDateSubtitle','offClick','248565SATIwq','client-stat-card','doEventsList','save','display','Оффлайн\x20режим','inpEnd','then','map','start','findIndex','toastTitle','includes','px\x20-','expand','[Settings]\x20Cancel\x20window\x20set\x20to:','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','round','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','getMinutes','getElementById','scroll','00:00','color','actionSheet','find','setDate','Синхронизировано','stopPropagation','DOMContentLoaded','2085282hrJYiY','setBackgroundColor','btn-primary\x20btn-secondary','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','log','px\x200px','23:59','filter','</div><div\x20class=\x22ev-time\x22>','seriesId','getTime','div','localeCompare','long','Инфо','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','Local\x20Save\x20Error','user','btnDelete','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','v9.0-BATCH-CALENDAR','toLocaleDateString','.period-switch\x20.p-btn','1104qfuflM','splice','.day-off-overlay','toUpperCase','getDay','week','getDate','Тренировка\x20завершена','startsWith','cancel_window','getMonth','className','recurringOptionContainer','loadLocal','all','setMonth','globalTimeLine','json','Error\x20setting\x20color:','complete','offsetLeft','<div\x20class=\x22ev-title\x22>','settings','save_settings','doDateHeader','send','inpRecurring','none','scrollWidth','gridColumns',']\x20Доступно:\x20','WebApp','data-day-idx','scrollTop','T23:59:59','stringify','planned','mini','getItem','1428112nPaZWv','closest','parse','width','target','clients','add','(((.+)+)+)+$','calendar','Создана\x20серия:\x20','status','borderRadius','textContent','init_load','warn','[Notify]\x20Client\x20SWAP\x20detected','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:','appendChild','Максимум\x20100\x20за\x20раз','blocked-slot\x20stripe-bg','charAt','remove','Статус\x20сброшен','offsetWidth','Сделать\x20рабочим\x20днем','toLocaleString','today','firstChild',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','getAttribute','toFixed','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','overlay','#gridColumns\x20.day-column','error','Save\x20settings\x20error:','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','data','inpNote','now','setHours','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','event-card','pe-corner','off','clientWidth','constructor','dayOptionsSheet','Групповая:\x20также\x20записан\x20','push','create','</div>','uc_sessions_v9','send_notification','scrollLeft','valid','[API\x20','patternEditor','length','as-button\x20danger\x20bold','Ошибка\x20сохранения\x20настроек','<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','[Notify]\x20Error:\x20Text\x20generation\x20failed','calc(','Unknown','Все\x20даты\x20заняты\x20этим\x20клиентом!','classList','</span>\x20/\x20','header-','asTitle','height','max','%\x20-\x204px)','disableVerticalSwipes','batch_sync','anStart','10ZSjhWW','clientId','\x20-\x20','getText'];a2_0x18ec=function(){return _0x24fb16;};return a2_0x18ec();}function updateClock(){const _0x3a91d0=a2_0x2c11bc,_0x17a0dd=new Date(),_0x21df97=document['getElementById'](_0x3a91d0(0x13c)),_0x40d957=document[_0x3a91d0(0x10b)](_0x3a91d0(0x1b2)),_0x47c060=(_0x17a0dd[_0x3a91d0(0x1a6)]()*0x3c+_0x17a0dd[_0x3a91d0(0x10a)]())/0x3c*GRID_H;_0x21df97['style'][_0x3a91d0(0x1c9)]=_0x47c060+'px',_0x21df97[_0x3a91d0(0xed)][_0x3a91d0(0xfb)]='block',_0x40d957[_0x3a91d0(0x15f)]=String(_0x17a0dd[_0x3a91d0(0x1a6)]())[_0x3a91d0(0x23e)](0x2,'0')+':'+String(_0x17a0dd[_0x3a91d0(0x10a)]())[_0x3a91d0(0x23e)](0x2,'0'),_0x40d957[_0x3a91d0(0xed)][_0x3a91d0(0xfb)]=_0x3a91d0(0x1b3),_0x40d957[_0x3a91d0(0xed)][_0x3a91d0(0x1c9)]=_0x47c060+'px';}document[a2_0x2c11bc(0x259)](a2_0x2c11bc(0x114),init);function openDayOptions(_0x446b74){const _0x44a585=a2_0x2c11bc;selectedDayForOptions=_0x446b74;const _0x4e0921=new Date(_0x446b74),_0x958033={'weekday':'long','day':'numeric','month':_0x44a585(0x122),'year':_0x44a585(0x221)},_0xb1df0c=_0x4e0921[_0x44a585(0x12a)](_0x44a585(0xdd),_0x958033);document['getElementById'](_0x44a585(0x144))[_0x44a585(0x15f)]=_0xb1df0c['charAt'](0x0)[_0x44a585(0x12f)]()+_0xb1df0c[_0x44a585(0x24d)](0x1);let _0x4b3e8e=_0x4e0921[_0x44a585(0x130)]()-0x1;if(_0x4b3e8e===-0x1)_0x4b3e8e=0x6;const _0x3010e7=availabilityPattern[_0x4b3e8e]||[],_0xc98ab6=0x18-_0x3010e7[_0x44a585(0x18d)],_0x451084=_0xc98ab6*0x3c,_0x21883f=sessions[_0x44a585(0x11c)](_0x5c9818=>_0x5c9818[_0x44a585(0x1ac)]===_0x446b74&&_0x5c9818['status']!==_0x44a585(0x1a9));let _0x3f91d3=_0x21883f[_0x44a585(0xff)](_0x4d4622=>{const _0xe975eb=_0x44a585,[_0x26218b,_0x339999]=_0x4d4622[_0xe975eb(0x100)][_0xe975eb(0x1ae)](':')[_0xe975eb(0xff)](Number),[_0x1bb522,_0x194daf]=_0x4d4622['end'][_0xe975eb(0x1ae)](':')[_0xe975eb(0xff)](Number);return[_0x26218b*0x3c+_0x339999,_0x1bb522*0x3c+_0x194daf];});_0x3f91d3[_0x44a585(0x217)]((_0x13b997,_0x56836a)=>_0x13b997[0x0]-_0x56836a[0x0]);let _0x359c12=[];if(_0x3f91d3[_0x44a585(0x18d)]>0x0){let _0x1913ee=_0x3f91d3[0x0];for(let _0x3a6f9a=0x1;_0x3a6f9a<_0x3f91d3[_0x44a585(0x18d)];_0x3a6f9a++){_0x3f91d3[_0x3a6f9a][0x0]<_0x1913ee[0x1]?_0x1913ee[0x1]=Math[_0x44a585(0x19b)](_0x1913ee[0x1],_0x3f91d3[_0x3a6f9a][0x1]):(_0x359c12[_0x44a585(0x184)](_0x1913ee),_0x1913ee=_0x3f91d3[_0x3a6f9a]);}_0x359c12[_0x44a585(0x184)](_0x1913ee);}let _0x3e1d47=0x0;_0x359c12[_0x44a585(0x20d)](_0x22590a=>_0x3e1d47+=_0x22590a[0x1]-_0x22590a[0x0]),document['getElementById'](_0x44a585(0x24b))[_0x44a585(0x15f)]=formatMinsToHrs(_0x451084),document['getElementById'](_0x44a585(0x216))[_0x44a585(0x15f)]=formatMinsToHrs(_0x3e1d47);const _0x23205c=_0x451084>0x0?Math['round'](_0x3e1d47/_0x451084*0x64):0x0,_0x1317c6=document[_0x44a585(0x10b)](_0x44a585(0x1fc));_0x1317c6[_0x44a585(0x15f)]=_0x23205c+'%';const _0x34ef18=document['getElementById'](_0x44a585(0x1b1));if(_0x23205c>0x64)_0x1317c6[_0x44a585(0xed)][_0x44a585(0x10e)]=_0x44a585(0x213),_0x34ef18[_0x44a585(0xed)][_0x44a585(0x1c6)]=_0x44a585(0x20b);else _0x23205c>0x50?(_0x1317c6['style']['color']=_0x44a585(0x1c0),_0x34ef18[_0x44a585(0xed)][_0x44a585(0x1c6)]=_0x44a585(0x228)):(_0x1317c6[_0x44a585(0xed)][_0x44a585(0x10e)]=_0x44a585(0xd7),_0x34ef18[_0x44a585(0xed)]['borderColor']='rgba(255,255,255,0.05)');const _0x5150ea=document['getElementById'](_0x44a585(0xf9));_0x5150ea['innerHTML']='';_0x21883f[_0x44a585(0x18d)]===0x0?_0x5150ea[_0x44a585(0x1c5)]=_0x44a585(0x190):(_0x21883f['sort']((_0x29e626,_0x3eab29)=>_0x29e626[_0x44a585(0x100)][_0x44a585(0x121)](_0x3eab29[_0x44a585(0x100)])),_0x21883f[_0x44a585(0x20d)](_0x5249b2=>{const _0x2a3013=_0x44a585,_0x2c3cb7=clients[_0x2a3013(0x110)](_0x542df0=>_0x542df0[_0x2a3013(0x1d6)]===_0x5249b2['client']),_0x5ea498=_0x2c3cb7?_0x2c3cb7[_0x2a3013(0x10e)]:_0x2a3013(0x222),_0x41be76=_0x5249b2[_0x2a3013(0x15d)]===_0x2a3013(0x1db),_0x3983fe=_0x41be76?_0x2a3013(0x107):'',_0x38a0ce=document[_0x2a3013(0x244)](_0x2a3013(0x120));_0x38a0ce['className']=_0x2a3013(0x1e7),_0x38a0ce[_0x2a3013(0xed)]['borderLeftColor']=_0x5ea498,_0x38a0ce[_0x2a3013(0x1c5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>'+_0x5249b2['start']+_0x2a3013(0x1a2)+_0x5249b2[_0x2a3013(0x1dd)]+_0x2a3013(0x17c)+_0x5249b2[_0x2a3013(0xcf)]+_0x2a3013(0x250)+_0x3983fe+_0x2a3013(0xdf),_0x5150ea[_0x2a3013(0x164)](_0x38a0ce);}));const _0x3a9b66=document[_0x44a585(0x10b)]('btnDayToggle'),_0x3de8bf=dateExceptions[_0x446b74]===_0x44a585(0x17f);_0x3de8bf?(_0x3a9b66['textContent']=_0x44a585(0x16b),_0x3a9b66['className']=_0x44a585(0x117),_0x3a9b66['style']['color']=_0x44a585(0xd7),_0x3a9b66[_0x44a585(0xed)][_0x44a585(0x214)]=_0x44a585(0x1de)):(_0x3a9b66[_0x44a585(0x15f)]='Сделать\x20выходным',_0x3a9b66['className']=_0x44a585(0xe2),_0x3a9b66[_0x44a585(0xed)][_0x44a585(0x10e)]=_0x44a585(0x213),_0x3a9b66['style'][_0x44a585(0x214)]=_0x44a585(0x22b)),openSheet(_0x44a585(0x182));}let currentAnPeriod=a2_0x2c11bc(0x131);function openAnalytics(){const _0x3a05c1=a2_0x2c11bc,_0x4f984f=document[_0x3a05c1(0xea)](_0x3a05c1(0x12b));setAnalyticsPeriod(_0x3a05c1(0x131),_0x4f984f),closeAllSheets(),openSheet(_0x3a05c1(0x227));}function setAnalyticsPeriod(_0x5c92b6,_0x2e20cf){const _0x4e6e0f=a2_0x2c11bc;currentAnPeriod=_0x5c92b6,document['querySelectorAll'](_0x4e6e0f(0x12b))[_0x4e6e0f(0x20d)](_0x8d06ed=>_0x8d06ed['classList'][_0x4e6e0f(0x168)](_0x4e6e0f(0x225)));if(_0x2e20cf)_0x2e20cf['classList'][_0x4e6e0f(0x159)](_0x4e6e0f(0x225));const _0x56feb6=document[_0x4e6e0f(0x10b)](_0x4e6e0f(0x1d4));_0x56feb6['style']['display']=_0x5c92b6===_0x4e6e0f(0xd6)?_0x4e6e0f(0x1a5):_0x4e6e0f(0x147);const _0x272fbf=new Date();let _0x1d9458=new Date(),_0x23b06c=new Date();if(_0x5c92b6===_0x4e6e0f(0x131))_0x1d9458=getStartOfWeek(_0x272fbf),_0x23b06c=new Date(_0x1d9458),_0x23b06c[_0x4e6e0f(0x111)](_0x23b06c['getDate']()+0x6);else{if(_0x5c92b6==='month')_0x1d9458=new Date(_0x272fbf['getFullYear'](),_0x272fbf[_0x4e6e0f(0x136)](),0x1),_0x23b06c=new Date(_0x272fbf[_0x4e6e0f(0xf2)](),_0x272fbf[_0x4e6e0f(0x136)]()+0x1,0x0);else{!document[_0x4e6e0f(0x10b)](_0x4e6e0f(0x19f))[_0x4e6e0f(0x1b9)]&&(document[_0x4e6e0f(0x10b)](_0x4e6e0f(0x19f))[_0x4e6e0f(0x1b9)]=getLocalDateStr(_0x272fbf),document['getElementById']('anEnd')['value']=getLocalDateStr(_0x272fbf));refreshAnalytics();return;}}document[_0x4e6e0f(0x10b)](_0x4e6e0f(0x19f))[_0x4e6e0f(0x1b9)]=getLocalDateStr(_0x1d9458),document[_0x4e6e0f(0x10b)](_0x4e6e0f(0x255))[_0x4e6e0f(0x1b9)]=getLocalDateStr(_0x23b06c),refreshAnalytics();}function refreshAnalytics(){const _0xea4e58=a2_0x2c11bc,_0x2f2aae=document['getElementById']('anStart')[_0xea4e58(0x1b9)],_0x1cf382=document[_0xea4e58(0x10b)](_0xea4e58(0x255))[_0xea4e58(0x1b9)];if(!_0x2f2aae||!_0x1cf382)return;const _0x243343=sessions[_0xea4e58(0x11c)](_0x1d7e49=>_0x1d7e49['dateStr']>=_0x2f2aae&&_0x1d7e49[_0xea4e58(0x1ac)]<=_0x1cf382&&_0x1d7e49[_0xea4e58(0x15d)]!==_0xea4e58(0x1a9)),_0x2e9677=_0x243343[_0xea4e58(0x18d)],_0x5b35f0=_0x243343[_0xea4e58(0x11c)](_0x4d8d27=>_0x4d8d27[_0xea4e58(0x15d)]===_0xea4e58(0x1db))[_0xea4e58(0x18d)],_0x265e43=_0x2e9677>0x0?Math[_0xea4e58(0x108)](_0x5b35f0/_0x2e9677*0x64):0x0;document[_0xea4e58(0x10b)](_0xea4e58(0x220))['textContent']=_0x265e43+'%',document[_0xea4e58(0x10b)](_0xea4e58(0x1cc))[_0xea4e58(0x15f)]=_0x5b35f0+'\x20из\x20'+_0x2e9677+_0xea4e58(0x231);const _0x171fe2=document[_0xea4e58(0x10b)]('anDonutCircle'),_0x320937=0x2*Math['PI']*0x23,_0x268403=_0x320937-_0x265e43/0x64*_0x320937;_0x171fe2[_0xea4e58(0xed)]['strokeDashoffset']=_0x268403;const _0x36047c={};_0x243343[_0xea4e58(0x20d)](_0x244290=>{const _0x429b15=_0xea4e58;if(!_0x36047c[_0x244290[_0x429b15(0xcf)]]){const _0x362ed2=clients[_0x429b15(0x110)](_0x4e821e=>_0x4e821e['name']===_0x244290[_0x429b15(0xcf)]);_0x36047c[_0x244290[_0x429b15(0xcf)]]={'total':0x0,'done':0x0,'color':_0x362ed2?_0x362ed2[_0x429b15(0x10e)]:_0x429b15(0x222)};}_0x36047c[_0x244290[_0x429b15(0xcf)]][_0x429b15(0x20e)]++;if(_0x244290[_0x429b15(0x15d)]==='completed')_0x36047c[_0x244290[_0x429b15(0xcf)]][_0x429b15(0x1f3)]++;});const _0x270fe2=document['getElementById'](_0xea4e58(0x226));_0x270fe2['innerHTML']='';const _0x20d4eb=Object['entries'](_0x36047c)[_0xea4e58(0x217)]((_0x489e20,_0x132749)=>_0x132749[0x1][_0xea4e58(0x20e)]-_0x489e20[0x1][_0xea4e58(0x20e)]);if(_0x20d4eb[_0xea4e58(0x18d)]===0x0){_0x270fe2[_0xea4e58(0x1c5)]='<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>';return;}_0x20d4eb[_0xea4e58(0x20d)](([_0x39e3bd,_0x4dc678])=>{const _0x2bedee=_0xea4e58,_0x3920cc=Math['round'](_0x4dc678[_0x2bedee(0x1f3)]/_0x4dc678[_0x2bedee(0x20e)]*0x64),_0x20a684=document[_0x2bedee(0x244)](_0x2bedee(0x120));_0x20a684[_0x2bedee(0x137)]=_0x2bedee(0xf8),_0x20a684[_0x2bedee(0xed)][_0x2bedee(0xe8)]=_0x4dc678['color'],_0x20a684['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>'+_0x39e3bd+_0x2bedee(0xcb)+_0x4dc678[_0x2bedee(0x1f3)]+_0x2bedee(0x197)+_0x4dc678[_0x2bedee(0x20e)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x3920cc+_0x2bedee(0x230),_0x270fe2[_0x2bedee(0x164)](_0x20a684);});}function formatMinsToHrs(_0x1a88e0){const _0x5daa35=a2_0x2c11bc;if(_0x1a88e0===0x0)return'0';const _0x2b8a76=Math[_0x5daa35(0xd3)](_0x1a88e0/0x3c),_0x376c4b=_0x1a88e0%0x3c;if(_0x376c4b===0x0)return _0x2b8a76+'ч';return _0x2b8a76+'ч\x20'+_0x376c4b+'м';}