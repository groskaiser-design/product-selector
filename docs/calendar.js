const a2_0x4766c2=a2_0x504e;(function(_0x3d4df6,_0x1ac50a){const _0x253ecb=a2_0x504e,_0x1b1e3e=_0x3d4df6();while(!![]){try{const _0x395cac=parseInt(_0x253ecb(0x1e8))/0x1*(parseInt(_0x253ecb(0x27c))/0x2)+parseInt(_0x253ecb(0x1ab))/0x3*(-parseInt(_0x253ecb(0x1d6))/0x4)+-parseInt(_0x253ecb(0x24d))/0x5*(parseInt(_0x253ecb(0x1bd))/0x6)+parseInt(_0x253ecb(0x2f3))/0x7+parseInt(_0x253ecb(0x1dd))/0x8*(parseInt(_0x253ecb(0x200))/0x9)+parseInt(_0x253ecb(0x22f))/0xa+-parseInt(_0x253ecb(0x25a))/0xb*(parseInt(_0x253ecb(0x1c1))/0xc);if(_0x395cac===_0x1ac50a)break;else _0x1b1e3e['push'](_0x1b1e3e['shift']());}catch(_0x42c7cc){_0x1b1e3e['push'](_0x1b1e3e['shift']());}}}(a2_0x387d,0x472f4),function initTMA(){const _0x46b6f6=a2_0x504e;try{const _0x5c2a25=window[_0x46b6f6(0x240)]?.[_0x46b6f6(0x305)];if(!_0x5c2a25)return;_0x5c2a25[_0x46b6f6(0x2a3)](),_0x5c2a25[_0x46b6f6(0x248)]();try{_0x5c2a25[_0x46b6f6(0x239)](_0x46b6f6(0x2c6)),_0x5c2a25[_0x46b6f6(0x265)]&&_0x5c2a25['setBackgroundColor'](_0x46b6f6(0x2c6));}catch(_0x345f3b){console[_0x46b6f6(0x235)](_0x46b6f6(0x1d2),_0x345f3b);}try{_0x5c2a25['BackButton']&&(_0x5c2a25[_0x46b6f6(0x21c)][_0x46b6f6(0x30b)](),_0x5c2a25[_0x46b6f6(0x21c)]['offClick'](),_0x5c2a25[_0x46b6f6(0x21c)]['onClick'](function(){const _0x461d77=_0x46b6f6;window[_0x461d77(0x220)][_0x461d77(0x2ee)]=_0x461d77(0x2ac);}));}catch(_0x5e8265){console[_0x46b6f6(0x235)](_0x46b6f6(0x2e7),_0x5e8265);}try{if(_0x5c2a25[_0x46b6f6(0x252)])_0x5c2a25[_0x46b6f6(0x252)]();}catch(_0x328073){}}catch(_0x2ab984){console[_0x46b6f6(0x290)]('Critical\x20TMA\x20Error:',_0x2ab984);}}());function isAdmin(){const _0x1101f4=a2_0x504e;try{const _0x33c853=Number(window[_0x1101f4(0x240)]?.[_0x1101f4(0x305)]?.[_0x1101f4(0x1c7)]?.[_0x1101f4(0x1cc)]?.['id']);return _0x33c853===0xbaf7174;}catch(_0x83b1be){return![];}}const APP_VERSION=a2_0x4766c2(0x286),API_URL=a2_0x4766c2(0x317),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS='uc_clients_v9',KEY_SESSIONS=a2_0x4766c2(0x2a7),KEY_SETTINGS=a2_0x4766c2(0x1ef);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x4c0fcf=a2_0x4766c2;return window[_0x4c0fcf(0x240)]?.[_0x4c0fcf(0x305)]?.['initDataUnsafe']?.[_0x4c0fcf(0x1cc)]?.['id']||_0x4c0fcf(0x2f9);},'saveLocally'(){const _0x5892f4=a2_0x4766c2;try{localStorage['setItem'](KEY_CLIENTS,JSON[_0x5892f4(0x2cd)](clients)),localStorage[_0x5892f4(0x246)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x5892f4(0x2cd)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x5c9140){console[_0x5892f4(0x290)](_0x5892f4(0x315),_0x5c9140);}},'loadLocal'(){const _0x3e0c6d=a2_0x4766c2;try{const _0x465913=localStorage[_0x3e0c6d(0x20f)](KEY_CLIENTS);if(_0x465913)clients=JSON[_0x3e0c6d(0x31e)](_0x465913);const _0x104338=localStorage[_0x3e0c6d(0x20f)](KEY_SESSIONS);if(_0x104338)sessions=JSON['parse'](_0x104338);const _0x5187ec=localStorage[_0x3e0c6d(0x20f)](KEY_SETTINGS);if(_0x5187ec){const _0x1192c0=JSON[_0x3e0c6d(0x31e)](_0x5187ec);if(_0x1192c0[_0x3e0c6d(0x2c7)])availabilityPattern=_0x1192c0[_0x3e0c6d(0x2c7)];if(_0x1192c0[_0x3e0c6d(0x23b)])dateExceptions=_0x1192c0[_0x3e0c6d(0x23b)];if(_0x1192c0[_0x3e0c6d(0x243)])specialRanges=_0x1192c0[_0x3e0c6d(0x243)];}else{for(let _0x3092b5=0x0;_0x3092b5<0x7;_0x3092b5++)availabilityPattern[_0x3092b5]=Array[_0x3e0c6d(0x1fe)]({'length':0xc},(_0x3befe3,_0x2acfe0)=>_0x2acfe0+0x9);}}catch(_0x3ed511){console[_0x3e0c6d(0x290)](_0x3e0c6d(0x27e),_0x3ed511);}},async 'fetchFromServer'(_0x1f02d6,_0x376f81={}){const _0x5afaa2=a2_0x4766c2,_0x21294b=window[_0x5afaa2(0x240)]?.[_0x5afaa2(0x305)],_0x2a26e8={'action':_0x1f02d6,'init_data':_0x21294b?.['initData']||'',..._0x376f81};try{const _0x3c7de8=await fetch(API_URL,{'method':'POST','headers':{'Content-Type':'text/plain;charset=UTF-8'},'body':JSON[_0x5afaa2(0x2cd)](_0x2a26e8)}),_0x14e74f=await _0x3c7de8[_0x5afaa2(0x257)]();if(!_0x14e74f['ok'])throw new Error(_0x14e74f[_0x5afaa2(0x290)]||'Server\x20Error');return _0x14e74f['data'];}catch(_0x118f91){console['error'](_0x5afaa2(0x2f5)+_0x1f02d6+']\x20Failed:',_0x118f91);throw _0x118f91;}},async 'syncLoad'(){const _0x105668=a2_0x4766c2,_0x38720c=new Date(),_0x3d0f36=_0x38720c[_0x105668(0x2d7)]()+'-'+String(_0x38720c['getMonth']()+0x1)['padStart'](0x2,'0'),_0xd0e420=new Date(_0x38720c);_0xd0e420[_0x105668(0x26b)](_0x38720c[_0x105668(0x1db)]()+0x1);const _0x5968c7=_0xd0e420['getFullYear']()+'-'+String(_0xd0e420[_0x105668(0x1db)]()+0x1)['padStart'](0x2,'0'),_0x1c9a06=Date[_0x105668(0x1c9)]();console[_0x105668(0x235)](_0x105668(0x1b2)+_0x3d0f36+',\x20'+_0x5968c7+_0x105668(0x2f1));try{const [_0x55692b,_0x33f628]=await Promise[_0x105668(0x316)]([this[_0x105668(0x21f)]('init_load',{'month_str':_0x3d0f36}),this[_0x105668(0x21f)](_0x105668(0x298),{'month_str':_0x5968c7})]);if(lastUserActionTime>_0x1c9a06)return console[_0x105668(0x1e0)]('[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response'),![];return this[_0x105668(0x1c2)](_0x55692b,_0x3d0f36),this[_0x105668(0x1c2)](_0x33f628,_0x5968c7),this[_0x105668(0x267)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x35e359){console[_0x105668(0x290)](_0x35e359);throw _0x35e359;}},'mergeServerData'(_0x3e5d98,_0x248fb5){const _0x49e200=a2_0x4766c2;if(!_0x3e5d98)return;_0x3e5d98[_0x49e200(0x29b)]&&Array['isArray'](_0x3e5d98[_0x49e200(0x29b)])&&(clients=_0x3e5d98['clients']);if(_0x3e5d98[_0x49e200(0x2c5)]){if(_0x3e5d98[_0x49e200(0x2c5)][_0x49e200(0x2c7)])availabilityPattern=_0x3e5d98[_0x49e200(0x2c5)][_0x49e200(0x2c7)];if(_0x3e5d98['settings'][_0x49e200(0x23b)])dateExceptions=_0x3e5d98[_0x49e200(0x2c5)]['exceptions'];if(_0x3e5d98['settings'][_0x49e200(0x243)])specialRanges=_0x3e5d98[_0x49e200(0x2c5)][_0x49e200(0x243)];if(_0x3e5d98['settings']['cancel_window']){localStorage[_0x49e200(0x246)](_0x49e200(0x2be),_0x3e5d98[_0x49e200(0x2c5)][_0x49e200(0x2d4)]);const _0x36560f=document[_0x49e200(0x1dc)](_0x49e200(0x2a8));if(_0x36560f)_0x36560f[_0x49e200(0x1d8)]=_0x3e5d98[_0x49e200(0x2c5)]['cancel_window'];}}_0x3e5d98['calendar']&&(sessions=sessions[_0x49e200(0x228)](_0x21dedd=>!_0x21dedd[_0x49e200(0x1df)][_0x49e200(0x2f8)](_0x248fb5)),Object[_0x49e200(0x263)](_0x3e5d98[_0x49e200(0x24a)])[_0x49e200(0x21a)](_0x3b9209=>{const _0x5eb01f=_0x49e200,_0x3bb498=_0x3e5d98[_0x5eb01f(0x24a)][_0x3b9209];_0x3bb498[_0x5eb01f(0x21a)](_0x41d476=>{const _0x33e977=_0x5eb01f,_0x2577fb=clients[_0x33e977(0x242)](_0x141fb5=>String(_0x141fb5['id'])===String(_0x41d476['c']));sessions[_0x33e977(0x302)]({'id':_0x41d476['i'],'clientId':_0x41d476['c'],'client':_0x2577fb?_0x2577fb['name']:'Unknown','dateStr':_0x248fb5+'-'+_0x3b9209['padStart'](0x2,'0'),'start':_0x41d476['s'],'end':_0x41d476['e'],'status':_0x41d476['st']||_0x33e977(0x1ca),'note':_0x41d476['n']||'','seriesId':_0x41d476[_0x33e977(0x218)]||null});});}));},async 'syncBatch'(_0x23e662){const _0x39de63=a2_0x4766c2,_0x52c1e9=[...new Set(_0x23e662)],_0x57ef93=_0x52c1e9['map'](_0x43d6b5=>{const _0x21f6be=a2_0x504e,_0x5065f3=sessions[_0x21f6be(0x228)](_0x483ec1=>_0x483ec1[_0x21f6be(0x1df)]===_0x43d6b5&&_0x483ec1['status']!==_0x21f6be(0x209)),_0x216b49=_0x5065f3[_0x21f6be(0x1aa)](_0x5e6533=>({'i':_0x5e6533['id'],'c':_0x5e6533[_0x21f6be(0x231)],'s':_0x5e6533['start'],'e':_0x5e6533[_0x21f6be(0x30a)],'st':_0x5e6533['status'],'n':_0x5e6533[_0x21f6be(0x1a6)],'sid':_0x5e6533[_0x21f6be(0x29f)]}));return{'date':_0x43d6b5,'day_data':_0x216b49};});if(_0x57ef93['length']===0x0)return;console[_0x39de63(0x235)](_0x39de63(0x249)+_0x57ef93['length']+'\x20days'),await this[_0x39de63(0x21f)](_0x39de63(0x2bf),{'changes':_0x57ef93});}};async function init(){const _0x32a5c8=a2_0x4766c2;DataManager['loadLocal'](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x32a5c8(0x1dc)]('matrixViewport')[_0x32a5c8(0x299)](_0x32a5c8(0x29c),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x32a5c8(0x2fa)]()[_0x32a5c8(0x2d5)](()=>{const _0x456477=_0x32a5c8;showToast(_0x456477(0x2ca),!![]);})[_0x32a5c8(0x291)](_0x18a4e5=>{const _0x2e4fe2=_0x32a5c8;showToast(_0x2e4fe2(0x2e0),![]);});}function generateId(){const _0x1d4a85=a2_0x4766c2;return Date[_0x1d4a85(0x1c9)]()[_0x1d4a85(0x24e)](0x24)+Math[_0x1d4a85(0x1ee)]()['toString'](0x24)[_0x1d4a85(0x225)](0x2,0x5);}function toggleSeriesInput(){const _0x427a02=a2_0x4766c2,_0x440b11=document[_0x427a02(0x1dc)](_0x427a02(0x20e))[_0x427a02(0x2ed)],_0x5d7f56=document['getElementById'](_0x427a02(0x24b));_0x5d7f56[_0x427a02(0x214)][_0x427a02(0x2e1)]=_0x440b11?_0x427a02(0x2a9):_0x427a02(0x23e);const _0x3c53db=document[_0x427a02(0x1dc)](_0x427a02(0x20c));_0x3c53db['style'][_0x427a02(0x269)]=_0x440b11?_0x427a02(0x2b2):_0x427a02(0x300);}function openAddSession(_0x2ef597){const _0x534107=a2_0x4766c2;editingId=null,populateClientSelect(),document['getElementById']('sheetTitle')[_0x534107(0x1bf)]=_0x534107(0x2a6),document[_0x534107(0x1dc)](_0x534107(0x1bb))[_0x534107(0x214)][_0x534107(0x2e1)]=_0x534107(0x23e),document[_0x534107(0x1dc)](_0x534107(0x251))['style']['display']=_0x534107(0x23e);const _0x14e49c=document[_0x534107(0x1dc)](_0x534107(0x20c)),_0x223220=document[_0x534107(0x1dc)](_0x534107(0x24b));_0x14e49c['style']['display']='flex',_0x14e49c[_0x534107(0x214)]['borderRadius']=_0x534107(0x300),document[_0x534107(0x1dc)](_0x534107(0x20e))[_0x534107(0x2ed)]=![],document['getElementById']('inpSeriesCount')[_0x534107(0x1d8)]=0x4,_0x223220[_0x534107(0x214)][_0x534107(0x2e1)]=_0x534107(0x23e),document['getElementById'](_0x534107(0x260))[_0x534107(0x1d8)]=getLocalDateStr(_0x2ef597),updateDateDisplay();const _0x56da9e=_0x2ef597[_0x534107(0x1e3)]();document[_0x534107(0x1dc)]('inpStart')[_0x534107(0x1d8)]=String(_0x56da9e)[_0x534107(0x310)](0x2,'0')+':00',document['getElementById'](_0x534107(0x2f7))[_0x534107(0x1d8)]=String(_0x56da9e+0x1)['padStart'](0x2,'0')+_0x534107(0x287),openSheet(_0x534107(0x1f2));}function openEdit(_0x52cbdb){const _0x10f145=a2_0x4766c2;editingId=_0x52cbdb['id'],populateClientSelect(),document[_0x10f145(0x1dc)](_0x10f145(0x2ad))[_0x10f145(0x1bf)]=_0x10f145(0x313),document['getElementById'](_0x10f145(0x1bb))[_0x10f145(0x214)]['display']=_0x10f145(0x2a9);const _0x5e48dd=document[_0x10f145(0x1dc)]('btnStatusToggle');_0x5e48dd[_0x10f145(0x214)][_0x10f145(0x2e1)]='flex';_0x52cbdb[_0x10f145(0x25c)]==='completed'?(_0x5e48dd[_0x10f145(0x279)]=_0x10f145(0x2aa),_0x5e48dd[_0x10f145(0x2b3)]=_0x10f145(0x203)):(_0x5e48dd['className']=_0x10f145(0x245),_0x5e48dd['innerHTML']=_0x10f145(0x264));const _0x27cba1=!!_0x52cbdb[_0x10f145(0x29f)];document[_0x10f145(0x1dc)](_0x10f145(0x20c))[_0x10f145(0x214)][_0x10f145(0x2e1)]=_0x10f145(0x23e),document[_0x10f145(0x1dc)]('seriesCountContainer')[_0x10f145(0x214)][_0x10f145(0x2e1)]=_0x10f145(0x23e),_0x27cba1?(document[_0x10f145(0x1dc)](_0x10f145(0x2c1))['style'][_0x10f145(0x2e1)]=_0x10f145(0x282),document['getElementById'](_0x10f145(0x2c1))['querySelector'](_0x10f145(0x28b))[_0x10f145(0x1bf)]=_0x10f145(0x227)):document[_0x10f145(0x1dc)](_0x10f145(0x2c1))[_0x10f145(0x214)][_0x10f145(0x2e1)]=_0x10f145(0x23e),document['getElementById'](_0x10f145(0x308))[_0x10f145(0x1d8)]=_0x52cbdb[_0x10f145(0x1bc)],document[_0x10f145(0x1dc)](_0x10f145(0x260))[_0x10f145(0x1d8)]=_0x52cbdb[_0x10f145(0x1df)],document[_0x10f145(0x1dc)](_0x10f145(0x1e1))[_0x10f145(0x1d8)]=_0x52cbdb[_0x10f145(0x2f2)],document[_0x10f145(0x1dc)](_0x10f145(0x2f7))[_0x10f145(0x1d8)]=_0x52cbdb[_0x10f145(0x30a)],document[_0x10f145(0x1dc)](_0x10f145(0x244))[_0x10f145(0x1d8)]=_0x52cbdb['note']||'',updateDateDisplay(),openSheet(_0x10f145(0x1f2));}async function trySaveSession(){const _0x51199a=a2_0x4766c2,_0x3e5878=document['getElementById']('inpClient')[_0x51199a(0x1d8)],_0x277d7c=document[_0x51199a(0x1dc)](_0x51199a(0x260))[_0x51199a(0x1d8)],_0x3ba13f=document['getElementById'](_0x51199a(0x1e1))['value'],_0x3177a6=document[_0x51199a(0x1dc)](_0x51199a(0x2f7))[_0x51199a(0x1d8)],_0x1457c4=document[_0x51199a(0x1dc)]('inpNote')['value'],_0x53a0b5=document[_0x51199a(0x1dc)](_0x51199a(0x20e))[_0x51199a(0x2ed)];let _0x5429d1=0x4;if(_0x53a0b5){const _0xc4aa27=parseInt(document[_0x51199a(0x1dc)](_0x51199a(0x1a8))[_0x51199a(0x1d8)]);if(!_0xc4aa27||_0xc4aa27<0x2){showToast('Минимум\x202\x20тренировки',![]);return;}if(_0xc4aa27>0x64){showToast('Максимум\x20100\x20за\x20раз',![]);return;}_0x5429d1=_0xc4aa27;}const _0x16ecc2=clients['find'](_0x3d591d=>_0x3d591d['name']===_0x3e5878);if(!_0x16ecc2){showToast('Ошибка:\x20Выберите\x20клиента\x20из\x20списка',![]);return;}const _0x472935=validateAppointment(_0x277d7c,_0x3ba13f,_0x3177a6,editingId,_0x16ecc2['id']);if(!_0x472935['valid']){showToast(_0x472935[_0x51199a(0x1e2)],![]);return;}_0x472935[_0x51199a(0x1cd)]&&showToast(_0x472935[_0x51199a(0x1cd)],![]);const _0x541e25={'client':_0x3e5878,'clientId':_0x16ecc2['id'],'start':_0x3ba13f,'end':_0x3177a6,'note':_0x1457c4,'status':_0x51199a(0x1ca)},_0x189883=editingId?sessions[_0x51199a(0x242)](_0x4a656d=>_0x4a656d['id']===editingId):null;if(_0x189883&&_0x189883[_0x51199a(0x29f)]){tempSessionData={..._0x541e25,'dateStr':_0x277d7c,'id':editingId,'seriesId':_0x189883[_0x51199a(0x29f)]},openActionSheet(_0x51199a(0x2e6));return;}let _0x50e413=null;if(!editingId)_0x50e413=_0x51199a(0x1f5);else{if(_0x189883){if(String(_0x189883[_0x51199a(0x231)])!==String(_0x16ecc2['id']))console['log']('[Notify]\x20Client\x20SWAP\x20detected'),NotificationManager[_0x51199a(0x1c8)](_0x51199a(0x2e2),_0x189883),_0x50e413=_0x51199a(0x1f5);else(_0x189883[_0x51199a(0x2f2)]!==_0x3ba13f||_0x189883['end']!==_0x3177a6||_0x189883[_0x51199a(0x1df)]!==_0x277d7c)&&(_0x50e413=_0x51199a(0x1f0));}}if(!editingId&&_0x53a0b5){createBatchSeries(_0x541e25,_0x277d7c,_0x5429d1),NotificationManager[_0x51199a(0x1c8)](_0x51199a(0x1f5),{..._0x541e25,'dateStr':_0x277d7c});return;}lastUserActionTime=Date[_0x51199a(0x1c9)]();const _0x20e674={..._0x541e25,'dateStr':_0x277d7c,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x20e674),_0x50e413&&NotificationManager[_0x51199a(0x1c8)](_0x50e413,_0x20e674);}function toggleSessionStatus(){const _0x5f5268=a2_0x4766c2;lastUserActionTime=Date[_0x5f5268(0x1c9)]();const _0x293113=sessions[_0x5f5268(0x242)](_0x1f7988=>_0x1f7988['id']===editingId);if(!_0x293113)return;const _0x333bd2=_0x293113['status']===_0x5f5268(0x226)?_0x5f5268(0x1ca):_0x5f5268(0x226);_0x293113['status']=_0x333bd2,saveSingleSession(_0x293113),_0x333bd2==='completed'&&NotificationManager['send'](_0x5f5268(0x29e),_0x293113),showToast(_0x333bd2===_0x5f5268(0x226)?_0x5f5268(0x31f):'Статус\x20сброшен',!![]);}function validateAppointment(_0x33db9a,_0x3d00f9,_0x1a5b99,_0x1ba256,_0x57fc95){const _0x59f5fd=a2_0x4766c2,[_0x2b18c9,_0x4eaa0a]=_0x3d00f9['split'](':')[_0x59f5fd(0x1aa)](Number),[_0x214e4b,_0x9e0dc7]=_0x1a5b99[_0x59f5fd(0x273)](':')[_0x59f5fd(0x1aa)](Number),_0x7ac068=_0x2b18c9*0x3c+_0x4eaa0a,_0x3a216f=_0x214e4b*0x3c+_0x9e0dc7,_0x534b56=String(_0x57fc95);let _0x369dfa=![],_0x1e4793='';for(let _0x3178ec of sessions){if(_0x3178ec['dateStr']!==_0x33db9a)continue;if(_0x3178ec[_0x59f5fd(0x25c)]==='cancelled')continue;if(_0x1ba256&&String(_0x3178ec['id'])===String(_0x1ba256))continue;const [_0x5578b5,_0x150cf9]=_0x3178ec[_0x59f5fd(0x2f2)]['split'](':')['map'](Number),[_0x598edd,_0xc6d02a]=_0x3178ec[_0x59f5fd(0x30a)]['split'](':')['map'](Number),_0x3f69b3=_0x5578b5*0x3c+_0x150cf9,_0x1bee21=_0x598edd*0x3c+_0xc6d02a;if(Math[_0x59f5fd(0x1b9)](_0x7ac068,_0x3f69b3)<Math[_0x59f5fd(0x1e9)](_0x3a216f,_0x1bee21)){if(_0x3178ec[_0x59f5fd(0x231)]&&String(_0x3178ec['clientId'])===_0x534b56)return{'valid':![],'msg':'Этот\x20клиент\x20('+_0x3178ec['client']+_0x59f5fd(0x241)};_0x369dfa=!![],_0x1e4793=_0x3178ec[_0x59f5fd(0x1bc)];}}if(_0x369dfa)return{'valid':!![],'warning':_0x59f5fd(0x1ce)+_0x1e4793};return{'valid':!![]};}function saveSingleSession(_0x40ae6f){const _0x30c7b9=a2_0x4766c2;if(editingId){const _0x1f3d51=sessions[_0x30c7b9(0x1f9)](_0x44fee4=>_0x44fee4['id']===editingId);if(_0x1f3d51!==-0x1)sessions[_0x1f3d51]=_0x40ae6f;}else sessions['push'](_0x40ae6f);afterSaveAction([_0x40ae6f[_0x30c7b9(0x1df)]]);}function createBatchSeries(_0x5d49ef,_0x4f18f3,_0x1fd6d0){const _0x49e260=a2_0x4766c2,_0x14d9d6=generateId(),_0x459352=[],_0x45bf69=[];let _0x5b011e=0x0,_0x4b05e0=new Date(_0x4f18f3);for(let _0x3fed2f=0x0;_0x3fed2f<_0x1fd6d0;_0x3fed2f++){const _0x2423bb=getLocalDateStr(_0x4b05e0),_0x163f41=validateAppointment(_0x2423bb,_0x5d49ef[_0x49e260(0x2f2)],_0x5d49ef[_0x49e260(0x30a)],null,_0x5d49ef['clientId']);if(!_0x163f41[_0x49e260(0x213)])console[_0x49e260(0x235)]('[Series]\x20Skipped\x20'+_0x2423bb+_0x49e260(0x216)),_0x5b011e++;else{const _0x330437={..._0x5d49ef,'id':generateId(),'dateStr':_0x2423bb,'seriesId':_0x14d9d6};_0x45bf69[_0x49e260(0x302)](_0x330437),_0x459352[_0x49e260(0x302)](_0x2423bb);}_0x4b05e0['setDate'](_0x4b05e0[_0x49e260(0x2a2)]()+0x7);}if(_0x45bf69[_0x49e260(0x2eb)]===0x0){showToast(_0x49e260(0x2f4),![]);return;}sessions[_0x49e260(0x302)](..._0x45bf69),lastUserActionTime=Date[_0x49e260(0x1c9)]();let _0x18689d=_0x49e260(0x2af)+_0x45bf69[_0x49e260(0x2eb)];_0x5b011e>0x0&&(_0x18689d+=_0x49e260(0x1d4)+_0x5b011e+')'),showToast(_0x18689d,!![]),afterSaveAction(_0x459352);}function updateSeriesBatch(_0x8a3edb,_0x17c075){const _0x1631c8=a2_0x4766c2,_0x2d15e3=[],_0x559fe0=_0x17c075[_0x1631c8(0x29f)];if(_0x8a3edb==='single'){const _0x47cf85={..._0x17c075,'seriesId':null},_0x834de3=sessions[_0x1631c8(0x1f9)](_0x1d0beb=>_0x1d0beb['id']===_0x17c075['id']);if(_0x834de3!==-0x1)sessions[_0x834de3]=_0x47cf85;_0x2d15e3[_0x1631c8(0x302)](_0x47cf85[_0x1631c8(0x1df)]);}else{if(_0x8a3edb===_0x1631c8(0x30e)){const _0x276029=_0x17c075[_0x1631c8(0x1df)];sessions[_0x1631c8(0x21a)]((_0x3afc27,_0x422af2)=>{const _0x57c6ba=_0x1631c8;_0x3afc27[_0x57c6ba(0x29f)]===_0x559fe0&&_0x3afc27[_0x57c6ba(0x1df)]>=_0x276029&&(sessions[_0x422af2]={...sessions[_0x422af2],'start':_0x17c075[_0x57c6ba(0x2f2)],'end':_0x17c075[_0x57c6ba(0x30a)],'note':_0x17c075['note'],'client':_0x17c075[_0x57c6ba(0x1bc)],'clientId':_0x17c075[_0x57c6ba(0x231)]},_0x2d15e3[_0x57c6ba(0x302)](_0x3afc27[_0x57c6ba(0x1df)]));});}}afterSaveAction(_0x2d15e3);}function tryDeleteSession(){const _0x525216=a2_0x4766c2,_0x20ca0f=sessions[_0x525216(0x242)](_0x1a24c4=>_0x1a24c4['id']===editingId);if(!_0x20ca0f)return;_0x20ca0f[_0x525216(0x29f)]?openActionSheet(_0x525216(0x304)):commitDelete(_0x525216(0x21e),_0x20ca0f);}function commitDelete(_0xaec374,_0x134e00){const _0x154dc4=a2_0x4766c2;lastUserActionTime=Date[_0x154dc4(0x1c9)](),NotificationManager[_0x154dc4(0x1c8)](_0x154dc4(0x2e2),_0x134e00);const _0x228bca=[];if(_0xaec374===_0x154dc4(0x21e))sessions=sessions[_0x154dc4(0x228)](_0x5490ba=>_0x5490ba['id']!==_0x134e00['id']),_0x228bca[_0x154dc4(0x302)](_0x134e00[_0x154dc4(0x1df)]);else{if(_0xaec374===_0x154dc4(0x30e)){const _0x2de638=_0x134e00[_0x154dc4(0x1df)],_0x5661c5=_0x134e00[_0x154dc4(0x29f)];sessions['forEach'](_0xdad64a=>{const _0x1ad22a=_0x154dc4;_0xdad64a[_0x1ad22a(0x29f)]===_0x5661c5&&_0xdad64a[_0x1ad22a(0x1df)]>=_0x2de638&&_0x228bca[_0x1ad22a(0x302)](_0xdad64a[_0x1ad22a(0x1df)]);}),sessions=sessions[_0x154dc4(0x228)](_0x31aa98=>!(_0x31aa98['seriesId']===_0x5661c5&&_0x31aa98['dateStr']>=_0x2de638));}}afterSaveAction(_0x228bca);}function afterSaveAction(_0x14c897){const _0x3a610=a2_0x4766c2;DataManager['saveLocally'](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager['syncBatch'](_0x14c897)['then'](()=>console[_0x3a610(0x235)](_0x3a610(0x255)))['catch'](_0x34b2d8=>showToast(_0x3a610(0x229),![]));}const NotificationManager={'formatDate'(_0x2a9177){const _0x5a6972=a2_0x4766c2,_0x5d67ef=new Date(_0x2a9177),_0x215695={'weekday':'long','day':_0x5a6972(0x1d0),'month':_0x5a6972(0x27a)};let _0x230552=_0x5d67ef[_0x5a6972(0x2d9)](_0x5a6972(0x318),_0x215695);return _0x230552[_0x5a6972(0x1b7)](0x0)[_0x5a6972(0x1cf)]()+_0x230552[_0x5a6972(0x207)](0x1);},'getText'(_0x50f2eb,_0x474275){const _0x5ee1be=a2_0x4766c2,_0xbbad2=this['formatDate'](_0x474275[_0x5ee1be(0x1df)]);switch(_0x50f2eb){case _0x5ee1be(0x1f5):return _0x5ee1be(0x217)+(_0x5ee1be(0x2a4)+_0xbbad2+'\x0a')+('<b>⏰\x20Время:</b>\x20'+_0x474275['start']+'\x20—\x20'+_0x474275[_0x5ee1be(0x30a)]+'\x0a\x0a')+_0x5ee1be(0x1f7);case _0x5ee1be(0x1f0):return _0x5ee1be(0x2b6)+'Ваша\x20тренировка\x20перенесена:\x0a\x0a'+('<b>✅\x20'+_0x474275[_0x5ee1be(0x2f2)]+_0x5ee1be(0x294)+_0x474275[_0x5ee1be(0x30a)]+_0x5ee1be(0x314))+(_0x5ee1be(0x2a4)+_0xbbad2);case _0x5ee1be(0x2e2):return _0x5ee1be(0x20b)+(_0x5ee1be(0x250)+_0xbbad2+'\x20('+_0x474275[_0x5ee1be(0x2f2)]+')</b>\x20была\x20удалена\x20из\x20расписания.');case'complete':return _0x5ee1be(0x276)+_0x5ee1be(0x281)+_0x5ee1be(0x2dc);default:return'';}},async 'send'(_0x271fce,_0x212e89){const _0x3ccb8c=a2_0x4766c2;console[_0x3ccb8c(0x235)]('[Notify]\x20Attempting\x20to\x20send:',_0x271fce,_0x212e89);if(!_0x212e89){console['error'](_0x3ccb8c(0x222));return;}const _0x186b68=String(_0x212e89[_0x3ccb8c(0x231)]);console[_0x3ccb8c(0x235)](_0x3ccb8c(0x2f6),_0x186b68);if(!_0x212e89[_0x3ccb8c(0x231)]||_0x186b68===_0x3ccb8c(0x1de)||_0x186b68===_0x3ccb8c(0x223)){console[_0x3ccb8c(0x290)](_0x3ccb8c(0x22e));if(_0x212e89[_0x3ccb8c(0x1bc)]){const _0xad4c65=clients[_0x3ccb8c(0x242)](_0x3b381f=>_0x3b381f['name']===_0x212e89[_0x3ccb8c(0x1bc)]);if(_0xad4c65)return console[_0x3ccb8c(0x235)]('[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:',_0xad4c65['id']),this[_0x3ccb8c(0x1c8)](_0x271fce,{..._0x212e89,'clientId':_0xad4c65['id']});}return;}if(_0x186b68[_0x3ccb8c(0x2eb)]<0x5){console[_0x3ccb8c(0x1e0)](_0x3ccb8c(0x1ed),_0x186b68);return;}const _0x5d02aa=this[_0x3ccb8c(0x28f)](_0x271fce,_0x212e89);if(!_0x5d02aa){console[_0x3ccb8c(0x290)](_0x3ccb8c(0x1d3));return;}console[_0x3ccb8c(0x235)](_0x3ccb8c(0x2b7)+_0x186b68+'...'),DataManager[_0x3ccb8c(0x21f)]('send_notification',{'chatId':_0x186b68,'text':_0x5d02aa})[_0x3ccb8c(0x2d5)](_0x3f096e=>console['log'](_0x3ccb8c(0x2d0),_0x3f096e))[_0x3ccb8c(0x291)](_0x38b3d0=>console['error']('[Notify]\x20Network\x20Failed',_0x38b3d0));}};function getLocalDateStr(_0x1ae7c0){const _0x37b6cd=a2_0x4766c2,_0x4f47f6=_0x1ae7c0[_0x37b6cd(0x2d7)](),_0x69a40a=String(_0x1ae7c0[_0x37b6cd(0x1db)]()+0x1)[_0x37b6cd(0x310)](0x2,'0'),_0x5a5012=String(_0x1ae7c0[_0x37b6cd(0x2a2)]())[_0x37b6cd(0x310)](0x2,'0');return _0x4f47f6+'-'+_0x69a40a+'-'+_0x5a5012;}function getDateStr(_0x1d7870){const _0x29a7db=a2_0x4766c2,_0x563f48=new Date();return _0x563f48[_0x29a7db(0x277)](_0x563f48['getDate']()+_0x1d7870),getLocalDateStr(_0x563f48);}function getStartOfWeek(_0x45f1c0){const _0x4ff226=a2_0x4766c2,_0x4464ae=(function(){let _0x4369a2=!![];return function(_0x1618a6,_0x5b6a6c){const _0x5409f2=_0x4369a2?function(){const _0x3be9b3=a2_0x504e;if(_0x5b6a6c){const _0x1810ed=_0x5b6a6c[_0x3be9b3(0x20a)](_0x1618a6,arguments);return _0x5b6a6c=null,_0x1810ed;}}:function(){};return _0x4369a2=![],_0x5409f2;};}()),_0x1e3b1e=_0x4464ae(this,function(){const _0x1df8ea=a2_0x504e;return _0x1e3b1e['toString']()[_0x1df8ea(0x2c9)](_0x1df8ea(0x1d1))[_0x1df8ea(0x24e)]()[_0x1df8ea(0x2e8)](_0x1e3b1e)['search'](_0x1df8ea(0x1d1));});_0x1e3b1e();const _0x5878fb=new Date(_0x45f1c0),_0x414716=_0x5878fb[_0x4ff226(0x253)](),_0x1f0bf0=_0x5878fb[_0x4ff226(0x2a2)]()-_0x414716+(_0x414716===0x0?-0x6:0x1);return _0x5878fb[_0x4ff226(0x277)](_0x1f0bf0),_0x5878fb['setHours'](0x0,0x0,0x0,0x0),_0x5878fb;}function hexToRgba(_0x484fae,_0x424816){const _0x66e3b2=a2_0x4766c2;if(!_0x484fae)return _0x66e3b2(0x2fe);let _0x296796=0x0,_0x2440b3=0x0,_0x1d5078=0x0;if(_0x484fae[_0x66e3b2(0x2eb)]===0x4)_0x296796='0x'+_0x484fae[0x1]+_0x484fae[0x1],_0x2440b3='0x'+_0x484fae[0x2]+_0x484fae[0x2],_0x1d5078='0x'+_0x484fae[0x3]+_0x484fae[0x3];else _0x484fae[_0x66e3b2(0x2eb)]===0x7&&(_0x296796='0x'+_0x484fae[0x1]+_0x484fae[0x2],_0x2440b3='0x'+_0x484fae[0x3]+_0x484fae[0x4],_0x1d5078='0x'+_0x484fae[0x5]+_0x484fae[0x6]);return _0x66e3b2(0x2a5)+ +_0x296796+',\x20'+ +_0x2440b3+',\x20'+ +_0x1d5078+',\x20'+_0x424816+')';}function renderTimeColumn(){const _0x2b1a4=a2_0x4766c2,_0x54c3c0=document[_0x2b1a4(0x1dc)](_0x2b1a4(0x1c4)),_0x449045=document['getElementById'](_0x2b1a4(0x1cb));_0x54c3c0[_0x2b1a4(0x2b3)]='',_0x54c3c0['appendChild'](_0x449045);for(let _0x30c960=0x0;_0x30c960<0x18;_0x30c960++){const _0x337566=document[_0x2b1a4(0x2cc)](_0x2b1a4(0x28e));_0x337566[_0x2b1a4(0x279)]=_0x2b1a4(0x2c4);if(_0x30c960>0x0)_0x337566[_0x2b1a4(0x2b3)]=_0x2b1a4(0x29a)+String(_0x30c960)[_0x2b1a4(0x310)](0x2,'0')+_0x2b1a4(0x259);_0x54c3c0[_0x2b1a4(0x1d9)](_0x337566);}}function renderDayRange(_0x397c99,_0x4521ef){const _0x4bbad3=a2_0x4766c2,_0x43be68=document[_0x4bbad3(0x1dc)]('daysHeaderTrack'),_0x3e0604=document[_0x4bbad3(0x1dc)](_0x4bbad3(0x2c2)),_0x2316b7=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x211c55=new Date();_0x211c55[_0x4bbad3(0x205)](0x0,0x0,0x0,0x0);const _0xbc0aaf=getLocalDateStr(new Date());for(let _0x2fbcf3=_0x397c99;_0x2fbcf3<=_0x4521ef;_0x2fbcf3++){const _0x31b9cd=new Date(_0x211c55);_0x31b9cd[_0x4bbad3(0x277)](_0x31b9cd[_0x4bbad3(0x2a2)]()+_0x2fbcf3);const _0x7e1dc1=getLocalDateStr(_0x31b9cd);let _0x2c85ed=_0x31b9cd['getDay']()-0x1;if(_0x2c85ed===-0x1)_0x2c85ed=0x6;const _0x53b4b6=_0x7e1dc1===_0xbc0aaf,_0x18a7fb=document[_0x4bbad3(0x2cc)](_0x4bbad3(0x28e));_0x18a7fb['className']='day-col-header\x20'+(_0x53b4b6?_0x4bbad3(0x307):''),_0x18a7fb['id']=_0x4bbad3(0x215)+_0x7e1dc1,_0x18a7fb[_0x4bbad3(0x1ac)](_0x4bbad3(0x266),_0x7e1dc1),_0x18a7fb[_0x4bbad3(0x2b3)]=_0x4bbad3(0x2ec)+_0x2316b7[_0x2c85ed]+_0x4bbad3(0x296)+_0x31b9cd[_0x4bbad3(0x2a2)]()+'</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-'+_0x7e1dc1+_0x4bbad3(0x1b1),_0x18a7fb[_0x4bbad3(0x312)]=()=>openDayOptions(_0x7e1dc1,_0x2316b7[_0x2c85ed]+'\x20'+_0x31b9cd['getDate']()),_0x43be68[_0x4bbad3(0x1d9)](_0x18a7fb);const _0x153215=document['createElement'](_0x4bbad3(0x28e));_0x153215[_0x4bbad3(0x279)]=_0x4bbad3(0x1ff)+(_0x53b4b6?_0x4bbad3(0x307):''),_0x153215[_0x4bbad3(0x1ac)](_0x4bbad3(0x266),_0x7e1dc1),_0x153215[_0x4bbad3(0x1ac)](_0x4bbad3(0x2db),_0x2c85ed),renderEventsForColumn(_0x153215,_0x7e1dc1,_0x2c85ed),attachLongPressHandler(_0x153215,_0x31b9cd),_0x3e0604[_0x4bbad3(0x1d9)](_0x153215),updateDayStats(_0x7e1dc1);}}function reRenderBlocks(){const _0x45a2f5=a2_0x4766c2;document[_0x45a2f5(0x28d)](_0x45a2f5(0x1f1))[_0x45a2f5(0x21a)](_0x2f89e1=>{const _0x464211=_0x45a2f5;_0x2f89e1['querySelectorAll'](_0x464211(0x26c))[_0x464211(0x21a)](_0x427f41=>_0x427f41[_0x464211(0x2a0)]());const _0x3e88dc=_0x2f89e1[_0x464211(0x309)](_0x464211(0x266)),_0x15a889=parseInt(_0x2f89e1[_0x464211(0x309)](_0x464211(0x2db))),_0x3d74b0=Math[_0x464211(0x303)](_0x2f89e1['offsetLeft']);(availabilityPattern[_0x15a889]||[])[_0x464211(0x21a)](_0x52df0f=>{const _0x3463e7=_0x464211,_0x2ca3af=document[_0x3463e7(0x2cc)](_0x3463e7(0x28e));_0x2ca3af[_0x3463e7(0x279)]=_0x3463e7(0x1ea);const _0x1f95f7=_0x52df0f*GRID_H;_0x2ca3af[_0x3463e7(0x214)]['top']=_0x1f95f7+'px',_0x2ca3af['style'][_0x3463e7(0x211)]='-'+_0x3d74b0+'px\x20-'+_0x1f95f7+'px',_0x2f89e1[_0x3463e7(0x1d9)](_0x2ca3af);});if(specialRanges&&specialRanges['length']>0x0){const _0x5e5dea=new Date(_0x3e88dc+_0x464211(0x2b0))[_0x464211(0x1ae)](),_0x21c8d7=new Date(_0x3e88dc+_0x464211(0x2d2))[_0x464211(0x1ae)]();specialRanges[_0x464211(0x21a)](_0x4fa1f8=>{const _0x2413ac=_0x464211,_0xd0fa02=new Date(_0x4fa1f8['start'])[_0x2413ac(0x1ae)](),_0x38be11=new Date(_0x4fa1f8[_0x2413ac(0x30a)])[_0x2413ac(0x1ae)](),_0x45749e=Math[_0x2413ac(0x1b9)](_0x5e5dea,_0xd0fa02),_0x112508=Math[_0x2413ac(0x1e9)](_0x21c8d7,_0x38be11);if(_0x45749e<_0x112508){if(_0x45749e<=_0x5e5dea&&_0x112508>=_0x21c8d7-0xea60){if(!_0x2f89e1[_0x2413ac(0x1ba)](_0x2413ac(0x236))){const _0xa185c0=document[_0x2413ac(0x2cc)](_0x2413ac(0x28e));_0xa185c0[_0x2413ac(0x279)]=_0x2413ac(0x283),_0xa185c0[_0x2413ac(0x214)][_0x2413ac(0x211)]='-'+_0x3d74b0+_0x2413ac(0x2e4),_0x2f89e1[_0x2413ac(0x1d9)](_0xa185c0);}}else{const _0x4513e5=(_0x45749e-_0x5e5dea)/0x36ee80*GRID_H,_0x18213c=(_0x112508-_0x45749e)/0x36ee80*GRID_H,_0x486c47=document[_0x2413ac(0x2cc)](_0x2413ac(0x28e));_0x486c47[_0x2413ac(0x279)]=_0x2413ac(0x2b1),_0x486c47[_0x2413ac(0x214)][_0x2413ac(0x30d)]=_0x4513e5+'px',_0x486c47[_0x2413ac(0x214)][_0x2413ac(0x275)]=_0x18213c+'px',_0x486c47[_0x2413ac(0x214)][_0x2413ac(0x211)]='-'+_0x3d74b0+'px\x20-'+_0x4513e5+'px',_0x2f89e1[_0x2413ac(0x1d9)](_0x486c47);}}});}if(dateExceptions[_0x3e88dc]===_0x464211(0x288)){if(!_0x2f89e1[_0x464211(0x1ba)](_0x464211(0x236))){const _0x4468db=document['createElement'](_0x464211(0x28e));_0x4468db['className']='day-off-overlay\x20stripe-bg',_0x4468db[_0x464211(0x214)][_0x464211(0x211)]='-'+_0x3d74b0+_0x464211(0x2e4),_0x2f89e1[_0x464211(0x1d9)](_0x4468db);}}renderEventsForColumn(_0x2f89e1,_0x3e88dc,_0x15a889),updateDayStats(_0x3e88dc);});}function updateAllDayStats(){const _0x4e4148=a2_0x4766c2;document['querySelectorAll'](_0x4e4148(0x247))[_0x4e4148(0x21a)](_0x5064fd=>{const _0x3e4c08=_0x4e4148;updateDayStats(_0x5064fd[_0x3e4c08(0x309)](_0x3e4c08(0x266)));});}function updateDayStats(_0x4d138b){const _0x22845f=a2_0x4766c2,_0x122c9a=document[_0x22845f(0x1dc)]('stat-'+_0x4d138b);if(!_0x122c9a)return;const _0x9e3a1e=new Date(_0x4d138b);let _0xe95339=_0x9e3a1e[_0x22845f(0x253)]()-0x1;if(_0xe95339===-0x1)_0xe95339=0x6;if(dateExceptions[_0x4d138b]===_0x22845f(0x288)){_0x122c9a[_0x22845f(0x214)][_0x22845f(0x2e1)]='none';return;}const _0x3193a9=availabilityPattern[_0xe95339]||[],_0x417ad1=0x18-_0x3193a9[_0x22845f(0x2eb)],_0x4f4c3b=_0x417ad1*0x3c,_0x4740a4=sessions['filter'](_0x4447a7=>_0x4447a7[_0x22845f(0x1df)]===_0x4d138b&&_0x4447a7['status']!==_0x22845f(0x1ad));if(_0x4740a4[_0x22845f(0x2eb)]===0x0){_0x122c9a[_0x22845f(0x214)][_0x22845f(0x2e1)]='none';return;}let _0x21a16e=_0x4740a4[_0x22845f(0x1aa)](_0x505723=>{const _0x5e1726=_0x22845f,[_0x34a994,_0x4bbb36]=_0x505723[_0x5e1726(0x2f2)][_0x5e1726(0x273)](':')['map'](Number),[_0x7c9031,_0x327a93]=_0x505723[_0x5e1726(0x30a)]['split'](':')[_0x5e1726(0x1aa)](Number);return[_0x34a994*0x3c+_0x4bbb36,_0x7c9031*0x3c+_0x327a93];});_0x21a16e[_0x22845f(0x24c)]((_0x4696b9,_0x44e1be)=>_0x4696b9[0x0]-_0x44e1be[0x0]);let _0x107de4=[];if(_0x21a16e[_0x22845f(0x2eb)]>0x0){let _0x3b6582=_0x21a16e[0x0];for(let _0x5a4aa8=0x1;_0x5a4aa8<_0x21a16e[_0x22845f(0x2eb)];_0x5a4aa8++){_0x21a16e[_0x5a4aa8][0x0]<_0x3b6582[0x1]?_0x3b6582[0x1]=Math[_0x22845f(0x1b9)](_0x3b6582[0x1],_0x21a16e[_0x5a4aa8][0x1]):(_0x107de4['push'](_0x3b6582),_0x3b6582=_0x21a16e[_0x5a4aa8]);}_0x107de4[_0x22845f(0x302)](_0x3b6582);}let _0x3614fc=0x0;_0x107de4['forEach'](_0x1843af=>_0x3614fc+=_0x1843af[0x1]-_0x1843af[0x0]),_0x122c9a[_0x22845f(0x214)][_0x22845f(0x2e1)]=_0x22845f(0x282);const _0x5a737d=_0x122c9a[_0x22845f(0x1ba)](_0x22845f(0x1f3));if(_0x4f4c3b===0x0){_0x5a737d['style'][_0x22845f(0x272)]=_0x22845f(0x2a1),_0x5a737d[_0x22845f(0x214)][_0x22845f(0x284)]=_0x22845f(0x2ae);return;}const _0x12138b=_0x3614fc/_0x4f4c3b*0x64;console['log']('['+_0x4d138b+']\x20Доступно:\x20'+_0x417ad1+_0x22845f(0x1f4)+_0x3614fc+_0x22845f(0x237)+_0x12138b['toFixed'](0x1)+'%'),_0x12138b>0x64?(_0x5a737d[_0x22845f(0x214)][_0x22845f(0x272)]=_0x22845f(0x2a1),_0x5a737d[_0x22845f(0x214)]['background']=_0x22845f(0x2ae)):(_0x5a737d[_0x22845f(0x214)][_0x22845f(0x272)]=_0x12138b+'%',_0x5a737d[_0x22845f(0x214)][_0x22845f(0x284)]='var(--acc-current)');}function renderEventsForColumn(_0x1dbee5,_0x45fb3e,_0x41cb78){const _0x5c7fea=a2_0x4766c2,_0x2bcc11=sessions[_0x5c7fea(0x228)](_0xd3ac51=>_0xd3ac51[_0x5c7fea(0x1df)]===_0x45fb3e),_0x1fcc2f=_0x2bcc11[_0x5c7fea(0x1aa)](_0xdf5b3d=>{const _0x3edc24=_0x5c7fea,[_0x2c1d31,_0x32d5a3]=_0xdf5b3d[_0x3edc24(0x2f2)][_0x3edc24(0x273)](':')[_0x3edc24(0x1aa)](Number),[_0x1b0ccc,_0x3f9506]=_0xdf5b3d[_0x3edc24(0x30a)][_0x3edc24(0x273)](':')[_0x3edc24(0x1aa)](Number);return{'data':_0xdf5b3d,'start':_0x2c1d31*0x3c+_0x32d5a3,'end':_0x1b0ccc*0x3c+_0x3f9506,'colIndex':0x0};});_0x1fcc2f[_0x5c7fea(0x24c)]((_0x217293,_0x307e00)=>{const _0x30b717=_0x5c7fea;if(_0x217293[_0x30b717(0x2f2)]!==_0x307e00['start'])return _0x217293['start']-_0x307e00['start'];return _0x307e00[_0x30b717(0x30a)]-_0x307e00[_0x30b717(0x2f2)]-(_0x217293[_0x30b717(0x30a)]-_0x217293[_0x30b717(0x2f2)]);});const _0x3ed178=[];_0x1fcc2f[_0x5c7fea(0x21a)](_0xb29ac6=>{const _0x296994=_0x5c7fea;let _0xe39f2e=![];for(let _0x3021f5=0x0;_0x3021f5<_0x3ed178[_0x296994(0x2eb)];_0x3021f5++){const _0x4652e6=_0x3ed178[_0x3021f5],_0x19d660=_0x4652e6[_0x4652e6[_0x296994(0x2eb)]-0x1];if(_0xb29ac6[_0x296994(0x2f2)]>=_0x19d660[_0x296994(0x30a)]){_0x4652e6[_0x296994(0x302)](_0xb29ac6),_0xb29ac6[_0x296994(0x31a)]=_0x3021f5,_0xe39f2e=!![];break;}}!_0xe39f2e&&(_0x3ed178[_0x296994(0x302)]([_0xb29ac6]),_0xb29ac6[_0x296994(0x31a)]=_0x3ed178[_0x296994(0x2eb)]-0x1);}),_0x1fcc2f['forEach'](_0x3c5566=>{const _0x37db4f=_0x5c7fea;let _0x3e9ffb=0x0;_0x1fcc2f[_0x37db4f(0x21a)](_0x1a2fea=>{const _0x4952d8=_0x37db4f;if(Math[_0x4952d8(0x1b9)](_0x3c5566[_0x4952d8(0x2f2)],_0x1a2fea[_0x4952d8(0x2f2)])<Math['min'](_0x3c5566[_0x4952d8(0x30a)],_0x1a2fea[_0x4952d8(0x30a)])){if(_0x1a2fea[_0x4952d8(0x31a)]>_0x3e9ffb)_0x3e9ffb=_0x1a2fea['colIndex'];}});const _0x55cb9e=_0x3e9ffb+0x1,_0x2ab59c=0x64/_0x55cb9e,_0x7d7386=_0x3c5566['colIndex']*_0x2ab59c,_0x369729=createEventEl(_0x3c5566[_0x37db4f(0x1ec)]);_0x369729[_0x37db4f(0x214)][_0x37db4f(0x272)]=_0x37db4f(0x306)+_0x2ab59c+'%\x20-\x204px)',_0x369729[_0x37db4f(0x214)][_0x37db4f(0x210)]=_0x37db4f(0x306)+_0x7d7386+_0x37db4f(0x270),_0x369729['style']['zIndex']=0xa+_0x3c5566[_0x37db4f(0x31a)],_0x2ab59c<0x55&&_0x369729[_0x37db4f(0x262)]['add'](_0x37db4f(0x1e5)),_0x1dbee5['appendChild'](_0x369729);});}function createEventEl(_0x2234eb){const _0x3c73ce=a2_0x4766c2,[_0x3e77ac,_0x51b27d]=_0x2234eb['start']['split'](':')[_0x3c73ce(0x1aa)](Number),[_0x29c923,_0x53a784]=_0x2234eb[_0x3c73ce(0x30a)][_0x3c73ce(0x273)](':')[_0x3c73ce(0x1aa)](Number),_0x5100d5=(_0x3e77ac*0x3c+_0x51b27d)/0x3c*GRID_H,_0x482e52=(_0x29c923*0x3c+_0x53a784-(_0x3e77ac*0x3c+_0x51b27d))/0x3c*GRID_H,_0x9669fb=document['createElement'](_0x3c73ce(0x28e)),_0x36becc=_0x2234eb[_0x3c73ce(0x25c)]==='completed'?'\x20status-completed':'';_0x9669fb['className']='event-card'+_0x36becc,_0x9669fb['style'][_0x3c73ce(0x30d)]=_0x5100d5+'px',_0x9669fb[_0x3c73ce(0x214)][_0x3c73ce(0x275)]=Math[_0x3c73ce(0x1b9)](_0x482e52,0x14)+'px';const _0x5da21f=clients[_0x3c73ce(0x242)](_0x59a08b=>_0x2234eb[_0x3c73ce(0x231)]&&String(_0x59a08b['id'])===String(_0x2234eb[_0x3c73ce(0x231)])||_0x59a08b[_0x3c73ce(0x25b)]===_0x2234eb[_0x3c73ce(0x1bc)]),_0x459d37=_0x5da21f?_0x5da21f[_0x3c73ce(0x25f)]:_0x3c73ce(0x1be);_0x9669fb['style'][_0x3c73ce(0x256)]=_0x459d37,_0x9669fb['style'][_0x3c73ce(0x2fc)]=hexToRgba(_0x459d37,0.85);let _0x1d1894=_0x3c73ce(0x201)+_0x2234eb[_0x3c73ce(0x1bc)]+'</div><div\x20class=\x22ev-time\x22>'+_0x2234eb['start']+_0x3c73ce(0x1b0)+_0x2234eb['end']+_0x3c73ce(0x232);return _0x2234eb['seriesId']&&(_0x1d1894+='<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>'),_0x2234eb[_0x3c73ce(0x25c)]==='completed'&&(_0x1d1894+=_0x3c73ce(0x31d)),_0x9669fb[_0x3c73ce(0x2b3)]=_0x1d1894,_0x9669fb[_0x3c73ce(0x312)]=_0x1834e8=>{_0x1834e8['stopPropagation'](),openEdit(_0x2234eb);},_0x9669fb;}function attachLongPressHandler(_0x4beccd,_0x24e508){const _0x37434a=a2_0x4766c2;let _0x4d3db1=0x0,_0x5226af=null;const _0x58f219=_0x27ccc4=>{const _0x2f2de9=a2_0x504e;if(_0x27ccc4[_0x2f2de9(0x2d6)][_0x2f2de9(0x2e3)](_0x2f2de9(0x293)))return;isScrolling=![],_0x4d3db1=_0x27ccc4[_0x2f2de9(0x1f8)]?_0x27ccc4[_0x2f2de9(0x1f8)][0x0]['clientY']:_0x27ccc4['clientY'],_0x5226af=setTimeout(()=>{const _0x1572b4=_0x2f2de9;if(!isScrolling){navigator[_0x1572b4(0x2cb)]?.(0x32);const _0x43ca16=_0x4beccd[_0x1572b4(0x2b5)](),_0x52f829=Math['floor']((_0x4d3db1-_0x43ca16['top'])/GRID_H);_0x24e508[_0x1572b4(0x205)](_0x52f829,0x0),openAddSession(_0x24e508);}},0x1f4);},_0x5a2350=()=>{isScrolling=!![],clearTimeout(_0x5226af);},_0xb986fe=()=>{clearTimeout(_0x5226af);};_0x4beccd[_0x37434a(0x299)](_0x37434a(0x261),_0x58f219,{'passive':!![]}),_0x4beccd[_0x37434a(0x299)](_0x37434a(0x1fa),_0x5a2350,{'passive':!![]}),_0x4beccd[_0x37434a(0x299)](_0x37434a(0x1d7),_0xb986fe),_0x4beccd[_0x37434a(0x299)](_0x37434a(0x2b4),_0x58f219),_0x4beccd[_0x37434a(0x299)]('mousemove',_0x5a2350),_0x4beccd[_0x37434a(0x299)]('mouseup',_0xb986fe);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x124e69=a2_0x4766c2,_0x4772ba=document[_0x124e69(0x1dc)](_0x124e69(0x2f0)),_0x3ffb2e=_0x4772ba['scrollLeft'],_0x449a05=_0x4772ba['scrollWidth'],_0x2b4ae2=_0x4772ba[_0x124e69(0x1af)];if(_0x449a05-(_0x3ffb2e+_0x2b4ae2)<0x12c){const _0x2f8871=endOffset;endOffset+=0xe,renderDayRange(_0x2f8871+0x1,endOffset),reRenderBlocks();}if(_0x3ffb2e<0x12c){const _0x43e127=startOffset;startOffset-=0xe,prependDays(startOffset,_0x43e127-0x1),_0x4772ba[_0x124e69(0x1c5)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0xbceb2,_0x3ca293){const _0x1acc47=a2_0x4766c2,_0x300e1a=document[_0x1acc47(0x1dc)](_0x1acc47(0x25d)),_0x1aee3f=document[_0x1acc47(0x1dc)](_0x1acc47(0x2c2)),_0x410886=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x7edd8f=new Date();_0x7edd8f[_0x1acc47(0x205)](0x0,0x0,0x0,0x0);const _0x7ffe27=getLocalDateStr(new Date()),_0x2e4c58=document[_0x1acc47(0x219)](),_0xaa4d74=document[_0x1acc47(0x219)]();for(let _0x1841ee=_0xbceb2;_0x1841ee<=_0x3ca293;_0x1841ee++){const _0x59e337=new Date(_0x7edd8f);_0x59e337[_0x1acc47(0x277)](_0x59e337[_0x1acc47(0x2a2)]()+_0x1841ee);const _0x185a80=getLocalDateStr(_0x59e337);let _0x340c6f=_0x59e337['getDay']()-0x1;if(_0x340c6f===-0x1)_0x340c6f=0x6;const _0x425d27=_0x185a80===_0x7ffe27,_0x6fbc3e=document[_0x1acc47(0x2cc)](_0x1acc47(0x28e));_0x6fbc3e['className']='day-col-header\x20'+(_0x425d27?_0x1acc47(0x307):''),_0x6fbc3e['id']=_0x1acc47(0x215)+_0x185a80,_0x6fbc3e[_0x1acc47(0x1ac)](_0x1acc47(0x266),_0x185a80),_0x6fbc3e[_0x1acc47(0x2b3)]=_0x1acc47(0x2ec)+_0x410886[_0x340c6f]+_0x1acc47(0x296)+_0x59e337[_0x1acc47(0x2a2)]()+_0x1acc47(0x221)+_0x185a80+'\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',_0x6fbc3e[_0x1acc47(0x312)]=()=>openDayOptions(_0x185a80,_0x410886[_0x340c6f]+'\x20'+_0x59e337['getDate']()),_0x2e4c58['appendChild'](_0x6fbc3e);const _0x4aaa93=document['createElement'](_0x1acc47(0x28e));_0x4aaa93[_0x1acc47(0x279)]='day-column\x20'+(_0x425d27?_0x1acc47(0x307):''),_0x4aaa93[_0x1acc47(0x1ac)](_0x1acc47(0x266),_0x185a80),_0x4aaa93[_0x1acc47(0x1ac)]('data-day-idx',_0x340c6f),renderEventsForColumn(_0x4aaa93,_0x185a80,_0x340c6f),attachLongPressHandler(_0x4aaa93,_0x59e337),_0xaa4d74[_0x1acc47(0x1d9)](_0x4aaa93),updateDayStats(_0x185a80);}_0x300e1a[_0x1acc47(0x2dd)](_0x2e4c58,_0x300e1a[_0x1acc47(0x2b8)]),_0x1aee3f['insertBefore'](_0xaa4d74,_0x1aee3f['querySelector'](_0x1acc47(0x268)));}function validateAppointment(_0x535b33,_0x3069a6,_0x290fdc,_0x34f0dc,_0x387a64){const _0x471691=a2_0x4766c2,[_0x184925,_0x37d675]=_0x3069a6['split'](':')['map'](Number),[_0x448f29,_0x10886c]=_0x290fdc['split'](':')[_0x471691(0x1aa)](Number),_0x23e730=_0x184925*0x3c+_0x37d675,_0x1f0926=_0x448f29*0x3c+_0x10886c,_0x2fae8f=String(_0x387a64);let _0x2e6a36=![],_0x575a3c='';for(let _0x575c97 of sessions){if(_0x575c97[_0x471691(0x1df)]!==_0x535b33)continue;if(_0x575c97[_0x471691(0x25c)]===_0x471691(0x1ad))continue;if(_0x34f0dc&&String(_0x575c97['id'])===String(_0x34f0dc))continue;const [_0x1defa3,_0x3ecfb5]=_0x575c97['start']['split'](':')[_0x471691(0x1aa)](Number),[_0x58b911,_0xcb6dae]=_0x575c97['end'][_0x471691(0x273)](':')[_0x471691(0x1aa)](Number),_0x55dbf7=_0x1defa3*0x3c+_0x3ecfb5,_0x6c8fe3=_0x58b911*0x3c+_0xcb6dae;if(Math[_0x471691(0x1b9)](_0x23e730,_0x55dbf7)<Math[_0x471691(0x1e9)](_0x1f0926,_0x6c8fe3)){if(_0x575c97['clientId']&&String(_0x575c97[_0x471691(0x231)])===_0x2fae8f)return{'valid':![],'msg':_0x471691(0x24f)+_0x575c97['client']+_0x471691(0x241)};_0x2e6a36=!![],_0x575a3c=_0x575c97[_0x471691(0x1bc)];}}if(_0x2e6a36)return{'valid':!![],'warning':_0x471691(0x1ce)+_0x575a3c};return{'valid':!![]};}function updateDateDisplay(){const _0x73bef2=a2_0x4766c2,_0x20283e=document[_0x73bef2(0x1dc)](_0x73bef2(0x260))[_0x73bef2(0x1d8)],_0x2fe2e7=document[_0x73bef2(0x1dc)]('sheetDateSubtitle');if(!_0x20283e){_0x2fe2e7[_0x73bef2(0x1bf)]='';return;}const [_0x5b0178,_0x2ba3b3,_0x2e86e9]=_0x20283e['split']('-')[_0x73bef2(0x1aa)](Number),_0x1780ec=new Date(_0x5b0178,_0x2ba3b3-0x1,_0x2e86e9),_0x5900ff={'weekday':_0x73bef2(0x27a),'day':'numeric','month':_0x73bef2(0x27a),'year':_0x73bef2(0x1d0)};let _0x57d3a9=_0x1780ec[_0x73bef2(0x2d9)](_0x73bef2(0x318),_0x5900ff);_0x57d3a9=_0x57d3a9[_0x73bef2(0x1b7)](0x0)['toUpperCase']()+_0x57d3a9[_0x73bef2(0x207)](0x1),_0x2fe2e7[_0x73bef2(0x1bf)]=_0x57d3a9;}function autoSetEndTime(){const _0x1a3517=a2_0x4766c2,_0x42e872=document[_0x1a3517(0x1dc)](_0x1a3517(0x1e1))['value'];if(!_0x42e872)return;const [_0x1ae32b,_0x50ebcc]=_0x42e872[_0x1a3517(0x273)](':')[_0x1a3517(0x1aa)](Number);let _0x171f9f=_0x1ae32b+0x1;if(_0x171f9f>0x17)_0x171f9f=0x0;const _0x3a9422=String(_0x171f9f)[_0x1a3517(0x310)](0x2,'0')+':'+String(_0x50ebcc)[_0x1a3517(0x310)](0x2,'0');document['getElementById']('inpEnd')['value']=_0x3a9422;}function populateClientSelect(){const _0x51622d=a2_0x4766c2,_0x5f5758=document[_0x51622d(0x1dc)](_0x51622d(0x308));_0x5f5758[_0x51622d(0x2b3)]='';if(clients[_0x51622d(0x2eb)]===0x0){const _0x1a598d=document[_0x51622d(0x2cc)](_0x51622d(0x2e5));_0x1a598d[_0x51622d(0x2e9)]='Нет\x20клиентов',_0x5f5758[_0x51622d(0x1d9)](_0x1a598d);return;}clients[_0x51622d(0x21a)](_0x2993c7=>{const _0x149a99=_0x51622d,_0xfe8122=document[_0x149a99(0x2cc)]('option');_0xfe8122[_0x149a99(0x1d8)]=_0x2993c7[_0x149a99(0x25b)],_0xfe8122['textContent']=_0x2993c7[_0x149a99(0x25b)],_0x5f5758['appendChild'](_0xfe8122);});}function openActionSheet(_0x4e40f4){const _0x3ab880=a2_0x4766c2,_0x1700f6=document[_0x3ab880(0x1dc)](_0x3ab880(0x1fd)),_0x3ff05c=document[_0x3ab880(0x1dc)](_0x3ab880(0x1a9)),_0x59e80e=document[_0x3ab880(0x1dc)](_0x3ab880(0x2d3)),_0x484054=document[_0x3ab880(0x1dc)]('asBtnOne'),_0x108dc2=document[_0x3ab880(0x1dc)](_0x3ab880(0x27f));_0x3ff05c[_0x3ab880(0x262)][_0x3ab880(0x28c)](_0x3ab880(0x1c3)),_0x1700f6[_0x3ab880(0x262)]['add'](_0x3ab880(0x30f));if(_0x4e40f4===_0x3ab880(0x2e6))_0x59e80e['textContent']='Изменение\x20серии',_0x484054['textContent']=_0x3ab880(0x280),_0x484054[_0x3ab880(0x312)]=()=>{closeActionSheet(),updateSeriesBatch('single',tempSessionData);},_0x108dc2['textContent']=_0x3ab880(0x212),_0x108dc2['onclick']=()=>{const _0x3d8960=_0x3ab880;closeActionSheet(),updateSeriesBatch(_0x3d8960(0x30e),tempSessionData);};else _0x4e40f4==='delete'&&(_0x59e80e[_0x3ab880(0x1bf)]=_0x3ab880(0x230),_0x484054[_0x3ab880(0x1bf)]=_0x3ab880(0x280),_0x484054[_0x3ab880(0x279)]=_0x3ab880(0x2c0),_0x484054['onclick']=()=>{const _0x37d58a=_0x3ab880;closeActionSheet(),commitDelete('single',sessions[_0x37d58a(0x242)](_0x40b717=>_0x40b717['id']===editingId));},_0x108dc2[_0x3ab880(0x1bf)]=_0x3ab880(0x212),_0x108dc2[_0x3ab880(0x279)]=_0x3ab880(0x26d),_0x108dc2[_0x3ab880(0x312)]=()=>{const _0x1166c3=_0x3ab880;closeActionSheet(),commitDelete('series',sessions[_0x1166c3(0x242)](_0x220d98=>_0x220d98['id']===editingId));});}function closeActionSheet(){const _0x2c19fb=a2_0x4766c2;document['getElementById']('actionSheet')[_0x2c19fb(0x262)][_0x2c19fb(0x2a0)](_0x2c19fb(0x30f)),document[_0x2c19fb(0x1dc)]('actionSheetOverlay')[_0x2c19fb(0x262)][_0x2c19fb(0x2a0)](_0x2c19fb(0x1c3));}function openSettings(){const _0x487861=a2_0x4766c2;openSheet(_0x487861(0x2ab));}function saveCoachSettings(){const _0x40994d=a2_0x4766c2,_0x1aaf63=document[_0x40994d(0x1dc)](_0x40994d(0x2a8))['value'];localStorage[_0x40994d(0x246)](_0x40994d(0x2be),_0x1aaf63),console[_0x40994d(0x235)](_0x40994d(0x23c),_0x1aaf63),DataManager[_0x40994d(0x21f)](_0x40994d(0x1c6),{'settings':{'cancel_window':_0x1aaf63}})[_0x40994d(0x291)](_0x4f10fd=>{const _0x249709=_0x40994d;console[_0x249709(0x290)]('Save\x20settings\x20error:',_0x4f10fd),showToast(_0x249709(0x278),![]);});}function loadCoachSettings(){const _0x478a87=a2_0x4766c2,_0x491e9e=localStorage[_0x478a87(0x20f)](_0x478a87(0x2be));_0x491e9e&&(document['getElementById'](_0x478a87(0x2a8))['value']=_0x491e9e);}function openRangesSheet(){const _0x14563c=a2_0x4766c2;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x14563c(0x208));}function addRange(){const _0x5725eb=a2_0x4766c2,_0x3eb78d=document[_0x5725eb(0x1dc)]('rangeStartDate')[_0x5725eb(0x1d8)],_0xd74586=document['getElementById'](_0x5725eb(0x2c3))[_0x5725eb(0x1d8)],_0x5622c9=document[_0x5725eb(0x1dc)](_0x5725eb(0x2de))['value'],_0x309d61=document['getElementById']('rangeEndTime')['value'];if(!_0x3eb78d||!_0xd74586||!_0x5622c9||!_0x309d61)return alert('Заполните\x20все\x20поля');const _0x578648=_0x3eb78d+'T'+_0xd74586,_0x4a3d60=_0x5622c9+'T'+_0x309d61;if(_0x578648>=_0x4a3d60)return alert(_0x5725eb(0x27d));specialRanges[_0x5725eb(0x302)]({'start':_0x578648,'end':_0x4a3d60}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x5725eb(0x267)](),DataManager[_0x5725eb(0x21f)](_0x5725eb(0x1c6),{'settings':{'ranges':specialRanges}});}function deleteRange(_0x4c2199){const _0x1c2d6e=a2_0x4766c2;specialRanges[_0x1c2d6e(0x27b)](_0x4c2199,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x1c2d6e(0x267)](),DataManager[_0x1c2d6e(0x21f)]('save_settings',{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x1a2c5d=a2_0x4766c2;document[_0x1a2c5d(0x1dc)]('rangeStartDate')[_0x1a2c5d(0x1d8)]='',document['getElementById'](_0x1a2c5d(0x2c3))[_0x1a2c5d(0x1d8)]=_0x1a2c5d(0x204),document['getElementById'](_0x1a2c5d(0x2de))[_0x1a2c5d(0x1d8)]='',document['getElementById'](_0x1a2c5d(0x26a))[_0x1a2c5d(0x1d8)]=_0x1a2c5d(0x2cf);}function renderRangesList(){const _0x2c6cb8=a2_0x4766c2,_0x4b74f7=document[_0x2c6cb8(0x1dc)]('rangesList');_0x4b74f7[_0x2c6cb8(0x2b3)]='';if(!specialRanges['length']){_0x4b74f7['innerHTML']=_0x2c6cb8(0x224);return;}specialRanges[_0x2c6cb8(0x21a)]((_0x12b0ea,_0xf11d11)=>{const _0x336fd3=_0x2c6cb8,_0x2de8c7=document[_0x336fd3(0x2cc)]('div');_0x2de8c7[_0x336fd3(0x279)]=_0x336fd3(0x2ff);const _0xf44895=_0x751e9d=>{const _0xbba349=_0x336fd3,_0x1a375b=new Date(_0x751e9d);return _0x1a375b[_0xbba349(0x2a2)]()+'.'+String(_0x1a375b[_0xbba349(0x1db)]()+0x1)[_0xbba349(0x310)](0x2,'0')+'\x20'+String(_0x1a375b['getHours']())[_0xbba349(0x310)](0x2,'0')+':'+String(_0x1a375b[_0xbba349(0x295)]())[_0xbba349(0x310)](0x2,'0');};_0x2de8c7['innerHTML']=_0x336fd3(0x202)+_0xf44895(_0x12b0ea['start'])+_0x336fd3(0x294)+_0xf44895(_0x12b0ea[_0x336fd3(0x30a)])+_0x336fd3(0x1b5)+_0xf11d11+_0x336fd3(0x25e),_0x4b74f7['appendChild'](_0x2de8c7);});}function scrollToToday(){const _0x17b0ef=a2_0x4766c2,_0x51a6d2=getLocalDateStr(new Date()),_0x4d1b49=document['getElementById'](_0x17b0ef(0x215)+_0x51a6d2),_0xe63cd=document[_0x17b0ef(0x1dc)](_0x17b0ef(0x2f0));if(_0x4d1b49&&_0xe63cd){const _0x542368=_0xe63cd[_0x17b0ef(0x1af)],_0x5d20c8=_0x4d1b49[_0x17b0ef(0x2d8)],_0x3a9298=_0x4d1b49[_0x17b0ef(0x1fc)];_0xe63cd[_0x17b0ef(0x1c5)]=_0x5d20c8-_0x542368/0x2+_0x3a9298/0x2,_0xe63cd[_0x17b0ef(0x23a)]=0x9*GRID_H;}}function onScroll(){const _0x4e826d=a2_0x4766c2,_0x27e66e=document[_0x4e826d(0x1dc)](_0x4e826d(0x2f0)),_0x3b633c=document[_0x4e826d(0x28d)](_0x4e826d(0x247));for(let _0x3aa4be of _0x3b633c)if(_0x3aa4be[_0x4e826d(0x2d8)]>=_0x27e66e[_0x4e826d(0x1c5)]){const _0x340100=new Date(_0x3aa4be['getAttribute'](_0x4e826d(0x266)));document[_0x4e826d(0x1dc)]('headerMonth')[_0x4e826d(0x1bf)]=_0x340100['toLocaleString']('ru',{'month':_0x4e826d(0x27a)})[_0x4e826d(0x1cf)]()+'\x20'+_0x340100[_0x4e826d(0x2d7)]();break;}}function showToast(_0x31ff3e,_0x5704f8=![]){const _0x3eca7f=a2_0x4766c2,_0x4764aa=document[_0x3eca7f(0x1dc)]('toast');_0x4764aa[_0x3eca7f(0x279)]=_0x3eca7f(0x26f)+(_0x5704f8?_0x3eca7f(0x2fd):''),document['getElementById']('toastTitle')[_0x3eca7f(0x1bf)]=_0x5704f8?_0x3eca7f(0x30c):_0x3eca7f(0x2df),document['getElementById'](_0x3eca7f(0x2fb))['textContent']=_0x31ff3e,_0x4764aa[_0x3eca7f(0x262)][_0x3eca7f(0x28c)](_0x3eca7f(0x30b)),setTimeout(()=>{const _0x468b91=_0x3eca7f;_0x4764aa[_0x468b91(0x262)][_0x468b91(0x2a0)](_0x468b91(0x30b));},0xbb8);}function openDayOptions(_0x4f957d,_0x2abbf7){const _0x34dacf=a2_0x4766c2;selectedDayForOptions=_0x4f957d,document[_0x34dacf(0x1dc)](_0x34dacf(0x233))[_0x34dacf(0x1bf)]=_0x2abbf7,openSheet('dayOptionsSheet');}function toggleDayOff(){const _0x3aefa5=a2_0x4766c2;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]='off',reRenderBlocks(),closeAllSheets(),DataManager['saveLocally'](),DataManager[_0x3aefa5(0x21f)](_0x3aefa5(0x1c6),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x44cc80=a2_0x4766c2;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x44cc80(0x267)](),DataManager[_0x44cc80(0x21f)](_0x44cc80(0x1c6),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x2b2bc1){const _0x1dd284=a2_0x4766c2;document[_0x1dd284(0x1dc)](_0x1dd284(0x238))[_0x1dd284(0x262)][_0x1dd284(0x28c)](_0x1dd284(0x1c3)),document[_0x1dd284(0x1dc)](_0x2b2bc1)[_0x1dd284(0x262)][_0x1dd284(0x28c)](_0x1dd284(0x30f));}function closeAllSheets(){const _0x6b27d0=a2_0x4766c2;document['getElementById'](_0x6b27d0(0x238))[_0x6b27d0(0x262)][_0x6b27d0(0x2a0)]('active'),document[_0x6b27d0(0x28d)](_0x6b27d0(0x2ba))['forEach'](_0x364784=>_0x364784[_0x6b27d0(0x262)][_0x6b27d0(0x2a0)](_0x6b27d0(0x30f)));}function openPatternEditor(){const _0x5df63b=a2_0x4766c2;closeAllSheets(),document[_0x5df63b(0x1dc)](_0x5df63b(0x2ce))[_0x5df63b(0x262)][_0x5df63b(0x28c)](_0x5df63b(0x30f)),renderPatternEditor();}function closePatternEditor(){const _0x5bb545=a2_0x4766c2;document[_0x5bb545(0x1dc)](_0x5bb545(0x2ce))[_0x5bb545(0x262)][_0x5bb545(0x2a0)]('open');}function savePattern(){const _0x1bc5b3=a2_0x4766c2;document[_0x1bc5b3(0x1dc)](_0x1bc5b3(0x2ce))[_0x1bc5b3(0x262)][_0x1bc5b3(0x2a0)]('open'),reRenderBlocks(),DataManager['saveLocally'](),DataManager[_0x1bc5b3(0x21f)](_0x1bc5b3(0x1c6),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x49799e=a2_0x4766c2,_0x59147a=document[_0x49799e(0x1dc)]('peGrid');_0x59147a[_0x49799e(0x2b3)]='';const _0x194011=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x1b8fee=document[_0x49799e(0x2cc)](_0x49799e(0x28e));_0x1b8fee['className']=_0x49799e(0x2bd),_0x59147a[_0x49799e(0x1d9)](_0x1b8fee),_0x194011[_0x49799e(0x21a)]((_0x566502,_0x33cf34)=>{const _0x2bbe20=_0x49799e,_0xecfbfe=document[_0x2bbe20(0x2cc)]('div');_0xecfbfe['className']=_0x2bbe20(0x301),_0xecfbfe[_0x2bbe20(0x2b3)]=_0x566502+_0x2bbe20(0x1eb),_0xecfbfe[_0x2bbe20(0x312)]=()=>toggleColPattern(_0x33cf34),_0x59147a['appendChild'](_0xecfbfe);});for(let _0x5e37bc=0x0;_0x5e37bc<0x18;_0x5e37bc++){const _0x8ae374=document['createElement'](_0x49799e(0x28e));_0x8ae374['className']=_0x49799e(0x2d1),_0x8ae374['innerHTML']=_0x49799e(0x22a)+String(_0x5e37bc)[_0x49799e(0x310)](0x2,'0')+_0x49799e(0x287),_0x8ae374[_0x49799e(0x312)]=()=>toggleRowPattern(_0x5e37bc),_0x59147a[_0x49799e(0x1d9)](_0x8ae374);for(let _0x49cfc6=0x0;_0x49cfc6<0x7;_0x49cfc6++){const _0x15a9ae=document[_0x49799e(0x2cc)](_0x49799e(0x28e)),_0x16660f=(availabilityPattern[_0x49cfc6]||[])[_0x49799e(0x271)](_0x5e37bc),_0x40aede=!_0x16660f;_0x15a9ae['className']=_0x49799e(0x289)+(_0x40aede?'active':''),_0x15a9ae[_0x49799e(0x312)]=()=>toggleSinglePattern(_0x49cfc6,_0x5e37bc),_0x59147a[_0x49799e(0x1d9)](_0x15a9ae);}}}function toggleSinglePattern(_0xebadbf,_0x38eee0){const _0x1c21b0=a2_0x4766c2;if(!availabilityPattern[_0xebadbf])availabilityPattern[_0xebadbf]=[];const _0x1f7296=availabilityPattern[_0xebadbf],_0x326f4e=_0x1f7296[_0x1c21b0(0x1c0)](_0x38eee0);_0x326f4e===-0x1?_0x1f7296['push'](_0x38eee0):_0x1f7296[_0x1c21b0(0x27b)](_0x326f4e,0x1),renderPatternEditor();}function toggleColPattern(_0x5410b6){const _0x39559c=a2_0x4766c2;if(!availabilityPattern[_0x5410b6])availabilityPattern[_0x5410b6]=[];const _0x3708fa=availabilityPattern[_0x5410b6];_0x3708fa['length']===0x0?availabilityPattern[_0x5410b6]=Array[_0x39559c(0x1fe)]({'length':0x18},(_0x2b9b04,_0x2787ca)=>_0x2787ca):availabilityPattern[_0x5410b6]=[],renderPatternEditor();}function toggleRowPattern(_0x4639c1){const _0x2b1299=a2_0x4766c2;let _0x43d02c=!![];for(let _0x38c8b4=0x0;_0x38c8b4<0x7;_0x38c8b4++){if((availabilityPattern[_0x38c8b4]||[])['includes'](_0x4639c1)){_0x43d02c=![];break;}}for(let _0x199d3d=0x0;_0x199d3d<0x7;_0x199d3d++){if(!availabilityPattern[_0x199d3d])availabilityPattern[_0x199d3d]=[];const _0x39b0ec=availabilityPattern[_0x199d3d][_0x2b1299(0x1c0)](_0x4639c1);if(_0x43d02c){if(_0x39b0ec===-0x1)availabilityPattern[_0x199d3d][_0x2b1299(0x302)](_0x4639c1);}else{if(_0x39b0ec!==-0x1)availabilityPattern[_0x199d3d][_0x2b1299(0x27b)](_0x39b0ec,0x1);}}renderPatternEditor();}function a2_0x504e(_0x4d841f,_0x2cae9a){_0x4d841f=_0x4d841f-0x1a6;const _0x418d2c=a2_0x387d();let _0x19936e=_0x418d2c[_0x4d841f];return _0x19936e;}function renderPCol(_0x4b7cde,_0x33dad1){const _0x41a003=a2_0x4766c2;_0x4b7cde[_0x41a003(0x2b3)]='';const _0x874fd2=Math[_0x41a003(0x303)](_0x4b7cde[_0x41a003(0x2d8)]);(availabilityPattern[_0x33dad1]||[])[_0x41a003(0x21a)](_0x3af3a4=>{const _0x52f724=_0x41a003,_0xdd2414=document[_0x52f724(0x2cc)](_0x52f724(0x28e));_0xdd2414['className']='blocked-slot\x20stripe-bg';const _0x388c8a=_0x3af3a4*GRID_H;_0xdd2414[_0x52f724(0x214)][_0x52f724(0x30d)]=_0x388c8a+'px',_0xdd2414['style'][_0x52f724(0x211)]='-'+_0x874fd2+_0x52f724(0x292)+_0x388c8a+'px',_0xdd2414[_0x52f724(0x312)]=_0x46768c=>{_0x46768c['stopPropagation'](),toggleSinglePattern(_0x33dad1,_0x3af3a4);},_0x4b7cde[_0x52f724(0x1d9)](_0xdd2414);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0xb1022a=a2_0x4766c2,_0xbfbb18=new Date(),_0x5b0f05=document[_0xb1022a(0x1dc)](_0xb1022a(0x2ea)),_0xe53e05=document[_0xb1022a(0x1dc)](_0xb1022a(0x1cb)),_0xad3f7e=(_0xbfbb18[_0xb1022a(0x1e3)]()*0x3c+_0xbfbb18['getMinutes']())/0x3c*GRID_H;_0x5b0f05[_0xb1022a(0x214)][_0xb1022a(0x30d)]=_0xad3f7e+'px',_0x5b0f05[_0xb1022a(0x214)][_0xb1022a(0x2e1)]=_0xb1022a(0x2a9),_0xe53e05[_0xb1022a(0x1bf)]=String(_0xbfbb18[_0xb1022a(0x1e3)]())['padStart'](0x2,'0')+':'+String(_0xbfbb18[_0xb1022a(0x295)]())[_0xb1022a(0x310)](0x2,'0'),_0xe53e05[_0xb1022a(0x214)][_0xb1022a(0x2e1)]='block',_0xe53e05[_0xb1022a(0x214)][_0xb1022a(0x30d)]=_0xad3f7e+'px';}document[a2_0x4766c2(0x299)](a2_0x4766c2(0x28a),init);function openDayOptions(_0x21fab4){const _0x10c471=a2_0x4766c2;selectedDayForOptions=_0x21fab4;const _0xc04806=new Date(_0x21fab4),_0x2474fd={'weekday':_0x10c471(0x27a),'day':_0x10c471(0x1d0),'month':_0x10c471(0x27a),'year':_0x10c471(0x1d0)},_0xfc898f=_0xc04806[_0x10c471(0x2d9)](_0x10c471(0x318),_0x2474fd);document[_0x10c471(0x1dc)]('doDateHeader')['textContent']=_0xfc898f[_0x10c471(0x1b7)](0x0)[_0x10c471(0x1cf)]()+_0xfc898f[_0x10c471(0x207)](0x1);let _0xcc1629=_0xc04806['getDay']()-0x1;if(_0xcc1629===-0x1)_0xcc1629=0x6;const _0x1e2141=availabilityPattern[_0xcc1629]||[],_0xb8e720=0x18-_0x1e2141[_0x10c471(0x2eb)],_0x145460=_0xb8e720*0x3c,_0x459274=sessions[_0x10c471(0x228)](_0x1758f1=>_0x1758f1['dateStr']===_0x21fab4&&_0x1758f1[_0x10c471(0x25c)]!==_0x10c471(0x1ad));let _0x3fc3d3=_0x459274[_0x10c471(0x1aa)](_0x3a6dec=>{const _0x4a0699=_0x10c471,[_0x535d7f,_0x3dc99d]=_0x3a6dec['start'][_0x4a0699(0x273)](':')[_0x4a0699(0x1aa)](Number),[_0x5ef285,_0x3100c1]=_0x3a6dec[_0x4a0699(0x30a)][_0x4a0699(0x273)](':')[_0x4a0699(0x1aa)](Number);return[_0x535d7f*0x3c+_0x3dc99d,_0x5ef285*0x3c+_0x3100c1];});_0x3fc3d3[_0x10c471(0x24c)]((_0x59fa99,_0x1c59b7)=>_0x59fa99[0x0]-_0x1c59b7[0x0]);let _0x4a3aed=[];if(_0x3fc3d3[_0x10c471(0x2eb)]>0x0){let _0x44c23a=_0x3fc3d3[0x0];for(let _0x49f505=0x1;_0x49f505<_0x3fc3d3[_0x10c471(0x2eb)];_0x49f505++){_0x3fc3d3[_0x49f505][0x0]<_0x44c23a[0x1]?_0x44c23a[0x1]=Math[_0x10c471(0x1b9)](_0x44c23a[0x1],_0x3fc3d3[_0x49f505][0x1]):(_0x4a3aed[_0x10c471(0x302)](_0x44c23a),_0x44c23a=_0x3fc3d3[_0x49f505]);}_0x4a3aed[_0x10c471(0x302)](_0x44c23a);}let _0x1e9312=0x0;_0x4a3aed[_0x10c471(0x21a)](_0x1c14c6=>_0x1e9312+=_0x1c14c6[0x1]-_0x1c14c6[0x0]),document['getElementById'](_0x10c471(0x1fb))[_0x10c471(0x1bf)]=formatMinsToHrs(_0x145460),document[_0x10c471(0x1dc)]('doBusyHours')['textContent']=formatMinsToHrs(_0x1e9312);const _0x375ffd=_0x145460>0x0?Math[_0x10c471(0x303)](_0x1e9312/_0x145460*0x64):0x0,_0x41f003=document[_0x10c471(0x1dc)](_0x10c471(0x29d));_0x41f003[_0x10c471(0x1bf)]=_0x375ffd+'%';const _0x23c255=document[_0x10c471(0x1dc)](_0x10c471(0x258));if(_0x375ffd>0x64)_0x41f003[_0x10c471(0x214)]['color']=_0x10c471(0x2ae),_0x23c255[_0x10c471(0x214)]['borderColor']=_0x10c471(0x23d);else _0x375ffd>0x50?(_0x41f003[_0x10c471(0x214)][_0x10c471(0x25f)]=_0x10c471(0x234),_0x23c255[_0x10c471(0x214)]['borderColor']=_0x10c471(0x2b9)):(_0x41f003['style'][_0x10c471(0x25f)]='var(--acc-green)',_0x23c255[_0x10c471(0x214)][_0x10c471(0x1a7)]=_0x10c471(0x206));const _0x5901f3=document[_0x10c471(0x1dc)](_0x10c471(0x2bc));_0x5901f3[_0x10c471(0x2b3)]='';_0x459274[_0x10c471(0x2eb)]===0x0?_0x5901f3['innerHTML']='<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>':(_0x459274[_0x10c471(0x24c)]((_0x3a837f,_0x137879)=>_0x3a837f[_0x10c471(0x2f2)]['localeCompare'](_0x137879[_0x10c471(0x2f2)])),_0x459274[_0x10c471(0x21a)](_0x58e1b2=>{const _0x2e2388=_0x10c471,_0x5e553d=clients['find'](_0x1adb48=>_0x1adb48[_0x2e2388(0x25b)]===_0x58e1b2['client']),_0x1afbdd=_0x5e553d?_0x5e553d[_0x2e2388(0x25f)]:_0x2e2388(0x2bb),_0x55e9bc=_0x58e1b2[_0x2e2388(0x25c)]==='completed',_0x5e15a6=_0x55e9bc?_0x2e2388(0x311):'',_0x4f0ccb=document[_0x2e2388(0x2cc)](_0x2e2388(0x28e));_0x4f0ccb[_0x2e2388(0x279)]=_0x2e2388(0x1b3),_0x4f0ccb[_0x2e2388(0x214)][_0x2e2388(0x256)]=_0x1afbdd,_0x4f0ccb[_0x2e2388(0x2b3)]=_0x2e2388(0x26e)+_0x58e1b2['start']+_0x2e2388(0x1b0)+_0x58e1b2[_0x2e2388(0x30a)]+_0x2e2388(0x21b)+_0x58e1b2[_0x2e2388(0x1bc)]+_0x2e2388(0x22d)+_0x5e15a6+_0x2e2388(0x2ef),_0x5901f3[_0x2e2388(0x1d9)](_0x4f0ccb);}));const _0x4fed7e=document['getElementById'](_0x10c471(0x23f)),_0x2606d8=dateExceptions[_0x21fab4]===_0x10c471(0x288);_0x2606d8?(_0x4fed7e['textContent']=_0x10c471(0x1e7),_0x4fed7e['className']='btn-primary\x20btn-secondary',_0x4fed7e['style'][_0x10c471(0x25f)]='var(--acc-green)',_0x4fed7e['style']['background']='rgba(48,\x20209,\x2088,\x200.15)'):(_0x4fed7e['textContent']=_0x10c471(0x31b),_0x4fed7e[_0x10c471(0x279)]=_0x10c471(0x1da),_0x4fed7e[_0x10c471(0x214)]['color']=_0x10c471(0x2ae),_0x4fed7e[_0x10c471(0x214)][_0x10c471(0x284)]=_0x10c471(0x22c)),openSheet('dayOptionsSheet');}let currentAnPeriod='week';function openAnalytics(){const _0x33e186=a2_0x4766c2,_0x471a55=document['querySelector'](_0x33e186(0x1e4));setAnalyticsPeriod(_0x33e186(0x2da),_0x471a55),closeAllSheets(),openSheet(_0x33e186(0x1b8));}function setAnalyticsPeriod(_0x266b53,_0x252ea6){const _0x532f9f=a2_0x4766c2;currentAnPeriod=_0x266b53,document[_0x532f9f(0x28d)]('.period-switch\x20.p-btn')[_0x532f9f(0x21a)](_0x1dfb4a=>_0x1dfb4a[_0x532f9f(0x262)]['remove']('active'));if(_0x252ea6)_0x252ea6[_0x532f9f(0x262)][_0x532f9f(0x28c)](_0x532f9f(0x1c3));const _0x2d24c6=document[_0x532f9f(0x1dc)](_0x532f9f(0x31c));_0x2d24c6[_0x532f9f(0x214)][_0x532f9f(0x2e1)]=_0x266b53===_0x532f9f(0x1b4)?_0x532f9f(0x282):'none';const _0x3c9c28=new Date();let _0x267c6d=new Date(),_0x3e5074=new Date();if(_0x266b53===_0x532f9f(0x2da))_0x267c6d=getStartOfWeek(_0x3c9c28),_0x3e5074=new Date(_0x267c6d),_0x3e5074[_0x532f9f(0x277)](_0x3e5074[_0x532f9f(0x2a2)]()+0x6);else{if(_0x266b53===_0x532f9f(0x21d))_0x267c6d=new Date(_0x3c9c28[_0x532f9f(0x2d7)](),_0x3c9c28['getMonth'](),0x1),_0x3e5074=new Date(_0x3c9c28[_0x532f9f(0x2d7)](),_0x3c9c28['getMonth']()+0x1,0x0);else{!document['getElementById'](_0x532f9f(0x20d))[_0x532f9f(0x1d8)]&&(document[_0x532f9f(0x1dc)](_0x532f9f(0x20d))[_0x532f9f(0x1d8)]=getLocalDateStr(_0x3c9c28),document['getElementById'](_0x532f9f(0x254))[_0x532f9f(0x1d8)]=getLocalDateStr(_0x3c9c28));refreshAnalytics();return;}}document[_0x532f9f(0x1dc)](_0x532f9f(0x20d))['value']=getLocalDateStr(_0x267c6d),document[_0x532f9f(0x1dc)](_0x532f9f(0x254))['value']=getLocalDateStr(_0x3e5074),refreshAnalytics();}function refreshAnalytics(){const _0x247215=a2_0x4766c2,_0x45d428=document['getElementById']('anStart')[_0x247215(0x1d8)],_0x175703=document[_0x247215(0x1dc)](_0x247215(0x254))[_0x247215(0x1d8)];if(!_0x45d428||!_0x175703)return;const _0x8b3897=sessions[_0x247215(0x228)](_0x3eb26b=>_0x3eb26b[_0x247215(0x1df)]>=_0x45d428&&_0x3eb26b[_0x247215(0x1df)]<=_0x175703&&_0x3eb26b[_0x247215(0x25c)]!==_0x247215(0x1ad)),_0x3bd204=_0x8b3897[_0x247215(0x2eb)],_0x508142=_0x8b3897[_0x247215(0x228)](_0x1acfeb=>_0x1acfeb[_0x247215(0x25c)]==='completed')['length'],_0x3876e5=_0x3bd204>0x0?Math[_0x247215(0x303)](_0x508142/_0x3bd204*0x64):0x0;document[_0x247215(0x1dc)](_0x247215(0x1d5))['textContent']=_0x3876e5+'%',document[_0x247215(0x1dc)]('anTotalStats')[_0x247215(0x1bf)]=_0x508142+'\x20из\x20'+_0x3bd204+'\x20выполнено';const _0x369ba1=document[_0x247215(0x1dc)]('anDonutCircle'),_0xaa0f14=0x2*Math['PI']*0x23,_0x333014=_0xaa0f14-_0x3876e5/0x64*_0xaa0f14;_0x369ba1[_0x247215(0x214)][_0x247215(0x22b)]=_0x333014;const _0x159dea={};_0x8b3897[_0x247215(0x21a)](_0x50aa39=>{const _0x1f3644=_0x247215;if(!_0x159dea[_0x50aa39[_0x1f3644(0x1bc)]]){const _0x3367bc=clients['find'](_0x55c6b3=>_0x55c6b3['name']===_0x50aa39[_0x1f3644(0x1bc)]);_0x159dea[_0x50aa39[_0x1f3644(0x1bc)]]={'total':0x0,'done':0x0,'color':_0x3367bc?_0x3367bc[_0x1f3644(0x25f)]:_0x1f3644(0x2bb)};}_0x159dea[_0x50aa39[_0x1f3644(0x1bc)]][_0x1f3644(0x1f6)]++;if(_0x50aa39['status']===_0x1f3644(0x226))_0x159dea[_0x50aa39[_0x1f3644(0x1bc)]][_0x1f3644(0x274)]++;});const _0x2b9b61=document['getElementById'](_0x247215(0x1b6));_0x2b9b61['innerHTML']='';const _0x5d5af6=Object['entries'](_0x159dea)[_0x247215(0x24c)]((_0x4fb2a9,_0x46593e)=>_0x46593e[0x1]['total']-_0x4fb2a9[0x1][_0x247215(0x1f6)]);if(_0x5d5af6[_0x247215(0x2eb)]===0x0){_0x2b9b61[_0x247215(0x2b3)]='<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>';return;}_0x5d5af6[_0x247215(0x21a)](([_0x4fa7c9,_0x44303d])=>{const _0x478242=_0x247215,_0x425654=Math[_0x478242(0x303)](_0x44303d[_0x478242(0x274)]/_0x44303d[_0x478242(0x1f6)]*0x64),_0x58166e=document[_0x478242(0x2cc)](_0x478242(0x28e));_0x58166e['className']='client-stat-card',_0x58166e['style']['borderLeftColor']=_0x44303d[_0x478242(0x25f)],_0x58166e[_0x478242(0x2b3)]=_0x478242(0x319)+_0x4fa7c9+_0x478242(0x1e6)+_0x44303d[_0x478242(0x274)]+_0x478242(0x285)+_0x44303d[_0x478242(0x1f6)]+_0x478242(0x297)+_0x425654+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2b9b61[_0x478242(0x1d9)](_0x58166e);});}function a2_0x387d(){const _0x19d5b9=['update','#gridColumns\x20.day-column','sessionSheet','.dch-stats-fill','ч,\x20Занято:\x20','create','total','Жду\x20вас\x20в\x20зале!\x20💪','touches','findIndex','touchmove','doWorkHours','offsetWidth','actionSheet','from','day-column\x20','2999079POHFKj','<div\x20class=\x22ev-title\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','Вернуть\x20в\x20запланированные','00:00','setHours','rgba(255,255,255,0.05)','slice','rangesSheet','deleted','apply','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','recurringOptionContainer','anStart','inpRecurring','getItem','left','backgroundPosition','Эту\x20и\x20будущие','valid','style','header-',':\x20Client\x20already\x20booked','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','sid','createDocumentFragment','forEach','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','BackButton','month','single','fetchFromServer','location','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','[Notify]\x20Error:\x20sessionData\x20is\x20null','null','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','substr','completed','Это\x20часть\x20серии\x20тренировок','filter','Ошибка\x20сохранения\x20в\x20облако','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','strokeDashoffset','rgba(255,\x2069,\x2058,\x200.15)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','3925370aHJjcu','Удаление','clientId','</div>','dayOptionsTitle','var(--acc-orange)','log','.day-off-overlay','мин,\x20Загрузка:\x20','overlay','setHeaderColor','scrollTop','exceptions','[Settings]\x20Cancel\x20window\x20set\x20to:','rgba(255,\x2069,\x2058,\x200.3)','none','btnDayToggle','Telegram',')\x20уже\x20записан\x20на\x20это\x20время!','find','ranges','inpNote','btn-status-toggle','setItem','.day-col-header','expand','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','calendar','seriesCountContainer','sort','905sWBRdp','toString','Этот\x20клиент\x20(','Запись\x20на\x20<b>','btnStatusToggle','disableVerticalSwipes','getDay','anEnd','Batch\x20Sync\x20OK','borderLeftColor','json','statLoadCard',':00</span>','11cmVeSZ','name','status','daysHeaderTrack',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','color','inpDate','touchstart','classList','keys','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','setBackgroundColor','data-date','saveLocally','.day-column','borderRadius','rangeEndTime','setMonth','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','as-button\x20danger\x20bold','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','toast-notification\x20','%\x20+\x202px)','includes','width','split','done','height','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','setDate','Ошибка\x20сохранения\x20настроек','className','long','splice','2yOwLwR','Ошибка\x20дат','Local\x20Load\x20Error','asBtnSeries','Только\x20эту','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','flex','day-off-overlay\x20stripe-bg','background','</span>\x20/\x20','v9.0-BATCH-CALENDAR',':00','off','pe-cell\x20','DOMContentLoaded','.pib-text','add','querySelectorAll','div','getText','error','catch','px\x20-','.event-card','\x20—\x20','getMinutes','</div><div\x20class=\x22dch-num\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','init_load','addEventListener','<span>','clients','scroll','doLoadPercent','complete','seriesId','remove','100%','getDate','ready','<b>📅\x20Дата:</b>\x20','rgba(','Новая\x20запись','uc_sessions_v9','settingCancelWindow','block','btn-status-toggle\x20undo-mode','settingsSheet','router.html','sheetTitle','var(--acc-red)','Создана\x20серия:\x20','T00:00:00','blocked-range-part\x20stripe-bg','10px\x2010px\x200\x200','innerHTML','mousedown','getBoundingClientRect','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','firstChild','rgba(255,\x20159,\x2010,\x200.3)','.sheet','#fff','doEventsList','pe-corner','uc_settings_cancel_window','batch_sync','as-button\x20danger','patternInfoBox','gridColumns','rangeStartTime','time-label','settings','#050505','pattern','floor','search','Синхронизировано','vibrate','createElement','stringify','patternEditor','23:59','[Notify]\x20Server\x20Response:','pe-time-label','T23:59:59','asTitle','cancel_window','then','target','getFullYear','offsetLeft','toLocaleDateString','week','data-day-idx','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','insertBefore','rangeEndDate','Инфо','Оффлайн\x20режим','display','cancel','closest','px\x200px','option','save','Error\x20setting\x20back\x20button:','constructor','text','globalTimeLine','length','<div\x20class=\x22dch-day\x22>','checked','href','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','matrixViewport','...','start','627200cysHyA','Все\x20даты\x20заняты\x20этим\x20клиентом!','[API\x20','[Notify]\x20Detected\x20Client\x20ID:','inpEnd','startsWith','guest','syncLoad','toastMessage','backgroundColor','success','rgba(100,100,100,0.5)','range-item','10px','pe-col-header','push','round','delete','WebApp','calc(','today','inpClient','getAttribute','end','show','Успешно','top','series','open','padStart','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','onclick','Редактировать','</b>\x0a\x0a','Local\x20Save\x20Error','all','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','ru-RU','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','colIndex','Сделать\x20выходным','anCustomDates','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','parse','Тренировка\x20завершена','note','borderColor','inpSeriesCount','actionSheetOverlay','map','111FISfBd','setAttribute','cancelled','getTime','clientWidth','\x20-\x20','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','[Sync]\x20Loading\x20','de-item','custom','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','analyticsList','charAt','analyticsSheet','max','querySelector','btnDelete','client','18894hkhTfT','#0a84ff','textContent','indexOf','2278212FZXrKy','mergeServerData','active','timeColumn','scrollLeft','save_settings','initDataUnsafe','send','now','planned','timeLineBadge','user','warning','Групповая:\x20также\x20записан\x20','toUpperCase','numeric','(((.+)+)+)+$','Error\x20setting\x20color:','[Notify]\x20Error:\x20Text\x20generation\x20failed','\x20(пропущено:\x20','anPercent','16868hEIIha','touchend','value','appendChild','btn-primary\x20btn-danger','getMonth','getElementById','8rAgogt','undefined','dateStr','warn','inpStart','msg','getHours','.period-switch\x20.p-btn','mini','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','Сделать\x20рабочим\x20днем','392053oqYAXT','min','blocked-slot\x20stripe-bg','\x20<span\x20class=\x22arrow\x22>↓</span>','data','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','random','uc_settings_v9'];a2_0x387d=function(){return _0x19d5b9;};return a2_0x387d();}function formatMinsToHrs(_0x3941cf){const _0x48ecd0=a2_0x4766c2;if(_0x3941cf===0x0)return'0';const _0x30c961=Math[_0x48ecd0(0x2c8)](_0x3941cf/0x3c),_0x43cad4=_0x3941cf%0x3c;if(_0x43cad4===0x0)return _0x30c961+'ч';return _0x30c961+'ч\x20'+_0x43cad4+'м';}