const a2_0x559b49=a2_0x3ade;(function(_0x21373f,_0x3b25e6){const _0x203f6e=a2_0x3ade,_0x2c99e=_0x21373f();while(!![]){try{const _0x12a6b4=-parseInt(_0x203f6e(0x2f8))/0x1*(-parseInt(_0x203f6e(0x2f3))/0x2)+-parseInt(_0x203f6e(0x249))/0x3*(parseInt(_0x203f6e(0x20c))/0x4)+parseInt(_0x203f6e(0x26f))/0x5*(parseInt(_0x203f6e(0x2dd))/0x6)+parseInt(_0x203f6e(0x234))/0x7*(-parseInt(_0x203f6e(0x304))/0x8)+parseInt(_0x203f6e(0x2e4))/0x9+-parseInt(_0x203f6e(0x1e0))/0xa*(parseInt(_0x203f6e(0x22d))/0xb)+-parseInt(_0x203f6e(0x23b))/0xc;if(_0x12a6b4===_0x3b25e6)break;else _0x2c99e['push'](_0x2c99e['shift']());}catch(_0x82c669){_0x2c99e['push'](_0x2c99e['shift']());}}}(a2_0x48f1,0x2a554),function initTMA(){const _0x1719e7=a2_0x3ade;try{const _0xff200f=window[_0x1719e7(0x2cd)]?.[_0x1719e7(0x2ca)];if(!_0xff200f)return;_0xff200f[_0x1719e7(0x25f)](),_0xff200f[_0x1719e7(0x2fa)]();try{_0xff200f[_0x1719e7(0x1a6)](_0x1719e7(0x1bb)),_0xff200f[_0x1719e7(0x1ef)]&&_0xff200f[_0x1719e7(0x1ef)]('#050505');}catch(_0x523477){console[_0x1719e7(0x1d1)](_0x1719e7(0x2d4),_0x523477);}try{_0xff200f[_0x1719e7(0x1d8)]&&(_0xff200f['BackButton'][_0x1719e7(0x1f6)](),_0xff200f[_0x1719e7(0x1d8)][_0x1719e7(0x250)](),_0xff200f[_0x1719e7(0x1d8)][_0x1719e7(0x303)](function(){const _0x232fac=_0x1719e7;window['location'][_0x232fac(0x247)]='router.html';}));}catch(_0x7f9e65){console[_0x1719e7(0x1d1)](_0x1719e7(0x275),_0x7f9e65);}try{if(_0xff200f[_0x1719e7(0x29c)])_0xff200f[_0x1719e7(0x29c)]();}catch(_0x14cfaf){}}catch(_0x23fe9c){console[_0x1719e7(0x262)](_0x1719e7(0x2ae),_0x23fe9c);}}());function isAdmin(){const _0x18e37b=a2_0x3ade;try{const _0x39bb93=Number(window['Telegram']?.['WebApp']?.[_0x18e37b(0x26b)]?.['user']?.['id']);return _0x39bb93===0xbaf7174;}catch(_0x59adef){return![];}}const APP_VERSION='v9.0-BATCH-CALENDAR',API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS='uc_clients_v9',KEY_SESSIONS=a2_0x559b49(0x1f2),KEY_SETTINGS=a2_0x559b49(0x26e);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x28e3e3=a2_0x559b49;return window[_0x28e3e3(0x2cd)]?.[_0x28e3e3(0x2ca)]?.['initDataUnsafe']?.[_0x28e3e3(0x205)]?.['id']||_0x28e3e3(0x24f);},'saveLocally'(){const _0x3f8a51=a2_0x559b49;try{localStorage['setItem'](KEY_CLIENTS,JSON[_0x3f8a51(0x22b)](clients)),localStorage['setItem'](KEY_SESSIONS,JSON[_0x3f8a51(0x22b)](sessions)),localStorage[_0x3f8a51(0x26c)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x386bda){console['error'](_0x3f8a51(0x20a),_0x386bda);}},'loadLocal'(){const _0x37fb6b=a2_0x559b49;try{const _0x35f10c=localStorage[_0x37fb6b(0x2d2)](KEY_CLIENTS);if(_0x35f10c)clients=JSON[_0x37fb6b(0x307)](_0x35f10c);const _0x1edde7=localStorage['getItem'](KEY_SESSIONS);if(_0x1edde7)sessions=JSON[_0x37fb6b(0x307)](_0x1edde7);const _0x555050=localStorage[_0x37fb6b(0x2d2)](KEY_SETTINGS);if(_0x555050){const _0x43afe9=JSON[_0x37fb6b(0x307)](_0x555050);if(_0x43afe9[_0x37fb6b(0x2de)])availabilityPattern=_0x43afe9[_0x37fb6b(0x2de)];if(_0x43afe9[_0x37fb6b(0x27d)])dateExceptions=_0x43afe9[_0x37fb6b(0x27d)];if(_0x43afe9[_0x37fb6b(0x2a3)])specialRanges=_0x43afe9[_0x37fb6b(0x2a3)];}else{for(let _0x1a8a3b=0x0;_0x1a8a3b<0x7;_0x1a8a3b++)availabilityPattern[_0x1a8a3b]=Array[_0x37fb6b(0x28c)]({'length':0xc},(_0x5c620a,_0x4830e2)=>_0x4830e2+0x9);}}catch(_0x33ef54){console[_0x37fb6b(0x262)](_0x37fb6b(0x2ee),_0x33ef54);}},async 'fetchFromServer'(_0xd5e680,_0x319e84={}){const _0x5aebf7=a2_0x559b49,_0x19730d=window[_0x5aebf7(0x2cd)]?.['WebApp'],_0x535b2d={'action':_0xd5e680,'init_data':_0x19730d?.[_0x5aebf7(0x1ca)]||'',..._0x319e84};try{const _0xf206d4=await fetch(API_URL,{'method':'POST','headers':{'Content-Type':_0x5aebf7(0x1a0)},'body':JSON[_0x5aebf7(0x22b)](_0x535b2d)}),_0x414653=await _0xf206d4['json']();if(!_0x414653['ok'])throw new Error(_0x414653['error']||'Server\x20Error');return _0x414653[_0x5aebf7(0x2e6)];}catch(_0x7daba2){console[_0x5aebf7(0x262)]('[API\x20'+_0xd5e680+_0x5aebf7(0x213),_0x7daba2);throw _0x7daba2;}},async 'syncLoad'(){const _0x3dfd56=a2_0x559b49,_0x18a31e=new Date(),_0x3a36b3=_0x18a31e[_0x3dfd56(0x1b3)]()+'-'+String(_0x18a31e[_0x3dfd56(0x1b8)]()+0x1)[_0x3dfd56(0x23e)](0x2,'0'),_0x28a027=new Date(_0x18a31e);_0x28a027['setMonth'](_0x18a31e[_0x3dfd56(0x1b8)]()+0x1);const _0x17578f=_0x28a027[_0x3dfd56(0x1b3)]()+'-'+String(_0x28a027[_0x3dfd56(0x1b8)]()+0x1)[_0x3dfd56(0x23e)](0x2,'0'),_0x350a2b=Date[_0x3dfd56(0x197)]();console['log'](_0x3dfd56(0x1e4)+_0x3a36b3+',\x20'+_0x17578f+'...');try{const [_0xb6fc7a,_0x46a1ed]=await Promise[_0x3dfd56(0x2a4)]([this[_0x3dfd56(0x2e2)](_0x3dfd56(0x2a1),{'month_str':_0x3a36b3}),this[_0x3dfd56(0x2e2)](_0x3dfd56(0x2a1),{'month_str':_0x17578f})]);if(lastUserActionTime>_0x350a2b)return console[_0x3dfd56(0x1b6)]('[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response'),![];return this[_0x3dfd56(0x1cd)](_0xb6fc7a,_0x3a36b3),this[_0x3dfd56(0x1cd)](_0x46a1ed,_0x17578f),this[_0x3dfd56(0x294)](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x4396cb){console[_0x3dfd56(0x262)](_0x4396cb);throw _0x4396cb;}},'mergeServerData'(_0x5316b9,_0x4299c3){const _0x5d2b8d=a2_0x559b49;if(!_0x5316b9)return;_0x5316b9['clients']&&Array['isArray'](_0x5316b9[_0x5d2b8d(0x1d7)])&&(clients=_0x5316b9[_0x5d2b8d(0x1d7)]);if(_0x5316b9['settings']){if(_0x5316b9[_0x5d2b8d(0x287)][_0x5d2b8d(0x2de)])availabilityPattern=_0x5316b9[_0x5d2b8d(0x287)][_0x5d2b8d(0x2de)];if(_0x5316b9[_0x5d2b8d(0x287)][_0x5d2b8d(0x27d)])dateExceptions=_0x5316b9[_0x5d2b8d(0x287)][_0x5d2b8d(0x27d)];if(_0x5316b9[_0x5d2b8d(0x287)][_0x5d2b8d(0x2a3)])specialRanges=_0x5316b9[_0x5d2b8d(0x287)][_0x5d2b8d(0x2a3)];if(_0x5316b9['settings'][_0x5d2b8d(0x28b)]){localStorage[_0x5d2b8d(0x26c)](_0x5d2b8d(0x274),_0x5316b9['settings'][_0x5d2b8d(0x28b)]);const _0x2cc0e0=document[_0x5d2b8d(0x27b)]('settingCancelWindow');if(_0x2cc0e0)_0x2cc0e0['value']=_0x5316b9[_0x5d2b8d(0x287)]['cancel_window'];}}_0x5316b9[_0x5d2b8d(0x2f1)]&&(sessions=sessions[_0x5d2b8d(0x22f)](_0x401850=>!_0x401850[_0x5d2b8d(0x2fb)][_0x5d2b8d(0x296)](_0x4299c3)),Object[_0x5d2b8d(0x221)](_0x5316b9[_0x5d2b8d(0x2f1)])[_0x5d2b8d(0x251)](_0x4cfca8=>{const _0x469bc8=_0x5d2b8d,_0x5ece2c=_0x5316b9[_0x469bc8(0x2f1)][_0x4cfca8];_0x5ece2c[_0x469bc8(0x251)](_0x44176e=>{const _0x461124=_0x469bc8,_0x31f4f3=clients[_0x461124(0x23f)](_0x42b824=>String(_0x42b824['id'])===String(_0x44176e['c']));sessions[_0x461124(0x204)]({'id':_0x44176e['i'],'clientId':_0x44176e['c'],'client':_0x31f4f3?_0x31f4f3['name']:_0x461124(0x1b4),'dateStr':_0x4299c3+'-'+_0x4cfca8[_0x461124(0x23e)](0x2,'0'),'start':_0x44176e['s'],'end':_0x44176e['e'],'status':_0x44176e['st']||'planned','note':_0x44176e['n']||'','seriesId':_0x44176e[_0x461124(0x1d0)]||null});});}));},async 'syncBatch'(_0xfd9ae3){const _0x436b0b=a2_0x559b49,_0x51ba11=[...new Set(_0xfd9ae3)],_0x363b36=_0x51ba11[_0x436b0b(0x24b)](_0xfb037e=>{const _0x39d317=_0x436b0b,_0x4f76eb=sessions[_0x39d317(0x22f)](_0x18e1cb=>_0x18e1cb['dateStr']===_0xfb037e&&_0x18e1cb[_0x39d317(0x280)]!=='deleted'),_0x49ec3f=_0x4f76eb[_0x39d317(0x24b)](_0x2b010a=>({'i':_0x2b010a['id'],'c':_0x2b010a[_0x39d317(0x2b8)],'s':_0x2b010a[_0x39d317(0x1a7)],'e':_0x2b010a[_0x39d317(0x2f7)],'st':_0x2b010a[_0x39d317(0x280)],'n':_0x2b010a['note'],'sid':_0x2b010a[_0x39d317(0x2e9)]}));return{'date':_0xfb037e,'day_data':_0x49ec3f};});if(_0x363b36[_0x436b0b(0x228)]===0x0)return;console[_0x436b0b(0x1d1)](_0x436b0b(0x25e)+_0x363b36[_0x436b0b(0x228)]+_0x436b0b(0x2bd)),await this[_0x436b0b(0x2e2)]('batch_sync',{'changes':_0x363b36});}};async function init(){const _0x1dc837=a2_0x559b49;DataManager[_0x1dc837(0x2ba)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById']('matrixViewport')['addEventListener'](_0x1dc837(0x27f),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x1dc837(0x238)]()[_0x1dc837(0x29b)](()=>{const _0x4d12c8=_0x1dc837;showToast(_0x4d12c8(0x200),!![]);})['catch'](_0x21ffee=>{const _0x393e19=_0x1dc837;showToast(_0x393e19(0x2ed),![]);});}function generateId(){const _0x87d02=a2_0x559b49;return Date[_0x87d02(0x197)]()[_0x87d02(0x198)](0x24)+Math['random']()[_0x87d02(0x198)](0x24)[_0x87d02(0x21f)](0x2,0x5);}function toggleSeriesInput(){const _0x3c8359=a2_0x559b49,_0x2fe960=document[_0x3c8359(0x27b)](_0x3c8359(0x1cf))[_0x3c8359(0x272)],_0x262a7d=document[_0x3c8359(0x27b)](_0x3c8359(0x1ad));_0x262a7d[_0x3c8359(0x2b6)][_0x3c8359(0x2d5)]=_0x2fe960?_0x3c8359(0x286):_0x3c8359(0x2ff);const _0x2668be=document[_0x3c8359(0x27b)](_0x3c8359(0x2b2));_0x2668be['style'][_0x3c8359(0x1a3)]=_0x2fe960?'10px\x2010px\x200\x200':_0x3c8359(0x24a);}function openAddSession(_0x4b1b07){const _0x45de5a=a2_0x559b49;editingId=null,populateClientSelect(),document[_0x45de5a(0x27b)]('sheetTitle')['textContent']=_0x45de5a(0x2ef),document[_0x45de5a(0x27b)](_0x45de5a(0x298))['style'][_0x45de5a(0x2d5)]=_0x45de5a(0x2ff),document[_0x45de5a(0x27b)](_0x45de5a(0x208))[_0x45de5a(0x2b6)][_0x45de5a(0x2d5)]=_0x45de5a(0x2ff);const _0x4f4c80=document['getElementById'](_0x45de5a(0x2b2)),_0x4adae8=document[_0x45de5a(0x27b)]('seriesCountContainer');_0x4f4c80[_0x45de5a(0x2b6)][_0x45de5a(0x2d5)]=_0x45de5a(0x263),_0x4f4c80[_0x45de5a(0x2b6)][_0x45de5a(0x1a3)]=_0x45de5a(0x24a),document['getElementById'](_0x45de5a(0x1cf))['checked']=![],document['getElementById'](_0x45de5a(0x209))[_0x45de5a(0x279)]=0x4,_0x4adae8['style'][_0x45de5a(0x2d5)]=_0x45de5a(0x2ff),document['getElementById'](_0x45de5a(0x212))[_0x45de5a(0x279)]=getLocalDateStr(_0x4b1b07),updateDateDisplay();const _0x37da76=_0x4b1b07[_0x45de5a(0x25c)]();document[_0x45de5a(0x27b)]('inpStart')[_0x45de5a(0x279)]=String(_0x37da76)[_0x45de5a(0x23e)](0x2,'0')+_0x45de5a(0x217),document['getElementById'](_0x45de5a(0x20d))['value']=String(_0x37da76+0x1)[_0x45de5a(0x23e)](0x2,'0')+_0x45de5a(0x217),openSheet(_0x45de5a(0x1dd));}function openEdit(_0x2040aa){const _0x73a63=a2_0x559b49;editingId=_0x2040aa['id'],populateClientSelect(),document['getElementById'](_0x73a63(0x19f))['textContent']=_0x73a63(0x1bc),document[_0x73a63(0x27b)](_0x73a63(0x298))[_0x73a63(0x2b6)]['display']=_0x73a63(0x286);const _0xd6d247=document[_0x73a63(0x27b)](_0x73a63(0x208));_0xd6d247[_0x73a63(0x2b6)][_0x73a63(0x2d5)]=_0x73a63(0x263);_0x2040aa[_0x73a63(0x280)]===_0x73a63(0x21c)?(_0xd6d247[_0x73a63(0x1f1)]='btn-status-toggle\x20undo-mode',_0xd6d247[_0x73a63(0x257)]=_0x73a63(0x1be)):(_0xd6d247['className']=_0x73a63(0x1f4),_0xd6d247[_0x73a63(0x257)]='<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20–ó–∞–≤–µ—Ä—à–∏—Ç—å\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É');const _0x977681=!!_0x2040aa[_0x73a63(0x2e9)];document['getElementById'](_0x73a63(0x2b2))[_0x73a63(0x2b6)][_0x73a63(0x2d5)]=_0x73a63(0x2ff),document[_0x73a63(0x27b)](_0x73a63(0x1ad))['style'][_0x73a63(0x2d5)]='none',_0x977681?(document[_0x73a63(0x27b)]('patternInfoBox')['style']['display']=_0x73a63(0x263),document[_0x73a63(0x27b)](_0x73a63(0x1f8))[_0x73a63(0x2a0)](_0x73a63(0x203))[_0x73a63(0x19a)]='–≠—Ç–æ\x20—á–∞—Å—Ç—å\x20—Å–µ—Ä–∏–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫'):document[_0x73a63(0x27b)](_0x73a63(0x1f8))['style'][_0x73a63(0x2d5)]=_0x73a63(0x2ff),document[_0x73a63(0x27b)](_0x73a63(0x1ed))[_0x73a63(0x279)]=_0x2040aa['client'],document[_0x73a63(0x27b)](_0x73a63(0x212))[_0x73a63(0x279)]=_0x2040aa[_0x73a63(0x2fb)],document['getElementById'](_0x73a63(0x1f7))['value']=_0x2040aa[_0x73a63(0x1a7)],document[_0x73a63(0x27b)](_0x73a63(0x20d))[_0x73a63(0x279)]=_0x2040aa[_0x73a63(0x2f7)],document[_0x73a63(0x27b)](_0x73a63(0x1a9))['value']=_0x2040aa[_0x73a63(0x2a9)]||'',updateDateDisplay(),openSheet('sessionSheet');}async function trySaveSession(){const _0x3bfba5=a2_0x559b49,_0x4cc96e=document['getElementById'](_0x3bfba5(0x1ed))[_0x3bfba5(0x279)],_0xac15d9=document['getElementById'](_0x3bfba5(0x212))[_0x3bfba5(0x279)],_0x257af9=document[_0x3bfba5(0x27b)](_0x3bfba5(0x1f7))[_0x3bfba5(0x279)],_0x577d4f=document[_0x3bfba5(0x27b)](_0x3bfba5(0x20d))['value'],_0x5a975f=document['getElementById']('inpNote')[_0x3bfba5(0x279)],_0x1c8f20=document[_0x3bfba5(0x27b)](_0x3bfba5(0x1cf))[_0x3bfba5(0x272)];let _0x2042da=0x4;if(_0x1c8f20){const _0x59f3f2=parseInt(document[_0x3bfba5(0x27b)](_0x3bfba5(0x209))['value']);if(!_0x59f3f2||_0x59f3f2<0x2){showToast(_0x3bfba5(0x28a),![]);return;}if(_0x59f3f2>0x64){showToast(_0x3bfba5(0x27a),![]);return;}_0x2042da=_0x59f3f2;}const _0x1bf284=clients[_0x3bfba5(0x23f)](_0x48fc16=>_0x48fc16[_0x3bfba5(0x306)]===_0x4cc96e);if(!_0x1bf284){showToast('–û—à–∏–±–∫–∞:\x20–í—ã–±–µ—Ä–∏—Ç–µ\x20–∫–ª–∏–µ–Ω—Ç–∞\x20–∏–∑\x20—Å–ø–∏—Å–∫–∞',![]);return;}const _0x2e55e4=validateAppointment(_0xac15d9,_0x257af9,_0x577d4f,editingId,_0x1bf284['id']);if(!_0x2e55e4['valid']){showToast(_0x2e55e4[_0x3bfba5(0x2a7)],![]);return;}_0x2e55e4[_0x3bfba5(0x1f9)]&&showToast(_0x2e55e4[_0x3bfba5(0x1f9)],![]);const _0x298d80={'client':_0x4cc96e,'clientId':_0x1bf284['id'],'start':_0x257af9,'end':_0x577d4f,'note':_0x5a975f,'status':_0x3bfba5(0x252)},_0x140d1e=editingId?sessions['find'](_0x31c0fd=>_0x31c0fd['id']===editingId):null;if(_0x140d1e&&_0x140d1e[_0x3bfba5(0x2e9)]){tempSessionData={..._0x298d80,'dateStr':_0xac15d9,'id':editingId,'seriesId':_0x140d1e[_0x3bfba5(0x2e9)]},openActionSheet(_0x3bfba5(0x1c7));return;}let _0x3bbfc2=null;if(!editingId)_0x3bbfc2=_0x3bfba5(0x196);else{if(_0x140d1e){if(String(_0x140d1e[_0x3bfba5(0x2b8)])!==String(_0x1bf284['id']))console[_0x3bfba5(0x1d1)]('[Notify]\x20Client\x20SWAP\x20detected'),NotificationManager[_0x3bfba5(0x1bf)](_0x3bfba5(0x264),_0x140d1e),_0x3bbfc2=_0x3bfba5(0x196);else(_0x140d1e[_0x3bfba5(0x1a7)]!==_0x257af9||_0x140d1e['end']!==_0x577d4f||_0x140d1e[_0x3bfba5(0x2fb)]!==_0xac15d9)&&(_0x3bbfc2=_0x3bfba5(0x267));}}if(!editingId&&_0x1c8f20){createBatchSeries(_0x298d80,_0xac15d9,_0x2042da),NotificationManager[_0x3bfba5(0x1bf)](_0x3bfba5(0x196),{..._0x298d80,'dateStr':_0xac15d9});return;}lastUserActionTime=Date['now']();const _0x2ef53c={..._0x298d80,'dateStr':_0xac15d9,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x2ef53c),_0x3bbfc2&&NotificationManager[_0x3bfba5(0x1bf)](_0x3bbfc2,_0x2ef53c);}function toggleSessionStatus(){const _0x3607dc=a2_0x559b49;lastUserActionTime=Date[_0x3607dc(0x197)]();const _0x46b786=sessions[_0x3607dc(0x23f)](_0x34d0c8=>_0x34d0c8['id']===editingId);if(!_0x46b786)return;const _0x206d4c=_0x46b786[_0x3607dc(0x280)]===_0x3607dc(0x21c)?_0x3607dc(0x252):'completed';_0x46b786[_0x3607dc(0x280)]=_0x206d4c,saveSingleSession(_0x46b786),_0x206d4c===_0x3607dc(0x21c)&&NotificationManager[_0x3607dc(0x1bf)](_0x3607dc(0x1b1),_0x46b786),showToast(_0x206d4c===_0x3607dc(0x21c)?_0x3607dc(0x2c2):_0x3607dc(0x2b0),!![]);}function validateAppointment(_0x5b0fbb,_0x3be7f1,_0xbd4a98,_0x160b7d,_0x52cd03){const _0x8b67a7=a2_0x559b49,[_0x730f13,_0x59f93e]=_0x3be7f1['split'](':')[_0x8b67a7(0x24b)](Number),[_0x37d0e7,_0x479e61]=_0xbd4a98[_0x8b67a7(0x291)](':')[_0x8b67a7(0x24b)](Number),_0x782e33=_0x730f13*0x3c+_0x59f93e,_0x29411b=_0x37d0e7*0x3c+_0x479e61,_0x278728=String(_0x52cd03);let _0x20fee1=![],_0xd31942='';for(let _0x11e59a of sessions){if(_0x11e59a['dateStr']!==_0x5b0fbb)continue;if(_0x11e59a[_0x8b67a7(0x280)]===_0x8b67a7(0x1e7))continue;if(_0x160b7d&&String(_0x11e59a['id'])===String(_0x160b7d))continue;const [_0x34f3af,_0x1f8cd3]=_0x11e59a[_0x8b67a7(0x1a7)][_0x8b67a7(0x291)](':')[_0x8b67a7(0x24b)](Number),[_0x3666ce,_0x1f693e]=_0x11e59a[_0x8b67a7(0x2f7)][_0x8b67a7(0x291)](':')[_0x8b67a7(0x24b)](Number),_0x5b0033=_0x34f3af*0x3c+_0x1f8cd3,_0x28c225=_0x3666ce*0x3c+_0x1f693e;if(Math['max'](_0x782e33,_0x5b0033)<Math[_0x8b67a7(0x1ae)](_0x29411b,_0x28c225)){if(_0x11e59a[_0x8b67a7(0x2b8)]&&String(_0x11e59a[_0x8b67a7(0x2b8)])===_0x278728)return{'valid':![],'msg':'–≠—Ç–æ—Ç\x20–∫–ª–∏–µ–Ω—Ç\x20('+_0x11e59a[_0x8b67a7(0x1b5)]+')\x20—É–∂–µ\x20–∑–∞–ø–∏—Å–∞–Ω\x20–Ω–∞\x20—ç—Ç–æ\x20–≤—Ä–µ–º—è!'};_0x20fee1=!![],_0xd31942=_0x11e59a[_0x8b67a7(0x1b5)];}}if(_0x20fee1)return{'valid':!![],'warning':_0x8b67a7(0x21a)+_0xd31942};return{'valid':!![]};}function saveSingleSession(_0x55de1f){const _0x1e319d=a2_0x559b49;if(editingId){const _0x537fa0=sessions[_0x1e319d(0x1d2)](_0x4f721e=>_0x4f721e['id']===editingId);if(_0x537fa0!==-0x1)sessions[_0x537fa0]=_0x55de1f;}else sessions[_0x1e319d(0x204)](_0x55de1f);afterSaveAction([_0x55de1f['dateStr']]);}function createBatchSeries(_0x5e6e83,_0x45d452,_0x250825){const _0x3cfb9b=a2_0x559b49,_0x55b51d=generateId(),_0x5acdcb=[],_0x5e6d92=[];let _0x738a66=0x0,_0x437197=new Date(_0x45d452);for(let _0x390264=0x0;_0x390264<_0x250825;_0x390264++){const _0x4c456a=getLocalDateStr(_0x437197),_0x42873c=validateAppointment(_0x4c456a,_0x5e6e83['start'],_0x5e6e83[_0x3cfb9b(0x2f7)],null,_0x5e6e83[_0x3cfb9b(0x2b8)]);if(!_0x42873c[_0x3cfb9b(0x2e0)])console[_0x3cfb9b(0x1d1)](_0x3cfb9b(0x28f)+_0x4c456a+_0x3cfb9b(0x268)),_0x738a66++;else{const _0x219738={..._0x5e6e83,'id':generateId(),'dateStr':_0x4c456a,'seriesId':_0x55b51d};_0x5e6d92[_0x3cfb9b(0x204)](_0x219738),_0x5acdcb['push'](_0x4c456a);}_0x437197['setDate'](_0x437197[_0x3cfb9b(0x2c9)]()+0x7);}if(_0x5e6d92[_0x3cfb9b(0x228)]===0x0){showToast(_0x3cfb9b(0x1fc),![]);return;}sessions[_0x3cfb9b(0x204)](..._0x5e6d92),lastUserActionTime=Date[_0x3cfb9b(0x197)]();let _0x34224f=_0x3cfb9b(0x244)+_0x5e6d92[_0x3cfb9b(0x228)];_0x738a66>0x0&&(_0x34224f+=_0x3cfb9b(0x305)+_0x738a66+')'),showToast(_0x34224f,!![]),afterSaveAction(_0x5acdcb);}function updateSeriesBatch(_0x5c54c2,_0x37a706){const _0x173b65=a2_0x559b49,_0x2cd107=[],_0x50e163=_0x37a706[_0x173b65(0x2e9)];if(_0x5c54c2===_0x173b65(0x248)){const _0x4b1072={..._0x37a706,'seriesId':null},_0x288b54=sessions[_0x173b65(0x1d2)](_0x4cb1d7=>_0x4cb1d7['id']===_0x37a706['id']);if(_0x288b54!==-0x1)sessions[_0x288b54]=_0x4b1072;_0x2cd107[_0x173b65(0x204)](_0x4b1072[_0x173b65(0x2fb)]);}else{if(_0x5c54c2===_0x173b65(0x2b7)){const _0x2998b8=_0x37a706['dateStr'];sessions['forEach']((_0x57eaad,_0x440c9f)=>{const _0x291822=_0x173b65;_0x57eaad[_0x291822(0x2e9)]===_0x50e163&&_0x57eaad[_0x291822(0x2fb)]>=_0x2998b8&&(sessions[_0x440c9f]={...sessions[_0x440c9f],'start':_0x37a706[_0x291822(0x1a7)],'end':_0x37a706[_0x291822(0x2f7)],'note':_0x37a706[_0x291822(0x2a9)],'client':_0x37a706['client'],'clientId':_0x37a706[_0x291822(0x2b8)]},_0x2cd107[_0x291822(0x204)](_0x57eaad[_0x291822(0x2fb)]));});}}afterSaveAction(_0x2cd107);}function tryDeleteSession(){const _0x5529d2=a2_0x559b49,_0x3f5615=sessions[_0x5529d2(0x23f)](_0x222371=>_0x222371['id']===editingId);if(!_0x3f5615)return;_0x3f5615[_0x5529d2(0x2e9)]?openActionSheet(_0x5529d2(0x1d9)):commitDelete(_0x5529d2(0x248),_0x3f5615);}function commitDelete(_0x33d3e0,_0x44e65d){const _0x567865=a2_0x559b49;lastUserActionTime=Date[_0x567865(0x197)](),NotificationManager[_0x567865(0x1bf)](_0x567865(0x264),_0x44e65d);const _0x750c9b=[];if(_0x33d3e0===_0x567865(0x248))sessions=sessions['filter'](_0x2a603f=>_0x2a603f['id']!==_0x44e65d['id']),_0x750c9b['push'](_0x44e65d[_0x567865(0x2fb)]);else{if(_0x33d3e0===_0x567865(0x2b7)){const _0x2a406f=_0x44e65d[_0x567865(0x2fb)],_0x18d978=_0x44e65d[_0x567865(0x2e9)];sessions[_0x567865(0x251)](_0x5c62ce=>{const _0x523357=_0x567865;_0x5c62ce[_0x523357(0x2e9)]===_0x18d978&&_0x5c62ce[_0x523357(0x2fb)]>=_0x2a406f&&_0x750c9b[_0x523357(0x204)](_0x5c62ce[_0x523357(0x2fb)]);}),sessions=sessions['filter'](_0x38a765=>!(_0x38a765[_0x567865(0x2e9)]===_0x18d978&&_0x38a765[_0x567865(0x2fb)]>=_0x2a406f));}}afterSaveAction(_0x750c9b);}function afterSaveAction(_0x5b8a1a){const _0xc4676f=a2_0x559b49;DataManager[_0xc4676f(0x294)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager['syncBatch'](_0x5b8a1a)[_0xc4676f(0x29b)](()=>console[_0xc4676f(0x1d1)](_0xc4676f(0x19d)))['catch'](_0x21cb27=>showToast(_0xc4676f(0x300),![]));}const NotificationManager={'formatDate'(_0x2e8195){const _0x5540af=a2_0x559b49,_0x3ca4af=new Date(_0x2e8195),_0x3c4044={'weekday':_0x5540af(0x302),'day':'numeric','month':_0x5540af(0x302)};let _0xe568b2=_0x3ca4af[_0x5540af(0x210)]('ru-RU',_0x3c4044);return _0xe568b2[_0x5540af(0x1f3)](0x0)['toUpperCase']()+_0xe568b2['slice'](0x1);},'getText'(_0x3918c9,_0x2b429d){const _0x2187af=a2_0x559b49,_0x19f7f9=this[_0x2187af(0x240)](_0x2b429d['dateStr']);switch(_0x3918c9){case _0x2187af(0x196):return _0x2187af(0x30b)+(_0x2187af(0x1fa)+_0x19f7f9+'\x0a')+(_0x2187af(0x258)+_0x2b429d[_0x2187af(0x1a7)]+'\x20‚Äî\x20'+_0x2b429d['end']+'\x0a\x0a')+'–ñ–¥—É\x20–≤–∞—Å\x20–≤\x20–∑–∞–ª–µ!\x20üí™';case _0x2187af(0x267):return _0x2187af(0x2d6)+_0x2187af(0x236)+(_0x2187af(0x224)+_0x2b429d[_0x2187af(0x1a7)]+_0x2187af(0x223)+_0x2b429d[_0x2187af(0x2f7)]+_0x2187af(0x25a))+(_0x2187af(0x1fa)+_0x19f7f9);case _0x2187af(0x264):return _0x2187af(0x270)+('–ó–∞–ø–∏—Å—å\x20–Ω–∞\x20<b>'+_0x19f7f9+'\x20('+_0x2b429d[_0x2187af(0x1a7)]+_0x2187af(0x2c5));case _0x2187af(0x1b1):return _0x2187af(0x1db)+_0x2187af(0x233)+'<i>–î–æ\x20–≤—Å—Ç—Ä–µ—á–∏\x20–Ω–∞\x20—Å–ª–µ–¥—É—é—â–µ–π\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ.</i>';default:return'';}},async 'send'(_0x182b00,_0x3392bf){const _0x262e5f=a2_0x559b49;console[_0x262e5f(0x1d1)](_0x262e5f(0x1ff),_0x182b00,_0x3392bf);if(!_0x3392bf){console[_0x262e5f(0x262)](_0x262e5f(0x201));return;}const _0x2c048f=String(_0x3392bf[_0x262e5f(0x2b8)]);console['log'](_0x262e5f(0x301),_0x2c048f);if(!_0x3392bf[_0x262e5f(0x2b8)]||_0x2c048f===_0x262e5f(0x1a8)||_0x2c048f===_0x262e5f(0x29f)){console[_0x262e5f(0x262)](_0x262e5f(0x2d0));if(_0x3392bf[_0x262e5f(0x1b5)]){const _0x10953f=clients[_0x262e5f(0x23f)](_0x1137b3=>_0x1137b3[_0x262e5f(0x306)]===_0x3392bf[_0x262e5f(0x1b5)]);if(_0x10953f)return console[_0x262e5f(0x1d1)](_0x262e5f(0x29a),_0x10953f['id']),this['send'](_0x182b00,{..._0x3392bf,'clientId':_0x10953f['id']});}return;}if(_0x2c048f[_0x262e5f(0x228)]<0x5){console['warn'](_0x262e5f(0x2ac),_0x2c048f);return;}const _0x394ae1=this[_0x262e5f(0x277)](_0x182b00,_0x3392bf);if(!_0x394ae1){console[_0x262e5f(0x262)](_0x262e5f(0x30a));return;}console['log'](_0x262e5f(0x24c)+_0x2c048f+_0x262e5f(0x2cb)),DataManager[_0x262e5f(0x2e2)](_0x262e5f(0x2e3),{'chatId':_0x2c048f,'text':_0x394ae1})['then'](_0x3ebaed=>console['log']('[Notify]\x20Server\x20Response:',_0x3ebaed))[_0x262e5f(0x1c3)](_0x589261=>console[_0x262e5f(0x262)](_0x262e5f(0x1cc),_0x589261));}};function getLocalDateStr(_0x4b48c9){const _0x2c246f=a2_0x559b49,_0x5f14b5=_0x4b48c9['getFullYear'](),_0x3c8104=String(_0x4b48c9[_0x2c246f(0x1b8)]()+0x1)[_0x2c246f(0x23e)](0x2,'0'),_0x1f3c56=String(_0x4b48c9[_0x2c246f(0x2c9)]())[_0x2c246f(0x23e)](0x2,'0');return _0x5f14b5+'-'+_0x3c8104+'-'+_0x1f3c56;}function getDateStr(_0x255ab5){const _0x40c3db=a2_0x559b49,_0x217049=new Date();return _0x217049[_0x40c3db(0x1df)](_0x217049[_0x40c3db(0x2c9)]()+_0x255ab5),getLocalDateStr(_0x217049);}function getStartOfWeek(_0x106b82){const _0x35a776=a2_0x559b49,_0x28f71a=(function(){let _0x4de685=!![];return function(_0x2082f6,_0x135d09){const _0xd2861e=_0x4de685?function(){if(_0x135d09){const _0x4066e7=_0x135d09['apply'](_0x2082f6,arguments);return _0x135d09=null,_0x4066e7;}}:function(){};return _0x4de685=![],_0xd2861e;};}()),_0x208f72=_0x28f71a(this,function(){const _0x3ea62c=a2_0x3ade;return _0x208f72[_0x3ea62c(0x198)]()[_0x3ea62c(0x1f5)](_0x3ea62c(0x1af))[_0x3ea62c(0x198)]()[_0x3ea62c(0x2c7)](_0x208f72)[_0x3ea62c(0x1f5)](_0x3ea62c(0x1af));});_0x208f72();const _0x1d964b=new Date(_0x106b82),_0x4ccead=_0x1d964b[_0x35a776(0x1a2)](),_0x2391af=_0x1d964b[_0x35a776(0x2c9)]()-_0x4ccead+(_0x4ccead===0x0?-0x6:0x1);return _0x1d964b[_0x35a776(0x1df)](_0x2391af),_0x1d964b[_0x35a776(0x2ce)](0x0,0x0,0x0,0x0),_0x1d964b;}function hexToRgba(_0x36677b,_0x53e775){const _0x4a2d06=a2_0x559b49;if(!_0x36677b)return _0x4a2d06(0x269);let _0x51a51a=0x0,_0x40d08c=0x0,_0x5b18dc=0x0;if(_0x36677b[_0x4a2d06(0x228)]===0x4)_0x51a51a='0x'+_0x36677b[0x1]+_0x36677b[0x1],_0x40d08c='0x'+_0x36677b[0x2]+_0x36677b[0x2],_0x5b18dc='0x'+_0x36677b[0x3]+_0x36677b[0x3];else _0x36677b['length']===0x7&&(_0x51a51a='0x'+_0x36677b[0x1]+_0x36677b[0x2],_0x40d08c='0x'+_0x36677b[0x3]+_0x36677b[0x4],_0x5b18dc='0x'+_0x36677b[0x5]+_0x36677b[0x6]);return'rgba('+ +_0x51a51a+',\x20'+ +_0x40d08c+',\x20'+ +_0x5b18dc+',\x20'+_0x53e775+')';}function renderTimeColumn(){const _0x200360=a2_0x559b49,_0x218e54=document[_0x200360(0x27b)](_0x200360(0x195)),_0x57026d=document[_0x200360(0x27b)](_0x200360(0x1ce));_0x218e54[_0x200360(0x257)]='',_0x218e54[_0x200360(0x2eb)](_0x57026d);for(let _0x144b9b=0x0;_0x144b9b<0x18;_0x144b9b++){const _0x4ebaf8=document[_0x200360(0x2fe)](_0x200360(0x227));_0x4ebaf8['className']=_0x200360(0x1c9);if(_0x144b9b>0x0)_0x4ebaf8[_0x200360(0x257)]=_0x200360(0x2c3)+String(_0x144b9b)[_0x200360(0x23e)](0x2,'0')+_0x200360(0x1a1);_0x218e54['appendChild'](_0x4ebaf8);}}function renderDayRange(_0x246909,_0x4c2a59){const _0x303424=a2_0x559b49,_0xcb0b74=document[_0x303424(0x27b)](_0x303424(0x2a2)),_0x2240cb=document[_0x303424(0x27b)](_0x303424(0x2b4)),_0x3ff7ef=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1702c9=new Date();_0x1702c9[_0x303424(0x2ce)](0x0,0x0,0x0,0x0);const _0x5db34a=getLocalDateStr(new Date());for(let _0x1649d7=_0x246909;_0x1649d7<=_0x4c2a59;_0x1649d7++){const _0x3ec8b2=new Date(_0x1702c9);_0x3ec8b2[_0x303424(0x1df)](_0x3ec8b2[_0x303424(0x2c9)]()+_0x1649d7);const _0x168e86=getLocalDateStr(_0x3ec8b2);let _0x3042a6=_0x3ec8b2[_0x303424(0x1a2)]()-0x1;if(_0x3042a6===-0x1)_0x3042a6=0x6;const _0x2f66ba=_0x168e86===_0x5db34a,_0x4a5b07=document[_0x303424(0x2fe)]('div');_0x4a5b07[_0x303424(0x1f1)]=_0x303424(0x2af)+(_0x2f66ba?_0x303424(0x2d3):''),_0x4a5b07['id']=_0x303424(0x20b)+_0x168e86,_0x4a5b07[_0x303424(0x1ab)](_0x303424(0x2e1),_0x168e86),_0x4a5b07[_0x303424(0x257)]='<div\x20class=\x22dch-day\x22>'+_0x3ff7ef[_0x3042a6]+'</div><div\x20class=\x22dch-num\x22>'+_0x3ec8b2['getDate']()+_0x303424(0x1e5)+_0x168e86+_0x303424(0x293),_0x4a5b07[_0x303424(0x2ea)]=()=>openDayOptions(_0x168e86,_0x3ff7ef[_0x3042a6]+'\x20'+_0x3ec8b2[_0x303424(0x2c9)]()),_0xcb0b74['appendChild'](_0x4a5b07);const _0x7d9b45=document[_0x303424(0x2fe)](_0x303424(0x227));_0x7d9b45[_0x303424(0x1f1)]=_0x303424(0x1b9)+(_0x2f66ba?_0x303424(0x2d3):''),_0x7d9b45[_0x303424(0x1ab)](_0x303424(0x2e1),_0x168e86),_0x7d9b45['setAttribute'](_0x303424(0x1c6),_0x3042a6),renderEventsForColumn(_0x7d9b45,_0x168e86,_0x3042a6),attachLongPressHandler(_0x7d9b45,_0x3ec8b2),_0x2240cb[_0x303424(0x2eb)](_0x7d9b45),updateDayStats(_0x168e86);}}function reRenderBlocks(){const _0x5b4117=a2_0x559b49;document[_0x5b4117(0x1b7)](_0x5b4117(0x1d4))[_0x5b4117(0x251)](_0x2186d8=>{const _0xa530e1=_0x5b4117;_0x2186d8[_0xa530e1(0x1b7)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0xa530e1(0x251)](_0x5587a4=>_0x5587a4[_0xa530e1(0x2dc)]());const _0x4eb96f=_0x2186d8[_0xa530e1(0x1da)](_0xa530e1(0x2e1)),_0x311c7a=parseInt(_0x2186d8[_0xa530e1(0x1da)](_0xa530e1(0x1c6))),_0x4dc14a=Math[_0xa530e1(0x2c8)](_0x2186d8['offsetLeft']);(availabilityPattern[_0x311c7a]||[])[_0xa530e1(0x251)](_0x5d62df=>{const _0x2a45c0=_0xa530e1,_0x14cfd4=document[_0x2a45c0(0x2fe)]('div');_0x14cfd4['className']=_0x2a45c0(0x1fb);const _0x5b91cc=_0x5d62df*GRID_H;_0x14cfd4[_0x2a45c0(0x2b6)][_0x2a45c0(0x229)]=_0x5b91cc+'px',_0x14cfd4['style']['backgroundPosition']='-'+_0x4dc14a+'px\x20-'+_0x5b91cc+'px',_0x2186d8['appendChild'](_0x14cfd4);});if(specialRanges&&specialRanges['length']>0x0){const _0x550c25=new Date(_0x4eb96f+'T00:00:00')[_0xa530e1(0x2b5)](),_0x219d54=new Date(_0x4eb96f+_0xa530e1(0x2f2))['getTime']();specialRanges[_0xa530e1(0x251)](_0x21d47e=>{const _0x4ac67c=_0xa530e1,_0x1c5f58=new Date(_0x21d47e[_0x4ac67c(0x1a7)])[_0x4ac67c(0x2b5)](),_0x3fa643=new Date(_0x21d47e['end'])[_0x4ac67c(0x2b5)](),_0x11c71b=Math[_0x4ac67c(0x2cc)](_0x550c25,_0x1c5f58),_0x35258d=Math[_0x4ac67c(0x1ae)](_0x219d54,_0x3fa643);if(_0x11c71b<_0x35258d){if(_0x11c71b<=_0x550c25&&_0x35258d>=_0x219d54-0xea60){if(!_0x2186d8[_0x4ac67c(0x2a0)](_0x4ac67c(0x1a4))){const _0x1829a7=document['createElement'](_0x4ac67c(0x227));_0x1829a7['className']=_0x4ac67c(0x26a),_0x1829a7[_0x4ac67c(0x2b6)][_0x4ac67c(0x2c4)]='-'+_0x4dc14a+_0x4ac67c(0x24d),_0x2186d8[_0x4ac67c(0x2eb)](_0x1829a7);}}else{const _0x34c626=(_0x11c71b-_0x550c25)/0x36ee80*GRID_H,_0x5a9c24=(_0x35258d-_0x11c71b)/0x36ee80*GRID_H,_0x5c7829=document[_0x4ac67c(0x2fe)](_0x4ac67c(0x227));_0x5c7829[_0x4ac67c(0x1f1)]=_0x4ac67c(0x266),_0x5c7829['style']['top']=_0x34c626+'px',_0x5c7829[_0x4ac67c(0x2b6)][_0x4ac67c(0x2ad)]=_0x5a9c24+'px',_0x5c7829['style'][_0x4ac67c(0x2c4)]='-'+_0x4dc14a+'px\x20-'+_0x34c626+'px',_0x2186d8['appendChild'](_0x5c7829);}}});}if(dateExceptions[_0x4eb96f]===_0xa530e1(0x1e8)){if(!_0x2186d8['querySelector'](_0xa530e1(0x1a4))){const _0x387341=document['createElement'](_0xa530e1(0x227));_0x387341[_0xa530e1(0x1f1)]=_0xa530e1(0x26a),_0x387341[_0xa530e1(0x2b6)][_0xa530e1(0x2c4)]='-'+_0x4dc14a+_0xa530e1(0x24d),_0x2186d8[_0xa530e1(0x2eb)](_0x387341);}}renderEventsForColumn(_0x2186d8,_0x4eb96f,_0x311c7a),updateDayStats(_0x4eb96f);});}function updateAllDayStats(){const _0x596b09=a2_0x559b49;document[_0x596b09(0x1b7)](_0x596b09(0x1e9))['forEach'](_0x5e3493=>{const _0x58a82e=_0x596b09;updateDayStats(_0x5e3493[_0x58a82e(0x1da)]('data-date'));});}function a2_0x3ade(_0x4064f0,_0x3ffc4c){_0x4064f0=_0x4064f0-0x194;const _0x45476f=a2_0x48f1();let _0xf053b7=_0x45476f[_0x4064f0];return _0xf053b7;}function updateDayStats(_0x18e6a8){const _0x3f569b=a2_0x559b49,_0x483eba=document[_0x3f569b(0x27b)](_0x3f569b(0x241)+_0x18e6a8);if(!_0x483eba)return;const _0xfa4a1c=new Date(_0x18e6a8);let _0x73451f=_0xfa4a1c[_0x3f569b(0x1a2)]()-0x1;if(_0x73451f===-0x1)_0x73451f=0x6;if(dateExceptions[_0x18e6a8]===_0x3f569b(0x1e8)){_0x483eba['style'][_0x3f569b(0x2d5)]='none';return;}const _0x34fd37=availabilityPattern[_0x73451f]||[],_0x518112=0x18-_0x34fd37['length'],_0x59bdee=_0x518112*0x3c,_0x2ffd9a=sessions[_0x3f569b(0x22f)](_0x3b07ad=>_0x3b07ad['dateStr']===_0x18e6a8&&_0x3b07ad[_0x3f569b(0x280)]!=='cancelled');if(_0x2ffd9a[_0x3f569b(0x228)]===0x0){_0x483eba[_0x3f569b(0x2b6)]['display']=_0x3f569b(0x2ff);return;}let _0x52d09e=_0x2ffd9a[_0x3f569b(0x24b)](_0x1348b6=>{const _0x267896=_0x3f569b,[_0x57ecbe,_0x575c7f]=_0x1348b6[_0x267896(0x1a7)]['split'](':')[_0x267896(0x24b)](Number),[_0x129156,_0x56c9a5]=_0x1348b6['end'][_0x267896(0x291)](':')[_0x267896(0x24b)](Number);return[_0x57ecbe*0x3c+_0x575c7f,_0x129156*0x3c+_0x56c9a5];});_0x52d09e[_0x3f569b(0x1a5)]((_0x2135bb,_0x3c5ac8)=>_0x2135bb[0x0]-_0x3c5ac8[0x0]);let _0x18ba79=[];if(_0x52d09e[_0x3f569b(0x228)]>0x0){let _0x3a33b9=_0x52d09e[0x0];for(let _0x5535d9=0x1;_0x5535d9<_0x52d09e[_0x3f569b(0x228)];_0x5535d9++){_0x52d09e[_0x5535d9][0x0]<_0x3a33b9[0x1]?_0x3a33b9[0x1]=Math[_0x3f569b(0x2cc)](_0x3a33b9[0x1],_0x52d09e[_0x5535d9][0x1]):(_0x18ba79[_0x3f569b(0x204)](_0x3a33b9),_0x3a33b9=_0x52d09e[_0x5535d9]);}_0x18ba79[_0x3f569b(0x204)](_0x3a33b9);}let _0x23477b=0x0;_0x18ba79['forEach'](_0x1b6dea=>_0x23477b+=_0x1b6dea[0x1]-_0x1b6dea[0x0]),_0x483eba[_0x3f569b(0x2b6)]['display']='flex';const _0x24abc2=_0x483eba[_0x3f569b(0x2a0)](_0x3f569b(0x246));if(_0x59bdee===0x0){_0x24abc2[_0x3f569b(0x2b6)]['width']=_0x3f569b(0x253),_0x24abc2[_0x3f569b(0x2b6)]['background']=_0x3f569b(0x290);return;}const _0x34fe5a=_0x23477b/_0x59bdee*0x64;console[_0x3f569b(0x1d1)]('['+_0x18e6a8+_0x3f569b(0x2db)+_0x518112+'—á,\x20–ó–∞–Ω—è—Ç–æ:\x20'+_0x23477b+_0x3f569b(0x1b0)+_0x34fe5a['toFixed'](0x1)+'%'),_0x34fe5a>0x64?(_0x24abc2['style']['width']='100%',_0x24abc2[_0x3f569b(0x2b6)][_0x3f569b(0x1fe)]='var(--acc-red)'):(_0x24abc2[_0x3f569b(0x2b6)][_0x3f569b(0x261)]=_0x34fe5a+'%',_0x24abc2['style']['background']=_0x3f569b(0x2ab));}function renderEventsForColumn(_0x10c4d1,_0x405a01,_0xdf5c83){const _0x333520=a2_0x559b49,_0x166058=sessions[_0x333520(0x22f)](_0x5e9029=>_0x5e9029[_0x333520(0x2fb)]===_0x405a01),_0x4e0fad=_0x166058['map'](_0x3b12f5=>{const _0x4ff820=_0x333520,[_0xf6ea8c,_0x33cb7f]=_0x3b12f5[_0x4ff820(0x1a7)][_0x4ff820(0x291)](':')[_0x4ff820(0x24b)](Number),[_0x32eaff,_0x221d03]=_0x3b12f5[_0x4ff820(0x2f7)][_0x4ff820(0x291)](':')[_0x4ff820(0x24b)](Number);return{'data':_0x3b12f5,'start':_0xf6ea8c*0x3c+_0x33cb7f,'end':_0x32eaff*0x3c+_0x221d03,'colIndex':0x0};});_0x4e0fad[_0x333520(0x1a5)]((_0x25b11c,_0x215be)=>{const _0x12943f=_0x333520;if(_0x25b11c[_0x12943f(0x1a7)]!==_0x215be[_0x12943f(0x1a7)])return _0x25b11c[_0x12943f(0x1a7)]-_0x215be['start'];return _0x215be[_0x12943f(0x2f7)]-_0x215be[_0x12943f(0x1a7)]-(_0x25b11c[_0x12943f(0x2f7)]-_0x25b11c[_0x12943f(0x1a7)]);});const _0x14f719=[];_0x4e0fad[_0x333520(0x251)](_0x43dd84=>{const _0x370294=_0x333520;let _0x5bce3c=![];for(let _0x5f35fc=0x0;_0x5f35fc<_0x14f719[_0x370294(0x228)];_0x5f35fc++){const _0xb3bbfa=_0x14f719[_0x5f35fc],_0x51e0b4=_0xb3bbfa[_0xb3bbfa[_0x370294(0x228)]-0x1];if(_0x43dd84[_0x370294(0x1a7)]>=_0x51e0b4[_0x370294(0x2f7)]){_0xb3bbfa[_0x370294(0x204)](_0x43dd84),_0x43dd84['colIndex']=_0x5f35fc,_0x5bce3c=!![];break;}}!_0x5bce3c&&(_0x14f719['push']([_0x43dd84]),_0x43dd84['colIndex']=_0x14f719[_0x370294(0x228)]-0x1);}),_0x4e0fad[_0x333520(0x251)](_0x184023=>{const _0x5d941c=_0x333520;let _0x1295e2=0x0;_0x4e0fad[_0x5d941c(0x251)](_0xfc4893=>{const _0x1765fb=_0x5d941c;if(Math['max'](_0x184023['start'],_0xfc4893['start'])<Math[_0x1765fb(0x1ae)](_0x184023['end'],_0xfc4893[_0x1765fb(0x2f7)])){if(_0xfc4893[_0x1765fb(0x1b2)]>_0x1295e2)_0x1295e2=_0xfc4893[_0x1765fb(0x1b2)];}});const _0x2d02c3=_0x1295e2+0x1,_0x12f0f3=0x64/_0x2d02c3,_0x4d7dc3=_0x184023[_0x5d941c(0x1b2)]*_0x12f0f3,_0x235aea=createEventEl(_0x184023['data']);_0x235aea[_0x5d941c(0x2b6)][_0x5d941c(0x261)]=_0x5d941c(0x255)+_0x12f0f3+'%\x20-\x204px)',_0x235aea[_0x5d941c(0x2b6)]['left']=_0x5d941c(0x255)+_0x4d7dc3+_0x5d941c(0x29d),_0x235aea[_0x5d941c(0x2b6)][_0x5d941c(0x245)]=0xa+_0x184023[_0x5d941c(0x1b2)],_0x12f0f3<0x55&&_0x235aea['classList']['add']('mini'),_0x10c4d1['appendChild'](_0x235aea);});}function createEventEl(_0x3b4061){const _0x492566=a2_0x559b49,[_0x669437,_0x2c763f]=_0x3b4061['start'][_0x492566(0x291)](':')['map'](Number),[_0x342e23,_0x1bc808]=_0x3b4061[_0x492566(0x2f7)][_0x492566(0x291)](':')[_0x492566(0x24b)](Number),_0x33e5da=(_0x669437*0x3c+_0x2c763f)/0x3c*GRID_H,_0x425bf7=(_0x342e23*0x3c+_0x1bc808-(_0x669437*0x3c+_0x2c763f))/0x3c*GRID_H,_0x1f488e=document[_0x492566(0x2fe)](_0x492566(0x227)),_0x2517fd=_0x3b4061[_0x492566(0x280)]===_0x492566(0x21c)?'\x20status-completed':'';_0x1f488e[_0x492566(0x1f1)]=_0x492566(0x2d9)+_0x2517fd,_0x1f488e[_0x492566(0x2b6)][_0x492566(0x229)]=_0x33e5da+'px',_0x1f488e[_0x492566(0x2b6)][_0x492566(0x2ad)]=Math['max'](_0x425bf7,0x14)+'px';const _0x1bfc8b=clients['find'](_0x2e655b=>_0x3b4061['clientId']&&String(_0x2e655b['id'])===String(_0x3b4061[_0x492566(0x2b8)])||_0x2e655b[_0x492566(0x306)]===_0x3b4061[_0x492566(0x1b5)]),_0x4c2087=_0x1bfc8b?_0x1bfc8b[_0x492566(0x194)]:_0x492566(0x211);_0x1f488e[_0x492566(0x2b6)][_0x492566(0x2df)]=_0x4c2087,_0x1f488e[_0x492566(0x2b6)]['backgroundColor']=hexToRgba(_0x4c2087,0.85);let _0x120f06='<div\x20class=\x22ev-title\x22>'+_0x3b4061['client']+'</div><div\x20class=\x22ev-time\x22>'+_0x3b4061['start']+_0x492566(0x237)+_0x3b4061[_0x492566(0x2f7)]+'</div>';return _0x3b4061[_0x492566(0x2e9)]&&(_0x120f06+=_0x492566(0x2c6)),_0x3b4061[_0x492566(0x280)]===_0x492566(0x21c)&&(_0x120f06+=_0x492566(0x19b)),_0x1f488e[_0x492566(0x257)]=_0x120f06,_0x1f488e[_0x492566(0x2ea)]=_0x171517=>{_0x171517['stopPropagation'](),openEdit(_0x3b4061);},_0x1f488e;}function attachLongPressHandler(_0x3a3143,_0x98523c){const _0x2e79a1=a2_0x559b49;let _0x4bce18=0x0,_0x463dc1=null;const _0x4bd26d=_0x149d87=>{const _0x35de4c=a2_0x3ade;if(_0x149d87['target'][_0x35de4c(0x1c2)](_0x35de4c(0x22c)))return;isScrolling=![],_0x4bce18=_0x149d87['touches']?_0x149d87[_0x35de4c(0x243)][0x0]['clientY']:_0x149d87['clientY'],_0x463dc1=setTimeout(()=>{const _0xe89716=_0x35de4c;if(!isScrolling){navigator['vibrate']?.(0x32);const _0x425da4=_0x3a3143['getBoundingClientRect'](),_0x2b3c71=Math[_0xe89716(0x214)]((_0x4bce18-_0x425da4[_0xe89716(0x229)])/GRID_H);_0x98523c[_0xe89716(0x2ce)](_0x2b3c71,0x0),openAddSession(_0x98523c);}},0x1f4);},_0x195a83=()=>{isScrolling=!![],clearTimeout(_0x463dc1);},_0x23d751=()=>{clearTimeout(_0x463dc1);};_0x3a3143['addEventListener'](_0x2e79a1(0x20f),_0x4bd26d,{'passive':!![]}),_0x3a3143[_0x2e79a1(0x297)](_0x2e79a1(0x25b),_0x195a83,{'passive':!![]}),_0x3a3143['addEventListener'](_0x2e79a1(0x2bf),_0x23d751),_0x3a3143[_0x2e79a1(0x297)](_0x2e79a1(0x1aa),_0x4bd26d),_0x3a3143[_0x2e79a1(0x297)](_0x2e79a1(0x283),_0x195a83),_0x3a3143[_0x2e79a1(0x297)]('mouseup',_0x23d751);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x3989cd=a2_0x559b49,_0x1bcfa1=document[_0x3989cd(0x27b)](_0x3989cd(0x22a)),_0x32e445=_0x1bcfa1[_0x3989cd(0x256)],_0x1dd0ba=_0x1bcfa1[_0x3989cd(0x2fd)],_0x29b2bc=_0x1bcfa1['clientWidth'];if(_0x1dd0ba-(_0x32e445+_0x29b2bc)<0x12c){const _0xad97cc=endOffset;endOffset+=0xe,renderDayRange(_0xad97cc+0x1,endOffset),reRenderBlocks();}if(_0x32e445<0x12c){const _0xd3d9fd=startOffset;startOffset-=0xe,prependDays(startOffset,_0xd3d9fd-0x1),_0x1bcfa1['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x236687,_0x15c4f5){const _0x10ee1b=a2_0x559b49,_0x5b3b13=document[_0x10ee1b(0x27b)](_0x10ee1b(0x2a2)),_0x4faa7d=document[_0x10ee1b(0x27b)](_0x10ee1b(0x2b4)),_0x1be6c5=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xf5306e=new Date();_0xf5306e['setHours'](0x0,0x0,0x0,0x0);const _0x206678=getLocalDateStr(new Date()),_0x57fecc=document[_0x10ee1b(0x295)](),_0x1a4661=document[_0x10ee1b(0x295)]();for(let _0x557215=_0x236687;_0x557215<=_0x15c4f5;_0x557215++){const _0x430d6f=new Date(_0xf5306e);_0x430d6f[_0x10ee1b(0x1df)](_0x430d6f['getDate']()+_0x557215);const _0xa279c0=getLocalDateStr(_0x430d6f);let _0x40d8d6=_0x430d6f[_0x10ee1b(0x1a2)]()-0x1;if(_0x40d8d6===-0x1)_0x40d8d6=0x6;const _0x2d44ca=_0xa279c0===_0x206678,_0x252146=document[_0x10ee1b(0x2fe)](_0x10ee1b(0x227));_0x252146[_0x10ee1b(0x1f1)]=_0x10ee1b(0x2af)+(_0x2d44ca?_0x10ee1b(0x2d3):''),_0x252146['id']=_0x10ee1b(0x20b)+_0xa279c0,_0x252146[_0x10ee1b(0x1ab)]('data-date',_0xa279c0),_0x252146[_0x10ee1b(0x257)]='<div\x20class=\x22dch-day\x22>'+_0x1be6c5[_0x40d8d6]+_0x10ee1b(0x2da)+_0x430d6f[_0x10ee1b(0x2c9)]()+'</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-'+_0xa279c0+_0x10ee1b(0x293),_0x252146[_0x10ee1b(0x2ea)]=()=>openDayOptions(_0xa279c0,_0x1be6c5[_0x40d8d6]+'\x20'+_0x430d6f['getDate']()),_0x57fecc[_0x10ee1b(0x2eb)](_0x252146);const _0x5d975e=document[_0x10ee1b(0x2fe)](_0x10ee1b(0x227));_0x5d975e[_0x10ee1b(0x1f1)]=_0x10ee1b(0x1b9)+(_0x2d44ca?_0x10ee1b(0x2d3):''),_0x5d975e[_0x10ee1b(0x1ab)](_0x10ee1b(0x2e1),_0xa279c0),_0x5d975e[_0x10ee1b(0x1ab)](_0x10ee1b(0x1c6),_0x40d8d6),renderEventsForColumn(_0x5d975e,_0xa279c0,_0x40d8d6),attachLongPressHandler(_0x5d975e,_0x430d6f),_0x1a4661['appendChild'](_0x5d975e),updateDayStats(_0xa279c0);}_0x5b3b13[_0x10ee1b(0x1c8)](_0x57fecc,_0x5b3b13[_0x10ee1b(0x259)]),_0x4faa7d[_0x10ee1b(0x1c8)](_0x1a4661,_0x4faa7d[_0x10ee1b(0x2a0)](_0x10ee1b(0x215)));}function validateAppointment(_0x438dec,_0x5c00b8,_0xbeddfa,_0x1a1580,_0x1cae83){const _0x5d0a9a=a2_0x559b49,[_0x1e75b2,_0x51841f]=_0x5c00b8[_0x5d0a9a(0x291)](':')[_0x5d0a9a(0x24b)](Number),[_0x3237c0,_0xd24323]=_0xbeddfa[_0x5d0a9a(0x291)](':')['map'](Number),_0x51b326=_0x1e75b2*0x3c+_0x51841f,_0x1ee151=_0x3237c0*0x3c+_0xd24323,_0x43766d=String(_0x1cae83);let _0x100383=![],_0x1ac028='';for(let _0x587eef of sessions){if(_0x587eef['dateStr']!==_0x438dec)continue;if(_0x587eef['status']==='cancelled')continue;if(_0x1a1580&&String(_0x587eef['id'])===String(_0x1a1580))continue;const [_0x279fa3,_0x4d59bd]=_0x587eef[_0x5d0a9a(0x1a7)][_0x5d0a9a(0x291)](':')[_0x5d0a9a(0x24b)](Number),[_0x2a961d,_0x429838]=_0x587eef['end'][_0x5d0a9a(0x291)](':')[_0x5d0a9a(0x24b)](Number),_0x53614a=_0x279fa3*0x3c+_0x4d59bd,_0x5985e6=_0x2a961d*0x3c+_0x429838;if(Math['max'](_0x51b326,_0x53614a)<Math[_0x5d0a9a(0x1ae)](_0x1ee151,_0x5985e6)){if(_0x587eef[_0x5d0a9a(0x2b8)]&&String(_0x587eef[_0x5d0a9a(0x2b8)])===_0x43766d)return{'valid':![],'msg':_0x5d0a9a(0x1d3)+_0x587eef[_0x5d0a9a(0x1b5)]+_0x5d0a9a(0x239)};_0x100383=!![],_0x1ac028=_0x587eef['client'];}}if(_0x100383)return{'valid':!![],'warning':_0x5d0a9a(0x21a)+_0x1ac028};return{'valid':!![]};}function updateDateDisplay(){const _0x5f3135=a2_0x559b49,_0x1c8b32=document[_0x5f3135(0x27b)]('inpDate')[_0x5f3135(0x279)],_0x205177=document[_0x5f3135(0x27b)](_0x5f3135(0x1c1));if(!_0x1c8b32){_0x205177['textContent']='';return;}const [_0x323651,_0x44c960,_0xdf113a]=_0x1c8b32[_0x5f3135(0x291)]('-')[_0x5f3135(0x24b)](Number),_0x2cf968=new Date(_0x323651,_0x44c960-0x1,_0xdf113a),_0x4f2683={'weekday':_0x5f3135(0x302),'day':_0x5f3135(0x281),'month':_0x5f3135(0x302),'year':'numeric'};let _0x53538e=_0x2cf968[_0x5f3135(0x210)](_0x5f3135(0x1eb),_0x4f2683);_0x53538e=_0x53538e[_0x5f3135(0x1f3)](0x0)[_0x5f3135(0x226)]()+_0x53538e['slice'](0x1),_0x205177[_0x5f3135(0x19a)]=_0x53538e;}function autoSetEndTime(){const _0x1b6747=a2_0x559b49,_0x204d24=document['getElementById']('inpStart')[_0x1b6747(0x279)];if(!_0x204d24)return;const [_0x251eb1,_0x5564ca]=_0x204d24['split'](':')[_0x1b6747(0x24b)](Number);let _0x258482=_0x251eb1+0x1;if(_0x258482>0x17)_0x258482=0x0;const _0x41d512=String(_0x258482)['padStart'](0x2,'0')+':'+String(_0x5564ca)['padStart'](0x2,'0');document['getElementById'](_0x1b6747(0x20d))['value']=_0x41d512;}function populateClientSelect(){const _0x46a50c=a2_0x559b49,_0x34984a=document[_0x46a50c(0x27b)]('inpClient');_0x34984a[_0x46a50c(0x257)]='';if(clients['length']===0x0){const _0x5d040d=document[_0x46a50c(0x2fe)]('option');_0x5d040d[_0x46a50c(0x2aa)]=_0x46a50c(0x2c1),_0x34984a['appendChild'](_0x5d040d);return;}clients['forEach'](_0x4a81d6=>{const _0xae6431=_0x46a50c,_0x5340aa=document[_0xae6431(0x2fe)](_0xae6431(0x242));_0x5340aa['value']=_0x4a81d6[_0xae6431(0x306)],_0x5340aa[_0xae6431(0x19a)]=_0x4a81d6['name'],_0x34984a[_0xae6431(0x2eb)](_0x5340aa);});}function openActionSheet(_0x353a16){const _0x3a4afa=a2_0x559b49,_0x11a840=document[_0x3a4afa(0x27b)](_0x3a4afa(0x2e8)),_0x4158a6=document['getElementById'](_0x3a4afa(0x28e)),_0x49111b=document[_0x3a4afa(0x27b)](_0x3a4afa(0x1ec)),_0x13553e=document['getElementById'](_0x3a4afa(0x292)),_0x3fea03=document['getElementById'](_0x3a4afa(0x2bb));_0x4158a6[_0x3a4afa(0x278)][_0x3a4afa(0x2b9)](_0x3a4afa(0x1e1)),_0x11a840[_0x3a4afa(0x278)]['add'](_0x3a4afa(0x1e2));if(_0x353a16===_0x3a4afa(0x1c7))_0x49111b[_0x3a4afa(0x19a)]='–ò–∑–º–µ–Ω–µ–Ω–∏–µ\x20—Å–µ—Ä–∏–∏',_0x13553e[_0x3a4afa(0x19a)]=_0x3a4afa(0x1dc),_0x13553e[_0x3a4afa(0x2ea)]=()=>{const _0x575aea=_0x3a4afa;closeActionSheet(),updateSeriesBatch(_0x575aea(0x248),tempSessionData);},_0x3fea03[_0x3a4afa(0x19a)]='–≠—Ç—É\x20–∏\x20–±—É–¥—É—â–∏–µ',_0x3fea03[_0x3a4afa(0x2ea)]=()=>{const _0x279e40=_0x3a4afa;closeActionSheet(),updateSeriesBatch(_0x279e40(0x2b7),tempSessionData);};else _0x353a16===_0x3a4afa(0x1d9)&&(_0x49111b[_0x3a4afa(0x19a)]='–£–¥–∞–ª–µ–Ω–∏–µ',_0x13553e['textContent']=_0x3a4afa(0x1dc),_0x13553e['className']='as-button\x20danger',_0x13553e[_0x3a4afa(0x2ea)]=()=>{const _0x37f0d3=_0x3a4afa;closeActionSheet(),commitDelete(_0x37f0d3(0x248),sessions['find'](_0x1d6a5e=>_0x1d6a5e['id']===editingId));},_0x3fea03[_0x3a4afa(0x19a)]=_0x3a4afa(0x2ec),_0x3fea03[_0x3a4afa(0x1f1)]=_0x3a4afa(0x207),_0x3fea03[_0x3a4afa(0x2ea)]=()=>{const _0x1e56d6=_0x3a4afa;closeActionSheet(),commitDelete(_0x1e56d6(0x2b7),sessions[_0x1e56d6(0x23f)](_0x5ede59=>_0x5ede59['id']===editingId));});}function closeActionSheet(){const _0xc4ba7=a2_0x559b49;document[_0xc4ba7(0x27b)](_0xc4ba7(0x2e8))[_0xc4ba7(0x278)][_0xc4ba7(0x2dc)](_0xc4ba7(0x1e2)),document['getElementById']('actionSheetOverlay')['classList'][_0xc4ba7(0x2dc)](_0xc4ba7(0x1e1));}function openSettings(){const _0x231ed2=a2_0x559b49;openSheet(_0x231ed2(0x2f6));}function saveCoachSettings(){const _0x7f331d=a2_0x559b49,_0x176f67=document[_0x7f331d(0x27b)]('settingCancelWindow')[_0x7f331d(0x279)];localStorage['setItem'](_0x7f331d(0x274),_0x176f67),console['log']('[Settings]\x20Cancel\x20window\x20set\x20to:',_0x176f67),DataManager[_0x7f331d(0x2e2)](_0x7f331d(0x1bd),{'settings':{'cancel_window':_0x176f67}})[_0x7f331d(0x1c3)](_0x578a44=>{const _0x129c7b=_0x7f331d;console[_0x129c7b(0x262)]('Save\x20settings\x20error:',_0x578a44),showToast(_0x129c7b(0x299),![]);});}function loadCoachSettings(){const _0x1f2cab=a2_0x559b49,_0x3879f0=localStorage['getItem'](_0x1f2cab(0x274));_0x3879f0&&(document['getElementById']('settingCancelWindow')[_0x1f2cab(0x279)]=_0x3879f0);}function openRangesSheet(){const _0x136d89=a2_0x559b49;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x136d89(0x2d1));}function addRange(){const _0x4d75c0=a2_0x559b49,_0x10828b=document[_0x4d75c0(0x27b)](_0x4d75c0(0x2d8))[_0x4d75c0(0x279)],_0x26c8f8=document[_0x4d75c0(0x27b)](_0x4d75c0(0x199))['value'],_0x190692=document['getElementById']('rangeEndDate')['value'],_0x3b0318=document[_0x4d75c0(0x27b)](_0x4d75c0(0x19c))[_0x4d75c0(0x279)];if(!_0x10828b||!_0x26c8f8||!_0x190692||!_0x3b0318)return alert(_0x4d75c0(0x235));const _0x166a6b=_0x10828b+'T'+_0x26c8f8,_0x5aae53=_0x190692+'T'+_0x3b0318;if(_0x166a6b>=_0x5aae53)return alert(_0x4d75c0(0x2a5));specialRanges[_0x4d75c0(0x204)]({'start':_0x166a6b,'end':_0x5aae53}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager['saveLocally'](),DataManager[_0x4d75c0(0x2e2)](_0x4d75c0(0x1bd),{'settings':{'ranges':specialRanges}});}function deleteRange(_0x5efbf3){const _0x3ad8ad=a2_0x559b49;specialRanges[_0x3ad8ad(0x2f9)](_0x5efbf3,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x3ad8ad(0x294)](),DataManager[_0x3ad8ad(0x2e2)]('save_settings',{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x381b68=a2_0x559b49;document['getElementById'](_0x381b68(0x2d8))[_0x381b68(0x279)]='',document[_0x381b68(0x27b)](_0x381b68(0x199))['value']='00:00',document[_0x381b68(0x27b)](_0x381b68(0x24e))[_0x381b68(0x279)]='',document[_0x381b68(0x27b)](_0x381b68(0x19c))['value']=_0x381b68(0x216);}function a2_0x48f1(){const _0x259d47=['disableVerticalSwipes','%\x20+\x202px)','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>‚Üí</span>','null','querySelector','init_load','daysHeaderTrack','ranges','all','–û—à–∏–±–∫–∞\x20–¥–∞—Ç','anEnd','msg','anStart','note','text','var(--acc-current)','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','height','Critical\x20TMA\x20Error:','day-col-header\x20','–°—Ç–∞—Ç—É—Å\x20—Å–±—Ä–æ—à–µ–Ω','offsetWidth','recurringOptionContainer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','gridColumns','getTime','style','series','clientId','add','loadLocal','asBtnSeries','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','\x20days','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>–ù–µ—Ç\x20–ø–µ—Ä–∏–æ–¥–æ–≤</div>','touchend','pe-time-label','–ù–µ—Ç\x20–∫–ª–∏–µ–Ω—Ç–æ–≤','–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞\x20–∑–∞–≤–µ—Ä—à–µ–Ω–∞','<span>','backgroundPosition',')</b>\x20–±—ã–ª–∞\x20—É–¥–∞–ª–µ–Ω–∞\x20–∏–∑\x20—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','constructor','round','getDate','WebApp','...','max','Telegram','setHours','toastTitle','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','rangesSheet','getItem','today','Error\x20setting\x20color:','display','<b>üîÑ\x20–ò–∑–º–µ–Ω–µ–Ω–∏–µ\x20–≤—Ä–µ–º–µ–Ω–∏</b>\x0a\x0a','statLoadCard','rangeStartDate','event-card','</div><div\x20class=\x22dch-num\x22>',']\x20–î–æ—Å—Ç—É–ø–Ω–æ:\x20','remove','240pseAXg','pattern','borderLeftColor','valid','data-date','fetchFromServer','send_notification','2267397pYysaX','rgba(255,255,255,0.05)','data','getMinutes','actionSheet','seriesId','onclick','appendChild','–≠—Ç—É\x20–∏\x20–±—É–¥—É—â–∏–µ','–û—Ñ—Ñ–ª–∞–π–Ω\x20—Ä–µ–∂–∏–º','Local\x20Load\x20Error','–ù–æ–≤–∞—è\x20–∑–∞–ø–∏—Å—å','week','calendar','T23:59:59','131368MEMOxe','var(--acc-green)','clientWidth','settingsSheet','end','1YBRlNO','splice','expand','dateStr','custom','scrollWidth','createElement','none','–û—à–∏–±–∫–∞\x20—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è\x20–≤\x20–æ–±–ª–∞–∫–æ','[Notify]\x20Detected\x20Client\x20ID:','long','onClick','696oNkTrO','\x20(–ø—Ä–æ–ø—É—â–µ–Ω–æ:\x20','name','parse','toast-notification\x20','total','[Notify]\x20Error:\x20Text\x20generation\x20failed','<b>üÜï\x20–ù–æ–≤–∞—è\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</b>\x0a\x0a','color','timeColumn','create','now','toString','rangeStartTime','textContent','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','rangeEndTime','Batch\x20Sync\x20OK','overlay','sheetTitle','text/plain;charset=UTF-8',':00</span>','getDay','borderRadius','.day-off-overlay','sort','setHeaderColor','start','undefined','inpNote','mousedown','setAttribute','analyticsList','seriesCountContainer','min','(((.+)+)+)+$','–º–∏–Ω,\x20–ó–∞–≥—Ä—É–∑–∫–∞:\x20','complete','colIndex','getFullYear','Unknown','client','warn','querySelectorAll','getMonth','day-column\x20','success','#050505','–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å','save_settings','–í–µ—Ä–Ω—É—Ç—å\x20–≤\x20–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ','send','patternEditor','sheetDateSubtitle','closest','catch','range-item','done','data-day-idx','save','insertBefore','time-label','initData','–£—Å–ø–µ—à–Ω–æ','[Notify]\x20Network\x20Failed','mergeServerData','timeLineBadge','inpRecurring','sid','log','findIndex','–≠—Ç–æ—Ç\x20–∫–ª–∏–µ–Ω—Ç\x20(','#gridColumns\x20.day-column','toLocaleString','doBusyHours','clients','BackButton','delete','getAttribute','<b>‚úÖ\x20–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞\x20–∑–∞–≤–µ—Ä—à–µ–Ω–∞</b>\x0a\x0a','–¢–æ–ª—å–∫–æ\x20—ç—Ç—É','sessionSheet','btnDayToggle','setDate','2260TYmofT','active','open','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','[Sync]\x20Loading\x20','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancelled','off','.day-col-header','indexOf','ru-RU','asTitle','inpClient','pe-cell\x20','setBackgroundColor','month','className','uc_sessions_v9','charAt','btn-status-toggle','search','show','inpStart','patternInfoBox','warning','<b>üìÖ\x20–î–∞—Ç–∞:</b>\x20','blocked-slot\x20stripe-bg','–í—Å–µ\x20–¥–∞—Ç—ã\x20–∑–∞–Ω—è—Ç—ã\x20—ç—Ç–∏–º\x20–∫–ª–∏–µ–Ω—Ç–æ–º!','btn-primary\x20btn-danger','background','[Notify]\x20Attempting\x20to\x20send:','–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ','[Notify]\x20Error:\x20sessionData\x20is\x20null','toastMessage','.pib-text','push','user','offsetLeft','as-button\x20danger\x20bold','btnStatusToggle','inpSeriesCount','Local\x20Save\x20Error','header-','316NdqAVs','inpEnd','#fff','touchstart','toLocaleDateString','#0a84ff','inpDate',']\x20Failed:','floor','.day-column','23:59',':00','dayOptionsSheet','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','–ì—Ä—É–ø–ø–æ–≤–∞—è:\x20—Ç–∞–∫–∂–µ\x20–∑–∞–ø–∏—Å–∞–Ω\x20','borderColor','completed','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','includes','substr','stopPropagation','keys','rgba(48,\x20209,\x2088,\x200.15)','\x20‚Äî\x20','<b>‚úÖ\x20',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','toUpperCase','div','length','top','matrixViewport','stringify','.event-card','7502kiuGFH','rgba(255,\x20159,\x2010,\x200.3)','filter','btn-primary\x20btn-secondary','pe-corner','doLoadPercent','–û—Ç–ª–∏—á–Ω–∞—è\x20—Ä–∞–±–æ—Ç–∞\x20—Å–µ–≥–æ–¥–Ω—è!\x20–ü—Ä–æ–≥—Ä–µ—Å—Å\x20–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω.\x20üî•\x0a\x0a','3493lUtqeD','–ó–∞–ø–æ–ª–Ω–∏—Ç–µ\x20–≤—Å–µ\x20–ø–æ–ª—è','–í–∞—à–∞\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞:\x0a\x0a','\x20-\x20','syncLoad',')\x20—É–∂–µ\x20–∑–∞–ø–∏—Å–∞–Ω\x20–Ω–∞\x20—ç—Ç–æ\x20–≤—Ä–µ–º—è!','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','52848dckXFU','anCustomDates','anDonutCircle','padStart','find','formatDate','stat-','option','touches','–°–æ–∑–¥–∞–Ω–∞\x20—Å–µ—Ä–∏—è:\x20','zIndex','.dch-stats-fill','href','single','4704LAThCs','10px','map','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','px\x200px','rangeEndDate','guest','offClick','forEach','planned','100%','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','calc(','scrollLeft','innerHTML','<b>‚è∞\x20–í—Ä–µ–º—è:</b>\x20','firstChild','</b>\x0a\x0a','touchmove','getHours','toast','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','ready','rgba(255,\x2069,\x2058,\x200.15)','width','error','flex','cancel','var(--acc-orange)','blocked-range-part\x20stripe-bg','update',':\x20Client\x20already\x20booked','rgba(100,100,100,0.5)','day-off-overlay\x20stripe-bg','initDataUnsafe','setItem','–ò–Ω—Ñ–æ','uc_settings_v9','22700AIwWhG','<b>üö´\x20–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞\x20–æ—Ç–º–µ–Ω–µ–Ω–∞</b>\x0a\x0a','.sheet','checked','\x20<span\x20class=\x22arrow\x22>‚Üì</span>','uc_settings_cancel_window','Error\x20setting\x20back\x20button:','slice','getText','classList','value','–ú–∞–∫—Å–∏–º—É–º\x20100\x20–∑–∞\x20—Ä–∞–∑','getElementById','strokeDashoffset','exceptions','scrollTop','scroll','status','numeric','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','mousemove','headerMonth','.period-switch\x20.p-btn','block','settings','doEventsList','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','–ú–∏–Ω–∏–º—É–º\x202\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏','cancel_window','from','doWorkHours','actionSheetOverlay','[Series]\x20Skipped\x20','var(--acc-red)','split','asBtnOne','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','saveLocally','createDocumentFragment','startsWith','addEventListener','btnDelete','–û—à–∏–±–∫–∞\x20—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è\x20–Ω–∞—Å—Ç—Ä–æ–µ–∫','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:','then'];a2_0x48f1=function(){return _0x259d47;};return a2_0x48f1();}function renderRangesList(){const _0x1f96fc=a2_0x559b49,_0x3caa96=document['getElementById']('rangesList');_0x3caa96[_0x1f96fc(0x257)]='';if(!specialRanges[_0x1f96fc(0x228)]){_0x3caa96[_0x1f96fc(0x257)]=_0x1f96fc(0x2be);return;}specialRanges[_0x1f96fc(0x251)]((_0x4687a8,_0x44bc84)=>{const _0xd24bbf=_0x1f96fc,_0x342395=document['createElement']('div');_0x342395[_0xd24bbf(0x1f1)]=_0xd24bbf(0x1c4);const _0x94be84=_0x5291aa=>{const _0x501023=_0xd24bbf,_0x1898eb=new Date(_0x5291aa);return _0x1898eb['getDate']()+'.'+String(_0x1898eb[_0x501023(0x1b8)]()+0x1)[_0x501023(0x23e)](0x2,'0')+'\x20'+String(_0x1898eb['getHours']())[_0x501023(0x23e)](0x2,'0')+':'+String(_0x1898eb[_0x501023(0x2e7)]())[_0x501023(0x23e)](0x2,'0');};_0x342395[_0xd24bbf(0x257)]=_0xd24bbf(0x2b3)+_0x94be84(_0x4687a8[_0xd24bbf(0x1a7)])+_0xd24bbf(0x223)+_0x94be84(_0x4687a8[_0xd24bbf(0x2f7)])+'</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange('+_0x44bc84+_0xd24bbf(0x225),_0x3caa96[_0xd24bbf(0x2eb)](_0x342395);});}function scrollToToday(){const _0x3c1dce=a2_0x559b49,_0x22f186=getLocalDateStr(new Date()),_0x2f0e6a=document[_0x3c1dce(0x27b)](_0x3c1dce(0x20b)+_0x22f186),_0x8bcb16=document[_0x3c1dce(0x27b)](_0x3c1dce(0x22a));if(_0x2f0e6a&&_0x8bcb16){const _0x1fb328=_0x8bcb16[_0x3c1dce(0x2f5)],_0x58f2ca=_0x2f0e6a[_0x3c1dce(0x206)],_0x164cff=_0x2f0e6a[_0x3c1dce(0x2b1)];_0x8bcb16[_0x3c1dce(0x256)]=_0x58f2ca-_0x1fb328/0x2+_0x164cff/0x2,_0x8bcb16[_0x3c1dce(0x27e)]=0x9*GRID_H;}}function onScroll(){const _0x3b786e=a2_0x559b49,_0x1cf7d8=document[_0x3b786e(0x27b)](_0x3b786e(0x22a)),_0xe85930=document[_0x3b786e(0x1b7)](_0x3b786e(0x1e9));for(let _0x56c0b7 of _0xe85930)if(_0x56c0b7['offsetLeft']>=_0x1cf7d8[_0x3b786e(0x256)]){const _0x12ffc9=new Date(_0x56c0b7[_0x3b786e(0x1da)]('data-date'));document[_0x3b786e(0x27b)](_0x3b786e(0x284))['textContent']=_0x12ffc9[_0x3b786e(0x1d5)]('ru',{'month':_0x3b786e(0x302)})[_0x3b786e(0x226)]()+'\x20'+_0x12ffc9['getFullYear']();break;}}function showToast(_0x41e461,_0x50327e=![]){const _0x235694=a2_0x559b49,_0x358837=document[_0x235694(0x27b)](_0x235694(0x25d));_0x358837['className']=_0x235694(0x308)+(_0x50327e?_0x235694(0x1ba):''),document[_0x235694(0x27b)](_0x235694(0x2cf))[_0x235694(0x19a)]=_0x50327e?_0x235694(0x1cb):_0x235694(0x26d),document[_0x235694(0x27b)](_0x235694(0x202))[_0x235694(0x19a)]=_0x41e461,_0x358837[_0x235694(0x278)][_0x235694(0x2b9)]('show'),setTimeout(()=>{const _0xa59c7e=_0x235694;_0x358837[_0xa59c7e(0x278)][_0xa59c7e(0x2dc)](_0xa59c7e(0x1f6));},0xbb8);}function openDayOptions(_0x9d2064,_0x1317f3){const _0x22badd=a2_0x559b49;selectedDayForOptions=_0x9d2064,document[_0x22badd(0x27b)]('dayOptionsTitle')['textContent']=_0x1317f3,openSheet('dayOptionsSheet');}function toggleDayOff(){const _0x26d944=a2_0x559b49;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x26d944(0x1e8),reRenderBlocks(),closeAllSheets(),DataManager[_0x26d944(0x294)](),DataManager['fetchFromServer'](_0x26d944(0x1bd),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager['saveLocally'](),DataManager['fetchFromServer']('save_settings',{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x4579be){const _0x93fdb8=a2_0x559b49;document[_0x93fdb8(0x27b)](_0x93fdb8(0x19e))['classList'][_0x93fdb8(0x2b9)]('active'),document[_0x93fdb8(0x27b)](_0x4579be)[_0x93fdb8(0x278)][_0x93fdb8(0x2b9)](_0x93fdb8(0x1e2));}function closeAllSheets(){const _0x5231d6=a2_0x559b49;document[_0x5231d6(0x27b)](_0x5231d6(0x19e))[_0x5231d6(0x278)][_0x5231d6(0x2dc)]('active'),document[_0x5231d6(0x1b7)](_0x5231d6(0x271))[_0x5231d6(0x251)](_0x19b373=>_0x19b373[_0x5231d6(0x278)][_0x5231d6(0x2dc)](_0x5231d6(0x1e2)));}function openPatternEditor(){const _0x21c216=a2_0x559b49;closeAllSheets(),document['getElementById'](_0x21c216(0x1c0))['classList']['add']('open'),renderPatternEditor();}function closePatternEditor(){const _0x376017=a2_0x559b49;document['getElementById'](_0x376017(0x1c0))[_0x376017(0x278)]['remove'](_0x376017(0x1e2));}function savePattern(){const _0x34c65d=a2_0x559b49;document[_0x34c65d(0x27b)](_0x34c65d(0x1c0))['classList'][_0x34c65d(0x2dc)](_0x34c65d(0x1e2)),reRenderBlocks(),DataManager[_0x34c65d(0x294)](),DataManager[_0x34c65d(0x2e2)]('save_settings',{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x522675=a2_0x559b49,_0x23f991=document[_0x522675(0x27b)]('peGrid');_0x23f991[_0x522675(0x257)]='';const _0x370de8=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4f825b=document[_0x522675(0x2fe)](_0x522675(0x227));_0x4f825b[_0x522675(0x1f1)]=_0x522675(0x231),_0x23f991['appendChild'](_0x4f825b),_0x370de8[_0x522675(0x251)]((_0x3150b0,_0x54df3f)=>{const _0x48179a=_0x522675,_0x446f27=document[_0x48179a(0x2fe)](_0x48179a(0x227));_0x446f27[_0x48179a(0x1f1)]='pe-col-header',_0x446f27[_0x48179a(0x257)]=_0x3150b0+_0x48179a(0x273),_0x446f27['onclick']=()=>toggleColPattern(_0x54df3f),_0x23f991['appendChild'](_0x446f27);});for(let _0x17ce7c=0x0;_0x17ce7c<0x18;_0x17ce7c++){const _0x374973=document[_0x522675(0x2fe)](_0x522675(0x227));_0x374973[_0x522675(0x1f1)]=_0x522675(0x2c0),_0x374973[_0x522675(0x257)]=_0x522675(0x29e)+String(_0x17ce7c)[_0x522675(0x23e)](0x2,'0')+':00',_0x374973[_0x522675(0x2ea)]=()=>toggleRowPattern(_0x17ce7c),_0x23f991[_0x522675(0x2eb)](_0x374973);for(let _0x3c711d=0x0;_0x3c711d<0x7;_0x3c711d++){const _0xd259b0=document[_0x522675(0x2fe)](_0x522675(0x227)),_0x2fcf67=(availabilityPattern[_0x3c711d]||[])['includes'](_0x17ce7c),_0x5a44ce=!_0x2fcf67;_0xd259b0[_0x522675(0x1f1)]=_0x522675(0x1ee)+(_0x5a44ce?_0x522675(0x1e1):''),_0xd259b0[_0x522675(0x2ea)]=()=>toggleSinglePattern(_0x3c711d,_0x17ce7c),_0x23f991['appendChild'](_0xd259b0);}}}function toggleSinglePattern(_0x5dc33f,_0x5f3eb6){const _0x4cd962=a2_0x559b49;if(!availabilityPattern[_0x5dc33f])availabilityPattern[_0x5dc33f]=[];const _0x2ec218=availabilityPattern[_0x5dc33f],_0x43c8fb=_0x2ec218['indexOf'](_0x5f3eb6);_0x43c8fb===-0x1?_0x2ec218['push'](_0x5f3eb6):_0x2ec218[_0x4cd962(0x2f9)](_0x43c8fb,0x1),renderPatternEditor();}function toggleColPattern(_0x276507){const _0x4009a9=a2_0x559b49;if(!availabilityPattern[_0x276507])availabilityPattern[_0x276507]=[];const _0x34c668=availabilityPattern[_0x276507];_0x34c668[_0x4009a9(0x228)]===0x0?availabilityPattern[_0x276507]=Array[_0x4009a9(0x28c)]({'length':0x18},(_0x3babe2,_0x4bd98a)=>_0x4bd98a):availabilityPattern[_0x276507]=[],renderPatternEditor();}function toggleRowPattern(_0x1bcf11){const _0x57706a=a2_0x559b49;let _0x3e1eb3=!![];for(let _0x1b27d5=0x0;_0x1b27d5<0x7;_0x1b27d5++){if((availabilityPattern[_0x1b27d5]||[])[_0x57706a(0x21e)](_0x1bcf11)){_0x3e1eb3=![];break;}}for(let _0x5227ee=0x0;_0x5227ee<0x7;_0x5227ee++){if(!availabilityPattern[_0x5227ee])availabilityPattern[_0x5227ee]=[];const _0x3daeb9=availabilityPattern[_0x5227ee][_0x57706a(0x1ea)](_0x1bcf11);if(_0x3e1eb3){if(_0x3daeb9===-0x1)availabilityPattern[_0x5227ee][_0x57706a(0x204)](_0x1bcf11);}else{if(_0x3daeb9!==-0x1)availabilityPattern[_0x5227ee][_0x57706a(0x2f9)](_0x3daeb9,0x1);}}renderPatternEditor();}function renderPCol(_0x35e577,_0x116a2f){const _0x40a521=a2_0x559b49;_0x35e577[_0x40a521(0x257)]='';const _0x449d4c=Math[_0x40a521(0x2c8)](_0x35e577[_0x40a521(0x206)]);(availabilityPattern[_0x116a2f]||[])[_0x40a521(0x251)](_0x39f515=>{const _0x27f0c4=_0x40a521,_0x24aa17=document[_0x27f0c4(0x2fe)]('div');_0x24aa17['className']=_0x27f0c4(0x1fb);const _0x1c2274=_0x39f515*GRID_H;_0x24aa17[_0x27f0c4(0x2b6)][_0x27f0c4(0x229)]=_0x1c2274+'px',_0x24aa17[_0x27f0c4(0x2b6)][_0x27f0c4(0x2c4)]='-'+_0x449d4c+'px\x20-'+_0x1c2274+'px',_0x24aa17['onclick']=_0x3f6a83=>{const _0x191fe0=_0x27f0c4;_0x3f6a83[_0x191fe0(0x220)](),toggleSinglePattern(_0x116a2f,_0x39f515);},_0x35e577[_0x27f0c4(0x2eb)](_0x24aa17);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x28252b=a2_0x559b49,_0x38e239=new Date(),_0xd5947c=document['getElementById']('globalTimeLine'),_0x142c24=document[_0x28252b(0x27b)](_0x28252b(0x1ce)),_0x59bbb1=(_0x38e239[_0x28252b(0x25c)]()*0x3c+_0x38e239['getMinutes']())/0x3c*GRID_H;_0xd5947c[_0x28252b(0x2b6)][_0x28252b(0x229)]=_0x59bbb1+'px',_0xd5947c[_0x28252b(0x2b6)][_0x28252b(0x2d5)]=_0x28252b(0x286),_0x142c24[_0x28252b(0x19a)]=String(_0x38e239[_0x28252b(0x25c)]())[_0x28252b(0x23e)](0x2,'0')+':'+String(_0x38e239[_0x28252b(0x2e7)]())[_0x28252b(0x23e)](0x2,'0'),_0x142c24[_0x28252b(0x2b6)][_0x28252b(0x2d5)]='block',_0x142c24['style']['top']=_0x59bbb1+'px';}document[a2_0x559b49(0x297)]('DOMContentLoaded',init);function openDayOptions(_0x187ab9){const _0x79dd2d=a2_0x559b49;selectedDayForOptions=_0x187ab9;const _0xca274e=new Date(_0x187ab9),_0x2ae460={'weekday':'long','day':'numeric','month':_0x79dd2d(0x302),'year':_0x79dd2d(0x281)},_0x3001f5=_0xca274e['toLocaleDateString']('ru-RU',_0x2ae460);document[_0x79dd2d(0x27b)]('doDateHeader')[_0x79dd2d(0x19a)]=_0x3001f5[_0x79dd2d(0x1f3)](0x0)[_0x79dd2d(0x226)]()+_0x3001f5[_0x79dd2d(0x276)](0x1);let _0x468c39=_0xca274e['getDay']()-0x1;if(_0x468c39===-0x1)_0x468c39=0x6;const _0x17601d=availabilityPattern[_0x468c39]||[],_0x18f68a=0x18-_0x17601d['length'],_0x7e0b4c=_0x18f68a*0x3c,_0x57f8bf=sessions['filter'](_0x274207=>_0x274207[_0x79dd2d(0x2fb)]===_0x187ab9&&_0x274207[_0x79dd2d(0x280)]!=='cancelled');let _0x55d5f3=_0x57f8bf[_0x79dd2d(0x24b)](_0xa1657b=>{const _0x1df48a=_0x79dd2d,[_0x40e0e0,_0x6372da]=_0xa1657b['start'][_0x1df48a(0x291)](':')[_0x1df48a(0x24b)](Number),[_0x14f9b2,_0x2a80a4]=_0xa1657b['end'][_0x1df48a(0x291)](':')[_0x1df48a(0x24b)](Number);return[_0x40e0e0*0x3c+_0x6372da,_0x14f9b2*0x3c+_0x2a80a4];});_0x55d5f3[_0x79dd2d(0x1a5)]((_0x328296,_0x31d4f5)=>_0x328296[0x0]-_0x31d4f5[0x0]);let _0x5f3b4a=[];if(_0x55d5f3[_0x79dd2d(0x228)]>0x0){let _0x10db52=_0x55d5f3[0x0];for(let _0x23e3b4=0x1;_0x23e3b4<_0x55d5f3['length'];_0x23e3b4++){_0x55d5f3[_0x23e3b4][0x0]<_0x10db52[0x1]?_0x10db52[0x1]=Math[_0x79dd2d(0x2cc)](_0x10db52[0x1],_0x55d5f3[_0x23e3b4][0x1]):(_0x5f3b4a[_0x79dd2d(0x204)](_0x10db52),_0x10db52=_0x55d5f3[_0x23e3b4]);}_0x5f3b4a[_0x79dd2d(0x204)](_0x10db52);}let _0x2b142b=0x0;_0x5f3b4a[_0x79dd2d(0x251)](_0x3d5250=>_0x2b142b+=_0x3d5250[0x1]-_0x3d5250[0x0]),document[_0x79dd2d(0x27b)](_0x79dd2d(0x28d))[_0x79dd2d(0x19a)]=formatMinsToHrs(_0x7e0b4c),document[_0x79dd2d(0x27b)](_0x79dd2d(0x1d6))['textContent']=formatMinsToHrs(_0x2b142b);const _0x3b9a3b=_0x7e0b4c>0x0?Math[_0x79dd2d(0x2c8)](_0x2b142b/_0x7e0b4c*0x64):0x0,_0x3dd853=document[_0x79dd2d(0x27b)](_0x79dd2d(0x232));_0x3dd853[_0x79dd2d(0x19a)]=_0x3b9a3b+'%';const _0x42d3ed=document[_0x79dd2d(0x27b)](_0x79dd2d(0x2d7));if(_0x3b9a3b>0x64)_0x3dd853[_0x79dd2d(0x2b6)][_0x79dd2d(0x194)]=_0x79dd2d(0x290),_0x42d3ed['style']['borderColor']='rgba(255,\x2069,\x2058,\x200.3)';else _0x3b9a3b>0x50?(_0x3dd853[_0x79dd2d(0x2b6)]['color']=_0x79dd2d(0x265),_0x42d3ed[_0x79dd2d(0x2b6)][_0x79dd2d(0x21b)]=_0x79dd2d(0x22e)):(_0x3dd853[_0x79dd2d(0x2b6)][_0x79dd2d(0x194)]='var(--acc-green)',_0x42d3ed[_0x79dd2d(0x2b6)][_0x79dd2d(0x21b)]=_0x79dd2d(0x2e5));const _0x329a67=document['getElementById'](_0x79dd2d(0x288));_0x329a67[_0x79dd2d(0x257)]='';_0x57f8bf['length']===0x0?_0x329a67[_0x79dd2d(0x257)]='<div\x20class=\x22de-empty\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>':(_0x57f8bf[_0x79dd2d(0x1a5)]((_0x3d076a,_0xcec3fd)=>_0x3d076a[_0x79dd2d(0x1a7)]['localeCompare'](_0xcec3fd[_0x79dd2d(0x1a7)])),_0x57f8bf[_0x79dd2d(0x251)](_0x25d6e7=>{const _0x488275=_0x79dd2d,_0x18a99e=clients[_0x488275(0x23f)](_0x36eb02=>_0x36eb02[_0x488275(0x306)]===_0x25d6e7['client']),_0x19a5ae=_0x18a99e?_0x18a99e[_0x488275(0x194)]:'#fff',_0x529581=_0x25d6e7[_0x488275(0x280)]===_0x488275(0x21c),_0x1494eb=_0x529581?_0x488275(0x254):'',_0x5f20ef=document['createElement'](_0x488275(0x227));_0x5f20ef['className']='de-item',_0x5f20ef[_0x488275(0x2b6)][_0x488275(0x2df)]=_0x19a5ae,_0x5f20ef['innerHTML']=_0x488275(0x2bc)+_0x25d6e7['start']+_0x488275(0x237)+_0x25d6e7[_0x488275(0x2f7)]+_0x488275(0x21d)+_0x25d6e7[_0x488275(0x1b5)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1494eb+_0x488275(0x1e6),_0x329a67[_0x488275(0x2eb)](_0x5f20ef);}));const _0x3fec1f=document[_0x79dd2d(0x27b)](_0x79dd2d(0x1de)),_0x658055=dateExceptions[_0x187ab9]===_0x79dd2d(0x1e8);_0x658055?(_0x3fec1f[_0x79dd2d(0x19a)]='–°–¥–µ–ª–∞—Ç—å\x20—Ä–∞–±–æ—á–∏–º\x20–¥–Ω–µ–º',_0x3fec1f[_0x79dd2d(0x1f1)]=_0x79dd2d(0x230),_0x3fec1f[_0x79dd2d(0x2b6)][_0x79dd2d(0x194)]=_0x79dd2d(0x2f4),_0x3fec1f[_0x79dd2d(0x2b6)]['background']=_0x79dd2d(0x222)):(_0x3fec1f[_0x79dd2d(0x19a)]='–°–¥–µ–ª–∞—Ç—å\x20–≤—ã—Ö–æ–¥–Ω—ã–º',_0x3fec1f[_0x79dd2d(0x1f1)]=_0x79dd2d(0x1fd),_0x3fec1f[_0x79dd2d(0x2b6)]['color']='var(--acc-red)',_0x3fec1f[_0x79dd2d(0x2b6)][_0x79dd2d(0x1fe)]=_0x79dd2d(0x260)),openSheet(_0x79dd2d(0x218));}let currentAnPeriod=a2_0x559b49(0x2f0);function openAnalytics(){const _0x1ea3ea=a2_0x559b49,_0x44832c=document[_0x1ea3ea(0x2a0)](_0x1ea3ea(0x285));setAnalyticsPeriod('week',_0x44832c),closeAllSheets(),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x4441d1,_0x37dda4){const _0x1d6c01=a2_0x559b49;currentAnPeriod=_0x4441d1,document[_0x1d6c01(0x1b7)](_0x1d6c01(0x285))[_0x1d6c01(0x251)](_0x41e476=>_0x41e476[_0x1d6c01(0x278)][_0x1d6c01(0x2dc)](_0x1d6c01(0x1e1)));if(_0x37dda4)_0x37dda4[_0x1d6c01(0x278)][_0x1d6c01(0x2b9)](_0x1d6c01(0x1e1));const _0x38be4b=document[_0x1d6c01(0x27b)](_0x1d6c01(0x23c));_0x38be4b['style'][_0x1d6c01(0x2d5)]=_0x4441d1===_0x1d6c01(0x2fc)?_0x1d6c01(0x263):_0x1d6c01(0x2ff);const _0x1bd8f5=new Date();let _0x1553a3=new Date(),_0x14204c=new Date();if(_0x4441d1===_0x1d6c01(0x2f0))_0x1553a3=getStartOfWeek(_0x1bd8f5),_0x14204c=new Date(_0x1553a3),_0x14204c[_0x1d6c01(0x1df)](_0x14204c[_0x1d6c01(0x2c9)]()+0x6);else{if(_0x4441d1===_0x1d6c01(0x1f0))_0x1553a3=new Date(_0x1bd8f5[_0x1d6c01(0x1b3)](),_0x1bd8f5[_0x1d6c01(0x1b8)](),0x1),_0x14204c=new Date(_0x1bd8f5[_0x1d6c01(0x1b3)](),_0x1bd8f5[_0x1d6c01(0x1b8)]()+0x1,0x0);else{!document[_0x1d6c01(0x27b)](_0x1d6c01(0x2a8))['value']&&(document[_0x1d6c01(0x27b)](_0x1d6c01(0x2a8))[_0x1d6c01(0x279)]=getLocalDateStr(_0x1bd8f5),document['getElementById'](_0x1d6c01(0x2a6))[_0x1d6c01(0x279)]=getLocalDateStr(_0x1bd8f5));refreshAnalytics();return;}}document['getElementById'](_0x1d6c01(0x2a8))[_0x1d6c01(0x279)]=getLocalDateStr(_0x1553a3),document[_0x1d6c01(0x27b)](_0x1d6c01(0x2a6))[_0x1d6c01(0x279)]=getLocalDateStr(_0x14204c),refreshAnalytics();}function refreshAnalytics(){const _0x9d20b6=a2_0x559b49,_0x29aab0=document[_0x9d20b6(0x27b)]('anStart')[_0x9d20b6(0x279)],_0x5e91b8=document[_0x9d20b6(0x27b)](_0x9d20b6(0x2a6))[_0x9d20b6(0x279)];if(!_0x29aab0||!_0x5e91b8)return;const _0x4aac2a=sessions[_0x9d20b6(0x22f)](_0x31579c=>_0x31579c[_0x9d20b6(0x2fb)]>=_0x29aab0&&_0x31579c[_0x9d20b6(0x2fb)]<=_0x5e91b8&&_0x31579c[_0x9d20b6(0x280)]!==_0x9d20b6(0x1e7)),_0x186c39=_0x4aac2a['length'],_0x1d890e=_0x4aac2a[_0x9d20b6(0x22f)](_0x5aaee7=>_0x5aaee7['status']==='completed')[_0x9d20b6(0x228)],_0x12cf19=_0x186c39>0x0?Math[_0x9d20b6(0x2c8)](_0x1d890e/_0x186c39*0x64):0x0;document[_0x9d20b6(0x27b)]('anPercent')[_0x9d20b6(0x19a)]=_0x12cf19+'%',document[_0x9d20b6(0x27b)]('anTotalStats')['textContent']=_0x1d890e+'\x20–∏–∑\x20'+_0x186c39+_0x9d20b6(0x289);const _0x573b0d=document[_0x9d20b6(0x27b)](_0x9d20b6(0x23d)),_0xac3469=0x2*Math['PI']*0x23,_0x4bbdcb=_0xac3469-_0x12cf19/0x64*_0xac3469;_0x573b0d[_0x9d20b6(0x2b6)][_0x9d20b6(0x27c)]=_0x4bbdcb;const _0x591cdb={};_0x4aac2a[_0x9d20b6(0x251)](_0x2a7eff=>{const _0x4737fb=_0x9d20b6;if(!_0x591cdb[_0x2a7eff['client']]){const _0x39355b=clients['find'](_0x3bf564=>_0x3bf564[_0x4737fb(0x306)]===_0x2a7eff[_0x4737fb(0x1b5)]);_0x591cdb[_0x2a7eff[_0x4737fb(0x1b5)]]={'total':0x0,'done':0x0,'color':_0x39355b?_0x39355b[_0x4737fb(0x194)]:_0x4737fb(0x20e)};}_0x591cdb[_0x2a7eff[_0x4737fb(0x1b5)]][_0x4737fb(0x309)]++;if(_0x2a7eff[_0x4737fb(0x280)]===_0x4737fb(0x21c))_0x591cdb[_0x2a7eff[_0x4737fb(0x1b5)]][_0x4737fb(0x1c5)]++;});const _0x249a20=document['getElementById'](_0x9d20b6(0x1ac));_0x249a20[_0x9d20b6(0x257)]='';const _0x14e7a4=Object['entries'](_0x591cdb)[_0x9d20b6(0x1a5)]((_0x2405fe,_0x175fd9)=>_0x175fd9[0x1][_0x9d20b6(0x309)]-_0x2405fe[0x1]['total']);if(_0x14e7a4[_0x9d20b6(0x228)]===0x0){_0x249a20[_0x9d20b6(0x257)]=_0x9d20b6(0x23a);return;}_0x14e7a4[_0x9d20b6(0x251)](([_0x49692e,_0x18c210])=>{const _0x28fb36=_0x9d20b6,_0x34498a=Math[_0x28fb36(0x2c8)](_0x18c210[_0x28fb36(0x1c5)]/_0x18c210['total']*0x64),_0x19588c=document['createElement']('div');_0x19588c[_0x28fb36(0x1f1)]='client-stat-card',_0x19588c[_0x28fb36(0x2b6)]['borderLeftColor']=_0x18c210[_0x28fb36(0x194)],_0x19588c[_0x28fb36(0x257)]=_0x28fb36(0x1e3)+_0x49692e+_0x28fb36(0x219)+_0x18c210[_0x28fb36(0x1c5)]+'</span>\x20/\x20'+_0x18c210['total']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x34498a+_0x28fb36(0x282),_0x249a20[_0x28fb36(0x2eb)](_0x19588c);});}function formatMinsToHrs(_0x2f94c2){const _0x442dc3=a2_0x559b49;if(_0x2f94c2===0x0)return'0';const _0x5eaf23=Math[_0x442dc3(0x214)](_0x2f94c2/0x3c),_0x54e814=_0x2f94c2%0x3c;if(_0x54e814===0x0)return _0x5eaf23+'—á';return _0x5eaf23+'—á\x20'+_0x54e814+'–º';}