const a2_0x143044=a2_0x56f0;(function(_0x39d720,_0x34ff47){const _0x5be1d2=a2_0x56f0,_0x157f25=_0x39d720();while(!![]){try{const _0x4076c0=-parseInt(_0x5be1d2(0x202))/0x1*(-parseInt(_0x5be1d2(0x257))/0x2)+parseInt(_0x5be1d2(0x2d7))/0x3+parseInt(_0x5be1d2(0x22f))/0x4*(parseInt(_0x5be1d2(0x241))/0x5)+parseInt(_0x5be1d2(0x233))/0x6+-parseInt(_0x5be1d2(0x25d))/0x7+-parseInt(_0x5be1d2(0x24f))/0x8+-parseInt(_0x5be1d2(0x26b))/0x9;if(_0x4076c0===_0x34ff47)break;else _0x157f25['push'](_0x157f25['shift']());}catch(_0x5933a6){_0x157f25['push'](_0x157f25['shift']());}}}(a2_0x1725,0xbc8cf),function initTMA(){const _0x1aa3a2=a2_0x56f0,_0x227611=(function(){let _0x8900a3=!![];return function(_0x488e44,_0x2812b9){const _0x8f0092=_0x8900a3?function(){const _0x58bd58=a2_0x56f0;if(_0x2812b9){const _0xae359e=_0x2812b9[_0x58bd58(0x239)](_0x488e44,arguments);return _0x2812b9=null,_0xae359e;}}:function(){};return _0x8900a3=![],_0x8f0092;};}()),_0x7c6166=_0x227611(this,function(){const _0x357f91=a2_0x56f0;return _0x7c6166['toString']()[_0x357f91(0x33e)](_0x357f91(0x238))[_0x357f91(0x2af)]()[_0x357f91(0x2a8)](_0x7c6166)[_0x357f91(0x33e)](_0x357f91(0x238));});_0x7c6166();try{const _0x2d1bcd=window[_0x1aa3a2(0x250)]?.[_0x1aa3a2(0x219)];if(!_0x2d1bcd)return;_0x2d1bcd[_0x1aa3a2(0x27f)](),_0x2d1bcd[_0x1aa3a2(0x20b)]();try{_0x2d1bcd[_0x1aa3a2(0x1db)](_0x1aa3a2(0x295)),_0x2d1bcd['setBackgroundColor']&&_0x2d1bcd[_0x1aa3a2(0x294)](_0x1aa3a2(0x295));}catch(_0x2e0271){console[_0x1aa3a2(0x205)](_0x1aa3a2(0x331),_0x2e0271);}try{_0x2d1bcd[_0x1aa3a2(0x2e4)]&&(_0x2d1bcd[_0x1aa3a2(0x2e4)][_0x1aa3a2(0x2b8)](),_0x2d1bcd[_0x1aa3a2(0x2e4)][_0x1aa3a2(0x2fa)](),_0x2d1bcd[_0x1aa3a2(0x2e4)][_0x1aa3a2(0x2df)](function(){const _0x10747b=_0x1aa3a2;window['location'][_0x10747b(0x2ce)]=_0x10747b(0x235);}));}catch(_0x550454){console[_0x1aa3a2(0x205)](_0x1aa3a2(0x224),_0x550454);}try{if(_0x2d1bcd[_0x1aa3a2(0x236)])_0x2d1bcd[_0x1aa3a2(0x236)]();}catch(_0xab2559){}}catch(_0x485e5b){console[_0x1aa3a2(0x362)](_0x1aa3a2(0x256),_0x485e5b);}}());function isAdmin(){const _0x2e3846=a2_0x56f0;try{const _0x4d3981=Number(window['Telegram']?.[_0x2e3846(0x219)]?.[_0x2e3846(0x332)]?.[_0x2e3846(0x1e4)]?.['id']);return _0x4d3981===0xbaf7174;}catch(_0x586dd0){return![];}}const APP_VERSION=a2_0x143044(0x1eb),API_URL=a2_0x143044(0x2a2),GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x143044(0x23b),KEY_SESSIONS=a2_0x143044(0x325),KEY_SETTINGS=a2_0x143044(0x34d);let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x1522dd=a2_0x143044;return window[_0x1522dd(0x250)]?.[_0x1522dd(0x219)]?.[_0x1522dd(0x332)]?.['user']?.['id']||_0x1522dd(0x25f);},'saveLocally'(){const _0xd0b098=a2_0x143044;try{localStorage[_0xd0b098(0x266)](KEY_CLIENTS,JSON[_0xd0b098(0x321)](clients)),localStorage[_0xd0b098(0x266)](KEY_SESSIONS,JSON[_0xd0b098(0x321)](sessions)),localStorage[_0xd0b098(0x266)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x534c8b){console[_0xd0b098(0x362)](_0xd0b098(0x1e5),_0x534c8b);}},'loadLocal'(){const _0x211290=a2_0x143044;try{const _0x18064b=localStorage[_0x211290(0x22b)](KEY_CLIENTS);if(_0x18064b)clients=JSON[_0x211290(0x350)](_0x18064b);const _0x2c8975=localStorage[_0x211290(0x22b)](KEY_SESSIONS);if(_0x2c8975)sessions=JSON['parse'](_0x2c8975);const _0x306d30=localStorage[_0x211290(0x22b)](KEY_SETTINGS);if(_0x306d30){const _0x42c049=JSON[_0x211290(0x350)](_0x306d30);if(_0x42c049['pattern'])availabilityPattern=_0x42c049[_0x211290(0x2bf)];if(_0x42c049['exceptions'])dateExceptions=_0x42c049[_0x211290(0x330)];if(_0x42c049[_0x211290(0x2f5)])specialRanges=_0x42c049[_0x211290(0x2f5)];}else{for(let _0x418249=0x0;_0x418249<0x7;_0x418249++)availabilityPattern[_0x418249]=Array['from']({'length':0xc},(_0x3510e2,_0x1fb6f8)=>_0x1fb6f8+0x9);}}catch(_0x3fd771){console[_0x211290(0x362)](_0x211290(0x1f1),_0x3fd771);}},async 'fetchFromServer'(_0x17d935,_0x26d7a9={}){const _0x1efdd1=a2_0x143044,_0x4d29cb=window[_0x1efdd1(0x250)]?.[_0x1efdd1(0x219)],_0x54a7cd={'action':_0x17d935,'init_data':_0x4d29cb?.['initData']||'',..._0x26d7a9};try{const _0x3ba353=await fetch(API_URL,{'method':_0x1efdd1(0x24e),'headers':{'Content-Type':'text/plain;charset=UTF-8'},'body':JSON[_0x1efdd1(0x321)](_0x54a7cd)}),_0x47be61=await _0x3ba353[_0x1efdd1(0x33a)]();if(!_0x47be61['ok'])throw new Error(_0x47be61[_0x1efdd1(0x362)]||_0x1efdd1(0x33c));return _0x47be61[_0x1efdd1(0x2f6)];}catch(_0x1850aa){console[_0x1efdd1(0x362)](_0x1efdd1(0x2b3)+_0x17d935+_0x1efdd1(0x274),_0x1850aa);throw _0x1850aa;}},async 'syncLoad'(){const _0x3d18ad=a2_0x143044,_0x401a3b=new Date(),_0x21c4db=_0x401a3b[_0x3d18ad(0x292)]()+'-'+String(_0x401a3b['getMonth']()+0x1)[_0x3d18ad(0x2ea)](0x2,'0'),_0x952a07=new Date(_0x401a3b);_0x952a07['setMonth'](_0x401a3b[_0x3d18ad(0x1f0)]()+0x1);const _0x5af7df=_0x952a07['getFullYear']()+'-'+String(_0x952a07['getMonth']()+0x1)[_0x3d18ad(0x2ea)](0x2,'0'),_0x471ea5=Date[_0x3d18ad(0x23f)]();console[_0x3d18ad(0x205)](_0x3d18ad(0x313)+_0x21c4db+',\x20'+_0x5af7df+_0x3d18ad(0x23a));try{const [_0x1ea9d5,_0x6f123b]=await Promise[_0x3d18ad(0x1f4)]([this[_0x3d18ad(0x1e3)](_0x3d18ad(0x259),{'month_str':_0x21c4db}),this['fetchFromServer'](_0x3d18ad(0x259),{'month_str':_0x5af7df})]);if(lastUserActionTime>_0x471ea5)return console[_0x3d18ad(0x26a)]('[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response'),![];return this[_0x3d18ad(0x2ee)](_0x1ea9d5,_0x21c4db),this[_0x3d18ad(0x2ee)](_0x6f123b,_0x5af7df),this['saveLocally'](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0x58bcd2){console[_0x3d18ad(0x362)](_0x58bcd2);throw _0x58bcd2;}},'mergeServerData'(_0x51d7da,_0x54e9dd){const _0x145fa9=a2_0x143044;if(!_0x51d7da)return;_0x51d7da[_0x145fa9(0x242)]&&Array[_0x145fa9(0x31d)](_0x51d7da[_0x145fa9(0x242)])&&(clients=_0x51d7da[_0x145fa9(0x242)]);if(_0x51d7da[_0x145fa9(0x2fc)]){if(_0x51d7da[_0x145fa9(0x2fc)][_0x145fa9(0x2bf)])availabilityPattern=_0x51d7da[_0x145fa9(0x2fc)][_0x145fa9(0x2bf)];if(_0x51d7da['settings'][_0x145fa9(0x330)])dateExceptions=_0x51d7da[_0x145fa9(0x2fc)]['exceptions'];if(_0x51d7da[_0x145fa9(0x2fc)][_0x145fa9(0x2f5)])specialRanges=_0x51d7da[_0x145fa9(0x2fc)][_0x145fa9(0x2f5)];if(_0x51d7da[_0x145fa9(0x2fc)][_0x145fa9(0x33d)]){localStorage[_0x145fa9(0x266)](_0x145fa9(0x24a),_0x51d7da['settings'][_0x145fa9(0x33d)]);const _0x1594f4=document[_0x145fa9(0x225)](_0x145fa9(0x1ec));if(_0x1594f4)_0x1594f4[_0x145fa9(0x327)]=_0x51d7da[_0x145fa9(0x2fc)][_0x145fa9(0x33d)];}}_0x51d7da[_0x145fa9(0x2ba)]&&(sessions=sessions['filter'](_0x4334e9=>!_0x4334e9[_0x145fa9(0x29a)]['startsWith'](_0x54e9dd)),Object[_0x145fa9(0x1e0)](_0x51d7da[_0x145fa9(0x2ba)])[_0x145fa9(0x27c)](_0x3a25f5=>{const _0x2f2d5e=_0x145fa9,_0x5da2d0=_0x51d7da['calendar'][_0x3a25f5];_0x5da2d0[_0x2f2d5e(0x27c)](_0x117381=>{const _0x2ce07f=_0x2f2d5e,_0x5699cc=clients[_0x2ce07f(0x216)](_0x2dac87=>String(_0x2dac87['id'])===String(_0x117381['c']));sessions[_0x2ce07f(0x293)]({'id':_0x117381['i'],'clientId':_0x117381['c'],'client':_0x5699cc?_0x5699cc[_0x2ce07f(0x211)]:_0x2ce07f(0x2b6),'dateStr':_0x54e9dd+'-'+_0x3a25f5[_0x2ce07f(0x2ea)](0x2,'0'),'start':_0x117381['s'],'end':_0x117381['e'],'status':_0x117381['st']||'planned','note':_0x117381['n']||'','seriesId':_0x117381[_0x2ce07f(0x263)]||null});});}));},async 'syncBatch'(_0x5f2a18){const _0x422095=a2_0x143044,_0x5c8b21=[...new Set(_0x5f2a18)],_0x2db156=_0x5c8b21[_0x422095(0x214)](_0x328523=>{const _0xf954b8=_0x422095,_0x2ced1a=sessions[_0xf954b8(0x2f0)](_0x27eb94=>_0x27eb94[_0xf954b8(0x29a)]===_0x328523&&_0x27eb94[_0xf954b8(0x1ee)]!==_0xf954b8(0x1e6)),_0x51a3f8=_0x2ced1a[_0xf954b8(0x214)](_0x265a47=>({'i':_0x265a47['id'],'c':_0x265a47[_0xf954b8(0x20d)],'s':_0x265a47['start'],'e':_0x265a47['end'],'st':_0x265a47[_0xf954b8(0x1ee)],'n':_0x265a47[_0xf954b8(0x2a0)],'sid':_0x265a47[_0xf954b8(0x2c4)]}));return{'date':_0x328523,'day_data':_0x51a3f8};});if(_0x2db156[_0x422095(0x2eb)]===0x0)return;console[_0x422095(0x205)](_0x422095(0x20c)+_0x2db156['length']+'\x20days'),await this['fetchFromServer']('batch_sync',{'changes':_0x2db156});}};async function init(){const _0x55dcbb=a2_0x143044;DataManager[_0x55dcbb(0x304)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x55dcbb(0x225)](_0x55dcbb(0x2ab))[_0x55dcbb(0x24c)](_0x55dcbb(0x2ac),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x55dcbb(0x287)]()['then'](()=>{const _0x4b9f6d=_0x55dcbb;showToast(_0x4b9f6d(0x1f3),!![]);})['catch'](_0x29c1f0=>{const _0x3c51d9=_0x55dcbb;showToast(_0x3c51d9(0x1f6),![]);});}function generateId(){const _0x354e48=a2_0x143044;return Date[_0x354e48(0x23f)]()[_0x354e48(0x2af)](0x24)+Math[_0x354e48(0x269)]()[_0x354e48(0x2af)](0x24)[_0x354e48(0x21c)](0x2,0x5);}function toggleSeriesInput(){const _0x47a1dc=a2_0x143044,_0x4d0d22=document[_0x47a1dc(0x225)](_0x47a1dc(0x2cb))[_0x47a1dc(0x280)],_0x2dcc1f=document[_0x47a1dc(0x225)]('seriesCountContainer');_0x2dcc1f['style']['display']=_0x4d0d22?'block':_0x47a1dc(0x2c1);const _0x414bff=document[_0x47a1dc(0x225)](_0x47a1dc(0x32b));_0x414bff['style'][_0x47a1dc(0x24b)]=_0x4d0d22?_0x47a1dc(0x2d0):_0x47a1dc(0x23e);}function openAddSession(_0x483743){const _0x2a33de=a2_0x143044;editingId=null,populateClientSelect(),document[_0x2a33de(0x225)]('sheetTitle')[_0x2a33de(0x2d6)]='Новая\x20запись',document[_0x2a33de(0x225)](_0x2a33de(0x303))[_0x2a33de(0x1ef)][_0x2a33de(0x291)]=_0x2a33de(0x2c1),document[_0x2a33de(0x225)](_0x2a33de(0x1ff))['style'][_0x2a33de(0x291)]=_0x2a33de(0x2c1);const _0x476335=document[_0x2a33de(0x225)]('recurringOptionContainer'),_0x51d63e=document[_0x2a33de(0x225)](_0x2a33de(0x1ed));_0x476335[_0x2a33de(0x1ef)][_0x2a33de(0x291)]=_0x2a33de(0x2b1),_0x476335[_0x2a33de(0x1ef)][_0x2a33de(0x24b)]='10px',document[_0x2a33de(0x225)]('inpRecurring')[_0x2a33de(0x280)]=![],document[_0x2a33de(0x225)](_0x2a33de(0x365))[_0x2a33de(0x327)]=0x4,_0x51d63e['style'][_0x2a33de(0x291)]=_0x2a33de(0x2c1),document['getElementById'](_0x2a33de(0x32a))[_0x2a33de(0x327)]=getLocalDateStr(_0x483743),updateDateDisplay();const _0x43982e=_0x483743[_0x2a33de(0x359)]();document[_0x2a33de(0x225)](_0x2a33de(0x2de))[_0x2a33de(0x327)]=String(_0x43982e)[_0x2a33de(0x2ea)](0x2,'0')+_0x2a33de(0x34b),document[_0x2a33de(0x225)](_0x2a33de(0x2e8))[_0x2a33de(0x327)]=String(_0x43982e+0x1)['padStart'](0x2,'0')+_0x2a33de(0x34b),openSheet(_0x2a33de(0x255));}function openEdit(_0x3558f5){const _0x579fdc=a2_0x143044;editingId=_0x3558f5['id'],populateClientSelect(),document[_0x579fdc(0x225)](_0x579fdc(0x35b))[_0x579fdc(0x2d6)]=_0x579fdc(0x312),document[_0x579fdc(0x225)]('btnDelete')[_0x579fdc(0x1ef)][_0x579fdc(0x291)]=_0x579fdc(0x2cf);const _0x4a83d6=document[_0x579fdc(0x225)](_0x579fdc(0x1ff));_0x4a83d6['style'][_0x579fdc(0x291)]='flex';_0x3558f5[_0x579fdc(0x1ee)]==='completed'?(_0x4a83d6[_0x579fdc(0x316)]=_0x579fdc(0x27b),_0x4a83d6[_0x579fdc(0x358)]=_0x579fdc(0x341)):(_0x4a83d6[_0x579fdc(0x316)]=_0x579fdc(0x254),_0x4a83d6['innerHTML']=_0x579fdc(0x246));const _0x1ad991=!!_0x3558f5['seriesId'];document['getElementById'](_0x579fdc(0x32b))[_0x579fdc(0x1ef)]['display']='none',document['getElementById'](_0x579fdc(0x1ed))[_0x579fdc(0x1ef)]['display']='none',_0x1ad991?(document[_0x579fdc(0x225)](_0x579fdc(0x344))[_0x579fdc(0x1ef)][_0x579fdc(0x291)]=_0x579fdc(0x2b1),document[_0x579fdc(0x225)]('patternInfoBox')[_0x579fdc(0x1e1)](_0x579fdc(0x30d))[_0x579fdc(0x2d6)]=_0x579fdc(0x243)):document['getElementById'](_0x579fdc(0x344))['style'][_0x579fdc(0x291)]=_0x579fdc(0x2c1),document['getElementById'](_0x579fdc(0x361))[_0x579fdc(0x327)]=_0x3558f5[_0x579fdc(0x2a4)],document['getElementById'](_0x579fdc(0x32a))[_0x579fdc(0x327)]=_0x3558f5[_0x579fdc(0x29a)],document[_0x579fdc(0x225)](_0x579fdc(0x2de))[_0x579fdc(0x327)]=_0x3558f5['start'],document[_0x579fdc(0x225)](_0x579fdc(0x2e8))[_0x579fdc(0x327)]=_0x3558f5[_0x579fdc(0x31b)],document[_0x579fdc(0x225)]('inpNote')[_0x579fdc(0x327)]=_0x3558f5['note']||'',updateDateDisplay(),openSheet('sessionSheet');}async function trySaveSession(){const _0xa62595=a2_0x143044,_0x49c850=document[_0xa62595(0x225)](_0xa62595(0x361))[_0xa62595(0x327)],_0x2df56a=document[_0xa62595(0x225)](_0xa62595(0x32a))['value'],_0x5ec84c=document[_0xa62595(0x225)](_0xa62595(0x2de))['value'],_0x5ba60b=document['getElementById'](_0xa62595(0x2e8))[_0xa62595(0x327)],_0x38d57d=document[_0xa62595(0x225)](_0xa62595(0x2e5))['value'],_0x3638f4=document['getElementById']('inpRecurring')[_0xa62595(0x280)];let _0x3b64a9=0x4;if(_0x3638f4){const _0x362349=parseInt(document['getElementById'](_0xa62595(0x365))[_0xa62595(0x327)]);if(!_0x362349||_0x362349<0x2){showToast(_0xa62595(0x22d),![]);return;}if(_0x362349>0x64){showToast(_0xa62595(0x31a),![]);return;}_0x3b64a9=_0x362349;}const _0x37f19d=clients['find'](_0x2fba12=>_0x2fba12[_0xa62595(0x211)]===_0x49c850);if(!_0x37f19d){showToast(_0xa62595(0x2d2),![]);return;}const _0x894010=validateAppointment(_0x2df56a,_0x5ec84c,_0x5ba60b,editingId,_0x37f19d['id']);if(!_0x894010[_0xa62595(0x200)]){showToast(_0x894010[_0xa62595(0x2c8)],![]);return;}_0x894010[_0xa62595(0x212)]&&showToast(_0x894010[_0xa62595(0x212)],![]);const _0x3117ce={'client':_0x49c850,'clientId':_0x37f19d['id'],'start':_0x5ec84c,'end':_0x5ba60b,'note':_0x38d57d,'status':'planned'},_0xd73b72=editingId?sessions[_0xa62595(0x216)](_0x3fca83=>_0x3fca83['id']===editingId):null;if(_0xd73b72&&_0xd73b72[_0xa62595(0x2c4)]){tempSessionData={..._0x3117ce,'dateStr':_0x2df56a,'id':editingId,'seriesId':_0xd73b72[_0xa62595(0x2c4)]},openActionSheet(_0xa62595(0x348));return;}let _0x5d6bf8=null;if(!editingId)_0x5d6bf8=_0xa62595(0x26f);else{if(_0xd73b72){if(String(_0xd73b72[_0xa62595(0x20d)])!==String(_0x37f19d['id']))console['log']('[Notify]\x20Client\x20SWAP\x20detected'),NotificationManager[_0xa62595(0x35c)](_0xa62595(0x318),_0xd73b72),_0x5d6bf8=_0xa62595(0x26f);else(_0xd73b72['start']!==_0x5ec84c||_0xd73b72[_0xa62595(0x31b)]!==_0x5ba60b||_0xd73b72[_0xa62595(0x29a)]!==_0x2df56a)&&(_0x5d6bf8='update');}}if(!editingId&&_0x3638f4){createBatchSeries(_0x3117ce,_0x2df56a,_0x3b64a9),NotificationManager[_0xa62595(0x35c)](_0xa62595(0x26f),{..._0x3117ce,'dateStr':_0x2df56a});return;}lastUserActionTime=Date[_0xa62595(0x23f)]();const _0x18717b={..._0x3117ce,'dateStr':_0x2df56a,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x18717b),_0x5d6bf8&&NotificationManager[_0xa62595(0x35c)](_0x5d6bf8,_0x18717b);}function toggleSessionStatus(){const _0x2c9a39=a2_0x143044;lastUserActionTime=Date[_0x2c9a39(0x23f)]();const _0x4bc619=sessions[_0x2c9a39(0x216)](_0x13c998=>_0x13c998['id']===editingId);if(!_0x4bc619)return;const _0x554b9d=_0x4bc619[_0x2c9a39(0x1ee)]==='completed'?_0x2c9a39(0x35f):_0x2c9a39(0x2fe);_0x4bc619['status']=_0x554b9d,saveSingleSession(_0x4bc619),_0x554b9d===_0x2c9a39(0x2fe)&&NotificationManager[_0x2c9a39(0x35c)](_0x2c9a39(0x220),_0x4bc619),showToast(_0x554b9d==='completed'?_0x2c9a39(0x323):_0x2c9a39(0x209),!![]);}function validateAppointment(_0x170b5c,_0x5d88d3,_0x1229fc,_0x34552d,_0x44955f){const _0x14639e=a2_0x143044,[_0x3bd47a,_0x1e5768]=_0x5d88d3[_0x14639e(0x26d)](':')[_0x14639e(0x214)](Number),[_0x44eff5,_0x2844ac]=_0x1229fc[_0x14639e(0x26d)](':')[_0x14639e(0x214)](Number),_0x2a394a=_0x3bd47a*0x3c+_0x1e5768,_0x14093c=_0x44eff5*0x3c+_0x2844ac,_0x1c6bf8=String(_0x44955f);let _0x4de04b=![],_0x459036='';for(let _0x5b1460 of sessions){if(_0x5b1460[_0x14639e(0x29a)]!==_0x170b5c)continue;if(_0x5b1460[_0x14639e(0x1ee)]==='cancelled')continue;if(_0x34552d&&String(_0x5b1460['id'])===String(_0x34552d))continue;const [_0x372961,_0x3b8507]=_0x5b1460[_0x14639e(0x31f)][_0x14639e(0x26d)](':')['map'](Number),[_0x1676fa,_0x296f43]=_0x5b1460[_0x14639e(0x31b)][_0x14639e(0x26d)](':')[_0x14639e(0x214)](Number),_0x164c1e=_0x372961*0x3c+_0x3b8507,_0x26cf58=_0x1676fa*0x3c+_0x296f43;if(Math['max'](_0x2a394a,_0x164c1e)<Math[_0x14639e(0x346)](_0x14093c,_0x26cf58)){if(_0x5b1460['clientId']&&String(_0x5b1460[_0x14639e(0x20d)])===_0x1c6bf8)return{'valid':![],'msg':_0x14639e(0x319)+_0x5b1460[_0x14639e(0x2a4)]+_0x14639e(0x278)};_0x4de04b=!![],_0x459036=_0x5b1460[_0x14639e(0x2a4)];}}if(_0x4de04b)return{'valid':!![],'warning':_0x14639e(0x2f9)+_0x459036};return{'valid':!![]};}function saveSingleSession(_0x3187b7){const _0x56b2d6=a2_0x143044;if(editingId){const _0x272fec=sessions[_0x56b2d6(0x33b)](_0x1bf9ee=>_0x1bf9ee['id']===editingId);if(_0x272fec!==-0x1)sessions[_0x272fec]=_0x3187b7;}else sessions[_0x56b2d6(0x293)](_0x3187b7);afterSaveAction([_0x3187b7['dateStr']]);}function createBatchSeries(_0x17679c,_0xcba615,_0x1161b2){const _0x4c6251=a2_0x143044,_0x1ac8a7=generateId(),_0x3509d5=[],_0x4055e9=[];let _0x4c75e7=0x0,_0x31b519=new Date(_0xcba615);for(let _0x3f6287=0x0;_0x3f6287<_0x1161b2;_0x3f6287++){const _0x349535=getLocalDateStr(_0x31b519),_0x1f3101=validateAppointment(_0x349535,_0x17679c[_0x4c6251(0x31f)],_0x17679c[_0x4c6251(0x31b)],null,_0x17679c[_0x4c6251(0x20d)]);if(!_0x1f3101[_0x4c6251(0x200)])console[_0x4c6251(0x205)](_0x4c6251(0x234)+_0x349535+_0x4c6251(0x2be)),_0x4c75e7++;else{const _0x72a6f9={..._0x17679c,'id':generateId(),'dateStr':_0x349535,'seriesId':_0x1ac8a7};_0x4055e9['push'](_0x72a6f9),_0x3509d5[_0x4c6251(0x293)](_0x349535);}_0x31b519[_0x4c6251(0x22e)](_0x31b519['getDate']()+0x7);}if(_0x4055e9['length']===0x0){showToast(_0x4c6251(0x245),![]);return;}sessions[_0x4c6251(0x293)](..._0x4055e9),lastUserActionTime=Date[_0x4c6251(0x23f)]();let _0x1e0b84=_0x4c6251(0x2e6)+_0x4055e9[_0x4c6251(0x2eb)];_0x4c75e7>0x0&&(_0x1e0b84+=_0x4c6251(0x279)+_0x4c75e7+')'),showToast(_0x1e0b84,!![]),afterSaveAction(_0x3509d5);}function updateSeriesBatch(_0x3d1d9e,_0x3cdf3e){const _0x302e23=a2_0x143044,_0x506704=[],_0x585d78=_0x3cdf3e[_0x302e23(0x2c4)];if(_0x3d1d9e===_0x302e23(0x360)){const _0x24bff5={..._0x3cdf3e,'seriesId':null},_0x115bda=sessions['findIndex'](_0x19fcde=>_0x19fcde['id']===_0x3cdf3e['id']);if(_0x115bda!==-0x1)sessions[_0x115bda]=_0x24bff5;_0x506704['push'](_0x24bff5['dateStr']);}else{if(_0x3d1d9e===_0x302e23(0x349)){const _0x5c3172=_0x3cdf3e['dateStr'];sessions['forEach']((_0x22ca87,_0x46a7a0)=>{const _0x54898b=_0x302e23;_0x22ca87[_0x54898b(0x2c4)]===_0x585d78&&_0x22ca87[_0x54898b(0x29a)]>=_0x5c3172&&(sessions[_0x46a7a0]={...sessions[_0x46a7a0],'start':_0x3cdf3e['start'],'end':_0x3cdf3e[_0x54898b(0x31b)],'note':_0x3cdf3e['note'],'client':_0x3cdf3e[_0x54898b(0x2a4)],'clientId':_0x3cdf3e[_0x54898b(0x20d)]},_0x506704[_0x54898b(0x293)](_0x22ca87[_0x54898b(0x29a)]));});}}afterSaveAction(_0x506704);}function tryDeleteSession(){const _0x3e5845=a2_0x143044,_0x120fca=sessions[_0x3e5845(0x216)](_0x36a562=>_0x36a562['id']===editingId);if(!_0x120fca)return;_0x120fca[_0x3e5845(0x2c4)]?openActionSheet('delete'):commitDelete(_0x3e5845(0x360),_0x120fca);}function commitDelete(_0x19857f,_0x438b17){const _0x98433f=a2_0x143044;lastUserActionTime=Date[_0x98433f(0x23f)](),NotificationManager[_0x98433f(0x35c)](_0x98433f(0x318),_0x438b17);const _0x563242=[];if(_0x19857f===_0x98433f(0x360))sessions=sessions[_0x98433f(0x2f0)](_0x2fdac6=>_0x2fdac6['id']!==_0x438b17['id']),_0x563242[_0x98433f(0x293)](_0x438b17[_0x98433f(0x29a)]);else{if(_0x19857f===_0x98433f(0x349)){const _0xa0a926=_0x438b17[_0x98433f(0x29a)],_0x401cfb=_0x438b17[_0x98433f(0x2c4)];sessions[_0x98433f(0x27c)](_0x13bd4a=>{const _0xa1e5ff=_0x98433f;_0x13bd4a[_0xa1e5ff(0x2c4)]===_0x401cfb&&_0x13bd4a[_0xa1e5ff(0x29a)]>=_0xa0a926&&_0x563242[_0xa1e5ff(0x293)](_0x13bd4a['dateStr']);}),sessions=sessions['filter'](_0xb115e3=>!(_0xb115e3[_0x98433f(0x2c4)]===_0x401cfb&&_0xb115e3[_0x98433f(0x29a)]>=_0xa0a926));}}afterSaveAction(_0x563242);}function afterSaveAction(_0x4ace6e){const _0x5f7e4f=a2_0x143044;DataManager[_0x5f7e4f(0x251)](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager['syncBatch'](_0x4ace6e)[_0x5f7e4f(0x240)](()=>console[_0x5f7e4f(0x205)](_0x5f7e4f(0x271)))[_0x5f7e4f(0x2f2)](_0x31db9c=>showToast(_0x5f7e4f(0x2cd),![]));}const NotificationManager={'formatDate'(_0x1f231f){const _0x5097c9=a2_0x143044,_0x1bd82a=new Date(_0x1f231f),_0x400175={'weekday':'long','day':'numeric','month':'long'};let _0x1d88e7=_0x1bd82a['toLocaleDateString'](_0x5097c9(0x21d),_0x400175);return _0x1d88e7['charAt'](0x0)[_0x5097c9(0x29f)]()+_0x1d88e7['slice'](0x1);},'getText'(_0x8fb7af,_0x5af049){const _0x3b626d=a2_0x143044,_0x1b2732=this[_0x3b626d(0x2da)](_0x5af049[_0x3b626d(0x29a)]);switch(_0x8fb7af){case'create':return _0x3b626d(0x1f9)+(_0x3b626d(0x1e8)+_0x1b2732+'\x0a')+(_0x3b626d(0x2aa)+_0x5af049[_0x3b626d(0x31f)]+'\x20—\x20'+_0x5af049[_0x3b626d(0x31b)]+'\x0a\x0a')+_0x3b626d(0x34f);case _0x3b626d(0x308):return _0x3b626d(0x1dd)+_0x3b626d(0x21b)+('<b>✅\x20'+_0x5af049[_0x3b626d(0x31f)]+_0x3b626d(0x351)+_0x5af049[_0x3b626d(0x31b)]+'</b>\x0a\x0a')+(_0x3b626d(0x1e8)+_0x1b2732);case _0x3b626d(0x318):return _0x3b626d(0x222)+(_0x3b626d(0x244)+_0x1b2732+'\x20('+_0x5af049['start']+_0x3b626d(0x2dd));case _0x3b626d(0x220):return'<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a'+_0x3b626d(0x336)+'<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>';default:return'';}},async 'send'(_0xe1084c,_0x314364){const _0x481e40=a2_0x143044;console['log'](_0x481e40(0x273),_0xe1084c,_0x314364);if(!_0x314364){console[_0x481e40(0x362)](_0x481e40(0x2d5));return;}const _0xbc173e=String(_0x314364['clientId']);console[_0x481e40(0x205)](_0x481e40(0x2ca),_0xbc173e);if(!_0x314364[_0x481e40(0x20d)]||_0xbc173e===_0x481e40(0x31c)||_0xbc173e===_0x481e40(0x2ae)){console['error'](_0x481e40(0x286));if(_0x314364[_0x481e40(0x2a4)]){const _0x56247d=clients[_0x481e40(0x216)](_0x2ee696=>_0x2ee696[_0x481e40(0x211)]===_0x314364[_0x481e40(0x2a4)]);if(_0x56247d)return console[_0x481e40(0x205)](_0x481e40(0x204),_0x56247d['id']),this[_0x481e40(0x35c)](_0xe1084c,{..._0x314364,'clientId':_0x56247d['id']});}return;}if(_0xbc173e[_0x481e40(0x2eb)]<0x5){console[_0x481e40(0x26a)](_0x481e40(0x24d),_0xbc173e);return;}const _0x7a7189=this[_0x481e40(0x1f7)](_0xe1084c,_0x314364);if(!_0x7a7189){console[_0x481e40(0x362)](_0x481e40(0x33f));return;}console[_0x481e40(0x205)](_0x481e40(0x2f8)+_0xbc173e+_0x481e40(0x23a)),DataManager[_0x481e40(0x1e3)](_0x481e40(0x289),{'chatId':_0xbc173e,'text':_0x7a7189})[_0x481e40(0x240)](_0x4b1264=>console[_0x481e40(0x205)](_0x481e40(0x2e3),_0x4b1264))[_0x481e40(0x2f2)](_0x315322=>console[_0x481e40(0x362)]('[Notify]\x20Network\x20Failed',_0x315322));}};function getLocalDateStr(_0x3f2fda){const _0x13a056=a2_0x143044,_0x3ca15c=_0x3f2fda[_0x13a056(0x292)](),_0x45f2e7=String(_0x3f2fda[_0x13a056(0x1f0)]()+0x1)['padStart'](0x2,'0'),_0x39e428=String(_0x3f2fda[_0x13a056(0x30f)]())[_0x13a056(0x2ea)](0x2,'0');return _0x3ca15c+'-'+_0x45f2e7+'-'+_0x39e428;}function getDateStr(_0x2316fd){const _0x56780e=a2_0x143044,_0x40240a=new Date();return _0x40240a[_0x56780e(0x22e)](_0x40240a['getDate']()+_0x2316fd),getLocalDateStr(_0x40240a);}function getStartOfWeek(_0x253846){const _0x5b3065=a2_0x143044,_0x17d912=new Date(_0x253846),_0x2f6880=_0x17d912[_0x5b3065(0x334)](),_0x43f6d3=_0x17d912['getDate']()-_0x2f6880+(_0x2f6880===0x0?-0x6:0x1);return _0x17d912[_0x5b3065(0x22e)](_0x43f6d3),_0x17d912[_0x5b3065(0x338)](0x0,0x0,0x0,0x0),_0x17d912;}function hexToRgba(_0x296a18,_0x5347b9){const _0x386dfc=a2_0x143044;if(!_0x296a18)return'rgba(100,100,100,0.5)';let _0x402a37=0x0,_0x3b0ff0=0x0,_0x1585ca=0x0;if(_0x296a18[_0x386dfc(0x2eb)]===0x4)_0x402a37='0x'+_0x296a18[0x1]+_0x296a18[0x1],_0x3b0ff0='0x'+_0x296a18[0x2]+_0x296a18[0x2],_0x1585ca='0x'+_0x296a18[0x3]+_0x296a18[0x3];else _0x296a18[_0x386dfc(0x2eb)]===0x7&&(_0x402a37='0x'+_0x296a18[0x1]+_0x296a18[0x2],_0x3b0ff0='0x'+_0x296a18[0x3]+_0x296a18[0x4],_0x1585ca='0x'+_0x296a18[0x5]+_0x296a18[0x6]);return _0x386dfc(0x2f7)+ +_0x402a37+',\x20'+ +_0x3b0ff0+',\x20'+ +_0x1585ca+',\x20'+_0x5347b9+')';}function renderTimeColumn(){const _0x18dc1c=a2_0x143044,_0x4af31c=document['getElementById'](_0x18dc1c(0x2d4)),_0x51c8e1=document[_0x18dc1c(0x225)](_0x18dc1c(0x2e1));_0x4af31c[_0x18dc1c(0x358)]='',_0x4af31c[_0x18dc1c(0x315)](_0x51c8e1);for(let _0x40a36d=0x0;_0x40a36d<0x18;_0x40a36d++){const _0x2b606f=document['createElement']('div');_0x2b606f[_0x18dc1c(0x316)]='time-label';if(_0x40a36d>0x0)_0x2b606f[_0x18dc1c(0x358)]=_0x18dc1c(0x2c6)+String(_0x40a36d)['padStart'](0x2,'0')+':00</span>';_0x4af31c[_0x18dc1c(0x315)](_0x2b606f);}}function renderDayRange(_0x5e353e,_0x2571cd){const _0x5390db=a2_0x143044,_0x84b86f=document['getElementById'](_0x5390db(0x354)),_0x16a82f=document['getElementById'](_0x5390db(0x203)),_0x215a4f=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x246709=new Date();_0x246709[_0x5390db(0x338)](0x0,0x0,0x0,0x0);const _0x105204=getLocalDateStr(new Date());for(let _0x472224=_0x5e353e;_0x472224<=_0x2571cd;_0x472224++){const _0x280eb8=new Date(_0x246709);_0x280eb8['setDate'](_0x280eb8[_0x5390db(0x30f)]()+_0x472224);const _0x4bee1c=getLocalDateStr(_0x280eb8);let _0x524e4c=_0x280eb8['getDay']()-0x1;if(_0x524e4c===-0x1)_0x524e4c=0x6;const _0x3566ad=_0x4bee1c===_0x105204,_0xf9e347=document[_0x5390db(0x309)]('div');_0xf9e347[_0x5390db(0x316)]='day-col-header\x20'+(_0x3566ad?_0x5390db(0x306):''),_0xf9e347['id']='header-'+_0x4bee1c,_0xf9e347[_0x5390db(0x21e)](_0x5390db(0x2a5),_0x4bee1c),_0xf9e347[_0x5390db(0x358)]=_0x5390db(0x2b7)+_0x215a4f[_0x524e4c]+_0x5390db(0x1fc)+_0x280eb8[_0x5390db(0x30f)]()+_0x5390db(0x28b)+_0x4bee1c+_0x5390db(0x2dc),_0xf9e347['onclick']=()=>openDayOptions(_0x4bee1c,_0x215a4f[_0x524e4c]+'\x20'+_0x280eb8[_0x5390db(0x30f)]()),_0x84b86f[_0x5390db(0x315)](_0xf9e347);const _0x43e808=document['createElement'](_0x5390db(0x285));_0x43e808[_0x5390db(0x316)]=_0x5390db(0x2c2)+(_0x3566ad?_0x5390db(0x306):''),_0x43e808[_0x5390db(0x21e)](_0x5390db(0x2a5),_0x4bee1c),_0x43e808['setAttribute']('data-day-idx',_0x524e4c),renderEventsForColumn(_0x43e808,_0x4bee1c,_0x524e4c),attachLongPressHandler(_0x43e808,_0x280eb8),_0x16a82f[_0x5390db(0x315)](_0x43e808),updateDayStats(_0x4bee1c);}}function reRenderBlocks(){const _0x47f456=a2_0x143044;document[_0x47f456(0x1e7)](_0x47f456(0x267))[_0x47f456(0x27c)](_0xc1f45f=>{const _0x3aa5d2=_0x47f456;_0xc1f45f[_0x3aa5d2(0x1e7)](_0x3aa5d2(0x1fb))['forEach'](_0x21ec4b=>_0x21ec4b[_0x3aa5d2(0x320)]());const _0x427fea=_0xc1f45f[_0x3aa5d2(0x23c)](_0x3aa5d2(0x2a5)),_0x28fde6=parseInt(_0xc1f45f[_0x3aa5d2(0x23c)](_0x3aa5d2(0x339))),_0x52f995=Math[_0x3aa5d2(0x2fd)](_0xc1f45f['offsetLeft']);(availabilityPattern[_0x28fde6]||[])[_0x3aa5d2(0x27c)](_0x5a11b1=>{const _0xefbed4=_0x3aa5d2,_0x37fc89=document['createElement'](_0xefbed4(0x285));_0x37fc89[_0xefbed4(0x316)]=_0xefbed4(0x2a1);const _0x4cc0a7=_0x5a11b1*GRID_H;_0x37fc89[_0xefbed4(0x1ef)]['top']=_0x4cc0a7+'px',_0x37fc89[_0xefbed4(0x1ef)][_0xefbed4(0x1fd)]='-'+_0x52f995+_0xefbed4(0x2b2)+_0x4cc0a7+'px',_0xc1f45f[_0xefbed4(0x315)](_0x37fc89);});if(specialRanges&&specialRanges[_0x3aa5d2(0x2eb)]>0x0){const _0x121288=new Date(_0x427fea+_0x3aa5d2(0x25b))[_0x3aa5d2(0x265)](),_0xba5a48=new Date(_0x427fea+_0x3aa5d2(0x2bc))[_0x3aa5d2(0x265)]();specialRanges[_0x3aa5d2(0x27c)](_0x1fb5aa=>{const _0x2342c0=_0x3aa5d2,_0x545446=new Date(_0x1fb5aa[_0x2342c0(0x31f)])[_0x2342c0(0x265)](),_0x48d5e7=new Date(_0x1fb5aa[_0x2342c0(0x31b)])[_0x2342c0(0x265)](),_0x2e3011=Math[_0x2342c0(0x20a)](_0x121288,_0x545446),_0x18592b=Math[_0x2342c0(0x346)](_0xba5a48,_0x48d5e7);if(_0x2e3011<_0x18592b){if(_0x2e3011<=_0x121288&&_0x18592b>=_0xba5a48-0xea60){if(!_0xc1f45f[_0x2342c0(0x1e1)]('.day-off-overlay')){const _0x549b65=document['createElement'](_0x2342c0(0x285));_0x549b65[_0x2342c0(0x316)]='day-off-overlay\x20stripe-bg',_0x549b65[_0x2342c0(0x1ef)][_0x2342c0(0x1fd)]='-'+_0x52f995+_0x2342c0(0x25c),_0xc1f45f[_0x2342c0(0x315)](_0x549b65);}}else{const _0x47eefe=(_0x2e3011-_0x121288)/0x36ee80*GRID_H,_0x11a526=(_0x18592b-_0x2e3011)/0x36ee80*GRID_H,_0x50fd1c=document['createElement'](_0x2342c0(0x285));_0x50fd1c[_0x2342c0(0x316)]=_0x2342c0(0x2e7),_0x50fd1c[_0x2342c0(0x1ef)][_0x2342c0(0x262)]=_0x47eefe+'px',_0x50fd1c[_0x2342c0(0x1ef)][_0x2342c0(0x1f5)]=_0x11a526+'px',_0x50fd1c[_0x2342c0(0x1ef)][_0x2342c0(0x1fd)]='-'+_0x52f995+_0x2342c0(0x2b2)+_0x47eefe+'px',_0xc1f45f[_0x2342c0(0x315)](_0x50fd1c);}}});}if(dateExceptions[_0x427fea]===_0x3aa5d2(0x288)){if(!_0xc1f45f[_0x3aa5d2(0x1e1)](_0x3aa5d2(0x28c))){const _0x2a6b1e=document[_0x3aa5d2(0x309)](_0x3aa5d2(0x285));_0x2a6b1e[_0x3aa5d2(0x316)]=_0x3aa5d2(0x281),_0x2a6b1e['style']['backgroundPosition']='-'+_0x52f995+_0x3aa5d2(0x25c),_0xc1f45f[_0x3aa5d2(0x315)](_0x2a6b1e);}}renderEventsForColumn(_0xc1f45f,_0x427fea,_0x28fde6),updateDayStats(_0x427fea);});}function updateAllDayStats(){const _0x11217c=a2_0x143044;document['querySelectorAll'](_0x11217c(0x227))[_0x11217c(0x27c)](_0x44416a=>{const _0x14383e=_0x11217c;updateDayStats(_0x44416a[_0x14383e(0x23c)]('data-date'));});}function updateDayStats(_0x1a5d18){const _0x12caea=a2_0x143044,_0x16fa2c=document['getElementById'](_0x12caea(0x27e)+_0x1a5d18);if(!_0x16fa2c)return;const _0x18df6b=new Date(_0x1a5d18);let _0x22d497=_0x18df6b[_0x12caea(0x334)]()-0x1;if(_0x22d497===-0x1)_0x22d497=0x6;if(dateExceptions[_0x1a5d18]===_0x12caea(0x288)){_0x16fa2c[_0x12caea(0x1ef)][_0x12caea(0x291)]=_0x12caea(0x2c1);return;}const _0x3b95e8=availabilityPattern[_0x22d497]||[],_0x2bac08=0x18-_0x3b95e8[_0x12caea(0x2eb)],_0x5bc5c1=_0x2bac08*0x3c,_0x52dca0=sessions[_0x12caea(0x2f0)](_0xadd67b=>_0xadd67b['dateStr']===_0x1a5d18&&_0xadd67b[_0x12caea(0x1ee)]!==_0x12caea(0x221));if(_0x52dca0[_0x12caea(0x2eb)]===0x0){_0x16fa2c[_0x12caea(0x1ef)][_0x12caea(0x291)]=_0x12caea(0x2c1);return;}let _0x3c84ff=_0x52dca0['map'](_0x5bd2ff=>{const _0xa2a310=_0x12caea,[_0x39a935,_0x581673]=_0x5bd2ff[_0xa2a310(0x31f)][_0xa2a310(0x26d)](':')[_0xa2a310(0x214)](Number),[_0x10295e,_0x282817]=_0x5bd2ff[_0xa2a310(0x31b)][_0xa2a310(0x26d)](':')[_0xa2a310(0x214)](Number);return[_0x39a935*0x3c+_0x581673,_0x10295e*0x3c+_0x282817];});_0x3c84ff['sort']((_0x4f0d41,_0x5d8332)=>_0x4f0d41[0x0]-_0x5d8332[0x0]);let _0x52c19b=[];if(_0x3c84ff[_0x12caea(0x2eb)]>0x0){let _0x16d9bb=_0x3c84ff[0x0];for(let _0x1cec6b=0x1;_0x1cec6b<_0x3c84ff['length'];_0x1cec6b++){_0x3c84ff[_0x1cec6b][0x0]<_0x16d9bb[0x1]?_0x16d9bb[0x1]=Math[_0x12caea(0x20a)](_0x16d9bb[0x1],_0x3c84ff[_0x1cec6b][0x1]):(_0x52c19b[_0x12caea(0x293)](_0x16d9bb),_0x16d9bb=_0x3c84ff[_0x1cec6b]);}_0x52c19b[_0x12caea(0x293)](_0x16d9bb);}let _0x50f033=0x0;_0x52c19b[_0x12caea(0x27c)](_0x15cfe5=>_0x50f033+=_0x15cfe5[0x1]-_0x15cfe5[0x0]),_0x16fa2c['style']['display']=_0x12caea(0x2b1);const _0x26d234=_0x16fa2c[_0x12caea(0x1e1)](_0x12caea(0x21f));if(_0x5bc5c1===0x0){_0x26d234[_0x12caea(0x1ef)]['width']=_0x12caea(0x282),_0x26d234[_0x12caea(0x1ef)][_0x12caea(0x2a6)]=_0x12caea(0x314);return;}const _0x10051a=_0x50f033/_0x5bc5c1*0x64;console[_0x12caea(0x205)]('['+_0x1a5d18+_0x12caea(0x29d)+_0x2bac08+_0x12caea(0x232)+_0x50f033+_0x12caea(0x208)+_0x10051a[_0x12caea(0x32f)](0x1)+'%'),_0x10051a>0x64?(_0x26d234[_0x12caea(0x1ef)][_0x12caea(0x311)]=_0x12caea(0x282),_0x26d234[_0x12caea(0x1ef)][_0x12caea(0x2a6)]=_0x12caea(0x314)):(_0x26d234[_0x12caea(0x1ef)][_0x12caea(0x311)]=_0x10051a+'%',_0x26d234[_0x12caea(0x1ef)][_0x12caea(0x2a6)]=_0x12caea(0x357));}function renderEventsForColumn(_0x34cfa1,_0x106dc7,_0x45ec06){const _0x567943=a2_0x143044,_0x266139=sessions[_0x567943(0x2f0)](_0x477c27=>_0x477c27[_0x567943(0x29a)]===_0x106dc7),_0xb510e4=_0x266139['map'](_0x35c2f5=>{const _0x2daf59=_0x567943,[_0x52dffb,_0x2b7352]=_0x35c2f5['start']['split'](':')[_0x2daf59(0x214)](Number),[_0x57c035,_0x2e6e6f]=_0x35c2f5[_0x2daf59(0x31b)][_0x2daf59(0x26d)](':')[_0x2daf59(0x214)](Number);return{'data':_0x35c2f5,'start':_0x52dffb*0x3c+_0x2b7352,'end':_0x57c035*0x3c+_0x2e6e6f,'colIndex':0x0};});_0xb510e4[_0x567943(0x34a)]((_0x567a1e,_0x14921e)=>{const _0x5210ff=_0x567943;if(_0x567a1e[_0x5210ff(0x31f)]!==_0x14921e[_0x5210ff(0x31f)])return _0x567a1e['start']-_0x14921e[_0x5210ff(0x31f)];return _0x14921e['end']-_0x14921e[_0x5210ff(0x31f)]-(_0x567a1e[_0x5210ff(0x31b)]-_0x567a1e[_0x5210ff(0x31f)]);});const _0xce5d4b=[];_0xb510e4['forEach'](_0x13f21b=>{const _0x52a04f=_0x567943;let _0x4e4959=![];for(let _0x3b1634=0x0;_0x3b1634<_0xce5d4b[_0x52a04f(0x2eb)];_0x3b1634++){const _0x53f946=_0xce5d4b[_0x3b1634],_0x43e1da=_0x53f946[_0x53f946[_0x52a04f(0x2eb)]-0x1];if(_0x13f21b[_0x52a04f(0x31f)]>=_0x43e1da['end']){_0x53f946[_0x52a04f(0x293)](_0x13f21b),_0x13f21b[_0x52a04f(0x2f1)]=_0x3b1634,_0x4e4959=!![];break;}}!_0x4e4959&&(_0xce5d4b[_0x52a04f(0x293)]([_0x13f21b]),_0x13f21b[_0x52a04f(0x2f1)]=_0xce5d4b[_0x52a04f(0x2eb)]-0x1);}),_0xb510e4['forEach'](_0x1b982c=>{const _0x5a784c=_0x567943;let _0x2120a7=0x0;_0xb510e4[_0x5a784c(0x27c)](_0x149c73=>{const _0x3a5606=_0x5a784c;if(Math[_0x3a5606(0x20a)](_0x1b982c[_0x3a5606(0x31f)],_0x149c73[_0x3a5606(0x31f)])<Math[_0x3a5606(0x346)](_0x1b982c[_0x3a5606(0x31b)],_0x149c73[_0x3a5606(0x31b)])){if(_0x149c73[_0x3a5606(0x2f1)]>_0x2120a7)_0x2120a7=_0x149c73['colIndex'];}});const _0x7f6cd2=_0x2120a7+0x1,_0x4c7f6f=0x64/_0x7f6cd2,_0x205338=_0x1b982c[_0x5a784c(0x2f1)]*_0x4c7f6f,_0x4518d2=createEventEl(_0x1b982c[_0x5a784c(0x2f6)]);_0x4518d2[_0x5a784c(0x1ef)][_0x5a784c(0x311)]=_0x5a784c(0x317)+_0x4c7f6f+_0x5a784c(0x2e0),_0x4518d2[_0x5a784c(0x1ef)]['left']=_0x5a784c(0x317)+_0x205338+_0x5a784c(0x335),_0x4518d2['style'][_0x5a784c(0x31e)]=0xa+_0x1b982c[_0x5a784c(0x2f1)],_0x4c7f6f<0x55&&_0x4518d2['classList'][_0x5a784c(0x207)](_0x5a784c(0x324)),_0x34cfa1['appendChild'](_0x4518d2);});}function createEventEl(_0x34118d){const _0x76f685=a2_0x143044,[_0x403504,_0x3824c5]=_0x34118d[_0x76f685(0x31f)][_0x76f685(0x26d)](':')[_0x76f685(0x214)](Number),[_0x5aee6c,_0x526363]=_0x34118d[_0x76f685(0x31b)][_0x76f685(0x26d)](':')[_0x76f685(0x214)](Number),_0x320c23=(_0x403504*0x3c+_0x3824c5)/0x3c*GRID_H,_0x4890e1=(_0x5aee6c*0x3c+_0x526363-(_0x403504*0x3c+_0x3824c5))/0x3c*GRID_H,_0x436b02=document[_0x76f685(0x309)]('div'),_0x12d3d5=_0x34118d['status']===_0x76f685(0x2fe)?_0x76f685(0x2a9):'';_0x436b02['className']=_0x76f685(0x356)+_0x12d3d5,_0x436b02[_0x76f685(0x1ef)][_0x76f685(0x262)]=_0x320c23+'px',_0x436b02[_0x76f685(0x1ef)][_0x76f685(0x1f5)]=Math[_0x76f685(0x20a)](_0x4890e1,0x14)+'px';const _0x15f902=clients[_0x76f685(0x216)](_0x35f547=>_0x34118d[_0x76f685(0x20d)]&&String(_0x35f547['id'])===String(_0x34118d[_0x76f685(0x20d)])||_0x35f547[_0x76f685(0x211)]===_0x34118d['client']),_0x1c0444=_0x15f902?_0x15f902[_0x76f685(0x26e)]:_0x76f685(0x228);_0x436b02[_0x76f685(0x1ef)]['borderLeftColor']=_0x1c0444,_0x436b02[_0x76f685(0x1ef)][_0x76f685(0x352)]=hexToRgba(_0x1c0444,0.85);let _0x41fbf2='<div\x20class=\x22ev-title\x22>'+_0x34118d[_0x76f685(0x2a4)]+'</div><div\x20class=\x22ev-time\x22>'+_0x34118d[_0x76f685(0x31f)]+_0x76f685(0x26c)+_0x34118d[_0x76f685(0x31b)]+_0x76f685(0x2d9);return _0x34118d[_0x76f685(0x2c4)]&&(_0x41fbf2+='<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>'),_0x34118d['status']===_0x76f685(0x2fe)&&(_0x41fbf2+=_0x76f685(0x2ed)),_0x436b02['innerHTML']=_0x41fbf2,_0x436b02[_0x76f685(0x226)]=_0x4a0b10=>{_0x4a0b10['stopPropagation'](),openEdit(_0x34118d);},_0x436b02;}function attachLongPressHandler(_0x47c46d,_0x585f3a){const _0x5ce195=a2_0x143044;let _0x550157=0x0,_0x32bb7d=null;const _0x5e5a59=_0x265f4b=>{const _0x173282=a2_0x56f0;if(_0x265f4b[_0x173282(0x340)]['closest'](_0x173282(0x25a)))return;isScrolling=![],_0x550157=_0x265f4b['touches']?_0x265f4b[_0x173282(0x290)][0x0][_0x173282(0x268)]:_0x265f4b[_0x173282(0x268)],_0x32bb7d=setTimeout(()=>{const _0x52890d=_0x173282;if(!isScrolling){navigator[_0x52890d(0x21a)]?.(0x32);const _0x169d6b=_0x47c46d[_0x52890d(0x353)](),_0x209741=Math[_0x52890d(0x2c0)]((_0x550157-_0x169d6b[_0x52890d(0x262)])/GRID_H);_0x585f3a[_0x52890d(0x338)](_0x209741,0x0),openAddSession(_0x585f3a);}},0x1f4);},_0x4b4deb=()=>{isScrolling=!![],clearTimeout(_0x32bb7d);},_0x4642a5=()=>{clearTimeout(_0x32bb7d);};_0x47c46d[_0x5ce195(0x24c)](_0x5ce195(0x342),_0x5e5a59,{'passive':!![]}),_0x47c46d[_0x5ce195(0x24c)](_0x5ce195(0x302),_0x4b4deb,{'passive':!![]}),_0x47c46d[_0x5ce195(0x24c)](_0x5ce195(0x28a),_0x4642a5),_0x47c46d['addEventListener']('mousedown',_0x5e5a59),_0x47c46d[_0x5ce195(0x24c)](_0x5ce195(0x328),_0x4b4deb),_0x47c46d[_0x5ce195(0x24c)]('mouseup',_0x4642a5);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x5a7e7f=a2_0x143044,_0x4e19f3=document[_0x5a7e7f(0x225)](_0x5a7e7f(0x2ab)),_0x2a0aec=_0x4e19f3[_0x5a7e7f(0x29e)],_0x1174a6=_0x4e19f3[_0x5a7e7f(0x2b0)],_0x44e09f=_0x4e19f3[_0x5a7e7f(0x2b9)];if(_0x1174a6-(_0x2a0aec+_0x44e09f)<0x12c){const _0x330650=endOffset;endOffset+=0xe,renderDayRange(_0x330650+0x1,endOffset),reRenderBlocks();}if(_0x2a0aec<0x12c){const _0xcfefa=startOffset;startOffset-=0xe,prependDays(startOffset,_0xcfefa-0x1),_0x4e19f3[_0x5a7e7f(0x29e)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1048f2,_0x47fb44){const _0x5b44b8=a2_0x143044,_0x3bd55b=document[_0x5b44b8(0x225)]('daysHeaderTrack'),_0x38e607=document['getElementById']('gridColumns'),_0x4c9dad=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x183075=new Date();_0x183075[_0x5b44b8(0x338)](0x0,0x0,0x0,0x0);const _0x4bc396=getLocalDateStr(new Date()),_0x1ce4db=document[_0x5b44b8(0x2e9)](),_0x41f5a3=document[_0x5b44b8(0x2e9)]();for(let _0x4a46ed=_0x1048f2;_0x4a46ed<=_0x47fb44;_0x4a46ed++){const _0x165ce5=new Date(_0x183075);_0x165ce5['setDate'](_0x165ce5[_0x5b44b8(0x30f)]()+_0x4a46ed);const _0x444e69=getLocalDateStr(_0x165ce5);let _0x537159=_0x165ce5[_0x5b44b8(0x334)]()-0x1;if(_0x537159===-0x1)_0x537159=0x6;const _0x1ed169=_0x444e69===_0x4bc396,_0x11fdb1=document[_0x5b44b8(0x309)](_0x5b44b8(0x285));_0x11fdb1[_0x5b44b8(0x316)]=_0x5b44b8(0x300)+(_0x1ed169?_0x5b44b8(0x306):''),_0x11fdb1['id']=_0x5b44b8(0x2b4)+_0x444e69,_0x11fdb1[_0x5b44b8(0x21e)](_0x5b44b8(0x2a5),_0x444e69),_0x11fdb1[_0x5b44b8(0x358)]=_0x5b44b8(0x2b7)+_0x4c9dad[_0x537159]+'</div><div\x20class=\x22dch-num\x22>'+_0x165ce5[_0x5b44b8(0x30f)]()+_0x5b44b8(0x28b)+_0x444e69+_0x5b44b8(0x2dc),_0x11fdb1['onclick']=()=>openDayOptions(_0x444e69,_0x4c9dad[_0x537159]+'\x20'+_0x165ce5[_0x5b44b8(0x30f)]()),_0x1ce4db[_0x5b44b8(0x315)](_0x11fdb1);const _0x112d43=document[_0x5b44b8(0x309)](_0x5b44b8(0x285));_0x112d43[_0x5b44b8(0x316)]=_0x5b44b8(0x2c2)+(_0x1ed169?_0x5b44b8(0x306):''),_0x112d43[_0x5b44b8(0x21e)]('data-date',_0x444e69),_0x112d43[_0x5b44b8(0x21e)](_0x5b44b8(0x339),_0x537159),renderEventsForColumn(_0x112d43,_0x444e69,_0x537159),attachLongPressHandler(_0x112d43,_0x165ce5),_0x41f5a3['appendChild'](_0x112d43),updateDayStats(_0x444e69);}_0x3bd55b[_0x5b44b8(0x32c)](_0x1ce4db,_0x3bd55b[_0x5b44b8(0x260)]),_0x38e607[_0x5b44b8(0x32c)](_0x41f5a3,_0x38e607[_0x5b44b8(0x1e1)](_0x5b44b8(0x2c3)));}function validateAppointment(_0x24832b,_0x2a6fbf,_0x53b435,_0x8163d3,_0x286265){const _0x1f9b8b=a2_0x143044,[_0x316c82,_0x4a3089]=_0x2a6fbf[_0x1f9b8b(0x26d)](':')[_0x1f9b8b(0x214)](Number),[_0x168554,_0x4369f4]=_0x53b435[_0x1f9b8b(0x26d)](':')[_0x1f9b8b(0x214)](Number),_0x7cdbdb=_0x316c82*0x3c+_0x4a3089,_0x201ffc=_0x168554*0x3c+_0x4369f4,_0x10a6e5=String(_0x286265);let _0x4118fa=![],_0x2477e7='';for(let _0x4a743e of sessions){if(_0x4a743e[_0x1f9b8b(0x29a)]!==_0x24832b)continue;if(_0x4a743e['status']===_0x1f9b8b(0x221))continue;if(_0x8163d3&&String(_0x4a743e['id'])===String(_0x8163d3))continue;const [_0x8fde03,_0xeb25eb]=_0x4a743e[_0x1f9b8b(0x31f)][_0x1f9b8b(0x26d)](':')[_0x1f9b8b(0x214)](Number),[_0xfd8efb,_0x14265f]=_0x4a743e[_0x1f9b8b(0x31b)][_0x1f9b8b(0x26d)](':')[_0x1f9b8b(0x214)](Number),_0x4a56cc=_0x8fde03*0x3c+_0xeb25eb,_0x298ff2=_0xfd8efb*0x3c+_0x14265f;if(Math['max'](_0x7cdbdb,_0x4a56cc)<Math[_0x1f9b8b(0x346)](_0x201ffc,_0x298ff2)){if(_0x4a743e['clientId']&&String(_0x4a743e[_0x1f9b8b(0x20d)])===_0x10a6e5)return{'valid':![],'msg':_0x1f9b8b(0x319)+_0x4a743e[_0x1f9b8b(0x2a4)]+_0x1f9b8b(0x278)};_0x4118fa=!![],_0x2477e7=_0x4a743e[_0x1f9b8b(0x2a4)];}}if(_0x4118fa)return{'valid':!![],'warning':_0x1f9b8b(0x2f9)+_0x2477e7};return{'valid':!![]};}function updateDateDisplay(){const _0xa34d3f=a2_0x143044,_0x305e38=document[_0xa34d3f(0x225)](_0xa34d3f(0x32a))[_0xa34d3f(0x327)],_0x5b85d5=document[_0xa34d3f(0x225)](_0xa34d3f(0x1ea));if(!_0x305e38){_0x5b85d5[_0xa34d3f(0x2d6)]='';return;}const [_0x534bc6,_0x1ab7c5,_0x1de731]=_0x305e38[_0xa34d3f(0x26d)]('-')[_0xa34d3f(0x214)](Number),_0x48a231=new Date(_0x534bc6,_0x1ab7c5-0x1,_0x1de731),_0x4d70fd={'weekday':_0xa34d3f(0x28e),'day':_0xa34d3f(0x343),'month':_0xa34d3f(0x28e),'year':_0xa34d3f(0x343)};let _0x3b94cb=_0x48a231[_0xa34d3f(0x27a)](_0xa34d3f(0x21d),_0x4d70fd);_0x3b94cb=_0x3b94cb[_0xa34d3f(0x29c)](0x0)['toUpperCase']()+_0x3b94cb[_0xa34d3f(0x329)](0x1),_0x5b85d5[_0xa34d3f(0x2d6)]=_0x3b94cb;}function autoSetEndTime(){const _0x2f3a4a=a2_0x143044,_0x2620fe=document[_0x2f3a4a(0x225)](_0x2f3a4a(0x2de))['value'];if(!_0x2620fe)return;const [_0xb62d5c,_0x29087a]=_0x2620fe['split'](':')['map'](Number);let _0x21580f=_0xb62d5c+0x1;if(_0x21580f>0x17)_0x21580f=0x0;const _0x12ff13=String(_0x21580f)[_0x2f3a4a(0x2ea)](0x2,'0')+':'+String(_0x29087a)[_0x2f3a4a(0x2ea)](0x2,'0');document[_0x2f3a4a(0x225)](_0x2f3a4a(0x2e8))[_0x2f3a4a(0x327)]=_0x12ff13;}function populateClientSelect(){const _0x2b6262=a2_0x143044,_0x57ffc0=document['getElementById'](_0x2b6262(0x361));_0x57ffc0[_0x2b6262(0x358)]='';if(clients['length']===0x0){const _0x4959f9=document[_0x2b6262(0x309)](_0x2b6262(0x34c));_0x4959f9[_0x2b6262(0x2e2)]=_0x2b6262(0x28d),_0x57ffc0[_0x2b6262(0x315)](_0x4959f9);return;}clients[_0x2b6262(0x27c)](_0x39fc85=>{const _0x5b2126=_0x2b6262,_0x3d9080=document[_0x5b2126(0x309)](_0x5b2126(0x34c));_0x3d9080[_0x5b2126(0x327)]=_0x39fc85[_0x5b2126(0x211)],_0x3d9080['textContent']=_0x39fc85[_0x5b2126(0x211)],_0x57ffc0['appendChild'](_0x3d9080);});}function openActionSheet(_0x198da3){const _0x5ae420=a2_0x143044,_0x15392e=document['getElementById'](_0x5ae420(0x283)),_0x4ba881=document[_0x5ae420(0x225)]('actionSheetOverlay'),_0x23b494=document['getElementById']('asTitle'),_0x5d39da=document[_0x5ae420(0x225)]('asBtnOne'),_0x545fed=document['getElementById']('asBtnSeries');_0x4ba881[_0x5ae420(0x1d9)][_0x5ae420(0x207)](_0x5ae420(0x284)),_0x15392e[_0x5ae420(0x1d9)]['add'](_0x5ae420(0x333));if(_0x198da3===_0x5ae420(0x348))_0x23b494['textContent']='Изменение\x20серии',_0x5d39da['textContent']=_0x5ae420(0x337),_0x5d39da['onclick']=()=>{closeActionSheet(),updateSeriesBatch('single',tempSessionData);},_0x545fed[_0x5ae420(0x2d6)]='Эту\x20и\x20будущие',_0x545fed[_0x5ae420(0x226)]=()=>{closeActionSheet(),updateSeriesBatch('series',tempSessionData);};else _0x198da3==='delete'&&(_0x23b494[_0x5ae420(0x2d6)]=_0x5ae420(0x1e9),_0x5d39da[_0x5ae420(0x2d6)]=_0x5ae420(0x337),_0x5d39da[_0x5ae420(0x316)]=_0x5ae420(0x355),_0x5d39da[_0x5ae420(0x226)]=()=>{const _0x3c3611=_0x5ae420;closeActionSheet(),commitDelete(_0x3c3611(0x360),sessions[_0x3c3611(0x216)](_0x4d2447=>_0x4d2447['id']===editingId));},_0x545fed[_0x5ae420(0x2d6)]=_0x5ae420(0x299),_0x545fed[_0x5ae420(0x316)]=_0x5ae420(0x301),_0x545fed[_0x5ae420(0x226)]=()=>{const _0x2697ac=_0x5ae420;closeActionSheet(),commitDelete(_0x2697ac(0x349),sessions[_0x2697ac(0x216)](_0x2d7cff=>_0x2d7cff['id']===editingId));});}function closeActionSheet(){const _0x53ea7b=a2_0x143044;document['getElementById'](_0x53ea7b(0x283))[_0x53ea7b(0x1d9)][_0x53ea7b(0x320)](_0x53ea7b(0x333)),document[_0x53ea7b(0x225)](_0x53ea7b(0x1f8))[_0x53ea7b(0x1d9)]['remove'](_0x53ea7b(0x284));}function openSettings(){const _0x154298=a2_0x143044;openSheet(_0x154298(0x20e));}function saveCoachSettings(){const _0x4b999e=a2_0x143044,_0xf74e13=document[_0x4b999e(0x225)](_0x4b999e(0x1ec))[_0x4b999e(0x327)];localStorage['setItem'](_0x4b999e(0x24a),_0xf74e13),console['log'](_0x4b999e(0x2db),_0xf74e13),DataManager['fetchFromServer']('save_settings',{'settings':{'cancel_window':_0xf74e13}})[_0x4b999e(0x2f2)](_0x22eb66=>{const _0x28a4c9=_0x4b999e;console[_0x28a4c9(0x362)](_0x28a4c9(0x307),_0x22eb66),showToast('Ошибка\x20сохранения\x20настроек',![]);});}function loadCoachSettings(){const _0xd3b933=a2_0x143044,_0x5ecdab=localStorage[_0xd3b933(0x22b)](_0xd3b933(0x24a));_0x5ecdab&&(document['getElementById'](_0xd3b933(0x1ec))[_0xd3b933(0x327)]=_0x5ecdab);}function openRangesSheet(){const _0x23ba82=a2_0x143044;closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet(_0x23ba82(0x2a7));}function addRange(){const _0x550031=a2_0x143044,_0x114647=document[_0x550031(0x225)](_0x550031(0x2f3))[_0x550031(0x327)],_0x4cda24=document[_0x550031(0x225)](_0x550031(0x2ec))[_0x550031(0x327)],_0x3de62a=document[_0x550031(0x225)](_0x550031(0x35a))[_0x550031(0x327)],_0x57e193=document[_0x550031(0x225)]('rangeEndTime')[_0x550031(0x327)];if(!_0x114647||!_0x4cda24||!_0x3de62a||!_0x57e193)return alert(_0x550031(0x2c7));const _0x281fcf=_0x114647+'T'+_0x4cda24,_0x1dc31a=_0x3de62a+'T'+_0x57e193;if(_0x281fcf>=_0x1dc31a)return alert('Ошибка\x20дат');specialRanges[_0x550031(0x293)]({'start':_0x281fcf,'end':_0x1dc31a}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x550031(0x251)](),DataManager['fetchFromServer']('save_settings',{'settings':{'ranges':specialRanges}});}function deleteRange(_0x4fcf20){const _0x294924=a2_0x143044;specialRanges[_0x294924(0x30b)](_0x4fcf20,0x1),renderRangesList(),reRenderBlocks(),DataManager[_0x294924(0x251)](),DataManager['fetchFromServer']('save_settings',{'settings':{'ranges':specialRanges}});}function a2_0x56f0(_0x2465fc,_0x24734e){_0x2465fc=_0x2465fc-0x1d9;const _0x22b0cd=a2_0x1725();let _0x540b3d=_0x22b0cd[_0x2465fc];return _0x540b3d;}function resetRangeForm(){const _0x169dc=a2_0x143044;document['getElementById'](_0x169dc(0x2f3))[_0x169dc(0x327)]='',document[_0x169dc(0x225)]('rangeStartTime')[_0x169dc(0x327)]='00:00',document[_0x169dc(0x225)]('rangeEndDate')[_0x169dc(0x327)]='',document['getElementById'](_0x169dc(0x32d))[_0x169dc(0x327)]='23:59';}function renderRangesList(){const _0x52d980=a2_0x143044,_0x29cbee=document['getElementById'](_0x52d980(0x2c5));_0x29cbee[_0x52d980(0x358)]='';if(!specialRanges[_0x52d980(0x2eb)]){_0x29cbee['innerHTML']=_0x52d980(0x35d);return;}specialRanges[_0x52d980(0x27c)]((_0x4874e3,_0xd17ae9)=>{const _0x3e65e0=_0x52d980,_0x25de4c=document[_0x3e65e0(0x309)](_0x3e65e0(0x285));_0x25de4c[_0x3e65e0(0x316)]=_0x3e65e0(0x2d3);const _0x44149b=_0x14de84=>{const _0x10377a=_0x3e65e0,_0x250d09=new Date(_0x14de84);return _0x250d09[_0x10377a(0x30f)]()+'.'+String(_0x250d09[_0x10377a(0x1f0)]()+0x1)[_0x10377a(0x2ea)](0x2,'0')+'\x20'+String(_0x250d09[_0x10377a(0x359)]())['padStart'](0x2,'0')+':'+String(_0x250d09[_0x10377a(0x275)]())['padStart'](0x2,'0');};_0x25de4c[_0x3e65e0(0x358)]=_0x3e65e0(0x1fe)+_0x44149b(_0x4874e3[_0x3e65e0(0x31f)])+_0x3e65e0(0x351)+_0x44149b(_0x4874e3['end'])+_0x3e65e0(0x276)+_0xd17ae9+_0x3e65e0(0x2c9),_0x29cbee[_0x3e65e0(0x315)](_0x25de4c);});}function scrollToToday(){const _0x452f27=a2_0x143044,_0x268adc=getLocalDateStr(new Date()),_0x116699=document[_0x452f27(0x225)](_0x452f27(0x2b4)+_0x268adc),_0x5dc0cd=document[_0x452f27(0x225)]('matrixViewport');if(_0x116699&&_0x5dc0cd){const _0x5e7ab8=_0x5dc0cd['clientWidth'],_0x549f96=_0x116699[_0x452f27(0x277)],_0x2cfcb3=_0x116699['offsetWidth'];_0x5dc0cd[_0x452f27(0x29e)]=_0x549f96-_0x5e7ab8/0x2+_0x2cfcb3/0x2,_0x5dc0cd[_0x452f27(0x22a)]=0x9*GRID_H;}}function onScroll(){const _0x387daa=a2_0x143044,_0xfd3840=document[_0x387daa(0x225)](_0x387daa(0x2ab)),_0x3a730f=document[_0x387daa(0x1e7)](_0x387daa(0x227));for(let _0x405c90 of _0x3a730f)if(_0x405c90[_0x387daa(0x277)]>=_0xfd3840[_0x387daa(0x29e)]){const _0x381e81=new Date(_0x405c90[_0x387daa(0x23c)]('data-date'));document[_0x387daa(0x225)]('headerMonth')[_0x387daa(0x2d6)]=_0x381e81[_0x387daa(0x264)]('ru',{'month':_0x387daa(0x28e)})[_0x387daa(0x29f)]()+'\x20'+_0x381e81[_0x387daa(0x292)]();break;}}function showToast(_0x106256,_0x33405a=![]){const _0x1a8545=a2_0x143044,_0x5ee993=document['getElementById'](_0x1a8545(0x2ad));_0x5ee993[_0x1a8545(0x316)]=_0x1a8545(0x1fa)+(_0x33405a?'success':''),document['getElementById'](_0x1a8545(0x23d))['textContent']=_0x33405a?_0x1a8545(0x28f):_0x1a8545(0x363),document[_0x1a8545(0x225)](_0x1a8545(0x30c))[_0x1a8545(0x2d6)]=_0x106256,_0x5ee993['classList'][_0x1a8545(0x207)](_0x1a8545(0x2b8)),setTimeout(()=>{const _0x447545=_0x1a8545;_0x5ee993[_0x447545(0x1d9)][_0x447545(0x320)]('show');},0xbb8);}function openDayOptions(_0xb9b5f8,_0x233391){const _0x17ba0d=a2_0x143044;selectedDayForOptions=_0xb9b5f8,document[_0x17ba0d(0x225)](_0x17ba0d(0x249))[_0x17ba0d(0x2d6)]=_0x233391,openSheet(_0x17ba0d(0x32e));}function toggleDayOff(){const _0xb6aa8f=a2_0x143044;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0xb6aa8f(0x288),reRenderBlocks(),closeAllSheets(),DataManager['saveLocally'](),DataManager[_0xb6aa8f(0x1e3)](_0xb6aa8f(0x253),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x20f01c=a2_0x143044;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x20f01c(0x251)](),DataManager[_0x20f01c(0x1e3)](_0x20f01c(0x253),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x2830c1){const _0x50b5b7=a2_0x143044;document[_0x50b5b7(0x225)](_0x50b5b7(0x252))[_0x50b5b7(0x1d9)][_0x50b5b7(0x207)](_0x50b5b7(0x284)),document[_0x50b5b7(0x225)](_0x2830c1)[_0x50b5b7(0x1d9)][_0x50b5b7(0x207)](_0x50b5b7(0x333));}function closeAllSheets(){const _0x1e0096=a2_0x143044;document[_0x1e0096(0x225)]('overlay')['classList'][_0x1e0096(0x320)]('active'),document[_0x1e0096(0x1e7)](_0x1e0096(0x34e))[_0x1e0096(0x27c)](_0x54e444=>_0x54e444['classList']['remove'](_0x1e0096(0x333)));}function openPatternEditor(){const _0x511c7a=a2_0x143044;closeAllSheets(),document['getElementById'](_0x511c7a(0x206))[_0x511c7a(0x1d9)][_0x511c7a(0x207)](_0x511c7a(0x333)),renderPatternEditor();}function closePatternEditor(){const _0x1aae46=a2_0x143044;document[_0x1aae46(0x225)](_0x1aae46(0x206))[_0x1aae46(0x1d9)][_0x1aae46(0x320)](_0x1aae46(0x333));}function a2_0x1725(){const _0x29cfc3=['client-stat-card','day-col-header\x20','as-button\x20danger\x20bold','touchmove','btnDelete','loadLocal','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','today','Save\x20settings\x20error:','update','createElement','\x20из\x20','splice','toastMessage','.pib-text','borderLeftColor','getDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','width','Редактировать','[Sync]\x20Loading\x20','var(--acc-red)','appendChild','className','calc(','cancel','Этот\x20клиент\x20(','Максимум\x20100\x20за\x20раз','end','undefined','isArray','zIndex','start','remove','stringify','from','Тренировка\x20завершена','mini','uc_sessions_v9','statLoadCard','value','mousemove','slice','inpDate','recurringOptionContainer','insertBefore','rangeEndTime','dayOptionsSheet','toFixed','exceptions','Error\x20setting\x20color:','initDataUnsafe','open','getDay','%\x20+\x202px)','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','Только\x20эту','setHours','data-day-idx','json','findIndex','Server\x20Error','cancel_window','search','[Notify]\x20Error:\x20Text\x20generation\x20failed','target','Вернуть\x20в\x20запланированные','touchstart','numeric','patternInfoBox','custom','min','peGrid','save','series','sort',':00','option','uc_settings_v9','.sheet','Жду\x20вас\x20в\x20зале!\x20💪','parse','\x20—\x20','backgroundColor','getBoundingClientRect','daysHeaderTrack','as-button\x20danger','event-card','var(--acc-current)','innerHTML','getHours','rangeEndDate','sheetTitle','send','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','</span>\x20/\x20','planned','single','inpClient','error','Инфо','analyticsSheet','inpSeriesCount','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','classList','pe-cell\x20','setHeaderColor','anStart','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','doEventsList','strokeDashoffset','keys','querySelector','month','fetchFromServer','user','Local\x20Save\x20Error','deleted','querySelectorAll','<b>📅\x20Дата:</b>\x20','Удаление','sheetDateSubtitle','v9.0-BATCH-CALENDAR','settingCancelWindow','seriesCountContainer','status','style','getMonth','Local\x20Load\x20Error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','Синхронизировано','all','height','Оффлайн\x20режим','getText','actionSheetOverlay','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','toast-notification\x20','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','</div><div\x20class=\x22dch-num\x22>','backgroundPosition','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','btnStatusToggle','valid','entries','2395RJFAsr','gridColumns','[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:','log','patternEditor','add','мин,\x20Загрузка:\x20','Статус\x20сброшен','max','expand','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','clientId','settingsSheet','anCustomDates','doLoadPercent','name','warning','stopPropagation','map','btn-primary\x20btn-secondary','find','pe-corner','pe-time-label','WebApp','vibrate','Ваша\x20тренировка\x20перенесена:\x0a\x0a','substr','ru-RU','setAttribute','.dch-stats-fill','complete','cancelled','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>','Error\x20setting\x20back\x20button:','getElementById','onclick','.day-col-header','#0a84ff','anPercent','scrollTop','getItem','anEnd','Минимум\x202\x20тренировки','setDate','4CqJLcA','week','DOMContentLoaded','ч,\x20Занято:\x20','8000082ITqoiB','[Series]\x20Skipped\x20','router.html','disableVerticalSwipes','analyticsList','(((.+)+)+)+$','apply','...','uc_clients_v9','getAttribute','toastTitle','10px','now','then','4313275kHqMcG','clients','Это\x20часть\x20серии\x20тренировок','Запись\x20на\x20<b>','Все\x20даты\x20заняты\x20этим\x20клиентом!','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','btn-primary\x20btn-danger','done','dayOptionsTitle','uc_settings_cancel_window','borderRadius','addEventListener','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','POST','4451144mrRKmu','Telegram','saveLocally','overlay','save_settings','btn-status-toggle','sessionSheet','Critical\x20TMA\x20Error:','202vUsYFa','.period-switch\x20.p-btn','init_load','.event-card','T00:00:00','px\x200px','87913KCXsML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','guest','firstChild','borderColor','top','sid','toLocaleString','getTime','setItem','#gridColumns\x20.day-column','clientY','random','warn','19371231bskBnn','\x20-\x20','split','color','create','includes','Batch\x20Sync\x20OK','rgba(255,255,255,0.05)','[Notify]\x20Attempting\x20to\x20send:',']\x20Failed:','getMinutes','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','offsetLeft',')\x20уже\x20записан\x20на\x20это\x20время!','\x20(пропущено:\x20','toLocaleDateString','btn-status-toggle\x20undo-mode','forEach','de-item','stat-','ready','checked','day-off-overlay\x20stripe-bg','100%','actionSheet','active','div','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','syncLoad','off','send_notification','touchend','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','.day-off-overlay','Нет\x20клиентов','long','Успешно','touches','display','getFullYear','push','setBackgroundColor','#050505','rgba(255,\x20159,\x2010,\x200.3)','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','Эту\x20и\x20будущие','dateStr','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','charAt',']\x20Доступно:\x20','scrollLeft','toUpperCase','note','blocked-slot\x20stripe-bg','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','globalTimeLine','client','data-date','background','rangesSheet','constructor','\x20status-completed','<b>⏰\x20Время:</b>\x20','matrixViewport','scroll','toast','null','toString','scrollWidth','flex','px\x20-','[API\x20','header-','\x20выполнено','Unknown','<div\x20class=\x22dch-day\x22>','show','clientWidth','calendar','rgba(48,\x20209,\x2088,\x200.15)','T23:59:59','doDateHeader',':\x20Client\x20already\x20booked','pattern','floor','none','day-column\x20','.day-column','seriesId','rangesList','<span>','Заполните\x20все\x20поля','msg',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','[Notify]\x20Detected\x20Client\x20ID:','inpRecurring','rgba(255,\x2069,\x2058,\x200.3)','Ошибка\x20сохранения\x20в\x20облако','href','block','10px\x2010px\x200\x200','total','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','range-item','timeColumn','[Notify]\x20Error:\x20sessionData\x20is\x20null','textContent','3167151TiUoqu','indexOf','</div>','formatDate','[Settings]\x20Cancel\x20window\x20set\x20to:','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>',')</b>\x20была\x20удалена\x20из\x20расписания.','inpStart','onClick','%\x20-\x204px)','timeLineBadge','text','[Notify]\x20Server\x20Response:','BackButton','inpNote','Создана\x20серия:\x20','blocked-range-part\x20stripe-bg','inpEnd','createDocumentFragment','padStart','length','rangeStartTime','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','mergeServerData','Сделать\x20выходным','filter','colIndex','catch','rangeStartDate','var(--acc-green)','ranges','data','rgba(','[Notify]\x20Sending\x20to\x20GAS\x20for\x20','Групповая:\x20также\x20записан\x20','offClick','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','settings','round','completed'];a2_0x1725=function(){return _0x29cfc3;};return a2_0x1725();}function savePattern(){const _0x1aee1e=a2_0x143044;document[_0x1aee1e(0x225)]('patternEditor')[_0x1aee1e(0x1d9)]['remove'](_0x1aee1e(0x333)),reRenderBlocks(),DataManager[_0x1aee1e(0x251)](),DataManager[_0x1aee1e(0x1e3)]('save_settings',{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x181c67=a2_0x143044,_0x59dcf1=document[_0x181c67(0x225)](_0x181c67(0x347));_0x59dcf1[_0x181c67(0x358)]='';const _0x106195=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x433316=document[_0x181c67(0x309)](_0x181c67(0x285));_0x433316['className']=_0x181c67(0x217),_0x59dcf1[_0x181c67(0x315)](_0x433316),_0x106195[_0x181c67(0x27c)]((_0x46a86e,_0x5edc54)=>{const _0x229dd3=_0x181c67,_0x46595e=document['createElement'](_0x229dd3(0x285));_0x46595e['className']='pe-col-header',_0x46595e[_0x229dd3(0x358)]=_0x46a86e+'\x20<span\x20class=\x22arrow\x22>↓</span>',_0x46595e['onclick']=()=>toggleColPattern(_0x5edc54),_0x59dcf1[_0x229dd3(0x315)](_0x46595e);});for(let _0x28272b=0x0;_0x28272b<0x18;_0x28272b++){const _0x226932=document[_0x181c67(0x309)]('div');_0x226932[_0x181c67(0x316)]=_0x181c67(0x218),_0x226932[_0x181c67(0x358)]=_0x181c67(0x366)+String(_0x28272b)[_0x181c67(0x2ea)](0x2,'0')+_0x181c67(0x34b),_0x226932['onclick']=()=>toggleRowPattern(_0x28272b),_0x59dcf1[_0x181c67(0x315)](_0x226932);for(let _0x319b42=0x0;_0x319b42<0x7;_0x319b42++){const _0x1d994a=document[_0x181c67(0x309)](_0x181c67(0x285)),_0x13a340=(availabilityPattern[_0x319b42]||[])[_0x181c67(0x270)](_0x28272b),_0x18fba0=!_0x13a340;_0x1d994a['className']=_0x181c67(0x1da)+(_0x18fba0?_0x181c67(0x284):''),_0x1d994a[_0x181c67(0x226)]=()=>toggleSinglePattern(_0x319b42,_0x28272b),_0x59dcf1[_0x181c67(0x315)](_0x1d994a);}}}function toggleSinglePattern(_0x3ed9cc,_0x4ff2ad){const _0x151783=a2_0x143044;if(!availabilityPattern[_0x3ed9cc])availabilityPattern[_0x3ed9cc]=[];const _0x16693d=availabilityPattern[_0x3ed9cc],_0x1a3527=_0x16693d[_0x151783(0x2d8)](_0x4ff2ad);_0x1a3527===-0x1?_0x16693d[_0x151783(0x293)](_0x4ff2ad):_0x16693d['splice'](_0x1a3527,0x1),renderPatternEditor();}function toggleColPattern(_0x460f39){const _0x333beb=a2_0x143044;if(!availabilityPattern[_0x460f39])availabilityPattern[_0x460f39]=[];const _0x3a9e61=availabilityPattern[_0x460f39];_0x3a9e61[_0x333beb(0x2eb)]===0x0?availabilityPattern[_0x460f39]=Array[_0x333beb(0x322)]({'length':0x18},(_0x31418b,_0x29fc38)=>_0x29fc38):availabilityPattern[_0x460f39]=[],renderPatternEditor();}function toggleRowPattern(_0x3d6336){const _0x877a0e=a2_0x143044;let _0x193a83=!![];for(let _0x382fab=0x0;_0x382fab<0x7;_0x382fab++){if((availabilityPattern[_0x382fab]||[])[_0x877a0e(0x270)](_0x3d6336)){_0x193a83=![];break;}}for(let _0x1e5906=0x0;_0x1e5906<0x7;_0x1e5906++){if(!availabilityPattern[_0x1e5906])availabilityPattern[_0x1e5906]=[];const _0x3e668b=availabilityPattern[_0x1e5906][_0x877a0e(0x2d8)](_0x3d6336);if(_0x193a83){if(_0x3e668b===-0x1)availabilityPattern[_0x1e5906][_0x877a0e(0x293)](_0x3d6336);}else{if(_0x3e668b!==-0x1)availabilityPattern[_0x1e5906][_0x877a0e(0x30b)](_0x3e668b,0x1);}}renderPatternEditor();}function renderPCol(_0x63342c,_0x4ed598){const _0x3c08f4=a2_0x143044;_0x63342c['innerHTML']='';const _0x379ff7=Math[_0x3c08f4(0x2fd)](_0x63342c[_0x3c08f4(0x277)]);(availabilityPattern[_0x4ed598]||[])[_0x3c08f4(0x27c)](_0x485ad6=>{const _0x140d4f=_0x3c08f4,_0x168ee2=document['createElement'](_0x140d4f(0x285));_0x168ee2[_0x140d4f(0x316)]=_0x140d4f(0x2a1);const _0x3d9c07=_0x485ad6*GRID_H;_0x168ee2[_0x140d4f(0x1ef)][_0x140d4f(0x262)]=_0x3d9c07+'px',_0x168ee2[_0x140d4f(0x1ef)][_0x140d4f(0x1fd)]='-'+_0x379ff7+_0x140d4f(0x2b2)+_0x3d9c07+'px',_0x168ee2[_0x140d4f(0x226)]=_0x4edad6=>{const _0x4b81a6=_0x140d4f;_0x4edad6[_0x4b81a6(0x213)](),toggleSinglePattern(_0x4ed598,_0x485ad6);},_0x63342c[_0x140d4f(0x315)](_0x168ee2);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x3666b3=a2_0x143044,_0x3e5735=new Date(),_0x3c8671=document[_0x3666b3(0x225)](_0x3666b3(0x2a3)),_0x188f2b=document['getElementById'](_0x3666b3(0x2e1)),_0xac3c44=(_0x3e5735[_0x3666b3(0x359)]()*0x3c+_0x3e5735[_0x3666b3(0x275)]())/0x3c*GRID_H;_0x3c8671[_0x3666b3(0x1ef)][_0x3666b3(0x262)]=_0xac3c44+'px',_0x3c8671['style']['display']='block',_0x188f2b[_0x3666b3(0x2d6)]=String(_0x3e5735[_0x3666b3(0x359)]())[_0x3666b3(0x2ea)](0x2,'0')+':'+String(_0x3e5735[_0x3666b3(0x275)]())[_0x3666b3(0x2ea)](0x2,'0'),_0x188f2b[_0x3666b3(0x1ef)][_0x3666b3(0x291)]=_0x3666b3(0x2cf),_0x188f2b[_0x3666b3(0x1ef)]['top']=_0xac3c44+'px';}document[a2_0x143044(0x24c)](a2_0x143044(0x231),init);function openDayOptions(_0x305edf){const _0x127c16=a2_0x143044;selectedDayForOptions=_0x305edf;const _0x37f5a6=new Date(_0x305edf),_0x583502={'weekday':_0x127c16(0x28e),'day':_0x127c16(0x343),'month':_0x127c16(0x28e),'year':_0x127c16(0x343)},_0x4ae8f2=_0x37f5a6[_0x127c16(0x27a)](_0x127c16(0x21d),_0x583502);document['getElementById'](_0x127c16(0x2bd))[_0x127c16(0x2d6)]=_0x4ae8f2[_0x127c16(0x29c)](0x0)[_0x127c16(0x29f)]()+_0x4ae8f2[_0x127c16(0x329)](0x1);let _0x5ead01=_0x37f5a6['getDay']()-0x1;if(_0x5ead01===-0x1)_0x5ead01=0x6;const _0x57a111=availabilityPattern[_0x5ead01]||[],_0x4d6cc0=0x18-_0x57a111[_0x127c16(0x2eb)],_0x91ebee=_0x4d6cc0*0x3c,_0x5a0a6b=sessions[_0x127c16(0x2f0)](_0x3aeb45=>_0x3aeb45[_0x127c16(0x29a)]===_0x305edf&&_0x3aeb45['status']!==_0x127c16(0x221));let _0x363462=_0x5a0a6b[_0x127c16(0x214)](_0x22a163=>{const _0xbc20d6=_0x127c16,[_0x2512fb,_0x58d243]=_0x22a163['start']['split'](':')['map'](Number),[_0x59290b,_0x15a7df]=_0x22a163[_0xbc20d6(0x31b)][_0xbc20d6(0x26d)](':')[_0xbc20d6(0x214)](Number);return[_0x2512fb*0x3c+_0x58d243,_0x59290b*0x3c+_0x15a7df];});_0x363462['sort']((_0x1dc1d2,_0x569407)=>_0x1dc1d2[0x0]-_0x569407[0x0]);let _0x40d612=[];if(_0x363462[_0x127c16(0x2eb)]>0x0){let _0x231763=_0x363462[0x0];for(let _0xb9379e=0x1;_0xb9379e<_0x363462[_0x127c16(0x2eb)];_0xb9379e++){_0x363462[_0xb9379e][0x0]<_0x231763[0x1]?_0x231763[0x1]=Math[_0x127c16(0x20a)](_0x231763[0x1],_0x363462[_0xb9379e][0x1]):(_0x40d612[_0x127c16(0x293)](_0x231763),_0x231763=_0x363462[_0xb9379e]);}_0x40d612['push'](_0x231763);}let _0x5a5314=0x0;_0x40d612[_0x127c16(0x27c)](_0x55e495=>_0x5a5314+=_0x55e495[0x1]-_0x55e495[0x0]),document[_0x127c16(0x225)]('doWorkHours')[_0x127c16(0x2d6)]=formatMinsToHrs(_0x91ebee),document[_0x127c16(0x225)]('doBusyHours')[_0x127c16(0x2d6)]=formatMinsToHrs(_0x5a5314);const _0x25be92=_0x91ebee>0x0?Math[_0x127c16(0x2fd)](_0x5a5314/_0x91ebee*0x64):0x0,_0x3c8dd9=document[_0x127c16(0x225)](_0x127c16(0x210));_0x3c8dd9['textContent']=_0x25be92+'%';const _0x34fce9=document[_0x127c16(0x225)](_0x127c16(0x326));if(_0x25be92>0x64)_0x3c8dd9[_0x127c16(0x1ef)][_0x127c16(0x26e)]='var(--acc-red)',_0x34fce9[_0x127c16(0x1ef)][_0x127c16(0x261)]=_0x127c16(0x2cc);else _0x25be92>0x50?(_0x3c8dd9[_0x127c16(0x1ef)]['color']='var(--acc-orange)',_0x34fce9[_0x127c16(0x1ef)][_0x127c16(0x261)]=_0x127c16(0x296)):(_0x3c8dd9[_0x127c16(0x1ef)][_0x127c16(0x26e)]=_0x127c16(0x2f4),_0x34fce9[_0x127c16(0x1ef)][_0x127c16(0x261)]=_0x127c16(0x272));const _0x44f603=document['getElementById'](_0x127c16(0x1de));_0x44f603[_0x127c16(0x358)]='';_0x5a0a6b['length']===0x0?_0x44f603[_0x127c16(0x358)]=_0x127c16(0x223):(_0x5a0a6b['sort']((_0x551f2d,_0x3a7431)=>_0x551f2d['start']['localeCompare'](_0x3a7431['start'])),_0x5a0a6b[_0x127c16(0x27c)](_0x425dc6=>{const _0x950ec7=_0x127c16,_0x284690=clients[_0x950ec7(0x216)](_0x5dbd71=>_0x5dbd71[_0x950ec7(0x211)]===_0x425dc6['client']),_0x395bc2=_0x284690?_0x284690['color']:'#fff',_0x73251d=_0x425dc6['status']===_0x950ec7(0x2fe),_0x381ae1=_0x73251d?'<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>':'',_0x8bb2a1=document[_0x950ec7(0x309)](_0x950ec7(0x285));_0x8bb2a1[_0x950ec7(0x316)]=_0x950ec7(0x27d),_0x8bb2a1[_0x950ec7(0x1ef)][_0x950ec7(0x30e)]=_0x395bc2,_0x8bb2a1[_0x950ec7(0x358)]=_0x950ec7(0x1f2)+_0x425dc6[_0x950ec7(0x31f)]+_0x950ec7(0x26c)+_0x425dc6[_0x950ec7(0x31b)]+_0x950ec7(0x29b)+_0x425dc6['client']+_0x950ec7(0x25e)+_0x381ae1+_0x950ec7(0x310),_0x44f603[_0x950ec7(0x315)](_0x8bb2a1);}));const _0x54b9e6=document['getElementById']('btnDayToggle'),_0x4467d0=dateExceptions[_0x305edf]===_0x127c16(0x288);_0x4467d0?(_0x54b9e6[_0x127c16(0x2d6)]='Сделать\x20рабочим\x20днем',_0x54b9e6[_0x127c16(0x316)]=_0x127c16(0x215),_0x54b9e6[_0x127c16(0x1ef)][_0x127c16(0x26e)]=_0x127c16(0x2f4),_0x54b9e6[_0x127c16(0x1ef)][_0x127c16(0x2a6)]=_0x127c16(0x2bb)):(_0x54b9e6[_0x127c16(0x2d6)]=_0x127c16(0x2ef),_0x54b9e6['className']=_0x127c16(0x247),_0x54b9e6[_0x127c16(0x1ef)][_0x127c16(0x26e)]=_0x127c16(0x314),_0x54b9e6[_0x127c16(0x1ef)][_0x127c16(0x2a6)]='rgba(255,\x2069,\x2058,\x200.15)'),openSheet('dayOptionsSheet');}let currentAnPeriod=a2_0x143044(0x230);function openAnalytics(){const _0x57e2b0=a2_0x143044,_0x379200=document[_0x57e2b0(0x1e1)](_0x57e2b0(0x258));setAnalyticsPeriod(_0x57e2b0(0x230),_0x379200),closeAllSheets(),openSheet(_0x57e2b0(0x364));}function setAnalyticsPeriod(_0x357ae0,_0x109a0f){const _0x14f56a=a2_0x143044;currentAnPeriod=_0x357ae0,document[_0x14f56a(0x1e7)](_0x14f56a(0x258))[_0x14f56a(0x27c)](_0x307ad2=>_0x307ad2[_0x14f56a(0x1d9)][_0x14f56a(0x320)](_0x14f56a(0x284)));if(_0x109a0f)_0x109a0f[_0x14f56a(0x1d9)]['add'](_0x14f56a(0x284));const _0x20c39b=document[_0x14f56a(0x225)](_0x14f56a(0x20f));_0x20c39b['style'][_0x14f56a(0x291)]=_0x357ae0===_0x14f56a(0x345)?_0x14f56a(0x2b1):_0x14f56a(0x2c1);const _0x3ce11e=new Date();let _0x302f47=new Date(),_0x2f8ddf=new Date();if(_0x357ae0===_0x14f56a(0x230))_0x302f47=getStartOfWeek(_0x3ce11e),_0x2f8ddf=new Date(_0x302f47),_0x2f8ddf['setDate'](_0x2f8ddf[_0x14f56a(0x30f)]()+0x6);else{if(_0x357ae0===_0x14f56a(0x1e2))_0x302f47=new Date(_0x3ce11e['getFullYear'](),_0x3ce11e[_0x14f56a(0x1f0)](),0x1),_0x2f8ddf=new Date(_0x3ce11e['getFullYear'](),_0x3ce11e['getMonth']()+0x1,0x0);else{!document[_0x14f56a(0x225)](_0x14f56a(0x1dc))[_0x14f56a(0x327)]&&(document[_0x14f56a(0x225)]('anStart')['value']=getLocalDateStr(_0x3ce11e),document['getElementById'](_0x14f56a(0x22c))['value']=getLocalDateStr(_0x3ce11e));refreshAnalytics();return;}}document[_0x14f56a(0x225)]('anStart')[_0x14f56a(0x327)]=getLocalDateStr(_0x302f47),document[_0x14f56a(0x225)](_0x14f56a(0x22c))['value']=getLocalDateStr(_0x2f8ddf),refreshAnalytics();}function refreshAnalytics(){const _0x5c6b98=a2_0x143044,_0x415b2a=document[_0x5c6b98(0x225)](_0x5c6b98(0x1dc))[_0x5c6b98(0x327)],_0x37e290=document[_0x5c6b98(0x225)](_0x5c6b98(0x22c))['value'];if(!_0x415b2a||!_0x37e290)return;const _0x517cce=sessions[_0x5c6b98(0x2f0)](_0x2c0ac8=>_0x2c0ac8[_0x5c6b98(0x29a)]>=_0x415b2a&&_0x2c0ac8[_0x5c6b98(0x29a)]<=_0x37e290&&_0x2c0ac8[_0x5c6b98(0x1ee)]!==_0x5c6b98(0x221)),_0x2f9aa8=_0x517cce[_0x5c6b98(0x2eb)],_0x5b3272=_0x517cce[_0x5c6b98(0x2f0)](_0x384791=>_0x384791['status']===_0x5c6b98(0x2fe))['length'],_0xe6cd4c=_0x2f9aa8>0x0?Math[_0x5c6b98(0x2fd)](_0x5b3272/_0x2f9aa8*0x64):0x0;document[_0x5c6b98(0x225)](_0x5c6b98(0x229))[_0x5c6b98(0x2d6)]=_0xe6cd4c+'%',document[_0x5c6b98(0x225)]('anTotalStats')['textContent']=_0x5b3272+_0x5c6b98(0x30a)+_0x2f9aa8+_0x5c6b98(0x2b5);const _0x275d07=document[_0x5c6b98(0x225)]('anDonutCircle'),_0x3e6d8e=0x2*Math['PI']*0x23,_0x4aee67=_0x3e6d8e-_0xe6cd4c/0x64*_0x3e6d8e;_0x275d07[_0x5c6b98(0x1ef)][_0x5c6b98(0x1df)]=_0x4aee67;const _0x29625f={};_0x517cce[_0x5c6b98(0x27c)](_0x327dac=>{const _0x479c33=_0x5c6b98;if(!_0x29625f[_0x327dac[_0x479c33(0x2a4)]]){const _0x3c0a7f=clients[_0x479c33(0x216)](_0x24b40e=>_0x24b40e[_0x479c33(0x211)]===_0x327dac['client']);_0x29625f[_0x327dac[_0x479c33(0x2a4)]]={'total':0x0,'done':0x0,'color':_0x3c0a7f?_0x3c0a7f[_0x479c33(0x26e)]:'#fff'};}_0x29625f[_0x327dac[_0x479c33(0x2a4)]][_0x479c33(0x2d1)]++;if(_0x327dac[_0x479c33(0x1ee)]==='completed')_0x29625f[_0x327dac[_0x479c33(0x2a4)]][_0x479c33(0x248)]++;});const _0x6fc6a7=document['getElementById'](_0x5c6b98(0x237));_0x6fc6a7[_0x5c6b98(0x358)]='';const _0x5489ce=Object[_0x5c6b98(0x201)](_0x29625f)['sort']((_0x194dc7,_0x5095dd)=>_0x5095dd[0x1][_0x5c6b98(0x2d1)]-_0x194dc7[0x1][_0x5c6b98(0x2d1)]);if(_0x5489ce[_0x5c6b98(0x2eb)]===0x0){_0x6fc6a7[_0x5c6b98(0x358)]=_0x5c6b98(0x2fb);return;}_0x5489ce[_0x5c6b98(0x27c)](([_0x4b0b9c,_0x4b7b3d])=>{const _0x427b26=_0x5c6b98,_0x2b0549=Math[_0x427b26(0x2fd)](_0x4b7b3d[_0x427b26(0x248)]/_0x4b7b3d[_0x427b26(0x2d1)]*0x64),_0x4967a9=document[_0x427b26(0x309)](_0x427b26(0x285));_0x4967a9['className']=_0x427b26(0x2ff),_0x4967a9[_0x427b26(0x1ef)][_0x427b26(0x30e)]=_0x4b7b3d[_0x427b26(0x26e)],_0x4967a9[_0x427b26(0x358)]=_0x427b26(0x298)+_0x4b0b9c+_0x427b26(0x297)+_0x4b7b3d['done']+_0x427b26(0x35e)+_0x4b7b3d[_0x427b26(0x2d1)]+_0x427b26(0x305)+_0x2b0549+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x6fc6a7['appendChild'](_0x4967a9);});}function formatMinsToHrs(_0x141296){const _0x553aaf=a2_0x143044;if(_0x141296===0x0)return'0';const _0x3f5ce8=Math[_0x553aaf(0x2c0)](_0x141296/0x3c),_0x4ac727=_0x141296%0x3c;if(_0x4ac727===0x0)return _0x3f5ce8+'ч';return _0x3f5ce8+'ч\x20'+_0x4ac727+'м';}