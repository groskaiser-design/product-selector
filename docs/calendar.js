const a2_0x487f0a=a2_0x3764;(function(_0x5a845e,_0x457be2){const _0x487b5b=a2_0x3764,_0x2cbf83=_0x5a845e();while(!![]){try{const _0x20ac23=-parseInt(_0x487b5b(0x22d))/0x1+-parseInt(_0x487b5b(0x272))/0x2*(-parseInt(_0x487b5b(0x1e6))/0x3)+parseInt(_0x487b5b(0x23e))/0x4+-parseInt(_0x487b5b(0x201))/0x5*(parseInt(_0x487b5b(0x2e5))/0x6)+-parseInt(_0x487b5b(0x25c))/0x7*(parseInt(_0x487b5b(0x239))/0x8)+-parseInt(_0x487b5b(0x1c9))/0x9+-parseInt(_0x487b5b(0x2fe))/0xa*(-parseInt(_0x487b5b(0x1b7))/0xb);if(_0x20ac23===_0x457be2)break;else _0x2cbf83['push'](_0x2cbf83['shift']());}catch(_0x59c8c7){_0x2cbf83['push'](_0x2cbf83['shift']());}}}(a2_0x33f1,0x915de),function initTMA(){const _0x4f8c6e=a2_0x3764,_0x4d7a56=(function(){let _0x222897=!![];return function(_0x4d768a,_0x1c8058){const _0x30343f=_0x222897?function(){if(_0x1c8058){const _0x37ab35=_0x1c8058['apply'](_0x4d768a,arguments);return _0x1c8058=null,_0x37ab35;}}:function(){};return _0x222897=![],_0x30343f;};}()),_0x52aa3a=_0x4d7a56(this,function(){const _0x257721=a2_0x3764;return _0x52aa3a[_0x257721(0x1f2)]()[_0x257721(0x259)](_0x257721(0x241))[_0x257721(0x1f2)]()['constructor'](_0x52aa3a)[_0x257721(0x259)](_0x257721(0x241));});_0x52aa3a();try{const _0x30537a=window[_0x4f8c6e(0x233)]?.['WebApp'];if(!_0x30537a)return;_0x30537a[_0x4f8c6e(0x2b0)](),_0x30537a[_0x4f8c6e(0x29d)]();try{_0x30537a[_0x4f8c6e(0x2f4)](_0x4f8c6e(0x28b)),_0x30537a[_0x4f8c6e(0x1ff)]&&_0x30537a[_0x4f8c6e(0x1ff)](_0x4f8c6e(0x28b));}catch(_0x2361a9){console['log'](_0x4f8c6e(0x29b),_0x2361a9);}try{_0x30537a[_0x4f8c6e(0x2b2)]&&(_0x30537a[_0x4f8c6e(0x2b2)][_0x4f8c6e(0x1a7)](),_0x30537a[_0x4f8c6e(0x2b2)][_0x4f8c6e(0x21d)](),_0x30537a['BackButton']['onClick'](function(){const _0xd90f6d=_0x4f8c6e;window[_0xd90f6d(0x31f)][_0xd90f6d(0x2ef)]='router.html';}));}catch(_0xb40689){console['log'](_0x4f8c6e(0x1ed),_0xb40689);}try{if(_0x30537a['disableVerticalSwipes'])_0x30537a['disableVerticalSwipes']();}catch(_0x7963d5){}}catch(_0x1bcd12){console[_0x4f8c6e(0x1d1)](_0x4f8c6e(0x274),_0x1bcd12);}}());function isAdmin(){const _0x23ab4c=a2_0x3764;try{const _0x52e0e7=Number(window['Telegram']?.[_0x23ab4c(0x2a3)]?.[_0x23ab4c(0x2b4)]?.[_0x23ab4c(0x2f1)]?.['id']);return _0x52e0e7===0xbaf7174;}catch(_0x54e172){return![];}}const APP_VERSION=a2_0x487f0a(0x265),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c;let startOffset=-0x1e,endOffset=0x3c,currentStart=getStartOfWeek(new Date());const KEY_CLIENTS=a2_0x487f0a(0x24f),KEY_SESSIONS=a2_0x487f0a(0x2a8),KEY_SETTINGS='uc_settings_v9';let clients=[],sessions=[],dateExceptions={},availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],editingId=null,tempSessionData=null,updateInterval,isScrolling=![],selectedDayForOptions=null,lastUserActionTime=0x0;const DataManager={'getUserId'(){const _0x5e6da2=a2_0x487f0a;return window[_0x5e6da2(0x233)]?.[_0x5e6da2(0x2a3)]?.[_0x5e6da2(0x2b4)]?.['user']?.['id']||'guest';},'saveLocally'(){const _0x25e18e=a2_0x487f0a;try{localStorage['setItem'](KEY_CLIENTS,JSON[_0x25e18e(0x2f7)](clients)),localStorage[_0x25e18e(0x271)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x25e18e(0x271)](KEY_SETTINGS,JSON[_0x25e18e(0x2f7)]({'pattern':availabilityPattern,'exceptions':dateExceptions,'ranges':specialRanges}));}catch(_0x408c60){console[_0x25e18e(0x1d1)](_0x25e18e(0x1d3),_0x408c60);}},'loadLocal'(){const _0x29cd2b=a2_0x487f0a;try{const _0x444aaf=localStorage[_0x29cd2b(0x30c)](KEY_CLIENTS);if(_0x444aaf)clients=JSON[_0x29cd2b(0x2ec)](_0x444aaf);const _0x20bd45=localStorage[_0x29cd2b(0x30c)](KEY_SESSIONS);if(_0x20bd45)sessions=JSON['parse'](_0x20bd45);const _0x3ff5dc=localStorage[_0x29cd2b(0x30c)](KEY_SETTINGS);if(_0x3ff5dc){const _0x19ec09=JSON[_0x29cd2b(0x2ec)](_0x3ff5dc);if(_0x19ec09[_0x29cd2b(0x238)])availabilityPattern=_0x19ec09[_0x29cd2b(0x238)];if(_0x19ec09[_0x29cd2b(0x228)])dateExceptions=_0x19ec09[_0x29cd2b(0x228)];if(_0x19ec09[_0x29cd2b(0x229)])specialRanges=_0x19ec09['ranges'];}else{for(let _0x59a712=0x0;_0x59a712<0x7;_0x59a712++)availabilityPattern[_0x59a712]=Array[_0x29cd2b(0x295)]({'length':0xc},(_0x4dfd7c,_0x398a1c)=>_0x398a1c+0x9);}}catch(_0x41dfc6){console['error'](_0x29cd2b(0x2d2),_0x41dfc6);}},async 'fetchFromServer'(_0x3455b2,_0x2824ca={}){const _0x1f88ad=a2_0x487f0a,_0x3915a1=window[_0x1f88ad(0x233)]?.[_0x1f88ad(0x2a3)],_0x50a140={'action':_0x3455b2,'init_data':_0x3915a1?.[_0x1f88ad(0x1f9)]||'',..._0x2824ca};try{const _0x1e6c30=await fetch(API_URL,{'method':_0x1f88ad(0x1fe),'headers':{'Content-Type':_0x1f88ad(0x27b)},'body':JSON[_0x1f88ad(0x2f7)](_0x50a140)}),_0xfadf2e=await _0x1e6c30['json']();if(!_0xfadf2e['ok'])throw new Error(_0xfadf2e['error']||'Server\x20Error');return _0xfadf2e[_0x1f88ad(0x2b9)];}catch(_0x4c6e08){console[_0x1f88ad(0x1d1)](_0x1f88ad(0x27a)+_0x3455b2+_0x1f88ad(0x1d0),_0x4c6e08);throw _0x4c6e08;}},async 'syncLoad'(){const _0x18812c=a2_0x487f0a,_0x2ec8ea=new Date(),_0x383ce4=_0x2ec8ea['getFullYear']()+'-'+String(_0x2ec8ea[_0x18812c(0x1b4)]()+0x1)[_0x18812c(0x2da)](0x2,'0'),_0x284e4b=new Date(_0x2ec8ea);_0x284e4b[_0x18812c(0x226)](_0x2ec8ea[_0x18812c(0x1b4)]()+0x1);const _0x3a8982=_0x284e4b['getFullYear']()+'-'+String(_0x284e4b['getMonth']()+0x1)[_0x18812c(0x2da)](0x2,'0'),_0x3c18d1=Date[_0x18812c(0x2a4)]();console['log']('[Sync]\x20Loading\x20'+_0x383ce4+',\x20'+_0x3a8982+'...');try{const [_0x2938e6,_0x4907a9]=await Promise[_0x18812c(0x2ff)]([this['fetchFromServer'](_0x18812c(0x236),{'month_str':_0x383ce4}),this[_0x18812c(0x27c)](_0x18812c(0x236),{'month_str':_0x3a8982})]);if(lastUserActionTime>_0x3c18d1)return console[_0x18812c(0x22b)](_0x18812c(0x245)),![];return this[_0x18812c(0x27e)](_0x2938e6,_0x383ce4),this[_0x18812c(0x27e)](_0x4907a9,_0x3a8982),this['saveLocally'](),reRenderBlocks(),updateAllDayStats(),!![];}catch(_0xbfe475){console['error'](_0xbfe475);throw _0xbfe475;}},'mergeServerData'(_0x497255,_0x1fcc3d){const _0x3c0906=a2_0x487f0a;if(!_0x497255)return;_0x497255['clients']&&Array[_0x3c0906(0x1a9)](_0x497255[_0x3c0906(0x223)])&&(clients=_0x497255[_0x3c0906(0x223)]);if(_0x497255[_0x3c0906(0x23b)]){if(_0x497255[_0x3c0906(0x23b)][_0x3c0906(0x238)])availabilityPattern=_0x497255[_0x3c0906(0x23b)][_0x3c0906(0x238)];if(_0x497255[_0x3c0906(0x23b)][_0x3c0906(0x228)])dateExceptions=_0x497255[_0x3c0906(0x23b)][_0x3c0906(0x228)];if(_0x497255[_0x3c0906(0x23b)][_0x3c0906(0x229)])specialRanges=_0x497255[_0x3c0906(0x23b)]['ranges'];if(_0x497255[_0x3c0906(0x23b)][_0x3c0906(0x275)]){localStorage[_0x3c0906(0x271)]('uc_settings_cancel_window',_0x497255[_0x3c0906(0x23b)][_0x3c0906(0x275)]);const _0x3ed6cb=document[_0x3c0906(0x22e)](_0x3c0906(0x28e));if(_0x3ed6cb)_0x3ed6cb['value']=_0x497255[_0x3c0906(0x23b)]['cancel_window'];}}_0x497255[_0x3c0906(0x1ef)]&&(sessions=sessions['filter'](_0x209c74=>!_0x209c74[_0x3c0906(0x1e9)]['startsWith'](_0x1fcc3d)),Object[_0x3c0906(0x29f)](_0x497255['calendar'])[_0x3c0906(0x2ce)](_0x28d528=>{const _0x571d86=_0x3c0906,_0x2f4e7e=_0x497255['calendar'][_0x28d528];_0x2f4e7e[_0x571d86(0x2ce)](_0x4e5490=>{const _0x3dfa31=_0x571d86,_0x190039=clients[_0x3dfa31(0x1ee)](_0x26eb11=>String(_0x26eb11['id'])===String(_0x4e5490['c']));sessions[_0x3dfa31(0x269)]({'id':_0x4e5490['i'],'clientId':_0x4e5490['c'],'client':_0x190039?_0x190039[_0x3dfa31(0x2a5)]:_0x3dfa31(0x1d7),'dateStr':_0x1fcc3d+'-'+_0x28d528[_0x3dfa31(0x2da)](0x2,'0'),'start':_0x4e5490['s'],'end':_0x4e5490['e'],'status':_0x4e5490['st']||_0x3dfa31(0x1aa),'note':_0x4e5490['n']||'','seriesId':_0x4e5490['sid']||null});});}));},async 'syncBatch'(_0xa977b8){const _0x5efede=a2_0x487f0a,_0x537c0b=[...new Set(_0xa977b8)],_0x3f08e6=_0x537c0b['map'](_0x23f8d2=>{const _0x3cc243=a2_0x3764,_0x4537a7=sessions[_0x3cc243(0x1e2)](_0x237d1d=>_0x237d1d[_0x3cc243(0x1e9)]===_0x23f8d2&&_0x237d1d['status']!==_0x3cc243(0x25d)),_0x3fe78f=_0x4537a7['map'](_0x3e51e8=>({'i':_0x3e51e8['id'],'c':_0x3e51e8[_0x3cc243(0x315)],'s':_0x3e51e8[_0x3cc243(0x306)],'e':_0x3e51e8[_0x3cc243(0x21c)],'st':_0x3e51e8[_0x3cc243(0x1df)],'n':_0x3e51e8[_0x3cc243(0x23a)],'sid':_0x3e51e8[_0x3cc243(0x2d4)]}));return{'date':_0x23f8d2,'day_data':_0x3fe78f};});if(_0x3f08e6[_0x5efede(0x2bd)]===0x0)return;console['log'](_0x5efede(0x297)+_0x3f08e6['length']+'\x20days'),await this['fetchFromServer'](_0x5efede(0x2fb),{'changes':_0x3f08e6});}};async function init(){const _0x6dec63=a2_0x487f0a;DataManager[_0x6dec63(0x31e)](),loadCoachSettings(),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x6dec63(0x22e)]('matrixViewport')['addEventListener'](_0x6dec63(0x1fd),()=>{isScrolling=!![],cancelLongPress(),onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x6dec63(0x244)]()['then'](()=>{const _0x3f053b=_0x6dec63;showToast(_0x3f053b(0x2f8),!![]);})[_0x6dec63(0x1c2)](_0x1ac33f=>{const _0x5747cd=_0x6dec63;showToast(_0x5747cd(0x252),![]);});}function generateId(){const _0x1f5ba8=a2_0x487f0a;return Date[_0x1f5ba8(0x2a4)]()['toString'](0x24)+Math[_0x1f5ba8(0x219)]()[_0x1f5ba8(0x1f2)](0x24)['substr'](0x2,0x5);}function toggleSeriesInput(){const _0x4017b5=a2_0x487f0a,_0x3785a4=document[_0x4017b5(0x22e)](_0x4017b5(0x283))[_0x4017b5(0x26f)],_0x479594=document[_0x4017b5(0x22e)](_0x4017b5(0x2d3));_0x479594[_0x4017b5(0x1b8)][_0x4017b5(0x218)]=_0x3785a4?_0x4017b5(0x1db):_0x4017b5(0x1a6);const _0x46bb60=document[_0x4017b5(0x22e)](_0x4017b5(0x237));_0x46bb60[_0x4017b5(0x1b8)][_0x4017b5(0x1fb)]=_0x3785a4?_0x4017b5(0x261):_0x4017b5(0x311);}function openAddSession(_0x3e4049){const _0x3a310b=a2_0x487f0a;editingId=null,populateClientSelect(),document[_0x3a310b(0x22e)](_0x3a310b(0x27d))[_0x3a310b(0x2cd)]='Новая\x20запись',document['getElementById'](_0x3a310b(0x2fa))['style'][_0x3a310b(0x218)]=_0x3a310b(0x1a6),document['getElementById'](_0x3a310b(0x2c7))[_0x3a310b(0x1b8)][_0x3a310b(0x218)]=_0x3a310b(0x1a6);const _0x1a9c98=document[_0x3a310b(0x22e)](_0x3a310b(0x237)),_0x458af5=document['getElementById'](_0x3a310b(0x2d3));_0x1a9c98['style'][_0x3a310b(0x218)]='flex',_0x1a9c98[_0x3a310b(0x1b8)][_0x3a310b(0x1fb)]=_0x3a310b(0x311),document[_0x3a310b(0x22e)](_0x3a310b(0x283))[_0x3a310b(0x26f)]=![],document[_0x3a310b(0x22e)](_0x3a310b(0x2c5))[_0x3a310b(0x28c)]=0x4,_0x458af5['style'][_0x3a310b(0x218)]=_0x3a310b(0x1a6),document['getElementById'](_0x3a310b(0x25f))[_0x3a310b(0x28c)]=getLocalDateStr(_0x3e4049),updateDateDisplay();const _0x5f5158=_0x3e4049[_0x3a310b(0x2a2)]();document[_0x3a310b(0x22e)](_0x3a310b(0x242))[_0x3a310b(0x28c)]=String(_0x5f5158)['padStart'](0x2,'0')+_0x3a310b(0x29c),document[_0x3a310b(0x22e)](_0x3a310b(0x1be))[_0x3a310b(0x28c)]=String(_0x5f5158+0x1)['padStart'](0x2,'0')+_0x3a310b(0x29c),openSheet(_0x3a310b(0x22c));}function openEdit(_0x4b7056){const _0x28f091=a2_0x487f0a;editingId=_0x4b7056['id'],populateClientSelect(),document[_0x28f091(0x22e)](_0x28f091(0x27d))[_0x28f091(0x2cd)]=_0x28f091(0x1d8),document['getElementById'](_0x28f091(0x2fa))[_0x28f091(0x1b8)][_0x28f091(0x218)]='block';const _0x120e63=document[_0x28f091(0x22e)](_0x28f091(0x2c7));_0x120e63[_0x28f091(0x1b8)][_0x28f091(0x218)]=_0x28f091(0x309);_0x4b7056['status']==='completed'?(_0x120e63[_0x28f091(0x322)]=_0x28f091(0x1b9),_0x120e63[_0x28f091(0x225)]='Вернуть\x20в\x20запланированные'):(_0x120e63[_0x28f091(0x322)]='btn-status-toggle',_0x120e63['innerHTML']=_0x28f091(0x215));const _0x49c948=!!_0x4b7056[_0x28f091(0x2d4)];document[_0x28f091(0x22e)](_0x28f091(0x237))['style']['display']=_0x28f091(0x1a6),document[_0x28f091(0x22e)](_0x28f091(0x2d3))[_0x28f091(0x1b8)][_0x28f091(0x218)]='none',_0x49c948?(document['getElementById'](_0x28f091(0x26b))[_0x28f091(0x1b8)][_0x28f091(0x218)]=_0x28f091(0x309),document[_0x28f091(0x22e)](_0x28f091(0x26b))[_0x28f091(0x279)](_0x28f091(0x288))[_0x28f091(0x2cd)]=_0x28f091(0x314)):document[_0x28f091(0x22e)]('patternInfoBox')[_0x28f091(0x1b8)][_0x28f091(0x218)]=_0x28f091(0x1a6),document[_0x28f091(0x22e)](_0x28f091(0x282))['value']=_0x4b7056[_0x28f091(0x1ea)],document[_0x28f091(0x22e)](_0x28f091(0x25f))['value']=_0x4b7056[_0x28f091(0x1e9)],document[_0x28f091(0x22e)](_0x28f091(0x242))['value']=_0x4b7056['start'],document[_0x28f091(0x22e)]('inpEnd')[_0x28f091(0x28c)]=_0x4b7056[_0x28f091(0x21c)],document['getElementById']('inpNote')[_0x28f091(0x28c)]=_0x4b7056[_0x28f091(0x23a)]||'',updateDateDisplay(),openSheet('sessionSheet');}async function trySaveSession(){const _0x36a7ce=a2_0x487f0a,_0x51b875=document[_0x36a7ce(0x22e)](_0x36a7ce(0x282))[_0x36a7ce(0x28c)],_0x14b788=document['getElementById']('inpDate')[_0x36a7ce(0x28c)],_0xcccf64=document[_0x36a7ce(0x22e)]('inpStart')['value'],_0x5d9849=document['getElementById'](_0x36a7ce(0x1be))[_0x36a7ce(0x28c)],_0x2e8b4d=document['getElementById'](_0x36a7ce(0x1ec))[_0x36a7ce(0x28c)],_0x582b20=document['getElementById'](_0x36a7ce(0x283))[_0x36a7ce(0x26f)];let _0x46b9b9=0x4;if(_0x582b20){const _0x5f1779=parseInt(document[_0x36a7ce(0x22e)](_0x36a7ce(0x2c5))['value']);if(!_0x5f1779||_0x5f1779<0x2){showToast(_0x36a7ce(0x1e0),![]);return;}if(_0x5f1779>0x64){showToast(_0x36a7ce(0x1f7),![]);return;}_0x46b9b9=_0x5f1779;}const _0x23f6e1=clients[_0x36a7ce(0x1ee)](_0x4de9b4=>_0x4de9b4[_0x36a7ce(0x2a5)]===_0x51b875);if(!_0x23f6e1){showToast(_0x36a7ce(0x308),![]);return;}const _0x1ada19=validateAppointment(_0x14b788,_0xcccf64,_0x5d9849,editingId,_0x23f6e1['id']);if(!_0x1ada19[_0x36a7ce(0x299)]){showToast(_0x1ada19['msg'],![]);return;}_0x1ada19[_0x36a7ce(0x1bf)]&&showToast(_0x1ada19['warning'],![]);const _0x3d8a4f={'client':_0x51b875,'clientId':_0x23f6e1['id'],'start':_0xcccf64,'end':_0x5d9849,'note':_0x2e8b4d,'status':'planned'},_0x13eec9=editingId?sessions['find'](_0x50cd0=>_0x50cd0['id']===editingId):null;if(_0x13eec9&&_0x13eec9['seriesId']){tempSessionData={..._0x3d8a4f,'dateStr':_0x14b788,'id':editingId,'seriesId':_0x13eec9[_0x36a7ce(0x2d4)]},openActionSheet(_0x36a7ce(0x1f4));return;}let _0x1f40cc=null;if(!editingId)_0x1f40cc=_0x36a7ce(0x267);else{if(_0x13eec9){if(String(_0x13eec9[_0x36a7ce(0x315)])!==String(_0x23f6e1['id']))console[_0x36a7ce(0x22f)](_0x36a7ce(0x216)),NotificationManager['send'](_0x36a7ce(0x235),_0x13eec9),_0x1f40cc=_0x36a7ce(0x267);else(_0x13eec9[_0x36a7ce(0x306)]!==_0xcccf64||_0x13eec9['end']!==_0x5d9849||_0x13eec9[_0x36a7ce(0x1e9)]!==_0x14b788)&&(_0x1f40cc='update');}}if(!editingId&&_0x582b20){createBatchSeries(_0x3d8a4f,_0x14b788,_0x46b9b9),NotificationManager['send'](_0x36a7ce(0x267),{..._0x3d8a4f,'dateStr':_0x14b788});return;}lastUserActionTime=Date[_0x36a7ce(0x2a4)]();const _0x1407a4={..._0x3d8a4f,'dateStr':_0x14b788,'id':editingId||generateId(),'seriesId':null};saveSingleSession(_0x1407a4),_0x1f40cc&&NotificationManager[_0x36a7ce(0x1a4)](_0x1f40cc,_0x1407a4);}function toggleSessionStatus(){const _0x164111=a2_0x487f0a;lastUserActionTime=Date[_0x164111(0x2a4)]();const _0x2ec6fd=sessions[_0x164111(0x1ee)](_0x541373=>_0x541373['id']===editingId);if(!_0x2ec6fd)return;const _0x1a0374=_0x2ec6fd[_0x164111(0x1df)]===_0x164111(0x2ac)?_0x164111(0x1aa):'completed';_0x2ec6fd['status']=_0x1a0374,saveSingleSession(_0x2ec6fd),_0x1a0374===_0x164111(0x2ac)&&NotificationManager[_0x164111(0x1a4)](_0x164111(0x25b),_0x2ec6fd),showToast(_0x1a0374===_0x164111(0x2ac)?_0x164111(0x2dd):'Статус\x20сброшен',!![]);}function validateAppointment(_0x468dd3,_0x4c9e3e,_0x317071,_0x4fde8f,_0xdfcecb){const _0x46186c=a2_0x487f0a,[_0x424b5a,_0x547d5f]=_0x4c9e3e[_0x46186c(0x31c)](':')['map'](Number),[_0x3b5672,_0x26888a]=_0x317071[_0x46186c(0x31c)](':')[_0x46186c(0x2a9)](Number),_0x1d7503=_0x424b5a*0x3c+_0x547d5f,_0x5eddc9=_0x3b5672*0x3c+_0x26888a,_0x5dadf1=String(_0xdfcecb);let _0x130a68=![],_0x3885ee='';for(let _0x1b4648 of sessions){if(_0x1b4648[_0x46186c(0x1e9)]!==_0x468dd3)continue;if(_0x1b4648[_0x46186c(0x1df)]===_0x46186c(0x251))continue;if(_0x4fde8f&&String(_0x1b4648['id'])===String(_0x4fde8f))continue;const [_0x27ee11,_0xe2f69e]=_0x1b4648['start'][_0x46186c(0x31c)](':')[_0x46186c(0x2a9)](Number),[_0x3ac7a8,_0x3aaebf]=_0x1b4648[_0x46186c(0x21c)]['split'](':')[_0x46186c(0x2a9)](Number),_0x339f19=_0x27ee11*0x3c+_0xe2f69e,_0x28566c=_0x3ac7a8*0x3c+_0x3aaebf;if(Math['max'](_0x1d7503,_0x339f19)<Math[_0x46186c(0x200)](_0x5eddc9,_0x28566c)){if(_0x1b4648[_0x46186c(0x315)]&&String(_0x1b4648['clientId'])===_0x5dadf1)return{'valid':![],'msg':'Этот\x20клиент\x20('+_0x1b4648[_0x46186c(0x1ea)]+_0x46186c(0x230)};_0x130a68=!![],_0x3885ee=_0x1b4648[_0x46186c(0x1ea)];}}if(_0x130a68)return{'valid':!![],'warning':_0x46186c(0x24a)+_0x3885ee};return{'valid':!![]};}function saveSingleSession(_0x125a23){const _0x571053=a2_0x487f0a;if(editingId){const _0x3b7755=sessions['findIndex'](_0x25d41c=>_0x25d41c['id']===editingId);if(_0x3b7755!==-0x1)sessions[_0x3b7755]=_0x125a23;}else sessions[_0x571053(0x269)](_0x125a23);afterSaveAction([_0x125a23[_0x571053(0x1e9)]]);}function createBatchSeries(_0x4bee96,_0x4aebd4,_0x5777c9){const _0x1142ac=a2_0x487f0a,_0xc4a383=generateId(),_0x1b1c9c=[],_0x260b2a=[];let _0x198696=0x0,_0x26fbc6=new Date(_0x4aebd4);for(let _0x22d884=0x0;_0x22d884<_0x5777c9;_0x22d884++){const _0x4a3fb5=getLocalDateStr(_0x26fbc6),_0x857404=validateAppointment(_0x4a3fb5,_0x4bee96['start'],_0x4bee96[_0x1142ac(0x21c)],null,_0x4bee96[_0x1142ac(0x315)]);if(!_0x857404[_0x1142ac(0x299)])console[_0x1142ac(0x22f)]('[Series]\x20Skipped\x20'+_0x4a3fb5+_0x1142ac(0x302)),_0x198696++;else{const _0x2e908a={..._0x4bee96,'id':generateId(),'dateStr':_0x4a3fb5,'seriesId':_0xc4a383};_0x260b2a[_0x1142ac(0x269)](_0x2e908a),_0x1b1c9c['push'](_0x4a3fb5);}_0x26fbc6[_0x1142ac(0x30f)](_0x26fbc6[_0x1142ac(0x1af)]()+0x7);}if(_0x260b2a[_0x1142ac(0x2bd)]===0x0){showToast(_0x1142ac(0x307),![]);return;}sessions['push'](..._0x260b2a),lastUserActionTime=Date[_0x1142ac(0x2a4)]();let _0x10ff74=_0x1142ac(0x1c3)+_0x260b2a[_0x1142ac(0x2bd)];_0x198696>0x0&&(_0x10ff74+='\x20(пропущено:\x20'+_0x198696+')'),showToast(_0x10ff74,!![]),afterSaveAction(_0x1b1c9c);}function updateSeriesBatch(_0x51b4b8,_0x1237f8){const _0x154759=a2_0x487f0a,_0x2510bb=[],_0x3a9c6d=_0x1237f8[_0x154759(0x2d4)];if(_0x51b4b8==='single'){const _0x10a875={..._0x1237f8,'seriesId':null},_0x4aadc8=sessions['findIndex'](_0x59b5c3=>_0x59b5c3['id']===_0x1237f8['id']);if(_0x4aadc8!==-0x1)sessions[_0x4aadc8]=_0x10a875;_0x2510bb['push'](_0x10a875[_0x154759(0x1e9)]);}else{if(_0x51b4b8===_0x154759(0x2a7)){const _0x31074d=_0x1237f8[_0x154759(0x1e9)];sessions[_0x154759(0x2ce)]((_0x4f8103,_0x51ee5c)=>{const _0x4751c4=_0x154759;_0x4f8103[_0x4751c4(0x2d4)]===_0x3a9c6d&&_0x4f8103[_0x4751c4(0x1e9)]>=_0x31074d&&(sessions[_0x51ee5c]={...sessions[_0x51ee5c],'start':_0x1237f8[_0x4751c4(0x306)],'end':_0x1237f8['end'],'note':_0x1237f8[_0x4751c4(0x23a)],'client':_0x1237f8[_0x4751c4(0x1ea)],'clientId':_0x1237f8[_0x4751c4(0x315)]},_0x2510bb['push'](_0x4f8103['dateStr']));});}}afterSaveAction(_0x2510bb);}function tryDeleteSession(){const _0x38e6b2=a2_0x487f0a,_0x41cbcc=sessions[_0x38e6b2(0x1ee)](_0x4d3eab=>_0x4d3eab['id']===editingId);if(!_0x41cbcc)return;_0x41cbcc['seriesId']?openActionSheet(_0x38e6b2(0x1da)):commitDelete(_0x38e6b2(0x212),_0x41cbcc);}function commitDelete(_0x28be0d,_0x3621fc){const _0x2d9fd0=a2_0x487f0a;lastUserActionTime=Date[_0x2d9fd0(0x2a4)](),NotificationManager[_0x2d9fd0(0x1a4)](_0x2d9fd0(0x235),_0x3621fc);const _0x2aae5e=[];if(_0x28be0d===_0x2d9fd0(0x212))sessions=sessions['filter'](_0x553b38=>_0x553b38['id']!==_0x3621fc['id']),_0x2aae5e['push'](_0x3621fc[_0x2d9fd0(0x1e9)]);else{if(_0x28be0d==='series'){const _0x45daa4=_0x3621fc[_0x2d9fd0(0x1e9)],_0x3d7736=_0x3621fc['seriesId'];sessions['forEach'](_0x2adc0d=>{const _0xcf6a1a=_0x2d9fd0;_0x2adc0d[_0xcf6a1a(0x2d4)]===_0x3d7736&&_0x2adc0d['dateStr']>=_0x45daa4&&_0x2aae5e['push'](_0x2adc0d[_0xcf6a1a(0x1e9)]);}),sessions=sessions[_0x2d9fd0(0x1e2)](_0x1883fe=>!(_0x1883fe[_0x2d9fd0(0x2d4)]===_0x3d7736&&_0x1883fe[_0x2d9fd0(0x1e9)]>=_0x45daa4));}}afterSaveAction(_0x2aae5e);}function afterSaveAction(_0x49bed3){const _0x3e8afa=a2_0x487f0a;DataManager['saveLocally'](),reRenderBlocks(),updateAllDayStats(),closeAllSheets(),DataManager[_0x3e8afa(0x285)](_0x49bed3)[_0x3e8afa(0x2d0)](()=>console[_0x3e8afa(0x22f)](_0x3e8afa(0x1f8)))['catch'](_0xc4c443=>showToast(_0x3e8afa(0x28f),![]));}const NotificationManager={'formatDate'(_0x1a6d39){const _0x2f0407=a2_0x487f0a,_0x479c5f=new Date(_0x1a6d39),_0x317ef6={'weekday':'long','day':_0x2f0407(0x21b),'month':'long'};let _0x20a4c1=_0x479c5f['toLocaleDateString'](_0x2f0407(0x29e),_0x317ef6);return _0x20a4c1[_0x2f0407(0x205)](0x0)['toUpperCase']()+_0x20a4c1['slice'](0x1);},'getText'(_0x5844be,_0x21ef56){const _0x28c740=a2_0x487f0a,_0x5583aa=this['formatDate'](_0x21ef56[_0x28c740(0x1e9)]);switch(_0x5844be){case _0x28c740(0x267):return _0x28c740(0x262)+(_0x28c740(0x31d)+_0x5583aa+'\x0a')+(_0x28c740(0x2f3)+_0x21ef56[_0x28c740(0x306)]+_0x28c740(0x2e8)+_0x21ef56[_0x28c740(0x21c)]+'\x0a\x0a')+_0x28c740(0x227);case _0x28c740(0x257):return _0x28c740(0x26a)+_0x28c740(0x2cf)+(_0x28c740(0x234)+_0x21ef56['start']+_0x28c740(0x2e8)+_0x21ef56['end']+'</b>\x0a\x0a')+(_0x28c740(0x31d)+_0x5583aa);case _0x28c740(0x235):return _0x28c740(0x273)+(_0x28c740(0x263)+_0x5583aa+'\x20('+_0x21ef56['start']+_0x28c740(0x204));case'complete':return _0x28c740(0x2e6)+_0x28c740(0x2fd)+_0x28c740(0x2dc);default:return'';}},async 'send'(_0xef494b,_0x159ec5){const _0x1949be=a2_0x487f0a;console[_0x1949be(0x22f)](_0x1949be(0x22a),_0xef494b,_0x159ec5);if(!_0x159ec5){console['error'](_0x1949be(0x2a1));return;}const _0x5f5d8c=String(_0x159ec5[_0x1949be(0x315)]);console[_0x1949be(0x22f)]('[Notify]\x20Detected\x20Client\x20ID:',_0x5f5d8c);if(!_0x159ec5[_0x1949be(0x315)]||_0x5f5d8c===_0x1949be(0x1c7)||_0x5f5d8c===_0x1949be(0x2d9)){console[_0x1949be(0x1d1)](_0x1949be(0x21f));if(_0x159ec5[_0x1949be(0x1ea)]){const _0x351d58=clients[_0x1949be(0x1ee)](_0x40f2d9=>_0x40f2d9[_0x1949be(0x2a5)]===_0x159ec5['client']);if(_0x351d58)return console[_0x1949be(0x22f)]('[Notify]\x20RECOVERY:\x20Found\x20ID\x20by\x20name:',_0x351d58['id']),this['send'](_0xef494b,{..._0x159ec5,'clientId':_0x351d58['id']});}return;}if(_0x5f5d8c[_0x1949be(0x2bd)]<0x5){console[_0x1949be(0x22b)](_0x1949be(0x1c1),_0x5f5d8c);return;}const _0x3a12f6=this[_0x1949be(0x264)](_0xef494b,_0x159ec5);if(!_0x3a12f6){console[_0x1949be(0x1d1)](_0x1949be(0x296));return;}console[_0x1949be(0x22f)]('[Notify]\x20Sending\x20to\x20GAS\x20for\x20'+_0x5f5d8c+'...'),DataManager['fetchFromServer'](_0x1949be(0x316),{'chatId':_0x5f5d8c,'text':_0x3a12f6})[_0x1949be(0x2d0)](_0x4bbde6=>console['log'](_0x1949be(0x1e7),_0x4bbde6))[_0x1949be(0x1c2)](_0x5a1ca0=>console[_0x1949be(0x1d1)]('[Notify]\x20Network\x20Failed',_0x5a1ca0));}};function getLocalDateStr(_0x818cc1){const _0x4f39c9=a2_0x487f0a,_0x1100ee=_0x818cc1[_0x4f39c9(0x222)](),_0x51638b=String(_0x818cc1['getMonth']()+0x1)['padStart'](0x2,'0'),_0x1d5483=String(_0x818cc1[_0x4f39c9(0x1af)]())[_0x4f39c9(0x2da)](0x2,'0');return _0x1100ee+'-'+_0x51638b+'-'+_0x1d5483;}function getDateStr(_0x2732a1){const _0x44e9d3=a2_0x487f0a,_0x1ebb7e=new Date();return _0x1ebb7e[_0x44e9d3(0x30f)](_0x1ebb7e[_0x44e9d3(0x1af)]()+_0x2732a1),getLocalDateStr(_0x1ebb7e);}function getStartOfWeek(_0x39d746){const _0x42aeeb=a2_0x487f0a,_0x326728=new Date(_0x39d746),_0x5110fa=_0x326728[_0x42aeeb(0x1f5)](),_0x3269c7=_0x326728['getDate']()-_0x5110fa+(_0x5110fa===0x0?-0x6:0x1);return _0x326728[_0x42aeeb(0x30f)](_0x3269c7),_0x326728[_0x42aeeb(0x26c)](0x0,0x0,0x0,0x0),_0x326728;}function hexToRgba(_0x493f4a,_0x1ea1cb){const _0x5ceb21=a2_0x487f0a;if(!_0x493f4a)return'rgba(100,100,100,0.5)';let _0x3f17ae=0x0,_0x1670ed=0x0,_0x303e6c=0x0;if(_0x493f4a[_0x5ceb21(0x2bd)]===0x4)_0x3f17ae='0x'+_0x493f4a[0x1]+_0x493f4a[0x1],_0x1670ed='0x'+_0x493f4a[0x2]+_0x493f4a[0x2],_0x303e6c='0x'+_0x493f4a[0x3]+_0x493f4a[0x3];else _0x493f4a[_0x5ceb21(0x2bd)]===0x7&&(_0x3f17ae='0x'+_0x493f4a[0x1]+_0x493f4a[0x2],_0x1670ed='0x'+_0x493f4a[0x3]+_0x493f4a[0x4],_0x303e6c='0x'+_0x493f4a[0x5]+_0x493f4a[0x6]);return'rgba('+ +_0x3f17ae+',\x20'+ +_0x1670ed+',\x20'+ +_0x303e6c+',\x20'+_0x1ea1cb+')';}function renderTimeColumn(){const _0x3d3c2b=a2_0x487f0a,_0x5ee1d1=document[_0x3d3c2b(0x22e)]('timeColumn'),_0x48da84=document[_0x3d3c2b(0x22e)](_0x3d3c2b(0x1b6));_0x5ee1d1[_0x3d3c2b(0x225)]='',_0x5ee1d1[_0x3d3c2b(0x249)](_0x48da84);for(let _0x4dbf8d=0x0;_0x4dbf8d<0x18;_0x4dbf8d++){const _0x5e0652=document['createElement'](_0x3d3c2b(0x292));_0x5e0652[_0x3d3c2b(0x322)]=_0x3d3c2b(0x2ed);if(_0x4dbf8d>0x0)_0x5e0652[_0x3d3c2b(0x225)]='<span>'+String(_0x4dbf8d)[_0x3d3c2b(0x2da)](0x2,'0')+_0x3d3c2b(0x258);_0x5ee1d1[_0x3d3c2b(0x249)](_0x5e0652);}}function renderDayRange(_0x2b69cd,_0x2f6766){const _0x2af2cc=a2_0x487f0a,_0x4b4ed7=document['getElementById'](_0x2af2cc(0x28a)),_0x3b502f=document[_0x2af2cc(0x22e)]('gridColumns'),_0x5abedf=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x4d7f2b=new Date();_0x4d7f2b[_0x2af2cc(0x26c)](0x0,0x0,0x0,0x0);const _0x1a8cf6=getLocalDateStr(new Date());for(let _0x43b449=_0x2b69cd;_0x43b449<=_0x2f6766;_0x43b449++){const _0x3929db=new Date(_0x4d7f2b);_0x3929db[_0x2af2cc(0x30f)](_0x3929db[_0x2af2cc(0x1af)]()+_0x43b449);const _0x365833=getLocalDateStr(_0x3929db);let _0x265fa0=_0x3929db[_0x2af2cc(0x1f5)]()-0x1;if(_0x265fa0===-0x1)_0x265fa0=0x6;const _0x27af8d=_0x365833===_0x1a8cf6,_0x38c7c7=document[_0x2af2cc(0x300)](_0x2af2cc(0x292));_0x38c7c7[_0x2af2cc(0x322)]=_0x2af2cc(0x2aa)+(_0x27af8d?_0x2af2cc(0x21a):''),_0x38c7c7['id']='header-'+_0x365833,_0x38c7c7['setAttribute']('data-date',_0x365833),_0x38c7c7[_0x2af2cc(0x225)]=_0x2af2cc(0x1ad)+_0x5abedf[_0x265fa0]+_0x2af2cc(0x2ea)+_0x3929db[_0x2af2cc(0x1af)]()+_0x2af2cc(0x298)+_0x365833+_0x2af2cc(0x250),_0x38c7c7[_0x2af2cc(0x224)]=()=>openDayOptions(_0x365833,_0x5abedf[_0x265fa0]+'\x20'+_0x3929db['getDate']()),_0x4b4ed7[_0x2af2cc(0x249)](_0x38c7c7);const _0x3fc8dd=document[_0x2af2cc(0x300)]('div');_0x3fc8dd['className']=_0x2af2cc(0x1e5)+(_0x27af8d?_0x2af2cc(0x21a):''),_0x3fc8dd['setAttribute'](_0x2af2cc(0x2e0),_0x365833),_0x3fc8dd[_0x2af2cc(0x1e8)]('data-day-idx',_0x265fa0),renderEventsForColumn(_0x3fc8dd,_0x365833,_0x265fa0),attachLongPressHandler(_0x3fc8dd,_0x3929db),_0x3b502f[_0x2af2cc(0x249)](_0x3fc8dd),updateDayStats(_0x365833);}}function reRenderBlocks(){const _0x18bd5a=a2_0x487f0a;document['querySelectorAll']('#gridColumns\x20.day-column')[_0x18bd5a(0x2ce)](_0x11775a=>{const _0x22fa02=_0x18bd5a;_0x11775a[_0x22fa02(0x1fc)](_0x22fa02(0x1ce))['forEach'](_0x3f67d3=>_0x3f67d3[_0x22fa02(0x2ca)]());const _0x124320=_0x11775a[_0x22fa02(0x2eb)]('data-date'),_0x824ecd=parseInt(_0x11775a['getAttribute'](_0x22fa02(0x2f6))),_0x368536=Math[_0x22fa02(0x2e9)](_0x11775a['offsetLeft']);(availabilityPattern[_0x824ecd]||[])[_0x22fa02(0x2ce)](_0x570d0c=>{const _0x5dc388=_0x22fa02,_0x3b75b6=document['createElement'](_0x5dc388(0x292));_0x3b75b6[_0x5dc388(0x322)]=_0x5dc388(0x20d);const _0x5a6e9b=_0x570d0c*GRID_H;_0x3b75b6[_0x5dc388(0x1b8)][_0x5dc388(0x30b)]=_0x5a6e9b+'px',_0x3b75b6[_0x5dc388(0x1b8)][_0x5dc388(0x1b3)]='-'+_0x368536+_0x5dc388(0x2d5)+_0x5a6e9b+'px',_0x11775a[_0x5dc388(0x249)](_0x3b75b6);});if(specialRanges&&specialRanges[_0x22fa02(0x2bd)]>0x0){const _0x4d4ff7=new Date(_0x124320+'T00:00:00')['getTime'](),_0x1bd6d0=new Date(_0x124320+_0x22fa02(0x2af))[_0x22fa02(0x317)]();specialRanges[_0x22fa02(0x2ce)](_0x138957=>{const _0x41bdaa=_0x22fa02,_0x4df9a8=new Date(_0x138957[_0x41bdaa(0x306)])[_0x41bdaa(0x317)](),_0x312b55=new Date(_0x138957[_0x41bdaa(0x21c)])[_0x41bdaa(0x317)](),_0x170dbf=Math[_0x41bdaa(0x2b7)](_0x4d4ff7,_0x4df9a8),_0x4ff5c9=Math[_0x41bdaa(0x200)](_0x1bd6d0,_0x312b55);if(_0x170dbf<_0x4ff5c9){if(_0x170dbf<=_0x4d4ff7&&_0x4ff5c9>=_0x1bd6d0-0xea60){if(!_0x11775a['querySelector'](_0x41bdaa(0x1e1))){const _0xf9efcf=document[_0x41bdaa(0x300)](_0x41bdaa(0x292));_0xf9efcf[_0x41bdaa(0x322)]='day-off-overlay\x20stripe-bg',_0xf9efcf[_0x41bdaa(0x1b8)][_0x41bdaa(0x1b3)]='-'+_0x368536+_0x41bdaa(0x310),_0x11775a[_0x41bdaa(0x249)](_0xf9efcf);}}else{const _0x4a63da=(_0x170dbf-_0x4d4ff7)/0x36ee80*GRID_H,_0x420b6e=(_0x4ff5c9-_0x170dbf)/0x36ee80*GRID_H,_0x23735a=document['createElement'](_0x41bdaa(0x292));_0x23735a[_0x41bdaa(0x322)]=_0x41bdaa(0x2c0),_0x23735a[_0x41bdaa(0x1b8)]['top']=_0x4a63da+'px',_0x23735a[_0x41bdaa(0x1b8)][_0x41bdaa(0x255)]=_0x420b6e+'px',_0x23735a[_0x41bdaa(0x1b8)][_0x41bdaa(0x1b3)]='-'+_0x368536+_0x41bdaa(0x2d5)+_0x4a63da+'px',_0x11775a[_0x41bdaa(0x249)](_0x23735a);}}});}if(dateExceptions[_0x124320]===_0x22fa02(0x2e4)){if(!_0x11775a[_0x22fa02(0x279)](_0x22fa02(0x1e1))){const _0x379027=document[_0x22fa02(0x300)]('div');_0x379027[_0x22fa02(0x322)]='day-off-overlay\x20stripe-bg',_0x379027[_0x22fa02(0x1b8)][_0x22fa02(0x1b3)]='-'+_0x368536+_0x22fa02(0x310),_0x11775a[_0x22fa02(0x249)](_0x379027);}}renderEventsForColumn(_0x11775a,_0x124320,_0x824ecd),updateDayStats(_0x124320);});}function updateAllDayStats(){const _0x57267f=a2_0x487f0a;document[_0x57267f(0x1fc)](_0x57267f(0x220))[_0x57267f(0x2ce)](_0x6cbaa5=>{const _0x485e96=_0x57267f;updateDayStats(_0x6cbaa5[_0x485e96(0x2eb)]('data-date'));});}function updateDayStats(_0x4c39be){const _0x30a317=a2_0x487f0a,_0x484dbb=document[_0x30a317(0x22e)](_0x30a317(0x260)+_0x4c39be);if(!_0x484dbb)return;const _0x46792f=new Date(_0x4c39be);let _0x2b4cb0=_0x46792f[_0x30a317(0x1f5)]()-0x1;if(_0x2b4cb0===-0x1)_0x2b4cb0=0x6;if(dateExceptions[_0x4c39be]===_0x30a317(0x2e4)){_0x484dbb[_0x30a317(0x1b8)]['display']=_0x30a317(0x1a6);return;}const _0x34cae6=availabilityPattern[_0x2b4cb0]||[],_0xb54f58=0x18-_0x34cae6['length'],_0xad0e3e=_0xb54f58*0x3c,_0x300c8b=sessions[_0x30a317(0x1e2)](_0x4caefe=>_0x4caefe[_0x30a317(0x1e9)]===_0x4c39be&&_0x4caefe[_0x30a317(0x1df)]!==_0x30a317(0x251));if(_0x300c8b[_0x30a317(0x2bd)]===0x0){_0x484dbb['style'][_0x30a317(0x218)]=_0x30a317(0x1a6);return;}let _0x1c1b7b=_0x300c8b[_0x30a317(0x2a9)](_0x235f08=>{const _0x2d4072=_0x30a317,[_0x4fdc12,_0x4f52ac]=_0x235f08[_0x2d4072(0x306)][_0x2d4072(0x31c)](':')[_0x2d4072(0x2a9)](Number),[_0x314be8,_0x5707a1]=_0x235f08['end']['split'](':')[_0x2d4072(0x2a9)](Number);return[_0x4fdc12*0x3c+_0x4f52ac,_0x314be8*0x3c+_0x5707a1];});_0x1c1b7b[_0x30a317(0x243)]((_0x157fa8,_0x28ec0b)=>_0x157fa8[0x0]-_0x28ec0b[0x0]);let _0x8bad33=[];if(_0x1c1b7b[_0x30a317(0x2bd)]>0x0){let _0x3f5994=_0x1c1b7b[0x0];for(let _0x2f0456=0x1;_0x2f0456<_0x1c1b7b[_0x30a317(0x2bd)];_0x2f0456++){_0x1c1b7b[_0x2f0456][0x0]<_0x3f5994[0x1]?_0x3f5994[0x1]=Math['max'](_0x3f5994[0x1],_0x1c1b7b[_0x2f0456][0x1]):(_0x8bad33[_0x30a317(0x269)](_0x3f5994),_0x3f5994=_0x1c1b7b[_0x2f0456]);}_0x8bad33[_0x30a317(0x269)](_0x3f5994);}let _0x570bd0=0x0;_0x8bad33['forEach'](_0x2caa6e=>_0x570bd0+=_0x2caa6e[0x1]-_0x2caa6e[0x0]),_0x484dbb['style']['display']=_0x30a317(0x309);const _0x2ba975=_0x484dbb[_0x30a317(0x279)](_0x30a317(0x1dd));if(_0xad0e3e===0x0){_0x2ba975['style']['width']=_0x30a317(0x2c8),_0x2ba975[_0x30a317(0x1b8)][_0x30a317(0x1c8)]=_0x30a317(0x2e3);return;}const _0x2ab12f=_0x570bd0/_0xad0e3e*0x64;console[_0x30a317(0x22f)]('['+_0x4c39be+_0x30a317(0x287)+_0xb54f58+_0x30a317(0x293)+_0x570bd0+_0x30a317(0x1ba)+_0x2ab12f[_0x30a317(0x286)](0x1)+'%'),_0x2ab12f>0x64?(_0x2ba975[_0x30a317(0x1b8)]['width']=_0x30a317(0x2c8),_0x2ba975[_0x30a317(0x1b8)][_0x30a317(0x1c8)]='var(--acc-red)'):(_0x2ba975[_0x30a317(0x1b8)][_0x30a317(0x21e)]=_0x2ab12f+'%',_0x2ba975[_0x30a317(0x1b8)][_0x30a317(0x1c8)]=_0x30a317(0x31a));}function renderEventsForColumn(_0x540cc8,_0x440191,_0x3b07d1){const _0x35bc25=a2_0x487f0a,_0x34ef8e=sessions[_0x35bc25(0x1e2)](_0x447c53=>_0x447c53['dateStr']===_0x440191),_0x267994=_0x34ef8e[_0x35bc25(0x2a9)](_0x26bbdc=>{const _0x460e2e=_0x35bc25,[_0x529122,_0xe3a30e]=_0x26bbdc['start']['split'](':')['map'](Number),[_0x5f32ba,_0x86eae5]=_0x26bbdc['end']['split'](':')[_0x460e2e(0x2a9)](Number);return{'data':_0x26bbdc,'start':_0x529122*0x3c+_0xe3a30e,'end':_0x5f32ba*0x3c+_0x86eae5,'colIndex':0x0};});_0x267994[_0x35bc25(0x243)]((_0x953113,_0xe7c1f4)=>{const _0x31c850=_0x35bc25;if(_0x953113[_0x31c850(0x306)]!==_0xe7c1f4[_0x31c850(0x306)])return _0x953113[_0x31c850(0x306)]-_0xe7c1f4[_0x31c850(0x306)];return _0xe7c1f4[_0x31c850(0x21c)]-_0xe7c1f4[_0x31c850(0x306)]-(_0x953113[_0x31c850(0x21c)]-_0x953113[_0x31c850(0x306)]);});const _0x30ea5f=[];_0x267994[_0x35bc25(0x2ce)](_0x5c21ea=>{const _0x5ba9e4=_0x35bc25;let _0x5d99b3=![];for(let _0x275102=0x0;_0x275102<_0x30ea5f[_0x5ba9e4(0x2bd)];_0x275102++){const _0x23818f=_0x30ea5f[_0x275102],_0x2a020c=_0x23818f[_0x23818f[_0x5ba9e4(0x2bd)]-0x1];if(_0x5c21ea[_0x5ba9e4(0x306)]>=_0x2a020c[_0x5ba9e4(0x21c)]){_0x23818f[_0x5ba9e4(0x269)](_0x5c21ea),_0x5c21ea[_0x5ba9e4(0x2d8)]=_0x275102,_0x5d99b3=!![];break;}}!_0x5d99b3&&(_0x30ea5f['push']([_0x5c21ea]),_0x5c21ea['colIndex']=_0x30ea5f[_0x5ba9e4(0x2bd)]-0x1);}),_0x267994['forEach'](_0x1920e4=>{const _0x4e5bc3=_0x35bc25;let _0xfbacea=0x0;_0x267994[_0x4e5bc3(0x2ce)](_0x121edf=>{const _0x407bef=_0x4e5bc3;if(Math[_0x407bef(0x2b7)](_0x1920e4['start'],_0x121edf[_0x407bef(0x306)])<Math['min'](_0x1920e4[_0x407bef(0x21c)],_0x121edf['end'])){if(_0x121edf[_0x407bef(0x2d8)]>_0xfbacea)_0xfbacea=_0x121edf[_0x407bef(0x2d8)];}});const _0x325a25=_0xfbacea+0x1,_0x32fa88=0x64/_0x325a25,_0x5cbc43=_0x1920e4['colIndex']*_0x32fa88,_0x2cdfec=createEventEl(_0x1920e4['data']);_0x2cdfec['style']['width']=_0x4e5bc3(0x1e3)+_0x32fa88+'%\x20-\x204px)',_0x2cdfec[_0x4e5bc3(0x1b8)][_0x4e5bc3(0x20a)]=_0x4e5bc3(0x1e3)+_0x5cbc43+_0x4e5bc3(0x290),_0x2cdfec[_0x4e5bc3(0x1b8)][_0x4e5bc3(0x2e1)]=0xa+_0x1920e4['colIndex'],_0x32fa88<0x55&&_0x2cdfec[_0x4e5bc3(0x2c9)][_0x4e5bc3(0x2a0)]('mini'),_0x540cc8['appendChild'](_0x2cdfec);});}function createEventEl(_0x5b1e3a){const _0x4c5fdc=a2_0x487f0a,[_0x47e86a,_0x525d3f]=_0x5b1e3a[_0x4c5fdc(0x306)]['split'](':')[_0x4c5fdc(0x2a9)](Number),[_0x1c2cbf,_0x50b8f5]=_0x5b1e3a[_0x4c5fdc(0x21c)]['split'](':')['map'](Number),_0x16e95d=(_0x47e86a*0x3c+_0x525d3f)/0x3c*GRID_H,_0x1599d2=(_0x1c2cbf*0x3c+_0x50b8f5-(_0x47e86a*0x3c+_0x525d3f))/0x3c*GRID_H,_0x156caa=document[_0x4c5fdc(0x300)](_0x4c5fdc(0x292)),_0x11d877=_0x5b1e3a['status']==='completed'?_0x4c5fdc(0x1ca):'';_0x156caa['className']=_0x4c5fdc(0x254)+_0x11d877,_0x156caa[_0x4c5fdc(0x1b8)][_0x4c5fdc(0x30b)]=_0x16e95d+'px',_0x156caa[_0x4c5fdc(0x1b8)][_0x4c5fdc(0x255)]=Math[_0x4c5fdc(0x2b7)](_0x1599d2,0x14)+'px';const _0x2218aa=clients[_0x4c5fdc(0x1ee)](_0x170dd9=>_0x5b1e3a[_0x4c5fdc(0x315)]&&String(_0x170dd9['id'])===String(_0x5b1e3a[_0x4c5fdc(0x315)])||_0x170dd9[_0x4c5fdc(0x2a5)]===_0x5b1e3a[_0x4c5fdc(0x1ea)]),_0x57dc35=_0x2218aa?_0x2218aa['color']:_0x4c5fdc(0x1de);_0x156caa[_0x4c5fdc(0x1b8)][_0x4c5fdc(0x24e)]=_0x57dc35,_0x156caa['style'][_0x4c5fdc(0x2de)]=hexToRgba(_0x57dc35,0.85);let _0x1c3f6d='<div\x20class=\x22ev-title\x22>'+_0x5b1e3a['client']+_0x4c5fdc(0x2ee)+_0x5b1e3a[_0x4c5fdc(0x306)]+_0x4c5fdc(0x280)+_0x5b1e3a['end']+_0x4c5fdc(0x289);return _0x5b1e3a['seriesId']&&(_0x1c3f6d+=_0x4c5fdc(0x319)),_0x5b1e3a['status']===_0x4c5fdc(0x2ac)&&(_0x1c3f6d+=_0x4c5fdc(0x2b5)),_0x156caa[_0x4c5fdc(0x225)]=_0x1c3f6d,_0x156caa[_0x4c5fdc(0x224)]=_0xedccd1=>{const _0x51ee0b=_0x4c5fdc;_0xedccd1[_0x51ee0b(0x312)](),openEdit(_0x5b1e3a);},_0x156caa;}function attachLongPressHandler(_0x1cbcdf,_0x133d41){const _0x26c655=a2_0x487f0a;let _0x5536b9=0x0,_0x23da4a=null;const _0x2df776=_0x234fe3=>{const _0x31c484=a2_0x3764;if(_0x234fe3[_0x31c484(0x1c5)][_0x31c484(0x301)]('.event-card'))return;isScrolling=![],_0x5536b9=_0x234fe3[_0x31c484(0x221)]?_0x234fe3['touches'][0x0][_0x31c484(0x1ac)]:_0x234fe3[_0x31c484(0x1ac)],_0x23da4a=setTimeout(()=>{const _0x3c620c=_0x31c484;if(!isScrolling){navigator[_0x3c620c(0x206)]?.(0x32);const _0x37d33b=_0x1cbcdf[_0x3c620c(0x248)](),_0x1fe4c9=Math[_0x3c620c(0x1c6)]((_0x5536b9-_0x37d33b[_0x3c620c(0x30b)])/GRID_H);_0x133d41[_0x3c620c(0x26c)](_0x1fe4c9,0x0),openAddSession(_0x133d41);}},0x1f4);},_0x2e48ac=()=>{isScrolling=!![],clearTimeout(_0x23da4a);},_0x532623=()=>{clearTimeout(_0x23da4a);};_0x1cbcdf[_0x26c655(0x1a8)]('touchstart',_0x2df776,{'passive':!![]}),_0x1cbcdf[_0x26c655(0x1a8)](_0x26c655(0x1ab),_0x2e48ac,{'passive':!![]}),_0x1cbcdf[_0x26c655(0x1a8)](_0x26c655(0x253),_0x532623),_0x1cbcdf[_0x26c655(0x1a8)]('mousedown',_0x2df776),_0x1cbcdf[_0x26c655(0x1a8)](_0x26c655(0x2ab),_0x2e48ac),_0x1cbcdf[_0x26c655(0x1a8)]('mouseup',_0x532623);}function cancelLongPress(){}function handleInfiniteScroll(){const _0x3c3631=a2_0x487f0a,_0x300a68=document[_0x3c3631(0x22e)](_0x3c3631(0x20e)),_0x22ada0=_0x300a68[_0x3c3631(0x20c)],_0x587f28=_0x300a68[_0x3c3631(0x1cc)],_0x106614=_0x300a68[_0x3c3631(0x321)];if(_0x587f28-(_0x22ada0+_0x106614)<0x12c){const _0x177ac9=endOffset;endOffset+=0xe,renderDayRange(_0x177ac9+0x1,endOffset),reRenderBlocks();}if(_0x22ada0<0x12c){const _0x5aa378=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5aa378-0x1),_0x300a68['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x65fbdc,_0x273dab){const _0x144be6=a2_0x487f0a,_0x1a0ef7=document[_0x144be6(0x22e)](_0x144be6(0x28a)),_0x13fa7d=document[_0x144be6(0x22e)]('gridColumns'),_0x4b16d5=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x823ece=new Date();_0x823ece[_0x144be6(0x26c)](0x0,0x0,0x0,0x0);const _0x28dc81=getLocalDateStr(new Date()),_0x4d82a2=document[_0x144be6(0x214)](),_0x47ecea=document[_0x144be6(0x214)]();for(let _0x1b47e6=_0x65fbdc;_0x1b47e6<=_0x273dab;_0x1b47e6++){const _0x2a7f94=new Date(_0x823ece);_0x2a7f94[_0x144be6(0x30f)](_0x2a7f94[_0x144be6(0x1af)]()+_0x1b47e6);const _0x4cb830=getLocalDateStr(_0x2a7f94);let _0x389451=_0x2a7f94[_0x144be6(0x1f5)]()-0x1;if(_0x389451===-0x1)_0x389451=0x6;const _0x5c3a41=_0x4cb830===_0x28dc81,_0x5e0780=document['createElement'](_0x144be6(0x292));_0x5e0780['className']=_0x144be6(0x2aa)+(_0x5c3a41?_0x144be6(0x21a):''),_0x5e0780['id']=_0x144be6(0x1d5)+_0x4cb830,_0x5e0780[_0x144be6(0x1e8)]('data-date',_0x4cb830),_0x5e0780[_0x144be6(0x225)]=_0x144be6(0x1ad)+_0x4b16d5[_0x389451]+_0x144be6(0x2ea)+_0x2a7f94['getDate']()+_0x144be6(0x298)+_0x4cb830+_0x144be6(0x250),_0x5e0780['onclick']=()=>openDayOptions(_0x4cb830,_0x4b16d5[_0x389451]+'\x20'+_0x2a7f94[_0x144be6(0x1af)]()),_0x4d82a2[_0x144be6(0x249)](_0x5e0780);const _0x5516ac=document[_0x144be6(0x300)](_0x144be6(0x292));_0x5516ac[_0x144be6(0x322)]=_0x144be6(0x1e5)+(_0x5c3a41?'today':''),_0x5516ac[_0x144be6(0x1e8)](_0x144be6(0x2e0),_0x4cb830),_0x5516ac[_0x144be6(0x1e8)](_0x144be6(0x2f6),_0x389451),renderEventsForColumn(_0x5516ac,_0x4cb830,_0x389451),attachLongPressHandler(_0x5516ac,_0x2a7f94),_0x47ecea[_0x144be6(0x249)](_0x5516ac),updateDayStats(_0x4cb830);}_0x1a0ef7[_0x144be6(0x2db)](_0x4d82a2,_0x1a0ef7['firstChild']),_0x13fa7d[_0x144be6(0x2db)](_0x47ecea,_0x13fa7d['querySelector']('.day-column'));}function validateAppointment(_0x3d038f,_0x15c1e5,_0x4b70d1,_0x2caff9,_0x447378){const _0xd3f8d0=a2_0x487f0a,[_0x5087ed,_0x36d4e1]=_0x15c1e5[_0xd3f8d0(0x31c)](':')[_0xd3f8d0(0x2a9)](Number),[_0x69d24d,_0x126d9a]=_0x4b70d1[_0xd3f8d0(0x31c)](':')['map'](Number),_0xd4d212=_0x5087ed*0x3c+_0x36d4e1,_0x3a2bf3=_0x69d24d*0x3c+_0x126d9a,_0x474cf5=String(_0x447378);let _0x2b5345=![],_0xa0d052='';for(let _0x312127 of sessions){if(_0x312127[_0xd3f8d0(0x1e9)]!==_0x3d038f)continue;if(_0x312127[_0xd3f8d0(0x1df)]===_0xd3f8d0(0x251))continue;if(_0x2caff9&&String(_0x312127['id'])===String(_0x2caff9))continue;const [_0x2eee93,_0x297c28]=_0x312127[_0xd3f8d0(0x306)]['split'](':')['map'](Number),[_0x1cb71b,_0x59abbf]=_0x312127['end'][_0xd3f8d0(0x31c)](':')[_0xd3f8d0(0x2a9)](Number),_0x2ce7f5=_0x2eee93*0x3c+_0x297c28,_0x19d603=_0x1cb71b*0x3c+_0x59abbf;if(Math[_0xd3f8d0(0x2b7)](_0xd4d212,_0x2ce7f5)<Math['min'](_0x3a2bf3,_0x19d603)){if(_0x312127[_0xd3f8d0(0x315)]&&String(_0x312127[_0xd3f8d0(0x315)])===_0x474cf5)return{'valid':![],'msg':_0xd3f8d0(0x2ae)+_0x312127[_0xd3f8d0(0x1ea)]+')\x20уже\x20записан\x20на\x20это\x20время!'};_0x2b5345=!![],_0xa0d052=_0x312127[_0xd3f8d0(0x1ea)];}}if(_0x2b5345)return{'valid':!![],'warning':_0xd3f8d0(0x24a)+_0xa0d052};return{'valid':!![]};}function updateDateDisplay(){const _0x3bde36=a2_0x487f0a,_0x34bf44=document['getElementById'](_0x3bde36(0x25f))['value'],_0x2a5fdd=document[_0x3bde36(0x22e)]('sheetDateSubtitle');if(!_0x34bf44){_0x2a5fdd['textContent']='';return;}const [_0x39cc2a,_0x20015b,_0x5db727]=_0x34bf44[_0x3bde36(0x31c)]('-')[_0x3bde36(0x2a9)](Number),_0x5ad7bc=new Date(_0x39cc2a,_0x20015b-0x1,_0x5db727),_0x36df19={'weekday':_0x3bde36(0x2b8),'day':_0x3bde36(0x21b),'month':'long','year':_0x3bde36(0x21b)};let _0x5f06a8=_0x5ad7bc[_0x3bde36(0x1b1)](_0x3bde36(0x29e),_0x36df19);_0x5f06a8=_0x5f06a8[_0x3bde36(0x205)](0x0)[_0x3bde36(0x2df)]()+_0x5f06a8[_0x3bde36(0x25e)](0x1),_0x2a5fdd[_0x3bde36(0x2cd)]=_0x5f06a8;}function autoSetEndTime(){const _0x4fab81=a2_0x487f0a,_0xb33310=document[_0x4fab81(0x22e)]('inpStart')[_0x4fab81(0x28c)];if(!_0xb33310)return;const [_0x1fb440,_0x1a366d]=_0xb33310['split'](':')['map'](Number);let _0x1e4cc6=_0x1fb440+0x1;if(_0x1e4cc6>0x17)_0x1e4cc6=0x0;const _0x5dcd9a=String(_0x1e4cc6)[_0x4fab81(0x2da)](0x2,'0')+':'+String(_0x1a366d)[_0x4fab81(0x2da)](0x2,'0');document['getElementById']('inpEnd')['value']=_0x5dcd9a;}function populateClientSelect(){const _0x5551da=a2_0x487f0a,_0x152594=document['getElementById'](_0x5551da(0x282));_0x152594['innerHTML']='';if(clients[_0x5551da(0x2bd)]===0x0){const _0x5d04ae=document[_0x5551da(0x300)](_0x5551da(0x318));_0x5d04ae['text']=_0x5551da(0x2f9),_0x152594[_0x5551da(0x249)](_0x5d04ae);return;}clients['forEach'](_0x5e8ea7=>{const _0x40f3c7=_0x5551da,_0x4c7f39=document[_0x40f3c7(0x300)](_0x40f3c7(0x318));_0x4c7f39[_0x40f3c7(0x28c)]=_0x5e8ea7[_0x40f3c7(0x2a5)],_0x4c7f39['textContent']=_0x5e8ea7[_0x40f3c7(0x2a5)],_0x152594[_0x40f3c7(0x249)](_0x4c7f39);});}function openActionSheet(_0x543ace){const _0x580f0f=a2_0x487f0a,_0xbf943=document['getElementById'](_0x580f0f(0x1b2)),_0x2a4454=document[_0x580f0f(0x22e)]('actionSheetOverlay'),_0x27c6aa=document['getElementById'](_0x580f0f(0x24d)),_0x11ea5c=document[_0x580f0f(0x22e)](_0x580f0f(0x20b)),_0x6484bc=document[_0x580f0f(0x22e)]('asBtnSeries');_0x2a4454['classList'][_0x580f0f(0x2a0)](_0x580f0f(0x1bd)),_0xbf943['classList']['add'](_0x580f0f(0x2d6));if(_0x543ace===_0x580f0f(0x1f4))_0x27c6aa[_0x580f0f(0x2cd)]=_0x580f0f(0x2c3),_0x11ea5c[_0x580f0f(0x2cd)]=_0x580f0f(0x2d7),_0x11ea5c[_0x580f0f(0x224)]=()=>{const _0x2e043f=_0x580f0f;closeActionSheet(),updateSeriesBatch(_0x2e043f(0x212),tempSessionData);},_0x6484bc[_0x580f0f(0x2cd)]='Эту\x20и\x20будущие',_0x6484bc[_0x580f0f(0x224)]=()=>{const _0x242bee=_0x580f0f;closeActionSheet(),updateSeriesBatch(_0x242bee(0x2a7),tempSessionData);};else _0x543ace===_0x580f0f(0x1da)&&(_0x27c6aa[_0x580f0f(0x2cd)]=_0x580f0f(0x25a),_0x11ea5c[_0x580f0f(0x2cd)]=_0x580f0f(0x2d7),_0x11ea5c[_0x580f0f(0x322)]='as-button\x20danger',_0x11ea5c[_0x580f0f(0x224)]=()=>{const _0x50ddac=_0x580f0f;closeActionSheet(),commitDelete(_0x50ddac(0x212),sessions[_0x50ddac(0x1ee)](_0x22d562=>_0x22d562['id']===editingId));},_0x6484bc[_0x580f0f(0x2cd)]=_0x580f0f(0x2cb),_0x6484bc[_0x580f0f(0x322)]='as-button\x20danger\x20bold',_0x6484bc[_0x580f0f(0x224)]=()=>{const _0x5e6147=_0x580f0f;closeActionSheet(),commitDelete(_0x5e6147(0x2a7),sessions[_0x5e6147(0x1ee)](_0x3651a1=>_0x3651a1['id']===editingId));});}function closeActionSheet(){const _0x3c7261=a2_0x487f0a;document['getElementById'](_0x3c7261(0x1b2))[_0x3c7261(0x2c9)][_0x3c7261(0x2ca)](_0x3c7261(0x2d6)),document[_0x3c7261(0x22e)](_0x3c7261(0x202))[_0x3c7261(0x2c9)][_0x3c7261(0x2ca)]('active');}function openSettings(){openSheet('settingsSheet');}function saveCoachSettings(){const _0x4384b2=a2_0x487f0a,_0x5499bb=document[_0x4384b2(0x22e)](_0x4384b2(0x28e))['value'];localStorage[_0x4384b2(0x271)]('uc_settings_cancel_window',_0x5499bb),console[_0x4384b2(0x22f)]('[Settings]\x20Cancel\x20window\x20set\x20to:',_0x5499bb),DataManager[_0x4384b2(0x27c)](_0x4384b2(0x2c2),{'settings':{'cancel_window':_0x5499bb}})[_0x4384b2(0x1c2)](_0x427041=>{const _0xeac49d=_0x4384b2;console[_0xeac49d(0x1d1)](_0xeac49d(0x2a6),_0x427041),showToast(_0xeac49d(0x27f),![]);});}function loadCoachSettings(){const _0x243254=a2_0x487f0a,_0x42e158=localStorage[_0x243254(0x30c)](_0x243254(0x266));_0x42e158&&(document['getElementById'](_0x243254(0x28e))['value']=_0x42e158);}function openRangesSheet(){closeAllSheets(),resetRangeForm(),renderRangesList(),openSheet('rangesSheet');}function addRange(){const _0x55df82=a2_0x487f0a,_0x267abb=document[_0x55df82(0x22e)](_0x55df82(0x294))[_0x55df82(0x28c)],_0x3df58d=document[_0x55df82(0x22e)](_0x55df82(0x24c))[_0x55df82(0x28c)],_0x1cd10e=document['getElementById']('rangeEndDate')[_0x55df82(0x28c)],_0xacb6cd=document[_0x55df82(0x22e)]('rangeEndTime')[_0x55df82(0x28c)];if(!_0x267abb||!_0x3df58d||!_0x1cd10e||!_0xacb6cd)return alert('Заполните\x20все\x20поля');const _0x5466b1=_0x267abb+'T'+_0x3df58d,_0x408192=_0x1cd10e+'T'+_0xacb6cd;if(_0x5466b1>=_0x408192)return alert(_0x55df82(0x278));specialRanges['push']({'start':_0x5466b1,'end':_0x408192}),resetRangeForm(),renderRangesList(),reRenderBlocks(),DataManager[_0x55df82(0x2d1)](),DataManager['fetchFromServer']('save_settings',{'settings':{'ranges':specialRanges}});}function a2_0x3764(_0x51183a,_0x455bd4){_0x51183a=_0x51183a-0x1a3;const _0x26c431=a2_0x33f1();let _0x4e372d=_0x26c431[_0x51183a];return _0x4e372d;}function deleteRange(_0x55bdbc){const _0x5a1ec2=a2_0x487f0a;specialRanges[_0x5a1ec2(0x1f3)](_0x55bdbc,0x1),renderRangesList(),reRenderBlocks(),DataManager['saveLocally'](),DataManager[_0x5a1ec2(0x27c)](_0x5a1ec2(0x2c2),{'settings':{'ranges':specialRanges}});}function resetRangeForm(){const _0x582738=a2_0x487f0a;document['getElementById']('rangeStartDate')[_0x582738(0x28c)]='',document[_0x582738(0x22e)](_0x582738(0x24c))[_0x582738(0x28c)]='00:00',document['getElementById'](_0x582738(0x276))[_0x582738(0x28c)]='',document['getElementById'](_0x582738(0x277))[_0x582738(0x28c)]=_0x582738(0x281);}function renderRangesList(){const _0x44442a=a2_0x487f0a,_0x123013=document[_0x44442a(0x22e)]('rangesList');_0x123013[_0x44442a(0x225)]='';if(!specialRanges[_0x44442a(0x2bd)]){_0x123013[_0x44442a(0x225)]=_0x44442a(0x1f0);return;}specialRanges[_0x44442a(0x2ce)]((_0xc95cde,_0x1b1c3f)=>{const _0x4dd43d=_0x44442a,_0x2e127c=document[_0x4dd43d(0x300)](_0x4dd43d(0x292));_0x2e127c[_0x4dd43d(0x322)]=_0x4dd43d(0x23f);const _0x3437d=_0x5d3797=>{const _0x5eb9c9=_0x4dd43d,_0x301e5b=new Date(_0x5d3797);return _0x301e5b['getDate']()+'.'+String(_0x301e5b['getMonth']()+0x1)[_0x5eb9c9(0x2da)](0x2,'0')+'\x20'+String(_0x301e5b['getHours']())['padStart'](0x2,'0')+':'+String(_0x301e5b[_0x5eb9c9(0x23d)]())[_0x5eb9c9(0x2da)](0x2,'0');};_0x2e127c['innerHTML']=_0x4dd43d(0x304)+_0x3437d(_0xc95cde[_0x4dd43d(0x306)])+'\x20—\x20'+_0x3437d(_0xc95cde['end'])+_0x4dd43d(0x20f)+_0x1b1c3f+_0x4dd43d(0x231),_0x123013[_0x4dd43d(0x249)](_0x2e127c);});}function scrollToToday(){const _0x5318cd=a2_0x487f0a,_0x26fa3b=getLocalDateStr(new Date()),_0x51c574=document[_0x5318cd(0x22e)](_0x5318cd(0x1d5)+_0x26fa3b),_0x8cf2ff=document[_0x5318cd(0x22e)](_0x5318cd(0x20e));if(_0x51c574&&_0x8cf2ff){const _0x445ab8=_0x8cf2ff[_0x5318cd(0x321)],_0x398bd2=_0x51c574['offsetLeft'],_0x13a67c=_0x51c574[_0x5318cd(0x1fa)];_0x8cf2ff[_0x5318cd(0x20c)]=_0x398bd2-_0x445ab8/0x2+_0x13a67c/0x2,_0x8cf2ff[_0x5318cd(0x28d)]=0x9*GRID_H;}}function onScroll(){const _0x1ff505=a2_0x487f0a,_0x53fe17=document[_0x1ff505(0x22e)](_0x1ff505(0x20e)),_0x5acb31=document[_0x1ff505(0x1fc)]('.day-col-header');for(let _0x4812b0 of _0x5acb31)if(_0x4812b0['offsetLeft']>=_0x53fe17[_0x1ff505(0x20c)]){const _0x39e6fa=new Date(_0x4812b0[_0x1ff505(0x2eb)](_0x1ff505(0x2e0)));document[_0x1ff505(0x22e)](_0x1ff505(0x284))[_0x1ff505(0x2cd)]=_0x39e6fa[_0x1ff505(0x291)]('ru',{'month':_0x1ff505(0x2b8)})[_0x1ff505(0x2df)]()+'\x20'+_0x39e6fa[_0x1ff505(0x222)]();break;}}function showToast(_0x499d27,_0x30138c=![]){const _0x48bcb5=a2_0x487f0a,_0x19c7e5=document[_0x48bcb5(0x22e)](_0x48bcb5(0x2bc));_0x19c7e5['className']=_0x48bcb5(0x2c6)+(_0x30138c?_0x48bcb5(0x2fc):''),document['getElementById'](_0x48bcb5(0x1d6))[_0x48bcb5(0x2cd)]=_0x30138c?_0x48bcb5(0x2e2):_0x48bcb5(0x1cd),document[_0x48bcb5(0x22e)](_0x48bcb5(0x1a3))['textContent']=_0x499d27,_0x19c7e5[_0x48bcb5(0x2c9)][_0x48bcb5(0x2a0)](_0x48bcb5(0x1a7)),setTimeout(()=>{const _0x7fdcbb=_0x48bcb5;_0x19c7e5['classList'][_0x7fdcbb(0x2ca)](_0x7fdcbb(0x1a7));},0xbb8);}function openDayOptions(_0x3b1b0c,_0x1a6c56){const _0x247ee9=a2_0x487f0a;selectedDayForOptions=_0x3b1b0c,document[_0x247ee9(0x22e)](_0x247ee9(0x270))['textContent']=_0x1a6c56,openSheet('dayOptionsSheet');}function toggleDayOff(){const _0x2a34b0=a2_0x487f0a;selectedDayForOptions&&(dateExceptions[selectedDayForOptions]=_0x2a34b0(0x2e4),reRenderBlocks(),closeAllSheets(),DataManager[_0x2a34b0(0x2d1)](),DataManager['fetchFromServer'](_0x2a34b0(0x2c2),{'settings':{'exceptions':dateExceptions}}));}function clearDayOff(){const _0x159309=a2_0x487f0a;selectedDayForOptions&&(delete dateExceptions[selectedDayForOptions],reRenderBlocks(),closeAllSheets(),DataManager[_0x159309(0x2d1)](),DataManager[_0x159309(0x27c)](_0x159309(0x2c2),{'settings':{'exceptions':dateExceptions}}));}function openSheet(_0x25d9e0){const _0x444ef8=a2_0x487f0a;document[_0x444ef8(0x22e)](_0x444ef8(0x30e))['classList'][_0x444ef8(0x2a0)]('active'),document[_0x444ef8(0x22e)](_0x25d9e0)[_0x444ef8(0x2c9)][_0x444ef8(0x2a0)]('open');}function closeAllSheets(){const _0x32694a=a2_0x487f0a;document['getElementById'](_0x32694a(0x30e))[_0x32694a(0x2c9)]['remove'](_0x32694a(0x1bd)),document[_0x32694a(0x1fc)](_0x32694a(0x1b5))[_0x32694a(0x2ce)](_0x5250bc=>_0x5250bc[_0x32694a(0x2c9)][_0x32694a(0x2ca)](_0x32694a(0x2d6)));}function openPatternEditor(){const _0x16bc27=a2_0x487f0a;closeAllSheets(),document[_0x16bc27(0x22e)](_0x16bc27(0x30d))[_0x16bc27(0x2c9)][_0x16bc27(0x2a0)](_0x16bc27(0x2d6)),renderPatternEditor();}function closePatternEditor(){const _0x32631c=a2_0x487f0a;document[_0x32631c(0x22e)](_0x32631c(0x30d))['classList'][_0x32631c(0x2ca)]('open');}function savePattern(){const _0x55e438=a2_0x487f0a;document['getElementById']('patternEditor')[_0x55e438(0x2c9)][_0x55e438(0x2ca)]('open'),reRenderBlocks(),DataManager[_0x55e438(0x2d1)](),DataManager[_0x55e438(0x27c)](_0x55e438(0x2c2),{'settings':{'pattern':availabilityPattern}});}function renderPatternEditor(){const _0x283e12=a2_0x487f0a,_0x276cc9=document[_0x283e12(0x22e)](_0x283e12(0x313));_0x276cc9[_0x283e12(0x225)]='';const _0x2af9d6=['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'],_0x561383=document[_0x283e12(0x300)](_0x283e12(0x292));_0x561383[_0x283e12(0x322)]=_0x283e12(0x1f1),_0x276cc9[_0x283e12(0x249)](_0x561383),_0x2af9d6[_0x283e12(0x2ce)]((_0x296b79,_0x1bbd64)=>{const _0x1cfe37=_0x283e12,_0x181a00=document[_0x1cfe37(0x300)](_0x1cfe37(0x292));_0x181a00['className']=_0x1cfe37(0x303),_0x181a00['innerHTML']=_0x296b79+_0x1cfe37(0x2e7),_0x181a00[_0x1cfe37(0x224)]=()=>toggleColPattern(_0x1bbd64),_0x276cc9[_0x1cfe37(0x249)](_0x181a00);});for(let _0xe6dc69=0x0;_0xe6dc69<0x18;_0xe6dc69++){const _0x46bceb=document[_0x283e12(0x300)]('div');_0x46bceb['className']='pe-time-label',_0x46bceb[_0x283e12(0x225)]=_0x283e12(0x247)+String(_0xe6dc69)[_0x283e12(0x2da)](0x2,'0')+_0x283e12(0x29c),_0x46bceb[_0x283e12(0x224)]=()=>toggleRowPattern(_0xe6dc69),_0x276cc9[_0x283e12(0x249)](_0x46bceb);for(let _0x1abfb8=0x0;_0x1abfb8<0x7;_0x1abfb8++){const _0x4cc7ee=document[_0x283e12(0x300)](_0x283e12(0x292)),_0x5e8fc4=(availabilityPattern[_0x1abfb8]||[])[_0x283e12(0x210)](_0xe6dc69),_0x126861=!_0x5e8fc4;_0x4cc7ee[_0x283e12(0x322)]=_0x283e12(0x1cf)+(_0x126861?_0x283e12(0x1bd):''),_0x4cc7ee['onclick']=()=>toggleSinglePattern(_0x1abfb8,_0xe6dc69),_0x276cc9[_0x283e12(0x249)](_0x4cc7ee);}}}function toggleSinglePattern(_0x20872f,_0x13097a){const _0x593052=a2_0x487f0a;if(!availabilityPattern[_0x20872f])availabilityPattern[_0x20872f]=[];const _0x3ad5d7=availabilityPattern[_0x20872f],_0x1b2168=_0x3ad5d7['indexOf'](_0x13097a);_0x1b2168===-0x1?_0x3ad5d7['push'](_0x13097a):_0x3ad5d7[_0x593052(0x1f3)](_0x1b2168,0x1),renderPatternEditor();}function toggleColPattern(_0x3bdf64){const _0x24844c=a2_0x487f0a;if(!availabilityPattern[_0x3bdf64])availabilityPattern[_0x3bdf64]=[];const _0x55a8d5=availabilityPattern[_0x3bdf64];_0x55a8d5[_0x24844c(0x2bd)]===0x0?availabilityPattern[_0x3bdf64]=Array[_0x24844c(0x295)]({'length':0x18},(_0x51f208,_0x31e8ce)=>_0x31e8ce):availabilityPattern[_0x3bdf64]=[],renderPatternEditor();}function toggleRowPattern(_0x5c177d){const _0x42c44d=a2_0x487f0a;let _0x462693=!![];for(let _0x362ed6=0x0;_0x362ed6<0x7;_0x362ed6++){if((availabilityPattern[_0x362ed6]||[])['includes'](_0x5c177d)){_0x462693=![];break;}}for(let _0x51eb07=0x0;_0x51eb07<0x7;_0x51eb07++){if(!availabilityPattern[_0x51eb07])availabilityPattern[_0x51eb07]=[];const _0x5546cf=availabilityPattern[_0x51eb07]['indexOf'](_0x5c177d);if(_0x462693){if(_0x5546cf===-0x1)availabilityPattern[_0x51eb07][_0x42c44d(0x269)](_0x5c177d);}else{if(_0x5546cf!==-0x1)availabilityPattern[_0x51eb07][_0x42c44d(0x1f3)](_0x5546cf,0x1);}}renderPatternEditor();}function renderPCol(_0x2cc779,_0x576c8c){const _0x43e7a5=a2_0x487f0a;_0x2cc779[_0x43e7a5(0x225)]='';const _0x11d9da=Math['round'](_0x2cc779[_0x43e7a5(0x2be)]);(availabilityPattern[_0x576c8c]||[])['forEach'](_0x41f4a9=>{const _0x55f780=_0x43e7a5,_0x2be747=document[_0x55f780(0x300)]('div');_0x2be747[_0x55f780(0x322)]=_0x55f780(0x20d);const _0xc0db72=_0x41f4a9*GRID_H;_0x2be747[_0x55f780(0x1b8)][_0x55f780(0x30b)]=_0xc0db72+'px',_0x2be747[_0x55f780(0x1b8)][_0x55f780(0x1b3)]='-'+_0x11d9da+_0x55f780(0x2d5)+_0xc0db72+'px',_0x2be747[_0x55f780(0x224)]=_0x5071bb=>{_0x5071bb['stopPropagation'](),toggleSinglePattern(_0x576c8c,_0x41f4a9);},_0x2cc779[_0x55f780(0x249)](_0x2be747);});}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x6823de=a2_0x487f0a,_0x1fabb4=new Date(),_0x1a7eb7=document['getElementById'](_0x6823de(0x1d4)),_0x4ddee1=document[_0x6823de(0x22e)](_0x6823de(0x1b6)),_0x55ac86=(_0x1fabb4[_0x6823de(0x2a2)]()*0x3c+_0x1fabb4[_0x6823de(0x23d)]())/0x3c*GRID_H;_0x1a7eb7[_0x6823de(0x1b8)][_0x6823de(0x30b)]=_0x55ac86+'px',_0x1a7eb7[_0x6823de(0x1b8)][_0x6823de(0x218)]=_0x6823de(0x1db),_0x4ddee1[_0x6823de(0x2cd)]=String(_0x1fabb4[_0x6823de(0x2a2)]())[_0x6823de(0x2da)](0x2,'0')+':'+String(_0x1fabb4[_0x6823de(0x23d)]())[_0x6823de(0x2da)](0x2,'0'),_0x4ddee1['style']['display']=_0x6823de(0x1db),_0x4ddee1['style'][_0x6823de(0x30b)]=_0x55ac86+'px';}document[a2_0x487f0a(0x1a8)](a2_0x487f0a(0x246),init);function openDayOptions(_0x5e3d46){const _0x5ba25a=a2_0x487f0a;selectedDayForOptions=_0x5e3d46;const _0x348dc1=new Date(_0x5e3d46),_0x1f5279={'weekday':'long','day':_0x5ba25a(0x21b),'month':_0x5ba25a(0x2b8),'year':_0x5ba25a(0x21b)},_0x25bf73=_0x348dc1[_0x5ba25a(0x1b1)](_0x5ba25a(0x29e),_0x1f5279);document[_0x5ba25a(0x22e)](_0x5ba25a(0x30a))[_0x5ba25a(0x2cd)]=_0x25bf73['charAt'](0x0)['toUpperCase']()+_0x25bf73[_0x5ba25a(0x25e)](0x1);let _0x556c02=_0x348dc1['getDay']()-0x1;if(_0x556c02===-0x1)_0x556c02=0x6;const _0x7171a=availabilityPattern[_0x556c02]||[],_0x4e9e51=0x18-_0x7171a[_0x5ba25a(0x2bd)],_0x5f27ff=_0x4e9e51*0x3c,_0x39f631=sessions['filter'](_0x175920=>_0x175920[_0x5ba25a(0x1e9)]===_0x5e3d46&&_0x175920[_0x5ba25a(0x1df)]!=='cancelled');let _0x15124e=_0x39f631[_0x5ba25a(0x2a9)](_0x171315=>{const _0x256cdc=_0x5ba25a,[_0x4420e9,_0x3e806f]=_0x171315['start'][_0x256cdc(0x31c)](':')['map'](Number),[_0x2f91b0,_0x4e433a]=_0x171315['end'][_0x256cdc(0x31c)](':')['map'](Number);return[_0x4420e9*0x3c+_0x3e806f,_0x2f91b0*0x3c+_0x4e433a];});_0x15124e[_0x5ba25a(0x243)]((_0x51e6c9,_0x4e6698)=>_0x51e6c9[0x0]-_0x4e6698[0x0]);let _0x30eefa=[];if(_0x15124e[_0x5ba25a(0x2bd)]>0x0){let _0x582e74=_0x15124e[0x0];for(let _0xf4a129=0x1;_0xf4a129<_0x15124e[_0x5ba25a(0x2bd)];_0xf4a129++){_0x15124e[_0xf4a129][0x0]<_0x582e74[0x1]?_0x582e74[0x1]=Math[_0x5ba25a(0x2b7)](_0x582e74[0x1],_0x15124e[_0xf4a129][0x1]):(_0x30eefa[_0x5ba25a(0x269)](_0x582e74),_0x582e74=_0x15124e[_0xf4a129]);}_0x30eefa[_0x5ba25a(0x269)](_0x582e74);}let _0x45189f=0x0;_0x30eefa['forEach'](_0x2baee2=>_0x45189f+=_0x2baee2[0x1]-_0x2baee2[0x0]),document['getElementById'](_0x5ba25a(0x1ae))[_0x5ba25a(0x2cd)]=formatMinsToHrs(_0x5f27ff),document[_0x5ba25a(0x22e)](_0x5ba25a(0x2b6))['textContent']=formatMinsToHrs(_0x45189f);const _0x3b6610=_0x5f27ff>0x0?Math[_0x5ba25a(0x2e9)](_0x45189f/_0x5f27ff*0x64):0x0,_0xd044f8=document['getElementById'](_0x5ba25a(0x2f5));_0xd044f8['textContent']=_0x3b6610+'%';const _0x2c7dba=document[_0x5ba25a(0x22e)](_0x5ba25a(0x256));if(_0x3b6610>0x64)_0xd044f8[_0x5ba25a(0x1b8)][_0x5ba25a(0x1a5)]=_0x5ba25a(0x2e3),_0x2c7dba['style']['borderColor']='rgba(255,\x2069,\x2058,\x200.3)';else _0x3b6610>0x50?(_0xd044f8[_0x5ba25a(0x1b8)]['color']=_0x5ba25a(0x1cb),_0x2c7dba[_0x5ba25a(0x1b8)][_0x5ba25a(0x2f0)]=_0x5ba25a(0x213)):(_0xd044f8[_0x5ba25a(0x1b8)]['color']=_0x5ba25a(0x1c4),_0x2c7dba[_0x5ba25a(0x1b8)][_0x5ba25a(0x2f0)]=_0x5ba25a(0x1d9));const _0xe5a6da=document[_0x5ba25a(0x22e)](_0x5ba25a(0x2f2));_0xe5a6da['innerHTML']='';_0x39f631[_0x5ba25a(0x2bd)]===0x0?_0xe5a6da[_0x5ba25a(0x225)]=_0x5ba25a(0x2b3):(_0x39f631[_0x5ba25a(0x243)]((_0x4b194,_0x20ef64)=>_0x4b194['start'][_0x5ba25a(0x1d2)](_0x20ef64['start'])),_0x39f631[_0x5ba25a(0x2ce)](_0xe3e8c0=>{const _0x45db82=_0x5ba25a,_0xea25ce=clients[_0x45db82(0x1ee)](_0x17d513=>_0x17d513[_0x45db82(0x2a5)]===_0xe3e8c0[_0x45db82(0x1ea)]),_0x506fb1=_0xea25ce?_0xea25ce[_0x45db82(0x1a5)]:_0x45db82(0x1bb),_0xc61839=_0xe3e8c0[_0x45db82(0x1df)]===_0x45db82(0x2ac),_0x598b74=_0xc61839?_0x45db82(0x268):'',_0x208558=document[_0x45db82(0x300)](_0x45db82(0x292));_0x208558[_0x45db82(0x322)]=_0x45db82(0x1c0),_0x208558[_0x45db82(0x1b8)][_0x45db82(0x24e)]=_0x506fb1,_0x208558[_0x45db82(0x225)]=_0x45db82(0x2c1)+_0xe3e8c0[_0x45db82(0x306)]+_0x45db82(0x280)+_0xe3e8c0[_0x45db82(0x21c)]+_0x45db82(0x240)+_0xe3e8c0[_0x45db82(0x1ea)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x598b74+_0x45db82(0x2bf),_0xe5a6da[_0x45db82(0x249)](_0x208558);}));const _0x2916be=document[_0x5ba25a(0x22e)](_0x5ba25a(0x2c4)),_0x30aa17=dateExceptions[_0x5e3d46]===_0x5ba25a(0x2e4);_0x30aa17?(_0x2916be[_0x5ba25a(0x2cd)]=_0x5ba25a(0x203),_0x2916be[_0x5ba25a(0x322)]='btn-primary\x20btn-secondary',_0x2916be[_0x5ba25a(0x1b8)]['color']=_0x5ba25a(0x1c4),_0x2916be['style'][_0x5ba25a(0x1c8)]=_0x5ba25a(0x232)):(_0x2916be[_0x5ba25a(0x2cd)]=_0x5ba25a(0x2bb),_0x2916be['className']='btn-primary\x20btn-danger',_0x2916be['style'][_0x5ba25a(0x1a5)]=_0x5ba25a(0x2e3),_0x2916be[_0x5ba25a(0x1b8)][_0x5ba25a(0x1c8)]='rgba(255,\x2069,\x2058,\x200.15)'),openSheet(_0x5ba25a(0x1dc));}let currentAnPeriod='week';function a2_0x33f1(){const _0x3b376b=['offClick','width','[Notify]\x20STOP:\x20Client\x20ID\x20is\x20missing\x20in\x20session\x20data!','.day-col-header','touches','getFullYear','clients','onclick','innerHTML','setMonth','Жду\x20вас\x20в\x20зале!\x20💪','exceptions','ranges','[Notify]\x20Attempting\x20to\x20send:','warn','sessionSheet','248072brffwa','getElementById','log',')\x20уже\x20записан\x20на\x20это\x20время!',')\x22><svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22><polyline\x20points=\x223\x206\x205\x206\x2021\x206\x22/><path\x20d=\x22M19\x206v14a2\x202\x200\x200\x201-2\x202H7a2\x202\x200\x200\x201-2-2V6m3\x200V4a2\x202\x200\x200\x201\x202-2h4a2\x202\x200\x200\x201\x202\x202v2\x22/></svg></div></div>','rgba(48,\x20209,\x2088,\x200.15)','Telegram','<b>✅\x20','cancel','init_load','recurringOptionContainer','pattern','374840qOLUUB','note','settings','week','getMinutes','1607800fRzdfY','range-item','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-name\x22\x20style=\x22display:flex;\x20align-items:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','(((.+)+)+)+$','inpStart','sort','syncLoad','[Sync]\x20Ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','DOMContentLoaded','<span\x20style=\x22font-size:10px;\x20opacity:0.3;\x20margin-right:2px\x22>→</span>','getBoundingClientRect','appendChild','Групповая:\x20также\x20записан\x20','client-stat-card','rangeStartTime','asTitle','borderLeftColor','uc_clients_v9','\x22><div\x20class=\x22dch-stats-fill\x22></div></div>','cancelled','Оффлайн\x20режим','touchend','event-card','height','statLoadCard','update',':00</span>','search','Удаление','complete','119ThBwTE','deleted','slice','inpDate','stat-','10px\x2010px\x200\x200','<b>🆕\x20Новая\x20тренировка</b>\x0a\x0a','Запись\x20на\x20<b>','getText','v9.0-BATCH-CALENDAR','uc_settings_cancel_window','create','<svg\x20style=\x22width:16px;\x20height:16px;\x20color:var(--acc-green);\x20margin-left:8px;\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','push','<b>🔄\x20Изменение\x20времени</b>\x0a\x0a','patternInfoBox','setHours','anDonutCircle','\x20выполнено','checked','dayOptionsTitle','setItem','2gqyVGM','<b>🚫\x20Тренировка\x20отменена</b>\x0a\x0a','Critical\x20TMA\x20Error:','cancel_window','rangeEndDate','rangeEndTime','Ошибка\x20дат','querySelector','[API\x20','text/plain;charset=UTF-8','fetchFromServer','sheetTitle','mergeServerData','Ошибка\x20сохранения\x20настроек','\x20-\x20','23:59','inpClient','inpRecurring','headerMonth','syncBatch','toFixed',']\x20Доступно:\x20','.pib-text','</div>','daysHeaderTrack','#050505','value','scrollTop','settingCancelWindow','Ошибка\x20сохранения\x20в\x20облако','%\x20+\x202px)','toLocaleString','div','ч,\x20Занято:\x20','rangeStartDate','from','[Notify]\x20Error:\x20Text\x20generation\x20failed','[Sync]\x20Pushing\x20batch\x20updates\x20for\x20','</div><div\x20class=\x22dch-stats\x22\x20id=\x22stat-','valid','done','Error\x20setting\x20color:',':00','expand','ru-RU','keys','add','[Notify]\x20Error:\x20sessionData\x20is\x20null','getHours','WebApp','now','name','Save\x20settings\x20error:','series','uc_sessions_v9','map','day-col-header\x20','mousemove','completed','custom','Этот\x20клиент\x20(','T23:59:59','ready','strokeDashoffset','BackButton','<div\x20class=\x22de-empty\x22>Нет\x20тренировок</div>','initDataUnsafe','<svg\x20class=\x22ev-status-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','doBusyHours','max','long','data','entries','Сделать\x20выходным','toast','length','offsetLeft','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','blocked-range-part\x20stripe-bg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22de-time\x22>','save_settings','Изменение\x20серии','btnDayToggle','inpSeriesCount','toast-notification\x20','btnStatusToggle','100%','classList','remove','Эту\x20и\x20будущие','analyticsList','textContent','forEach','Ваша\x20тренировка\x20перенесена:\x0a\x0a','then','saveLocally','Local\x20Load\x20Error','seriesCountContainer','seriesId','px\x20-','open','Только\x20эту','colIndex','null','padStart','insertBefore','<i>До\x20встречи\x20на\x20следующей\x20тренировке.</i>','Тренировка\x20завершена','backgroundColor','toUpperCase','data-date','zIndex','Успешно','var(--acc-red)','off','66cClhbl','<b>✅\x20Тренировка\x20завершена</b>\x0a\x0a','\x20<span\x20class=\x22arrow\x22>↓</span>','\x20—\x20','round','</div><div\x20class=\x22dch-num\x22>','getAttribute','parse','time-label','</div><div\x20class=\x22ev-time\x22>','href','borderColor','user','doEventsList','<b>⏰\x20Время:</b>\x20','setHeaderColor','doLoadPercent','data-day-idx','stringify','Синхронизировано','Нет\x20клиентов','btnDelete','batch_sync','success','Отличная\x20работа\x20сегодня!\x20Прогресс\x20зафиксирован.\x20🔥\x0a\x0a','25310nVuvHL','all','createElement','closest',':\x20Client\x20already\x20booked','pe-col-header','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><div\x20class=\x22range-text\x22>','\x20из\x20','start','Все\x20даты\x20заняты\x20этим\x20клиентом!','Ошибка:\x20Выберите\x20клиента\x20из\x20списка','flex','doDateHeader','top','getItem','patternEditor','overlay','setDate','px\x200px','10px','stopPropagation','peGrid','Это\x20часть\x20серии\x20тренировок','clientId','send_notification','getTime','option','<svg\x20class=\x22ev-recurring-icon\x20card-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','var(--acc-current)','anCustomDates','split','<b>📅\x20Дата:</b>\x20','loadLocal','location','anPercent','clientWidth','className','toastMessage','send','color','none','show','addEventListener','isArray','planned','touchmove','clientY','<div\x20class=\x22dch-day\x22>','doWorkHours','getDate','anTotalStats','toLocaleDateString','actionSheet','backgroundPosition','getMonth','.sheet','timeLineBadge','1727YRclIz','style','btn-status-toggle\x20undo-mode','мин,\x20Загрузка:\x20','#fff','<div\x20class=\x22empty-state\x22>Нет\x20тренировок\x20за\x20этот\x20период</div>','active','inpEnd','warning','de-item','[Notify]\x20Skipped:\x20ID\x20is\x20too\x20short\x20(Test\x20ID)','catch','Создана\x20серия:\x20','var(--acc-green)','target','floor','undefined','background','301941qOxkKg','\x20status-completed','var(--acc-orange)','scrollWidth','Инфо','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','pe-cell\x20',']\x20Failed:','error','localeCompare','Local\x20Save\x20Error','globalTimeLine','header-','toastTitle','Unknown','Редактировать','rgba(255,255,255,0.05)','delete','block','dayOptionsSheet','.dch-stats-fill','#0a84ff','status','Минимум\x202\x20тренировки','.day-off-overlay','filter','calc(','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>','day-column\x20','2866026KhTNjD','[Notify]\x20Server\x20Response:','setAttribute','dateStr','client','total','inpNote','Error\x20setting\x20back\x20button:','find','calendar','<div\x20style=\x22color:#8E8E93;font-size:13px;text-align:center;margin-top:20px;\x22>Нет\x20периодов</div>','pe-corner','toString','splice','save','getDay','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','Максимум\x20100\x20за\x20раз','Batch\x20Sync\x20OK','initData','offsetWidth','borderRadius','querySelectorAll','scroll','POST','setBackgroundColor','min','36855YBZGtg','actionSheetOverlay','Сделать\x20рабочим\x20днем',')</b>\x20была\x20удалена\x20из\x20расписания.','charAt','vibrate','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','anEnd','anStart','left','asBtnOne','scrollLeft','blocked-slot\x20stripe-bg','matrixViewport','</div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22range-actions\x22><div\x20class=\x22range-icon\x20del\x22\x20onclick=\x22deleteRange(','includes','.period-switch\x20.p-btn','single','rgba(255,\x20159,\x2010,\x200.3)','createDocumentFragment','<svg\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>\x20Завершить\x20тренировку','[Notify]\x20Client\x20SWAP\x20detected','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','display','random','today','numeric','end'];a2_0x33f1=function(){return _0x3b376b;};return a2_0x33f1();}function openAnalytics(){const _0x2d80fb=a2_0x487f0a,_0x53fb37=document[_0x2d80fb(0x279)]('.period-switch\x20.p-btn');setAnalyticsPeriod('week',_0x53fb37),closeAllSheets(),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0xab8cd6,_0x3738fc){const _0x1ac494=a2_0x487f0a;currentAnPeriod=_0xab8cd6,document[_0x1ac494(0x1fc)](_0x1ac494(0x211))[_0x1ac494(0x2ce)](_0x52c822=>_0x52c822['classList'][_0x1ac494(0x2ca)](_0x1ac494(0x1bd)));if(_0x3738fc)_0x3738fc[_0x1ac494(0x2c9)][_0x1ac494(0x2a0)](_0x1ac494(0x1bd));const _0x203759=document[_0x1ac494(0x22e)](_0x1ac494(0x31b));_0x203759['style']['display']=_0xab8cd6===_0x1ac494(0x2ad)?'flex':'none';const _0x1e66c3=new Date();let _0x19e624=new Date(),_0x4c9b3a=new Date();if(_0xab8cd6===_0x1ac494(0x23c))_0x19e624=getStartOfWeek(_0x1e66c3),_0x4c9b3a=new Date(_0x19e624),_0x4c9b3a['setDate'](_0x4c9b3a[_0x1ac494(0x1af)]()+0x6);else{if(_0xab8cd6==='month')_0x19e624=new Date(_0x1e66c3[_0x1ac494(0x222)](),_0x1e66c3[_0x1ac494(0x1b4)](),0x1),_0x4c9b3a=new Date(_0x1e66c3[_0x1ac494(0x222)](),_0x1e66c3[_0x1ac494(0x1b4)]()+0x1,0x0);else{!document['getElementById'](_0x1ac494(0x209))[_0x1ac494(0x28c)]&&(document[_0x1ac494(0x22e)]('anStart')[_0x1ac494(0x28c)]=getLocalDateStr(_0x1e66c3),document[_0x1ac494(0x22e)]('anEnd')['value']=getLocalDateStr(_0x1e66c3));refreshAnalytics();return;}}document[_0x1ac494(0x22e)](_0x1ac494(0x209))[_0x1ac494(0x28c)]=getLocalDateStr(_0x19e624),document[_0x1ac494(0x22e)](_0x1ac494(0x208))['value']=getLocalDateStr(_0x4c9b3a),refreshAnalytics();}function refreshAnalytics(){const _0x288841=a2_0x487f0a,_0x448532=document[_0x288841(0x22e)](_0x288841(0x209))[_0x288841(0x28c)],_0x1bef83=document[_0x288841(0x22e)](_0x288841(0x208))['value'];if(!_0x448532||!_0x1bef83)return;const _0x2d3a41=sessions['filter'](_0x477ddb=>_0x477ddb[_0x288841(0x1e9)]>=_0x448532&&_0x477ddb[_0x288841(0x1e9)]<=_0x1bef83&&_0x477ddb[_0x288841(0x1df)]!==_0x288841(0x251)),_0x232f18=_0x2d3a41[_0x288841(0x2bd)],_0x1f902d=_0x2d3a41[_0x288841(0x1e2)](_0x8e9e20=>_0x8e9e20[_0x288841(0x1df)]===_0x288841(0x2ac))[_0x288841(0x2bd)],_0x3b8fd5=_0x232f18>0x0?Math[_0x288841(0x2e9)](_0x1f902d/_0x232f18*0x64):0x0;document[_0x288841(0x22e)](_0x288841(0x320))[_0x288841(0x2cd)]=_0x3b8fd5+'%',document['getElementById'](_0x288841(0x1b0))[_0x288841(0x2cd)]=_0x1f902d+_0x288841(0x305)+_0x232f18+_0x288841(0x26e);const _0x799c4c=document[_0x288841(0x22e)](_0x288841(0x26d)),_0x41073d=0x2*Math['PI']*0x23,_0x4ebd94=_0x41073d-_0x3b8fd5/0x64*_0x41073d;_0x799c4c['style'][_0x288841(0x2b1)]=_0x4ebd94;const _0x17be15={};_0x2d3a41[_0x288841(0x2ce)](_0x5e08df=>{const _0x13a802=_0x288841;if(!_0x17be15[_0x5e08df[_0x13a802(0x1ea)]]){const _0x2c66fe=clients[_0x13a802(0x1ee)](_0x47b9a7=>_0x47b9a7[_0x13a802(0x2a5)]===_0x5e08df['client']);_0x17be15[_0x5e08df[_0x13a802(0x1ea)]]={'total':0x0,'done':0x0,'color':_0x2c66fe?_0x2c66fe[_0x13a802(0x1a5)]:'#fff'};}_0x17be15[_0x5e08df[_0x13a802(0x1ea)]][_0x13a802(0x1eb)]++;if(_0x5e08df[_0x13a802(0x1df)]===_0x13a802(0x2ac))_0x17be15[_0x5e08df[_0x13a802(0x1ea)]]['done']++;});const _0x134d43=document['getElementById'](_0x288841(0x2cc));_0x134d43[_0x288841(0x225)]='';const _0x7d27cf=Object[_0x288841(0x2ba)](_0x17be15)[_0x288841(0x243)]((_0x486cf7,_0x228b9c)=>_0x228b9c[0x1]['total']-_0x486cf7[0x1][_0x288841(0x1eb)]);if(_0x7d27cf['length']===0x0){_0x134d43[_0x288841(0x225)]=_0x288841(0x1bc);return;}_0x7d27cf[_0x288841(0x2ce)](([_0x1202be,_0x46b5a0])=>{const _0x1eefb9=_0x288841,_0x12b296=Math[_0x1eefb9(0x2e9)](_0x46b5a0[_0x1eefb9(0x29a)]/_0x46b5a0[_0x1eefb9(0x1eb)]*0x64),_0x146777=document[_0x1eefb9(0x300)](_0x1eefb9(0x292));_0x146777[_0x1eefb9(0x322)]=_0x1eefb9(0x24b),_0x146777[_0x1eefb9(0x1b8)]['borderLeftColor']=_0x46b5a0['color'],_0x146777['innerHTML']=_0x1eefb9(0x1e4)+_0x1202be+_0x1eefb9(0x207)+_0x46b5a0[_0x1eefb9(0x29a)]+'</span>\x20/\x20'+_0x46b5a0[_0x1eefb9(0x1eb)]+_0x1eefb9(0x1f6)+_0x12b296+_0x1eefb9(0x217),_0x134d43['appendChild'](_0x146777);});}function formatMinsToHrs(_0x747b27){const _0x5f009c=a2_0x487f0a;if(_0x747b27===0x0)return'0';const _0x171712=Math[_0x5f009c(0x1c6)](_0x747b27/0x3c),_0x351712=_0x747b27%0x3c;if(_0x351712===0x0)return _0x171712+'ч';return _0x171712+'ч\x20'+_0x351712+'м';}