const a7_0x4a616d=a7_0x57f9;(function(_0x2bb4cd,_0x404bfc){const _0x5e1faa=a7_0x57f9,_0x3ca088=_0x2bb4cd();while(!![]){try{const _0x59ef67=-parseInt(_0x5e1faa(0x26d))/0x1+parseInt(_0x5e1faa(0x236))/0x2+parseInt(_0x5e1faa(0x27d))/0x3+-parseInt(_0x5e1faa(0x241))/0x4+parseInt(_0x5e1faa(0x238))/0x5*(-parseInt(_0x5e1faa(0x218))/0x6)+-parseInt(_0x5e1faa(0x25f))/0x7+-parseInt(_0x5e1faa(0x269))/0x8*(-parseInt(_0x5e1faa(0x200))/0x9);if(_0x59ef67===_0x404bfc)break;else _0x3ca088['push'](_0x3ca088['shift']());}catch(_0x3b0b81){_0x3ca088['push'](_0x3ca088['shift']());}}}(a7_0x1980,0xa4cc6));const a7_0x7292d0=(function(){let _0x3ca43b=!![];return function(_0xcc718,_0x5b2af6){const _0x4653ca=_0x3ca43b?function(){if(_0x5b2af6){const _0x24fcec=_0x5b2af6['apply'](_0xcc718,arguments);return _0x5b2af6=null,_0x24fcec;}}:function(){};return _0x3ca43b=![],_0x4653ca;};}()),a7_0x16e182=a7_0x7292d0(this,function(){const _0x5c1ee8=a7_0x57f9;return a7_0x16e182[_0x5c1ee8(0x283)]()[_0x5c1ee8(0x27c)]('(((.+)+)+)+$')['toString']()[_0x5c1ee8(0x209)](a7_0x16e182)[_0x5c1ee8(0x27c)](_0x5c1ee8(0x256));});function a7_0x1980(){const _0x2ba38c=['Color/Swipe\x20settings\x20error:','innerText','boxShadow','auto','HapticFeedback','view-cats','currentContainer','blur','constructor','next','text/plain;charset=utf-8','body','notificationOccurred','BATCH_SIZE','classList','div','impactOccurred','hidden','product-row\x20','searchInput','getItem','saveSelectionToServer','flat','104346BEegYi','from','medium','loadFromCache','–í—ã–±—Ä–∞—Ç—å\x20–≤—Å—ë','parse','innerHTML','–°–Ω—è—Ç—å\x20–≤—Å—ë','href','searchResults','btnSelectAll','querySelector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22check-square\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-name\x22>','error','isArray','map','disableVerticalSwipes','className','find','#050505','every','renderIndex','@keyframes\x20fadeInUp\x20{\x20to\x20{\x20opacity:\x201;\x20transform:\x20translateY(0);\x20}\x20}','active','catTitle','productsMap','categories','fontWeight','script.google.com','activeCatId','2559696JuAvDQ','sentinel','195EwJCVm','userSelection','–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...','%\x22></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','initialSelected','addEventListener','resize','catGrid','show','3834200EqCTMO','setItem','prev','productList','toLowerCase','values','Critical\x20TMA\x20Error:','innerWidth','searchMode','icon','none','initData','name','createElement','style','isIntersecting','renderQueue','appendChild','createDocumentFragment','btnSearchCancel','has','(((.+)+)+)+$','touchstart','appLoader','üßπ\x20Removed\x20','cleanupZombieProducts','value','observe','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mini-track\x22><div\x20class=\x22mini-fill\x22\x20style=\x22width:\x20','products','7968002zWsPFx','btnSave','location','animation','view-search','BackButton','–í—ã–±—Ä–∞—Ç—å\x20(','slice','.fx-layer','click','120IvZDlI','size','serverVer','–ù–∞–∑–∞–¥','1253894ASzNkq','–û—Ç–º–µ–Ω–∞','forEach','selected','success','opacity','background','trim','WebApp','ultima_data_v2','needUpdate','pointerEvents','add','filter','init','search','2584410ugHPdF','target','view-list','https://script.google.com/macros/s/AKfycbybxqI4xOLAUOcMXGReNl0PVjGToGg6_x3ZxlKNnUHg3XcaZGhkbsu61Adgkb4emrkm/exec','Sync\x20skipped:','json','toString','viewCats','stringify','viewSearch','head','display','–û—à–∏–±–∫–∞!','closest','delete','warn','ultima_cart_v1','innerHeight','offsetWidth','offClick','500','cat-card','bump','border','viewList','onclick','setBackgroundColor','Telegram','getProducts','router.html','textContent','push','log','length','saveBtnText','searchClear','visible','fadeInUp\x200.2s\x20ease\x20forwards\x20','search-active','light','<div\x20class=\x22simple-no-results\x22>–ù–∏—á–µ–≥–æ\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω–æ</div>','getElementById','200px','remove','transparent','\x20zombie\x20products','POST','1537605HruYXW'];a7_0x1980=function(){return _0x2ba38c;};return a7_0x1980();}a7_0x16e182();const API_URL=a7_0x4a616d(0x280),tg=window[a7_0x4a616d(0x1ec)]?.[a7_0x4a616d(0x275)],TG_INIT_DATA=tg?.[a7_0x4a616d(0x24c)]||'';if(tg)try{tg['ready'](),tg['expand']();try{tg['setHeaderColor'](a7_0x4a616d(0x22b));if(tg[a7_0x4a616d(0x1eb)])tg[a7_0x4a616d(0x1eb)](a7_0x4a616d(0x22b));if(tg['disableVerticalSwipes'])tg[a7_0x4a616d(0x228)]();}catch(a7_0x5a7253){console[a7_0x4a616d(0x1e0)](a7_0x4a616d(0x201),a7_0x5a7253);}tg[a7_0x4a616d(0x264)]&&(tg[a7_0x4a616d(0x264)]['show'](),tg[a7_0x4a616d(0x264)][a7_0x4a616d(0x1e4)](),tg['BackButton']['onClick'](()=>{const _0x14fc61=a7_0x4a616d;if(state[_0x14fc61(0x249)])exitSearchMode();else state[_0x14fc61(0x235)]?goBack():window[_0x14fc61(0x261)][_0x14fc61(0x220)]=_0x14fc61(0x1ee);}));}catch(a7_0x5b49d7){console[a7_0x4a616d(0x225)](a7_0x4a616d(0x247),a7_0x5b49d7);}const DataService={'categories':[],'productsMap':{},'serverVer':0x0,async 'init'(){const _0x32284b=a7_0x4a616d,_0x3ed566=this[_0x32284b(0x21b)]();_0x3ed566&&(renderCategories(),hideLoader()),updateSaveButton(),await this['syncWithServer']();},'loadFromCache'(){const _0x1fc67b=a7_0x4a616d;try{const _0x56954c=localStorage[_0x1fc67b(0x215)](_0x1fc67b(0x276));if(_0x56954c){const _0x1560d3=JSON[_0x1fc67b(0x21d)](_0x56954c);this[_0x1fc67b(0x232)]=_0x1560d3[_0x1fc67b(0x232)]||[],this['productsMap']=_0x1560d3[_0x1fc67b(0x231)]||{},this[_0x1fc67b(0x26b)]=_0x1560d3[_0x1fc67b(0x26b)]||0x0;const _0x116916=localStorage['getItem'](_0x1fc67b(0x1e1));if(_0x116916){const _0x64a922=JSON[_0x1fc67b(0x21d)](_0x116916);state[_0x1fc67b(0x270)]=new Set(_0x64a922),this[_0x1fc67b(0x25a)](),state['initialSelected']=new Set(state[_0x1fc67b(0x270)]);}return!![];}}catch(_0x2587bd){console[_0x1fc67b(0x225)](_0x2587bd);}return![];},async 'syncWithServer'(){const _0x527a12=a7_0x4a616d;try{if(!API_URL['includes'](_0x527a12(0x234))){console[_0x527a12(0x1e0)]('No\x20API\x20URL'),hideLoader();return;}const _0x2b5702=await fetch(API_URL,{'method':_0x527a12(0x1ff),'headers':{'Content-Type':'text/plain;charset=utf-8'},'body':JSON[_0x527a12(0x285)]({'action':_0x527a12(0x27b),'clientVer':this[_0x527a12(0x26b)],'initData':TG_INIT_DATA})}),_0x19982d=await _0x2b5702[_0x527a12(0x282)]();_0x19982d['ok']&&_0x19982d[_0x527a12(0x277)]&&_0x19982d['catalog']&&this['processCatalog'](_0x19982d['catalog'],_0x19982d[_0x527a12(0x26b)]);if(_0x19982d['ok']&&_0x19982d[_0x527a12(0x239)])try{const _0x231c95=JSON[_0x527a12(0x21d)](_0x19982d[_0x527a12(0x239)]);state[_0x527a12(0x270)]=new Set(_0x231c95),this[_0x527a12(0x25a)](),state[_0x527a12(0x23c)]=new Set(state[_0x527a12(0x270)]),saveSelectionToCache(),updateSaveButton(),renderCategories();}catch(_0x35a16a){}hideLoader();}catch(_0x3dda21){console[_0x527a12(0x1e0)](_0x527a12(0x281),_0x3dda21),hideLoader();if(!DataService[_0x527a12(0x232)]['length'])alert('–û—à–∏–±–∫–∞\x20–∑–∞–≥—Ä—É–∑–∫–∏\x20–¥–∞–Ω–Ω—ã—Ö.\x20–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–∏–Ω—Ç–µ—Ä–Ω–µ—Ç.');}},'processCatalog'(_0x21e56c,_0x4e5939){const _0x359541=a7_0x4a616d;this[_0x359541(0x232)]=_0x21e56c[_0x359541(0x232)][_0x359541(0x227)](_0x5e3288=>({'id':String(_0x5e3288['id']),'name':_0x5e3288[_0x359541(0x24d)],'icon':_0x5e3288[_0x359541(0x24a)]}));const _0xc55ae4={};this[_0x359541(0x232)][_0x359541(0x26f)](_0x1cbfac=>_0xc55ae4[_0x1cbfac['id']]=[]),_0x21e56c[_0x359541(0x25e)]&&Array[_0x359541(0x226)](_0x21e56c[_0x359541(0x25e)])&&_0x21e56c['products']['forEach'](_0x4537ea=>{const _0x19f021=_0x359541,_0x26800f=String(_0x4537ea[0x0]),_0x199c78=String(_0x4537ea[0x1]);if(!_0xc55ae4[_0x199c78])_0xc55ae4[_0x199c78]=[];_0xc55ae4[_0x199c78][_0x19f021(0x1f0)]({'id':_0x26800f,'name':_0x4537ea[0x2],'meta':_0x4537ea[0x3]});}),this[_0x359541(0x231)]=_0xc55ae4,this[_0x359541(0x26b)]=_0x4e5939,localStorage['setItem']('ultima_data_v2',JSON[_0x359541(0x285)]({'categories':this[_0x359541(0x232)],'productsMap':this[_0x359541(0x231)],'serverVer':this[_0x359541(0x26b)]})),this['cleanupZombieProducts'](),renderCategories(),hideLoader();},'cleanupZombieProducts'(){const _0x44d5fb=a7_0x4a616d;if(!state[_0x44d5fb(0x270)]||state[_0x44d5fb(0x270)][_0x44d5fb(0x26a)]===0x0)return;const _0x3bc1ad=new Set();Object[_0x44d5fb(0x246)](this['productsMap'])[_0x44d5fb(0x217)]()[_0x44d5fb(0x26f)](_0x155081=>_0x3bc1ad[_0x44d5fb(0x279)](_0x155081['id']));const _0x2e3d4d=new Set();state[_0x44d5fb(0x270)][_0x44d5fb(0x26f)](_0x13d5dd=>{const _0x5b491b=_0x44d5fb;_0x3bc1ad[_0x5b491b(0x255)](_0x13d5dd)&&_0x2e3d4d[_0x5b491b(0x279)](_0x13d5dd);}),_0x2e3d4d[_0x44d5fb(0x26a)]!==state['selected']['size']&&(console[_0x44d5fb(0x1f1)](_0x44d5fb(0x259)+(state[_0x44d5fb(0x270)][_0x44d5fb(0x26a)]-_0x2e3d4d['size'])+_0x44d5fb(0x1fe)),state['selected']=_0x2e3d4d,saveSelectionToCache());},'getProducts'(_0xb27901){return this['productsMap'][_0xb27901]||[];},'search'(_0x57a088){const _0x5e6d5f=a7_0x4a616d,_0x169f32=[],_0x4b6afe=_0x57a088[_0x5e6d5f(0x245)]();return Object['values'](this[_0x5e6d5f(0x231)])['flat']()[_0x5e6d5f(0x26f)](_0x3861b6=>{const _0x78b2b2=_0x5e6d5f;if(_0x3861b6[_0x78b2b2(0x24d)]['toLowerCase']()['includes'](_0x4b6afe))_0x169f32[_0x78b2b2(0x1f0)](_0x3861b6);}),_0x169f32;},async 'saveSelectionToServer'(){const _0x3516bb=a7_0x4a616d;this[_0x3516bb(0x25a)](),saveSelectionToCache();try{return await fetch(API_URL,{'method':_0x3516bb(0x1ff),'headers':{'Content-Type':_0x3516bb(0x20b)},'body':JSON['stringify']({'action':'save','initData':TG_INIT_DATA,'selection':Array[_0x3516bb(0x219)](state[_0x3516bb(0x270)])})}),!![];}catch(_0xc7973d){return![];}}},state={'selected':new Set(),'initialSelected':new Set(),'activeCatId':null,'searchMode':![],'renderQueue':[],'renderIndex':0x0,'BATCH_SIZE':0x14,'currentContainer':null};function saveSelectionToCache(){const _0x4d8abc=a7_0x4a616d;try{localStorage[_0x4d8abc(0x242)](_0x4d8abc(0x1e1),JSON['stringify'](Array['from'](state[_0x4d8abc(0x270)])));}catch(_0x16d594){}}const el={'catGrid':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x23f)),'productList':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x244)),'viewCats':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x206)),'viewList':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x27f)),'viewSearch':document['getElementById'](a7_0x4a616d(0x263)),'catTitle':document['getElementById'](a7_0x4a616d(0x230)),'btnSelectAll':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x222)),'searchInput':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x214)),'searchClear':document[a7_0x4a616d(0x1fa)]('searchClear'),'searchResults':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x221)),'btnSearchCancel':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x254)),'btnSave':document['getElementById'](a7_0x4a616d(0x260)),'saveBtnText':document['getElementById'](a7_0x4a616d(0x1f3)),'sentinel':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x237)),'loader':document[a7_0x4a616d(0x1fa)](a7_0x4a616d(0x258))};function hideLoader(){const _0x45d68d=a7_0x4a616d;el['loader']['classList']['add'](_0x45d68d(0x212));}function haptic(_0x29c0af=a7_0x4a616d(0x1f8)){const _0x2ed7cf=a7_0x4a616d;try{const _0x5d9f96=window['Telegram']?.[_0x2ed7cf(0x275)]?.[_0x2ed7cf(0x205)];if(_0x5d9f96)_0x29c0af===_0x2ed7cf(0x1f8)?_0x5d9f96[_0x2ed7cf(0x211)](_0x2ed7cf(0x1f8)):_0x29c0af===_0x2ed7cf(0x21a)?_0x5d9f96[_0x2ed7cf(0x211)](_0x2ed7cf(0x21a)):_0x5d9f96[_0x2ed7cf(0x20d)](_0x2ed7cf(0x271));}catch(_0x56b358){}}const bump=_0xa75ce4=>{const _0x2a7eda=a7_0x4a616d;if(!_0xa75ce4)return;_0xa75ce4[_0x2a7eda(0x20f)][_0x2a7eda(0x1fc)](_0x2a7eda(0x1e7)),void _0xa75ce4[_0x2a7eda(0x1e3)],_0xa75ce4['classList'][_0x2a7eda(0x279)](_0x2a7eda(0x1e7));};document[a7_0x4a616d(0x23d)](a7_0x4a616d(0x257),_0x22fd8b=>{const _0x4af080=a7_0x4a616d,_0x56b6d7=_0x22fd8b['target'][_0x4af080(0x1de)]('.cat-card,\x20.btn-save');if(!_0x56b6d7)return;haptic(_0x4af080(0x1f8)),bump(_0x56b6d7);},{'passive':!![]});function isSelectionChanged(){const _0x33206c=a7_0x4a616d;if(state[_0x33206c(0x270)][_0x33206c(0x26a)]!==state['initialSelected'][_0x33206c(0x26a)])return!![];for(let _0x1560ed of state[_0x33206c(0x270)]){if(!state[_0x33206c(0x23c)][_0x33206c(0x255)](_0x1560ed))return!![];}return![];}function init(){const _0x35e7ca=a7_0x4a616d;let _0x4eee21=window['innerWidth'];const _0x230c2a=document[_0x35e7ca(0x223)](_0x35e7ca(0x267)),_0x56690a=()=>{const _0x43d6a2=_0x35e7ca;_0x230c2a[_0x43d6a2(0x24f)]['height']=window[_0x43d6a2(0x1e2)]+'px',_0x4eee21=window[_0x43d6a2(0x248)];};_0x56690a(),window[_0x35e7ca(0x23d)](_0x35e7ca(0x23e),()=>{const _0x302197=_0x35e7ca;if(window[_0x302197(0x248)]!==_0x4eee21)_0x56690a();}),DataService[_0x35e7ca(0x27b)](),el['searchInput']['addEventListener']('input',handleSearch),el[_0x35e7ca(0x1f4)][_0x35e7ca(0x23d)](_0x35e7ca(0x268),clearSearch);if(tg)tg['BackButton']['show']();const _0x3bb73d=new IntersectionObserver(_0x225001=>{const _0x5cd4bb=_0x35e7ca;if(_0x225001[0x0][_0x5cd4bb(0x250)])renderNextBatch();},{'rootMargin':_0x35e7ca(0x1fb)});_0x3bb73d[_0x35e7ca(0x25c)](el[_0x35e7ca(0x237)]);}function renderCategories(){const _0x256838=a7_0x4a616d;el[_0x256838(0x23f)][_0x256838(0x21e)]='',DataService[_0x256838(0x232)][_0x256838(0x26f)](_0x505326=>{const _0x430347=_0x256838,_0x5cb1c9=DataService['getProducts'](_0x505326['id']),_0x344288=_0x5cb1c9[_0x430347(0x1f2)],_0x1dbb30=_0x5cb1c9[_0x430347(0x27a)](_0x50154a=>state['selected'][_0x430347(0x255)](_0x50154a['id']))[_0x430347(0x1f2)],_0x8d9ca7=_0x344288>0x0?_0x1dbb30/_0x344288*0x64:0x0,_0x4c0f53=document[_0x430347(0x24e)]('div');_0x4c0f53['className']=_0x430347(0x1e6),_0x4c0f53['onclick']=()=>openCategory(_0x505326['id']),_0x4c0f53[_0x430347(0x21e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x20100%\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-icon\x22>'+_0x505326[_0x430347(0x24a)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-name\x22>'+_0x505326[_0x430347(0x24d)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x1dbb30+'\x20–∏–∑\x20'+_0x344288+_0x430347(0x25d)+_0x8d9ca7+_0x430347(0x23b),el['catGrid'][_0x430347(0x252)](_0x4c0f53);});}function openCategory(_0x16cb9e){const _0x49d417=a7_0x4a616d;state['activeCatId']=_0x16cb9e;const _0x172b1b=DataService['categories'][_0x49d417(0x22a)](_0x20a70f=>_0x20a70f['id']===_0x16cb9e);el['catTitle'][_0x49d417(0x1ef)]=_0x172b1b[_0x49d417(0x24d)],el[_0x49d417(0x244)][_0x49d417(0x24f)][_0x49d417(0x288)]='flex';const _0x35cbd1=DataService[_0x49d417(0x1ed)](_0x16cb9e);startInfiniteRender(_0x35cbd1,el[_0x49d417(0x244)]),updateSelectAllBtn(),el[_0x49d417(0x284)][_0x49d417(0x20f)]['add'](_0x49d417(0x243)),el['viewCats'][_0x49d417(0x20f)]['remove'](_0x49d417(0x22f)),el[_0x49d417(0x1e9)][_0x49d417(0x20f)][_0x49d417(0x279)](_0x49d417(0x22f)),el[_0x49d417(0x1e9)]['classList'][_0x49d417(0x1fc)](_0x49d417(0x20a)),updateSaveButton();if(tg)tg[_0x49d417(0x264)]['show']();}function goBack(){const _0x174f0e=a7_0x4a616d;state[_0x174f0e(0x235)]=null,el['viewList'][_0x174f0e(0x20f)][_0x174f0e(0x1fc)](_0x174f0e(0x22f)),el[_0x174f0e(0x284)]['classList']['add']('active'),el[_0x174f0e(0x284)]['classList'][_0x174f0e(0x1fc)](_0x174f0e(0x243)),setTimeout(renderCategories,0x12c),updateSaveButton();if(tg)tg[_0x174f0e(0x264)][_0x174f0e(0x240)]();}function startInfiniteRender(_0x5b9568,_0xdf572,_0xb8f5f4=![]){const _0xfb02c8=a7_0x4a616d;_0xdf572['innerHTML']='',_0xdf572[_0xfb02c8(0x24f)]['cssText']='';if(_0x5b9568[_0xfb02c8(0x1f2)]===0x0&&_0xb8f5f4){_0xdf572[_0xfb02c8(0x21e)]=_0xfb02c8(0x1f9);return;}state[_0xfb02c8(0x251)]=_0x5b9568,state[_0xfb02c8(0x22d)]=0x0;let _0x31852e=_0xdf572;if(_0xb8f5f4){const _0x562eae=document[_0xfb02c8(0x24e)]('div');_0x562eae[_0xfb02c8(0x229)]='product-list-container',_0x562eae[_0xfb02c8(0x24f)][_0xfb02c8(0x273)]=_0xfb02c8(0x1fd),_0x562eae['style'][_0xfb02c8(0x1e8)]=_0xfb02c8(0x24b),_0x562eae[_0xfb02c8(0x24f)][_0xfb02c8(0x203)]=_0xfb02c8(0x24b),_0xdf572['appendChild'](_0x562eae),_0x31852e=_0x562eae;}state[_0xfb02c8(0x207)]=_0x31852e,renderNextBatch(_0xb8f5f4);}function renderNextBatch(_0x2e676b=![]){const _0x4b4250=a7_0x4a616d;if(state[_0x4b4250(0x22d)]>=state[_0x4b4250(0x251)][_0x4b4250(0x1f2)])return;const _0x4de2c1=state['renderQueue'][_0x4b4250(0x266)](state[_0x4b4250(0x22d)],state[_0x4b4250(0x22d)]+state[_0x4b4250(0x20e)]),_0x4ffd4a=document[_0x4b4250(0x253)]();_0x4de2c1['forEach']((_0x3b72b0,_0x124e17)=>{const _0x4ab12b=_0x4b4250,_0x459d9e=state[_0x4ab12b(0x270)][_0x4ab12b(0x255)](_0x3b72b0['id']),_0x486a63=document[_0x4ab12b(0x24e)](_0x4ab12b(0x210));_0x486a63['className']=_0x4ab12b(0x213)+(_0x459d9e?'selected':''),_0x486a63['addEventListener'](_0x4ab12b(0x257),()=>haptic(_0x4ab12b(0x1f8)),{'passive':!![]}),_0x486a63['onclick']=()=>toggleProduct(_0x3b72b0['id'],_0x486a63),!_0x2e676b&&(_0x486a63[_0x4ab12b(0x24f)][_0x4ab12b(0x272)]='0',_0x486a63[_0x4ab12b(0x24f)][_0x4ab12b(0x262)]=_0x4ab12b(0x1f6)+_0x124e17*0.02+'s',setTimeout(()=>{const _0x4c1e2e=_0x4ab12b;_0x486a63[_0x4c1e2e(0x24f)][_0x4c1e2e(0x272)]='1',_0x486a63[_0x4c1e2e(0x24f)]['animation']=_0x4c1e2e(0x24b),_0x486a63[_0x4c1e2e(0x24f)]['transform']=_0x4c1e2e(0x24b);},_0x124e17*0x14+0x12c)),_0x486a63[_0x4ab12b(0x21e)]=_0x4ab12b(0x224)+_0x3b72b0['name']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-meta\x22>'+_0x3b72b0['meta']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20',_0x4ffd4a[_0x4ab12b(0x252)](_0x486a63);}),state[_0x4b4250(0x207)][_0x4b4250(0x252)](_0x4ffd4a),state[_0x4b4250(0x22d)]+=state['BATCH_SIZE'];}const styleSheet=document[a7_0x4a616d(0x24e)](a7_0x4a616d(0x24f));styleSheet[a7_0x4a616d(0x202)]=a7_0x4a616d(0x22e),document[a7_0x4a616d(0x287)][a7_0x4a616d(0x252)](styleSheet);function a7_0x57f9(_0x554881,_0x55dfef){_0x554881=_0x554881-0x1de;const _0x5928a3=a7_0x1980();let _0x16e182=_0x5928a3[_0x554881];return _0x16e182;}function toggleProduct(_0x4f9c29,_0xf4aac2){const _0x28475c=a7_0x4a616d;state[_0x28475c(0x270)]['has'](_0x4f9c29)?(state[_0x28475c(0x270)][_0x28475c(0x1df)](_0x4f9c29),_0xf4aac2['classList'][_0x28475c(0x1fc)](_0x28475c(0x270))):(state[_0x28475c(0x270)][_0x28475c(0x279)](_0x4f9c29),_0xf4aac2['classList'][_0x28475c(0x279)]('selected'));state[_0x28475c(0x249)]&&el[_0x28475c(0x254)]&&(el[_0x28475c(0x254)][_0x28475c(0x1ef)]=state[_0x28475c(0x270)][_0x28475c(0x26a)]>0x0?'–í—ã–±—Ä–∞—Ç—å':_0x28475c(0x26e),el[_0x28475c(0x254)][_0x28475c(0x24f)][_0x28475c(0x233)]=state[_0x28475c(0x270)][_0x28475c(0x26a)]>0x0?'600':_0x28475c(0x1e5));saveSelectionToCache(),updateSaveButton();if(state['activeCatId']&&!state[_0x28475c(0x249)])updateSelectAllBtn();}function updateSaveButton(){const _0xdce872=a7_0x4a616d;let _0x3e043e='';if(state[_0xdce872(0x235)]){const _0x44adc6=DataService[_0xdce872(0x1ed)](state[_0xdce872(0x235)]),_0x3826a9=_0x44adc6[_0xdce872(0x27a)](_0x3f20f2=>state['selected']['has'](_0x3f20f2['id']))[_0xdce872(0x1f2)];_0x3e043e=_0x3826a9>0x0?_0xdce872(0x265)+_0x3826a9+')':_0xdce872(0x26c),el[_0xdce872(0x260)][_0xdce872(0x20f)]['add'](_0xdce872(0x1f5)),el[_0xdce872(0x1f3)]['textContent']=_0x3e043e;return;}const _0x492b36=state[_0xdce872(0x270)]['size'];_0x3e043e='–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\x20('+_0x492b36+')',el[_0xdce872(0x1f3)][_0xdce872(0x1ef)]=_0x3e043e,isSelectionChanged()?el[_0xdce872(0x260)][_0xdce872(0x20f)][_0xdce872(0x279)](_0xdce872(0x1f5)):el['btnSave']['classList'][_0xdce872(0x1fc)](_0xdce872(0x1f5));}function updateSelectAllBtn(){const _0x5097d4=a7_0x4a616d;if(!state[_0x5097d4(0x235)])return;const _0x26d7a2=DataService[_0x5097d4(0x1ed)](state[_0x5097d4(0x235)]),_0x5f261d=_0x26d7a2[_0x5097d4(0x1f2)]>0x0&&_0x26d7a2[_0x5097d4(0x22c)](_0x2b95f4=>state[_0x5097d4(0x270)]['has'](_0x2b95f4['id']));el[_0x5097d4(0x222)][_0x5097d4(0x1ef)]=_0x5f261d?_0x5097d4(0x21f):_0x5097d4(0x21c),el[_0x5097d4(0x222)][_0x5097d4(0x1ea)]=()=>toggleAllInCategory(_0x26d7a2,!_0x5f261d);}function toggleAllInCategory(_0x5316e2,_0x40fbf3){const _0x45544b=a7_0x4a616d;haptic('medium'),_0x5316e2['forEach'](_0x329fa6=>{const _0x1d54a8=a7_0x57f9;if(_0x40fbf3)state['selected'][_0x1d54a8(0x279)](_0x329fa6['id']);else state[_0x1d54a8(0x270)][_0x1d54a8(0x1df)](_0x329fa6['id']);}),saveSelectionToCache(),startInfiniteRender(_0x5316e2,el[_0x45544b(0x244)]),updateSelectAllBtn(),updateSaveButton();}function handleSearch(_0x5c8f5d){const _0x430a0a=a7_0x4a616d,_0x423e12=_0x5c8f5d[_0x430a0a(0x27e)]['value'][_0x430a0a(0x245)]()[_0x430a0a(0x274)]();if(_0x423e12[_0x430a0a(0x1f2)]>0x0){if(!state[_0x430a0a(0x249)])enterSearchMode();const _0x455408=DataService[_0x430a0a(0x27c)](_0x423e12);el[_0x430a0a(0x221)][_0x430a0a(0x24f)][_0x430a0a(0x288)]='block',startInfiniteRender(_0x455408,el[_0x430a0a(0x221)],!![]);}else el[_0x430a0a(0x221)][_0x430a0a(0x21e)]='';}function clearSearch(){exitSearchMode();}async function saveSelection(){const _0x1563de=a7_0x4a616d;haptic(_0x1563de(0x21a));if(state[_0x1563de(0x235)]&&!state['searchMode']){goBack();return;}const _0x220992=el[_0x1563de(0x1f3)][_0x1563de(0x1ef)];el['saveBtnText'][_0x1563de(0x1ef)]=_0x1563de(0x23a),el[_0x1563de(0x260)][_0x1563de(0x24f)]['pointerEvents']=_0x1563de(0x24b);const _0x21021d=await DataService[_0x1563de(0x216)]();_0x21021d?(el[_0x1563de(0x1f3)][_0x1563de(0x1ef)]='–ì–æ—Ç–æ–≤–æ!',state['initialSelected']=new Set(state[_0x1563de(0x270)]),setTimeout(()=>{const _0x58d218=_0x1563de;el[_0x58d218(0x260)][_0x58d218(0x24f)][_0x58d218(0x278)]=_0x58d218(0x204),el[_0x58d218(0x1f3)][_0x58d218(0x1ef)]=_0x220992,updateSaveButton();if(state[_0x58d218(0x249)])exitSearchMode();},0x320)):(el[_0x1563de(0x1f3)]['textContent']=_0x1563de(0x289),setTimeout(()=>{const _0x563d5f=_0x1563de;el['btnSave'][_0x563d5f(0x24f)][_0x563d5f(0x278)]=_0x563d5f(0x204),el[_0x563d5f(0x1f3)][_0x563d5f(0x1ef)]=_0x220992;},0x7d0));}function enterSearchMode(){const _0x251257=a7_0x4a616d;state[_0x251257(0x249)]=!![];el[_0x251257(0x254)]&&(el[_0x251257(0x254)][_0x251257(0x1ef)]=_0x251257(0x26e),el['btnSearchCancel'][_0x251257(0x24f)][_0x251257(0x233)]=_0x251257(0x1e5));document[_0x251257(0x20c)][_0x251257(0x20f)][_0x251257(0x279)](_0x251257(0x1f7)),el['viewCats'][_0x251257(0x20f)][_0x251257(0x1fc)](_0x251257(0x22f)),el[_0x251257(0x1e9)][_0x251257(0x20f)][_0x251257(0x1fc)](_0x251257(0x22f)),el[_0x251257(0x286)][_0x251257(0x20f)]['add'](_0x251257(0x22f));if(tg)tg[_0x251257(0x264)][_0x251257(0x240)]();}function exitSearchMode(){const _0x40b85d=a7_0x4a616d;state[_0x40b85d(0x249)]=![],document['body'][_0x40b85d(0x20f)][_0x40b85d(0x1fc)](_0x40b85d(0x1f7)),el[_0x40b85d(0x214)][_0x40b85d(0x208)](),el['viewSearch'][_0x40b85d(0x20f)][_0x40b85d(0x1fc)](_0x40b85d(0x22f)),el[_0x40b85d(0x221)]['style'][_0x40b85d(0x288)]=_0x40b85d(0x24b),el[_0x40b85d(0x214)][_0x40b85d(0x25b)]='';if(state[_0x40b85d(0x235)])el[_0x40b85d(0x1e9)][_0x40b85d(0x20f)][_0x40b85d(0x279)](_0x40b85d(0x22f));else el[_0x40b85d(0x284)][_0x40b85d(0x20f)]['add'](_0x40b85d(0x22f)),renderCategories();updateSaveButton();}init();