const a7_0x107d6c=a7_0x4671;(function(_0x5c72de,_0x53744a){const _0x3a6bc0=a7_0x4671,_0x4ed7d1=_0x5c72de();while(!![]){try{const _0x585426=-parseInt(_0x3a6bc0(0x11a))/0x1+parseInt(_0x3a6bc0(0xe2))/0x2+-parseInt(_0x3a6bc0(0x187))/0x3+parseInt(_0x3a6bc0(0xe0))/0x4*(parseInt(_0x3a6bc0(0xf2))/0x5)+-parseInt(_0x3a6bc0(0x14a))/0x6*(parseInt(_0x3a6bc0(0x106))/0x7)+-parseInt(_0x3a6bc0(0xf5))/0x8+-parseInt(_0x3a6bc0(0x144))/0x9*(-parseInt(_0x3a6bc0(0xe8))/0xa);if(_0x585426===_0x53744a)break;else _0x4ed7d1['push'](_0x4ed7d1['shift']());}catch(_0xb13e33){_0x4ed7d1['push'](_0x4ed7d1['shift']());}}}(a7_0x6d38,0x72c60));const a7_0x43894a=(function(){let _0x427650=!![];return function(_0x36e108,_0x6e2899){const _0x20d81e=_0x427650?function(){const _0x3d1b5f=a7_0x4671;if(_0x6e2899){const _0x59af2a=_0x6e2899[_0x3d1b5f(0xf4)](_0x36e108,arguments);return _0x6e2899=null,_0x59af2a;}}:function(){};return _0x427650=![],_0x20d81e;};}()),a7_0x5747b0=a7_0x43894a(this,function(){const _0x15e40d=a7_0x4671;return a7_0x5747b0[_0x15e40d(0x147)]()['search'](_0x15e40d(0x189))[_0x15e40d(0x147)]()[_0x15e40d(0x153)](a7_0x5747b0)['search'](_0x15e40d(0x189));});a7_0x5747b0();const API_URL=a7_0x107d6c(0x18c),tg=window[a7_0x107d6c(0xf9)]?.['WebApp'],TG_INIT_DATA=tg?.['initData']||'';if(tg)try{tg[a7_0x107d6c(0x17d)](),tg[a7_0x107d6c(0x128)]();try{tg[a7_0x107d6c(0x184)](a7_0x107d6c(0x142));if(tg['setBackgroundColor'])tg[a7_0x107d6c(0x15c)]('#050505');if(tg[a7_0x107d6c(0x16d)])tg[a7_0x107d6c(0x16d)]();}catch(a7_0x16452d){console[a7_0x107d6c(0x135)](a7_0x107d6c(0x188),a7_0x16452d);}tg[a7_0x107d6c(0x13d)]&&(tg[a7_0x107d6c(0x13d)]['show'](),tg[a7_0x107d6c(0x13d)][a7_0x107d6c(0x105)](),tg['BackButton'][a7_0x107d6c(0xef)](()=>{const _0x371bad=a7_0x107d6c;if(state[_0x371bad(0x13f)])exitSearchMode();else state[_0x371bad(0x158)]?goBack():window[_0x371bad(0xf1)][_0x371bad(0x165)]=_0x371bad(0x192);}));}catch(a7_0x46b74a){console['error']('Critical\x20TMA\x20Error:',a7_0x46b74a);}function a7_0x4671(_0x4ef432,_0x120ec6){_0x4ef432=_0x4ef432-0xde;const _0x13a1a8=a7_0x6d38();let _0x5747b0=_0x13a1a8[_0x4ef432];return _0x5747b0;}const DataService={'categories':[],'productsMap':{},'serverVer':0x0,async 'init'(){const _0x1ff7d5=a7_0x107d6c,_0x4bc276=this['loadFromCache']();_0x4bc276&&(renderCategories(),hideLoader()),updateSaveButton(),await this[_0x1ff7d5(0x10a)]();},'loadFromCache'(){const _0x4c6804=a7_0x107d6c;try{const _0x170844=localStorage[_0x4c6804(0x117)](_0x4c6804(0x196));if(_0x170844){const _0x4bd072=JSON['parse'](_0x170844);this['categories']=_0x4bd072[_0x4c6804(0x10e)]||[],this[_0x4c6804(0x137)]=_0x4bd072[_0x4c6804(0x137)]||{},this[_0x4c6804(0x129)]=_0x4bd072['serverVer']||0x0;const _0x3c00b1=localStorage[_0x4c6804(0x117)](_0x4c6804(0x14f));if(_0x3c00b1){const _0x553201=JSON['parse'](_0x3c00b1);state[_0x4c6804(0x111)]=new Set(_0x553201),this['cleanupZombieProducts'](),state[_0x4c6804(0x113)]=new Set(state['selected']);}return!![];}}catch(_0x4944da){console[_0x4c6804(0x116)](_0x4944da);}return![];},async 'syncWithServer'(){const _0x1f8a5f=a7_0x107d6c;try{if(!API_URL[_0x1f8a5f(0x101)](_0x1f8a5f(0xfb))){console[_0x1f8a5f(0x135)](_0x1f8a5f(0xde)),hideLoader();return;}const _0x4bf820=await fetch(API_URL,{'method':_0x1f8a5f(0x169),'headers':{'Content-Type':_0x1f8a5f(0x11f)},'body':JSON[_0x1f8a5f(0x148)]({'action':'init','clientVer':this[_0x1f8a5f(0x129)],'initData':TG_INIT_DATA})}),_0x3f3fc0=await _0x4bf820[_0x1f8a5f(0x18b)]();_0x3f3fc0['ok']&&_0x3f3fc0[_0x1f8a5f(0x15e)]&&_0x3f3fc0[_0x1f8a5f(0x167)]&&this['processCatalog'](_0x3f3fc0[_0x1f8a5f(0x167)],_0x3f3fc0[_0x1f8a5f(0x129)]);if(_0x3f3fc0['ok']&&_0x3f3fc0[_0x1f8a5f(0x13a)])try{const _0x36b02a=JSON[_0x1f8a5f(0x179)](_0x3f3fc0[_0x1f8a5f(0x13a)]);state[_0x1f8a5f(0x111)]=new Set(_0x36b02a),this[_0x1f8a5f(0x108)](),state[_0x1f8a5f(0x113)]=new Set(state[_0x1f8a5f(0x111)]),saveSelectionToCache(),updateSaveButton(),renderCategories();}catch(_0x45e24f){}hideLoader();}catch(_0x26db64){console[_0x1f8a5f(0x135)](_0x1f8a5f(0x10c),_0x26db64),hideLoader();if(!DataService[_0x1f8a5f(0x10e)][_0x1f8a5f(0xfa)])alert(_0x1f8a5f(0xfd));}},'processCatalog'(_0x59a5b2,_0x37f9c7){const _0x4e95fa=a7_0x107d6c;this[_0x4e95fa(0x10e)]=_0x59a5b2[_0x4e95fa(0x10e)]['map'](_0x240039=>({'id':String(_0x240039['id']),'name':_0x240039[_0x4e95fa(0x156)],'icon':_0x240039[_0x4e95fa(0x18f)]}));const _0x135617={};this[_0x4e95fa(0x10e)][_0x4e95fa(0xee)](_0x45f864=>_0x135617[_0x45f864['id']]=[]),_0x59a5b2[_0x4e95fa(0x173)]&&Array['isArray'](_0x59a5b2[_0x4e95fa(0x173)])&&_0x59a5b2[_0x4e95fa(0x173)]['forEach'](_0x2afb6b=>{const _0x4c61e3=String(_0x2afb6b[0x0]),_0x26210d=String(_0x2afb6b[0x1]);if(!_0x135617[_0x26210d])_0x135617[_0x26210d]=[];_0x135617[_0x26210d]['push']({'id':_0x4c61e3,'name':_0x2afb6b[0x2],'meta':_0x2afb6b[0x3]});}),this[_0x4e95fa(0x137)]=_0x135617,this[_0x4e95fa(0x129)]=_0x37f9c7,localStorage[_0x4e95fa(0xeb)](_0x4e95fa(0x196),JSON[_0x4e95fa(0x148)]({'categories':this[_0x4e95fa(0x10e)],'productsMap':this[_0x4e95fa(0x137)],'serverVer':this[_0x4e95fa(0x129)]})),this[_0x4e95fa(0x108)](),renderCategories(),hideLoader();},'cleanupZombieProducts'(){const _0x48d85=a7_0x107d6c;if(!state['selected']||state['selected'][_0x48d85(0x13b)]===0x0)return;const _0x12db6f=new Set();Object[_0x48d85(0x145)](this[_0x48d85(0x137)])[_0x48d85(0x13c)]()[_0x48d85(0xee)](_0x105a1f=>_0x12db6f[_0x48d85(0x162)](_0x105a1f['id']));const _0x3cbf86=new Set();state[_0x48d85(0x111)][_0x48d85(0xee)](_0x7ce16c=>{const _0x4bdfa7=_0x48d85;_0x12db6f['has'](_0x7ce16c)&&_0x3cbf86[_0x4bdfa7(0x162)](_0x7ce16c);}),_0x3cbf86['size']!==state[_0x48d85(0x111)][_0x48d85(0x13b)]&&(console[_0x48d85(0x11c)](_0x48d85(0x17f)+(state['selected'][_0x48d85(0x13b)]-_0x3cbf86[_0x48d85(0x13b)])+_0x48d85(0xf7)),state[_0x48d85(0x111)]=_0x3cbf86,saveSelectionToCache());},'getProducts'(_0x1d357){const _0x4426dc=a7_0x107d6c;return this[_0x4426dc(0x137)][_0x1d357]||[];},'search'(_0x29b30e){const _0x5653f4=a7_0x107d6c,_0x569b4c=[],_0x18bd0e=_0x29b30e[_0x5653f4(0x13e)]();return Object['values'](this[_0x5653f4(0x137)])['flat']()[_0x5653f4(0xee)](_0x4cbb5a=>{const _0x20c633=_0x5653f4;if(_0x4cbb5a[_0x20c633(0x156)][_0x20c633(0x13e)]()['includes'](_0x18bd0e))_0x569b4c[_0x20c633(0x16c)](_0x4cbb5a);}),_0x569b4c;},async 'saveSelectionToServer'(){const _0x2c105a=a7_0x107d6c;this[_0x2c105a(0x108)](),saveSelectionToCache();try{return await fetch(API_URL,{'method':_0x2c105a(0x169),'headers':{'Content-Type':_0x2c105a(0x11f)},'body':JSON['stringify']({'action':_0x2c105a(0x183),'initData':TG_INIT_DATA,'selection':Array['from'](state[_0x2c105a(0x111)])})}),!![];}catch(_0x1ae514){return![];}}},state={'selected':new Set(),'initialSelected':new Set(),'activeCatId':null,'searchMode':![],'renderQueue':[],'renderIndex':0x0,'BATCH_SIZE':0x14,'currentContainer':null};function saveSelectionToCache(){const _0x54c481=a7_0x107d6c;try{localStorage[_0x54c481(0xeb)](_0x54c481(0x14f),JSON['stringify'](Array[_0x54c481(0x17c)](state[_0x54c481(0x111)])));}catch(_0xea5d4c){}}const el={'catGrid':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x146)),'productList':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x166)),'viewCats':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x177)),'viewList':document['getElementById'](a7_0x107d6c(0x14d)),'viewSearch':document[a7_0x107d6c(0x193)]('view-search'),'catTitle':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x15d)),'btnSelectAll':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x17b)),'searchInput':document['getElementById'](a7_0x107d6c(0x133)),'searchClear':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x103)),'searchResults':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x12d)),'btnSearchCancel':document['getElementById'](a7_0x107d6c(0x114)),'btnSave':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x143)),'saveBtnText':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x132)),'sentinel':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x172)),'loader':document[a7_0x107d6c(0x193)](a7_0x107d6c(0x149))};function hideLoader(){const _0x3b2dbc=a7_0x107d6c;el[_0x3b2dbc(0x119)][_0x3b2dbc(0x124)][_0x3b2dbc(0x162)](_0x3b2dbc(0x15b));}function haptic(_0x1ceb70='light'){const _0x814acf=a7_0x107d6c;try{const _0x478f7c=window[_0x814acf(0xf9)]?.[_0x814acf(0x104)]?.[_0x814acf(0x115)];if(_0x478f7c)_0x1ceb70===_0x814acf(0x180)?_0x478f7c[_0x814acf(0x12a)]('light'):_0x1ceb70===_0x814acf(0x14e)?_0x478f7c[_0x814acf(0x12a)](_0x814acf(0x14e)):_0x478f7c[_0x814acf(0x109)](_0x814acf(0xe1));}catch(_0x316b91){}}const bump=_0x331f83=>{const _0x5d9e5c=a7_0x107d6c;if(!_0x331f83)return;_0x331f83[_0x5d9e5c(0x124)][_0x5d9e5c(0x140)](_0x5d9e5c(0x182)),void _0x331f83[_0x5d9e5c(0xf0)],_0x331f83['classList'][_0x5d9e5c(0x162)](_0x5d9e5c(0x182));};document[a7_0x107d6c(0x171)](a7_0x107d6c(0x164),_0x48ba4f=>{const _0x56b163=a7_0x107d6c,_0x592bd9=_0x48ba4f[_0x56b163(0x18d)][_0x56b163(0x136)](_0x56b163(0x195));if(!_0x592bd9)return;haptic('light'),bump(_0x592bd9);},{'passive':!![]});function a7_0x6d38(){const _0x48a766=['view-cats','opacity','parse','transform','btnSelectAll','from','ready','viewCats','üßπ\x20Removed\x20','light','viewList','bump','save','setHeaderColor','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','search','1669278NzauWF','Color/Swipe\x20settings\x20error:','(((.+)+)+)+$','pointerEvents','json','https://script.google.com/macros/s/AKfycbybxqI4xOLAUOcMXGReNl0PVjGToGg6_x3ZxlKNnUHg3XcaZGhkbsu61Adgkb4emrkm/exec','target','fadeInUp\x200.2s\x20ease\x20forwards\x20','icon','animation','boxShadow','router.html','getElementById','appendChild','.cat-card,\x20.btn-save','ultima_data_v2','No\x20API\x20URL','innerHeight','1808dpSKjh','success','712182ZkppFm','createElement','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-meta\x22>','find','input','600','3530OmFzVV','–û—à–∏–±–∫–∞!','meta','setItem','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22check-square\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-name\x22>','height','forEach','onClick','offsetWidth','location','5935mzwueE','show','apply','2565224fvqEyc','delete','\x20zombie\x20products','renderQueue','Telegram','length','script.google.com','saveSelectionToServer','–û—à–∏–±–∫–∞\x20–∑–∞–≥—Ä—É–∑–∫–∏\x20–¥–∞–Ω–Ω—ã—Ö.\x20–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–∏–Ω—Ç–µ—Ä–Ω–µ—Ç.','block','<div\x20class=\x22simple-no-results\x22>–ù–∏—á–µ–≥–æ\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω–æ</div>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','includes','.fx-layer','searchClear','WebApp','offClick','28966XOjWZG','display','cleanupZombieProducts','notificationOccurred','syncWithServer','fontWeight','Sync\x20skipped:','prev','categories','cat-card','renderIndex','selected','\x20–∏–∑\x20','initialSelected','btnSearchCancel','HapticFeedback','error','getItem','–í—ã–±—Ä–∞—Ç—å','loader','666351tipPMw','transparent','log','cssText','active','text/plain;charset=utf-8','className','500','–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\x20(','init','classList','trim','style','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-name\x22>','expand','serverVer','impactOccurred','none','textContent','searchResults','div','innerHTML','auto','–ù–∞–∑–∞–¥','saveBtnText','searchInput','viewSearch','warn','closest','productsMap','BATCH_SIZE','getProducts','userSelection','size','flat','BackButton','toLowerCase','searchMode','remove','filter','#050505','btnSave','37863qGnaKC','values','catGrid','toString','stringify','appLoader','528pXMCTv','body','–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...','view-list','medium','ultima_cart_v1','every','isIntersecting','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x20100%\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-icon\x22>','constructor','value','resize','name','click','activeCatId','onclick','blur','hidden','setBackgroundColor','catTitle','needUpdate','@keyframes\x20fadeInUp\x20{\x20to\x20{\x20opacity:\x201;\x20transform:\x20translateY(0);\x20}\x20}','border','product-list-container','add','innerWidth','touchstart','href','productList','catalog','–û—Ç–º–µ–Ω–∞','POST','visible','200px','push','disableVerticalSwipes','currentContainer','innerText','has','addEventListener','sentinel','products','slice','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mini-track\x22><div\x20class=\x22mini-fill\x22\x20style=\x22width:\x20','background'];a7_0x6d38=function(){return _0x48a766;};return a7_0x6d38();}function isSelectionChanged(){const _0x526024=a7_0x107d6c;if(state[_0x526024(0x111)][_0x526024(0x13b)]!==state[_0x526024(0x113)][_0x526024(0x13b)])return!![];for(let _0x2de78f of state[_0x526024(0x111)]){if(!state[_0x526024(0x113)][_0x526024(0x170)](_0x2de78f))return!![];}return![];}function init(){const _0x1b139c=a7_0x107d6c;let _0x315e18=window[_0x1b139c(0x163)];const _0x20fcdc=document['querySelector'](_0x1b139c(0x102)),_0x56c1d5=()=>{const _0x5e6dd4=_0x1b139c;_0x20fcdc['style'][_0x5e6dd4(0xed)]=window[_0x5e6dd4(0xdf)]+'px',_0x315e18=window[_0x5e6dd4(0x163)];};_0x56c1d5(),window[_0x1b139c(0x171)](_0x1b139c(0x155),()=>{const _0xe0edc7=_0x1b139c;if(window[_0xe0edc7(0x163)]!==_0x315e18)_0x56c1d5();}),DataService[_0x1b139c(0x123)](),el[_0x1b139c(0x133)][_0x1b139c(0x171)](_0x1b139c(0xe6),handleSearch),el['searchClear']['addEventListener'](_0x1b139c(0x157),clearSearch);if(tg)tg[_0x1b139c(0x13d)][_0x1b139c(0xf3)]();const _0x251655=new IntersectionObserver(_0x26824b=>{const _0xfd00d4=_0x1b139c;if(_0x26824b[0x0][_0xfd00d4(0x151)])renderNextBatch();},{'rootMargin':_0x1b139c(0x16b)});_0x251655['observe'](el[_0x1b139c(0x172)]);}function renderCategories(){const _0x3f1cd6=a7_0x107d6c;el[_0x3f1cd6(0x146)][_0x3f1cd6(0x12f)]='',DataService[_0x3f1cd6(0x10e)][_0x3f1cd6(0xee)](_0x1103ab=>{const _0x39ec90=_0x3f1cd6,_0x2eea52=DataService[_0x39ec90(0x139)](_0x1103ab['id']),_0x2148f5=_0x2eea52[_0x39ec90(0xfa)],_0x5daee9=_0x2eea52[_0x39ec90(0x141)](_0x12c4e7=>state[_0x39ec90(0x111)][_0x39ec90(0x170)](_0x12c4e7['id']))[_0x39ec90(0xfa)],_0x3f3740=_0x2148f5>0x0?_0x5daee9/_0x2148f5*0x64:0x0,_0x41e3b3=document[_0x39ec90(0xe3)](_0x39ec90(0x12e));_0x41e3b3[_0x39ec90(0x120)]=_0x39ec90(0x10f),_0x41e3b3[_0x39ec90(0x159)]=()=>openCategory(_0x1103ab['id']),_0x41e3b3[_0x39ec90(0x12f)]=_0x39ec90(0x152)+_0x1103ab['icon']+_0x39ec90(0x127)+_0x1103ab[_0x39ec90(0x156)]+_0x39ec90(0x100)+_0x5daee9+_0x39ec90(0x112)+_0x2148f5+_0x39ec90(0x175)+_0x3f3740+'%\x22></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20',el[_0x39ec90(0x146)][_0x39ec90(0x194)](_0x41e3b3);});}function openCategory(_0x5762a5){const _0x2f84f0=a7_0x107d6c;state['activeCatId']=_0x5762a5;const _0x3876ec=DataService[_0x2f84f0(0x10e)][_0x2f84f0(0xe5)](_0x175728=>_0x175728['id']===_0x5762a5);el[_0x2f84f0(0x15d)][_0x2f84f0(0x12c)]=_0x3876ec[_0x2f84f0(0x156)],el[_0x2f84f0(0x166)]['style']['display']='flex';const _0x51ca60=DataService[_0x2f84f0(0x139)](_0x5762a5);startInfiniteRender(_0x51ca60,el[_0x2f84f0(0x166)]),updateSelectAllBtn(),el['viewCats'][_0x2f84f0(0x124)][_0x2f84f0(0x162)](_0x2f84f0(0x10d)),el['viewCats'][_0x2f84f0(0x124)]['remove'](_0x2f84f0(0x11e)),el[_0x2f84f0(0x181)][_0x2f84f0(0x124)][_0x2f84f0(0x162)](_0x2f84f0(0x11e)),el[_0x2f84f0(0x181)]['classList'][_0x2f84f0(0x140)]('next'),updateSaveButton();if(tg)tg[_0x2f84f0(0x13d)][_0x2f84f0(0xf3)]();}function goBack(){const _0x348cc8=a7_0x107d6c;state[_0x348cc8(0x158)]=null,el[_0x348cc8(0x181)]['classList'][_0x348cc8(0x140)](_0x348cc8(0x11e)),el[_0x348cc8(0x17e)][_0x348cc8(0x124)][_0x348cc8(0x162)](_0x348cc8(0x11e)),el['viewCats'][_0x348cc8(0x124)][_0x348cc8(0x140)](_0x348cc8(0x10d)),setTimeout(renderCategories,0x12c),updateSaveButton();if(tg)tg[_0x348cc8(0x13d)][_0x348cc8(0xf3)]();}function startInfiniteRender(_0x6ebb73,_0x4c4f0c,_0x30d1ab=![]){const _0x5d6588=a7_0x107d6c;_0x4c4f0c[_0x5d6588(0x12f)]='',_0x4c4f0c['style'][_0x5d6588(0x11d)]='';if(_0x6ebb73['length']===0x0&&_0x30d1ab){_0x4c4f0c[_0x5d6588(0x12f)]=_0x5d6588(0xff);return;}state[_0x5d6588(0xf8)]=_0x6ebb73,state['renderIndex']=0x0;let _0x44ce4f=_0x4c4f0c;if(_0x30d1ab){const _0x569b65=document[_0x5d6588(0xe3)](_0x5d6588(0x12e));_0x569b65[_0x5d6588(0x120)]=_0x5d6588(0x161),_0x569b65[_0x5d6588(0x126)][_0x5d6588(0x176)]=_0x5d6588(0x11b),_0x569b65[_0x5d6588(0x126)][_0x5d6588(0x160)]=_0x5d6588(0x12b),_0x569b65['style'][_0x5d6588(0x191)]='none',_0x4c4f0c['appendChild'](_0x569b65),_0x44ce4f=_0x569b65;}state[_0x5d6588(0x16e)]=_0x44ce4f,renderNextBatch(_0x30d1ab);}function renderNextBatch(_0x38dcac=![]){const _0x58bb6e=a7_0x107d6c;if(state[_0x58bb6e(0x110)]>=state['renderQueue']['length'])return;const _0x5d215b=state[_0x58bb6e(0xf8)][_0x58bb6e(0x174)](state[_0x58bb6e(0x110)],state[_0x58bb6e(0x110)]+state[_0x58bb6e(0x138)]),_0x55bf0f=document['createDocumentFragment']();_0x5d215b[_0x58bb6e(0xee)]((_0x432b9e,_0x2e47c3)=>{const _0x40fffa=_0x58bb6e,_0x56d044=state[_0x40fffa(0x111)][_0x40fffa(0x170)](_0x432b9e['id']),_0x12ac84=document[_0x40fffa(0xe3)]('div');_0x12ac84['className']='product-row\x20'+(_0x56d044?_0x40fffa(0x111):''),_0x12ac84[_0x40fffa(0x171)]('touchstart',()=>haptic(_0x40fffa(0x180)),{'passive':!![]}),_0x12ac84[_0x40fffa(0x159)]=()=>toggleProduct(_0x432b9e['id'],_0x12ac84),!_0x38dcac&&(_0x12ac84[_0x40fffa(0x126)][_0x40fffa(0x178)]='0',_0x12ac84['style'][_0x40fffa(0x190)]=_0x40fffa(0x18e)+_0x2e47c3*0.02+'s',setTimeout(()=>{const _0x4fd20f=_0x40fffa;_0x12ac84['style'][_0x4fd20f(0x178)]='1',_0x12ac84[_0x4fd20f(0x126)]['animation']=_0x4fd20f(0x12b),_0x12ac84[_0x4fd20f(0x126)][_0x4fd20f(0x17a)]=_0x4fd20f(0x12b);},_0x2e47c3*0x14+0x12c)),_0x12ac84[_0x40fffa(0x12f)]=_0x40fffa(0xec)+_0x432b9e[_0x40fffa(0x156)]+_0x40fffa(0xe4)+_0x432b9e[_0x40fffa(0xea)]+_0x40fffa(0x185),_0x55bf0f[_0x40fffa(0x194)](_0x12ac84);}),state['currentContainer'][_0x58bb6e(0x194)](_0x55bf0f),state['renderIndex']+=state['BATCH_SIZE'];}const styleSheet=document[a7_0x107d6c(0xe3)](a7_0x107d6c(0x126));styleSheet[a7_0x107d6c(0x16f)]=a7_0x107d6c(0x15f),document['head'][a7_0x107d6c(0x194)](styleSheet);function toggleProduct(_0x4fdfc7,_0x55832f){const _0x2ea05e=a7_0x107d6c;state[_0x2ea05e(0x111)][_0x2ea05e(0x170)](_0x4fdfc7)?(state[_0x2ea05e(0x111)][_0x2ea05e(0xf6)](_0x4fdfc7),_0x55832f[_0x2ea05e(0x124)]['remove']('selected')):(state[_0x2ea05e(0x111)][_0x2ea05e(0x162)](_0x4fdfc7),_0x55832f[_0x2ea05e(0x124)]['add'](_0x2ea05e(0x111)));state[_0x2ea05e(0x13f)]&&el[_0x2ea05e(0x114)]&&(el[_0x2ea05e(0x114)]['textContent']=state[_0x2ea05e(0x111)][_0x2ea05e(0x13b)]>0x0?_0x2ea05e(0x118):_0x2ea05e(0x168),el['btnSearchCancel'][_0x2ea05e(0x126)][_0x2ea05e(0x10b)]=state[_0x2ea05e(0x111)]['size']>0x0?_0x2ea05e(0xe7):_0x2ea05e(0x121));saveSelectionToCache(),updateSaveButton();if(state[_0x2ea05e(0x158)]&&!state['searchMode'])updateSelectAllBtn();}function updateSaveButton(){const _0x4fda6f=a7_0x107d6c;let _0x4673ad='';if(state['activeCatId']){const _0x31e0cf=DataService['getProducts'](state[_0x4fda6f(0x158)]),_0x411e9e=_0x31e0cf['filter'](_0x5cfa0e=>state[_0x4fda6f(0x111)]['has'](_0x5cfa0e['id']))[_0x4fda6f(0xfa)];_0x4673ad=_0x411e9e>0x0?'–í—ã–±—Ä–∞—Ç—å\x20('+_0x411e9e+')':_0x4fda6f(0x131),el[_0x4fda6f(0x143)][_0x4fda6f(0x124)]['add']('visible'),el[_0x4fda6f(0x132)][_0x4fda6f(0x12c)]=_0x4673ad;return;}const _0x3d6dda=state[_0x4fda6f(0x111)]['size'];_0x4673ad=_0x4fda6f(0x122)+_0x3d6dda+')',el[_0x4fda6f(0x132)][_0x4fda6f(0x12c)]=_0x4673ad,isSelectionChanged()?el[_0x4fda6f(0x143)][_0x4fda6f(0x124)][_0x4fda6f(0x162)](_0x4fda6f(0x16a)):el['btnSave'][_0x4fda6f(0x124)][_0x4fda6f(0x140)]('visible');}function updateSelectAllBtn(){const _0x480270=a7_0x107d6c;if(!state['activeCatId'])return;const _0x3d3201=DataService[_0x480270(0x139)](state[_0x480270(0x158)]),_0x23fd0d=_0x3d3201[_0x480270(0xfa)]>0x0&&_0x3d3201[_0x480270(0x150)](_0x1ee0cb=>state[_0x480270(0x111)][_0x480270(0x170)](_0x1ee0cb['id']));el[_0x480270(0x17b)]['textContent']=_0x23fd0d?'–°–Ω—è—Ç—å\x20–≤—Å—ë':'–í—ã–±—Ä–∞—Ç—å\x20–≤—Å—ë',el[_0x480270(0x17b)][_0x480270(0x159)]=()=>toggleAllInCategory(_0x3d3201,!_0x23fd0d);}function toggleAllInCategory(_0x419e95,_0x44f4fd){const _0x41536d=a7_0x107d6c;haptic(_0x41536d(0x14e)),_0x419e95[_0x41536d(0xee)](_0x168d50=>{const _0x92dc2e=_0x41536d;if(_0x44f4fd)state[_0x92dc2e(0x111)][_0x92dc2e(0x162)](_0x168d50['id']);else state[_0x92dc2e(0x111)][_0x92dc2e(0xf6)](_0x168d50['id']);}),saveSelectionToCache(),startInfiniteRender(_0x419e95,el[_0x41536d(0x166)]),updateSelectAllBtn(),updateSaveButton();}function handleSearch(_0x131ea4){const _0x5376cc=a7_0x107d6c,_0x188ea3=_0x131ea4[_0x5376cc(0x18d)][_0x5376cc(0x154)][_0x5376cc(0x13e)]()[_0x5376cc(0x125)]();if(_0x188ea3['length']>0x0){if(!state[_0x5376cc(0x13f)])enterSearchMode();const _0x446542=DataService[_0x5376cc(0x186)](_0x188ea3);el['searchResults'][_0x5376cc(0x126)][_0x5376cc(0x107)]=_0x5376cc(0xfe),startInfiniteRender(_0x446542,el[_0x5376cc(0x12d)],!![]);}else el[_0x5376cc(0x12d)][_0x5376cc(0x12f)]='';}function clearSearch(){exitSearchMode();}async function saveSelection(){const _0x9dc5c1=a7_0x107d6c;haptic(_0x9dc5c1(0x14e));if(state[_0x9dc5c1(0x158)]&&!state[_0x9dc5c1(0x13f)]){goBack();return;}const _0x3a8c43=el[_0x9dc5c1(0x132)][_0x9dc5c1(0x12c)];el[_0x9dc5c1(0x132)]['textContent']=_0x9dc5c1(0x14c),el[_0x9dc5c1(0x143)][_0x9dc5c1(0x126)][_0x9dc5c1(0x18a)]=_0x9dc5c1(0x12b);const _0x181881=await DataService[_0x9dc5c1(0xfc)]();_0x181881?(el[_0x9dc5c1(0x132)][_0x9dc5c1(0x12c)]='–ì–æ—Ç–æ–≤–æ!',state[_0x9dc5c1(0x113)]=new Set(state[_0x9dc5c1(0x111)]),setTimeout(()=>{const _0x5cf76a=_0x9dc5c1;el[_0x5cf76a(0x143)]['style'][_0x5cf76a(0x18a)]=_0x5cf76a(0x130),el[_0x5cf76a(0x132)][_0x5cf76a(0x12c)]=_0x3a8c43,updateSaveButton();if(state[_0x5cf76a(0x13f)])exitSearchMode();},0x320)):(el[_0x9dc5c1(0x132)][_0x9dc5c1(0x12c)]=_0x9dc5c1(0xe9),setTimeout(()=>{const _0x65231a=_0x9dc5c1;el['btnSave'][_0x65231a(0x126)]['pointerEvents']=_0x65231a(0x130),el[_0x65231a(0x132)]['textContent']=_0x3a8c43;},0x7d0));}function enterSearchMode(){const _0x2ea7ab=a7_0x107d6c;state[_0x2ea7ab(0x13f)]=!![];el[_0x2ea7ab(0x114)]&&(el['btnSearchCancel'][_0x2ea7ab(0x12c)]=_0x2ea7ab(0x168),el[_0x2ea7ab(0x114)][_0x2ea7ab(0x126)][_0x2ea7ab(0x10b)]=_0x2ea7ab(0x121));document[_0x2ea7ab(0x14b)][_0x2ea7ab(0x124)]['add']('search-active'),el[_0x2ea7ab(0x17e)][_0x2ea7ab(0x124)][_0x2ea7ab(0x140)](_0x2ea7ab(0x11e)),el[_0x2ea7ab(0x181)]['classList'][_0x2ea7ab(0x140)]('active'),el[_0x2ea7ab(0x134)][_0x2ea7ab(0x124)][_0x2ea7ab(0x162)]('active');if(tg)tg[_0x2ea7ab(0x13d)][_0x2ea7ab(0xf3)]();}function exitSearchMode(){const _0x5bd248=a7_0x107d6c;state[_0x5bd248(0x13f)]=![],document[_0x5bd248(0x14b)][_0x5bd248(0x124)]['remove']('search-active'),el[_0x5bd248(0x133)][_0x5bd248(0x15a)](),el['viewSearch']['classList'][_0x5bd248(0x140)](_0x5bd248(0x11e)),el[_0x5bd248(0x12d)][_0x5bd248(0x126)][_0x5bd248(0x107)]=_0x5bd248(0x12b),el['searchInput'][_0x5bd248(0x154)]='';if(state[_0x5bd248(0x158)])el[_0x5bd248(0x181)]['classList']['add'](_0x5bd248(0x11e));else el['viewCats'][_0x5bd248(0x124)][_0x5bd248(0x162)](_0x5bd248(0x11e)),renderCategories();updateSaveButton();}init();