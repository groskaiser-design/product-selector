const a7_0x5547d6=a7_0x5c26;(function(_0x21931f,_0x5abbae){const _0x3ed539=a7_0x5c26,_0x1a1569=_0x21931f();while(!![]){try{const _0x4c82eb=-parseInt(_0x3ed539(0xd3))/0x1+parseInt(_0x3ed539(0xcb))/0x2+-parseInt(_0x3ed539(0x10e))/0x3*(parseInt(_0x3ed539(0xad))/0x4)+parseInt(_0x3ed539(0xe5))/0x5*(-parseInt(_0x3ed539(0xa3))/0x6)+-parseInt(_0x3ed539(0xb1))/0x7*(parseInt(_0x3ed539(0x107))/0x8)+parseInt(_0x3ed539(0x99))/0x9*(-parseInt(_0x3ed539(0xfc))/0xa)+-parseInt(_0x3ed539(0x94))/0xb*(-parseInt(_0x3ed539(0x123))/0xc);if(_0x4c82eb===_0x5abbae)break;else _0x1a1569['push'](_0x1a1569['shift']());}catch(_0x3ef0b1){_0x1a1569['push'](_0x1a1569['shift']());}}}(a7_0x3e44,0x1f799));function a7_0x5c26(_0x29f36f,_0x4c1528){_0x29f36f=_0x29f36f-0x7f;const _0x121f5c=a7_0x3e44();let _0x228cd3=_0x121f5c[_0x29f36f];return _0x228cd3;}const a7_0x569ddd=(function(){let _0x2d55a2=!![];return function(_0x4d20c8,_0x5bc7b7){const _0xa0027=_0x2d55a2?function(){if(_0x5bc7b7){const _0x3f3368=_0x5bc7b7['apply'](_0x4d20c8,arguments);return _0x5bc7b7=null,_0x3f3368;}}:function(){};return _0x2d55a2=![],_0xa0027;};}()),a7_0x228cd3=a7_0x569ddd(this,function(){const _0x20b506=a7_0x5c26;return a7_0x228cd3[_0x20b506(0xca)]()[_0x20b506(0xb8)]('(((.+)+)+)+$')[_0x20b506(0xca)]()[_0x20b506(0x103)](a7_0x228cd3)['search']('(((.+)+)+)+$');});a7_0x228cd3();const API_URL=a7_0x5547d6(0xf3),tg=window[a7_0x5547d6(0xdc)]?.[a7_0x5547d6(0xf4)],TG_INIT_DATA=tg?.[a7_0x5547d6(0xe0)]||'';if(tg)try{tg[a7_0x5547d6(0x8e)](),tg[a7_0x5547d6(0xe1)]();try{tg[a7_0x5547d6(0xc9)](a7_0x5547d6(0x106));if(tg['setBackgroundColor'])tg[a7_0x5547d6(0xaf)](a7_0x5547d6(0x106));if(tg[a7_0x5547d6(0x112)])tg[a7_0x5547d6(0x112)]();}catch(a7_0x10eba2){console[a7_0x5547d6(0xac)]('Color/Swipe\x20settings\x20error:',a7_0x10eba2);}tg[a7_0x5547d6(0x89)]&&(tg[a7_0x5547d6(0x89)][a7_0x5547d6(0x11e)](),tg[a7_0x5547d6(0x89)][a7_0x5547d6(0xa8)](),tg[a7_0x5547d6(0x89)][a7_0x5547d6(0x96)](()=>{const _0x3ae117=a7_0x5547d6;if(state[_0x3ae117(0xf6)])exitSearchMode();else state[_0x3ae117(0x102)]?goBack():window[_0x3ae117(0xb9)][_0x3ae117(0xe6)]=_0x3ae117(0xf9);}));}catch(a7_0x3cfbc7){console['error'](a7_0x5547d6(0x130),a7_0x3cfbc7);}const DataService={'categories':[],'productsMap':{},'serverVer':0x0,async 'init'(){const _0x37507d=a7_0x5547d6,_0x38dd6e=this[_0x37507d(0x84)]();_0x38dd6e&&(renderCategories(),hideLoader()),updateSaveButton(),await this[_0x37507d(0xda)]();},'loadFromCache'(){const _0x5ce196=a7_0x5547d6;try{const _0x2979f1=localStorage[_0x5ce196(0x127)](_0x5ce196(0xba));if(_0x2979f1){const _0x301896=JSON['parse'](_0x2979f1);this['categories']=_0x301896['categories']||[],this[_0x5ce196(0x9e)]=_0x301896[_0x5ce196(0x9e)]||{},this[_0x5ce196(0xa5)]=_0x301896[_0x5ce196(0xa5)]||0x0;const _0x3db827=localStorage[_0x5ce196(0x127)](_0x5ce196(0xff));if(_0x3db827){const _0x12a89f=JSON[_0x5ce196(0xec)](_0x3db827);state[_0x5ce196(0x116)]=new Set(_0x12a89f),this[_0x5ce196(0x113)](),state[_0x5ce196(0x98)]=new Set(state['selected']);}return!![];}}catch(_0x443d04){console[_0x5ce196(0x90)](_0x443d04);}return![];},async 'syncWithServer'(){const _0x5be878=a7_0x5547d6;try{if(!API_URL['includes'](_0x5be878(0x9a))){console['warn'](_0x5be878(0xe7)),hideLoader();return;}const _0x154efe=await fetch(API_URL,{'method':_0x5be878(0x8a),'headers':{'Content-Type':_0x5be878(0xd1)},'body':JSON['stringify']({'action':'init','clientVer':this['serverVer'],'initData':TG_INIT_DATA})}),_0x573294=await _0x154efe[_0x5be878(0x11a)]();_0x573294['ok']&&_0x573294[_0x5be878(0xbf)]&&_0x573294[_0x5be878(0xb5)]&&this[_0x5be878(0xaa)](_0x573294[_0x5be878(0xb5)],_0x573294[_0x5be878(0xa5)]);if(_0x573294['ok']&&_0x573294['userSelection'])try{const _0x59a6e6=JSON[_0x5be878(0xec)](_0x573294['userSelection']);state[_0x5be878(0x116)]=new Set(_0x59a6e6),this['cleanupZombieProducts'](),state['initialSelected']=new Set(state[_0x5be878(0x116)]),saveSelectionToCache(),updateSaveButton(),renderCategories();}catch(_0x1796bd){}hideLoader();}catch(_0x4a6bb6){console[_0x5be878(0xac)]('Sync\x20skipped:',_0x4a6bb6),hideLoader();if(!DataService[_0x5be878(0x86)][_0x5be878(0xd2)])alert('–û—à–∏–±–∫–∞\x20–∑–∞–≥—Ä—É–∑–∫–∏\x20–¥–∞–Ω–Ω—ã—Ö.\x20–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–∏–Ω—Ç–µ—Ä–Ω–µ—Ç.');}},'processCatalog'(_0x1a7a8b,_0x54196e){const _0x46c00f=a7_0x5547d6;this[_0x46c00f(0x86)]=_0x1a7a8b[_0x46c00f(0x86)][_0x46c00f(0xd5)](_0xe88ba1=>({'id':String(_0xe88ba1['id']),'name':_0xe88ba1['name'],'icon':_0xe88ba1[_0x46c00f(0x87)]}));const _0x2a8d81={};this['categories']['forEach'](_0x54b877=>_0x2a8d81[_0x54b877['id']]=[]),_0x1a7a8b[_0x46c00f(0xb0)]&&Array[_0x46c00f(0x83)](_0x1a7a8b[_0x46c00f(0xb0)])&&_0x1a7a8b['products']['forEach'](_0x5b6bfe=>{const _0xe5a0d7=String(_0x5b6bfe[0x0]),_0x54d97e=String(_0x5b6bfe[0x1]);if(!_0x2a8d81[_0x54d97e])_0x2a8d81[_0x54d97e]=[];_0x2a8d81[_0x54d97e]['push']({'id':_0xe5a0d7,'name':_0x5b6bfe[0x2],'meta':_0x5b6bfe[0x3]});}),this[_0x46c00f(0x9e)]=_0x2a8d81,this[_0x46c00f(0xa5)]=_0x54196e,localStorage[_0x46c00f(0xe3)]('ultima_data_v2',JSON['stringify']({'categories':this['categories'],'productsMap':this[_0x46c00f(0x9e)],'serverVer':this[_0x46c00f(0xa5)]})),this[_0x46c00f(0x113)](),renderCategories(),hideLoader();},'cleanupZombieProducts'(){const _0x49d097=a7_0x5547d6;if(!state[_0x49d097(0x116)]||state[_0x49d097(0x116)]['size']===0x0)return;const _0x1a3b5b=new Set();Object[_0x49d097(0xd7)](this[_0x49d097(0x9e)])[_0x49d097(0x92)]()['forEach'](_0x4125ed=>_0x1a3b5b[_0x49d097(0xd9)](_0x4125ed['id']));const _0x529ce4=new Set();state[_0x49d097(0x116)][_0x49d097(0xbd)](_0x5c39ae=>{const _0x30e551=_0x49d097;_0x1a3b5b[_0x30e551(0xf0)](_0x5c39ae)&&_0x529ce4[_0x30e551(0xd9)](_0x5c39ae);}),_0x529ce4['size']!==state[_0x49d097(0x116)][_0x49d097(0x126)]&&(console['log'](_0x49d097(0x110)+(state[_0x49d097(0x116)][_0x49d097(0x126)]-_0x529ce4['size'])+_0x49d097(0x132)),state['selected']=_0x529ce4,saveSelectionToCache());},'getProducts'(_0x355d48){const _0x28a533=a7_0x5547d6;return this[_0x28a533(0x9e)][_0x355d48]||[];},'search'(_0x5d15f3){const _0x25c40b=a7_0x5547d6,_0x174608=[],_0x197b23=_0x5d15f3[_0x25c40b(0xa6)]();return Object[_0x25c40b(0xd7)](this[_0x25c40b(0x9e)])[_0x25c40b(0x92)]()[_0x25c40b(0xbd)](_0x313ce2=>{const _0xf1b39=_0x25c40b;if(_0x313ce2[_0xf1b39(0x9d)][_0xf1b39(0xa6)]()['includes'](_0x197b23))_0x174608[_0xf1b39(0x10c)](_0x313ce2);}),_0x174608;},async 'saveSelectionToServer'(){const _0x3415a9=a7_0x5547d6;this['cleanupZombieProducts'](),saveSelectionToCache();try{return await fetch(API_URL,{'method':_0x3415a9(0x8a),'headers':{'Content-Type':'text/plain;charset=utf-8'},'body':JSON[_0x3415a9(0xb4)]({'action':_0x3415a9(0xab),'initData':TG_INIT_DATA,'selection':Array[_0x3415a9(0x8c)](state[_0x3415a9(0x116)])})}),!![];}catch(_0x17607d){return![];}}},state={'selected':new Set(),'initialSelected':new Set(),'activeCatId':null,'searchMode':![],'renderQueue':[],'renderIndex':0x0,'BATCH_SIZE':0x14,'currentContainer':null};function a7_0x3e44(){const _0x584b3a=['innerHeight','blur','text/plain;charset=utf-8','length','243018KQQDSg','className','map','fadeInUp\x200.2s\x20ease\x20forwards\x20','values','delete','add','syncWithServer','closest','Telegram','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mini-track\x22><div\x20class=\x22mini-fill\x22\x20style=\x22width:\x20','–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...','border','initData','expand','createElement','setItem','observe','40dHMNOT','href','No\x20API\x20URL','product-row\x20','find','remove','product-list-container','parse','onclick','innerText','catGrid','has','saveBtnText','every','https://script.google.com/macros/s/AKfycbybxqI4xOLAUOcMXGReNl0PVjGToGg6_x3ZxlKNnUHg3XcaZGhkbsu61Adgkb4emrkm/exec','WebApp','block','searchMode','height','isIntersecting','router.html','touchstart','viewCats','10ucQwph','querySelector','view-cats','ultima_cart_v1','view-list','–ì–æ—Ç–æ–≤–æ!','activeCatId','constructor','innerWidth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-name\x22>','#050505','32PzDRbt','fontWeight','prev','getElementById','value','push','renderQueue','12354qNsWoj','addEventListener','üßπ\x20Removed\x20','innerHTML','disableVerticalSwipes','cleanupZombieProducts','BATCH_SIZE','getProducts','selected','catTitle','loader','btnSearchCancel','json','bump','medium','<div\x20class=\x22simple-no-results\x22>–ù–∏—á–µ–≥–æ\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω–æ</div>','show','meta','active','500','cat-card','12KQlSmB','search-active','renderIndex','size','getItem','init','btnSelectAll','slice','classList','display','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22check-square\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-name\x22>','appendChild','Critical\x20TMA\x20Error:','notificationOccurred','\x20zombie\x20products','–°–Ω—è—Ç—å\x20–≤—Å—ë','body','offsetWidth','background','div','isArray','loadFromCache','searchClear','categories','icon','animation','BackButton','POST','%\x22></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','from','transform','ready','saveSelectionToServer','error','viewList','flat','impactOccurred','9089377YmXdpj','click','onClick','–û—Ç–º–µ–Ω–∞','initialSelected','654363ygLUWq','script.google.com','next','@keyframes\x20fadeInUp\x20{\x20to\x20{\x20opacity:\x201;\x20transform:\x20translateY(0);\x20}\x20}','name','productsMap','productList','none','opacity','light','8688whLBUr','cssText','serverVer','toLowerCase','searchInput','offClick','flex','processCatalog','save','warn','232aJjjMW','–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\x20(','setBackgroundColor','products','294014YBHdHx','auto','btnSave','stringify','catalog','resize','style','search','location','ultima_data_v2','appLoader','600','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x20100%\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-icon\x22>','needUpdate','target','.cat-card,\x20.btn-save','200px','pointerEvents','searchResults','visible','hidden','HapticFeedback','viewSearch','setHeaderColor','toString','73550NdHusG','textContent','–û—à–∏–±–∫–∞!','sentinel'];a7_0x3e44=function(){return _0x584b3a;};return a7_0x3e44();}function saveSelectionToCache(){const _0x588ae2=a7_0x5547d6;try{localStorage['setItem'](_0x588ae2(0xff),JSON[_0x588ae2(0xb4)](Array[_0x588ae2(0x8c)](state[_0x588ae2(0x116)])));}catch(_0x1aeb9c){}}const el={'catGrid':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0xef)),'productList':document['getElementById'](a7_0x5547d6(0x9f)),'viewCats':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0xfe)),'viewList':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0x100)),'viewSearch':document[a7_0x5547d6(0x10a)]('view-search'),'catTitle':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0x117)),'btnSelectAll':document['getElementById'](a7_0x5547d6(0x129)),'searchInput':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0xa7)),'searchClear':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0x85)),'searchResults':document[a7_0x5547d6(0x10a)]('searchResults'),'btnSearchCancel':document['getElementById']('btnSearchCancel'),'btnSave':document['getElementById'](a7_0x5547d6(0xb3)),'saveBtnText':document[a7_0x5547d6(0x10a)]('saveBtnText'),'sentinel':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0xce)),'loader':document[a7_0x5547d6(0x10a)](a7_0x5547d6(0xbb))};function hideLoader(){const _0x2a6797=a7_0x5547d6;el[_0x2a6797(0x118)][_0x2a6797(0x12b)][_0x2a6797(0xd9)](_0x2a6797(0xc6));}function haptic(_0x4b47e8='light'){const _0x58b1a9=a7_0x5547d6;try{const _0x4ead66=window['Telegram']?.[_0x58b1a9(0xf4)]?.[_0x58b1a9(0xc7)];if(_0x4ead66)_0x4b47e8===_0x58b1a9(0xa2)?_0x4ead66[_0x58b1a9(0x93)](_0x58b1a9(0xa2)):_0x4b47e8==='medium'?_0x4ead66['impactOccurred'](_0x58b1a9(0x11c)):_0x4ead66[_0x58b1a9(0x131)]('success');}catch(_0x2cba46){}}const bump=_0x209a34=>{const _0x4c246c=a7_0x5547d6;if(!_0x209a34)return;_0x209a34[_0x4c246c(0x12b)][_0x4c246c(0xea)](_0x4c246c(0x11b)),void _0x209a34[_0x4c246c(0x80)],_0x209a34[_0x4c246c(0x12b)][_0x4c246c(0xd9)](_0x4c246c(0x11b));};document[a7_0x5547d6(0x10f)]('touchstart',_0x6fc92f=>{const _0x72322=a7_0x5547d6,_0x33b065=_0x6fc92f['target'][_0x72322(0xdb)](_0x72322(0xc1));if(!_0x33b065)return;haptic(_0x72322(0xa2)),bump(_0x33b065);},{'passive':!![]});function isSelectionChanged(){const _0x2b0095=a7_0x5547d6;if(state[_0x2b0095(0x116)][_0x2b0095(0x126)]!==state[_0x2b0095(0x98)]['size'])return!![];for(let _0x2ea212 of state[_0x2b0095(0x116)]){if(!state[_0x2b0095(0x98)][_0x2b0095(0xf0)](_0x2ea212))return!![];}return![];}function init(){const _0x4b3827=a7_0x5547d6;let _0x371fc2=window[_0x4b3827(0x104)];const _0x14e643=document[_0x4b3827(0xfd)]('.fx-layer'),_0x54462b=()=>{const _0x2f3068=_0x4b3827;_0x14e643[_0x2f3068(0xb7)][_0x2f3068(0xf7)]=window[_0x2f3068(0xcf)]+'px',_0x371fc2=window[_0x2f3068(0x104)];};_0x54462b(),window[_0x4b3827(0x10f)](_0x4b3827(0xb6),()=>{const _0x54b547=_0x4b3827;if(window[_0x54b547(0x104)]!==_0x371fc2)_0x54462b();}),DataService[_0x4b3827(0x128)](),el[_0x4b3827(0xa7)]['addEventListener']('input',handleSearch),el[_0x4b3827(0x85)]['addEventListener'](_0x4b3827(0x95),clearSearch);if(tg)tg['BackButton'][_0x4b3827(0x11e)]();const _0x55c61a=new IntersectionObserver(_0x34bd0b=>{const _0x59600d=_0x4b3827;if(_0x34bd0b[0x0][_0x59600d(0xf8)])renderNextBatch();},{'rootMargin':_0x4b3827(0xc2)});_0x55c61a[_0x4b3827(0xe4)](el[_0x4b3827(0xce)]);}function renderCategories(){const _0x5b03b0=a7_0x5547d6;el[_0x5b03b0(0xef)][_0x5b03b0(0x111)]='',DataService['categories']['forEach'](_0x14f44f=>{const _0x85d97=_0x5b03b0,_0x14f86a=DataService[_0x85d97(0x115)](_0x14f44f['id']),_0x2434af=_0x14f86a[_0x85d97(0xd2)],_0x24dae2=_0x14f86a['filter'](_0x1f85cb=>state[_0x85d97(0x116)]['has'](_0x1f85cb['id']))[_0x85d97(0xd2)],_0xd5d94=_0x2434af>0x0?_0x24dae2/_0x2434af*0x64:0x0,_0xb6f510=document[_0x85d97(0xe2)]('div');_0xb6f510[_0x85d97(0xd4)]=_0x85d97(0x122),_0xb6f510[_0x85d97(0xed)]=()=>openCategory(_0x14f44f['id']),_0xb6f510['innerHTML']=_0x85d97(0xbe)+_0x14f44f[_0x85d97(0x87)]+_0x85d97(0x105)+_0x14f44f['name']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x24dae2+'\x20–∏–∑\x20'+_0x2434af+_0x85d97(0xdd)+_0xd5d94+_0x85d97(0x8b),el['catGrid'][_0x85d97(0x12f)](_0xb6f510);});}function openCategory(_0x1fbb51){const _0x2e7e01=a7_0x5547d6;state[_0x2e7e01(0x102)]=_0x1fbb51;const _0x43886c=DataService[_0x2e7e01(0x86)][_0x2e7e01(0xe9)](_0x57ac9a=>_0x57ac9a['id']===_0x1fbb51);el[_0x2e7e01(0x117)]['textContent']=_0x43886c[_0x2e7e01(0x9d)],el['productList']['style'][_0x2e7e01(0x12c)]=_0x2e7e01(0xa9);const _0x5df4a9=DataService[_0x2e7e01(0x115)](_0x1fbb51);startInfiniteRender(_0x5df4a9,el[_0x2e7e01(0x9f)]),updateSelectAllBtn(),el[_0x2e7e01(0xfb)]['classList'][_0x2e7e01(0xd9)](_0x2e7e01(0x109)),el[_0x2e7e01(0xfb)]['classList'][_0x2e7e01(0xea)](_0x2e7e01(0x120)),el['viewList'][_0x2e7e01(0x12b)][_0x2e7e01(0xd9)]('active'),el['viewList']['classList'][_0x2e7e01(0xea)](_0x2e7e01(0x9b)),updateSaveButton();if(tg)tg[_0x2e7e01(0x89)][_0x2e7e01(0x11e)]();}function goBack(){const _0xc9b144=a7_0x5547d6;state[_0xc9b144(0x102)]=null,el[_0xc9b144(0x91)][_0xc9b144(0x12b)][_0xc9b144(0xea)]('active'),el[_0xc9b144(0xfb)][_0xc9b144(0x12b)][_0xc9b144(0xd9)](_0xc9b144(0x120)),el[_0xc9b144(0xfb)][_0xc9b144(0x12b)]['remove'](_0xc9b144(0x109)),setTimeout(renderCategories,0x12c),updateSaveButton();if(tg)tg[_0xc9b144(0x89)][_0xc9b144(0x11e)]();}function startInfiniteRender(_0x5d6309,_0x4cf265,_0x308339=![]){const _0x57c2cd=a7_0x5547d6;_0x4cf265[_0x57c2cd(0x111)]='',_0x4cf265[_0x57c2cd(0xb7)][_0x57c2cd(0xa4)]='';if(_0x5d6309[_0x57c2cd(0xd2)]===0x0&&_0x308339){_0x4cf265[_0x57c2cd(0x111)]=_0x57c2cd(0x11d);return;}state['renderQueue']=_0x5d6309,state['renderIndex']=0x0;let _0x444d26=_0x4cf265;if(_0x308339){const _0xdbd06b=document[_0x57c2cd(0xe2)]('div');_0xdbd06b[_0x57c2cd(0xd4)]=_0x57c2cd(0xeb),_0xdbd06b[_0x57c2cd(0xb7)][_0x57c2cd(0x81)]='transparent',_0xdbd06b[_0x57c2cd(0xb7)][_0x57c2cd(0xdf)]=_0x57c2cd(0xa0),_0xdbd06b[_0x57c2cd(0xb7)]['boxShadow']='none',_0x4cf265['appendChild'](_0xdbd06b),_0x444d26=_0xdbd06b;}state['currentContainer']=_0x444d26,renderNextBatch(_0x308339);}function renderNextBatch(_0x48bfd4=![]){const _0x290c5e=a7_0x5547d6;if(state['renderIndex']>=state[_0x290c5e(0x10d)][_0x290c5e(0xd2)])return;const _0x1e1252=state[_0x290c5e(0x10d)][_0x290c5e(0x12a)](state[_0x290c5e(0x125)],state[_0x290c5e(0x125)]+state[_0x290c5e(0x114)]),_0x2268f6=document['createDocumentFragment']();_0x1e1252[_0x290c5e(0xbd)]((_0x2cec3f,_0x4b23ac)=>{const _0x5f3fb6=_0x290c5e,_0x309098=state['selected']['has'](_0x2cec3f['id']),_0x586bfe=document[_0x5f3fb6(0xe2)](_0x5f3fb6(0x82));_0x586bfe['className']=_0x5f3fb6(0xe8)+(_0x309098?'selected':''),_0x586bfe[_0x5f3fb6(0x10f)](_0x5f3fb6(0xfa),()=>haptic(_0x5f3fb6(0xa2)),{'passive':!![]}),_0x586bfe[_0x5f3fb6(0xed)]=()=>toggleProduct(_0x2cec3f['id'],_0x586bfe),!_0x48bfd4&&(_0x586bfe[_0x5f3fb6(0xb7)][_0x5f3fb6(0xa1)]='0',_0x586bfe[_0x5f3fb6(0xb7)][_0x5f3fb6(0x88)]=_0x5f3fb6(0xd6)+_0x4b23ac*0.02+'s',setTimeout(()=>{const _0x13920b=_0x5f3fb6;_0x586bfe[_0x13920b(0xb7)][_0x13920b(0xa1)]='1',_0x586bfe[_0x13920b(0xb7)][_0x13920b(0x88)]=_0x13920b(0xa0),_0x586bfe['style'][_0x13920b(0x8d)]=_0x13920b(0xa0);},_0x4b23ac*0x14+0x12c)),_0x586bfe[_0x5f3fb6(0x111)]=_0x5f3fb6(0x12e)+_0x2cec3f['name']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-meta\x22>'+_0x2cec3f[_0x5f3fb6(0x11f)]+_0x5f3fb6(0x12d),_0x2268f6['appendChild'](_0x586bfe);}),state['currentContainer'][_0x290c5e(0x12f)](_0x2268f6),state[_0x290c5e(0x125)]+=state['BATCH_SIZE'];}const styleSheet=document['createElement'](a7_0x5547d6(0xb7));styleSheet[a7_0x5547d6(0xee)]=a7_0x5547d6(0x9c),document['head'][a7_0x5547d6(0x12f)](styleSheet);function toggleProduct(_0x48ab1a,_0x1063f5){const _0x265727=a7_0x5547d6;state[_0x265727(0x116)]['has'](_0x48ab1a)?(state[_0x265727(0x116)][_0x265727(0xd8)](_0x48ab1a),_0x1063f5[_0x265727(0x12b)]['remove'](_0x265727(0x116))):(state['selected'][_0x265727(0xd9)](_0x48ab1a),_0x1063f5[_0x265727(0x12b)][_0x265727(0xd9)](_0x265727(0x116)));state[_0x265727(0xf6)]&&el[_0x265727(0x119)]&&(el[_0x265727(0x119)][_0x265727(0xcc)]=state[_0x265727(0x116)][_0x265727(0x126)]>0x0?'–í—ã–±—Ä–∞—Ç—å':_0x265727(0x97),el[_0x265727(0x119)][_0x265727(0xb7)][_0x265727(0x108)]=state[_0x265727(0x116)]['size']>0x0?_0x265727(0xbc):_0x265727(0x121));saveSelectionToCache(),updateSaveButton();if(state[_0x265727(0x102)]&&!state[_0x265727(0xf6)])updateSelectAllBtn();}function updateSaveButton(){const _0x1ff684=a7_0x5547d6;let _0x68fc76='';if(state['activeCatId']){const _0x2053b6=DataService[_0x1ff684(0x115)](state[_0x1ff684(0x102)]),_0x8d3997=_0x2053b6['filter'](_0x20bdb8=>state[_0x1ff684(0x116)]['has'](_0x20bdb8['id']))[_0x1ff684(0xd2)];_0x68fc76=_0x8d3997>0x0?'–í—ã–±—Ä–∞—Ç—å\x20('+_0x8d3997+')':'–ù–∞–∑–∞–¥',el['btnSave']['classList'][_0x1ff684(0xd9)](_0x1ff684(0xc5)),el[_0x1ff684(0xf1)][_0x1ff684(0xcc)]=_0x68fc76;return;}const _0x184d07=state[_0x1ff684(0x116)][_0x1ff684(0x126)];_0x68fc76=_0x1ff684(0xae)+_0x184d07+')',el[_0x1ff684(0xf1)]['textContent']=_0x68fc76,isSelectionChanged()?el[_0x1ff684(0xb3)][_0x1ff684(0x12b)][_0x1ff684(0xd9)]('visible'):el['btnSave']['classList'][_0x1ff684(0xea)](_0x1ff684(0xc5));}function updateSelectAllBtn(){const _0x147fc1=a7_0x5547d6;if(!state[_0x147fc1(0x102)])return;const _0x679262=DataService[_0x147fc1(0x115)](state['activeCatId']),_0x27e171=_0x679262[_0x147fc1(0xd2)]>0x0&&_0x679262[_0x147fc1(0xf2)](_0x3a2adb=>state[_0x147fc1(0x116)][_0x147fc1(0xf0)](_0x3a2adb['id']));el[_0x147fc1(0x129)][_0x147fc1(0xcc)]=_0x27e171?_0x147fc1(0x133):'–í—ã–±—Ä–∞—Ç—å\x20–≤—Å—ë',el[_0x147fc1(0x129)][_0x147fc1(0xed)]=()=>toggleAllInCategory(_0x679262,!_0x27e171);}function toggleAllInCategory(_0x352f8e,_0x14c0f4){const _0x3bc020=a7_0x5547d6;haptic(_0x3bc020(0x11c)),_0x352f8e['forEach'](_0x205f45=>{const _0x53270c=_0x3bc020;if(_0x14c0f4)state[_0x53270c(0x116)]['add'](_0x205f45['id']);else state[_0x53270c(0x116)][_0x53270c(0xd8)](_0x205f45['id']);}),saveSelectionToCache(),startInfiniteRender(_0x352f8e,el[_0x3bc020(0x9f)]),updateSelectAllBtn(),updateSaveButton();}function handleSearch(_0x3e66ce){const _0x11eee8=a7_0x5547d6,_0x5063e5=_0x3e66ce[_0x11eee8(0xc0)][_0x11eee8(0x10b)]['toLowerCase']()['trim']();if(_0x5063e5[_0x11eee8(0xd2)]>0x0){if(!state[_0x11eee8(0xf6)])enterSearchMode();const _0x1be58b=DataService[_0x11eee8(0xb8)](_0x5063e5);el['searchResults'][_0x11eee8(0xb7)][_0x11eee8(0x12c)]=_0x11eee8(0xf5),startInfiniteRender(_0x1be58b,el[_0x11eee8(0xc4)],!![]);}else el[_0x11eee8(0xc4)][_0x11eee8(0x111)]='';}function clearSearch(){exitSearchMode();}async function saveSelection(){const _0x27f9b1=a7_0x5547d6;haptic(_0x27f9b1(0x11c));if(state[_0x27f9b1(0x102)]&&!state[_0x27f9b1(0xf6)]){goBack();return;}const _0x3af82c=el['saveBtnText'][_0x27f9b1(0xcc)];el[_0x27f9b1(0xf1)][_0x27f9b1(0xcc)]=_0x27f9b1(0xde),el[_0x27f9b1(0xb3)][_0x27f9b1(0xb7)][_0x27f9b1(0xc3)]=_0x27f9b1(0xa0);const _0xa3ad3=await DataService[_0x27f9b1(0x8f)]();_0xa3ad3?(el[_0x27f9b1(0xf1)][_0x27f9b1(0xcc)]=_0x27f9b1(0x101),state[_0x27f9b1(0x98)]=new Set(state['selected']),setTimeout(()=>{const _0x246faa=_0x27f9b1;el['btnSave'][_0x246faa(0xb7)][_0x246faa(0xc3)]='auto',el['saveBtnText'][_0x246faa(0xcc)]=_0x3af82c,updateSaveButton();if(state[_0x246faa(0xf6)])exitSearchMode();},0x320)):(el[_0x27f9b1(0xf1)][_0x27f9b1(0xcc)]=_0x27f9b1(0xcd),setTimeout(()=>{const _0x2b9359=_0x27f9b1;el['btnSave'][_0x2b9359(0xb7)][_0x2b9359(0xc3)]=_0x2b9359(0xb2),el[_0x2b9359(0xf1)][_0x2b9359(0xcc)]=_0x3af82c;},0x7d0));}function enterSearchMode(){const _0x431fc4=a7_0x5547d6;state[_0x431fc4(0xf6)]=!![];el[_0x431fc4(0x119)]&&(el['btnSearchCancel']['textContent']=_0x431fc4(0x97),el['btnSearchCancel'][_0x431fc4(0xb7)][_0x431fc4(0x108)]='500');document[_0x431fc4(0x7f)]['classList'][_0x431fc4(0xd9)](_0x431fc4(0x124)),el[_0x431fc4(0xfb)][_0x431fc4(0x12b)][_0x431fc4(0xea)](_0x431fc4(0x120)),el[_0x431fc4(0x91)][_0x431fc4(0x12b)][_0x431fc4(0xea)]('active'),el['viewSearch'][_0x431fc4(0x12b)][_0x431fc4(0xd9)](_0x431fc4(0x120));if(tg)tg[_0x431fc4(0x89)][_0x431fc4(0x11e)]();}function exitSearchMode(){const _0x59a1bd=a7_0x5547d6;state[_0x59a1bd(0xf6)]=![],document[_0x59a1bd(0x7f)][_0x59a1bd(0x12b)][_0x59a1bd(0xea)](_0x59a1bd(0x124)),el[_0x59a1bd(0xa7)][_0x59a1bd(0xd0)](),el[_0x59a1bd(0xc8)][_0x59a1bd(0x12b)][_0x59a1bd(0xea)]('active'),el['searchResults']['style']['display']='none',el[_0x59a1bd(0xa7)][_0x59a1bd(0x10b)]='';if(state[_0x59a1bd(0x102)])el[_0x59a1bd(0x91)][_0x59a1bd(0x12b)][_0x59a1bd(0xd9)](_0x59a1bd(0x120));else el[_0x59a1bd(0xfb)][_0x59a1bd(0x12b)][_0x59a1bd(0xd9)]('active'),renderCategories();updateSaveButton();}init();