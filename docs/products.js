const a7_0x1237c5=a7_0xb651;(function(_0x242613,_0x5411f1){const _0x4bf23a=a7_0xb651,_0x179e01=_0x242613();while(!![]){try{const _0x190fb6=-parseInt(_0x4bf23a(0x1e8))/0x1+-parseInt(_0x4bf23a(0x1d8))/0x2+-parseInt(_0x4bf23a(0x1b6))/0x3*(parseInt(_0x4bf23a(0x204))/0x4)+parseInt(_0x4bf23a(0x245))/0x5*(-parseInt(_0x4bf23a(0x249))/0x6)+parseInt(_0x4bf23a(0x224))/0x7+parseInt(_0x4bf23a(0x243))/0x8*(-parseInt(_0x4bf23a(0x260))/0x9)+parseInt(_0x4bf23a(0x1fe))/0xa*(parseInt(_0x4bf23a(0x1ee))/0xb);if(_0x190fb6===_0x5411f1)break;else _0x179e01['push'](_0x179e01['shift']());}catch(_0xdcd0eb){_0x179e01['push'](_0x179e01['shift']());}}}(a7_0xf7d5,0xe46b2));const a7_0x51207e=(function(){let _0xf4df36=!![];return function(_0x344c82,_0x871cba){const _0xd41d80=_0xf4df36?function(){const _0x21ec58=a7_0xb651;if(_0x871cba){const _0x43a0a5=_0x871cba[_0x21ec58(0x1b9)](_0x344c82,arguments);return _0x871cba=null,_0x43a0a5;}}:function(){};return _0xf4df36=![],_0xd41d80;};}()),a7_0x1b508d=a7_0x51207e(this,function(){const _0x4aa1c0=a7_0xb651;return a7_0x1b508d[_0x4aa1c0(0x1c9)]()['search']('(((.+)+)+)+$')[_0x4aa1c0(0x1c9)]()[_0x4aa1c0(0x23e)](a7_0x1b508d)[_0x4aa1c0(0x1f4)](_0x4aa1c0(0x1f8));});a7_0x1b508d();const API_URL=a7_0x1237c5(0x21c),tg=window[a7_0x1237c5(0x1b3)]?.[a7_0x1237c5(0x253)],TG_INIT_DATA=tg?.[a7_0x1237c5(0x24b)]||'';function a7_0xb651(_0x593822,_0x1d5803){_0x593822=_0x593822-0x1b3;const _0x3b411e=a7_0xf7d5();let _0x1b508d=_0x3b411e[_0x593822];return _0x1b508d;}if(tg)try{tg['ready'](),tg[a7_0x1237c5(0x20a)]();try{tg[a7_0x1237c5(0x1c2)]('#050505');if(tg['setBackgroundColor'])tg[a7_0x1237c5(0x1e0)](a7_0x1237c5(0x1ea));if(tg[a7_0x1237c5(0x1e6)])tg['disableVerticalSwipes']();}catch(a7_0x5ebbee){console[a7_0x1237c5(0x228)](a7_0x1237c5(0x22a),a7_0x5ebbee);}tg[a7_0x1237c5(0x234)]&&(tg[a7_0x1237c5(0x234)]['show'](),tg[a7_0x1237c5(0x234)][a7_0x1237c5(0x1dd)](),tg[a7_0x1237c5(0x234)]['onClick'](()=>{const _0x489d81=a7_0x1237c5;if(state[_0x489d81(0x1ce)])exitSearchMode();else state[_0x489d81(0x23b)]?goBack():window[_0x489d81(0x1fb)]['href']=_0x489d81(0x22c);}));}catch(a7_0x1fc86b){console[a7_0x1237c5(0x1fc)](a7_0x1237c5(0x240),a7_0x1fc86b);}const DataService={'categories':[],'productsMap':{},'serverVer':0x0,async 'init'(){const _0x6a7dc4=a7_0x1237c5,_0x4fcb0b=this['loadFromCache']();_0x4fcb0b&&(renderCategories(),hideLoader()),updateSaveButton(),await this[_0x6a7dc4(0x219)]();},'loadFromCache'(){const _0x28c6f2=a7_0x1237c5;try{const _0x569e80=localStorage[_0x28c6f2(0x235)](_0x28c6f2(0x1da));if(_0x569e80){const _0x543cee=JSON['parse'](_0x569e80);this[_0x28c6f2(0x1cc)]=_0x543cee['categories']||[],this[_0x28c6f2(0x217)]=_0x543cee[_0x28c6f2(0x217)]||{},this[_0x28c6f2(0x216)]=_0x543cee['serverVer']||0x0;const _0x1e299f=localStorage[_0x28c6f2(0x235)](_0x28c6f2(0x1c6));if(_0x1e299f){const _0x4040fa=JSON[_0x28c6f2(0x239)](_0x1e299f);state[_0x28c6f2(0x1f6)]=new Set(_0x4040fa),this['cleanupZombieProducts'](),state['initialSelected']=new Set(state[_0x28c6f2(0x1f6)]);}return!![];}}catch(_0x1a25de){console['error'](_0x1a25de);}return![];},async 'syncWithServer'(){const _0x9a67c4=a7_0x1237c5;try{if(!API_URL[_0x9a67c4(0x1b8)](_0x9a67c4(0x20e))){console['warn'](_0x9a67c4(0x250)),hideLoader();return;}const _0x141693=await fetch(API_URL,{'method':_0x9a67c4(0x24d),'headers':{'Content-Type':_0x9a67c4(0x21b)},'body':JSON[_0x9a67c4(0x268)]({'action':_0x9a67c4(0x1db),'clientVer':this[_0x9a67c4(0x216)],'initData':TG_INIT_DATA})}),_0x16d6b3=await _0x141693[_0x9a67c4(0x1f5)]();_0x16d6b3['ok']&&_0x16d6b3[_0x9a67c4(0x233)]&&_0x16d6b3[_0x9a67c4(0x1f0)]&&this[_0x9a67c4(0x259)](_0x16d6b3[_0x9a67c4(0x1f0)],_0x16d6b3[_0x9a67c4(0x216)]);if(_0x16d6b3['ok']&&_0x16d6b3[_0x9a67c4(0x1ba)])try{const _0x3ad07e=JSON[_0x9a67c4(0x239)](_0x16d6b3['userSelection']);state[_0x9a67c4(0x1f6)]=new Set(_0x3ad07e),this['cleanupZombieProducts'](),state[_0x9a67c4(0x1dc)]=new Set(state['selected']),saveSelectionToCache(),updateSaveButton(),renderCategories();}catch(_0x34cd30){}hideLoader();}catch(_0x428d69){console[_0x9a67c4(0x228)](_0x9a67c4(0x1d7),_0x428d69),hideLoader();if(!DataService['categories']['length'])alert('–û—à–∏–±–∫–∞\x20–∑–∞–≥—Ä—É–∑–∫–∏\x20–¥–∞–Ω–Ω—ã—Ö.\x20–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–∏–Ω—Ç–µ—Ä–Ω–µ—Ç.');}},'processCatalog'(_0x5dfc53,_0x51f8a6){const _0x234ffb=a7_0x1237c5;this[_0x234ffb(0x1cc)]=_0x5dfc53[_0x234ffb(0x1cc)][_0x234ffb(0x1d4)](_0x588b61=>({'id':String(_0x588b61['id']),'name':_0x588b61['name'],'icon':_0x588b61[_0x234ffb(0x21e)]}));const _0x517e9d={};this[_0x234ffb(0x1cc)][_0x234ffb(0x1ed)](_0x3a743a=>_0x517e9d[_0x3a743a['id']]=[]),_0x5dfc53['products']&&Array[_0x234ffb(0x261)](_0x5dfc53[_0x234ffb(0x248)])&&_0x5dfc53[_0x234ffb(0x248)][_0x234ffb(0x1ed)](_0x59be86=>{const _0x2faac5=_0x234ffb,_0x5fb0e1=String(_0x59be86[0x0]),_0x391af5=String(_0x59be86[0x1]);if(!_0x517e9d[_0x391af5])_0x517e9d[_0x391af5]=[];_0x517e9d[_0x391af5][_0x2faac5(0x203)]({'id':_0x5fb0e1,'name':_0x59be86[0x2],'meta':_0x59be86[0x3]});}),this[_0x234ffb(0x217)]=_0x517e9d,this['serverVer']=_0x51f8a6,localStorage[_0x234ffb(0x21a)](_0x234ffb(0x1da),JSON[_0x234ffb(0x268)]({'categories':this[_0x234ffb(0x1cc)],'productsMap':this['productsMap'],'serverVer':this[_0x234ffb(0x216)]})),this[_0x234ffb(0x1e5)](),renderCategories(),hideLoader();},'cleanupZombieProducts'(){const _0x111432=a7_0x1237c5;if(!state[_0x111432(0x1f6)]||state[_0x111432(0x1f6)][_0x111432(0x229)]===0x0)return;const _0x4b6adb=new Set();Object[_0x111432(0x24e)](this['productsMap'])[_0x111432(0x1ca)]()[_0x111432(0x1ed)](_0x55f26f=>_0x4b6adb['add'](_0x55f26f['id']));const _0x1c971c=new Set();state[_0x111432(0x1f6)][_0x111432(0x1ed)](_0x5abb89=>{const _0x2b651a=_0x111432;_0x4b6adb[_0x2b651a(0x24f)](_0x5abb89)&&_0x1c971c[_0x2b651a(0x223)](_0x5abb89);}),_0x1c971c['size']!==state['selected'][_0x111432(0x229)]&&(console[_0x111432(0x22e)]('üßπ\x20Removed\x20'+(state[_0x111432(0x1f6)][_0x111432(0x229)]-_0x1c971c[_0x111432(0x229)])+'\x20zombie\x20products'),state['selected']=_0x1c971c,saveSelectionToCache());},'getProducts'(_0x614575){const _0x38dd5e=a7_0x1237c5;return this[_0x38dd5e(0x217)][_0x614575]||[];},'search'(_0xc7399e){const _0x80057f=a7_0x1237c5,_0x224190=[],_0x3d62be=_0xc7399e[_0x80057f(0x209)]();return Object[_0x80057f(0x24e)](this[_0x80057f(0x217)])[_0x80057f(0x1ca)]()[_0x80057f(0x1ed)](_0x5d0773=>{const _0x2c165d=_0x80057f;if(_0x5d0773[_0x2c165d(0x1fd)][_0x2c165d(0x209)]()[_0x2c165d(0x1b8)](_0x3d62be))_0x224190[_0x2c165d(0x203)](_0x5d0773);}),_0x224190;},async 'saveSelectionToServer'(){const _0x5a648a=a7_0x1237c5;this[_0x5a648a(0x1e5)](),saveSelectionToCache();try{return await fetch(API_URL,{'method':'POST','headers':{'Content-Type':_0x5a648a(0x21b)},'body':JSON['stringify']({'action':'save','initData':TG_INIT_DATA,'selection':Array[_0x5a648a(0x20c)](state[_0x5a648a(0x1f6)])})}),!![];}catch(_0x89f9a6){return![];}}},state={'selected':new Set(),'initialSelected':new Set(),'activeCatId':null,'searchMode':![],'renderQueue':[],'renderIndex':0x0,'BATCH_SIZE':0x14,'currentContainer':null};function saveSelectionToCache(){const _0x4a7528=a7_0x1237c5;try{localStorage['setItem']('ultima_cart_v1',JSON[_0x4a7528(0x268)](Array['from'](state['selected'])));}catch(_0x10a65e){}}function a7_0xf7d5(){const _0x421234=['btnSelectAll','forEach','11bKnqON','animation','catalog','–ì–æ—Ç–æ–≤–æ!','resize','every','search','json','selected','<div\x20class=\x22simple-no-results\x22>–ù–∏—á–µ–≥–æ\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω–æ</div>','(((.+)+)+)+$','product-row\x20','next','location','error','name','77321240rHFjVC','productList','cssText','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22check-square\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-name\x22>','–í—ã–±—Ä–∞—Ç—å\x20–≤—Å—ë','push','32nGtMSv','%\x22></div></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','createDocumentFragment','find','addEventListener','toLowerCase','expand','cat-card','from','.cat-card,\x20.btn-save','script.google.com','none','meta','sentinel','catGrid','show','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','input','serverVer','productsMap','boxShadow','syncWithServer','setItem','text/plain;charset=utf-8','https://script.google.com/macros/s/AKfycbybxqI4xOLAUOcMXGReNl0PVjGToGg6_x3ZxlKNnUHg3XcaZGhkbsu61Adgkb4emrkm/exec','delete','icon','offsetWidth','btnSearchCancel','auto','flex','add','3610110tUUahI','–ù–∞–∑–∞–¥','impactOccurred','medium','warn','size','Color/Swipe\x20settings\x20error:','notificationOccurred','router.html','transform','log','value','visible','slice','–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...','needUpdate','BackButton','getItem','isIntersecting','viewList','–û—Ç–º–µ–Ω–∞','parse','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','activeCatId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x20100%\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-icon\x22>','fadeInUp\x200.2s\x20ease\x20forwards\x20','constructor','bump','Critical\x20TMA\x20Error:','search-active','classList','184qNHqKQ','target','31620VYbQRN','\x20–∏–∑\x20','innerWidth','products','1146PalKLl','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prod-meta\x22>','initData','display','POST','values','has','No\x20API\x20URL','600','500','WebApp','opacity','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22cat-name\x22>','active','className','filter','processCatalog','catTitle','renderQueue','searchResults','btnSave','background','light','491823htfLkZ','isArray','appendChild','div','–í—ã–±—Ä–∞—Ç—å','getProducts','–û—à–∏–±–∫–∞!','–í—ã–±—Ä–∞—Ç—å\x20(','stringify','Telegram','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mini-track\x22><div\x20class=\x22mini-fill\x22\x20style=\x22width:\x20','onclick','681669vWSydK','BATCH_SIZE','includes','apply','userSelection','remove','style','innerHTML','hidden','loader','success','currentContainer','setHeaderColor','getElementById','renderIndex','createElement','ultima_cart_v1','block','length','toString','flat','saveBtnText','categories','viewSearch','searchMode','transparent','product-list-container','pointerEvents','200px','searchInput','map','view-search','view-list','Sync\x20skipped:','2411136XMDrWp','head','ultima_data_v2','init','initialSelected','offClick','fontWeight','searchClear','setBackgroundColor','textContent','touchstart','querySelector','view-cats','cleanupZombieProducts','disableVerticalSwipes','body','1824135wbKGeF','viewCats','#050505','click'];a7_0xf7d5=function(){return _0x421234;};return a7_0xf7d5();}const el={'catGrid':document['getElementById']('catGrid'),'productList':document[a7_0x1237c5(0x1c3)]('productList'),'viewCats':document['getElementById'](a7_0x1237c5(0x1e4)),'viewList':document[a7_0x1237c5(0x1c3)](a7_0x1237c5(0x1d6)),'viewSearch':document['getElementById'](a7_0x1237c5(0x1d5)),'catTitle':document[a7_0x1237c5(0x1c3)]('catTitle'),'btnSelectAll':document[a7_0x1237c5(0x1c3)](a7_0x1237c5(0x1ec)),'searchInput':document[a7_0x1237c5(0x1c3)](a7_0x1237c5(0x1d3)),'searchClear':document[a7_0x1237c5(0x1c3)]('searchClear'),'searchResults':document['getElementById']('searchResults'),'btnSearchCancel':document[a7_0x1237c5(0x1c3)](a7_0x1237c5(0x220)),'btnSave':document[a7_0x1237c5(0x1c3)](a7_0x1237c5(0x25d)),'saveBtnText':document[a7_0x1237c5(0x1c3)](a7_0x1237c5(0x1cb)),'sentinel':document[a7_0x1237c5(0x1c3)](a7_0x1237c5(0x211)),'loader':document[a7_0x1237c5(0x1c3)]('appLoader')};function hideLoader(){const _0x1f25fa=a7_0x1237c5;el[_0x1f25fa(0x1bf)][_0x1f25fa(0x242)][_0x1f25fa(0x223)](_0x1f25fa(0x1be));}function haptic(_0x48816e=a7_0x1237c5(0x25f)){const _0x2418bd=a7_0x1237c5;try{const _0x1d9aae=window['Telegram']?.[_0x2418bd(0x253)]?.['HapticFeedback'];if(_0x1d9aae)_0x48816e==='light'?_0x1d9aae[_0x2418bd(0x226)](_0x2418bd(0x25f)):_0x48816e==='medium'?_0x1d9aae[_0x2418bd(0x226)](_0x2418bd(0x227)):_0x1d9aae[_0x2418bd(0x22b)](_0x2418bd(0x1c0));}catch(_0x3fda2d){}}const bump=_0x1a5035=>{const _0x49a1b2=a7_0x1237c5;if(!_0x1a5035)return;_0x1a5035[_0x49a1b2(0x242)][_0x49a1b2(0x1bb)](_0x49a1b2(0x23f)),void _0x1a5035[_0x49a1b2(0x21f)],_0x1a5035[_0x49a1b2(0x242)][_0x49a1b2(0x223)](_0x49a1b2(0x23f));};document[a7_0x1237c5(0x208)]('touchstart',_0x4666fd=>{const _0x266e84=a7_0x1237c5,_0x1ac48f=_0x4666fd[_0x266e84(0x244)]['closest'](_0x266e84(0x20d));if(!_0x1ac48f)return;haptic(_0x266e84(0x25f)),bump(_0x1ac48f);},{'passive':!![]});function isSelectionChanged(){const _0x53c3d8=a7_0x1237c5;if(state[_0x53c3d8(0x1f6)]['size']!==state['initialSelected'][_0x53c3d8(0x229)])return!![];for(let _0x4121bd of state['selected']){if(!state[_0x53c3d8(0x1dc)][_0x53c3d8(0x24f)](_0x4121bd))return!![];}return![];}function init(){const _0x2e6932=a7_0x1237c5;let _0x55719e=window['innerWidth'];const _0x16ed79=document[_0x2e6932(0x1e3)]('.fx-layer'),_0x2a886f=()=>{const _0x5b43ec=_0x2e6932;_0x16ed79[_0x5b43ec(0x1bc)]['height']=window['innerHeight']+'px',_0x55719e=window[_0x5b43ec(0x247)];};_0x2a886f(),window[_0x2e6932(0x208)](_0x2e6932(0x1f2),()=>{const _0x4b8c52=_0x2e6932;if(window[_0x4b8c52(0x247)]!==_0x55719e)_0x2a886f();}),DataService[_0x2e6932(0x1db)](),el[_0x2e6932(0x1d3)][_0x2e6932(0x208)](_0x2e6932(0x215),handleSearch),el[_0x2e6932(0x1df)][_0x2e6932(0x208)](_0x2e6932(0x1eb),clearSearch);if(tg)tg['BackButton'][_0x2e6932(0x213)]();const _0x38fd71=new IntersectionObserver(_0xdb6aab=>{const _0x1cd5b4=_0x2e6932;if(_0xdb6aab[0x0][_0x1cd5b4(0x236)])renderNextBatch();},{'rootMargin':_0x2e6932(0x1d2)});_0x38fd71['observe'](el[_0x2e6932(0x211)]);}function renderCategories(){const _0x464c2d=a7_0x1237c5;el['catGrid'][_0x464c2d(0x1bd)]='',DataService[_0x464c2d(0x1cc)][_0x464c2d(0x1ed)](_0x25195f=>{const _0x74278a=_0x464c2d,_0x181071=DataService[_0x74278a(0x265)](_0x25195f['id']),_0x4e2a87=_0x181071[_0x74278a(0x1c8)],_0x30fd68=_0x181071['filter'](_0x233214=>state[_0x74278a(0x1f6)][_0x74278a(0x24f)](_0x233214['id']))[_0x74278a(0x1c8)],_0x100534=_0x4e2a87>0x0?_0x30fd68/_0x4e2a87*0x64:0x0,_0x9462de=document[_0x74278a(0x1c5)](_0x74278a(0x263));_0x9462de['className']=_0x74278a(0x20b),_0x9462de[_0x74278a(0x1b5)]=()=>openCategory(_0x25195f['id']),_0x9462de[_0x74278a(0x1bd)]=_0x74278a(0x23c)+_0x25195f[_0x74278a(0x21e)]+_0x74278a(0x255)+_0x25195f['name']+_0x74278a(0x23a)+_0x30fd68+_0x74278a(0x246)+_0x4e2a87+_0x74278a(0x1b4)+_0x100534+_0x74278a(0x205),el[_0x74278a(0x212)]['appendChild'](_0x9462de);});}function openCategory(_0x323085){const _0x3be9e3=a7_0x1237c5;state[_0x3be9e3(0x23b)]=_0x323085;const _0x4f7558=DataService[_0x3be9e3(0x1cc)][_0x3be9e3(0x207)](_0x3732f6=>_0x3732f6['id']===_0x323085);el[_0x3be9e3(0x25a)][_0x3be9e3(0x1e1)]=_0x4f7558[_0x3be9e3(0x1fd)],el['productList'][_0x3be9e3(0x1bc)]['display']=_0x3be9e3(0x222);const _0x269be2=DataService['getProducts'](_0x323085);startInfiniteRender(_0x269be2,el[_0x3be9e3(0x1ff)]),updateSelectAllBtn(),el[_0x3be9e3(0x1e9)]['classList']['add']('prev'),el['viewCats']['classList'][_0x3be9e3(0x1bb)](_0x3be9e3(0x256)),el[_0x3be9e3(0x237)][_0x3be9e3(0x242)][_0x3be9e3(0x223)](_0x3be9e3(0x256)),el[_0x3be9e3(0x237)][_0x3be9e3(0x242)][_0x3be9e3(0x1bb)](_0x3be9e3(0x1fa)),updateSaveButton();if(tg)tg['BackButton']['show']();}function goBack(){const _0x4a7a68=a7_0x1237c5;state[_0x4a7a68(0x23b)]=null,el[_0x4a7a68(0x237)][_0x4a7a68(0x242)][_0x4a7a68(0x1bb)]('active'),el['viewCats'][_0x4a7a68(0x242)][_0x4a7a68(0x223)](_0x4a7a68(0x256)),el[_0x4a7a68(0x1e9)][_0x4a7a68(0x242)][_0x4a7a68(0x1bb)]('prev'),setTimeout(renderCategories,0x12c),updateSaveButton();if(tg)tg[_0x4a7a68(0x234)][_0x4a7a68(0x213)]();}function startInfiniteRender(_0xf4f40e,_0x3b0e67,_0x8d9090=![]){const _0x59cb16=a7_0x1237c5;_0x3b0e67['innerHTML']='',_0x3b0e67[_0x59cb16(0x1bc)][_0x59cb16(0x200)]='';if(_0xf4f40e[_0x59cb16(0x1c8)]===0x0&&_0x8d9090){_0x3b0e67[_0x59cb16(0x1bd)]=_0x59cb16(0x1f7);return;}state[_0x59cb16(0x25b)]=_0xf4f40e,state[_0x59cb16(0x1c4)]=0x0;let _0x68ebd2=_0x3b0e67;if(_0x8d9090){const _0x46a29c=document[_0x59cb16(0x1c5)](_0x59cb16(0x263));_0x46a29c['className']=_0x59cb16(0x1d0),_0x46a29c[_0x59cb16(0x1bc)][_0x59cb16(0x25e)]=_0x59cb16(0x1cf),_0x46a29c['style']['border']=_0x59cb16(0x20f),_0x46a29c[_0x59cb16(0x1bc)][_0x59cb16(0x218)]=_0x59cb16(0x20f),_0x3b0e67['appendChild'](_0x46a29c),_0x68ebd2=_0x46a29c;}state[_0x59cb16(0x1c1)]=_0x68ebd2,renderNextBatch(_0x8d9090);}function renderNextBatch(_0x3fcba3=![]){const _0xe5896f=a7_0x1237c5;if(state[_0xe5896f(0x1c4)]>=state[_0xe5896f(0x25b)]['length'])return;const _0x4a0852=state[_0xe5896f(0x25b)][_0xe5896f(0x231)](state[_0xe5896f(0x1c4)],state[_0xe5896f(0x1c4)]+state[_0xe5896f(0x1b7)]),_0x15625c=document[_0xe5896f(0x206)]();_0x4a0852['forEach']((_0x202351,_0x245ae3)=>{const _0x238111=_0xe5896f,_0xe42631=state[_0x238111(0x1f6)][_0x238111(0x24f)](_0x202351['id']),_0x34f79c=document['createElement'](_0x238111(0x263));_0x34f79c[_0x238111(0x257)]=_0x238111(0x1f9)+(_0xe42631?_0x238111(0x1f6):''),_0x34f79c[_0x238111(0x208)](_0x238111(0x1e2),()=>haptic(_0x238111(0x25f)),{'passive':!![]}),_0x34f79c[_0x238111(0x1b5)]=()=>toggleProduct(_0x202351['id'],_0x34f79c),!_0x3fcba3&&(_0x34f79c[_0x238111(0x1bc)]['opacity']='0',_0x34f79c['style'][_0x238111(0x1ef)]=_0x238111(0x23d)+_0x245ae3*0.02+'s',setTimeout(()=>{const _0x1d4c61=_0x238111;_0x34f79c[_0x1d4c61(0x1bc)][_0x1d4c61(0x254)]='1',_0x34f79c[_0x1d4c61(0x1bc)][_0x1d4c61(0x1ef)]='none',_0x34f79c['style'][_0x1d4c61(0x22d)]=_0x1d4c61(0x20f);},_0x245ae3*0x14+0x12c)),_0x34f79c[_0x238111(0x1bd)]=_0x238111(0x201)+_0x202351[_0x238111(0x1fd)]+_0x238111(0x24a)+_0x202351[_0x238111(0x210)]+_0x238111(0x214),_0x15625c['appendChild'](_0x34f79c);}),state[_0xe5896f(0x1c1)]['appendChild'](_0x15625c),state[_0xe5896f(0x1c4)]+=state[_0xe5896f(0x1b7)];}const styleSheet=document[a7_0x1237c5(0x1c5)]('style');styleSheet['innerText']='@keyframes\x20fadeInUp\x20{\x20to\x20{\x20opacity:\x201;\x20transform:\x20translateY(0);\x20}\x20}',document[a7_0x1237c5(0x1d9)][a7_0x1237c5(0x262)](styleSheet);function toggleProduct(_0x1d9654,_0x1620fb){const _0x3a44e0=a7_0x1237c5;state[_0x3a44e0(0x1f6)][_0x3a44e0(0x24f)](_0x1d9654)?(state['selected'][_0x3a44e0(0x21d)](_0x1d9654),_0x1620fb['classList'][_0x3a44e0(0x1bb)](_0x3a44e0(0x1f6))):(state['selected']['add'](_0x1d9654),_0x1620fb[_0x3a44e0(0x242)][_0x3a44e0(0x223)](_0x3a44e0(0x1f6)));state[_0x3a44e0(0x1ce)]&&el[_0x3a44e0(0x220)]&&(el['btnSearchCancel'][_0x3a44e0(0x1e1)]=state['selected']['size']>0x0?_0x3a44e0(0x264):_0x3a44e0(0x238),el[_0x3a44e0(0x220)][_0x3a44e0(0x1bc)]['fontWeight']=state[_0x3a44e0(0x1f6)]['size']>0x0?_0x3a44e0(0x251):_0x3a44e0(0x252));saveSelectionToCache(),updateSaveButton();if(state[_0x3a44e0(0x23b)]&&!state[_0x3a44e0(0x1ce)])updateSelectAllBtn();}function updateSaveButton(){const _0x1bd31f=a7_0x1237c5;let _0x434ec3='';if(state[_0x1bd31f(0x23b)]){const _0x130974=DataService[_0x1bd31f(0x265)](state['activeCatId']),_0x5b4674=_0x130974[_0x1bd31f(0x258)](_0x24e768=>state['selected'][_0x1bd31f(0x24f)](_0x24e768['id']))['length'];_0x434ec3=_0x5b4674>0x0?_0x1bd31f(0x267)+_0x5b4674+')':_0x1bd31f(0x225),el[_0x1bd31f(0x25d)][_0x1bd31f(0x242)][_0x1bd31f(0x223)](_0x1bd31f(0x230)),el[_0x1bd31f(0x1cb)][_0x1bd31f(0x1e1)]=_0x434ec3;return;}const _0x3565fd=state[_0x1bd31f(0x1f6)][_0x1bd31f(0x229)];_0x434ec3='–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\x20('+_0x3565fd+')',el[_0x1bd31f(0x1cb)][_0x1bd31f(0x1e1)]=_0x434ec3,isSelectionChanged()?el[_0x1bd31f(0x25d)]['classList']['add'](_0x1bd31f(0x230)):el['btnSave'][_0x1bd31f(0x242)][_0x1bd31f(0x1bb)](_0x1bd31f(0x230));}function updateSelectAllBtn(){const _0xc273ac=a7_0x1237c5;if(!state[_0xc273ac(0x23b)])return;const _0x591a1f=DataService['getProducts'](state['activeCatId']),_0x291bc7=_0x591a1f[_0xc273ac(0x1c8)]>0x0&&_0x591a1f[_0xc273ac(0x1f3)](_0x445e58=>state['selected'][_0xc273ac(0x24f)](_0x445e58['id']));el['btnSelectAll'][_0xc273ac(0x1e1)]=_0x291bc7?'–°–Ω—è—Ç—å\x20–≤—Å—ë':_0xc273ac(0x202),el[_0xc273ac(0x1ec)][_0xc273ac(0x1b5)]=()=>toggleAllInCategory(_0x591a1f,!_0x291bc7);}function toggleAllInCategory(_0x4eb094,_0x5b8e63){const _0x275f64=a7_0x1237c5;haptic(_0x275f64(0x227)),_0x4eb094[_0x275f64(0x1ed)](_0x256a08=>{const _0x25a248=_0x275f64;if(_0x5b8e63)state['selected'][_0x25a248(0x223)](_0x256a08['id']);else state[_0x25a248(0x1f6)][_0x25a248(0x21d)](_0x256a08['id']);}),saveSelectionToCache(),startInfiniteRender(_0x4eb094,el[_0x275f64(0x1ff)]),updateSelectAllBtn(),updateSaveButton();}function handleSearch(_0x4fae55){const _0x3bec6f=a7_0x1237c5,_0x2e5cd5=_0x4fae55[_0x3bec6f(0x244)]['value'][_0x3bec6f(0x209)]()['trim']();if(_0x2e5cd5['length']>0x0){if(!state[_0x3bec6f(0x1ce)])enterSearchMode();const _0x44205f=DataService['search'](_0x2e5cd5);el[_0x3bec6f(0x25c)][_0x3bec6f(0x1bc)][_0x3bec6f(0x24c)]=_0x3bec6f(0x1c7),startInfiniteRender(_0x44205f,el[_0x3bec6f(0x25c)],!![]);}else el[_0x3bec6f(0x25c)][_0x3bec6f(0x1bd)]='';}function clearSearch(){exitSearchMode();}async function saveSelection(){const _0x29a2a9=a7_0x1237c5;haptic(_0x29a2a9(0x227));if(state[_0x29a2a9(0x23b)]&&!state[_0x29a2a9(0x1ce)]){goBack();return;}const _0xe512a5=el[_0x29a2a9(0x1cb)][_0x29a2a9(0x1e1)];el['saveBtnText'][_0x29a2a9(0x1e1)]=_0x29a2a9(0x232),el[_0x29a2a9(0x25d)][_0x29a2a9(0x1bc)][_0x29a2a9(0x1d1)]='none';const _0x179f52=await DataService['saveSelectionToServer']();_0x179f52?(el[_0x29a2a9(0x1cb)][_0x29a2a9(0x1e1)]=_0x29a2a9(0x1f1),state[_0x29a2a9(0x1dc)]=new Set(state[_0x29a2a9(0x1f6)]),setTimeout(()=>{const _0x20f4d8=_0x29a2a9;el['btnSave'][_0x20f4d8(0x1bc)][_0x20f4d8(0x1d1)]=_0x20f4d8(0x221),el[_0x20f4d8(0x1cb)][_0x20f4d8(0x1e1)]=_0xe512a5,updateSaveButton();if(state[_0x20f4d8(0x1ce)])exitSearchMode();},0x320)):(el[_0x29a2a9(0x1cb)][_0x29a2a9(0x1e1)]=_0x29a2a9(0x266),setTimeout(()=>{const _0x16adc1=_0x29a2a9;el[_0x16adc1(0x25d)][_0x16adc1(0x1bc)][_0x16adc1(0x1d1)]=_0x16adc1(0x221),el[_0x16adc1(0x1cb)][_0x16adc1(0x1e1)]=_0xe512a5;},0x7d0));}function enterSearchMode(){const _0x29e51e=a7_0x1237c5;state['searchMode']=!![];el[_0x29e51e(0x220)]&&(el['btnSearchCancel'][_0x29e51e(0x1e1)]=_0x29e51e(0x238),el['btnSearchCancel'][_0x29e51e(0x1bc)][_0x29e51e(0x1de)]=_0x29e51e(0x252));document[_0x29e51e(0x1e7)][_0x29e51e(0x242)][_0x29e51e(0x223)](_0x29e51e(0x241)),el[_0x29e51e(0x1e9)][_0x29e51e(0x242)][_0x29e51e(0x1bb)](_0x29e51e(0x256)),el[_0x29e51e(0x237)][_0x29e51e(0x242)][_0x29e51e(0x1bb)](_0x29e51e(0x256)),el[_0x29e51e(0x1cd)][_0x29e51e(0x242)][_0x29e51e(0x223)](_0x29e51e(0x256));if(tg)tg[_0x29e51e(0x234)][_0x29e51e(0x213)]();}function exitSearchMode(){const _0x3d56df=a7_0x1237c5;state[_0x3d56df(0x1ce)]=![],document[_0x3d56df(0x1e7)][_0x3d56df(0x242)][_0x3d56df(0x1bb)]('search-active'),el[_0x3d56df(0x1d3)]['blur'](),el[_0x3d56df(0x1cd)][_0x3d56df(0x242)]['remove'](_0x3d56df(0x256)),el['searchResults'][_0x3d56df(0x1bc)]['display']=_0x3d56df(0x20f),el['searchInput'][_0x3d56df(0x22f)]='';if(state[_0x3d56df(0x23b)])el[_0x3d56df(0x237)][_0x3d56df(0x242)][_0x3d56df(0x223)](_0x3d56df(0x256));else el[_0x3d56df(0x1e9)][_0x3d56df(0x242)][_0x3d56df(0x223)](_0x3d56df(0x256)),renderCategories();updateSaveButton();}init();