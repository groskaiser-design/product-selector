const a3_0x3f8a87=a3_0x5e5a;(function(_0x4aeffb,_0x2006f1){const _0x3ceb5f=a3_0x5e5a,_0x56a838=_0x4aeffb();while(!![]){try{const _0x42db91=parseInt(_0x3ceb5f(0xfa))/0x1+-parseInt(_0x3ceb5f(0x166))/0x2+-parseInt(_0x3ceb5f(0x17d))/0x3*(-parseInt(_0x3ceb5f(0x1db))/0x4)+-parseInt(_0x3ceb5f(0x10d))/0x5*(-parseInt(_0x3ceb5f(0x1b6))/0x6)+-parseInt(_0x3ceb5f(0x102))/0x7*(parseInt(_0x3ceb5f(0x157))/0x8)+parseInt(_0x3ceb5f(0x134))/0x9*(parseInt(_0x3ceb5f(0xfc))/0xa)+-parseInt(_0x3ceb5f(0x1d9))/0xb;if(_0x42db91===_0x2006f1)break;else _0x56a838['push'](_0x56a838['shift']());}catch(_0x35a97e){_0x56a838['push'](_0x56a838['shift']());}}}(a3_0x354c,0xa5bca));const APP_VERSION='v9.5-CLIENT-ANALYTICS',API_URL=a3_0x3f8a87(0x14e),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x3f8a87(0x176);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x3f8a87(0x164),coachProfiles={},currentSession=null,lastUserActionTime=0x0;function a3_0x5e5a(_0x36bac1,_0x4eea43){_0x36bac1=_0x36bac1-0xeb;const _0x5c3615=a3_0x354c();let _0x1c43f9=_0x5c3615[_0x36bac1];return _0x1c43f9;}(function initTMA(){const _0x406250=a3_0x3f8a87,_0x1cb0fd=(function(){let _0x20a026=!![];return function(_0x120adb,_0xa2a2e){const _0x2d48a4=_0x20a026?function(){const _0x4124d3=a3_0x5e5a;if(_0xa2a2e){const _0x1e6986=_0xa2a2e[_0x4124d3(0x122)](_0x120adb,arguments);return _0xa2a2e=null,_0x1e6986;}}:function(){};return _0x20a026=![],_0x2d48a4;};}()),_0x128c2b=_0x1cb0fd(this,function(){const _0x42f202=a3_0x5e5a;return _0x128c2b[_0x42f202(0x1b7)]()['search']('(((.+)+)+)+$')[_0x42f202(0x1b7)]()[_0x42f202(0x185)](_0x128c2b)['search'](_0x42f202(0x120));});_0x128c2b();try{const _0x54bcf1=window[_0x406250(0x10f)]?.['WebApp'];if(!_0x54bcf1)return;_0x54bcf1[_0x406250(0x158)](),_0x54bcf1[_0x406250(0x1d0)]();try{_0x54bcf1['setHeaderColor'](_0x406250(0x186)),_0x54bcf1[_0x406250(0x1e3)]&&_0x54bcf1[_0x406250(0x1e3)]('#050505');}catch(_0x123ead){console[_0x406250(0x1cd)](_0x406250(0x18d),_0x123ead);}try{_0x54bcf1['BackButton']&&(_0x54bcf1[_0x406250(0x1c2)]['show'](),_0x54bcf1[_0x406250(0x1c2)][_0x406250(0xf7)](),_0x54bcf1[_0x406250(0x1c2)]['onClick'](function(){const _0x279ff1=_0x406250;window[_0x279ff1(0x119)][_0x279ff1(0x17c)]=_0x279ff1(0x19f);}));}catch(_0x5ad3b2){console['log']('Error\x20setting\x20back\x20button:',_0x5ad3b2);}try{if(_0x54bcf1[_0x406250(0x1a2)])_0x54bcf1['disableVerticalSwipes']();}catch(_0x3d03bc){}}catch(_0x12dc20){console[_0x406250(0x162)](_0x406250(0x1c9),_0x12dc20);}}());function isAdmin(){const _0x43064c=a3_0x3f8a87;try{const _0x1fd258=Number(window['Telegram']?.[_0x43064c(0x112)]?.[_0x43064c(0x18b)]?.[_0x43064c(0x18f)]?.['id']);return _0x1fd258===0xbaf7174;}catch(_0x2cfe69){return![];}}const DataManager={'saveLocally'(){const _0x2f336a=a3_0x3f8a87;try{localStorage[_0x2f336a(0x12d)](KEY_SESSIONS,JSON[_0x2f336a(0x18a)](sessions)),localStorage[_0x2f336a(0x12d)](KEY_CLIENTS,JSON[_0x2f336a(0x18a)](clients)),localStorage[_0x2f336a(0x12d)](KEY_SETTINGS,JSON[_0x2f336a(0x18a)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x1b9ac1){}},'loadLocal'(){const _0x55e127=a3_0x3f8a87;try{const _0x3f00f2=localStorage['getItem'](KEY_SESSIONS);if(_0x3f00f2)sessions=JSON['parse'](_0x3f00f2);const _0x33f41a=localStorage[_0x55e127(0xfd)](KEY_CLIENTS);if(_0x33f41a)clients=JSON[_0x55e127(0x11f)](_0x33f41a);const _0x3efb6a=localStorage['getItem'](KEY_SETTINGS);if(_0x3efb6a){const _0xe6a3bf=JSON[_0x55e127(0x11f)](_0x3efb6a);if(_0xe6a3bf[_0x55e127(0x167)])availabilityPattern=_0xe6a3bf[_0x55e127(0x167)];if(_0xe6a3bf[_0x55e127(0x115)])specialRanges=_0xe6a3bf[_0x55e127(0x115)];if(_0xe6a3bf[_0x55e127(0x159)])dateExceptions=_0xe6a3bf[_0x55e127(0x159)];}}catch(_0x846cdf){}},async 'syncLoad'(){const _0x3b13fa=a3_0x3f8a87,_0x1e5a0d=new Date(),_0x5de2bd=_0x1e5a0d[_0x3b13fa(0x142)]()+'-'+String(_0x1e5a0d[_0x3b13fa(0x1a7)]()+0x1)[_0x3b13fa(0x10c)](0x2,'0'),_0x7d5405=new Date(_0x1e5a0d);_0x7d5405['setMonth'](_0x1e5a0d[_0x3b13fa(0x1a7)]()+0x1);const _0x4dde21=_0x7d5405['getFullYear']()+'-'+String(_0x7d5405[_0x3b13fa(0x1a7)]()+0x1)[_0x3b13fa(0x10c)](0x2,'0'),_0x60a58=Date[_0x3b13fa(0x148)]();try{const _0x595b29=window['Telegram']?.['WebApp'],_0x77fa66=_0x595b29?.[_0x3b13fa(0x1ae)]||'',[_0x3e9c59,_0x1d499c]=await Promise[_0x3b13fa(0x1bc)]([fetch(API_URL,{'method':_0x3b13fa(0x1b1),'body':JSON['stringify']({'action':_0x3b13fa(0x199),'init_data':_0x77fa66,'month_str':_0x5de2bd})})[_0x3b13fa(0x114)](_0x57c052=>_0x57c052['json']()),fetch(API_URL,{'method':_0x3b13fa(0x1b1),'body':JSON[_0x3b13fa(0x18a)]({'action':_0x3b13fa(0x199),'init_data':_0x77fa66,'month_str':_0x4dde21})})[_0x3b13fa(0x114)](_0x1486ce=>_0x1486ce[_0x3b13fa(0xf0)]())]);if(lastUserActionTime>_0x60a58){console['log'](_0x3b13fa(0x1a4));return;}if(_0x3e9c59['ok'])this[_0x3b13fa(0xf5)](_0x3e9c59[_0x3b13fa(0x16b)],_0x5de2bd);if(_0x1d499c['ok'])this[_0x3b13fa(0xf5)](_0x1d499c[_0x3b13fa(0x16b)],_0x4dde21);this[_0x3b13fa(0x170)]();}catch(_0x2c3c4e){}},'applyData'(_0x40b78c,_0x5a688a){const _0x450ace=a3_0x3f8a87;if(!_0x40b78c)return;if(_0x40b78c[_0x450ace(0x1bb)]){if(_0x40b78c[_0x450ace(0x1bb)][_0x450ace(0x167)])availabilityPattern=_0x40b78c[_0x450ace(0x1bb)][_0x450ace(0x167)];if(_0x40b78c[_0x450ace(0x1bb)][_0x450ace(0x115)])specialRanges=_0x40b78c['settings'][_0x450ace(0x115)];if(_0x40b78c[_0x450ace(0x1bb)][_0x450ace(0x159)])dateExceptions=_0x40b78c[_0x450ace(0x1bb)]['exceptions'];}if(_0x40b78c[_0x450ace(0x17e)]&&Array[_0x450ace(0x1e4)](_0x40b78c['clients']))clients=_0x40b78c[_0x450ace(0x17e)];_0x40b78c[_0x450ace(0x175)]&&(coachProfiles={...coachProfiles,..._0x40b78c[_0x450ace(0x175)]}),_0x40b78c['calendar']&&(sessions=sessions['filter'](_0x42e171=>!_0x42e171[_0x450ace(0x195)]['startsWith'](_0x5a688a)),Object[_0x450ace(0x126)](_0x40b78c[_0x450ace(0x1da)])[_0x450ace(0x100)](_0x565298=>{const _0x590651=_0x450ace,_0x48af72=_0x40b78c['calendar'][_0x565298];_0x48af72[_0x590651(0x100)](_0x2b1309=>{const _0x10d56d=_0x590651;sessions['push']({'id':_0x2b1309['i'],'clientId':_0x2b1309['c'],'coachId':_0x2b1309[_0x10d56d(0x1c4)],'dateStr':_0x5a688a+'-'+_0x565298[_0x10d56d(0x10c)](0x2,'0'),'start':_0x2b1309['s'],'end':_0x2b1309['e'],'note':_0x2b1309['n']||'','status':_0x2b1309['st']||_0x10d56d(0x108),'seriesId':_0x2b1309[_0x10d56d(0x1d3)]});});})),reRenderBlocks();}};function init(){const _0x2a1a96=a3_0x3f8a87;DataManager[_0x2a1a96(0x18e)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x2a1a96(0x1e1)]('matrixViewport')[_0x2a1a96(0x1c0)](_0x2a1a96(0x144),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x2a1a96(0x104)]();}function renderTimeColumn(){const _0x6fbc57=a3_0x3f8a87,_0x37e32a=document['getElementById'](_0x6fbc57(0x1c1)),_0x1165bb=document[_0x6fbc57(0x1e1)](_0x6fbc57(0x146));_0x37e32a[_0x6fbc57(0x197)]='',_0x37e32a[_0x6fbc57(0x17a)](_0x1165bb);for(let _0x33ce71=0x0;_0x33ce71<0x18;_0x33ce71++){const _0x18dd73=document[_0x6fbc57(0x15c)](_0x6fbc57(0x107));_0x18dd73['className']='time-label';if(_0x33ce71>0x0)_0x18dd73['innerHTML']='<span>'+String(_0x33ce71)[_0x6fbc57(0x10c)](0x2,'0')+_0x6fbc57(0x13e);_0x37e32a['appendChild'](_0x18dd73);}}function renderDayRange(_0x6c0a83,_0x3ecade){const _0x1725cb=a3_0x3f8a87,_0x4c79f8=document[_0x1725cb(0x1e1)](_0x1725cb(0x156)),_0x48b14e=document['getElementById']('gridColumns'),_0x27b2cf=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4866a3=new Date();_0x4866a3[_0x1725cb(0x172)](0x0,0x0,0x0,0x0);const _0x2794d8=getLocalDateStr(new Date());for(let _0x266e18=_0x6c0a83;_0x266e18<=_0x3ecade;_0x266e18++){const _0xa5732=new Date(_0x4866a3);_0xa5732[_0x1725cb(0x128)](_0xa5732[_0x1725cb(0x161)]()+_0x266e18);const _0xa956ea=getLocalDateStr(_0xa5732);let _0x447e03=_0xa5732[_0x1725cb(0x165)]()-0x1;if(_0x447e03===-0x1)_0x447e03=0x6;const _0x32bc9e=_0xa956ea===_0x2794d8,_0x140bcf=document[_0x1725cb(0x15c)](_0x1725cb(0x107));_0x140bcf[_0x1725cb(0x14d)]='day-col-header\x20'+(_0x32bc9e?'today':''),_0x140bcf[_0x1725cb(0x111)](_0x1725cb(0x19c),_0xa956ea),_0x140bcf['innerHTML']=_0x1725cb(0x16e)+_0x27b2cf[_0x447e03]+_0x1725cb(0x1c6)+_0xa5732[_0x1725cb(0x161)]()+_0x1725cb(0x193),_0x4c79f8[_0x1725cb(0x17a)](_0x140bcf);const _0x3f0fee=document['createElement'](_0x1725cb(0x107));_0x3f0fee[_0x1725cb(0x14d)]='day-column\x20'+(_0x32bc9e?_0x1725cb(0x15a):''),_0x3f0fee['setAttribute'](_0x1725cb(0x19c),_0xa956ea),_0x3f0fee[_0x1725cb(0x111)](_0x1725cb(0x1a5),_0x447e03),_0x48b14e['appendChild'](_0x3f0fee);}}function reRenderBlocks(){const _0x411703=a3_0x3f8a87;document['querySelectorAll'](_0x411703(0x103))[_0x411703(0x100)](_0xac5774=>{const _0x4e81c3=_0x411703;_0xac5774['querySelectorAll'](_0x4e81c3(0x190))[_0x4e81c3(0x100)](_0xe4b632=>_0xe4b632[_0x4e81c3(0xf2)]());const _0x49c7d5=_0xac5774['getAttribute'](_0x4e81c3(0x19c)),_0x16b40d=parseInt(_0xac5774[_0x4e81c3(0xef)](_0x4e81c3(0x1a5))),_0x1893a9=Math[_0x4e81c3(0x137)](_0xac5774[_0x4e81c3(0x12b)]);(availabilityPattern[_0x16b40d]||[])['forEach'](_0x894e36=>{const _0xe4f2d2=_0x4e81c3,_0x2c9498=document[_0xe4f2d2(0x15c)]('div');_0x2c9498['className']='blocked-slot\x20stripe-bg',_0x2c9498[_0xe4f2d2(0x194)][_0xe4f2d2(0x132)]=_0x894e36*GRID_H+'px',_0x2c9498[_0xe4f2d2(0x194)]['backgroundPosition']='-'+_0x1893a9+'px\x20-'+_0x894e36*GRID_H+'px',_0xac5774[_0xe4f2d2(0x17a)](_0x2c9498);});if(specialRanges['length']>0x0){const _0xcd4f3d=new Date(_0x49c7d5+_0x4e81c3(0x1b5))[_0x4e81c3(0x1aa)](),_0x4bf389=new Date(_0x49c7d5+'T23:59:59')[_0x4e81c3(0x1aa)]();specialRanges[_0x4e81c3(0x100)](_0x55104a=>{const _0x345e2c=_0x4e81c3,_0x1f30b0=new Date(_0x55104a[_0x345e2c(0x106)])['getTime'](),_0x4c5c0f=new Date(_0x55104a[_0x345e2c(0x1ab)])[_0x345e2c(0x1aa)](),_0x2ea1c2=Math['max'](_0xcd4f3d,_0x1f30b0),_0x52a412=Math[_0x345e2c(0x1d2)](_0x4bf389,_0x4c5c0f);if(_0x2ea1c2<_0x52a412){const _0x1e63aa=(_0x2ea1c2-_0xcd4f3d)/0x36ee80*GRID_H,_0x51fe81=(_0x52a412-_0x2ea1c2)/0x36ee80*GRID_H,_0x2fd6b7=document[_0x345e2c(0x15c)](_0x345e2c(0x107));_0x51fe81>=23.5*GRID_H?(_0x2fd6b7[_0x345e2c(0x14d)]=_0x345e2c(0x19a),_0x2fd6b7[_0x345e2c(0x194)]['backgroundPosition']='-'+_0x1893a9+_0x345e2c(0x1d6)):(_0x2fd6b7[_0x345e2c(0x14d)]=_0x345e2c(0x169),_0x2fd6b7[_0x345e2c(0x194)][_0x345e2c(0x132)]=_0x1e63aa+'px',_0x2fd6b7[_0x345e2c(0x194)][_0x345e2c(0x13c)]=_0x51fe81+'px',_0x2fd6b7[_0x345e2c(0x194)][_0x345e2c(0x177)]='-'+_0x1893a9+_0x345e2c(0x1d1)+_0x1e63aa+'px'),_0xac5774[_0x345e2c(0x17a)](_0x2fd6b7);}});}renderEventsForColumn(_0xac5774,_0x49c7d5);});}function renderEventsForColumn(_0x2ed8e5,_0x1d40bb){const _0x3ddac5=a3_0x3f8a87,_0x3813be=sessions[_0x3ddac5(0x138)](_0x4f95e4=>_0x4f95e4[_0x3ddac5(0x195)]===_0x1d40bb),_0x508ada=_0x3813be[_0x3ddac5(0x15d)](_0xad9cad=>{const _0x54df1c=_0x3ddac5,[_0x53e9ab,_0x1e284d]=_0xad9cad[_0x54df1c(0x106)]['split'](':')[_0x54df1c(0x15d)](Number),[_0x28d319,_0x58379e]=_0xad9cad[_0x54df1c(0x1ab)][_0x54df1c(0x16c)](':')['map'](Number);return{'data':_0xad9cad,'start':_0x53e9ab*0x3c+_0x1e284d,'end':_0x28d319*0x3c+_0x58379e,'colIndex':0x0};});_0x508ada[_0x3ddac5(0x117)]((_0x3d049b,_0x4057a2)=>_0x3d049b[_0x3ddac5(0x106)]-_0x4057a2[_0x3ddac5(0x106)]||_0x4057a2[_0x3ddac5(0x1ab)]-_0x4057a2['start']-(_0x3d049b[_0x3ddac5(0x1ab)]-_0x3d049b['start']));const _0x1ca5a9=[];_0x508ada[_0x3ddac5(0x100)](_0x5bfa3a=>{const _0x26fa82=_0x3ddac5;let _0x2b01e0=![];for(let _0x5d1e88=0x0;_0x5d1e88<_0x1ca5a9[_0x26fa82(0x1a8)];_0x5d1e88++){const _0x4872ed=_0x1ca5a9[_0x5d1e88];if(_0x5bfa3a['start']>=_0x4872ed[_0x4872ed[_0x26fa82(0x1a8)]-0x1]['end']){_0x4872ed[_0x26fa82(0x191)](_0x5bfa3a),_0x5bfa3a[_0x26fa82(0x1e2)]=_0x5d1e88,_0x2b01e0=!![];break;}}!_0x2b01e0&&(_0x1ca5a9[_0x26fa82(0x191)]([_0x5bfa3a]),_0x5bfa3a['colIndex']=_0x1ca5a9['length']-0x1);}),_0x508ada[_0x3ddac5(0x100)](_0x27551a=>{const _0x463dba=_0x3ddac5;let _0x38630b=0x0;_0x508ada['forEach'](_0x55981d=>{const _0x7326de=a3_0x5e5a;if(Math[_0x7326de(0x1ad)](_0x27551a[_0x7326de(0x106)],_0x55981d['start'])<Math[_0x7326de(0x1d2)](_0x27551a[_0x7326de(0x1ab)],_0x55981d[_0x7326de(0x1ab)])&&_0x55981d[_0x7326de(0x1e2)]>_0x38630b)_0x38630b=_0x55981d['colIndex'];});const _0x124095=_0x38630b+0x1,_0x33e113=0x64/_0x124095,_0xb45ec9=_0x27551a['colIndex']*_0x33e113,_0x18826d=document[_0x463dba(0x15c)](_0x463dba(0x107)),_0x5f33d7=_0x27551a[_0x463dba(0x16b)];let _0x3723f8=_0x463dba(0x14f);if(clients&&clients[_0x463dba(0x1a8)]>0x0){const _0x4e9033=clients[_0x463dba(0x1c7)](_0x4474bd=>String(_0x4474bd['id'])===String(_0x5f33d7[_0x463dba(0x140)]));if(_0x4e9033&&_0x4e9033[_0x463dba(0x154)])_0x3723f8=_0x4e9033[_0x463dba(0x154)];}const _0x2fb063=_0x5f33d7['status']===_0x463dba(0x173),_0x4eaaea=_0x2fb063?0x1:0.45;_0x18826d[_0x463dba(0x14d)]=_0x463dba(0x16a)+(_0x2fb063?'\x20status-completed':''),_0x18826d[_0x463dba(0x194)][_0x463dba(0x149)]=hexToRgba(_0x3723f8,_0x4eaaea),_0x18826d['style'][_0x463dba(0xed)]=_0x3723f8;const _0x20863c=_0x27551a[_0x463dba(0x106)]/0x3c*GRID_H,_0x49ff75=(_0x27551a['end']-_0x27551a[_0x463dba(0x106)])/0x3c*GRID_H;_0x18826d[_0x463dba(0x194)][_0x463dba(0x132)]=_0x20863c+'px',_0x18826d[_0x463dba(0x194)][_0x463dba(0x13c)]=Math[_0x463dba(0x1ad)](_0x49ff75,0x14)+'px',_0x18826d[_0x463dba(0x194)][_0x463dba(0x143)]='calc('+_0x33e113+_0x463dba(0x125),_0x18826d[_0x463dba(0x194)][_0x463dba(0x1ce)]=_0x463dba(0xf8)+_0xb45ec9+'%\x20+\x202px)',_0x18826d[_0x463dba(0x194)][_0x463dba(0x1b4)]=0xa+_0x27551a[_0x463dba(0x1e2)];if(_0x33e113<0x55)_0x18826d[_0x463dba(0xf1)][_0x463dba(0x141)](_0x463dba(0x187));let _0x323575='';if(_0x5f33d7[_0x463dba(0x1d7)])_0x323575+=_0x463dba(0x101);if(_0x2fb063)_0x323575+=_0x463dba(0x163);_0x18826d[_0x463dba(0x197)]=_0x463dba(0x116)+_0x5f33d7[_0x463dba(0x106)]+_0x463dba(0x1df)+_0x5f33d7[_0x463dba(0x1ab)]+_0x463dba(0x123)+_0x323575+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x18826d[_0x463dba(0x131)]=_0x102fb2=>{_0x102fb2['stopPropagation'](),openDetails(_0x5f33d7);},_0x2ed8e5[_0x463dba(0x17a)](_0x18826d);});}function openAnalytics(){const _0x36858d=a3_0x3f8a87,_0x102cc2=document[_0x36858d(0x1ca)](_0x36858d(0x1c5));setAnalyticsPeriod(_0x36858d(0x164),_0x102cc2),openSheet(_0x36858d(0x155));}function setAnalyticsPeriod(_0x2a2b56,_0x2fa4ba){const _0x20c54f=a3_0x3f8a87;currentAnPeriod=_0x2a2b56,document[_0x20c54f(0x127)](_0x20c54f(0x1c5))[_0x20c54f(0x100)](_0x41990f=>_0x41990f[_0x20c54f(0xf1)][_0x20c54f(0xf2)](_0x20c54f(0x13f)));if(_0x2fa4ba)_0x2fa4ba[_0x20c54f(0xf1)][_0x20c54f(0x141)]('active');const _0x286d2a=document[_0x20c54f(0x1e1)](_0x20c54f(0xfe));_0x286d2a[_0x20c54f(0x194)][_0x20c54f(0x182)]=_0x2a2b56===_0x20c54f(0x1ba)?_0x20c54f(0x14b):_0x20c54f(0x139);const _0xc9f3fa=new Date();let _0x594998=new Date(),_0x555abc=new Date();if(_0x2a2b56===_0x20c54f(0x164))_0x594998=getStartOfWeek(_0xc9f3fa),_0x555abc=new Date(_0x594998),_0x555abc[_0x20c54f(0x128)](_0x555abc[_0x20c54f(0x161)]()+0x6);else{if(_0x2a2b56===_0x20c54f(0x1be))_0x594998=new Date(_0xc9f3fa['getFullYear'](),_0xc9f3fa[_0x20c54f(0x1a7)](),0x1),_0x555abc=new Date(_0xc9f3fa[_0x20c54f(0x142)](),_0xc9f3fa[_0x20c54f(0x1a7)]()+0x1,0x0);else{!document[_0x20c54f(0x1e1)]('anStart')['value']&&(document[_0x20c54f(0x1e1)](_0x20c54f(0x1e0))[_0x20c54f(0x1a9)]=getLocalDateStr(_0xc9f3fa),document[_0x20c54f(0x1e1)](_0x20c54f(0x19e))['value']=getLocalDateStr(_0xc9f3fa));refreshAnalytics();return;}}document[_0x20c54f(0x1e1)](_0x20c54f(0x1e0))['value']=getLocalDateStr(_0x594998),document['getElementById']('anEnd')[_0x20c54f(0x1a9)]=getLocalDateStr(_0x555abc),refreshAnalytics();}function refreshAnalytics(){const _0x30580e=a3_0x3f8a87,_0x8dd682=document[_0x30580e(0x1e1)](_0x30580e(0x1e0))['value'],_0x25c01a=document[_0x30580e(0x1e1)](_0x30580e(0x19e))[_0x30580e(0x1a9)];if(!_0x8dd682||!_0x25c01a)return;const _0x4672c2=sessions[_0x30580e(0x138)](_0x363366=>_0x363366['dateStr']>=_0x8dd682&&_0x363366['dateStr']<=_0x25c01a&&_0x363366[_0x30580e(0x129)]!==_0x30580e(0x1ac)),_0xa588d7=_0x4672c2[_0x30580e(0x1a8)],_0xd0d78c=_0x4672c2[_0x30580e(0x138)](_0x22cfed=>_0x22cfed[_0x30580e(0x129)]==='completed')['length'],_0x373ec5=_0xa588d7>0x0?Math['round'](_0xd0d78c/_0xa588d7*0x64):0x0;document[_0x30580e(0x1e1)](_0x30580e(0x12e))['textContent']=_0x373ec5+'%',document['getElementById']('anTotalStats')[_0x30580e(0x1c8)]=_0xd0d78c+_0x30580e(0x1b8)+_0xa588d7+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x31f48b=document[_0x30580e(0x1e1)](_0x30580e(0x17f)),_0x1e2e37=0x2*Math['PI']*0x23,_0x57eeba=_0x1e2e37-_0x373ec5/0x64*_0x1e2e37;_0x31f48b[_0x30580e(0x194)][_0x30580e(0x1a6)]=_0x57eeba;const _0x43306f={};_0x4672c2['forEach'](_0xe62dbb=>{const _0x461a79=_0x30580e,_0x179c70=_0xe62dbb[_0x461a79(0x13a)]||_0x461a79(0x113);if(!_0x43306f[_0x179c70]){const _0x417d06='#'+_0x179c70['toString']()[_0x461a79(0xff)](0x0,0x6);_0x43306f[_0x179c70]={'total':0x0,'done':0x0,'color':_0x417d06};}_0x43306f[_0x179c70][_0x461a79(0x1b3)]++;if(_0xe62dbb['status']===_0x461a79(0x173))_0x43306f[_0x179c70][_0x461a79(0x14a)]++;});const _0x17b722=document[_0x30580e(0x1e1)]('analyticsList');_0x17b722[_0x30580e(0x197)]='';const _0x135d83=Object[_0x30580e(0xee)](_0x43306f)[_0x30580e(0x117)]((_0x161a72,_0x4bc514)=>_0x4bc514[0x1]['total']-_0x161a72[0x1][_0x30580e(0x1b3)]);if(_0x135d83['length']===0x0){_0x17b722['innerHTML']=_0x30580e(0x1e6);return;}_0x135d83[_0x30580e(0x100)](([_0x4623fb,_0x35d4ef])=>{const _0x1cfcf7=_0x30580e,_0x4b76e7=Math[_0x1cfcf7(0x137)](_0x35d4ef[_0x1cfcf7(0x14a)]/_0x35d4ef[_0x1cfcf7(0x1b3)]*0x64),_0x4153bc=document['createElement'](_0x1cfcf7(0x107));_0x4153bc[_0x1cfcf7(0x14d)]=_0x1cfcf7(0x189),_0x4153bc[_0x1cfcf7(0x194)][_0x1cfcf7(0xed)]=_0x35d4ef[_0x1cfcf7(0x154)],_0x4153bc[_0x1cfcf7(0x197)]=_0x1cfcf7(0x124)+_0x4623fb['substr'](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x35d4ef[_0x1cfcf7(0x14a)]+_0x1cfcf7(0x15e)+_0x35d4ef[_0x1cfcf7(0x1b3)]+_0x1cfcf7(0x1bf)+_0x4b76e7+_0x1cfcf7(0x198),_0x17b722[_0x1cfcf7(0x17a)](_0x4153bc);});}function openDetails(_0x4e8037){const _0x5998a8=a3_0x3f8a87;currentSession=_0x4e8037;const _0x353b8e=new Date(_0x4e8037[_0x5998a8(0x195)]),_0x1797de=_0x353b8e[_0x5998a8(0x150)](_0x5998a8(0x10e),{'weekday':_0x5998a8(0x1af),'day':_0x5998a8(0x15b),'month':'long'});document[_0x5998a8(0x1e1)](_0x5998a8(0x174))[_0x5998a8(0x1c8)]=_0x1797de['charAt'](0x0)[_0x5998a8(0x1d8)]()+_0x1797de[_0x5998a8(0x11a)](0x1),document[_0x5998a8(0x1e1)](_0x5998a8(0x18c))[_0x5998a8(0x1c8)]=_0x4e8037[_0x5998a8(0x106)]+'\x20-\x20'+_0x4e8037['end'],document[_0x5998a8(0x1e1)](_0x5998a8(0x153))[_0x5998a8(0x1c8)]=_0x4e8037['note']||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x6a05cc=document[_0x5998a8(0x1e1)](_0x5998a8(0x180)),_0x1079f3=document[_0x5998a8(0x1e1)](_0x5998a8(0x178)),_0x2c0ec4=_0x1079f3[_0x5998a8(0x1ca)]('.btn-cancel'),_0x46b354=_0x1079f3[_0x5998a8(0x1ca)](_0x5998a8(0x110)),_0x1f5f1c=document[_0x5998a8(0x1e1)](_0x5998a8(0xf4));if(_0x4e8037['status']===_0x5998a8(0x173))_0x6a05cc[_0x5998a8(0x1c8)]=_0x5998a8(0x121),_0x6a05cc[_0x5998a8(0x194)]['color']=_0x5998a8(0x11e),_0x1079f3[_0x5998a8(0x194)][_0x5998a8(0x182)]=_0x5998a8(0x139);else{_0x6a05cc[_0x5998a8(0x1c8)]='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x6a05cc[_0x5998a8(0x194)][_0x5998a8(0x154)]='var(--acc-blue)',_0x1079f3[_0x5998a8(0x194)][_0x5998a8(0x182)]=_0x5998a8(0x1cc);const _0x503f09=new Date(_0x4e8037[_0x5998a8(0x195)]+'T'+_0x4e8037['start']),_0x392a22=new Date(),_0x119ad7=(_0x503f09-_0x392a22)/(0x3e8*0x3c*0x3c),_0x413182=coachProfiles[_0x4e8037[_0x5998a8(0x13a)]]&&coachProfiles[_0x4e8037[_0x5998a8(0x13a)]]['cancel_window']?parseInt(coachProfiles[_0x4e8037['coachId']][_0x5998a8(0x192)]):0x18;if(_0x413182===0x0||_0x119ad7>=_0x413182)_0x2c0ec4[_0x5998a8(0x194)][_0x5998a8(0x182)]=_0x5998a8(0x1cc),_0x46b354[_0x5998a8(0x194)][_0x5998a8(0x182)]=_0x5998a8(0x1cc),_0x1f5f1c[_0x5998a8(0x194)][_0x5998a8(0x182)]=_0x5998a8(0x139);else{_0x2c0ec4[_0x5998a8(0x194)][_0x5998a8(0x182)]=_0x5998a8(0x139),_0x46b354[_0x5998a8(0x194)][_0x5998a8(0x182)]=_0x5998a8(0x139),_0x1f5f1c['style'][_0x5998a8(0x182)]='block';let _0x179336=_0x413182===0x0?_0x5998a8(0x1de):'–∑–∞\x20'+_0x413182+_0x5998a8(0x1b0);_0x1f5f1c[_0x5998a8(0x1c8)]=_0x5998a8(0x147)+_0x179336+_0x5998a8(0x15f);}}document['getElementById'](_0x5998a8(0x196))[_0x5998a8(0xf1)]['add'](_0x5998a8(0x13f)),document[_0x5998a8(0x1e1)]('detailsSheet')[_0x5998a8(0xf1)][_0x5998a8(0x141)](_0x5998a8(0x17b));}function closeAllSheets(){const _0x5008ed=a3_0x3f8a87;document[_0x5008ed(0x1e1)](_0x5008ed(0x196))[_0x5008ed(0xf1)]['remove'](_0x5008ed(0x13f)),document[_0x5008ed(0x127)](_0x5008ed(0x12a))[_0x5008ed(0x100)](_0xacf46e=>_0xacf46e[_0x5008ed(0xf1)][_0x5008ed(0xf2)](_0x5008ed(0x17b)));}function openSheet(_0x500e46){const _0x5b4d0f=a3_0x3f8a87;document[_0x5b4d0f(0x1e1)]('overlay')['classList']['add']('active'),document[_0x5b4d0f(0x1e1)](_0x500e46)[_0x5b4d0f(0xf1)][_0x5b4d0f(0x141)](_0x5b4d0f(0x17b));}function getLocalDateStr(_0x1991ef){const _0x5cb432=a3_0x3f8a87,_0x125125=_0x1991ef['getFullYear'](),_0x42bd21=String(_0x1991ef[_0x5cb432(0x1a7)]()+0x1)[_0x5cb432(0x10c)](0x2,'0'),_0x1d949e=String(_0x1991ef['getDate']())[_0x5cb432(0x10c)](0x2,'0');return _0x125125+'-'+_0x42bd21+'-'+_0x1d949e;}function getStartOfWeek(_0x35b8c3){const _0x2b708e=a3_0x3f8a87,_0x37013e=new Date(_0x35b8c3),_0x14651a=_0x37013e[_0x2b708e(0x165)](),_0x126de8=_0x37013e['getDate']()-_0x14651a+(_0x14651a===0x0?-0x6:0x1);return _0x37013e['setDate'](_0x126de8),_0x37013e[_0x2b708e(0x172)](0x0,0x0,0x0,0x0),_0x37013e;}function scrollToToday(){const _0x3ae3aa=getLocalDateStr(new Date());setTimeout(()=>{const _0xf1574f=a3_0x5e5a,_0x5c3520=document[_0xf1574f(0x1ca)](_0xf1574f(0x152)+_0x3ae3aa+'\x22]');if(_0x5c3520){const _0x4d7fbc=document[_0xf1574f(0x1e1)]('matrixViewport'),_0x547dda=_0x5c3520[_0xf1574f(0x12b)]-_0x4d7fbc[_0xf1574f(0x179)]/0x2+_0x5c3520[_0xf1574f(0x1a1)]/0x2;_0x4d7fbc[_0xf1574f(0x12f)]({'left':_0x547dda,'behavior':_0xf1574f(0x188)}),_0x4d7fbc['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function a3_0x354c(){const _0x9c7e3b=['start','div','planned','insertBefore','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','floor','padStart','106690onipID','ru-RU','Telegram','.btn-reschedule','setAttribute','WebApp','Unknown','then','ranges','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','sort','–û—Ç–º–µ–Ω–µ–Ω–æ','location','slice','600','toLocaleString','rgba(','var(--acc-green)','parse','(((.+)+)+)+$','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','apply','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','%\x20-\x204px)','keys','querySelectorAll','setDate','status','.sheet','offsetLeft','fontWeight','setItem','anPercent','scrollTo','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','onclick','top','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','9EyUTBD','matrixViewport','substring','round','filter','none','coachId','toast','height','rsDatesTrack',':00</span>','active','clientId','add','getFullYear','width','scroll','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','timeLineBadge','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','now','backgroundColor','done','flex','headerMonth','className','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','#0a84ff','toLocaleDateString','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','.day-col-header[data-date=\x22','detNote','color','analyticsSheet','daysHeaderTrack','6968mvnaIx','ready','exceptions','today','numeric','createElement','map','</span>\x20/\x20','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','gridColumns','getDate','error','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','week','getDay','1018576BVTgLP','pattern','getMinutes','blocked-range-part\x20stripe-bg','event-card','data','split','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','<div\x20class=\x22dch-day\x22>','client_cancel','saveLocally','rescheduleSheet','setHours','completed','detDate','coach_profiles','uc_client_list','backgroundPosition','cancelContainer','clientWidth','appendChild','open','href','544974BJiHZL','clients','anDonutCircle','detStatus','visible','display','rs-date-chip','#ff453a','constructor','#050505','mini','auto','client-stat-card','stringify','initDataUnsafe','detTime','Error\x20setting\x20color:','loadLocal','user','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','push','cancel_window','</div>','style','dateStr','overlay','innerHTML','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','client_load','day-off-overlay\x20stripe-bg','firstChild','data-date','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','anEnd','router.html','findIndex','offsetWidth','disableVerticalSwipes','customConfirm','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','data-day-idx','strokeDashoffset','getMonth','length','value','getTime','end','cancelled','max','initData','long','\x20—á.','POST','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','total','zIndex','T00:00:00','24axdnEW','toString','\x20–∏–∑\x20','button','custom','settings','all','scrollLeft','month','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','addEventListener','timeColumn','BackButton','createDocumentFragment','cid','.period-switch\x20.p-btn','</div><div\x20class=\x22dch-num\x22>','find','textContent','Critical\x20TMA\x20Error:','querySelector','\x20–≤\x20','block','log','left','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','expand','px\x20-','min','sid','rgba(10,\x20132,\x20255,\x20','join','px\x200px','seriesId','toUpperCase','21462837gAcunR','calendar','24QcNXyn','test','rsSlotsGrid','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','\x20-\x20','anStart','getElementById','colIndex','setBackgroundColor','isArray','detailsSheet','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','reschedule','DOMContentLoaded','borderLeftColor','entries','getAttribute','json','classList','remove','ccTitle','cancelHint','applyData','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','offClick','calc(','</div><div\x20class=\x22rs-day-num\x22>','1050540zBkqaU','show','12601310EbvSbl','getItem','anCustomDates','substr','forEach','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','2786vfPIvm','.day-column','syncLoad','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'];a3_0x354c=function(){return _0x9c7e3b;};return a3_0x354c();}function updateClock(){const _0x8eff15=a3_0x3f8a87,_0x4b7edf=new Date(),_0x5cb6b1=document[_0x8eff15(0x1e1)]('globalTimeLine'),_0x30ea46=document[_0x8eff15(0x1e1)]('timeLineBadge'),_0x14fb34=(_0x4b7edf['getHours']()*0x3c+_0x4b7edf[_0x8eff15(0x168)]())/0x3c*GRID_H;_0x5cb6b1[_0x8eff15(0x194)][_0x8eff15(0x132)]=_0x14fb34+'px',_0x5cb6b1['style'][_0x8eff15(0x182)]=_0x8eff15(0x1cc),_0x30ea46[_0x8eff15(0x194)][_0x8eff15(0x132)]=_0x14fb34+'px',_0x30ea46[_0x8eff15(0x194)][_0x8eff15(0x182)]='block',_0x30ea46[_0x8eff15(0x1c8)]=String(_0x4b7edf['getHours']())[_0x8eff15(0x10c)](0x2,'0')+':'+String(_0x4b7edf[_0x8eff15(0x168)]())[_0x8eff15(0x10c)](0x2,'0');}function onScroll(){const _0x3f905a=a3_0x3f8a87,_0x2f33cb=document['getElementById'](_0x3f905a(0x135)),_0xbc103b=document['querySelectorAll']('.day-col-header');for(let _0x2d9140 of _0xbc103b)if(_0x2d9140[_0x3f905a(0x12b)]>=_0x2f33cb['scrollLeft']){const _0x1792cb=new Date(_0x2d9140[_0x3f905a(0xef)](_0x3f905a(0x19c)));document[_0x3f905a(0x1e1)](_0x3f905a(0x14c))['textContent']=_0x1792cb[_0x3f905a(0x11c)]('ru',{'month':_0x3f905a(0x1af)})['toUpperCase']()+'\x20'+_0x1792cb[_0x3f905a(0x142)]();break;}}function showToast(_0x5d9dc8){const _0x322abd=a3_0x3f8a87,_0x3eba41=document['getElementById'](_0x322abd(0x13b));_0x3eba41['textContent']=_0x5d9dc8,_0x3eba41[_0x322abd(0xf1)]['add'](_0x322abd(0xfb)),setTimeout(()=>_0x3eba41[_0x322abd(0xf1)]['remove'](_0x322abd(0xfb)),0x7d0);}function handleInfiniteScroll(){const _0x4de603=a3_0x3f8a87,_0x159de1=document[_0x4de603(0x1e1)](_0x4de603(0x135)),_0x279782=_0x159de1[_0x4de603(0x1bd)],_0x119145=_0x159de1['scrollWidth'],_0x2479d4=_0x159de1['clientWidth'];if(_0x119145-(_0x279782+_0x2479d4)<0x12c){const _0x3d7063=endOffset;endOffset+=0xe,renderDayRange(_0x3d7063+0x1,endOffset),reRenderBlocks();}if(_0x279782<0x12c){const _0x3f3220=startOffset;startOffset-=0xe,prependDays(startOffset,_0x3f3220-0x1),_0x159de1[_0x4de603(0x1bd)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x71ba44,_0x18f6ac){const _0x3a8f13=a3_0x3f8a87,_0x290071=document[_0x3a8f13(0x1e1)](_0x3a8f13(0x156)),_0x1b13ce=document[_0x3a8f13(0x1e1)](_0x3a8f13(0x160)),_0xc3ffb3=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4d629f=new Date();_0x4d629f[_0x3a8f13(0x172)](0x0,0x0,0x0,0x0);const _0x14596c=getLocalDateStr(new Date()),_0x1764e0=document[_0x3a8f13(0x1c3)](),_0xda5e1e=document['createDocumentFragment']();for(let _0x70f04c=_0x71ba44;_0x70f04c<=_0x18f6ac;_0x70f04c++){const _0x1c5c4b=new Date(_0x4d629f);_0x1c5c4b[_0x3a8f13(0x128)](_0x1c5c4b['getDate']()+_0x70f04c);const _0x188b2c=getLocalDateStr(_0x1c5c4b);let _0xad2a1e=_0x1c5c4b[_0x3a8f13(0x165)]()-0x1;if(_0xad2a1e===-0x1)_0xad2a1e=0x6;const _0x157bea=_0x188b2c===_0x14596c,_0x15e909=document[_0x3a8f13(0x15c)](_0x3a8f13(0x107));_0x15e909[_0x3a8f13(0x14d)]='day-col-header\x20'+(_0x157bea?'today':''),_0x15e909['setAttribute'](_0x3a8f13(0x19c),_0x188b2c),_0x15e909['innerHTML']=_0x3a8f13(0x16e)+_0xc3ffb3[_0xad2a1e]+_0x3a8f13(0x1c6)+_0x1c5c4b[_0x3a8f13(0x161)]()+_0x3a8f13(0x193),_0x1764e0[_0x3a8f13(0x17a)](_0x15e909);const _0x2a6896=document[_0x3a8f13(0x15c)]('div');_0x2a6896[_0x3a8f13(0x14d)]='day-column\x20'+(_0x157bea?'today':''),_0x2a6896[_0x3a8f13(0x111)]('data-date',_0x188b2c),_0x2a6896[_0x3a8f13(0x111)](_0x3a8f13(0x1a5),_0xad2a1e),_0xda5e1e[_0x3a8f13(0x17a)](_0x2a6896);}_0x290071[_0x3a8f13(0x109)](_0x1764e0,_0x290071[_0x3a8f13(0x19b)]),_0x1b13ce[_0x3a8f13(0x109)](_0xda5e1e,_0x1b13ce[_0x3a8f13(0x1ca)](_0x3a8f13(0x103)));}function hexToRgba(_0x1d2cfc,_0x575a8d){const _0x5cdbb9=a3_0x3f8a87;let _0x3e3b72;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x5cdbb9(0x1dc)](_0x1d2cfc))return _0x3e3b72=_0x1d2cfc[_0x5cdbb9(0x136)](0x1)[_0x5cdbb9(0x16c)](''),_0x3e3b72['length']==0x3&&(_0x3e3b72=[_0x3e3b72[0x0],_0x3e3b72[0x0],_0x3e3b72[0x1],_0x3e3b72[0x1],_0x3e3b72[0x2],_0x3e3b72[0x2]]),_0x3e3b72='0x'+_0x3e3b72[_0x5cdbb9(0x1d5)](''),_0x5cdbb9(0x11d)+[_0x3e3b72>>0x10&0xff,_0x3e3b72>>0x8&0xff,_0x3e3b72&0xff][_0x5cdbb9(0x1d5)](',')+','+_0x575a8d+')';return _0x5cdbb9(0x1d4)+_0x575a8d+')';}let confirmResolver=null;function showCustomConfirm(_0x46b265,_0x2e29aa,_0x424163=!![]){const _0xff4372=a3_0x3f8a87;document[_0xff4372(0x1e1)](_0xff4372(0xf3))['textContent']=_0x46b265,document[_0xff4372(0x1e1)]('ccText')[_0xff4372(0x1c8)]=_0x2e29aa;const _0x364f27=document['getElementById']('ccYesBtn');return _0x424163?(_0x364f27['style'][_0xff4372(0x154)]=_0xff4372(0x184),_0x364f27[_0xff4372(0x194)][_0xff4372(0x12c)]='600'):(_0x364f27[_0xff4372(0x194)][_0xff4372(0x154)]=_0xff4372(0x14f),_0x364f27[_0xff4372(0x194)]['fontWeight']=_0xff4372(0x11b)),new Promise(_0x4c1436=>{const _0x17dfb8=_0xff4372;confirmResolver=_0x4c1436,document[_0x17dfb8(0x1e1)](_0x17dfb8(0x1a3))[_0x17dfb8(0xf1)][_0x17dfb8(0x141)](_0x17dfb8(0x181));});}function resolveCustomConfirm(_0x2d8f7e){const _0x4a37e3=a3_0x3f8a87;document[_0x4a37e3(0x1e1)](_0x4a37e3(0x1a3))[_0x4a37e3(0xf1)]['remove'](_0x4a37e3(0x181));if(confirmResolver)confirmResolver(_0x2d8f7e);}async function tryCancelCurrentSession(){const _0x5214c3=a3_0x3f8a87;if(!currentSession)return;const _0x4e93b0=await showCustomConfirm(_0x5214c3(0x10a),_0x5214c3(0x1cf),!![]);if(!_0x4e93b0)return;const _0x21e5fd=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x243438=>_0x243438['id']!==_0x21e5fd['id']),reRenderBlocks(),showToast(_0x5214c3(0x118)),lastUserActionTime=Date[_0x5214c3(0x148)]();try{const _0x28b9c7=window['Telegram']?.['WebApp'],_0x59a119=await fetch(API_URL,{'method':'POST','body':JSON[_0x5214c3(0x18a)]({'action':_0x5214c3(0x16f),'init_data':_0x28b9c7?.[_0x5214c3(0x1ae)]||'','coachId':_0x21e5fd[_0x5214c3(0x13a)],'dateStr':_0x21e5fd[_0x5214c3(0x195)],'sessionId':_0x21e5fd['id']})});if(_0x59a119['ok'])DataManager[_0x5214c3(0x170)]();}catch(_0xdfc3d9){showToast(_0x5214c3(0x133));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x1953f3=a3_0x3f8a87;if(!currentSession)return;document['getElementById'](_0x1953f3(0x1e5))[_0x1953f3(0xf1)][_0x1953f3(0xf2)]('open'),document[_0x1953f3(0x1e1)](_0x1953f3(0x171))[_0x1953f3(0xf1)]['add'](_0x1953f3(0x17b));const _0x354580=document[_0x1953f3(0x1e1)](_0x1953f3(0x13d)),_0x596d09=document[_0x1953f3(0x1e1)](_0x1953f3(0x1dd));_0x354580[_0x1953f3(0x197)]='',_0x596d09[_0x1953f3(0x197)]=_0x1953f3(0x151);const [_0x8b0602,_0x4437f4]=currentSession[_0x1953f3(0x106)]['split'](':')[_0x1953f3(0x15d)](Number),[_0x334495,_0x4db524]=currentSession[_0x1953f3(0x1ab)][_0x1953f3(0x16c)](':')[_0x1953f3(0x15d)](Number),_0x553ef4=_0x334495*0x3c+_0x4db524-(_0x8b0602*0x3c+_0x4437f4);try{const _0x402f25=window['Telegram']?.[_0x1953f3(0x112)],_0x15021c=await fetch(API_URL,{'method':_0x1953f3(0x1b1),'body':JSON[_0x1953f3(0x18a)]({'action':'get_slots','coachId':currentSession[_0x1953f3(0x13a)],'duration':_0x553ef4,'init_data':_0x402f25?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x39378c=await _0x15021c[_0x1953f3(0xf0)]();_0x39378c['ok']&&_0x39378c['data']?(availableSlotsCache=_0x39378c[_0x1953f3(0x16b)],renderRescheduleDates()):_0x596d09['innerHTML']=_0x1953f3(0x19d);}catch(_0x385c55){_0x596d09[_0x1953f3(0x197)]=_0x1953f3(0x130);}}function renderRescheduleDates(){const _0x3b729c=a3_0x3f8a87,_0x13b67f=document[_0x3b729c(0x1e1)]('rsDatesTrack');_0x13b67f[_0x3b729c(0x197)]='';const _0x35949c=Object[_0x3b729c(0x126)](availableSlotsCache)['sort'](),_0x2fd041=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x35949c[_0x3b729c(0x1a8)]===0x0){document['getElementById'](_0x3b729c(0x1dd))[_0x3b729c(0x197)]=_0x3b729c(0x1b2);return;}_0x35949c['forEach']((_0xf4e8b0,_0x414244)=>{const _0x96059b=_0x3b729c,_0x4b9539=new Date(_0xf4e8b0),_0xeaf1bd=_0x2fd041[_0x4b9539[_0x96059b(0x165)]()],_0x3e3d2a=_0x4b9539['getDate'](),_0x59089a=document[_0x96059b(0x15c)](_0x96059b(0x107));_0x59089a[_0x96059b(0x14d)]=_0x96059b(0x183);if(_0x414244===0x0)_0x59089a[_0x96059b(0xf1)][_0x96059b(0x141)](_0x96059b(0x13f));_0x59089a['innerHTML']='<div\x20class=\x22rs-day-name\x22>'+_0xeaf1bd+_0x96059b(0xf9)+_0x3e3d2a+'</div>',_0x59089a[_0x96059b(0x131)]=()=>selectRsDate(_0xf4e8b0,_0x59089a),_0x13b67f[_0x96059b(0x17a)](_0x59089a);}),selectRsDate(_0x35949c[0x0],_0x13b67f['firstChild']);}function selectRsDate(_0x81189b,_0x4d0bb3){const _0x17ad0c=a3_0x3f8a87;selectedRsDate=_0x81189b,document[_0x17ad0c(0x127)]('.rs-date-chip')[_0x17ad0c(0x100)](_0x6004af=>_0x6004af['classList'][_0x17ad0c(0xf2)](_0x17ad0c(0x13f)));if(_0x4d0bb3)_0x4d0bb3[_0x17ad0c(0xf1)]['add'](_0x17ad0c(0x13f));const _0x23b541=document[_0x17ad0c(0x1e1)]('rsSlotsGrid');_0x23b541[_0x17ad0c(0x197)]='';const _0x505d88=availableSlotsCache[_0x81189b]||[];if(_0x505d88[_0x17ad0c(0x1a8)]===0x0){_0x23b541[_0x17ad0c(0x197)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x505d88[_0x17ad0c(0x100)](_0x502f15=>{const _0x26cf0f=_0x17ad0c,_0x162ae5=document['createElement'](_0x26cf0f(0x1b9));_0x162ae5[_0x26cf0f(0x14d)]='rs-time-btn',_0x162ae5[_0x26cf0f(0x1c8)]=_0x502f15,_0x162ae5['onclick']=()=>confirmReschedule(_0x502f15),_0x23b541[_0x26cf0f(0x17a)](_0x162ae5);});}async function confirmReschedule(_0x40c451){const _0x3c43e0=a3_0x3f8a87,_0x218507=new Date(selectedRsDate),_0x2c14ee=_0x218507['toLocaleDateString'](_0x3c43e0(0x10e),{'day':_0x3c43e0(0x15b),'month':'long'}),_0xb56b70=await showCustomConfirm(_0x3c43e0(0x145),'–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x2c14ee+_0x3c43e0(0x1cb)+_0x40c451+'?',![]);if(!_0xb56b70)return;closeAllSheets(),showToast(_0x3c43e0(0x105)),lastUserActionTime=Date[_0x3c43e0(0x148)]();const _0x24da50=currentSession[_0x3c43e0(0x195)],_0x29dd9f=currentSession['id'],[_0xac9261,_0x2b25b2]=currentSession[_0x3c43e0(0x106)][_0x3c43e0(0x16c)](':')[_0x3c43e0(0x15d)](Number),[_0x57220e,_0x1fd505]=currentSession['end'][_0x3c43e0(0x16c)](':')[_0x3c43e0(0x15d)](Number),_0x47c2ae=_0x57220e*0x3c+_0x1fd505-(_0xac9261*0x3c+_0x2b25b2),[_0x42a694,_0x225c8e]=_0x40c451['split'](':')[_0x3c43e0(0x15d)](Number),_0x330316=_0x42a694*0x3c+_0x225c8e+_0x47c2ae,_0x1e124f=Math[_0x3c43e0(0x10b)](_0x330316/0x3c),_0x399fb5=_0x330316%0x3c,_0x18d2ec=String(_0x1e124f)[_0x3c43e0(0x10c)](0x2,'0')+':'+String(_0x399fb5)[_0x3c43e0(0x10c)](0x2,'0'),_0x5349f6=sessions[_0x3c43e0(0x1a0)](_0x2d5752=>_0x2d5752['id']===_0x29dd9f);_0x5349f6!==-0x1&&(sessions[_0x5349f6][_0x3c43e0(0x195)]=selectedRsDate,sessions[_0x5349f6]['start']=_0x40c451,sessions[_0x5349f6][_0x3c43e0(0x1ab)]=_0x18d2ec,reRenderBlocks());try{const _0x334235=window[_0x3c43e0(0x10f)]?.['WebApp'],_0x5c70ba=await fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':_0x3c43e0(0xeb),'init_data':_0x334235?.[_0x3c43e0(0x1ae)]||'','oldSessionId':_0x29dd9f,'oldDate':_0x24da50,'newDate':selectedRsDate,'newTime':_0x40c451,'coachId':currentSession['coachId']})}),_0x578e15=await _0x5c70ba[_0x3c43e0(0xf0)]();!_0x578e15['ok']?(showToast(_0x3c43e0(0x16d)),DataManager[_0x3c43e0(0x104)]()):(showToast(_0x3c43e0(0xf6)),DataManager[_0x3c43e0(0x170)]());}catch(_0x1e0b2e){showToast(_0x3c43e0(0x133));}}document['addEventListener'](a3_0x3f8a87(0xec),init);