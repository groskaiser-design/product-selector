const a3_0x2ddb5c=a3_0x21a9;(function(_0x4ee1b6,_0x11e041){const _0xd07735=a3_0x21a9,_0xeb3ef4=_0x4ee1b6();while(!![]){try{const _0x4a924b=-parseInt(_0xd07735(0x1cd))/0x1*(parseInt(_0xd07735(0x23f))/0x2)+-parseInt(_0xd07735(0x1a5))/0x3*(parseInt(_0xd07735(0x20a))/0x4)+parseInt(_0xd07735(0x203))/0x5*(parseInt(_0xd07735(0x191))/0x6)+parseInt(_0xd07735(0x1e0))/0x7+parseInt(_0xd07735(0x14c))/0x8+parseInt(_0xd07735(0x14f))/0x9+-parseInt(_0xd07735(0x152))/0xa;if(_0x4a924b===_0x11e041)break;else _0xeb3ef4['push'](_0xeb3ef4['shift']());}catch(_0x125542){_0xeb3ef4['push'](_0xeb3ef4['shift']());}}}(a3_0x5eee,0xc83c9));const APP_VERSION=a3_0x2ddb5c(0x159),API_URL=a3_0x2ddb5c(0x14e),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS=a3_0x2ddb5c(0x1b5),KEY_CLIENTS=a3_0x2ddb5c(0x1c2);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x2ddb5c(0x1fc),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0xccbf2a=a3_0x2ddb5c,_0x670299=(function(){let _0x32baa1=!![];return function(_0x3850ad,_0x392cb5){const _0x2b57e1=_0x32baa1?function(){const _0x430cb2=a3_0x21a9;if(_0x392cb5){const _0x9af9ef=_0x392cb5[_0x430cb2(0x1d2)](_0x3850ad,arguments);return _0x392cb5=null,_0x9af9ef;}}:function(){};return _0x32baa1=![],_0x2b57e1;};}()),_0x21275e=_0x670299(this,function(){const _0x23f99a=a3_0x21a9;return _0x21275e[_0x23f99a(0x238)]()[_0x23f99a(0x1d4)](_0x23f99a(0x175))[_0x23f99a(0x238)]()[_0x23f99a(0x22a)](_0x21275e)['search'](_0x23f99a(0x175));});_0x21275e();try{const _0x29a49a=window[_0xccbf2a(0x1b8)]?.[_0xccbf2a(0x195)];if(!_0x29a49a)return;_0x29a49a['ready'](),_0x29a49a[_0xccbf2a(0x19c)]();try{_0x29a49a[_0xccbf2a(0x202)](_0xccbf2a(0x1a7)),_0x29a49a[_0xccbf2a(0x1d6)]&&_0x29a49a[_0xccbf2a(0x1d6)](_0xccbf2a(0x1a7));}catch(_0x42c1fa){console['log']('Error\x20setting\x20color:',_0x42c1fa);}try{_0x29a49a['BackButton']&&(_0x29a49a[_0xccbf2a(0x1c8)]['show'](),_0x29a49a['BackButton'][_0xccbf2a(0x1a9)](),_0x29a49a[_0xccbf2a(0x1c8)]['onClick'](function(){const _0xa41d09=_0xccbf2a;window[_0xa41d09(0x204)]['href']='router.html';}));}catch(_0x5635a4){console['log'](_0xccbf2a(0x178),_0x5635a4);}try{if(_0x29a49a[_0xccbf2a(0x1b4)])_0x29a49a[_0xccbf2a(0x1b4)]();}catch(_0x151411){}}catch(_0x12392b){console[_0xccbf2a(0x1f2)]('Critical\x20TMA\x20Error:',_0x12392b);}}());function isAdmin(){const _0x270585=a3_0x2ddb5c;try{const _0x5a0e2e=Number(window[_0x270585(0x1b8)]?.[_0x270585(0x195)]?.[_0x270585(0x1f5)]?.[_0x270585(0x14d)]?.['id']);return _0x5a0e2e===0xbaf7174;}catch(_0x4806e7){return![];}}const DataManager={'saveLocally'(){const _0x1f1c1b=a3_0x2ddb5c;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x1f1c1b(0x1be)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x1f1c1b(0x1c1)](KEY_SETTINGS,JSON[_0x1f1c1b(0x1be)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x412a55){}},'loadLocal'(){const _0x3c88a0=a3_0x2ddb5c;try{const _0x3c1b47=localStorage[_0x3c88a0(0x19d)](KEY_SESSIONS);if(_0x3c1b47)sessions=JSON[_0x3c88a0(0x1df)](_0x3c1b47);const _0x9c4d3f=localStorage['getItem'](KEY_CLIENTS);if(_0x9c4d3f)clients=JSON[_0x3c88a0(0x1df)](_0x9c4d3f);const _0x1e42a4=localStorage[_0x3c88a0(0x19d)](KEY_SETTINGS);if(_0x1e42a4){const _0x2d02a1=JSON[_0x3c88a0(0x1df)](_0x1e42a4);if(_0x2d02a1['pattern'])availabilityPattern=_0x2d02a1[_0x3c88a0(0x1ae)];if(_0x2d02a1[_0x3c88a0(0x158)])specialRanges=_0x2d02a1[_0x3c88a0(0x158)];if(_0x2d02a1[_0x3c88a0(0x198)])dateExceptions=_0x2d02a1[_0x3c88a0(0x198)];}}catch(_0xd191a4){}},async 'syncLoad'(){const _0x47cea1=a3_0x2ddb5c,_0x4b80ab=new Date(),_0x22b543=_0x4b80ab[_0x47cea1(0x222)]()+'-'+String(_0x4b80ab[_0x47cea1(0x16f)]()+0x1)[_0x47cea1(0x1e4)](0x2,'0'),_0xe64280=new Date(_0x4b80ab);_0xe64280[_0x47cea1(0x235)](_0x4b80ab[_0x47cea1(0x16f)]()+0x1);const _0x4a528e=_0xe64280[_0x47cea1(0x222)]()+'-'+String(_0xe64280[_0x47cea1(0x16f)]()+0x1)[_0x47cea1(0x1e4)](0x2,'0'),_0x2ee6e8=Date[_0x47cea1(0x15d)]();try{const _0x2896db=window['Telegram']?.[_0x47cea1(0x195)],_0x4c9c64=_0x2896db?.[_0x47cea1(0x1ff)]||'',[_0x5e0293,_0x2f5b80]=await Promise[_0x47cea1(0x18c)]([fetch(API_URL,{'method':_0x47cea1(0x18f),'body':JSON[_0x47cea1(0x1be)]({'action':_0x47cea1(0x1e7),'init_data':_0x4c9c64,'month_str':_0x22b543})})[_0x47cea1(0x1f3)](_0x283bf0=>_0x283bf0['json']()),fetch(API_URL,{'method':'POST','body':JSON[_0x47cea1(0x1be)]({'action':'client_load','init_data':_0x4c9c64,'month_str':_0x4a528e})})[_0x47cea1(0x1f3)](_0x55d897=>_0x55d897['json']())]);if(lastUserActionTime>_0x2ee6e8){console['log']('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x5e0293['ok'])this[_0x47cea1(0x1c9)](_0x5e0293['data'],_0x22b543);if(_0x2f5b80['ok'])this[_0x47cea1(0x1c9)](_0x2f5b80[_0x47cea1(0x17c)],_0x4a528e);this[_0x47cea1(0x19a)]();}catch(_0x505b4e){}},'applyData'(_0x59dca8,_0x14f31e){const _0x314fc2=a3_0x2ddb5c;if(!_0x59dca8)return;if(_0x59dca8[_0x314fc2(0x229)]){if(_0x59dca8[_0x314fc2(0x229)][_0x314fc2(0x1ae)])availabilityPattern=_0x59dca8[_0x314fc2(0x229)][_0x314fc2(0x1ae)];if(_0x59dca8['settings']['ranges'])specialRanges=_0x59dca8['settings'][_0x314fc2(0x158)];if(_0x59dca8[_0x314fc2(0x229)][_0x314fc2(0x198)])dateExceptions=_0x59dca8[_0x314fc2(0x229)][_0x314fc2(0x198)];}if(_0x59dca8[_0x314fc2(0x1c6)]&&Array[_0x314fc2(0x1a1)](_0x59dca8['clients']))clients=_0x59dca8[_0x314fc2(0x1c6)];_0x59dca8['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x59dca8[_0x314fc2(0x181)]}),_0x59dca8[_0x314fc2(0x1fe)]&&(sessions=sessions[_0x314fc2(0x1ed)](_0x458020=>!_0x458020[_0x314fc2(0x239)][_0x314fc2(0x21d)](_0x14f31e)),Object[_0x314fc2(0x151)](_0x59dca8[_0x314fc2(0x1fe)])[_0x314fc2(0x1de)](_0x3feccf=>{const _0x2ddb2a=_0x314fc2,_0x82a3c9=_0x59dca8['calendar'][_0x3feccf];_0x82a3c9[_0x2ddb2a(0x1de)](_0x5a4dc4=>{const _0x555033=_0x2ddb2a;sessions['push']({'id':_0x5a4dc4['i'],'clientId':_0x5a4dc4['c'],'coachId':_0x5a4dc4[_0x555033(0x16c)],'dateStr':_0x14f31e+'-'+_0x3feccf['padStart'](0x2,'0'),'start':_0x5a4dc4['s'],'end':_0x5a4dc4['e'],'note':_0x5a4dc4['n']||'','status':_0x5a4dc4['st']||'planned','seriesId':_0x5a4dc4[_0x555033(0x1d8)]});});})),reRenderBlocks();}};function init(){const _0x2c1fc0=a3_0x2ddb5c;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x2c1fc0(0x15a)](_0x2c1fc0(0x199))[_0x2c1fc0(0x200)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x11a67b=a3_0x2ddb5c,_0x39fa30=document['getElementById'](_0x11a67b(0x197)),_0x5cb40f=document[_0x11a67b(0x15a)](_0x11a67b(0x205));_0x39fa30[_0x11a67b(0x180)]='',_0x39fa30[_0x11a67b(0x23d)](_0x5cb40f);for(let _0x2dbff1=0x0;_0x2dbff1<0x18;_0x2dbff1++){const _0x2aadcc=document[_0x11a67b(0x154)](_0x11a67b(0x17d));_0x2aadcc[_0x11a67b(0x1b7)]=_0x11a67b(0x179);if(_0x2dbff1>0x0)_0x2aadcc[_0x11a67b(0x180)]='<span>'+String(_0x2dbff1)[_0x11a67b(0x1e4)](0x2,'0')+_0x11a67b(0x171);_0x39fa30[_0x11a67b(0x23d)](_0x2aadcc);}}function renderDayRange(_0x2a21c4,_0x2084a7){const _0x45e0c9=a3_0x2ddb5c,_0x182efd=document['getElementById'](_0x45e0c9(0x17b)),_0xa598ff=document[_0x45e0c9(0x15a)](_0x45e0c9(0x17a)),_0x5e5b7f=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x5abd8f=new Date();_0x5abd8f[_0x45e0c9(0x163)](0x0,0x0,0x0,0x0);const _0x52d83e=getLocalDateStr(new Date());for(let _0x17a196=_0x2a21c4;_0x17a196<=_0x2084a7;_0x17a196++){const _0x23c1d6=new Date(_0x5abd8f);_0x23c1d6[_0x45e0c9(0x1e6)](_0x23c1d6[_0x45e0c9(0x244)]()+_0x17a196);const _0x352023=getLocalDateStr(_0x23c1d6);let _0x262543=_0x23c1d6['getDay']()-0x1;if(_0x262543===-0x1)_0x262543=0x6;const _0x32fbed=_0x352023===_0x52d83e,_0x4144ee=document['createElement'](_0x45e0c9(0x17d));_0x4144ee[_0x45e0c9(0x1b7)]=_0x45e0c9(0x1cc)+(_0x32fbed?_0x45e0c9(0x161):''),_0x4144ee['setAttribute'](_0x45e0c9(0x193),_0x352023),_0x4144ee[_0x45e0c9(0x180)]=_0x45e0c9(0x156)+_0x5e5b7f[_0x262543]+_0x45e0c9(0x194)+_0x23c1d6[_0x45e0c9(0x244)]()+_0x45e0c9(0x18e),_0x182efd[_0x45e0c9(0x23d)](_0x4144ee);const _0x27f7fd=document[_0x45e0c9(0x154)](_0x45e0c9(0x17d));_0x27f7fd[_0x45e0c9(0x1b7)]=_0x45e0c9(0x16e)+(_0x32fbed?_0x45e0c9(0x161):''),_0x27f7fd[_0x45e0c9(0x19f)]('data-date',_0x352023),_0x27f7fd[_0x45e0c9(0x19f)](_0x45e0c9(0x211),_0x262543),_0xa598ff[_0x45e0c9(0x23d)](_0x27f7fd);}}function reRenderBlocks(){const _0x25666b=a3_0x2ddb5c;document[_0x25666b(0x1f4)](_0x25666b(0x1b6))[_0x25666b(0x1de)](_0x21dad1=>{const _0x4dcdc2=_0x25666b;_0x21dad1[_0x4dcdc2(0x1f4)](_0x4dcdc2(0x243))[_0x4dcdc2(0x1de)](_0x2152de=>_0x2152de[_0x4dcdc2(0x187)]());const _0x2bb070=_0x21dad1['getAttribute'](_0x4dcdc2(0x193)),_0x281bfe=parseInt(_0x21dad1[_0x4dcdc2(0x183)]('data-day-idx')),_0xb77cc3=Math[_0x4dcdc2(0x1e9)](_0x21dad1[_0x4dcdc2(0x157)]);(availabilityPattern[_0x281bfe]||[])[_0x4dcdc2(0x1de)](_0xe813fe=>{const _0x4ce894=_0x4dcdc2,_0x2ce6a9=document[_0x4ce894(0x154)](_0x4ce894(0x17d));_0x2ce6a9[_0x4ce894(0x1b7)]=_0x4ce894(0x232),_0x2ce6a9[_0x4ce894(0x242)][_0x4ce894(0x169)]=_0xe813fe*GRID_H+'px',_0x2ce6a9[_0x4ce894(0x242)]['backgroundPosition']='-'+_0xb77cc3+_0x4ce894(0x1db)+_0xe813fe*GRID_H+'px',_0x21dad1[_0x4ce894(0x23d)](_0x2ce6a9);});if(specialRanges[_0x4dcdc2(0x1d7)]>0x0){const _0xf8a95e=new Date(_0x2bb070+_0x4dcdc2(0x1e8))['getTime'](),_0x36b11b=new Date(_0x2bb070+_0x4dcdc2(0x20c))[_0x4dcdc2(0x15f)]();specialRanges[_0x4dcdc2(0x1de)](_0xac2ea3=>{const _0x4f9451=_0x4dcdc2,_0x5e07d5=new Date(_0xac2ea3['start'])[_0x4f9451(0x15f)](),_0x51702f=new Date(_0xac2ea3[_0x4f9451(0x218)])['getTime'](),_0x1c6068=Math['max'](_0xf8a95e,_0x5e07d5),_0x4203ea=Math[_0x4f9451(0x228)](_0x36b11b,_0x51702f);if(_0x1c6068<_0x4203ea){const _0x3b2637=(_0x1c6068-_0xf8a95e)/0x36ee80*GRID_H,_0x58f27f=(_0x4203ea-_0x1c6068)/0x36ee80*GRID_H,_0x2e22d2=document[_0x4f9451(0x154)](_0x4f9451(0x17d));_0x58f27f>=23.5*GRID_H?(_0x2e22d2[_0x4f9451(0x1b7)]=_0x4f9451(0x226),_0x2e22d2[_0x4f9451(0x242)][_0x4f9451(0x234)]='-'+_0xb77cc3+_0x4f9451(0x19e)):(_0x2e22d2[_0x4f9451(0x1b7)]='blocked-range-part\x20stripe-bg',_0x2e22d2[_0x4f9451(0x242)][_0x4f9451(0x169)]=_0x3b2637+'px',_0x2e22d2[_0x4f9451(0x242)]['height']=_0x58f27f+'px',_0x2e22d2[_0x4f9451(0x242)][_0x4f9451(0x234)]='-'+_0xb77cc3+'px\x20-'+_0x3b2637+'px'),_0x21dad1['appendChild'](_0x2e22d2);}});}renderEventsForColumn(_0x21dad1,_0x2bb070);});}function renderEventsForColumn(_0xcd4bd0,_0x1d8f38){const _0x538f20=a3_0x2ddb5c,_0x395210=sessions[_0x538f20(0x1ed)](_0x7b72f5=>_0x7b72f5[_0x538f20(0x239)]===_0x1d8f38),_0x463cef=_0x395210['map'](_0x51fd4b=>{const _0xa1b653=_0x538f20,[_0x1e6e34,_0x1edc22]=_0x51fd4b[_0xa1b653(0x15c)][_0xa1b653(0x1a8)](':')[_0xa1b653(0x237)](Number),[_0x51fb23,_0x2863cd]=_0x51fd4b[_0xa1b653(0x218)][_0xa1b653(0x1a8)](':')['map'](Number);return{'data':_0x51fd4b,'start':_0x1e6e34*0x3c+_0x1edc22,'end':_0x51fb23*0x3c+_0x2863cd,'colIndex':0x0};});_0x463cef['sort']((_0x1bc9b5,_0x64abdf)=>_0x1bc9b5[_0x538f20(0x15c)]-_0x64abdf[_0x538f20(0x15c)]||_0x64abdf[_0x538f20(0x218)]-_0x64abdf[_0x538f20(0x15c)]-(_0x1bc9b5['end']-_0x1bc9b5[_0x538f20(0x15c)]));const _0x54f2fe=[];_0x463cef['forEach'](_0x27da7e=>{const _0x2d2414=_0x538f20;let _0x17d8c0=![];for(let _0x270d3f=0x0;_0x270d3f<_0x54f2fe[_0x2d2414(0x1d7)];_0x270d3f++){const _0x202bf9=_0x54f2fe[_0x270d3f];if(_0x27da7e[_0x2d2414(0x15c)]>=_0x202bf9[_0x202bf9[_0x2d2414(0x1d7)]-0x1]['end']){_0x202bf9[_0x2d2414(0x173)](_0x27da7e),_0x27da7e[_0x2d2414(0x1fb)]=_0x270d3f,_0x17d8c0=!![];break;}}!_0x17d8c0&&(_0x54f2fe[_0x2d2414(0x173)]([_0x27da7e]),_0x27da7e[_0x2d2414(0x1fb)]=_0x54f2fe[_0x2d2414(0x1d7)]-0x1);}),_0x463cef[_0x538f20(0x1de)](_0x5b75a9=>{const _0x441318=_0x538f20;let _0x21b54b=0x0;_0x463cef[_0x441318(0x1de)](_0x11ae9e=>{const _0x575dc6=_0x441318;if(Math[_0x575dc6(0x150)](_0x5b75a9[_0x575dc6(0x15c)],_0x11ae9e[_0x575dc6(0x15c)])<Math[_0x575dc6(0x228)](_0x5b75a9[_0x575dc6(0x218)],_0x11ae9e[_0x575dc6(0x218)])&&_0x11ae9e[_0x575dc6(0x1fb)]>_0x21b54b)_0x21b54b=_0x11ae9e['colIndex'];});const _0x3af0bb=_0x21b54b+0x1,_0x512e77=0x64/_0x3af0bb,_0x558994=_0x5b75a9[_0x441318(0x1fb)]*_0x512e77,_0x353d26=document[_0x441318(0x154)](_0x441318(0x17d)),_0x5d47df=_0x5b75a9[_0x441318(0x17c)];let _0x17c216=_0x441318(0x1ad);if(clients&&clients[_0x441318(0x1d7)]>0x0){const _0x389e3c=clients[_0x441318(0x1ef)](_0x1b217e=>String(_0x1b217e['id'])===String(_0x5d47df['clientId']));if(_0x389e3c&&_0x389e3c[_0x441318(0x201)])_0x17c216=_0x389e3c[_0x441318(0x201)];}const _0x5f33ed=_0x5d47df[_0x441318(0x221)]===_0x441318(0x1ca),_0x2fdd02=_0x5f33ed?0x1:0.45;_0x353d26[_0x441318(0x1b7)]=_0x441318(0x1d3)+(_0x5f33ed?_0x441318(0x1c5):''),_0x353d26[_0x441318(0x242)][_0x441318(0x15b)]=hexToRgba(_0x17c216,_0x2fdd02),_0x353d26[_0x441318(0x242)][_0x441318(0x208)]=_0x17c216;const _0x336bd7=_0x5b75a9[_0x441318(0x15c)]/0x3c*GRID_H,_0x32263a=(_0x5b75a9[_0x441318(0x218)]-_0x5b75a9[_0x441318(0x15c)])/0x3c*GRID_H;_0x353d26[_0x441318(0x242)]['top']=_0x336bd7+'px',_0x353d26[_0x441318(0x242)][_0x441318(0x21a)]=Math[_0x441318(0x150)](_0x32263a,0x14)+'px',_0x353d26['style'][_0x441318(0x160)]=_0x441318(0x21e)+_0x512e77+_0x441318(0x17e),_0x353d26[_0x441318(0x242)]['left']=_0x441318(0x21e)+_0x558994+_0x441318(0x20b),_0x353d26[_0x441318(0x242)][_0x441318(0x164)]=0xa+_0x5b75a9['colIndex'];if(_0x512e77<0x55)_0x353d26[_0x441318(0x168)]['add'](_0x441318(0x217));let _0xab7144='';if(_0x5d47df[_0x441318(0x174)])_0xab7144+=_0x441318(0x1c7);if(_0x5f33ed)_0xab7144+=_0x441318(0x16d);_0x353d26[_0x441318(0x180)]=_0x441318(0x196)+_0x5d47df['start']+'\x20-\x20'+_0x5d47df['end']+_0x441318(0x189)+_0xab7144+_0x441318(0x219),_0x353d26['onclick']=_0x342663=>{const _0x25916=_0x441318;_0x342663[_0x25916(0x22b)](),openDetails(_0x5d47df);},_0xcd4bd0[_0x441318(0x23d)](_0x353d26);});}function openAnalytics(){const _0x506073=a3_0x2ddb5c,_0x1561d5=document[_0x506073(0x18d)](_0x506073(0x1fa));setAnalyticsPeriod(_0x506073(0x1fc),_0x1561d5),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x1bc1ba,_0x3811cf){const _0x2adc66=a3_0x2ddb5c;currentAnPeriod=_0x1bc1ba,document['querySelectorAll']('.period-switch\x20.p-btn')[_0x2adc66(0x1de)](_0x42a7e8=>_0x42a7e8[_0x2adc66(0x168)][_0x2adc66(0x187)](_0x2adc66(0x1ce)));if(_0x3811cf)_0x3811cf[_0x2adc66(0x168)][_0x2adc66(0x1a3)](_0x2adc66(0x1ce));const _0x364ca2=document['getElementById'](_0x2adc66(0x1ec));_0x364ca2['style']['display']=_0x1bc1ba===_0x2adc66(0x188)?_0x2adc66(0x176):_0x2adc66(0x212);const _0x1bbcdd=new Date();let _0x103bed=new Date(),_0x27b79b=new Date();if(_0x1bc1ba==='week')_0x103bed=getStartOfWeek(_0x1bbcdd),_0x27b79b=new Date(_0x103bed),_0x27b79b[_0x2adc66(0x1e6)](_0x27b79b[_0x2adc66(0x244)]()+0x6);else{if(_0x1bc1ba===_0x2adc66(0x1bd))_0x103bed=new Date(_0x1bbcdd['getFullYear'](),_0x1bbcdd[_0x2adc66(0x16f)](),0x1),_0x27b79b=new Date(_0x1bbcdd[_0x2adc66(0x222)](),_0x1bbcdd['getMonth']()+0x1,0x0);else{!document[_0x2adc66(0x15a)](_0x2adc66(0x1eb))[_0x2adc66(0x214)]&&(document[_0x2adc66(0x15a)](_0x2adc66(0x1eb))[_0x2adc66(0x214)]=getLocalDateStr(_0x1bbcdd),document[_0x2adc66(0x15a)]('anEnd')[_0x2adc66(0x214)]=getLocalDateStr(_0x1bbcdd));refreshAnalytics();return;}}document['getElementById']('anStart')[_0x2adc66(0x214)]=getLocalDateStr(_0x103bed),document['getElementById'](_0x2adc66(0x190))[_0x2adc66(0x214)]=getLocalDateStr(_0x27b79b),refreshAnalytics();}function refreshAnalytics(){const _0x376e0=a3_0x2ddb5c,_0xc5162a=document[_0x376e0(0x15a)]('anStart')[_0x376e0(0x214)],_0x27f8af=document[_0x376e0(0x15a)](_0x376e0(0x190))[_0x376e0(0x214)];if(!_0xc5162a||!_0x27f8af)return;const _0x1e59e3=sessions[_0x376e0(0x1ed)](_0x56eeb1=>_0x56eeb1[_0x376e0(0x239)]>=_0xc5162a&&_0x56eeb1[_0x376e0(0x239)]<=_0x27f8af&&_0x56eeb1['status']!=='cancelled'),_0x586bba=_0x1e59e3[_0x376e0(0x1d7)],_0x40b4fd=_0x1e59e3['filter'](_0x3e7598=>_0x3e7598[_0x376e0(0x221)]==='completed')['length'],_0x42de95=_0x586bba>0x0?Math[_0x376e0(0x1e9)](_0x40b4fd/_0x586bba*0x64):0x0;document[_0x376e0(0x15a)](_0x376e0(0x1b2))[_0x376e0(0x1f9)]=_0x42de95+'%',document[_0x376e0(0x15a)]('anTotalStats')['textContent']=_0x40b4fd+'\x20–∏–∑\x20'+_0x586bba+_0x376e0(0x20d);const _0x52f29e=document[_0x376e0(0x15a)](_0x376e0(0x170)),_0x8ccf62=0x2*Math['PI']*0x23,_0x407430=_0x8ccf62-_0x42de95/0x64*_0x8ccf62;_0x52f29e[_0x376e0(0x242)]['strokeDashoffset']=_0x407430;const _0x33abe7={};_0x1e59e3[_0x376e0(0x1de)](_0x24c9d2=>{const _0x391fc0=_0x376e0,_0x4c9eb0=_0x24c9d2[_0x391fc0(0x18b)]||_0x391fc0(0x167);if(!_0x33abe7[_0x4c9eb0]){const _0xa65705='#'+_0x4c9eb0['toString']()[_0x391fc0(0x1f7)](0x0,0x6);_0x33abe7[_0x4c9eb0]={'total':0x0,'done':0x0,'color':_0xa65705};}_0x33abe7[_0x4c9eb0][_0x391fc0(0x1e2)]++;if(_0x24c9d2[_0x391fc0(0x221)]===_0x391fc0(0x1ca))_0x33abe7[_0x4c9eb0][_0x391fc0(0x231)]++;});const _0xbb34d9=document['getElementById'](_0x376e0(0x1a0));_0xbb34d9[_0x376e0(0x180)]='';const _0xa74b64=Object[_0x376e0(0x18a)](_0x33abe7)[_0x376e0(0x1ab)]((_0x2b6f48,_0x3e732e)=>_0x3e732e[0x1]['total']-_0x2b6f48[0x1]['total']);if(_0xa74b64[_0x376e0(0x1d7)]===0x0){_0xbb34d9[_0x376e0(0x180)]=_0x376e0(0x216);return;}_0xa74b64[_0x376e0(0x1de)](([_0x12252f,_0x5b841d])=>{const _0x1f4a97=_0x376e0,_0x1688ef=Math[_0x1f4a97(0x1e9)](_0x5b841d['done']/_0x5b841d['total']*0x64),_0x276790=document[_0x1f4a97(0x154)](_0x1f4a97(0x17d));_0x276790[_0x1f4a97(0x1b7)]=_0x1f4a97(0x240),_0x276790[_0x1f4a97(0x242)]['borderLeftColor']=_0x5b841d[_0x1f4a97(0x201)],_0x276790[_0x1f4a97(0x180)]=_0x1f4a97(0x215)+_0x12252f[_0x1f4a97(0x1f7)](0x0,0x5)+_0x1f4a97(0x1d1)+_0x5b841d[_0x1f4a97(0x231)]+'</span>\x20/\x20'+_0x5b841d[_0x1f4a97(0x1e2)]+_0x1f4a97(0x1a4)+_0x1688ef+_0x1f4a97(0x162),_0xbb34d9[_0x1f4a97(0x23d)](_0x276790);});}function openDetails(_0x4dfd0e){const _0x4c60dd=a3_0x2ddb5c;currentSession=_0x4dfd0e;const _0x5e34cf=new Date(_0x4dfd0e['dateStr']),_0xde15be=_0x5e34cf[_0x4c60dd(0x206)]('ru-RU',{'weekday':_0x4c60dd(0x166),'day':'numeric','month':_0x4c60dd(0x166)});document[_0x4c60dd(0x15a)](_0x4c60dd(0x21f))[_0x4c60dd(0x1f9)]=_0xde15be[_0x4c60dd(0x23e)](0x0)[_0x4c60dd(0x1f1)]()+_0xde15be[_0x4c60dd(0x1f6)](0x1),document[_0x4c60dd(0x15a)]('detTime')[_0x4c60dd(0x1f9)]=_0x4dfd0e['start']+'\x20-\x20'+_0x4dfd0e[_0x4c60dd(0x218)],document[_0x4c60dd(0x15a)](_0x4c60dd(0x1b9))[_0x4c60dd(0x1f9)]=_0x4dfd0e['note']||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0xc58f1a=document[_0x4c60dd(0x15a)](_0x4c60dd(0x1cb)),_0x3a2014=document[_0x4c60dd(0x15a)](_0x4c60dd(0x172)),_0x20b16d=_0x3a2014[_0x4c60dd(0x18d)](_0x4c60dd(0x15e)),_0x363e2f=_0x3a2014[_0x4c60dd(0x18d)]('.btn-reschedule'),_0x5c5464=document[_0x4c60dd(0x15a)](_0x4c60dd(0x21c));if(_0x4dfd0e[_0x4c60dd(0x221)]===_0x4c60dd(0x1ca))_0xc58f1a[_0x4c60dd(0x1f9)]=_0x4c60dd(0x1fd),_0xc58f1a[_0x4c60dd(0x242)]['color']='var(--acc-green)',_0x3a2014[_0x4c60dd(0x242)][_0x4c60dd(0x16b)]=_0x4c60dd(0x212);else{_0xc58f1a['textContent']=_0x4c60dd(0x184),_0xc58f1a[_0x4c60dd(0x242)]['color']=_0x4c60dd(0x22c),_0x3a2014[_0x4c60dd(0x242)][_0x4c60dd(0x16b)]=_0x4c60dd(0x213);const _0x153252=new Date(_0x4dfd0e['dateStr']+'T'+_0x4dfd0e[_0x4c60dd(0x15c)]),_0x463f9c=new Date(),_0x24c42d=(_0x153252-_0x463f9c)/(0x3e8*0x3c*0x3c),_0x57d6ab=coachProfiles[_0x4dfd0e[_0x4c60dd(0x18b)]]&&coachProfiles[_0x4dfd0e[_0x4c60dd(0x18b)]][_0x4c60dd(0x186)]?parseInt(coachProfiles[_0x4dfd0e[_0x4c60dd(0x18b)]][_0x4c60dd(0x186)]):0x18;if(_0x57d6ab===0x0||_0x24c42d>=_0x57d6ab)_0x20b16d['style'][_0x4c60dd(0x16b)]=_0x4c60dd(0x213),_0x363e2f[_0x4c60dd(0x242)]['display']='block',_0x5c5464[_0x4c60dd(0x242)][_0x4c60dd(0x16b)]='none';else{_0x20b16d['style'][_0x4c60dd(0x16b)]='none',_0x363e2f['style'][_0x4c60dd(0x16b)]='none',_0x5c5464[_0x4c60dd(0x242)][_0x4c60dd(0x16b)]=_0x4c60dd(0x213);let _0x428e1d=_0x57d6ab===0x0?_0x4c60dd(0x233):_0x4c60dd(0x1ea)+_0x57d6ab+_0x4c60dd(0x223);_0x5c5464['textContent']='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x428e1d+_0x4c60dd(0x192);}}document[_0x4c60dd(0x15a)](_0x4c60dd(0x23a))[_0x4c60dd(0x168)][_0x4c60dd(0x1a3)]('active'),document[_0x4c60dd(0x15a)](_0x4c60dd(0x1af))['classList'][_0x4c60dd(0x1a3)](_0x4c60dd(0x1e5));}function closeAllSheets(){const _0x57937a=a3_0x2ddb5c;document[_0x57937a(0x15a)]('overlay')[_0x57937a(0x168)][_0x57937a(0x187)](_0x57937a(0x1ce)),document['querySelectorAll']('.sheet')['forEach'](_0x5d55f8=>_0x5d55f8[_0x57937a(0x168)][_0x57937a(0x187)](_0x57937a(0x1e5)));}function openSheet(_0x40d0aa){const _0x101f75=a3_0x2ddb5c;document[_0x101f75(0x15a)]('overlay')['classList'][_0x101f75(0x1a3)]('active'),document[_0x101f75(0x15a)](_0x40d0aa)[_0x101f75(0x168)]['add'](_0x101f75(0x1e5));}function getLocalDateStr(_0xd677aa){const _0x5d7d49=a3_0x2ddb5c,_0x30d90f=_0xd677aa[_0x5d7d49(0x222)](),_0x5726d3=String(_0xd677aa[_0x5d7d49(0x16f)]()+0x1)[_0x5d7d49(0x1e4)](0x2,'0'),_0x3a1e1c=String(_0xd677aa[_0x5d7d49(0x244)]())[_0x5d7d49(0x1e4)](0x2,'0');return _0x30d90f+'-'+_0x5726d3+'-'+_0x3a1e1c;}function getStartOfWeek(_0x1997b7){const _0xd60dcc=a3_0x2ddb5c,_0x3211d5=new Date(_0x1997b7),_0x51849b=_0x3211d5[_0xd60dcc(0x153)](),_0x111683=_0x3211d5[_0xd60dcc(0x244)]()-_0x51849b+(_0x51849b===0x0?-0x6:0x1);return _0x3211d5['setDate'](_0x111683),_0x3211d5['setHours'](0x0,0x0,0x0,0x0),_0x3211d5;}function scrollToToday(){const _0x43128e=getLocalDateStr(new Date());setTimeout(()=>{const _0xda045b=a3_0x21a9,_0x393fd4=document['querySelector'](_0xda045b(0x230)+_0x43128e+'\x22]');if(_0x393fd4){const _0x5e27c5=document[_0xda045b(0x15a)](_0xda045b(0x199)),_0xef8711=_0x393fd4[_0xda045b(0x157)]-_0x5e27c5[_0xda045b(0x1ee)]/0x2+_0x393fd4[_0xda045b(0x22f)]/0x2;_0x5e27c5[_0xda045b(0x20f)]({'left':_0xef8711,'behavior':'auto'}),_0x5e27c5['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x67f735=a3_0x2ddb5c,_0x4a414e=new Date(),_0x2abb28=document['getElementById'](_0x67f735(0x1f8)),_0xc1fba=document['getElementById'](_0x67f735(0x205)),_0x1d6075=(_0x4a414e[_0x67f735(0x209)]()*0x3c+_0x4a414e['getMinutes']())/0x3c*GRID_H;_0x2abb28['style']['top']=_0x1d6075+'px',_0x2abb28[_0x67f735(0x242)][_0x67f735(0x16b)]=_0x67f735(0x213),_0xc1fba[_0x67f735(0x242)][_0x67f735(0x169)]=_0x1d6075+'px',_0xc1fba[_0x67f735(0x242)][_0x67f735(0x16b)]=_0x67f735(0x213),_0xc1fba['textContent']=String(_0x4a414e[_0x67f735(0x209)]())[_0x67f735(0x1e4)](0x2,'0')+':'+String(_0x4a414e[_0x67f735(0x1f0)]())[_0x67f735(0x1e4)](0x2,'0');}function onScroll(){const _0x410242=a3_0x2ddb5c,_0x493728=document[_0x410242(0x15a)](_0x410242(0x199)),_0x2e5e36=document[_0x410242(0x1f4)]('.day-col-header');for(let _0x5c4e84 of _0x2e5e36)if(_0x5c4e84[_0x410242(0x157)]>=_0x493728[_0x410242(0x210)]){const _0x34f752=new Date(_0x5c4e84[_0x410242(0x183)]('data-date'));document['getElementById'](_0x410242(0x23c))[_0x410242(0x1f9)]=_0x34f752[_0x410242(0x1ba)]('ru',{'month':'long'})[_0x410242(0x1f1)]()+'\x20'+_0x34f752[_0x410242(0x222)]();break;}}function showToast(_0x1c6be7){const _0x81c623=a3_0x2ddb5c,_0x4b77b2=document[_0x81c623(0x15a)]('toast');_0x4b77b2[_0x81c623(0x1f9)]=_0x1c6be7,_0x4b77b2[_0x81c623(0x168)][_0x81c623(0x1a3)](_0x81c623(0x1e1)),setTimeout(()=>_0x4b77b2['classList'][_0x81c623(0x187)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x1d7f30=a3_0x2ddb5c,_0x49ef9c=document[_0x1d7f30(0x15a)]('matrixViewport'),_0x331cb6=_0x49ef9c[_0x1d7f30(0x210)],_0x10fb01=_0x49ef9c[_0x1d7f30(0x1d9)],_0x558247=_0x49ef9c[_0x1d7f30(0x1ee)];if(_0x10fb01-(_0x331cb6+_0x558247)<0x12c){const _0x41ca48=endOffset;endOffset+=0xe,renderDayRange(_0x41ca48+0x1,endOffset),reRenderBlocks();}if(_0x331cb6<0x12c){const _0xe31312=startOffset;startOffset-=0xe,prependDays(startOffset,_0xe31312-0x1),_0x49ef9c[_0x1d7f30(0x210)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x46fc6d,_0x27df5b){const _0x332269=a3_0x2ddb5c,_0x42e212=document[_0x332269(0x15a)](_0x332269(0x17b)),_0x1f2d77=document[_0x332269(0x15a)](_0x332269(0x17a)),_0x3f1868=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x50e6c4=new Date();_0x50e6c4['setHours'](0x0,0x0,0x0,0x0);const _0xc9e0ee=getLocalDateStr(new Date()),_0xd0ddf=document['createDocumentFragment'](),_0x5eb5ab=document[_0x332269(0x220)]();for(let _0x358639=_0x46fc6d;_0x358639<=_0x27df5b;_0x358639++){const _0x2903e0=new Date(_0x50e6c4);_0x2903e0[_0x332269(0x1e6)](_0x2903e0['getDate']()+_0x358639);const _0x360cae=getLocalDateStr(_0x2903e0);let _0x31d1e4=_0x2903e0[_0x332269(0x153)]()-0x1;if(_0x31d1e4===-0x1)_0x31d1e4=0x6;const _0x144b9e=_0x360cae===_0xc9e0ee,_0x1514c3=document[_0x332269(0x154)](_0x332269(0x17d));_0x1514c3['className']='day-col-header\x20'+(_0x144b9e?_0x332269(0x161):''),_0x1514c3[_0x332269(0x19f)](_0x332269(0x193),_0x360cae),_0x1514c3['innerHTML']='<div\x20class=\x22dch-day\x22>'+_0x3f1868[_0x31d1e4]+'</div><div\x20class=\x22dch-num\x22>'+_0x2903e0[_0x332269(0x244)]()+'</div>',_0xd0ddf[_0x332269(0x23d)](_0x1514c3);const _0x26b9a=document[_0x332269(0x154)](_0x332269(0x17d));_0x26b9a['className']='day-column\x20'+(_0x144b9e?_0x332269(0x161):''),_0x26b9a['setAttribute'](_0x332269(0x193),_0x360cae),_0x26b9a[_0x332269(0x19f)](_0x332269(0x211),_0x31d1e4),_0x5eb5ab[_0x332269(0x23d)](_0x26b9a);}_0x42e212[_0x332269(0x1e3)](_0xd0ddf,_0x42e212['firstChild']),_0x1f2d77[_0x332269(0x1e3)](_0x5eb5ab,_0x1f2d77[_0x332269(0x18d)](_0x332269(0x1b6)));}function hexToRgba(_0x15c553,_0x29232c){const _0x596abc=a3_0x2ddb5c;let _0x2e268f;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x596abc(0x1b0)](_0x15c553))return _0x2e268f=_0x15c553[_0x596abc(0x22d)](0x1)[_0x596abc(0x1a8)](''),_0x2e268f[_0x596abc(0x1d7)]==0x3&&(_0x2e268f=[_0x2e268f[0x0],_0x2e268f[0x0],_0x2e268f[0x1],_0x2e268f[0x1],_0x2e268f[0x2],_0x2e268f[0x2]]),_0x2e268f='0x'+_0x2e268f[_0x596abc(0x21b)](''),_0x596abc(0x1bc)+[_0x2e268f>>0x10&0xff,_0x2e268f>>0x8&0xff,_0x2e268f&0xff]['join'](',')+','+_0x29232c+')';return _0x596abc(0x155)+_0x29232c+')';}function a3_0x21a9(_0x27f1dd,_0x3ef1b7){_0x27f1dd=_0x27f1dd-0x14c;const _0x1403d8=a3_0x5eee();let _0x48c539=_0x1403d8[_0x27f1dd];return _0x48c539;}let confirmResolver=null;function showCustomConfirm(_0x551b5d,_0x1d3175,_0x4b60ab=!![]){const _0x26b6e4=a3_0x2ddb5c;document[_0x26b6e4(0x15a)](_0x26b6e4(0x1bb))[_0x26b6e4(0x1f9)]=_0x551b5d,document[_0x26b6e4(0x15a)](_0x26b6e4(0x165))['textContent']=_0x1d3175;const _0x141bc8=document[_0x26b6e4(0x15a)]('ccYesBtn');return _0x4b60ab?(_0x141bc8[_0x26b6e4(0x242)]['color']=_0x26b6e4(0x1b1),_0x141bc8[_0x26b6e4(0x242)][_0x26b6e4(0x227)]=_0x26b6e4(0x207)):(_0x141bc8[_0x26b6e4(0x242)][_0x26b6e4(0x201)]=_0x26b6e4(0x1ad),_0x141bc8['style'][_0x26b6e4(0x227)]=_0x26b6e4(0x207)),new Promise(_0x1efd26=>{const _0x2bfcc7=_0x26b6e4;confirmResolver=_0x1efd26,document[_0x2bfcc7(0x15a)](_0x2bfcc7(0x1d0))[_0x2bfcc7(0x168)][_0x2bfcc7(0x1a3)](_0x2bfcc7(0x1d5));});}function resolveCustomConfirm(_0x1a64dd){const _0x4dadba=a3_0x2ddb5c;document[_0x4dadba(0x15a)](_0x4dadba(0x1d0))[_0x4dadba(0x168)]['remove']('visible');if(confirmResolver)confirmResolver(_0x1a64dd);}async function tryCancelCurrentSession(){const _0x3b1cfa=a3_0x2ddb5c;if(!currentSession)return;const _0x104ec1=await showCustomConfirm(_0x3b1cfa(0x1c0),_0x3b1cfa(0x22e),!![]);if(!_0x104ec1)return;const _0x18b0d8=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x19f262=>_0x19f262['id']!==_0x18b0d8['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x3b1cfa(0x15d)]();try{const _0x4c69d3=window[_0x3b1cfa(0x1b8)]?.['WebApp'],_0x1a3ba6=await fetch(API_URL,{'method':'POST','body':JSON[_0x3b1cfa(0x1be)]({'action':_0x3b1cfa(0x1bf),'init_data':_0x4c69d3?.[_0x3b1cfa(0x1ff)]||'','coachId':_0x18b0d8['coachId'],'dateStr':_0x18b0d8[_0x3b1cfa(0x239)],'sessionId':_0x18b0d8['id']})});if(_0x1a3ba6['ok'])DataManager[_0x3b1cfa(0x19a)]();}catch(_0x17bd5e){showToast(_0x3b1cfa(0x1da));}}let availableSlotsCache={},selectedRsDate=null;function a3_0x5eee(){const _0x5b772a=['toLocaleString','ccTitle','rgba(','month','stringify','client_cancel','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','setItem','uc_client_list','<div\x20class=\x22rs-day-name\x22>','floor','\x20status-completed','clients','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','BackButton','applyData','completed','detStatus','day-col-header\x20','8fNyavq','active','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','customConfirm','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','apply','event-card','search','visible','setBackgroundColor','length','sid','scrollWidth','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','px\x20-','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','rs-time-btn','forEach','parse','3750131weaWGW','show','total','insertBefore','padStart','open','setDate','client_load','T00:00:00','round','–∑–∞\x20','anStart','anCustomDates','filter','clientWidth','find','getMinutes','toUpperCase','error','then','querySelectorAll','initDataUnsafe','slice','substr','globalTimeLine','textContent','.period-switch\x20.p-btn','colIndex','week','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','calendar','initData','addEventListener','color','setHeaderColor','15DuTOUn','location','timeLineBadge','toLocaleDateString','600','borderLeftColor','getHours','16gdtgCr','%\x20+\x202px)','T23:59:59','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','syncLoad','scrollTo','scrollLeft','data-day-idx','none','block','value','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','mini','end','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','height','join','cancelHint','startsWith','calc(','detDate','createDocumentFragment','status','getFullYear','\x20—á.','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','onclick','day-off-overlay\x20stripe-bg','fontWeight','min','settings','constructor','stopPropagation','var(--acc-blue)','substring','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','offsetWidth','.day-col-header[data-date=\x22','done','blocked-slot\x20stripe-bg','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','backgroundPosition','setMonth','numeric','map','toString','dateStr','overlay','rescheduleSheet','headerMonth','appendChild','charAt','13166dtuyTW','client-stat-card','rs-date-chip','style','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','getDate','12158744WLmQuA','user','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','1508184JsvJGV','max','keys','8458020dOzuYh','getDay','createElement','rgba(10,\x20132,\x20255,\x20','<div\x20class=\x22dch-day\x22>','offsetLeft','ranges','v9.5-CLIENT-ANALYTICS','getElementById','backgroundColor','start','now','.btn-cancel','getTime','width','today','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setHours','zIndex','ccText','long','Unknown','classList','top','button','display','cid','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','day-column\x20','getMonth','anDonutCircle',':00</span>','cancelContainer','push','seriesId','(((.+)+)+)+$','flex','rsSlotsGrid','Error\x20setting\x20back\x20button:','time-label','gridColumns','daysHeaderTrack','data','div','%\x20-\x204px)','get_slots','innerHTML','coach_profiles','findIndex','getAttribute','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','cancel_window','remove','custom','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','entries','coachId','all','querySelector','</div>','POST','anEnd','868062jHHxLi','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','data-date','</div><div\x20class=\x22dch-num\x22>','WebApp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','timeColumn','exceptions','matrixViewport','saveLocally','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','expand','getItem','px\x200px','setAttribute','analyticsList','isArray','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','add','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','703911ynyElU','rsDatesTrack','#050505','split','offClick','firstChild','sort','DOMContentLoaded','#0a84ff','pattern','detailsSheet','test','#ff453a','anPercent','ru-RU','disableVerticalSwipes','uc_client_settings','.day-column','className','Telegram','detNote'];a3_0x5eee=function(){return _0x5b772a;};return a3_0x5eee();}async function startRescheduleFlow(){const _0x9160a9=a3_0x2ddb5c;if(!currentSession)return;document[_0x9160a9(0x15a)](_0x9160a9(0x1af))[_0x9160a9(0x168)][_0x9160a9(0x187)](_0x9160a9(0x1e5)),document[_0x9160a9(0x15a)](_0x9160a9(0x23b))['classList'][_0x9160a9(0x1a3)]('open');const _0x51ceca=document[_0x9160a9(0x15a)](_0x9160a9(0x1a6)),_0x11ba91=document[_0x9160a9(0x15a)](_0x9160a9(0x177));_0x51ceca[_0x9160a9(0x180)]='',_0x11ba91[_0x9160a9(0x180)]=_0x9160a9(0x224);const [_0x14f45c,_0xd02bdf]=currentSession['start'][_0x9160a9(0x1a8)](':')['map'](Number),[_0x431c67,_0x69d481]=currentSession['end']['split'](':')[_0x9160a9(0x237)](Number),_0x18faa5=_0x431c67*0x3c+_0x69d481-(_0x14f45c*0x3c+_0xd02bdf);try{const _0x36e1dc=window[_0x9160a9(0x1b8)]?.[_0x9160a9(0x195)],_0x5793b5=await fetch(API_URL,{'method':_0x9160a9(0x18f),'body':JSON[_0x9160a9(0x1be)]({'action':_0x9160a9(0x17f),'coachId':currentSession['coachId'],'duration':_0x18faa5,'init_data':_0x36e1dc?.[_0x9160a9(0x1ff)]||'','excludeSessionId':currentSession['id']})}),_0x29a9a7=await _0x5793b5['json']();_0x29a9a7['ok']&&_0x29a9a7[_0x9160a9(0x17c)]?(availableSlotsCache=_0x29a9a7[_0x9160a9(0x17c)],renderRescheduleDates()):_0x11ba91[_0x9160a9(0x180)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x354c73){_0x11ba91[_0x9160a9(0x180)]=_0x9160a9(0x1cf);}}function renderRescheduleDates(){const _0xd2f755=a3_0x2ddb5c,_0x3c664f=document['getElementById'](_0xd2f755(0x1a6));_0x3c664f[_0xd2f755(0x180)]='';const _0x49f116=Object[_0xd2f755(0x151)](availableSlotsCache)[_0xd2f755(0x1ab)](),_0x52d5a0=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x49f116[_0xd2f755(0x1d7)]===0x0){document[_0xd2f755(0x15a)](_0xd2f755(0x177))['innerHTML']=_0xd2f755(0x1dc);return;}_0x49f116['forEach']((_0x5db6dc,_0x584405)=>{const _0x30aa1d=_0xd2f755,_0x59718c=new Date(_0x5db6dc),_0x2fb788=_0x52d5a0[_0x59718c[_0x30aa1d(0x153)]()],_0x58dd37=_0x59718c[_0x30aa1d(0x244)](),_0x3ffde7=document['createElement'](_0x30aa1d(0x17d));_0x3ffde7['className']=_0x30aa1d(0x241);if(_0x584405===0x0)_0x3ffde7[_0x30aa1d(0x168)][_0x30aa1d(0x1a3)]('active');_0x3ffde7['innerHTML']=_0x30aa1d(0x1c3)+_0x2fb788+'</div><div\x20class=\x22rs-day-num\x22>'+_0x58dd37+_0x30aa1d(0x18e),_0x3ffde7[_0x30aa1d(0x225)]=()=>selectRsDate(_0x5db6dc,_0x3ffde7),_0x3c664f[_0x30aa1d(0x23d)](_0x3ffde7);}),selectRsDate(_0x49f116[0x0],_0x3c664f[_0xd2f755(0x1aa)]);}function selectRsDate(_0x884bf4,_0x89e4ec){const _0x278b31=a3_0x2ddb5c;selectedRsDate=_0x884bf4,document[_0x278b31(0x1f4)]('.rs-date-chip')[_0x278b31(0x1de)](_0x47c857=>_0x47c857['classList']['remove']('active'));if(_0x89e4ec)_0x89e4ec[_0x278b31(0x168)]['add']('active');const _0x2e6672=document[_0x278b31(0x15a)]('rsSlotsGrid');_0x2e6672[_0x278b31(0x180)]='';const _0x89cb9b=availableSlotsCache[_0x884bf4]||[];if(_0x89cb9b[_0x278b31(0x1d7)]===0x0){_0x2e6672['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x89cb9b[_0x278b31(0x1de)](_0x184a4f=>{const _0x3efde9=_0x278b31,_0xbbb399=document['createElement'](_0x3efde9(0x16a));_0xbbb399[_0x3efde9(0x1b7)]=_0x3efde9(0x1dd),_0xbbb399['textContent']=_0x184a4f,_0xbbb399[_0x3efde9(0x225)]=()=>confirmReschedule(_0x184a4f),_0x2e6672[_0x3efde9(0x23d)](_0xbbb399);});}async function confirmReschedule(_0x39a067){const _0x1cf17a=a3_0x2ddb5c,_0x55d822=new Date(selectedRsDate),_0x16bef8=_0x55d822['toLocaleDateString'](_0x1cf17a(0x1b3),{'day':_0x1cf17a(0x236),'month':_0x1cf17a(0x166)}),_0x195220=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x16bef8+'\x20–≤\x20'+_0x39a067+'?',![]);if(!_0x195220)return;closeAllSheets(),showToast(_0x1cf17a(0x19b)),lastUserActionTime=Date['now']();const _0x57983c=currentSession[_0x1cf17a(0x239)],_0x5d12e5=currentSession['id'],[_0x9d0d61,_0x37c9c4]=currentSession['start'][_0x1cf17a(0x1a8)](':')[_0x1cf17a(0x237)](Number),[_0x53721e,_0x27a61b]=currentSession[_0x1cf17a(0x218)][_0x1cf17a(0x1a8)](':')[_0x1cf17a(0x237)](Number),_0x58fb6f=_0x53721e*0x3c+_0x27a61b-(_0x9d0d61*0x3c+_0x37c9c4),[_0x16dc4a,_0x3af311]=_0x39a067[_0x1cf17a(0x1a8)](':')['map'](Number),_0x268ca0=_0x16dc4a*0x3c+_0x3af311+_0x58fb6f,_0x2dd6bd=Math[_0x1cf17a(0x1c4)](_0x268ca0/0x3c),_0x4b39a7=_0x268ca0%0x3c,_0x800b4=String(_0x2dd6bd)[_0x1cf17a(0x1e4)](0x2,'0')+':'+String(_0x4b39a7)['padStart'](0x2,'0'),_0x2127c7=sessions[_0x1cf17a(0x182)](_0x552b08=>_0x552b08['id']===_0x5d12e5);_0x2127c7!==-0x1&&(sessions[_0x2127c7]['dateStr']=selectedRsDate,sessions[_0x2127c7][_0x1cf17a(0x15c)]=_0x39a067,sessions[_0x2127c7][_0x1cf17a(0x218)]=_0x800b4,reRenderBlocks());try{const _0xd6db5=window['Telegram']?.['WebApp'],_0x3e4bb6=await fetch(API_URL,{'method':_0x1cf17a(0x18f),'body':JSON[_0x1cf17a(0x1be)]({'action':'reschedule','init_data':_0xd6db5?.['initData']||'','oldSessionId':_0x5d12e5,'oldDate':_0x57983c,'newDate':selectedRsDate,'newTime':_0x39a067,'coachId':currentSession['coachId']})}),_0x3f7640=await _0x3e4bb6['json']();!_0x3f7640['ok']?(showToast(_0x1cf17a(0x185)),DataManager[_0x1cf17a(0x20e)]()):(showToast(_0x1cf17a(0x1a2)),DataManager[_0x1cf17a(0x19a)]());}catch(_0x4bcf8b){showToast(_0x1cf17a(0x1da));}}document['addEventListener'](a3_0x2ddb5c(0x1ac),init);