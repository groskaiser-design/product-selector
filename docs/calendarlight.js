const a3_0x3f373f=a3_0x3972;(function(_0x197418,_0x23ee5b){const _0x58ec6f=a3_0x3972,_0x1d7752=_0x197418();while(!![]){try{const _0x382e8b=parseInt(_0x58ec6f(0x1ed))/0x1+parseInt(_0x58ec6f(0x29f))/0x2*(-parseInt(_0x58ec6f(0x296))/0x3)+-parseInt(_0x58ec6f(0x2a4))/0x4+parseInt(_0x58ec6f(0x1f9))/0x5+-parseInt(_0x58ec6f(0x27b))/0x6+parseInt(_0x58ec6f(0x257))/0x7*(-parseInt(_0x58ec6f(0x1dc))/0x8)+-parseInt(_0x58ec6f(0x2ba))/0x9*(-parseInt(_0x58ec6f(0x281))/0xa);if(_0x382e8b===_0x23ee5b)break;else _0x1d7752['push'](_0x1d7752['shift']());}catch(_0x351e6a){_0x1d7752['push'](_0x1d7752['shift']());}}}(a3_0x1885,0x2330b));function a3_0x3972(_0x39997a,_0x1f3e37){_0x39997a=_0x39997a-0x1cc;const _0xc0b35f=a3_0x1885();let _0x29f53a=_0xc0b35f[_0x39997a];return _0x29f53a;}const APP_VERSION=a3_0x3f373f(0x2a3),API_URL=a3_0x3f373f(0x273),GRID_H=0x3c,KEY_SESSIONS=a3_0x3f373f(0x1ea),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x3f373f(0x1df);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x63858a=a3_0x3f373f,_0x194aeb=(function(){let _0x38af5a=!![];return function(_0xf7a826,_0x36fcfb){const _0x56ac11=_0x38af5a?function(){const _0x4d4b8d=a3_0x3972;if(_0x36fcfb){const _0x3fdd1f=_0x36fcfb[_0x4d4b8d(0x2bd)](_0xf7a826,arguments);return _0x36fcfb=null,_0x3fdd1f;}}:function(){};return _0x38af5a=![],_0x56ac11;};}()),_0x33ea8c=_0x194aeb(this,function(){const _0x327385=a3_0x3972;return _0x33ea8c[_0x327385(0x241)]()[_0x327385(0x251)]('(((.+)+)+)+$')[_0x327385(0x241)]()['constructor'](_0x33ea8c)[_0x327385(0x251)](_0x327385(0x2af));});_0x33ea8c();try{const _0x1df0d6=window[_0x63858a(0x260)]?.[_0x63858a(0x205)];if(!_0x1df0d6)return;_0x1df0d6[_0x63858a(0x259)](),_0x1df0d6['expand']();try{_0x1df0d6[_0x63858a(0x23b)](_0x63858a(0x2b9)),_0x1df0d6['setBackgroundColor']&&_0x1df0d6['setBackgroundColor'](_0x63858a(0x2b9));}catch(_0x49b622){console[_0x63858a(0x1d9)](_0x63858a(0x28b),_0x49b622);}try{_0x1df0d6[_0x63858a(0x222)]&&(_0x1df0d6['BackButton']['show'](),_0x1df0d6[_0x63858a(0x222)][_0x63858a(0x1e4)](),_0x1df0d6[_0x63858a(0x222)][_0x63858a(0x211)](function(){const _0xd35dbe=_0x63858a;window['location'][_0xd35dbe(0x24b)]=_0xd35dbe(0x289);}));}catch(_0x35a934){console[_0x63858a(0x1d9)](_0x63858a(0x276),_0x35a934);}try{if(_0x1df0d6[_0x63858a(0x27f)])_0x1df0d6[_0x63858a(0x27f)]();}catch(_0x15025d){}}catch(_0x3d0b2f){console[_0x63858a(0x1e8)](_0x63858a(0x290),_0x3d0b2f);}}());function isAdmin(){const _0xb25593=a3_0x3f373f;try{const _0x5c2d6e=Number(window['Telegram']?.['WebApp']?.[_0xb25593(0x278)]?.[_0xb25593(0x202)]?.['id']);return _0x5c2d6e===0xbaf7174;}catch(_0xe32dce){return![];}}const DataManager={'saveLocally'(){const _0x4f84d1=a3_0x3f373f;try{localStorage[_0x4f84d1(0x23a)](KEY_SESSIONS,JSON[_0x4f84d1(0x21c)](sessions)),localStorage[_0x4f84d1(0x23a)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x4f84d1(0x23a)](KEY_SETTINGS,JSON[_0x4f84d1(0x21c)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x41c2a6){}},'loadLocal'(){const _0x2091ad=a3_0x3f373f;try{const _0x241321=localStorage['getItem'](KEY_SESSIONS);if(_0x241321)sessions=JSON[_0x2091ad(0x24d)](_0x241321);const _0x22c713=localStorage[_0x2091ad(0x2b5)](KEY_CLIENTS);if(_0x22c713)clients=JSON[_0x2091ad(0x24d)](_0x22c713);const _0x1f76d8=localStorage[_0x2091ad(0x2b5)](KEY_SETTINGS);if(_0x1f76d8){const _0xb46ea6=JSON[_0x2091ad(0x24d)](_0x1f76d8);if(_0xb46ea6['pattern'])availabilityPattern=_0xb46ea6[_0x2091ad(0x292)];if(_0xb46ea6[_0x2091ad(0x26e)])specialRanges=_0xb46ea6[_0x2091ad(0x26e)];if(_0xb46ea6[_0x2091ad(0x248)])dateExceptions=_0xb46ea6[_0x2091ad(0x248)];}}catch(_0x2520a7){}},async 'syncLoad'(){const _0x1b7a4e=a3_0x3f373f,_0x453fd1=new Date(),_0x700056=_0x453fd1[_0x1b7a4e(0x212)]()+'-'+String(_0x453fd1[_0x1b7a4e(0x1f7)]()+0x1)['padStart'](0x2,'0'),_0x57d139=new Date(_0x453fd1);_0x57d139[_0x1b7a4e(0x1d8)](_0x453fd1[_0x1b7a4e(0x1f7)]()+0x1);const _0x2a5125=_0x57d139[_0x1b7a4e(0x212)]()+'-'+String(_0x57d139[_0x1b7a4e(0x1f7)]()+0x1)[_0x1b7a4e(0x274)](0x2,'0'),_0x1f4f18=Date[_0x1b7a4e(0x224)]();try{const _0x1615d7=window[_0x1b7a4e(0x260)]?.[_0x1b7a4e(0x205)],_0x5c58ec=_0x1615d7?.[_0x1b7a4e(0x201)]||'',[_0x4f9fe5,_0x30b521]=await Promise[_0x1b7a4e(0x2b3)]([fetch(API_URL,{'method':_0x1b7a4e(0x2ae),'body':JSON['stringify']({'action':'client_load','init_data':_0x5c58ec,'month_str':_0x700056})})['then'](_0x23e0ab=>_0x23e0ab['json']()),fetch(API_URL,{'method':_0x1b7a4e(0x2ae),'body':JSON['stringify']({'action':_0x1b7a4e(0x284),'init_data':_0x5c58ec,'month_str':_0x2a5125})})['then'](_0x25bc8c=>_0x25bc8c[_0x1b7a4e(0x2a7)]())]);if(lastUserActionTime>_0x1f4f18){console[_0x1b7a4e(0x1d9)](_0x1b7a4e(0x264));return;}if(_0x4f9fe5['ok'])this[_0x1b7a4e(0x234)](_0x4f9fe5[_0x1b7a4e(0x2a1)],_0x700056);if(_0x30b521['ok'])this[_0x1b7a4e(0x234)](_0x30b521[_0x1b7a4e(0x2a1)],_0x2a5125);this[_0x1b7a4e(0x237)]();}catch(_0x277714){}},'applyData'(_0x38ebc1,_0x32672b){const _0xacf72=a3_0x3f373f;if(!_0x38ebc1)return;if(_0x38ebc1[_0xacf72(0x26d)]){if(_0x38ebc1[_0xacf72(0x26d)][_0xacf72(0x292)])availabilityPattern=_0x38ebc1[_0xacf72(0x26d)][_0xacf72(0x292)];if(_0x38ebc1[_0xacf72(0x26d)][_0xacf72(0x26e)])specialRanges=_0x38ebc1[_0xacf72(0x26d)][_0xacf72(0x26e)];if(_0x38ebc1[_0xacf72(0x26d)][_0xacf72(0x248)])dateExceptions=_0x38ebc1[_0xacf72(0x26d)][_0xacf72(0x248)];}if(_0x38ebc1[_0xacf72(0x1eb)]&&Array[_0xacf72(0x21f)](_0x38ebc1[_0xacf72(0x1eb)]))clients=_0x38ebc1[_0xacf72(0x1eb)];_0x38ebc1[_0xacf72(0x21a)]&&(coachProfiles={...coachProfiles,..._0x38ebc1[_0xacf72(0x21a)]}),_0x38ebc1[_0xacf72(0x2a9)]&&(sessions=sessions[_0xacf72(0x2bf)](_0x9cb5ef=>!_0x9cb5ef[_0xacf72(0x253)]['startsWith'](_0x32672b)),Object[_0xacf72(0x2bb)](_0x38ebc1[_0xacf72(0x2a9)])[_0xacf72(0x1fa)](_0x1eb458=>{const _0x3063fb=_0xacf72,_0x30934d=_0x38ebc1[_0x3063fb(0x2a9)][_0x1eb458];_0x30934d[_0x3063fb(0x1fa)](_0x4c46f0=>{sessions['push']({'id':_0x4c46f0['i'],'clientId':_0x4c46f0['c'],'coachId':_0x4c46f0['cid'],'dateStr':_0x32672b+'-'+_0x1eb458['padStart'](0x2,'0'),'start':_0x4c46f0['s'],'end':_0x4c46f0['e'],'note':_0x4c46f0['n']||'','status':_0x4c46f0['st']||'planned','seriesId':_0x4c46f0['sid']});});})),reRenderBlocks();}};function init(){const _0x45066b=a3_0x3f373f;DataManager[_0x45066b(0x247)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x45066b(0x229)](_0x45066b(0x25c))[_0x45066b(0x258)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x270d38=a3_0x3f373f,_0x4a0a2f=document[_0x270d38(0x229)]('timeColumn'),_0x46df4b=document[_0x270d38(0x229)]('timeLineBadge');_0x4a0a2f[_0x270d38(0x1fc)]='',_0x4a0a2f[_0x270d38(0x27c)](_0x46df4b);for(let _0x1d24b4=0x0;_0x1d24b4<0x18;_0x1d24b4++){const _0x4661a0=document[_0x270d38(0x1fb)](_0x270d38(0x24f));_0x4661a0[_0x270d38(0x20c)]=_0x270d38(0x210);if(_0x1d24b4>0x0)_0x4661a0[_0x270d38(0x1fc)]=_0x270d38(0x28d)+String(_0x1d24b4)[_0x270d38(0x274)](0x2,'0')+_0x270d38(0x1ce);_0x4a0a2f[_0x270d38(0x27c)](_0x4661a0);}}function renderDayRange(_0x51fb62,_0xca280f){const _0xc1edad=a3_0x3f373f,_0x5c0362=document[_0xc1edad(0x229)](_0xc1edad(0x299)),_0x2cdd24=document[_0xc1edad(0x229)]('gridColumns'),_0x387c38=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x21bc7e=new Date();_0x21bc7e[_0xc1edad(0x207)](0x0,0x0,0x0,0x0);const _0x55858d=getLocalDateStr(new Date());for(let _0x281cf5=_0x51fb62;_0x281cf5<=_0xca280f;_0x281cf5++){const _0x5e9960=new Date(_0x21bc7e);_0x5e9960[_0xc1edad(0x1d5)](_0x5e9960['getDate']()+_0x281cf5);const _0x1891fe=getLocalDateStr(_0x5e9960);let _0x3dffe8=_0x5e9960[_0xc1edad(0x238)]()-0x1;if(_0x3dffe8===-0x1)_0x3dffe8=0x6;const _0x4c4e82=_0x1891fe===_0x55858d,_0x2f60fa=document['createElement']('div');_0x2f60fa[_0xc1edad(0x20c)]=_0xc1edad(0x256)+(_0x4c4e82?_0xc1edad(0x1e0):''),_0x2f60fa[_0xc1edad(0x2b7)](_0xc1edad(0x25b),_0x1891fe),_0x2f60fa['innerHTML']=_0xc1edad(0x231)+_0x387c38[_0x3dffe8]+_0xc1edad(0x219)+_0x5e9960[_0xc1edad(0x1cf)]()+_0xc1edad(0x22c),_0x5c0362[_0xc1edad(0x27c)](_0x2f60fa);const _0x4776ee=document[_0xc1edad(0x1fb)]('div');_0x4776ee[_0xc1edad(0x20c)]='day-column\x20'+(_0x4c4e82?_0xc1edad(0x1e0):''),_0x4776ee[_0xc1edad(0x2b7)](_0xc1edad(0x25b),_0x1891fe),_0x4776ee[_0xc1edad(0x2b7)](_0xc1edad(0x239),_0x3dffe8),_0x2cdd24[_0xc1edad(0x27c)](_0x4776ee);}}function reRenderBlocks(){const _0x572738=a3_0x3f373f;document[_0x572738(0x245)](_0x572738(0x26a))[_0x572738(0x1fa)](_0x434534=>{const _0x32b6d4=_0x572738;_0x434534[_0x32b6d4(0x245)](_0x32b6d4(0x22e))[_0x32b6d4(0x1fa)](_0x4c366c=>_0x4c366c[_0x32b6d4(0x20a)]());const _0x557ebc=_0x434534[_0x32b6d4(0x23c)](_0x32b6d4(0x25b)),_0x3173e4=parseInt(_0x434534[_0x32b6d4(0x23c)](_0x32b6d4(0x239))),_0x54f9d1=Math[_0x32b6d4(0x1e2)](_0x434534[_0x32b6d4(0x208)]);(availabilityPattern[_0x3173e4]||[])[_0x32b6d4(0x1fa)](_0x570b3a=>{const _0x38e0f5=_0x32b6d4,_0x3ee1ba=document[_0x38e0f5(0x1fb)](_0x38e0f5(0x24f));_0x3ee1ba[_0x38e0f5(0x20c)]='blocked-slot\x20stripe-bg',_0x3ee1ba[_0x38e0f5(0x1e6)][_0x38e0f5(0x297)]=_0x570b3a*GRID_H+'px',_0x3ee1ba['style'][_0x38e0f5(0x22b)]='-'+_0x54f9d1+_0x38e0f5(0x20d)+_0x570b3a*GRID_H+'px',_0x434534[_0x38e0f5(0x27c)](_0x3ee1ba);});if(specialRanges[_0x32b6d4(0x1f3)]>0x0){const _0x2b628f=new Date(_0x557ebc+_0x32b6d4(0x2a6))[_0x32b6d4(0x2ab)](),_0x14fe39=new Date(_0x557ebc+'T23:59:59')['getTime']();specialRanges[_0x32b6d4(0x1fa)](_0x4fe04b=>{const _0x53dde5=_0x32b6d4,_0x2c68ed=new Date(_0x4fe04b['start'])[_0x53dde5(0x2ab)](),_0x1746be=new Date(_0x4fe04b[_0x53dde5(0x1db)])['getTime'](),_0x36c96c=Math['max'](_0x2b628f,_0x2c68ed),_0x562096=Math['min'](_0x14fe39,_0x1746be);if(_0x36c96c<_0x562096){const _0x21d369=(_0x36c96c-_0x2b628f)/0x36ee80*GRID_H,_0x24acf4=(_0x562096-_0x36c96c)/0x36ee80*GRID_H,_0x1bd81c=document['createElement'](_0x53dde5(0x24f));_0x24acf4>=23.5*GRID_H?(_0x1bd81c[_0x53dde5(0x20c)]=_0x53dde5(0x271),_0x1bd81c[_0x53dde5(0x1e6)]['backgroundPosition']='-'+_0x54f9d1+_0x53dde5(0x286)):(_0x1bd81c['className']=_0x53dde5(0x200),_0x1bd81c[_0x53dde5(0x1e6)][_0x53dde5(0x297)]=_0x21d369+'px',_0x1bd81c['style']['height']=_0x24acf4+'px',_0x1bd81c[_0x53dde5(0x1e6)][_0x53dde5(0x22b)]='-'+_0x54f9d1+_0x53dde5(0x20d)+_0x21d369+'px'),_0x434534[_0x53dde5(0x27c)](_0x1bd81c);}});}renderEventsForColumn(_0x434534,_0x557ebc);});}function renderEventsForColumn(_0x3ee838,_0x257a75){const _0x133e5b=a3_0x3f373f,_0x11326a=sessions[_0x133e5b(0x2bf)](_0x4dc857=>_0x4dc857[_0x133e5b(0x253)]===_0x257a75),_0x5db96e=_0x11326a[_0x133e5b(0x21e)](_0x195360=>{const _0x3cb77a=_0x133e5b,[_0x5a6d2b,_0x1b3795]=_0x195360[_0x3cb77a(0x2a5)]['split'](':')['map'](Number),[_0x28fed8,_0x4e61f8]=_0x195360[_0x3cb77a(0x1db)]['split'](':')[_0x3cb77a(0x21e)](Number);return{'data':_0x195360,'start':_0x5a6d2b*0x3c+_0x1b3795,'end':_0x28fed8*0x3c+_0x4e61f8,'colIndex':0x0};});_0x5db96e[_0x133e5b(0x1f1)]((_0x2e5283,_0x490d57)=>_0x2e5283['start']-_0x490d57[_0x133e5b(0x2a5)]||_0x490d57['end']-_0x490d57[_0x133e5b(0x2a5)]-(_0x2e5283[_0x133e5b(0x1db)]-_0x2e5283[_0x133e5b(0x2a5)]));const _0x50fedd=[];_0x5db96e[_0x133e5b(0x1fa)](_0xfeea73=>{const _0x59d413=_0x133e5b;let _0x18b73e=![];for(let _0x24c346=0x0;_0x24c346<_0x50fedd[_0x59d413(0x1f3)];_0x24c346++){const _0xcbe238=_0x50fedd[_0x24c346];if(_0xfeea73[_0x59d413(0x2a5)]>=_0xcbe238[_0xcbe238[_0x59d413(0x1f3)]-0x1][_0x59d413(0x1db)]){_0xcbe238['push'](_0xfeea73),_0xfeea73['colIndex']=_0x24c346,_0x18b73e=!![];break;}}!_0x18b73e&&(_0x50fedd[_0x59d413(0x263)]([_0xfeea73]),_0xfeea73[_0x59d413(0x20b)]=_0x50fedd['length']-0x1);}),_0x5db96e['forEach'](_0x47fc14=>{const _0x23e9e5=_0x133e5b;let _0x4e013b=0x0;_0x5db96e[_0x23e9e5(0x1fa)](_0x5a8877=>{const _0x3c96bc=_0x23e9e5;if(Math['max'](_0x47fc14[_0x3c96bc(0x2a5)],_0x5a8877['start'])<Math[_0x3c96bc(0x262)](_0x47fc14[_0x3c96bc(0x1db)],_0x5a8877[_0x3c96bc(0x1db)])&&_0x5a8877[_0x3c96bc(0x20b)]>_0x4e013b)_0x4e013b=_0x5a8877[_0x3c96bc(0x20b)];});const _0x125dd7=_0x4e013b+0x1,_0x5a465f=0x64/_0x125dd7,_0x3982f1=_0x47fc14['colIndex']*_0x5a465f,_0xfa87ef=document[_0x23e9e5(0x1fb)](_0x23e9e5(0x24f)),_0x159087=_0x47fc14['data'];let _0x4b088a=_0x23e9e5(0x233);if(clients&&clients[_0x23e9e5(0x1f3)]>0x0){const _0x30d684=clients['find'](_0x22b88b=>String(_0x22b88b['id'])===String(_0x159087['clientId']));if(_0x30d684&&_0x30d684[_0x23e9e5(0x2a8)])_0x4b088a=_0x30d684[_0x23e9e5(0x2a8)];}const _0x307c0f=_0x159087[_0x23e9e5(0x267)]===_0x23e9e5(0x220),_0x11aaee=_0x307c0f?0x1:0.45;_0xfa87ef['className']=_0x23e9e5(0x24e)+(_0x307c0f?'\x20status-completed':''),_0xfa87ef[_0x23e9e5(0x1e6)][_0x23e9e5(0x283)]=hexToRgba(_0x4b088a,_0x11aaee),_0xfa87ef[_0x23e9e5(0x1e6)][_0x23e9e5(0x209)]=_0x4b088a;const _0x4afa0e=_0x47fc14[_0x23e9e5(0x2a5)]/0x3c*GRID_H,_0x204860=(_0x47fc14['end']-_0x47fc14[_0x23e9e5(0x2a5)])/0x3c*GRID_H;_0xfa87ef['style'][_0x23e9e5(0x297)]=_0x4afa0e+'px',_0xfa87ef['style'][_0x23e9e5(0x23d)]=Math['max'](_0x204860,0x14)+'px',_0xfa87ef['style']['width']=_0x23e9e5(0x29b)+_0x5a465f+_0x23e9e5(0x26b),_0xfa87ef[_0x23e9e5(0x1e6)][_0x23e9e5(0x217)]=_0x23e9e5(0x29b)+_0x3982f1+_0x23e9e5(0x1cc),_0xfa87ef[_0x23e9e5(0x1e6)][_0x23e9e5(0x1e9)]=0xa+_0x47fc14[_0x23e9e5(0x20b)];if(_0x5a465f<0x55)_0xfa87ef[_0x23e9e5(0x25a)][_0x23e9e5(0x2a2)](_0x23e9e5(0x21d));let _0x1ba3a6='';if(_0x159087[_0x23e9e5(0x288)])_0x1ba3a6+=_0x23e9e5(0x2b8);if(_0x307c0f)_0x1ba3a6+=_0x23e9e5(0x24a);_0xfa87ef['innerHTML']=_0x23e9e5(0x246)+_0x159087[_0x23e9e5(0x2a5)]+'\x20-\x20'+_0x159087[_0x23e9e5(0x1db)]+_0x23e9e5(0x293)+_0x1ba3a6+_0x23e9e5(0x204),_0xfa87ef[_0x23e9e5(0x28e)]=_0x58fb89=>{const _0x3c5e69=_0x23e9e5;_0x58fb89[_0x3c5e69(0x216)](),openDetails(_0x159087);},_0x3ee838[_0x23e9e5(0x27c)](_0xfa87ef);});}function openAnalytics(){const _0x2d2679=a3_0x3f373f,_0xcb545c=document['querySelector'](_0x2d2679(0x298));setAnalyticsPeriod(_0x2d2679(0x1de),_0xcb545c),openSheet(_0x2d2679(0x225));}function setAnalyticsPeriod(_0x3a8ffb,_0x574eab){const _0x2d88ae=a3_0x3f373f;currentAnPeriod=_0x3a8ffb,document[_0x2d88ae(0x245)]('.period-switch\x20.p-btn')['forEach'](_0x444ebe=>_0x444ebe[_0x2d88ae(0x25a)][_0x2d88ae(0x20a)]('active'));if(_0x574eab)_0x574eab['classList']['add'](_0x2d88ae(0x28f));const _0x433dd9=document[_0x2d88ae(0x229)](_0x2d88ae(0x1d6));_0x433dd9[_0x2d88ae(0x1e6)]['display']=_0x3a8ffb==='custom'?_0x2d88ae(0x214):_0x2d88ae(0x22d);const _0x26cab2=new Date();let _0x2ae0b7=new Date(),_0x591625=new Date();if(_0x3a8ffb===_0x2d88ae(0x1de))_0x2ae0b7=getStartOfWeek(_0x26cab2),_0x591625=new Date(_0x2ae0b7),_0x591625[_0x2d88ae(0x1d5)](_0x591625[_0x2d88ae(0x1cf)]()+0x6);else{if(_0x3a8ffb===_0x2d88ae(0x226))_0x2ae0b7=new Date(_0x26cab2[_0x2d88ae(0x212)](),_0x26cab2[_0x2d88ae(0x1f7)](),0x1),_0x591625=new Date(_0x26cab2[_0x2d88ae(0x212)](),_0x26cab2[_0x2d88ae(0x1f7)]()+0x1,0x0);else{!document[_0x2d88ae(0x229)](_0x2d88ae(0x291))[_0x2d88ae(0x2ad)]&&(document['getElementById'](_0x2d88ae(0x291))['value']=getLocalDateStr(_0x26cab2),document[_0x2d88ae(0x229)](_0x2d88ae(0x2bc))[_0x2d88ae(0x2ad)]=getLocalDateStr(_0x26cab2));refreshAnalytics();return;}}document[_0x2d88ae(0x229)](_0x2d88ae(0x291))[_0x2d88ae(0x2ad)]=getLocalDateStr(_0x2ae0b7),document['getElementById'](_0x2d88ae(0x2bc))[_0x2d88ae(0x2ad)]=getLocalDateStr(_0x591625),refreshAnalytics();}function refreshAnalytics(){const _0x5ab8ed=a3_0x3f373f,_0x2b956e=document[_0x5ab8ed(0x229)]('anStart')['value'],_0x1c2f70=document['getElementById'](_0x5ab8ed(0x2bc))[_0x5ab8ed(0x2ad)];if(!_0x2b956e||!_0x1c2f70)return;const _0x134cb3=sessions[_0x5ab8ed(0x2bf)](_0x7c6e08=>_0x7c6e08[_0x5ab8ed(0x253)]>=_0x2b956e&&_0x7c6e08[_0x5ab8ed(0x253)]<=_0x1c2f70&&_0x7c6e08[_0x5ab8ed(0x267)]!==_0x5ab8ed(0x1e1)),_0x125fba=_0x134cb3[_0x5ab8ed(0x1f3)],_0x297c43=_0x134cb3[_0x5ab8ed(0x2bf)](_0x46510f=>_0x46510f[_0x5ab8ed(0x267)]===_0x5ab8ed(0x220))[_0x5ab8ed(0x1f3)],_0x6de37f=_0x125fba>0x0?Math[_0x5ab8ed(0x1e2)](_0x297c43/_0x125fba*0x64):0x0;document[_0x5ab8ed(0x229)]('anPercent')[_0x5ab8ed(0x244)]=_0x6de37f+'%',document[_0x5ab8ed(0x229)](_0x5ab8ed(0x230))[_0x5ab8ed(0x244)]=_0x297c43+_0x5ab8ed(0x254)+_0x125fba+_0x5ab8ed(0x2ac);const _0x56d542=document['getElementById'](_0x5ab8ed(0x235)),_0x30d409=0x2*Math['PI']*0x23,_0x22b90b=_0x30d409-_0x6de37f/0x64*_0x30d409;_0x56d542[_0x5ab8ed(0x1e6)][_0x5ab8ed(0x275)]=_0x22b90b;const _0x51b667={};_0x134cb3[_0x5ab8ed(0x1fa)](_0x5a0a6a=>{const _0x456471=_0x5ab8ed,_0x2b612a=_0x5a0a6a[_0x456471(0x272)]||_0x456471(0x24c);if(!_0x51b667[_0x2b612a]){const _0x347588='#'+_0x2b612a[_0x456471(0x241)]()['substr'](0x0,0x6);_0x51b667[_0x2b612a]={'total':0x0,'done':0x0,'color':_0x347588};}_0x51b667[_0x2b612a]['total']++;if(_0x5a0a6a['status']===_0x456471(0x220))_0x51b667[_0x2b612a][_0x456471(0x22a)]++;});const _0x411581=document[_0x5ab8ed(0x229)](_0x5ab8ed(0x2b2));_0x411581[_0x5ab8ed(0x1fc)]='';const _0x3de523=Object['entries'](_0x51b667)[_0x5ab8ed(0x1f1)]((_0x2f13a9,_0x3152e1)=>_0x3152e1[0x1][_0x5ab8ed(0x261)]-_0x2f13a9[0x1]['total']);if(_0x3de523[_0x5ab8ed(0x1f3)]===0x0){_0x411581[_0x5ab8ed(0x1fc)]=_0x5ab8ed(0x279);return;}_0x3de523[_0x5ab8ed(0x1fa)](([_0x704dc6,_0x3260a2])=>{const _0x2c6103=_0x5ab8ed,_0xf17b42=Math['round'](_0x3260a2[_0x2c6103(0x22a)]/_0x3260a2[_0x2c6103(0x261)]*0x64),_0x20a262=document['createElement'](_0x2c6103(0x24f));_0x20a262['className']='client-stat-card',_0x20a262[_0x2c6103(0x1e6)]['borderLeftColor']=_0x3260a2[_0x2c6103(0x2a8)],_0x20a262['innerHTML']=_0x2c6103(0x27a)+_0x704dc6[_0x2c6103(0x240)](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x3260a2[_0x2c6103(0x22a)]+'</span>\x20/\x20'+_0x3260a2[_0x2c6103(0x261)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0xf17b42+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x411581[_0x2c6103(0x27c)](_0x20a262);});}function a3_0x1885(){const _0x5b25b8=['headerMonth','disableVerticalSwipes','overlay','6480NBCazn','ccTitle','backgroundColor','client_load','scrollWidth','px\x200px','rescheduleSheet','seriesId','router.html','customConfirm','Error\x20setting\x20color:','–∑–∞\x20','<span>','onclick','active','Critical\x20TMA\x20Error:','anStart','pattern','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','floor','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','147vXKhig','top','.period-switch\x20.p-btn','daysHeaderTrack','fontWeight','calc(','getMinutes','rs-date-chip','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','3260ySJlPp','detailsSheet','data','add','v9.5-CLIENT-ANALYTICS','234528rjXMGL','start','T00:00:00','json','color','calendar','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','getTime','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','value','POST','(((.+)+)+)+$','open','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','analyticsList','all','toast','getItem','<div\x20class=\x22rs-day-name\x22>','setAttribute','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','#050505','2844HHsbyG','keys','anEnd','apply','</div><div\x20class=\x22rs-day-num\x22>','filter','%\x20+\x202px)','join',':00</span>','getDate','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','offsetWidth','.btn-reschedule','.day-col-header[data-date=\x22','toLocaleString','setDate','anCustomDates','querySelector','setMonth','log','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','end','1789264VRjfty','display','week','uc_client_list','today','cancelled','round','detNote','offClick','numeric','style','.day-col-header','error','zIndex','uc_client_sessions','clients','detStatus','226055rXORlt','long','syncLoad','reschedule','sort','substring','length','DOMContentLoaded','createDocumentFragment','ru-RU','getMonth','clientWidth','857430nBgioT','forEach','createElement','innerHTML','var(--acc-green)','cancel_window','visible','blocked-range-part\x20stripe-bg','initData','user','\x20-\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','WebApp','scrollLeft','setHours','offsetLeft','borderLeftColor','remove','colIndex','className','px\x20-','rs-time-btn','\x20—á.','time-label','onClick','getFullYear','client_cancel','flex','toUpperCase','stopPropagation','left','600','</div><div\x20class=\x22dch-num\x22>','coach_profiles','get_slots','stringify','mini','map','isArray','completed','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','BackButton','timeLineBadge','now','analyticsSheet','month','rsDatesTrack','globalTimeLine','getElementById','done','backgroundPosition','</div>','none','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','.rs-date-chip','anTotalStats','<div\x20class=\x22dch-day\x22>','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','#0a84ff','applyData','anDonutCircle','var(--acc-blue)','saveLocally','getDay','data-day-idx','setItem','setHeaderColor','getAttribute','height','split','test','substr','toString','day-column\x20','ccText','textContent','querySelectorAll','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','loadLocal','exceptions','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','href','Unknown','parse','event-card','div','block','search','findIndex','dateStr','\x20–∏–∑\x20','toLocaleDateString','day-col-header\x20','7tXOLqv','addEventListener','ready','classList','data-date','matrixViewport','.btn-cancel','scrollTo','note','Telegram','total','min','push','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','#ff453a','rsSlotsGrid','status','insertBefore','show','.day-column','%\x20-\x204px)','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','settings','ranges','rgba(','charAt','day-off-overlay\x20stripe-bg','coachId','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','padStart','strokeDashoffset','Error\x20setting\x20back\x20button:','detDate','initDataUnsafe','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','576060zkwati','appendChild','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'];a3_0x1885=function(){return _0x5b25b8;};return a3_0x1885();}function openDetails(_0x15c992){const _0x48a45d=a3_0x3f373f;currentSession=_0x15c992;const _0x38b036=new Date(_0x15c992[_0x48a45d(0x253)]),_0x2e2ecc=_0x38b036[_0x48a45d(0x255)](_0x48a45d(0x1f6),{'weekday':_0x48a45d(0x1ee),'day':_0x48a45d(0x1e5),'month':_0x48a45d(0x1ee)});document[_0x48a45d(0x229)](_0x48a45d(0x277))[_0x48a45d(0x244)]=_0x2e2ecc[_0x48a45d(0x270)](0x0)['toUpperCase']()+_0x2e2ecc['slice'](0x1),document[_0x48a45d(0x229)]('detTime')[_0x48a45d(0x244)]=_0x15c992['start']+_0x48a45d(0x203)+_0x15c992[_0x48a45d(0x1db)],document[_0x48a45d(0x229)](_0x48a45d(0x1e3))[_0x48a45d(0x244)]=_0x15c992[_0x48a45d(0x25f)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x4de29d=document[_0x48a45d(0x229)](_0x48a45d(0x1ec)),_0x1178f3=document[_0x48a45d(0x229)]('cancelContainer'),_0xa4b00d=_0x1178f3[_0x48a45d(0x1d7)](_0x48a45d(0x25d)),_0x4a314b=_0x1178f3[_0x48a45d(0x1d7)](_0x48a45d(0x1d2)),_0x1914d9=document[_0x48a45d(0x229)]('cancelHint');if(_0x15c992[_0x48a45d(0x267)]===_0x48a45d(0x220))_0x4de29d['textContent']='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0x4de29d['style'][_0x48a45d(0x2a8)]=_0x48a45d(0x1fd),_0x1178f3[_0x48a45d(0x1e6)]['display']=_0x48a45d(0x22d);else{_0x4de29d[_0x48a45d(0x244)]=_0x48a45d(0x249),_0x4de29d[_0x48a45d(0x1e6)][_0x48a45d(0x2a8)]=_0x48a45d(0x236),_0x1178f3[_0x48a45d(0x1e6)][_0x48a45d(0x1dd)]=_0x48a45d(0x250);const _0x5f5ab7=new Date(_0x15c992['dateStr']+'T'+_0x15c992[_0x48a45d(0x2a5)]),_0x489ec4=new Date(),_0x47910e=(_0x5f5ab7-_0x489ec4)/(0x3e8*0x3c*0x3c),_0x323645=coachProfiles[_0x15c992[_0x48a45d(0x272)]]&&coachProfiles[_0x15c992[_0x48a45d(0x272)]]['cancel_window']?parseInt(coachProfiles[_0x15c992['coachId']][_0x48a45d(0x1fe)]):0x18;if(_0x323645===0x0||_0x47910e>=_0x323645)_0xa4b00d[_0x48a45d(0x1e6)]['display']=_0x48a45d(0x250),_0x4a314b[_0x48a45d(0x1e6)][_0x48a45d(0x1dd)]=_0x48a45d(0x250),_0x1914d9['style']['display']=_0x48a45d(0x22d);else{_0xa4b00d['style'][_0x48a45d(0x1dd)]=_0x48a45d(0x22d),_0x4a314b[_0x48a45d(0x1e6)]['display']=_0x48a45d(0x22d),_0x1914d9[_0x48a45d(0x1e6)]['display']='block';let _0x2485ec=_0x323645===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x48a45d(0x28c)+_0x323645+_0x48a45d(0x20f);_0x1914d9[_0x48a45d(0x244)]=_0x48a45d(0x232)+_0x2485ec+_0x48a45d(0x2aa);}}document['getElementById']('overlay')['classList']['add'](_0x48a45d(0x28f)),document[_0x48a45d(0x229)](_0x48a45d(0x2a0))[_0x48a45d(0x25a)][_0x48a45d(0x2a2)](_0x48a45d(0x2b0));}function closeAllSheets(){const _0x1bfc54=a3_0x3f373f;document[_0x1bfc54(0x229)](_0x1bfc54(0x280))['classList'][_0x1bfc54(0x20a)](_0x1bfc54(0x28f)),document[_0x1bfc54(0x245)]('.sheet')['forEach'](_0xa028a3=>_0xa028a3[_0x1bfc54(0x25a)][_0x1bfc54(0x20a)](_0x1bfc54(0x2b0)));}function openSheet(_0x3c0edb){const _0x187d88=a3_0x3f373f;document[_0x187d88(0x229)](_0x187d88(0x280))[_0x187d88(0x25a)]['add'](_0x187d88(0x28f)),document['getElementById'](_0x3c0edb)['classList'][_0x187d88(0x2a2)]('open');}function getLocalDateStr(_0x3416e2){const _0x3b000a=a3_0x3f373f,_0x27da48=_0x3416e2[_0x3b000a(0x212)](),_0x257af5=String(_0x3416e2[_0x3b000a(0x1f7)]()+0x1)[_0x3b000a(0x274)](0x2,'0'),_0x396a8b=String(_0x3416e2[_0x3b000a(0x1cf)]())['padStart'](0x2,'0');return _0x27da48+'-'+_0x257af5+'-'+_0x396a8b;}function getStartOfWeek(_0xbdd5f5){const _0x13ff11=a3_0x3f373f,_0x10a21f=new Date(_0xbdd5f5),_0x513d95=_0x10a21f[_0x13ff11(0x238)](),_0x2d2814=_0x10a21f[_0x13ff11(0x1cf)]()-_0x513d95+(_0x513d95===0x0?-0x6:0x1);return _0x10a21f[_0x13ff11(0x1d5)](_0x2d2814),_0x10a21f[_0x13ff11(0x207)](0x0,0x0,0x0,0x0),_0x10a21f;}function scrollToToday(){const _0x3361ab=getLocalDateStr(new Date());setTimeout(()=>{const _0x4de4a4=a3_0x3972,_0x42f0ff=document[_0x4de4a4(0x1d7)](_0x4de4a4(0x1d3)+_0x3361ab+'\x22]');if(_0x42f0ff){const _0x9db950=document[_0x4de4a4(0x229)](_0x4de4a4(0x25c)),_0x4422f7=_0x42f0ff['offsetLeft']-_0x9db950[_0x4de4a4(0x1f8)]/0x2+_0x42f0ff[_0x4de4a4(0x1d1)]/0x2;_0x9db950[_0x4de4a4(0x25e)]({'left':_0x4422f7,'behavior':'auto'}),_0x9db950['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4fb66b=a3_0x3f373f,_0x19503c=new Date(),_0x5a66e2=document[_0x4fb66b(0x229)](_0x4fb66b(0x228)),_0x201c7c=document[_0x4fb66b(0x229)](_0x4fb66b(0x223)),_0x4da8c0=(_0x19503c['getHours']()*0x3c+_0x19503c[_0x4fb66b(0x29c)]())/0x3c*GRID_H;_0x5a66e2[_0x4fb66b(0x1e6)][_0x4fb66b(0x297)]=_0x4da8c0+'px',_0x5a66e2[_0x4fb66b(0x1e6)][_0x4fb66b(0x1dd)]=_0x4fb66b(0x250),_0x201c7c[_0x4fb66b(0x1e6)][_0x4fb66b(0x297)]=_0x4da8c0+'px',_0x201c7c['style'][_0x4fb66b(0x1dd)]=_0x4fb66b(0x250),_0x201c7c['textContent']=String(_0x19503c['getHours']())[_0x4fb66b(0x274)](0x2,'0')+':'+String(_0x19503c[_0x4fb66b(0x29c)]())[_0x4fb66b(0x274)](0x2,'0');}function onScroll(){const _0x40c40=a3_0x3f373f,_0x203036=document[_0x40c40(0x229)](_0x40c40(0x25c)),_0xf42ac5=document['querySelectorAll'](_0x40c40(0x1e7));for(let _0xc7c00a of _0xf42ac5)if(_0xc7c00a[_0x40c40(0x208)]>=_0x203036['scrollLeft']){const _0xb5c29c=new Date(_0xc7c00a[_0x40c40(0x23c)](_0x40c40(0x25b)));document[_0x40c40(0x229)](_0x40c40(0x27e))['textContent']=_0xb5c29c[_0x40c40(0x1d4)]('ru',{'month':_0x40c40(0x1ee)})[_0x40c40(0x215)]()+'\x20'+_0xb5c29c[_0x40c40(0x212)]();break;}}function showToast(_0x491fb0){const _0x141a70=a3_0x3f373f,_0x20441b=document[_0x141a70(0x229)](_0x141a70(0x2b4));_0x20441b[_0x141a70(0x244)]=_0x491fb0,_0x20441b[_0x141a70(0x25a)]['add'](_0x141a70(0x269)),setTimeout(()=>_0x20441b[_0x141a70(0x25a)][_0x141a70(0x20a)](_0x141a70(0x269)),0x7d0);}function handleInfiniteScroll(){const _0x45e3b1=a3_0x3f373f,_0x3384d6=document[_0x45e3b1(0x229)](_0x45e3b1(0x25c)),_0xd374b2=_0x3384d6[_0x45e3b1(0x206)],_0x9b0b6a=_0x3384d6[_0x45e3b1(0x285)],_0x4c92e5=_0x3384d6[_0x45e3b1(0x1f8)];if(_0x9b0b6a-(_0xd374b2+_0x4c92e5)<0x12c){const _0x2e664f=endOffset;endOffset+=0xe,renderDayRange(_0x2e664f+0x1,endOffset),reRenderBlocks();}if(_0xd374b2<0x12c){const _0x40155f=startOffset;startOffset-=0xe,prependDays(startOffset,_0x40155f-0x1),_0x3384d6[_0x45e3b1(0x206)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1cdabd,_0x2debc1){const _0x363be8=a3_0x3f373f,_0x2de601=document[_0x363be8(0x229)]('daysHeaderTrack'),_0x896eb5=document[_0x363be8(0x229)]('gridColumns'),_0xb08322=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x3b9a54=new Date();_0x3b9a54[_0x363be8(0x207)](0x0,0x0,0x0,0x0);const _0x2fdf81=getLocalDateStr(new Date()),_0x40f04e=document['createDocumentFragment'](),_0x582af9=document[_0x363be8(0x1f5)]();for(let _0x1e345d=_0x1cdabd;_0x1e345d<=_0x2debc1;_0x1e345d++){const _0x2cd7d1=new Date(_0x3b9a54);_0x2cd7d1[_0x363be8(0x1d5)](_0x2cd7d1['getDate']()+_0x1e345d);const _0x56aaa1=getLocalDateStr(_0x2cd7d1);let _0xa1a500=_0x2cd7d1['getDay']()-0x1;if(_0xa1a500===-0x1)_0xa1a500=0x6;const _0x1eadf0=_0x56aaa1===_0x2fdf81,_0x3eb7ce=document[_0x363be8(0x1fb)]('div');_0x3eb7ce[_0x363be8(0x20c)]=_0x363be8(0x256)+(_0x1eadf0?_0x363be8(0x1e0):''),_0x3eb7ce[_0x363be8(0x2b7)](_0x363be8(0x25b),_0x56aaa1),_0x3eb7ce[_0x363be8(0x1fc)]=_0x363be8(0x231)+_0xb08322[_0xa1a500]+_0x363be8(0x219)+_0x2cd7d1[_0x363be8(0x1cf)]()+_0x363be8(0x22c),_0x40f04e['appendChild'](_0x3eb7ce);const _0x49e361=document[_0x363be8(0x1fb)]('div');_0x49e361['className']=_0x363be8(0x242)+(_0x1eadf0?_0x363be8(0x1e0):''),_0x49e361[_0x363be8(0x2b7)](_0x363be8(0x25b),_0x56aaa1),_0x49e361[_0x363be8(0x2b7)]('data-day-idx',_0xa1a500),_0x582af9[_0x363be8(0x27c)](_0x49e361);}_0x2de601[_0x363be8(0x268)](_0x40f04e,_0x2de601['firstChild']),_0x896eb5['insertBefore'](_0x582af9,_0x896eb5[_0x363be8(0x1d7)](_0x363be8(0x26a)));}function hexToRgba(_0xea6b50,_0x2abf89){const _0x4d283d=a3_0x3f373f;let _0x1a7ccd;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x4d283d(0x23f)](_0xea6b50))return _0x1a7ccd=_0xea6b50[_0x4d283d(0x1f2)](0x1)[_0x4d283d(0x23e)](''),_0x1a7ccd[_0x4d283d(0x1f3)]==0x3&&(_0x1a7ccd=[_0x1a7ccd[0x0],_0x1a7ccd[0x0],_0x1a7ccd[0x1],_0x1a7ccd[0x1],_0x1a7ccd[0x2],_0x1a7ccd[0x2]]),_0x1a7ccd='0x'+_0x1a7ccd[_0x4d283d(0x1cd)](''),_0x4d283d(0x26f)+[_0x1a7ccd>>0x10&0xff,_0x1a7ccd>>0x8&0xff,_0x1a7ccd&0xff][_0x4d283d(0x1cd)](',')+','+_0x2abf89+')';return'rgba(10,\x20132,\x20255,\x20'+_0x2abf89+')';}let confirmResolver=null;function showCustomConfirm(_0x45b094,_0x346f0e,_0x46b57f=!![]){const _0x3e050b=a3_0x3f373f;document[_0x3e050b(0x229)](_0x3e050b(0x282))[_0x3e050b(0x244)]=_0x45b094,document['getElementById'](_0x3e050b(0x243))[_0x3e050b(0x244)]=_0x346f0e;const _0xd4ed60=document[_0x3e050b(0x229)]('ccYesBtn');return _0x46b57f?(_0xd4ed60['style'][_0x3e050b(0x2a8)]=_0x3e050b(0x265),_0xd4ed60[_0x3e050b(0x1e6)][_0x3e050b(0x29a)]='600'):(_0xd4ed60[_0x3e050b(0x1e6)]['color']=_0x3e050b(0x233),_0xd4ed60[_0x3e050b(0x1e6)][_0x3e050b(0x29a)]=_0x3e050b(0x218)),new Promise(_0x2e0fba=>{const _0xba3d2f=_0x3e050b;confirmResolver=_0x2e0fba,document[_0xba3d2f(0x229)](_0xba3d2f(0x28a))[_0xba3d2f(0x25a)][_0xba3d2f(0x2a2)]('visible');});}function resolveCustomConfirm(_0x522a99){const _0x576b96=a3_0x3f373f;document[_0x576b96(0x229)](_0x576b96(0x28a))[_0x576b96(0x25a)]['remove'](_0x576b96(0x1ff));if(confirmResolver)confirmResolver(_0x522a99);}async function tryCancelCurrentSession(){const _0x218d82=a3_0x3f373f;if(!currentSession)return;const _0x2d3452=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x218d82(0x1da),!![]);if(!_0x2d3452)return;const _0x494980=currentSession;closeAllSheets(),sessions=sessions[_0x218d82(0x2bf)](_0x100f13=>_0x100f13['id']!==_0x494980['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x218d82(0x224)]();try{const _0x1eae21=window['Telegram']?.['WebApp'],_0x21d266=await fetch(API_URL,{'method':_0x218d82(0x2ae),'body':JSON['stringify']({'action':_0x218d82(0x213),'init_data':_0x1eae21?.[_0x218d82(0x201)]||'','coachId':_0x494980['coachId'],'dateStr':_0x494980['dateStr'],'sessionId':_0x494980['id']})});if(_0x21d266['ok'])DataManager['saveLocally']();}catch(_0x136552){showToast(_0x218d82(0x221));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x5044e5=a3_0x3f373f;if(!currentSession)return;document['getElementById'](_0x5044e5(0x2a0))['classList']['remove'](_0x5044e5(0x2b0)),document[_0x5044e5(0x229)](_0x5044e5(0x287))[_0x5044e5(0x25a)]['add'](_0x5044e5(0x2b0));const _0x18a8c2=document['getElementById'](_0x5044e5(0x227)),_0x2c3783=document[_0x5044e5(0x229)](_0x5044e5(0x266));_0x18a8c2[_0x5044e5(0x1fc)]='',_0x2c3783[_0x5044e5(0x1fc)]=_0x5044e5(0x2b1);const [_0x2ac563,_0x218905]=currentSession[_0x5044e5(0x2a5)][_0x5044e5(0x23e)](':')[_0x5044e5(0x21e)](Number),[_0x17426f,_0x48de0b]=currentSession[_0x5044e5(0x1db)][_0x5044e5(0x23e)](':')[_0x5044e5(0x21e)](Number),_0x1b034d=_0x17426f*0x3c+_0x48de0b-(_0x2ac563*0x3c+_0x218905);try{const _0x2dae6f=window[_0x5044e5(0x260)]?.['WebApp'],_0x5f4a10=await fetch(API_URL,{'method':'POST','body':JSON[_0x5044e5(0x21c)]({'action':_0x5044e5(0x21b),'coachId':currentSession[_0x5044e5(0x272)],'duration':_0x1b034d,'init_data':_0x2dae6f?.[_0x5044e5(0x201)]||'','excludeSessionId':currentSession['id']})}),_0x14a5f5=await _0x5f4a10[_0x5044e5(0x2a7)]();_0x14a5f5['ok']&&_0x14a5f5[_0x5044e5(0x2a1)]?(availableSlotsCache=_0x14a5f5[_0x5044e5(0x2a1)],renderRescheduleDates()):_0x2c3783['innerHTML']=_0x5044e5(0x1d0);}catch(_0x416a39){_0x2c3783[_0x5044e5(0x1fc)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x3011ee=a3_0x3f373f,_0x5a2444=document[_0x3011ee(0x229)](_0x3011ee(0x227));_0x5a2444[_0x3011ee(0x1fc)]='';const _0x1453b0=Object['keys'](availableSlotsCache)[_0x3011ee(0x1f1)](),_0x1bce12=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x1453b0[_0x3011ee(0x1f3)]===0x0){document[_0x3011ee(0x229)](_0x3011ee(0x266))['innerHTML']=_0x3011ee(0x295);return;}_0x1453b0['forEach']((_0x498b79,_0x26231f)=>{const _0x7f6324=_0x3011ee,_0x4081f1=new Date(_0x498b79),_0xb36597=_0x1bce12[_0x4081f1['getDay']()],_0x1415c9=_0x4081f1['getDate'](),_0x495e60=document[_0x7f6324(0x1fb)](_0x7f6324(0x24f));_0x495e60[_0x7f6324(0x20c)]=_0x7f6324(0x29d);if(_0x26231f===0x0)_0x495e60['classList'][_0x7f6324(0x2a2)]('active');_0x495e60[_0x7f6324(0x1fc)]=_0x7f6324(0x2b6)+_0xb36597+_0x7f6324(0x2be)+_0x1415c9+'</div>',_0x495e60[_0x7f6324(0x28e)]=()=>selectRsDate(_0x498b79,_0x495e60),_0x5a2444[_0x7f6324(0x27c)](_0x495e60);}),selectRsDate(_0x1453b0[0x0],_0x5a2444['firstChild']);}function selectRsDate(_0x2f0f0e,_0x3170e4){const _0x2fd982=a3_0x3f373f;selectedRsDate=_0x2f0f0e,document[_0x2fd982(0x245)](_0x2fd982(0x22f))['forEach'](_0x1f8435=>_0x1f8435[_0x2fd982(0x25a)]['remove'](_0x2fd982(0x28f)));if(_0x3170e4)_0x3170e4['classList']['add'](_0x2fd982(0x28f));const _0x1fa8a2=document[_0x2fd982(0x229)](_0x2fd982(0x266));_0x1fa8a2[_0x2fd982(0x1fc)]='';const _0x39a1cb=availableSlotsCache[_0x2f0f0e]||[];if(_0x39a1cb[_0x2fd982(0x1f3)]===0x0){_0x1fa8a2[_0x2fd982(0x1fc)]=_0x2fd982(0x1d0);return;}_0x39a1cb[_0x2fd982(0x1fa)](_0x4dc480=>{const _0x225b15=_0x2fd982,_0x569a26=document[_0x225b15(0x1fb)]('button');_0x569a26['className']=_0x225b15(0x20e),_0x569a26[_0x225b15(0x244)]=_0x4dc480,_0x569a26[_0x225b15(0x28e)]=()=>confirmReschedule(_0x4dc480),_0x1fa8a2[_0x225b15(0x27c)](_0x569a26);});}async function confirmReschedule(_0x7f5ce4){const _0x13db12=a3_0x3f373f,_0x5fc180=new Date(selectedRsDate),_0x209aad=_0x5fc180[_0x13db12(0x255)](_0x13db12(0x1f6),{'day':_0x13db12(0x1e5),'month':'long'}),_0x4a651c=await showCustomConfirm(_0x13db12(0x29e),_0x13db12(0x27d)+_0x209aad+'\x20–≤\x20'+_0x7f5ce4+'?',![]);if(!_0x4a651c)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date['now']();const _0x4d85f1=currentSession[_0x13db12(0x253)],_0x223699=currentSession['id'],[_0x464afe,_0x20c1cd]=currentSession[_0x13db12(0x2a5)]['split'](':')['map'](Number),[_0x4afd2a,_0x4afbda]=currentSession[_0x13db12(0x1db)][_0x13db12(0x23e)](':')[_0x13db12(0x21e)](Number),_0x22ef5e=_0x4afd2a*0x3c+_0x4afbda-(_0x464afe*0x3c+_0x20c1cd),[_0x3c0137,_0x4e4711]=_0x7f5ce4[_0x13db12(0x23e)](':')[_0x13db12(0x21e)](Number),_0x469d65=_0x3c0137*0x3c+_0x4e4711+_0x22ef5e,_0x19c94c=Math[_0x13db12(0x294)](_0x469d65/0x3c),_0x5f0a94=_0x469d65%0x3c,_0x5df591=String(_0x19c94c)[_0x13db12(0x274)](0x2,'0')+':'+String(_0x5f0a94)['padStart'](0x2,'0'),_0x1c7088=sessions[_0x13db12(0x252)](_0x44493f=>_0x44493f['id']===_0x223699);_0x1c7088!==-0x1&&(sessions[_0x1c7088]['dateStr']=selectedRsDate,sessions[_0x1c7088][_0x13db12(0x2a5)]=_0x7f5ce4,sessions[_0x1c7088][_0x13db12(0x1db)]=_0x5df591,reRenderBlocks());try{const _0x2632ca=window[_0x13db12(0x260)]?.[_0x13db12(0x205)],_0x2a7e44=await fetch(API_URL,{'method':_0x13db12(0x2ae),'body':JSON[_0x13db12(0x21c)]({'action':_0x13db12(0x1f0),'init_data':_0x2632ca?.['initData']||'','oldSessionId':_0x223699,'oldDate':_0x4d85f1,'newDate':selectedRsDate,'newTime':_0x7f5ce4,'coachId':currentSession['coachId']})}),_0x32e713=await _0x2a7e44[_0x13db12(0x2a7)]();!_0x32e713['ok']?(showToast(_0x13db12(0x26c)),DataManager[_0x13db12(0x1ef)]()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x13db12(0x237)]());}catch(_0x3d5216){showToast(_0x13db12(0x221));}}document[a3_0x3f373f(0x258)](a3_0x3f373f(0x1f4),init);