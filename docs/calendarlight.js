const a3_0x5b07f4=a3_0x12c4;(function(_0x47bed4,_0x2ff0b9){const _0x2d640c=a3_0x12c4,_0x5a3db5=_0x47bed4();while(!![]){try{const _0x49b113=parseInt(_0x2d640c(0x228))/0x1*(parseInt(_0x2d640c(0x26e))/0x2)+parseInt(_0x2d640c(0x1ee))/0x3*(parseInt(_0x2d640c(0x20b))/0x4)+parseInt(_0x2d640c(0x233))/0x5*(-parseInt(_0x2d640c(0x17f))/0x6)+-parseInt(_0x2d640c(0x249))/0x7*(-parseInt(_0x2d640c(0x23b))/0x8)+-parseInt(_0x2d640c(0x1a7))/0x9+parseInt(_0x2d640c(0x1b6))/0xa*(-parseInt(_0x2d640c(0x176))/0xb)+parseInt(_0x2d640c(0x26a))/0xc*(parseInt(_0x2d640c(0x264))/0xd);if(_0x49b113===_0x2ff0b9)break;else _0x5a3db5['push'](_0x5a3db5['shift']());}catch(_0x23be5b){_0x5a3db5['push'](_0x5a3db5['shift']());}}}(a3_0x1d34,0x27afa));const APP_VERSION=a3_0x5b07f4(0x222),API_URL=a3_0x5b07f4(0x216),GRID_H=0x3c,KEY_SESSIONS=a3_0x5b07f4(0x1b7),KEY_SETTINGS=a3_0x5b07f4(0x1d1),KEY_CLIENTS=a3_0x5b07f4(0x22a);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x5b07f4(0x1dc),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x442db8=a3_0x5b07f4,_0x1f4879=(function(){let _0x2239c4=!![];return function(_0x5f4ac8,_0x15f694){const _0x7cc62f=_0x2239c4?function(){const _0x4a169a=a3_0x12c4;if(_0x15f694){const _0x477e5a=_0x15f694[_0x4a169a(0x257)](_0x5f4ac8,arguments);return _0x15f694=null,_0x477e5a;}}:function(){};return _0x2239c4=![],_0x7cc62f;};}()),_0x31ad6c=_0x1f4879(this,function(){const _0x22d6d6=a3_0x12c4;return _0x31ad6c[_0x22d6d6(0x1f8)]()[_0x22d6d6(0x25e)](_0x22d6d6(0x26c))['toString']()[_0x22d6d6(0x1ae)](_0x31ad6c)['search']('(((.+)+)+)+$');});_0x31ad6c();try{const _0x57d108=window[_0x442db8(0x185)]?.[_0x442db8(0x16a)];if(!_0x57d108)return;_0x57d108[_0x442db8(0x1fa)](),_0x57d108[_0x442db8(0x212)]();try{_0x57d108['setHeaderColor'](_0x442db8(0x201)),_0x57d108[_0x442db8(0x16b)]&&_0x57d108[_0x442db8(0x16b)]('#050505');}catch(_0x5851d6){console[_0x442db8(0x24e)](_0x442db8(0x1e1),_0x5851d6);}try{_0x57d108['BackButton']&&(_0x57d108[_0x442db8(0x1c3)][_0x442db8(0x23f)](),_0x57d108[_0x442db8(0x1c3)][_0x442db8(0x1f2)](),_0x57d108['BackButton'][_0x442db8(0x1a8)](function(){const _0x32c7c9=_0x442db8;window[_0x32c7c9(0x1b0)][_0x32c7c9(0x20c)]=_0x32c7c9(0x21b);}));}catch(_0x13ee94){console[_0x442db8(0x24e)](_0x442db8(0x1bf),_0x13ee94);}try{if(_0x57d108[_0x442db8(0x184)])_0x57d108[_0x442db8(0x184)]();}catch(_0x507054){}}catch(_0x277407){console[_0x442db8(0x186)]('Critical\x20TMA\x20Error:',_0x277407);}}());function isAdmin(){const _0x5ce05c=a3_0x5b07f4;try{const _0x1e146f=Number(window['Telegram']?.[_0x5ce05c(0x16a)]?.[_0x5ce05c(0x229)]?.['user']?.['id']);return _0x1e146f===0xbaf7174;}catch(_0x3315ee){return![];}}const DataManager={'saveLocally'(){const _0x5ec4b1=a3_0x5b07f4;try{localStorage[_0x5ec4b1(0x231)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x5ec4b1(0x231)](KEY_CLIENTS,JSON[_0x5ec4b1(0x22b)](clients)),localStorage[_0x5ec4b1(0x231)](KEY_SETTINGS,JSON[_0x5ec4b1(0x22b)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x3ed2ea){}},'loadLocal'(){const _0x23f76f=a3_0x5b07f4;try{const _0x2ce778=localStorage[_0x23f76f(0x232)](KEY_SESSIONS);if(_0x2ce778)sessions=JSON[_0x23f76f(0x195)](_0x2ce778);const _0x2c0d90=localStorage[_0x23f76f(0x232)](KEY_CLIENTS);if(_0x2c0d90)clients=JSON[_0x23f76f(0x195)](_0x2c0d90);const _0x584e83=localStorage[_0x23f76f(0x232)](KEY_SETTINGS);if(_0x584e83){const _0x3693b9=JSON['parse'](_0x584e83);if(_0x3693b9['pattern'])availabilityPattern=_0x3693b9[_0x23f76f(0x1e5)];if(_0x3693b9[_0x23f76f(0x22f)])specialRanges=_0x3693b9[_0x23f76f(0x22f)];if(_0x3693b9['exceptions'])dateExceptions=_0x3693b9[_0x23f76f(0x1a9)];}}catch(_0x372f62){}},async 'syncLoad'(){const _0x376ddf=a3_0x5b07f4,_0x3c2d60=new Date(),_0x1bb9d9=_0x3c2d60[_0x376ddf(0x1e3)]()+'-'+String(_0x3c2d60[_0x376ddf(0x25a)]()+0x1)[_0x376ddf(0x220)](0x2,'0'),_0x48d309=new Date(_0x3c2d60);_0x48d309[_0x376ddf(0x24f)](_0x3c2d60[_0x376ddf(0x25a)]()+0x1);const _0x29ebfe=_0x48d309[_0x376ddf(0x1e3)]()+'-'+String(_0x48d309[_0x376ddf(0x25a)]()+0x1)[_0x376ddf(0x220)](0x2,'0'),_0x4169b9=Date['now']();try{const _0x4dd428=window[_0x376ddf(0x185)]?.[_0x376ddf(0x16a)],_0x26e919=_0x4dd428?.[_0x376ddf(0x1a4)]||'',[_0x2d6b48,_0x447c2b]=await Promise[_0x376ddf(0x16f)]([fetch(API_URL,{'method':_0x376ddf(0x24a),'body':JSON[_0x376ddf(0x22b)]({'action':_0x376ddf(0x1d4),'init_data':_0x26e919,'month_str':_0x1bb9d9})})[_0x376ddf(0x246)](_0x3996af=>_0x3996af[_0x376ddf(0x1f1)]()),fetch(API_URL,{'method':_0x376ddf(0x24a),'body':JSON[_0x376ddf(0x22b)]({'action':_0x376ddf(0x1d4),'init_data':_0x26e919,'month_str':_0x29ebfe})})[_0x376ddf(0x246)](_0x508129=>_0x508129[_0x376ddf(0x1f1)]())]);if(lastUserActionTime>_0x4169b9){console[_0x376ddf(0x24e)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x2d6b48['ok'])this[_0x376ddf(0x205)](_0x2d6b48[_0x376ddf(0x1e8)],_0x1bb9d9);if(_0x447c2b['ok'])this[_0x376ddf(0x205)](_0x447c2b[_0x376ddf(0x1e8)],_0x29ebfe);this[_0x376ddf(0x189)]();}catch(_0xdace7e){}},'applyData'(_0x27420b,_0x262759){const _0x54400e=a3_0x5b07f4;if(!_0x27420b)return;if(_0x27420b[_0x54400e(0x173)]){if(_0x27420b[_0x54400e(0x173)][_0x54400e(0x1e5)])availabilityPattern=_0x27420b['settings']['pattern'];if(_0x27420b[_0x54400e(0x173)][_0x54400e(0x22f)])specialRanges=_0x27420b['settings'][_0x54400e(0x22f)];if(_0x27420b['settings']['exceptions'])dateExceptions=_0x27420b[_0x54400e(0x173)][_0x54400e(0x1a9)];}if(_0x27420b[_0x54400e(0x1eb)]&&Array[_0x54400e(0x1fe)](_0x27420b['clients']))clients=_0x27420b[_0x54400e(0x1eb)];_0x27420b[_0x54400e(0x1b5)]&&(coachProfiles={...coachProfiles,..._0x27420b[_0x54400e(0x1b5)]}),_0x27420b['calendar']&&(sessions=sessions[_0x54400e(0x241)](_0x167d44=>!_0x167d44[_0x54400e(0x1b2)]['startsWith'](_0x262759)),Object[_0x54400e(0x224)](_0x27420b[_0x54400e(0x1e4)])[_0x54400e(0x1ff)](_0x35d211=>{const _0x32b647=_0x27420b['calendar'][_0x35d211];_0x32b647['forEach'](_0x4aa3da=>{const _0x5920aa=a3_0x12c4;sessions[_0x5920aa(0x179)]({'id':_0x4aa3da['i'],'clientId':_0x4aa3da['c'],'coachId':_0x4aa3da[_0x5920aa(0x24b)],'dateStr':_0x262759+'-'+_0x35d211[_0x5920aa(0x220)](0x2,'0'),'start':_0x4aa3da['s'],'end':_0x4aa3da['e'],'note':_0x4aa3da['n']||'','status':_0x4aa3da['st']||_0x5920aa(0x1f6),'seriesId':_0x4aa3da[_0x5920aa(0x19e)]});});})),reRenderBlocks();}};function init(){const _0x24aad6=a3_0x5b07f4;DataManager[_0x24aad6(0x21e)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x24aad6(0x200)](_0x24aad6(0x234))['addEventListener'](_0x24aad6(0x198),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x3fb028=a3_0x5b07f4,_0x42441b=document['getElementById'](_0x3fb028(0x174)),_0x2864c8=document[_0x3fb028(0x200)](_0x3fb028(0x16c));_0x42441b[_0x3fb028(0x1e7)]='',_0x42441b[_0x3fb028(0x1b3)](_0x2864c8);for(let _0xdff2fe=0x0;_0xdff2fe<0x18;_0xdff2fe++){const _0x138701=document[_0x3fb028(0x1d5)]('div');_0x138701[_0x3fb028(0x240)]=_0x3fb028(0x245);if(_0xdff2fe>0x0)_0x138701[_0x3fb028(0x1e7)]='<span>'+String(_0xdff2fe)['padStart'](0x2,'0')+':00</span>';_0x42441b[_0x3fb028(0x1b3)](_0x138701);}}function a3_0x12c4(_0x22465a,_0x356f17){_0x22465a=_0x22465a-0x164;const _0x5189bc=a3_0x1d34();let _0x22b757=_0x5189bc[_0x22465a];return _0x22b757;}function renderDayRange(_0x1bc249,_0x397d14){const _0x352df2=a3_0x5b07f4,_0x44d870=document['getElementById'](_0x352df2(0x20f)),_0x426af6=document[_0x352df2(0x200)](_0x352df2(0x178)),_0x3c8af1=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x35b8c1=new Date();_0x35b8c1[_0x352df2(0x223)](0x0,0x0,0x0,0x0);const _0x474efb=getLocalDateStr(new Date());for(let _0x157e40=_0x1bc249;_0x157e40<=_0x397d14;_0x157e40++){const _0x42503a=new Date(_0x35b8c1);_0x42503a[_0x352df2(0x1b9)](_0x42503a[_0x352df2(0x1df)]()+_0x157e40);const _0x742cd3=getLocalDateStr(_0x42503a);let _0x3de059=_0x42503a[_0x352df2(0x19f)]()-0x1;if(_0x3de059===-0x1)_0x3de059=0x6;const _0x387343=_0x742cd3===_0x474efb,_0x57a712=document[_0x352df2(0x1d5)](_0x352df2(0x21f));_0x57a712[_0x352df2(0x240)]=_0x352df2(0x230)+(_0x387343?_0x352df2(0x1b1):''),_0x57a712[_0x352df2(0x1b8)](_0x352df2(0x1ce),_0x742cd3),_0x57a712[_0x352df2(0x1e7)]=_0x352df2(0x202)+_0x3c8af1[_0x3de059]+_0x352df2(0x215)+_0x42503a[_0x352df2(0x1df)]()+_0x352df2(0x1c2),_0x44d870['appendChild'](_0x57a712);const _0x42c5ba=document[_0x352df2(0x1d5)](_0x352df2(0x21f));_0x42c5ba[_0x352df2(0x240)]=_0x352df2(0x1c1)+(_0x387343?_0x352df2(0x1b1):''),_0x42c5ba[_0x352df2(0x1b8)](_0x352df2(0x1ce),_0x742cd3),_0x42c5ba[_0x352df2(0x1b8)](_0x352df2(0x21d),_0x3de059),_0x426af6[_0x352df2(0x1b3)](_0x42c5ba);}}function reRenderBlocks(){const _0x1821d3=a3_0x5b07f4;document[_0x1821d3(0x1d6)](_0x1821d3(0x1ed))[_0x1821d3(0x1ff)](_0x4650ae=>{const _0x4caf12=_0x1821d3;_0x4650ae[_0x4caf12(0x1d6)](_0x4caf12(0x171))[_0x4caf12(0x1ff)](_0x4914a6=>_0x4914a6[_0x4caf12(0x242)]());const _0xab6cb8=_0x4650ae[_0x4caf12(0x175)](_0x4caf12(0x1ce)),_0x4ccee5=parseInt(_0x4650ae[_0x4caf12(0x175)]('data-day-idx')),_0x4449ba=Math[_0x4caf12(0x237)](_0x4650ae['offsetLeft']);(availabilityPattern[_0x4ccee5]||[])[_0x4caf12(0x1ff)](_0xed2ac0=>{const _0x1df66d=_0x4caf12,_0x3731d2=document[_0x1df66d(0x1d5)](_0x1df66d(0x21f));_0x3731d2[_0x1df66d(0x240)]=_0x1df66d(0x238),_0x3731d2[_0x1df66d(0x20e)]['top']=_0xed2ac0*GRID_H+'px',_0x3731d2['style']['backgroundPosition']='-'+_0x4449ba+_0x1df66d(0x18e)+_0xed2ac0*GRID_H+'px',_0x4650ae[_0x1df66d(0x1b3)](_0x3731d2);});if(specialRanges['length']>0x0){const _0x495e6d=new Date(_0xab6cb8+'T00:00:00')[_0x4caf12(0x268)](),_0x3dc8c2=new Date(_0xab6cb8+_0x4caf12(0x219))[_0x4caf12(0x268)]();specialRanges[_0x4caf12(0x1ff)](_0x35eb34=>{const _0x458ed7=_0x4caf12,_0x303850=new Date(_0x35eb34[_0x458ed7(0x1cd)])[_0x458ed7(0x268)](),_0x27d783=new Date(_0x35eb34[_0x458ed7(0x1d2)])[_0x458ed7(0x268)](),_0x1e984e=Math[_0x458ed7(0x203)](_0x495e6d,_0x303850),_0xec2602=Math[_0x458ed7(0x214)](_0x3dc8c2,_0x27d783);if(_0x1e984e<_0xec2602){const _0x3f3db8=(_0x1e984e-_0x495e6d)/0x36ee80*GRID_H,_0x47e2db=(_0xec2602-_0x1e984e)/0x36ee80*GRID_H,_0x436e72=document[_0x458ed7(0x1d5)](_0x458ed7(0x21f));_0x47e2db>=23.5*GRID_H?(_0x436e72[_0x458ed7(0x240)]=_0x458ed7(0x23d),_0x436e72[_0x458ed7(0x20e)]['backgroundPosition']='-'+_0x4449ba+_0x458ed7(0x1fd)):(_0x436e72[_0x458ed7(0x240)]=_0x458ed7(0x22d),_0x436e72[_0x458ed7(0x20e)][_0x458ed7(0x1ef)]=_0x3f3db8+'px',_0x436e72[_0x458ed7(0x20e)][_0x458ed7(0x1c9)]=_0x47e2db+'px',_0x436e72['style'][_0x458ed7(0x210)]='-'+_0x4449ba+_0x458ed7(0x18e)+_0x3f3db8+'px'),_0x4650ae[_0x458ed7(0x1b3)](_0x436e72);}});}renderEventsForColumn(_0x4650ae,_0xab6cb8);});}function renderEventsForColumn(_0x3e92d1,_0x553b1b){const _0x48549c=a3_0x5b07f4,_0xbf88b=sessions[_0x48549c(0x241)](_0x400e26=>_0x400e26['dateStr']===_0x553b1b),_0x1aed5b=_0xbf88b[_0x48549c(0x262)](_0x566138=>{const _0x325ccf=_0x48549c,[_0x2904a3,_0x29e379]=_0x566138['start']['split'](':')[_0x325ccf(0x262)](Number),[_0x19fa37,_0x515d16]=_0x566138[_0x325ccf(0x1d2)][_0x325ccf(0x207)](':')['map'](Number);return{'data':_0x566138,'start':_0x2904a3*0x3c+_0x29e379,'end':_0x19fa37*0x3c+_0x515d16,'colIndex':0x0};});_0x1aed5b[_0x48549c(0x181)]((_0x47aa57,_0x3735e7)=>_0x47aa57['start']-_0x3735e7[_0x48549c(0x1cd)]||_0x3735e7[_0x48549c(0x1d2)]-_0x3735e7[_0x48549c(0x1cd)]-(_0x47aa57[_0x48549c(0x1d2)]-_0x47aa57['start']));const _0x559757=[];_0x1aed5b[_0x48549c(0x1ff)](_0x18fca9=>{const _0x54d839=_0x48549c;let _0x1c4339=![];for(let _0x44c898=0x0;_0x44c898<_0x559757[_0x54d839(0x1da)];_0x44c898++){const _0x339179=_0x559757[_0x44c898];if(_0x18fca9[_0x54d839(0x1cd)]>=_0x339179[_0x339179[_0x54d839(0x1da)]-0x1][_0x54d839(0x1d2)]){_0x339179[_0x54d839(0x179)](_0x18fca9),_0x18fca9[_0x54d839(0x18f)]=_0x44c898,_0x1c4339=!![];break;}}!_0x1c4339&&(_0x559757[_0x54d839(0x179)]([_0x18fca9]),_0x18fca9[_0x54d839(0x18f)]=_0x559757[_0x54d839(0x1da)]-0x1);}),_0x1aed5b[_0x48549c(0x1ff)](_0x11e6da=>{const _0x5af05d=_0x48549c;let _0x580928=0x0;_0x1aed5b[_0x5af05d(0x1ff)](_0x16a7d7=>{const _0x235563=_0x5af05d;if(Math['max'](_0x11e6da[_0x235563(0x1cd)],_0x16a7d7[_0x235563(0x1cd)])<Math[_0x235563(0x214)](_0x11e6da['end'],_0x16a7d7['end'])&&_0x16a7d7[_0x235563(0x18f)]>_0x580928)_0x580928=_0x16a7d7[_0x235563(0x18f)];});const _0x24e43e=_0x580928+0x1,_0x106b64=0x64/_0x24e43e,_0x37c6a8=_0x11e6da[_0x5af05d(0x18f)]*_0x106b64,_0x223d04=document['createElement'](_0x5af05d(0x21f)),_0x562e46=_0x11e6da[_0x5af05d(0x1e8)];let _0x24c682=_0x5af05d(0x24c);if(clients&&clients[_0x5af05d(0x1da)]>0x0){const _0x411f70=clients[_0x5af05d(0x26d)](_0x395822=>String(_0x395822['id'])===String(_0x562e46[_0x5af05d(0x213)]));if(_0x411f70&&_0x411f70['color'])_0x24c682=_0x411f70[_0x5af05d(0x1e6)];}const _0x47ed93=_0x562e46[_0x5af05d(0x194)]===_0x5af05d(0x1d9),_0x482434=_0x47ed93?0x1:0.45;_0x223d04[_0x5af05d(0x240)]=_0x5af05d(0x165)+(_0x47ed93?_0x5af05d(0x248):''),_0x223d04[_0x5af05d(0x20e)][_0x5af05d(0x266)]=hexToRgba(_0x24c682,_0x482434),_0x223d04[_0x5af05d(0x20e)]['borderLeftColor']=_0x24c682;const _0x5a97d9=_0x11e6da[_0x5af05d(0x1cd)]/0x3c*GRID_H,_0x55adef=(_0x11e6da[_0x5af05d(0x1d2)]-_0x11e6da[_0x5af05d(0x1cd)])/0x3c*GRID_H;_0x223d04[_0x5af05d(0x20e)][_0x5af05d(0x1ef)]=_0x5a97d9+'px',_0x223d04[_0x5af05d(0x20e)][_0x5af05d(0x1c9)]=Math[_0x5af05d(0x203)](_0x55adef,0x14)+'px',_0x223d04[_0x5af05d(0x20e)][_0x5af05d(0x1e0)]=_0x5af05d(0x250)+_0x106b64+'%\x20-\x204px)',_0x223d04[_0x5af05d(0x20e)]['left']=_0x5af05d(0x250)+_0x37c6a8+_0x5af05d(0x180),_0x223d04[_0x5af05d(0x20e)][_0x5af05d(0x16d)]=0xa+_0x11e6da[_0x5af05d(0x18f)];if(_0x106b64<0x55)_0x223d04[_0x5af05d(0x1f9)][_0x5af05d(0x196)](_0x5af05d(0x17b));let _0x20fa8c='';if(_0x562e46['seriesId'])_0x20fa8c+=_0x5af05d(0x19a);if(_0x47ed93)_0x20fa8c+=_0x5af05d(0x1bb);_0x223d04['innerHTML']=_0x5af05d(0x1a6)+_0x562e46[_0x5af05d(0x1cd)]+_0x5af05d(0x1a5)+_0x562e46[_0x5af05d(0x1d2)]+_0x5af05d(0x1f3)+_0x20fa8c+_0x5af05d(0x23e),_0x223d04[_0x5af05d(0x221)]=_0x18386c=>{const _0x4e7197=_0x5af05d;_0x18386c[_0x4e7197(0x193)](),openDetails(_0x562e46);},_0x3e92d1[_0x5af05d(0x1b3)](_0x223d04);});}function openAnalytics(){const _0x123ac7=a3_0x5b07f4,_0x492d52=document[_0x123ac7(0x1e9)](_0x123ac7(0x227));setAnalyticsPeriod('week',_0x492d52),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x5ae192,_0x590835){const _0x11e033=a3_0x5b07f4;currentAnPeriod=_0x5ae192,document[_0x11e033(0x1d6)](_0x11e033(0x227))['forEach'](_0x39121c=>_0x39121c[_0x11e033(0x1f9)][_0x11e033(0x242)]('active'));if(_0x590835)_0x590835[_0x11e033(0x1f9)][_0x11e033(0x196)](_0x11e033(0x183));const _0x5cabff=document['getElementById'](_0x11e033(0x1c8));_0x5cabff[_0x11e033(0x20e)][_0x11e033(0x204)]=_0x5ae192===_0x11e033(0x1de)?_0x11e033(0x243):_0x11e033(0x24d);const _0x45d68e=new Date();let _0x2d3029=new Date(),_0x376585=new Date();if(_0x5ae192===_0x11e033(0x1dc))_0x2d3029=getStartOfWeek(_0x45d68e),_0x376585=new Date(_0x2d3029),_0x376585[_0x11e033(0x1b9)](_0x376585[_0x11e033(0x1df)]()+0x6);else{if(_0x5ae192==='month')_0x2d3029=new Date(_0x45d68e[_0x11e033(0x1e3)](),_0x45d68e[_0x11e033(0x25a)](),0x1),_0x376585=new Date(_0x45d68e[_0x11e033(0x1e3)](),_0x45d68e['getMonth']()+0x1,0x0);else{!document['getElementById']('anStart')[_0x11e033(0x1b4)]&&(document[_0x11e033(0x200)](_0x11e033(0x239))[_0x11e033(0x1b4)]=getLocalDateStr(_0x45d68e),document[_0x11e033(0x200)](_0x11e033(0x1a3))[_0x11e033(0x1b4)]=getLocalDateStr(_0x45d68e));refreshAnalytics();return;}}document[_0x11e033(0x200)](_0x11e033(0x239))[_0x11e033(0x1b4)]=getLocalDateStr(_0x2d3029),document[_0x11e033(0x200)](_0x11e033(0x1a3))[_0x11e033(0x1b4)]=getLocalDateStr(_0x376585),refreshAnalytics();}function a3_0x1d34(){const _0x4d7389=['setBackgroundColor','timeLineBadge','zIndex','offsetWidth','all','DOMContentLoaded','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','<div\x20class=\x22rs-day-name\x22>','settings','timeColumn','getAttribute','10307EtVNYZ','scrollLeft','gridColumns','push','</div><div\x20class=\x22rs-day-num\x22>','mini','auto','join','rsDatesTrack','2694kFgfPz','%\x20+\x202px)','sort','.rs-date-chip','active','disableVerticalSwipes','Telegram','error','reschedule','done','saveLocally','var(--acc-blue)','findIndex','button','cancelContainer','px\x20-','colIndex','rescheduleSheet','anPercent','toLocaleString','stopPropagation','status','parse','add','visible','scroll','detNote','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','headerMonth','–û—Ç–º–µ–Ω–µ–Ω–æ','sid','getDay','now','client-stat-card','long','anEnd','initData','\x20-\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','137610JmAqyR','onClick','exceptions','anTotalStats','total','rgba(','.btn-cancel','constructor','getHours','location','today','dateStr','appendChild','value','coach_profiles','2920ygRxvO','uc_client_sessions','setAttribute','setDate','\x20–∏–∑\x20','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','toUpperCase','scrollTop','get_slots','Error\x20setting\x20back\x20button:','cancelled','day-column\x20','</div>','BackButton','rgba(10,\x20132,\x20255,\x20','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','rs-time-btn','\x20—á.','anCustomDates','height','createDocumentFragment','600','globalTimeLine','start','data-date','detTime','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','uc_client_settings','end','analyticsList','client_load','createElement','querySelectorAll','ccYesBtn','borderLeftColor','completed','length','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','week','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','custom','getDate','width','Error\x20setting\x20color:','scrollWidth','getFullYear','calendar','pattern','color','innerHTML','data','querySelector','insertBefore','clients','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','.day-column','6hISPMA','top','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','json','offClick','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','syncLoad','substr','planned','overlay','toString','classList','ready','ru-RU','detDate','px\x200px','isArray','forEach','getElementById','#050505','<div\x20class=\x22dch-day\x22>','max','display','applyData','.day-col-header[data-date=\x22','split','.sheet','rsSlotsGrid','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','106292xFZnAu','href','\x20–≤\x20','style','daysHeaderTrack','backgroundPosition','block','expand','clientId','min','</div><div\x20class=\x22dch-num\x22>','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','fontWeight','customConfirm','T23:59:59','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','router.html','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','data-day-idx','loadLocal','div','padStart','onclick','v9.5-CLIENT-ANALYTICS','setHours','keys','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','coachId','.period-switch\x20.p-btn','2mimwOJ','initDataUnsafe','uc_client_list','stringify','Unknown','blocked-range-part\x20stripe-bg','numeric','ranges','day-col-header\x20','setItem','getItem','290WYDTEF','matrixViewport','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','test','round','blocked-slot\x20stripe-bg','anStart','detStatus','8QJTxKm','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','day-off-overlay\x20stripe-bg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','show','className','filter','remove','flex','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','time-label','then','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','\x20status-completed','2273943EWNXXt','POST','cid','#0a84ff','none','log','setMonth','calc(','ccText','addEventListener','open','offsetLeft','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','getMinutes','apply','client_cancel','toLocaleDateString','getMonth','toast','textContent','var(--acc-green)','search','floor','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','map','entries','247bXJaik','note','backgroundColor','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','getTime','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','30324SijmwX','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','(((.+)+)+)+$','find','51482pLxCjK','cancel_window','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','event-card','cancelHint','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','firstChild','detailsSheet','WebApp'];a3_0x1d34=function(){return _0x4d7389;};return a3_0x1d34();}function refreshAnalytics(){const _0x4d996c=a3_0x5b07f4,_0x1dfcd7=document[_0x4d996c(0x200)](_0x4d996c(0x239))[_0x4d996c(0x1b4)],_0xd59cc4=document[_0x4d996c(0x200)](_0x4d996c(0x1a3))[_0x4d996c(0x1b4)];if(!_0x1dfcd7||!_0xd59cc4)return;const _0x76c3d9=sessions[_0x4d996c(0x241)](_0x573347=>_0x573347[_0x4d996c(0x1b2)]>=_0x1dfcd7&&_0x573347[_0x4d996c(0x1b2)]<=_0xd59cc4&&_0x573347[_0x4d996c(0x194)]!==_0x4d996c(0x1c0)),_0x2da4d8=_0x76c3d9[_0x4d996c(0x1da)],_0x534089=_0x76c3d9['filter'](_0x4c81d3=>_0x4c81d3[_0x4d996c(0x194)]===_0x4d996c(0x1d9))[_0x4d996c(0x1da)],_0x2acc35=_0x2da4d8>0x0?Math[_0x4d996c(0x237)](_0x534089/_0x2da4d8*0x64):0x0;document[_0x4d996c(0x200)](_0x4d996c(0x191))['textContent']=_0x2acc35+'%',document['getElementById'](_0x4d996c(0x1aa))['textContent']=_0x534089+_0x4d996c(0x1ba)+_0x2da4d8+_0x4d996c(0x1dd);const _0x27e9b7=document['getElementById']('anDonutCircle'),_0x1188fe=0x2*Math['PI']*0x23,_0xb619ed=_0x1188fe-_0x2acc35/0x64*_0x1188fe;_0x27e9b7[_0x4d996c(0x20e)]['strokeDashoffset']=_0xb619ed;const _0x3bdeff={};_0x76c3d9[_0x4d996c(0x1ff)](_0x3781f2=>{const _0x8dc665=_0x4d996c,_0x528b55=_0x3781f2[_0x8dc665(0x226)]||_0x8dc665(0x22c);if(!_0x3bdeff[_0x528b55]){const _0x2c4e9a='#'+_0x528b55['toString']()[_0x8dc665(0x1f5)](0x0,0x6);_0x3bdeff[_0x528b55]={'total':0x0,'done':0x0,'color':_0x2c4e9a};}_0x3bdeff[_0x528b55]['total']++;if(_0x3781f2[_0x8dc665(0x194)]===_0x8dc665(0x1d9))_0x3bdeff[_0x528b55]['done']++;});const _0x87bdb=document[_0x4d996c(0x200)](_0x4d996c(0x1d3));_0x87bdb[_0x4d996c(0x1e7)]='';const _0x9eb1ab=Object[_0x4d996c(0x263)](_0x3bdeff)[_0x4d996c(0x181)]((_0x4a1ade,_0x16ebec)=>_0x16ebec[0x1]['total']-_0x4a1ade[0x1][_0x4d996c(0x1ab)]);if(_0x9eb1ab[_0x4d996c(0x1da)]===0x0){_0x87bdb['innerHTML']=_0x4d996c(0x1d0);return;}_0x9eb1ab[_0x4d996c(0x1ff)](([_0x424134,_0x307479])=>{const _0x242558=_0x4d996c,_0x1b44c0=Math[_0x242558(0x237)](_0x307479[_0x242558(0x188)]/_0x307479[_0x242558(0x1ab)]*0x64),_0x1f4082=document[_0x242558(0x1d5)](_0x242558(0x21f));_0x1f4082[_0x242558(0x240)]=_0x242558(0x1a1),_0x1f4082[_0x242558(0x20e)][_0x242558(0x1d8)]=_0x307479[_0x242558(0x1e6)],_0x1f4082[_0x242558(0x1e7)]=_0x242558(0x21c)+_0x424134[_0x242558(0x1f5)](0x0,0x5)+_0x242558(0x21a)+_0x307479[_0x242558(0x188)]+'</span>\x20/\x20'+_0x307479[_0x242558(0x1ab)]+_0x242558(0x167)+_0x1b44c0+_0x242558(0x26b),_0x87bdb[_0x242558(0x1b3)](_0x1f4082);});}function openDetails(_0x113cfe){const _0x38daa3=a3_0x5b07f4;currentSession=_0x113cfe;const _0x1edbe8=new Date(_0x113cfe['dateStr']),_0x247564=_0x1edbe8['toLocaleDateString'](_0x38daa3(0x1fb),{'weekday':_0x38daa3(0x1a2),'day':_0x38daa3(0x22e),'month':_0x38daa3(0x1a2)});document[_0x38daa3(0x200)](_0x38daa3(0x1fc))[_0x38daa3(0x25c)]=_0x247564['charAt'](0x0)[_0x38daa3(0x1bc)]()+_0x247564['slice'](0x1),document[_0x38daa3(0x200)](_0x38daa3(0x1cf))[_0x38daa3(0x25c)]=_0x113cfe[_0x38daa3(0x1cd)]+'\x20-\x20'+_0x113cfe[_0x38daa3(0x1d2)],document[_0x38daa3(0x200)](_0x38daa3(0x199))[_0x38daa3(0x25c)]=_0x113cfe[_0x38daa3(0x265)]||_0x38daa3(0x247);const _0x394637=document[_0x38daa3(0x200)](_0x38daa3(0x23a)),_0x1838b9=document[_0x38daa3(0x200)](_0x38daa3(0x18d)),_0x4440ef=_0x1838b9[_0x38daa3(0x1e9)](_0x38daa3(0x1ad)),_0x1af39e=_0x1838b9[_0x38daa3(0x1e9)]('.btn-reschedule'),_0x38eeb8=document[_0x38daa3(0x200)](_0x38daa3(0x166));if(_0x113cfe['status']===_0x38daa3(0x1d9))_0x394637[_0x38daa3(0x25c)]=_0x38daa3(0x269),_0x394637[_0x38daa3(0x20e)][_0x38daa3(0x1e6)]=_0x38daa3(0x25d),_0x1838b9[_0x38daa3(0x20e)][_0x38daa3(0x204)]=_0x38daa3(0x24d);else{_0x394637['textContent']=_0x38daa3(0x244),_0x394637[_0x38daa3(0x20e)]['color']=_0x38daa3(0x18a),_0x1838b9[_0x38daa3(0x20e)][_0x38daa3(0x204)]=_0x38daa3(0x211);const _0x17320f=new Date(_0x113cfe['dateStr']+'T'+_0x113cfe['start']),_0x57033f=new Date(),_0x47bd9e=(_0x17320f-_0x57033f)/(0x3e8*0x3c*0x3c),_0x139d08=coachProfiles[_0x113cfe[_0x38daa3(0x226)]]&&coachProfiles[_0x113cfe[_0x38daa3(0x226)]]['cancel_window']?parseInt(coachProfiles[_0x113cfe[_0x38daa3(0x226)]][_0x38daa3(0x26f)]):0x18;if(_0x139d08===0x0||_0x47bd9e>=_0x139d08)_0x4440ef[_0x38daa3(0x20e)]['display']=_0x38daa3(0x211),_0x1af39e['style'][_0x38daa3(0x204)]=_0x38daa3(0x211),_0x38eeb8[_0x38daa3(0x20e)]['display']=_0x38daa3(0x24d);else{_0x4440ef['style'][_0x38daa3(0x204)]=_0x38daa3(0x24d),_0x1af39e[_0x38daa3(0x20e)][_0x38daa3(0x204)]=_0x38daa3(0x24d),_0x38eeb8[_0x38daa3(0x20e)][_0x38daa3(0x204)]=_0x38daa3(0x211);let _0x237c41=_0x139d08===0x0?_0x38daa3(0x1c5):'–∑–∞\x20'+_0x139d08+_0x38daa3(0x1c7);_0x38eeb8[_0x38daa3(0x25c)]='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x237c41+_0x38daa3(0x19b);}}document[_0x38daa3(0x200)]('overlay')[_0x38daa3(0x1f9)]['add'](_0x38daa3(0x183)),document[_0x38daa3(0x200)]('detailsSheet')['classList'][_0x38daa3(0x196)](_0x38daa3(0x253));}function closeAllSheets(){const _0x354f2c=a3_0x5b07f4;document[_0x354f2c(0x200)]('overlay')[_0x354f2c(0x1f9)]['remove'](_0x354f2c(0x183)),document[_0x354f2c(0x1d6)](_0x354f2c(0x208))['forEach'](_0x400c89=>_0x400c89[_0x354f2c(0x1f9)]['remove'](_0x354f2c(0x253)));}function openSheet(_0x1505be){const _0x3968ee=a3_0x5b07f4;document[_0x3968ee(0x200)](_0x3968ee(0x1f7))[_0x3968ee(0x1f9)]['add'](_0x3968ee(0x183)),document['getElementById'](_0x1505be)[_0x3968ee(0x1f9)]['add'](_0x3968ee(0x253));}function getLocalDateStr(_0x4d0fcd){const _0x5badf5=a3_0x5b07f4,_0x5d7dde=_0x4d0fcd[_0x5badf5(0x1e3)](),_0xee0774=String(_0x4d0fcd['getMonth']()+0x1)[_0x5badf5(0x220)](0x2,'0'),_0x252b4b=String(_0x4d0fcd[_0x5badf5(0x1df)]())[_0x5badf5(0x220)](0x2,'0');return _0x5d7dde+'-'+_0xee0774+'-'+_0x252b4b;}function getStartOfWeek(_0x32ecd7){const _0x505154=a3_0x5b07f4,_0x37e5a5=new Date(_0x32ecd7),_0x3bbbf7=_0x37e5a5['getDay'](),_0x256ca8=_0x37e5a5['getDate']()-_0x3bbbf7+(_0x3bbbf7===0x0?-0x6:0x1);return _0x37e5a5[_0x505154(0x1b9)](_0x256ca8),_0x37e5a5[_0x505154(0x223)](0x0,0x0,0x0,0x0),_0x37e5a5;}function scrollToToday(){const _0x11a92e=getLocalDateStr(new Date());setTimeout(()=>{const _0x1f8377=a3_0x12c4,_0x2d0cb0=document[_0x1f8377(0x1e9)](_0x1f8377(0x206)+_0x11a92e+'\x22]');if(_0x2d0cb0){const _0x5d7177=document['getElementById'](_0x1f8377(0x234)),_0x4ce9f2=_0x2d0cb0[_0x1f8377(0x254)]-_0x5d7177['clientWidth']/0x2+_0x2d0cb0[_0x1f8377(0x16e)]/0x2;_0x5d7177['scrollTo']({'left':_0x4ce9f2,'behavior':_0x1f8377(0x17c)}),_0x5d7177[_0x1f8377(0x1bd)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4eb817=a3_0x5b07f4,_0x3adab0=new Date(),_0x4f962c=document[_0x4eb817(0x200)](_0x4eb817(0x1cc)),_0x52ba8c=document[_0x4eb817(0x200)](_0x4eb817(0x16c)),_0x3874eb=(_0x3adab0['getHours']()*0x3c+_0x3adab0[_0x4eb817(0x256)]())/0x3c*GRID_H;_0x4f962c['style'][_0x4eb817(0x1ef)]=_0x3874eb+'px',_0x4f962c[_0x4eb817(0x20e)][_0x4eb817(0x204)]=_0x4eb817(0x211),_0x52ba8c[_0x4eb817(0x20e)][_0x4eb817(0x1ef)]=_0x3874eb+'px',_0x52ba8c['style'][_0x4eb817(0x204)]='block',_0x52ba8c['textContent']=String(_0x3adab0[_0x4eb817(0x1af)]())['padStart'](0x2,'0')+':'+String(_0x3adab0[_0x4eb817(0x256)]())[_0x4eb817(0x220)](0x2,'0');}function onScroll(){const _0x4ca097=a3_0x5b07f4,_0x4e475c=document[_0x4ca097(0x200)](_0x4ca097(0x234)),_0x5e3026=document[_0x4ca097(0x1d6)]('.day-col-header');for(let _0x5d6a88 of _0x5e3026)if(_0x5d6a88['offsetLeft']>=_0x4e475c[_0x4ca097(0x177)]){const _0x40e847=new Date(_0x5d6a88['getAttribute'](_0x4ca097(0x1ce)));document[_0x4ca097(0x200)](_0x4ca097(0x19c))[_0x4ca097(0x25c)]=_0x40e847[_0x4ca097(0x192)]('ru',{'month':'long'})[_0x4ca097(0x1bc)]()+'\x20'+_0x40e847[_0x4ca097(0x1e3)]();break;}}function showToast(_0x32a587){const _0x3758b3=a3_0x5b07f4,_0x58de22=document[_0x3758b3(0x200)](_0x3758b3(0x25b));_0x58de22[_0x3758b3(0x25c)]=_0x32a587,_0x58de22[_0x3758b3(0x1f9)][_0x3758b3(0x196)](_0x3758b3(0x23f)),setTimeout(()=>_0x58de22[_0x3758b3(0x1f9)][_0x3758b3(0x242)](_0x3758b3(0x23f)),0x7d0);}function handleInfiniteScroll(){const _0x3605e2=a3_0x5b07f4,_0x73ce44=document['getElementById'](_0x3605e2(0x234)),_0x3aa217=_0x73ce44[_0x3605e2(0x177)],_0x119038=_0x73ce44[_0x3605e2(0x1e2)],_0x461541=_0x73ce44['clientWidth'];if(_0x119038-(_0x3aa217+_0x461541)<0x12c){const _0x295863=endOffset;endOffset+=0xe,renderDayRange(_0x295863+0x1,endOffset),reRenderBlocks();}if(_0x3aa217<0x12c){const _0x1be68e=startOffset;startOffset-=0xe,prependDays(startOffset,_0x1be68e-0x1),_0x73ce44[_0x3605e2(0x177)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x4435c2,_0x448bde){const _0x386406=a3_0x5b07f4,_0x5a936b=document[_0x386406(0x200)]('daysHeaderTrack'),_0xd90749=document[_0x386406(0x200)]('gridColumns'),_0x2852dd=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x51b6f3=new Date();_0x51b6f3[_0x386406(0x223)](0x0,0x0,0x0,0x0);const _0x938497=getLocalDateStr(new Date()),_0x1a7e14=document['createDocumentFragment'](),_0x530eb4=document[_0x386406(0x1ca)]();for(let _0x42c91d=_0x4435c2;_0x42c91d<=_0x448bde;_0x42c91d++){const _0x2e607d=new Date(_0x51b6f3);_0x2e607d[_0x386406(0x1b9)](_0x2e607d['getDate']()+_0x42c91d);const _0x115951=getLocalDateStr(_0x2e607d);let _0x5433ad=_0x2e607d[_0x386406(0x19f)]()-0x1;if(_0x5433ad===-0x1)_0x5433ad=0x6;const _0x448e94=_0x115951===_0x938497,_0x179a58=document[_0x386406(0x1d5)](_0x386406(0x21f));_0x179a58[_0x386406(0x240)]=_0x386406(0x230)+(_0x448e94?_0x386406(0x1b1):''),_0x179a58[_0x386406(0x1b8)](_0x386406(0x1ce),_0x115951),_0x179a58[_0x386406(0x1e7)]=_0x386406(0x202)+_0x2852dd[_0x5433ad]+_0x386406(0x215)+_0x2e607d['getDate']()+'</div>',_0x1a7e14['appendChild'](_0x179a58);const _0x5cb766=document['createElement']('div');_0x5cb766[_0x386406(0x240)]=_0x386406(0x1c1)+(_0x448e94?'today':''),_0x5cb766['setAttribute'](_0x386406(0x1ce),_0x115951),_0x5cb766[_0x386406(0x1b8)]('data-day-idx',_0x5433ad),_0x530eb4[_0x386406(0x1b3)](_0x5cb766);}_0x5a936b[_0x386406(0x1ea)](_0x1a7e14,_0x5a936b[_0x386406(0x168)]),_0xd90749[_0x386406(0x1ea)](_0x530eb4,_0xd90749[_0x386406(0x1e9)](_0x386406(0x1ed)));}function hexToRgba(_0x596bc7,_0xb1a53a){const _0x3feaee=a3_0x5b07f4;let _0x4e876d;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x3feaee(0x236)](_0x596bc7))return _0x4e876d=_0x596bc7['substring'](0x1)['split'](''),_0x4e876d[_0x3feaee(0x1da)]==0x3&&(_0x4e876d=[_0x4e876d[0x0],_0x4e876d[0x0],_0x4e876d[0x1],_0x4e876d[0x1],_0x4e876d[0x2],_0x4e876d[0x2]]),_0x4e876d='0x'+_0x4e876d[_0x3feaee(0x17d)](''),_0x3feaee(0x1ac)+[_0x4e876d>>0x10&0xff,_0x4e876d>>0x8&0xff,_0x4e876d&0xff]['join'](',')+','+_0xb1a53a+')';return _0x3feaee(0x1c4)+_0xb1a53a+')';}let confirmResolver=null;function showCustomConfirm(_0x339817,_0x27ed35,_0x3bbabf=!![]){const _0x408ed3=a3_0x5b07f4;document[_0x408ed3(0x200)]('ccTitle')[_0x408ed3(0x25c)]=_0x339817,document[_0x408ed3(0x200)](_0x408ed3(0x251))[_0x408ed3(0x25c)]=_0x27ed35;const _0x41ae63=document['getElementById'](_0x408ed3(0x1d7));return _0x3bbabf?(_0x41ae63[_0x408ed3(0x20e)][_0x408ed3(0x1e6)]='#ff453a',_0x41ae63['style'][_0x408ed3(0x217)]='600'):(_0x41ae63[_0x408ed3(0x20e)]['color']=_0x408ed3(0x24c),_0x41ae63[_0x408ed3(0x20e)][_0x408ed3(0x217)]=_0x408ed3(0x1cb)),new Promise(_0x44b4f9=>{const _0x3ec381=_0x408ed3;confirmResolver=_0x44b4f9,document[_0x3ec381(0x200)](_0x3ec381(0x218))[_0x3ec381(0x1f9)][_0x3ec381(0x196)](_0x3ec381(0x197));});}function resolveCustomConfirm(_0x14832b){const _0x5297ce=a3_0x5b07f4;document['getElementById'](_0x5297ce(0x218))[_0x5297ce(0x1f9)][_0x5297ce(0x242)]('visible');if(confirmResolver)confirmResolver(_0x14832b);}async function tryCancelCurrentSession(){const _0x410e0b=a3_0x5b07f4;if(!currentSession)return;const _0x3bf1a1=await showCustomConfirm(_0x410e0b(0x261),_0x410e0b(0x255),!![]);if(!_0x3bf1a1)return;const _0x53da5a=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x141ea3=>_0x141ea3['id']!==_0x53da5a['id']),reRenderBlocks(),showToast(_0x410e0b(0x19d)),lastUserActionTime=Date[_0x410e0b(0x1a0)]();try{const _0x3ce29a=window['Telegram']?.[_0x410e0b(0x16a)],_0xd223ed=await fetch(API_URL,{'method':_0x410e0b(0x24a),'body':JSON[_0x410e0b(0x22b)]({'action':_0x410e0b(0x258),'init_data':_0x3ce29a?.[_0x410e0b(0x1a4)]||'','coachId':_0x53da5a[_0x410e0b(0x226)],'dateStr':_0x53da5a[_0x410e0b(0x1b2)],'sessionId':_0x53da5a['id']})});if(_0xd223ed['ok'])DataManager[_0x410e0b(0x189)]();}catch(_0x1e2617){showToast(_0x410e0b(0x267));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x50a171=a3_0x5b07f4;if(!currentSession)return;document[_0x50a171(0x200)](_0x50a171(0x169))[_0x50a171(0x1f9)][_0x50a171(0x242)](_0x50a171(0x253)),document[_0x50a171(0x200)](_0x50a171(0x190))['classList'][_0x50a171(0x196)](_0x50a171(0x253));const _0x2d61b0=document['getElementById']('rsDatesTrack'),_0x2acd10=document[_0x50a171(0x200)](_0x50a171(0x209));_0x2d61b0[_0x50a171(0x1e7)]='',_0x2acd10[_0x50a171(0x1e7)]=_0x50a171(0x23c);const [_0x97cf7e,_0x4e75bc]=currentSession[_0x50a171(0x1cd)][_0x50a171(0x207)](':')[_0x50a171(0x262)](Number),[_0x5547ff,_0x34850d]=currentSession['end']['split'](':')[_0x50a171(0x262)](Number),_0x2b5d4a=_0x5547ff*0x3c+_0x34850d-(_0x97cf7e*0x3c+_0x4e75bc);try{const _0x5862f3=window[_0x50a171(0x185)]?.[_0x50a171(0x16a)],_0x41bd01=await fetch(API_URL,{'method':_0x50a171(0x24a),'body':JSON['stringify']({'action':_0x50a171(0x1be),'coachId':currentSession[_0x50a171(0x226)],'duration':_0x2b5d4a,'init_data':_0x5862f3?.['initData']||'','excludeSessionId':currentSession['id']})}),_0xf2d26b=await _0x41bd01['json']();_0xf2d26b['ok']&&_0xf2d26b[_0x50a171(0x1e8)]?(availableSlotsCache=_0xf2d26b[_0x50a171(0x1e8)],renderRescheduleDates()):_0x2acd10['innerHTML']=_0x50a171(0x1db);}catch(_0x12bfe8){_0x2acd10[_0x50a171(0x1e7)]=_0x50a171(0x20a);}}function renderRescheduleDates(){const _0x1a26c8=a3_0x5b07f4,_0x2608bd=document[_0x1a26c8(0x200)](_0x1a26c8(0x17e));_0x2608bd[_0x1a26c8(0x1e7)]='';const _0x617035=Object[_0x1a26c8(0x224)](availableSlotsCache)[_0x1a26c8(0x181)](),_0x4bb871=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x617035['length']===0x0){document[_0x1a26c8(0x200)](_0x1a26c8(0x209))[_0x1a26c8(0x1e7)]=_0x1a26c8(0x1ec);return;}_0x617035[_0x1a26c8(0x1ff)]((_0x447412,_0x4b09f7)=>{const _0x2524a4=_0x1a26c8,_0x238858=new Date(_0x447412),_0x3157c0=_0x4bb871[_0x238858[_0x2524a4(0x19f)]()],_0x4571e1=_0x238858['getDate'](),_0x11e602=document[_0x2524a4(0x1d5)](_0x2524a4(0x21f));_0x11e602[_0x2524a4(0x240)]='rs-date-chip';if(_0x4b09f7===0x0)_0x11e602[_0x2524a4(0x1f9)][_0x2524a4(0x196)](_0x2524a4(0x183));_0x11e602[_0x2524a4(0x1e7)]=_0x2524a4(0x172)+_0x3157c0+_0x2524a4(0x17a)+_0x4571e1+_0x2524a4(0x1c2),_0x11e602[_0x2524a4(0x221)]=()=>selectRsDate(_0x447412,_0x11e602),_0x2608bd[_0x2524a4(0x1b3)](_0x11e602);}),selectRsDate(_0x617035[0x0],_0x2608bd[_0x1a26c8(0x168)]);}function selectRsDate(_0xb0350e,_0x3e870d){const _0x34f29d=a3_0x5b07f4;selectedRsDate=_0xb0350e,document[_0x34f29d(0x1d6)](_0x34f29d(0x182))[_0x34f29d(0x1ff)](_0x1d1c86=>_0x1d1c86[_0x34f29d(0x1f9)]['remove'](_0x34f29d(0x183)));if(_0x3e870d)_0x3e870d[_0x34f29d(0x1f9)][_0x34f29d(0x196)](_0x34f29d(0x183));const _0x3d3dcc=document[_0x34f29d(0x200)](_0x34f29d(0x209));_0x3d3dcc[_0x34f29d(0x1e7)]='';const _0x2969d4=availableSlotsCache[_0xb0350e]||[];if(_0x2969d4[_0x34f29d(0x1da)]===0x0){_0x3d3dcc[_0x34f29d(0x1e7)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x2969d4[_0x34f29d(0x1ff)](_0x27296e=>{const _0x4427b5=_0x34f29d,_0x501f7d=document[_0x4427b5(0x1d5)](_0x4427b5(0x18c));_0x501f7d[_0x4427b5(0x240)]=_0x4427b5(0x1c6),_0x501f7d['textContent']=_0x27296e,_0x501f7d[_0x4427b5(0x221)]=()=>confirmReschedule(_0x27296e),_0x3d3dcc[_0x4427b5(0x1b3)](_0x501f7d);});}async function confirmReschedule(_0x3ad5f7){const _0x22eac4=a3_0x5b07f4,_0xa1d837=new Date(selectedRsDate),_0x4d3f5a=_0xa1d837[_0x22eac4(0x259)]('ru-RU',{'day':_0x22eac4(0x22e),'month':_0x22eac4(0x1a2)}),_0x2a70af=await showCustomConfirm(_0x22eac4(0x260),_0x22eac4(0x225)+_0x4d3f5a+_0x22eac4(0x20d)+_0x3ad5f7+'?',![]);if(!_0x2a70af)return;closeAllSheets(),showToast(_0x22eac4(0x164)),lastUserActionTime=Date[_0x22eac4(0x1a0)]();const _0x43675a=currentSession[_0x22eac4(0x1b2)],_0x419e95=currentSession['id'],[_0x55c2c3,_0x430b99]=currentSession[_0x22eac4(0x1cd)][_0x22eac4(0x207)](':')[_0x22eac4(0x262)](Number),[_0x3d23fa,_0x1ecaa8]=currentSession['end'][_0x22eac4(0x207)](':')[_0x22eac4(0x262)](Number),_0x359c9a=_0x3d23fa*0x3c+_0x1ecaa8-(_0x55c2c3*0x3c+_0x430b99),[_0x10547c,_0xb446b7]=_0x3ad5f7[_0x22eac4(0x207)](':')[_0x22eac4(0x262)](Number),_0x4f1390=_0x10547c*0x3c+_0xb446b7+_0x359c9a,_0x2f09c6=Math[_0x22eac4(0x25f)](_0x4f1390/0x3c),_0x3a3e76=_0x4f1390%0x3c,_0x192b4f=String(_0x2f09c6)[_0x22eac4(0x220)](0x2,'0')+':'+String(_0x3a3e76)[_0x22eac4(0x220)](0x2,'0'),_0x270276=sessions[_0x22eac4(0x18b)](_0x4b6d22=>_0x4b6d22['id']===_0x419e95);_0x270276!==-0x1&&(sessions[_0x270276]['dateStr']=selectedRsDate,sessions[_0x270276][_0x22eac4(0x1cd)]=_0x3ad5f7,sessions[_0x270276][_0x22eac4(0x1d2)]=_0x192b4f,reRenderBlocks());try{const _0x23a6ec=window['Telegram']?.['WebApp'],_0x131efd=await fetch(API_URL,{'method':_0x22eac4(0x24a),'body':JSON[_0x22eac4(0x22b)]({'action':_0x22eac4(0x187),'init_data':_0x23a6ec?.[_0x22eac4(0x1a4)]||'','oldSessionId':_0x419e95,'oldDate':_0x43675a,'newDate':selectedRsDate,'newTime':_0x3ad5f7,'coachId':currentSession[_0x22eac4(0x226)]})}),_0xe446e6=await _0x131efd['json']();!_0xe446e6['ok']?(showToast(_0x22eac4(0x235)),DataManager[_0x22eac4(0x1f4)]()):(showToast(_0x22eac4(0x1f0)),DataManager['saveLocally']());}catch(_0x3e4a21){showToast(_0x22eac4(0x267));}}document[a3_0x5b07f4(0x252)](a3_0x5b07f4(0x170),init);