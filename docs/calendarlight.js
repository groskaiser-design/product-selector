const a3_0x6f82ea=a3_0x2d62;(function(_0x1c7c5f,_0x364500){const _0x597d81=a3_0x2d62,_0xccb289=_0x1c7c5f();while(!![]){try{const _0x595cc7=-parseInt(_0x597d81(0xef))/0x1*(-parseInt(_0x597d81(0x134))/0x2)+parseInt(_0x597d81(0x151))/0x3*(parseInt(_0x597d81(0x16a))/0x4)+parseInt(_0x597d81(0xc6))/0x5+-parseInt(_0x597d81(0x9b))/0x6*(-parseInt(_0x597d81(0x10e))/0x7)+-parseInt(_0x597d81(0xc3))/0x8+parseInt(_0x597d81(0x163))/0x9+-parseInt(_0x597d81(0xb1))/0xa*(parseInt(_0x597d81(0xc5))/0xb);if(_0x595cc7===_0x364500)break;else _0xccb289['push'](_0xccb289['shift']());}catch(_0x38c92b){_0xccb289['push'](_0xccb289['shift']());}}}(a3_0x1c92,0xabe09));const APP_VERSION=a3_0x6f82ea(0x10c),API_URL=a3_0x6f82ea(0xd4),GRID_H=0x3c,KEY_SESSIONS=a3_0x6f82ea(0xb4),KEY_SETTINGS=a3_0x6f82ea(0xc2),KEY_CLIENTS=a3_0x6f82ea(0x86);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x1d4225=a3_0x6f82ea,_0x2a18f8=(function(){let _0x22dc2c=!![];return function(_0x91762b,_0x30f6be){const _0x598955=_0x22dc2c?function(){const _0x4d8691=a3_0x2d62;if(_0x30f6be){const _0x8a9a04=_0x30f6be[_0x4d8691(0x168)](_0x91762b,arguments);return _0x30f6be=null,_0x8a9a04;}}:function(){};return _0x22dc2c=![],_0x598955;};}()),_0x3977a6=_0x2a18f8(this,function(){const _0x4f5b0d=a3_0x2d62;return _0x3977a6['toString']()[_0x4f5b0d(0xf3)](_0x4f5b0d(0x124))[_0x4f5b0d(0x133)]()['constructor'](_0x3977a6)[_0x4f5b0d(0xf3)]('(((.+)+)+)+$');});_0x3977a6();try{const _0x488092=window[_0x1d4225(0x11e)]?.['WebApp'];if(!_0x488092)return;_0x488092[_0x1d4225(0x131)](),_0x488092['expand']();try{_0x488092[_0x1d4225(0x9c)](_0x1d4225(0x7f)),_0x488092['setBackgroundColor']&&_0x488092[_0x1d4225(0xda)](_0x1d4225(0x7f));}catch(_0x15cc33){console['log'](_0x1d4225(0x82),_0x15cc33);}try{_0x488092['BackButton']&&(_0x488092[_0x1d4225(0x99)][_0x1d4225(0xaa)](),_0x488092['BackButton'][_0x1d4225(0xb5)](),_0x488092['BackButton'][_0x1d4225(0xa6)](function(){const _0x29202f=_0x1d4225;window['location'][_0x29202f(0xca)]=_0x29202f(0x8f);}));}catch(_0x14f35e){console[_0x1d4225(0xde)]('Error\x20setting\x20back\x20button:',_0x14f35e);}try{if(_0x488092[_0x1d4225(0x10d)])_0x488092[_0x1d4225(0x10d)]();}catch(_0x49471a){}}catch(_0x5498a3){console[_0x1d4225(0x14c)]('Critical\x20TMA\x20Error:',_0x5498a3);}}());function isAdmin(){const _0x17a6e7=a3_0x6f82ea;try{const _0x4507f0=Number(window[_0x17a6e7(0x11e)]?.[_0x17a6e7(0xae)]?.[_0x17a6e7(0x7c)]?.['user']?.['id']);return _0x4507f0===0xbaf7174;}catch(_0xfc0277){return![];}}const DataManager={'saveLocally'(){const _0x4ef0c3=a3_0x6f82ea;try{localStorage[_0x4ef0c3(0xb2)](KEY_SESSIONS,JSON[_0x4ef0c3(0x154)](sessions)),localStorage[_0x4ef0c3(0xb2)](KEY_CLIENTS,JSON[_0x4ef0c3(0x154)](clients)),localStorage[_0x4ef0c3(0xb2)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x1535f9){}},'loadLocal'(){const _0x2a86e6=a3_0x6f82ea;try{const _0x438570=localStorage[_0x2a86e6(0xa3)](KEY_SESSIONS);if(_0x438570)sessions=JSON[_0x2a86e6(0x104)](_0x438570);const _0x4e2c57=localStorage[_0x2a86e6(0xa3)](KEY_CLIENTS);if(_0x4e2c57)clients=JSON['parse'](_0x4e2c57);const _0x396f52=localStorage['getItem'](KEY_SETTINGS);if(_0x396f52){const _0x5b4305=JSON[_0x2a86e6(0x104)](_0x396f52);if(_0x5b4305[_0x2a86e6(0x164)])availabilityPattern=_0x5b4305['pattern'];if(_0x5b4305[_0x2a86e6(0x137)])specialRanges=_0x5b4305['ranges'];if(_0x5b4305[_0x2a86e6(0xcf)])dateExceptions=_0x5b4305[_0x2a86e6(0xcf)];}}catch(_0x33f39c){}},async 'syncLoad'(){const _0x5fa599=a3_0x6f82ea,_0xe45073=new Date(),_0xc82c3f=_0xe45073[_0x5fa599(0x140)]()+'-'+String(_0xe45073[_0x5fa599(0x127)]()+0x1)[_0x5fa599(0x75)](0x2,'0'),_0x50e35d=new Date(_0xe45073);_0x50e35d['setMonth'](_0xe45073[_0x5fa599(0x127)]()+0x1);const _0x10ec8b=_0x50e35d[_0x5fa599(0x140)]()+'-'+String(_0x50e35d[_0x5fa599(0x127)]()+0x1)[_0x5fa599(0x75)](0x2,'0'),_0x39457c=Date[_0x5fa599(0x105)]();try{const _0xc01781=window['Telegram']?.['WebApp'],_0x52f5ba=_0xc01781?.['initData']||'',[_0x42c292,_0x1880ed]=await Promise[_0x5fa599(0x161)]([fetch(API_URL,{'method':_0x5fa599(0xd2),'body':JSON[_0x5fa599(0x154)]({'action':_0x5fa599(0x125),'init_data':_0x52f5ba,'month_str':_0xc82c3f})})['then'](_0x4a9b10=>_0x4a9b10[_0x5fa599(0x7d)]()),fetch(API_URL,{'method':_0x5fa599(0xd2),'body':JSON['stringify']({'action':_0x5fa599(0x125),'init_data':_0x52f5ba,'month_str':_0x10ec8b})})[_0x5fa599(0xc0)](_0x37198b=>_0x37198b[_0x5fa599(0x7d)]())]);if(lastUserActionTime>_0x39457c){console[_0x5fa599(0xde)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x42c292['ok'])this[_0x5fa599(0x139)](_0x42c292[_0x5fa599(0xf8)],_0xc82c3f);if(_0x1880ed['ok'])this[_0x5fa599(0x139)](_0x1880ed[_0x5fa599(0xf8)],_0x10ec8b);this['saveLocally']();}catch(_0x11300f){}},'applyData'(_0x568879,_0x2edecf){const _0x164199=a3_0x6f82ea;if(!_0x568879)return;if(_0x568879[_0x164199(0x87)]){if(_0x568879[_0x164199(0x87)][_0x164199(0x164)])availabilityPattern=_0x568879[_0x164199(0x87)][_0x164199(0x164)];if(_0x568879['settings'][_0x164199(0x137)])specialRanges=_0x568879[_0x164199(0x87)][_0x164199(0x137)];if(_0x568879[_0x164199(0x87)][_0x164199(0xcf)])dateExceptions=_0x568879['settings'][_0x164199(0xcf)];}if(_0x568879['clients']&&Array['isArray'](_0x568879['clients']))clients=_0x568879[_0x164199(0xb0)];_0x568879['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x568879['coach_profiles']}),_0x568879['calendar']&&(sessions=sessions[_0x164199(0xa8)](_0x2b8784=>!_0x2b8784[_0x164199(0x120)][_0x164199(0x162)](_0x2edecf)),Object[_0x164199(0xe4)](_0x568879[_0x164199(0xe0)])[_0x164199(0xc9)](_0x31c825=>{const _0x41947a=_0x164199,_0x5a27a3=_0x568879['calendar'][_0x31c825];_0x5a27a3[_0x41947a(0xc9)](_0x52ac15=>{const _0x28c4da=_0x41947a;sessions[_0x28c4da(0x93)]({'id':_0x52ac15['i'],'clientId':_0x52ac15['c'],'coachId':_0x52ac15[_0x28c4da(0x103)],'dateStr':_0x2edecf+'-'+_0x31c825[_0x28c4da(0x75)](0x2,'0'),'start':_0x52ac15['s'],'end':_0x52ac15['e'],'note':_0x52ac15['n']||'','status':_0x52ac15['st']||'planned','seriesId':_0x52ac15[_0x28c4da(0x13e)]});});})),reRenderBlocks();}};function init(){const _0x133053=a3_0x6f82ea;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x133053(0xcb)]('matrixViewport')[_0x133053(0x15b)](_0x133053(0x10a),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x1e2e73=a3_0x6f82ea,_0x24754e=document[_0x1e2e73(0xcb)](_0x1e2e73(0x114)),_0x2b43dc=document[_0x1e2e73(0xcb)](_0x1e2e73(0x80));_0x24754e[_0x1e2e73(0x8b)]='',_0x24754e[_0x1e2e73(0xdd)](_0x2b43dc);for(let _0x4fce70=0x0;_0x4fce70<0x18;_0x4fce70++){const _0x1d6c75=document['createElement']('div');_0x1d6c75[_0x1e2e73(0xe7)]='time-label';if(_0x4fce70>0x0)_0x1d6c75['innerHTML']='<span>'+String(_0x4fce70)['padStart'](0x2,'0')+':00</span>';_0x24754e[_0x1e2e73(0xdd)](_0x1d6c75);}}function renderDayRange(_0x35cfad,_0x4e31bd){const _0x56bf8c=a3_0x6f82ea,_0xc2cc8a=document[_0x56bf8c(0xcb)](_0x56bf8c(0x148)),_0x5ec511=document[_0x56bf8c(0xcb)](_0x56bf8c(0x146)),_0x97a9ea=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1cb145=new Date();_0x1cb145[_0x56bf8c(0x13d)](0x0,0x0,0x0,0x0);const _0x8fd6ca=getLocalDateStr(new Date());for(let _0x43f6d5=_0x35cfad;_0x43f6d5<=_0x4e31bd;_0x43f6d5++){const _0x290fa3=new Date(_0x1cb145);_0x290fa3[_0x56bf8c(0xfb)](_0x290fa3[_0x56bf8c(0x111)]()+_0x43f6d5);const _0xba71ed=getLocalDateStr(_0x290fa3);let _0x29de06=_0x290fa3['getDay']()-0x1;if(_0x29de06===-0x1)_0x29de06=0x6;const _0x56c7e4=_0xba71ed===_0x8fd6ca,_0x3733d4=document['createElement'](_0x56bf8c(0xd7));_0x3733d4['className']=_0x56bf8c(0xa0)+(_0x56c7e4?_0x56bf8c(0x9d):''),_0x3733d4['setAttribute']('data-date',_0xba71ed),_0x3733d4['innerHTML']=_0x56bf8c(0x128)+_0x97a9ea[_0x29de06]+_0x56bf8c(0x130)+_0x290fa3[_0x56bf8c(0x111)]()+'</div>',_0xc2cc8a['appendChild'](_0x3733d4);const _0x4f6e1f=document['createElement'](_0x56bf8c(0xd7));_0x4f6e1f[_0x56bf8c(0xe7)]=_0x56bf8c(0x13a)+(_0x56c7e4?_0x56bf8c(0x9d):''),_0x4f6e1f['setAttribute'](_0x56bf8c(0xfc),_0xba71ed),_0x4f6e1f['setAttribute'](_0x56bf8c(0xe5),_0x29de06),_0x5ec511[_0x56bf8c(0xdd)](_0x4f6e1f);}}function a3_0x2d62(_0x25cae8,_0x52f041){_0x25cae8=_0x25cae8-0x75;const _0x39092c=a3_0x1c92();let _0x1a09df=_0x39092c[_0x25cae8];return _0x1a09df;}function reRenderBlocks(){const _0x3568d3=a3_0x6f82ea;document[_0x3568d3(0x144)](_0x3568d3(0x14a))['forEach'](_0x5bc0b4=>{const _0x3d1178=_0x3568d3;_0x5bc0b4[_0x3d1178(0x144)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x3d1178(0xc9)](_0x47e905=>_0x47e905['remove']());const _0x2e1d4e=_0x5bc0b4[_0x3d1178(0xe3)](_0x3d1178(0xfc)),_0x55f6db=parseInt(_0x5bc0b4['getAttribute'](_0x3d1178(0xe5))),_0x16c9f8=Math[_0x3d1178(0x13b)](_0x5bc0b4['offsetLeft']);(availabilityPattern[_0x55f6db]||[])[_0x3d1178(0xc9)](_0x3e690d=>{const _0x517b01=_0x3d1178,_0xfcf880=document[_0x517b01(0xbe)](_0x517b01(0xd7));_0xfcf880[_0x517b01(0xe7)]=_0x517b01(0x15c),_0xfcf880[_0x517b01(0x16b)][_0x517b01(0xf7)]=_0x3e690d*GRID_H+'px',_0xfcf880[_0x517b01(0x16b)][_0x517b01(0xd0)]='-'+_0x16c9f8+'px\x20-'+_0x3e690d*GRID_H+'px',_0x5bc0b4['appendChild'](_0xfcf880);});if(specialRanges[_0x3d1178(0x7e)]>0x0){const _0x38a86b=new Date(_0x2e1d4e+_0x3d1178(0xd1))[_0x3d1178(0x153)](),_0x4979e0=new Date(_0x2e1d4e+'T23:59:59')[_0x3d1178(0x153)]();specialRanges[_0x3d1178(0xc9)](_0x224fd2=>{const _0x2a204e=_0x3d1178,_0x3820ea=new Date(_0x224fd2[_0x2a204e(0xb8)])[_0x2a204e(0x153)](),_0x5c31b0=new Date(_0x224fd2[_0x2a204e(0xa2)])[_0x2a204e(0x153)](),_0x428f1d=Math[_0x2a204e(0xdb)](_0x38a86b,_0x3820ea),_0x3213ec=Math[_0x2a204e(0x169)](_0x4979e0,_0x5c31b0);if(_0x428f1d<_0x3213ec){const _0x385a68=(_0x428f1d-_0x38a86b)/0x36ee80*GRID_H,_0x396306=(_0x3213ec-_0x428f1d)/0x36ee80*GRID_H,_0x529412=document[_0x2a204e(0xbe)](_0x2a204e(0xd7));_0x396306>=23.5*GRID_H?(_0x529412['className']=_0x2a204e(0x90),_0x529412[_0x2a204e(0x16b)][_0x2a204e(0xd0)]='-'+_0x16c9f8+'px\x200px'):(_0x529412[_0x2a204e(0xe7)]='blocked-range-part\x20stripe-bg',_0x529412[_0x2a204e(0x16b)][_0x2a204e(0xf7)]=_0x385a68+'px',_0x529412[_0x2a204e(0x16b)][_0x2a204e(0x79)]=_0x396306+'px',_0x529412[_0x2a204e(0x16b)]['backgroundPosition']='-'+_0x16c9f8+_0x2a204e(0x10f)+_0x385a68+'px'),_0x5bc0b4[_0x2a204e(0xdd)](_0x529412);}});}renderEventsForColumn(_0x5bc0b4,_0x2e1d4e);});}function renderEventsForColumn(_0x13cb93,_0x40297){const _0x219acf=a3_0x6f82ea,_0x238ce0=sessions[_0x219acf(0xa8)](_0x181960=>_0x181960[_0x219acf(0x120)]===_0x40297),_0x162526=_0x238ce0[_0x219acf(0xf4)](_0x2dce85=>{const _0x4c29c9=_0x219acf,[_0x254824,_0x41a9a8]=_0x2dce85[_0x4c29c9(0xb8)]['split'](':')['map'](Number),[_0x181b83,_0x28740d]=_0x2dce85[_0x4c29c9(0xa2)]['split'](':')[_0x4c29c9(0xf4)](Number);return{'data':_0x2dce85,'start':_0x254824*0x3c+_0x41a9a8,'end':_0x181b83*0x3c+_0x28740d,'colIndex':0x0};});_0x162526[_0x219acf(0x8a)]((_0x440005,_0x47cff7)=>_0x440005[_0x219acf(0xb8)]-_0x47cff7[_0x219acf(0xb8)]||_0x47cff7[_0x219acf(0xa2)]-_0x47cff7['start']-(_0x440005[_0x219acf(0xa2)]-_0x440005[_0x219acf(0xb8)]));const _0x41989c=[];_0x162526[_0x219acf(0xc9)](_0x22261a=>{const _0x248f75=_0x219acf;let _0x9e729f=![];for(let _0x21712f=0x0;_0x21712f<_0x41989c[_0x248f75(0x7e)];_0x21712f++){const _0x11edbb=_0x41989c[_0x21712f];if(_0x22261a[_0x248f75(0xb8)]>=_0x11edbb[_0x11edbb[_0x248f75(0x7e)]-0x1][_0x248f75(0xa2)]){_0x11edbb[_0x248f75(0x93)](_0x22261a),_0x22261a[_0x248f75(0x107)]=_0x21712f,_0x9e729f=!![];break;}}!_0x9e729f&&(_0x41989c[_0x248f75(0x93)]([_0x22261a]),_0x22261a[_0x248f75(0x107)]=_0x41989c[_0x248f75(0x7e)]-0x1);}),_0x162526[_0x219acf(0xc9)](_0x398259=>{const _0x458dff=_0x219acf;let _0x39eb6c=0x0;_0x162526[_0x458dff(0xc9)](_0x5e2627=>{const _0x354dd8=_0x458dff;if(Math[_0x354dd8(0xdb)](_0x398259[_0x354dd8(0xb8)],_0x5e2627[_0x354dd8(0xb8)])<Math[_0x354dd8(0x169)](_0x398259[_0x354dd8(0xa2)],_0x5e2627[_0x354dd8(0xa2)])&&_0x5e2627[_0x354dd8(0x107)]>_0x39eb6c)_0x39eb6c=_0x5e2627[_0x354dd8(0x107)];});const _0x53a1d4=_0x39eb6c+0x1,_0x3dfd0b=0x64/_0x53a1d4,_0x53e8ab=_0x398259[_0x458dff(0x107)]*_0x3dfd0b,_0x55fd93=document[_0x458dff(0xbe)](_0x458dff(0xd7)),_0x55e0e4=_0x398259[_0x458dff(0xf8)];let _0x27bb65='#0a84ff';if(clients&&clients[_0x458dff(0x7e)]>0x0){const _0x2b9aec=clients['find'](_0xf186cc=>String(_0xf186cc['id'])===String(_0x55e0e4['clientId']));if(_0x2b9aec&&_0x2b9aec[_0x458dff(0x123)])_0x27bb65=_0x2b9aec[_0x458dff(0x123)];}const _0x46802b=_0x55e0e4[_0x458dff(0x12c)]==='completed',_0x2fe94c=_0x46802b?0x1:0.45;_0x55fd93[_0x458dff(0xe7)]=_0x458dff(0x11a)+(_0x46802b?_0x458dff(0x132):''),_0x55fd93[_0x458dff(0x16b)]['backgroundColor']=hexToRgba(_0x27bb65,_0x2fe94c),_0x55fd93['style'][_0x458dff(0x108)]=_0x27bb65;const _0x231c6c=_0x398259[_0x458dff(0xb8)]/0x3c*GRID_H,_0x5aecd4=(_0x398259['end']-_0x398259[_0x458dff(0xb8)])/0x3c*GRID_H;_0x55fd93[_0x458dff(0x16b)][_0x458dff(0xf7)]=_0x231c6c+'px',_0x55fd93[_0x458dff(0x16b)][_0x458dff(0x79)]=Math[_0x458dff(0xdb)](_0x5aecd4,0x14)+'px',_0x55fd93['style'][_0x458dff(0x100)]=_0x458dff(0xce)+_0x3dfd0b+'%\x20-\x204px)',_0x55fd93[_0x458dff(0x16b)]['left']=_0x458dff(0xce)+_0x53e8ab+_0x458dff(0x141),_0x55fd93[_0x458dff(0x16b)][_0x458dff(0xf0)]=0xa+_0x398259[_0x458dff(0x107)];if(_0x3dfd0b<0x55)_0x55fd93[_0x458dff(0xfe)][_0x458dff(0xcc)](_0x458dff(0x101));let _0xaa4cfc='';if(_0x55e0e4[_0x458dff(0xf9)])_0xaa4cfc+=_0x458dff(0x97);if(_0x46802b)_0xaa4cfc+=_0x458dff(0x12b);_0x55fd93[_0x458dff(0x8b)]=_0x458dff(0x11b)+_0x55e0e4['start']+_0x458dff(0x157)+_0x55e0e4[_0x458dff(0xa2)]+_0x458dff(0xea)+_0xaa4cfc+_0x458dff(0x8c),_0x55fd93[_0x458dff(0x135)]=_0x4d3ea3=>{_0x4d3ea3['stopPropagation'](),openDetails(_0x55e0e4);},_0x13cb93[_0x458dff(0xdd)](_0x55fd93);});}function openAnalytics(){const _0x552214=a3_0x6f82ea,_0x5c813d=document[_0x552214(0x156)](_0x552214(0x121));setAnalyticsPeriod(_0x552214(0x13f),_0x5c813d),openSheet(_0x552214(0xbb));}function setAnalyticsPeriod(_0x59d4cb,_0x53fd6f){const _0x215772=a3_0x6f82ea;currentAnPeriod=_0x59d4cb,document[_0x215772(0x144)](_0x215772(0x121))[_0x215772(0xc9)](_0x3e8853=>_0x3e8853['classList']['remove'](_0x215772(0x155)));if(_0x53fd6f)_0x53fd6f[_0x215772(0xfe)][_0x215772(0xcc)](_0x215772(0x155));const _0x76226f=document[_0x215772(0xcb)]('anCustomDates');_0x76226f['style'][_0x215772(0x91)]=_0x59d4cb===_0x215772(0x15a)?_0x215772(0xb3):_0x215772(0x14b);const _0x6bceca=new Date();let _0x353846=new Date(),_0x39d989=new Date();if(_0x59d4cb===_0x215772(0x13f))_0x353846=getStartOfWeek(_0x6bceca),_0x39d989=new Date(_0x353846),_0x39d989['setDate'](_0x39d989[_0x215772(0x111)]()+0x6);else{if(_0x59d4cb===_0x215772(0x7b))_0x353846=new Date(_0x6bceca[_0x215772(0x140)](),_0x6bceca['getMonth'](),0x1),_0x39d989=new Date(_0x6bceca[_0x215772(0x140)](),_0x6bceca['getMonth']()+0x1,0x0);else{!document[_0x215772(0xcb)](_0x215772(0xba))[_0x215772(0x94)]&&(document[_0x215772(0xcb)](_0x215772(0xba))[_0x215772(0x94)]=getLocalDateStr(_0x6bceca),document[_0x215772(0xcb)](_0x215772(0xee))[_0x215772(0x94)]=getLocalDateStr(_0x6bceca));refreshAnalytics();return;}}document['getElementById'](_0x215772(0xba))['value']=getLocalDateStr(_0x353846),document[_0x215772(0xcb)](_0x215772(0xee))[_0x215772(0x94)]=getLocalDateStr(_0x39d989),refreshAnalytics();}function refreshAnalytics(){const _0x14d9d3=a3_0x6f82ea,_0x9dc7e3=document[_0x14d9d3(0xcb)](_0x14d9d3(0xba))['value'],_0x161900=document[_0x14d9d3(0xcb)](_0x14d9d3(0xee))[_0x14d9d3(0x94)];if(!_0x9dc7e3||!_0x161900)return;const _0x55abce=sessions[_0x14d9d3(0xa8)](_0x2bdde0=>_0x2bdde0[_0x14d9d3(0x120)]>=_0x9dc7e3&&_0x2bdde0[_0x14d9d3(0x120)]<=_0x161900&&_0x2bdde0[_0x14d9d3(0x12c)]!==_0x14d9d3(0x8e)),_0x2653fd=_0x55abce[_0x14d9d3(0x7e)],_0xc6e7e2=_0x55abce['filter'](_0x584a8e=>_0x584a8e['status']===_0x14d9d3(0x92))[_0x14d9d3(0x7e)],_0x5933ae=_0x2653fd>0x0?Math[_0x14d9d3(0x13b)](_0xc6e7e2/_0x2653fd*0x64):0x0;document[_0x14d9d3(0xcb)](_0x14d9d3(0xc8))['textContent']=_0x5933ae+'%',document[_0x14d9d3(0xcb)](_0x14d9d3(0xe1))[_0x14d9d3(0xf2)]=_0xc6e7e2+'\x20–∏–∑\x20'+_0x2653fd+_0x14d9d3(0xbf);const _0x46c545=document[_0x14d9d3(0xcb)]('anDonutCircle'),_0x4adb8b=0x2*Math['PI']*0x23,_0x46907b=_0x4adb8b-_0x5933ae/0x64*_0x4adb8b;_0x46c545[_0x14d9d3(0x16b)][_0x14d9d3(0xa5)]=_0x46907b;const _0x40dd9e={};_0x55abce[_0x14d9d3(0xc9)](_0x52adfa=>{const _0x255115=_0x14d9d3,_0x5cc2dc=_0x52adfa['coachId']||_0x255115(0xc7);if(!_0x40dd9e[_0x5cc2dc]){const _0x3ac204='#'+_0x5cc2dc[_0x255115(0x133)]()[_0x255115(0x15e)](0x0,0x6);_0x40dd9e[_0x5cc2dc]={'total':0x0,'done':0x0,'color':_0x3ac204};}_0x40dd9e[_0x5cc2dc][_0x255115(0xac)]++;if(_0x52adfa[_0x255115(0x12c)]===_0x255115(0x92))_0x40dd9e[_0x5cc2dc][_0x255115(0xfd)]++;});const _0x24b690=document['getElementById']('analyticsList');_0x24b690[_0x14d9d3(0x8b)]='';const _0x350af7=Object[_0x14d9d3(0xff)](_0x40dd9e)[_0x14d9d3(0x8a)]((_0xb4ecaa,_0x2d347c)=>_0x2d347c[0x1]['total']-_0xb4ecaa[0x1][_0x14d9d3(0xac)]);if(_0x350af7[_0x14d9d3(0x7e)]===0x0){_0x24b690['innerHTML']=_0x14d9d3(0x84);return;}_0x350af7['forEach'](([_0x24fa89,_0x3aefaa])=>{const _0x15a4fb=_0x14d9d3,_0x5d3380=Math[_0x15a4fb(0x13b)](_0x3aefaa[_0x15a4fb(0xfd)]/_0x3aefaa['total']*0x64),_0x147eda=document[_0x15a4fb(0xbe)]('div');_0x147eda['className']=_0x15a4fb(0x7a),_0x147eda[_0x15a4fb(0x16b)]['borderLeftColor']=_0x3aefaa[_0x15a4fb(0x123)],_0x147eda[_0x15a4fb(0x8b)]=_0x15a4fb(0x166)+_0x24fa89[_0x15a4fb(0x15e)](0x0,0x5)+_0x15a4fb(0x15d)+_0x3aefaa[_0x15a4fb(0xfd)]+_0x15a4fb(0x8d)+_0x3aefaa['total']+_0x15a4fb(0xd9)+_0x5d3380+_0x15a4fb(0x14d),_0x24b690[_0x15a4fb(0xdd)](_0x147eda);});}function openDetails(_0x12deb0){const _0x18f3ee=a3_0x6f82ea;currentSession=_0x12deb0;const _0x4d0845=new Date(_0x12deb0[_0x18f3ee(0x120)]),_0x3d7765=_0x4d0845[_0x18f3ee(0x116)](_0x18f3ee(0x96),{'weekday':'long','day':'numeric','month':'long'});document[_0x18f3ee(0xcb)](_0x18f3ee(0x129))['textContent']=_0x3d7765['charAt'](0x0)[_0x18f3ee(0x9f)]()+_0x3d7765[_0x18f3ee(0xdf)](0x1),document[_0x18f3ee(0xcb)](_0x18f3ee(0xe8))[_0x18f3ee(0xf2)]=_0x12deb0[_0x18f3ee(0xb8)]+_0x18f3ee(0x157)+_0x12deb0[_0x18f3ee(0xa2)],document[_0x18f3ee(0xcb)](_0x18f3ee(0x126))[_0x18f3ee(0xf2)]=_0x12deb0[_0x18f3ee(0xaf)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x5bccde=document['getElementById'](_0x18f3ee(0x14e)),_0x102188=document[_0x18f3ee(0xcb)]('cancelContainer'),_0x1a7931=_0x102188[_0x18f3ee(0x156)](_0x18f3ee(0xb9)),_0x1bf223=_0x102188[_0x18f3ee(0x156)]('.btn-reschedule'),_0x3056e0=document[_0x18f3ee(0xcb)](_0x18f3ee(0x143));if(_0x12deb0[_0x18f3ee(0x12c)]===_0x18f3ee(0x92))_0x5bccde['textContent']=_0x18f3ee(0x145),_0x5bccde[_0x18f3ee(0x16b)]['color']=_0x18f3ee(0x138),_0x102188[_0x18f3ee(0x16b)]['display']=_0x18f3ee(0x14b);else{_0x5bccde['textContent']=_0x18f3ee(0xd6),_0x5bccde[_0x18f3ee(0x16b)][_0x18f3ee(0x123)]=_0x18f3ee(0xc1),_0x102188[_0x18f3ee(0x16b)]['display']=_0x18f3ee(0xd3);const _0xda7184=new Date(_0x12deb0[_0x18f3ee(0x120)]+'T'+_0x12deb0[_0x18f3ee(0xb8)]),_0x1de8da=new Date(),_0x3f59df=(_0xda7184-_0x1de8da)/(0x3e8*0x3c*0x3c),_0x184d02=coachProfiles[_0x12deb0['coachId']]&&coachProfiles[_0x12deb0['coachId']][_0x18f3ee(0x119)]?parseInt(coachProfiles[_0x12deb0[_0x18f3ee(0xe2)]][_0x18f3ee(0x119)]):0x18;if(_0x184d02===0x0||_0x3f59df>=_0x184d02)_0x1a7931[_0x18f3ee(0x16b)][_0x18f3ee(0x91)]=_0x18f3ee(0xd3),_0x1bf223[_0x18f3ee(0x16b)][_0x18f3ee(0x91)]=_0x18f3ee(0xd3),_0x3056e0['style'][_0x18f3ee(0x91)]=_0x18f3ee(0x14b);else{_0x1a7931[_0x18f3ee(0x16b)]['display']='none',_0x1bf223[_0x18f3ee(0x16b)][_0x18f3ee(0x91)]=_0x18f3ee(0x14b),_0x3056e0[_0x18f3ee(0x16b)][_0x18f3ee(0x91)]=_0x18f3ee(0xd3);let _0x1e60c4=_0x184d02===0x0?_0x18f3ee(0xf1):'–∑–∞\x20'+_0x184d02+_0x18f3ee(0x13c);_0x3056e0[_0x18f3ee(0xf2)]=_0x18f3ee(0x117)+_0x1e60c4+_0x18f3ee(0xd8);}}document[_0x18f3ee(0xcb)](_0x18f3ee(0xbc))[_0x18f3ee(0xfe)][_0x18f3ee(0xcc)](_0x18f3ee(0x155)),document[_0x18f3ee(0xcb)](_0x18f3ee(0x12a))['classList'][_0x18f3ee(0xcc)]('open');}function closeAllSheets(){const _0x5ce82a=a3_0x6f82ea;document['getElementById'](_0x5ce82a(0xbc))[_0x5ce82a(0xfe)]['remove'](_0x5ce82a(0x155)),document[_0x5ce82a(0x144)]('.sheet')['forEach'](_0x19997f=>_0x19997f[_0x5ce82a(0xfe)][_0x5ce82a(0xa1)](_0x5ce82a(0x12d)));}function openSheet(_0x405f42){const _0x45affe=a3_0x6f82ea;document[_0x45affe(0xcb)]('overlay')[_0x45affe(0xfe)][_0x45affe(0xcc)](_0x45affe(0x155)),document[_0x45affe(0xcb)](_0x405f42)['classList'][_0x45affe(0xcc)](_0x45affe(0x12d));}function getLocalDateStr(_0x2cb9d2){const _0x114cbf=a3_0x6f82ea,_0x4bf080=_0x2cb9d2[_0x114cbf(0x140)](),_0x4e0096=String(_0x2cb9d2[_0x114cbf(0x127)]()+0x1)[_0x114cbf(0x75)](0x2,'0'),_0x14ae29=String(_0x2cb9d2[_0x114cbf(0x111)]())[_0x114cbf(0x75)](0x2,'0');return _0x4bf080+'-'+_0x4e0096+'-'+_0x14ae29;}function getStartOfWeek(_0x5c14a2){const _0x5a0784=a3_0x6f82ea,_0x32a209=new Date(_0x5c14a2),_0x4c340d=_0x32a209[_0x5a0784(0x102)](),_0x1f085d=_0x32a209[_0x5a0784(0x111)]()-_0x4c340d+(_0x4c340d===0x0?-0x6:0x1);return _0x32a209[_0x5a0784(0xfb)](_0x1f085d),_0x32a209[_0x5a0784(0x13d)](0x0,0x0,0x0,0x0),_0x32a209;}function scrollToToday(){const _0x2def34=getLocalDateStr(new Date());setTimeout(()=>{const _0x4a8462=a3_0x2d62,_0x3dd076=document[_0x4a8462(0x156)](_0x4a8462(0x11f)+_0x2def34+'\x22]');if(_0x3dd076){const _0x26a692=document[_0x4a8462(0xcb)](_0x4a8462(0x109)),_0x4542b4=_0x3dd076[_0x4a8462(0x11c)]-_0x26a692[_0x4a8462(0x12f)]/0x2+_0x3dd076[_0x4a8462(0xe9)]/0x2;_0x26a692[_0x4a8462(0xa9)]({'left':_0x4542b4,'behavior':_0x4a8462(0x147)}),_0x26a692[_0x4a8462(0xd5)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x2d34ad=a3_0x6f82ea,_0x1e96ff=new Date(),_0x1667bb=document['getElementById'](_0x2d34ad(0xdc)),_0xb483cb=document[_0x2d34ad(0xcb)]('timeLineBadge'),_0x3be644=(_0x1e96ff[_0x2d34ad(0x106)]()*0x3c+_0x1e96ff[_0x2d34ad(0x136)]())/0x3c*GRID_H;_0x1667bb[_0x2d34ad(0x16b)][_0x2d34ad(0xf7)]=_0x3be644+'px',_0x1667bb[_0x2d34ad(0x16b)][_0x2d34ad(0x91)]=_0x2d34ad(0xd3),_0xb483cb['style'][_0x2d34ad(0xf7)]=_0x3be644+'px',_0xb483cb[_0x2d34ad(0x16b)][_0x2d34ad(0x91)]=_0x2d34ad(0xd3),_0xb483cb[_0x2d34ad(0xf2)]=String(_0x1e96ff[_0x2d34ad(0x106)]())[_0x2d34ad(0x75)](0x2,'0')+':'+String(_0x1e96ff[_0x2d34ad(0x136)]())['padStart'](0x2,'0');}function onScroll(){const _0x1c1bc4=a3_0x6f82ea,_0x27fb4a=document[_0x1c1bc4(0xcb)]('matrixViewport'),_0x51c6aa=document['querySelectorAll'](_0x1c1bc4(0xfa));for(let _0xf672df of _0x51c6aa)if(_0xf672df[_0x1c1bc4(0x11c)]>=_0x27fb4a[_0x1c1bc4(0xe6)]){const _0x350189=new Date(_0xf672df[_0x1c1bc4(0xe3)](_0x1c1bc4(0xfc)));document[_0x1c1bc4(0xcb)](_0x1c1bc4(0x9e))['textContent']=_0x350189['toLocaleString']('ru',{'month':'long'})[_0x1c1bc4(0x9f)]()+'\x20'+_0x350189[_0x1c1bc4(0x140)]();break;}}function showToast(_0xe83db6){const _0x39833c=a3_0x6f82ea,_0x4fc4be=document[_0x39833c(0xcb)](_0x39833c(0xed));_0x4fc4be[_0x39833c(0xf2)]=_0xe83db6,_0x4fc4be[_0x39833c(0xfe)][_0x39833c(0xcc)](_0x39833c(0xaa)),setTimeout(()=>_0x4fc4be[_0x39833c(0xfe)]['remove']('show'),0x7d0);}function a3_0x1c92(){const _0x14eb24=['</span>\x20/\x20','cancelled','router.html','day-off-overlay\x20stripe-bg','display','completed','push','value','initData','ru-RU','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','</div>','BackButton','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','409404momhPy','setHeaderColor','today','headerMonth','toUpperCase','day-col-header\x20','remove','end','getItem','scrollWidth','strokeDashoffset','onClick','</div><div\x20class=\x22rs-day-num\x22>','filter','scrollTo','show','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','total','customConfirm','WebApp','note','clients','1869810rTpdlm','setItem','flex','uc_client_sessions','offClick','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','long','start','.btn-cancel','anStart','analyticsSheet','overlay','get_slots','createElement','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','then','var(--acc-blue)','uc_client_settings','6860432OMRocE','createDocumentFragment','143rwWRGE','4194245piYuKh','Unknown','anPercent','forEach','href','getElementById','add','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','calc(','exceptions','backgroundPosition','T00:00:00','POST','block','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','scrollTop','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','div','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','setBackgroundColor','max','globalTimeLine','appendChild','log','slice','calendar','anTotalStats','coachId','getAttribute','keys','data-day-idx','scrollLeft','className','detTime','offsetWidth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.rs-date-chip','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','toast','anEnd','8ioNYsO','zIndex','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','textContent','search','map','findIndex','visible','top','data','seriesId','.day-col-header','setDate','data-date','done','classList','entries','width','mini','getDay','cid','parse','now','getHours','colIndex','borderLeftColor','matrixViewport','scroll','#ff453a','v9.5-CLIENT-ANALYTICS','disableVerticalSwipes','21WXohmK','px\x20-','rsDatesTrack','getDate','#0a84ff','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','timeColumn','<div\x20class=\x22rs-day-name\x22>','toLocaleDateString','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','syncLoad','cancel_window','event-card','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','offsetLeft','ccYesBtn','Telegram','.day-col-header[data-date=\x22','dateStr','.period-switch\x20.p-btn','numeric','color','(((.+)+)+)+$','client_load','detNote','getMonth','<div\x20class=\x22dch-day\x22>','detDate','detailsSheet','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','status','open','rsSlotsGrid','clientWidth','</div><div\x20class=\x22dch-num\x22>','ready','\x20status-completed','toString','274660VKxcpg','onclick','getMinutes','ranges','var(--acc-green)','applyData','day-column\x20','round','\x20—á.','setHours','sid','week','getFullYear','%\x20+\x202px)','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','cancelHint','querySelectorAll','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','gridColumns','auto','daysHeaderTrack','substring','.day-column','none','error','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','detStatus','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','rs-time-btn','343884GzGawn','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','getTime','stringify','active','querySelector','\x20-\x20','–û—Ç–º–µ–Ω–µ–Ω–æ','firstChild','custom','addEventListener','blocked-slot\x20stripe-bg','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','substr','rs-date-chip','rgba(10,\x20132,\x20255,\x20','all','startsWith','8397909Vgxava','pattern','split','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','apply','min','32rxaIwZ','style','600','padStart','saveLocally','fontWeight','setAttribute','height','client-stat-card','month','initDataUnsafe','json','length','#050505','timeLineBadge','ccText','Error\x20setting\x20color:','button','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','uc_client_list','settings','join','insertBefore','sort','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'];a3_0x1c92=function(){return _0x14eb24;};return a3_0x1c92();}function handleInfiniteScroll(){const _0x25c3db=a3_0x6f82ea,_0x22ca89=document[_0x25c3db(0xcb)](_0x25c3db(0x109)),_0x39c26b=_0x22ca89[_0x25c3db(0xe6)],_0x462e04=_0x22ca89[_0x25c3db(0xa4)],_0x51f445=_0x22ca89[_0x25c3db(0x12f)];if(_0x462e04-(_0x39c26b+_0x51f445)<0x12c){const _0x363252=endOffset;endOffset+=0xe,renderDayRange(_0x363252+0x1,endOffset),reRenderBlocks();}if(_0x39c26b<0x12c){const _0x7c5223=startOffset;startOffset-=0xe,prependDays(startOffset,_0x7c5223-0x1),_0x22ca89[_0x25c3db(0xe6)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x5e90ab,_0x4fc4b6){const _0x5d3da5=a3_0x6f82ea,_0x1ad4e0=document['getElementById']('daysHeaderTrack'),_0x2cda6e=document['getElementById'](_0x5d3da5(0x146)),_0x502d71=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x272163=new Date();_0x272163[_0x5d3da5(0x13d)](0x0,0x0,0x0,0x0);const _0x208c62=getLocalDateStr(new Date()),_0x3d600b=document[_0x5d3da5(0xc4)](),_0x4b735d=document[_0x5d3da5(0xc4)]();for(let _0x2bb172=_0x5e90ab;_0x2bb172<=_0x4fc4b6;_0x2bb172++){const _0x23b0cb=new Date(_0x272163);_0x23b0cb[_0x5d3da5(0xfb)](_0x23b0cb[_0x5d3da5(0x111)]()+_0x2bb172);const _0x12e793=getLocalDateStr(_0x23b0cb);let _0xc9506d=_0x23b0cb[_0x5d3da5(0x102)]()-0x1;if(_0xc9506d===-0x1)_0xc9506d=0x6;const _0x330edf=_0x12e793===_0x208c62,_0xd0188e=document[_0x5d3da5(0xbe)]('div');_0xd0188e['className']=_0x5d3da5(0xa0)+(_0x330edf?_0x5d3da5(0x9d):''),_0xd0188e[_0x5d3da5(0x78)](_0x5d3da5(0xfc),_0x12e793),_0xd0188e[_0x5d3da5(0x8b)]=_0x5d3da5(0x128)+_0x502d71[_0xc9506d]+'</div><div\x20class=\x22dch-num\x22>'+_0x23b0cb[_0x5d3da5(0x111)]()+'</div>',_0x3d600b[_0x5d3da5(0xdd)](_0xd0188e);const _0x1c198c=document[_0x5d3da5(0xbe)](_0x5d3da5(0xd7));_0x1c198c[_0x5d3da5(0xe7)]='day-column\x20'+(_0x330edf?'today':''),_0x1c198c[_0x5d3da5(0x78)](_0x5d3da5(0xfc),_0x12e793),_0x1c198c[_0x5d3da5(0x78)](_0x5d3da5(0xe5),_0xc9506d),_0x4b735d[_0x5d3da5(0xdd)](_0x1c198c);}_0x1ad4e0[_0x5d3da5(0x89)](_0x3d600b,_0x1ad4e0[_0x5d3da5(0x159)]),_0x2cda6e['insertBefore'](_0x4b735d,_0x2cda6e[_0x5d3da5(0x156)](_0x5d3da5(0x14a)));}function hexToRgba(_0x1f2d90,_0xd2d030){const _0x30058d=a3_0x6f82ea;let _0x373155;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x1f2d90))return _0x373155=_0x1f2d90[_0x30058d(0x149)](0x1)[_0x30058d(0x165)](''),_0x373155[_0x30058d(0x7e)]==0x3&&(_0x373155=[_0x373155[0x0],_0x373155[0x0],_0x373155[0x1],_0x373155[0x1],_0x373155[0x2],_0x373155[0x2]]),_0x373155='0x'+_0x373155[_0x30058d(0x88)](''),'rgba('+[_0x373155>>0x10&0xff,_0x373155>>0x8&0xff,_0x373155&0xff][_0x30058d(0x88)](',')+','+_0xd2d030+')';return _0x30058d(0x160)+_0xd2d030+')';}let confirmResolver=null;function showCustomConfirm(_0x3b4f87,_0x20288e,_0x3711f0=!![]){const _0x2d35cb=a3_0x6f82ea;document['getElementById']('ccTitle')[_0x2d35cb(0xf2)]=_0x3b4f87,document[_0x2d35cb(0xcb)](_0x2d35cb(0x81))[_0x2d35cb(0xf2)]=_0x20288e;const _0x41f2be=document[_0x2d35cb(0xcb)](_0x2d35cb(0x11d));return _0x3711f0?(_0x41f2be[_0x2d35cb(0x16b)][_0x2d35cb(0x123)]=_0x2d35cb(0x10b),_0x41f2be[_0x2d35cb(0x16b)][_0x2d35cb(0x77)]=_0x2d35cb(0x16c)):(_0x41f2be[_0x2d35cb(0x16b)][_0x2d35cb(0x123)]=_0x2d35cb(0x112),_0x41f2be[_0x2d35cb(0x16b)][_0x2d35cb(0x77)]='600'),new Promise(_0x337674=>{const _0x21f2f8=_0x2d35cb;confirmResolver=_0x337674,document[_0x21f2f8(0xcb)](_0x21f2f8(0xad))[_0x21f2f8(0xfe)][_0x21f2f8(0xcc)](_0x21f2f8(0xf6));});}function resolveCustomConfirm(_0x557c4e){const _0x230461=a3_0x6f82ea;document[_0x230461(0xcb)](_0x230461(0xad))['classList'][_0x230461(0xa1)]('visible');if(confirmResolver)confirmResolver(_0x557c4e);}async function tryCancelCurrentSession(){const _0x203c04=a3_0x6f82ea;if(!currentSession)return;const _0x30b6eb=await showCustomConfirm(_0x203c04(0x142),_0x203c04(0x9a),!![]);if(!_0x30b6eb)return;const _0x452582=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x14e0d7=>_0x14e0d7['id']!==_0x452582['id']),reRenderBlocks(),showToast(_0x203c04(0x158)),lastUserActionTime=Date[_0x203c04(0x105)]();try{const _0x586645=window[_0x203c04(0x11e)]?.['WebApp'],_0x10c0cb=await fetch(API_URL,{'method':_0x203c04(0xd2),'body':JSON[_0x203c04(0x154)]({'action':'client_cancel','init_data':_0x586645?.[_0x203c04(0x95)]||'','coachId':_0x452582[_0x203c04(0xe2)],'dateStr':_0x452582[_0x203c04(0x120)],'sessionId':_0x452582['id']})});if(_0x10c0cb['ok'])DataManager[_0x203c04(0x76)]();}catch(_0x1c2731){showToast(_0x203c04(0xec));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x22ac87=a3_0x6f82ea;if(!currentSession)return;document['getElementById'](_0x22ac87(0x12a))[_0x22ac87(0xfe)][_0x22ac87(0xa1)](_0x22ac87(0x12d)),document[_0x22ac87(0xcb)]('rescheduleSheet')[_0x22ac87(0xfe)][_0x22ac87(0xcc)]('open');const _0x1be8aa=document[_0x22ac87(0xcb)](_0x22ac87(0x110)),_0x47ed2a=document['getElementById'](_0x22ac87(0x12e));_0x1be8aa[_0x22ac87(0x8b)]='',_0x47ed2a['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x329a96,_0xed3db5]=currentSession[_0x22ac87(0xb8)][_0x22ac87(0x165)](':')[_0x22ac87(0xf4)](Number),[_0xf3898b,_0x15e27c]=currentSession[_0x22ac87(0xa2)][_0x22ac87(0x165)](':')[_0x22ac87(0xf4)](Number),_0x53588d=_0xf3898b*0x3c+_0x15e27c-(_0x329a96*0x3c+_0xed3db5);try{const _0x2dfbca=window[_0x22ac87(0x11e)]?.[_0x22ac87(0xae)],_0x252b07=await fetch(API_URL,{'method':_0x22ac87(0xd2),'body':JSON[_0x22ac87(0x154)]({'action':_0x22ac87(0xbd),'coachId':currentSession[_0x22ac87(0xe2)],'duration':_0x53588d,'init_data':_0x2dfbca?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x3f6d19=await _0x252b07['json']();_0x3f6d19['ok']&&_0x3f6d19[_0x22ac87(0xf8)]?(availableSlotsCache=_0x3f6d19[_0x22ac87(0xf8)],renderRescheduleDates()):_0x47ed2a[_0x22ac87(0x8b)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x3a8940){_0x47ed2a['innerHTML']=_0x22ac87(0xcd);}}function renderRescheduleDates(){const _0x122084=a3_0x6f82ea,_0x3c4107=document['getElementById']('rsDatesTrack');_0x3c4107[_0x122084(0x8b)]='';const _0x24cfb0=Object['keys'](availableSlotsCache)[_0x122084(0x8a)](),_0x44c009=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x24cfb0[_0x122084(0x7e)]===0x0){document[_0x122084(0xcb)](_0x122084(0x12e))[_0x122084(0x8b)]=_0x122084(0x113);return;}_0x24cfb0[_0x122084(0xc9)]((_0xb6d0eb,_0x500990)=>{const _0x4ea253=_0x122084,_0x50ab76=new Date(_0xb6d0eb),_0x50c18e=_0x44c009[_0x50ab76[_0x4ea253(0x102)]()],_0x1e9b57=_0x50ab76[_0x4ea253(0x111)](),_0x4467d3=document[_0x4ea253(0xbe)]('div');_0x4467d3[_0x4ea253(0xe7)]=_0x4ea253(0x15f);if(_0x500990===0x0)_0x4467d3[_0x4ea253(0xfe)][_0x4ea253(0xcc)](_0x4ea253(0x155));_0x4467d3[_0x4ea253(0x8b)]=_0x4ea253(0x115)+_0x50c18e+_0x4ea253(0xa7)+_0x1e9b57+_0x4ea253(0x98),_0x4467d3['onclick']=()=>selectRsDate(_0xb6d0eb,_0x4467d3),_0x3c4107[_0x4ea253(0xdd)](_0x4467d3);}),selectRsDate(_0x24cfb0[0x0],_0x3c4107[_0x122084(0x159)]);}function selectRsDate(_0x125fda,_0x4bcf06){const _0x2b8a37=a3_0x6f82ea;selectedRsDate=_0x125fda,document[_0x2b8a37(0x144)](_0x2b8a37(0xeb))[_0x2b8a37(0xc9)](_0x17f476=>_0x17f476[_0x2b8a37(0xfe)]['remove'](_0x2b8a37(0x155)));if(_0x4bcf06)_0x4bcf06[_0x2b8a37(0xfe)][_0x2b8a37(0xcc)](_0x2b8a37(0x155));const _0x5b2d58=document[_0x2b8a37(0xcb)]('rsSlotsGrid');_0x5b2d58[_0x2b8a37(0x8b)]='';const _0x24bd40=availableSlotsCache[_0x125fda]||[];if(_0x24bd40[_0x2b8a37(0x7e)]===0x0){_0x5b2d58[_0x2b8a37(0x8b)]=_0x2b8a37(0x14f);return;}_0x24bd40[_0x2b8a37(0xc9)](_0x5b8db5=>{const _0x17aec0=_0x2b8a37,_0x1c3765=document[_0x17aec0(0xbe)](_0x17aec0(0x83));_0x1c3765[_0x17aec0(0xe7)]=_0x17aec0(0x150),_0x1c3765[_0x17aec0(0xf2)]=_0x5b8db5,_0x1c3765['onclick']=()=>confirmReschedule(_0x5b8db5),_0x5b2d58[_0x17aec0(0xdd)](_0x1c3765);});}async function confirmReschedule(_0x3361a7){const _0x461158=a3_0x6f82ea,_0x44ab6c=new Date(selectedRsDate),_0x2c507e=_0x44ab6c['toLocaleDateString']('ru-RU',{'day':_0x461158(0x122),'month':_0x461158(0xb7)}),_0x1440f4=await showCustomConfirm(_0x461158(0xb6),_0x461158(0x85)+_0x2c507e+'\x20–≤\x20'+_0x3361a7+'?',![]);if(!_0x1440f4)return;closeAllSheets(),showToast(_0x461158(0xab)),lastUserActionTime=Date[_0x461158(0x105)]();const _0x5c4069=currentSession[_0x461158(0x120)],_0x3db711=currentSession['id'],[_0x8a6f27,_0x548cb0]=currentSession['start'][_0x461158(0x165)](':')['map'](Number),[_0x5376dc,_0x3e197a]=currentSession['end'][_0x461158(0x165)](':')[_0x461158(0xf4)](Number),_0x2886a7=_0x5376dc*0x3c+_0x3e197a-(_0x8a6f27*0x3c+_0x548cb0),[_0x264e38,_0xa24706]=_0x3361a7[_0x461158(0x165)](':')[_0x461158(0xf4)](Number),_0x49da96=_0x264e38*0x3c+_0xa24706+_0x2886a7,_0x2ea200=Math['floor'](_0x49da96/0x3c),_0x23d1fc=_0x49da96%0x3c,_0x512edf=String(_0x2ea200)[_0x461158(0x75)](0x2,'0')+':'+String(_0x23d1fc)[_0x461158(0x75)](0x2,'0'),_0xc7ecde=sessions[_0x461158(0xf5)](_0x320d85=>_0x320d85['id']===_0x3db711);_0xc7ecde!==-0x1&&(sessions[_0xc7ecde][_0x461158(0x120)]=selectedRsDate,sessions[_0xc7ecde][_0x461158(0xb8)]=_0x3361a7,sessions[_0xc7ecde][_0x461158(0xa2)]=_0x512edf,reRenderBlocks());try{const _0x390c88=window[_0x461158(0x11e)]?.[_0x461158(0xae)],_0x302924=await fetch(API_URL,{'method':_0x461158(0xd2),'body':JSON[_0x461158(0x154)]({'action':'reschedule','init_data':_0x390c88?.[_0x461158(0x95)]||'','oldSessionId':_0x3db711,'oldDate':_0x5c4069,'newDate':selectedRsDate,'newTime':_0x3361a7,'coachId':currentSession[_0x461158(0xe2)]})}),_0x414661=await _0x302924[_0x461158(0x7d)]();!_0x414661['ok']?(showToast(_0x461158(0x152)),DataManager[_0x461158(0x118)]()):(showToast(_0x461158(0x167)),DataManager['saveLocally']());}catch(_0x205881){showToast(_0x461158(0xec));}}document[a3_0x6f82ea(0x15b)]('DOMContentLoaded',init);