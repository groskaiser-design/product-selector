const a3_0x331edf=a3_0x41d0;(function(_0x163691,_0x9b5155){const _0x3fa7b3=a3_0x41d0,_0x3f666a=_0x163691();while(!![]){try{const _0x10d1ca=parseInt(_0x3fa7b3(0x162))/0x1+-parseInt(_0x3fa7b3(0x170))/0x2+-parseInt(_0x3fa7b3(0x186))/0x3*(-parseInt(_0x3fa7b3(0xf5))/0x4)+parseInt(_0x3fa7b3(0x18e))/0x5+-parseInt(_0x3fa7b3(0x19e))/0x6+-parseInt(_0x3fa7b3(0x117))/0x7*(-parseInt(_0x3fa7b3(0xf0))/0x8)+-parseInt(_0x3fa7b3(0xaf))/0x9;if(_0x10d1ca===_0x9b5155)break;else _0x3f666a['push'](_0x3f666a['shift']());}catch(_0x2e7ab9){_0x3f666a['push'](_0x3f666a['shift']());}}}(a3_0x2813,0x2223e));const APP_VERSION='v9.5-CLIENT-ANALYTICS',API_URL=a3_0x331edf(0x110),GRID_H=0x3c,KEY_SESSIONS=a3_0x331edf(0x161),KEY_SETTINGS=a3_0x331edf(0x16a),KEY_CLIENTS=a3_0x331edf(0xc1);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x1279a1=a3_0x331edf,_0x347458=(function(){let _0x5df5d2=!![];return function(_0x58ebc5,_0x573137){const _0x29134f=_0x5df5d2?function(){const _0x3e4f80=a3_0x41d0;if(_0x573137){const _0x38faaf=_0x573137[_0x3e4f80(0x168)](_0x58ebc5,arguments);return _0x573137=null,_0x38faaf;}}:function(){};return _0x5df5d2=![],_0x29134f;};}()),_0x13a6e8=_0x347458(this,function(){const _0x5adc49=a3_0x41d0;return _0x13a6e8['toString']()[_0x5adc49(0xbb)](_0x5adc49(0xca))[_0x5adc49(0x120)]()['constructor'](_0x13a6e8)[_0x5adc49(0xbb)](_0x5adc49(0xca));});_0x13a6e8();try{const _0x1f7ac0=window['Telegram']?.[_0x1279a1(0x18a)];if(!_0x1f7ac0)return;_0x1f7ac0[_0x1279a1(0x11d)](),_0x1f7ac0['expand']();try{_0x1f7ac0[_0x1279a1(0xfd)](_0x1279a1(0xcb)),_0x1f7ac0[_0x1279a1(0x10b)]&&_0x1f7ac0['setBackgroundColor'](_0x1279a1(0xcb));}catch(_0x451c8b){console[_0x1279a1(0xec)](_0x1279a1(0x169),_0x451c8b);}try{_0x1f7ac0[_0x1279a1(0x106)]&&(_0x1f7ac0['BackButton'][_0x1279a1(0x155)](),_0x1f7ac0[_0x1279a1(0x106)][_0x1279a1(0xc0)](),_0x1f7ac0[_0x1279a1(0x106)][_0x1279a1(0x19f)](function(){const _0x58a135=_0x1279a1;window[_0x58a135(0x11b)][_0x58a135(0xd9)]=_0x58a135(0xf8);}));}catch(_0x43ed82){console['log'](_0x1279a1(0x173),_0x43ed82);}try{if(_0x1f7ac0[_0x1279a1(0xb4)])_0x1f7ac0[_0x1279a1(0xb4)]();}catch(_0x211dd8){}}catch(_0x1a9c91){console[_0x1279a1(0xe8)](_0x1279a1(0x19d),_0x1a9c91);}}());function isAdmin(){const _0x189087=a3_0x331edf;try{const _0x3e0560=Number(window[_0x189087(0xbd)]?.[_0x189087(0x18a)]?.['initDataUnsafe']?.[_0x189087(0x104)]?.['id']);return _0x3e0560===0xbaf7174;}catch(_0x4897ed){return![];}}const DataManager={'saveLocally'(){const _0x204504=a3_0x331edf;try{localStorage[_0x204504(0x183)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x204504(0x183)](KEY_CLIENTS,JSON[_0x204504(0xe5)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x204504(0xe5)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x28e088){}},'loadLocal'(){const _0x589ae8=a3_0x331edf;try{const _0x3d7568=localStorage[_0x589ae8(0x180)](KEY_SESSIONS);if(_0x3d7568)sessions=JSON[_0x589ae8(0xbe)](_0x3d7568);const _0x575178=localStorage[_0x589ae8(0x180)](KEY_CLIENTS);if(_0x575178)clients=JSON['parse'](_0x575178);const _0x2283a8=localStorage[_0x589ae8(0x180)](KEY_SETTINGS);if(_0x2283a8){const _0x2f2b39=JSON[_0x589ae8(0xbe)](_0x2283a8);if(_0x2f2b39[_0x589ae8(0x101)])availabilityPattern=_0x2f2b39[_0x589ae8(0x101)];if(_0x2f2b39[_0x589ae8(0xd5)])specialRanges=_0x2f2b39[_0x589ae8(0xd5)];if(_0x2f2b39[_0x589ae8(0x12a)])dateExceptions=_0x2f2b39[_0x589ae8(0x12a)];}}catch(_0xb49646){}},async 'syncLoad'(){const _0x25dccd=a3_0x331edf,_0x3b9b0f=new Date(),_0x33dcbf=_0x3b9b0f[_0x25dccd(0x175)]()+'-'+String(_0x3b9b0f[_0x25dccd(0xd6)]()+0x1)['padStart'](0x2,'0'),_0x2063cb=new Date(_0x3b9b0f);_0x2063cb[_0x25dccd(0xd2)](_0x3b9b0f[_0x25dccd(0xd6)]()+0x1);const _0xd027cb=_0x2063cb[_0x25dccd(0x175)]()+'-'+String(_0x2063cb['getMonth']()+0x1)['padStart'](0x2,'0'),_0x3a2c9d=Date[_0x25dccd(0xed)]();try{const _0x48646a=window[_0x25dccd(0xbd)]?.[_0x25dccd(0x18a)],_0x1a995b=_0x48646a?.[_0x25dccd(0x16d)]||'',[_0x57f2d6,_0x41d1eb]=await Promise['all']([fetch(API_URL,{'method':_0x25dccd(0x197),'body':JSON[_0x25dccd(0xe5)]({'action':_0x25dccd(0x146),'init_data':_0x1a995b,'month_str':_0x33dcbf})})[_0x25dccd(0x190)](_0x10ea93=>_0x10ea93['json']()),fetch(API_URL,{'method':_0x25dccd(0x197),'body':JSON[_0x25dccd(0xe5)]({'action':'client_load','init_data':_0x1a995b,'month_str':_0xd027cb})})[_0x25dccd(0x190)](_0x394de1=>_0x394de1[_0x25dccd(0x174)]())]);if(lastUserActionTime>_0x3a2c9d){console[_0x25dccd(0xec)](_0x25dccd(0x13d));return;}if(_0x57f2d6['ok'])this[_0x25dccd(0x157)](_0x57f2d6[_0x25dccd(0x193)],_0x33dcbf);if(_0x41d1eb['ok'])this[_0x25dccd(0x157)](_0x41d1eb[_0x25dccd(0x193)],_0xd027cb);this[_0x25dccd(0x19a)]();}catch(_0xb029d9){}},'applyData'(_0x3ab3e0,_0x171a30){const _0x1db609=a3_0x331edf;if(!_0x3ab3e0)return;if(_0x3ab3e0[_0x1db609(0x185)]){if(_0x3ab3e0[_0x1db609(0x185)][_0x1db609(0x101)])availabilityPattern=_0x3ab3e0[_0x1db609(0x185)][_0x1db609(0x101)];if(_0x3ab3e0[_0x1db609(0x185)][_0x1db609(0xd5)])specialRanges=_0x3ab3e0['settings']['ranges'];if(_0x3ab3e0['settings'][_0x1db609(0x12a)])dateExceptions=_0x3ab3e0[_0x1db609(0x185)]['exceptions'];}if(_0x3ab3e0[_0x1db609(0x14a)]&&Array[_0x1db609(0xe2)](_0x3ab3e0[_0x1db609(0x14a)]))clients=_0x3ab3e0['clients'];_0x3ab3e0[_0x1db609(0x17c)]&&(coachProfiles={...coachProfiles,..._0x3ab3e0[_0x1db609(0x17c)]}),_0x3ab3e0[_0x1db609(0xf3)]&&(sessions=sessions[_0x1db609(0x14e)](_0x3903a8=>!_0x3903a8[_0x1db609(0x184)][_0x1db609(0x17e)](_0x171a30)),Object[_0x1db609(0x176)](_0x3ab3e0[_0x1db609(0xf3)])['forEach'](_0x5f2b18=>{const _0x28b5c7=_0x1db609,_0x2086e6=_0x3ab3e0[_0x28b5c7(0xf3)][_0x5f2b18];_0x2086e6[_0x28b5c7(0x13c)](_0x2aa5bb=>{const _0x5c53aa=_0x28b5c7;sessions['push']({'id':_0x2aa5bb['i'],'clientId':_0x2aa5bb['c'],'coachId':_0x2aa5bb[_0x5c53aa(0xe7)],'dateStr':_0x171a30+'-'+_0x5f2b18[_0x5c53aa(0x13b)](0x2,'0'),'start':_0x2aa5bb['s'],'end':_0x2aa5bb['e'],'note':_0x2aa5bb['n']||'','status':_0x2aa5bb['st']||_0x5c53aa(0x191),'seriesId':_0x2aa5bb[_0x5c53aa(0xfa)]});});})),reRenderBlocks();}};function init(){const _0x5cee58=a3_0x331edf;DataManager[_0x5cee58(0xd1)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x5cee58(0xf2)](_0x5cee58(0x103))['addEventListener'](_0x5cee58(0x12c),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x47036b=a3_0x331edf,_0x227219=document[_0x47036b(0xf2)](_0x47036b(0x112)),_0x5a28ed=document['getElementById'](_0x47036b(0xd0));_0x227219[_0x47036b(0x172)]='',_0x227219[_0x47036b(0xe0)](_0x5a28ed);for(let _0x388d9f=0x0;_0x388d9f<0x18;_0x388d9f++){const _0x224a15=document[_0x47036b(0xcc)]('div');_0x224a15[_0x47036b(0xdc)]=_0x47036b(0xee);if(_0x388d9f>0x0)_0x224a15[_0x47036b(0x172)]=_0x47036b(0xc7)+String(_0x388d9f)[_0x47036b(0x13b)](0x2,'0')+_0x47036b(0xa6);_0x227219[_0x47036b(0xe0)](_0x224a15);}}function renderDayRange(_0xd82a42,_0x589783){const _0x2bc1dd=a3_0x331edf,_0x344b62=document['getElementById']('daysHeaderTrack'),_0x55748e=document[_0x2bc1dd(0xf2)]('gridColumns'),_0x7f1112=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x433acb=new Date();_0x433acb[_0x2bc1dd(0x165)](0x0,0x0,0x0,0x0);const _0x34e9eb=getLocalDateStr(new Date());for(let _0x1afbad=_0xd82a42;_0x1afbad<=_0x589783;_0x1afbad++){const _0x5124f2=new Date(_0x433acb);_0x5124f2[_0x2bc1dd(0x138)](_0x5124f2[_0x2bc1dd(0xbf)]()+_0x1afbad);const _0x15a324=getLocalDateStr(_0x5124f2);let _0x5c6d2a=_0x5124f2[_0x2bc1dd(0x166)]()-0x1;if(_0x5c6d2a===-0x1)_0x5c6d2a=0x6;const _0x3a95ad=_0x15a324===_0x34e9eb,_0x29ba67=document[_0x2bc1dd(0xcc)](_0x2bc1dd(0x131));_0x29ba67['className']=_0x2bc1dd(0xb9)+(_0x3a95ad?_0x2bc1dd(0xc4):''),_0x29ba67['setAttribute'](_0x2bc1dd(0x154),_0x15a324),_0x29ba67[_0x2bc1dd(0x172)]=_0x2bc1dd(0x16e)+_0x7f1112[_0x5c6d2a]+'</div><div\x20class=\x22dch-num\x22>'+_0x5124f2[_0x2bc1dd(0xbf)]()+_0x2bc1dd(0xb5),_0x344b62[_0x2bc1dd(0xe0)](_0x29ba67);const _0x5b6903=document[_0x2bc1dd(0xcc)]('div');_0x5b6903[_0x2bc1dd(0xdc)]=_0x2bc1dd(0x126)+(_0x3a95ad?_0x2bc1dd(0xc4):''),_0x5b6903[_0x2bc1dd(0x10e)](_0x2bc1dd(0x154),_0x15a324),_0x5b6903['setAttribute'](_0x2bc1dd(0x156),_0x5c6d2a),_0x55748e[_0x2bc1dd(0xe0)](_0x5b6903);}}function reRenderBlocks(){const _0x87c5=a3_0x331edf;document[_0x87c5(0x16c)]('.day-column')[_0x87c5(0x13c)](_0xb6f4a7=>{const _0x27d3d2=_0x87c5;_0xb6f4a7[_0x27d3d2(0x16c)](_0x27d3d2(0xce))[_0x27d3d2(0x13c)](_0x34f51a=>_0x34f51a[_0x27d3d2(0x198)]());const _0x3a4c14=_0xb6f4a7[_0x27d3d2(0x14d)](_0x27d3d2(0x154)),_0x38ba53=parseInt(_0xb6f4a7['getAttribute'](_0x27d3d2(0x156))),_0x57e6e9=Math['round'](_0xb6f4a7[_0x27d3d2(0xbc)]);(availabilityPattern[_0x38ba53]||[])[_0x27d3d2(0x13c)](_0x2bcf75=>{const _0x39504f=_0x27d3d2,_0x3b4de1=document[_0x39504f(0xcc)]('div');_0x3b4de1[_0x39504f(0xdc)]=_0x39504f(0xe3),_0x3b4de1[_0x39504f(0x134)][_0x39504f(0xaa)]=_0x2bcf75*GRID_H+'px',_0x3b4de1[_0x39504f(0x134)][_0x39504f(0x148)]='-'+_0x57e6e9+'px\x20-'+_0x2bcf75*GRID_H+'px',_0xb6f4a7[_0x39504f(0xe0)](_0x3b4de1);});if(specialRanges[_0x27d3d2(0x15e)]>0x0){const _0x399365=new Date(_0x3a4c14+_0x27d3d2(0xd8))[_0x27d3d2(0x10c)](),_0xdce558=new Date(_0x3a4c14+_0x27d3d2(0x11e))[_0x27d3d2(0x10c)]();specialRanges[_0x27d3d2(0x13c)](_0x551c10=>{const _0x1fa0bc=_0x27d3d2,_0x17b4ef=new Date(_0x551c10['start'])[_0x1fa0bc(0x10c)](),_0x2e0d22=new Date(_0x551c10[_0x1fa0bc(0xc3)])[_0x1fa0bc(0x10c)](),_0x29768e=Math[_0x1fa0bc(0xad)](_0x399365,_0x17b4ef),_0xcffeb5=Math[_0x1fa0bc(0x137)](_0xdce558,_0x2e0d22);if(_0x29768e<_0xcffeb5){const _0x2b0934=(_0x29768e-_0x399365)/0x36ee80*GRID_H,_0x514d69=(_0xcffeb5-_0x29768e)/0x36ee80*GRID_H,_0x15a1f1=document[_0x1fa0bc(0xcc)](_0x1fa0bc(0x131));_0x514d69>=23.5*GRID_H?(_0x15a1f1[_0x1fa0bc(0xdc)]=_0x1fa0bc(0x192),_0x15a1f1[_0x1fa0bc(0x134)][_0x1fa0bc(0x148)]='-'+_0x57e6e9+_0x1fa0bc(0xe4)):(_0x15a1f1['className']=_0x1fa0bc(0x116),_0x15a1f1[_0x1fa0bc(0x134)]['top']=_0x2b0934+'px',_0x15a1f1[_0x1fa0bc(0x134)]['height']=_0x514d69+'px',_0x15a1f1[_0x1fa0bc(0x134)][_0x1fa0bc(0x148)]='-'+_0x57e6e9+'px\x20-'+_0x2b0934+'px'),_0xb6f4a7[_0x1fa0bc(0xe0)](_0x15a1f1);}});}renderEventsForColumn(_0xb6f4a7,_0x3a4c14);});}function renderEventsForColumn(_0x1ea80a,_0x4bd32f){const _0x20b9b0=a3_0x331edf,_0x53c281=sessions[_0x20b9b0(0x14e)](_0x4e7c62=>_0x4e7c62['dateStr']===_0x4bd32f),_0x625461=_0x53c281['map'](_0x452150=>{const _0xf44307=_0x20b9b0,[_0x1fa1c4,_0x5a3e1a]=_0x452150[_0xf44307(0xc8)][_0xf44307(0x140)](':')[_0xf44307(0x142)](Number),[_0x417882,_0x436959]=_0x452150[_0xf44307(0xc3)][_0xf44307(0x140)](':')[_0xf44307(0x142)](Number);return{'data':_0x452150,'start':_0x1fa1c4*0x3c+_0x5a3e1a,'end':_0x417882*0x3c+_0x436959,'colIndex':0x0};});_0x625461[_0x20b9b0(0x19c)]((_0x1bf63a,_0xc4a563)=>_0x1bf63a[_0x20b9b0(0xc8)]-_0xc4a563[_0x20b9b0(0xc8)]||_0xc4a563[_0x20b9b0(0xc3)]-_0xc4a563['start']-(_0x1bf63a[_0x20b9b0(0xc3)]-_0x1bf63a[_0x20b9b0(0xc8)]));const _0x2a6017=[];_0x625461[_0x20b9b0(0x13c)](_0x4f6004=>{const _0x115a9e=_0x20b9b0;let _0x431a7e=![];for(let _0x41732a=0x0;_0x41732a<_0x2a6017[_0x115a9e(0x15e)];_0x41732a++){const _0x12a28c=_0x2a6017[_0x41732a];if(_0x4f6004[_0x115a9e(0xc8)]>=_0x12a28c[_0x12a28c['length']-0x1]['end']){_0x12a28c[_0x115a9e(0x133)](_0x4f6004),_0x4f6004[_0x115a9e(0x16f)]=_0x41732a,_0x431a7e=!![];break;}}!_0x431a7e&&(_0x2a6017[_0x115a9e(0x133)]([_0x4f6004]),_0x4f6004['colIndex']=_0x2a6017[_0x115a9e(0x15e)]-0x1);}),_0x625461[_0x20b9b0(0x13c)](_0xe57684=>{const _0x557998=_0x20b9b0;let _0x1e2c36=0x0;_0x625461['forEach'](_0x4e3e4d=>{const _0x26014a=a3_0x41d0;if(Math[_0x26014a(0xad)](_0xe57684[_0x26014a(0xc8)],_0x4e3e4d[_0x26014a(0xc8)])<Math[_0x26014a(0x137)](_0xe57684[_0x26014a(0xc3)],_0x4e3e4d[_0x26014a(0xc3)])&&_0x4e3e4d['colIndex']>_0x1e2c36)_0x1e2c36=_0x4e3e4d['colIndex'];});const _0x13cb43=_0x1e2c36+0x1,_0x3aca93=0x64/_0x13cb43,_0x25ae1b=_0xe57684[_0x557998(0x16f)]*_0x3aca93,_0xe9260=document[_0x557998(0xcc)](_0x557998(0x131)),_0x10cdde=_0xe57684[_0x557998(0x193)];let _0x403913='#0a84ff';if(clients&&clients[_0x557998(0x15e)]>0x0){const _0x1544d1=clients[_0x557998(0x121)](_0x306972=>String(_0x306972['id'])===String(_0x10cdde['clientId']));if(_0x1544d1&&_0x1544d1['color'])_0x403913=_0x1544d1['color'];}const _0xec08e3=_0x10cdde[_0x557998(0xa9)]==='completed',_0x26a9c2=_0xec08e3?0x1:0.45;_0xe9260[_0x557998(0xdc)]='event-card'+(_0xec08e3?_0x557998(0x171):''),_0xe9260[_0x557998(0x134)][_0x557998(0xb2)]=hexToRgba(_0x403913,_0x26a9c2),_0xe9260[_0x557998(0x134)][_0x557998(0x115)]=_0x403913;const _0x3afa23=_0xe57684[_0x557998(0xc8)]/0x3c*GRID_H,_0x2043dd=(_0xe57684[_0x557998(0xc3)]-_0xe57684[_0x557998(0xc8)])/0x3c*GRID_H;_0xe9260[_0x557998(0x134)][_0x557998(0xaa)]=_0x3afa23+'px',_0xe9260[_0x557998(0x134)][_0x557998(0xfc)]=Math['max'](_0x2043dd,0x14)+'px',_0xe9260[_0x557998(0x134)][_0x557998(0x122)]=_0x557998(0x147)+_0x3aca93+'%\x20-\x204px)',_0xe9260[_0x557998(0x134)][_0x557998(0x14c)]=_0x557998(0x147)+_0x25ae1b+_0x557998(0xb6),_0xe9260[_0x557998(0x134)][_0x557998(0xea)]=0xa+_0xe57684[_0x557998(0x16f)];if(_0x3aca93<0x55)_0xe9260[_0x557998(0x107)][_0x557998(0x17a)](_0x557998(0x181));let _0x159c3e='';if(_0x10cdde[_0x557998(0x132)])_0x159c3e+=_0x557998(0xf6);if(_0xec08e3)_0x159c3e+=_0x557998(0x18f);_0xe9260[_0x557998(0x172)]=_0x557998(0x111)+_0x10cdde[_0x557998(0xc8)]+_0x557998(0x13f)+_0x10cdde['end']+_0x557998(0x153)+_0x159c3e+_0x557998(0xe1),_0xe9260[_0x557998(0x151)]=_0x4b2498=>{_0x4b2498['stopPropagation'](),openDetails(_0x10cdde);},_0x1ea80a[_0x557998(0xe0)](_0xe9260);});}function openAnalytics(){const _0x5135fa=a3_0x331edf,_0x2b86e0=document['querySelector']('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x5135fa(0xd4),_0x2b86e0),openSheet(_0x5135fa(0x17d));}function setAnalyticsPeriod(_0x24c8c6,_0x339701){const _0x495266=a3_0x331edf;currentAnPeriod=_0x24c8c6,document[_0x495266(0x16c)](_0x495266(0x17b))['forEach'](_0x434829=>_0x434829[_0x495266(0x107)][_0x495266(0x198)](_0x495266(0xe9)));if(_0x339701)_0x339701[_0x495266(0x107)][_0x495266(0x17a)](_0x495266(0xe9));const _0x2d041e=document[_0x495266(0xf2)]('anCustomDates');_0x2d041e[_0x495266(0x134)]['display']=_0x24c8c6==='custom'?_0x495266(0x145):_0x495266(0x130);const _0x581ce5=new Date();let _0x8683fc=new Date(),_0xa89690=new Date();if(_0x24c8c6===_0x495266(0xd4))_0x8683fc=getStartOfWeek(_0x581ce5),_0xa89690=new Date(_0x8683fc),_0xa89690['setDate'](_0xa89690[_0x495266(0xbf)]()+0x6);else{if(_0x24c8c6===_0x495266(0x188))_0x8683fc=new Date(_0x581ce5[_0x495266(0x175)](),_0x581ce5[_0x495266(0xd6)](),0x1),_0xa89690=new Date(_0x581ce5['getFullYear'](),_0x581ce5[_0x495266(0xd6)]()+0x1,0x0);else{!document[_0x495266(0xf2)](_0x495266(0xc5))[_0x495266(0x125)]&&(document[_0x495266(0xf2)](_0x495266(0xc5))[_0x495266(0x125)]=getLocalDateStr(_0x581ce5),document[_0x495266(0xf2)](_0x495266(0x19b))[_0x495266(0x125)]=getLocalDateStr(_0x581ce5));refreshAnalytics();return;}}document['getElementById'](_0x495266(0xc5))['value']=getLocalDateStr(_0x8683fc),document[_0x495266(0xf2)](_0x495266(0x19b))[_0x495266(0x125)]=getLocalDateStr(_0xa89690),refreshAnalytics();}function refreshAnalytics(){const _0x14fd27=a3_0x331edf,_0x5adae0=document[_0x14fd27(0xf2)](_0x14fd27(0xc5))[_0x14fd27(0x125)],_0x503711=document['getElementById'](_0x14fd27(0x19b))[_0x14fd27(0x125)];if(!_0x5adae0||!_0x503711)return;const _0x2d973a=sessions[_0x14fd27(0x14e)](_0x1afeb0=>_0x1afeb0[_0x14fd27(0x184)]>=_0x5adae0&&_0x1afeb0['dateStr']<=_0x503711&&_0x1afeb0['status']!==_0x14fd27(0xa7)),_0xdbe293=_0x2d973a[_0x14fd27(0x15e)],_0x5ee7fb=_0x2d973a[_0x14fd27(0x14e)](_0xfb0935=>_0xfb0935[_0x14fd27(0xa9)]===_0x14fd27(0x14f))[_0x14fd27(0x15e)],_0x19cf88=_0xdbe293>0x0?Math[_0x14fd27(0x1a0)](_0x5ee7fb/_0xdbe293*0x64):0x0;document[_0x14fd27(0xf2)](_0x14fd27(0x11f))['textContent']=_0x19cf88+'%',document[_0x14fd27(0xf2)]('anTotalStats')['textContent']=_0x5ee7fb+'\x20–∏–∑\x20'+_0xdbe293+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x3d6cbf=document[_0x14fd27(0xf2)](_0x14fd27(0x18b)),_0x3ab2d1=0x2*Math['PI']*0x23,_0x4808d9=_0x3ab2d1-_0x19cf88/0x64*_0x3ab2d1;_0x3d6cbf[_0x14fd27(0x134)]['strokeDashoffset']=_0x4808d9;const _0x2be3bf={};_0x2d973a[_0x14fd27(0x13c)](_0x132044=>{const _0x3fcf80=_0x14fd27,_0x2d92f9=_0x132044[_0x3fcf80(0x124)]||'Unknown';if(!_0x2be3bf[_0x2d92f9]){const _0x31d283='#'+_0x2d92f9[_0x3fcf80(0x120)]()[_0x3fcf80(0xba)](0x0,0x6);_0x2be3bf[_0x2d92f9]={'total':0x0,'done':0x0,'color':_0x31d283};}_0x2be3bf[_0x2d92f9][_0x3fcf80(0xae)]++;if(_0x132044['status']===_0x3fcf80(0x14f))_0x2be3bf[_0x2d92f9][_0x3fcf80(0xd7)]++;});const _0x41ae79=document['getElementById']('analyticsList');_0x41ae79[_0x14fd27(0x172)]='';const _0x59d199=Object[_0x14fd27(0x108)](_0x2be3bf)[_0x14fd27(0x19c)]((_0x2a9795,_0x53bb8e)=>_0x53bb8e[0x1]['total']-_0x2a9795[0x1][_0x14fd27(0xae)]);if(_0x59d199[_0x14fd27(0x15e)]===0x0){_0x41ae79[_0x14fd27(0x172)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x59d199[_0x14fd27(0x13c)](([_0x51cd5f,_0x570725])=>{const _0x2dbb3f=_0x14fd27,_0x23773a=Math['round'](_0x570725[_0x2dbb3f(0xd7)]/_0x570725[_0x2dbb3f(0xae)]*0x64),_0x586475=document['createElement']('div');_0x586475[_0x2dbb3f(0xdc)]=_0x2dbb3f(0x194),_0x586475[_0x2dbb3f(0x134)][_0x2dbb3f(0x115)]=_0x570725[_0x2dbb3f(0x114)],_0x586475['innerHTML']=_0x2dbb3f(0x160)+_0x51cd5f[_0x2dbb3f(0xba)](0x0,0x5)+_0x2dbb3f(0x199)+_0x570725[_0x2dbb3f(0xd7)]+_0x2dbb3f(0xc2)+_0x570725['total']+_0x2dbb3f(0x152)+_0x23773a+_0x2dbb3f(0x10a),_0x41ae79[_0x2dbb3f(0xe0)](_0x586475);});}function openDetails(_0x597d30){const _0xd078ee=a3_0x331edf;currentSession=_0x597d30;const _0x27cbe6=new Date(_0x597d30[_0xd078ee(0x184)]),_0x14f510=_0x27cbe6[_0xd078ee(0x159)]('ru-RU',{'weekday':_0xd078ee(0x13a),'day':'numeric','month':_0xd078ee(0x13a)});document[_0xd078ee(0xf2)](_0xd078ee(0xdf))[_0xd078ee(0x17f)]=_0x14f510['charAt'](0x0)[_0xd078ee(0x128)]()+_0x14f510[_0xd078ee(0x141)](0x1),document['getElementById'](_0xd078ee(0x139))[_0xd078ee(0x17f)]=_0x597d30[_0xd078ee(0xc8)]+_0xd078ee(0x13f)+_0x597d30['end'],document[_0xd078ee(0xf2)](_0xd078ee(0xc6))[_0xd078ee(0x17f)]=_0x597d30[_0xd078ee(0x177)]||_0xd078ee(0x18c);const _0x147094=document[_0xd078ee(0xf2)](_0xd078ee(0x105)),_0x1d2227=document[_0xd078ee(0xf2)](_0xd078ee(0x195)),_0x2d5cca=_0x1d2227[_0xd078ee(0xf7)]('.btn-cancel'),_0xbb3bb2=_0x1d2227[_0xd078ee(0xf7)](_0xd078ee(0x12d)),_0x252f5d=document['getElementById']('cancelHint');if(_0x597d30[_0xd078ee(0xa9)]===_0xd078ee(0x14f))_0x147094[_0xd078ee(0x17f)]=_0xd078ee(0x143),_0x147094[_0xd078ee(0x134)]['color']=_0xd078ee(0xff),_0x1d2227[_0xd078ee(0x134)][_0xd078ee(0xb7)]=_0xd078ee(0x130);else{_0x147094[_0xd078ee(0x17f)]=_0xd078ee(0xab),_0x147094['style'][_0xd078ee(0x114)]=_0xd078ee(0xac),_0x1d2227[_0xd078ee(0x134)][_0xd078ee(0xb7)]=_0xd078ee(0xf1);const _0x45a084=new Date(_0x597d30['dateStr']+'T'+_0x597d30[_0xd078ee(0xc8)]),_0xcf50f8=new Date(),_0x51e61c=(_0x45a084-_0xcf50f8)/(0x3e8*0x3c*0x3c),_0x189638=coachProfiles[_0x597d30[_0xd078ee(0x124)]]&&coachProfiles[_0x597d30[_0xd078ee(0x124)]][_0xd078ee(0xd3)]?parseInt(coachProfiles[_0x597d30[_0xd078ee(0x124)]][_0xd078ee(0xd3)]):0x18;if(_0x189638===0x0||_0x51e61c>=_0x189638)_0x2d5cca[_0xd078ee(0x134)][_0xd078ee(0xb7)]='block',_0xbb3bb2['style'][_0xd078ee(0xb7)]=_0xd078ee(0xf1),_0x252f5d[_0xd078ee(0x134)]['display']='none';else{_0x2d5cca['style'][_0xd078ee(0xb7)]='none',_0xbb3bb2[_0xd078ee(0x134)][_0xd078ee(0xb7)]=_0xd078ee(0x130),_0x252f5d[_0xd078ee(0x134)]['display']=_0xd078ee(0xf1);let _0x23eda6=_0x189638===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0xd078ee(0x15f)+_0x189638+_0xd078ee(0xb3);_0x252f5d['textContent']=_0xd078ee(0xdd)+_0x23eda6+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document['getElementById'](_0xd078ee(0x100))[_0xd078ee(0x107)][_0xd078ee(0x17a)](_0xd078ee(0xe9)),document['getElementById'](_0xd078ee(0xfb))[_0xd078ee(0x107)]['add'](_0xd078ee(0xc9));}function closeAllSheets(){const _0xc93e15=a3_0x331edf;document[_0xc93e15(0xf2)](_0xc93e15(0x100))[_0xc93e15(0x107)][_0xc93e15(0x198)](_0xc93e15(0xe9)),document[_0xc93e15(0x16c)](_0xc93e15(0xcf))[_0xc93e15(0x13c)](_0x1970b3=>_0x1970b3[_0xc93e15(0x107)][_0xc93e15(0x198)](_0xc93e15(0xc9)));}function openSheet(_0xd41baa){const _0x4d9c9b=a3_0x331edf;document[_0x4d9c9b(0xf2)]('overlay')[_0x4d9c9b(0x107)][_0x4d9c9b(0x17a)](_0x4d9c9b(0xe9)),document[_0x4d9c9b(0xf2)](_0xd41baa)['classList'][_0x4d9c9b(0x17a)](_0x4d9c9b(0xc9));}function getLocalDateStr(_0x48e643){const _0x33078c=a3_0x331edf,_0x39ef0c=_0x48e643[_0x33078c(0x175)](),_0x124bfd=String(_0x48e643[_0x33078c(0xd6)]()+0x1)[_0x33078c(0x13b)](0x2,'0'),_0x55162e=String(_0x48e643[_0x33078c(0xbf)]())[_0x33078c(0x13b)](0x2,'0');return _0x39ef0c+'-'+_0x124bfd+'-'+_0x55162e;}function getStartOfWeek(_0x4dab35){const _0x2d7156=a3_0x331edf,_0x2fa76e=new Date(_0x4dab35),_0x3f03a6=_0x2fa76e['getDay'](),_0xba031f=_0x2fa76e[_0x2d7156(0xbf)]()-_0x3f03a6+(_0x3f03a6===0x0?-0x6:0x1);return _0x2fa76e[_0x2d7156(0x138)](_0xba031f),_0x2fa76e['setHours'](0x0,0x0,0x0,0x0),_0x2fa76e;}function scrollToToday(){const _0x38a947=getLocalDateStr(new Date());setTimeout(()=>{const _0x3f08f9=a3_0x41d0,_0xe072c1=document[_0x3f08f9(0xf7)](_0x3f08f9(0x18d)+_0x38a947+'\x22]');if(_0xe072c1){const _0x486471=document[_0x3f08f9(0xf2)]('matrixViewport'),_0x4391f4=_0xe072c1[_0x3f08f9(0xbc)]-_0x486471[_0x3f08f9(0x14b)]/0x2+_0xe072c1[_0x3f08f9(0x149)]/0x2;_0x486471[_0x3f08f9(0xeb)]({'left':_0x4391f4,'behavior':_0x3f08f9(0x150)}),_0x486471[_0x3f08f9(0x12e)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x370746=a3_0x331edf,_0x14517b=new Date(),_0xd0f94d=document[_0x370746(0xf2)](_0x370746(0xb0)),_0x153c88=document[_0x370746(0xf2)](_0x370746(0xd0)),_0x42b249=(_0x14517b[_0x370746(0xb8)]()*0x3c+_0x14517b['getMinutes']())/0x3c*GRID_H;_0xd0f94d[_0x370746(0x134)]['top']=_0x42b249+'px',_0xd0f94d[_0x370746(0x134)]['display']=_0x370746(0xf1),_0x153c88[_0x370746(0x134)][_0x370746(0xaa)]=_0x42b249+'px',_0x153c88['style']['display']=_0x370746(0xf1),_0x153c88[_0x370746(0x17f)]=String(_0x14517b[_0x370746(0xb8)]())[_0x370746(0x13b)](0x2,'0')+':'+String(_0x14517b['getMinutes']())[_0x370746(0x13b)](0x2,'0');}function onScroll(){const _0x20eb73=a3_0x331edf,_0xa85f43=document['getElementById']('matrixViewport'),_0x3d200b=document[_0x20eb73(0x16c)](_0x20eb73(0x113));for(let _0x6753dd of _0x3d200b)if(_0x6753dd[_0x20eb73(0xbc)]>=_0xa85f43['scrollLeft']){const _0x450bb2=new Date(_0x6753dd[_0x20eb73(0x14d)](_0x20eb73(0x154)));document['getElementById']('headerMonth')[_0x20eb73(0x17f)]=_0x450bb2[_0x20eb73(0xf4)]('ru',{'month':'long'})[_0x20eb73(0x128)]()+'\x20'+_0x450bb2[_0x20eb73(0x175)]();break;}}function showToast(_0x18d1f){const _0xc070ae=a3_0x331edf,_0x1ac9d6=document['getElementById']('toast');_0x1ac9d6[_0xc070ae(0x17f)]=_0x18d1f,_0x1ac9d6[_0xc070ae(0x107)][_0xc070ae(0x17a)](_0xc070ae(0x155)),setTimeout(()=>_0x1ac9d6[_0xc070ae(0x107)][_0xc070ae(0x198)](_0xc070ae(0x155)),0x7d0);}function handleInfiniteScroll(){const _0x47b0b7=a3_0x331edf,_0x1b1f25=document[_0x47b0b7(0xf2)](_0x47b0b7(0x103)),_0x1a7e62=_0x1b1f25[_0x47b0b7(0x196)],_0x1b22c2=_0x1b1f25['scrollWidth'],_0x1ab0c2=_0x1b1f25['clientWidth'];if(_0x1b22c2-(_0x1a7e62+_0x1ab0c2)<0x12c){const _0x3834b3=endOffset;endOffset+=0xe,renderDayRange(_0x3834b3+0x1,endOffset),reRenderBlocks();}if(_0x1a7e62<0x12c){const _0x492541=startOffset;startOffset-=0xe,prependDays(startOffset,_0x492541-0x1),_0x1b1f25[_0x47b0b7(0x196)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x464d92,_0x29ce65){const _0x5c9023=a3_0x331edf,_0x52a5f3=document['getElementById'](_0x5c9023(0xa8)),_0x43b851=document[_0x5c9023(0xf2)]('gridColumns'),_0x3c704a=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x39d5fe=new Date();_0x39d5fe['setHours'](0x0,0x0,0x0,0x0);const _0x12124c=getLocalDateStr(new Date()),_0x5bdd97=document[_0x5c9023(0xfe)](),_0x23718f=document[_0x5c9023(0xfe)]();for(let _0x1c0d5c=_0x464d92;_0x1c0d5c<=_0x29ce65;_0x1c0d5c++){const _0x38ed92=new Date(_0x39d5fe);_0x38ed92[_0x5c9023(0x138)](_0x38ed92['getDate']()+_0x1c0d5c);const _0x167059=getLocalDateStr(_0x38ed92);let _0x1e188c=_0x38ed92['getDay']()-0x1;if(_0x1e188c===-0x1)_0x1e188c=0x6;const _0x3151c2=_0x167059===_0x12124c,_0x3fc719=document['createElement'](_0x5c9023(0x131));_0x3fc719[_0x5c9023(0xdc)]=_0x5c9023(0xb9)+(_0x3151c2?_0x5c9023(0xc4):''),_0x3fc719[_0x5c9023(0x10e)](_0x5c9023(0x154),_0x167059),_0x3fc719[_0x5c9023(0x172)]='<div\x20class=\x22dch-day\x22>'+_0x3c704a[_0x1e188c]+_0x5c9023(0x163)+_0x38ed92[_0x5c9023(0xbf)]()+_0x5c9023(0xb5),_0x5bdd97[_0x5c9023(0xe0)](_0x3fc719);const _0x46bdff=document[_0x5c9023(0xcc)](_0x5c9023(0x131));_0x46bdff[_0x5c9023(0xdc)]=_0x5c9023(0x126)+(_0x3151c2?_0x5c9023(0xc4):''),_0x46bdff[_0x5c9023(0x10e)](_0x5c9023(0x154),_0x167059),_0x46bdff[_0x5c9023(0x10e)]('data-day-idx',_0x1e188c),_0x23718f[_0x5c9023(0xe0)](_0x46bdff);}_0x52a5f3['insertBefore'](_0x5bdd97,_0x52a5f3['firstChild']),_0x43b851[_0x5c9023(0x123)](_0x23718f,_0x43b851[_0x5c9023(0xf7)](_0x5c9023(0xf9)));}function hexToRgba(_0x2ae78d,_0x3d05c8){const _0x14e00d=a3_0x331edf;let _0x17734b;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x14e00d(0x118)](_0x2ae78d))return _0x17734b=_0x2ae78d[_0x14e00d(0x144)](0x1)['split'](''),_0x17734b[_0x14e00d(0x15e)]==0x3&&(_0x17734b=[_0x17734b[0x0],_0x17734b[0x0],_0x17734b[0x1],_0x17734b[0x1],_0x17734b[0x2],_0x17734b[0x2]]),_0x17734b='0x'+_0x17734b[_0x14e00d(0x135)](''),'rgba('+[_0x17734b>>0x10&0xff,_0x17734b>>0x8&0xff,_0x17734b&0xff]['join'](',')+','+_0x3d05c8+')';return _0x14e00d(0x15d)+_0x3d05c8+')';}let confirmResolver=null;function showCustomConfirm(_0x44dd08,_0xd4ac74,_0x5af1c3=!![]){const _0x4108b8=a3_0x331edf;document[_0x4108b8(0xf2)]('ccTitle')[_0x4108b8(0x17f)]=_0x44dd08,document[_0x4108b8(0xf2)]('ccText')[_0x4108b8(0x17f)]=_0xd4ac74;const _0x180ce2=document[_0x4108b8(0xf2)]('ccYesBtn');return _0x5af1c3?(_0x180ce2[_0x4108b8(0x134)][_0x4108b8(0x114)]=_0x4108b8(0x13e),_0x180ce2[_0x4108b8(0x134)][_0x4108b8(0x158)]=_0x4108b8(0xdb)):(_0x180ce2[_0x4108b8(0x134)][_0x4108b8(0x114)]=_0x4108b8(0xef),_0x180ce2[_0x4108b8(0x134)]['fontWeight']=_0x4108b8(0xdb)),new Promise(_0x3a9627=>{const _0x4f9210=_0x4108b8;confirmResolver=_0x3a9627,document[_0x4f9210(0xf2)](_0x4f9210(0x11c))[_0x4f9210(0x107)][_0x4f9210(0x17a)](_0x4f9210(0x109));});}function resolveCustomConfirm(_0x2e2948){const _0xf889ea=a3_0x331edf;document[_0xf889ea(0xf2)]('customConfirm')[_0xf889ea(0x107)]['remove'](_0xf889ea(0x109));if(confirmResolver)confirmResolver(_0x2e2948);}function a3_0x41d0(_0x589d0d,_0x584fa9){_0x589d0d=_0x589d0d-0xa6;const _0x31c2de=a3_0x2813();let _0x3df50e=_0x31c2de[_0x589d0d];return _0x3df50e;}async function tryCancelCurrentSession(){const _0x9dc860=a3_0x331edf;if(!currentSession)return;const _0x4fc836=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x9dc860(0x102),!![]);if(!_0x4fc836)return;const _0x43a126=currentSession;closeAllSheets(),sessions=sessions[_0x9dc860(0x14e)](_0x48c253=>_0x48c253['id']!==_0x43a126['id']),reRenderBlocks(),showToast(_0x9dc860(0x187)),lastUserActionTime=Date[_0x9dc860(0xed)]();try{const _0x5e220e=window[_0x9dc860(0xbd)]?.[_0x9dc860(0x18a)],_0x42c187=await fetch(API_URL,{'method':_0x9dc860(0x197),'body':JSON[_0x9dc860(0xe5)]({'action':_0x9dc860(0x119),'init_data':_0x5e220e?.[_0x9dc860(0x16d)]||'','coachId':_0x43a126[_0x9dc860(0x124)],'dateStr':_0x43a126[_0x9dc860(0x184)],'sessionId':_0x43a126['id']})});if(_0x42c187['ok'])DataManager[_0x9dc860(0x19a)]();}catch(_0x35dfed){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x2a9280=a3_0x331edf;if(!currentSession)return;document[_0x2a9280(0xf2)](_0x2a9280(0xfb))[_0x2a9280(0x107)][_0x2a9280(0x198)]('open'),document['getElementById'](_0x2a9280(0xda))[_0x2a9280(0x107)]['add'](_0x2a9280(0xc9));const _0x221e4b=document[_0x2a9280(0xf2)]('rsDatesTrack'),_0x4a67b5=document['getElementById'](_0x2a9280(0xde));_0x221e4b[_0x2a9280(0x172)]='',_0x4a67b5[_0x2a9280(0x172)]=_0x2a9280(0x182);const [_0xe5c78c,_0x28c7c0]=currentSession[_0x2a9280(0xc8)][_0x2a9280(0x140)](':')['map'](Number),[_0x8dfaca,_0x2851e1]=currentSession[_0x2a9280(0xc3)][_0x2a9280(0x140)](':')[_0x2a9280(0x142)](Number),_0x122cf5=_0x8dfaca*0x3c+_0x2851e1-(_0xe5c78c*0x3c+_0x28c7c0);try{const _0x1ab393=window['Telegram']?.[_0x2a9280(0x18a)],_0x44d8a2=await fetch(API_URL,{'method':_0x2a9280(0x197),'body':JSON[_0x2a9280(0xe5)]({'action':_0x2a9280(0x179),'coachId':currentSession[_0x2a9280(0x124)],'duration':_0x122cf5,'init_data':_0x1ab393?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x25d812=await _0x44d8a2[_0x2a9280(0x174)]();_0x25d812['ok']&&_0x25d812[_0x2a9280(0x193)]?(availableSlotsCache=_0x25d812[_0x2a9280(0x193)],renderRescheduleDates()):_0x4a67b5[_0x2a9280(0x172)]=_0x2a9280(0xe6);}catch(_0x5d7a03){_0x4a67b5[_0x2a9280(0x172)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x1ad6ba=a3_0x331edf,_0x281d9c=document[_0x1ad6ba(0xf2)](_0x1ad6ba(0x136));_0x281d9c['innerHTML']='';const _0x41cb89=Object[_0x1ad6ba(0x176)](availableSlotsCache)['sort'](),_0x8791d7=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x41cb89[_0x1ad6ba(0x15e)]===0x0){document[_0x1ad6ba(0xf2)](_0x1ad6ba(0xde))['innerHTML']=_0x1ad6ba(0x15a);return;}_0x41cb89[_0x1ad6ba(0x13c)]((_0x234230,_0xe2afcc)=>{const _0x58a3f0=_0x1ad6ba,_0x56a1c4=new Date(_0x234230),_0x36ae27=_0x8791d7[_0x56a1c4[_0x58a3f0(0x166)]()],_0x96e0ae=_0x56a1c4[_0x58a3f0(0xbf)](),_0x4c75d9=document['createElement'](_0x58a3f0(0x131));_0x4c75d9[_0x58a3f0(0xdc)]=_0x58a3f0(0x12f);if(_0xe2afcc===0x0)_0x4c75d9[_0x58a3f0(0x107)][_0x58a3f0(0x17a)](_0x58a3f0(0xe9));_0x4c75d9['innerHTML']=_0x58a3f0(0x12b)+_0x36ae27+_0x58a3f0(0xcd)+_0x96e0ae+_0x58a3f0(0xb5),_0x4c75d9[_0x58a3f0(0x151)]=()=>selectRsDate(_0x234230,_0x4c75d9),_0x281d9c[_0x58a3f0(0xe0)](_0x4c75d9);}),selectRsDate(_0x41cb89[0x0],_0x281d9c[_0x1ad6ba(0xb1)]);}function selectRsDate(_0x4948d1,_0x44f70f){const _0x335604=a3_0x331edf;selectedRsDate=_0x4948d1,document[_0x335604(0x16c)](_0x335604(0x127))[_0x335604(0x13c)](_0x56557c=>_0x56557c['classList'][_0x335604(0x198)]('active'));if(_0x44f70f)_0x44f70f[_0x335604(0x107)][_0x335604(0x17a)](_0x335604(0xe9));const _0x336327=document[_0x335604(0xf2)](_0x335604(0xde));_0x336327[_0x335604(0x172)]='';const _0x5dfc63=availableSlotsCache[_0x4948d1]||[];if(_0x5dfc63['length']===0x0){_0x336327[_0x335604(0x172)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x5dfc63['forEach'](_0x1a9e6b=>{const _0x2b444c=_0x335604,_0xf71cd1=document[_0x2b444c(0xcc)]('button');_0xf71cd1['className']=_0x2b444c(0x15c),_0xf71cd1[_0x2b444c(0x17f)]=_0x1a9e6b,_0xf71cd1[_0x2b444c(0x151)]=()=>confirmReschedule(_0x1a9e6b),_0x336327[_0x2b444c(0xe0)](_0xf71cd1);});}function a3_0x2813(){const _0x23f791=['anEnd','sort','Critical\x20TMA\x20Error:','1435536PpjcIs','onClick','round',':00</span>','cancelled','daysHeaderTrack','status','top','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','var(--acc-blue)','max','total','1517274zFWjCX','globalTimeLine','firstChild','backgroundColor','\x20—á.','disableVerticalSwipes','</div>','%\x20+\x202px)','display','getHours','day-col-header\x20','substr','search','offsetLeft','Telegram','parse','getDate','offClick','uc_client_list','</span>\x20/\x20','end','today','anStart','detNote','<span>','start','open','(((.+)+)+)+$','#050505','createElement','</div><div\x20class=\x22rs-day-num\x22>','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','.sheet','timeLineBadge','loadLocal','setMonth','cancel_window','week','ranges','getMonth','done','T00:00:00','href','rescheduleSheet','600','className','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','rsSlotsGrid','detDate','appendChild','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','isArray','blocked-slot\x20stripe-bg','px\x200px','stringify','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','cid','error','active','zIndex','scrollTo','log','now','time-label','#0a84ff','69968TNnmUx','block','getElementById','calendar','toLocaleString','12196nsttQj','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','querySelector','router.html','.day-column','sid','detailsSheet','height','setHeaderColor','createDocumentFragment','var(--acc-green)','overlay','pattern','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','matrixViewport','user','detStatus','BackButton','classList','entries','visible','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setBackgroundColor','getTime','syncLoad','setAttribute','floor','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','timeColumn','.day-col-header','color','borderLeftColor','blocked-range-part\x20stripe-bg','217kuuqfY','test','client_cancel','DOMContentLoaded','location','customConfirm','ready','T23:59:59','anPercent','toString','find','width','insertBefore','coachId','value','day-column\x20','.rs-date-chip','toUpperCase','addEventListener','exceptions','<div\x20class=\x22rs-day-name\x22>','scroll','.btn-reschedule','scrollTop','rs-date-chip','none','div','seriesId','push','style','join','rsDatesTrack','min','setDate','detTime','long','padStart','forEach','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','#ff453a','\x20-\x20','split','slice','map','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','substring','flex','client_load','calc(','backgroundPosition','offsetWidth','clients','clientWidth','left','getAttribute','filter','completed','auto','onclick','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','data-date','show','data-day-idx','applyData','fontWeight','toLocaleDateString','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','reschedule','rs-time-btn','rgba(10,\x20132,\x20255,\x20','length','–∑–∞\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','uc_client_sessions','161575GPiKKq','</div><div\x20class=\x22dch-num\x22>','ru-RU','setHours','getDay','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','apply','Error\x20setting\x20color:','uc_client_settings','\x20–≤\x20','querySelectorAll','initData','<div\x20class=\x22dch-day\x22>','colIndex','12800EYqEvz','\x20status-completed','innerHTML','Error\x20setting\x20back\x20button:','json','getFullYear','keys','note','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','get_slots','add','.period-switch\x20.p-btn','coach_profiles','analyticsSheet','startsWith','textContent','getItem','mini','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','setItem','dateStr','settings','48tnCWtf','–û—Ç–º–µ–Ω–µ–Ω–æ','month','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','WebApp','anDonutCircle','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','.day-col-header[data-date=\x22','362975hwQmGM','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','then','planned','day-off-overlay\x20stripe-bg','data','client-stat-card','cancelContainer','scrollLeft','POST','remove','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','saveLocally'];a3_0x2813=function(){return _0x23f791;};return a3_0x2813();}async function confirmReschedule(_0xd0bdc0){const _0x33710e=a3_0x331edf,_0x345615=new Date(selectedRsDate),_0x49c528=_0x345615[_0x33710e(0x159)](_0x33710e(0x164),{'day':'numeric','month':'long'}),_0x2488d5=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x49c528+_0x33710e(0x16b)+_0xd0bdc0+'?',![]);if(!_0x2488d5)return;closeAllSheets(),showToast(_0x33710e(0x189)),lastUserActionTime=Date[_0x33710e(0xed)]();const _0x170d94=currentSession[_0x33710e(0x184)],_0x3b2676=currentSession['id'],[_0x16ec22,_0x21ff7d]=currentSession['start'][_0x33710e(0x140)](':')[_0x33710e(0x142)](Number),[_0x264472,_0x4a8101]=currentSession['end'][_0x33710e(0x140)](':')[_0x33710e(0x142)](Number),_0x426b48=_0x264472*0x3c+_0x4a8101-(_0x16ec22*0x3c+_0x21ff7d),[_0x26ddd1,_0x3ef6af]=_0xd0bdc0[_0x33710e(0x140)](':')[_0x33710e(0x142)](Number),_0x415eb4=_0x26ddd1*0x3c+_0x3ef6af+_0x426b48,_0x30bd9b=Math[_0x33710e(0x10f)](_0x415eb4/0x3c),_0x578bc2=_0x415eb4%0x3c,_0x16ebee=String(_0x30bd9b)['padStart'](0x2,'0')+':'+String(_0x578bc2)[_0x33710e(0x13b)](0x2,'0'),_0x409441=sessions['findIndex'](_0x5b6bbf=>_0x5b6bbf['id']===_0x3b2676);_0x409441!==-0x1&&(sessions[_0x409441]['dateStr']=selectedRsDate,sessions[_0x409441][_0x33710e(0xc8)]=_0xd0bdc0,sessions[_0x409441][_0x33710e(0xc3)]=_0x16ebee,reRenderBlocks());try{const _0x4e8d71=window[_0x33710e(0xbd)]?.[_0x33710e(0x18a)],_0x9e2b7f=await fetch(API_URL,{'method':_0x33710e(0x197),'body':JSON['stringify']({'action':_0x33710e(0x15b),'init_data':_0x4e8d71?.['initData']||'','oldSessionId':_0x3b2676,'oldDate':_0x170d94,'newDate':selectedRsDate,'newTime':_0xd0bdc0,'coachId':currentSession[_0x33710e(0x124)]})}),_0x58b622=await _0x9e2b7f[_0x33710e(0x174)]();!_0x58b622['ok']?(showToast(_0x33710e(0x178)),DataManager[_0x33710e(0x10d)]()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager['saveLocally']());}catch(_0x2c7942){showToast(_0x33710e(0x167));}}document[a3_0x331edf(0x129)](a3_0x331edf(0x11a),init);