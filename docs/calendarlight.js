const a3_0x75d7b1=a3_0x38bf;(function(_0x544557,_0x37c17f){const _0x4eac55=a3_0x38bf,_0x4c803e=_0x544557();while(!![]){try{const _0x2ad950=parseInt(_0x4eac55(0x1ba))/0x1*(-parseInt(_0x4eac55(0x182))/0x2)+-parseInt(_0x4eac55(0x145))/0x3+-parseInt(_0x4eac55(0x106))/0x4+-parseInt(_0x4eac55(0x1af))/0x5*(parseInt(_0x4eac55(0x123))/0x6)+parseInt(_0x4eac55(0x15c))/0x7+parseInt(_0x4eac55(0x1b9))/0x8*(parseInt(_0x4eac55(0x16a))/0x9)+parseInt(_0x4eac55(0x199))/0xa;if(_0x2ad950===_0x37c17f)break;else _0x4c803e['push'](_0x4c803e['shift']());}catch(_0x5b05e4){_0x4c803e['push'](_0x4c803e['shift']());}}}(a3_0x3011,0xcab7b));const APP_VERSION=a3_0x75d7b1(0xfe),API_URL=a3_0x75d7b1(0x197),GRID_H=0x3c,KEY_SESSIONS=a3_0x75d7b1(0xf8),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS='uc_client_list';let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x75d7b1(0x144),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x205529=a3_0x75d7b1,_0x3f16c3=(function(){let _0x6c361c=!![];return function(_0x267115,_0x58ef0e){const _0x422207=_0x6c361c?function(){if(_0x58ef0e){const _0x3dc3cf=_0x58ef0e['apply'](_0x267115,arguments);return _0x58ef0e=null,_0x3dc3cf;}}:function(){};return _0x6c361c=![],_0x422207;};}()),_0x658880=_0x3f16c3(this,function(){const _0x317405=a3_0x38bf;return _0x658880[_0x317405(0x19d)]()[_0x317405(0x11d)](_0x317405(0x18b))[_0x317405(0x19d)]()['constructor'](_0x658880)[_0x317405(0x11d)](_0x317405(0x18b));});_0x658880();try{const _0x7050e3=window['Telegram']?.['WebApp'];if(!_0x7050e3)return;_0x7050e3['ready'](),_0x7050e3[_0x205529(0x130)]();try{_0x7050e3['setHeaderColor'](_0x205529(0x19f)),_0x7050e3[_0x205529(0x173)]&&_0x7050e3[_0x205529(0x173)](_0x205529(0x19f));}catch(_0x3e069e){console[_0x205529(0x146)](_0x205529(0x1c1),_0x3e069e);}try{_0x7050e3[_0x205529(0x1a1)]&&(_0x7050e3[_0x205529(0x1a1)]['show'](),_0x7050e3[_0x205529(0x1a1)]['offClick'](),_0x7050e3[_0x205529(0x1a1)][_0x205529(0x12b)](function(){const _0x11bd8c=_0x205529;window['location'][_0x11bd8c(0x13a)]=_0x11bd8c(0xf5);}));}catch(_0x2f882c){console[_0x205529(0x146)](_0x205529(0x141),_0x2f882c);}try{if(_0x7050e3[_0x205529(0x157)])_0x7050e3[_0x205529(0x157)]();}catch(_0xac4941){}}catch(_0x40becd){console[_0x205529(0x103)](_0x205529(0x1d1),_0x40becd);}}());function isAdmin(){const _0x8b4e23=a3_0x75d7b1;try{const _0x1bef38=Number(window[_0x8b4e23(0x163)]?.[_0x8b4e23(0x17f)]?.[_0x8b4e23(0x1b5)]?.['user']?.['id']);return _0x1bef38===0xbaf7174;}catch(_0xe356d8){return![];}}const DataManager={'saveLocally'(){const _0x2fcca5=a3_0x75d7b1;try{localStorage['setItem'](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x2fcca5(0xeb)](KEY_CLIENTS,JSON[_0x2fcca5(0x1dd)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x2fcca5(0x1dd)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x3e8b02){}},'loadLocal'(){const _0x3585d8=a3_0x75d7b1;try{const _0x2fd0cc=localStorage[_0x3585d8(0x1d6)](KEY_SESSIONS);if(_0x2fd0cc)sessions=JSON[_0x3585d8(0x177)](_0x2fd0cc);const _0x2c3b82=localStorage[_0x3585d8(0x1d6)](KEY_CLIENTS);if(_0x2c3b82)clients=JSON['parse'](_0x2c3b82);const _0x5485dd=localStorage['getItem'](KEY_SETTINGS);if(_0x5485dd){const _0x16bec7=JSON['parse'](_0x5485dd);if(_0x16bec7[_0x3585d8(0x1a9)])availabilityPattern=_0x16bec7[_0x3585d8(0x1a9)];if(_0x16bec7[_0x3585d8(0x151)])specialRanges=_0x16bec7[_0x3585d8(0x151)];if(_0x16bec7[_0x3585d8(0x190)])dateExceptions=_0x16bec7[_0x3585d8(0x190)];}}catch(_0xa5e1b4){}},async 'syncLoad'(){const _0x3d6e36=a3_0x75d7b1,_0x11ae15=new Date(),_0x1cb284=_0x11ae15['getFullYear']()+'-'+String(_0x11ae15[_0x3d6e36(0x19c)]()+0x1)[_0x3d6e36(0x14f)](0x2,'0'),_0x18428a=new Date(_0x11ae15);_0x18428a['setMonth'](_0x11ae15[_0x3d6e36(0x19c)]()+0x1);const _0x560066=_0x18428a[_0x3d6e36(0x160)]()+'-'+String(_0x18428a['getMonth']()+0x1)[_0x3d6e36(0x14f)](0x2,'0'),_0x79ed9c=Date[_0x3d6e36(0x14c)]();try{const _0x58ea20=window[_0x3d6e36(0x163)]?.[_0x3d6e36(0x17f)],_0x9a56ac=_0x58ea20?.[_0x3d6e36(0xfc)]||'',[_0xa7508,_0x14a123]=await Promise[_0x3d6e36(0x18e)]([fetch(API_URL,{'method':'POST','body':JSON[_0x3d6e36(0x1dd)]({'action':_0x3d6e36(0xf1),'init_data':_0x9a56ac,'month_str':_0x1cb284})})[_0x3d6e36(0x19b)](_0x24c3f7=>_0x24c3f7[_0x3d6e36(0x111)]()),fetch(API_URL,{'method':_0x3d6e36(0x19a),'body':JSON[_0x3d6e36(0x1dd)]({'action':'client_load','init_data':_0x9a56ac,'month_str':_0x560066})})[_0x3d6e36(0x19b)](_0x1945e6=>_0x1945e6[_0x3d6e36(0x111)]())]);if(lastUserActionTime>_0x79ed9c){console[_0x3d6e36(0x146)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0xa7508['ok'])this[_0x3d6e36(0xf2)](_0xa7508[_0x3d6e36(0x137)],_0x1cb284);if(_0x14a123['ok'])this[_0x3d6e36(0xf2)](_0x14a123['data'],_0x560066);this[_0x3d6e36(0x1a3)]();}catch(_0x290836){}},'applyData'(_0x1b9ccb,_0xfad7e6){const _0x7f74d9=a3_0x75d7b1;if(!_0x1b9ccb)return;if(_0x1b9ccb[_0x7f74d9(0x118)]){if(_0x1b9ccb[_0x7f74d9(0x118)][_0x7f74d9(0x1a9)])availabilityPattern=_0x1b9ccb['settings']['pattern'];if(_0x1b9ccb[_0x7f74d9(0x118)][_0x7f74d9(0x151)])specialRanges=_0x1b9ccb['settings'][_0x7f74d9(0x151)];if(_0x1b9ccb[_0x7f74d9(0x118)]['exceptions'])dateExceptions=_0x1b9ccb[_0x7f74d9(0x118)][_0x7f74d9(0x190)];}if(_0x1b9ccb['clients']&&Array['isArray'](_0x1b9ccb['clients']))clients=_0x1b9ccb[_0x7f74d9(0x1c5)];_0x1b9ccb[_0x7f74d9(0x11b)]&&(coachProfiles={...coachProfiles,..._0x1b9ccb[_0x7f74d9(0x11b)]}),_0x1b9ccb['calendar']&&(sessions=sessions[_0x7f74d9(0x164)](_0x4f1eac=>!_0x4f1eac[_0x7f74d9(0x198)]['startsWith'](_0xfad7e6)),Object[_0x7f74d9(0x116)](_0x1b9ccb['calendar'])['forEach'](_0x11fd2b=>{const _0x2b351a=_0x7f74d9,_0x4362fa=_0x1b9ccb[_0x2b351a(0x185)][_0x11fd2b];_0x4362fa[_0x2b351a(0x191)](_0x4432c2=>{const _0x18fd1f=_0x2b351a;sessions[_0x18fd1f(0x10c)]({'id':_0x4432c2['i'],'clientId':_0x4432c2['c'],'coachId':_0x4432c2['cid'],'dateStr':_0xfad7e6+'-'+_0x11fd2b[_0x18fd1f(0x14f)](0x2,'0'),'start':_0x4432c2['s'],'end':_0x4432c2['e'],'note':_0x4432c2['n']||'','status':_0x4432c2['st']||_0x18fd1f(0x124),'seriesId':_0x4432c2[_0x18fd1f(0x105)]});});})),reRenderBlocks();}};function init(){const _0x1dd597=a3_0x75d7b1;DataManager[_0x1dd597(0x128)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById']('matrixViewport')[_0x1dd597(0x179)](_0x1dd597(0x189),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x1dd597(0x16f)]();}function renderTimeColumn(){const _0x2245c6=a3_0x75d7b1,_0xcd325f=document[_0x2245c6(0x1cc)](_0x2245c6(0x13d)),_0x11333e=document[_0x2245c6(0x1cc)](_0x2245c6(0x12f));_0xcd325f['innerHTML']='',_0xcd325f['appendChild'](_0x11333e);for(let _0x4323f5=0x0;_0x4323f5<0x18;_0x4323f5++){const _0x14aa17=document[_0x2245c6(0xe8)](_0x2245c6(0x126));_0x14aa17[_0x2245c6(0x113)]=_0x2245c6(0x1be);if(_0x4323f5>0x0)_0x14aa17[_0x2245c6(0x152)]=_0x2245c6(0x100)+String(_0x4323f5)[_0x2245c6(0x14f)](0x2,'0')+_0x2245c6(0x1da);_0xcd325f['appendChild'](_0x14aa17);}}function renderDayRange(_0x45929a,_0x1ed86e){const _0x184acd=a3_0x75d7b1,_0x4148a8=document[_0x184acd(0x1cc)](_0x184acd(0xff)),_0x31b182=document[_0x184acd(0x1cc)]('gridColumns'),_0x5cd1bb=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x7b4d94=new Date();_0x7b4d94[_0x184acd(0x112)](0x0,0x0,0x0,0x0);const _0x466442=getLocalDateStr(new Date());for(let _0x3a3166=_0x45929a;_0x3a3166<=_0x1ed86e;_0x3a3166++){const _0x300757=new Date(_0x7b4d94);_0x300757[_0x184acd(0x196)](_0x300757[_0x184acd(0x17c)]()+_0x3a3166);const _0x4852d7=getLocalDateStr(_0x300757);let _0x4f6e6f=_0x300757[_0x184acd(0x1c2)]()-0x1;if(_0x4f6e6f===-0x1)_0x4f6e6f=0x6;const _0x1804c1=_0x4852d7===_0x466442,_0x5988b1=document['createElement'](_0x184acd(0x126));_0x5988b1[_0x184acd(0x113)]=_0x184acd(0x1c0)+(_0x1804c1?_0x184acd(0x115):''),_0x5988b1[_0x184acd(0x122)](_0x184acd(0x149),_0x4852d7),_0x5988b1[_0x184acd(0x152)]='<div\x20class=\x22dch-day\x22>'+_0x5cd1bb[_0x4f6e6f]+'</div><div\x20class=\x22dch-num\x22>'+_0x300757[_0x184acd(0x17c)]()+'</div>',_0x4148a8[_0x184acd(0x1b4)](_0x5988b1);const _0x589a1f=document['createElement'](_0x184acd(0x126));_0x589a1f['className']=_0x184acd(0x1c4)+(_0x1804c1?_0x184acd(0x115):''),_0x589a1f[_0x184acd(0x122)](_0x184acd(0x149),_0x4852d7),_0x589a1f[_0x184acd(0x122)](_0x184acd(0x176),_0x4f6e6f),_0x31b182[_0x184acd(0x1b4)](_0x589a1f);}}function reRenderBlocks(){const _0x534f6c=a3_0x75d7b1;document['querySelectorAll'](_0x534f6c(0x12e))['forEach'](_0x1fbc2c=>{const _0x3c4c47=_0x534f6c;_0x1fbc2c['querySelectorAll'](_0x3c4c47(0x11e))[_0x3c4c47(0x191)](_0x13cd0c=>_0x13cd0c[_0x3c4c47(0x183)]());const _0x2f63ce=_0x1fbc2c[_0x3c4c47(0x187)]('data-date'),_0x555bcf=parseInt(_0x1fbc2c[_0x3c4c47(0x187)]('data-day-idx')),_0x57829f=Math[_0x3c4c47(0x1c9)](_0x1fbc2c[_0x3c4c47(0x16d)]);(availabilityPattern[_0x555bcf]||[])[_0x3c4c47(0x191)](_0x29652d=>{const _0x1f6e67=_0x3c4c47,_0x486092=document[_0x1f6e67(0xe8)](_0x1f6e67(0x126));_0x486092[_0x1f6e67(0x113)]='blocked-slot\x20stripe-bg',_0x486092[_0x1f6e67(0x1d4)][_0x1f6e67(0x121)]=_0x29652d*GRID_H+'px',_0x486092['style'][_0x1f6e67(0x15e)]='-'+_0x57829f+_0x1f6e67(0x1db)+_0x29652d*GRID_H+'px',_0x1fbc2c['appendChild'](_0x486092);});if(specialRanges['length']>0x0){const _0xc0e901=new Date(_0x2f63ce+_0x3c4c47(0xf7))[_0x3c4c47(0x1a0)](),_0x51c871=new Date(_0x2f63ce+_0x3c4c47(0x101))[_0x3c4c47(0x1a0)]();specialRanges[_0x3c4c47(0x191)](_0x332284=>{const _0x207150=_0x3c4c47,_0x119b2c=new Date(_0x332284[_0x207150(0x134)])[_0x207150(0x1a0)](),_0x1b6dcd=new Date(_0x332284[_0x207150(0x132)])['getTime'](),_0xf265a9=Math[_0x207150(0x15d)](_0xc0e901,_0x119b2c),_0x2e0d7a=Math['min'](_0x51c871,_0x1b6dcd);if(_0xf265a9<_0x2e0d7a){const _0x350017=(_0xf265a9-_0xc0e901)/0x36ee80*GRID_H,_0x4e6d2d=(_0x2e0d7a-_0xf265a9)/0x36ee80*GRID_H,_0x2aec32=document[_0x207150(0xe8)](_0x207150(0x126));_0x4e6d2d>=23.5*GRID_H?(_0x2aec32[_0x207150(0x113)]='day-off-overlay\x20stripe-bg',_0x2aec32[_0x207150(0x1d4)][_0x207150(0x15e)]='-'+_0x57829f+_0x207150(0x1ac)):(_0x2aec32[_0x207150(0x113)]=_0x207150(0x135),_0x2aec32['style'][_0x207150(0x121)]=_0x350017+'px',_0x2aec32[_0x207150(0x1d4)][_0x207150(0x114)]=_0x4e6d2d+'px',_0x2aec32['style'][_0x207150(0x15e)]='-'+_0x57829f+_0x207150(0x1db)+_0x350017+'px'),_0x1fbc2c[_0x207150(0x1b4)](_0x2aec32);}});}renderEventsForColumn(_0x1fbc2c,_0x2f63ce);});}function a3_0x38bf(_0x39d3a9,_0x94a9d2){_0x39d3a9=_0x39d3a9-0xe4;const _0x3b7104=a3_0x3011();let _0x2cd937=_0x3b7104[_0x39d3a9];return _0x2cd937;}function renderEventsForColumn(_0x4cc357,_0x337a9e){const _0x3b2f79=a3_0x75d7b1,_0x428697=sessions[_0x3b2f79(0x164)](_0xac00ce=>_0xac00ce[_0x3b2f79(0x198)]===_0x337a9e),_0x2336d8=_0x428697[_0x3b2f79(0xe9)](_0xa5c852=>{const _0x23c2e8=_0x3b2f79,[_0x275118,_0x537bfb]=_0xa5c852[_0x23c2e8(0x134)][_0x23c2e8(0x170)](':')[_0x23c2e8(0xe9)](Number),[_0x1c7cb6,_0x3f75f4]=_0xa5c852[_0x23c2e8(0x132)][_0x23c2e8(0x170)](':')[_0x23c2e8(0xe9)](Number);return{'data':_0xa5c852,'start':_0x275118*0x3c+_0x537bfb,'end':_0x1c7cb6*0x3c+_0x3f75f4,'colIndex':0x0};});_0x2336d8[_0x3b2f79(0x17a)]((_0x1acced,_0x1f01ee)=>_0x1acced[_0x3b2f79(0x134)]-_0x1f01ee[_0x3b2f79(0x134)]||_0x1f01ee[_0x3b2f79(0x132)]-_0x1f01ee['start']-(_0x1acced[_0x3b2f79(0x132)]-_0x1acced[_0x3b2f79(0x134)]));const _0x49522b=[];_0x2336d8[_0x3b2f79(0x191)](_0x2e93e7=>{const _0x3a6686=_0x3b2f79;let _0x5f1b59=![];for(let _0x52a8d4=0x0;_0x52a8d4<_0x49522b['length'];_0x52a8d4++){const _0x397250=_0x49522b[_0x52a8d4];if(_0x2e93e7[_0x3a6686(0x134)]>=_0x397250[_0x397250[_0x3a6686(0x14e)]-0x1]['end']){_0x397250[_0x3a6686(0x10c)](_0x2e93e7),_0x2e93e7[_0x3a6686(0x1c6)]=_0x52a8d4,_0x5f1b59=!![];break;}}!_0x5f1b59&&(_0x49522b[_0x3a6686(0x10c)]([_0x2e93e7]),_0x2e93e7['colIndex']=_0x49522b[_0x3a6686(0x14e)]-0x1);}),_0x2336d8[_0x3b2f79(0x191)](_0x231491=>{const _0x12e927=_0x3b2f79;let _0x39cfc4=0x0;_0x2336d8[_0x12e927(0x191)](_0x58fcf1=>{const _0x168b92=_0x12e927;if(Math[_0x168b92(0x15d)](_0x231491['start'],_0x58fcf1[_0x168b92(0x134)])<Math[_0x168b92(0x13c)](_0x231491['end'],_0x58fcf1[_0x168b92(0x132)])&&_0x58fcf1[_0x168b92(0x1c6)]>_0x39cfc4)_0x39cfc4=_0x58fcf1[_0x168b92(0x1c6)];});const _0x3f03ab=_0x39cfc4+0x1,_0x46d0d0=0x64/_0x3f03ab,_0x2a519f=_0x231491[_0x12e927(0x1c6)]*_0x46d0d0,_0x4a5cd1=document['createElement'](_0x12e927(0x126)),_0xeb531=_0x231491[_0x12e927(0x137)];let _0x2b9d85='#0a84ff';if(clients&&clients['length']>0x0){const _0x1a4ca9=clients['find'](_0x2132c6=>String(_0x2132c6['id'])===String(_0xeb531[_0x12e927(0x119)]));if(_0x1a4ca9&&_0x1a4ca9['color'])_0x2b9d85=_0x1a4ca9[_0x12e927(0x120)];}const _0x2ca413=_0xeb531[_0x12e927(0x16b)]===_0x12e927(0x154),_0x270cf2=_0x2ca413?0x1:0.45;_0x4a5cd1[_0x12e927(0x113)]='event-card'+(_0x2ca413?_0x12e927(0x1b0):''),_0x4a5cd1[_0x12e927(0x1d4)][_0x12e927(0x18f)]=hexToRgba(_0x2b9d85,_0x270cf2),_0x4a5cd1['style'][_0x12e927(0x14a)]=_0x2b9d85;const _0x215476=_0x231491[_0x12e927(0x134)]/0x3c*GRID_H,_0x25e694=(_0x231491[_0x12e927(0x132)]-_0x231491['start'])/0x3c*GRID_H;_0x4a5cd1[_0x12e927(0x1d4)][_0x12e927(0x121)]=_0x215476+'px',_0x4a5cd1[_0x12e927(0x1d4)][_0x12e927(0x114)]=Math[_0x12e927(0x15d)](_0x25e694,0x14)+'px',_0x4a5cd1[_0x12e927(0x1d4)][_0x12e927(0x188)]=_0x12e927(0x10f)+_0x46d0d0+_0x12e927(0x14d),_0x4a5cd1['style'][_0x12e927(0x1b7)]='calc('+_0x2a519f+_0x12e927(0x17d),_0x4a5cd1['style'][_0x12e927(0x1aa)]=0xa+_0x231491[_0x12e927(0x1c6)];if(_0x46d0d0<0x55)_0x4a5cd1['classList'][_0x12e927(0xe4)](_0x12e927(0x1d5));let _0x1d63fd='';if(_0xeb531['seriesId'])_0x1d63fd+=_0x12e927(0xfd);if(_0x2ca413)_0x1d63fd+=_0x12e927(0x166);_0x4a5cd1['innerHTML']=_0x12e927(0x1ae)+_0xeb531[_0x12e927(0x134)]+_0x12e927(0xe5)+_0xeb531[_0x12e927(0x132)]+_0x12e927(0x184)+_0x1d63fd+_0x12e927(0x1b3),_0x4a5cd1[_0x12e927(0x13e)]=_0x5c7ac0=>{const _0x277f4b=_0x12e927;_0x5c7ac0[_0x277f4b(0x16c)](),openDetails(_0xeb531);},_0x4cc357['appendChild'](_0x4a5cd1);});}function openAnalytics(){const _0x5c54e5=a3_0x75d7b1,_0x18d84e=document[_0x5c54e5(0x10a)](_0x5c54e5(0x150));setAnalyticsPeriod(_0x5c54e5(0x144),_0x18d84e),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x5b3c75,_0x26e56d){const _0x1954d0=a3_0x75d7b1;currentAnPeriod=_0x5b3c75,document[_0x1954d0(0x153)](_0x1954d0(0x150))[_0x1954d0(0x191)](_0x1c8f4c=>_0x1c8f4c['classList'][_0x1954d0(0x183)]('active'));if(_0x26e56d)_0x26e56d['classList']['add'](_0x1954d0(0x1a6));const _0x3ea757=document[_0x1954d0(0x1cc)](_0x1954d0(0x147));_0x3ea757[_0x1954d0(0x1d4)][_0x1954d0(0x1d2)]=_0x5b3c75===_0x1954d0(0x17b)?_0x1954d0(0x19e):'none';const _0x3f02ed=new Date();let _0x4c4a89=new Date(),_0x5e3768=new Date();if(_0x5b3c75==='week')_0x4c4a89=getStartOfWeek(_0x3f02ed),_0x5e3768=new Date(_0x4c4a89),_0x5e3768['setDate'](_0x5e3768[_0x1954d0(0x17c)]()+0x6);else{if(_0x5b3c75===_0x1954d0(0xf9))_0x4c4a89=new Date(_0x3f02ed['getFullYear'](),_0x3f02ed[_0x1954d0(0x19c)](),0x1),_0x5e3768=new Date(_0x3f02ed[_0x1954d0(0x160)](),_0x3f02ed[_0x1954d0(0x19c)]()+0x1,0x0);else{!document[_0x1954d0(0x1cc)](_0x1954d0(0x169))['value']&&(document['getElementById'](_0x1954d0(0x169))[_0x1954d0(0x117)]=getLocalDateStr(_0x3f02ed),document[_0x1954d0(0x1cc)]('anEnd')[_0x1954d0(0x117)]=getLocalDateStr(_0x3f02ed));refreshAnalytics();return;}}document[_0x1954d0(0x1cc)](_0x1954d0(0x169))[_0x1954d0(0x117)]=getLocalDateStr(_0x4c4a89),document['getElementById']('anEnd')['value']=getLocalDateStr(_0x5e3768),refreshAnalytics();}function refreshAnalytics(){const _0x4144dc=a3_0x75d7b1,_0x318d33=document[_0x4144dc(0x1cc)](_0x4144dc(0x169))[_0x4144dc(0x117)],_0x104c16=document[_0x4144dc(0x1cc)](_0x4144dc(0x156))[_0x4144dc(0x117)];if(!_0x318d33||!_0x104c16)return;const _0x5a0b2b=sessions['filter'](_0x295c9e=>_0x295c9e[_0x4144dc(0x198)]>=_0x318d33&&_0x295c9e['dateStr']<=_0x104c16&&_0x295c9e[_0x4144dc(0x16b)]!==_0x4144dc(0xe6)),_0x385aeb=_0x5a0b2b['length'],_0x5eb480=_0x5a0b2b[_0x4144dc(0x164)](_0xd774df=>_0xd774df[_0x4144dc(0x16b)]==='completed')[_0x4144dc(0x14e)],_0x49f6c9=_0x385aeb>0x0?Math[_0x4144dc(0x1c9)](_0x5eb480/_0x385aeb*0x64):0x0;document[_0x4144dc(0x1cc)]('anPercent')['textContent']=_0x49f6c9+'%',document[_0x4144dc(0x1cc)](_0x4144dc(0x193))[_0x4144dc(0xf3)]=_0x5eb480+'\x20–∏–∑\x20'+_0x385aeb+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x24ca91=document['getElementById'](_0x4144dc(0x1d7)),_0xdc1c9f=0x2*Math['PI']*0x23,_0x5178f2=_0xdc1c9f-_0x49f6c9/0x64*_0xdc1c9f;_0x24ca91[_0x4144dc(0x1d4)]['strokeDashoffset']=_0x5178f2;const _0x17a8a9={};_0x5a0b2b[_0x4144dc(0x191)](_0x3a5e5b=>{const _0x25b5ae=_0x4144dc,_0x57fef7=_0x3a5e5b[_0x25b5ae(0x104)]||_0x25b5ae(0x1b1);if(!_0x17a8a9[_0x57fef7]){const _0x737590='#'+_0x57fef7[_0x25b5ae(0x19d)]()[_0x25b5ae(0x13b)](0x0,0x6);_0x17a8a9[_0x57fef7]={'total':0x0,'done':0x0,'color':_0x737590};}_0x17a8a9[_0x57fef7][_0x25b5ae(0x129)]++;if(_0x3a5e5b[_0x25b5ae(0x16b)]===_0x25b5ae(0x154))_0x17a8a9[_0x57fef7][_0x25b5ae(0x15a)]++;});const _0x29c0f7=document[_0x4144dc(0x1cc)](_0x4144dc(0x18a));_0x29c0f7[_0x4144dc(0x152)]='';const _0xac44b1=Object['entries'](_0x17a8a9)[_0x4144dc(0x17a)]((_0x4bbb4f,_0x195de5)=>_0x195de5[0x1]['total']-_0x4bbb4f[0x1]['total']);if(_0xac44b1[_0x4144dc(0x14e)]===0x0){_0x29c0f7[_0x4144dc(0x152)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0xac44b1[_0x4144dc(0x191)](([_0x560fae,_0x49ee49])=>{const _0x3fba30=_0x4144dc,_0x45bbf8=Math[_0x3fba30(0x1c9)](_0x49ee49[_0x3fba30(0x15a)]/_0x49ee49[_0x3fba30(0x129)]*0x64),_0x4b930e=document[_0x3fba30(0xe8)]('div');_0x4b930e[_0x3fba30(0x113)]='client-stat-card',_0x4b930e[_0x3fba30(0x1d4)][_0x3fba30(0x14a)]=_0x49ee49[_0x3fba30(0x120)],_0x4b930e['innerHTML']=_0x3fba30(0xf0)+_0x560fae['substr'](0x0,0x5)+_0x3fba30(0xe7)+_0x49ee49[_0x3fba30(0x15a)]+_0x3fba30(0x158)+_0x49ee49['total']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x45bbf8+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x29c0f7[_0x3fba30(0x1b4)](_0x4b930e);});}function openDetails(_0x9ab946){const _0x5e1471=a3_0x75d7b1;currentSession=_0x9ab946;const _0x3ef8d8=new Date(_0x9ab946['dateStr']),_0x35f35d=_0x3ef8d8[_0x5e1471(0x1b2)](_0x5e1471(0x18c),{'weekday':_0x5e1471(0x168),'day':_0x5e1471(0x13f),'month':_0x5e1471(0x168)});document[_0x5e1471(0x1cc)](_0x5e1471(0x1ab))[_0x5e1471(0xf3)]=_0x35f35d[_0x5e1471(0x133)](0x0)['toUpperCase']()+_0x35f35d[_0x5e1471(0x1b6)](0x1),document[_0x5e1471(0x1cc)](_0x5e1471(0x14b))[_0x5e1471(0xf3)]=_0x9ab946[_0x5e1471(0x134)]+'\x20-\x20'+_0x9ab946[_0x5e1471(0x132)],document['getElementById'](_0x5e1471(0x172))[_0x5e1471(0xf3)]=_0x9ab946[_0x5e1471(0x1bf)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x1b6ba5=document[_0x5e1471(0x1cc)]('detStatus'),_0x44e6d4=document['getElementById'](_0x5e1471(0x178)),_0x259960=_0x44e6d4[_0x5e1471(0x10a)](_0x5e1471(0x12a)),_0x4f61e8=_0x44e6d4[_0x5e1471(0x10a)](_0x5e1471(0xfb)),_0x2c6abf=document[_0x5e1471(0x1cc)](_0x5e1471(0x1ce));if(_0x9ab946[_0x5e1471(0x16b)]==='completed')_0x1b6ba5[_0x5e1471(0xf3)]='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0x1b6ba5[_0x5e1471(0x1d4)][_0x5e1471(0x120)]=_0x5e1471(0x1ca),_0x44e6d4[_0x5e1471(0x1d4)][_0x5e1471(0x1d2)]=_0x5e1471(0x195);else{_0x1b6ba5[_0x5e1471(0xf3)]=_0x5e1471(0x127),_0x1b6ba5[_0x5e1471(0x1d4)][_0x5e1471(0x120)]=_0x5e1471(0x110),_0x44e6d4[_0x5e1471(0x1d4)][_0x5e1471(0x1d2)]=_0x5e1471(0x1a8);const _0x4bd0e1=new Date(_0x9ab946[_0x5e1471(0x198)]+'T'+_0x9ab946[_0x5e1471(0x134)]),_0x1620e=new Date(),_0x2c974c=(_0x4bd0e1-_0x1620e)/(0x3e8*0x3c*0x3c),_0x3fb5e3=coachProfiles[_0x9ab946['coachId']]&&coachProfiles[_0x9ab946['coachId']][_0x5e1471(0x11f)]?parseInt(coachProfiles[_0x9ab946[_0x5e1471(0x104)]]['cancel_window']):0x18;if(_0x3fb5e3===0x0||_0x2c974c>=_0x3fb5e3)_0x259960[_0x5e1471(0x1d4)]['display']=_0x5e1471(0x1a8),_0x4f61e8[_0x5e1471(0x1d4)][_0x5e1471(0x1d2)]=_0x5e1471(0x1a8),_0x2c6abf[_0x5e1471(0x1d4)][_0x5e1471(0x1d2)]=_0x5e1471(0x195);else{_0x259960[_0x5e1471(0x1d4)]['display']=_0x5e1471(0x195),_0x4f61e8['style'][_0x5e1471(0x1d2)]='none',_0x2c6abf[_0x5e1471(0x1d4)][_0x5e1471(0x1d2)]=_0x5e1471(0x1a8);let _0x983e29=_0x3fb5e3===0x0?_0x5e1471(0x1a4):_0x5e1471(0x186)+_0x3fb5e3+_0x5e1471(0x167);_0x2c6abf[_0x5e1471(0xf3)]='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x983e29+_0x5e1471(0x15f);}}document['getElementById']('overlay')[_0x5e1471(0x1d3)][_0x5e1471(0xe4)](_0x5e1471(0x1a6)),document['getElementById'](_0x5e1471(0x162))[_0x5e1471(0x1d3)][_0x5e1471(0xe4)]('open');}function closeAllSheets(){const _0x577111=a3_0x75d7b1;document['getElementById'](_0x577111(0x1cb))[_0x577111(0x1d3)][_0x577111(0x183)](_0x577111(0x1a6)),document['querySelectorAll'](_0x577111(0x1bc))[_0x577111(0x191)](_0x3fd049=>_0x3fd049[_0x577111(0x1d3)]['remove'](_0x577111(0xee)));}function openSheet(_0x205ab0){const _0x354fd7=a3_0x75d7b1;document[_0x354fd7(0x1cc)](_0x354fd7(0x1cb))['classList'][_0x354fd7(0xe4)](_0x354fd7(0x1a6)),document[_0x354fd7(0x1cc)](_0x205ab0)[_0x354fd7(0x1d3)][_0x354fd7(0xe4)](_0x354fd7(0xee));}function getLocalDateStr(_0x426a2e){const _0x47d65a=a3_0x75d7b1,_0x977dbf=_0x426a2e['getFullYear'](),_0x18f0ef=String(_0x426a2e[_0x47d65a(0x19c)]()+0x1)[_0x47d65a(0x14f)](0x2,'0'),_0x2ae23a=String(_0x426a2e[_0x47d65a(0x17c)]())[_0x47d65a(0x14f)](0x2,'0');return _0x977dbf+'-'+_0x18f0ef+'-'+_0x2ae23a;}function getStartOfWeek(_0x57762a){const _0x132c57=a3_0x75d7b1,_0x3dde7f=new Date(_0x57762a),_0x51c865=_0x3dde7f[_0x132c57(0x1c2)](),_0x52853c=_0x3dde7f['getDate']()-_0x51c865+(_0x51c865===0x0?-0x6:0x1);return _0x3dde7f['setDate'](_0x52853c),_0x3dde7f[_0x132c57(0x112)](0x0,0x0,0x0,0x0),_0x3dde7f;}function a3_0x3011(){const _0x3bba85=['.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','cancel_window','color','top','setAttribute','376968QQyBbO','planned','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','div','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','loadLocal','total','.btn-cancel','onClick','floor','ccTitle','.day-column','timeLineBadge','expand','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','end','charAt','start','blocked-range-part\x20stripe-bg','DOMContentLoaded','data','ccYesBtn','rs-time-btn','href','substr','min','timeColumn','onclick','numeric','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','Error\x20setting\x20back\x20button:','\x20–≤\x20','substring','week','332682FXREyW','log','anCustomDates','</div>','data-date','borderLeftColor','detTime','now','%\x20-\x204px)','length','padStart','.period-switch\x20.p-btn','ranges','innerHTML','querySelectorAll','completed','insertBefore','anEnd','disableVerticalSwipes','</span>\x20/\x20','–û—Ç–º–µ–Ω–µ–Ω–æ','done','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','6848660leYpLt','max','backgroundPosition','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','getFullYear','getHours','detailsSheet','Telegram','filter','customConfirm','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','\x20—á.','long','anStart','4501611kitgkI','status','stopPropagation','offsetLeft','scrollLeft','syncLoad','split','clientWidth','detNote','setBackgroundColor','</div><div\x20class=\x22rs-day-num\x22>','.day-col-header','data-day-idx','parse','cancelContainer','addEventListener','sort','custom','getDate','%\x20+\x202px)','getMinutes','WebApp','.rs-date-chip','#0a84ff','988jnNXlS','remove','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','calendar','–∑–∞\x20','getAttribute','width','scroll','analyticsList','(((.+)+)+)+$','ru-RU','visible','all','backgroundColor','exceptions','forEach','client_cancel','anTotalStats','reschedule','none','setDate','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','dateStr','15739200OsLNNk','POST','then','getMonth','toString','flex','#050505','getTime','BackButton','join','saveLocally','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','600','active','toUpperCase','block','pattern','zIndex','detDate','px\x200px','toLocaleString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','35gUNRoJ','\x20status-completed','Unknown','toLocaleDateString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','appendChild','initDataUnsafe','slice','left','fontWeight','8YRFOQW','2416Rvnzks','globalTimeLine','.sheet','<div\x20class=\x22dch-day\x22>','time-label','note','day-col-header\x20','Error\x20setting\x20color:','getDay','firstChild','day-column\x20','clients','colIndex','findIndex','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','round','var(--acc-green)','overlay','getElementById','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','cancelHint','<div\x20class=\x22rs-day-name\x22>','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','Critical\x20TMA\x20Error:','display','classList','style','mini','getItem','anDonutCircle','offsetWidth','.day-col-header[data-date=\x22',':00</span>','px\x20-','headerMonth','stringify','add','\x20-\x20','cancelled','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','createElement','map','gridColumns','setItem','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','button','open','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','client_load','applyData','textContent','auto','router.html','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','T00:00:00','uc_client_sessions','month','show','.btn-reschedule','initData','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','v9.5-CLIENT-ANALYTICS','daysHeaderTrack','<span>','T23:59:59','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','error','coachId','sid','1911816ltQcvm','rgba(','rescheduleSheet','rsDatesTrack','querySelector','get_slots','push','matrixViewport','rs-date-chip','calc(','var(--acc-blue)','json','setHours','className','height','today','keys','value','settings','clientId','scrollWidth','coach_profiles','rsSlotsGrid','search'];a3_0x3011=function(){return _0x3bba85;};return a3_0x3011();}function scrollToToday(){const _0x4abd67=getLocalDateStr(new Date());setTimeout(()=>{const _0x348a8f=a3_0x38bf,_0x34d5f8=document[_0x348a8f(0x10a)](_0x348a8f(0x1d9)+_0x4abd67+'\x22]');if(_0x34d5f8){const _0x259cf2=document[_0x348a8f(0x1cc)]('matrixViewport'),_0x338e51=_0x34d5f8['offsetLeft']-_0x259cf2[_0x348a8f(0x171)]/0x2+_0x34d5f8[_0x348a8f(0x1d8)]/0x2;_0x259cf2['scrollTo']({'left':_0x338e51,'behavior':_0x348a8f(0xf4)}),_0x259cf2['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x106c2d=a3_0x75d7b1,_0x249253=new Date(),_0xf03f1e=document[_0x106c2d(0x1cc)](_0x106c2d(0x1bb)),_0x25bb7b=document[_0x106c2d(0x1cc)](_0x106c2d(0x12f)),_0x4de12e=(_0x249253[_0x106c2d(0x161)]()*0x3c+_0x249253[_0x106c2d(0x17e)]())/0x3c*GRID_H;_0xf03f1e[_0x106c2d(0x1d4)]['top']=_0x4de12e+'px',_0xf03f1e[_0x106c2d(0x1d4)][_0x106c2d(0x1d2)]=_0x106c2d(0x1a8),_0x25bb7b['style'][_0x106c2d(0x121)]=_0x4de12e+'px',_0x25bb7b[_0x106c2d(0x1d4)][_0x106c2d(0x1d2)]=_0x106c2d(0x1a8),_0x25bb7b[_0x106c2d(0xf3)]=String(_0x249253[_0x106c2d(0x161)]())[_0x106c2d(0x14f)](0x2,'0')+':'+String(_0x249253[_0x106c2d(0x17e)]())['padStart'](0x2,'0');}function onScroll(){const _0x83e35c=a3_0x75d7b1,_0x1b2215=document[_0x83e35c(0x1cc)](_0x83e35c(0x10d)),_0x142041=document[_0x83e35c(0x153)](_0x83e35c(0x175));for(let _0x54f306 of _0x142041)if(_0x54f306['offsetLeft']>=_0x1b2215[_0x83e35c(0x16e)]){const _0x6ff92=new Date(_0x54f306['getAttribute']('data-date'));document[_0x83e35c(0x1cc)](_0x83e35c(0x1dc))['textContent']=_0x6ff92[_0x83e35c(0x1ad)]('ru',{'month':_0x83e35c(0x168)})[_0x83e35c(0x1a7)]()+'\x20'+_0x6ff92[_0x83e35c(0x160)]();break;}}function showToast(_0x5ed624){const _0x748a0c=a3_0x75d7b1,_0x143778=document[_0x748a0c(0x1cc)]('toast');_0x143778[_0x748a0c(0xf3)]=_0x5ed624,_0x143778[_0x748a0c(0x1d3)][_0x748a0c(0xe4)]('show'),setTimeout(()=>_0x143778['classList'][_0x748a0c(0x183)](_0x748a0c(0xfa)),0x7d0);}function handleInfiniteScroll(){const _0x58a25f=a3_0x75d7b1,_0x520fbf=document[_0x58a25f(0x1cc)](_0x58a25f(0x10d)),_0x130d51=_0x520fbf[_0x58a25f(0x16e)],_0x3fefb4=_0x520fbf[_0x58a25f(0x11a)],_0x1a1544=_0x520fbf[_0x58a25f(0x171)];if(_0x3fefb4-(_0x130d51+_0x1a1544)<0x12c){const _0x10a294=endOffset;endOffset+=0xe,renderDayRange(_0x10a294+0x1,endOffset),reRenderBlocks();}if(_0x130d51<0x12c){const _0x16f7fb=startOffset;startOffset-=0xe,prependDays(startOffset,_0x16f7fb-0x1),_0x520fbf[_0x58a25f(0x16e)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x4fd94a,_0x2c9269){const _0x2921b8=a3_0x75d7b1,_0x27018e=document[_0x2921b8(0x1cc)](_0x2921b8(0xff)),_0x52dd5f=document['getElementById'](_0x2921b8(0xea)),_0x3fd1c9=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1b0fcd=new Date();_0x1b0fcd[_0x2921b8(0x112)](0x0,0x0,0x0,0x0);const _0x396711=getLocalDateStr(new Date()),_0x59ea01=document['createDocumentFragment'](),_0x2f7e59=document['createDocumentFragment']();for(let _0x4d80b7=_0x4fd94a;_0x4d80b7<=_0x2c9269;_0x4d80b7++){const _0x5b0829=new Date(_0x1b0fcd);_0x5b0829[_0x2921b8(0x196)](_0x5b0829[_0x2921b8(0x17c)]()+_0x4d80b7);const _0x4a6b5e=getLocalDateStr(_0x5b0829);let _0x57d8d4=_0x5b0829[_0x2921b8(0x1c2)]()-0x1;if(_0x57d8d4===-0x1)_0x57d8d4=0x6;const _0x42182f=_0x4a6b5e===_0x396711,_0x2f7394=document[_0x2921b8(0xe8)](_0x2921b8(0x126));_0x2f7394[_0x2921b8(0x113)]=_0x2921b8(0x1c0)+(_0x42182f?_0x2921b8(0x115):''),_0x2f7394[_0x2921b8(0x122)]('data-date',_0x4a6b5e),_0x2f7394[_0x2921b8(0x152)]=_0x2921b8(0x1bd)+_0x3fd1c9[_0x57d8d4]+'</div><div\x20class=\x22dch-num\x22>'+_0x5b0829[_0x2921b8(0x17c)]()+_0x2921b8(0x148),_0x59ea01[_0x2921b8(0x1b4)](_0x2f7394);const _0x153c41=document[_0x2921b8(0xe8)](_0x2921b8(0x126));_0x153c41[_0x2921b8(0x113)]='day-column\x20'+(_0x42182f?_0x2921b8(0x115):''),_0x153c41[_0x2921b8(0x122)](_0x2921b8(0x149),_0x4a6b5e),_0x153c41[_0x2921b8(0x122)](_0x2921b8(0x176),_0x57d8d4),_0x2f7e59['appendChild'](_0x153c41);}_0x27018e[_0x2921b8(0x155)](_0x59ea01,_0x27018e[_0x2921b8(0x1c3)]),_0x52dd5f['insertBefore'](_0x2f7e59,_0x52dd5f['querySelector'](_0x2921b8(0x12e)));}function hexToRgba(_0x55496e,_0x4be38b){const _0x48e9dd=a3_0x75d7b1;let _0x3ce113;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x55496e))return _0x3ce113=_0x55496e[_0x48e9dd(0x143)](0x1)[_0x48e9dd(0x170)](''),_0x3ce113[_0x48e9dd(0x14e)]==0x3&&(_0x3ce113=[_0x3ce113[0x0],_0x3ce113[0x0],_0x3ce113[0x1],_0x3ce113[0x1],_0x3ce113[0x2],_0x3ce113[0x2]]),_0x3ce113='0x'+_0x3ce113[_0x48e9dd(0x1a2)](''),_0x48e9dd(0x107)+[_0x3ce113>>0x10&0xff,_0x3ce113>>0x8&0xff,_0x3ce113&0xff][_0x48e9dd(0x1a2)](',')+','+_0x4be38b+')';return'rgba(10,\x20132,\x20255,\x20'+_0x4be38b+')';}let confirmResolver=null;function showCustomConfirm(_0x7e7790,_0x421269,_0x2dfb5c=!![]){const _0x291855=a3_0x75d7b1;document[_0x291855(0x1cc)](_0x291855(0x12d))['textContent']=_0x7e7790,document[_0x291855(0x1cc)]('ccText')[_0x291855(0xf3)]=_0x421269;const _0x41723e=document['getElementById'](_0x291855(0x138));return _0x2dfb5c?(_0x41723e['style'][_0x291855(0x120)]='#ff453a',_0x41723e[_0x291855(0x1d4)]['fontWeight']=_0x291855(0x1a5)):(_0x41723e[_0x291855(0x1d4)][_0x291855(0x120)]=_0x291855(0x181),_0x41723e[_0x291855(0x1d4)][_0x291855(0x1b8)]=_0x291855(0x1a5)),new Promise(_0x4cddd3=>{const _0x16fb51=_0x291855;confirmResolver=_0x4cddd3,document[_0x16fb51(0x1cc)](_0x16fb51(0x165))[_0x16fb51(0x1d3)][_0x16fb51(0xe4)](_0x16fb51(0x18d));});}function resolveCustomConfirm(_0x1ce925){const _0xa249d9=a3_0x75d7b1;document[_0xa249d9(0x1cc)]('customConfirm')[_0xa249d9(0x1d3)][_0xa249d9(0x183)](_0xa249d9(0x18d));if(confirmResolver)confirmResolver(_0x1ce925);}async function tryCancelCurrentSession(){const _0x1a5fb3=a3_0x75d7b1;if(!currentSession)return;const _0x23bee7=await showCustomConfirm(_0x1a5fb3(0xf6),_0x1a5fb3(0x15b),!![]);if(!_0x23bee7)return;const _0x4026f9=currentSession;closeAllSheets(),sessions=sessions[_0x1a5fb3(0x164)](_0x17a217=>_0x17a217['id']!==_0x4026f9['id']),reRenderBlocks(),showToast(_0x1a5fb3(0x159)),lastUserActionTime=Date[_0x1a5fb3(0x14c)]();try{const _0x315c11=window['Telegram']?.[_0x1a5fb3(0x17f)],_0x1b569d=await fetch(API_URL,{'method':_0x1a5fb3(0x19a),'body':JSON['stringify']({'action':_0x1a5fb3(0x192),'init_data':_0x315c11?.[_0x1a5fb3(0xfc)]||'','coachId':_0x4026f9[_0x1a5fb3(0x104)],'dateStr':_0x4026f9[_0x1a5fb3(0x198)],'sessionId':_0x4026f9['id']})});if(_0x1b569d['ok'])DataManager[_0x1a5fb3(0x1a3)]();}catch(_0x48702c){showToast(_0x1a5fb3(0x125));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x1ac1ee=a3_0x75d7b1;if(!currentSession)return;document[_0x1ac1ee(0x1cc)]('detailsSheet')['classList'][_0x1ac1ee(0x183)](_0x1ac1ee(0xee)),document[_0x1ac1ee(0x1cc)](_0x1ac1ee(0x108))['classList'][_0x1ac1ee(0xe4)]('open');const _0x2a352f=document[_0x1ac1ee(0x1cc)](_0x1ac1ee(0x109)),_0x5ef067=document[_0x1ac1ee(0x1cc)](_0x1ac1ee(0x11c));_0x2a352f[_0x1ac1ee(0x152)]='',_0x5ef067[_0x1ac1ee(0x152)]=_0x1ac1ee(0x131);const [_0x17e5fe,_0x50380a]=currentSession[_0x1ac1ee(0x134)]['split'](':')['map'](Number),[_0x5a7bb9,_0x2106d0]=currentSession['end'][_0x1ac1ee(0x170)](':')[_0x1ac1ee(0xe9)](Number),_0xc5210e=_0x5a7bb9*0x3c+_0x2106d0-(_0x17e5fe*0x3c+_0x50380a);try{const _0x10b467=window[_0x1ac1ee(0x163)]?.['WebApp'],_0x33cace=await fetch(API_URL,{'method':_0x1ac1ee(0x19a),'body':JSON[_0x1ac1ee(0x1dd)]({'action':_0x1ac1ee(0x10b),'coachId':currentSession[_0x1ac1ee(0x104)],'duration':_0xc5210e,'init_data':_0x10b467?.[_0x1ac1ee(0xfc)]||'','excludeSessionId':currentSession['id']})}),_0x39e3ed=await _0x33cace[_0x1ac1ee(0x111)]();_0x39e3ed['ok']&&_0x39e3ed[_0x1ac1ee(0x137)]?(availableSlotsCache=_0x39e3ed['data'],renderRescheduleDates()):_0x5ef067[_0x1ac1ee(0x152)]=_0x1ac1ee(0x140);}catch(_0x36b910){_0x5ef067[_0x1ac1ee(0x152)]=_0x1ac1ee(0x1cd);}}function renderRescheduleDates(){const _0x3076e4=a3_0x75d7b1,_0x206be7=document[_0x3076e4(0x1cc)](_0x3076e4(0x109));_0x206be7['innerHTML']='';const _0x31d042=Object['keys'](availableSlotsCache)[_0x3076e4(0x17a)](),_0x1112c2=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x31d042[_0x3076e4(0x14e)]===0x0){document[_0x3076e4(0x1cc)]('rsSlotsGrid')[_0x3076e4(0x152)]=_0x3076e4(0x1d0);return;}_0x31d042['forEach']((_0x4d4f5a,_0x4655dc)=>{const _0x136763=_0x3076e4,_0x2782b1=new Date(_0x4d4f5a),_0x38090e=_0x1112c2[_0x2782b1[_0x136763(0x1c2)]()],_0x4ee3e2=_0x2782b1['getDate'](),_0x20c3b2=document[_0x136763(0xe8)](_0x136763(0x126));_0x20c3b2['className']=_0x136763(0x10e);if(_0x4655dc===0x0)_0x20c3b2[_0x136763(0x1d3)]['add'](_0x136763(0x1a6));_0x20c3b2['innerHTML']=_0x136763(0x1cf)+_0x38090e+_0x136763(0x174)+_0x4ee3e2+'</div>',_0x20c3b2[_0x136763(0x13e)]=()=>selectRsDate(_0x4d4f5a,_0x20c3b2),_0x206be7[_0x136763(0x1b4)](_0x20c3b2);}),selectRsDate(_0x31d042[0x0],_0x206be7['firstChild']);}function selectRsDate(_0x18c0a0,_0x2b453b){const _0x213451=a3_0x75d7b1;selectedRsDate=_0x18c0a0,document[_0x213451(0x153)](_0x213451(0x180))[_0x213451(0x191)](_0x30d487=>_0x30d487[_0x213451(0x1d3)]['remove'](_0x213451(0x1a6)));if(_0x2b453b)_0x2b453b[_0x213451(0x1d3)][_0x213451(0xe4)](_0x213451(0x1a6));const _0x29c56b=document[_0x213451(0x1cc)](_0x213451(0x11c));_0x29c56b['innerHTML']='';const _0x2a0a03=availableSlotsCache[_0x18c0a0]||[];if(_0x2a0a03[_0x213451(0x14e)]===0x0){_0x29c56b[_0x213451(0x152)]=_0x213451(0x140);return;}_0x2a0a03[_0x213451(0x191)](_0x1b377b=>{const _0x437ae2=_0x213451,_0x24d7e5=document[_0x437ae2(0xe8)](_0x437ae2(0xed));_0x24d7e5[_0x437ae2(0x113)]=_0x437ae2(0x139),_0x24d7e5[_0x437ae2(0xf3)]=_0x1b377b,_0x24d7e5['onclick']=()=>confirmReschedule(_0x1b377b),_0x29c56b[_0x437ae2(0x1b4)](_0x24d7e5);});}async function confirmReschedule(_0xf05ec1){const _0xf833b7=a3_0x75d7b1,_0x2694ff=new Date(selectedRsDate),_0x945a51=_0x2694ff[_0xf833b7(0x1b2)](_0xf833b7(0x18c),{'day':_0xf833b7(0x13f),'month':_0xf833b7(0x168)}),_0x5e20f0=await showCustomConfirm(_0xf833b7(0xef),'–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x945a51+_0xf833b7(0x142)+_0xf05ec1+'?',![]);if(!_0x5e20f0)return;closeAllSheets(),showToast(_0xf833b7(0x102)),lastUserActionTime=Date[_0xf833b7(0x14c)]();const _0x5bc88e=currentSession[_0xf833b7(0x198)],_0x87709e=currentSession['id'],[_0x3a5c94,_0x4636cd]=currentSession['start'][_0xf833b7(0x170)](':')[_0xf833b7(0xe9)](Number),[_0x134398,_0x40080f]=currentSession['end'][_0xf833b7(0x170)](':')[_0xf833b7(0xe9)](Number),_0x187c6a=_0x134398*0x3c+_0x40080f-(_0x3a5c94*0x3c+_0x4636cd),[_0x3bd809,_0x2cf4ed]=_0xf05ec1[_0xf833b7(0x170)](':')['map'](Number),_0x17842f=_0x3bd809*0x3c+_0x2cf4ed+_0x187c6a,_0x4074f9=Math[_0xf833b7(0x12c)](_0x17842f/0x3c),_0x91b08a=_0x17842f%0x3c,_0x111d67=String(_0x4074f9)['padStart'](0x2,'0')+':'+String(_0x91b08a)[_0xf833b7(0x14f)](0x2,'0'),_0x36e972=sessions[_0xf833b7(0x1c7)](_0x31cf6f=>_0x31cf6f['id']===_0x87709e);_0x36e972!==-0x1&&(sessions[_0x36e972][_0xf833b7(0x198)]=selectedRsDate,sessions[_0x36e972][_0xf833b7(0x134)]=_0xf05ec1,sessions[_0x36e972][_0xf833b7(0x132)]=_0x111d67,reRenderBlocks());try{const _0x40f1d9=window[_0xf833b7(0x163)]?.['WebApp'],_0xee50c4=await fetch(API_URL,{'method':'POST','body':JSON[_0xf833b7(0x1dd)]({'action':_0xf833b7(0x194),'init_data':_0x40f1d9?.[_0xf833b7(0xfc)]||'','oldSessionId':_0x87709e,'oldDate':_0x5bc88e,'newDate':selectedRsDate,'newTime':_0xf05ec1,'coachId':currentSession['coachId']})}),_0x352caf=await _0xee50c4[_0xf833b7(0x111)]();!_0x352caf['ok']?(showToast(_0xf833b7(0x1c8)),DataManager[_0xf833b7(0x16f)]()):(showToast(_0xf833b7(0xec)),DataManager[_0xf833b7(0x1a3)]());}catch(_0x370f46){showToast(_0xf833b7(0x125));}}document[a3_0x75d7b1(0x179)](a3_0x75d7b1(0x136),init);