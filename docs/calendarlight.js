const a3_0x42ed07=a3_0x18ce;(function(_0x2f0c90,_0x56abb9){const _0x29c7e8=a3_0x18ce,_0x3c7907=_0x2f0c90();while(!![]){try{const _0x47af0f=-parseInt(_0x29c7e8(0x257))/0x1*(parseInt(_0x29c7e8(0x2ee))/0x2)+parseInt(_0x29c7e8(0x2c1))/0x3*(parseInt(_0x29c7e8(0x232))/0x4)+parseInt(_0x29c7e8(0x201))/0x5*(parseInt(_0x29c7e8(0x280))/0x6)+parseInt(_0x29c7e8(0x22f))/0x7+parseInt(_0x29c7e8(0x20a))/0x8*(-parseInt(_0x29c7e8(0x2bf))/0x9)+parseInt(_0x29c7e8(0x29d))/0xa*(-parseInt(_0x29c7e8(0x2af))/0xb)+parseInt(_0x29c7e8(0x281))/0xc*(parseInt(_0x29c7e8(0x283))/0xd);if(_0x47af0f===_0x56abb9)break;else _0x3c7907['push'](_0x3c7907['shift']());}catch(_0x443a35){_0x3c7907['push'](_0x3c7907['shift']());}}}(a3_0x3c78,0x539e9));const APP_VERSION=a3_0x42ed07(0x208),API_URL=a3_0x42ed07(0x238),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS='uc_client_settings',KEY_CLIENTS='uc_client_list';let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x42ed07(0x299),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x4e7ded=a3_0x42ed07,_0x5d4331=(function(){let _0x32dea0=!![];return function(_0x3528c6,_0x40526d){const _0x368340=_0x32dea0?function(){if(_0x40526d){const _0x4c3798=_0x40526d['apply'](_0x3528c6,arguments);return _0x40526d=null,_0x4c3798;}}:function(){};return _0x32dea0=![],_0x368340;};}()),_0x26750b=_0x5d4331(this,function(){const _0x59206f=a3_0x18ce;return _0x26750b[_0x59206f(0x22c)]()[_0x59206f(0x221)](_0x59206f(0x29f))[_0x59206f(0x22c)]()['constructor'](_0x26750b)[_0x59206f(0x221)](_0x59206f(0x29f));});_0x26750b();try{const _0x5f273b=window[_0x4e7ded(0x2e0)]?.['WebApp'];if(!_0x5f273b)return;_0x5f273b[_0x4e7ded(0x2ab)](),_0x5f273b[_0x4e7ded(0x24c)]();try{_0x5f273b[_0x4e7ded(0x29a)]('#050505'),_0x5f273b[_0x4e7ded(0x2e7)]&&_0x5f273b[_0x4e7ded(0x2e7)](_0x4e7ded(0x295));}catch(_0x27e7a0){console[_0x4e7ded(0x1fd)](_0x4e7ded(0x2ac),_0x27e7a0);}try{_0x5f273b[_0x4e7ded(0x227)]&&(_0x5f273b[_0x4e7ded(0x227)]['show'](),_0x5f273b[_0x4e7ded(0x227)][_0x4e7ded(0x2ec)](),_0x5f273b['BackButton'][_0x4e7ded(0x235)](function(){const _0x4d58ec=_0x4e7ded;window[_0x4d58ec(0x271)][_0x4d58ec(0x2c8)]=_0x4d58ec(0x26a);}));}catch(_0x39caf7){console[_0x4e7ded(0x1fd)](_0x4e7ded(0x2eb),_0x39caf7);}try{if(_0x5f273b[_0x4e7ded(0x28f)])_0x5f273b[_0x4e7ded(0x28f)]();}catch(_0x2aa889){}}catch(_0xeda026){console[_0x4e7ded(0x289)](_0x4e7ded(0x231),_0xeda026);}}());function isAdmin(){const _0x5efeab=a3_0x42ed07;try{const _0xc0bbf0=Number(window['Telegram']?.[_0x5efeab(0x2d7)]?.[_0x5efeab(0x264)]?.[_0x5efeab(0x255)]?.['id']);return _0xc0bbf0===0xbaf7174;}catch(_0x3e156a){return![];}}const DataManager={'saveLocally'(){const _0x2356e6=a3_0x42ed07;try{localStorage[_0x2356e6(0x202)](KEY_SESSIONS,JSON[_0x2356e6(0x2a1)](sessions)),localStorage[_0x2356e6(0x202)](KEY_CLIENTS,JSON[_0x2356e6(0x2a1)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x2356e6(0x2a1)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x3c42d6){}},'loadLocal'(){const _0x3cb461=a3_0x42ed07;try{const _0x35e1d8=localStorage[_0x3cb461(0x23b)](KEY_SESSIONS);if(_0x35e1d8)sessions=JSON[_0x3cb461(0x220)](_0x35e1d8);const _0x14482a=localStorage['getItem'](KEY_CLIENTS);if(_0x14482a)clients=JSON[_0x3cb461(0x220)](_0x14482a);const _0x1f2a17=localStorage['getItem'](KEY_SETTINGS);if(_0x1f2a17){const _0x16fa92=JSON[_0x3cb461(0x220)](_0x1f2a17);if(_0x16fa92['pattern'])availabilityPattern=_0x16fa92[_0x3cb461(0x2c6)];if(_0x16fa92['ranges'])specialRanges=_0x16fa92[_0x3cb461(0x2a3)];if(_0x16fa92[_0x3cb461(0x2e3)])dateExceptions=_0x16fa92['exceptions'];}}catch(_0x4ac62f){}},async 'syncLoad'(){const _0x16b455=a3_0x42ed07,_0x2db1e1=new Date(),_0x44ba4c=_0x2db1e1[_0x16b455(0x23f)]()+'-'+String(_0x2db1e1[_0x16b455(0x237)]()+0x1)[_0x16b455(0x2bb)](0x2,'0'),_0x250d03=new Date(_0x2db1e1);_0x250d03[_0x16b455(0x2c0)](_0x2db1e1[_0x16b455(0x237)]()+0x1);const _0x20165d=_0x250d03[_0x16b455(0x23f)]()+'-'+String(_0x250d03['getMonth']()+0x1)[_0x16b455(0x2bb)](0x2,'0'),_0x18519a=Date['now']();try{const _0x52c5e6=window[_0x16b455(0x2e0)]?.[_0x16b455(0x2d7)],_0x1230f2=_0x52c5e6?.[_0x16b455(0x23c)]||'',[_0x36d856,_0x1f88cd]=await Promise[_0x16b455(0x2da)]([fetch(API_URL,{'method':_0x16b455(0x285),'body':JSON['stringify']({'action':_0x16b455(0x2b2),'init_data':_0x1230f2,'month_str':_0x44ba4c})})[_0x16b455(0x2f1)](_0x346ff2=>_0x346ff2['json']()),fetch(API_URL,{'method':_0x16b455(0x285),'body':JSON[_0x16b455(0x2a1)]({'action':_0x16b455(0x2b2),'init_data':_0x1230f2,'month_str':_0x20165d})})[_0x16b455(0x2f1)](_0x1e800a=>_0x1e800a['json']())]);if(lastUserActionTime>_0x18519a){console[_0x16b455(0x1fd)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x36d856['ok'])this[_0x16b455(0x245)](_0x36d856['data'],_0x44ba4c);if(_0x1f88cd['ok'])this[_0x16b455(0x245)](_0x1f88cd[_0x16b455(0x28d)],_0x20165d);this[_0x16b455(0x1f9)]();}catch(_0x417a7e){}},'applyData'(_0x4ec2c1,_0xb72f87){const _0xf503a1=a3_0x42ed07;if(!_0x4ec2c1)return;if(_0x4ec2c1[_0xf503a1(0x20b)]){if(_0x4ec2c1['settings'][_0xf503a1(0x2c6)])availabilityPattern=_0x4ec2c1[_0xf503a1(0x20b)][_0xf503a1(0x2c6)];if(_0x4ec2c1[_0xf503a1(0x20b)][_0xf503a1(0x2a3)])specialRanges=_0x4ec2c1[_0xf503a1(0x20b)][_0xf503a1(0x2a3)];if(_0x4ec2c1['settings'][_0xf503a1(0x2e3)])dateExceptions=_0x4ec2c1[_0xf503a1(0x20b)][_0xf503a1(0x2e3)];}if(_0x4ec2c1['clients']&&Array[_0xf503a1(0x2e6)](_0x4ec2c1[_0xf503a1(0x1ff)]))clients=_0x4ec2c1[_0xf503a1(0x1ff)];_0x4ec2c1[_0xf503a1(0x2a5)]&&(coachProfiles={...coachProfiles,..._0x4ec2c1[_0xf503a1(0x2a5)]}),_0x4ec2c1['calendar']&&(sessions=sessions[_0xf503a1(0x22d)](_0x245200=>!_0x245200['dateStr']['startsWith'](_0xb72f87)),Object['keys'](_0x4ec2c1[_0xf503a1(0x25b)])['forEach'](_0x20be85=>{const _0x52af3a=_0x4ec2c1['calendar'][_0x20be85];_0x52af3a['forEach'](_0x8ec8e=>{const _0x14554d=a3_0x18ce;sessions[_0x14554d(0x2cb)]({'id':_0x8ec8e['i'],'clientId':_0x8ec8e['c'],'coachId':_0x8ec8e[_0x14554d(0x207)],'dateStr':_0xb72f87+'-'+_0x20be85[_0x14554d(0x2bb)](0x2,'0'),'start':_0x8ec8e['s'],'end':_0x8ec8e['e'],'note':_0x8ec8e['n']||'','status':_0x8ec8e['st']||'planned','seriesId':_0x8ec8e[_0x14554d(0x27c)]});});})),reRenderBlocks();}};function init(){const _0x2f3c62=a3_0x42ed07;DataManager[_0x2f3c62(0x292)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x2f3c62(0x2ad)](_0x2f3c62(0x206))[_0x2f3c62(0x223)](_0x2f3c62(0x2b5),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x2f3c62(0x1f8)]();}function renderTimeColumn(){const _0x5522e9=a3_0x42ed07,_0x496063=document[_0x5522e9(0x2ad)]('timeColumn'),_0x42fe0f=document[_0x5522e9(0x2ad)](_0x5522e9(0x1f2));_0x496063['innerHTML']='',_0x496063[_0x5522e9(0x2dd)](_0x42fe0f);for(let _0x223dd8=0x0;_0x223dd8<0x18;_0x223dd8++){const _0xd3693b=document[_0x5522e9(0x297)](_0x5522e9(0x2aa));_0xd3693b[_0x5522e9(0x248)]='time-label';if(_0x223dd8>0x0)_0xd3693b[_0x5522e9(0x269)]=_0x5522e9(0x2b7)+String(_0x223dd8)[_0x5522e9(0x2bb)](0x2,'0')+_0x5522e9(0x205);_0x496063[_0x5522e9(0x2dd)](_0xd3693b);}}function renderDayRange(_0x5c6928,_0xcc705a){const _0xc47554=a3_0x42ed07,_0x195ad6=document[_0xc47554(0x2ad)](_0xc47554(0x26f)),_0x4e4e6d=document[_0xc47554(0x2ad)]('gridColumns'),_0xb9d487=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x433a95=new Date();_0x433a95[_0xc47554(0x2cd)](0x0,0x0,0x0,0x0);const _0x1af20f=getLocalDateStr(new Date());for(let _0x1fb9ed=_0x5c6928;_0x1fb9ed<=_0xcc705a;_0x1fb9ed++){const _0x46bb3d=new Date(_0x433a95);_0x46bb3d[_0xc47554(0x2e9)](_0x46bb3d['getDate']()+_0x1fb9ed);const _0x5320b2=getLocalDateStr(_0x46bb3d);let _0xd72545=_0x46bb3d[_0xc47554(0x270)]()-0x1;if(_0xd72545===-0x1)_0xd72545=0x6;const _0x252764=_0x5320b2===_0x1af20f,_0x346459=document['createElement'](_0xc47554(0x2aa));_0x346459[_0xc47554(0x248)]=_0xc47554(0x294)+(_0x252764?_0xc47554(0x2bd):''),_0x346459[_0xc47554(0x254)](_0xc47554(0x2c3),_0x5320b2),_0x346459[_0xc47554(0x269)]='<div\x20class=\x22dch-day\x22>'+_0xb9d487[_0xd72545]+'</div><div\x20class=\x22dch-num\x22>'+_0x46bb3d[_0xc47554(0x249)]()+_0xc47554(0x24a),_0x195ad6[_0xc47554(0x2dd)](_0x346459);const _0x5cecd3=document[_0xc47554(0x297)](_0xc47554(0x2aa));_0x5cecd3['className']=_0xc47554(0x2d6)+(_0x252764?_0xc47554(0x2bd):''),_0x5cecd3['setAttribute'](_0xc47554(0x2c3),_0x5320b2),_0x5cecd3[_0xc47554(0x254)](_0xc47554(0x1f6),_0xd72545),_0x4e4e6d[_0xc47554(0x2dd)](_0x5cecd3);}}function reRenderBlocks(){const _0x12c8b0=a3_0x42ed07;document[_0x12c8b0(0x1f4)](_0x12c8b0(0x21e))[_0x12c8b0(0x258)](_0x27ecdf=>{const _0x177a4f=_0x12c8b0;_0x27ecdf[_0x177a4f(0x1f4)](_0x177a4f(0x275))[_0x177a4f(0x258)](_0x51ea42=>_0x51ea42[_0x177a4f(0x28a)]());const _0x5e0cfd=_0x27ecdf[_0x177a4f(0x2bc)](_0x177a4f(0x2c3)),_0x1ff391=parseInt(_0x27ecdf['getAttribute'](_0x177a4f(0x1f6))),_0x40bd0d=Math[_0x177a4f(0x267)](_0x27ecdf[_0x177a4f(0x2cf)]);(availabilityPattern[_0x1ff391]||[])[_0x177a4f(0x258)](_0x152e66=>{const _0x3cc82e=_0x177a4f,_0x1da9c5=document['createElement'](_0x3cc82e(0x2aa));_0x1da9c5[_0x3cc82e(0x248)]=_0x3cc82e(0x230),_0x1da9c5['style']['top']=_0x152e66*GRID_H+'px',_0x1da9c5['style'][_0x3cc82e(0x2b8)]='-'+_0x40bd0d+_0x3cc82e(0x2d4)+_0x152e66*GRID_H+'px',_0x27ecdf[_0x3cc82e(0x2dd)](_0x1da9c5);});if(specialRanges[_0x177a4f(0x2c4)]>0x0){const _0x1315b9=new Date(_0x5e0cfd+_0x177a4f(0x2e8))['getTime'](),_0x370808=new Date(_0x5e0cfd+_0x177a4f(0x293))[_0x177a4f(0x273)]();specialRanges['forEach'](_0x3f2e80=>{const _0x388489=_0x177a4f,_0x48b72f=new Date(_0x3f2e80['start'])['getTime'](),_0x5cad71=new Date(_0x3f2e80['end'])[_0x388489(0x273)](),_0x226bea=Math[_0x388489(0x2be)](_0x1315b9,_0x48b72f),_0x230782=Math[_0x388489(0x272)](_0x370808,_0x5cad71);if(_0x226bea<_0x230782){const _0xe69709=(_0x226bea-_0x1315b9)/0x36ee80*GRID_H,_0x4e9ed5=(_0x230782-_0x226bea)/0x36ee80*GRID_H,_0x912f4a=document[_0x388489(0x297)](_0x388489(0x2aa));_0x4e9ed5>=23.5*GRID_H?(_0x912f4a['className']='day-off-overlay\x20stripe-bg',_0x912f4a['style'][_0x388489(0x2b8)]='-'+_0x40bd0d+'px\x200px'):(_0x912f4a['className']=_0x388489(0x200),_0x912f4a['style'][_0x388489(0x23d)]=_0xe69709+'px',_0x912f4a[_0x388489(0x253)][_0x388489(0x291)]=_0x4e9ed5+'px',_0x912f4a[_0x388489(0x253)][_0x388489(0x2b8)]='-'+_0x40bd0d+_0x388489(0x2d4)+_0xe69709+'px'),_0x27ecdf[_0x388489(0x2dd)](_0x912f4a);}});}renderEventsForColumn(_0x27ecdf,_0x5e0cfd);});}function renderEventsForColumn(_0x47655f,_0x2aabde){const _0x17f42d=a3_0x42ed07,_0x560f42=sessions[_0x17f42d(0x22d)](_0x514daf=>_0x514daf['dateStr']===_0x2aabde),_0x3eafab=_0x560f42[_0x17f42d(0x288)](_0x4206f1=>{const _0x5ed9a1=_0x17f42d,[_0x15b1ad,_0x3efeb8]=_0x4206f1[_0x5ed9a1(0x26e)][_0x5ed9a1(0x2c7)](':')[_0x5ed9a1(0x288)](Number),[_0x5a440d,_0x50835c]=_0x4206f1[_0x5ed9a1(0x21b)][_0x5ed9a1(0x2c7)](':')['map'](Number);return{'data':_0x4206f1,'start':_0x15b1ad*0x3c+_0x3efeb8,'end':_0x5a440d*0x3c+_0x50835c,'colIndex':0x0};});_0x3eafab[_0x17f42d(0x2d5)]((_0x5935b3,_0x5a7688)=>_0x5935b3[_0x17f42d(0x26e)]-_0x5a7688[_0x17f42d(0x26e)]||_0x5a7688[_0x17f42d(0x21b)]-_0x5a7688[_0x17f42d(0x26e)]-(_0x5935b3[_0x17f42d(0x21b)]-_0x5935b3['start']));const _0x3531bc=[];_0x3eafab[_0x17f42d(0x258)](_0xe449ef=>{const _0x257de2=_0x17f42d;let _0x41a5ee=![];for(let _0x347b18=0x0;_0x347b18<_0x3531bc[_0x257de2(0x2c4)];_0x347b18++){const _0x52b4b2=_0x3531bc[_0x347b18];if(_0xe449ef[_0x257de2(0x26e)]>=_0x52b4b2[_0x52b4b2[_0x257de2(0x2c4)]-0x1][_0x257de2(0x21b)]){_0x52b4b2['push'](_0xe449ef),_0xe449ef[_0x257de2(0x242)]=_0x347b18,_0x41a5ee=!![];break;}}!_0x41a5ee&&(_0x3531bc[_0x257de2(0x2cb)]([_0xe449ef]),_0xe449ef['colIndex']=_0x3531bc[_0x257de2(0x2c4)]-0x1);}),_0x3eafab[_0x17f42d(0x258)](_0xc20df0=>{const _0x353939=_0x17f42d;let _0xd74b57=0x0;_0x3eafab[_0x353939(0x258)](_0x57fe79=>{const _0x2e840b=_0x353939;if(Math[_0x2e840b(0x2be)](_0xc20df0[_0x2e840b(0x26e)],_0x57fe79[_0x2e840b(0x26e)])<Math[_0x2e840b(0x272)](_0xc20df0[_0x2e840b(0x21b)],_0x57fe79[_0x2e840b(0x21b)])&&_0x57fe79[_0x2e840b(0x242)]>_0xd74b57)_0xd74b57=_0x57fe79[_0x2e840b(0x242)];});const _0x5a0426=_0xd74b57+0x1,_0x598eb6=0x64/_0x5a0426,_0x557c16=_0xc20df0['colIndex']*_0x598eb6,_0xb75b47=document[_0x353939(0x297)](_0x353939(0x2aa)),_0xfb3af9=_0xc20df0[_0x353939(0x28d)];let _0x28689b=_0x353939(0x28c);if(clients&&clients[_0x353939(0x2c4)]>0x0){const _0x3812b1=clients[_0x353939(0x282)](_0x4ceeb4=>String(_0x4ceeb4['id'])===String(_0xfb3af9['clientId']));if(_0x3812b1&&_0x3812b1[_0x353939(0x278)])_0x28689b=_0x3812b1[_0x353939(0x278)];}const _0x40ebc5=_0xfb3af9[_0x353939(0x21f)]==='completed',_0x2c173f=_0x40ebc5?0x1:0.45;_0xb75b47['className']=_0x353939(0x2ed)+(_0x40ebc5?_0x353939(0x1fb):''),_0xb75b47['style'][_0x353939(0x240)]=hexToRgba(_0x28689b,_0x2c173f),_0xb75b47[_0x353939(0x253)][_0x353939(0x25d)]=_0x28689b;const _0x115b09=_0xc20df0['start']/0x3c*GRID_H,_0x47a540=(_0xc20df0['end']-_0xc20df0[_0x353939(0x26e)])/0x3c*GRID_H;_0xb75b47[_0x353939(0x253)]['top']=_0x115b09+'px',_0xb75b47['style']['height']=Math[_0x353939(0x2be)](_0x47a540,0x14)+'px',_0xb75b47[_0x353939(0x253)][_0x353939(0x1f7)]='calc('+_0x598eb6+_0x353939(0x24f),_0xb75b47['style'][_0x353939(0x2e4)]='calc('+_0x557c16+_0x353939(0x2cc),_0xb75b47[_0x353939(0x253)][_0x353939(0x2a2)]=0xa+_0xc20df0['colIndex'];if(_0x598eb6<0x55)_0xb75b47[_0x353939(0x26c)][_0x353939(0x212)](_0x353939(0x251));let _0x5b99d5='';if(_0xfb3af9[_0x353939(0x247)])_0x5b99d5+=_0x353939(0x1fe);if(_0x40ebc5)_0x5b99d5+=_0x353939(0x2d0);_0xb75b47['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0xfb3af9[_0x353939(0x26e)]+_0x353939(0x2a9)+_0xfb3af9[_0x353939(0x21b)]+_0x353939(0x2b4)+_0x5b99d5+_0x353939(0x2ca),_0xb75b47[_0x353939(0x2a8)]=_0x30594e=>{const _0x1bd586=_0x353939;_0x30594e[_0x1bd586(0x287)](),openDetails(_0xfb3af9);},_0x47655f[_0x353939(0x2dd)](_0xb75b47);});}function openAnalytics(){const _0x3c2e68=a3_0x42ed07,_0x81860d=document[_0x3c2e68(0x266)](_0x3c2e68(0x24e));setAnalyticsPeriod(_0x3c2e68(0x299),_0x81860d),openSheet(_0x3c2e68(0x29b));}function setAnalyticsPeriod(_0x355113,_0x263b5b){const _0x124603=a3_0x42ed07;currentAnPeriod=_0x355113,document[_0x124603(0x1f4)](_0x124603(0x24e))[_0x124603(0x258)](_0x1b9a38=>_0x1b9a38['classList'][_0x124603(0x28a)](_0x124603(0x268)));if(_0x263b5b)_0x263b5b[_0x124603(0x26c)][_0x124603(0x212)](_0x124603(0x268));const _0x4971d9=document[_0x124603(0x2ad)]('anCustomDates');_0x4971d9[_0x124603(0x253)]['display']=_0x355113==='custom'?_0x124603(0x20d):_0x124603(0x211);const _0x45fd59=new Date();let _0x86648c=new Date(),_0x5cc42e=new Date();if(_0x355113===_0x124603(0x299))_0x86648c=getStartOfWeek(_0x45fd59),_0x5cc42e=new Date(_0x86648c),_0x5cc42e[_0x124603(0x2e9)](_0x5cc42e[_0x124603(0x249)]()+0x6);else{if(_0x355113===_0x124603(0x25f))_0x86648c=new Date(_0x45fd59[_0x124603(0x23f)](),_0x45fd59[_0x124603(0x237)](),0x1),_0x5cc42e=new Date(_0x45fd59[_0x124603(0x23f)](),_0x45fd59[_0x124603(0x237)]()+0x1,0x0);else{!document[_0x124603(0x2ad)](_0x124603(0x234))[_0x124603(0x2e1)]&&(document[_0x124603(0x2ad)](_0x124603(0x234))[_0x124603(0x2e1)]=getLocalDateStr(_0x45fd59),document['getElementById'](_0x124603(0x263))[_0x124603(0x2e1)]=getLocalDateStr(_0x45fd59));refreshAnalytics();return;}}document[_0x124603(0x2ad)](_0x124603(0x234))['value']=getLocalDateStr(_0x86648c),document[_0x124603(0x2ad)]('anEnd')[_0x124603(0x2e1)]=getLocalDateStr(_0x5cc42e),refreshAnalytics();}function refreshAnalytics(){const _0x1301b2=a3_0x42ed07,_0xac7c6=document[_0x1301b2(0x2ad)]('anStart')[_0x1301b2(0x2e1)],_0x10fc09=document[_0x1301b2(0x2ad)](_0x1301b2(0x263))[_0x1301b2(0x2e1)];if(!_0xac7c6||!_0x10fc09)return;const _0x384fa1=sessions[_0x1301b2(0x22d)](_0x570ad4=>_0x570ad4[_0x1301b2(0x2ce)]>=_0xac7c6&&_0x570ad4[_0x1301b2(0x2ce)]<=_0x10fc09&&_0x570ad4['status']!==_0x1301b2(0x214)),_0x422678=_0x384fa1['length'],_0x1edb5a=_0x384fa1[_0x1301b2(0x22d)](_0x450c7a=>_0x450c7a['status']==='completed')[_0x1301b2(0x2c4)],_0x495d79=_0x422678>0x0?Math['round'](_0x1edb5a/_0x422678*0x64):0x0;document[_0x1301b2(0x2ad)]('anPercent')[_0x1301b2(0x2b6)]=_0x495d79+'%',document['getElementById'](_0x1301b2(0x252))['textContent']=_0x1edb5a+_0x1301b2(0x2de)+_0x422678+_0x1301b2(0x27f);const _0x423c55=document[_0x1301b2(0x2ad)](_0x1301b2(0x225)),_0x5299a8=0x2*Math['PI']*0x23,_0x56723e=_0x5299a8-_0x495d79/0x64*_0x5299a8;_0x423c55[_0x1301b2(0x253)]['strokeDashoffset']=_0x56723e;const _0x26c665={};_0x384fa1[_0x1301b2(0x258)](_0x1043a8=>{const _0x3f150f=_0x1301b2,_0x499d27=_0x1043a8[_0x3f150f(0x2c5)]||_0x3f150f(0x2d8);if(!_0x26c665[_0x499d27]){const _0xb30a22='#'+_0x499d27['toString']()[_0x3f150f(0x20c)](0x0,0x6);_0x26c665[_0x499d27]={'total':0x0,'done':0x0,'color':_0xb30a22};}_0x26c665[_0x499d27]['total']++;if(_0x1043a8[_0x3f150f(0x21f)]===_0x3f150f(0x265))_0x26c665[_0x499d27][_0x3f150f(0x226)]++;});const _0x296897=document[_0x1301b2(0x2ad)](_0x1301b2(0x27b));_0x296897[_0x1301b2(0x269)]='';const _0xf8d386=Object['entries'](_0x26c665)[_0x1301b2(0x2d5)]((_0x2de8c3,_0x5e2560)=>_0x5e2560[0x1][_0x1301b2(0x2b3)]-_0x2de8c3[0x1][_0x1301b2(0x2b3)]);if(_0xf8d386[_0x1301b2(0x2c4)]===0x0){_0x296897[_0x1301b2(0x269)]=_0x1301b2(0x250);return;}_0xf8d386[_0x1301b2(0x258)](([_0x20d125,_0x6ccab7])=>{const _0x2879ee=_0x1301b2,_0x1ba4d1=Math['round'](_0x6ccab7[_0x2879ee(0x226)]/_0x6ccab7[_0x2879ee(0x2b3)]*0x64),_0x43c333=document[_0x2879ee(0x297)](_0x2879ee(0x2aa));_0x43c333[_0x2879ee(0x248)]=_0x2879ee(0x219),_0x43c333[_0x2879ee(0x253)][_0x2879ee(0x25d)]=_0x6ccab7['color'],_0x43c333[_0x2879ee(0x269)]=_0x2879ee(0x284)+_0x20d125['substr'](0x0,0x5)+_0x2879ee(0x260)+_0x6ccab7[_0x2879ee(0x226)]+_0x2879ee(0x2ae)+_0x6ccab7[_0x2879ee(0x2b3)]+_0x2879ee(0x2a4)+_0x1ba4d1+_0x2879ee(0x229),_0x296897[_0x2879ee(0x2dd)](_0x43c333);});}function openDetails(_0x554ca9){const _0x168281=a3_0x42ed07;currentSession=_0x554ca9;const _0x2028ab=new Date(_0x554ca9[_0x168281(0x2ce)]),_0x30d430=_0x2028ab[_0x168281(0x29c)](_0x168281(0x25a),{'weekday':_0x168281(0x26d),'day':'numeric','month':_0x168281(0x26d)});document['getElementById'](_0x168281(0x27e))['textContent']=_0x30d430[_0x168281(0x215)](0x0)[_0x168281(0x21d)]()+_0x30d430[_0x168281(0x2a6)](0x1),document['getElementById'](_0x168281(0x244))[_0x168281(0x2b6)]=_0x554ca9[_0x168281(0x26e)]+_0x168281(0x2a9)+_0x554ca9['end'],document['getElementById'](_0x168281(0x296))[_0x168281(0x2b6)]=_0x554ca9[_0x168281(0x23e)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x55f811=document[_0x168281(0x2ad)](_0x168281(0x2e5)),_0x277082=document[_0x168281(0x2ad)]('cancelContainer'),_0x84cc94=_0x277082[_0x168281(0x266)](_0x168281(0x20e)),_0x40353a=_0x277082['querySelector']('.btn-reschedule'),_0x1cb035=document[_0x168281(0x2ad)](_0x168281(0x24b));if(_0x554ca9[_0x168281(0x21f)]===_0x168281(0x265))_0x55f811[_0x168281(0x2b6)]=_0x168281(0x1fa),_0x55f811[_0x168281(0x253)]['color']=_0x168281(0x2c9),_0x277082[_0x168281(0x253)][_0x168281(0x2dc)]=_0x168281(0x211);else{_0x55f811['textContent']=_0x168281(0x246),_0x55f811[_0x168281(0x253)][_0x168281(0x278)]=_0x168281(0x262),_0x277082['style'][_0x168281(0x2dc)]=_0x168281(0x22e);const _0xb3ee0e=new Date(_0x554ca9[_0x168281(0x2ce)]+'T'+_0x554ca9[_0x168281(0x26e)]),_0x14da77=new Date(),_0x4d5518=(_0xb3ee0e-_0x14da77)/(0x3e8*0x3c*0x3c),_0x17955e=coachProfiles[_0x554ca9[_0x168281(0x2c5)]]&&coachProfiles[_0x554ca9[_0x168281(0x2c5)]]['cancel_window']?parseInt(coachProfiles[_0x554ca9['coachId']]['cancel_window']):0x18;if(_0x17955e===0x0||_0x4d5518>=_0x17955e)_0x84cc94[_0x168281(0x253)][_0x168281(0x2dc)]='block',_0x40353a[_0x168281(0x253)][_0x168281(0x2dc)]=_0x168281(0x22e),_0x1cb035[_0x168281(0x253)][_0x168281(0x2dc)]=_0x168281(0x211);else{_0x84cc94['style'][_0x168281(0x2dc)]=_0x168281(0x211),_0x40353a[_0x168281(0x253)]['display']='none',_0x1cb035[_0x168281(0x253)][_0x168281(0x2dc)]=_0x168281(0x22e);let _0x47bc28=_0x17955e===0x0?_0x168281(0x203):_0x168281(0x222)+_0x17955e+_0x168281(0x236);_0x1cb035[_0x168281(0x2b6)]=_0x168281(0x2ba)+_0x47bc28+_0x168281(0x2ef);}}document[_0x168281(0x2ad)]('overlay')['classList'][_0x168281(0x212)](_0x168281(0x268)),document[_0x168281(0x2ad)]('detailsSheet')['classList'][_0x168281(0x212)](_0x168281(0x224));}function closeAllSheets(){const _0x22d487=a3_0x42ed07;document['getElementById'](_0x22d487(0x279))[_0x22d487(0x26c)]['remove'](_0x22d487(0x268)),document['querySelectorAll'](_0x22d487(0x20f))[_0x22d487(0x258)](_0x4dc928=>_0x4dc928[_0x22d487(0x26c)][_0x22d487(0x28a)](_0x22d487(0x224)));}function openSheet(_0x50917a){const _0x1e4c19=a3_0x42ed07;document[_0x1e4c19(0x2ad)](_0x1e4c19(0x279))[_0x1e4c19(0x26c)][_0x1e4c19(0x212)](_0x1e4c19(0x268)),document['getElementById'](_0x50917a)[_0x1e4c19(0x26c)][_0x1e4c19(0x212)](_0x1e4c19(0x224));}function getLocalDateStr(_0x17eabc){const _0x421568=a3_0x42ed07,_0x35e875=_0x17eabc[_0x421568(0x23f)](),_0x3a5993=String(_0x17eabc[_0x421568(0x237)]()+0x1)[_0x421568(0x2bb)](0x2,'0'),_0x16d522=String(_0x17eabc[_0x421568(0x249)]())[_0x421568(0x2bb)](0x2,'0');return _0x35e875+'-'+_0x3a5993+'-'+_0x16d522;}function getStartOfWeek(_0x5b0489){const _0x30735f=a3_0x42ed07,_0x34438b=new Date(_0x5b0489),_0x154be4=_0x34438b[_0x30735f(0x270)](),_0x2be029=_0x34438b[_0x30735f(0x249)]()-_0x154be4+(_0x154be4===0x0?-0x6:0x1);return _0x34438b[_0x30735f(0x2e9)](_0x2be029),_0x34438b[_0x30735f(0x2cd)](0x0,0x0,0x0,0x0),_0x34438b;}function scrollToToday(){const _0x384c88=getLocalDateStr(new Date());setTimeout(()=>{const _0x4f1f32=a3_0x18ce,_0xb3a815=document[_0x4f1f32(0x266)]('.day-col-header[data-date=\x22'+_0x384c88+'\x22]');if(_0xb3a815){const _0x3dbbac=document['getElementById'](_0x4f1f32(0x206)),_0x150ea6=_0xb3a815[_0x4f1f32(0x2cf)]-_0x3dbbac[_0x4f1f32(0x256)]/0x2+_0xb3a815[_0x4f1f32(0x27a)]/0x2;_0x3dbbac[_0x4f1f32(0x239)]({'left':_0x150ea6,'behavior':_0x4f1f32(0x2d9)}),_0x3dbbac[_0x4f1f32(0x2b1)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function a3_0x18ce(_0xe6cd88,_0x57af79){_0xe6cd88=_0xe6cd88-0x1f2;const _0x3d8201=a3_0x3c78();let _0x4a4acc=_0x3d8201[_0xe6cd88];return _0x4a4acc;}function a3_0x3c78(){const _0x4b72a4=['rs-time-btn','none','add','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','cancelled','charAt','now','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','client-stat-card','visible','end','createDocumentFragment','toUpperCase','.day-column','status','parse','search','–∑–∞\x20','addEventListener','open','anDonutCircle','done','BackButton','rsSlotsGrid','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','ccText','toString','filter','block','1700538hVaoWP','blocked-slot\x20stripe-bg','Critical\x20TMA\x20Error:','19676nhNdyl','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','anStart','onClick','\x20—á.','getMonth','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','scrollTo','show','getItem','initData','top','note','getFullYear','backgroundColor','scrollWidth','colIndex','.rs-date-chip','detTime','applyData','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','seriesId','className','getDate','</div>','cancelHint','expand','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','.period-switch\x20.p-btn','%\x20-\x204px)','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','mini','anTotalStats','style','setAttribute','user','clientWidth','8818pHqNMC','forEach','headerMonth','ru-RU','calendar','firstChild','borderLeftColor','DOMContentLoaded','month','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','getHours','var(--acc-blue)','anEnd','initDataUnsafe','completed','querySelector','round','active','innerHTML','router.html','600','classList','long','start','daysHeaderTrack','getDay','location','min','getTime','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','gridColumns','#ff453a','color','overlay','offsetWidth','analyticsList','sid','ccYesBtn','detDate','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','287418XlyiFc','3932196qAhwkv','find','13VrLAxy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','POST','rs-date-chip','stopPropagation','map','error','remove','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','#0a84ff','data','getMinutes','disableVerticalSwipes','toLocaleString','height','loadLocal','T23:59:59','day-col-header\x20','#050505','detNote','createElement','join','week','setHeaderColor','analyticsSheet','toLocaleDateString','76620DBoOlu','findIndex','(((.+)+)+)+$','button','stringify','zIndex','ranges','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','coach_profiles','slice','client_cancel','onclick','\x20-\x20','div','ready','Error\x20setting\x20color:','getElementById','</span>\x20/\x20','187eVAkAT','substring','scrollTop','client_load','total','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','scroll','textContent','<span>','backgroundPosition','</div><div\x20class=\x22dch-num\x22>','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','padStart','getAttribute','today','max','18uhLgxy','setMonth','315tBshTZ','insertBefore','data-date','length','coachId','pattern','split','href','var(--acc-green)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','push','%\x20+\x202px)','setHours','dateStr','offsetLeft','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','rsDatesTrack','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','ccTitle','px\x20-','sort','day-column\x20','WebApp','Unknown','auto','all','customConfirm','display','appendChild','\x20–∏–∑\x20','scrollLeft','Telegram','value','rescheduleSheet','exceptions','left','detStatus','isArray','setBackgroundColor','T00:00:00','setDate','json','Error\x20setting\x20back\x20button:','offClick','event-card','26FZCcjX','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','then','timeLineBadge','–û—Ç–º–µ–Ω–µ–Ω–æ','querySelectorAll','keys','data-day-idx','width','syncLoad','saveLocally','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','\x20status-completed','floor','log','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','clients','blocked-range-part\x20stripe-bg','5GQRdGM','setItem','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','fontWeight',':00</span>','matrixViewport','cid','v9.5-CLIENT-ANALYTICS','globalTimeLine','2190488bpoXDE','settings','substr','flex','.btn-cancel','.sheet'];a3_0x3c78=function(){return _0x4b72a4;};return a3_0x3c78();}function updateClock(){const _0x11c62a=a3_0x42ed07,_0x5c3d09=new Date(),_0x3f1fa8=document[_0x11c62a(0x2ad)](_0x11c62a(0x209)),_0x2ea51b=document['getElementById'](_0x11c62a(0x1f2)),_0x1c43a2=(_0x5c3d09['getHours']()*0x3c+_0x5c3d09['getMinutes']())/0x3c*GRID_H;_0x3f1fa8[_0x11c62a(0x253)][_0x11c62a(0x23d)]=_0x1c43a2+'px',_0x3f1fa8[_0x11c62a(0x253)][_0x11c62a(0x2dc)]='block',_0x2ea51b['style'][_0x11c62a(0x23d)]=_0x1c43a2+'px',_0x2ea51b[_0x11c62a(0x253)][_0x11c62a(0x2dc)]='block',_0x2ea51b['textContent']=String(_0x5c3d09[_0x11c62a(0x261)]())[_0x11c62a(0x2bb)](0x2,'0')+':'+String(_0x5c3d09[_0x11c62a(0x28e)]())['padStart'](0x2,'0');}function onScroll(){const _0x5d685c=a3_0x42ed07,_0x295ace=document['getElementById'](_0x5d685c(0x206)),_0x4da6b6=document['querySelectorAll']('.day-col-header');for(let _0x266d31 of _0x4da6b6)if(_0x266d31[_0x5d685c(0x2cf)]>=_0x295ace['scrollLeft']){const _0x4231d7=new Date(_0x266d31['getAttribute'](_0x5d685c(0x2c3)));document['getElementById'](_0x5d685c(0x259))[_0x5d685c(0x2b6)]=_0x4231d7[_0x5d685c(0x290)]('ru',{'month':_0x5d685c(0x26d)})[_0x5d685c(0x21d)]()+'\x20'+_0x4231d7[_0x5d685c(0x23f)]();break;}}function showToast(_0x3dd293){const _0x5ce0de=a3_0x42ed07,_0x4c160c=document[_0x5ce0de(0x2ad)]('toast');_0x4c160c[_0x5ce0de(0x2b6)]=_0x3dd293,_0x4c160c['classList']['add'](_0x5ce0de(0x23a)),setTimeout(()=>_0x4c160c['classList'][_0x5ce0de(0x28a)](_0x5ce0de(0x23a)),0x7d0);}function handleInfiniteScroll(){const _0x164c55=a3_0x42ed07,_0x2c999b=document[_0x164c55(0x2ad)](_0x164c55(0x206)),_0x1c7e7b=_0x2c999b[_0x164c55(0x2df)],_0x2a2c97=_0x2c999b[_0x164c55(0x241)],_0x31bfb4=_0x2c999b[_0x164c55(0x256)];if(_0x2a2c97-(_0x1c7e7b+_0x31bfb4)<0x12c){const _0x1ab2ee=endOffset;endOffset+=0xe,renderDayRange(_0x1ab2ee+0x1,endOffset),reRenderBlocks();}if(_0x1c7e7b<0x12c){const _0x400079=startOffset;startOffset-=0xe,prependDays(startOffset,_0x400079-0x1),_0x2c999b['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1df6d5,_0x133e3a){const _0x37fe9a=a3_0x42ed07,_0x32262b=document[_0x37fe9a(0x2ad)](_0x37fe9a(0x26f)),_0x43c910=document[_0x37fe9a(0x2ad)](_0x37fe9a(0x276)),_0x52ad41=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2ef367=new Date();_0x2ef367[_0x37fe9a(0x2cd)](0x0,0x0,0x0,0x0);const _0x249ec0=getLocalDateStr(new Date()),_0xaf4cc5=document[_0x37fe9a(0x21c)](),_0x114ccd=document['createDocumentFragment']();for(let _0x1f6be8=_0x1df6d5;_0x1f6be8<=_0x133e3a;_0x1f6be8++){const _0x38a1d8=new Date(_0x2ef367);_0x38a1d8[_0x37fe9a(0x2e9)](_0x38a1d8[_0x37fe9a(0x249)]()+_0x1f6be8);const _0x2a1dea=getLocalDateStr(_0x38a1d8);let _0x1ee151=_0x38a1d8[_0x37fe9a(0x270)]()-0x1;if(_0x1ee151===-0x1)_0x1ee151=0x6;const _0x5e00b0=_0x2a1dea===_0x249ec0,_0x275a74=document[_0x37fe9a(0x297)]('div');_0x275a74[_0x37fe9a(0x248)]=_0x37fe9a(0x294)+(_0x5e00b0?_0x37fe9a(0x2bd):''),_0x275a74[_0x37fe9a(0x254)]('data-date',_0x2a1dea),_0x275a74[_0x37fe9a(0x269)]='<div\x20class=\x22dch-day\x22>'+_0x52ad41[_0x1ee151]+_0x37fe9a(0x2b9)+_0x38a1d8['getDate']()+'</div>',_0xaf4cc5[_0x37fe9a(0x2dd)](_0x275a74);const _0x56ebc5=document[_0x37fe9a(0x297)](_0x37fe9a(0x2aa));_0x56ebc5[_0x37fe9a(0x248)]=_0x37fe9a(0x2d6)+(_0x5e00b0?_0x37fe9a(0x2bd):''),_0x56ebc5['setAttribute'](_0x37fe9a(0x2c3),_0x2a1dea),_0x56ebc5['setAttribute'](_0x37fe9a(0x1f6),_0x1ee151),_0x114ccd['appendChild'](_0x56ebc5);}_0x32262b[_0x37fe9a(0x2c2)](_0xaf4cc5,_0x32262b['firstChild']),_0x43c910['insertBefore'](_0x114ccd,_0x43c910[_0x37fe9a(0x266)](_0x37fe9a(0x21e)));}function hexToRgba(_0x2f2d8f,_0x5d18fb){const _0x3405ad=a3_0x42ed07;let _0x4c7f76;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x2f2d8f))return _0x4c7f76=_0x2f2d8f[_0x3405ad(0x2b0)](0x1)[_0x3405ad(0x2c7)](''),_0x4c7f76[_0x3405ad(0x2c4)]==0x3&&(_0x4c7f76=[_0x4c7f76[0x0],_0x4c7f76[0x0],_0x4c7f76[0x1],_0x4c7f76[0x1],_0x4c7f76[0x2],_0x4c7f76[0x2]]),_0x4c7f76='0x'+_0x4c7f76[_0x3405ad(0x298)](''),'rgba('+[_0x4c7f76>>0x10&0xff,_0x4c7f76>>0x8&0xff,_0x4c7f76&0xff][_0x3405ad(0x298)](',')+','+_0x5d18fb+')';return'rgba(10,\x20132,\x20255,\x20'+_0x5d18fb+')';}let confirmResolver=null;function showCustomConfirm(_0xfc6993,_0x511ad6,_0x29e72f=!![]){const _0x5f58d4=a3_0x42ed07;document[_0x5f58d4(0x2ad)](_0x5f58d4(0x2d3))['textContent']=_0xfc6993,document[_0x5f58d4(0x2ad)](_0x5f58d4(0x22b))[_0x5f58d4(0x2b6)]=_0x511ad6;const _0x4d9f8b=document['getElementById'](_0x5f58d4(0x27d));return _0x29e72f?(_0x4d9f8b[_0x5f58d4(0x253)][_0x5f58d4(0x278)]=_0x5f58d4(0x277),_0x4d9f8b[_0x5f58d4(0x253)][_0x5f58d4(0x204)]=_0x5f58d4(0x26b)):(_0x4d9f8b[_0x5f58d4(0x253)][_0x5f58d4(0x278)]=_0x5f58d4(0x28c),_0x4d9f8b['style'][_0x5f58d4(0x204)]='600'),new Promise(_0x1a2ab2=>{const _0x22a24b=_0x5f58d4;confirmResolver=_0x1a2ab2,document['getElementById'](_0x22a24b(0x2db))[_0x22a24b(0x26c)][_0x22a24b(0x212)](_0x22a24b(0x21a));});}function resolveCustomConfirm(_0x3ffe98){const _0x4b75b7=a3_0x42ed07;document[_0x4b75b7(0x2ad)](_0x4b75b7(0x2db))[_0x4b75b7(0x26c)][_0x4b75b7(0x28a)]('visible');if(confirmResolver)confirmResolver(_0x3ffe98);}async function tryCancelCurrentSession(){const _0x3412c2=a3_0x42ed07;if(!currentSession)return;const _0x54609e=await showCustomConfirm(_0x3412c2(0x274),_0x3412c2(0x2d2),!![]);if(!_0x54609e)return;const _0x248fef=currentSession;closeAllSheets(),sessions=sessions[_0x3412c2(0x22d)](_0x455d01=>_0x455d01['id']!==_0x248fef['id']),reRenderBlocks(),showToast(_0x3412c2(0x1f3)),lastUserActionTime=Date[_0x3412c2(0x216)]();try{const _0x22753c=window[_0x3412c2(0x2e0)]?.[_0x3412c2(0x2d7)],_0xe16430=await fetch(API_URL,{'method':_0x3412c2(0x285),'body':JSON['stringify']({'action':_0x3412c2(0x2a7),'init_data':_0x22753c?.[_0x3412c2(0x23c)]||'','coachId':_0x248fef[_0x3412c2(0x2c5)],'dateStr':_0x248fef[_0x3412c2(0x2ce)],'sessionId':_0x248fef['id']})});if(_0xe16430['ok'])DataManager[_0x3412c2(0x1f9)]();}catch(_0x37fbed){showToast(_0x3412c2(0x218));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xd7fb79=a3_0x42ed07;if(!currentSession)return;document[_0xd7fb79(0x2ad)]('detailsSheet')[_0xd7fb79(0x26c)]['remove'](_0xd7fb79(0x224)),document['getElementById'](_0xd7fb79(0x2e2))[_0xd7fb79(0x26c)]['add'](_0xd7fb79(0x224));const _0x334b4c=document['getElementById'](_0xd7fb79(0x2d1)),_0x24287e=document[_0xd7fb79(0x2ad)](_0xd7fb79(0x228));_0x334b4c[_0xd7fb79(0x269)]='',_0x24287e['innerHTML']=_0xd7fb79(0x213);const [_0x5c9d30,_0x5728a4]=currentSession[_0xd7fb79(0x26e)][_0xd7fb79(0x2c7)](':')['map'](Number),[_0x5e8b12,_0x2bcd76]=currentSession[_0xd7fb79(0x21b)][_0xd7fb79(0x2c7)](':')['map'](Number),_0x2053be=_0x5e8b12*0x3c+_0x2bcd76-(_0x5c9d30*0x3c+_0x5728a4);try{const _0x4805a7=window[_0xd7fb79(0x2e0)]?.[_0xd7fb79(0x2d7)],_0x59de3b=await fetch(API_URL,{'method':_0xd7fb79(0x285),'body':JSON[_0xd7fb79(0x2a1)]({'action':'get_slots','coachId':currentSession['coachId'],'duration':_0x2053be,'init_data':_0x4805a7?.[_0xd7fb79(0x23c)]||'','excludeSessionId':currentSession['id']})}),_0x456649=await _0x59de3b[_0xd7fb79(0x2ea)]();_0x456649['ok']&&_0x456649[_0xd7fb79(0x28d)]?(availableSlotsCache=_0x456649[_0xd7fb79(0x28d)],renderRescheduleDates()):_0x24287e['innerHTML']=_0xd7fb79(0x22a);}catch(_0x34a19b){_0x24287e[_0xd7fb79(0x269)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x42f90f=a3_0x42ed07,_0x412b85=document[_0x42f90f(0x2ad)](_0x42f90f(0x2d1));_0x412b85[_0x42f90f(0x269)]='';const _0x26baca=Object[_0x42f90f(0x1f5)](availableSlotsCache)['sort'](),_0x48a3f8=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x26baca['length']===0x0){document[_0x42f90f(0x2ad)]('rsSlotsGrid')['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x26baca['forEach']((_0x3fd285,_0x555eea)=>{const _0x578251=_0x42f90f,_0x2eb6f7=new Date(_0x3fd285),_0x306019=_0x48a3f8[_0x2eb6f7[_0x578251(0x270)]()],_0x3c8a73=_0x2eb6f7[_0x578251(0x249)](),_0x2730f4=document['createElement'](_0x578251(0x2aa));_0x2730f4['className']=_0x578251(0x286);if(_0x555eea===0x0)_0x2730f4[_0x578251(0x26c)]['add'](_0x578251(0x268));_0x2730f4[_0x578251(0x269)]='<div\x20class=\x22rs-day-name\x22>'+_0x306019+'</div><div\x20class=\x22rs-day-num\x22>'+_0x3c8a73+_0x578251(0x24a),_0x2730f4[_0x578251(0x2a8)]=()=>selectRsDate(_0x3fd285,_0x2730f4),_0x412b85[_0x578251(0x2dd)](_0x2730f4);}),selectRsDate(_0x26baca[0x0],_0x412b85[_0x42f90f(0x25c)]);}function selectRsDate(_0x59d2d8,_0x336074){const _0x2037b3=a3_0x42ed07;selectedRsDate=_0x59d2d8,document[_0x2037b3(0x1f4)](_0x2037b3(0x243))['forEach'](_0x4dbcf5=>_0x4dbcf5[_0x2037b3(0x26c)][_0x2037b3(0x28a)](_0x2037b3(0x268)));if(_0x336074)_0x336074[_0x2037b3(0x26c)]['add']('active');const _0x4d180c=document[_0x2037b3(0x2ad)](_0x2037b3(0x228));_0x4d180c[_0x2037b3(0x269)]='';const _0x2a35bf=availableSlotsCache[_0x59d2d8]||[];if(_0x2a35bf[_0x2037b3(0x2c4)]===0x0){_0x4d180c[_0x2037b3(0x269)]=_0x2037b3(0x22a);return;}_0x2a35bf[_0x2037b3(0x258)](_0x1c3b11=>{const _0x3ff24e=_0x2037b3,_0x1f3d32=document[_0x3ff24e(0x297)](_0x3ff24e(0x2a0));_0x1f3d32[_0x3ff24e(0x248)]=_0x3ff24e(0x210),_0x1f3d32['textContent']=_0x1c3b11,_0x1f3d32[_0x3ff24e(0x2a8)]=()=>confirmReschedule(_0x1c3b11),_0x4d180c['appendChild'](_0x1f3d32);});}async function confirmReschedule(_0x319a1f){const _0x17e693=a3_0x42ed07,_0x2b6b03=new Date(selectedRsDate),_0x56e2c2=_0x2b6b03[_0x17e693(0x29c)](_0x17e693(0x25a),{'day':'numeric','month':_0x17e693(0x26d)}),_0x15a91c=await showCustomConfirm(_0x17e693(0x24d),_0x17e693(0x28b)+_0x56e2c2+'\x20–≤\x20'+_0x319a1f+'?',![]);if(!_0x15a91c)return;closeAllSheets(),showToast(_0x17e693(0x233)),lastUserActionTime=Date[_0x17e693(0x216)]();const _0x368897=currentSession[_0x17e693(0x2ce)],_0x41bfb5=currentSession['id'],[_0x366454,_0x422259]=currentSession[_0x17e693(0x26e)][_0x17e693(0x2c7)](':')[_0x17e693(0x288)](Number),[_0x435c01,_0x125f39]=currentSession['end'][_0x17e693(0x2c7)](':')['map'](Number),_0x2533e4=_0x435c01*0x3c+_0x125f39-(_0x366454*0x3c+_0x422259),[_0x31f527,_0x9035cd]=_0x319a1f[_0x17e693(0x2c7)](':')['map'](Number),_0x5c6047=_0x31f527*0x3c+_0x9035cd+_0x2533e4,_0x37202a=Math[_0x17e693(0x1fc)](_0x5c6047/0x3c),_0x4cc5ad=_0x5c6047%0x3c,_0x2ebe91=String(_0x37202a)['padStart'](0x2,'0')+':'+String(_0x4cc5ad)[_0x17e693(0x2bb)](0x2,'0'),_0x37ca2c=sessions[_0x17e693(0x29e)](_0x4f4728=>_0x4f4728['id']===_0x41bfb5);_0x37ca2c!==-0x1&&(sessions[_0x37ca2c][_0x17e693(0x2ce)]=selectedRsDate,sessions[_0x37ca2c][_0x17e693(0x26e)]=_0x319a1f,sessions[_0x37ca2c]['end']=_0x2ebe91,reRenderBlocks());try{const _0x39bab3=window['Telegram']?.[_0x17e693(0x2d7)],_0xf37a8=await fetch(API_URL,{'method':'POST','body':JSON[_0x17e693(0x2a1)]({'action':'reschedule','init_data':_0x39bab3?.[_0x17e693(0x23c)]||'','oldSessionId':_0x41bfb5,'oldDate':_0x368897,'newDate':selectedRsDate,'newTime':_0x319a1f,'coachId':currentSession[_0x17e693(0x2c5)]})}),_0x5c1867=await _0xf37a8['json']();!_0x5c1867['ok']?(showToast(_0x17e693(0x217)),DataManager[_0x17e693(0x1f8)]()):(showToast(_0x17e693(0x2f0)),DataManager[_0x17e693(0x1f9)]());}catch(_0x2301e0){showToast(_0x17e693(0x218));}}document[a3_0x42ed07(0x223)](a3_0x42ed07(0x25e),init);