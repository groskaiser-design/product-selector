const a3_0xbe397b=a3_0x57bf;(function(_0x1ff639,_0x1fc739){const _0x242397=a3_0x57bf,_0xf7f8df=_0x1ff639();while(!![]){try{const _0x42e80e=-parseInt(_0x242397(0x274))/0x1*(parseInt(_0x242397(0x2ae))/0x2)+-parseInt(_0x242397(0x296))/0x3*(-parseInt(_0x242397(0x272))/0x4)+-parseInt(_0x242397(0x256))/0x5*(-parseInt(_0x242397(0x269))/0x6)+-parseInt(_0x242397(0x2bc))/0x7*(parseInt(_0x242397(0x2c2))/0x8)+parseInt(_0x242397(0x20b))/0x9+-parseInt(_0x242397(0x24e))/0xa+parseInt(_0x242397(0x2d2))/0xb*(parseInt(_0x242397(0x2d5))/0xc);if(_0x42e80e===_0x1fc739)break;else _0xf7f8df['push'](_0xf7f8df['shift']());}catch(_0x5b9c45){_0xf7f8df['push'](_0xf7f8df['shift']());}}}(a3_0x1185,0x983f5));const APP_VERSION=a3_0xbe397b(0x245),API_URL=a3_0xbe397b(0x267),GRID_H=0x3c,KEY_SESSIONS=a3_0xbe397b(0x27c),KEY_SETTINGS=a3_0xbe397b(0x232),KEY_CLIENTS=a3_0xbe397b(0x202);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0xdcf2b3=a3_0xbe397b,_0x39994c=(function(){let _0x27b54e=!![];return function(_0x2e52da,_0x2a181b){const _0x506980=_0x27b54e?function(){const _0x17ac5a=a3_0x57bf;if(_0x2a181b){const _0x5b1754=_0x2a181b[_0x17ac5a(0x290)](_0x2e52da,arguments);return _0x2a181b=null,_0x5b1754;}}:function(){};return _0x27b54e=![],_0x506980;};}()),_0x49d92f=_0x39994c(this,function(){const _0x327da0=a3_0x57bf;return _0x49d92f['toString']()['search'](_0x327da0(0x1f4))['toString']()[_0x327da0(0x25b)](_0x49d92f)[_0x327da0(0x2b6)](_0x327da0(0x1f4));});_0x49d92f();try{const _0x34e9c0=window['Telegram']?.['WebApp'];if(!_0x34e9c0)return;_0x34e9c0[_0xdcf2b3(0x231)](),_0x34e9c0['expand']();try{_0x34e9c0[_0xdcf2b3(0x237)]('#050505'),_0x34e9c0['setBackgroundColor']&&_0x34e9c0[_0xdcf2b3(0x227)](_0xdcf2b3(0x1e9));}catch(_0x1d6130){console['log'](_0xdcf2b3(0x2c3),_0x1d6130);}try{_0x34e9c0['BackButton']&&(_0x34e9c0[_0xdcf2b3(0x295)][_0xdcf2b3(0x26f)](),_0x34e9c0[_0xdcf2b3(0x295)][_0xdcf2b3(0x2b3)](),_0x34e9c0[_0xdcf2b3(0x295)]['onClick'](function(){const _0x3d14e5=_0xdcf2b3;window[_0x3d14e5(0x2b0)][_0x3d14e5(0x25e)]=_0x3d14e5(0x201);}));}catch(_0x2b0abe){console[_0xdcf2b3(0x262)](_0xdcf2b3(0x23f),_0x2b0abe);}try{if(_0x34e9c0[_0xdcf2b3(0x225)])_0x34e9c0[_0xdcf2b3(0x225)]();}catch(_0x188a4d){}}catch(_0x4c9fc2){console['error'](_0xdcf2b3(0x23e),_0x4c9fc2);}}());function a3_0x57bf(_0x4647c7,_0x2a8db5){_0x4647c7=_0x4647c7-0x1e7;const _0x2ed812=a3_0x1185();let _0x2a9fad=_0x2ed812[_0x4647c7];return _0x2a9fad;}function isAdmin(){const _0x3f38e8=a3_0xbe397b;try{const _0x4f8753=Number(window[_0x3f38e8(0x226)]?.[_0x3f38e8(0x254)]?.[_0x3f38e8(0x22d)]?.[_0x3f38e8(0x2ab)]?.['id']);return _0x4f8753===0xbaf7174;}catch(_0x166955){return![];}}const DataManager={'saveLocally'(){const _0x3a8502=a3_0xbe397b;try{localStorage[_0x3a8502(0x228)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x3a8502(0x228)](KEY_CLIENTS,JSON[_0x3a8502(0x2d9)](clients)),localStorage[_0x3a8502(0x228)](KEY_SETTINGS,JSON[_0x3a8502(0x2d9)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x18a287){}},'loadLocal'(){const _0x1b1bc9=a3_0xbe397b;try{const _0x280de2=localStorage[_0x1b1bc9(0x1fe)](KEY_SESSIONS);if(_0x280de2)sessions=JSON[_0x1b1bc9(0x2a5)](_0x280de2);const _0x3c28cf=localStorage[_0x1b1bc9(0x1fe)](KEY_CLIENTS);if(_0x3c28cf)clients=JSON[_0x1b1bc9(0x2a5)](_0x3c28cf);const _0x1eba04=localStorage[_0x1b1bc9(0x1fe)](KEY_SETTINGS);if(_0x1eba04){const _0x23f14d=JSON['parse'](_0x1eba04);if(_0x23f14d[_0x1b1bc9(0x283)])availabilityPattern=_0x23f14d[_0x1b1bc9(0x283)];if(_0x23f14d[_0x1b1bc9(0x253)])specialRanges=_0x23f14d[_0x1b1bc9(0x253)];if(_0x23f14d[_0x1b1bc9(0x2a0)])dateExceptions=_0x23f14d[_0x1b1bc9(0x2a0)];}}catch(_0x248201){}},async 'syncLoad'(){const _0x160c35=a3_0xbe397b,_0x5256c4=new Date(),_0x597520=_0x5256c4[_0x160c35(0x23d)]()+'-'+String(_0x5256c4[_0x160c35(0x218)]()+0x1)[_0x160c35(0x261)](0x2,'0'),_0x19d18e=new Date(_0x5256c4);_0x19d18e[_0x160c35(0x2c7)](_0x5256c4[_0x160c35(0x218)]()+0x1);const _0x4587d3=_0x19d18e[_0x160c35(0x23d)]()+'-'+String(_0x19d18e[_0x160c35(0x218)]()+0x1)['padStart'](0x2,'0'),_0x323168=Date[_0x160c35(0x209)]();try{const _0x50ad95=window[_0x160c35(0x226)]?.[_0x160c35(0x254)],_0x669da1=_0x50ad95?.[_0x160c35(0x2da)]||'',[_0x417f3a,_0x51536d]=await Promise['all']([fetch(API_URL,{'method':_0x160c35(0x26e),'body':JSON[_0x160c35(0x2d9)]({'action':_0x160c35(0x20e),'init_data':_0x669da1,'month_str':_0x597520})})[_0x160c35(0x1f3)](_0x555b9c=>_0x555b9c[_0x160c35(0x230)]()),fetch(API_URL,{'method':_0x160c35(0x26e),'body':JSON[_0x160c35(0x2d9)]({'action':_0x160c35(0x20e),'init_data':_0x669da1,'month_str':_0x4587d3})})[_0x160c35(0x1f3)](_0x30dba8=>_0x30dba8[_0x160c35(0x230)]())]);if(lastUserActionTime>_0x323168){console[_0x160c35(0x262)](_0x160c35(0x28f));return;}if(_0x417f3a['ok'])this['applyData'](_0x417f3a[_0x160c35(0x280)],_0x597520);if(_0x51536d['ok'])this['applyData'](_0x51536d[_0x160c35(0x280)],_0x4587d3);this[_0x160c35(0x25d)]();}catch(_0x4c5832){}},'applyData'(_0x549ecb,_0x222ad4){const _0x4dfb1d=a3_0xbe397b;if(!_0x549ecb)return;if(_0x549ecb[_0x4dfb1d(0x270)]){if(_0x549ecb[_0x4dfb1d(0x270)]['pattern'])availabilityPattern=_0x549ecb[_0x4dfb1d(0x270)][_0x4dfb1d(0x283)];if(_0x549ecb['settings'][_0x4dfb1d(0x253)])specialRanges=_0x549ecb[_0x4dfb1d(0x270)][_0x4dfb1d(0x253)];if(_0x549ecb['settings'][_0x4dfb1d(0x2a0)])dateExceptions=_0x549ecb[_0x4dfb1d(0x270)]['exceptions'];}if(_0x549ecb['clients']&&Array[_0x4dfb1d(0x1f0)](_0x549ecb[_0x4dfb1d(0x2d4)]))clients=_0x549ecb[_0x4dfb1d(0x2d4)];_0x549ecb[_0x4dfb1d(0x278)]&&(coachProfiles={...coachProfiles,..._0x549ecb[_0x4dfb1d(0x278)]}),_0x549ecb[_0x4dfb1d(0x29c)]&&(sessions=sessions[_0x4dfb1d(0x1fb)](_0x45ba9d=>!_0x45ba9d[_0x4dfb1d(0x28a)]['startsWith'](_0x222ad4)),Object[_0x4dfb1d(0x20a)](_0x549ecb[_0x4dfb1d(0x29c)])[_0x4dfb1d(0x1ec)](_0x46f921=>{const _0x4317df=_0x4dfb1d,_0x4d0dcc=_0x549ecb[_0x4317df(0x29c)][_0x46f921];_0x4d0dcc[_0x4317df(0x1ec)](_0x8d15c6=>{const _0x379a13=_0x4317df;sessions[_0x379a13(0x1e8)]({'id':_0x8d15c6['i'],'clientId':_0x8d15c6['c'],'coachId':_0x8d15c6[_0x379a13(0x233)],'dateStr':_0x222ad4+'-'+_0x46f921[_0x379a13(0x261)](0x2,'0'),'start':_0x8d15c6['s'],'end':_0x8d15c6['e'],'note':_0x8d15c6['n']||'','status':_0x8d15c6['st']||_0x379a13(0x250),'seriesId':_0x8d15c6['sid']});});})),reRenderBlocks();}};function init(){const _0x387db5=a3_0xbe397b;DataManager[_0x387db5(0x28b)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x387db5(0x236)](_0x387db5(0x214))[_0x387db5(0x249)](_0x387db5(0x297),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x274d3e=a3_0xbe397b,_0x5b9ae4=document[_0x274d3e(0x236)](_0x274d3e(0x223)),_0x1d588c=document[_0x274d3e(0x236)]('timeLineBadge');_0x5b9ae4[_0x274d3e(0x1e7)]='',_0x5b9ae4[_0x274d3e(0x21c)](_0x1d588c);for(let _0x3f6398=0x0;_0x3f6398<0x18;_0x3f6398++){const _0x40dd5d=document[_0x274d3e(0x2b9)]('div');_0x40dd5d['className']=_0x274d3e(0x299);if(_0x3f6398>0x0)_0x40dd5d[_0x274d3e(0x1e7)]=_0x274d3e(0x1ee)+String(_0x3f6398)[_0x274d3e(0x261)](0x2,'0')+_0x274d3e(0x273);_0x5b9ae4[_0x274d3e(0x21c)](_0x40dd5d);}}function renderDayRange(_0x4b67fa,_0x26ed24){const _0x1fa32c=a3_0xbe397b,_0x32ac78=document[_0x1fa32c(0x236)]('daysHeaderTrack'),_0x284cdf=document[_0x1fa32c(0x236)](_0x1fa32c(0x26d)),_0x3f5ecc=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x23dc0d=new Date();_0x23dc0d[_0x1fa32c(0x2c9)](0x0,0x0,0x0,0x0);const _0x333279=getLocalDateStr(new Date());for(let _0x5a858a=_0x4b67fa;_0x5a858a<=_0x26ed24;_0x5a858a++){const _0x39f6d5=new Date(_0x23dc0d);_0x39f6d5[_0x1fa32c(0x2bb)](_0x39f6d5[_0x1fa32c(0x271)]()+_0x5a858a);const _0x472f81=getLocalDateStr(_0x39f6d5);let _0x1541d5=_0x39f6d5[_0x1fa32c(0x20f)]()-0x1;if(_0x1541d5===-0x1)_0x1541d5=0x6;const _0x8682b=_0x472f81===_0x333279,_0x3fcad5=document[_0x1fa32c(0x2b9)]('div');_0x3fcad5[_0x1fa32c(0x26a)]=_0x1fa32c(0x211)+(_0x8682b?_0x1fa32c(0x257):''),_0x3fcad5[_0x1fa32c(0x2c6)](_0x1fa32c(0x2ca),_0x472f81),_0x3fcad5['innerHTML']=_0x1fa32c(0x1f6)+_0x3f5ecc[_0x1541d5]+_0x1fa32c(0x268)+_0x39f6d5[_0x1fa32c(0x271)]()+'</div>',_0x32ac78['appendChild'](_0x3fcad5);const _0x10dcab=document[_0x1fa32c(0x2b9)](_0x1fa32c(0x1f5));_0x10dcab['className']=_0x1fa32c(0x23b)+(_0x8682b?_0x1fa32c(0x257):''),_0x10dcab[_0x1fa32c(0x2c6)](_0x1fa32c(0x2ca),_0x472f81),_0x10dcab['setAttribute']('data-day-idx',_0x1541d5),_0x284cdf['appendChild'](_0x10dcab);}}function reRenderBlocks(){const _0xd66b3f=a3_0xbe397b;document['querySelectorAll'](_0xd66b3f(0x2ad))[_0xd66b3f(0x1ec)](_0x19a7a2=>{const _0x169b59=_0xd66b3f;_0x19a7a2[_0x169b59(0x240)](_0x169b59(0x1ef))['forEach'](_0x1cdd7b=>_0x1cdd7b[_0x169b59(0x266)]());const _0x4e05d0=_0x19a7a2['getAttribute'](_0x169b59(0x2ca)),_0x2278a1=parseInt(_0x19a7a2[_0x169b59(0x251)]('data-day-idx')),_0x45e219=Math[_0x169b59(0x2a8)](_0x19a7a2[_0x169b59(0x2b7)]);(availabilityPattern[_0x2278a1]||[])['forEach'](_0x15ad34=>{const _0x3c7434=_0x169b59,_0x18cfac=document['createElement']('div');_0x18cfac[_0x3c7434(0x26a)]='blocked-slot\x20stripe-bg',_0x18cfac[_0x3c7434(0x248)][_0x3c7434(0x27b)]=_0x15ad34*GRID_H+'px',_0x18cfac[_0x3c7434(0x248)][_0x3c7434(0x2a6)]='-'+_0x45e219+_0x3c7434(0x277)+_0x15ad34*GRID_H+'px',_0x19a7a2[_0x3c7434(0x21c)](_0x18cfac);});if(specialRanges['length']>0x0){const _0x4c5ecd=new Date(_0x4e05d0+_0x169b59(0x215))[_0x169b59(0x27a)](),_0x500b06=new Date(_0x4e05d0+'T23:59:59')[_0x169b59(0x27a)]();specialRanges[_0x169b59(0x1ec)](_0x39af54=>{const _0x47480c=_0x169b59,_0x1ca271=new Date(_0x39af54['start'])[_0x47480c(0x27a)](),_0x1e0477=new Date(_0x39af54[_0x47480c(0x27f)])[_0x47480c(0x27a)](),_0x7ad72b=Math[_0x47480c(0x26b)](_0x4c5ecd,_0x1ca271),_0x148222=Math['min'](_0x500b06,_0x1e0477);if(_0x7ad72b<_0x148222){const _0x394b56=(_0x7ad72b-_0x4c5ecd)/0x36ee80*GRID_H,_0x5ecfc9=(_0x148222-_0x7ad72b)/0x36ee80*GRID_H,_0x22198e=document[_0x47480c(0x2b9)](_0x47480c(0x1f5));_0x5ecfc9>=23.5*GRID_H?(_0x22198e[_0x47480c(0x26a)]=_0x47480c(0x21d),_0x22198e[_0x47480c(0x248)][_0x47480c(0x2a6)]='-'+_0x45e219+'px\x200px'):(_0x22198e['className']=_0x47480c(0x204),_0x22198e['style']['top']=_0x394b56+'px',_0x22198e[_0x47480c(0x248)][_0x47480c(0x252)]=_0x5ecfc9+'px',_0x22198e[_0x47480c(0x248)]['backgroundPosition']='-'+_0x45e219+_0x47480c(0x277)+_0x394b56+'px'),_0x19a7a2[_0x47480c(0x21c)](_0x22198e);}});}renderEventsForColumn(_0x19a7a2,_0x4e05d0);});}function renderEventsForColumn(_0x466ebf,_0x18a20c){const _0x1a387d=a3_0xbe397b,_0x2f7f0d=sessions[_0x1a387d(0x1fb)](_0x43b218=>_0x43b218[_0x1a387d(0x28a)]===_0x18a20c),_0x31d9f6=_0x2f7f0d['map'](_0x2ce1c3=>{const _0x2ef1ff=_0x1a387d,[_0x5d8998,_0xbffc61]=_0x2ce1c3['start'][_0x2ef1ff(0x276)](':')['map'](Number),[_0x466588,_0x5ccff9]=_0x2ce1c3['end'][_0x2ef1ff(0x276)](':')[_0x2ef1ff(0x21f)](Number);return{'data':_0x2ce1c3,'start':_0x5d8998*0x3c+_0xbffc61,'end':_0x466588*0x3c+_0x5ccff9,'colIndex':0x0};});_0x31d9f6[_0x1a387d(0x2a2)]((_0x4d92be,_0x5ea7c7)=>_0x4d92be[_0x1a387d(0x1eb)]-_0x5ea7c7[_0x1a387d(0x1eb)]||_0x5ea7c7[_0x1a387d(0x27f)]-_0x5ea7c7[_0x1a387d(0x1eb)]-(_0x4d92be['end']-_0x4d92be[_0x1a387d(0x1eb)]));const _0x1abd79=[];_0x31d9f6[_0x1a387d(0x1ec)](_0x109298=>{const _0x41f02e=_0x1a387d;let _0x377add=![];for(let _0x573dd6=0x0;_0x573dd6<_0x1abd79[_0x41f02e(0x2c5)];_0x573dd6++){const _0x1b4a4c=_0x1abd79[_0x573dd6];if(_0x109298[_0x41f02e(0x1eb)]>=_0x1b4a4c[_0x1b4a4c[_0x41f02e(0x2c5)]-0x1]['end']){_0x1b4a4c[_0x41f02e(0x1e8)](_0x109298),_0x109298['colIndex']=_0x573dd6,_0x377add=!![];break;}}!_0x377add&&(_0x1abd79['push']([_0x109298]),_0x109298[_0x41f02e(0x291)]=_0x1abd79[_0x41f02e(0x2c5)]-0x1);}),_0x31d9f6['forEach'](_0x191a10=>{const _0x4d6f09=_0x1a387d;let _0x6f0a85=0x0;_0x31d9f6[_0x4d6f09(0x1ec)](_0x4ec994=>{const _0x3a2cc7=_0x4d6f09;if(Math[_0x3a2cc7(0x26b)](_0x191a10[_0x3a2cc7(0x1eb)],_0x4ec994[_0x3a2cc7(0x1eb)])<Math['min'](_0x191a10[_0x3a2cc7(0x27f)],_0x4ec994[_0x3a2cc7(0x27f)])&&_0x4ec994[_0x3a2cc7(0x291)]>_0x6f0a85)_0x6f0a85=_0x4ec994[_0x3a2cc7(0x291)];});const _0x11f739=_0x6f0a85+0x1,_0x122ee2=0x64/_0x11f739,_0x327823=_0x191a10[_0x4d6f09(0x291)]*_0x122ee2,_0x4dbbde=document[_0x4d6f09(0x2b9)]('div'),_0x2a084d=_0x191a10[_0x4d6f09(0x280)];let _0x5c7039=_0x4d6f09(0x2cc);if(clients&&clients[_0x4d6f09(0x2c5)]>0x0){const _0x3b8e6e=clients[_0x4d6f09(0x2c1)](_0x5d014f=>String(_0x5d014f['id'])===String(_0x2a084d['clientId']));if(_0x3b8e6e&&_0x3b8e6e[_0x4d6f09(0x260)])_0x5c7039=_0x3b8e6e['color'];}const _0x3a1730=_0x2a084d[_0x4d6f09(0x220)]===_0x4d6f09(0x2ac),_0x210bc4=_0x3a1730?0x1:0.45;_0x4dbbde['className']=_0x4d6f09(0x23a)+(_0x3a1730?_0x4d6f09(0x206):''),_0x4dbbde[_0x4d6f09(0x248)][_0x4d6f09(0x24a)]=hexToRgba(_0x5c7039,_0x210bc4),_0x4dbbde[_0x4d6f09(0x248)][_0x4d6f09(0x288)]=_0x5c7039;const _0x43b9fb=_0x191a10[_0x4d6f09(0x1eb)]/0x3c*GRID_H,_0x333fb4=(_0x191a10[_0x4d6f09(0x27f)]-_0x191a10[_0x4d6f09(0x1eb)])/0x3c*GRID_H;_0x4dbbde['style'][_0x4d6f09(0x27b)]=_0x43b9fb+'px',_0x4dbbde[_0x4d6f09(0x248)][_0x4d6f09(0x252)]=Math[_0x4d6f09(0x26b)](_0x333fb4,0x14)+'px',_0x4dbbde[_0x4d6f09(0x248)]['width']=_0x4d6f09(0x2a4)+_0x122ee2+_0x4d6f09(0x292),_0x4dbbde[_0x4d6f09(0x248)][_0x4d6f09(0x2a3)]='calc('+_0x327823+_0x4d6f09(0x241),_0x4dbbde['style'][_0x4d6f09(0x2c4)]=0xa+_0x191a10['colIndex'];if(_0x122ee2<0x55)_0x4dbbde[_0x4d6f09(0x2b5)][_0x4d6f09(0x2a9)](_0x4d6f09(0x2bd));let _0x1e3f81='';if(_0x2a084d[_0x4d6f09(0x264)])_0x1e3f81+=_0x4d6f09(0x243);if(_0x3a1730)_0x1e3f81+=_0x4d6f09(0x1fa);_0x4dbbde[_0x4d6f09(0x1e7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x2a084d['start']+_0x4d6f09(0x2b8)+_0x2a084d[_0x4d6f09(0x27f)]+_0x4d6f09(0x246)+_0x1e3f81+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4dbbde[_0x4d6f09(0x203)]=_0x28d834=>{const _0x4b2b89=_0x4d6f09;_0x28d834[_0x4b2b89(0x29f)](),openDetails(_0x2a084d);},_0x466ebf[_0x4d6f09(0x21c)](_0x4dbbde);});}function openAnalytics(){const _0x4d0a9b=a3_0xbe397b,_0xba5986=document[_0x4d0a9b(0x2de)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x4d0a9b(0x28c),_0xba5986),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x240af6,_0x3c6e3d){const _0x596485=a3_0xbe397b;currentAnPeriod=_0x240af6,document[_0x596485(0x240)](_0x596485(0x29d))[_0x596485(0x1ec)](_0x582a9c=>_0x582a9c[_0x596485(0x2b5)][_0x596485(0x266)](_0x596485(0x289)));if(_0x3c6e3d)_0x3c6e3d[_0x596485(0x2b5)]['add'](_0x596485(0x289));const _0x5b3153=document[_0x596485(0x236)](_0x596485(0x28e));_0x5b3153[_0x596485(0x248)][_0x596485(0x1fd)]=_0x240af6===_0x596485(0x287)?_0x596485(0x29b):_0x596485(0x2a1);const _0x415c7b=new Date();let _0x21acd7=new Date(),_0x46e39b=new Date();if(_0x240af6===_0x596485(0x28c))_0x21acd7=getStartOfWeek(_0x415c7b),_0x46e39b=new Date(_0x21acd7),_0x46e39b[_0x596485(0x2bb)](_0x46e39b[_0x596485(0x271)]()+0x6);else{if(_0x240af6===_0x596485(0x2d1))_0x21acd7=new Date(_0x415c7b[_0x596485(0x23d)](),_0x415c7b['getMonth'](),0x1),_0x46e39b=new Date(_0x415c7b[_0x596485(0x23d)](),_0x415c7b[_0x596485(0x218)]()+0x1,0x0);else{!document['getElementById'](_0x596485(0x2db))[_0x596485(0x1ff)]&&(document[_0x596485(0x236)](_0x596485(0x2db))[_0x596485(0x1ff)]=getLocalDateStr(_0x415c7b),document['getElementById'](_0x596485(0x221))[_0x596485(0x1ff)]=getLocalDateStr(_0x415c7b));refreshAnalytics();return;}}document[_0x596485(0x236)](_0x596485(0x2db))['value']=getLocalDateStr(_0x21acd7),document['getElementById']('anEnd')[_0x596485(0x1ff)]=getLocalDateStr(_0x46e39b),refreshAnalytics();}function refreshAnalytics(){const _0x48ac42=a3_0xbe397b,_0x4cecdf=document['getElementById'](_0x48ac42(0x2db))[_0x48ac42(0x1ff)],_0x1ac084=document[_0x48ac42(0x236)](_0x48ac42(0x221))['value'];if(!_0x4cecdf||!_0x1ac084)return;const _0xd0d287=sessions[_0x48ac42(0x1fb)](_0x4f4f41=>_0x4f4f41['dateStr']>=_0x4cecdf&&_0x4f4f41[_0x48ac42(0x28a)]<=_0x1ac084&&_0x4f4f41[_0x48ac42(0x220)]!=='cancelled'),_0x133bfe=_0xd0d287[_0x48ac42(0x2c5)],_0xf97769=_0xd0d287[_0x48ac42(0x1fb)](_0x40842a=>_0x40842a[_0x48ac42(0x220)]===_0x48ac42(0x2ac))[_0x48ac42(0x2c5)],_0xdd84ff=_0x133bfe>0x0?Math['round'](_0xf97769/_0x133bfe*0x64):0x0;document[_0x48ac42(0x236)](_0x48ac42(0x224))[_0x48ac42(0x1ea)]=_0xdd84ff+'%',document['getElementById'](_0x48ac42(0x2ce))[_0x48ac42(0x1ea)]=_0xf97769+_0x48ac42(0x282)+_0x133bfe+_0x48ac42(0x265);const _0x1c210e=document[_0x48ac42(0x236)](_0x48ac42(0x1f8)),_0x554e6f=0x2*Math['PI']*0x23,_0x45be6b=_0x554e6f-_0xdd84ff/0x64*_0x554e6f;_0x1c210e[_0x48ac42(0x248)][_0x48ac42(0x216)]=_0x45be6b;const _0x1594df={};_0xd0d287[_0x48ac42(0x1ec)](_0x50464e=>{const _0x512040=_0x48ac42,_0x272c46=_0x50464e[_0x512040(0x255)]||_0x512040(0x29e);if(!_0x1594df[_0x272c46]){const _0x40d8f6='#'+_0x272c46['toString']()[_0x512040(0x2dc)](0x0,0x6);_0x1594df[_0x272c46]={'total':0x0,'done':0x0,'color':_0x40d8f6};}_0x1594df[_0x272c46][_0x512040(0x25c)]++;if(_0x50464e['status']===_0x512040(0x2ac))_0x1594df[_0x272c46][_0x512040(0x2b1)]++;});const _0x43852b=document[_0x48ac42(0x236)](_0x48ac42(0x222));_0x43852b['innerHTML']='';const _0x37c752=Object[_0x48ac42(0x279)](_0x1594df)[_0x48ac42(0x2a2)]((_0x35e115,_0x11bf1d)=>_0x11bf1d[0x1][_0x48ac42(0x25c)]-_0x35e115[0x1][_0x48ac42(0x25c)]);if(_0x37c752['length']===0x0){_0x43852b[_0x48ac42(0x1e7)]=_0x48ac42(0x29a);return;}_0x37c752[_0x48ac42(0x1ec)](([_0x4ada59,_0x5f05ad])=>{const _0x5da3c7=_0x48ac42,_0x1e0c5b=Math[_0x5da3c7(0x2a8)](_0x5f05ad[_0x5da3c7(0x2b1)]/_0x5f05ad[_0x5da3c7(0x25c)]*0x64),_0x472b50=document['createElement'](_0x5da3c7(0x1f5));_0x472b50[_0x5da3c7(0x26a)]=_0x5da3c7(0x2af),_0x472b50[_0x5da3c7(0x248)][_0x5da3c7(0x288)]=_0x5f05ad[_0x5da3c7(0x260)],_0x472b50[_0x5da3c7(0x1e7)]=_0x5da3c7(0x1f9)+_0x4ada59['substr'](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x5f05ad[_0x5da3c7(0x2b1)]+_0x5da3c7(0x2cf)+_0x5f05ad[_0x5da3c7(0x25c)]+_0x5da3c7(0x2c8)+_0x1e0c5b+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x43852b[_0x5da3c7(0x21c)](_0x472b50);});}function a3_0x1185(){const _0x5a3be9=['1217829vrzOzr','scroll','toLocaleDateString','time-label','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','flex','calendar','.period-switch\x20.p-btn','Unknown','stopPropagation','exceptions','none','sort','left','calc(','parse','backgroundPosition','cancelHint','round','add','\x20–≤\x20','user','completed','.day-column','2LbXyWd','client-stat-card','location','done','scrollTop','offClick','createDocumentFragment','classList','search','offsetLeft','\x20-\x20','createElement','</div>','setDate','1874677PXDWEE','mini','–∑–∞\x20','button','scrollLeft','find','8itDAGG','Error\x20setting\x20color:','zIndex','length','setAttribute','setMonth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','setHours','data-date','syncLoad','#0a84ff','.sheet','anTotalStats','</span>\x20/\x20','findIndex','month','4453075uFdtSR','rgba(','clients','12mDaHpp','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','test','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','stringify','initData','anStart','substr','</div><div\x20class=\x22rs-day-num\x22>','querySelector','innerHTML','push','#050505','textContent','start','forEach','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','<span>','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','isArray','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','firstChild','then','(((.+)+)+)+$','div','<div\x20class=\x22dch-day\x22>','toast','anDonutCircle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','filter','getMinutes','display','getItem','value','scrollWidth','router.html','uc_client_list','onclick','blocked-range-part\x20stripe-bg','toLocaleString','\x20status-completed','reschedule','getHours','now','keys','3582837qIcSgN','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','detTime','client_load','getDay','long','day-col-header\x20','rescheduleSheet','timeLineBadge','matrixViewport','T00:00:00','strokeDashoffset','detailsSheet','getMonth','visible','join','rgba(10,\x20132,\x20255,\x20','appendChild','day-off-overlay\x20stripe-bg','ccYesBtn','map','status','anEnd','analyticsList','timeColumn','anPercent','disableVerticalSwipes','Telegram','setBackgroundColor','setItem','insertBefore','get_slots','open','ru-RU','initDataUnsafe','rsDatesTrack','numeric','json','ready','uc_client_settings','cid','globalTimeLine','clientWidth','getElementById','setHeaderColor','fontWeight','600','event-card','day-column\x20','detNote','getFullYear','Critical\x20TMA\x20Error:','Error\x20setting\x20back\x20button:','querySelectorAll','%\x20+\x202px)','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','toUpperCase','v9.5-CLIENT-ANALYTICS','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.btn-cancel','style','addEventListener','backgroundColor','cancel_window','.rs-date-chip','<div\x20class=\x22rs-day-name\x22>','8649760GjTYqj','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','planned','getAttribute','height','ranges','WebApp','coachId','3390EdngFE','today','data-day-idx','slice','overlay','constructor','total','saveLocally','href','block','color','padStart','log','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','seriesId','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','remove','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','</div><div\x20class=\x22dch-num\x22>','5082HsGJEU','className','max','.btn-reschedule','gridColumns','POST','show','settings','getDate','4lywXtz',':00</span>','26735uUAjbk','–û—Ç–º–µ–Ω–µ–Ω–æ','split','px\x20-','coach_profiles','entries','getTime','top','uc_client_sessions','rsSlotsGrid','ccText','end','data','daysHeaderTrack','\x20–∏–∑\x20','pattern','detStatus','client_cancel','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','custom','borderLeftColor','active','dateStr','loadLocal','week','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','anCustomDates','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','apply','colIndex','%\x20-\x204px)','auto','rs-time-btn','BackButton'];a3_0x1185=function(){return _0x5a3be9;};return a3_0x1185();}function openDetails(_0x1b9da4){const _0x4cda82=a3_0xbe397b;currentSession=_0x1b9da4;const _0x2de4b7=new Date(_0x1b9da4[_0x4cda82(0x28a)]),_0x16393d=_0x2de4b7[_0x4cda82(0x298)](_0x4cda82(0x22c),{'weekday':_0x4cda82(0x210),'day':_0x4cda82(0x22f),'month':'long'});document[_0x4cda82(0x236)]('detDate')['textContent']=_0x16393d['charAt'](0x0)['toUpperCase']()+_0x16393d[_0x4cda82(0x259)](0x1),document[_0x4cda82(0x236)](_0x4cda82(0x20d))['textContent']=_0x1b9da4['start']+_0x4cda82(0x2b8)+_0x1b9da4[_0x4cda82(0x27f)],document[_0x4cda82(0x236)](_0x4cda82(0x23c))[_0x4cda82(0x1ea)]=_0x1b9da4['note']||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x5b32a3=document[_0x4cda82(0x236)](_0x4cda82(0x284)),_0x41843b=document[_0x4cda82(0x236)]('cancelContainer'),_0xa9b305=_0x41843b[_0x4cda82(0x2de)](_0x4cda82(0x247)),_0x534e5b=_0x41843b[_0x4cda82(0x2de)](_0x4cda82(0x26c)),_0x2f319a=document[_0x4cda82(0x236)](_0x4cda82(0x2a7));if(_0x1b9da4[_0x4cda82(0x220)]===_0x4cda82(0x2ac))_0x5b32a3[_0x4cda82(0x1ea)]='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0x5b32a3[_0x4cda82(0x248)][_0x4cda82(0x260)]='var(--acc-green)',_0x41843b[_0x4cda82(0x248)][_0x4cda82(0x1fd)]=_0x4cda82(0x2a1);else{_0x5b32a3[_0x4cda82(0x1ea)]=_0x4cda82(0x2d6),_0x5b32a3[_0x4cda82(0x248)][_0x4cda82(0x260)]='var(--acc-blue)',_0x41843b[_0x4cda82(0x248)][_0x4cda82(0x1fd)]='block';const _0x256371=new Date(_0x1b9da4[_0x4cda82(0x28a)]+'T'+_0x1b9da4['start']),_0x1f1acd=new Date(),_0x350d49=(_0x256371-_0x1f1acd)/(0x3e8*0x3c*0x3c),_0x4c7b10=coachProfiles[_0x1b9da4[_0x4cda82(0x255)]]&&coachProfiles[_0x1b9da4[_0x4cda82(0x255)]][_0x4cda82(0x24b)]?parseInt(coachProfiles[_0x1b9da4[_0x4cda82(0x255)]][_0x4cda82(0x24b)]):0x18;if(_0x4c7b10===0x0||_0x350d49>=_0x4c7b10)_0xa9b305['style'][_0x4cda82(0x1fd)]=_0x4cda82(0x25f),_0x534e5b[_0x4cda82(0x248)]['display']='block',_0x2f319a[_0x4cda82(0x248)][_0x4cda82(0x1fd)]=_0x4cda82(0x2a1);else{_0xa9b305[_0x4cda82(0x248)][_0x4cda82(0x1fd)]=_0x4cda82(0x2a1),_0x534e5b[_0x4cda82(0x248)][_0x4cda82(0x1fd)]='none',_0x2f319a[_0x4cda82(0x248)]['display']='block';let _0x57898a=_0x4c7b10===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x4cda82(0x2be)+_0x4c7b10+'\x20—á.';_0x2f319a['textContent']='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x57898a+_0x4cda82(0x28d);}}document[_0x4cda82(0x236)]('overlay')[_0x4cda82(0x2b5)][_0x4cda82(0x2a9)](_0x4cda82(0x289)),document[_0x4cda82(0x236)](_0x4cda82(0x217))[_0x4cda82(0x2b5)][_0x4cda82(0x2a9)](_0x4cda82(0x22b));}function closeAllSheets(){const _0x4af773=a3_0xbe397b;document['getElementById'](_0x4af773(0x25a))[_0x4af773(0x2b5)][_0x4af773(0x266)](_0x4af773(0x289)),document[_0x4af773(0x240)](_0x4af773(0x2cd))[_0x4af773(0x1ec)](_0x3f489e=>_0x3f489e[_0x4af773(0x2b5)]['remove']('open'));}function openSheet(_0x47fe4b){const _0x5e5227=a3_0xbe397b;document[_0x5e5227(0x236)](_0x5e5227(0x25a))['classList']['add']('active'),document[_0x5e5227(0x236)](_0x47fe4b)[_0x5e5227(0x2b5)]['add'](_0x5e5227(0x22b));}function getLocalDateStr(_0x4cde29){const _0x401656=a3_0xbe397b,_0x15f743=_0x4cde29[_0x401656(0x23d)](),_0x131573=String(_0x4cde29[_0x401656(0x218)]()+0x1)['padStart'](0x2,'0'),_0x28fb53=String(_0x4cde29[_0x401656(0x271)]())[_0x401656(0x261)](0x2,'0');return _0x15f743+'-'+_0x131573+'-'+_0x28fb53;}function getStartOfWeek(_0x3e45d5){const _0x271dbe=a3_0xbe397b,_0x47f7ec=new Date(_0x3e45d5),_0x41a441=_0x47f7ec[_0x271dbe(0x20f)](),_0x16c835=_0x47f7ec[_0x271dbe(0x271)]()-_0x41a441+(_0x41a441===0x0?-0x6:0x1);return _0x47f7ec['setDate'](_0x16c835),_0x47f7ec['setHours'](0x0,0x0,0x0,0x0),_0x47f7ec;}function scrollToToday(){const _0x1bf479=getLocalDateStr(new Date());setTimeout(()=>{const _0x4c4955=a3_0x57bf,_0x13be9f=document[_0x4c4955(0x2de)]('.day-col-header[data-date=\x22'+_0x1bf479+'\x22]');if(_0x13be9f){const _0x1c8d65=document[_0x4c4955(0x236)](_0x4c4955(0x214)),_0x35ca95=_0x13be9f[_0x4c4955(0x2b7)]-_0x1c8d65[_0x4c4955(0x235)]/0x2+_0x13be9f['offsetWidth']/0x2;_0x1c8d65['scrollTo']({'left':_0x35ca95,'behavior':_0x4c4955(0x293)}),_0x1c8d65[_0x4c4955(0x2b2)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4c4302=a3_0xbe397b,_0x2e3d12=new Date(),_0x14a6fe=document['getElementById'](_0x4c4302(0x234)),_0x23b298=document[_0x4c4302(0x236)](_0x4c4302(0x213)),_0x178f55=(_0x2e3d12[_0x4c4302(0x208)]()*0x3c+_0x2e3d12[_0x4c4302(0x1fc)]())/0x3c*GRID_H;_0x14a6fe[_0x4c4302(0x248)][_0x4c4302(0x27b)]=_0x178f55+'px',_0x14a6fe[_0x4c4302(0x248)][_0x4c4302(0x1fd)]=_0x4c4302(0x25f),_0x23b298[_0x4c4302(0x248)][_0x4c4302(0x27b)]=_0x178f55+'px',_0x23b298[_0x4c4302(0x248)]['display']=_0x4c4302(0x25f),_0x23b298[_0x4c4302(0x1ea)]=String(_0x2e3d12[_0x4c4302(0x208)]())[_0x4c4302(0x261)](0x2,'0')+':'+String(_0x2e3d12[_0x4c4302(0x1fc)]())[_0x4c4302(0x261)](0x2,'0');}function onScroll(){const _0x49d1a2=a3_0xbe397b,_0x4ae6d3=document[_0x49d1a2(0x236)](_0x49d1a2(0x214)),_0x3216a1=document[_0x49d1a2(0x240)]('.day-col-header');for(let _0x1d86bc of _0x3216a1)if(_0x1d86bc[_0x49d1a2(0x2b7)]>=_0x4ae6d3[_0x49d1a2(0x2c0)]){const _0x3af14a=new Date(_0x1d86bc[_0x49d1a2(0x251)](_0x49d1a2(0x2ca)));document[_0x49d1a2(0x236)]('headerMonth')[_0x49d1a2(0x1ea)]=_0x3af14a[_0x49d1a2(0x205)]('ru',{'month':_0x49d1a2(0x210)})[_0x49d1a2(0x244)]()+'\x20'+_0x3af14a[_0x49d1a2(0x23d)]();break;}}function showToast(_0x41c6bb){const _0x2be249=a3_0xbe397b,_0x56679f=document[_0x2be249(0x236)](_0x2be249(0x1f7));_0x56679f[_0x2be249(0x1ea)]=_0x41c6bb,_0x56679f[_0x2be249(0x2b5)][_0x2be249(0x2a9)](_0x2be249(0x26f)),setTimeout(()=>_0x56679f[_0x2be249(0x2b5)][_0x2be249(0x266)](_0x2be249(0x26f)),0x7d0);}function handleInfiniteScroll(){const _0x9b5ee=a3_0xbe397b,_0x5d3173=document[_0x9b5ee(0x236)]('matrixViewport'),_0xba3c86=_0x5d3173[_0x9b5ee(0x2c0)],_0x2ac1a0=_0x5d3173[_0x9b5ee(0x200)],_0x27f58f=_0x5d3173[_0x9b5ee(0x235)];if(_0x2ac1a0-(_0xba3c86+_0x27f58f)<0x12c){const _0x57b522=endOffset;endOffset+=0xe,renderDayRange(_0x57b522+0x1,endOffset),reRenderBlocks();}if(_0xba3c86<0x12c){const _0x551f91=startOffset;startOffset-=0xe,prependDays(startOffset,_0x551f91-0x1),_0x5d3173['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x31eee0,_0x596821){const _0x54a26f=a3_0xbe397b,_0x4619fc=document[_0x54a26f(0x236)](_0x54a26f(0x281)),_0x4890b7=document[_0x54a26f(0x236)]('gridColumns'),_0x37ebd5=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x367149=new Date();_0x367149[_0x54a26f(0x2c9)](0x0,0x0,0x0,0x0);const _0x1bea19=getLocalDateStr(new Date()),_0x138efd=document[_0x54a26f(0x2b4)](),_0x532d94=document[_0x54a26f(0x2b4)]();for(let _0xada8cc=_0x31eee0;_0xada8cc<=_0x596821;_0xada8cc++){const _0x55924f=new Date(_0x367149);_0x55924f['setDate'](_0x55924f['getDate']()+_0xada8cc);const _0x286ccb=getLocalDateStr(_0x55924f);let _0x3be129=_0x55924f['getDay']()-0x1;if(_0x3be129===-0x1)_0x3be129=0x6;const _0x107d6d=_0x286ccb===_0x1bea19,_0x3ff937=document[_0x54a26f(0x2b9)](_0x54a26f(0x1f5));_0x3ff937[_0x54a26f(0x26a)]='day-col-header\x20'+(_0x107d6d?_0x54a26f(0x257):''),_0x3ff937['setAttribute'](_0x54a26f(0x2ca),_0x286ccb),_0x3ff937['innerHTML']=_0x54a26f(0x1f6)+_0x37ebd5[_0x3be129]+'</div><div\x20class=\x22dch-num\x22>'+_0x55924f[_0x54a26f(0x271)]()+'</div>',_0x138efd['appendChild'](_0x3ff937);const _0x468ae4=document[_0x54a26f(0x2b9)]('div');_0x468ae4[_0x54a26f(0x26a)]='day-column\x20'+(_0x107d6d?_0x54a26f(0x257):''),_0x468ae4[_0x54a26f(0x2c6)](_0x54a26f(0x2ca),_0x286ccb),_0x468ae4[_0x54a26f(0x2c6)](_0x54a26f(0x258),_0x3be129),_0x532d94[_0x54a26f(0x21c)](_0x468ae4);}_0x4619fc['insertBefore'](_0x138efd,_0x4619fc[_0x54a26f(0x1f2)]),_0x4890b7[_0x54a26f(0x229)](_0x532d94,_0x4890b7[_0x54a26f(0x2de)]('.day-column'));}function hexToRgba(_0x4127b0,_0x47be54){const _0x3b1987=a3_0xbe397b;let _0x2cf358;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x3b1987(0x2d7)](_0x4127b0))return _0x2cf358=_0x4127b0['substring'](0x1)[_0x3b1987(0x276)](''),_0x2cf358[_0x3b1987(0x2c5)]==0x3&&(_0x2cf358=[_0x2cf358[0x0],_0x2cf358[0x0],_0x2cf358[0x1],_0x2cf358[0x1],_0x2cf358[0x2],_0x2cf358[0x2]]),_0x2cf358='0x'+_0x2cf358['join'](''),_0x3b1987(0x2d3)+[_0x2cf358>>0x10&0xff,_0x2cf358>>0x8&0xff,_0x2cf358&0xff][_0x3b1987(0x21a)](',')+','+_0x47be54+')';return _0x3b1987(0x21b)+_0x47be54+')';}let confirmResolver=null;function showCustomConfirm(_0x55260d,_0x2d54b7,_0xc5d36a=!![]){const _0x59be52=a3_0xbe397b;document[_0x59be52(0x236)]('ccTitle')[_0x59be52(0x1ea)]=_0x55260d,document[_0x59be52(0x236)](_0x59be52(0x27e))[_0x59be52(0x1ea)]=_0x2d54b7;const _0x2b2595=document[_0x59be52(0x236)](_0x59be52(0x21e));return _0xc5d36a?(_0x2b2595['style'][_0x59be52(0x260)]='#ff453a',_0x2b2595[_0x59be52(0x248)][_0x59be52(0x238)]=_0x59be52(0x239)):(_0x2b2595[_0x59be52(0x248)][_0x59be52(0x260)]=_0x59be52(0x2cc),_0x2b2595['style'][_0x59be52(0x238)]=_0x59be52(0x239)),new Promise(_0x12611f=>{const _0x1997d7=_0x59be52;confirmResolver=_0x12611f,document[_0x1997d7(0x236)]('customConfirm')[_0x1997d7(0x2b5)][_0x1997d7(0x2a9)](_0x1997d7(0x219));});}function resolveCustomConfirm(_0xac852a){const _0x2308f0=a3_0xbe397b;document['getElementById']('customConfirm')[_0x2308f0(0x2b5)][_0x2308f0(0x266)](_0x2308f0(0x219));if(confirmResolver)confirmResolver(_0xac852a);}async function tryCancelCurrentSession(){const _0x3f211e=a3_0xbe397b;if(!currentSession)return;const _0xdedd70=await showCustomConfirm(_0x3f211e(0x24f),_0x3f211e(0x263),!![]);if(!_0xdedd70)return;const _0x475753=currentSession;closeAllSheets(),sessions=sessions[_0x3f211e(0x1fb)](_0x5e5ab9=>_0x5e5ab9['id']!==_0x475753['id']),reRenderBlocks(),showToast(_0x3f211e(0x275)),lastUserActionTime=Date['now']();try{const _0x2bb817=window[_0x3f211e(0x226)]?.['WebApp'],_0x51edf2=await fetch(API_URL,{'method':_0x3f211e(0x26e),'body':JSON['stringify']({'action':_0x3f211e(0x285),'init_data':_0x2bb817?.[_0x3f211e(0x2da)]||'','coachId':_0x475753[_0x3f211e(0x255)],'dateStr':_0x475753[_0x3f211e(0x28a)],'sessionId':_0x475753['id']})});if(_0x51edf2['ok'])DataManager[_0x3f211e(0x25d)]();}catch(_0x488773){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x17eb6f=a3_0xbe397b;if(!currentSession)return;document[_0x17eb6f(0x236)](_0x17eb6f(0x217))[_0x17eb6f(0x2b5)][_0x17eb6f(0x266)]('open'),document[_0x17eb6f(0x236)](_0x17eb6f(0x212))[_0x17eb6f(0x2b5)][_0x17eb6f(0x2a9)]('open');const _0x55bf26=document[_0x17eb6f(0x236)](_0x17eb6f(0x22e)),_0x36a5a1=document['getElementById']('rsSlotsGrid');_0x55bf26[_0x17eb6f(0x1e7)]='',_0x36a5a1[_0x17eb6f(0x1e7)]=_0x17eb6f(0x242);const [_0x21b651,_0x169748]=currentSession[_0x17eb6f(0x1eb)][_0x17eb6f(0x276)](':')[_0x17eb6f(0x21f)](Number),[_0x5a5d0b,_0x28ff02]=currentSession[_0x17eb6f(0x27f)]['split'](':')[_0x17eb6f(0x21f)](Number),_0x496226=_0x5a5d0b*0x3c+_0x28ff02-(_0x21b651*0x3c+_0x169748);try{const _0x53028a=window[_0x17eb6f(0x226)]?.['WebApp'],_0x2570c1=await fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':_0x17eb6f(0x22a),'coachId':currentSession['coachId'],'duration':_0x496226,'init_data':_0x53028a?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x29a0f7=await _0x2570c1[_0x17eb6f(0x230)]();_0x29a0f7['ok']&&_0x29a0f7[_0x17eb6f(0x280)]?(availableSlotsCache=_0x29a0f7[_0x17eb6f(0x280)],renderRescheduleDates()):_0x36a5a1['innerHTML']=_0x17eb6f(0x1f1);}catch(_0x1e0377){_0x36a5a1[_0x17eb6f(0x1e7)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x4d7432=a3_0xbe397b,_0x27630e=document['getElementById'](_0x4d7432(0x22e));_0x27630e[_0x4d7432(0x1e7)]='';const _0x50b603=Object[_0x4d7432(0x20a)](availableSlotsCache)[_0x4d7432(0x2a2)](),_0x5594ba=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x50b603[_0x4d7432(0x2c5)]===0x0){document[_0x4d7432(0x236)](_0x4d7432(0x27d))['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x50b603[_0x4d7432(0x1ec)]((_0x37455d,_0x19fede)=>{const _0x41cf35=_0x4d7432,_0x3ea304=new Date(_0x37455d),_0x385bdd=_0x5594ba[_0x3ea304[_0x41cf35(0x20f)]()],_0x3b4bdb=_0x3ea304['getDate'](),_0x525ede=document[_0x41cf35(0x2b9)](_0x41cf35(0x1f5));_0x525ede[_0x41cf35(0x26a)]='rs-date-chip';if(_0x19fede===0x0)_0x525ede[_0x41cf35(0x2b5)][_0x41cf35(0x2a9)]('active');_0x525ede[_0x41cf35(0x1e7)]=_0x41cf35(0x24d)+_0x385bdd+_0x41cf35(0x2dd)+_0x3b4bdb+_0x41cf35(0x2ba),_0x525ede[_0x41cf35(0x203)]=()=>selectRsDate(_0x37455d,_0x525ede),_0x27630e[_0x41cf35(0x21c)](_0x525ede);}),selectRsDate(_0x50b603[0x0],_0x27630e[_0x4d7432(0x1f2)]);}function selectRsDate(_0x5115df,_0x4ea1c4){const _0x1946b8=a3_0xbe397b;selectedRsDate=_0x5115df,document[_0x1946b8(0x240)](_0x1946b8(0x24c))[_0x1946b8(0x1ec)](_0x44575f=>_0x44575f[_0x1946b8(0x2b5)][_0x1946b8(0x266)](_0x1946b8(0x289)));if(_0x4ea1c4)_0x4ea1c4['classList'][_0x1946b8(0x2a9)]('active');const _0x18ca29=document[_0x1946b8(0x236)]('rsSlotsGrid');_0x18ca29['innerHTML']='';const _0x1ff555=availableSlotsCache[_0x5115df]||[];if(_0x1ff555['length']===0x0){_0x18ca29[_0x1946b8(0x1e7)]=_0x1946b8(0x1f1);return;}_0x1ff555['forEach'](_0x4f56e4=>{const _0x50b0cc=_0x1946b8,_0x40ae2b=document[_0x50b0cc(0x2b9)](_0x50b0cc(0x2bf));_0x40ae2b[_0x50b0cc(0x26a)]=_0x50b0cc(0x294),_0x40ae2b[_0x50b0cc(0x1ea)]=_0x4f56e4,_0x40ae2b[_0x50b0cc(0x203)]=()=>confirmReschedule(_0x4f56e4),_0x18ca29[_0x50b0cc(0x21c)](_0x40ae2b);});}async function confirmReschedule(_0x3d69da){const _0x26e81d=a3_0xbe397b,_0x2740a8=new Date(selectedRsDate),_0x44c023=_0x2740a8[_0x26e81d(0x298)]('ru-RU',{'day':_0x26e81d(0x22f),'month':'long'}),_0x42ea20=await showCustomConfirm(_0x26e81d(0x2d8),_0x26e81d(0x20c)+_0x44c023+_0x26e81d(0x2aa)+_0x3d69da+'?',![]);if(!_0x42ea20)return;closeAllSheets(),showToast(_0x26e81d(0x286)),lastUserActionTime=Date[_0x26e81d(0x209)]();const _0x38d335=currentSession[_0x26e81d(0x28a)],_0x5119f8=currentSession['id'],[_0xaf49eb,_0x1750b4]=currentSession[_0x26e81d(0x1eb)][_0x26e81d(0x276)](':')[_0x26e81d(0x21f)](Number),[_0x4fd8f6,_0xb800e]=currentSession[_0x26e81d(0x27f)][_0x26e81d(0x276)](':')[_0x26e81d(0x21f)](Number),_0x39937c=_0x4fd8f6*0x3c+_0xb800e-(_0xaf49eb*0x3c+_0x1750b4),[_0x2a7b06,_0x1badc5]=_0x3d69da[_0x26e81d(0x276)](':')['map'](Number),_0x46759d=_0x2a7b06*0x3c+_0x1badc5+_0x39937c,_0x59d2c2=Math['floor'](_0x46759d/0x3c),_0x268e61=_0x46759d%0x3c,_0x3e74dd=String(_0x59d2c2)[_0x26e81d(0x261)](0x2,'0')+':'+String(_0x268e61)[_0x26e81d(0x261)](0x2,'0'),_0x5d0ceb=sessions[_0x26e81d(0x2d0)](_0xccb8d2=>_0xccb8d2['id']===_0x5119f8);_0x5d0ceb!==-0x1&&(sessions[_0x5d0ceb][_0x26e81d(0x28a)]=selectedRsDate,sessions[_0x5d0ceb][_0x26e81d(0x1eb)]=_0x3d69da,sessions[_0x5d0ceb][_0x26e81d(0x27f)]=_0x3e74dd,reRenderBlocks());try{const _0x5430bf=window['Telegram']?.[_0x26e81d(0x254)],_0x4d587e=await fetch(API_URL,{'method':'POST','body':JSON[_0x26e81d(0x2d9)]({'action':_0x26e81d(0x207),'init_data':_0x5430bf?.[_0x26e81d(0x2da)]||'','oldSessionId':_0x5119f8,'oldDate':_0x38d335,'newDate':selectedRsDate,'newTime':_0x3d69da,'coachId':currentSession['coachId']})}),_0x50f120=await _0x4d587e[_0x26e81d(0x230)]();!_0x50f120['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x26e81d(0x2cb)]()):(showToast(_0x26e81d(0x1ed)),DataManager[_0x26e81d(0x25d)]());}catch(_0xaa3d15){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0xbe397b(0x249)]('DOMContentLoaded',init);