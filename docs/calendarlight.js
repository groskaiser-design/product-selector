const a3_0x1f4976=a3_0x1352;(function(_0x3774a2,_0x2db290){const _0x250f52=a3_0x1352,_0x2510d2=_0x3774a2();while(!![]){try{const _0x3b123f=-parseInt(_0x250f52(0x157))/0x1*(parseInt(_0x250f52(0x15f))/0x2)+-parseInt(_0x250f52(0x9d))/0x3*(parseInt(_0x250f52(0x167))/0x4)+-parseInt(_0x250f52(0x158))/0x5*(parseInt(_0x250f52(0xca))/0x6)+parseInt(_0x250f52(0x121))/0x7*(parseInt(_0x250f52(0xe9))/0x8)+parseInt(_0x250f52(0x94))/0x9+-parseInt(_0x250f52(0xf8))/0xa*(-parseInt(_0x250f52(0x87))/0xb)+-parseInt(_0x250f52(0x117))/0xc*(-parseInt(_0x250f52(0x13d))/0xd);if(_0x3b123f===_0x2db290)break;else _0x2510d2['push'](_0x2510d2['shift']());}catch(_0x129854){_0x2510d2['push'](_0x2510d2['shift']());}}}(a3_0x5225,0x5feee));const APP_VERSION=a3_0x1f4976(0xa8),API_URL=a3_0x1f4976(0x89),GRID_H=0x3c,KEY_SESSIONS=a3_0x1f4976(0xed),KEY_SETTINGS=a3_0x1f4976(0x84),KEY_CLIENTS=a3_0x1f4976(0x83);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x1f4976(0x14d),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x4834d8=a3_0x1f4976,_0x287ea3=(function(){let _0x3a6fe7=!![];return function(_0x5f5005,_0x27f469){const _0x2b9ea9=_0x3a6fe7?function(){const _0x15481b=a3_0x1352;if(_0x27f469){const _0x4574e6=_0x27f469[_0x15481b(0xd0)](_0x5f5005,arguments);return _0x27f469=null,_0x4574e6;}}:function(){};return _0x3a6fe7=![],_0x2b9ea9;};}()),_0x3d80c2=_0x287ea3(this,function(){const _0x32afdf=a3_0x1352;return _0x3d80c2[_0x32afdf(0x9a)]()[_0x32afdf(0x136)]('(((.+)+)+)+$')[_0x32afdf(0x9a)]()[_0x32afdf(0xbb)](_0x3d80c2)['search'](_0x32afdf(0xac));});_0x3d80c2();try{const _0x5d8bdb=window['Telegram']?.[_0x4834d8(0x7d)];if(!_0x5d8bdb)return;_0x5d8bdb[_0x4834d8(0xd3)](),_0x5d8bdb[_0x4834d8(0x11e)]();try{_0x5d8bdb['setHeaderColor']('#050505'),_0x5d8bdb['setBackgroundColor']&&_0x5d8bdb['setBackgroundColor']('#050505');}catch(_0x3bf501){console[_0x4834d8(0x168)]('Error\x20setting\x20color:',_0x3bf501);}try{_0x5d8bdb[_0x4834d8(0x90)]&&(_0x5d8bdb[_0x4834d8(0x90)]['show'](),_0x5d8bdb[_0x4834d8(0x90)][_0x4834d8(0xf1)](),_0x5d8bdb[_0x4834d8(0x90)][_0x4834d8(0x99)](function(){const _0x5a827b=_0x4834d8;window[_0x5a827b(0x13f)][_0x5a827b(0xf2)]=_0x5a827b(0xcf);}));}catch(_0x35b2c0){console['log'](_0x4834d8(0x152),_0x35b2c0);}try{if(_0x5d8bdb['disableVerticalSwipes'])_0x5d8bdb[_0x4834d8(0xa2)]();}catch(_0x2354ca){}}catch(_0x5ebbf3){console[_0x4834d8(0xa6)](_0x4834d8(0xb3),_0x5ebbf3);}}());function isAdmin(){const _0x18fa86=a3_0x1f4976;try{const _0x1d22b6=Number(window[_0x18fa86(0xa7)]?.[_0x18fa86(0x7d)]?.[_0x18fa86(0x112)]?.['user']?.['id']);return _0x1d22b6===0xbaf7174;}catch(_0x328392){return![];}}const DataManager={'saveLocally'(){const _0x26cbc3=a3_0x1f4976;try{localStorage[_0x26cbc3(0xfc)](KEY_SESSIONS,JSON[_0x26cbc3(0x11f)](sessions)),localStorage[_0x26cbc3(0xfc)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x26cbc3(0x11f)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x16e833){}},'loadLocal'(){const _0x3a465d=a3_0x1f4976;try{const _0x2397c4=localStorage['getItem'](KEY_SESSIONS);if(_0x2397c4)sessions=JSON[_0x3a465d(0x137)](_0x2397c4);const _0x559146=localStorage[_0x3a465d(0xd1)](KEY_CLIENTS);if(_0x559146)clients=JSON[_0x3a465d(0x137)](_0x559146);const _0x34b59a=localStorage[_0x3a465d(0xd1)](KEY_SETTINGS);if(_0x34b59a){const _0x33ef01=JSON[_0x3a465d(0x137)](_0x34b59a);if(_0x33ef01[_0x3a465d(0x11a)])availabilityPattern=_0x33ef01[_0x3a465d(0x11a)];if(_0x33ef01['ranges'])specialRanges=_0x33ef01[_0x3a465d(0x81)];if(_0x33ef01[_0x3a465d(0x11b)])dateExceptions=_0x33ef01[_0x3a465d(0x11b)];}}catch(_0x29c2f7){}},async 'syncLoad'(){const _0x4dcd3c=a3_0x1f4976,_0x152d5e=new Date(),_0x235a64=_0x152d5e[_0x4dcd3c(0x104)]()+'-'+String(_0x152d5e[_0x4dcd3c(0xba)]()+0x1)[_0x4dcd3c(0x16e)](0x2,'0'),_0x5e2a95=new Date(_0x152d5e);_0x5e2a95[_0x4dcd3c(0x16b)](_0x152d5e['getMonth']()+0x1);const _0x229930=_0x5e2a95[_0x4dcd3c(0x104)]()+'-'+String(_0x5e2a95[_0x4dcd3c(0xba)]()+0x1)[_0x4dcd3c(0x16e)](0x2,'0'),_0x2fed27=Date[_0x4dcd3c(0xf3)]();try{const _0x5cefa9=window[_0x4dcd3c(0xa7)]?.[_0x4dcd3c(0x7d)],_0x2bec14=_0x5cefa9?.[_0x4dcd3c(0x150)]||'',[_0x365430,_0x2efc12]=await Promise[_0x4dcd3c(0xcd)]([fetch(API_URL,{'method':_0x4dcd3c(0x128),'body':JSON[_0x4dcd3c(0x11f)]({'action':_0x4dcd3c(0x101),'init_data':_0x2bec14,'month_str':_0x235a64})})[_0x4dcd3c(0xdf)](_0x4d830d=>_0x4d830d[_0x4dcd3c(0x8c)]()),fetch(API_URL,{'method':_0x4dcd3c(0x128),'body':JSON[_0x4dcd3c(0x11f)]({'action':_0x4dcd3c(0x101),'init_data':_0x2bec14,'month_str':_0x229930})})[_0x4dcd3c(0xdf)](_0x63a705=>_0x63a705[_0x4dcd3c(0x8c)]())]);if(lastUserActionTime>_0x2fed27){console['log']('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x365430['ok'])this[_0x4dcd3c(0x105)](_0x365430[_0x4dcd3c(0x10d)],_0x235a64);if(_0x2efc12['ok'])this[_0x4dcd3c(0x105)](_0x2efc12['data'],_0x229930);this[_0x4dcd3c(0x141)]();}catch(_0x3f94f4){}},'applyData'(_0x249c16,_0x4eb528){const _0x56daa8=a3_0x1f4976;if(!_0x249c16)return;if(_0x249c16[_0x56daa8(0x13b)]){if(_0x249c16[_0x56daa8(0x13b)][_0x56daa8(0x11a)])availabilityPattern=_0x249c16[_0x56daa8(0x13b)]['pattern'];if(_0x249c16[_0x56daa8(0x13b)]['ranges'])specialRanges=_0x249c16[_0x56daa8(0x13b)][_0x56daa8(0x81)];if(_0x249c16[_0x56daa8(0x13b)][_0x56daa8(0x11b)])dateExceptions=_0x249c16[_0x56daa8(0x13b)][_0x56daa8(0x11b)];}if(_0x249c16[_0x56daa8(0x160)]&&Array['isArray'](_0x249c16[_0x56daa8(0x160)]))clients=_0x249c16[_0x56daa8(0x160)];_0x249c16['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x249c16[_0x56daa8(0xc9)]}),_0x249c16[_0x56daa8(0x129)]&&(sessions=sessions[_0x56daa8(0x151)](_0xbbb261=>!_0xbbb261[_0x56daa8(0x12c)][_0x56daa8(0x125)](_0x4eb528)),Object[_0x56daa8(0xbe)](_0x249c16[_0x56daa8(0x129)])['forEach'](_0x5be8b2=>{const _0x2c7fbf=_0x56daa8,_0x369328=_0x249c16[_0x2c7fbf(0x129)][_0x5be8b2];_0x369328[_0x2c7fbf(0xd7)](_0x38700e=>{const _0x5874b0=_0x2c7fbf;sessions[_0x5874b0(0xd8)]({'id':_0x38700e['i'],'clientId':_0x38700e['c'],'coachId':_0x38700e[_0x5874b0(0xe6)],'dateStr':_0x4eb528+'-'+_0x5be8b2['padStart'](0x2,'0'),'start':_0x38700e['s'],'end':_0x38700e['e'],'note':_0x38700e['n']||'','status':_0x38700e['st']||_0x5874b0(0x11c),'seriesId':_0x38700e['sid']});});})),reRenderBlocks();}};function init(){const _0x2e9947=a3_0x1f4976;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x2e9947(0x91)](_0x2e9947(0x9c))[_0x2e9947(0xf6)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x2e9947(0x79)]();}function renderTimeColumn(){const _0x176e40=a3_0x1f4976,_0x3c2d4c=document[_0x176e40(0x91)]('timeColumn'),_0x4841da=document['getElementById'](_0x176e40(0x12b));_0x3c2d4c[_0x176e40(0xc3)]='',_0x3c2d4c[_0x176e40(0x12a)](_0x4841da);for(let _0x5b9ea5=0x0;_0x5b9ea5<0x18;_0x5b9ea5++){const _0x5dcb04=document[_0x176e40(0x8d)](_0x176e40(0xe5));_0x5dcb04['className']=_0x176e40(0x12f);if(_0x5b9ea5>0x0)_0x5dcb04['innerHTML']='<span>'+String(_0x5b9ea5)[_0x176e40(0x16e)](0x2,'0')+_0x176e40(0x115);_0x3c2d4c['appendChild'](_0x5dcb04);}}function renderDayRange(_0x3605cf,_0x1e0607){const _0x539c64=a3_0x1f4976,_0x198fd5=document[_0x539c64(0x91)](_0x539c64(0x11d)),_0x3a0e46=document[_0x539c64(0x91)](_0x539c64(0x133)),_0x4b40b3=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xd11af8=new Date();_0xd11af8[_0x539c64(0x114)](0x0,0x0,0x0,0x0);const _0x2e38d6=getLocalDateStr(new Date());for(let _0x26d875=_0x3605cf;_0x26d875<=_0x1e0607;_0x26d875++){const _0x46fb90=new Date(_0xd11af8);_0x46fb90[_0x539c64(0x140)](_0x46fb90[_0x539c64(0x155)]()+_0x26d875);const _0x3f5faf=getLocalDateStr(_0x46fb90);let _0x25383=_0x46fb90[_0x539c64(0xce)]()-0x1;if(_0x25383===-0x1)_0x25383=0x6;const _0x1a6e12=_0x3f5faf===_0x2e38d6,_0x4ea6d3=document[_0x539c64(0x8d)](_0x539c64(0xe5));_0x4ea6d3['className']=_0x539c64(0x131)+(_0x1a6e12?'today':''),_0x4ea6d3[_0x539c64(0x124)](_0x539c64(0x132),_0x3f5faf),_0x4ea6d3[_0x539c64(0xc3)]='<div\x20class=\x22dch-day\x22>'+_0x4b40b3[_0x25383]+'</div><div\x20class=\x22dch-num\x22>'+_0x46fb90[_0x539c64(0x155)]()+'</div>',_0x198fd5[_0x539c64(0x12a)](_0x4ea6d3);const _0x44c416=document[_0x539c64(0x8d)](_0x539c64(0xe5));_0x44c416[_0x539c64(0x85)]=_0x539c64(0x139)+(_0x1a6e12?_0x539c64(0xc8):''),_0x44c416[_0x539c64(0x124)](_0x539c64(0x132),_0x3f5faf),_0x44c416[_0x539c64(0x124)](_0x539c64(0x14c),_0x25383),_0x3a0e46[_0x539c64(0x12a)](_0x44c416);}}function reRenderBlocks(){const _0x23ffed=a3_0x1f4976;document[_0x23ffed(0xb5)]('.day-column')['forEach'](_0x4697e7=>{const _0x3009a2=_0x23ffed;_0x4697e7['querySelectorAll']('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')['forEach'](_0x4336fd=>_0x4336fd['remove']());const _0x586ccc=_0x4697e7[_0x3009a2(0xc7)]('data-date'),_0x3367c2=parseInt(_0x4697e7['getAttribute'](_0x3009a2(0x14c))),_0x1e7f3d=Math['round'](_0x4697e7[_0x3009a2(0x16d)]);(availabilityPattern[_0x3367c2]||[])['forEach'](_0x197991=>{const _0x5053a5=_0x3009a2,_0x31cf57=document[_0x5053a5(0x8d)](_0x5053a5(0xe5));_0x31cf57[_0x5053a5(0x85)]='blocked-slot\x20stripe-bg',_0x31cf57[_0x5053a5(0xd9)][_0x5053a5(0xe0)]=_0x197991*GRID_H+'px',_0x31cf57[_0x5053a5(0xd9)][_0x5053a5(0xb4)]='-'+_0x1e7f3d+_0x5053a5(0xd6)+_0x197991*GRID_H+'px',_0x4697e7[_0x5053a5(0x12a)](_0x31cf57);});if(specialRanges[_0x3009a2(0xc4)]>0x0){const _0x3dad25=new Date(_0x586ccc+'T00:00:00')[_0x3009a2(0x78)](),_0x4020c1=new Date(_0x586ccc+_0x3009a2(0x10b))[_0x3009a2(0x78)]();specialRanges[_0x3009a2(0xd7)](_0x4a9b73=>{const _0x9646e7=_0x3009a2,_0x2eca08=new Date(_0x4a9b73[_0x9646e7(0x122)])['getTime'](),_0x3127ce=new Date(_0x4a9b73[_0x9646e7(0xbf)])['getTime'](),_0x40d7f7=Math['max'](_0x3dad25,_0x2eca08),_0x22522d=Math[_0x9646e7(0x15d)](_0x4020c1,_0x3127ce);if(_0x40d7f7<_0x22522d){const _0xde5eba=(_0x40d7f7-_0x3dad25)/0x36ee80*GRID_H,_0x49442a=(_0x22522d-_0x40d7f7)/0x36ee80*GRID_H,_0x4ce264=document[_0x9646e7(0x8d)](_0x9646e7(0xe5));_0x49442a>=23.5*GRID_H?(_0x4ce264['className']=_0x9646e7(0x14b),_0x4ce264[_0x9646e7(0xd9)][_0x9646e7(0xb4)]='-'+_0x1e7f3d+'px\x200px'):(_0x4ce264[_0x9646e7(0x85)]=_0x9646e7(0xf7),_0x4ce264[_0x9646e7(0xd9)][_0x9646e7(0xe0)]=_0xde5eba+'px',_0x4ce264[_0x9646e7(0xd9)][_0x9646e7(0xa4)]=_0x49442a+'px',_0x4ce264[_0x9646e7(0xd9)][_0x9646e7(0xb4)]='-'+_0x1e7f3d+_0x9646e7(0xd6)+_0xde5eba+'px'),_0x4697e7['appendChild'](_0x4ce264);}});}renderEventsForColumn(_0x4697e7,_0x586ccc);});}function a3_0x5225(){const _0x36f85c=['–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','custom','min','.rs-date-chip','6gqaOTt','clients','borderLeftColor','\x20—á.','add','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','remove','detTime','3716eOcENQ','log','<div\x20class=\x22dch-day\x22>','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','setMonth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','offsetLeft','padStart','–∑–∞\x20','color','getTime','syncLoad','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','rs-time-btn','colIndex','WebApp','round','block','createDocumentFragment','ranges','600','uc_client_list','uc_client_settings','className','analyticsSheet','3210262KFqscC','stopPropagation','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','scrollWidth','clientWidth','json','createElement','getMinutes','</span>\x20/\x20','BackButton','getElementById','calc(','left','999459VALgzr','open','Unknown','done','mini','onClick','toString','event-card','matrixViewport','2049MmovTn','completed','</div><div\x20class=\x22dch-num\x22>','rescheduleSheet','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','disableVerticalSwipes','map','height','DOMContentLoaded','error','Telegram','v9.5-CLIENT-ANALYTICS','textContent','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','button','(((.+)+)+)+$','detStatus','scrollLeft','floor','#0a84ff','status','reschedule','Critical\x20TMA\x20Error:','backgroundPosition','querySelectorAll','anTotalStats','coachId','ccTitle','cancelled','getMonth','constructor','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','detailsSheet','keys','end','display','entries','seriesId','innerHTML','length','anEnd','.period-switch\x20.p-btn','getAttribute','today','coach_profiles','12WzTuQr','anPercent','none','all','getDay','router.html','apply','getItem','</div><div\x20class=\x22rs-day-num\x22>','ready','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','note','px\x20-','forEach','push','style','firstChild','client-stat-card','<div\x20class=\x22rs-day-name\x22>','substring','auto','then','top','findIndex','charAt','show','toUpperCase','div','cid','var(--acc-green)','var(--acc-blue)','160lDWHBT','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','month','customConfirm','uc_client_sessions','width','cancel_window','rgba(10,\x20132,\x20255,\x20','offClick','href','now','scrollTo','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','blocked-range-part\x20stripe-bg','10jAXYSc','insertBefore','test','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','setItem','anStart','detDate','\x20–∏–∑\x20','split','client_load','cancelHint','fontWeight','getFullYear','applyData','overlay','getHours','max','%\x20-\x204px)','.btn-cancel','T23:59:59','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','data','onclick','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','\x20-\x20','initDataUnsafe','classList','setHours',':00</span>','rsDatesTrack','12194328SKiTpt','long','client_cancel','pattern','exceptions','planned','daysHeaderTrack','expand','stringify','sort','158368NicYce','start','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','setAttribute','startsWith','active','substr','POST','calendar','appendChild','timeLineBadge','dateStr','.day-col-header','visible','time-label','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','day-col-header\x20','data-date','gridColumns','join','ccText','search','parse','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','day-column\x20','detNote','settings','%\x20+\x202px)','13kjlhTh','analyticsList','location','setDate','saveLocally','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','total','backgroundColor','cancelContainer','rsSlotsGrid','rs-date-chip','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','value','.btn-reschedule','day-off-overlay\x20stripe-bg','data-day-idx','week','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','scrollTop','initData','filter','Error\x20setting\x20back\x20button:','headerMonth','toLocaleDateString','getDate','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','59152AEdYHm','1666655eKIiVq','toast','querySelector'];a3_0x5225=function(){return _0x36f85c;};return a3_0x5225();}function renderEventsForColumn(_0x1c7698,_0x59d857){const _0x3ec224=a3_0x1f4976,_0x37a2d3=sessions[_0x3ec224(0x151)](_0xd05ebe=>_0xd05ebe[_0x3ec224(0x12c)]===_0x59d857),_0x58bd82=_0x37a2d3[_0x3ec224(0xa3)](_0x6a3276=>{const _0x3fe39b=_0x3ec224,[_0x5f40a9,_0x20e34c]=_0x6a3276[_0x3fe39b(0x122)][_0x3fe39b(0x100)](':')[_0x3fe39b(0xa3)](Number),[_0x32581e,_0x3b00ff]=_0x6a3276[_0x3fe39b(0xbf)][_0x3fe39b(0x100)](':')[_0x3fe39b(0xa3)](Number);return{'data':_0x6a3276,'start':_0x5f40a9*0x3c+_0x20e34c,'end':_0x32581e*0x3c+_0x3b00ff,'colIndex':0x0};});_0x58bd82[_0x3ec224(0x120)]((_0x3e1dad,_0x5f1620)=>_0x3e1dad[_0x3ec224(0x122)]-_0x5f1620['start']||_0x5f1620[_0x3ec224(0xbf)]-_0x5f1620[_0x3ec224(0x122)]-(_0x3e1dad[_0x3ec224(0xbf)]-_0x3e1dad[_0x3ec224(0x122)]));const _0x4605c2=[];_0x58bd82[_0x3ec224(0xd7)](_0x4358ab=>{const _0x304a58=_0x3ec224;let _0x5497b1=![];for(let _0x302f09=0x0;_0x302f09<_0x4605c2[_0x304a58(0xc4)];_0x302f09++){const _0x26c6c3=_0x4605c2[_0x302f09];if(_0x4358ab[_0x304a58(0x122)]>=_0x26c6c3[_0x26c6c3['length']-0x1][_0x304a58(0xbf)]){_0x26c6c3[_0x304a58(0xd8)](_0x4358ab),_0x4358ab[_0x304a58(0x7c)]=_0x302f09,_0x5497b1=!![];break;}}!_0x5497b1&&(_0x4605c2['push']([_0x4358ab]),_0x4358ab[_0x304a58(0x7c)]=_0x4605c2[_0x304a58(0xc4)]-0x1);}),_0x58bd82[_0x3ec224(0xd7)](_0x4076dc=>{const _0x1ad43f=_0x3ec224;let _0x5e692a=0x0;_0x58bd82[_0x1ad43f(0xd7)](_0x1ec455=>{const _0x5dd095=_0x1ad43f;if(Math[_0x5dd095(0x108)](_0x4076dc[_0x5dd095(0x122)],_0x1ec455[_0x5dd095(0x122)])<Math[_0x5dd095(0x15d)](_0x4076dc[_0x5dd095(0xbf)],_0x1ec455['end'])&&_0x1ec455[_0x5dd095(0x7c)]>_0x5e692a)_0x5e692a=_0x1ec455[_0x5dd095(0x7c)];});const _0x4d859e=_0x5e692a+0x1,_0x32ad2c=0x64/_0x4d859e,_0x25e9d7=_0x4076dc['colIndex']*_0x32ad2c,_0xb642b3=document[_0x1ad43f(0x8d)](_0x1ad43f(0xe5)),_0xf902b7=_0x4076dc[_0x1ad43f(0x10d)];let _0x6403ad=_0x1ad43f(0xb0);if(clients&&clients[_0x1ad43f(0xc4)]>0x0){const _0x8c9ca6=clients['find'](_0x1e22e9=>String(_0x1e22e9['id'])===String(_0xf902b7['clientId']));if(_0x8c9ca6&&_0x8c9ca6['color'])_0x6403ad=_0x8c9ca6[_0x1ad43f(0x170)];}const _0x19a6e1=_0xf902b7[_0x1ad43f(0xb1)]===_0x1ad43f(0x9e),_0x3f028d=_0x19a6e1?0x1:0.45;_0xb642b3[_0x1ad43f(0x85)]=_0x1ad43f(0x9b)+(_0x19a6e1?'\x20status-completed':''),_0xb642b3[_0x1ad43f(0xd9)][_0x1ad43f(0x144)]=hexToRgba(_0x6403ad,_0x3f028d),_0xb642b3[_0x1ad43f(0xd9)][_0x1ad43f(0x161)]=_0x6403ad;const _0x469d30=_0x4076dc[_0x1ad43f(0x122)]/0x3c*GRID_H,_0x1728a1=(_0x4076dc[_0x1ad43f(0xbf)]-_0x4076dc[_0x1ad43f(0x122)])/0x3c*GRID_H;_0xb642b3[_0x1ad43f(0xd9)][_0x1ad43f(0xe0)]=_0x469d30+'px',_0xb642b3[_0x1ad43f(0xd9)][_0x1ad43f(0xa4)]=Math[_0x1ad43f(0x108)](_0x1728a1,0x14)+'px',_0xb642b3[_0x1ad43f(0xd9)][_0x1ad43f(0xee)]=_0x1ad43f(0x92)+_0x32ad2c+_0x1ad43f(0x109),_0xb642b3[_0x1ad43f(0xd9)][_0x1ad43f(0x93)]='calc('+_0x25e9d7+_0x1ad43f(0x13c),_0xb642b3[_0x1ad43f(0xd9)]['zIndex']=0xa+_0x4076dc['colIndex'];if(_0x32ad2c<0x55)_0xb642b3['classList'][_0x1ad43f(0x163)](_0x1ad43f(0x98));let _0x3306e2='';if(_0xf902b7[_0x1ad43f(0xc2)])_0x3306e2+='<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>';if(_0x19a6e1)_0x3306e2+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0xb642b3[_0x1ad43f(0xc3)]=_0x1ad43f(0x138)+_0xf902b7[_0x1ad43f(0x122)]+'\x20-\x20'+_0xf902b7[_0x1ad43f(0xbf)]+_0x1ad43f(0x156)+_0x3306e2+_0x1ad43f(0x130),_0xb642b3[_0x1ad43f(0x10e)]=_0x2fc991=>{const _0x3a46c1=_0x1ad43f;_0x2fc991[_0x3a46c1(0x88)](),openDetails(_0xf902b7);},_0x1c7698[_0x1ad43f(0x12a)](_0xb642b3);});}function openAnalytics(){const _0x16a863=a3_0x1f4976,_0x357d4f=document[_0x16a863(0x15a)](_0x16a863(0xc6));setAnalyticsPeriod(_0x16a863(0x14d),_0x357d4f),openSheet(_0x16a863(0x86));}function setAnalyticsPeriod(_0x34366d,_0x4c8417){const _0x945538=a3_0x1f4976;currentAnPeriod=_0x34366d,document[_0x945538(0xb5)](_0x945538(0xc6))[_0x945538(0xd7)](_0x2a658f=>_0x2a658f[_0x945538(0x113)][_0x945538(0x165)]('active'));if(_0x4c8417)_0x4c8417[_0x945538(0x113)][_0x945538(0x163)]('active');const _0x1512ff=document['getElementById']('anCustomDates');_0x1512ff['style'][_0x945538(0xc0)]=_0x34366d===_0x945538(0x15c)?'flex':_0x945538(0xcc);const _0x17d5c=new Date();let _0x3b7977=new Date(),_0x4d4f87=new Date();if(_0x34366d===_0x945538(0x14d))_0x3b7977=getStartOfWeek(_0x17d5c),_0x4d4f87=new Date(_0x3b7977),_0x4d4f87[_0x945538(0x140)](_0x4d4f87[_0x945538(0x155)]()+0x6);else{if(_0x34366d===_0x945538(0xeb))_0x3b7977=new Date(_0x17d5c[_0x945538(0x104)](),_0x17d5c[_0x945538(0xba)](),0x1),_0x4d4f87=new Date(_0x17d5c[_0x945538(0x104)](),_0x17d5c['getMonth']()+0x1,0x0);else{!document[_0x945538(0x91)](_0x945538(0xfd))[_0x945538(0x149)]&&(document['getElementById']('anStart')[_0x945538(0x149)]=getLocalDateStr(_0x17d5c),document['getElementById'](_0x945538(0xc5))['value']=getLocalDateStr(_0x17d5c));refreshAnalytics();return;}}document[_0x945538(0x91)]('anStart')[_0x945538(0x149)]=getLocalDateStr(_0x3b7977),document['getElementById'](_0x945538(0xc5))[_0x945538(0x149)]=getLocalDateStr(_0x4d4f87),refreshAnalytics();}function refreshAnalytics(){const _0x518855=a3_0x1f4976,_0xfbb3a8=document['getElementById']('anStart')[_0x518855(0x149)],_0x47dc1d=document[_0x518855(0x91)](_0x518855(0xc5))['value'];if(!_0xfbb3a8||!_0x47dc1d)return;const _0x2ff3f9=sessions[_0x518855(0x151)](_0x7a20d9=>_0x7a20d9[_0x518855(0x12c)]>=_0xfbb3a8&&_0x7a20d9['dateStr']<=_0x47dc1d&&_0x7a20d9[_0x518855(0xb1)]!==_0x518855(0xb9)),_0x10835e=_0x2ff3f9[_0x518855(0xc4)],_0x3e36f7=_0x2ff3f9[_0x518855(0x151)](_0x571bae=>_0x571bae[_0x518855(0xb1)]===_0x518855(0x9e))[_0x518855(0xc4)],_0x8a0d0f=_0x10835e>0x0?Math['round'](_0x3e36f7/_0x10835e*0x64):0x0;document[_0x518855(0x91)](_0x518855(0xcb))[_0x518855(0xa9)]=_0x8a0d0f+'%',document[_0x518855(0x91)](_0x518855(0xb6))[_0x518855(0xa9)]=_0x3e36f7+_0x518855(0xff)+_0x10835e+_0x518855(0x110);const _0x24b82f=document['getElementById']('anDonutCircle'),_0x2235b9=0x2*Math['PI']*0x23,_0x3af8e6=_0x2235b9-_0x8a0d0f/0x64*_0x2235b9;_0x24b82f[_0x518855(0xd9)]['strokeDashoffset']=_0x3af8e6;const _0x66c3dc={};_0x2ff3f9[_0x518855(0xd7)](_0x42cb26=>{const _0x2d20b=_0x518855,_0x4a56ab=_0x42cb26[_0x2d20b(0xb7)]||_0x2d20b(0x96);if(!_0x66c3dc[_0x4a56ab]){const _0x3fd963='#'+_0x4a56ab[_0x2d20b(0x9a)]()[_0x2d20b(0x127)](0x0,0x6);_0x66c3dc[_0x4a56ab]={'total':0x0,'done':0x0,'color':_0x3fd963};}_0x66c3dc[_0x4a56ab][_0x2d20b(0x143)]++;if(_0x42cb26[_0x2d20b(0xb1)]===_0x2d20b(0x9e))_0x66c3dc[_0x4a56ab][_0x2d20b(0x97)]++;});const _0x5a4543=document[_0x518855(0x91)](_0x518855(0x13e));_0x5a4543[_0x518855(0xc3)]='';const _0x16d3a2=Object[_0x518855(0xc1)](_0x66c3dc)[_0x518855(0x120)]((_0x11ed54,_0x1aa7de)=>_0x1aa7de[0x1][_0x518855(0x143)]-_0x11ed54[0x1]['total']);if(_0x16d3a2[_0x518855(0xc4)]===0x0){_0x5a4543[_0x518855(0xc3)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x16d3a2[_0x518855(0xd7)](([_0x135a12,_0x2057e7])=>{const _0x23dea6=_0x518855,_0x139b0d=Math[_0x23dea6(0x7e)](_0x2057e7[_0x23dea6(0x97)]/_0x2057e7[_0x23dea6(0x143)]*0x64),_0x591e4e=document['createElement'](_0x23dea6(0xe5));_0x591e4e[_0x23dea6(0x85)]=_0x23dea6(0xdb),_0x591e4e[_0x23dea6(0xd9)][_0x23dea6(0x161)]=_0x2057e7['color'],_0x591e4e['innerHTML']=_0x23dea6(0xa1)+_0x135a12['substr'](0x0,0x5)+_0x23dea6(0x123)+_0x2057e7['done']+_0x23dea6(0x8f)+_0x2057e7[_0x23dea6(0x143)]+_0x23dea6(0x16c)+_0x139b0d+_0x23dea6(0xf5),_0x5a4543[_0x23dea6(0x12a)](_0x591e4e);});}function openDetails(_0x4a8a07){const _0x2456e5=a3_0x1f4976;currentSession=_0x4a8a07;const _0x3224da=new Date(_0x4a8a07['dateStr']),_0x2e8daa=_0x3224da[_0x2456e5(0x154)]('ru-RU',{'weekday':_0x2456e5(0x118),'day':'numeric','month':_0x2456e5(0x118)});document['getElementById'](_0x2456e5(0xfe))[_0x2456e5(0xa9)]=_0x2e8daa[_0x2456e5(0xe2)](0x0)[_0x2456e5(0xe4)]()+_0x2e8daa['slice'](0x1),document['getElementById'](_0x2456e5(0x166))[_0x2456e5(0xa9)]=_0x4a8a07[_0x2456e5(0x122)]+_0x2456e5(0x111)+_0x4a8a07['end'],document[_0x2456e5(0x91)](_0x2456e5(0x13a))['textContent']=_0x4a8a07[_0x2456e5(0xd5)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x8a99e6=document[_0x2456e5(0x91)](_0x2456e5(0xad)),_0x1f77cf=document[_0x2456e5(0x91)](_0x2456e5(0x145)),_0x5ef62b=_0x1f77cf[_0x2456e5(0x15a)](_0x2456e5(0x10a)),_0x5be294=_0x1f77cf[_0x2456e5(0x15a)](_0x2456e5(0x14a)),_0x134cde=document['getElementById'](_0x2456e5(0x102));if(_0x4a8a07[_0x2456e5(0xb1)]==='completed')_0x8a99e6['textContent']=_0x2456e5(0x10c),_0x8a99e6[_0x2456e5(0xd9)][_0x2456e5(0x170)]=_0x2456e5(0xe7),_0x1f77cf[_0x2456e5(0xd9)][_0x2456e5(0xc0)]=_0x2456e5(0xcc);else{_0x8a99e6[_0x2456e5(0xa9)]='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x8a99e6['style'][_0x2456e5(0x170)]=_0x2456e5(0xe8),_0x1f77cf[_0x2456e5(0xd9)][_0x2456e5(0xc0)]=_0x2456e5(0x7f);const _0x1580bb=new Date(_0x4a8a07[_0x2456e5(0x12c)]+'T'+_0x4a8a07['start']),_0x39f745=new Date(),_0x34db8b=(_0x1580bb-_0x39f745)/(0x3e8*0x3c*0x3c),_0x5975dd=coachProfiles[_0x4a8a07['coachId']]&&coachProfiles[_0x4a8a07['coachId']][_0x2456e5(0xef)]?parseInt(coachProfiles[_0x4a8a07['coachId']][_0x2456e5(0xef)]):0x18;if(_0x5975dd===0x0||_0x34db8b>=_0x5975dd)_0x5ef62b[_0x2456e5(0xd9)][_0x2456e5(0xc0)]='block',_0x5be294[_0x2456e5(0xd9)][_0x2456e5(0xc0)]=_0x2456e5(0x7f),_0x134cde[_0x2456e5(0xd9)][_0x2456e5(0xc0)]=_0x2456e5(0xcc);else{_0x5ef62b[_0x2456e5(0xd9)][_0x2456e5(0xc0)]=_0x2456e5(0xcc),_0x5be294['style'][_0x2456e5(0xc0)]=_0x2456e5(0xcc),_0x134cde[_0x2456e5(0xd9)][_0x2456e5(0xc0)]=_0x2456e5(0x7f);let _0x589b61=_0x5975dd===0x0?_0x2456e5(0x15b):_0x2456e5(0x16f)+_0x5975dd+_0x2456e5(0x162);_0x134cde[_0x2456e5(0xa9)]=_0x2456e5(0x148)+_0x589b61+_0x2456e5(0x14e);}}document[_0x2456e5(0x91)]('overlay')[_0x2456e5(0x113)][_0x2456e5(0x163)](_0x2456e5(0x126)),document[_0x2456e5(0x91)](_0x2456e5(0xbd))[_0x2456e5(0x113)]['add'](_0x2456e5(0x95));}function closeAllSheets(){const _0x580fd9=a3_0x1f4976;document['getElementById'](_0x580fd9(0x106))[_0x580fd9(0x113)][_0x580fd9(0x165)](_0x580fd9(0x126)),document[_0x580fd9(0xb5)]('.sheet')[_0x580fd9(0xd7)](_0x5502a9=>_0x5502a9['classList'][_0x580fd9(0x165)](_0x580fd9(0x95)));}function openSheet(_0x44be92){const _0x27966c=a3_0x1f4976;document[_0x27966c(0x91)](_0x27966c(0x106))[_0x27966c(0x113)]['add'](_0x27966c(0x126)),document['getElementById'](_0x44be92)[_0x27966c(0x113)][_0x27966c(0x163)](_0x27966c(0x95));}function getLocalDateStr(_0x223739){const _0x330498=a3_0x1f4976,_0x193074=_0x223739[_0x330498(0x104)](),_0x4952fd=String(_0x223739['getMonth']()+0x1)['padStart'](0x2,'0'),_0x16074f=String(_0x223739[_0x330498(0x155)]())[_0x330498(0x16e)](0x2,'0');return _0x193074+'-'+_0x4952fd+'-'+_0x16074f;}function getStartOfWeek(_0x138d17){const _0x3f93f5=a3_0x1f4976,_0x905af0=new Date(_0x138d17),_0x1f9b0a=_0x905af0[_0x3f93f5(0xce)](),_0x1bf13a=_0x905af0[_0x3f93f5(0x155)]()-_0x1f9b0a+(_0x1f9b0a===0x0?-0x6:0x1);return _0x905af0['setDate'](_0x1bf13a),_0x905af0['setHours'](0x0,0x0,0x0,0x0),_0x905af0;}function scrollToToday(){const _0x38f426=getLocalDateStr(new Date());setTimeout(()=>{const _0x537dc2=a3_0x1352,_0x468c9e=document['querySelector']('.day-col-header[data-date=\x22'+_0x38f426+'\x22]');if(_0x468c9e){const _0x2551ad=document['getElementById']('matrixViewport'),_0x16249a=_0x468c9e[_0x537dc2(0x16d)]-_0x2551ad[_0x537dc2(0x8b)]/0x2+_0x468c9e['offsetWidth']/0x2;_0x2551ad[_0x537dc2(0xf4)]({'left':_0x16249a,'behavior':_0x537dc2(0xde)}),_0x2551ad[_0x537dc2(0x14f)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x2661e4=a3_0x1f4976,_0x1ff9a0=new Date(),_0x1575aa=document[_0x2661e4(0x91)]('globalTimeLine'),_0x2b4649=document[_0x2661e4(0x91)](_0x2661e4(0x12b)),_0x350578=(_0x1ff9a0[_0x2661e4(0x107)]()*0x3c+_0x1ff9a0[_0x2661e4(0x8e)]())/0x3c*GRID_H;_0x1575aa['style'][_0x2661e4(0xe0)]=_0x350578+'px',_0x1575aa[_0x2661e4(0xd9)][_0x2661e4(0xc0)]=_0x2661e4(0x7f),_0x2b4649['style']['top']=_0x350578+'px',_0x2b4649[_0x2661e4(0xd9)][_0x2661e4(0xc0)]=_0x2661e4(0x7f),_0x2b4649[_0x2661e4(0xa9)]=String(_0x1ff9a0['getHours']())[_0x2661e4(0x16e)](0x2,'0')+':'+String(_0x1ff9a0[_0x2661e4(0x8e)]())[_0x2661e4(0x16e)](0x2,'0');}function onScroll(){const _0x548b96=a3_0x1f4976,_0x364b58=document[_0x548b96(0x91)](_0x548b96(0x9c)),_0x454ff9=document[_0x548b96(0xb5)](_0x548b96(0x12d));for(let _0x25f5e2 of _0x454ff9)if(_0x25f5e2[_0x548b96(0x16d)]>=_0x364b58[_0x548b96(0xae)]){const _0x47430c=new Date(_0x25f5e2['getAttribute']('data-date'));document[_0x548b96(0x91)](_0x548b96(0x153))[_0x548b96(0xa9)]=_0x47430c['toLocaleString']('ru',{'month':_0x548b96(0x118)})[_0x548b96(0xe4)]()+'\x20'+_0x47430c[_0x548b96(0x104)]();break;}}function showToast(_0x4d5201){const _0x253682=a3_0x1f4976,_0xa1e60e=document[_0x253682(0x91)](_0x253682(0x159));_0xa1e60e[_0x253682(0xa9)]=_0x4d5201,_0xa1e60e[_0x253682(0x113)][_0x253682(0x163)](_0x253682(0xe3)),setTimeout(()=>_0xa1e60e[_0x253682(0x113)][_0x253682(0x165)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x1b2912=a3_0x1f4976,_0x2fa423=document[_0x1b2912(0x91)](_0x1b2912(0x9c)),_0x3ad722=_0x2fa423[_0x1b2912(0xae)],_0xddf3bb=_0x2fa423[_0x1b2912(0x8a)],_0x2f4eed=_0x2fa423['clientWidth'];if(_0xddf3bb-(_0x3ad722+_0x2f4eed)<0x12c){const _0x32359f=endOffset;endOffset+=0xe,renderDayRange(_0x32359f+0x1,endOffset),reRenderBlocks();}if(_0x3ad722<0x12c){const _0x5df142=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5df142-0x1),_0x2fa423[_0x1b2912(0xae)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x3c77ff,_0x585630){const _0x28028b=a3_0x1f4976,_0x3ae108=document[_0x28028b(0x91)](_0x28028b(0x11d)),_0x373ce6=document[_0x28028b(0x91)](_0x28028b(0x133)),_0xf81fc5=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xd55fd7=new Date();_0xd55fd7[_0x28028b(0x114)](0x0,0x0,0x0,0x0);const _0x284ccb=getLocalDateStr(new Date()),_0x3c82e9=document['createDocumentFragment'](),_0x4e6320=document[_0x28028b(0x80)]();for(let _0x337aca=_0x3c77ff;_0x337aca<=_0x585630;_0x337aca++){const _0x155714=new Date(_0xd55fd7);_0x155714[_0x28028b(0x140)](_0x155714['getDate']()+_0x337aca);const _0x2c0544=getLocalDateStr(_0x155714);let _0x248dd9=_0x155714['getDay']()-0x1;if(_0x248dd9===-0x1)_0x248dd9=0x6;const _0x2799d2=_0x2c0544===_0x284ccb,_0x491556=document[_0x28028b(0x8d)](_0x28028b(0xe5));_0x491556[_0x28028b(0x85)]=_0x28028b(0x131)+(_0x2799d2?_0x28028b(0xc8):''),_0x491556[_0x28028b(0x124)](_0x28028b(0x132),_0x2c0544),_0x491556[_0x28028b(0xc3)]=_0x28028b(0x169)+_0xf81fc5[_0x248dd9]+_0x28028b(0x9f)+_0x155714[_0x28028b(0x155)]()+'</div>',_0x3c82e9[_0x28028b(0x12a)](_0x491556);const _0x30e652=document[_0x28028b(0x8d)](_0x28028b(0xe5));_0x30e652[_0x28028b(0x85)]=_0x28028b(0x139)+(_0x2799d2?_0x28028b(0xc8):''),_0x30e652[_0x28028b(0x124)](_0x28028b(0x132),_0x2c0544),_0x30e652[_0x28028b(0x124)]('data-day-idx',_0x248dd9),_0x4e6320['appendChild'](_0x30e652);}_0x3ae108['insertBefore'](_0x3c82e9,_0x3ae108[_0x28028b(0xda)]),_0x373ce6[_0x28028b(0xf9)](_0x4e6320,_0x373ce6['querySelector']('.day-column'));}function hexToRgba(_0x394a49,_0x23d560){const _0x1226a0=a3_0x1f4976;let _0x43130e;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x1226a0(0xfa)](_0x394a49))return _0x43130e=_0x394a49[_0x1226a0(0xdd)](0x1)[_0x1226a0(0x100)](''),_0x43130e[_0x1226a0(0xc4)]==0x3&&(_0x43130e=[_0x43130e[0x0],_0x43130e[0x0],_0x43130e[0x1],_0x43130e[0x1],_0x43130e[0x2],_0x43130e[0x2]]),_0x43130e='0x'+_0x43130e[_0x1226a0(0x134)](''),'rgba('+[_0x43130e>>0x10&0xff,_0x43130e>>0x8&0xff,_0x43130e&0xff][_0x1226a0(0x134)](',')+','+_0x23d560+')';return _0x1226a0(0xf0)+_0x23d560+')';}let confirmResolver=null;function showCustomConfirm(_0x469e8f,_0x3bd528,_0x1eab7f=!![]){const _0x30424f=a3_0x1f4976;document[_0x30424f(0x91)](_0x30424f(0xb8))[_0x30424f(0xa9)]=_0x469e8f,document[_0x30424f(0x91)](_0x30424f(0x135))[_0x30424f(0xa9)]=_0x3bd528;const _0x582a1c=document[_0x30424f(0x91)]('ccYesBtn');return _0x1eab7f?(_0x582a1c[_0x30424f(0xd9)]['color']='#ff453a',_0x582a1c[_0x30424f(0xd9)][_0x30424f(0x103)]='600'):(_0x582a1c[_0x30424f(0xd9)]['color']=_0x30424f(0xb0),_0x582a1c[_0x30424f(0xd9)][_0x30424f(0x103)]=_0x30424f(0x82)),new Promise(_0x27a06a=>{const _0x531eec=_0x30424f;confirmResolver=_0x27a06a,document[_0x531eec(0x91)](_0x531eec(0xec))[_0x531eec(0x113)][_0x531eec(0x163)](_0x531eec(0x12e));});}function resolveCustomConfirm(_0x5095eb){const _0x938c98=a3_0x1f4976;document[_0x938c98(0x91)](_0x938c98(0xec))[_0x938c98(0x113)][_0x938c98(0x165)]('visible');if(confirmResolver)confirmResolver(_0x5095eb);}async function tryCancelCurrentSession(){const _0x1138b9=a3_0x1f4976;if(!currentSession)return;const _0x40cd92=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x1138b9(0x10f),!![]);if(!_0x40cd92)return;const _0x11a0d5=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x1f14ed=>_0x1f14ed['id']!==_0x11a0d5['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date['now']();try{const _0x39ea3b=window[_0x1138b9(0xa7)]?.[_0x1138b9(0x7d)],_0x498775=await fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':_0x1138b9(0x119),'init_data':_0x39ea3b?.['initData']||'','coachId':_0x11a0d5['coachId'],'dateStr':_0x11a0d5[_0x1138b9(0x12c)],'sessionId':_0x11a0d5['id']})});if(_0x498775['ok'])DataManager[_0x1138b9(0x141)]();}catch(_0x102237){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xabaa6c=a3_0x1f4976;if(!currentSession)return;document[_0xabaa6c(0x91)]('detailsSheet')[_0xabaa6c(0x113)][_0xabaa6c(0x165)](_0xabaa6c(0x95)),document[_0xabaa6c(0x91)](_0xabaa6c(0xa0))[_0xabaa6c(0x113)][_0xabaa6c(0x163)]('open');const _0x980112=document[_0xabaa6c(0x91)]('rsDatesTrack'),_0x5a6908=document['getElementById']('rsSlotsGrid');_0x980112[_0xabaa6c(0xc3)]='',_0x5a6908['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x52224e,_0x2341b6]=currentSession['start']['split'](':')['map'](Number),[_0xbde0a6,_0x588540]=currentSession[_0xabaa6c(0xbf)]['split'](':')[_0xabaa6c(0xa3)](Number),_0x151962=_0xbde0a6*0x3c+_0x588540-(_0x52224e*0x3c+_0x2341b6);try{const _0x5159f2=window[_0xabaa6c(0xa7)]?.[_0xabaa6c(0x7d)],_0x3911ee=await fetch(API_URL,{'method':_0xabaa6c(0x128),'body':JSON[_0xabaa6c(0x11f)]({'action':'get_slots','coachId':currentSession[_0xabaa6c(0xb7)],'duration':_0x151962,'init_data':_0x5159f2?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x25c034=await _0x3911ee[_0xabaa6c(0x8c)]();_0x25c034['ok']&&_0x25c034[_0xabaa6c(0x10d)]?(availableSlotsCache=_0x25c034['data'],renderRescheduleDates()):_0x5a6908[_0xabaa6c(0xc3)]=_0xabaa6c(0xfb);}catch(_0x1b6364){_0x5a6908[_0xabaa6c(0xc3)]=_0xabaa6c(0xea);}}function a3_0x1352(_0x5434ff,_0x1d13ae){_0x5434ff=_0x5434ff-0x78;const _0x3d320e=a3_0x5225();let _0x4cbcb2=_0x3d320e[_0x5434ff];return _0x4cbcb2;}function renderRescheduleDates(){const _0xc8b83d=a3_0x1f4976,_0xf46fca=document['getElementById'](_0xc8b83d(0x116));_0xf46fca[_0xc8b83d(0xc3)]='';const _0x3a947a=Object['keys'](availableSlotsCache)[_0xc8b83d(0x120)](),_0x22cabd=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x3a947a[_0xc8b83d(0xc4)]===0x0){document[_0xc8b83d(0x91)](_0xc8b83d(0x146))[_0xc8b83d(0xc3)]=_0xc8b83d(0x164);return;}_0x3a947a['forEach']((_0x5ad336,_0x2d7d1f)=>{const _0xf521aa=_0xc8b83d,_0x360e40=new Date(_0x5ad336),_0x2fac83=_0x22cabd[_0x360e40[_0xf521aa(0xce)]()],_0x452f43=_0x360e40[_0xf521aa(0x155)](),_0x566449=document[_0xf521aa(0x8d)](_0xf521aa(0xe5));_0x566449[_0xf521aa(0x85)]=_0xf521aa(0x147);if(_0x2d7d1f===0x0)_0x566449['classList'][_0xf521aa(0x163)](_0xf521aa(0x126));_0x566449[_0xf521aa(0xc3)]=_0xf521aa(0xdc)+_0x2fac83+_0xf521aa(0xd2)+_0x452f43+'</div>',_0x566449[_0xf521aa(0x10e)]=()=>selectRsDate(_0x5ad336,_0x566449),_0xf46fca[_0xf521aa(0x12a)](_0x566449);}),selectRsDate(_0x3a947a[0x0],_0xf46fca[_0xc8b83d(0xda)]);}function selectRsDate(_0x16d9b7,_0x1ea0da){const _0x3eba93=a3_0x1f4976;selectedRsDate=_0x16d9b7,document[_0x3eba93(0xb5)](_0x3eba93(0x15e))[_0x3eba93(0xd7)](_0x38051c=>_0x38051c[_0x3eba93(0x113)]['remove']('active'));if(_0x1ea0da)_0x1ea0da[_0x3eba93(0x113)][_0x3eba93(0x163)](_0x3eba93(0x126));const _0x53f8fb=document[_0x3eba93(0x91)](_0x3eba93(0x146));_0x53f8fb[_0x3eba93(0xc3)]='';const _0x11ab53=availableSlotsCache[_0x16d9b7]||[];if(_0x11ab53[_0x3eba93(0xc4)]===0x0){_0x53f8fb['innerHTML']=_0x3eba93(0xfb);return;}_0x11ab53[_0x3eba93(0xd7)](_0xadba82=>{const _0x687a5a=_0x3eba93,_0x1d42a4=document['createElement'](_0x687a5a(0xab));_0x1d42a4['className']=_0x687a5a(0x7b),_0x1d42a4[_0x687a5a(0xa9)]=_0xadba82,_0x1d42a4[_0x687a5a(0x10e)]=()=>confirmReschedule(_0xadba82),_0x53f8fb[_0x687a5a(0x12a)](_0x1d42a4);});}async function confirmReschedule(_0x2611dc){const _0x23f323=a3_0x1f4976,_0x145302=new Date(selectedRsDate),_0x5c5a11=_0x145302[_0x23f323(0x154)]('ru-RU',{'day':'numeric','month':_0x23f323(0x118)}),_0x39c083=await showCustomConfirm(_0x23f323(0xbc),_0x23f323(0xd4)+_0x5c5a11+'\x20–≤\x20'+_0x2611dc+'?',![]);if(!_0x39c083)return;closeAllSheets(),showToast(_0x23f323(0x142)),lastUserActionTime=Date[_0x23f323(0xf3)]();const _0x44f563=currentSession[_0x23f323(0x12c)],_0xe58161=currentSession['id'],[_0x166c58,_0xeedc79]=currentSession[_0x23f323(0x122)][_0x23f323(0x100)](':')[_0x23f323(0xa3)](Number),[_0x473299,_0x14faf7]=currentSession[_0x23f323(0xbf)]['split'](':')[_0x23f323(0xa3)](Number),_0x3450e9=_0x473299*0x3c+_0x14faf7-(_0x166c58*0x3c+_0xeedc79),[_0x22fde4,_0x2ba432]=_0x2611dc[_0x23f323(0x100)](':')[_0x23f323(0xa3)](Number),_0x1cb8f3=_0x22fde4*0x3c+_0x2ba432+_0x3450e9,_0x555d82=Math[_0x23f323(0xaf)](_0x1cb8f3/0x3c),_0x3e2af3=_0x1cb8f3%0x3c,_0x4b8ce6=String(_0x555d82)[_0x23f323(0x16e)](0x2,'0')+':'+String(_0x3e2af3)['padStart'](0x2,'0'),_0x49fc96=sessions[_0x23f323(0xe1)](_0x9d482=>_0x9d482['id']===_0xe58161);_0x49fc96!==-0x1&&(sessions[_0x49fc96]['dateStr']=selectedRsDate,sessions[_0x49fc96]['start']=_0x2611dc,sessions[_0x49fc96][_0x23f323(0xbf)]=_0x4b8ce6,reRenderBlocks());try{const _0x174d0d=window[_0x23f323(0xa7)]?.['WebApp'],_0x43392b=await fetch(API_URL,{'method':'POST','body':JSON[_0x23f323(0x11f)]({'action':_0x23f323(0xb2),'init_data':_0x174d0d?.['initData']||'','oldSessionId':_0xe58161,'oldDate':_0x44f563,'newDate':selectedRsDate,'newTime':_0x2611dc,'coachId':currentSession[_0x23f323(0xb7)]})}),_0x320a95=await _0x43392b[_0x23f323(0x8c)]();!_0x320a95['ok']?(showToast(_0x23f323(0x7a)),DataManager[_0x23f323(0x79)]()):(showToast(_0x23f323(0x16a)),DataManager[_0x23f323(0x141)]());}catch(_0x478043){showToast(_0x23f323(0xaa));}}document[a3_0x1f4976(0xf6)](a3_0x1f4976(0xa5),init);