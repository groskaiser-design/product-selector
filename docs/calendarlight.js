const a3_0x84c643=a3_0x3a30;(function(_0x2ead9a,_0x1b2f5d){const _0x56b21e=a3_0x3a30,_0x49c0fb=_0x2ead9a();while(!![]){try{const _0x2ebcc1=parseInt(_0x56b21e(0x16d))/0x1*(-parseInt(_0x56b21e(0x1fb))/0x2)+parseInt(_0x56b21e(0x1ba))/0x3+parseInt(_0x56b21e(0x184))/0x4+parseInt(_0x56b21e(0x1be))/0x5+parseInt(_0x56b21e(0x168))/0x6+parseInt(_0x56b21e(0x19f))/0x7*(-parseInt(_0x56b21e(0x15d))/0x8)+parseInt(_0x56b21e(0x1e6))/0x9*(-parseInt(_0x56b21e(0x162))/0xa);if(_0x2ebcc1===_0x1b2f5d)break;else _0x49c0fb['push'](_0x49c0fb['shift']());}catch(_0x3ba3c3){_0x49c0fb['push'](_0x49c0fb['shift']());}}}(a3_0x4d02,0xd8c9d));const APP_VERSION=a3_0x84c643(0x1e2),API_URL=a3_0x84c643(0x19e),GRID_H=0x3c,KEY_SESSIONS=a3_0x84c643(0x17d),KEY_SETTINGS=a3_0x84c643(0x1e1),KEY_CLIENTS=a3_0x84c643(0x126);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x84c643(0x1f5),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x4ce990=a3_0x84c643,_0x2fe94d=(function(){let _0x29faed=!![];return function(_0x3e04ee,_0xda628c){const _0x2d3f61=_0x29faed?function(){if(_0xda628c){const _0x2722fe=_0xda628c['apply'](_0x3e04ee,arguments);return _0xda628c=null,_0x2722fe;}}:function(){};return _0x29faed=![],_0x2d3f61;};}()),_0x22be66=_0x2fe94d(this,function(){const _0x30c548=a3_0x3a30;return _0x22be66[_0x30c548(0x185)]()[_0x30c548(0x15a)](_0x30c548(0x209))['toString']()[_0x30c548(0x1f0)](_0x22be66)['search'](_0x30c548(0x209));});_0x22be66();try{const _0x2a9cc4=window['Telegram']?.[_0x4ce990(0x1ac)];if(!_0x2a9cc4)return;_0x2a9cc4[_0x4ce990(0x174)](),_0x2a9cc4[_0x4ce990(0x159)]();try{_0x2a9cc4[_0x4ce990(0x1bc)](_0x4ce990(0x186)),_0x2a9cc4['setBackgroundColor']&&_0x2a9cc4[_0x4ce990(0x1d1)](_0x4ce990(0x186));}catch(_0x1a29eb){console[_0x4ce990(0x12d)]('Error\x20setting\x20color:',_0x1a29eb);}try{_0x2a9cc4[_0x4ce990(0x1f9)]&&(_0x2a9cc4[_0x4ce990(0x1f9)]['show'](),_0x2a9cc4[_0x4ce990(0x1f9)][_0x4ce990(0x169)](),_0x2a9cc4[_0x4ce990(0x1f9)]['onClick'](function(){const _0x2ec713=_0x4ce990;window[_0x2ec713(0x1f4)][_0x2ec713(0x161)]=_0x2ec713(0x137);}));}catch(_0x2e54fc){console[_0x4ce990(0x12d)](_0x4ce990(0x13b),_0x2e54fc);}try{if(_0x2a9cc4['disableVerticalSwipes'])_0x2a9cc4[_0x4ce990(0x189)]();}catch(_0x292bf2){}}catch(_0x5cfb0d){console['error'](_0x4ce990(0x1d2),_0x5cfb0d);}}());function isAdmin(){const _0x418ce1=a3_0x84c643;try{const _0x55e105=Number(window[_0x418ce1(0x181)]?.['WebApp']?.['initDataUnsafe']?.['user']?.['id']);return _0x55e105===0xbaf7174;}catch(_0x1b1f88){return![];}}const DataManager={'saveLocally'(){const _0x546578=a3_0x84c643;try{localStorage[_0x546578(0x20c)](KEY_SESSIONS,JSON[_0x546578(0x1cc)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON[_0x546578(0x1cc)](clients)),localStorage[_0x546578(0x20c)](KEY_SETTINGS,JSON[_0x546578(0x1cc)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x27586e){}},'loadLocal'(){const _0x24e8a4=a3_0x84c643;try{const _0x50b64a=localStorage['getItem'](KEY_SESSIONS);if(_0x50b64a)sessions=JSON[_0x24e8a4(0x211)](_0x50b64a);const _0xc3f54=localStorage[_0x24e8a4(0x1ce)](KEY_CLIENTS);if(_0xc3f54)clients=JSON[_0x24e8a4(0x211)](_0xc3f54);const _0x7b87d9=localStorage[_0x24e8a4(0x1ce)](KEY_SETTINGS);if(_0x7b87d9){const _0x20f5c9=JSON[_0x24e8a4(0x211)](_0x7b87d9);if(_0x20f5c9[_0x24e8a4(0x1ff)])availabilityPattern=_0x20f5c9['pattern'];if(_0x20f5c9['ranges'])specialRanges=_0x20f5c9[_0x24e8a4(0x1db)];if(_0x20f5c9['exceptions'])dateExceptions=_0x20f5c9[_0x24e8a4(0x205)];}}catch(_0x3e472a){}},async 'syncLoad'(){const _0x36cc65=a3_0x84c643,_0x15f80e=new Date(),_0x54245d=_0x15f80e['getFullYear']()+'-'+String(_0x15f80e[_0x36cc65(0x139)]()+0x1)[_0x36cc65(0x18c)](0x2,'0'),_0x58e9bf=new Date(_0x15f80e);_0x58e9bf[_0x36cc65(0x158)](_0x15f80e['getMonth']()+0x1);const _0x3475a9=_0x58e9bf['getFullYear']()+'-'+String(_0x58e9bf[_0x36cc65(0x139)]()+0x1)[_0x36cc65(0x18c)](0x2,'0'),_0x49634b=Date[_0x36cc65(0x15f)]();try{const _0x29e795=window[_0x36cc65(0x181)]?.[_0x36cc65(0x1ac)],_0x1ab693=_0x29e795?.[_0x36cc65(0x145)]||'',[_0x61dfa,_0x1e46ae]=await Promise[_0x36cc65(0x178)]([fetch(API_URL,{'method':_0x36cc65(0x15b),'body':JSON[_0x36cc65(0x1cc)]({'action':_0x36cc65(0x1c8),'init_data':_0x1ab693,'month_str':_0x54245d})})[_0x36cc65(0x191)](_0x2d74be=>_0x2d74be[_0x36cc65(0x16a)]()),fetch(API_URL,{'method':_0x36cc65(0x15b),'body':JSON[_0x36cc65(0x1cc)]({'action':'client_load','init_data':_0x1ab693,'month_str':_0x3475a9})})[_0x36cc65(0x191)](_0x575e03=>_0x575e03['json']())]);if(lastUserActionTime>_0x49634b){console[_0x36cc65(0x12d)](_0x36cc65(0x170));return;}if(_0x61dfa['ok'])this[_0x36cc65(0x180)](_0x61dfa[_0x36cc65(0x140)],_0x54245d);if(_0x1e46ae['ok'])this[_0x36cc65(0x180)](_0x1e46ae['data'],_0x3475a9);this[_0x36cc65(0x206)]();}catch(_0x411fd3){}},'applyData'(_0x2f748d,_0x14aa74){const _0x2f9e3d=a3_0x84c643;if(!_0x2f748d)return;if(_0x2f748d[_0x2f9e3d(0x167)]){if(_0x2f748d['settings'][_0x2f9e3d(0x1ff)])availabilityPattern=_0x2f748d[_0x2f9e3d(0x167)]['pattern'];if(_0x2f748d[_0x2f9e3d(0x167)]['ranges'])specialRanges=_0x2f748d[_0x2f9e3d(0x167)]['ranges'];if(_0x2f748d[_0x2f9e3d(0x167)][_0x2f9e3d(0x205)])dateExceptions=_0x2f748d['settings'][_0x2f9e3d(0x205)];}if(_0x2f748d[_0x2f9e3d(0x1cb)]&&Array[_0x2f9e3d(0x1dd)](_0x2f748d['clients']))clients=_0x2f748d[_0x2f9e3d(0x1cb)];_0x2f748d[_0x2f9e3d(0x151)]&&(coachProfiles={...coachProfiles,..._0x2f748d[_0x2f9e3d(0x151)]}),_0x2f748d['calendar']&&(sessions=sessions['filter'](_0x2b97b5=>!_0x2b97b5[_0x2f9e3d(0x131)][_0x2f9e3d(0x11d)](_0x14aa74)),Object[_0x2f9e3d(0x1a1)](_0x2f748d[_0x2f9e3d(0x171)])[_0x2f9e3d(0x1e8)](_0x1e36f4=>{const _0x41c782=_0x2f9e3d,_0x2f513b=_0x2f748d[_0x41c782(0x171)][_0x1e36f4];_0x2f513b[_0x41c782(0x1e8)](_0x51c45b=>{const _0xa13dbb=_0x41c782;sessions[_0xa13dbb(0x127)]({'id':_0x51c45b['i'],'clientId':_0x51c45b['c'],'coachId':_0x51c45b[_0xa13dbb(0x152)],'dateStr':_0x14aa74+'-'+_0x1e36f4[_0xa13dbb(0x18c)](0x2,'0'),'start':_0x51c45b['s'],'end':_0x51c45b['e'],'note':_0x51c45b['n']||'','status':_0x51c45b['st']||_0xa13dbb(0x141),'seriesId':_0x51c45b[_0xa13dbb(0x1f7)]});});})),reRenderBlocks();}};function init(){const _0x3d14e2=a3_0x84c643;DataManager[_0x3d14e2(0x1a7)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x3d14e2(0x17a)](_0x3d14e2(0x1a9))[_0x3d14e2(0x1bf)](_0x3d14e2(0x204),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x3d14e2(0x18b)]();}function renderTimeColumn(){const _0x449106=a3_0x84c643,_0x223aa4=document[_0x449106(0x17a)](_0x449106(0x1da)),_0x31d486=document[_0x449106(0x17a)](_0x449106(0x154));_0x223aa4[_0x449106(0x1f8)]='',_0x223aa4[_0x449106(0x173)](_0x31d486);for(let _0x1e0143=0x0;_0x1e0143<0x18;_0x1e0143++){const _0x302e57=document['createElement'](_0x449106(0x135));_0x302e57[_0x449106(0x12e)]=_0x449106(0x20f);if(_0x1e0143>0x0)_0x302e57['innerHTML']=_0x449106(0x1dc)+String(_0x1e0143)['padStart'](0x2,'0')+_0x449106(0x20e);_0x223aa4[_0x449106(0x173)](_0x302e57);}}function renderDayRange(_0x93bd9a,_0x10f65a){const _0x3fa0f0=a3_0x84c643,_0x12c3e4=document[_0x3fa0f0(0x17a)](_0x3fa0f0(0x134)),_0x4140fb=document[_0x3fa0f0(0x17a)](_0x3fa0f0(0x1aa)),_0x5a3bcf=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x3fd3ee=new Date();_0x3fd3ee[_0x3fa0f0(0x1d8)](0x0,0x0,0x0,0x0);const _0x5d2232=getLocalDateStr(new Date());for(let _0x12aed6=_0x93bd9a;_0x12aed6<=_0x10f65a;_0x12aed6++){const _0x489c4d=new Date(_0x3fd3ee);_0x489c4d[_0x3fa0f0(0x182)](_0x489c4d[_0x3fa0f0(0x19c)]()+_0x12aed6);const _0x508ffb=getLocalDateStr(_0x489c4d);let _0x193fec=_0x489c4d[_0x3fa0f0(0x203)]()-0x1;if(_0x193fec===-0x1)_0x193fec=0x6;const _0x47a564=_0x508ffb===_0x5d2232,_0xec956c=document['createElement'](_0x3fa0f0(0x135));_0xec956c[_0x3fa0f0(0x12e)]=_0x3fa0f0(0x146)+(_0x47a564?_0x3fa0f0(0x1ed):''),_0xec956c['setAttribute'](_0x3fa0f0(0x19b),_0x508ffb),_0xec956c[_0x3fa0f0(0x1f8)]=_0x3fa0f0(0x17e)+_0x5a3bcf[_0x193fec]+_0x3fa0f0(0x1cd)+_0x489c4d[_0x3fa0f0(0x19c)]()+_0x3fa0f0(0x13a),_0x12c3e4[_0x3fa0f0(0x173)](_0xec956c);const _0x645421=document[_0x3fa0f0(0x198)]('div');_0x645421[_0x3fa0f0(0x12e)]='day-column\x20'+(_0x47a564?_0x3fa0f0(0x1ed):''),_0x645421[_0x3fa0f0(0x1d6)]('data-date',_0x508ffb),_0x645421['setAttribute'](_0x3fa0f0(0x1d5),_0x193fec),_0x4140fb[_0x3fa0f0(0x173)](_0x645421);}}function reRenderBlocks(){const _0x3b0c35=a3_0x84c643;document[_0x3b0c35(0x1b9)](_0x3b0c35(0x188))[_0x3b0c35(0x1e8)](_0x23f4e2=>{const _0x2b674e=_0x3b0c35;_0x23f4e2[_0x2b674e(0x1b9)](_0x2b674e(0x1d3))[_0x2b674e(0x1e8)](_0x560654=>_0x560654['remove']());const _0x481d6f=_0x23f4e2[_0x2b674e(0x149)]('data-date'),_0x3f6332=parseInt(_0x23f4e2['getAttribute'](_0x2b674e(0x1d5))),_0x362b55=Math[_0x2b674e(0x166)](_0x23f4e2[_0x2b674e(0x16b)]);(availabilityPattern[_0x3f6332]||[])[_0x2b674e(0x1e8)](_0x1c987c=>{const _0x30fa0a=_0x2b674e,_0x4c5909=document['createElement'](_0x30fa0a(0x135));_0x4c5909[_0x30fa0a(0x12e)]=_0x30fa0a(0x147),_0x4c5909[_0x30fa0a(0x1a3)][_0x30fa0a(0x1b3)]=_0x1c987c*GRID_H+'px',_0x4c5909[_0x30fa0a(0x1a3)][_0x30fa0a(0x1a8)]='-'+_0x362b55+_0x30fa0a(0x187)+_0x1c987c*GRID_H+'px',_0x23f4e2[_0x30fa0a(0x173)](_0x4c5909);});if(specialRanges[_0x2b674e(0x17c)]>0x0){const _0x5dea81=new Date(_0x481d6f+_0x2b674e(0x14d))[_0x2b674e(0x11c)](),_0x50516a=new Date(_0x481d6f+'T23:59:59')['getTime']();specialRanges[_0x2b674e(0x1e8)](_0x596b93=>{const _0x313cbd=_0x2b674e,_0x1b5a40=new Date(_0x596b93[_0x313cbd(0x1c1)])[_0x313cbd(0x11c)](),_0x5ade8b=new Date(_0x596b93[_0x313cbd(0x1c7)])[_0x313cbd(0x11c)](),_0x2db771=Math['max'](_0x5dea81,_0x1b5a40),_0x5989fe=Math[_0x313cbd(0x1b5)](_0x50516a,_0x5ade8b);if(_0x2db771<_0x5989fe){const _0x4a59bb=(_0x2db771-_0x5dea81)/0x36ee80*GRID_H,_0x58ad4d=(_0x5989fe-_0x2db771)/0x36ee80*GRID_H,_0x27bc58=document[_0x313cbd(0x198)]('div');_0x58ad4d>=23.5*GRID_H?(_0x27bc58[_0x313cbd(0x12e)]=_0x313cbd(0x150),_0x27bc58['style'][_0x313cbd(0x1a8)]='-'+_0x362b55+'px\x200px'):(_0x27bc58[_0x313cbd(0x12e)]=_0x313cbd(0x11a),_0x27bc58['style'][_0x313cbd(0x1b3)]=_0x4a59bb+'px',_0x27bc58[_0x313cbd(0x1a3)][_0x313cbd(0x199)]=_0x58ad4d+'px',_0x27bc58[_0x313cbd(0x1a3)][_0x313cbd(0x1a8)]='-'+_0x362b55+_0x313cbd(0x187)+_0x4a59bb+'px'),_0x23f4e2[_0x313cbd(0x173)](_0x27bc58);}});}renderEventsForColumn(_0x23f4e2,_0x481d6f);});}function renderEventsForColumn(_0xd5e7e2,_0x4fb9ca){const _0x35ece5=a3_0x84c643,_0x4892d0=sessions[_0x35ece5(0x165)](_0xfd7f9f=>_0xfd7f9f[_0x35ece5(0x131)]===_0x4fb9ca),_0x4f0ad8=_0x4892d0[_0x35ece5(0x121)](_0x445234=>{const _0x48366c=_0x35ece5,[_0x42214e,_0x1f3b9e]=_0x445234[_0x48366c(0x1c1)]['split'](':')[_0x48366c(0x121)](Number),[_0x54daf4,_0x5d17e1]=_0x445234[_0x48366c(0x1c7)][_0x48366c(0x1e4)](':')['map'](Number);return{'data':_0x445234,'start':_0x42214e*0x3c+_0x1f3b9e,'end':_0x54daf4*0x3c+_0x5d17e1,'colIndex':0x0};});_0x4f0ad8[_0x35ece5(0x123)]((_0xb77da4,_0x448e8e)=>_0xb77da4[_0x35ece5(0x1c1)]-_0x448e8e[_0x35ece5(0x1c1)]||_0x448e8e[_0x35ece5(0x1c7)]-_0x448e8e[_0x35ece5(0x1c1)]-(_0xb77da4['end']-_0xb77da4[_0x35ece5(0x1c1)]));const _0x2f51a2=[];_0x4f0ad8[_0x35ece5(0x1e8)](_0x11526d=>{const _0x554273=_0x35ece5;let _0xbff41b=![];for(let _0x4df510=0x0;_0x4df510<_0x2f51a2['length'];_0x4df510++){const _0x38d7af=_0x2f51a2[_0x4df510];if(_0x11526d[_0x554273(0x1c1)]>=_0x38d7af[_0x38d7af[_0x554273(0x17c)]-0x1][_0x554273(0x1c7)]){_0x38d7af[_0x554273(0x127)](_0x11526d),_0x11526d[_0x554273(0x133)]=_0x4df510,_0xbff41b=!![];break;}}!_0xbff41b&&(_0x2f51a2['push']([_0x11526d]),_0x11526d['colIndex']=_0x2f51a2[_0x554273(0x17c)]-0x1);}),_0x4f0ad8[_0x35ece5(0x1e8)](_0x409aca=>{const _0xd6b118=_0x35ece5;let _0x18c331=0x0;_0x4f0ad8['forEach'](_0x53395e=>{const _0x883817=a3_0x3a30;if(Math[_0x883817(0x160)](_0x409aca[_0x883817(0x1c1)],_0x53395e[_0x883817(0x1c1)])<Math['min'](_0x409aca[_0x883817(0x1c7)],_0x53395e['end'])&&_0x53395e[_0x883817(0x133)]>_0x18c331)_0x18c331=_0x53395e[_0x883817(0x133)];});const _0x2efeb3=_0x18c331+0x1,_0x2e40c4=0x64/_0x2efeb3,_0x4e53d9=_0x409aca[_0xd6b118(0x133)]*_0x2e40c4,_0x91bb56=document[_0xd6b118(0x198)](_0xd6b118(0x135)),_0x2cb22e=_0x409aca['data'];let _0x1f14a4=_0xd6b118(0x1b2);if(clients&&clients[_0xd6b118(0x17c)]>0x0){const _0x3d9f96=clients[_0xd6b118(0x156)](_0xd427d=>String(_0xd427d['id'])===String(_0x2cb22e[_0xd6b118(0x12f)]));if(_0x3d9f96&&_0x3d9f96[_0xd6b118(0x179)])_0x1f14a4=_0x3d9f96[_0xd6b118(0x179)];}const _0x3b832e=_0x2cb22e['status']===_0xd6b118(0x1d4),_0x16f399=_0x3b832e?0x1:0.45;_0x91bb56['className']=_0xd6b118(0x1c3)+(_0x3b832e?_0xd6b118(0x1ec):''),_0x91bb56['style'][_0xd6b118(0x1c4)]=hexToRgba(_0x1f14a4,_0x16f399),_0x91bb56['style'][_0xd6b118(0x1cf)]=_0x1f14a4;const _0x1177a8=_0x409aca[_0xd6b118(0x1c1)]/0x3c*GRID_H,_0x3e7207=(_0x409aca[_0xd6b118(0x1c7)]-_0x409aca['start'])/0x3c*GRID_H;_0x91bb56[_0xd6b118(0x1a3)]['top']=_0x1177a8+'px',_0x91bb56[_0xd6b118(0x1a3)]['height']=Math[_0xd6b118(0x160)](_0x3e7207,0x14)+'px',_0x91bb56['style']['width']=_0xd6b118(0x1c5)+_0x2e40c4+_0xd6b118(0x1d9),_0x91bb56[_0xd6b118(0x1a3)]['left']=_0xd6b118(0x1c5)+_0x4e53d9+_0xd6b118(0x124),_0x91bb56[_0xd6b118(0x1a3)][_0xd6b118(0x148)]=0xa+_0x409aca[_0xd6b118(0x133)];if(_0x2e40c4<0x55)_0x91bb56[_0xd6b118(0x153)][_0xd6b118(0x136)](_0xd6b118(0x14c));let _0x176fd6='';if(_0x2cb22e[_0xd6b118(0x1b1)])_0x176fd6+=_0xd6b118(0x130);if(_0x3b832e)_0x176fd6+=_0xd6b118(0x1fe);_0x91bb56[_0xd6b118(0x1f8)]=_0xd6b118(0x18d)+_0x2cb22e[_0xd6b118(0x1c1)]+_0xd6b118(0x12b)+_0x2cb22e['end']+_0xd6b118(0x1ea)+_0x176fd6+_0xd6b118(0x176),_0x91bb56['onclick']=_0x3bb73b=>{_0x3bb73b['stopPropagation'](),openDetails(_0x2cb22e);},_0xd5e7e2['appendChild'](_0x91bb56);});}function openAnalytics(){const _0x25ce55=a3_0x84c643,_0x1cbc50=document['querySelector'](_0x25ce55(0x20a));setAnalyticsPeriod(_0x25ce55(0x1f5),_0x1cbc50),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x18827f,_0x3ef404){const _0x3be1bc=a3_0x84c643;currentAnPeriod=_0x18827f,document[_0x3be1bc(0x1b9)](_0x3be1bc(0x20a))[_0x3be1bc(0x1e8)](_0x2fa95e=>_0x2fa95e[_0x3be1bc(0x153)][_0x3be1bc(0x1e0)]('active'));if(_0x3ef404)_0x3ef404[_0x3be1bc(0x153)][_0x3be1bc(0x136)]('active');const _0x10370c=document[_0x3be1bc(0x17a)](_0x3be1bc(0x20d));_0x10370c[_0x3be1bc(0x1a3)][_0x3be1bc(0x1ad)]=_0x18827f==='custom'?_0x3be1bc(0x142):'none';const _0x533692=new Date();let _0x51955d=new Date(),_0x2f1632=new Date();if(_0x18827f===_0x3be1bc(0x1f5))_0x51955d=getStartOfWeek(_0x533692),_0x2f1632=new Date(_0x51955d),_0x2f1632[_0x3be1bc(0x182)](_0x2f1632[_0x3be1bc(0x19c)]()+0x6);else{if(_0x18827f==='month')_0x51955d=new Date(_0x533692['getFullYear'](),_0x533692[_0x3be1bc(0x139)](),0x1),_0x2f1632=new Date(_0x533692[_0x3be1bc(0x183)](),_0x533692[_0x3be1bc(0x139)]()+0x1,0x0);else{!document['getElementById']('anStart')[_0x3be1bc(0x1d7)]&&(document[_0x3be1bc(0x17a)]('anStart')['value']=getLocalDateStr(_0x533692),document[_0x3be1bc(0x17a)](_0x3be1bc(0x16f))[_0x3be1bc(0x1d7)]=getLocalDateStr(_0x533692));refreshAnalytics();return;}}document[_0x3be1bc(0x17a)](_0x3be1bc(0x12a))[_0x3be1bc(0x1d7)]=getLocalDateStr(_0x51955d),document[_0x3be1bc(0x17a)]('anEnd')[_0x3be1bc(0x1d7)]=getLocalDateStr(_0x2f1632),refreshAnalytics();}function refreshAnalytics(){const _0x30b239=a3_0x84c643,_0x183429=document[_0x30b239(0x17a)](_0x30b239(0x12a))[_0x30b239(0x1d7)],_0x50eb69=document[_0x30b239(0x17a)]('anEnd')['value'];if(!_0x183429||!_0x50eb69)return;const _0x346c81=sessions[_0x30b239(0x165)](_0x234e9c=>_0x234e9c['dateStr']>=_0x183429&&_0x234e9c[_0x30b239(0x131)]<=_0x50eb69&&_0x234e9c[_0x30b239(0x1af)]!=='cancelled'),_0x932ee1=_0x346c81[_0x30b239(0x17c)],_0x20f339=_0x346c81[_0x30b239(0x165)](_0x5711a7=>_0x5711a7['status']==='completed')[_0x30b239(0x17c)],_0x4bc115=_0x932ee1>0x0?Math[_0x30b239(0x166)](_0x20f339/_0x932ee1*0x64):0x0;document['getElementById']('anPercent')[_0x30b239(0x200)]=_0x4bc115+'%',document[_0x30b239(0x17a)]('anTotalStats')['textContent']=_0x20f339+'\x20–∏–∑\x20'+_0x932ee1+_0x30b239(0x1b8);const _0x22ba2f=document['getElementById']('anDonutCircle'),_0x12ee3e=0x2*Math['PI']*0x23,_0x5e7d1b=_0x12ee3e-_0x4bc115/0x64*_0x12ee3e;_0x22ba2f[_0x30b239(0x1a3)][_0x30b239(0x125)]=_0x5e7d1b;const _0x28c2d7={};_0x346c81['forEach'](_0x5d0a80=>{const _0x390f63=_0x30b239,_0x46bd98=_0x5d0a80['coachId']||'Unknown';if(!_0x28c2d7[_0x46bd98]){const _0x35f6ec='#'+_0x46bd98[_0x390f63(0x185)]()['substr'](0x0,0x6);_0x28c2d7[_0x46bd98]={'total':0x0,'done':0x0,'color':_0x35f6ec};}_0x28c2d7[_0x46bd98][_0x390f63(0x175)]++;if(_0x5d0a80[_0x390f63(0x1af)]===_0x390f63(0x1d4))_0x28c2d7[_0x46bd98]['done']++;});const _0x375e60=document['getElementById'](_0x30b239(0x1fd));_0x375e60[_0x30b239(0x1f8)]='';const _0x5ab772=Object['entries'](_0x28c2d7)['sort']((_0x3cb103,_0x91f2c2)=>_0x91f2c2[0x1]['total']-_0x3cb103[0x1][_0x30b239(0x175)]);if(_0x5ab772[_0x30b239(0x17c)]===0x0){_0x375e60[_0x30b239(0x1f8)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x5ab772['forEach'](([_0x3ac9de,_0x28e078])=>{const _0x5df601=_0x30b239,_0x19afcf=Math[_0x5df601(0x166)](_0x28e078['done']/_0x28e078[_0x5df601(0x175)]*0x64),_0x130d87=document[_0x5df601(0x198)](_0x5df601(0x135));_0x130d87['className']=_0x5df601(0x195),_0x130d87[_0x5df601(0x1a3)][_0x5df601(0x1cf)]=_0x28e078[_0x5df601(0x179)],_0x130d87[_0x5df601(0x1f8)]=_0x5df601(0x1ee)+_0x3ac9de[_0x5df601(0x122)](0x0,0x5)+_0x5df601(0x210)+_0x28e078['done']+_0x5df601(0x1df)+_0x28e078[_0x5df601(0x175)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x19afcf+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x375e60[_0x5df601(0x173)](_0x130d87);});}function openDetails(_0x48d9e0){const _0x3bfb5b=a3_0x84c643;currentSession=_0x48d9e0;const _0xce58a3=new Date(_0x48d9e0[_0x3bfb5b(0x131)]),_0x2b94c4=_0xce58a3[_0x3bfb5b(0x128)](_0x3bfb5b(0x164),{'weekday':_0x3bfb5b(0x1b7),'day':_0x3bfb5b(0x14a),'month':_0x3bfb5b(0x1b7)});document[_0x3bfb5b(0x17a)](_0x3bfb5b(0x13d))['textContent']=_0x2b94c4['charAt'](0x0)[_0x3bfb5b(0x1c9)]()+_0x2b94c4[_0x3bfb5b(0x14b)](0x1),document[_0x3bfb5b(0x17a)](_0x3bfb5b(0x1a2))['textContent']=_0x48d9e0[_0x3bfb5b(0x1c1)]+_0x3bfb5b(0x12b)+_0x48d9e0['end'],document['getElementById'](_0x3bfb5b(0x129))[_0x3bfb5b(0x200)]=_0x48d9e0[_0x3bfb5b(0x143)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x448da9=document[_0x3bfb5b(0x17a)](_0x3bfb5b(0x190)),_0x245510=document[_0x3bfb5b(0x17a)](_0x3bfb5b(0x11e)),_0x2e16a5=_0x245510[_0x3bfb5b(0x14f)](_0x3bfb5b(0x1b6)),_0x5395e9=_0x245510['querySelector']('.btn-reschedule'),_0x1173ef=document[_0x3bfb5b(0x17a)]('cancelHint');if(_0x48d9e0[_0x3bfb5b(0x1af)]===_0x3bfb5b(0x1d4))_0x448da9['textContent']=_0x3bfb5b(0x1bb),_0x448da9[_0x3bfb5b(0x1a3)][_0x3bfb5b(0x179)]='var(--acc-green)',_0x245510['style'][_0x3bfb5b(0x1ad)]=_0x3bfb5b(0x1c0);else{_0x448da9[_0x3bfb5b(0x200)]=_0x3bfb5b(0x1ca),_0x448da9['style']['color']='var(--acc-blue)',_0x245510[_0x3bfb5b(0x1a3)]['display']='block';const _0x2f9091=new Date(_0x48d9e0['dateStr']+'T'+_0x48d9e0['start']),_0x324ae9=new Date(),_0x4233d9=(_0x2f9091-_0x324ae9)/(0x3e8*0x3c*0x3c),_0x2c3a14=coachProfiles[_0x48d9e0[_0x3bfb5b(0x201)]]&&coachProfiles[_0x48d9e0[_0x3bfb5b(0x201)]][_0x3bfb5b(0x12c)]?parseInt(coachProfiles[_0x48d9e0[_0x3bfb5b(0x201)]]['cancel_window']):0x18;if(_0x2c3a14===0x0||_0x4233d9>=_0x2c3a14)_0x2e16a5[_0x3bfb5b(0x1a3)][_0x3bfb5b(0x1ad)]=_0x3bfb5b(0x1f3),_0x5395e9[_0x3bfb5b(0x1a3)][_0x3bfb5b(0x1ad)]=_0x3bfb5b(0x1f3),_0x1173ef['style'][_0x3bfb5b(0x1ad)]='none';else{_0x2e16a5['style'][_0x3bfb5b(0x1ad)]=_0x3bfb5b(0x1c0),_0x5395e9['style'][_0x3bfb5b(0x1ad)]=_0x3bfb5b(0x1c0),_0x1173ef[_0x3bfb5b(0x1a3)]['display']=_0x3bfb5b(0x1f3);let _0x57d641=_0x2c3a14===0x0?_0x3bfb5b(0x1ab):_0x3bfb5b(0x1e5)+_0x2c3a14+_0x3bfb5b(0x1b0);_0x1173ef[_0x3bfb5b(0x200)]=_0x3bfb5b(0x1fa)+_0x57d641+_0x3bfb5b(0x20b);}}document['getElementById'](_0x3bfb5b(0x197))[_0x3bfb5b(0x153)]['add'](_0x3bfb5b(0x19a)),document[_0x3bfb5b(0x17a)](_0x3bfb5b(0x17f))[_0x3bfb5b(0x153)][_0x3bfb5b(0x136)](_0x3bfb5b(0x17b));}function closeAllSheets(){const _0x573f86=a3_0x84c643;document['getElementById']('overlay')[_0x573f86(0x153)][_0x573f86(0x1e0)](_0x573f86(0x19a)),document[_0x573f86(0x1b9)]('.sheet')[_0x573f86(0x1e8)](_0x47ff46=>_0x47ff46[_0x573f86(0x153)][_0x573f86(0x1e0)](_0x573f86(0x17b)));}function a3_0x3a30(_0x1f449f,_0x351a7c){_0x1f449f=_0x1f449f-0x11a;const _0x3d1c3b=a3_0x4d02();let _0x221bce=_0x3d1c3b[_0x1f449f];return _0x221bce;}function openSheet(_0x5ec57f){const _0xfd2365=a3_0x84c643;document['getElementById'](_0xfd2365(0x197))[_0xfd2365(0x153)][_0xfd2365(0x136)](_0xfd2365(0x19a)),document['getElementById'](_0x5ec57f)[_0xfd2365(0x153)][_0xfd2365(0x136)](_0xfd2365(0x17b));}function getLocalDateStr(_0x149e00){const _0x2bc7f7=a3_0x84c643,_0x4f0008=_0x149e00[_0x2bc7f7(0x183)](),_0x258c18=String(_0x149e00[_0x2bc7f7(0x139)]()+0x1)[_0x2bc7f7(0x18c)](0x2,'0'),_0x5c57fb=String(_0x149e00[_0x2bc7f7(0x19c)]())[_0x2bc7f7(0x18c)](0x2,'0');return _0x4f0008+'-'+_0x258c18+'-'+_0x5c57fb;}function getStartOfWeek(_0xac9013){const _0x22314d=a3_0x84c643,_0x111f09=new Date(_0xac9013),_0x15c8f5=_0x111f09[_0x22314d(0x203)](),_0x1e6966=_0x111f09[_0x22314d(0x19c)]()-_0x15c8f5+(_0x15c8f5===0x0?-0x6:0x1);return _0x111f09[_0x22314d(0x182)](_0x1e6966),_0x111f09['setHours'](0x0,0x0,0x0,0x0),_0x111f09;}function a3_0x4d02(){const _0x1d9775=['getDate','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','182jeNalC','#ff453a','keys','detTime','style','–û—Ç–º–µ–Ω–µ–Ω–æ','get_slots','rgba(10,\x20132,\x20255,\x20','loadLocal','backgroundPosition','matrixViewport','gridColumns','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','WebApp','display','rs-date-chip','status','\x20—á.','seriesId','#0a84ff','top','insertBefore','min','.btn-cancel','long','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','querySelectorAll','3286443kwNHGh','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','setHeaderColor','firstChild','1739805Ahrucf','addEventListener','none','start','600','event-card','backgroundColor','calc(','ccYesBtn','end','client_load','toUpperCase','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','clients','stringify','</div><div\x20class=\x22dch-num\x22>','getItem','borderLeftColor','scrollTop','setBackgroundColor','Critical\x20TMA\x20Error:','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','completed','data-day-idx','setAttribute','value','setHours','%\x20-\x204px)','timeColumn','ranges','<span>','isArray','reschedule','</span>\x20/\x20','remove','uc_client_settings','v9.5-CLIENT-ANALYTICS','scrollTo','split','–∑–∞\x20','17451kROpLL','auto','forEach','scrollLeft','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','\x20status-completed','today','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','scrollWidth','constructor','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','button','block','location','week','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','sid','innerHTML','BackButton','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','2RUiZMA','substring','analyticsList','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','pattern','textContent','coachId','floor','getDay','scroll','exceptions','saveLocally','visible','toLocaleString','(((.+)+)+)+$','.period-switch\x20.p-btn','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','setItem','anCustomDates',':00</span>','time-label','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','parse','blocked-range-part\x20stripe-bg','ccText','getTime','startsWith','cancelContainer','.day-col-header[data-date=\x22','join','map','substr','sort','%\x20+\x202px)','strokeDashoffset','uc_client_list','push','toLocaleDateString','detNote','anStart','\x20-\x20','cancel_window','log','className','clientId','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','dateStr','show','colIndex','daysHeaderTrack','div','add','router.html','findIndex','getMonth','</div>','Error\x20setting\x20back\x20button:','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','detDate','onclick','toast','data','planned','flex','note','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','initData','day-col-header\x20','blocked-slot\x20stripe-bg','zIndex','getAttribute','numeric','slice','mini','T00:00:00','.day-col-header','querySelector','day-off-overlay\x20stripe-bg','coach_profiles','cid','classList','timeLineBadge','rgba(','find','rsSlotsGrid','setMonth','expand','search','POST','headerMonth','36800QpDLhv','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','now','max','href','1570JQgPMg','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','ru-RU','filter','round','settings','4385490TKPqVn','offClick','json','offsetLeft','<div\x20class=\x22rs-day-name\x22>','1063379YtRyJf','customConfirm','anEnd','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','calendar','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','appendChild','ready','total','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','rsDatesTrack','all','color','getElementById','open','length','uc_client_sessions','<div\x20class=\x22dch-day\x22>','detailsSheet','applyData','Telegram','setDate','getFullYear','804040ZRdSih','toString','#050505','px\x20-','.day-column','disableVerticalSwipes','createDocumentFragment','syncLoad','padStart','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','rs-time-btn','rescheduleSheet','detStatus','then','DOMContentLoaded','fontWeight','getHours','client-stat-card','day-column\x20','overlay','createElement','height','active','data-date'];a3_0x4d02=function(){return _0x1d9775;};return a3_0x4d02();}function scrollToToday(){const _0x511bfe=getLocalDateStr(new Date());setTimeout(()=>{const _0x330972=a3_0x3a30,_0x4f1b37=document[_0x330972(0x14f)](_0x330972(0x11f)+_0x511bfe+'\x22]');if(_0x4f1b37){const _0x2b6442=document[_0x330972(0x17a)](_0x330972(0x1a9)),_0x4952fe=_0x4f1b37['offsetLeft']-_0x2b6442['clientWidth']/0x2+_0x4f1b37['offsetWidth']/0x2;_0x2b6442[_0x330972(0x1e3)]({'left':_0x4952fe,'behavior':_0x330972(0x1e7)}),_0x2b6442[_0x330972(0x1d0)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x13a487=a3_0x84c643,_0x4c79c8=new Date(),_0x43338a=document['getElementById']('globalTimeLine'),_0x2b5081=document['getElementById'](_0x13a487(0x154)),_0x194acc=(_0x4c79c8[_0x13a487(0x194)]()*0x3c+_0x4c79c8['getMinutes']())/0x3c*GRID_H;_0x43338a[_0x13a487(0x1a3)]['top']=_0x194acc+'px',_0x43338a[_0x13a487(0x1a3)][_0x13a487(0x1ad)]=_0x13a487(0x1f3),_0x2b5081[_0x13a487(0x1a3)][_0x13a487(0x1b3)]=_0x194acc+'px',_0x2b5081['style'][_0x13a487(0x1ad)]='block',_0x2b5081['textContent']=String(_0x4c79c8[_0x13a487(0x194)]())['padStart'](0x2,'0')+':'+String(_0x4c79c8['getMinutes']())[_0x13a487(0x18c)](0x2,'0');}function onScroll(){const _0x17a728=a3_0x84c643,_0x2c90ff=document[_0x17a728(0x17a)]('matrixViewport'),_0x2b9d02=document[_0x17a728(0x1b9)](_0x17a728(0x14e));for(let _0x495b06 of _0x2b9d02)if(_0x495b06['offsetLeft']>=_0x2c90ff[_0x17a728(0x1e9)]){const _0x5f5ce7=new Date(_0x495b06['getAttribute'](_0x17a728(0x19b)));document[_0x17a728(0x17a)](_0x17a728(0x15c))[_0x17a728(0x200)]=_0x5f5ce7[_0x17a728(0x208)]('ru',{'month':_0x17a728(0x1b7)})[_0x17a728(0x1c9)]()+'\x20'+_0x5f5ce7[_0x17a728(0x183)]();break;}}function showToast(_0x327f85){const _0x47871a=a3_0x84c643,_0xb620f7=document[_0x47871a(0x17a)](_0x47871a(0x13f));_0xb620f7[_0x47871a(0x200)]=_0x327f85,_0xb620f7[_0x47871a(0x153)][_0x47871a(0x136)](_0x47871a(0x132)),setTimeout(()=>_0xb620f7[_0x47871a(0x153)][_0x47871a(0x1e0)](_0x47871a(0x132)),0x7d0);}function handleInfiniteScroll(){const _0x2acab9=a3_0x84c643,_0x4be9c5=document[_0x2acab9(0x17a)](_0x2acab9(0x1a9)),_0x5f21b3=_0x4be9c5[_0x2acab9(0x1e9)],_0x4af66c=_0x4be9c5[_0x2acab9(0x1ef)],_0x1da0e3=_0x4be9c5['clientWidth'];if(_0x4af66c-(_0x5f21b3+_0x1da0e3)<0x12c){const _0x573de8=endOffset;endOffset+=0xe,renderDayRange(_0x573de8+0x1,endOffset),reRenderBlocks();}if(_0x5f21b3<0x12c){const _0x52a7b1=startOffset;startOffset-=0xe,prependDays(startOffset,_0x52a7b1-0x1),_0x4be9c5[_0x2acab9(0x1e9)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x3c517f,_0x39505d){const _0x2f1268=a3_0x84c643,_0x5b2f89=document[_0x2f1268(0x17a)](_0x2f1268(0x134)),_0x588e51=document[_0x2f1268(0x17a)](_0x2f1268(0x1aa)),_0x1d0fb3=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2bd95b=new Date();_0x2bd95b[_0x2f1268(0x1d8)](0x0,0x0,0x0,0x0);const _0x3b0a73=getLocalDateStr(new Date()),_0x9da637=document['createDocumentFragment'](),_0x5a556e=document[_0x2f1268(0x18a)]();for(let _0x3d673a=_0x3c517f;_0x3d673a<=_0x39505d;_0x3d673a++){const _0x4b143e=new Date(_0x2bd95b);_0x4b143e[_0x2f1268(0x182)](_0x4b143e[_0x2f1268(0x19c)]()+_0x3d673a);const _0x3a57de=getLocalDateStr(_0x4b143e);let _0x375008=_0x4b143e[_0x2f1268(0x203)]()-0x1;if(_0x375008===-0x1)_0x375008=0x6;const _0x25af7e=_0x3a57de===_0x3b0a73,_0x2f3d46=document[_0x2f1268(0x198)](_0x2f1268(0x135));_0x2f3d46[_0x2f1268(0x12e)]='day-col-header\x20'+(_0x25af7e?'today':''),_0x2f3d46[_0x2f1268(0x1d6)](_0x2f1268(0x19b),_0x3a57de),_0x2f3d46[_0x2f1268(0x1f8)]=_0x2f1268(0x17e)+_0x1d0fb3[_0x375008]+_0x2f1268(0x1cd)+_0x4b143e[_0x2f1268(0x19c)]()+_0x2f1268(0x13a),_0x9da637[_0x2f1268(0x173)](_0x2f3d46);const _0x3edec6=document[_0x2f1268(0x198)](_0x2f1268(0x135));_0x3edec6[_0x2f1268(0x12e)]=_0x2f1268(0x196)+(_0x25af7e?'today':''),_0x3edec6['setAttribute']('data-date',_0x3a57de),_0x3edec6[_0x2f1268(0x1d6)]('data-day-idx',_0x375008),_0x5a556e[_0x2f1268(0x173)](_0x3edec6);}_0x5b2f89[_0x2f1268(0x1b4)](_0x9da637,_0x5b2f89[_0x2f1268(0x1bd)]),_0x588e51[_0x2f1268(0x1b4)](_0x5a556e,_0x588e51[_0x2f1268(0x14f)](_0x2f1268(0x188)));}function hexToRgba(_0x5a4c09,_0x7f3184){const _0x5d78e7=a3_0x84c643;let _0x181a70;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x5a4c09))return _0x181a70=_0x5a4c09[_0x5d78e7(0x1fc)](0x1)[_0x5d78e7(0x1e4)](''),_0x181a70['length']==0x3&&(_0x181a70=[_0x181a70[0x0],_0x181a70[0x0],_0x181a70[0x1],_0x181a70[0x1],_0x181a70[0x2],_0x181a70[0x2]]),_0x181a70='0x'+_0x181a70[_0x5d78e7(0x120)](''),_0x5d78e7(0x155)+[_0x181a70>>0x10&0xff,_0x181a70>>0x8&0xff,_0x181a70&0xff][_0x5d78e7(0x120)](',')+','+_0x7f3184+')';return _0x5d78e7(0x1a6)+_0x7f3184+')';}let confirmResolver=null;function showCustomConfirm(_0x477fc3,_0x22385e,_0x233dfd=!![]){const _0x343209=a3_0x84c643;document['getElementById']('ccTitle')[_0x343209(0x200)]=_0x477fc3,document[_0x343209(0x17a)](_0x343209(0x11b))[_0x343209(0x200)]=_0x22385e;const _0x528bf3=document[_0x343209(0x17a)](_0x343209(0x1c6));return _0x233dfd?(_0x528bf3[_0x343209(0x1a3)][_0x343209(0x179)]=_0x343209(0x1a0),_0x528bf3[_0x343209(0x1a3)][_0x343209(0x193)]=_0x343209(0x1c2)):(_0x528bf3[_0x343209(0x1a3)]['color']='#0a84ff',_0x528bf3[_0x343209(0x1a3)]['fontWeight']=_0x343209(0x1c2)),new Promise(_0x30b702=>{const _0x435eac=_0x343209;confirmResolver=_0x30b702,document[_0x435eac(0x17a)](_0x435eac(0x16e))['classList'][_0x435eac(0x136)](_0x435eac(0x207));});}function resolveCustomConfirm(_0x1760ac){const _0x25e265=a3_0x84c643;document[_0x25e265(0x17a)]('customConfirm')[_0x25e265(0x153)]['remove'](_0x25e265(0x207));if(confirmResolver)confirmResolver(_0x1760ac);}async function tryCancelCurrentSession(){const _0x30d871=a3_0x84c643;if(!currentSession)return;const _0xfeec15=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x30d871(0x19d),!![]);if(!_0xfeec15)return;const _0x20b2eb=currentSession;closeAllSheets(),sessions=sessions[_0x30d871(0x165)](_0x448e73=>_0x448e73['id']!==_0x20b2eb['id']),reRenderBlocks(),showToast(_0x30d871(0x1a4)),lastUserActionTime=Date[_0x30d871(0x15f)]();try{const _0x50b9e2=window[_0x30d871(0x181)]?.['WebApp'],_0x47dabe=await fetch(API_URL,{'method':'POST','body':JSON[_0x30d871(0x1cc)]({'action':'client_cancel','init_data':_0x50b9e2?.[_0x30d871(0x145)]||'','coachId':_0x20b2eb[_0x30d871(0x201)],'dateStr':_0x20b2eb[_0x30d871(0x131)],'sessionId':_0x20b2eb['id']})});if(_0x47dabe['ok'])DataManager[_0x30d871(0x206)]();}catch(_0x2469ee){showToast(_0x30d871(0x144));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x3c58c0=a3_0x84c643;if(!currentSession)return;document[_0x3c58c0(0x17a)]('detailsSheet')[_0x3c58c0(0x153)]['remove']('open'),document[_0x3c58c0(0x17a)](_0x3c58c0(0x18f))['classList'][_0x3c58c0(0x136)](_0x3c58c0(0x17b));const _0xa606dd=document[_0x3c58c0(0x17a)](_0x3c58c0(0x177)),_0xbc8111=document['getElementById'](_0x3c58c0(0x157));_0xa606dd[_0x3c58c0(0x1f8)]='',_0xbc8111[_0x3c58c0(0x1f8)]=_0x3c58c0(0x163);const [_0x5d6e78,_0x5ec4c1]=currentSession[_0x3c58c0(0x1c1)][_0x3c58c0(0x1e4)](':')[_0x3c58c0(0x121)](Number),[_0x4f91b4,_0x485b60]=currentSession[_0x3c58c0(0x1c7)][_0x3c58c0(0x1e4)](':')[_0x3c58c0(0x121)](Number),_0x5d3536=_0x4f91b4*0x3c+_0x485b60-(_0x5d6e78*0x3c+_0x5ec4c1);try{const _0x193cb8=window[_0x3c58c0(0x181)]?.['WebApp'],_0x3ad018=await fetch(API_URL,{'method':_0x3c58c0(0x15b),'body':JSON['stringify']({'action':_0x3c58c0(0x1a5),'coachId':currentSession[_0x3c58c0(0x201)],'duration':_0x5d3536,'init_data':_0x193cb8?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x2cc57f=await _0x3ad018[_0x3c58c0(0x16a)]();_0x2cc57f['ok']&&_0x2cc57f[_0x3c58c0(0x140)]?(availableSlotsCache=_0x2cc57f['data'],renderRescheduleDates()):_0xbc8111[_0x3c58c0(0x1f8)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x316fe7){_0xbc8111[_0x3c58c0(0x1f8)]=_0x3c58c0(0x1f6);}}function renderRescheduleDates(){const _0x2352ef=a3_0x84c643,_0x176ec8=document[_0x2352ef(0x17a)](_0x2352ef(0x177));_0x176ec8[_0x2352ef(0x1f8)]='';const _0x138fd0=Object[_0x2352ef(0x1a1)](availableSlotsCache)[_0x2352ef(0x123)](),_0x58f20a=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x138fd0[_0x2352ef(0x17c)]===0x0){document[_0x2352ef(0x17a)](_0x2352ef(0x157))['innerHTML']=_0x2352ef(0x1f1);return;}_0x138fd0[_0x2352ef(0x1e8)]((_0xe832a5,_0x436c40)=>{const _0x1b82ce=_0x2352ef,_0x156970=new Date(_0xe832a5),_0x5abb53=_0x58f20a[_0x156970[_0x1b82ce(0x203)]()],_0x4b5a0c=_0x156970[_0x1b82ce(0x19c)](),_0x16cacc=document[_0x1b82ce(0x198)](_0x1b82ce(0x135));_0x16cacc[_0x1b82ce(0x12e)]=_0x1b82ce(0x1ae);if(_0x436c40===0x0)_0x16cacc[_0x1b82ce(0x153)]['add'](_0x1b82ce(0x19a));_0x16cacc[_0x1b82ce(0x1f8)]=_0x1b82ce(0x16c)+_0x5abb53+'</div><div\x20class=\x22rs-day-num\x22>'+_0x4b5a0c+_0x1b82ce(0x13a),_0x16cacc['onclick']=()=>selectRsDate(_0xe832a5,_0x16cacc),_0x176ec8[_0x1b82ce(0x173)](_0x16cacc);}),selectRsDate(_0x138fd0[0x0],_0x176ec8[_0x2352ef(0x1bd)]);}function selectRsDate(_0x5eea75,_0x4000a7){const _0x38923c=a3_0x84c643;selectedRsDate=_0x5eea75,document[_0x38923c(0x1b9)]('.rs-date-chip')['forEach'](_0x1b3113=>_0x1b3113[_0x38923c(0x153)][_0x38923c(0x1e0)](_0x38923c(0x19a)));if(_0x4000a7)_0x4000a7[_0x38923c(0x153)][_0x38923c(0x136)](_0x38923c(0x19a));const _0x9a6f9c=document[_0x38923c(0x17a)](_0x38923c(0x157));_0x9a6f9c[_0x38923c(0x1f8)]='';const _0x376526=availableSlotsCache[_0x5eea75]||[];if(_0x376526[_0x38923c(0x17c)]===0x0){_0x9a6f9c['innerHTML']=_0x38923c(0x172);return;}_0x376526[_0x38923c(0x1e8)](_0x3e4f46=>{const _0x3d661e=_0x38923c,_0x39b3cc=document[_0x3d661e(0x198)](_0x3d661e(0x1f2));_0x39b3cc['className']=_0x3d661e(0x18e),_0x39b3cc[_0x3d661e(0x200)]=_0x3e4f46,_0x39b3cc[_0x3d661e(0x13e)]=()=>confirmReschedule(_0x3e4f46),_0x9a6f9c['appendChild'](_0x39b3cc);});}async function confirmReschedule(_0x4f33db){const _0x54b204=a3_0x84c643,_0xe7c586=new Date(selectedRsDate),_0x10feaf=_0xe7c586[_0x54b204(0x128)](_0x54b204(0x164),{'day':_0x54b204(0x14a),'month':_0x54b204(0x1b7)}),_0x27be85=await showCustomConfirm(_0x54b204(0x1eb),_0x54b204(0x13c)+_0x10feaf+'\x20–≤\x20'+_0x4f33db+'?',![]);if(!_0x27be85)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x54b204(0x15f)]();const _0x4a641d=currentSession[_0x54b204(0x131)],_0x3bfd83=currentSession['id'],[_0xae2e1d,_0x9a595f]=currentSession[_0x54b204(0x1c1)][_0x54b204(0x1e4)](':')[_0x54b204(0x121)](Number),[_0x371807,_0x2d3bda]=currentSession[_0x54b204(0x1c7)]['split'](':')['map'](Number),_0x56ffe4=_0x371807*0x3c+_0x2d3bda-(_0xae2e1d*0x3c+_0x9a595f),[_0x49de99,_0x399c41]=_0x4f33db[_0x54b204(0x1e4)](':')[_0x54b204(0x121)](Number),_0x424d13=_0x49de99*0x3c+_0x399c41+_0x56ffe4,_0x2f0e8f=Math[_0x54b204(0x202)](_0x424d13/0x3c),_0x383f4d=_0x424d13%0x3c,_0x3757ab=String(_0x2f0e8f)[_0x54b204(0x18c)](0x2,'0')+':'+String(_0x383f4d)[_0x54b204(0x18c)](0x2,'0'),_0x16ca99=sessions[_0x54b204(0x138)](_0x47a887=>_0x47a887['id']===_0x3bfd83);_0x16ca99!==-0x1&&(sessions[_0x16ca99]['dateStr']=selectedRsDate,sessions[_0x16ca99][_0x54b204(0x1c1)]=_0x4f33db,sessions[_0x16ca99][_0x54b204(0x1c7)]=_0x3757ab,reRenderBlocks());try{const _0x423d1d=window[_0x54b204(0x181)]?.[_0x54b204(0x1ac)],_0x2be134=await fetch(API_URL,{'method':_0x54b204(0x15b),'body':JSON[_0x54b204(0x1cc)]({'action':_0x54b204(0x1de),'init_data':_0x423d1d?.[_0x54b204(0x145)]||'','oldSessionId':_0x3bfd83,'oldDate':_0x4a641d,'newDate':selectedRsDate,'newTime':_0x4f33db,'coachId':currentSession[_0x54b204(0x201)]})}),_0x422815=await _0x2be134[_0x54b204(0x16a)]();!_0x422815['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x54b204(0x18b)]()):(showToast(_0x54b204(0x15e)),DataManager['saveLocally']());}catch(_0x1ad552){showToast(_0x54b204(0x144));}}document[a3_0x84c643(0x1bf)](a3_0x84c643(0x192),init);