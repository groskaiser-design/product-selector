const a3_0x5188d6=a3_0x1b64;(function(_0x431934,_0x271fd5){const _0xd871e=a3_0x1b64,_0x1d8749=_0x431934();while(!![]){try{const _0x1c3e3a=-parseInt(_0xd871e(0x122))/0x1*(parseInt(_0xd871e(0x10b))/0x2)+parseInt(_0xd871e(0xe9))/0x3+parseInt(_0xd871e(0x158))/0x4+parseInt(_0xd871e(0x137))/0x5+parseInt(_0xd871e(0x188))/0x6+parseInt(_0xd871e(0x104))/0x7+-parseInt(_0xd871e(0x13a))/0x8*(parseInt(_0xd871e(0x14b))/0x9);if(_0x1c3e3a===_0x271fd5)break;else _0x1d8749['push'](_0x1d8749['shift']());}catch(_0x1fa28f){_0x1d8749['push'](_0x1d8749['shift']());}}}(a3_0x477e,0xc2dd6));const APP_VERSION=a3_0x5188d6(0x139),API_URL=a3_0x5188d6(0x190),GRID_H=0x3c,KEY_SESSIONS=a3_0x5188d6(0x127),KEY_SETTINGS=a3_0x5188d6(0x1d7),KEY_CLIENTS='uc_client_list';let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x5188d6(0x113),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x592e6e=a3_0x5188d6,_0x2edcee=(function(){let _0x1bfc1e=!![];return function(_0x340b33,_0x4d2912){const _0x304af7=_0x1bfc1e?function(){const _0x97052e=a3_0x1b64;if(_0x4d2912){const _0x1f32cf=_0x4d2912[_0x97052e(0xf4)](_0x340b33,arguments);return _0x4d2912=null,_0x1f32cf;}}:function(){};return _0x1bfc1e=![],_0x304af7;};}()),_0x1beb1c=_0x2edcee(this,function(){const _0x4c888f=a3_0x1b64;return _0x1beb1c['toString']()[_0x4c888f(0x14c)](_0x4c888f(0x1b7))[_0x4c888f(0x1d4)]()[_0x4c888f(0x1b1)](_0x1beb1c)['search'](_0x4c888f(0x1b7));});_0x1beb1c();try{const _0x13aef8=window[_0x592e6e(0x1c5)]?.[_0x592e6e(0x11a)];if(!_0x13aef8)return;_0x13aef8[_0x592e6e(0x135)](),_0x13aef8[_0x592e6e(0xfb)]();try{_0x13aef8[_0x592e6e(0x1b8)](_0x592e6e(0x164)),_0x13aef8[_0x592e6e(0xfe)]&&_0x13aef8['setBackgroundColor'](_0x592e6e(0x164));}catch(_0x5a4e61){console[_0x592e6e(0x12e)](_0x592e6e(0x13c),_0x5a4e61);}try{_0x13aef8['BackButton']&&(_0x13aef8[_0x592e6e(0x147)][_0x592e6e(0x103)](),_0x13aef8[_0x592e6e(0x147)][_0x592e6e(0x151)](),_0x13aef8[_0x592e6e(0x147)][_0x592e6e(0xea)](function(){const _0x9f8950=_0x592e6e;window['location']['href']=_0x9f8950(0x1ac);}));}catch(_0x257933){console[_0x592e6e(0x12e)](_0x592e6e(0x144),_0x257933);}try{if(_0x13aef8[_0x592e6e(0x1da)])_0x13aef8[_0x592e6e(0x1da)]();}catch(_0x25efcf){}}catch(_0x402ca9){console['error'](_0x592e6e(0x154),_0x402ca9);}}());function isAdmin(){const _0x4e5134=a3_0x5188d6;try{const _0x9c88e8=Number(window[_0x4e5134(0x1c5)]?.[_0x4e5134(0x11a)]?.[_0x4e5134(0x106)]?.[_0x4e5134(0x1bc)]?.['id']);return _0x9c88e8===0xbaf7174;}catch(_0x3448a8){return![];}}const DataManager={'saveLocally'(){const _0xceae37=a3_0x5188d6;try{localStorage[_0xceae37(0x121)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0xceae37(0x121)](KEY_CLIENTS,JSON[_0xceae37(0x195)](clients)),localStorage[_0xceae37(0x121)](KEY_SETTINGS,JSON[_0xceae37(0x195)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x332144){}},'loadLocal'(){const _0x3db120=a3_0x5188d6;try{const _0x3929ef=localStorage[_0x3db120(0x12c)](KEY_SESSIONS);if(_0x3929ef)sessions=JSON[_0x3db120(0x160)](_0x3929ef);const _0x58c343=localStorage[_0x3db120(0x12c)](KEY_CLIENTS);if(_0x58c343)clients=JSON['parse'](_0x58c343);const _0xd857bd=localStorage[_0x3db120(0x12c)](KEY_SETTINGS);if(_0xd857bd){const _0x8679bc=JSON[_0x3db120(0x160)](_0xd857bd);if(_0x8679bc['pattern'])availabilityPattern=_0x8679bc[_0x3db120(0xeb)];if(_0x8679bc[_0x3db120(0x1cc)])specialRanges=_0x8679bc[_0x3db120(0x1cc)];if(_0x8679bc['exceptions'])dateExceptions=_0x8679bc['exceptions'];}}catch(_0x50eb65){}},async 'syncLoad'(){const _0x54be9e=a3_0x5188d6,_0x49cc8e=new Date(),_0x58cc11=_0x49cc8e[_0x54be9e(0x1a7)]()+'-'+String(_0x49cc8e[_0x54be9e(0x176)]()+0x1)[_0x54be9e(0x14a)](0x2,'0'),_0xc54bb2=new Date(_0x49cc8e);_0xc54bb2[_0x54be9e(0x168)](_0x49cc8e[_0x54be9e(0x176)]()+0x1);const _0x9706fc=_0xc54bb2[_0x54be9e(0x1a7)]()+'-'+String(_0xc54bb2[_0x54be9e(0x176)]()+0x1)[_0x54be9e(0x14a)](0x2,'0'),_0xcfce2b=Date[_0x54be9e(0x1bf)]();try{const _0x18d324=window['Telegram']?.[_0x54be9e(0x11a)],_0x2a59d8=_0x18d324?.[_0x54be9e(0x1b5)]||'',[_0x13fbb1,_0x39df93]=await Promise['all']([fetch(API_URL,{'method':'POST','body':JSON[_0x54be9e(0x195)]({'action':_0x54be9e(0x13b),'init_data':_0x2a59d8,'month_str':_0x58cc11})})['then'](_0x3fd6a0=>_0x3fd6a0[_0x54be9e(0x193)]()),fetch(API_URL,{'method':_0x54be9e(0x173),'body':JSON[_0x54be9e(0x195)]({'action':_0x54be9e(0x13b),'init_data':_0x2a59d8,'month_str':_0x9706fc})})[_0x54be9e(0x11f)](_0x4fee80=>_0x4fee80[_0x54be9e(0x193)]())]);if(lastUserActionTime>_0xcfce2b){console['log'](_0x54be9e(0x1c4));return;}if(_0x13fbb1['ok'])this[_0x54be9e(0x180)](_0x13fbb1[_0x54be9e(0x186)],_0x58cc11);if(_0x39df93['ok'])this[_0x54be9e(0x180)](_0x39df93[_0x54be9e(0x186)],_0x9706fc);this[_0x54be9e(0x11b)]();}catch(_0x509357){}},'applyData'(_0x3f1d47,_0xe4a995){const _0x2d66f8=a3_0x5188d6;if(!_0x3f1d47)return;if(_0x3f1d47[_0x2d66f8(0x1c8)]){if(_0x3f1d47[_0x2d66f8(0x1c8)][_0x2d66f8(0xeb)])availabilityPattern=_0x3f1d47[_0x2d66f8(0x1c8)][_0x2d66f8(0xeb)];if(_0x3f1d47[_0x2d66f8(0x1c8)][_0x2d66f8(0x1cc)])specialRanges=_0x3f1d47[_0x2d66f8(0x1c8)][_0x2d66f8(0x1cc)];if(_0x3f1d47['settings'][_0x2d66f8(0x198)])dateExceptions=_0x3f1d47[_0x2d66f8(0x1c8)][_0x2d66f8(0x198)];}if(_0x3f1d47[_0x2d66f8(0x153)]&&Array[_0x2d66f8(0x170)](_0x3f1d47['clients']))clients=_0x3f1d47['clients'];_0x3f1d47[_0x2d66f8(0x143)]&&(coachProfiles={...coachProfiles,..._0x3f1d47[_0x2d66f8(0x143)]}),_0x3f1d47['calendar']&&(sessions=sessions[_0x2d66f8(0x136)](_0x17eb48=>!_0x17eb48[_0x2d66f8(0x1b3)][_0x2d66f8(0x172)](_0xe4a995)),Object[_0x2d66f8(0x149)](_0x3f1d47[_0x2d66f8(0x11c)])[_0x2d66f8(0x1a8)](_0x50638a=>{const _0x465f2b=_0x2d66f8,_0x5c436e=_0x3f1d47[_0x465f2b(0x11c)][_0x50638a];_0x5c436e['forEach'](_0x557d7e=>{const _0x55baeb=_0x465f2b;sessions['push']({'id':_0x557d7e['i'],'clientId':_0x557d7e['c'],'coachId':_0x557d7e[_0x55baeb(0x11d)],'dateStr':_0xe4a995+'-'+_0x50638a[_0x55baeb(0x14a)](0x2,'0'),'start':_0x557d7e['s'],'end':_0x557d7e['e'],'note':_0x557d7e['n']||'','status':_0x557d7e['st']||_0x55baeb(0x1d8),'seriesId':_0x557d7e['sid']});});})),reRenderBlocks();}};function init(){const _0x34372e=a3_0x5188d6;DataManager[_0x34372e(0x12d)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x34372e(0xf0)](_0x34372e(0x16b))['addEventListener'](_0x34372e(0x1dd),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x34372e(0x114)]();}function renderTimeColumn(){const _0x2d74a4=a3_0x5188d6,_0x9275d4=document[_0x2d74a4(0xf0)](_0x2d74a4(0x1d5)),_0x437acb=document['getElementById'](_0x2d74a4(0x13d));_0x9275d4[_0x2d74a4(0x18e)]='',_0x9275d4[_0x2d74a4(0xf6)](_0x437acb);for(let _0x5e7bd9=0x0;_0x5e7bd9<0x18;_0x5e7bd9++){const _0x48fd05=document['createElement'](_0x2d74a4(0x179));_0x48fd05[_0x2d74a4(0x15a)]=_0x2d74a4(0x13f);if(_0x5e7bd9>0x0)_0x48fd05[_0x2d74a4(0x18e)]='<span>'+String(_0x5e7bd9)[_0x2d74a4(0x14a)](0x2,'0')+':00</span>';_0x9275d4[_0x2d74a4(0xf6)](_0x48fd05);}}function renderDayRange(_0x1e9ae1,_0x3b0a27){const _0x3dfbb7=a3_0x5188d6,_0x399622=document[_0x3dfbb7(0xf0)](_0x3dfbb7(0x162)),_0x3a049a=document[_0x3dfbb7(0xf0)](_0x3dfbb7(0x14e)),_0x4a6505=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x49ed9d=new Date();_0x49ed9d[_0x3dfbb7(0x130)](0x0,0x0,0x0,0x0);const _0x3eec4b=getLocalDateStr(new Date());for(let _0x47b609=_0x1e9ae1;_0x47b609<=_0x3b0a27;_0x47b609++){const _0x40d920=new Date(_0x49ed9d);_0x40d920[_0x3dfbb7(0x1c1)](_0x40d920[_0x3dfbb7(0x1df)]()+_0x47b609);const _0x2e99c8=getLocalDateStr(_0x40d920);let _0x58e015=_0x40d920[_0x3dfbb7(0xed)]()-0x1;if(_0x58e015===-0x1)_0x58e015=0x6;const _0xf037da=_0x2e99c8===_0x3eec4b,_0x135204=document[_0x3dfbb7(0x1d3)](_0x3dfbb7(0x179));_0x135204['className']=_0x3dfbb7(0x1ab)+(_0xf037da?'today':''),_0x135204[_0x3dfbb7(0x155)](_0x3dfbb7(0x15e),_0x2e99c8),_0x135204[_0x3dfbb7(0x18e)]=_0x3dfbb7(0x108)+_0x4a6505[_0x58e015]+_0x3dfbb7(0x128)+_0x40d920[_0x3dfbb7(0x1df)]()+_0x3dfbb7(0x124),_0x399622[_0x3dfbb7(0xf6)](_0x135204);const _0x1d8767=document[_0x3dfbb7(0x1d3)]('div');_0x1d8767['className']=_0x3dfbb7(0x145)+(_0xf037da?'today':''),_0x1d8767[_0x3dfbb7(0x155)](_0x3dfbb7(0x15e),_0x2e99c8),_0x1d8767[_0x3dfbb7(0x155)](_0x3dfbb7(0xe8),_0x58e015),_0x3a049a[_0x3dfbb7(0xf6)](_0x1d8767);}}function reRenderBlocks(){const _0x3d5377=a3_0x5188d6;document[_0x3d5377(0x111)](_0x3d5377(0x10e))[_0x3d5377(0x1a8)](_0x35a4b8=>{const _0x41a416=_0x3d5377;_0x35a4b8[_0x41a416(0x111)](_0x41a416(0x159))[_0x41a416(0x1a8)](_0x411ace=>_0x411ace[_0x41a416(0x18d)]());const _0x21672a=_0x35a4b8[_0x41a416(0x1d9)]('data-date'),_0xeb7ce3=parseInt(_0x35a4b8[_0x41a416(0x1d9)](_0x41a416(0xe8))),_0x47df19=Math['round'](_0x35a4b8['offsetLeft']);(availabilityPattern[_0xeb7ce3]||[])[_0x41a416(0x1a8)](_0x444451=>{const _0x99e3ba=_0x41a416,_0x3f3605=document['createElement'](_0x99e3ba(0x179));_0x3f3605['className']=_0x99e3ba(0x115),_0x3f3605[_0x99e3ba(0x1b9)][_0x99e3ba(0x11e)]=_0x444451*GRID_H+'px',_0x3f3605[_0x99e3ba(0x1b9)]['backgroundPosition']='-'+_0x47df19+_0x99e3ba(0x12b)+_0x444451*GRID_H+'px',_0x35a4b8['appendChild'](_0x3f3605);});if(specialRanges[_0x41a416(0x1aa)]>0x0){const _0x39fbfc=new Date(_0x21672a+_0x41a416(0x10a))['getTime'](),_0x3169a8=new Date(_0x21672a+'T23:59:59')[_0x41a416(0x1b6)]();specialRanges[_0x41a416(0x1a8)](_0x3d03fe=>{const _0x555718=_0x41a416,_0x1e5194=new Date(_0x3d03fe[_0x555718(0x120)])[_0x555718(0x1b6)](),_0x50f957=new Date(_0x3d03fe[_0x555718(0x1c3)])['getTime'](),_0x3bf7c1=Math[_0x555718(0x146)](_0x39fbfc,_0x1e5194),_0x1b76e9=Math[_0x555718(0x177)](_0x3169a8,_0x50f957);if(_0x3bf7c1<_0x1b76e9){const _0x11b404=(_0x3bf7c1-_0x39fbfc)/0x36ee80*GRID_H,_0xc2bf5d=(_0x1b76e9-_0x3bf7c1)/0x36ee80*GRID_H,_0x127168=document[_0x555718(0x1d3)](_0x555718(0x179));_0xc2bf5d>=23.5*GRID_H?(_0x127168[_0x555718(0x15a)]=_0x555718(0x10d),_0x127168[_0x555718(0x1b9)][_0x555718(0x152)]='-'+_0x47df19+'px\x200px'):(_0x127168[_0x555718(0x15a)]=_0x555718(0x1cd),_0x127168[_0x555718(0x1b9)][_0x555718(0x11e)]=_0x11b404+'px',_0x127168[_0x555718(0x1b9)][_0x555718(0x102)]=_0xc2bf5d+'px',_0x127168[_0x555718(0x1b9)][_0x555718(0x152)]='-'+_0x47df19+_0x555718(0x12b)+_0x11b404+'px'),_0x35a4b8[_0x555718(0xf6)](_0x127168);}});}renderEventsForColumn(_0x35a4b8,_0x21672a);});}function renderEventsForColumn(_0x4cc97b,_0x30e7f5){const _0xb3dc25=a3_0x5188d6,_0x5184c7=sessions[_0xb3dc25(0x136)](_0x358e23=>_0x358e23[_0xb3dc25(0x1b3)]===_0x30e7f5),_0x1b7587=_0x5184c7[_0xb3dc25(0x19e)](_0xe7e9b2=>{const _0x5edb4f=_0xb3dc25,[_0x34ac58,_0x5308af]=_0xe7e9b2[_0x5edb4f(0x120)][_0x5edb4f(0xee)](':')['map'](Number),[_0x9ef201,_0x272ab4]=_0xe7e9b2['end'][_0x5edb4f(0xee)](':')[_0x5edb4f(0x19e)](Number);return{'data':_0xe7e9b2,'start':_0x34ac58*0x3c+_0x5308af,'end':_0x9ef201*0x3c+_0x272ab4,'colIndex':0x0};});_0x1b7587[_0xb3dc25(0x15d)]((_0x233f3b,_0x4c178b)=>_0x233f3b[_0xb3dc25(0x120)]-_0x4c178b['start']||_0x4c178b[_0xb3dc25(0x1c3)]-_0x4c178b[_0xb3dc25(0x120)]-(_0x233f3b['end']-_0x233f3b[_0xb3dc25(0x120)]));const _0x1c6fc8=[];_0x1b7587[_0xb3dc25(0x1a8)](_0x42ce4c=>{const _0x5f58d1=_0xb3dc25;let _0x1ef605=![];for(let _0x5716c9=0x0;_0x5716c9<_0x1c6fc8[_0x5f58d1(0x1aa)];_0x5716c9++){const _0x49a2b6=_0x1c6fc8[_0x5716c9];if(_0x42ce4c[_0x5f58d1(0x120)]>=_0x49a2b6[_0x49a2b6[_0x5f58d1(0x1aa)]-0x1][_0x5f58d1(0x1c3)]){_0x49a2b6[_0x5f58d1(0x1a0)](_0x42ce4c),_0x42ce4c[_0x5f58d1(0x181)]=_0x5716c9,_0x1ef605=!![];break;}}!_0x1ef605&&(_0x1c6fc8['push']([_0x42ce4c]),_0x42ce4c[_0x5f58d1(0x181)]=_0x1c6fc8[_0x5f58d1(0x1aa)]-0x1);}),_0x1b7587['forEach'](_0x3146a8=>{const _0x13c243=_0xb3dc25;let _0x392a51=0x0;_0x1b7587['forEach'](_0x5834e2=>{const _0x3fdab5=a3_0x1b64;if(Math['max'](_0x3146a8[_0x3fdab5(0x120)],_0x5834e2[_0x3fdab5(0x120)])<Math[_0x3fdab5(0x177)](_0x3146a8[_0x3fdab5(0x1c3)],_0x5834e2[_0x3fdab5(0x1c3)])&&_0x5834e2[_0x3fdab5(0x181)]>_0x392a51)_0x392a51=_0x5834e2[_0x3fdab5(0x181)];});const _0x5b0971=_0x392a51+0x1,_0xfa0f7a=0x64/_0x5b0971,_0x2c95c2=_0x3146a8[_0x13c243(0x181)]*_0xfa0f7a,_0x1bad93=document['createElement'](_0x13c243(0x179)),_0x477efa=_0x3146a8[_0x13c243(0x186)];let _0x30ca8e=_0x13c243(0x18c);if(clients&&clients[_0x13c243(0x1aa)]>0x0){const _0x37eb36=clients[_0x13c243(0x1d1)](_0x5138ab=>String(_0x5138ab['id'])===String(_0x477efa[_0x13c243(0x161)]));if(_0x37eb36&&_0x37eb36[_0x13c243(0x12a)])_0x30ca8e=_0x37eb36[_0x13c243(0x12a)];}const _0x83e0dc=_0x477efa[_0x13c243(0x13e)]===_0x13c243(0x1db),_0x15ed6a=_0x83e0dc?0x1:0.45;_0x1bad93[_0x13c243(0x15a)]=_0x13c243(0x1a2)+(_0x83e0dc?_0x13c243(0x16d):''),_0x1bad93[_0x13c243(0x1b9)]['backgroundColor']=hexToRgba(_0x30ca8e,_0x15ed6a),_0x1bad93['style'][_0x13c243(0x1bb)]=_0x30ca8e;const _0x154c06=_0x3146a8[_0x13c243(0x120)]/0x3c*GRID_H,_0x1774f2=(_0x3146a8[_0x13c243(0x1c3)]-_0x3146a8['start'])/0x3c*GRID_H;_0x1bad93[_0x13c243(0x1b9)][_0x13c243(0x11e)]=_0x154c06+'px',_0x1bad93[_0x13c243(0x1b9)][_0x13c243(0x102)]=Math[_0x13c243(0x146)](_0x1774f2,0x14)+'px',_0x1bad93[_0x13c243(0x1b9)][_0x13c243(0x18a)]=_0x13c243(0x100)+_0xfa0f7a+'%\x20-\x204px)',_0x1bad93[_0x13c243(0x1b9)][_0x13c243(0x19a)]=_0x13c243(0x100)+_0x2c95c2+_0x13c243(0x178),_0x1bad93[_0x13c243(0x1b9)][_0x13c243(0x1ca)]=0xa+_0x3146a8['colIndex'];if(_0xfa0f7a<0x55)_0x1bad93[_0x13c243(0xf1)][_0x13c243(0x118)](_0x13c243(0x17f));let _0x303d61='';if(_0x477efa[_0x13c243(0x116)])_0x303d61+=_0x13c243(0x183);if(_0x83e0dc)_0x303d61+=_0x13c243(0x1c2);_0x1bad93[_0x13c243(0x18e)]=_0x13c243(0x1e2)+_0x477efa['start']+_0x13c243(0x10c)+_0x477efa[_0x13c243(0x1c3)]+_0x13c243(0x1af)+_0x303d61+_0x13c243(0x17d),_0x1bad93['onclick']=_0x59b743=>{const _0x540d2d=_0x13c243;_0x59b743[_0x540d2d(0x112)](),openDetails(_0x477efa);},_0x4cc97b[_0x13c243(0xf6)](_0x1bad93);});}function a3_0x1b64(_0x191b62,_0x35fd8d){_0x191b62=_0x191b62-0xe8;const _0x4ee8e2=a3_0x477e();let _0x5b673e=_0x4ee8e2[_0x191b62];return _0x5b673e;}function openAnalytics(){const _0x7832e8=a3_0x5188d6,_0x747452=document[_0x7832e8(0x119)](_0x7832e8(0x1b4));setAnalyticsPeriod(_0x7832e8(0x113),_0x747452),openSheet(_0x7832e8(0x10f));}function setAnalyticsPeriod(_0x24305b,_0x4512e4){const _0x42ddc5=a3_0x5188d6;currentAnPeriod=_0x24305b,document[_0x42ddc5(0x111)]('.period-switch\x20.p-btn')[_0x42ddc5(0x1a8)](_0x48cffd=>_0x48cffd['classList'][_0x42ddc5(0x18d)]('active'));if(_0x4512e4)_0x4512e4[_0x42ddc5(0xf1)]['add']('active');const _0x44a1bd=document[_0x42ddc5(0xf0)](_0x42ddc5(0x14d));_0x44a1bd['style'][_0x42ddc5(0x15b)]=_0x24305b===_0x42ddc5(0x125)?_0x42ddc5(0xf3):_0x42ddc5(0xff);const _0x477dd0=new Date();let _0x5e832f=new Date(),_0x44b667=new Date();if(_0x24305b==='week')_0x5e832f=getStartOfWeek(_0x477dd0),_0x44b667=new Date(_0x5e832f),_0x44b667[_0x42ddc5(0x1c1)](_0x44b667['getDate']()+0x6);else{if(_0x24305b===_0x42ddc5(0x1bd))_0x5e832f=new Date(_0x477dd0[_0x42ddc5(0x1a7)](),_0x477dd0[_0x42ddc5(0x176)](),0x1),_0x44b667=new Date(_0x477dd0[_0x42ddc5(0x1a7)](),_0x477dd0[_0x42ddc5(0x176)]()+0x1,0x0);else{!document[_0x42ddc5(0xf0)]('anStart')[_0x42ddc5(0x189)]&&(document[_0x42ddc5(0xf0)]('anStart')[_0x42ddc5(0x189)]=getLocalDateStr(_0x477dd0),document['getElementById']('anEnd')['value']=getLocalDateStr(_0x477dd0));refreshAnalytics();return;}}document['getElementById'](_0x42ddc5(0x199))[_0x42ddc5(0x189)]=getLocalDateStr(_0x5e832f),document[_0x42ddc5(0xf0)]('anEnd')[_0x42ddc5(0x189)]=getLocalDateStr(_0x44b667),refreshAnalytics();}function refreshAnalytics(){const _0x4fa19f=a3_0x5188d6,_0x547774=document['getElementById'](_0x4fa19f(0x199))[_0x4fa19f(0x189)],_0x4dfba4=document[_0x4fa19f(0xf0)](_0x4fa19f(0x1c6))['value'];if(!_0x547774||!_0x4dfba4)return;const _0x30eef6=sessions['filter'](_0x4bf3d3=>_0x4bf3d3[_0x4fa19f(0x1b3)]>=_0x547774&&_0x4bf3d3[_0x4fa19f(0x1b3)]<=_0x4dfba4&&_0x4bf3d3[_0x4fa19f(0x13e)]!=='cancelled'),_0x58b93f=_0x30eef6['length'],_0x4093fc=_0x30eef6['filter'](_0xa2fee1=>_0xa2fee1[_0x4fa19f(0x13e)]===_0x4fa19f(0x1db))['length'],_0x367b39=_0x58b93f>0x0?Math['round'](_0x4093fc/_0x58b93f*0x64):0x0;document['getElementById'](_0x4fa19f(0x1b0))[_0x4fa19f(0x174)]=_0x367b39+'%',document[_0x4fa19f(0xf0)](_0x4fa19f(0x19c))[_0x4fa19f(0x174)]=_0x4093fc+'\x20–∏–∑\x20'+_0x58b93f+_0x4fa19f(0x182);const _0x3956c=document['getElementById'](_0x4fa19f(0xfa)),_0x31332a=0x2*Math['PI']*0x23,_0x263d36=_0x31332a-_0x367b39/0x64*_0x31332a;_0x3956c['style'][_0x4fa19f(0x175)]=_0x263d36;const _0x2ee0b7={};_0x30eef6[_0x4fa19f(0x1a8)](_0x610499=>{const _0x462234=_0x4fa19f,_0x287fa4=_0x610499[_0x462234(0x1cf)]||_0x462234(0x1c9);if(!_0x2ee0b7[_0x287fa4]){const _0x35fd4f='#'+_0x287fa4[_0x462234(0x1d4)]()[_0x462234(0x117)](0x0,0x6);_0x2ee0b7[_0x287fa4]={'total':0x0,'done':0x0,'color':_0x35fd4f};}_0x2ee0b7[_0x287fa4][_0x462234(0x1a3)]++;if(_0x610499['status']==='completed')_0x2ee0b7[_0x287fa4][_0x462234(0x156)]++;});const _0xd0bc0b=document[_0x4fa19f(0xf0)](_0x4fa19f(0x129));_0xd0bc0b['innerHTML']='';const _0xf852a0=Object[_0x4fa19f(0x19b)](_0x2ee0b7)[_0x4fa19f(0x15d)]((_0x59b0c0,_0xded169)=>_0xded169[0x1][_0x4fa19f(0x1a3)]-_0x59b0c0[0x1]['total']);if(_0xf852a0[_0x4fa19f(0x1aa)]===0x0){_0xd0bc0b[_0x4fa19f(0x18e)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0xf852a0['forEach'](([_0x14b2c1,_0x558886])=>{const _0x37934f=_0x4fa19f,_0x26200b=Math[_0x37934f(0x1ba)](_0x558886['done']/_0x558886[_0x37934f(0x1a3)]*0x64),_0x571d10=document[_0x37934f(0x1d3)](_0x37934f(0x179));_0x571d10[_0x37934f(0x15a)]=_0x37934f(0x169),_0x571d10['style'][_0x37934f(0x1bb)]=_0x558886['color'],_0x571d10[_0x37934f(0x18e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x14b2c1[_0x37934f(0x117)](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x558886[_0x37934f(0x156)]+_0x37934f(0xf5)+_0x558886['total']+_0x37934f(0x17e)+_0x26200b+_0x37934f(0x132),_0xd0bc0b[_0x37934f(0xf6)](_0x571d10);});}function openDetails(_0x4522dd){const _0x509e73=a3_0x5188d6;currentSession=_0x4522dd;const _0x13a961=new Date(_0x4522dd[_0x509e73(0x1b3)]),_0x183344=_0x13a961['toLocaleDateString'](_0x509e73(0x131),{'weekday':'long','day':_0x509e73(0x16c),'month':_0x509e73(0x12f)});document[_0x509e73(0xf0)](_0x509e73(0x123))[_0x509e73(0x174)]=_0x183344['charAt'](0x0)['toUpperCase']()+_0x183344[_0x509e73(0x1dc)](0x1),document['getElementById'](_0x509e73(0x1b2))[_0x509e73(0x174)]=_0x4522dd[_0x509e73(0x120)]+_0x509e73(0x10c)+_0x4522dd[_0x509e73(0x1c3)],document['getElementById'](_0x509e73(0x16a))['textContent']=_0x4522dd['note']||_0x509e73(0x167);const _0x2ebb6b=document[_0x509e73(0xf0)](_0x509e73(0x1a1)),_0x1f3306=document[_0x509e73(0xf0)](_0x509e73(0x1ce)),_0x5b6665=_0x1f3306[_0x509e73(0x119)](_0x509e73(0x15c)),_0x3d733c=_0x1f3306[_0x509e73(0x119)](_0x509e73(0xfc)),_0x4e5c48=document[_0x509e73(0xf0)]('cancelHint');if(_0x4522dd[_0x509e73(0x13e)]===_0x509e73(0x1db))_0x2ebb6b[_0x509e73(0x174)]=_0x509e73(0xfd),_0x2ebb6b[_0x509e73(0x1b9)]['color']=_0x509e73(0x17a),_0x1f3306[_0x509e73(0x1b9)][_0x509e73(0x15b)]=_0x509e73(0xff);else{_0x2ebb6b[_0x509e73(0x174)]=_0x509e73(0x138),_0x2ebb6b['style']['color']='var(--acc-blue)',_0x1f3306['style']['display']=_0x509e73(0x16e);const _0x40fded=new Date(_0x4522dd[_0x509e73(0x1b3)]+'T'+_0x4522dd[_0x509e73(0x120)]),_0x20c9ee=new Date(),_0x249ea8=(_0x40fded-_0x20c9ee)/(0x3e8*0x3c*0x3c),_0x471b4a=coachProfiles[_0x4522dd[_0x509e73(0x1cf)]]&&coachProfiles[_0x4522dd[_0x509e73(0x1cf)]][_0x509e73(0x18b)]?parseInt(coachProfiles[_0x4522dd[_0x509e73(0x1cf)]][_0x509e73(0x18b)]):0x18;if(_0x471b4a===0x0||_0x249ea8>=_0x471b4a)_0x5b6665['style'][_0x509e73(0x15b)]=_0x509e73(0x16e),_0x3d733c[_0x509e73(0x1b9)][_0x509e73(0x15b)]=_0x509e73(0x16e),_0x4e5c48[_0x509e73(0x1b9)][_0x509e73(0x15b)]=_0x509e73(0xff);else{_0x5b6665[_0x509e73(0x1b9)]['display']=_0x509e73(0xff),_0x3d733c[_0x509e73(0x1b9)]['display']=_0x509e73(0xff),_0x4e5c48[_0x509e73(0x1b9)][_0x509e73(0x15b)]='block';let _0x291adb=_0x471b4a===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':'–∑–∞\x20'+_0x471b4a+_0x509e73(0xf2);_0x4e5c48['textContent']=_0x509e73(0x1e0)+_0x291adb+_0x509e73(0x142);}}document['getElementById']('overlay')[_0x509e73(0xf1)][_0x509e73(0x118)]('active'),document[_0x509e73(0xf0)](_0x509e73(0x1a9))['classList'][_0x509e73(0x118)](_0x509e73(0x1c0));}function closeAllSheets(){const _0x47ee38=a3_0x5188d6;document[_0x47ee38(0xf0)](_0x47ee38(0x1ae))[_0x47ee38(0xf1)][_0x47ee38(0x18d)]('active'),document['querySelectorAll']('.sheet')['forEach'](_0x228258=>_0x228258[_0x47ee38(0xf1)][_0x47ee38(0x18d)](_0x47ee38(0x1c0)));}function openSheet(_0x46b3ee){const _0xb554fa=a3_0x5188d6;document[_0xb554fa(0xf0)](_0xb554fa(0x1ae))[_0xb554fa(0xf1)][_0xb554fa(0x118)](_0xb554fa(0xf7)),document[_0xb554fa(0xf0)](_0x46b3ee)[_0xb554fa(0xf1)][_0xb554fa(0x118)]('open');}function getLocalDateStr(_0x5b2ad4){const _0x133c4d=a3_0x5188d6,_0x32a6d2=_0x5b2ad4[_0x133c4d(0x1a7)](),_0x147cb1=String(_0x5b2ad4[_0x133c4d(0x176)]()+0x1)[_0x133c4d(0x14a)](0x2,'0'),_0x2c7d27=String(_0x5b2ad4['getDate']())[_0x133c4d(0x14a)](0x2,'0');return _0x32a6d2+'-'+_0x147cb1+'-'+_0x2c7d27;}function a3_0x477e(){const _0x3fd22a=['status','time-label','scrollLeft','–û—Ç–º–µ–Ω–µ–Ω–æ','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','coach_profiles','Error\x20setting\x20back\x20button:','day-column\x20','max','BackButton','test','keys','padStart','20678157KJWwTJ','search','anCustomDates','gridColumns','scrollTop','offsetWidth','offClick','backgroundPosition','clients','Critical\x20TMA\x20Error:','setAttribute','done','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','4972156srjlCX','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','className','display','.btn-cancel','sort','data-date','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','parse','clientId','daysHeaderTrack','toUpperCase','#050505','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','headerMonth','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','setMonth','client-stat-card','detNote','matrixViewport','numeric','\x20status-completed','block','#ff453a','isArray','ccYesBtn','startsWith','POST','textContent','strokeDashoffset','getMonth','min','%\x20+\x202px)','div','var(--acc-green)','join','scrollWidth','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','mini','applyData','colIndex','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','.day-col-header[data-date=\x22','data','.rs-date-chip','1176840hKBBkJ','value','width','cancel_window','#0a84ff','remove','innerHTML','customConfirm','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','button','rs-time-btn','json','globalTimeLine','stringify','addEventListener','auto','exceptions','anStart','left','entries','anTotalStats','600','map','getHours','push','detStatus','event-card','total','clientWidth','scrollTo','ccTitle','getFullYear','forEach','detailsSheet','length','day-col-header\x20','router.html','visible','overlay','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','anPercent','constructor','detTime','dateStr','.period-switch\x20.p-btn','initData','getTime','(((.+)+)+)+$','setHeaderColor','style','round','borderLeftColor','user','month','DOMContentLoaded','now','open','setDate','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','end','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','Telegram','anEnd','toLocaleDateString','settings','Unknown','zIndex','onclick','ranges','blocked-range-part\x20stripe-bg','cancelContainer','coachId','findIndex','find','firstChild','createElement','toString','timeColumn','offsetLeft','uc_client_settings','planned','getAttribute','disableVerticalSwipes','completed','slice','scroll','getMinutes','getDate','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','floor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','data-day-idx','722136UWUqtY','onClick','pattern','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','getDay','split','fontWeight','getElementById','classList','\x20—á.','flex','apply','</span>\x20/\x20','appendChild','active','insertBefore','createDocumentFragment','anDonutCircle','expand','.btn-reschedule','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','setBackgroundColor','none','calc(','client_cancel','height','show','7436065WNkhTk','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','initDataUnsafe','rsDatesTrack','<div\x20class=\x22dch-day\x22>','rgba(10,\x20132,\x20255,\x20','T00:00:00','16uQFoVB','\x20-\x20','day-off-overlay\x20stripe-bg','.day-column','analyticsSheet','rsSlotsGrid','querySelectorAll','stopPropagation','week','syncLoad','blocked-slot\x20stripe-bg','seriesId','substr','add','querySelector','WebApp','saveLocally','calendar','cid','top','then','start','setItem','101512OhRJNv','detDate','</div>','custom','rs-date-chip','uc_client_sessions','</div><div\x20class=\x22dch-num\x22>','analyticsList','color','px\x20-','getItem','loadLocal','log','long','setHours','ru-RU','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','\x20–≤\x20','ready','filter','5828245DKdWIo','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','v9.5-CLIENT-ANALYTICS','8mMsaAH','client_load','Error\x20setting\x20color:','timeLineBadge'];a3_0x477e=function(){return _0x3fd22a;};return a3_0x477e();}function getStartOfWeek(_0x23abd2){const _0x610590=a3_0x5188d6,_0x162fa3=new Date(_0x23abd2),_0xb15ee=_0x162fa3[_0x610590(0xed)](),_0x5ddad9=_0x162fa3['getDate']()-_0xb15ee+(_0xb15ee===0x0?-0x6:0x1);return _0x162fa3[_0x610590(0x1c1)](_0x5ddad9),_0x162fa3[_0x610590(0x130)](0x0,0x0,0x0,0x0),_0x162fa3;}function scrollToToday(){const _0x40e4e7=getLocalDateStr(new Date());setTimeout(()=>{const _0x2ac22f=a3_0x1b64,_0x321c99=document[_0x2ac22f(0x119)](_0x2ac22f(0x185)+_0x40e4e7+'\x22]');if(_0x321c99){const _0x31033b=document['getElementById'](_0x2ac22f(0x16b)),_0x336ea9=_0x321c99[_0x2ac22f(0x1d6)]-_0x31033b['clientWidth']/0x2+_0x321c99[_0x2ac22f(0x150)]/0x2;_0x31033b[_0x2ac22f(0x1a5)]({'left':_0x336ea9,'behavior':_0x2ac22f(0x197)}),_0x31033b[_0x2ac22f(0x14f)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x3368d9=a3_0x5188d6,_0x3edd24=new Date(),_0x4d7d44=document[_0x3368d9(0xf0)](_0x3368d9(0x194)),_0x4945da=document[_0x3368d9(0xf0)](_0x3368d9(0x13d)),_0x1bcaa2=(_0x3edd24[_0x3368d9(0x19f)]()*0x3c+_0x3edd24['getMinutes']())/0x3c*GRID_H;_0x4d7d44[_0x3368d9(0x1b9)][_0x3368d9(0x11e)]=_0x1bcaa2+'px',_0x4d7d44[_0x3368d9(0x1b9)]['display']=_0x3368d9(0x16e),_0x4945da[_0x3368d9(0x1b9)][_0x3368d9(0x11e)]=_0x1bcaa2+'px',_0x4945da[_0x3368d9(0x1b9)][_0x3368d9(0x15b)]=_0x3368d9(0x16e),_0x4945da['textContent']=String(_0x3edd24[_0x3368d9(0x19f)]())[_0x3368d9(0x14a)](0x2,'0')+':'+String(_0x3edd24[_0x3368d9(0x1de)]())[_0x3368d9(0x14a)](0x2,'0');}function onScroll(){const _0x49f9da=a3_0x5188d6,_0x446375=document['getElementById'](_0x49f9da(0x16b)),_0x397b6b=document[_0x49f9da(0x111)]('.day-col-header');for(let _0x4f0f20 of _0x397b6b)if(_0x4f0f20[_0x49f9da(0x1d6)]>=_0x446375[_0x49f9da(0x140)]){const _0x38888b=new Date(_0x4f0f20[_0x49f9da(0x1d9)]('data-date'));document[_0x49f9da(0xf0)](_0x49f9da(0x166))[_0x49f9da(0x174)]=_0x38888b['toLocaleString']('ru',{'month':_0x49f9da(0x12f)})[_0x49f9da(0x163)]()+'\x20'+_0x38888b[_0x49f9da(0x1a7)]();break;}}function showToast(_0x5e76f0){const _0xc6460c=a3_0x5188d6,_0x594f1e=document[_0xc6460c(0xf0)]('toast');_0x594f1e[_0xc6460c(0x174)]=_0x5e76f0,_0x594f1e[_0xc6460c(0xf1)][_0xc6460c(0x118)](_0xc6460c(0x103)),setTimeout(()=>_0x594f1e[_0xc6460c(0xf1)][_0xc6460c(0x18d)](_0xc6460c(0x103)),0x7d0);}function handleInfiniteScroll(){const _0x28cbbf=a3_0x5188d6,_0x251edd=document['getElementById'](_0x28cbbf(0x16b)),_0x448e0f=_0x251edd[_0x28cbbf(0x140)],_0x589c08=_0x251edd[_0x28cbbf(0x17c)],_0x389574=_0x251edd[_0x28cbbf(0x1a4)];if(_0x589c08-(_0x448e0f+_0x389574)<0x12c){const _0x42672f=endOffset;endOffset+=0xe,renderDayRange(_0x42672f+0x1,endOffset),reRenderBlocks();}if(_0x448e0f<0x12c){const _0x196d6f=startOffset;startOffset-=0xe,prependDays(startOffset,_0x196d6f-0x1),_0x251edd[_0x28cbbf(0x140)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x57cda3,_0x2f3614){const _0x41a4cd=a3_0x5188d6,_0x2b9b66=document[_0x41a4cd(0xf0)](_0x41a4cd(0x162)),_0x106169=document[_0x41a4cd(0xf0)](_0x41a4cd(0x14e)),_0x361123=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x52ab9b=new Date();_0x52ab9b[_0x41a4cd(0x130)](0x0,0x0,0x0,0x0);const _0x2efe36=getLocalDateStr(new Date()),_0x239502=document['createDocumentFragment'](),_0x2e89b6=document[_0x41a4cd(0xf9)]();for(let _0xe2e281=_0x57cda3;_0xe2e281<=_0x2f3614;_0xe2e281++){const _0x90bd61=new Date(_0x52ab9b);_0x90bd61[_0x41a4cd(0x1c1)](_0x90bd61[_0x41a4cd(0x1df)]()+_0xe2e281);const _0x3b26a0=getLocalDateStr(_0x90bd61);let _0x56875a=_0x90bd61[_0x41a4cd(0xed)]()-0x1;if(_0x56875a===-0x1)_0x56875a=0x6;const _0x9bc148=_0x3b26a0===_0x2efe36,_0x3151a3=document[_0x41a4cd(0x1d3)]('div');_0x3151a3['className']=_0x41a4cd(0x1ab)+(_0x9bc148?'today':''),_0x3151a3[_0x41a4cd(0x155)]('data-date',_0x3b26a0),_0x3151a3[_0x41a4cd(0x18e)]='<div\x20class=\x22dch-day\x22>'+_0x361123[_0x56875a]+_0x41a4cd(0x128)+_0x90bd61[_0x41a4cd(0x1df)]()+_0x41a4cd(0x124),_0x239502[_0x41a4cd(0xf6)](_0x3151a3);const _0x5acb43=document[_0x41a4cd(0x1d3)]('div');_0x5acb43[_0x41a4cd(0x15a)]=_0x41a4cd(0x145)+(_0x9bc148?'today':''),_0x5acb43[_0x41a4cd(0x155)](_0x41a4cd(0x15e),_0x3b26a0),_0x5acb43[_0x41a4cd(0x155)]('data-day-idx',_0x56875a),_0x2e89b6[_0x41a4cd(0xf6)](_0x5acb43);}_0x2b9b66[_0x41a4cd(0xf8)](_0x239502,_0x2b9b66[_0x41a4cd(0x1d2)]),_0x106169['insertBefore'](_0x2e89b6,_0x106169[_0x41a4cd(0x119)](_0x41a4cd(0x10e)));}function hexToRgba(_0x53fb93,_0x2e98e0){const _0x5c627b=a3_0x5188d6;let _0x580008;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x5c627b(0x148)](_0x53fb93))return _0x580008=_0x53fb93['substring'](0x1)[_0x5c627b(0xee)](''),_0x580008[_0x5c627b(0x1aa)]==0x3&&(_0x580008=[_0x580008[0x0],_0x580008[0x0],_0x580008[0x1],_0x580008[0x1],_0x580008[0x2],_0x580008[0x2]]),_0x580008='0x'+_0x580008[_0x5c627b(0x17b)](''),'rgba('+[_0x580008>>0x10&0xff,_0x580008>>0x8&0xff,_0x580008&0xff]['join'](',')+','+_0x2e98e0+')';return _0x5c627b(0x109)+_0x2e98e0+')';}let confirmResolver=null;function showCustomConfirm(_0x13a920,_0x201cb8,_0x227dcd=!![]){const _0x4e8cb0=a3_0x5188d6;document[_0x4e8cb0(0xf0)](_0x4e8cb0(0x1a6))[_0x4e8cb0(0x174)]=_0x13a920,document[_0x4e8cb0(0xf0)]('ccText')['textContent']=_0x201cb8;const _0x1027a4=document[_0x4e8cb0(0xf0)](_0x4e8cb0(0x171));return _0x227dcd?(_0x1027a4['style']['color']=_0x4e8cb0(0x16f),_0x1027a4[_0x4e8cb0(0x1b9)][_0x4e8cb0(0xef)]=_0x4e8cb0(0x19d)):(_0x1027a4['style'][_0x4e8cb0(0x12a)]='#0a84ff',_0x1027a4[_0x4e8cb0(0x1b9)][_0x4e8cb0(0xef)]='600'),new Promise(_0x1d7e2d=>{const _0x246607=_0x4e8cb0;confirmResolver=_0x1d7e2d,document[_0x246607(0xf0)](_0x246607(0x18f))[_0x246607(0xf1)][_0x246607(0x118)](_0x246607(0x1ad));});}function resolveCustomConfirm(_0x4f034e){const _0x45e07b=a3_0x5188d6;document[_0x45e07b(0xf0)](_0x45e07b(0x18f))[_0x45e07b(0xf1)][_0x45e07b(0x18d)](_0x45e07b(0x1ad));if(confirmResolver)confirmResolver(_0x4f034e);}async function tryCancelCurrentSession(){const _0x30166f=a3_0x5188d6;if(!currentSession)return;const _0xe35cfb=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?',!![]);if(!_0xe35cfb)return;const _0x461074=currentSession;closeAllSheets(),sessions=sessions[_0x30166f(0x136)](_0xd0ea65=>_0xd0ea65['id']!==_0x461074['id']),reRenderBlocks(),showToast(_0x30166f(0x141)),lastUserActionTime=Date['now']();try{const _0xc77fa6=window['Telegram']?.[_0x30166f(0x11a)],_0x535e6b=await fetch(API_URL,{'method':_0x30166f(0x173),'body':JSON['stringify']({'action':_0x30166f(0x101),'init_data':_0xc77fa6?.[_0x30166f(0x1b5)]||'','coachId':_0x461074[_0x30166f(0x1cf)],'dateStr':_0x461074[_0x30166f(0x1b3)],'sessionId':_0x461074['id']})});if(_0x535e6b['ok'])DataManager[_0x30166f(0x11b)]();}catch(_0x33de6e){showToast(_0x30166f(0x133));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x1f679b=a3_0x5188d6;if(!currentSession)return;document[_0x1f679b(0xf0)]('detailsSheet')[_0x1f679b(0xf1)][_0x1f679b(0x18d)](_0x1f679b(0x1c0)),document[_0x1f679b(0xf0)]('rescheduleSheet')['classList']['add'](_0x1f679b(0x1c0));const _0x51314f=document[_0x1f679b(0xf0)](_0x1f679b(0x107)),_0xb964d8=document[_0x1f679b(0xf0)](_0x1f679b(0x110));_0x51314f[_0x1f679b(0x18e)]='',_0xb964d8['innerHTML']=_0x1f679b(0x165);const [_0x292dd1,_0x5ac60a]=currentSession['start'][_0x1f679b(0xee)](':')['map'](Number),[_0x5b6d68,_0x53d2bd]=currentSession['end'][_0x1f679b(0xee)](':')[_0x1f679b(0x19e)](Number),_0x4ce341=_0x5b6d68*0x3c+_0x53d2bd-(_0x292dd1*0x3c+_0x5ac60a);try{const _0x435f45=window[_0x1f679b(0x1c5)]?.[_0x1f679b(0x11a)],_0x38978e=await fetch(API_URL,{'method':'POST','body':JSON[_0x1f679b(0x195)]({'action':'get_slots','coachId':currentSession[_0x1f679b(0x1cf)],'duration':_0x4ce341,'init_data':_0x435f45?.[_0x1f679b(0x1b5)]||'','excludeSessionId':currentSession['id']})}),_0x28577a=await _0x38978e['json']();_0x28577a['ok']&&_0x28577a[_0x1f679b(0x186)]?(availableSlotsCache=_0x28577a[_0x1f679b(0x186)],renderRescheduleDates()):_0xb964d8['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x372d50){_0xb964d8[_0x1f679b(0x18e)]=_0x1f679b(0x105);}}function renderRescheduleDates(){const _0x518d78=a3_0x5188d6,_0xa2553d=document[_0x518d78(0xf0)]('rsDatesTrack');_0xa2553d[_0x518d78(0x18e)]='';const _0x1a0f4c=Object['keys'](availableSlotsCache)['sort'](),_0x387771=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x1a0f4c[_0x518d78(0x1aa)]===0x0){document[_0x518d78(0xf0)](_0x518d78(0x110))[_0x518d78(0x18e)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x1a0f4c[_0x518d78(0x1a8)]((_0x2f8e68,_0x2ff86e)=>{const _0x309787=_0x518d78,_0xd29e12=new Date(_0x2f8e68),_0x567d23=_0x387771[_0xd29e12[_0x309787(0xed)]()],_0x4e7393=_0xd29e12[_0x309787(0x1df)](),_0x114597=document['createElement'](_0x309787(0x179));_0x114597[_0x309787(0x15a)]=_0x309787(0x126);if(_0x2ff86e===0x0)_0x114597[_0x309787(0xf1)][_0x309787(0x118)](_0x309787(0xf7));_0x114597[_0x309787(0x18e)]='<div\x20class=\x22rs-day-name\x22>'+_0x567d23+'</div><div\x20class=\x22rs-day-num\x22>'+_0x4e7393+_0x309787(0x124),_0x114597[_0x309787(0x1cb)]=()=>selectRsDate(_0x2f8e68,_0x114597),_0xa2553d[_0x309787(0xf6)](_0x114597);}),selectRsDate(_0x1a0f4c[0x0],_0xa2553d[_0x518d78(0x1d2)]);}function selectRsDate(_0x4858d1,_0x164c24){const _0x218aea=a3_0x5188d6;selectedRsDate=_0x4858d1,document[_0x218aea(0x111)](_0x218aea(0x187))['forEach'](_0x24e2d8=>_0x24e2d8[_0x218aea(0xf1)][_0x218aea(0x18d)](_0x218aea(0xf7)));if(_0x164c24)_0x164c24['classList'][_0x218aea(0x118)](_0x218aea(0xf7));const _0x29a875=document['getElementById']('rsSlotsGrid');_0x29a875[_0x218aea(0x18e)]='';const _0x172729=availableSlotsCache[_0x4858d1]||[];if(_0x172729['length']===0x0){_0x29a875['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x172729['forEach'](_0x18f073=>{const _0x56a0eb=_0x218aea,_0x41283e=document['createElement'](_0x56a0eb(0x191));_0x41283e['className']=_0x56a0eb(0x192),_0x41283e[_0x56a0eb(0x174)]=_0x18f073,_0x41283e[_0x56a0eb(0x1cb)]=()=>confirmReschedule(_0x18f073),_0x29a875['appendChild'](_0x41283e);});}async function confirmReschedule(_0x3e10be){const _0x2957ec=a3_0x5188d6,_0x5108d9=new Date(selectedRsDate),_0x20b0bb=_0x5108d9[_0x2957ec(0x1c7)](_0x2957ec(0x131),{'day':'numeric','month':_0x2957ec(0x12f)}),_0x542b66=await showCustomConfirm(_0x2957ec(0xec),_0x2957ec(0x184)+_0x20b0bb+_0x2957ec(0x134)+_0x3e10be+'?',![]);if(!_0x542b66)return;closeAllSheets(),showToast(_0x2957ec(0x157)),lastUserActionTime=Date['now']();const _0x2601ea=currentSession[_0x2957ec(0x1b3)],_0x5cb862=currentSession['id'],[_0x31f2a8,_0x2da19f]=currentSession[_0x2957ec(0x120)]['split'](':')[_0x2957ec(0x19e)](Number),[_0x507d8b,_0x4043b7]=currentSession[_0x2957ec(0x1c3)][_0x2957ec(0xee)](':')[_0x2957ec(0x19e)](Number),_0x5d087e=_0x507d8b*0x3c+_0x4043b7-(_0x31f2a8*0x3c+_0x2da19f),[_0x35f247,_0x21b063]=_0x3e10be[_0x2957ec(0xee)](':')[_0x2957ec(0x19e)](Number),_0x1460e3=_0x35f247*0x3c+_0x21b063+_0x5d087e,_0x5db0d9=Math[_0x2957ec(0x1e1)](_0x1460e3/0x3c),_0x773d9=_0x1460e3%0x3c,_0x3f1250=String(_0x5db0d9)[_0x2957ec(0x14a)](0x2,'0')+':'+String(_0x773d9)[_0x2957ec(0x14a)](0x2,'0'),_0x46d133=sessions[_0x2957ec(0x1d0)](_0x18502c=>_0x18502c['id']===_0x5cb862);_0x46d133!==-0x1&&(sessions[_0x46d133]['dateStr']=selectedRsDate,sessions[_0x46d133][_0x2957ec(0x120)]=_0x3e10be,sessions[_0x46d133]['end']=_0x3f1250,reRenderBlocks());try{const _0x206226=window[_0x2957ec(0x1c5)]?.['WebApp'],_0x56c162=await fetch(API_URL,{'method':_0x2957ec(0x173),'body':JSON[_0x2957ec(0x195)]({'action':'reschedule','init_data':_0x206226?.['initData']||'','oldSessionId':_0x5cb862,'oldDate':_0x2601ea,'newDate':selectedRsDate,'newTime':_0x3e10be,'coachId':currentSession['coachId']})}),_0x3c0673=await _0x56c162[_0x2957ec(0x193)]();!_0x3c0673['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x2957ec(0x114)]()):(showToast(_0x2957ec(0x15f)),DataManager[_0x2957ec(0x11b)]());}catch(_0x500c23){showToast(_0x2957ec(0x133));}}document[a3_0x5188d6(0x196)](a3_0x5188d6(0x1be),init);