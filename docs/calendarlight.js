const a3_0x121345=a3_0x16b0;(function(_0x54258f,_0xb58b63){const _0x4413a4=a3_0x16b0,_0x303707=_0x54258f();while(!![]){try{const _0x2e417f=-parseInt(_0x4413a4(0x13c))/0x1+parseInt(_0x4413a4(0x12e))/0x2*(parseInt(_0x4413a4(0x1b5))/0x3)+parseInt(_0x4413a4(0x1f4))/0x4*(parseInt(_0x4413a4(0x1ca))/0x5)+parseInt(_0x4413a4(0x1dc))/0x6+-parseInt(_0x4413a4(0x15c))/0x7+-parseInt(_0x4413a4(0x1c0))/0x8*(parseInt(_0x4413a4(0x137))/0x9)+parseInt(_0x4413a4(0x1e3))/0xa;if(_0x2e417f===_0xb58b63)break;else _0x303707['push'](_0x303707['shift']());}catch(_0x4e25b5){_0x303707['push'](_0x303707['shift']());}}}(a3_0xb651,0x96aba));const APP_VERSION=a3_0x121345(0x1e8),API_URL=a3_0x121345(0x136),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS=a3_0x121345(0x158),KEY_CLIENTS=a3_0x121345(0x207);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x121345(0x13e),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x394fbb=a3_0x121345,_0x527173=(function(){let _0x2d149a=!![];return function(_0x5f14b1,_0x2cd4cb){const _0x4f79f1=_0x2d149a?function(){const _0x3ec74b=a3_0x16b0;if(_0x2cd4cb){const _0x39bd8e=_0x2cd4cb[_0x3ec74b(0x170)](_0x5f14b1,arguments);return _0x2cd4cb=null,_0x39bd8e;}}:function(){};return _0x2d149a=![],_0x4f79f1;};}()),_0x5f4968=_0x527173(this,function(){const _0x19c082=a3_0x16b0;return _0x5f4968[_0x19c082(0x125)]()[_0x19c082(0x205)](_0x19c082(0x184))[_0x19c082(0x125)]()[_0x19c082(0x162)](_0x5f4968)[_0x19c082(0x205)](_0x19c082(0x184));});_0x5f4968();try{const _0x1a391d=window['Telegram']?.[_0x394fbb(0x167)];if(!_0x1a391d)return;_0x1a391d[_0x394fbb(0x192)](),_0x1a391d[_0x394fbb(0x208)]();try{_0x1a391d[_0x394fbb(0x14e)](_0x394fbb(0x1c4)),_0x1a391d['setBackgroundColor']&&_0x1a391d[_0x394fbb(0x161)](_0x394fbb(0x1c4));}catch(_0x19eea9){console[_0x394fbb(0x120)](_0x394fbb(0x203),_0x19eea9);}try{_0x1a391d[_0x394fbb(0x202)]&&(_0x1a391d[_0x394fbb(0x202)][_0x394fbb(0x17b)](),_0x1a391d[_0x394fbb(0x202)]['offClick'](),_0x1a391d['BackButton']['onClick'](function(){const _0x556f30=_0x394fbb;window[_0x556f30(0x12c)][_0x556f30(0x1fe)]='router.html';}));}catch(_0x45b164){console[_0x394fbb(0x120)](_0x394fbb(0x1a9),_0x45b164);}try{if(_0x1a391d['disableVerticalSwipes'])_0x1a391d[_0x394fbb(0x15e)]();}catch(_0x4f5c09){}}catch(_0xa003fa){console[_0x394fbb(0x149)]('Critical\x20TMA\x20Error:',_0xa003fa);}}());function isAdmin(){const _0x5f33c9=a3_0x121345;try{const _0x3f722c=Number(window[_0x5f33c9(0x164)]?.['WebApp']?.[_0x5f33c9(0x15f)]?.[_0x5f33c9(0x1f7)]?.['id']);return _0x3f722c===0xbaf7174;}catch(_0x446a24){return![];}}const DataManager={'saveLocally'(){const _0x29e760=a3_0x121345;try{localStorage[_0x29e760(0x16c)](KEY_SESSIONS,JSON[_0x29e760(0x12d)](sessions)),localStorage[_0x29e760(0x16c)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x29e760(0x16c)](KEY_SETTINGS,JSON[_0x29e760(0x12d)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x328722){}},'loadLocal'(){const _0x2dddf5=a3_0x121345;try{const _0x4cf6a9=localStorage[_0x2dddf5(0x118)](KEY_SESSIONS);if(_0x4cf6a9)sessions=JSON[_0x2dddf5(0x119)](_0x4cf6a9);const _0x2f181f=localStorage[_0x2dddf5(0x118)](KEY_CLIENTS);if(_0x2f181f)clients=JSON[_0x2dddf5(0x119)](_0x2f181f);const _0x20a8e3=localStorage[_0x2dddf5(0x118)](KEY_SETTINGS);if(_0x20a8e3){const _0x3946b3=JSON[_0x2dddf5(0x119)](_0x20a8e3);if(_0x3946b3[_0x2dddf5(0x173)])availabilityPattern=_0x3946b3[_0x2dddf5(0x173)];if(_0x3946b3['ranges'])specialRanges=_0x3946b3[_0x2dddf5(0x200)];if(_0x3946b3[_0x2dddf5(0x150)])dateExceptions=_0x3946b3[_0x2dddf5(0x150)];}}catch(_0x3d2c66){}},async 'syncLoad'(){const _0x36aaa0=a3_0x121345,_0xe20f21=new Date(),_0x26dac7=_0xe20f21[_0x36aaa0(0x11f)]()+'-'+String(_0xe20f21[_0x36aaa0(0x1b8)]()+0x1)['padStart'](0x2,'0'),_0x271040=new Date(_0xe20f21);_0x271040[_0x36aaa0(0x1ea)](_0xe20f21[_0x36aaa0(0x1b8)]()+0x1);const _0x1f7985=_0x271040[_0x36aaa0(0x11f)]()+'-'+String(_0x271040[_0x36aaa0(0x1b8)]()+0x1)[_0x36aaa0(0x15b)](0x2,'0'),_0x3cfada=Date[_0x36aaa0(0x1af)]();try{const _0x2efb43=window[_0x36aaa0(0x164)]?.[_0x36aaa0(0x167)],_0x1b1705=_0x2efb43?.[_0x36aaa0(0x1ee)]||'',[_0x51f251,_0x39ba51]=await Promise['all']([fetch(API_URL,{'method':_0x36aaa0(0x171),'body':JSON['stringify']({'action':_0x36aaa0(0x16f),'init_data':_0x1b1705,'month_str':_0x26dac7})})[_0x36aaa0(0x16a)](_0x1428be=>_0x1428be[_0x36aaa0(0x16e)]()),fetch(API_URL,{'method':_0x36aaa0(0x171),'body':JSON[_0x36aaa0(0x12d)]({'action':_0x36aaa0(0x16f),'init_data':_0x1b1705,'month_str':_0x1f7985})})[_0x36aaa0(0x16a)](_0x120e7f=>_0x120e7f[_0x36aaa0(0x16e)]())]);if(lastUserActionTime>_0x3cfada){console['log'](_0x36aaa0(0x1f1));return;}if(_0x51f251['ok'])this['applyData'](_0x51f251[_0x36aaa0(0x151)],_0x26dac7);if(_0x39ba51['ok'])this[_0x36aaa0(0x1de)](_0x39ba51[_0x36aaa0(0x151)],_0x1f7985);this['saveLocally']();}catch(_0xd8f080){}},'applyData'(_0x256ca4,_0x2fd954){const _0x3c372b=a3_0x121345;if(!_0x256ca4)return;if(_0x256ca4[_0x3c372b(0x172)]){if(_0x256ca4['settings'][_0x3c372b(0x173)])availabilityPattern=_0x256ca4['settings']['pattern'];if(_0x256ca4[_0x3c372b(0x172)][_0x3c372b(0x200)])specialRanges=_0x256ca4[_0x3c372b(0x172)]['ranges'];if(_0x256ca4[_0x3c372b(0x172)][_0x3c372b(0x150)])dateExceptions=_0x256ca4[_0x3c372b(0x172)]['exceptions'];}if(_0x256ca4[_0x3c372b(0x1b4)]&&Array[_0x3c372b(0x1aa)](_0x256ca4[_0x3c372b(0x1b4)]))clients=_0x256ca4[_0x3c372b(0x1b4)];_0x256ca4[_0x3c372b(0x1ab)]&&(coachProfiles={...coachProfiles,..._0x256ca4[_0x3c372b(0x1ab)]}),_0x256ca4[_0x3c372b(0x1b7)]&&(sessions=sessions['filter'](_0x129c79=>!_0x129c79[_0x3c372b(0x152)][_0x3c372b(0x1e2)](_0x2fd954)),Object['keys'](_0x256ca4[_0x3c372b(0x1b7)])[_0x3c372b(0x183)](_0xe7de1f=>{const _0x1e58b6=_0x3c372b,_0x358227=_0x256ca4[_0x1e58b6(0x1b7)][_0xe7de1f];_0x358227['forEach'](_0x1b6c21=>{const _0xd3ad68=_0x1e58b6;sessions[_0xd3ad68(0x139)]({'id':_0x1b6c21['i'],'clientId':_0x1b6c21['c'],'coachId':_0x1b6c21[_0xd3ad68(0x11c)],'dateStr':_0x2fd954+'-'+_0xe7de1f[_0xd3ad68(0x15b)](0x2,'0'),'start':_0x1b6c21['s'],'end':_0x1b6c21['e'],'note':_0x1b6c21['n']||'','status':_0x1b6c21['st']||_0xd3ad68(0x197),'seriesId':_0x1b6c21[_0xd3ad68(0x1df)]});});})),reRenderBlocks();}};function init(){const _0x1a156b=a3_0x121345;DataManager[_0x1a156b(0x1d4)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x1a156b(0x168)](_0x1a156b(0x20b))['addEventListener'](_0x1a156b(0x153),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x1a156b(0x1c8)]();}function renderTimeColumn(){const _0x59aba5=a3_0x121345,_0x3a0f7d=document[_0x59aba5(0x168)](_0x59aba5(0x204)),_0x5afd07=document[_0x59aba5(0x168)](_0x59aba5(0x18f));_0x3a0f7d[_0x59aba5(0x19d)]='',_0x3a0f7d[_0x59aba5(0x1b3)](_0x5afd07);for(let _0x173e87=0x0;_0x173e87<0x18;_0x173e87++){const _0x272d9e=document['createElement'](_0x59aba5(0x17e));_0x272d9e[_0x59aba5(0x1a2)]='time-label';if(_0x173e87>0x0)_0x272d9e[_0x59aba5(0x19d)]=_0x59aba5(0x1bd)+String(_0x173e87)[_0x59aba5(0x15b)](0x2,'0')+':00</span>';_0x3a0f7d['appendChild'](_0x272d9e);}}function renderDayRange(_0xa43df3,_0x3da6d9){const _0x275a0a=a3_0x121345,_0x40c6b7=document[_0x275a0a(0x168)](_0x275a0a(0x141)),_0x4a4dc7=document[_0x275a0a(0x168)](_0x275a0a(0x154)),_0x28dba6=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x105aeb=new Date();_0x105aeb[_0x275a0a(0x131)](0x0,0x0,0x0,0x0);const _0x104773=getLocalDateStr(new Date());for(let _0xb810b5=_0xa43df3;_0xb810b5<=_0x3da6d9;_0xb810b5++){const _0x480e72=new Date(_0x105aeb);_0x480e72[_0x275a0a(0x1a3)](_0x480e72[_0x275a0a(0x123)]()+_0xb810b5);const _0x198990=getLocalDateStr(_0x480e72);let _0x31d8f8=_0x480e72['getDay']()-0x1;if(_0x31d8f8===-0x1)_0x31d8f8=0x6;const _0x3da0fe=_0x198990===_0x104773,_0x257b5=document[_0x275a0a(0x143)](_0x275a0a(0x17e));_0x257b5[_0x275a0a(0x1a2)]=_0x275a0a(0x148)+(_0x3da0fe?_0x275a0a(0x145):''),_0x257b5[_0x275a0a(0x1d9)]('data-date',_0x198990),_0x257b5[_0x275a0a(0x19d)]=_0x275a0a(0x1dd)+_0x28dba6[_0x31d8f8]+_0x275a0a(0x1c2)+_0x480e72[_0x275a0a(0x123)]()+'</div>',_0x40c6b7[_0x275a0a(0x1b3)](_0x257b5);const _0x1f0e13=document['createElement']('div');_0x1f0e13[_0x275a0a(0x1a2)]='day-column\x20'+(_0x3da0fe?'today':''),_0x1f0e13[_0x275a0a(0x1d9)](_0x275a0a(0x1cb),_0x198990),_0x1f0e13[_0x275a0a(0x1d9)](_0x275a0a(0x19a),_0x31d8f8),_0x4a4dc7[_0x275a0a(0x1b3)](_0x1f0e13);}}function reRenderBlocks(){const _0x5bc093=a3_0x121345;document[_0x5bc093(0x1c1)](_0x5bc093(0x1d5))[_0x5bc093(0x183)](_0x495de0=>{const _0xae17e9=_0x5bc093;_0x495de0['querySelectorAll']('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0xae17e9(0x183)](_0x4d47c7=>_0x4d47c7[_0xae17e9(0x122)]());const _0x482363=_0x495de0[_0xae17e9(0x130)](_0xae17e9(0x1cb)),_0x36aa92=parseInt(_0x495de0[_0xae17e9(0x130)](_0xae17e9(0x19a))),_0x28daf9=Math[_0xae17e9(0x18e)](_0x495de0[_0xae17e9(0x1b1)]);(availabilityPattern[_0x36aa92]||[])['forEach'](_0x195bf8=>{const _0x58ac79=_0xae17e9,_0x98cd8a=document[_0x58ac79(0x143)](_0x58ac79(0x17e));_0x98cd8a[_0x58ac79(0x1a2)]=_0x58ac79(0x166),_0x98cd8a[_0x58ac79(0x124)][_0x58ac79(0x135)]=_0x195bf8*GRID_H+'px',_0x98cd8a[_0x58ac79(0x124)]['backgroundPosition']='-'+_0x28daf9+_0x58ac79(0x155)+_0x195bf8*GRID_H+'px',_0x495de0[_0x58ac79(0x1b3)](_0x98cd8a);});if(specialRanges[_0xae17e9(0x14c)]>0x0){const _0x43a8d2=new Date(_0x482363+_0xae17e9(0x174))[_0xae17e9(0x1a6)](),_0x5c6ca8=new Date(_0x482363+'T23:59:59')['getTime']();specialRanges['forEach'](_0x136af6=>{const _0x12cd9a=_0xae17e9,_0x461d7c=new Date(_0x136af6[_0x12cd9a(0x133)])['getTime'](),_0x3ec9cb=new Date(_0x136af6[_0x12cd9a(0x140)])[_0x12cd9a(0x1a6)](),_0x2c936b=Math[_0x12cd9a(0x179)](_0x43a8d2,_0x461d7c),_0x1334ce=Math[_0x12cd9a(0x134)](_0x5c6ca8,_0x3ec9cb);if(_0x2c936b<_0x1334ce){const _0x41f709=(_0x2c936b-_0x43a8d2)/0x36ee80*GRID_H,_0x22ff18=(_0x1334ce-_0x2c936b)/0x36ee80*GRID_H,_0x3dc751=document[_0x12cd9a(0x143)](_0x12cd9a(0x17e));_0x22ff18>=23.5*GRID_H?(_0x3dc751[_0x12cd9a(0x1a2)]='day-off-overlay\x20stripe-bg',_0x3dc751['style']['backgroundPosition']='-'+_0x28daf9+'px\x200px'):(_0x3dc751[_0x12cd9a(0x1a2)]='blocked-range-part\x20stripe-bg',_0x3dc751['style'][_0x12cd9a(0x135)]=_0x41f709+'px',_0x3dc751[_0x12cd9a(0x124)]['height']=_0x22ff18+'px',_0x3dc751['style']['backgroundPosition']='-'+_0x28daf9+_0x12cd9a(0x155)+_0x41f709+'px'),_0x495de0[_0x12cd9a(0x1b3)](_0x3dc751);}});}renderEventsForColumn(_0x495de0,_0x482363);});}function renderEventsForColumn(_0x52760d,_0x786ad3){const _0x5a6369=a3_0x121345,_0x5c8e4c=sessions['filter'](_0x3d268e=>_0x3d268e[_0x5a6369(0x152)]===_0x786ad3),_0x2b4292=_0x5c8e4c[_0x5a6369(0x1bc)](_0x4f289c=>{const _0x203608=_0x5a6369,[_0x4072c5,_0x3acff5]=_0x4f289c[_0x203608(0x133)][_0x203608(0x1a8)](':')['map'](Number),[_0x57e9a6,_0x4eacad]=_0x4f289c[_0x203608(0x140)][_0x203608(0x1a8)](':')['map'](Number);return{'data':_0x4f289c,'start':_0x4072c5*0x3c+_0x3acff5,'end':_0x57e9a6*0x3c+_0x4eacad,'colIndex':0x0};});_0x2b4292[_0x5a6369(0x20a)]((_0x15bb53,_0x1a2631)=>_0x15bb53[_0x5a6369(0x133)]-_0x1a2631['start']||_0x1a2631[_0x5a6369(0x140)]-_0x1a2631[_0x5a6369(0x133)]-(_0x15bb53[_0x5a6369(0x140)]-_0x15bb53[_0x5a6369(0x133)]));const _0x59db0b=[];_0x2b4292[_0x5a6369(0x183)](_0x162bdb=>{const _0x51c856=_0x5a6369;let _0xeb4cae=![];for(let _0x7046d1=0x0;_0x7046d1<_0x59db0b[_0x51c856(0x14c)];_0x7046d1++){const _0xdd49f2=_0x59db0b[_0x7046d1];if(_0x162bdb[_0x51c856(0x133)]>=_0xdd49f2[_0xdd49f2['length']-0x1][_0x51c856(0x140)]){_0xdd49f2['push'](_0x162bdb),_0x162bdb[_0x51c856(0x1d2)]=_0x7046d1,_0xeb4cae=!![];break;}}!_0xeb4cae&&(_0x59db0b[_0x51c856(0x139)]([_0x162bdb]),_0x162bdb['colIndex']=_0x59db0b['length']-0x1);}),_0x2b4292[_0x5a6369(0x183)](_0x1446e9=>{const _0x38ca66=_0x5a6369;let _0xc86459=0x0;_0x2b4292[_0x38ca66(0x183)](_0x5f229d=>{const _0x55eb58=_0x38ca66;if(Math[_0x55eb58(0x179)](_0x1446e9[_0x55eb58(0x133)],_0x5f229d[_0x55eb58(0x133)])<Math['min'](_0x1446e9[_0x55eb58(0x140)],_0x5f229d[_0x55eb58(0x140)])&&_0x5f229d['colIndex']>_0xc86459)_0xc86459=_0x5f229d[_0x55eb58(0x1d2)];});const _0x285182=_0xc86459+0x1,_0x166b32=0x64/_0x285182,_0x18adab=_0x1446e9[_0x38ca66(0x1d2)]*_0x166b32,_0x3f7216=document[_0x38ca66(0x143)](_0x38ca66(0x17e)),_0x2c4083=_0x1446e9[_0x38ca66(0x151)];let _0x2b9ce2=_0x38ca66(0x14a);if(clients&&clients[_0x38ca66(0x14c)]>0x0){const _0x20705c=clients[_0x38ca66(0x1d6)](_0x36ba73=>String(_0x36ba73['id'])===String(_0x2c4083[_0x38ca66(0x1f5)]));if(_0x20705c&&_0x20705c[_0x38ca66(0x1f6)])_0x2b9ce2=_0x20705c[_0x38ca66(0x1f6)];}const _0x4bfc5b=_0x2c4083['status']===_0x38ca66(0x194),_0x5b2e20=_0x4bfc5b?0x1:0.45;_0x3f7216[_0x38ca66(0x1a2)]='event-card'+(_0x4bfc5b?_0x38ca66(0x1db):''),_0x3f7216[_0x38ca66(0x124)][_0x38ca66(0x13a)]=hexToRgba(_0x2b9ce2,_0x5b2e20),_0x3f7216['style'][_0x38ca66(0x20c)]=_0x2b9ce2;const _0x2aabd6=_0x1446e9[_0x38ca66(0x133)]/0x3c*GRID_H,_0x78d411=(_0x1446e9['end']-_0x1446e9[_0x38ca66(0x133)])/0x3c*GRID_H;_0x3f7216[_0x38ca66(0x124)][_0x38ca66(0x135)]=_0x2aabd6+'px',_0x3f7216['style'][_0x38ca66(0x1e1)]=Math['max'](_0x78d411,0x14)+'px',_0x3f7216[_0x38ca66(0x124)][_0x38ca66(0x1be)]=_0x38ca66(0x1b0)+_0x166b32+'%\x20-\x204px)',_0x3f7216[_0x38ca66(0x124)]['left']='calc('+_0x18adab+_0x38ca66(0x14f),_0x3f7216[_0x38ca66(0x124)][_0x38ca66(0x1da)]=0xa+_0x1446e9[_0x38ca66(0x1d2)];if(_0x166b32<0x55)_0x3f7216[_0x38ca66(0x1a5)][_0x38ca66(0x1d0)](_0x38ca66(0x17d));let _0x374af7='';if(_0x2c4083['seriesId'])_0x374af7+=_0x38ca66(0x186);if(_0x4bfc5b)_0x374af7+=_0x38ca66(0x1fd);_0x3f7216['innerHTML']=_0x38ca66(0x17a)+_0x2c4083[_0x38ca66(0x133)]+_0x38ca66(0x1cc)+_0x2c4083[_0x38ca66(0x140)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x374af7+_0x38ca66(0x12a),_0x3f7216['onclick']=_0x36226d=>{_0x36226d['stopPropagation'](),openDetails(_0x2c4083);},_0x52760d[_0x38ca66(0x1b3)](_0x3f7216);});}function openAnalytics(){const _0x16c8a6=a3_0x121345,_0x9cdecd=document[_0x16c8a6(0x12f)](_0x16c8a6(0x180));setAnalyticsPeriod(_0x16c8a6(0x13e),_0x9cdecd),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x12dd8a,_0xdd752){const _0x5daaef=a3_0x121345;currentAnPeriod=_0x12dd8a,document[_0x5daaef(0x1c1)]('.period-switch\x20.p-btn')['forEach'](_0x54c7b8=>_0x54c7b8['classList'][_0x5daaef(0x122)](_0x5daaef(0x1fb)));if(_0xdd752)_0xdd752[_0x5daaef(0x1a5)][_0x5daaef(0x1d0)](_0x5daaef(0x1fb));const _0x52f679=document[_0x5daaef(0x168)](_0x5daaef(0x19e));_0x52f679[_0x5daaef(0x124)][_0x5daaef(0x1fa)]=_0x12dd8a===_0x5daaef(0x196)?_0x5daaef(0x1fc):_0x5daaef(0x1ce);const _0x5b9ff6=new Date();let _0x406b1a=new Date(),_0x18545a=new Date();if(_0x12dd8a===_0x5daaef(0x13e))_0x406b1a=getStartOfWeek(_0x5b9ff6),_0x18545a=new Date(_0x406b1a),_0x18545a['setDate'](_0x18545a[_0x5daaef(0x123)]()+0x6);else{if(_0x12dd8a==='month')_0x406b1a=new Date(_0x5b9ff6[_0x5daaef(0x11f)](),_0x5b9ff6[_0x5daaef(0x1b8)](),0x1),_0x18545a=new Date(_0x5b9ff6[_0x5daaef(0x11f)](),_0x5b9ff6[_0x5daaef(0x1b8)]()+0x1,0x0);else{!document[_0x5daaef(0x168)]('anStart')[_0x5daaef(0x182)]&&(document['getElementById'](_0x5daaef(0x1d3))[_0x5daaef(0x182)]=getLocalDateStr(_0x5b9ff6),document[_0x5daaef(0x168)](_0x5daaef(0x15a))[_0x5daaef(0x182)]=getLocalDateStr(_0x5b9ff6));refreshAnalytics();return;}}document[_0x5daaef(0x168)](_0x5daaef(0x1d3))[_0x5daaef(0x182)]=getLocalDateStr(_0x406b1a),document[_0x5daaef(0x168)](_0x5daaef(0x15a))[_0x5daaef(0x182)]=getLocalDateStr(_0x18545a),refreshAnalytics();}function refreshAnalytics(){const _0x56da9d=a3_0x121345,_0x3ce44b=document['getElementById']('anStart')[_0x56da9d(0x182)],_0x29171e=document[_0x56da9d(0x168)](_0x56da9d(0x15a))['value'];if(!_0x3ce44b||!_0x29171e)return;const _0x1aac2b=sessions['filter'](_0x2c4f45=>_0x2c4f45[_0x56da9d(0x152)]>=_0x3ce44b&&_0x2c4f45[_0x56da9d(0x152)]<=_0x29171e&&_0x2c4f45[_0x56da9d(0x1ae)]!=='cancelled'),_0x2e1f87=_0x1aac2b[_0x56da9d(0x14c)],_0x40b80d=_0x1aac2b[_0x56da9d(0x159)](_0x38e86a=>_0x38e86a[_0x56da9d(0x1ae)]===_0x56da9d(0x194))[_0x56da9d(0x14c)],_0xa3e35b=_0x2e1f87>0x0?Math[_0x56da9d(0x18e)](_0x40b80d/_0x2e1f87*0x64):0x0;document[_0x56da9d(0x168)]('anPercent')[_0x56da9d(0x163)]=_0xa3e35b+'%',document[_0x56da9d(0x168)](_0x56da9d(0x121))[_0x56da9d(0x163)]=_0x40b80d+_0x56da9d(0x1b2)+_0x2e1f87+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x20c70b=document[_0x56da9d(0x168)](_0x56da9d(0x1a7)),_0x31f9ab=0x2*Math['PI']*0x23,_0x1a8980=_0x31f9ab-_0xa3e35b/0x64*_0x31f9ab;_0x20c70b['style'][_0x56da9d(0x209)]=_0x1a8980;const _0x2ec821={};_0x1aac2b[_0x56da9d(0x183)](_0x5553e1=>{const _0x4474e0=_0x56da9d,_0x1417eb=_0x5553e1[_0x4474e0(0x1d8)]||_0x4474e0(0x188);if(!_0x2ec821[_0x1417eb]){const _0x28b658='#'+_0x1417eb[_0x4474e0(0x125)]()[_0x4474e0(0x1bf)](0x0,0x6);_0x2ec821[_0x1417eb]={'total':0x0,'done':0x0,'color':_0x28b658};}_0x2ec821[_0x1417eb]['total']++;if(_0x5553e1[_0x4474e0(0x1ae)]===_0x4474e0(0x194))_0x2ec821[_0x1417eb][_0x4474e0(0x18d)]++;});const _0x24dd00=document['getElementById'](_0x56da9d(0x16d));_0x24dd00[_0x56da9d(0x19d)]='';const _0x5340a6=Object[_0x56da9d(0x11b)](_0x2ec821)[_0x56da9d(0x20a)]((_0xdc871e,_0x501a67)=>_0x501a67[0x1]['total']-_0xdc871e[0x1][_0x56da9d(0x187)]);if(_0x5340a6[_0x56da9d(0x14c)]===0x0){_0x24dd00[_0x56da9d(0x19d)]=_0x56da9d(0x14d);return;}_0x5340a6[_0x56da9d(0x183)](([_0x4f0559,_0x229356])=>{const _0x292b8c=_0x56da9d,_0x2a72c6=Math['round'](_0x229356[_0x292b8c(0x18d)]/_0x229356[_0x292b8c(0x187)]*0x64),_0x3276f8=document[_0x292b8c(0x143)](_0x292b8c(0x17e));_0x3276f8['className']='client-stat-card',_0x3276f8[_0x292b8c(0x124)][_0x292b8c(0x20c)]=_0x229356[_0x292b8c(0x1f6)],_0x3276f8[_0x292b8c(0x19d)]=_0x292b8c(0x12b)+_0x4f0559[_0x292b8c(0x1bf)](0x0,0x5)+_0x292b8c(0x19f)+_0x229356[_0x292b8c(0x18d)]+'</span>\x20/\x20'+_0x229356[_0x292b8c(0x187)]+_0x292b8c(0x1cf)+_0x2a72c6+_0x292b8c(0x132),_0x24dd00['appendChild'](_0x3276f8);});}function openDetails(_0x1df869){const _0x3da03f=a3_0x121345;currentSession=_0x1df869;const _0x541eac=new Date(_0x1df869[_0x3da03f(0x152)]),_0x413681=_0x541eac[_0x3da03f(0x160)](_0x3da03f(0x11d),{'weekday':'long','day':'numeric','month':_0x3da03f(0x1ed)});document['getElementById'](_0x3da03f(0x13d))[_0x3da03f(0x163)]=_0x413681[_0x3da03f(0x1ac)](0x0)['toUpperCase']()+_0x413681[_0x3da03f(0x201)](0x1),document['getElementById']('detTime')[_0x3da03f(0x163)]=_0x1df869[_0x3da03f(0x133)]+_0x3da03f(0x1cc)+_0x1df869[_0x3da03f(0x140)],document[_0x3da03f(0x168)](_0x3da03f(0x128))[_0x3da03f(0x163)]=_0x1df869[_0x3da03f(0x1e9)]||_0x3da03f(0x198);const _0x215ce0=document[_0x3da03f(0x168)](_0x3da03f(0x11e)),_0x4029cb=document['getElementById'](_0x3da03f(0x178)),_0xb963d3=_0x4029cb[_0x3da03f(0x12f)](_0x3da03f(0x1e7)),_0x17672b=_0x4029cb[_0x3da03f(0x12f)](_0x3da03f(0x165)),_0x497e4e=document['getElementById'](_0x3da03f(0x1f2));if(_0x1df869[_0x3da03f(0x1ae)]===_0x3da03f(0x194))_0x215ce0[_0x3da03f(0x163)]=_0x3da03f(0x17c),_0x215ce0['style'][_0x3da03f(0x1f6)]=_0x3da03f(0x17f),_0x4029cb['style'][_0x3da03f(0x1fa)]=_0x3da03f(0x1ce);else{_0x215ce0[_0x3da03f(0x163)]=_0x3da03f(0x142),_0x215ce0[_0x3da03f(0x124)][_0x3da03f(0x1f6)]=_0x3da03f(0x1ad),_0x4029cb[_0x3da03f(0x124)][_0x3da03f(0x1fa)]='block';const _0x173de1=new Date(_0x1df869[_0x3da03f(0x152)]+'T'+_0x1df869[_0x3da03f(0x133)]),_0x58c7e0=new Date(),_0x44d18b=(_0x173de1-_0x58c7e0)/(0x3e8*0x3c*0x3c),_0x21b7d3=coachProfiles[_0x1df869[_0x3da03f(0x1d8)]]&&coachProfiles[_0x1df869['coachId']][_0x3da03f(0x1f3)]?parseInt(coachProfiles[_0x1df869[_0x3da03f(0x1d8)]][_0x3da03f(0x1f3)]):0x18;if(_0x21b7d3===0x0||_0x44d18b>=_0x21b7d3)_0xb963d3['style']['display']=_0x3da03f(0x19c),_0x17672b['style']['display']=_0x3da03f(0x19c),_0x497e4e['style'][_0x3da03f(0x1fa)]=_0x3da03f(0x1ce);else{_0xb963d3['style'][_0x3da03f(0x1fa)]=_0x3da03f(0x1ce),_0x17672b[_0x3da03f(0x124)][_0x3da03f(0x1fa)]='none',_0x497e4e[_0x3da03f(0x124)]['display']=_0x3da03f(0x19c);let _0x60457b=_0x21b7d3===0x0?_0x3da03f(0x144):_0x3da03f(0x1a0)+_0x21b7d3+'\x20—á.';_0x497e4e[_0x3da03f(0x163)]=_0x3da03f(0x181)+_0x60457b+_0x3da03f(0x189);}}document[_0x3da03f(0x168)](_0x3da03f(0x1eb))[_0x3da03f(0x1a5)][_0x3da03f(0x1d0)]('active'),document['getElementById'](_0x3da03f(0x16b))[_0x3da03f(0x1a5)][_0x3da03f(0x1d0)](_0x3da03f(0x19b));}function a3_0xb651(){const _0x9871dc=['dateStr','scroll','gridColumns','px\x20-','keys','rescheduleSheet','uc_client_settings','filter','anEnd','padStart','2674504ekjbEf','scrollTop','disableVerticalSwipes','initDataUnsafe','toLocaleDateString','setBackgroundColor','constructor','textContent','Telegram','.btn-reschedule','blocked-slot\x20stripe-bg','WebApp','getElementById','toast','then','detailsSheet','setItem','analyticsList','json','client_load','apply','POST','settings','pattern','T00:00:00','ccTitle','–û—Ç–º–µ–Ω–µ–Ω–æ','floor','cancelContainer','max','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','show','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','mini','div','var(--acc-green)','.period-switch\x20.p-btn','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','value','forEach','(((.+)+)+)+$','getDay','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','total','Unknown','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','</div><div\x20class=\x22rs-day-num\x22>','DOMContentLoaded','done','round','timeLineBadge','get_slots','createDocumentFragment','ready','rsDatesTrack','completed','addEventListener','custom','planned','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','client_cancel','data-day-idx','open','block','innerHTML','anCustomDates','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','–∑–∞\x20','scrollTo','className','setDate','scrollLeft','classList','getTime','anDonutCircle','split','Error\x20setting\x20back\x20button:','isArray','coach_profiles','charAt','var(--acc-blue)','status','now','calc(','offsetLeft','\x20–∏–∑\x20','appendChild','clients','380631YQcMcu','globalTimeLine','calendar','getMonth','onclick','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','.rs-date-chip','map','<span>','width','substr','32jOziPC','querySelectorAll','</div><div\x20class=\x22dch-num\x22>','firstChild','#050505','rsSlotsGrid','rs-time-btn','join','syncLoad','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','1075245YHuhBZ','data-date','\x20-\x20','rgba(','none','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','add','#ff453a','colIndex','anStart','loadLocal','.day-column','find','clientWidth','coachId','setAttribute','zIndex','\x20status-completed','3930024UnhvnG','<div\x20class=\x22dch-day\x22>','applyData','sid','button','height','startsWith','1758670mvBtqr','ccYesBtn','test','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','.btn-cancel','v9.5-CLIENT-ANALYTICS','note','setMonth','overlay','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','long','initData','ccText','saveLocally','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','cancelHint','cancel_window','8vvTVDk','clientId','color','user','\x20–≤\x20','substring','display','active','flex','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','href','customConfirm','ranges','slice','BackButton','Error\x20setting\x20color:','timeColumn','search','</div>','uc_client_list','expand','strokeDashoffset','sort','matrixViewport','borderLeftColor','insertBefore','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','getItem','parse','rgba(10,\x20132,\x20255,\x20','entries','cid','ru-RU','detStatus','getFullYear','log','anTotalStats','remove','getDate','style','toString','scrollWidth','findIndex','detNote','<div\x20class=\x22rs-day-name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','location','stringify','14hsFZEG','querySelector','getAttribute','setHours','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','start','min','top','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','1984023CuOPQv','600','push','backgroundColor','toLocaleString','268102lDnxnl','detDate','week','getMinutes','end','daysHeaderTrack','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','createElement','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','today','fontWeight','.day-col-header[data-date=\x22','day-col-header\x20','error','#0a84ff','auto','length','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','setHeaderColor','%\x20+\x202px)','exceptions','data'];a3_0xb651=function(){return _0x9871dc;};return a3_0xb651();}function closeAllSheets(){const _0x4c00a7=a3_0x121345;document[_0x4c00a7(0x168)](_0x4c00a7(0x1eb))[_0x4c00a7(0x1a5)][_0x4c00a7(0x122)](_0x4c00a7(0x1fb)),document[_0x4c00a7(0x1c1)]('.sheet')[_0x4c00a7(0x183)](_0x2da881=>_0x2da881['classList'][_0x4c00a7(0x122)](_0x4c00a7(0x19b)));}function openSheet(_0x25112c){const _0x4e8251=a3_0x121345;document[_0x4e8251(0x168)](_0x4e8251(0x1eb))[_0x4e8251(0x1a5)][_0x4e8251(0x1d0)](_0x4e8251(0x1fb)),document['getElementById'](_0x25112c)[_0x4e8251(0x1a5)]['add'](_0x4e8251(0x19b));}function getLocalDateStr(_0x3ca814){const _0x32c73d=a3_0x121345,_0x3ecf12=_0x3ca814[_0x32c73d(0x11f)](),_0x397bfe=String(_0x3ca814['getMonth']()+0x1)[_0x32c73d(0x15b)](0x2,'0'),_0x234cd7=String(_0x3ca814[_0x32c73d(0x123)]())[_0x32c73d(0x15b)](0x2,'0');return _0x3ecf12+'-'+_0x397bfe+'-'+_0x234cd7;}function getStartOfWeek(_0xe6e415){const _0x546f81=a3_0x121345,_0x19fb15=new Date(_0xe6e415),_0x4d0a96=_0x19fb15[_0x546f81(0x185)](),_0x4f7380=_0x19fb15[_0x546f81(0x123)]()-_0x4d0a96+(_0x4d0a96===0x0?-0x6:0x1);return _0x19fb15[_0x546f81(0x1a3)](_0x4f7380),_0x19fb15[_0x546f81(0x131)](0x0,0x0,0x0,0x0),_0x19fb15;}function scrollToToday(){const _0x13df33=getLocalDateStr(new Date());setTimeout(()=>{const _0x3e2571=a3_0x16b0,_0x2a19c7=document[_0x3e2571(0x12f)](_0x3e2571(0x147)+_0x13df33+'\x22]');if(_0x2a19c7){const _0x31018e=document[_0x3e2571(0x168)](_0x3e2571(0x20b)),_0x147c03=_0x2a19c7['offsetLeft']-_0x31018e[_0x3e2571(0x1d7)]/0x2+_0x2a19c7['offsetWidth']/0x2;_0x31018e[_0x3e2571(0x1a1)]({'left':_0x147c03,'behavior':_0x3e2571(0x14b)}),_0x31018e[_0x3e2571(0x15d)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function a3_0x16b0(_0x116ad1,_0x586a42){_0x116ad1=_0x116ad1-0x116;const _0xa87a29=a3_0xb651();let _0x183ec2=_0xa87a29[_0x116ad1];return _0x183ec2;}function updateClock(){const _0x130d09=a3_0x121345,_0x479cd8=new Date(),_0x4ddaee=document[_0x130d09(0x168)](_0x130d09(0x1b6)),_0x45ea0c=document['getElementById']('timeLineBadge'),_0x139274=(_0x479cd8['getHours']()*0x3c+_0x479cd8[_0x130d09(0x13f)]())/0x3c*GRID_H;_0x4ddaee['style'][_0x130d09(0x135)]=_0x139274+'px',_0x4ddaee['style'][_0x130d09(0x1fa)]=_0x130d09(0x19c),_0x45ea0c[_0x130d09(0x124)][_0x130d09(0x135)]=_0x139274+'px',_0x45ea0c[_0x130d09(0x124)][_0x130d09(0x1fa)]=_0x130d09(0x19c),_0x45ea0c[_0x130d09(0x163)]=String(_0x479cd8['getHours']())[_0x130d09(0x15b)](0x2,'0')+':'+String(_0x479cd8[_0x130d09(0x13f)]())['padStart'](0x2,'0');}function onScroll(){const _0x1599cb=a3_0x121345,_0x1d2cc6=document[_0x1599cb(0x168)]('matrixViewport'),_0x4d5f5f=document['querySelectorAll']('.day-col-header');for(let _0x4f3ef5 of _0x4d5f5f)if(_0x4f3ef5[_0x1599cb(0x1b1)]>=_0x1d2cc6[_0x1599cb(0x1a4)]){const _0x546b46=new Date(_0x4f3ef5[_0x1599cb(0x130)](_0x1599cb(0x1cb)));document[_0x1599cb(0x168)]('headerMonth')[_0x1599cb(0x163)]=_0x546b46[_0x1599cb(0x13b)]('ru',{'month':_0x1599cb(0x1ed)})['toUpperCase']()+'\x20'+_0x546b46[_0x1599cb(0x11f)]();break;}}function showToast(_0x3a18e1){const _0x1907e8=a3_0x121345,_0x11e061=document[_0x1907e8(0x168)](_0x1907e8(0x169));_0x11e061[_0x1907e8(0x163)]=_0x3a18e1,_0x11e061[_0x1907e8(0x1a5)][_0x1907e8(0x1d0)](_0x1907e8(0x17b)),setTimeout(()=>_0x11e061[_0x1907e8(0x1a5)][_0x1907e8(0x122)](_0x1907e8(0x17b)),0x7d0);}function handleInfiniteScroll(){const _0x3ce156=a3_0x121345,_0x2a9ae9=document['getElementById']('matrixViewport'),_0x2cb73b=_0x2a9ae9[_0x3ce156(0x1a4)],_0x4c0cd3=_0x2a9ae9[_0x3ce156(0x126)],_0x62e84=_0x2a9ae9[_0x3ce156(0x1d7)];if(_0x4c0cd3-(_0x2cb73b+_0x62e84)<0x12c){const _0x6e8ea8=endOffset;endOffset+=0xe,renderDayRange(_0x6e8ea8+0x1,endOffset),reRenderBlocks();}if(_0x2cb73b<0x12c){const _0x320e34=startOffset;startOffset-=0xe,prependDays(startOffset,_0x320e34-0x1),_0x2a9ae9[_0x3ce156(0x1a4)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x41a81f,_0x2bf72d){const _0x573ce7=a3_0x121345,_0x5ee680=document[_0x573ce7(0x168)](_0x573ce7(0x141)),_0x2c5e16=document['getElementById'](_0x573ce7(0x154)),_0x3a453c=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x27a303=new Date();_0x27a303[_0x573ce7(0x131)](0x0,0x0,0x0,0x0);const _0x26c750=getLocalDateStr(new Date()),_0x3705bb=document['createDocumentFragment'](),_0x6dd4d7=document[_0x573ce7(0x191)]();for(let _0x51ed48=_0x41a81f;_0x51ed48<=_0x2bf72d;_0x51ed48++){const _0x2cfe1c=new Date(_0x27a303);_0x2cfe1c['setDate'](_0x2cfe1c['getDate']()+_0x51ed48);const _0x25ce4b=getLocalDateStr(_0x2cfe1c);let _0x4d52c8=_0x2cfe1c['getDay']()-0x1;if(_0x4d52c8===-0x1)_0x4d52c8=0x6;const _0x211e9a=_0x25ce4b===_0x26c750,_0x2b4e2b=document[_0x573ce7(0x143)](_0x573ce7(0x17e));_0x2b4e2b[_0x573ce7(0x1a2)]=_0x573ce7(0x148)+(_0x211e9a?_0x573ce7(0x145):''),_0x2b4e2b[_0x573ce7(0x1d9)](_0x573ce7(0x1cb),_0x25ce4b),_0x2b4e2b[_0x573ce7(0x19d)]=_0x573ce7(0x1dd)+_0x3a453c[_0x4d52c8]+_0x573ce7(0x1c2)+_0x2cfe1c[_0x573ce7(0x123)]()+_0x573ce7(0x206),_0x3705bb['appendChild'](_0x2b4e2b);const _0x56cf9b=document['createElement'](_0x573ce7(0x17e));_0x56cf9b[_0x573ce7(0x1a2)]='day-column\x20'+(_0x211e9a?_0x573ce7(0x145):''),_0x56cf9b[_0x573ce7(0x1d9)](_0x573ce7(0x1cb),_0x25ce4b),_0x56cf9b['setAttribute'](_0x573ce7(0x19a),_0x4d52c8),_0x6dd4d7[_0x573ce7(0x1b3)](_0x56cf9b);}_0x5ee680[_0x573ce7(0x116)](_0x3705bb,_0x5ee680['firstChild']),_0x2c5e16[_0x573ce7(0x116)](_0x6dd4d7,_0x2c5e16[_0x573ce7(0x12f)](_0x573ce7(0x1d5)));}function hexToRgba(_0x187e9b,_0x138f0b){const _0x58071e=a3_0x121345;let _0x37fde6;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x58071e(0x1e5)](_0x187e9b))return _0x37fde6=_0x187e9b[_0x58071e(0x1f9)](0x1)['split'](''),_0x37fde6[_0x58071e(0x14c)]==0x3&&(_0x37fde6=[_0x37fde6[0x0],_0x37fde6[0x0],_0x37fde6[0x1],_0x37fde6[0x1],_0x37fde6[0x2],_0x37fde6[0x2]]),_0x37fde6='0x'+_0x37fde6[_0x58071e(0x1c7)](''),_0x58071e(0x1cd)+[_0x37fde6>>0x10&0xff,_0x37fde6>>0x8&0xff,_0x37fde6&0xff][_0x58071e(0x1c7)](',')+','+_0x138f0b+')';return _0x58071e(0x11a)+_0x138f0b+')';}let confirmResolver=null;function showCustomConfirm(_0x3c1304,_0x33f627,_0x2a50e6=!![]){const _0x4bfe20=a3_0x121345;document[_0x4bfe20(0x168)](_0x4bfe20(0x175))[_0x4bfe20(0x163)]=_0x3c1304,document[_0x4bfe20(0x168)](_0x4bfe20(0x1ef))[_0x4bfe20(0x163)]=_0x33f627;const _0x34b6df=document['getElementById'](_0x4bfe20(0x1e4));return _0x2a50e6?(_0x34b6df[_0x4bfe20(0x124)][_0x4bfe20(0x1f6)]=_0x4bfe20(0x1d1),_0x34b6df[_0x4bfe20(0x124)][_0x4bfe20(0x146)]=_0x4bfe20(0x138)):(_0x34b6df[_0x4bfe20(0x124)][_0x4bfe20(0x1f6)]=_0x4bfe20(0x14a),_0x34b6df[_0x4bfe20(0x124)][_0x4bfe20(0x146)]=_0x4bfe20(0x138)),new Promise(_0x3a1c3d=>{const _0x37eb16=_0x4bfe20;confirmResolver=_0x3a1c3d,document['getElementById']('customConfirm')[_0x37eb16(0x1a5)][_0x37eb16(0x1d0)]('visible');});}function resolveCustomConfirm(_0x28c3a1){const _0x1feaa5=a3_0x121345;document[_0x1feaa5(0x168)](_0x1feaa5(0x1ff))[_0x1feaa5(0x1a5)][_0x1feaa5(0x122)]('visible');if(confirmResolver)confirmResolver(_0x28c3a1);}async function tryCancelCurrentSession(){const _0x3eed3d=a3_0x121345;if(!currentSession)return;const _0x21a728=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?',!![]);if(!_0x21a728)return;const _0x400aad=currentSession;closeAllSheets(),sessions=sessions[_0x3eed3d(0x159)](_0x5ceed0=>_0x5ceed0['id']!==_0x400aad['id']),reRenderBlocks(),showToast(_0x3eed3d(0x176)),lastUserActionTime=Date[_0x3eed3d(0x1af)]();try{const _0x4ddc68=window['Telegram']?.[_0x3eed3d(0x167)],_0x2d0b2d=await fetch(API_URL,{'method':'POST','body':JSON[_0x3eed3d(0x12d)]({'action':_0x3eed3d(0x199),'init_data':_0x4ddc68?.[_0x3eed3d(0x1ee)]||'','coachId':_0x400aad[_0x3eed3d(0x1d8)],'dateStr':_0x400aad['dateStr'],'sessionId':_0x400aad['id']})});if(_0x2d0b2d['ok'])DataManager[_0x3eed3d(0x1f0)]();}catch(_0x579981){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x53cd4c=a3_0x121345;if(!currentSession)return;document[_0x53cd4c(0x168)](_0x53cd4c(0x16b))['classList'][_0x53cd4c(0x122)]('open'),document[_0x53cd4c(0x168)](_0x53cd4c(0x157))[_0x53cd4c(0x1a5)][_0x53cd4c(0x1d0)](_0x53cd4c(0x19b));const _0x4960a0=document[_0x53cd4c(0x168)](_0x53cd4c(0x193)),_0x16385d=document[_0x53cd4c(0x168)](_0x53cd4c(0x1c5));_0x4960a0[_0x53cd4c(0x19d)]='',_0x16385d[_0x53cd4c(0x19d)]=_0x53cd4c(0x117);const [_0x2b89a8,_0x2ff295]=currentSession[_0x53cd4c(0x133)][_0x53cd4c(0x1a8)](':')['map'](Number),[_0x2484ff,_0x231192]=currentSession[_0x53cd4c(0x140)]['split'](':')[_0x53cd4c(0x1bc)](Number),_0x515ecd=_0x2484ff*0x3c+_0x231192-(_0x2b89a8*0x3c+_0x2ff295);try{const _0x3257d2=window[_0x53cd4c(0x164)]?.[_0x53cd4c(0x167)],_0x2dfbd9=await fetch(API_URL,{'method':_0x53cd4c(0x171),'body':JSON[_0x53cd4c(0x12d)]({'action':_0x53cd4c(0x190),'coachId':currentSession[_0x53cd4c(0x1d8)],'duration':_0x515ecd,'init_data':_0x3257d2?.[_0x53cd4c(0x1ee)]||'','excludeSessionId':currentSession['id']})}),_0x238791=await _0x2dfbd9[_0x53cd4c(0x16e)]();_0x238791['ok']&&_0x238791[_0x53cd4c(0x151)]?(availableSlotsCache=_0x238791[_0x53cd4c(0x151)],renderRescheduleDates()):_0x16385d[_0x53cd4c(0x19d)]=_0x53cd4c(0x1ba);}catch(_0x49fa00){_0x16385d[_0x53cd4c(0x19d)]=_0x53cd4c(0x18a);}}function renderRescheduleDates(){const _0x7cd315=a3_0x121345,_0x21819f=document['getElementById']('rsDatesTrack');_0x21819f[_0x7cd315(0x19d)]='';const _0x4046fa=Object[_0x7cd315(0x156)](availableSlotsCache)[_0x7cd315(0x20a)](),_0x17dfb=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x4046fa['length']===0x0){document[_0x7cd315(0x168)](_0x7cd315(0x1c5))[_0x7cd315(0x19d)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x4046fa[_0x7cd315(0x183)]((_0x3f9467,_0x4852d0)=>{const _0xe47c15=_0x7cd315,_0xce899d=new Date(_0x3f9467),_0x588077=_0x17dfb[_0xce899d['getDay']()],_0x36f0ef=_0xce899d['getDate'](),_0xb59d=document[_0xe47c15(0x143)](_0xe47c15(0x17e));_0xb59d[_0xe47c15(0x1a2)]='rs-date-chip';if(_0x4852d0===0x0)_0xb59d[_0xe47c15(0x1a5)]['add'](_0xe47c15(0x1fb));_0xb59d[_0xe47c15(0x19d)]=_0xe47c15(0x129)+_0x588077+_0xe47c15(0x18b)+_0x36f0ef+_0xe47c15(0x206),_0xb59d[_0xe47c15(0x1b9)]=()=>selectRsDate(_0x3f9467,_0xb59d),_0x21819f[_0xe47c15(0x1b3)](_0xb59d);}),selectRsDate(_0x4046fa[0x0],_0x21819f[_0x7cd315(0x1c3)]);}function selectRsDate(_0x27a017,_0x7f6480){const _0x1ad617=a3_0x121345;selectedRsDate=_0x27a017,document['querySelectorAll'](_0x1ad617(0x1bb))[_0x1ad617(0x183)](_0x2caaec=>_0x2caaec[_0x1ad617(0x1a5)]['remove'](_0x1ad617(0x1fb)));if(_0x7f6480)_0x7f6480['classList'][_0x1ad617(0x1d0)]('active');const _0x23e280=document[_0x1ad617(0x168)](_0x1ad617(0x1c5));_0x23e280[_0x1ad617(0x19d)]='';const _0x44675f=availableSlotsCache[_0x27a017]||[];if(_0x44675f[_0x1ad617(0x14c)]===0x0){_0x23e280['innerHTML']=_0x1ad617(0x1ba);return;}_0x44675f['forEach'](_0xd6b634=>{const _0x399a2a=_0x1ad617,_0x4ad598=document['createElement'](_0x399a2a(0x1e0));_0x4ad598['className']=_0x399a2a(0x1c6),_0x4ad598[_0x399a2a(0x163)]=_0xd6b634,_0x4ad598[_0x399a2a(0x1b9)]=()=>confirmReschedule(_0xd6b634),_0x23e280[_0x399a2a(0x1b3)](_0x4ad598);});}async function confirmReschedule(_0x5bad91){const _0x2e16d0=a3_0x121345,_0x37dc2=new Date(selectedRsDate),_0x21464c=_0x37dc2[_0x2e16d0(0x160)](_0x2e16d0(0x11d),{'day':'numeric','month':_0x2e16d0(0x1ed)}),_0x2851d2=await showCustomConfirm(_0x2e16d0(0x1e6),'–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x21464c+_0x2e16d0(0x1f8)+_0x5bad91+'?',![]);if(!_0x2851d2)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date['now']();const _0x12624a=currentSession[_0x2e16d0(0x152)],_0x51e117=currentSession['id'],[_0x38939f,_0x404a93]=currentSession[_0x2e16d0(0x133)][_0x2e16d0(0x1a8)](':')[_0x2e16d0(0x1bc)](Number),[_0x37e628,_0x168736]=currentSession[_0x2e16d0(0x140)][_0x2e16d0(0x1a8)](':')[_0x2e16d0(0x1bc)](Number),_0x5f0956=_0x37e628*0x3c+_0x168736-(_0x38939f*0x3c+_0x404a93),[_0x576ce8,_0x439ca7]=_0x5bad91[_0x2e16d0(0x1a8)](':')[_0x2e16d0(0x1bc)](Number),_0x59c7d=_0x576ce8*0x3c+_0x439ca7+_0x5f0956,_0x1ec411=Math[_0x2e16d0(0x177)](_0x59c7d/0x3c),_0x3a1150=_0x59c7d%0x3c,_0x25fd7d=String(_0x1ec411)['padStart'](0x2,'0')+':'+String(_0x3a1150)[_0x2e16d0(0x15b)](0x2,'0'),_0x5ae606=sessions[_0x2e16d0(0x127)](_0x1d41db=>_0x1d41db['id']===_0x51e117);_0x5ae606!==-0x1&&(sessions[_0x5ae606][_0x2e16d0(0x152)]=selectedRsDate,sessions[_0x5ae606]['start']=_0x5bad91,sessions[_0x5ae606]['end']=_0x25fd7d,reRenderBlocks());try{const _0x133b5f=window[_0x2e16d0(0x164)]?.[_0x2e16d0(0x167)],_0x1de9c6=await fetch(API_URL,{'method':_0x2e16d0(0x171),'body':JSON[_0x2e16d0(0x12d)]({'action':'reschedule','init_data':_0x133b5f?.[_0x2e16d0(0x1ee)]||'','oldSessionId':_0x51e117,'oldDate':_0x12624a,'newDate':selectedRsDate,'newTime':_0x5bad91,'coachId':currentSession[_0x2e16d0(0x1d8)]})}),_0x5a943a=await _0x1de9c6[_0x2e16d0(0x16e)]();!_0x5a943a['ok']?(showToast(_0x2e16d0(0x1ec)),DataManager[_0x2e16d0(0x1c8)]()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x2e16d0(0x1f0)]());}catch(_0x39c0bb){showToast(_0x2e16d0(0x1c9));}}document[a3_0x121345(0x195)](a3_0x121345(0x18c),init);