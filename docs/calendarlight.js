const a3_0x47912a=a3_0x517c;(function(_0x283789,_0x963fa2){const _0x392c76=a3_0x517c,_0x5655cb=_0x283789();while(!![]){try{const _0x41e2c3=-parseInt(_0x392c76(0x188))/0x1+-parseInt(_0x392c76(0x19a))/0x2*(parseInt(_0x392c76(0x234))/0x3)+parseInt(_0x392c76(0x23d))/0x4+-parseInt(_0x392c76(0x1cd))/0x5+-parseInt(_0x392c76(0x21c))/0x6+parseInt(_0x392c76(0x24f))/0x7+parseInt(_0x392c76(0x1bc))/0x8*(parseInt(_0x392c76(0x213))/0x9);if(_0x41e2c3===_0x963fa2)break;else _0x5655cb['push'](_0x5655cb['shift']());}catch(_0x59916b){_0x5655cb['push'](_0x5655cb['shift']());}}}(a3_0x1874,0xc6e46));const APP_VERSION='v9.5-CLIENT-ANALYTICS',API_URL=a3_0x47912a(0x1f7),GRID_H=0x3c,KEY_SESSIONS=a3_0x47912a(0x1be),KEY_SETTINGS=a3_0x47912a(0x18f),KEY_CLIENTS=a3_0x47912a(0x173);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x47912a(0x1f1),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x1a0afe=a3_0x47912a,_0x56d35c=(function(){let _0x37231c=!![];return function(_0x38d8c3,_0xf07d7e){const _0xb7ac37=_0x37231c?function(){const _0x594486=a3_0x517c;if(_0xf07d7e){const _0x5374c7=_0xf07d7e[_0x594486(0x200)](_0x38d8c3,arguments);return _0xf07d7e=null,_0x5374c7;}}:function(){};return _0x37231c=![],_0xb7ac37;};}()),_0x3f5c68=_0x56d35c(this,function(){const _0x528fa3=a3_0x517c;return _0x3f5c68[_0x528fa3(0x249)]()[_0x528fa3(0x215)](_0x528fa3(0x241))[_0x528fa3(0x249)]()['constructor'](_0x3f5c68)[_0x528fa3(0x215)]('(((.+)+)+)+$');});_0x3f5c68();try{const _0x160e8e=window[_0x1a0afe(0x18a)]?.[_0x1a0afe(0x20e)];if(!_0x160e8e)return;_0x160e8e[_0x1a0afe(0x248)](),_0x160e8e[_0x1a0afe(0x174)]();try{_0x160e8e[_0x1a0afe(0x16a)](_0x1a0afe(0x1ad)),_0x160e8e[_0x1a0afe(0x183)]&&_0x160e8e[_0x1a0afe(0x183)]('#050505');}catch(_0x4916d1){console[_0x1a0afe(0x172)](_0x1a0afe(0x194),_0x4916d1);}try{_0x160e8e[_0x1a0afe(0x1a4)]&&(_0x160e8e[_0x1a0afe(0x1a4)]['show'](),_0x160e8e['BackButton'][_0x1a0afe(0x1a6)](),_0x160e8e['BackButton']['onClick'](function(){const _0x4100e0=_0x1a0afe;window[_0x4100e0(0x243)][_0x4100e0(0x1de)]=_0x4100e0(0x1c9);}));}catch(_0x55b875){console[_0x1a0afe(0x172)](_0x1a0afe(0x1ca),_0x55b875);}try{if(_0x160e8e['disableVerticalSwipes'])_0x160e8e[_0x1a0afe(0x19e)]();}catch(_0x35223f){}}catch(_0x580548){console[_0x1a0afe(0x23e)](_0x1a0afe(0x189),_0x580548);}}());function isAdmin(){const _0x393a49=a3_0x47912a;try{const _0x33dd06=Number(window[_0x393a49(0x18a)]?.[_0x393a49(0x20e)]?.['initDataUnsafe']?.['user']?.['id']);return _0x33dd06===0xbaf7174;}catch(_0x32752d){return![];}}const DataManager={'saveLocally'(){const _0x5e022d=a3_0x47912a;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x5e022d(0x1fb)](sessions)),localStorage[_0x5e022d(0x1c6)](KEY_CLIENTS,JSON[_0x5e022d(0x1fb)](clients)),localStorage[_0x5e022d(0x1c6)](KEY_SETTINGS,JSON[_0x5e022d(0x1fb)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x39fc2b){}},'loadLocal'(){const _0x4c3799=a3_0x47912a;try{const _0x551293=localStorage[_0x4c3799(0x185)](KEY_SESSIONS);if(_0x551293)sessions=JSON[_0x4c3799(0x1cf)](_0x551293);const _0x3d007f=localStorage['getItem'](KEY_CLIENTS);if(_0x3d007f)clients=JSON['parse'](_0x3d007f);const _0x10bb09=localStorage[_0x4c3799(0x185)](KEY_SETTINGS);if(_0x10bb09){const _0x25bfa6=JSON['parse'](_0x10bb09);if(_0x25bfa6[_0x4c3799(0x166)])availabilityPattern=_0x25bfa6['pattern'];if(_0x25bfa6[_0x4c3799(0x201)])specialRanges=_0x25bfa6['ranges'];if(_0x25bfa6['exceptions'])dateExceptions=_0x25bfa6[_0x4c3799(0x187)];}}catch(_0x3282eb){}},async 'syncLoad'(){const _0x15dffc=a3_0x47912a,_0x4250c2=new Date(),_0x5b78c2=_0x4250c2[_0x15dffc(0x22a)]()+'-'+String(_0x4250c2[_0x15dffc(0x22b)]()+0x1)[_0x15dffc(0x253)](0x2,'0'),_0x2c584c=new Date(_0x4250c2);_0x2c584c[_0x15dffc(0x22d)](_0x4250c2[_0x15dffc(0x22b)]()+0x1);const _0x41b824=_0x2c584c[_0x15dffc(0x22a)]()+'-'+String(_0x2c584c[_0x15dffc(0x22b)]()+0x1)[_0x15dffc(0x253)](0x2,'0'),_0x4ff895=Date[_0x15dffc(0x1f0)]();try{const _0x5d7e1d=window[_0x15dffc(0x18a)]?.[_0x15dffc(0x20e)],_0x30f999=_0x5d7e1d?.[_0x15dffc(0x1e0)]||'',[_0x81cbb2,_0x297965]=await Promise[_0x15dffc(0x1ba)]([fetch(API_URL,{'method':_0x15dffc(0x190),'body':JSON[_0x15dffc(0x1fb)]({'action':_0x15dffc(0x257),'init_data':_0x30f999,'month_str':_0x5b78c2})})['then'](_0x5cdbe1=>_0x5cdbe1[_0x15dffc(0x206)]()),fetch(API_URL,{'method':_0x15dffc(0x190),'body':JSON[_0x15dffc(0x1fb)]({'action':'client_load','init_data':_0x30f999,'month_str':_0x41b824})})[_0x15dffc(0x1ed)](_0xa4ff72=>_0xa4ff72[_0x15dffc(0x206)]())]);if(lastUserActionTime>_0x4ff895){console[_0x15dffc(0x172)](_0x15dffc(0x180));return;}if(_0x81cbb2['ok'])this[_0x15dffc(0x1c8)](_0x81cbb2[_0x15dffc(0x1c7)],_0x5b78c2);if(_0x297965['ok'])this[_0x15dffc(0x1c8)](_0x297965[_0x15dffc(0x1c7)],_0x41b824);this[_0x15dffc(0x16c)]();}catch(_0x2c5e1c){}},'applyData'(_0x53b89c,_0xc97ca4){const _0x59010b=a3_0x47912a;if(!_0x53b89c)return;if(_0x53b89c[_0x59010b(0x212)]){if(_0x53b89c[_0x59010b(0x212)][_0x59010b(0x166)])availabilityPattern=_0x53b89c[_0x59010b(0x212)][_0x59010b(0x166)];if(_0x53b89c[_0x59010b(0x212)]['ranges'])specialRanges=_0x53b89c[_0x59010b(0x212)][_0x59010b(0x201)];if(_0x53b89c['settings'][_0x59010b(0x187)])dateExceptions=_0x53b89c[_0x59010b(0x212)][_0x59010b(0x187)];}if(_0x53b89c[_0x59010b(0x1d2)]&&Array['isArray'](_0x53b89c[_0x59010b(0x1d2)]))clients=_0x53b89c[_0x59010b(0x1d2)];_0x53b89c['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x53b89c[_0x59010b(0x1fe)]}),_0x53b89c[_0x59010b(0x21b)]&&(sessions=sessions[_0x59010b(0x1a9)](_0x46f010=>!_0x46f010[_0x59010b(0x255)][_0x59010b(0x1dc)](_0xc97ca4)),Object[_0x59010b(0x22e)](_0x53b89c['calendar'])[_0x59010b(0x20f)](_0x908f04=>{const _0x406213=_0x59010b,_0x2f60d5=_0x53b89c[_0x406213(0x21b)][_0x908f04];_0x2f60d5[_0x406213(0x20f)](_0x1bf787=>{const _0x1cf197=_0x406213;sessions[_0x1cf197(0x235)]({'id':_0x1bf787['i'],'clientId':_0x1bf787['c'],'coachId':_0x1bf787['cid'],'dateStr':_0xc97ca4+'-'+_0x908f04[_0x1cf197(0x253)](0x2,'0'),'start':_0x1bf787['s'],'end':_0x1bf787['e'],'note':_0x1bf787['n']||'','status':_0x1bf787['st']||'planned','seriesId':_0x1bf787[_0x1cf197(0x163)]});});})),reRenderBlocks();}};function init(){const _0x56365a=a3_0x47912a;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x56365a(0x217)](_0x56365a(0x162))[_0x56365a(0x1c4)](_0x56365a(0x15e),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x4f4099=a3_0x47912a,_0x16ea88=document[_0x4f4099(0x217)](_0x4f4099(0x1c0)),_0x56b2ee=document[_0x4f4099(0x217)](_0x4f4099(0x1d6));_0x16ea88['innerHTML']='',_0x16ea88[_0x4f4099(0x1c1)](_0x56b2ee);for(let _0x1d42ca=0x0;_0x1d42ca<0x18;_0x1d42ca++){const _0x528136=document['createElement'](_0x4f4099(0x19c));_0x528136[_0x4f4099(0x198)]=_0x4f4099(0x1f9);if(_0x1d42ca>0x0)_0x528136[_0x4f4099(0x240)]=_0x4f4099(0x22f)+String(_0x1d42ca)[_0x4f4099(0x253)](0x2,'0')+_0x4f4099(0x250);_0x16ea88[_0x4f4099(0x1c1)](_0x528136);}}function renderDayRange(_0x341e20,_0x504d36){const _0x44ae1b=a3_0x47912a,_0x151258=document['getElementById']('daysHeaderTrack'),_0x578647=document[_0x44ae1b(0x217)](_0x44ae1b(0x1aa)),_0x8a3fd4=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x505162=new Date();_0x505162[_0x44ae1b(0x256)](0x0,0x0,0x0,0x0);const _0x10be77=getLocalDateStr(new Date());for(let _0x1fa1cc=_0x341e20;_0x1fa1cc<=_0x504d36;_0x1fa1cc++){const _0x5efbfa=new Date(_0x505162);_0x5efbfa[_0x44ae1b(0x226)](_0x5efbfa['getDate']()+_0x1fa1cc);const _0x29f51f=getLocalDateStr(_0x5efbfa);let _0x2de89a=_0x5efbfa[_0x44ae1b(0x17b)]()-0x1;if(_0x2de89a===-0x1)_0x2de89a=0x6;const _0x3e9d6f=_0x29f51f===_0x10be77,_0x1f19ae=document[_0x44ae1b(0x184)](_0x44ae1b(0x19c));_0x1f19ae[_0x44ae1b(0x198)]=_0x44ae1b(0x237)+(_0x3e9d6f?_0x44ae1b(0x220):''),_0x1f19ae['setAttribute'](_0x44ae1b(0x236),_0x29f51f),_0x1f19ae[_0x44ae1b(0x240)]=_0x44ae1b(0x175)+_0x8a3fd4[_0x2de89a]+_0x44ae1b(0x16e)+_0x5efbfa['getDate']()+_0x44ae1b(0x238),_0x151258[_0x44ae1b(0x1c1)](_0x1f19ae);const _0x3532f4=document[_0x44ae1b(0x184)]('div');_0x3532f4[_0x44ae1b(0x198)]=_0x44ae1b(0x168)+(_0x3e9d6f?'today':''),_0x3532f4['setAttribute']('data-date',_0x29f51f),_0x3532f4[_0x44ae1b(0x16b)](_0x44ae1b(0x23b),_0x2de89a),_0x578647[_0x44ae1b(0x1c1)](_0x3532f4);}}function reRenderBlocks(){const _0x51d189=a3_0x47912a;document[_0x51d189(0x176)](_0x51d189(0x1a7))[_0x51d189(0x20f)](_0x46c8fc=>{const _0x5b3e45=_0x51d189;_0x46c8fc[_0x5b3e45(0x176)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x5b3e45(0x20f)](_0x4fe10b=>_0x4fe10b['remove']());const _0x501e63=_0x46c8fc[_0x5b3e45(0x1a3)](_0x5b3e45(0x236)),_0x3c6a9d=parseInt(_0x46c8fc['getAttribute'](_0x5b3e45(0x23b))),_0x1ae7b3=Math[_0x5b3e45(0x1e7)](_0x46c8fc[_0x5b3e45(0x197)]);(availabilityPattern[_0x3c6a9d]||[])[_0x5b3e45(0x20f)](_0x465d2f=>{const _0x4fa2d3=_0x5b3e45,_0xea9445=document['createElement'](_0x4fa2d3(0x19c));_0xea9445[_0x4fa2d3(0x198)]=_0x4fa2d3(0x1bd),_0xea9445[_0x4fa2d3(0x167)][_0x4fa2d3(0x195)]=_0x465d2f*GRID_H+'px',_0xea9445[_0x4fa2d3(0x167)][_0x4fa2d3(0x186)]='-'+_0x1ae7b3+_0x4fa2d3(0x219)+_0x465d2f*GRID_H+'px',_0x46c8fc[_0x4fa2d3(0x1c1)](_0xea9445);});if(specialRanges[_0x5b3e45(0x16d)]>0x0){const _0x4c1477=new Date(_0x501e63+_0x5b3e45(0x252))[_0x5b3e45(0x178)](),_0x5c8af8=new Date(_0x501e63+'T23:59:59')[_0x5b3e45(0x178)]();specialRanges[_0x5b3e45(0x20f)](_0xd700e8=>{const _0x37329d=_0x5b3e45,_0x4d61c1=new Date(_0xd700e8[_0x37329d(0x192)])[_0x37329d(0x178)](),_0x28efcf=new Date(_0xd700e8[_0x37329d(0x224)])[_0x37329d(0x178)](),_0x1a3b11=Math[_0x37329d(0x1da)](_0x4c1477,_0x4d61c1),_0x4c0801=Math[_0x37329d(0x1ee)](_0x5c8af8,_0x28efcf);if(_0x1a3b11<_0x4c0801){const _0x42967e=(_0x1a3b11-_0x4c1477)/0x36ee80*GRID_H,_0x3346e0=(_0x4c0801-_0x1a3b11)/0x36ee80*GRID_H,_0x4e7e03=document[_0x37329d(0x184)](_0x37329d(0x19c));_0x3346e0>=23.5*GRID_H?(_0x4e7e03[_0x37329d(0x198)]=_0x37329d(0x24e),_0x4e7e03[_0x37329d(0x167)][_0x37329d(0x186)]='-'+_0x1ae7b3+'px\x200px'):(_0x4e7e03[_0x37329d(0x198)]=_0x37329d(0x1e2),_0x4e7e03['style'][_0x37329d(0x195)]=_0x42967e+'px',_0x4e7e03['style']['height']=_0x3346e0+'px',_0x4e7e03[_0x37329d(0x167)][_0x37329d(0x186)]='-'+_0x1ae7b3+_0x37329d(0x219)+_0x42967e+'px'),_0x46c8fc[_0x37329d(0x1c1)](_0x4e7e03);}});}renderEventsForColumn(_0x46c8fc,_0x501e63);});}function renderEventsForColumn(_0x14e553,_0x5c2734){const _0x1dfc4a=a3_0x47912a,_0x257372=sessions[_0x1dfc4a(0x1a9)](_0x5d0ac9=>_0x5d0ac9[_0x1dfc4a(0x255)]===_0x5c2734),_0x48297a=_0x257372[_0x1dfc4a(0x24b)](_0x5debc9=>{const _0x59a01e=_0x1dfc4a,[_0x5639af,_0x2d356a]=_0x5debc9[_0x59a01e(0x192)][_0x59a01e(0x228)](':')[_0x59a01e(0x24b)](Number),[_0xfcac56,_0x5de037]=_0x5debc9[_0x59a01e(0x224)][_0x59a01e(0x228)](':')[_0x59a01e(0x24b)](Number);return{'data':_0x5debc9,'start':_0x5639af*0x3c+_0x2d356a,'end':_0xfcac56*0x3c+_0x5de037,'colIndex':0x0};});_0x48297a['sort']((_0x27ba6b,_0x25c1f5)=>_0x27ba6b[_0x1dfc4a(0x192)]-_0x25c1f5[_0x1dfc4a(0x192)]||_0x25c1f5[_0x1dfc4a(0x224)]-_0x25c1f5['start']-(_0x27ba6b['end']-_0x27ba6b[_0x1dfc4a(0x192)]));const _0x15c062=[];_0x48297a[_0x1dfc4a(0x20f)](_0x33ce05=>{const _0x5a84e6=_0x1dfc4a;let _0x5f173c=![];for(let _0x16ca02=0x0;_0x16ca02<_0x15c062[_0x5a84e6(0x16d)];_0x16ca02++){const _0xc7c2e1=_0x15c062[_0x16ca02];if(_0x33ce05[_0x5a84e6(0x192)]>=_0xc7c2e1[_0xc7c2e1['length']-0x1]['end']){_0xc7c2e1[_0x5a84e6(0x235)](_0x33ce05),_0x33ce05[_0x5a84e6(0x18b)]=_0x16ca02,_0x5f173c=!![];break;}}!_0x5f173c&&(_0x15c062[_0x5a84e6(0x235)]([_0x33ce05]),_0x33ce05[_0x5a84e6(0x18b)]=_0x15c062['length']-0x1);}),_0x48297a['forEach'](_0x166345=>{const _0x93fc4c=_0x1dfc4a;let _0x4968ac=0x0;_0x48297a['forEach'](_0xedc097=>{const _0x2af7a3=a3_0x517c;if(Math[_0x2af7a3(0x1da)](_0x166345['start'],_0xedc097[_0x2af7a3(0x192)])<Math['min'](_0x166345['end'],_0xedc097['end'])&&_0xedc097[_0x2af7a3(0x18b)]>_0x4968ac)_0x4968ac=_0xedc097[_0x2af7a3(0x18b)];});const _0x29a9b0=_0x4968ac+0x1,_0x40c9c2=0x64/_0x29a9b0,_0x446494=_0x166345[_0x93fc4c(0x18b)]*_0x40c9c2,_0x44f8e7=document[_0x93fc4c(0x184)](_0x93fc4c(0x19c)),_0x13fe0c=_0x166345[_0x93fc4c(0x1c7)];let _0x53e633=_0x93fc4c(0x1cb);if(clients&&clients[_0x93fc4c(0x16d)]>0x0){const _0x4c007c=clients[_0x93fc4c(0x1df)](_0x1da192=>String(_0x1da192['id'])===String(_0x13fe0c[_0x93fc4c(0x233)]));if(_0x4c007c&&_0x4c007c['color'])_0x53e633=_0x4c007c['color'];}const _0x5783d4=_0x13fe0c[_0x93fc4c(0x1b9)]===_0x93fc4c(0x1fc),_0x41632b=_0x5783d4?0x1:0.45;_0x44f8e7['className']='event-card'+(_0x5783d4?'\x20status-completed':''),_0x44f8e7[_0x93fc4c(0x167)][_0x93fc4c(0x1d8)]=hexToRgba(_0x53e633,_0x41632b),_0x44f8e7['style'][_0x93fc4c(0x164)]=_0x53e633;const _0xe88492=_0x166345[_0x93fc4c(0x192)]/0x3c*GRID_H,_0x2826b5=(_0x166345[_0x93fc4c(0x224)]-_0x166345[_0x93fc4c(0x192)])/0x3c*GRID_H;_0x44f8e7['style'][_0x93fc4c(0x195)]=_0xe88492+'px',_0x44f8e7[_0x93fc4c(0x167)][_0x93fc4c(0x1e1)]=Math[_0x93fc4c(0x1da)](_0x2826b5,0x14)+'px',_0x44f8e7['style'][_0x93fc4c(0x1f3)]=_0x93fc4c(0x1a0)+_0x40c9c2+_0x93fc4c(0x223),_0x44f8e7[_0x93fc4c(0x167)][_0x93fc4c(0x193)]=_0x93fc4c(0x1a0)+_0x446494+_0x93fc4c(0x1d3),_0x44f8e7[_0x93fc4c(0x167)][_0x93fc4c(0x246)]=0xa+_0x166345[_0x93fc4c(0x18b)];if(_0x40c9c2<0x55)_0x44f8e7[_0x93fc4c(0x1ef)][_0x93fc4c(0x196)](_0x93fc4c(0x24d));let _0x3b40a0='';if(_0x13fe0c['seriesId'])_0x3b40a0+=_0x93fc4c(0x21a);if(_0x5783d4)_0x3b40a0+=_0x93fc4c(0x1f2);_0x44f8e7[_0x93fc4c(0x240)]=_0x93fc4c(0x1dd)+_0x13fe0c['start']+_0x93fc4c(0x208)+_0x13fe0c[_0x93fc4c(0x224)]+_0x93fc4c(0x1a1)+_0x3b40a0+_0x93fc4c(0x191),_0x44f8e7[_0x93fc4c(0x1f8)]=_0x3d8887=>{const _0x43d866=_0x93fc4c;_0x3d8887[_0x43d866(0x1ce)](),openDetails(_0x13fe0c);},_0x14e553['appendChild'](_0x44f8e7);});}function openAnalytics(){const _0x425a6=a3_0x47912a,_0x530898=document['querySelector']('.period-switch\x20.p-btn');setAnalyticsPeriod('week',_0x530898),openSheet(_0x425a6(0x1f5));}function setAnalyticsPeriod(_0x112d6a,_0x4d2828){const _0x398367=a3_0x47912a;currentAnPeriod=_0x112d6a,document[_0x398367(0x176)](_0x398367(0x232))[_0x398367(0x20f)](_0x26f809=>_0x26f809['classList'][_0x398367(0x1af)]('active'));if(_0x4d2828)_0x4d2828[_0x398367(0x1ef)][_0x398367(0x196)]('active');const _0x1f7fe2=document[_0x398367(0x217)](_0x398367(0x1d4));_0x1f7fe2[_0x398367(0x167)][_0x398367(0x218)]=_0x112d6a===_0x398367(0x15c)?'flex':'none';const _0x5f1e75=new Date();let _0x27e85a=new Date(),_0x2771a4=new Date();if(_0x112d6a===_0x398367(0x1f1))_0x27e85a=getStartOfWeek(_0x5f1e75),_0x2771a4=new Date(_0x27e85a),_0x2771a4[_0x398367(0x226)](_0x2771a4[_0x398367(0x1ac)]()+0x6);else{if(_0x112d6a===_0x398367(0x1ab))_0x27e85a=new Date(_0x5f1e75[_0x398367(0x22a)](),_0x5f1e75[_0x398367(0x22b)](),0x1),_0x2771a4=new Date(_0x5f1e75[_0x398367(0x22a)](),_0x5f1e75[_0x398367(0x22b)]()+0x1,0x0);else{!document[_0x398367(0x217)](_0x398367(0x20b))['value']&&(document['getElementById'](_0x398367(0x20b))[_0x398367(0x1a2)]=getLocalDateStr(_0x5f1e75),document['getElementById']('anEnd')[_0x398367(0x1a2)]=getLocalDateStr(_0x5f1e75));refreshAnalytics();return;}}document[_0x398367(0x217)](_0x398367(0x20b))['value']=getLocalDateStr(_0x27e85a),document[_0x398367(0x217)](_0x398367(0x230))[_0x398367(0x1a2)]=getLocalDateStr(_0x2771a4),refreshAnalytics();}function refreshAnalytics(){const _0x30c42e=a3_0x47912a,_0x10d8eb=document['getElementById']('anStart')[_0x30c42e(0x1a2)],_0x58e5d8=document[_0x30c42e(0x217)]('anEnd')[_0x30c42e(0x1a2)];if(!_0x10d8eb||!_0x58e5d8)return;const _0x4a8111=sessions[_0x30c42e(0x1a9)](_0x56f956=>_0x56f956[_0x30c42e(0x255)]>=_0x10d8eb&&_0x56f956['dateStr']<=_0x58e5d8&&_0x56f956[_0x30c42e(0x1b9)]!=='cancelled'),_0x38f28d=_0x4a8111[_0x30c42e(0x16d)],_0x3e45b5=_0x4a8111[_0x30c42e(0x1a9)](_0x53f7fb=>_0x53f7fb[_0x30c42e(0x1b9)]===_0x30c42e(0x1fc))[_0x30c42e(0x16d)],_0x92e6eb=_0x38f28d>0x0?Math[_0x30c42e(0x1e7)](_0x3e45b5/_0x38f28d*0x64):0x0;document['getElementById'](_0x30c42e(0x1cc))[_0x30c42e(0x203)]=_0x92e6eb+'%',document['getElementById'](_0x30c42e(0x1b2))[_0x30c42e(0x203)]=_0x3e45b5+_0x30c42e(0x24c)+_0x38f28d+_0x30c42e(0x16f);const _0x5aeebe=document[_0x30c42e(0x217)]('anDonutCircle'),_0x1c7936=0x2*Math['PI']*0x23,_0x579735=_0x1c7936-_0x92e6eb/0x64*_0x1c7936;_0x5aeebe['style']['strokeDashoffset']=_0x579735;const _0x35bdf0={};_0x4a8111[_0x30c42e(0x20f)](_0x1c84e9=>{const _0x4d72ab=_0x30c42e,_0x2231df=_0x1c84e9[_0x4d72ab(0x21f)]||'Unknown';if(!_0x35bdf0[_0x2231df]){const _0x15fdb1='#'+_0x2231df['toString']()[_0x4d72ab(0x1ae)](0x0,0x6);_0x35bdf0[_0x2231df]={'total':0x0,'done':0x0,'color':_0x15fdb1};}_0x35bdf0[_0x2231df][_0x4d72ab(0x19d)]++;if(_0x1c84e9[_0x4d72ab(0x1b9)]==='completed')_0x35bdf0[_0x2231df][_0x4d72ab(0x225)]++;});const _0xe6f368=document[_0x30c42e(0x217)](_0x30c42e(0x258));_0xe6f368[_0x30c42e(0x240)]='';const _0x18f72e=Object[_0x30c42e(0x254)](_0x35bdf0)[_0x30c42e(0x15f)]((_0xbe8857,_0x328b8b)=>_0x328b8b[0x1][_0x30c42e(0x19d)]-_0xbe8857[0x1]['total']);if(_0x18f72e[_0x30c42e(0x16d)]===0x0){_0xe6f368['innerHTML']=_0x30c42e(0x179);return;}_0x18f72e[_0x30c42e(0x20f)](([_0x1c4f6b,_0x362ef4])=>{const _0x508d0e=_0x30c42e,_0x40e4ca=Math['round'](_0x362ef4['done']/_0x362ef4[_0x508d0e(0x19d)]*0x64),_0x441dea=document[_0x508d0e(0x184)](_0x508d0e(0x19c));_0x441dea[_0x508d0e(0x198)]=_0x508d0e(0x1f4),_0x441dea['style'][_0x508d0e(0x164)]=_0x362ef4[_0x508d0e(0x1d9)],_0x441dea[_0x508d0e(0x240)]=_0x508d0e(0x1c2)+_0x1c4f6b[_0x508d0e(0x1ae)](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x362ef4[_0x508d0e(0x225)]+'</span>\x20/\x20'+_0x362ef4[_0x508d0e(0x19d)]+_0x508d0e(0x245)+_0x40e4ca+_0x508d0e(0x202),_0xe6f368[_0x508d0e(0x1c1)](_0x441dea);});}function openDetails(_0x3a3619){const _0x38dc9d=a3_0x47912a;currentSession=_0x3a3619;const _0x5bf577=new Date(_0x3a3619[_0x38dc9d(0x255)]),_0x33ce8f=_0x5bf577['toLocaleDateString'](_0x38dc9d(0x221),{'weekday':_0x38dc9d(0x21d),'day':_0x38dc9d(0x1f6),'month':'long'});document['getElementById'](_0x38dc9d(0x1c3))[_0x38dc9d(0x203)]=_0x33ce8f[_0x38dc9d(0x177)](0x0)[_0x38dc9d(0x229)]()+_0x33ce8f[_0x38dc9d(0x1b3)](0x1),document[_0x38dc9d(0x217)](_0x38dc9d(0x1e3))[_0x38dc9d(0x203)]=_0x3a3619['start']+'\x20-\x20'+_0x3a3619[_0x38dc9d(0x224)],document[_0x38dc9d(0x217)](_0x38dc9d(0x17d))[_0x38dc9d(0x203)]=_0x3a3619[_0x38dc9d(0x171)]||_0x38dc9d(0x207);const _0x14ed59=document[_0x38dc9d(0x217)](_0x38dc9d(0x18e)),_0x26c33a=document['getElementById'](_0x38dc9d(0x239)),_0x21853b=_0x26c33a[_0x38dc9d(0x181)](_0x38dc9d(0x17e)),_0x4da95e=_0x26c33a[_0x38dc9d(0x181)](_0x38dc9d(0x19f)),_0x2ce063=document['getElementById']('cancelHint');if(_0x3a3619['status']===_0x38dc9d(0x1fc))_0x14ed59[_0x38dc9d(0x203)]=_0x38dc9d(0x17a),_0x14ed59['style'][_0x38dc9d(0x1d9)]=_0x38dc9d(0x1b1),_0x26c33a[_0x38dc9d(0x167)][_0x38dc9d(0x218)]=_0x38dc9d(0x214);else{_0x14ed59[_0x38dc9d(0x203)]='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x14ed59[_0x38dc9d(0x167)][_0x38dc9d(0x1d9)]=_0x38dc9d(0x1a8),_0x26c33a[_0x38dc9d(0x167)][_0x38dc9d(0x218)]=_0x38dc9d(0x209);const _0x531ab0=new Date(_0x3a3619[_0x38dc9d(0x255)]+'T'+_0x3a3619['start']),_0x4489da=new Date(),_0x578444=(_0x531ab0-_0x4489da)/(0x3e8*0x3c*0x3c),_0x171b7d=coachProfiles[_0x3a3619[_0x38dc9d(0x21f)]]&&coachProfiles[_0x3a3619[_0x38dc9d(0x21f)]][_0x38dc9d(0x1d5)]?parseInt(coachProfiles[_0x3a3619[_0x38dc9d(0x21f)]]['cancel_window']):0x18;if(_0x171b7d===0x0||_0x578444>=_0x171b7d)_0x21853b['style'][_0x38dc9d(0x218)]=_0x38dc9d(0x209),_0x4da95e['style'][_0x38dc9d(0x218)]='block',_0x2ce063['style'][_0x38dc9d(0x218)]=_0x38dc9d(0x214);else{_0x21853b[_0x38dc9d(0x167)]['display']=_0x38dc9d(0x214),_0x4da95e[_0x38dc9d(0x167)][_0x38dc9d(0x218)]=_0x38dc9d(0x214),_0x2ce063['style'][_0x38dc9d(0x218)]=_0x38dc9d(0x209);let _0x44a0e7=_0x171b7d===0x0?_0x38dc9d(0x18d):_0x38dc9d(0x199)+_0x171b7d+'\x20—á.';_0x2ce063['textContent']=_0x38dc9d(0x1fa)+_0x44a0e7+_0x38dc9d(0x170);}}document[_0x38dc9d(0x217)]('overlay')[_0x38dc9d(0x1ef)][_0x38dc9d(0x196)]('active'),document['getElementById'](_0x38dc9d(0x1eb))[_0x38dc9d(0x1ef)]['add']('open');}function closeAllSheets(){const _0x4eef10=a3_0x47912a;document[_0x4eef10(0x217)](_0x4eef10(0x165))[_0x4eef10(0x1ef)][_0x4eef10(0x1af)](_0x4eef10(0x1d7)),document['querySelectorAll'](_0x4eef10(0x1e9))[_0x4eef10(0x20f)](_0x430825=>_0x430825['classList'][_0x4eef10(0x1af)](_0x4eef10(0x19b)));}function openSheet(_0x49c953){const _0x168141=a3_0x47912a;document['getElementById'](_0x168141(0x165))[_0x168141(0x1ef)][_0x168141(0x196)](_0x168141(0x1d7)),document[_0x168141(0x217)](_0x49c953)[_0x168141(0x1ef)][_0x168141(0x196)](_0x168141(0x19b));}function getLocalDateStr(_0x44c7fa){const _0x5dcab5=a3_0x47912a,_0xb0352e=_0x44c7fa[_0x5dcab5(0x22a)](),_0x14a1f4=String(_0x44c7fa[_0x5dcab5(0x22b)]()+0x1)[_0x5dcab5(0x253)](0x2,'0'),_0x5217c2=String(_0x44c7fa['getDate']())[_0x5dcab5(0x253)](0x2,'0');return _0xb0352e+'-'+_0x14a1f4+'-'+_0x5217c2;}function getStartOfWeek(_0x164ace){const _0x5674f1=a3_0x47912a,_0x557781=new Date(_0x164ace),_0xad24b4=_0x557781[_0x5674f1(0x17b)](),_0x4162a7=_0x557781[_0x5674f1(0x1ac)]()-_0xad24b4+(_0xad24b4===0x0?-0x6:0x1);return _0x557781[_0x5674f1(0x226)](_0x4162a7),_0x557781[_0x5674f1(0x256)](0x0,0x0,0x0,0x0),_0x557781;}function scrollToToday(){const _0xbc52a7=getLocalDateStr(new Date());setTimeout(()=>{const _0x6bdeea=a3_0x517c,_0x50baee=document[_0x6bdeea(0x181)](_0x6bdeea(0x20a)+_0xbc52a7+'\x22]');if(_0x50baee){const _0x44018e=document['getElementById'](_0x6bdeea(0x162)),_0x5aead7=_0x50baee[_0x6bdeea(0x197)]-_0x44018e[_0x6bdeea(0x25a)]/0x2+_0x50baee[_0x6bdeea(0x1b7)]/0x2;_0x44018e[_0x6bdeea(0x1b0)]({'left':_0x5aead7,'behavior':'auto'}),_0x44018e[_0x6bdeea(0x244)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x3feb64=a3_0x47912a,_0x541c03=new Date(),_0x369da8=document[_0x3feb64(0x217)](_0x3feb64(0x1c5)),_0x1c72de=document[_0x3feb64(0x217)]('timeLineBadge'),_0x5dd766=(_0x541c03[_0x3feb64(0x259)]()*0x3c+_0x541c03[_0x3feb64(0x15d)]())/0x3c*GRID_H;_0x369da8['style'][_0x3feb64(0x195)]=_0x5dd766+'px',_0x369da8[_0x3feb64(0x167)][_0x3feb64(0x218)]=_0x3feb64(0x209),_0x1c72de[_0x3feb64(0x167)][_0x3feb64(0x195)]=_0x5dd766+'px',_0x1c72de[_0x3feb64(0x167)][_0x3feb64(0x218)]=_0x3feb64(0x209),_0x1c72de[_0x3feb64(0x203)]=String(_0x541c03[_0x3feb64(0x259)]())['padStart'](0x2,'0')+':'+String(_0x541c03['getMinutes']())[_0x3feb64(0x253)](0x2,'0');}function onScroll(){const _0x50e835=a3_0x47912a,_0xd39c28=document['getElementById'](_0x50e835(0x162)),_0x1b57fd=document['querySelectorAll'](_0x50e835(0x247));for(let _0x1eda33 of _0x1b57fd)if(_0x1eda33[_0x50e835(0x197)]>=_0xd39c28['scrollLeft']){const _0x418270=new Date(_0x1eda33[_0x50e835(0x1a3)]('data-date'));document['getElementById'](_0x50e835(0x1ea))[_0x50e835(0x203)]=_0x418270[_0x50e835(0x161)]('ru',{'month':_0x50e835(0x21d)})['toUpperCase']()+'\x20'+_0x418270[_0x50e835(0x22a)]();break;}}function showToast(_0x4a7e52){const _0x263106=a3_0x47912a,_0x398f21=document[_0x263106(0x217)]('toast');_0x398f21[_0x263106(0x203)]=_0x4a7e52,_0x398f21['classList'][_0x263106(0x196)](_0x263106(0x1b8)),setTimeout(()=>_0x398f21[_0x263106(0x1ef)][_0x263106(0x1af)](_0x263106(0x1b8)),0x7d0);}function handleInfiniteScroll(){const _0xc517ec=a3_0x47912a,_0x62cb5f=document[_0xc517ec(0x217)]('matrixViewport'),_0x37dbdd=_0x62cb5f[_0xc517ec(0x22c)],_0x4a001f=_0x62cb5f[_0xc517ec(0x1e8)],_0x1f9e09=_0x62cb5f[_0xc517ec(0x25a)];if(_0x4a001f-(_0x37dbdd+_0x1f9e09)<0x12c){const _0x421530=endOffset;endOffset+=0xe,renderDayRange(_0x421530+0x1,endOffset),reRenderBlocks();}if(_0x37dbdd<0x12c){const _0x45f92d=startOffset;startOffset-=0xe,prependDays(startOffset,_0x45f92d-0x1),_0x62cb5f[_0xc517ec(0x22c)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x527100,_0x3a58d4){const _0x57a0d7=a3_0x47912a,_0x37b58e=document[_0x57a0d7(0x217)]('daysHeaderTrack'),_0x3e90d3=document['getElementById'](_0x57a0d7(0x1aa)),_0x16d594=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x3950c9=new Date();_0x3950c9[_0x57a0d7(0x256)](0x0,0x0,0x0,0x0);const _0x3d6960=getLocalDateStr(new Date()),_0x2433de=document['createDocumentFragment'](),_0x28f958=document['createDocumentFragment']();for(let _0x3601f0=_0x527100;_0x3601f0<=_0x3a58d4;_0x3601f0++){const _0x17c2a4=new Date(_0x3950c9);_0x17c2a4[_0x57a0d7(0x226)](_0x17c2a4[_0x57a0d7(0x1ac)]()+_0x3601f0);const _0x4aecad=getLocalDateStr(_0x17c2a4);let _0x3721b5=_0x17c2a4[_0x57a0d7(0x17b)]()-0x1;if(_0x3721b5===-0x1)_0x3721b5=0x6;const _0x1ae2a4=_0x4aecad===_0x3d6960,_0x2c8838=document['createElement']('div');_0x2c8838[_0x57a0d7(0x198)]='day-col-header\x20'+(_0x1ae2a4?_0x57a0d7(0x220):''),_0x2c8838[_0x57a0d7(0x16b)]('data-date',_0x4aecad),_0x2c8838[_0x57a0d7(0x240)]=_0x57a0d7(0x175)+_0x16d594[_0x3721b5]+_0x57a0d7(0x16e)+_0x17c2a4[_0x57a0d7(0x1ac)]()+_0x57a0d7(0x238),_0x2433de[_0x57a0d7(0x1c1)](_0x2c8838);const _0x45e13e=document[_0x57a0d7(0x184)](_0x57a0d7(0x19c));_0x45e13e[_0x57a0d7(0x198)]=_0x57a0d7(0x168)+(_0x1ae2a4?'today':''),_0x45e13e[_0x57a0d7(0x16b)](_0x57a0d7(0x236),_0x4aecad),_0x45e13e['setAttribute'](_0x57a0d7(0x23b),_0x3721b5),_0x28f958[_0x57a0d7(0x1c1)](_0x45e13e);}_0x37b58e[_0x57a0d7(0x169)](_0x2433de,_0x37b58e['firstChild']),_0x3e90d3[_0x57a0d7(0x169)](_0x28f958,_0x3e90d3[_0x57a0d7(0x181)](_0x57a0d7(0x1a7)));}function hexToRgba(_0x596d33,_0x32078d){const _0x839518=a3_0x47912a;let _0x483f0b;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x839518(0x17f)](_0x596d33))return _0x483f0b=_0x596d33['substring'](0x1)[_0x839518(0x228)](''),_0x483f0b[_0x839518(0x16d)]==0x3&&(_0x483f0b=[_0x483f0b[0x0],_0x483f0b[0x0],_0x483f0b[0x1],_0x483f0b[0x1],_0x483f0b[0x2],_0x483f0b[0x2]]),_0x483f0b='0x'+_0x483f0b[_0x839518(0x1fd)](''),_0x839518(0x1e4)+[_0x483f0b>>0x10&0xff,_0x483f0b>>0x8&0xff,_0x483f0b&0xff]['join'](',')+','+_0x32078d+')';return'rgba(10,\x20132,\x20255,\x20'+_0x32078d+')';}let confirmResolver=null;function showCustomConfirm(_0xc7f0a8,_0x3b9e66,_0x491546=!![]){const _0x39bccd=a3_0x47912a;document[_0x39bccd(0x217)](_0x39bccd(0x1b6))[_0x39bccd(0x203)]=_0xc7f0a8,document[_0x39bccd(0x217)](_0x39bccd(0x1d1))['textContent']=_0x3b9e66;const _0x3ba792=document[_0x39bccd(0x217)](_0x39bccd(0x18c));return _0x491546?(_0x3ba792[_0x39bccd(0x167)]['color']=_0x39bccd(0x1db),_0x3ba792[_0x39bccd(0x167)][_0x39bccd(0x210)]=_0x39bccd(0x182)):(_0x3ba792[_0x39bccd(0x167)]['color']=_0x39bccd(0x1cb),_0x3ba792['style'][_0x39bccd(0x210)]='600'),new Promise(_0x7397d=>{const _0x3736ab=_0x39bccd;confirmResolver=_0x7397d,document[_0x3736ab(0x217)]('customConfirm')[_0x3736ab(0x1ef)][_0x3736ab(0x196)]('visible');});}function resolveCustomConfirm(_0x55a1f7){const _0x40bfee=a3_0x47912a;document[_0x40bfee(0x217)]('customConfirm')[_0x40bfee(0x1ef)][_0x40bfee(0x1af)](_0x40bfee(0x231));if(confirmResolver)confirmResolver(_0x55a1f7);}function a3_0x517c(_0x455818,_0x2ea1df){_0x455818=_0x455818-0x15c;const _0x3cf194=a3_0x1874();let _0x51a867=_0x3cf194[_0x455818];return _0x51a867;}async function tryCancelCurrentSession(){const _0x2fc335=a3_0x47912a;if(!currentSession)return;const _0x47a316=await showCustomConfirm(_0x2fc335(0x242),_0x2fc335(0x211),!![]);if(!_0x47a316)return;const _0x2b0cbc=currentSession;closeAllSheets(),sessions=sessions[_0x2fc335(0x1a9)](_0x444626=>_0x444626['id']!==_0x2b0cbc['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x2fc335(0x1f0)]();try{const _0x1a74bb=window[_0x2fc335(0x18a)]?.[_0x2fc335(0x20e)],_0x185c00=await fetch(API_URL,{'method':_0x2fc335(0x190),'body':JSON[_0x2fc335(0x1fb)]({'action':_0x2fc335(0x1bf),'init_data':_0x1a74bb?.[_0x2fc335(0x1e0)]||'','coachId':_0x2b0cbc[_0x2fc335(0x21f)],'dateStr':_0x2b0cbc[_0x2fc335(0x255)],'sessionId':_0x2b0cbc['id']})});if(_0x185c00['ok'])DataManager[_0x2fc335(0x16c)]();}catch(_0x55c2a8){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}function a3_0x1874(){const _0x59fb=['offClick','.day-column','var(--acc-blue)','filter','gridColumns','month','getDate','#050505','substr','remove','scrollTo','var(--acc-green)','anTotalStats','slice','reschedule','rs-time-btn','ccTitle','offsetWidth','show','status','all','.rs-date-chip','8sGgtFf','blocked-slot\x20stripe-bg','uc_client_sessions','client_cancel','timeColumn','appendChild','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','detDate','addEventListener','globalTimeLine','setItem','data','applyData','router.html','Error\x20setting\x20back\x20button:','#0a84ff','anPercent','7348635uWQTsR','stopPropagation','parse','rescheduleSheet','ccText','clients','%\x20+\x202px)','anCustomDates','cancel_window','timeLineBadge','active','backgroundColor','color','max','#ff453a','startsWith','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','href','find','initData','height','blocked-range-part\x20stripe-bg','detTime','rgba(','rs-date-chip','rsDatesTrack','round','scrollWidth','.sheet','headerMonth','detailsSheet','rsSlotsGrid','then','min','classList','now','week','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','width','client-stat-card','analyticsSheet','numeric','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','onclick','time-label','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','stringify','completed','join','coach_profiles','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','apply','ranges','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','</div><div\x20class=\x22rs-day-num\x22>','floor','json','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','\x20-\x20','block','.day-col-header[data-date=\x22','anStart','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','get_slots','WebApp','forEach','fontWeight','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','settings','37886481oJHJfU','none','search','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','getElementById','display','px\x20-','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','calendar','6651762DcruDG','long','firstChild','coachId','today','ru-RU','button','%\x20-\x204px)','end','done','setDate','<div\x20class=\x22rs-day-name\x22>','split','toUpperCase','getFullYear','getMonth','scrollLeft','setMonth','keys','<span>','anEnd','visible','.period-switch\x20.p-btn','clientId','33dZdafk','push','data-date','day-col-header\x20','</div>','cancelContainer','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','data-day-idx','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','4679896aKwSnd','error','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','innerHTML','(((.+)+)+)+$','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','location','scrollTop','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','zIndex','.day-col-header','ready','toString','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','map','\x20–∏–∑\x20','mini','day-off-overlay\x20stripe-bg','3931249rwhoHv',':00</span>','\x20–≤\x20','T00:00:00','padStart','entries','dateStr','setHours','client_load','analyticsList','getHours','clientWidth','custom','getMinutes','scroll','sort','toLocaleDateString','toLocaleString','matrixViewport','sid','borderLeftColor','overlay','pattern','style','day-column\x20','insertBefore','setHeaderColor','setAttribute','saveLocally','length','</div><div\x20class=\x22dch-num\x22>','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','note','log','uc_client_list','expand','<div\x20class=\x22dch-day\x22>','querySelectorAll','charAt','getTime','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','getDay','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','detNote','.btn-cancel','test','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','querySelector','600','setBackgroundColor','createElement','getItem','backgroundPosition','exceptions','1238855TiOCsY','Critical\x20TMA\x20Error:','Telegram','colIndex','ccYesBtn','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','detStatus','uc_client_settings','POST','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','start','left','Error\x20setting\x20color:','top','add','offsetLeft','className','–∑–∞\x20','238058HyicYx','open','div','total','disableVerticalSwipes','.btn-reschedule','calc(','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','value','getAttribute','BackButton','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'];a3_0x1874=function(){return _0x59fb;};return a3_0x1874();}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x4c1e68=a3_0x47912a;if(!currentSession)return;document[_0x4c1e68(0x217)]('detailsSheet')[_0x4c1e68(0x1ef)][_0x4c1e68(0x1af)](_0x4c1e68(0x19b)),document[_0x4c1e68(0x217)](_0x4c1e68(0x1d0))[_0x4c1e68(0x1ef)][_0x4c1e68(0x196)](_0x4c1e68(0x19b));const _0x5010cc=document[_0x4c1e68(0x217)](_0x4c1e68(0x1e6)),_0x1c2075=document[_0x4c1e68(0x217)](_0x4c1e68(0x1ec));_0x5010cc[_0x4c1e68(0x240)]='',_0x1c2075['innerHTML']=_0x4c1e68(0x24a);const [_0x389422,_0x14e588]=currentSession[_0x4c1e68(0x192)][_0x4c1e68(0x228)](':')['map'](Number),[_0x44dd91,_0x2d2668]=currentSession[_0x4c1e68(0x224)][_0x4c1e68(0x228)](':')[_0x4c1e68(0x24b)](Number),_0x24a22b=_0x44dd91*0x3c+_0x2d2668-(_0x389422*0x3c+_0x14e588);try{const _0x4ba324=window['Telegram']?.[_0x4c1e68(0x20e)],_0x5a1945=await fetch(API_URL,{'method':_0x4c1e68(0x190),'body':JSON[_0x4c1e68(0x1fb)]({'action':_0x4c1e68(0x20d),'coachId':currentSession[_0x4c1e68(0x21f)],'duration':_0x24a22b,'init_data':_0x4ba324?.['initData']||'','excludeSessionId':currentSession['id']})}),_0xd78c46=await _0x5a1945[_0x4c1e68(0x206)]();_0xd78c46['ok']&&_0xd78c46[_0x4c1e68(0x1c7)]?(availableSlotsCache=_0xd78c46[_0x4c1e68(0x1c7)],renderRescheduleDates()):_0x1c2075[_0x4c1e68(0x240)]=_0x4c1e68(0x17c);}catch(_0x7cbeae){_0x1c2075[_0x4c1e68(0x240)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x26a9fc=a3_0x47912a,_0x62eab5=document[_0x26a9fc(0x217)](_0x26a9fc(0x1e6));_0x62eab5[_0x26a9fc(0x240)]='';const _0x1d1649=Object[_0x26a9fc(0x22e)](availableSlotsCache)[_0x26a9fc(0x15f)](),_0x2b3d6b=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x1d1649[_0x26a9fc(0x16d)]===0x0){document[_0x26a9fc(0x217)](_0x26a9fc(0x1ec))[_0x26a9fc(0x240)]=_0x26a9fc(0x1ff);return;}_0x1d1649[_0x26a9fc(0x20f)]((_0x1b40ee,_0x8baaa6)=>{const _0x11fb46=_0x26a9fc,_0x45602c=new Date(_0x1b40ee),_0x42c6d9=_0x2b3d6b[_0x45602c[_0x11fb46(0x17b)]()],_0x217904=_0x45602c[_0x11fb46(0x1ac)](),_0x1c8383=document[_0x11fb46(0x184)](_0x11fb46(0x19c));_0x1c8383['className']=_0x11fb46(0x1e5);if(_0x8baaa6===0x0)_0x1c8383['classList']['add'](_0x11fb46(0x1d7));_0x1c8383[_0x11fb46(0x240)]=_0x11fb46(0x227)+_0x42c6d9+_0x11fb46(0x204)+_0x217904+_0x11fb46(0x238),_0x1c8383[_0x11fb46(0x1f8)]=()=>selectRsDate(_0x1b40ee,_0x1c8383),_0x62eab5['appendChild'](_0x1c8383);}),selectRsDate(_0x1d1649[0x0],_0x62eab5[_0x26a9fc(0x21e)]);}function selectRsDate(_0x15da12,_0x6e71c){const _0x34b5fe=a3_0x47912a;selectedRsDate=_0x15da12,document[_0x34b5fe(0x176)](_0x34b5fe(0x1bb))[_0x34b5fe(0x20f)](_0x15f87c=>_0x15f87c[_0x34b5fe(0x1ef)]['remove'](_0x34b5fe(0x1d7)));if(_0x6e71c)_0x6e71c['classList'][_0x34b5fe(0x196)](_0x34b5fe(0x1d7));const _0x252687=document[_0x34b5fe(0x217)](_0x34b5fe(0x1ec));_0x252687[_0x34b5fe(0x240)]='';const _0x32fd87=availableSlotsCache[_0x15da12]||[];if(_0x32fd87[_0x34b5fe(0x16d)]===0x0){_0x252687[_0x34b5fe(0x240)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x32fd87[_0x34b5fe(0x20f)](_0x7e122c=>{const _0x1e3385=_0x34b5fe,_0x10e173=document[_0x1e3385(0x184)](_0x1e3385(0x222));_0x10e173['className']=_0x1e3385(0x1b5),_0x10e173['textContent']=_0x7e122c,_0x10e173[_0x1e3385(0x1f8)]=()=>confirmReschedule(_0x7e122c),_0x252687[_0x1e3385(0x1c1)](_0x10e173);});}async function confirmReschedule(_0x1079f3){const _0x42540f=a3_0x47912a,_0x3191d4=new Date(selectedRsDate),_0x28fa33=_0x3191d4[_0x42540f(0x160)](_0x42540f(0x221),{'day':'numeric','month':_0x42540f(0x21d)}),_0xe94500=await showCustomConfirm(_0x42540f(0x23a),_0x42540f(0x23c)+_0x28fa33+_0x42540f(0x251)+_0x1079f3+'?',![]);if(!_0xe94500)return;closeAllSheets(),showToast(_0x42540f(0x20c)),lastUserActionTime=Date[_0x42540f(0x1f0)]();const _0xa9a2a4=currentSession['dateStr'],_0x412455=currentSession['id'],[_0x48d730,_0x10e423]=currentSession[_0x42540f(0x192)][_0x42540f(0x228)](':')[_0x42540f(0x24b)](Number),[_0x5c6e57,_0x43ec1b]=currentSession[_0x42540f(0x224)][_0x42540f(0x228)](':')[_0x42540f(0x24b)](Number),_0x4ab86b=_0x5c6e57*0x3c+_0x43ec1b-(_0x48d730*0x3c+_0x10e423),[_0x485160,_0x52c7fe]=_0x1079f3['split'](':')[_0x42540f(0x24b)](Number),_0x33e5b3=_0x485160*0x3c+_0x52c7fe+_0x4ab86b,_0x4f5d2c=Math[_0x42540f(0x205)](_0x33e5b3/0x3c),_0x33ff6e=_0x33e5b3%0x3c,_0x1b7d76=String(_0x4f5d2c)[_0x42540f(0x253)](0x2,'0')+':'+String(_0x33ff6e)[_0x42540f(0x253)](0x2,'0'),_0x57662b=sessions['findIndex'](_0x1e094e=>_0x1e094e['id']===_0x412455);_0x57662b!==-0x1&&(sessions[_0x57662b]['dateStr']=selectedRsDate,sessions[_0x57662b][_0x42540f(0x192)]=_0x1079f3,sessions[_0x57662b][_0x42540f(0x224)]=_0x1b7d76,reRenderBlocks());try{const _0x1f9777=window[_0x42540f(0x18a)]?.[_0x42540f(0x20e)],_0x56460c=await fetch(API_URL,{'method':_0x42540f(0x190),'body':JSON[_0x42540f(0x1fb)]({'action':_0x42540f(0x1b4),'init_data':_0x1f9777?.[_0x42540f(0x1e0)]||'','oldSessionId':_0x412455,'oldDate':_0xa9a2a4,'newDate':selectedRsDate,'newTime':_0x1079f3,'coachId':currentSession[_0x42540f(0x21f)]})}),_0x5dce1c=await _0x56460c[_0x42540f(0x206)]();!_0x5dce1c['ok']?(showToast(_0x42540f(0x1a5)),DataManager['syncLoad']()):(showToast(_0x42540f(0x23f)),DataManager[_0x42540f(0x16c)]());}catch(_0x532e3c){showToast(_0x42540f(0x216));}}document['addEventListener']('DOMContentLoaded',init);