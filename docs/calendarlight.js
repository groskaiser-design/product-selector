const a3_0x136be4=a3_0x15f5;(function(_0x2883b5,_0x2b060a){const _0x32e6e0=a3_0x15f5,_0x461c73=_0x2883b5();while(!![]){try{const _0x477c84=parseInt(_0x32e6e0(0x149))/0x1+-parseInt(_0x32e6e0(0x1c3))/0x2*(-parseInt(_0x32e6e0(0x124))/0x3)+parseInt(_0x32e6e0(0x1ae))/0x4+parseInt(_0x32e6e0(0x173))/0x5*(-parseInt(_0x32e6e0(0xf3))/0x6)+parseInt(_0x32e6e0(0x19b))/0x7+parseInt(_0x32e6e0(0x1cb))/0x8*(-parseInt(_0x32e6e0(0x186))/0x9)+-parseInt(_0x32e6e0(0x100))/0xa*(parseInt(_0x32e6e0(0x16e))/0xb);if(_0x477c84===_0x2b060a)break;else _0x461c73['push'](_0x461c73['shift']());}catch(_0x2246e1){_0x461c73['push'](_0x461c73['shift']());}}}(a3_0x39a5,0x2ab56));const APP_VERSION=a3_0x136be4(0x11d),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c,KEY_SESSIONS=a3_0x136be4(0x13f),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS='uc_client_list';let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x136be4(0x114),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x48aacb=a3_0x136be4,_0x359d50=(function(){let _0x19865d=!![];return function(_0x4aaa76,_0x130374){const _0x52d8c0=_0x19865d?function(){if(_0x130374){const _0x47aa47=_0x130374['apply'](_0x4aaa76,arguments);return _0x130374=null,_0x47aa47;}}:function(){};return _0x19865d=![],_0x52d8c0;};}()),_0x2cec41=_0x359d50(this,function(){const _0x377b48=a3_0x15f5;return _0x2cec41[_0x377b48(0x1bb)]()[_0x377b48(0xe4)](_0x377b48(0x139))[_0x377b48(0x1bb)]()[_0x377b48(0xf9)](_0x2cec41)['search'](_0x377b48(0x139));});_0x2cec41();try{const _0x3c6bf2=window['Telegram']?.[_0x48aacb(0x19a)];if(!_0x3c6bf2)return;_0x3c6bf2[_0x48aacb(0x175)](),_0x3c6bf2[_0x48aacb(0x181)]();try{_0x3c6bf2[_0x48aacb(0x14e)]('#050505'),_0x3c6bf2[_0x48aacb(0x185)]&&_0x3c6bf2[_0x48aacb(0x185)]('#050505');}catch(_0x75ecf4){console[_0x48aacb(0x109)](_0x48aacb(0x14d),_0x75ecf4);}try{_0x3c6bf2[_0x48aacb(0x193)]&&(_0x3c6bf2[_0x48aacb(0x193)][_0x48aacb(0x156)](),_0x3c6bf2[_0x48aacb(0x193)]['offClick'](),_0x3c6bf2[_0x48aacb(0x193)][_0x48aacb(0x135)](function(){window['location']['href']='router.html';}));}catch(_0x531466){console[_0x48aacb(0x109)](_0x48aacb(0x1b2),_0x531466);}try{if(_0x3c6bf2['disableVerticalSwipes'])_0x3c6bf2['disableVerticalSwipes']();}catch(_0x29d886){}}catch(_0x8a5583){console[_0x48aacb(0x107)](_0x48aacb(0x15f),_0x8a5583);}}());function isAdmin(){const _0x3076d7=a3_0x136be4;try{const _0x3ecdb1=Number(window['Telegram']?.[_0x3076d7(0x19a)]?.['initDataUnsafe']?.['user']?.['id']);return _0x3ecdb1===0xbaf7174;}catch(_0x1db1cd){return![];}}const DataManager={'saveLocally'(){const _0x229731=a3_0x136be4;try{localStorage[_0x229731(0x150)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x229731(0x150)](KEY_CLIENTS,JSON[_0x229731(0x13b)](clients)),localStorage[_0x229731(0x150)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0xa01698){}},'loadLocal'(){const _0x5b7e20=a3_0x136be4;try{const _0x1512ff=localStorage[_0x5b7e20(0x11c)](KEY_SESSIONS);if(_0x1512ff)sessions=JSON['parse'](_0x1512ff);const _0x41da86=localStorage[_0x5b7e20(0x11c)](KEY_CLIENTS);if(_0x41da86)clients=JSON['parse'](_0x41da86);const _0x12cda4=localStorage[_0x5b7e20(0x11c)](KEY_SETTINGS);if(_0x12cda4){const _0x1674ab=JSON[_0x5b7e20(0x12e)](_0x12cda4);if(_0x1674ab[_0x5b7e20(0x1a6)])availabilityPattern=_0x1674ab[_0x5b7e20(0x1a6)];if(_0x1674ab[_0x5b7e20(0x19e)])specialRanges=_0x1674ab[_0x5b7e20(0x19e)];if(_0x1674ab[_0x5b7e20(0x101)])dateExceptions=_0x1674ab[_0x5b7e20(0x101)];}}catch(_0x78fdc1){}},async 'syncLoad'(){const _0x201105=a3_0x136be4,_0x26bd91=new Date(),_0x52f502=_0x26bd91[_0x201105(0x127)]()+'-'+String(_0x26bd91['getMonth']()+0x1)[_0x201105(0x191)](0x2,'0'),_0x56e2ba=new Date(_0x26bd91);_0x56e2ba[_0x201105(0x14f)](_0x26bd91['getMonth']()+0x1);const _0x46fd23=_0x56e2ba[_0x201105(0x127)]()+'-'+String(_0x56e2ba[_0x201105(0x104)]()+0x1)['padStart'](0x2,'0'),_0x5ab01a=Date[_0x201105(0x190)]();try{const _0x30b36f=window[_0x201105(0x113)]?.[_0x201105(0x19a)],_0x22a973=_0x30b36f?.[_0x201105(0x199)]||'',[_0x83feaa,_0x4a57e8]=await Promise[_0x201105(0x143)]([fetch(API_URL,{'method':_0x201105(0x116),'body':JSON[_0x201105(0x13b)]({'action':_0x201105(0x172),'init_data':_0x22a973,'month_str':_0x52f502})})['then'](_0x17cb9b=>_0x17cb9b[_0x201105(0x17d)]()),fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':'client_load','init_data':_0x22a973,'month_str':_0x46fd23})})[_0x201105(0x15a)](_0x3aa765=>_0x3aa765['json']())]);if(lastUserActionTime>_0x5ab01a){console['log'](_0x201105(0x121));return;}if(_0x83feaa['ok'])this[_0x201105(0x1a7)](_0x83feaa[_0x201105(0xe6)],_0x52f502);if(_0x4a57e8['ok'])this[_0x201105(0x1a7)](_0x4a57e8[_0x201105(0xe6)],_0x46fd23);this[_0x201105(0x188)]();}catch(_0x39b0f8){}},'applyData'(_0x1dc88b,_0x31269d){const _0x5cea1c=a3_0x136be4;if(!_0x1dc88b)return;if(_0x1dc88b[_0x5cea1c(0x11f)]){if(_0x1dc88b[_0x5cea1c(0x11f)][_0x5cea1c(0x1a6)])availabilityPattern=_0x1dc88b[_0x5cea1c(0x11f)]['pattern'];if(_0x1dc88b[_0x5cea1c(0x11f)][_0x5cea1c(0x19e)])specialRanges=_0x1dc88b[_0x5cea1c(0x11f)]['ranges'];if(_0x1dc88b[_0x5cea1c(0x11f)][_0x5cea1c(0x101)])dateExceptions=_0x1dc88b[_0x5cea1c(0x11f)][_0x5cea1c(0x101)];}if(_0x1dc88b[_0x5cea1c(0x1ad)]&&Array[_0x5cea1c(0x17e)](_0x1dc88b[_0x5cea1c(0x1ad)]))clients=_0x1dc88b[_0x5cea1c(0x1ad)];_0x1dc88b[_0x5cea1c(0x1c5)]&&(coachProfiles={...coachProfiles,..._0x1dc88b['coach_profiles']}),_0x1dc88b['calendar']&&(sessions=sessions[_0x5cea1c(0x119)](_0x1cb47e=>!_0x1cb47e['dateStr'][_0x5cea1c(0x1b9)](_0x31269d)),Object[_0x5cea1c(0xdd)](_0x1dc88b['calendar'])[_0x5cea1c(0x1c9)](_0x19f870=>{const _0x1e76c3=_0x5cea1c,_0x19a941=_0x1dc88b[_0x1e76c3(0x106)][_0x19f870];_0x19a941['forEach'](_0x14fcd3=>{const _0x416db1=_0x1e76c3;sessions[_0x416db1(0xeb)]({'id':_0x14fcd3['i'],'clientId':_0x14fcd3['c'],'coachId':_0x14fcd3[_0x416db1(0xdc)],'dateStr':_0x31269d+'-'+_0x19f870['padStart'](0x2,'0'),'start':_0x14fcd3['s'],'end':_0x14fcd3['e'],'note':_0x14fcd3['n']||'','status':_0x14fcd3['st']||_0x416db1(0x1be),'seriesId':_0x14fcd3[_0x416db1(0xe1)]});});})),reRenderBlocks();}};function init(){const _0x59151a=a3_0x136be4;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x59151a(0x18e)]('matrixViewport')[_0x59151a(0x1b4)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x59151a(0x179)]();}function renderTimeColumn(){const _0x3a70ee=a3_0x136be4,_0x4709ab=document[_0x3a70ee(0x18e)](_0x3a70ee(0x1a4)),_0x5cd8eb=document[_0x3a70ee(0x18e)](_0x3a70ee(0x134));_0x4709ab['innerHTML']='',_0x4709ab['appendChild'](_0x5cd8eb);for(let _0x4f5da4=0x0;_0x4f5da4<0x18;_0x4f5da4++){const _0x7ea031=document[_0x3a70ee(0x141)](_0x3a70ee(0x1a5));_0x7ea031[_0x3a70ee(0x19c)]='time-label';if(_0x4f5da4>0x0)_0x7ea031[_0x3a70ee(0x169)]='<span>'+String(_0x4f5da4)[_0x3a70ee(0x191)](0x2,'0')+':00</span>';_0x4709ab[_0x3a70ee(0xde)](_0x7ea031);}}function renderDayRange(_0x3ed426,_0x9c6a5d){const _0x584e9c=a3_0x136be4,_0x13ebdd=document[_0x584e9c(0x18e)](_0x584e9c(0x164)),_0x4643a6=document['getElementById']('gridColumns'),_0x1f40a7=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2ef492=new Date();_0x2ef492[_0x584e9c(0x17c)](0x0,0x0,0x0,0x0);const _0x17d74a=getLocalDateStr(new Date());for(let _0xc6529d=_0x3ed426;_0xc6529d<=_0x9c6a5d;_0xc6529d++){const _0x2f382f=new Date(_0x2ef492);_0x2f382f[_0x584e9c(0xea)](_0x2f382f[_0x584e9c(0x118)]()+_0xc6529d);const _0x49fe80=getLocalDateStr(_0x2f382f);let _0x6050f7=_0x2f382f['getDay']()-0x1;if(_0x6050f7===-0x1)_0x6050f7=0x6;const _0x5ed903=_0x49fe80===_0x17d74a,_0x1e4450=document['createElement'](_0x584e9c(0x1a5));_0x1e4450['className']=_0x584e9c(0x1bf)+(_0x5ed903?_0x584e9c(0x145):''),_0x1e4450[_0x584e9c(0x153)]('data-date',_0x49fe80),_0x1e4450[_0x584e9c(0x169)]=_0x584e9c(0x1b1)+_0x1f40a7[_0x6050f7]+_0x584e9c(0x1b6)+_0x2f382f['getDate']()+_0x584e9c(0xf1),_0x13ebdd['appendChild'](_0x1e4450);const _0x46739f=document['createElement'](_0x584e9c(0x1a5));_0x46739f[_0x584e9c(0x19c)]='day-column\x20'+(_0x5ed903?_0x584e9c(0x145):''),_0x46739f[_0x584e9c(0x153)](_0x584e9c(0x1ab),_0x49fe80),_0x46739f[_0x584e9c(0x153)]('data-day-idx',_0x6050f7),_0x4643a6[_0x584e9c(0xde)](_0x46739f);}}function reRenderBlocks(){const _0x124fab=a3_0x136be4;document[_0x124fab(0x10e)]('.day-column')[_0x124fab(0x1c9)](_0x2d090c=>{const _0x3c3984=_0x124fab;_0x2d090c[_0x3c3984(0x10e)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x3c3984(0x1c9)](_0x26f49c=>_0x26f49c[_0x3c3984(0x176)]());const _0x1364b3=_0x2d090c[_0x3c3984(0x12f)](_0x3c3984(0x1ab)),_0x135a20=parseInt(_0x2d090c[_0x3c3984(0x12f)](_0x3c3984(0x105))),_0x35fbff=Math[_0x3c3984(0x1c4)](_0x2d090c['offsetLeft']);(availabilityPattern[_0x135a20]||[])['forEach'](_0x55f986=>{const _0x5c382e=_0x3c3984,_0x178d3c=document[_0x5c382e(0x141)](_0x5c382e(0x1a5));_0x178d3c['className']=_0x5c382e(0xfd),_0x178d3c['style']['top']=_0x55f986*GRID_H+'px',_0x178d3c[_0x5c382e(0x166)][_0x5c382e(0x133)]='-'+_0x35fbff+'px\x20-'+_0x55f986*GRID_H+'px',_0x2d090c['appendChild'](_0x178d3c);});if(specialRanges[_0x3c3984(0x132)]>0x0){const _0x2721aa=new Date(_0x1364b3+_0x3c3984(0x14b))[_0x3c3984(0x14a)](),_0x4c95a4=new Date(_0x1364b3+_0x3c3984(0x13e))['getTime']();specialRanges['forEach'](_0x4894aa=>{const _0x2d5a6c=_0x3c3984,_0x160b06=new Date(_0x4894aa[_0x2d5a6c(0xfa)])[_0x2d5a6c(0x14a)](),_0x49c6f1=new Date(_0x4894aa[_0x2d5a6c(0x167)])[_0x2d5a6c(0x14a)](),_0x439fdf=Math['max'](_0x2721aa,_0x160b06),_0x10d005=Math[_0x2d5a6c(0x165)](_0x4c95a4,_0x49c6f1);if(_0x439fdf<_0x10d005){const _0x2d70f5=(_0x439fdf-_0x2721aa)/0x36ee80*GRID_H,_0x1397bb=(_0x10d005-_0x439fdf)/0x36ee80*GRID_H,_0x3b1c94=document[_0x2d5a6c(0x141)](_0x2d5a6c(0x1a5));_0x1397bb>=23.5*GRID_H?(_0x3b1c94[_0x2d5a6c(0x19c)]=_0x2d5a6c(0x1b0),_0x3b1c94[_0x2d5a6c(0x166)][_0x2d5a6c(0x133)]='-'+_0x35fbff+_0x2d5a6c(0x117)):(_0x3b1c94['className']=_0x2d5a6c(0x1c1),_0x3b1c94[_0x2d5a6c(0x166)][_0x2d5a6c(0xfe)]=_0x2d70f5+'px',_0x3b1c94[_0x2d5a6c(0x166)][_0x2d5a6c(0x18f)]=_0x1397bb+'px',_0x3b1c94[_0x2d5a6c(0x166)][_0x2d5a6c(0x133)]='-'+_0x35fbff+_0x2d5a6c(0x13d)+_0x2d70f5+'px'),_0x2d090c['appendChild'](_0x3b1c94);}});}renderEventsForColumn(_0x2d090c,_0x1364b3);});}function renderEventsForColumn(_0x37bf9f,_0x28581f){const _0x282774=a3_0x136be4,_0x5426ae=sessions[_0x282774(0x119)](_0x23fdbd=>_0x23fdbd[_0x282774(0x1b8)]===_0x28581f),_0x172546=_0x5426ae[_0x282774(0x19d)](_0x16c6c3=>{const _0x9919bd=_0x282774,[_0x4d80b4,_0x217c32]=_0x16c6c3[_0x9919bd(0xfa)]['split'](':')[_0x9919bd(0x19d)](Number),[_0x96ae36,_0x49601a]=_0x16c6c3[_0x9919bd(0x167)][_0x9919bd(0x194)](':')[_0x9919bd(0x19d)](Number);return{'data':_0x16c6c3,'start':_0x4d80b4*0x3c+_0x217c32,'end':_0x96ae36*0x3c+_0x49601a,'colIndex':0x0};});_0x172546[_0x282774(0x1c6)]((_0x5ac049,_0x1f8de9)=>_0x5ac049[_0x282774(0xfa)]-_0x1f8de9[_0x282774(0xfa)]||_0x1f8de9[_0x282774(0x167)]-_0x1f8de9['start']-(_0x5ac049[_0x282774(0x167)]-_0x5ac049[_0x282774(0xfa)]));const _0x580267=[];_0x172546[_0x282774(0x1c9)](_0x3d9831=>{const _0x3571b0=_0x282774;let _0x504038=![];for(let _0x2407fc=0x0;_0x2407fc<_0x580267[_0x3571b0(0x132)];_0x2407fc++){const _0x12a8be=_0x580267[_0x2407fc];if(_0x3d9831[_0x3571b0(0xfa)]>=_0x12a8be[_0x12a8be[_0x3571b0(0x132)]-0x1][_0x3571b0(0x167)]){_0x12a8be[_0x3571b0(0xeb)](_0x3d9831),_0x3d9831[_0x3571b0(0x10b)]=_0x2407fc,_0x504038=!![];break;}}!_0x504038&&(_0x580267['push']([_0x3d9831]),_0x3d9831[_0x3571b0(0x10b)]=_0x580267['length']-0x1);}),_0x172546['forEach'](_0x1957fd=>{const _0x10efbd=_0x282774;let _0x28d030=0x0;_0x172546[_0x10efbd(0x1c9)](_0x49aa27=>{const _0x4c0b13=_0x10efbd;if(Math['max'](_0x1957fd[_0x4c0b13(0xfa)],_0x49aa27[_0x4c0b13(0xfa)])<Math[_0x4c0b13(0x165)](_0x1957fd['end'],_0x49aa27[_0x4c0b13(0x167)])&&_0x49aa27[_0x4c0b13(0x10b)]>_0x28d030)_0x28d030=_0x49aa27[_0x4c0b13(0x10b)];});const _0x5a9b6a=_0x28d030+0x1,_0x352066=0x64/_0x5a9b6a,_0x209c57=_0x1957fd[_0x10efbd(0x10b)]*_0x352066,_0x45110b=document[_0x10efbd(0x141)](_0x10efbd(0x1a5)),_0x480951=_0x1957fd['data'];let _0x3e72b6='#0a84ff';if(clients&&clients['length']>0x0){const _0x5838fb=clients[_0x10efbd(0x128)](_0x11e709=>String(_0x11e709['id'])===String(_0x480951[_0x10efbd(0xf6)]));if(_0x5838fb&&_0x5838fb['color'])_0x3e72b6=_0x5838fb['color'];}const _0x28de36=_0x480951[_0x10efbd(0x138)]===_0x10efbd(0xff),_0x21064c=_0x28de36?0x1:0.45;_0x45110b[_0x10efbd(0x19c)]=_0x10efbd(0x10f)+(_0x28de36?_0x10efbd(0x171):''),_0x45110b[_0x10efbd(0x166)][_0x10efbd(0x1af)]=hexToRgba(_0x3e72b6,_0x21064c),_0x45110b[_0x10efbd(0x166)][_0x10efbd(0xf5)]=_0x3e72b6;const _0x28ad1e=_0x1957fd[_0x10efbd(0xfa)]/0x3c*GRID_H,_0xc926e0=(_0x1957fd[_0x10efbd(0x167)]-_0x1957fd[_0x10efbd(0xfa)])/0x3c*GRID_H;_0x45110b[_0x10efbd(0x166)][_0x10efbd(0xfe)]=_0x28ad1e+'px',_0x45110b[_0x10efbd(0x166)]['height']=Math[_0x10efbd(0x136)](_0xc926e0,0x14)+'px',_0x45110b[_0x10efbd(0x166)][_0x10efbd(0x140)]=_0x10efbd(0x1a0)+_0x352066+'%\x20-\x204px)',_0x45110b[_0x10efbd(0x166)][_0x10efbd(0x10c)]='calc('+_0x209c57+'%\x20+\x202px)',_0x45110b[_0x10efbd(0x166)]['zIndex']=0xa+_0x1957fd[_0x10efbd(0x10b)];if(_0x352066<0x55)_0x45110b[_0x10efbd(0x1cc)][_0x10efbd(0x11e)](_0x10efbd(0x126));let _0x45aa31='';if(_0x480951['seriesId'])_0x45aa31+=_0x10efbd(0x120);if(_0x28de36)_0x45aa31+=_0x10efbd(0x157);_0x45110b['innerHTML']=_0x10efbd(0x183)+_0x480951[_0x10efbd(0xfa)]+_0x10efbd(0x170)+_0x480951[_0x10efbd(0x167)]+_0x10efbd(0x1bc)+_0x45aa31+_0x10efbd(0x130),_0x45110b[_0x10efbd(0x129)]=_0x361682=>{const _0xfad55d=_0x10efbd;_0x361682[_0xfad55d(0xef)](),openDetails(_0x480951);},_0x37bf9f[_0x10efbd(0xde)](_0x45110b);});}function openAnalytics(){const _0x318a96=a3_0x136be4,_0x522eea=document[_0x318a96(0x147)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x318a96(0x114),_0x522eea),openSheet(_0x318a96(0x1b3));}function setAnalyticsPeriod(_0x3ee5d7,_0x8f4b2){const _0x283cb3=a3_0x136be4;currentAnPeriod=_0x3ee5d7,document[_0x283cb3(0x10e)](_0x283cb3(0x1a2))[_0x283cb3(0x1c9)](_0x36e777=>_0x36e777[_0x283cb3(0x1cc)]['remove'](_0x283cb3(0x12d)));if(_0x8f4b2)_0x8f4b2[_0x283cb3(0x1cc)][_0x283cb3(0x11e)](_0x283cb3(0x12d));const _0x498697=document['getElementById'](_0x283cb3(0xe9));_0x498697['style'][_0x283cb3(0x12a)]=_0x3ee5d7==='custom'?_0x283cb3(0x151):_0x283cb3(0x1ca);const _0x116a80=new Date();let _0x2aa9f2=new Date(),_0x5bc4ac=new Date();if(_0x3ee5d7===_0x283cb3(0x114))_0x2aa9f2=getStartOfWeek(_0x116a80),_0x5bc4ac=new Date(_0x2aa9f2),_0x5bc4ac[_0x283cb3(0xea)](_0x5bc4ac[_0x283cb3(0x118)]()+0x6);else{if(_0x3ee5d7===_0x283cb3(0x198))_0x2aa9f2=new Date(_0x116a80[_0x283cb3(0x127)](),_0x116a80[_0x283cb3(0x104)](),0x1),_0x5bc4ac=new Date(_0x116a80[_0x283cb3(0x127)](),_0x116a80[_0x283cb3(0x104)]()+0x1,0x0);else{!document['getElementById'](_0x283cb3(0x1a3))[_0x283cb3(0x15c)]&&(document[_0x283cb3(0x18e)](_0x283cb3(0x1a3))['value']=getLocalDateStr(_0x116a80),document['getElementById'](_0x283cb3(0x16c))[_0x283cb3(0x15c)]=getLocalDateStr(_0x116a80));refreshAnalytics();return;}}document[_0x283cb3(0x18e)](_0x283cb3(0x1a3))[_0x283cb3(0x15c)]=getLocalDateStr(_0x2aa9f2),document[_0x283cb3(0x18e)]('anEnd')[_0x283cb3(0x15c)]=getLocalDateStr(_0x5bc4ac),refreshAnalytics();}function refreshAnalytics(){const _0x31e352=a3_0x136be4,_0x5634bb=document[_0x31e352(0x18e)](_0x31e352(0x1a3))[_0x31e352(0x15c)],_0x2a8b7f=document['getElementById'](_0x31e352(0x16c))[_0x31e352(0x15c)];if(!_0x5634bb||!_0x2a8b7f)return;const _0x40e5a6=sessions[_0x31e352(0x119)](_0x11e227=>_0x11e227['dateStr']>=_0x5634bb&&_0x11e227[_0x31e352(0x1b8)]<=_0x2a8b7f&&_0x11e227['status']!=='cancelled'),_0x102a89=_0x40e5a6[_0x31e352(0x132)],_0xf39d3=_0x40e5a6[_0x31e352(0x119)](_0x28f7ad=>_0x28f7ad[_0x31e352(0x138)]==='completed')['length'],_0x2e4de9=_0x102a89>0x0?Math[_0x31e352(0x1c4)](_0xf39d3/_0x102a89*0x64):0x0;document['getElementById'](_0x31e352(0x18b))[_0x31e352(0xed)]=_0x2e4de9+'%',document['getElementById']('anTotalStats')['textContent']=_0xf39d3+_0x31e352(0x197)+_0x102a89+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x8607d2=document[_0x31e352(0x18e)](_0x31e352(0x131)),_0x24d11c=0x2*Math['PI']*0x23,_0x567c06=_0x24d11c-_0x2e4de9/0x64*_0x24d11c;_0x8607d2['style'][_0x31e352(0x15b)]=_0x567c06;const _0x91d68b={};_0x40e5a6['forEach'](_0xa2e107=>{const _0x28be6a=_0x31e352,_0x5c2c78=_0xa2e107[_0x28be6a(0x1a9)]||_0x28be6a(0x108);if(!_0x91d68b[_0x5c2c78]){const _0x2b3d9c='#'+_0x5c2c78[_0x28be6a(0x1bb)]()['substr'](0x0,0x6);_0x91d68b[_0x5c2c78]={'total':0x0,'done':0x0,'color':_0x2b3d9c};}_0x91d68b[_0x5c2c78][_0x28be6a(0xe8)]++;if(_0xa2e107['status']==='completed')_0x91d68b[_0x5c2c78][_0x28be6a(0x196)]++;});const _0x3234c6=document[_0x31e352(0x18e)](_0x31e352(0x10d));_0x3234c6['innerHTML']='';const _0x53fda2=Object[_0x31e352(0x160)](_0x91d68b)[_0x31e352(0x1c6)]((_0x256874,_0x52265d)=>_0x52265d[0x1][_0x31e352(0xe8)]-_0x256874[0x1][_0x31e352(0xe8)]);if(_0x53fda2[_0x31e352(0x132)]===0x0){_0x3234c6[_0x31e352(0x169)]=_0x31e352(0x148);return;}_0x53fda2[_0x31e352(0x1c9)](([_0x551004,_0x43b284])=>{const _0x36dff6=_0x31e352,_0x3ee258=Math[_0x36dff6(0x1c4)](_0x43b284[_0x36dff6(0x196)]/_0x43b284[_0x36dff6(0xe8)]*0x64),_0x33d9c9=document[_0x36dff6(0x141)](_0x36dff6(0x1a5));_0x33d9c9[_0x36dff6(0x19c)]=_0x36dff6(0xdf),_0x33d9c9['style']['borderLeftColor']=_0x43b284[_0x36dff6(0x122)],_0x33d9c9[_0x36dff6(0x169)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x551004['substr'](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x43b284[_0x36dff6(0x196)]+'</span>\x20/\x20'+_0x43b284[_0x36dff6(0xe8)]+_0x36dff6(0x1b5)+_0x3ee258+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3234c6[_0x36dff6(0xde)](_0x33d9c9);});}function openDetails(_0x38e2a1){const _0x236102=a3_0x136be4;currentSession=_0x38e2a1;const _0x2ad44f=new Date(_0x38e2a1[_0x236102(0x1b8)]),_0x3f4cc4=_0x2ad44f[_0x236102(0x15e)](_0x236102(0x13c),{'weekday':_0x236102(0x103),'day':'numeric','month':'long'});document['getElementById'](_0x236102(0x19f))[_0x236102(0xed)]=_0x3f4cc4[_0x236102(0x115)](0x0)['toUpperCase']()+_0x3f4cc4[_0x236102(0x1c0)](0x1),document[_0x236102(0x18e)](_0x236102(0x187))[_0x236102(0xed)]=_0x38e2a1[_0x236102(0xfa)]+_0x236102(0x170)+_0x38e2a1[_0x236102(0x167)],document['getElementById'](_0x236102(0x111))[_0x236102(0xed)]=_0x38e2a1['note']||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x146206=document[_0x236102(0x18e)](_0x236102(0x110)),_0x26a697=document[_0x236102(0x18e)](_0x236102(0xf8)),_0x37ab93=_0x26a697[_0x236102(0x147)](_0x236102(0x16b)),_0x3be862=_0x26a697[_0x236102(0x147)](_0x236102(0x1a8)),_0x4685f1=document[_0x236102(0x18e)](_0x236102(0x184));if(_0x38e2a1[_0x236102(0x138)]===_0x236102(0xff))_0x146206[_0x236102(0xed)]='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0x146206[_0x236102(0x166)][_0x236102(0x122)]=_0x236102(0xe2),_0x26a697[_0x236102(0x166)][_0x236102(0x12a)]=_0x236102(0x1ca);else{_0x146206['textContent']='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x146206[_0x236102(0x166)][_0x236102(0x122)]=_0x236102(0x123),_0x26a697['style'][_0x236102(0x12a)]=_0x236102(0x13a);const _0x4a48fa=new Date(_0x38e2a1[_0x236102(0x1b8)]+'T'+_0x38e2a1[_0x236102(0xfa)]),_0x426a10=new Date(),_0x19bffc=(_0x4a48fa-_0x426a10)/(0x3e8*0x3c*0x3c),_0xf84b5e=coachProfiles[_0x38e2a1[_0x236102(0x1a9)]]&&coachProfiles[_0x38e2a1['coachId']][_0x236102(0x146)]?parseInt(coachProfiles[_0x38e2a1[_0x236102(0x1a9)]]['cancel_window']):0x18;if(_0xf84b5e===0x0||_0x19bffc>=_0xf84b5e)_0x37ab93[_0x236102(0x166)]['display']='block',_0x3be862['style'][_0x236102(0x12a)]='block',_0x4685f1[_0x236102(0x166)][_0x236102(0x12a)]=_0x236102(0x1ca);else{_0x37ab93[_0x236102(0x166)][_0x236102(0x12a)]=_0x236102(0x1ca),_0x3be862['style'][_0x236102(0x12a)]=_0x236102(0x1ca),_0x4685f1['style'][_0x236102(0x12a)]=_0x236102(0x13a);let _0x579082=_0xf84b5e===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':'–∑–∞\x20'+_0xf84b5e+_0x236102(0xfb);_0x4685f1[_0x236102(0xed)]='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x579082+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document[_0x236102(0x18e)](_0x236102(0xfc))[_0x236102(0x1cc)]['add']('active'),document[_0x236102(0x18e)](_0x236102(0x1ba))[_0x236102(0x1cc)][_0x236102(0x11e)]('open');}function closeAllSheets(){const _0x466c4c=a3_0x136be4;document['getElementById'](_0x466c4c(0xfc))[_0x466c4c(0x1cc)][_0x466c4c(0x176)](_0x466c4c(0x12d)),document[_0x466c4c(0x10e)](_0x466c4c(0xf0))['forEach'](_0x2212a4=>_0x2212a4[_0x466c4c(0x1cc)][_0x466c4c(0x176)](_0x466c4c(0x162)));}function openSheet(_0x125c06){const _0x1b8794=a3_0x136be4;document[_0x1b8794(0x18e)]('overlay')[_0x1b8794(0x1cc)][_0x1b8794(0x11e)](_0x1b8794(0x12d)),document[_0x1b8794(0x18e)](_0x125c06)[_0x1b8794(0x1cc)][_0x1b8794(0x11e)](_0x1b8794(0x162));}function getLocalDateStr(_0x5d62a3){const _0x41a51e=a3_0x136be4,_0x1a262c=_0x5d62a3['getFullYear'](),_0x364b3d=String(_0x5d62a3[_0x41a51e(0x104)]()+0x1)['padStart'](0x2,'0'),_0x1efdae=String(_0x5d62a3[_0x41a51e(0x118)]())[_0x41a51e(0x191)](0x2,'0');return _0x1a262c+'-'+_0x364b3d+'-'+_0x1efdae;}function getStartOfWeek(_0x1ca377){const _0xd1f2e=a3_0x136be4,_0x47ab80=new Date(_0x1ca377),_0x2d93a5=_0x47ab80['getDay'](),_0x565cc4=_0x47ab80['getDate']()-_0x2d93a5+(_0x2d93a5===0x0?-0x6:0x1);return _0x47ab80[_0xd1f2e(0xea)](_0x565cc4),_0x47ab80[_0xd1f2e(0x17c)](0x0,0x0,0x0,0x0),_0x47ab80;}function scrollToToday(){const _0x162470=getLocalDateStr(new Date());setTimeout(()=>{const _0x135b56=a3_0x15f5,_0x3dd9dc=document['querySelector'](_0x135b56(0x178)+_0x162470+'\x22]');if(_0x3dd9dc){const _0xece143=document[_0x135b56(0x18e)]('matrixViewport'),_0x40db5b=_0x3dd9dc['offsetLeft']-_0xece143[_0x135b56(0xe0)]/0x2+_0x3dd9dc[_0x135b56(0x11a)]/0x2;_0xece143['scrollTo']({'left':_0x40db5b,'behavior':_0x135b56(0x1bd)}),_0xece143['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function a3_0x39a5(){const _0x1ef001=['end','day-column\x20','innerHTML','rs-time-btn','.btn-cancel','anEnd','matrixViewport','1397sOoZTB','rsDatesTrack','\x20-\x20','\x20status-completed','client_load','5laWenP','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','ready','remove','button','.day-col-header[data-date=\x22','syncLoad','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','visible','setHours','json','isArray','fontWeight','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','expand','.rs-date-chip','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','cancelHint','setBackgroundColor','3357CvSURn','detTime','saveLocally','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','reschedule','anPercent','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','ccYesBtn','getElementById','height','now','padStart','createDocumentFragment','BackButton','split','rgba(','done','\x20–∏–∑\x20','month','initData','WebApp','2206085ZdwuGf','className','map','ranges','detDate','calc(','insertBefore','.period-switch\x20.p-btn','anStart','timeColumn','div','pattern','applyData','.btn-reschedule','coachId','rs-date-chip','data-date','scrollLeft','clients','162656eLhBCJ','backgroundColor','day-off-overlay\x20stripe-bg','<div\x20class=\x22dch-day\x22>','Error\x20setting\x20back\x20button:','analyticsSheet','addEventListener','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','</div><div\x20class=\x22dch-num\x22>','findIndex','dateStr','startsWith','detailsSheet','toString','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','auto','planned','day-col-header\x20','slice','blocked-range-part\x20stripe-bg','customConfirm','14eBjjiK','round','coach_profiles','sort','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','join','forEach','none','6568lQFxOz','classList','cid','keys','appendChild','client-stat-card','clientWidth','sid','var(--acc-green)','#0a84ff','search','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','data','ccText','total','anCustomDates','setDate','push','getHours','textContent','client_cancel','stopPropagation','.sheet','</div>','scrollWidth','1882116FhArhn','\x20–≤\x20','borderLeftColor','clientId','rsSlotsGrid','cancelContainer','constructor','start','\x20—á.','overlay','blocked-slot\x20stripe-bg','top','completed','6450fZEfDq','exceptions','toLocaleString','long','getMonth','data-day-idx','calendar','error','Unknown','log','get_slots','colIndex','left','analyticsList','querySelectorAll','event-card','detStatus','detNote','getDay','Telegram','week','charAt','POST','px\x200px','getDate','filter','offsetWidth','toUpperCase','getItem','v9.5-CLIENT-ANALYTICS','add','settings','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','color','var(--acc-blue)','113493aPnOEG','numeric','mini','getFullYear','find','onclick','display','#ff453a','getMinutes','active','parse','getAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','anDonutCircle','length','backgroundPosition','timeLineBadge','onClick','max','test','status','(((.+)+)+)+$','block','stringify','ru-RU','px\x20-','T23:59:59','uc_client_sessions','width','createElement','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','all','–û—Ç–º–µ–Ω–µ–Ω–æ','today','cancel_window','querySelector','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','256132muWxqg','getTime','T00:00:00','firstChild','Error\x20setting\x20color:','setHeaderColor','setMonth','setItem','flex','<div\x20class=\x22rs-day-name\x22>','setAttribute','gridColumns','headerMonth','show','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','then','strokeDashoffset','value','600','toLocaleDateString','Critical\x20TMA\x20Error:','entries','ccTitle','open','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','daysHeaderTrack','min','style'];a3_0x39a5=function(){return _0x1ef001;};return a3_0x39a5();}function updateClock(){const _0x1bcc04=a3_0x136be4,_0x65a998=new Date(),_0x230c5e=document[_0x1bcc04(0x18e)]('globalTimeLine'),_0x1ddf98=document['getElementById'](_0x1bcc04(0x134)),_0xf97b17=(_0x65a998[_0x1bcc04(0xec)]()*0x3c+_0x65a998['getMinutes']())/0x3c*GRID_H;_0x230c5e['style'][_0x1bcc04(0xfe)]=_0xf97b17+'px',_0x230c5e[_0x1bcc04(0x166)][_0x1bcc04(0x12a)]=_0x1bcc04(0x13a),_0x1ddf98[_0x1bcc04(0x166)][_0x1bcc04(0xfe)]=_0xf97b17+'px',_0x1ddf98[_0x1bcc04(0x166)][_0x1bcc04(0x12a)]='block',_0x1ddf98[_0x1bcc04(0xed)]=String(_0x65a998[_0x1bcc04(0xec)]())[_0x1bcc04(0x191)](0x2,'0')+':'+String(_0x65a998[_0x1bcc04(0x12c)]())['padStart'](0x2,'0');}function onScroll(){const _0x3607ee=a3_0x136be4,_0x586f04=document[_0x3607ee(0x18e)](_0x3607ee(0x16d)),_0x8f54c9=document[_0x3607ee(0x10e)]('.day-col-header');for(let _0x1a7c38 of _0x8f54c9)if(_0x1a7c38['offsetLeft']>=_0x586f04[_0x3607ee(0x1ac)]){const _0x77d499=new Date(_0x1a7c38[_0x3607ee(0x12f)](_0x3607ee(0x1ab)));document['getElementById'](_0x3607ee(0x155))['textContent']=_0x77d499[_0x3607ee(0x102)]('ru',{'month':_0x3607ee(0x103)})[_0x3607ee(0x11b)]()+'\x20'+_0x77d499[_0x3607ee(0x127)]();break;}}function showToast(_0x37c634){const _0xa4b66f=a3_0x136be4,_0x2e376d=document[_0xa4b66f(0x18e)]('toast');_0x2e376d[_0xa4b66f(0xed)]=_0x37c634,_0x2e376d[_0xa4b66f(0x1cc)][_0xa4b66f(0x11e)](_0xa4b66f(0x156)),setTimeout(()=>_0x2e376d[_0xa4b66f(0x1cc)]['remove']('show'),0x7d0);}function handleInfiniteScroll(){const _0x31ec8a=a3_0x136be4,_0x5e1807=document[_0x31ec8a(0x18e)](_0x31ec8a(0x16d)),_0x23dd60=_0x5e1807[_0x31ec8a(0x1ac)],_0x357523=_0x5e1807[_0x31ec8a(0xf2)],_0x56f5e5=_0x5e1807[_0x31ec8a(0xe0)];if(_0x357523-(_0x23dd60+_0x56f5e5)<0x12c){const _0x4f1939=endOffset;endOffset+=0xe,renderDayRange(_0x4f1939+0x1,endOffset),reRenderBlocks();}if(_0x23dd60<0x12c){const _0x84989b=startOffset;startOffset-=0xe,prependDays(startOffset,_0x84989b-0x1),_0x5e1807['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x5e579b,_0x47551c){const _0x11b652=a3_0x136be4,_0x5c79e0=document[_0x11b652(0x18e)](_0x11b652(0x164)),_0x4c7ce9=document[_0x11b652(0x18e)](_0x11b652(0x154)),_0x399277=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1cc23e=new Date();_0x1cc23e[_0x11b652(0x17c)](0x0,0x0,0x0,0x0);const _0x177d7d=getLocalDateStr(new Date()),_0x34533f=document[_0x11b652(0x192)](),_0x2bbe8a=document[_0x11b652(0x192)]();for(let _0x42c959=_0x5e579b;_0x42c959<=_0x47551c;_0x42c959++){const _0x359889=new Date(_0x1cc23e);_0x359889[_0x11b652(0xea)](_0x359889['getDate']()+_0x42c959);const _0x37a29a=getLocalDateStr(_0x359889);let _0x2be53f=_0x359889[_0x11b652(0x112)]()-0x1;if(_0x2be53f===-0x1)_0x2be53f=0x6;const _0x1d1326=_0x37a29a===_0x177d7d,_0x10c059=document[_0x11b652(0x141)](_0x11b652(0x1a5));_0x10c059[_0x11b652(0x19c)]=_0x11b652(0x1bf)+(_0x1d1326?_0x11b652(0x145):''),_0x10c059[_0x11b652(0x153)](_0x11b652(0x1ab),_0x37a29a),_0x10c059[_0x11b652(0x169)]='<div\x20class=\x22dch-day\x22>'+_0x399277[_0x2be53f]+'</div><div\x20class=\x22dch-num\x22>'+_0x359889[_0x11b652(0x118)]()+_0x11b652(0xf1),_0x34533f[_0x11b652(0xde)](_0x10c059);const _0x247eb9=document[_0x11b652(0x141)](_0x11b652(0x1a5));_0x247eb9['className']=_0x11b652(0x168)+(_0x1d1326?'today':''),_0x247eb9[_0x11b652(0x153)](_0x11b652(0x1ab),_0x37a29a),_0x247eb9[_0x11b652(0x153)](_0x11b652(0x105),_0x2be53f),_0x2bbe8a[_0x11b652(0xde)](_0x247eb9);}_0x5c79e0[_0x11b652(0x1a1)](_0x34533f,_0x5c79e0[_0x11b652(0x14c)]),_0x4c7ce9[_0x11b652(0x1a1)](_0x2bbe8a,_0x4c7ce9[_0x11b652(0x147)]('.day-column'));}function hexToRgba(_0x22d731,_0x369e09){const _0x315ff4=a3_0x136be4;let _0x1d8414;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x315ff4(0x137)](_0x22d731))return _0x1d8414=_0x22d731['substring'](0x1)[_0x315ff4(0x194)](''),_0x1d8414['length']==0x3&&(_0x1d8414=[_0x1d8414[0x0],_0x1d8414[0x0],_0x1d8414[0x1],_0x1d8414[0x1],_0x1d8414[0x2],_0x1d8414[0x2]]),_0x1d8414='0x'+_0x1d8414[_0x315ff4(0x1c8)](''),_0x315ff4(0x195)+[_0x1d8414>>0x10&0xff,_0x1d8414>>0x8&0xff,_0x1d8414&0xff][_0x315ff4(0x1c8)](',')+','+_0x369e09+')';return'rgba(10,\x20132,\x20255,\x20'+_0x369e09+')';}let confirmResolver=null;function showCustomConfirm(_0x350e7e,_0x2b509f,_0x1b2167=!![]){const _0x564a6d=a3_0x136be4;document['getElementById'](_0x564a6d(0x161))['textContent']=_0x350e7e,document[_0x564a6d(0x18e)](_0x564a6d(0xe7))[_0x564a6d(0xed)]=_0x2b509f;const _0x1ab9f3=document['getElementById'](_0x564a6d(0x18d));return _0x1b2167?(_0x1ab9f3[_0x564a6d(0x166)]['color']=_0x564a6d(0x12b),_0x1ab9f3[_0x564a6d(0x166)][_0x564a6d(0x17f)]=_0x564a6d(0x15d)):(_0x1ab9f3[_0x564a6d(0x166)][_0x564a6d(0x122)]=_0x564a6d(0xe3),_0x1ab9f3['style']['fontWeight']=_0x564a6d(0x15d)),new Promise(_0x22edcf=>{const _0x5a3324=_0x564a6d;confirmResolver=_0x22edcf,document[_0x5a3324(0x18e)](_0x5a3324(0x1c2))[_0x5a3324(0x1cc)]['add'](_0x5a3324(0x17b));});}function resolveCustomConfirm(_0x58de12){const _0x5d42ca=a3_0x136be4;document[_0x5d42ca(0x18e)](_0x5d42ca(0x1c2))[_0x5d42ca(0x1cc)]['remove']('visible');if(confirmResolver)confirmResolver(_0x58de12);}async function tryCancelCurrentSession(){const _0x2ffed8=a3_0x136be4;if(!currentSession)return;const _0x574a18=await showCustomConfirm(_0x2ffed8(0x189),_0x2ffed8(0x159),!![]);if(!_0x574a18)return;const _0x2a4ad7=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x37b723=>_0x37b723['id']!==_0x2a4ad7['id']),reRenderBlocks(),showToast(_0x2ffed8(0x144)),lastUserActionTime=Date[_0x2ffed8(0x190)]();try{const _0x18a959=window[_0x2ffed8(0x113)]?.['WebApp'],_0x258cc8=await fetch(API_URL,{'method':_0x2ffed8(0x116),'body':JSON[_0x2ffed8(0x13b)]({'action':_0x2ffed8(0xee),'init_data':_0x18a959?.[_0x2ffed8(0x199)]||'','coachId':_0x2a4ad7[_0x2ffed8(0x1a9)],'dateStr':_0x2a4ad7[_0x2ffed8(0x1b8)],'sessionId':_0x2a4ad7['id']})});if(_0x258cc8['ok'])DataManager['saveLocally']();}catch(_0x49211b){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;function a3_0x15f5(_0x31a573,_0x3b21e1){_0x31a573=_0x31a573-0xdc;const _0x220479=a3_0x39a5();let _0x29a1d7=_0x220479[_0x31a573];return _0x29a1d7;}async function startRescheduleFlow(){const _0x34d8fe=a3_0x136be4;if(!currentSession)return;document[_0x34d8fe(0x18e)](_0x34d8fe(0x1ba))[_0x34d8fe(0x1cc)][_0x34d8fe(0x176)]('open'),document[_0x34d8fe(0x18e)]('rescheduleSheet')[_0x34d8fe(0x1cc)]['add']('open');const _0x568c11=document[_0x34d8fe(0x18e)](_0x34d8fe(0x16f)),_0x5a79b5=document[_0x34d8fe(0x18e)]('rsSlotsGrid');_0x568c11['innerHTML']='',_0x5a79b5[_0x34d8fe(0x169)]=_0x34d8fe(0x1c7);const [_0x53a52b,_0xd1ef28]=currentSession[_0x34d8fe(0xfa)]['split'](':')['map'](Number),[_0x186d17,_0x52b093]=currentSession[_0x34d8fe(0x167)][_0x34d8fe(0x194)](':')['map'](Number),_0x2da4c6=_0x186d17*0x3c+_0x52b093-(_0x53a52b*0x3c+_0xd1ef28);try{const _0x126243=window['Telegram']?.[_0x34d8fe(0x19a)],_0x854e7f=await fetch(API_URL,{'method':_0x34d8fe(0x116),'body':JSON[_0x34d8fe(0x13b)]({'action':_0x34d8fe(0x10a),'coachId':currentSession[_0x34d8fe(0x1a9)],'duration':_0x2da4c6,'init_data':_0x126243?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x1002ce=await _0x854e7f['json']();_0x1002ce['ok']&&_0x1002ce[_0x34d8fe(0xe6)]?(availableSlotsCache=_0x1002ce[_0x34d8fe(0xe6)],renderRescheduleDates()):_0x5a79b5['innerHTML']=_0x34d8fe(0x17a);}catch(_0x18bca6){_0x5a79b5[_0x34d8fe(0x169)]=_0x34d8fe(0x163);}}function renderRescheduleDates(){const _0x30c03e=a3_0x136be4,_0x1a809d=document[_0x30c03e(0x18e)](_0x30c03e(0x16f));_0x1a809d[_0x30c03e(0x169)]='';const _0x2cb12a=Object[_0x30c03e(0xdd)](availableSlotsCache)[_0x30c03e(0x1c6)](),_0xee8318=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x2cb12a[_0x30c03e(0x132)]===0x0){document[_0x30c03e(0x18e)](_0x30c03e(0xf7))[_0x30c03e(0x169)]=_0x30c03e(0x180);return;}_0x2cb12a[_0x30c03e(0x1c9)]((_0x19a278,_0x48f881)=>{const _0x1f32c=_0x30c03e,_0x2c76c9=new Date(_0x19a278),_0x3858c1=_0xee8318[_0x2c76c9[_0x1f32c(0x112)]()],_0x55f0e5=_0x2c76c9[_0x1f32c(0x118)](),_0x41e71d=document['createElement'](_0x1f32c(0x1a5));_0x41e71d[_0x1f32c(0x19c)]=_0x1f32c(0x1aa);if(_0x48f881===0x0)_0x41e71d[_0x1f32c(0x1cc)][_0x1f32c(0x11e)](_0x1f32c(0x12d));_0x41e71d[_0x1f32c(0x169)]=_0x1f32c(0x152)+_0x3858c1+'</div><div\x20class=\x22rs-day-num\x22>'+_0x55f0e5+_0x1f32c(0xf1),_0x41e71d[_0x1f32c(0x129)]=()=>selectRsDate(_0x19a278,_0x41e71d),_0x1a809d[_0x1f32c(0xde)](_0x41e71d);}),selectRsDate(_0x2cb12a[0x0],_0x1a809d[_0x30c03e(0x14c)]);}function selectRsDate(_0x175e56,_0x4b6020){const _0x284009=a3_0x136be4;selectedRsDate=_0x175e56,document[_0x284009(0x10e)](_0x284009(0x182))[_0x284009(0x1c9)](_0x5a778e=>_0x5a778e[_0x284009(0x1cc)][_0x284009(0x176)]('active'));if(_0x4b6020)_0x4b6020[_0x284009(0x1cc)]['add'](_0x284009(0x12d));const _0x5e8c3c=document[_0x284009(0x18e)](_0x284009(0xf7));_0x5e8c3c[_0x284009(0x169)]='';const _0x599869=availableSlotsCache[_0x175e56]||[];if(_0x599869['length']===0x0){_0x5e8c3c['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x599869[_0x284009(0x1c9)](_0x37d3a5=>{const _0x798064=_0x284009,_0x1aa7a8=document['createElement'](_0x798064(0x177));_0x1aa7a8[_0x798064(0x19c)]=_0x798064(0x16a),_0x1aa7a8[_0x798064(0xed)]=_0x37d3a5,_0x1aa7a8['onclick']=()=>confirmReschedule(_0x37d3a5),_0x5e8c3c[_0x798064(0xde)](_0x1aa7a8);});}async function confirmReschedule(_0x4fff34){const _0x217d78=a3_0x136be4,_0x2dc37a=new Date(selectedRsDate),_0x37ea50=_0x2dc37a[_0x217d78(0x15e)](_0x217d78(0x13c),{'day':_0x217d78(0x125),'month':_0x217d78(0x103)}),_0x58e576=await showCustomConfirm(_0x217d78(0x18c),'–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x37ea50+_0x217d78(0xf4)+_0x4fff34+'?',![]);if(!_0x58e576)return;closeAllSheets(),showToast(_0x217d78(0x158)),lastUserActionTime=Date[_0x217d78(0x190)]();const _0xc2a4cb=currentSession[_0x217d78(0x1b8)],_0x1146aa=currentSession['id'],[_0x5bc56f,_0x2e257f]=currentSession[_0x217d78(0xfa)][_0x217d78(0x194)](':')[_0x217d78(0x19d)](Number),[_0x220c2e,_0x48e6f5]=currentSession['end']['split'](':')[_0x217d78(0x19d)](Number),_0x49141e=_0x220c2e*0x3c+_0x48e6f5-(_0x5bc56f*0x3c+_0x2e257f),[_0x582b31,_0x1906d7]=_0x4fff34[_0x217d78(0x194)](':')[_0x217d78(0x19d)](Number),_0x439a2d=_0x582b31*0x3c+_0x1906d7+_0x49141e,_0x510e78=Math['floor'](_0x439a2d/0x3c),_0x2ed888=_0x439a2d%0x3c,_0x4971f7=String(_0x510e78)[_0x217d78(0x191)](0x2,'0')+':'+String(_0x2ed888)[_0x217d78(0x191)](0x2,'0'),_0x1e2beb=sessions[_0x217d78(0x1b7)](_0x49e20e=>_0x49e20e['id']===_0x1146aa);_0x1e2beb!==-0x1&&(sessions[_0x1e2beb][_0x217d78(0x1b8)]=selectedRsDate,sessions[_0x1e2beb]['start']=_0x4fff34,sessions[_0x1e2beb]['end']=_0x4971f7,reRenderBlocks());try{const _0x4a2c2c=window[_0x217d78(0x113)]?.[_0x217d78(0x19a)],_0x201834=await fetch(API_URL,{'method':_0x217d78(0x116),'body':JSON[_0x217d78(0x13b)]({'action':_0x217d78(0x18a),'init_data':_0x4a2c2c?.[_0x217d78(0x199)]||'','oldSessionId':_0x1146aa,'oldDate':_0xc2a4cb,'newDate':selectedRsDate,'newTime':_0x4fff34,'coachId':currentSession['coachId']})}),_0x29fd22=await _0x201834['json']();!_0x29fd22['ok']?(showToast(_0x217d78(0x142)),DataManager[_0x217d78(0x179)]()):(showToast(_0x217d78(0xe5)),DataManager[_0x217d78(0x188)]());}catch(_0x589ba0){showToast(_0x217d78(0x174));}}document['addEventListener']('DOMContentLoaded',init);