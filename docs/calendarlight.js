const a3_0x2f8036=a3_0x2541;(function(_0x37694b,_0x521b58){const _0x55040b=a3_0x2541,_0x2c3555=_0x37694b();while(!![]){try{const _0x1d89d7=parseInt(_0x55040b(0x114))/0x1*(-parseInt(_0x55040b(0x15e))/0x2)+-parseInt(_0x55040b(0x1d7))/0x3+-parseInt(_0x55040b(0x1ba))/0x4+parseInt(_0x55040b(0x11e))/0x5+-parseInt(_0x55040b(0x1ed))/0x6+-parseInt(_0x55040b(0x11d))/0x7+-parseInt(_0x55040b(0x173))/0x8*(-parseInt(_0x55040b(0x170))/0x9);if(_0x1d89d7===_0x521b58)break;else _0x2c3555['push'](_0x2c3555['shift']());}catch(_0x4fbd8d){_0x2c3555['push'](_0x2c3555['shift']());}}}(a3_0x4c44,0xb6981));const APP_VERSION=a3_0x2f8036(0x1e5),API_URL=a3_0x2f8036(0x158),GRID_H=0x3c,KEY_SESSIONS=a3_0x2f8036(0x115),KEY_SETTINGS=a3_0x2f8036(0x11f),KEY_CLIENTS='uc_client_list';let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x2f8036(0x1d5),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x1e1a80=a3_0x2f8036,_0xa88bf2=(function(){let _0x3956bd=!![];return function(_0x69dfb2,_0x179865){const _0x3871e3=_0x3956bd?function(){const _0x4b7b7f=a3_0x2541;if(_0x179865){const _0x4bbd6c=_0x179865[_0x4b7b7f(0x1b1)](_0x69dfb2,arguments);return _0x179865=null,_0x4bbd6c;}}:function(){};return _0x3956bd=![],_0x3871e3;};}()),_0x5119eb=_0xa88bf2(this,function(){const _0x2207be=a3_0x2541;return _0x5119eb['toString']()[_0x2207be(0x1af)](_0x2207be(0x1c8))[_0x2207be(0x1c0)]()[_0x2207be(0x18a)](_0x5119eb)[_0x2207be(0x1af)](_0x2207be(0x1c8));});_0x5119eb();try{const _0x4ab0a7=window[_0x1e1a80(0x12a)]?.[_0x1e1a80(0x12c)];if(!_0x4ab0a7)return;_0x4ab0a7[_0x1e1a80(0x1a3)](),_0x4ab0a7[_0x1e1a80(0x17b)]();try{_0x4ab0a7[_0x1e1a80(0x102)](_0x1e1a80(0x16c)),_0x4ab0a7[_0x1e1a80(0x175)]&&_0x4ab0a7[_0x1e1a80(0x175)](_0x1e1a80(0x16c));}catch(_0x4ea511){console[_0x1e1a80(0x188)](_0x1e1a80(0x172),_0x4ea511);}try{_0x4ab0a7[_0x1e1a80(0x178)]&&(_0x4ab0a7[_0x1e1a80(0x178)][_0x1e1a80(0x151)](),_0x4ab0a7[_0x1e1a80(0x178)][_0x1e1a80(0x15c)](),_0x4ab0a7[_0x1e1a80(0x178)][_0x1e1a80(0x152)](function(){const _0xb8df=_0x1e1a80;window[_0xb8df(0x14a)][_0xb8df(0xfb)]=_0xb8df(0x13a);}));}catch(_0x199926){console[_0x1e1a80(0x188)](_0x1e1a80(0x1cd),_0x199926);}try{if(_0x4ab0a7[_0x1e1a80(0x185)])_0x4ab0a7[_0x1e1a80(0x185)]();}catch(_0x52055a){}}catch(_0x4e1963){console[_0x1e1a80(0x174)](_0x1e1a80(0x112),_0x4e1963);}}());function isAdmin(){const _0x19f185=a3_0x2f8036;try{const _0x2a4c97=Number(window[_0x19f185(0x12a)]?.[_0x19f185(0x12c)]?.[_0x19f185(0x1a1)]?.['user']?.['id']);return _0x2a4c97===0xbaf7174;}catch(_0x5448ff){return![];}}const DataManager={'saveLocally'(){const _0x2fe41f=a3_0x2f8036;try{localStorage[_0x2fe41f(0x177)](KEY_SESSIONS,JSON[_0x2fe41f(0x171)](sessions)),localStorage[_0x2fe41f(0x177)](KEY_CLIENTS,JSON[_0x2fe41f(0x171)](clients)),localStorage[_0x2fe41f(0x177)](KEY_SETTINGS,JSON[_0x2fe41f(0x171)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x521f9e){}},'loadLocal'(){const _0x13fed4=a3_0x2f8036;try{const _0x1c66b2=localStorage[_0x13fed4(0x146)](KEY_SESSIONS);if(_0x1c66b2)sessions=JSON[_0x13fed4(0x122)](_0x1c66b2);const _0x24d643=localStorage[_0x13fed4(0x146)](KEY_CLIENTS);if(_0x24d643)clients=JSON[_0x13fed4(0x122)](_0x24d643);const _0x228071=localStorage[_0x13fed4(0x146)](KEY_SETTINGS);if(_0x228071){const _0x6090c5=JSON[_0x13fed4(0x122)](_0x228071);if(_0x6090c5[_0x13fed4(0x105)])availabilityPattern=_0x6090c5[_0x13fed4(0x105)];if(_0x6090c5[_0x13fed4(0x1a7)])specialRanges=_0x6090c5[_0x13fed4(0x1a7)];if(_0x6090c5[_0x13fed4(0x1db)])dateExceptions=_0x6090c5[_0x13fed4(0x1db)];}}catch(_0x1fa834){}},async 'syncLoad'(){const _0x410c8f=a3_0x2f8036,_0x3dd8e0=new Date(),_0x17984e=_0x3dd8e0[_0x410c8f(0x1cc)]()+'-'+String(_0x3dd8e0[_0x410c8f(0x159)]()+0x1)[_0x410c8f(0x126)](0x2,'0'),_0x4aab90=new Date(_0x3dd8e0);_0x4aab90[_0x410c8f(0x199)](_0x3dd8e0[_0x410c8f(0x159)]()+0x1);const _0x5da950=_0x4aab90[_0x410c8f(0x1cc)]()+'-'+String(_0x4aab90['getMonth']()+0x1)[_0x410c8f(0x126)](0x2,'0'),_0x56f883=Date['now']();try{const _0x343a14=window[_0x410c8f(0x12a)]?.['WebApp'],_0x367c45=_0x343a14?.[_0x410c8f(0x1d0)]||'',[_0x287d2c,_0x358327]=await Promise[_0x410c8f(0x1a0)]([fetch(API_URL,{'method':_0x410c8f(0x133),'body':JSON['stringify']({'action':_0x410c8f(0x1a2),'init_data':_0x367c45,'month_str':_0x17984e})})[_0x410c8f(0xf7)](_0xd20828=>_0xd20828[_0x410c8f(0xf6)]()),fetch(API_URL,{'method':'POST','body':JSON[_0x410c8f(0x171)]({'action':'client_load','init_data':_0x367c45,'month_str':_0x5da950})})[_0x410c8f(0xf7)](_0x20e262=>_0x20e262[_0x410c8f(0xf6)]())]);if(lastUserActionTime>_0x56f883){console[_0x410c8f(0x188)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x287d2c['ok'])this['applyData'](_0x287d2c[_0x410c8f(0xf8)],_0x17984e);if(_0x358327['ok'])this['applyData'](_0x358327[_0x410c8f(0xf8)],_0x5da950);this[_0x410c8f(0x1b8)]();}catch(_0x4fdb2f){}},'applyData'(_0x5b2b1e,_0x3efc57){const _0x2a911c=a3_0x2f8036;if(!_0x5b2b1e)return;if(_0x5b2b1e[_0x2a911c(0x106)]){if(_0x5b2b1e[_0x2a911c(0x106)][_0x2a911c(0x105)])availabilityPattern=_0x5b2b1e[_0x2a911c(0x106)][_0x2a911c(0x105)];if(_0x5b2b1e['settings']['ranges'])specialRanges=_0x5b2b1e['settings']['ranges'];if(_0x5b2b1e[_0x2a911c(0x106)][_0x2a911c(0x1db)])dateExceptions=_0x5b2b1e['settings'][_0x2a911c(0x1db)];}if(_0x5b2b1e['clients']&&Array[_0x2a911c(0x195)](_0x5b2b1e[_0x2a911c(0x1de)]))clients=_0x5b2b1e[_0x2a911c(0x1de)];_0x5b2b1e[_0x2a911c(0x14d)]&&(coachProfiles={...coachProfiles,..._0x5b2b1e[_0x2a911c(0x14d)]}),_0x5b2b1e['calendar']&&(sessions=sessions['filter'](_0xd1d360=>!_0xd1d360[_0x2a911c(0xf5)][_0x2a911c(0x124)](_0x3efc57)),Object['keys'](_0x5b2b1e[_0x2a911c(0x1e6)])['forEach'](_0x562c2b=>{const _0x586503=_0x2a911c,_0x19dd9c=_0x5b2b1e[_0x586503(0x1e6)][_0x562c2b];_0x19dd9c[_0x586503(0x113)](_0x3bcf18=>{const _0x11ae25=_0x586503;sessions[_0x11ae25(0xf3)]({'id':_0x3bcf18['i'],'clientId':_0x3bcf18['c'],'coachId':_0x3bcf18['cid'],'dateStr':_0x3efc57+'-'+_0x562c2b[_0x11ae25(0x126)](0x2,'0'),'start':_0x3bcf18['s'],'end':_0x3bcf18['e'],'note':_0x3bcf18['n']||'','status':_0x3bcf18['st']||'planned','seriesId':_0x3bcf18[_0x11ae25(0x134)]});});})),reRenderBlocks();}};function init(){const _0xd9a3e0=a3_0x2f8036;DataManager[_0xd9a3e0(0x16b)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0xd9a3e0(0x13f)]('matrixViewport')['addEventListener']('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x496f0f=a3_0x2f8036,_0x4a1eac=document['getElementById'](_0x496f0f(0x119)),_0x3a22d5=document['getElementById']('timeLineBadge');_0x4a1eac['innerHTML']='',_0x4a1eac['appendChild'](_0x3a22d5);for(let _0x3581e0=0x0;_0x3581e0<0x18;_0x3581e0++){const _0x96d1c8=document['createElement'](_0x496f0f(0x1a8));_0x96d1c8[_0x496f0f(0x17f)]=_0x496f0f(0x104);if(_0x3581e0>0x0)_0x96d1c8[_0x496f0f(0x118)]=_0x496f0f(0x166)+String(_0x3581e0)['padStart'](0x2,'0')+_0x496f0f(0x1ee);_0x4a1eac[_0x496f0f(0x12b)](_0x96d1c8);}}function renderDayRange(_0x1ec6a3,_0x8dcaa0){const _0x44ed13=a3_0x2f8036,_0x4efbb2=document[_0x44ed13(0x13f)](_0x44ed13(0xf2)),_0x3d649b=document['getElementById'](_0x44ed13(0x1d8)),_0x177e53=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x7b669=new Date();_0x7b669[_0x44ed13(0x191)](0x0,0x0,0x0,0x0);const _0x55542c=getLocalDateStr(new Date());for(let _0x46555e=_0x1ec6a3;_0x46555e<=_0x8dcaa0;_0x46555e++){const _0x2e13b2=new Date(_0x7b669);_0x2e13b2['setDate'](_0x2e13b2[_0x44ed13(0x137)]()+_0x46555e);const _0x5ce883=getLocalDateStr(_0x2e13b2);let _0x2c0947=_0x2e13b2[_0x44ed13(0x153)]()-0x1;if(_0x2c0947===-0x1)_0x2c0947=0x6;const _0x417332=_0x5ce883===_0x55542c,_0x2d9bd5=document[_0x44ed13(0x13b)]('div');_0x2d9bd5[_0x44ed13(0x17f)]=_0x44ed13(0x169)+(_0x417332?_0x44ed13(0x1e7):''),_0x2d9bd5['setAttribute'](_0x44ed13(0xfa),_0x5ce883),_0x2d9bd5[_0x44ed13(0x118)]=_0x44ed13(0x1bd)+_0x177e53[_0x2c0947]+'</div><div\x20class=\x22dch-num\x22>'+_0x2e13b2[_0x44ed13(0x137)]()+_0x44ed13(0x168),_0x4efbb2[_0x44ed13(0x12b)](_0x2d9bd5);const _0x24d0b4=document['createElement'](_0x44ed13(0x1a8));_0x24d0b4[_0x44ed13(0x17f)]=_0x44ed13(0x14b)+(_0x417332?_0x44ed13(0x1e7):''),_0x24d0b4[_0x44ed13(0x18c)](_0x44ed13(0xfa),_0x5ce883),_0x24d0b4[_0x44ed13(0x18c)](_0x44ed13(0x17d),_0x2c0947),_0x3d649b['appendChild'](_0x24d0b4);}}function reRenderBlocks(){const _0x571a54=a3_0x2f8036;document[_0x571a54(0x19a)](_0x571a54(0x142))['forEach'](_0x4b8058=>{const _0x487cf4=_0x571a54;_0x4b8058[_0x487cf4(0x19a)](_0x487cf4(0x19d))[_0x487cf4(0x113)](_0x540634=>_0x540634[_0x487cf4(0x1b0)]());const _0x18abfb=_0x4b8058[_0x487cf4(0x1e8)](_0x487cf4(0xfa)),_0x2ce222=parseInt(_0x4b8058[_0x487cf4(0x1e8)]('data-day-idx')),_0x4f7ef1=Math[_0x487cf4(0x1ce)](_0x4b8058[_0x487cf4(0x138)]);(availabilityPattern[_0x2ce222]||[])[_0x487cf4(0x113)](_0x3c3276=>{const _0x59f19b=_0x487cf4,_0x11d560=document[_0x59f19b(0x13b)]('div');_0x11d560[_0x59f19b(0x17f)]=_0x59f19b(0x1c7),_0x11d560[_0x59f19b(0x121)]['top']=_0x3c3276*GRID_H+'px',_0x11d560[_0x59f19b(0x121)][_0x59f19b(0x187)]='-'+_0x4f7ef1+_0x59f19b(0x108)+_0x3c3276*GRID_H+'px',_0x4b8058[_0x59f19b(0x12b)](_0x11d560);});if(specialRanges['length']>0x0){const _0x5a5bd1=new Date(_0x18abfb+_0x487cf4(0x136))[_0x487cf4(0x1ab)](),_0x361ffc=new Date(_0x18abfb+_0x487cf4(0x149))[_0x487cf4(0x1ab)]();specialRanges[_0x487cf4(0x113)](_0x1d6c54=>{const _0x397016=_0x487cf4,_0x12c1ff=new Date(_0x1d6c54[_0x397016(0x1a5)])[_0x397016(0x1ab)](),_0x13c960=new Date(_0x1d6c54[_0x397016(0x13d)])[_0x397016(0x1ab)](),_0x58cba3=Math[_0x397016(0xfd)](_0x5a5bd1,_0x12c1ff),_0x336a90=Math['min'](_0x361ffc,_0x13c960);if(_0x58cba3<_0x336a90){const _0x406828=(_0x58cba3-_0x5a5bd1)/0x36ee80*GRID_H,_0xf9294=(_0x336a90-_0x58cba3)/0x36ee80*GRID_H,_0x7250fb=document[_0x397016(0x13b)](_0x397016(0x1a8));_0xf9294>=23.5*GRID_H?(_0x7250fb[_0x397016(0x17f)]=_0x397016(0x15f),_0x7250fb[_0x397016(0x121)]['backgroundPosition']='-'+_0x4f7ef1+'px\x200px'):(_0x7250fb[_0x397016(0x17f)]='blocked-range-part\x20stripe-bg',_0x7250fb[_0x397016(0x121)][_0x397016(0x10e)]=_0x406828+'px',_0x7250fb[_0x397016(0x121)][_0x397016(0x1b6)]=_0xf9294+'px',_0x7250fb[_0x397016(0x121)]['backgroundPosition']='-'+_0x4f7ef1+_0x397016(0x108)+_0x406828+'px'),_0x4b8058[_0x397016(0x12b)](_0x7250fb);}});}renderEventsForColumn(_0x4b8058,_0x18abfb);});}function renderEventsForColumn(_0x464eb1,_0xea6f37){const _0x23c2ea=a3_0x2f8036,_0x4192d8=sessions[_0x23c2ea(0x1eb)](_0x2ac80b=>_0x2ac80b[_0x23c2ea(0xf5)]===_0xea6f37),_0x5484ae=_0x4192d8[_0x23c2ea(0x19b)](_0x3310d3=>{const _0x474682=_0x23c2ea,[_0x126c4d,_0x3b5423]=_0x3310d3['start'][_0x474682(0x186)](':')[_0x474682(0x19b)](Number),[_0x48a00d,_0x968dba]=_0x3310d3[_0x474682(0x13d)][_0x474682(0x186)](':')['map'](Number);return{'data':_0x3310d3,'start':_0x126c4d*0x3c+_0x3b5423,'end':_0x48a00d*0x3c+_0x968dba,'colIndex':0x0};});_0x5484ae['sort']((_0x41e6b5,_0x3acaf5)=>_0x41e6b5[_0x23c2ea(0x1a5)]-_0x3acaf5[_0x23c2ea(0x1a5)]||_0x3acaf5[_0x23c2ea(0x13d)]-_0x3acaf5[_0x23c2ea(0x1a5)]-(_0x41e6b5[_0x23c2ea(0x13d)]-_0x41e6b5[_0x23c2ea(0x1a5)]));const _0x47f5de=[];_0x5484ae[_0x23c2ea(0x113)](_0x3dbdbe=>{const _0x1362ac=_0x23c2ea;let _0x210f6d=![];for(let _0x28cac4=0x0;_0x28cac4<_0x47f5de[_0x1362ac(0x1a9)];_0x28cac4++){const _0xae51a3=_0x47f5de[_0x28cac4];if(_0x3dbdbe[_0x1362ac(0x1a5)]>=_0xae51a3[_0xae51a3[_0x1362ac(0x1a9)]-0x1][_0x1362ac(0x13d)]){_0xae51a3[_0x1362ac(0xf3)](_0x3dbdbe),_0x3dbdbe[_0x1362ac(0x10b)]=_0x28cac4,_0x210f6d=!![];break;}}!_0x210f6d&&(_0x47f5de[_0x1362ac(0xf3)]([_0x3dbdbe]),_0x3dbdbe['colIndex']=_0x47f5de[_0x1362ac(0x1a9)]-0x1);}),_0x5484ae['forEach'](_0x82250b=>{const _0x558473=_0x23c2ea;let _0x18ff6a=0x0;_0x5484ae['forEach'](_0x18fdd9=>{const _0x3a2b11=a3_0x2541;if(Math[_0x3a2b11(0xfd)](_0x82250b[_0x3a2b11(0x1a5)],_0x18fdd9['start'])<Math[_0x3a2b11(0x1a6)](_0x82250b[_0x3a2b11(0x13d)],_0x18fdd9[_0x3a2b11(0x13d)])&&_0x18fdd9['colIndex']>_0x18ff6a)_0x18ff6a=_0x18fdd9[_0x3a2b11(0x10b)];});const _0xdeffb6=_0x18ff6a+0x1,_0x40a2ae=0x64/_0xdeffb6,_0x18ca03=_0x82250b[_0x558473(0x10b)]*_0x40a2ae,_0x2c0b04=document[_0x558473(0x13b)](_0x558473(0x1a8)),_0x251120=_0x82250b[_0x558473(0xf8)];let _0x1a4cd4='#0a84ff';if(clients&&clients[_0x558473(0x1a9)]>0x0){const _0xe8b644=clients[_0x558473(0x14f)](_0x1c0311=>String(_0x1c0311['id'])===String(_0x251120[_0x558473(0x183)]));if(_0xe8b644&&_0xe8b644[_0x558473(0x190)])_0x1a4cd4=_0xe8b644[_0x558473(0x190)];}const _0x4418da=_0x251120[_0x558473(0x184)]===_0x558473(0x10f),_0x180857=_0x4418da?0x1:0.45;_0x2c0b04[_0x558473(0x17f)]='event-card'+(_0x4418da?_0x558473(0x145):''),_0x2c0b04[_0x558473(0x121)]['backgroundColor']=hexToRgba(_0x1a4cd4,_0x180857),_0x2c0b04[_0x558473(0x121)][_0x558473(0x13e)]=_0x1a4cd4;const _0x248a09=_0x82250b[_0x558473(0x1a5)]/0x3c*GRID_H,_0x448e19=(_0x82250b[_0x558473(0x13d)]-_0x82250b['start'])/0x3c*GRID_H;_0x2c0b04[_0x558473(0x121)][_0x558473(0x10e)]=_0x248a09+'px',_0x2c0b04[_0x558473(0x121)][_0x558473(0x1b6)]=Math['max'](_0x448e19,0x14)+'px',_0x2c0b04[_0x558473(0x121)]['width']='calc('+_0x40a2ae+_0x558473(0x1e1),_0x2c0b04[_0x558473(0x121)][_0x558473(0x101)]=_0x558473(0x147)+_0x18ca03+_0x558473(0x16e),_0x2c0b04[_0x558473(0x121)][_0x558473(0x125)]=0xa+_0x82250b['colIndex'];if(_0x40a2ae<0x55)_0x2c0b04[_0x558473(0x14c)][_0x558473(0x189)](_0x558473(0x1ca));let _0x11224d='';if(_0x251120[_0x558473(0x117)])_0x11224d+='<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>';if(_0x4418da)_0x11224d+=_0x558473(0x14e);_0x2c0b04[_0x558473(0x118)]=_0x558473(0x167)+_0x251120[_0x558473(0x1a5)]+_0x558473(0x1d4)+_0x251120[_0x558473(0x13d)]+_0x558473(0x132)+_0x11224d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2c0b04[_0x558473(0x19e)]=_0x45553c=>{const _0x9bf623=_0x558473;_0x45553c[_0x9bf623(0x1ea)](),openDetails(_0x251120);},_0x464eb1[_0x558473(0x12b)](_0x2c0b04);});}function openAnalytics(){const _0x498b32=a3_0x2f8036,_0x40c6ef=document[_0x498b32(0x1bb)](_0x498b32(0x141));setAnalyticsPeriod('week',_0x40c6ef),openSheet(_0x498b32(0x154));}function setAnalyticsPeriod(_0x5b6fa0,_0x15ac66){const _0x560947=a3_0x2f8036;currentAnPeriod=_0x5b6fa0,document[_0x560947(0x19a)](_0x560947(0x141))[_0x560947(0x113)](_0x2038a7=>_0x2038a7[_0x560947(0x14c)][_0x560947(0x1b0)](_0x560947(0x19f)));if(_0x15ac66)_0x15ac66[_0x560947(0x14c)][_0x560947(0x189)](_0x560947(0x19f));const _0x233532=document['getElementById'](_0x560947(0x1c1));_0x233532[_0x560947(0x121)][_0x560947(0x156)]=_0x5b6fa0==='custom'?_0x560947(0x10c):_0x560947(0x15d);const _0x30bde8=new Date();let _0x47dff7=new Date(),_0x2ec5e9=new Date();if(_0x5b6fa0==='week')_0x47dff7=getStartOfWeek(_0x30bde8),_0x2ec5e9=new Date(_0x47dff7),_0x2ec5e9[_0x560947(0x1dd)](_0x2ec5e9[_0x560947(0x137)]()+0x6);else{if(_0x5b6fa0===_0x560947(0x10a))_0x47dff7=new Date(_0x30bde8[_0x560947(0x1cc)](),_0x30bde8[_0x560947(0x159)](),0x1),_0x2ec5e9=new Date(_0x30bde8['getFullYear'](),_0x30bde8[_0x560947(0x159)]()+0x1,0x0);else{!document['getElementById'](_0x560947(0x198))[_0x560947(0x194)]&&(document[_0x560947(0x13f)](_0x560947(0x198))['value']=getLocalDateStr(_0x30bde8),document[_0x560947(0x13f)](_0x560947(0x18f))[_0x560947(0x194)]=getLocalDateStr(_0x30bde8));refreshAnalytics();return;}}document[_0x560947(0x13f)]('anStart')[_0x560947(0x194)]=getLocalDateStr(_0x47dff7),document[_0x560947(0x13f)]('anEnd')['value']=getLocalDateStr(_0x2ec5e9),refreshAnalytics();}function refreshAnalytics(){const _0x226cf5=a3_0x2f8036,_0x31cdfc=document[_0x226cf5(0x13f)](_0x226cf5(0x198))[_0x226cf5(0x194)],_0x23fce5=document['getElementById']('anEnd')[_0x226cf5(0x194)];if(!_0x31cdfc||!_0x23fce5)return;const _0x444004=sessions['filter'](_0x350872=>_0x350872[_0x226cf5(0xf5)]>=_0x31cdfc&&_0x350872[_0x226cf5(0xf5)]<=_0x23fce5&&_0x350872[_0x226cf5(0x184)]!=='cancelled'),_0xce7607=_0x444004[_0x226cf5(0x1a9)],_0x5cdfa4=_0x444004[_0x226cf5(0x1eb)](_0x5c79a9=>_0x5c79a9[_0x226cf5(0x184)]===_0x226cf5(0x10f))[_0x226cf5(0x1a9)],_0xb67f01=_0xce7607>0x0?Math[_0x226cf5(0x1ce)](_0x5cdfa4/_0xce7607*0x64):0x0;document[_0x226cf5(0x13f)]('anPercent')[_0x226cf5(0x17c)]=_0xb67f01+'%',document[_0x226cf5(0x13f)]('anTotalStats')['textContent']=_0x5cdfa4+_0x226cf5(0x1ac)+_0xce7607+_0x226cf5(0x179);const _0x5f2b1c=document['getElementById']('anDonutCircle'),_0x1da764=0x2*Math['PI']*0x23,_0x3983f0=_0x1da764-_0xb67f01/0x64*_0x1da764;_0x5f2b1c[_0x226cf5(0x121)][_0x226cf5(0x19c)]=_0x3983f0;const _0xf57894={};_0x444004['forEach'](_0x28f197=>{const _0x3abb85=_0x226cf5,_0x159ae3=_0x28f197[_0x3abb85(0x1b9)]||_0x3abb85(0x15b);if(!_0xf57894[_0x159ae3]){const _0x1d8b38='#'+_0x159ae3['toString']()[_0x3abb85(0x148)](0x0,0x6);_0xf57894[_0x159ae3]={'total':0x0,'done':0x0,'color':_0x1d8b38};}_0xf57894[_0x159ae3][_0x3abb85(0x1df)]++;if(_0x28f197[_0x3abb85(0x184)]===_0x3abb85(0x10f))_0xf57894[_0x159ae3]['done']++;});const _0x58444b=document[_0x226cf5(0x13f)](_0x226cf5(0x150));_0x58444b[_0x226cf5(0x118)]='';const _0x2722fa=Object[_0x226cf5(0xf4)](_0xf57894)[_0x226cf5(0x1c6)]((_0x18d708,_0x4a79fa)=>_0x4a79fa[0x1][_0x226cf5(0x1df)]-_0x18d708[0x1][_0x226cf5(0x1df)]);if(_0x2722fa[_0x226cf5(0x1a9)]===0x0){_0x58444b[_0x226cf5(0x118)]=_0x226cf5(0x1bc);return;}_0x2722fa['forEach'](([_0x4a923c,_0x41e5e3])=>{const _0x1a1483=_0x226cf5,_0x372598=Math[_0x1a1483(0x1ce)](_0x41e5e3[_0x1a1483(0x1aa)]/_0x41e5e3[_0x1a1483(0x1df)]*0x64),_0x3929a3=document['createElement'](_0x1a1483(0x1a8));_0x3929a3[_0x1a1483(0x17f)]=_0x1a1483(0x193),_0x3929a3[_0x1a1483(0x121)][_0x1a1483(0x13e)]=_0x41e5e3['color'],_0x3929a3[_0x1a1483(0x118)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x4a923c[_0x1a1483(0x148)](0x0,0x5)+_0x1a1483(0x16f)+_0x41e5e3[_0x1a1483(0x1aa)]+_0x1a1483(0x18d)+_0x41e5e3['total']+_0x1a1483(0x16a)+_0x372598+_0x1a1483(0x111),_0x58444b[_0x1a1483(0x12b)](_0x3929a3);});}function openDetails(_0x53349a){const _0x5f1600=a3_0x2f8036;currentSession=_0x53349a;const _0x2fa792=new Date(_0x53349a['dateStr']),_0x9ee0c8=_0x2fa792[_0x5f1600(0x128)](_0x5f1600(0x1b4),{'weekday':_0x5f1600(0x1b5),'day':_0x5f1600(0x17e),'month':_0x5f1600(0x1b5)});document[_0x5f1600(0x13f)](_0x5f1600(0x140))[_0x5f1600(0x17c)]=_0x9ee0c8['charAt'](0x0)['toUpperCase']()+_0x9ee0c8['slice'](0x1),document['getElementById'](_0x5f1600(0x1cb))[_0x5f1600(0x17c)]=_0x53349a[_0x5f1600(0x1a5)]+_0x5f1600(0x1d4)+_0x53349a[_0x5f1600(0x13d)],document[_0x5f1600(0x13f)](_0x5f1600(0x1c5))[_0x5f1600(0x17c)]=_0x53349a[_0x5f1600(0x1c9)]||_0x5f1600(0x11b);const _0x3e7612=document[_0x5f1600(0x13f)](_0x5f1600(0x12d)),_0x3793bf=document[_0x5f1600(0x13f)](_0x5f1600(0x16d)),_0x370d95=_0x3793bf[_0x5f1600(0x1bb)]('.btn-cancel'),_0x358fd1=_0x3793bf[_0x5f1600(0x1bb)](_0x5f1600(0x107)),_0x4b6b9b=document[_0x5f1600(0x13f)]('cancelHint');if(_0x53349a['status']===_0x5f1600(0x10f))_0x3e7612[_0x5f1600(0x17c)]=_0x5f1600(0x176),_0x3e7612[_0x5f1600(0x121)][_0x5f1600(0x190)]=_0x5f1600(0x120),_0x3793bf[_0x5f1600(0x121)][_0x5f1600(0x156)]=_0x5f1600(0x15d);else{_0x3e7612['textContent']=_0x5f1600(0xfe),_0x3e7612[_0x5f1600(0x121)][_0x5f1600(0x190)]=_0x5f1600(0xfc),_0x3793bf['style'][_0x5f1600(0x156)]=_0x5f1600(0x109);const _0x384ef9=new Date(_0x53349a[_0x5f1600(0xf5)]+'T'+_0x53349a[_0x5f1600(0x1a5)]),_0x124ea2=new Date(),_0x1215f1=(_0x384ef9-_0x124ea2)/(0x3e8*0x3c*0x3c),_0x48b670=coachProfiles[_0x53349a[_0x5f1600(0x1b9)]]&&coachProfiles[_0x53349a[_0x5f1600(0x1b9)]][_0x5f1600(0xf9)]?parseInt(coachProfiles[_0x53349a['coachId']][_0x5f1600(0xf9)]):0x18;if(_0x48b670===0x0||_0x1215f1>=_0x48b670)_0x370d95['style'][_0x5f1600(0x156)]=_0x5f1600(0x109),_0x358fd1[_0x5f1600(0x121)][_0x5f1600(0x156)]=_0x5f1600(0x109),_0x4b6b9b[_0x5f1600(0x121)][_0x5f1600(0x156)]='none';else{_0x370d95[_0x5f1600(0x121)]['display']=_0x5f1600(0x15d),_0x358fd1[_0x5f1600(0x121)][_0x5f1600(0x156)]=_0x5f1600(0x15d),_0x4b6b9b[_0x5f1600(0x121)][_0x5f1600(0x156)]=_0x5f1600(0x109);let _0x4ec340=_0x48b670===0x0?_0x5f1600(0x12e):_0x5f1600(0x143)+_0x48b670+_0x5f1600(0x155);_0x4b6b9b[_0x5f1600(0x17c)]=_0x5f1600(0x1c2)+_0x4ec340+_0x5f1600(0x116);}}document[_0x5f1600(0x13f)](_0x5f1600(0x18e))[_0x5f1600(0x14c)]['add'](_0x5f1600(0x19f)),document[_0x5f1600(0x13f)]('detailsSheet')[_0x5f1600(0x14c)][_0x5f1600(0x189)](_0x5f1600(0x1cf));}function closeAllSheets(){const _0x2d1b01=a3_0x2f8036;document[_0x2d1b01(0x13f)](_0x2d1b01(0x18e))[_0x2d1b01(0x14c)]['remove']('active'),document[_0x2d1b01(0x19a)](_0x2d1b01(0x1da))[_0x2d1b01(0x113)](_0x5d4a33=>_0x5d4a33[_0x2d1b01(0x14c)][_0x2d1b01(0x1b0)]('open'));}function openSheet(_0x5ab303){const _0x3b4fcc=a3_0x2f8036;document[_0x3b4fcc(0x13f)](_0x3b4fcc(0x18e))['classList'][_0x3b4fcc(0x189)](_0x3b4fcc(0x19f)),document[_0x3b4fcc(0x13f)](_0x5ab303)['classList'][_0x3b4fcc(0x189)](_0x3b4fcc(0x1cf));}function getLocalDateStr(_0x30feee){const _0x1502bc=a3_0x2f8036,_0x516bfa=_0x30feee[_0x1502bc(0x1cc)](),_0x3df7ee=String(_0x30feee['getMonth']()+0x1)[_0x1502bc(0x126)](0x2,'0'),_0x4243aa=String(_0x30feee[_0x1502bc(0x137)]())['padStart'](0x2,'0');return _0x516bfa+'-'+_0x3df7ee+'-'+_0x4243aa;}function getStartOfWeek(_0x20d07f){const _0x54fd9f=a3_0x2f8036,_0x53f97a=new Date(_0x20d07f),_0x40c17b=_0x53f97a['getDay'](),_0x1a1f2e=_0x53f97a[_0x54fd9f(0x137)]()-_0x40c17b+(_0x40c17b===0x0?-0x6:0x1);return _0x53f97a[_0x54fd9f(0x1dd)](_0x1a1f2e),_0x53f97a[_0x54fd9f(0x191)](0x0,0x0,0x0,0x0),_0x53f97a;}function scrollToToday(){const _0x405bd6=getLocalDateStr(new Date());setTimeout(()=>{const _0x36e48e=a3_0x2541,_0x3db6e3=document[_0x36e48e(0x1bb)](_0x36e48e(0x157)+_0x405bd6+'\x22]');if(_0x3db6e3){const _0x1283a9=document[_0x36e48e(0x13f)](_0x36e48e(0x1e2)),_0x4d2e0d=_0x3db6e3[_0x36e48e(0x138)]-_0x1283a9[_0x36e48e(0x18b)]/0x2+_0x3db6e3[_0x36e48e(0x1d6)]/0x2;_0x1283a9['scrollTo']({'left':_0x4d2e0d,'behavior':_0x36e48e(0x129)}),_0x1283a9['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x518992=a3_0x2f8036,_0x1892ff=new Date(),_0x91f36a=document[_0x518992(0x13f)](_0x518992(0x110)),_0x43704e=document[_0x518992(0x13f)](_0x518992(0x11a)),_0x5e5f47=(_0x1892ff[_0x518992(0x11c)]()*0x3c+_0x1892ff[_0x518992(0x182)]())/0x3c*GRID_H;_0x91f36a[_0x518992(0x121)][_0x518992(0x10e)]=_0x5e5f47+'px',_0x91f36a[_0x518992(0x121)][_0x518992(0x156)]=_0x518992(0x109),_0x43704e[_0x518992(0x121)][_0x518992(0x10e)]=_0x5e5f47+'px',_0x43704e[_0x518992(0x121)][_0x518992(0x156)]=_0x518992(0x109),_0x43704e[_0x518992(0x17c)]=String(_0x1892ff['getHours']())[_0x518992(0x126)](0x2,'0')+':'+String(_0x1892ff['getMinutes']())[_0x518992(0x126)](0x2,'0');}function onScroll(){const _0x5123a9=a3_0x2f8036,_0x25ef72=document['getElementById'](_0x5123a9(0x1e2)),_0x5aae31=document[_0x5123a9(0x19a)](_0x5123a9(0x161));for(let _0x124624 of _0x5aae31)if(_0x124624[_0x5123a9(0x138)]>=_0x25ef72['scrollLeft']){const _0x4eb4e7=new Date(_0x124624[_0x5123a9(0x1e8)](_0x5123a9(0xfa)));document[_0x5123a9(0x13f)](_0x5123a9(0xf1))[_0x5123a9(0x17c)]=_0x4eb4e7[_0x5123a9(0x1d9)]('ru',{'month':'long'})[_0x5123a9(0x130)]()+'\x20'+_0x4eb4e7[_0x5123a9(0x1cc)]();break;}}function showToast(_0x256cc0){const _0x5145c7=a3_0x2f8036,_0x1bf078=document['getElementById'](_0x5145c7(0x1b3));_0x1bf078[_0x5145c7(0x17c)]=_0x256cc0,_0x1bf078[_0x5145c7(0x14c)][_0x5145c7(0x189)]('show'),setTimeout(()=>_0x1bf078['classList'][_0x5145c7(0x1b0)]('show'),0x7d0);}function a3_0x4c44(){const _0x4f7c6a=['toUpperCase','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','POST','sid','keys','T00:00:00','getDate','offsetLeft','substring','router.html','createElement','#ff453a','end','borderLeftColor','getElementById','detDate','.period-switch\x20.p-btn','.day-column','–∑–∞\x20','syncLoad','\x20status-completed','getItem','calc(','substr','T23:59:59','location','day-column\x20','classList','coach_profiles','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','find','analyticsList','show','onClick','getDay','analyticsSheet','\x20—á.','display','.day-col-header[data-date=\x22','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','getMonth','scrollLeft','Unknown','offClick','none','4fxXRWl','day-off-overlay\x20stripe-bg','test','.day-col-header','rgba(','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','rsSlotsGrid','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','<span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','</div>','day-col-header\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','loadLocal','#050505','cancelContainer','%\x20+\x202px)','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','1017gHljKz','stringify','Error\x20setting\x20color:','243176DquEdF','error','setBackgroundColor','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','setItem','BackButton','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','ccTitle','expand','textContent','data-day-idx','numeric','className','customConfirm','ccText','getMinutes','clientId','status','disableVerticalSwipes','split','backgroundPosition','log','add','constructor','clientWidth','setAttribute','</span>\x20/\x20','overlay','anEnd','color','setHours','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','client-stat-card','value','isArray','join','now','anStart','setMonth','querySelectorAll','map','strokeDashoffset','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','onclick','active','all','initDataUnsafe','client_load','ready','fontWeight','start','min','ranges','div','length','done','getTime','\x20–∏–∑\x20','rs-time-btn','rs-date-chip','search','remove','apply','firstChild','toast','ru-RU','long','height','insertBefore','saveLocally','coachId','289488sxZRVM','querySelector','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','<div\x20class=\x22dch-day\x22>','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','client_cancel','toString','anCustomDates','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','.rs-date-chip','scrollWidth','detNote','sort','blocked-slot\x20stripe-bg','(((.+)+)+)+$','note','mini','detTime','getFullYear','Error\x20setting\x20back\x20button:','round','open','initData','createDocumentFragment','600','addEventListener','\x20-\x20','week','offsetWidth','336426kPgNEX','gridColumns','toLocaleString','.sheet','exceptions','</div><div\x20class=\x22dch-num\x22>','setDate','clients','total','ccYesBtn','%\x20-\x204px)','matrixViewport','button','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','v9.5-CLIENT-ANALYTICS','calendar','today','getAttribute','–û—Ç–º–µ–Ω–µ–Ω–æ','stopPropagation','filter','visible','7973976HMWoLD',':00</span>','headerMonth','daysHeaderTrack','push','entries','dateStr','json','then','data','cancel_window','data-date','href','var(--acc-blue)','max','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','rsDatesTrack','floor','left','setHeaderColor','<div\x20class=\x22rs-day-name\x22>','time-label','pattern','settings','.btn-reschedule','px\x20-','block','month','colIndex','flex','findIndex','top','completed','globalTimeLine','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Critical\x20TMA\x20Error:','forEach','518762jPPvYa','uc_client_sessions','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','seriesId','innerHTML','timeColumn','timeLineBadge','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','getHours','6175995URGxug','3731815QvYkgR','uc_client_settings','var(--acc-green)','style','parse','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','startsWith','zIndex','padStart','get_slots','toLocaleDateString','auto','Telegram','appendChild','WebApp','detStatus','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?'];a3_0x4c44=function(){return _0x4f7c6a;};return a3_0x4c44();}function handleInfiniteScroll(){const _0x504af2=a3_0x2f8036,_0x3942f4=document['getElementById'](_0x504af2(0x1e2)),_0x22c1c7=_0x3942f4[_0x504af2(0x15a)],_0x13237f=_0x3942f4[_0x504af2(0x1c4)],_0x382d8a=_0x3942f4['clientWidth'];if(_0x13237f-(_0x22c1c7+_0x382d8a)<0x12c){const _0x54b416=endOffset;endOffset+=0xe,renderDayRange(_0x54b416+0x1,endOffset),reRenderBlocks();}if(_0x22c1c7<0x12c){const _0x1ec4ed=startOffset;startOffset-=0xe,prependDays(startOffset,_0x1ec4ed-0x1),_0x3942f4[_0x504af2(0x15a)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0xb12eb,_0x3d4ffa){const _0x574538=a3_0x2f8036,_0x218aae=document[_0x574538(0x13f)](_0x574538(0xf2)),_0x22d856=document[_0x574538(0x13f)](_0x574538(0x1d8)),_0x3fca29=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2200ee=new Date();_0x2200ee[_0x574538(0x191)](0x0,0x0,0x0,0x0);const _0x402a62=getLocalDateStr(new Date()),_0x47eaf4=document[_0x574538(0x1d1)](),_0x5e5e4b=document[_0x574538(0x1d1)]();for(let _0x29f8f3=_0xb12eb;_0x29f8f3<=_0x3d4ffa;_0x29f8f3++){const _0x487610=new Date(_0x2200ee);_0x487610[_0x574538(0x1dd)](_0x487610[_0x574538(0x137)]()+_0x29f8f3);const _0x1c7fea=getLocalDateStr(_0x487610);let _0x5ccc48=_0x487610[_0x574538(0x153)]()-0x1;if(_0x5ccc48===-0x1)_0x5ccc48=0x6;const _0x257eb2=_0x1c7fea===_0x402a62,_0x471fcd=document['createElement'](_0x574538(0x1a8));_0x471fcd[_0x574538(0x17f)]=_0x574538(0x169)+(_0x257eb2?_0x574538(0x1e7):''),_0x471fcd['setAttribute'](_0x574538(0xfa),_0x1c7fea),_0x471fcd['innerHTML']=_0x574538(0x1bd)+_0x3fca29[_0x5ccc48]+_0x574538(0x1dc)+_0x487610[_0x574538(0x137)]()+_0x574538(0x168),_0x47eaf4[_0x574538(0x12b)](_0x471fcd);const _0x270d94=document['createElement'](_0x574538(0x1a8));_0x270d94[_0x574538(0x17f)]=_0x574538(0x14b)+(_0x257eb2?_0x574538(0x1e7):''),_0x270d94[_0x574538(0x18c)]('data-date',_0x1c7fea),_0x270d94['setAttribute'](_0x574538(0x17d),_0x5ccc48),_0x5e5e4b['appendChild'](_0x270d94);}_0x218aae[_0x574538(0x1b7)](_0x47eaf4,_0x218aae['firstChild']),_0x22d856[_0x574538(0x1b7)](_0x5e5e4b,_0x22d856['querySelector'](_0x574538(0x142)));}function hexToRgba(_0x7098b7,_0x276c3b){const _0x57f5ff=a3_0x2f8036;let _0x543430;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x57f5ff(0x160)](_0x7098b7))return _0x543430=_0x7098b7[_0x57f5ff(0x139)](0x1)[_0x57f5ff(0x186)](''),_0x543430['length']==0x3&&(_0x543430=[_0x543430[0x0],_0x543430[0x0],_0x543430[0x1],_0x543430[0x1],_0x543430[0x2],_0x543430[0x2]]),_0x543430='0x'+_0x543430[_0x57f5ff(0x196)](''),_0x57f5ff(0x162)+[_0x543430>>0x10&0xff,_0x543430>>0x8&0xff,_0x543430&0xff][_0x57f5ff(0x196)](',')+','+_0x276c3b+')';return'rgba(10,\x20132,\x20255,\x20'+_0x276c3b+')';}let confirmResolver=null;function showCustomConfirm(_0xeb33d0,_0x256db9,_0x161375=!![]){const _0x1890ff=a3_0x2f8036;document['getElementById'](_0x1890ff(0x17a))[_0x1890ff(0x17c)]=_0xeb33d0,document[_0x1890ff(0x13f)](_0x1890ff(0x181))[_0x1890ff(0x17c)]=_0x256db9;const _0x16339e=document[_0x1890ff(0x13f)](_0x1890ff(0x1e0));return _0x161375?(_0x16339e[_0x1890ff(0x121)][_0x1890ff(0x190)]=_0x1890ff(0x13c),_0x16339e[_0x1890ff(0x121)]['fontWeight']=_0x1890ff(0x1d2)):(_0x16339e[_0x1890ff(0x121)][_0x1890ff(0x190)]='#0a84ff',_0x16339e[_0x1890ff(0x121)][_0x1890ff(0x1a4)]=_0x1890ff(0x1d2)),new Promise(_0x4e0c4e=>{const _0x22fdc2=_0x1890ff;confirmResolver=_0x4e0c4e,document[_0x22fdc2(0x13f)]('customConfirm')[_0x22fdc2(0x14c)][_0x22fdc2(0x189)](_0x22fdc2(0x1ec));});}function resolveCustomConfirm(_0x213ed0){const _0x58625b=a3_0x2f8036;document['getElementById'](_0x58625b(0x180))[_0x58625b(0x14c)][_0x58625b(0x1b0)](_0x58625b(0x1ec));if(confirmResolver)confirmResolver(_0x213ed0);}async function tryCancelCurrentSession(){const _0x46dadc=a3_0x2f8036;if(!currentSession)return;const _0x10d5d3=await showCustomConfirm(_0x46dadc(0x192),_0x46dadc(0x12f),!![]);if(!_0x10d5d3)return;const _0x4203ef=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x5b34c0=>_0x5b34c0['id']!==_0x4203ef['id']),reRenderBlocks(),showToast(_0x46dadc(0x1e9)),lastUserActionTime=Date[_0x46dadc(0x197)]();try{const _0x122cce=window[_0x46dadc(0x12a)]?.[_0x46dadc(0x12c)],_0x519dda=await fetch(API_URL,{'method':_0x46dadc(0x133),'body':JSON[_0x46dadc(0x171)]({'action':_0x46dadc(0x1bf),'init_data':_0x122cce?.[_0x46dadc(0x1d0)]||'','coachId':_0x4203ef[_0x46dadc(0x1b9)],'dateStr':_0x4203ef[_0x46dadc(0xf5)],'sessionId':_0x4203ef['id']})});if(_0x519dda['ok'])DataManager[_0x46dadc(0x1b8)]();}catch(_0x3f9040){showToast(_0x46dadc(0x1be));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x289061=a3_0x2f8036;if(!currentSession)return;document[_0x289061(0x13f)]('detailsSheet')[_0x289061(0x14c)]['remove'](_0x289061(0x1cf)),document[_0x289061(0x13f)]('rescheduleSheet')[_0x289061(0x14c)][_0x289061(0x189)](_0x289061(0x1cf));const _0x28abab=document[_0x289061(0x13f)](_0x289061(0xff)),_0x1c8c89=document[_0x289061(0x13f)](_0x289061(0x164));_0x28abab[_0x289061(0x118)]='',_0x1c8c89[_0x289061(0x118)]=_0x289061(0x123);const [_0x15a4c3,_0x116aa4]=currentSession[_0x289061(0x1a5)]['split'](':')[_0x289061(0x19b)](Number),[_0x14c8d4,_0x1759ac]=currentSession['end'][_0x289061(0x186)](':')[_0x289061(0x19b)](Number),_0x5eb810=_0x14c8d4*0x3c+_0x1759ac-(_0x15a4c3*0x3c+_0x116aa4);try{const _0x3e4662=window[_0x289061(0x12a)]?.[_0x289061(0x12c)],_0x36f58a=await fetch(API_URL,{'method':_0x289061(0x133),'body':JSON[_0x289061(0x171)]({'action':_0x289061(0x127),'coachId':currentSession[_0x289061(0x1b9)],'duration':_0x5eb810,'init_data':_0x3e4662?.[_0x289061(0x1d0)]||'','excludeSessionId':currentSession['id']})}),_0x814609=await _0x36f58a[_0x289061(0xf6)]();_0x814609['ok']&&_0x814609[_0x289061(0xf8)]?(availableSlotsCache=_0x814609[_0x289061(0xf8)],renderRescheduleDates()):_0x1c8c89['innerHTML']=_0x289061(0x165);}catch(_0x21ccd6){_0x1c8c89[_0x289061(0x118)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x6c9e95=a3_0x2f8036,_0x4b1f4e=document[_0x6c9e95(0x13f)](_0x6c9e95(0xff));_0x4b1f4e['innerHTML']='';const _0x367ed0=Object[_0x6c9e95(0x135)](availableSlotsCache)['sort'](),_0x25aac1=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x367ed0[_0x6c9e95(0x1a9)]===0x0){document['getElementById']('rsSlotsGrid')[_0x6c9e95(0x118)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x367ed0[_0x6c9e95(0x113)]((_0x5affff,_0x4e90f3)=>{const _0x1574c7=_0x6c9e95,_0x41b2ed=new Date(_0x5affff),_0x72f21b=_0x25aac1[_0x41b2ed['getDay']()],_0x42a8e0=_0x41b2ed[_0x1574c7(0x137)](),_0x417f60=document[_0x1574c7(0x13b)](_0x1574c7(0x1a8));_0x417f60[_0x1574c7(0x17f)]=_0x1574c7(0x1ae);if(_0x4e90f3===0x0)_0x417f60[_0x1574c7(0x14c)][_0x1574c7(0x189)]('active');_0x417f60[_0x1574c7(0x118)]=_0x1574c7(0x103)+_0x72f21b+'</div><div\x20class=\x22rs-day-num\x22>'+_0x42a8e0+'</div>',_0x417f60[_0x1574c7(0x19e)]=()=>selectRsDate(_0x5affff,_0x417f60),_0x4b1f4e[_0x1574c7(0x12b)](_0x417f60);}),selectRsDate(_0x367ed0[0x0],_0x4b1f4e[_0x6c9e95(0x1b2)]);}function selectRsDate(_0x25d364,_0x4ab9aa){const _0x3239e4=a3_0x2f8036;selectedRsDate=_0x25d364,document[_0x3239e4(0x19a)](_0x3239e4(0x1c3))[_0x3239e4(0x113)](_0x457ead=>_0x457ead[_0x3239e4(0x14c)][_0x3239e4(0x1b0)](_0x3239e4(0x19f)));if(_0x4ab9aa)_0x4ab9aa['classList'][_0x3239e4(0x189)](_0x3239e4(0x19f));const _0x5ef3c3=document['getElementById'](_0x3239e4(0x164));_0x5ef3c3[_0x3239e4(0x118)]='';const _0x436d3e=availableSlotsCache[_0x25d364]||[];if(_0x436d3e[_0x3239e4(0x1a9)]===0x0){_0x5ef3c3[_0x3239e4(0x118)]=_0x3239e4(0x165);return;}_0x436d3e[_0x3239e4(0x113)](_0x2e4c4b=>{const _0x283d02=_0x3239e4,_0x4494c3=document[_0x283d02(0x13b)](_0x283d02(0x1e3));_0x4494c3['className']=_0x283d02(0x1ad),_0x4494c3[_0x283d02(0x17c)]=_0x2e4c4b,_0x4494c3[_0x283d02(0x19e)]=()=>confirmReschedule(_0x2e4c4b),_0x5ef3c3[_0x283d02(0x12b)](_0x4494c3);});}function a3_0x2541(_0x3259c8,_0x1be1f2){_0x3259c8=_0x3259c8-0xf1;const _0x3b34b2=a3_0x4c44();let _0x26deec=_0x3b34b2[_0x3259c8];return _0x26deec;}async function confirmReschedule(_0x1ffe14){const _0x42377a=a3_0x2f8036,_0x2bca13=new Date(selectedRsDate),_0x40cd1f=_0x2bca13['toLocaleDateString'](_0x42377a(0x1b4),{'day':_0x42377a(0x17e),'month':_0x42377a(0x1b5)}),_0x54d23=await showCustomConfirm(_0x42377a(0x131),_0x42377a(0x1e4)+_0x40cd1f+'\x20–≤\x20'+_0x1ffe14+'?',![]);if(!_0x54d23)return;closeAllSheets(),showToast(_0x42377a(0x163)),lastUserActionTime=Date[_0x42377a(0x197)]();const _0x13dea8=currentSession[_0x42377a(0xf5)],_0x451c52=currentSession['id'],[_0x1e5e3d,_0x2293c0]=currentSession[_0x42377a(0x1a5)][_0x42377a(0x186)](':')[_0x42377a(0x19b)](Number),[_0x5acd2c,_0x10edd7]=currentSession[_0x42377a(0x13d)]['split'](':')[_0x42377a(0x19b)](Number),_0x249175=_0x5acd2c*0x3c+_0x10edd7-(_0x1e5e3d*0x3c+_0x2293c0),[_0x1ee65c,_0xc25616]=_0x1ffe14[_0x42377a(0x186)](':')[_0x42377a(0x19b)](Number),_0x5e5ea7=_0x1ee65c*0x3c+_0xc25616+_0x249175,_0x450e92=Math[_0x42377a(0x100)](_0x5e5ea7/0x3c),_0x11771b=_0x5e5ea7%0x3c,_0x992101=String(_0x450e92)[_0x42377a(0x126)](0x2,'0')+':'+String(_0x11771b)['padStart'](0x2,'0'),_0x1d34e2=sessions[_0x42377a(0x10d)](_0x5de996=>_0x5de996['id']===_0x451c52);_0x1d34e2!==-0x1&&(sessions[_0x1d34e2][_0x42377a(0xf5)]=selectedRsDate,sessions[_0x1d34e2][_0x42377a(0x1a5)]=_0x1ffe14,sessions[_0x1d34e2][_0x42377a(0x13d)]=_0x992101,reRenderBlocks());try{const _0x5ba538=window[_0x42377a(0x12a)]?.[_0x42377a(0x12c)],_0x34d39f=await fetch(API_URL,{'method':_0x42377a(0x133),'body':JSON[_0x42377a(0x171)]({'action':'reschedule','init_data':_0x5ba538?.['initData']||'','oldSessionId':_0x451c52,'oldDate':_0x13dea8,'newDate':selectedRsDate,'newTime':_0x1ffe14,'coachId':currentSession[_0x42377a(0x1b9)]})}),_0x48da29=await _0x34d39f[_0x42377a(0xf6)]();!_0x48da29['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x42377a(0x144)]()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x42377a(0x1b8)]());}catch(_0x4d8f11){showToast(_0x42377a(0x1be));}}document[a3_0x2f8036(0x1d3)]('DOMContentLoaded',init);