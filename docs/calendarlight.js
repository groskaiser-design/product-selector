const a3_0x991083=a3_0x4351;(function(_0x11792c,_0x4cdc25){const _0x32331c=a3_0x4351,_0x48790c=_0x11792c();while(!![]){try{const _0x37eccb=parseInt(_0x32331c(0x1af))/0x1*(-parseInt(_0x32331c(0x1e2))/0x2)+parseInt(_0x32331c(0x260))/0x3+parseInt(_0x32331c(0x211))/0x4*(-parseInt(_0x32331c(0x1b2))/0x5)+parseInt(_0x32331c(0x1ec))/0x6+parseInt(_0x32331c(0x1fe))/0x7+parseInt(_0x32331c(0x22c))/0x8+-parseInt(_0x32331c(0x1c0))/0x9;if(_0x37eccb===_0x4cdc25)break;else _0x48790c['push'](_0x48790c['shift']());}catch(_0x2a451a){_0x48790c['push'](_0x48790c['shift']());}}}(a3_0x54ba,0xafe9d));const APP_VERSION=a3_0x991083(0x1d5),API_URL=a3_0x991083(0x208),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x991083(0x181);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x367348=a3_0x991083,_0x5277de=(function(){let _0xac7d58=!![];return function(_0x1f519c,_0x2da1b5){const _0x6e7767=_0xac7d58?function(){const _0x3091f4=a3_0x4351;if(_0x2da1b5){const _0x214204=_0x2da1b5[_0x3091f4(0x26c)](_0x1f519c,arguments);return _0x2da1b5=null,_0x214204;}}:function(){};return _0xac7d58=![],_0x6e7767;};}()),_0x38f0d0=_0x5277de(this,function(){const _0x2f6e42=a3_0x4351;return _0x38f0d0[_0x2f6e42(0x1ba)]()[_0x2f6e42(0x183)](_0x2f6e42(0x21f))[_0x2f6e42(0x1ba)]()[_0x2f6e42(0x1bb)](_0x38f0d0)[_0x2f6e42(0x183)](_0x2f6e42(0x21f));});_0x38f0d0();try{const _0xf39ff2=window['Telegram']?.[_0x367348(0x238)];if(!_0xf39ff2)return;_0xf39ff2[_0x367348(0x203)](),_0xf39ff2[_0x367348(0x245)]();try{_0xf39ff2['setHeaderColor'](_0x367348(0x1aa)),_0xf39ff2[_0x367348(0x274)]&&_0xf39ff2[_0x367348(0x274)]('#050505');}catch(_0x3cf894){console[_0x367348(0x256)](_0x367348(0x21e),_0x3cf894);}try{_0xf39ff2[_0x367348(0x224)]&&(_0xf39ff2[_0x367348(0x224)][_0x367348(0x1ed)](),_0xf39ff2[_0x367348(0x224)][_0x367348(0x26e)](),_0xf39ff2[_0x367348(0x224)]['onClick'](function(){const _0x180177=_0x367348;window[_0x180177(0x18c)][_0x180177(0x1a5)]=_0x180177(0x1e4);}));}catch(_0x153bab){console[_0x367348(0x256)](_0x367348(0x255),_0x153bab);}try{if(_0xf39ff2[_0x367348(0x210)])_0xf39ff2[_0x367348(0x210)]();}catch(_0x491b74){}}catch(_0x144b1d){console['error'](_0x367348(0x1a9),_0x144b1d);}}());function isAdmin(){const _0x8cc5eb=a3_0x991083;try{const _0x4824ee=Number(window['Telegram']?.[_0x8cc5eb(0x238)]?.[_0x8cc5eb(0x222)]?.[_0x8cc5eb(0x23c)]?.['id']);return _0x4824ee===0xbaf7174;}catch(_0x213d10){return![];}}const DataManager={'saveLocally'(){const _0x1396ad=a3_0x991083;try{localStorage[_0x1396ad(0x1c6)](KEY_SESSIONS,JSON[_0x1396ad(0x263)](sessions)),localStorage[_0x1396ad(0x1c6)](KEY_CLIENTS,JSON[_0x1396ad(0x263)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x1396ad(0x263)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x3b06be){}},'loadLocal'(){const _0x4e60de=a3_0x991083;try{const _0x5d32c6=localStorage['getItem'](KEY_SESSIONS);if(_0x5d32c6)sessions=JSON['parse'](_0x5d32c6);const _0x5884c5=localStorage[_0x4e60de(0x215)](KEY_CLIENTS);if(_0x5884c5)clients=JSON[_0x4e60de(0x1b8)](_0x5884c5);const _0x19b16d=localStorage[_0x4e60de(0x215)](KEY_SETTINGS);if(_0x19b16d){const _0x1e34ca=JSON[_0x4e60de(0x1b8)](_0x19b16d);if(_0x1e34ca[_0x4e60de(0x22a)])availabilityPattern=_0x1e34ca[_0x4e60de(0x22a)];if(_0x1e34ca[_0x4e60de(0x1a4)])specialRanges=_0x1e34ca[_0x4e60de(0x1a4)];if(_0x1e34ca['exceptions'])dateExceptions=_0x1e34ca[_0x4e60de(0x209)];}}catch(_0x4d9f9b){}},async 'syncLoad'(){const _0x1b08b9=a3_0x991083,_0xedb3ea=new Date(),_0x178219=_0xedb3ea[_0x1b08b9(0x1ab)]()+'-'+String(_0xedb3ea['getMonth']()+0x1)[_0x1b08b9(0x23b)](0x2,'0'),_0x1f02e1=new Date(_0xedb3ea);_0x1f02e1['setMonth'](_0xedb3ea['getMonth']()+0x1);const _0x441657=_0x1f02e1[_0x1b08b9(0x1ab)]()+'-'+String(_0x1f02e1[_0x1b08b9(0x19d)]()+0x1)[_0x1b08b9(0x23b)](0x2,'0'),_0x36fe1e=Date[_0x1b08b9(0x1a3)]();try{const _0x4b0b8f=window[_0x1b08b9(0x23d)]?.[_0x1b08b9(0x238)],_0x14ef0a=_0x4b0b8f?.[_0x1b08b9(0x20d)]||'',[_0xe15242,_0x2dff9e]=await Promise['all']([fetch(API_URL,{'method':_0x1b08b9(0x1cc),'body':JSON[_0x1b08b9(0x263)]({'action':_0x1b08b9(0x180),'init_data':_0x14ef0a,'month_str':_0x178219})})[_0x1b08b9(0x1ad)](_0x35ed9f=>_0x35ed9f['json']()),fetch(API_URL,{'method':_0x1b08b9(0x1cc),'body':JSON[_0x1b08b9(0x263)]({'action':_0x1b08b9(0x180),'init_data':_0x14ef0a,'month_str':_0x441657})})['then'](_0x49ebe4=>_0x49ebe4['json']())]);if(lastUserActionTime>_0x36fe1e){console[_0x1b08b9(0x256)](_0x1b08b9(0x1fd));return;}if(_0xe15242['ok'])this['applyData'](_0xe15242[_0x1b08b9(0x1f6)],_0x178219);if(_0x2dff9e['ok'])this['applyData'](_0x2dff9e[_0x1b08b9(0x1f6)],_0x441657);this[_0x1b08b9(0x20e)]();}catch(_0x1a8518){}},'applyData'(_0x2087f2,_0x1b2bd2){const _0x315831=a3_0x991083;if(!_0x2087f2)return;if(_0x2087f2[_0x315831(0x1cf)]){if(_0x2087f2[_0x315831(0x1cf)][_0x315831(0x22a)])availabilityPattern=_0x2087f2[_0x315831(0x1cf)][_0x315831(0x22a)];if(_0x2087f2['settings'][_0x315831(0x1a4)])specialRanges=_0x2087f2[_0x315831(0x1cf)]['ranges'];if(_0x2087f2[_0x315831(0x1cf)][_0x315831(0x209)])dateExceptions=_0x2087f2[_0x315831(0x1cf)]['exceptions'];}if(_0x2087f2['clients']&&Array[_0x315831(0x232)](_0x2087f2['clients']))clients=_0x2087f2[_0x315831(0x19f)];_0x2087f2['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x2087f2['coach_profiles']}),_0x2087f2[_0x315831(0x19e)]&&(sessions=sessions['filter'](_0x4a2435=>!_0x4a2435[_0x315831(0x273)][_0x315831(0x1bf)](_0x1b2bd2)),Object[_0x315831(0x1dd)](_0x2087f2[_0x315831(0x19e)])[_0x315831(0x254)](_0x582bbc=>{const _0x2150c3=_0x2087f2['calendar'][_0x582bbc];_0x2150c3['forEach'](_0x39ad84=>{const _0x779eb2=a3_0x4351;sessions['push']({'id':_0x39ad84['i'],'clientId':_0x39ad84['c'],'coachId':_0x39ad84[_0x779eb2(0x269)],'dateStr':_0x1b2bd2+'-'+_0x582bbc[_0x779eb2(0x23b)](0x2,'0'),'start':_0x39ad84['s'],'end':_0x39ad84['e'],'note':_0x39ad84['n']||'','status':_0x39ad84['st']||'planned','seriesId':_0x39ad84[_0x779eb2(0x1f9)]});});})),reRenderBlocks();}};function init(){const _0x33522e=a3_0x991083;DataManager[_0x33522e(0x192)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x33522e(0x212)](_0x33522e(0x1e8))['addEventListener'](_0x33522e(0x185),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x33522e(0x19c)]();}function renderTimeColumn(){const _0x279153=a3_0x991083,_0x411634=document['getElementById'](_0x279153(0x1c4)),_0x434fcd=document[_0x279153(0x212)](_0x279153(0x20a));_0x411634[_0x279153(0x250)]='',_0x411634['appendChild'](_0x434fcd);for(let _0x2b8b7d=0x0;_0x2b8b7d<0x18;_0x2b8b7d++){const _0x336061=document[_0x279153(0x22e)](_0x279153(0x25c));_0x336061[_0x279153(0x223)]=_0x279153(0x20c);if(_0x2b8b7d>0x0)_0x336061[_0x279153(0x250)]=_0x279153(0x25a)+String(_0x2b8b7d)['padStart'](0x2,'0')+':00</span>';_0x411634[_0x279153(0x1ca)](_0x336061);}}function renderDayRange(_0x5c6003,_0x25ce4f){const _0x135f9d=a3_0x991083,_0x3cde2e=document['getElementById']('daysHeaderTrack'),_0x20e249=document[_0x135f9d(0x212)](_0x135f9d(0x25e)),_0x3706d0=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1886ab=new Date();_0x1886ab['setHours'](0x0,0x0,0x0,0x0);const _0x442a2a=getLocalDateStr(new Date());for(let _0x8bffcc=_0x5c6003;_0x8bffcc<=_0x25ce4f;_0x8bffcc++){const _0x5810d0=new Date(_0x1886ab);_0x5810d0['setDate'](_0x5810d0[_0x135f9d(0x1f8)]()+_0x8bffcc);const _0x4a8de0=getLocalDateStr(_0x5810d0);let _0x479cae=_0x5810d0[_0x135f9d(0x246)]()-0x1;if(_0x479cae===-0x1)_0x479cae=0x6;const _0x3804bb=_0x4a8de0===_0x442a2a,_0x1d69a6=document[_0x135f9d(0x22e)](_0x135f9d(0x25c));_0x1d69a6[_0x135f9d(0x223)]=_0x135f9d(0x253)+(_0x3804bb?_0x135f9d(0x1c1):''),_0x1d69a6[_0x135f9d(0x1f3)](_0x135f9d(0x229),_0x4a8de0),_0x1d69a6['innerHTML']=_0x135f9d(0x1e9)+_0x3706d0[_0x479cae]+_0x135f9d(0x21d)+_0x5810d0[_0x135f9d(0x1f8)]()+_0x135f9d(0x20f),_0x3cde2e[_0x135f9d(0x1ca)](_0x1d69a6);const _0x11a9e3=document[_0x135f9d(0x22e)](_0x135f9d(0x25c));_0x11a9e3[_0x135f9d(0x223)]=_0x135f9d(0x193)+(_0x3804bb?_0x135f9d(0x1c1):''),_0x11a9e3[_0x135f9d(0x1f3)](_0x135f9d(0x229),_0x4a8de0),_0x11a9e3[_0x135f9d(0x1f3)]('data-day-idx',_0x479cae),_0x20e249['appendChild'](_0x11a9e3);}}function reRenderBlocks(){const _0x4bf4b8=a3_0x991083;document[_0x4bf4b8(0x19b)](_0x4bf4b8(0x214))[_0x4bf4b8(0x254)](_0x585f31=>{const _0x19f123=_0x4bf4b8;_0x585f31[_0x19f123(0x19b)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x19f123(0x254)](_0x56463d=>_0x56463d[_0x19f123(0x221)]());const _0x34c349=_0x585f31[_0x19f123(0x1ce)](_0x19f123(0x229)),_0x47263c=parseInt(_0x585f31[_0x19f123(0x1ce)]('data-day-idx')),_0x3a9ca5=Math[_0x19f123(0x1f0)](_0x585f31['offsetLeft']);(availabilityPattern[_0x47263c]||[])[_0x19f123(0x254)](_0x285dba=>{const _0x1d7dcb=_0x19f123,_0x4c2844=document[_0x1d7dcb(0x22e)](_0x1d7dcb(0x25c));_0x4c2844[_0x1d7dcb(0x223)]=_0x1d7dcb(0x275),_0x4c2844[_0x1d7dcb(0x19a)][_0x1d7dcb(0x244)]=_0x285dba*GRID_H+'px',_0x4c2844['style'][_0x1d7dcb(0x21b)]='-'+_0x3a9ca5+_0x1d7dcb(0x25f)+_0x285dba*GRID_H+'px',_0x585f31['appendChild'](_0x4c2844);});if(specialRanges[_0x19f123(0x225)]>0x0){const _0x77bbc7=new Date(_0x34c349+'T00:00:00')[_0x19f123(0x23a)](),_0x68bfab=new Date(_0x34c349+_0x19f123(0x1d0))[_0x19f123(0x23a)]();specialRanges['forEach'](_0x4ddcb0=>{const _0x375b54=_0x19f123,_0x45caae=new Date(_0x4ddcb0['start'])['getTime'](),_0x1017bb=new Date(_0x4ddcb0[_0x375b54(0x22d)])['getTime'](),_0x3b684e=Math[_0x375b54(0x194)](_0x77bbc7,_0x45caae),_0x4a90ae=Math[_0x375b54(0x23e)](_0x68bfab,_0x1017bb);if(_0x3b684e<_0x4a90ae){const _0x501b0a=(_0x3b684e-_0x77bbc7)/0x36ee80*GRID_H,_0x4e0e26=(_0x4a90ae-_0x3b684e)/0x36ee80*GRID_H,_0x4eea3e=document[_0x375b54(0x22e)](_0x375b54(0x25c));_0x4e0e26>=23.5*GRID_H?(_0x4eea3e[_0x375b54(0x223)]=_0x375b54(0x1e7),_0x4eea3e[_0x375b54(0x19a)][_0x375b54(0x21b)]='-'+_0x3a9ca5+_0x375b54(0x1fb)):(_0x4eea3e['className']='blocked-range-part\x20stripe-bg',_0x4eea3e['style'][_0x375b54(0x244)]=_0x501b0a+'px',_0x4eea3e['style'][_0x375b54(0x1fc)]=_0x4e0e26+'px',_0x4eea3e[_0x375b54(0x19a)][_0x375b54(0x21b)]='-'+_0x3a9ca5+_0x375b54(0x25f)+_0x501b0a+'px'),_0x585f31[_0x375b54(0x1ca)](_0x4eea3e);}});}renderEventsForColumn(_0x585f31,_0x34c349);});}function renderEventsForColumn(_0x30a22f,_0x515a1e){const _0x552847=a3_0x991083,_0x4d6742=sessions[_0x552847(0x1d7)](_0x19c4b9=>_0x19c4b9[_0x552847(0x273)]===_0x515a1e),_0x230273=_0x4d6742['map'](_0x34dbbe=>{const _0x5170b4=_0x552847,[_0x41bf1e,_0x3eeceb]=_0x34dbbe[_0x5170b4(0x24c)][_0x5170b4(0x22b)](':')[_0x5170b4(0x1a2)](Number),[_0x20e84c,_0x4a2a5e]=_0x34dbbe[_0x5170b4(0x22d)][_0x5170b4(0x22b)](':')[_0x5170b4(0x1a2)](Number);return{'data':_0x34dbbe,'start':_0x41bf1e*0x3c+_0x3eeceb,'end':_0x20e84c*0x3c+_0x4a2a5e,'colIndex':0x0};});_0x230273['sort']((_0x5bc92a,_0x151ffd)=>_0x5bc92a[_0x552847(0x24c)]-_0x151ffd[_0x552847(0x24c)]||_0x151ffd[_0x552847(0x22d)]-_0x151ffd[_0x552847(0x24c)]-(_0x5bc92a[_0x552847(0x22d)]-_0x5bc92a[_0x552847(0x24c)]));const _0x588680=[];_0x230273[_0x552847(0x254)](_0x125196=>{const _0x1c5db7=_0x552847;let _0x2d9023=![];for(let _0x4d4996=0x0;_0x4d4996<_0x588680['length'];_0x4d4996++){const _0x3dec64=_0x588680[_0x4d4996];if(_0x125196[_0x1c5db7(0x24c)]>=_0x3dec64[_0x3dec64['length']-0x1][_0x1c5db7(0x22d)]){_0x3dec64[_0x1c5db7(0x1b4)](_0x125196),_0x125196[_0x1c5db7(0x252)]=_0x4d4996,_0x2d9023=!![];break;}}!_0x2d9023&&(_0x588680[_0x1c5db7(0x1b4)]([_0x125196]),_0x125196[_0x1c5db7(0x252)]=_0x588680['length']-0x1);}),_0x230273[_0x552847(0x254)](_0x2d8267=>{const _0x2c440=_0x552847;let _0x4434df=0x0;_0x230273['forEach'](_0xc5afc2=>{const _0x27114c=a3_0x4351;if(Math['max'](_0x2d8267['start'],_0xc5afc2[_0x27114c(0x24c)])<Math[_0x27114c(0x23e)](_0x2d8267[_0x27114c(0x22d)],_0xc5afc2[_0x27114c(0x22d)])&&_0xc5afc2[_0x27114c(0x252)]>_0x4434df)_0x4434df=_0xc5afc2[_0x27114c(0x252)];});const _0x564e96=_0x4434df+0x1,_0x342c8d=0x64/_0x564e96,_0x3407f5=_0x2d8267[_0x2c440(0x252)]*_0x342c8d,_0xc655be=document[_0x2c440(0x22e)](_0x2c440(0x25c)),_0x140c51=_0x2d8267[_0x2c440(0x1f6)];let _0x1c48e6=_0x2c440(0x241);if(clients&&clients[_0x2c440(0x225)]>0x0){const _0x3494ca=clients[_0x2c440(0x219)](_0x4dee33=>String(_0x4dee33['id'])===String(_0x140c51[_0x2c440(0x18a)]));if(_0x3494ca&&_0x3494ca[_0x2c440(0x26f)])_0x1c48e6=_0x3494ca['color'];}const _0x19cd34=_0x140c51[_0x2c440(0x216)]===_0x2c440(0x1a6),_0x4e7a29=_0x19cd34?0x1:0.45;_0xc655be['className']=_0x2c440(0x18d)+(_0x19cd34?_0x2c440(0x1a0):''),_0xc655be[_0x2c440(0x19a)]['backgroundColor']=hexToRgba(_0x1c48e6,_0x4e7a29),_0xc655be[_0x2c440(0x19a)]['borderLeftColor']=_0x1c48e6;const _0x3d622f=_0x2d8267[_0x2c440(0x24c)]/0x3c*GRID_H,_0x549ad9=(_0x2d8267[_0x2c440(0x22d)]-_0x2d8267[_0x2c440(0x24c)])/0x3c*GRID_H;_0xc655be['style'][_0x2c440(0x244)]=_0x3d622f+'px',_0xc655be[_0x2c440(0x19a)][_0x2c440(0x1fc)]=Math[_0x2c440(0x194)](_0x549ad9,0x14)+'px',_0xc655be[_0x2c440(0x19a)][_0x2c440(0x247)]='calc('+_0x342c8d+_0x2c440(0x25d),_0xc655be[_0x2c440(0x19a)][_0x2c440(0x204)]=_0x2c440(0x1c3)+_0x3407f5+_0x2c440(0x1b5),_0xc655be[_0x2c440(0x19a)][_0x2c440(0x1f1)]=0xa+_0x2d8267[_0x2c440(0x252)];if(_0x342c8d<0x55)_0xc655be['classList'][_0x2c440(0x184)](_0x2c440(0x24b));let _0x4e586b='';if(_0x140c51[_0x2c440(0x251)])_0x4e586b+=_0x2c440(0x18e);if(_0x19cd34)_0x4e586b+=_0x2c440(0x22f);_0xc655be[_0x2c440(0x250)]=_0x2c440(0x1b3)+_0x140c51[_0x2c440(0x24c)]+'\x20-\x20'+_0x140c51[_0x2c440(0x22d)]+_0x2c440(0x24e)+_0x4e586b+_0x2c440(0x268),_0xc655be['onclick']=_0x2f63bd=>{const _0x57276a=_0x2c440;_0x2f63bd[_0x57276a(0x1da)](),openDetails(_0x140c51);},_0x30a22f['appendChild'](_0xc655be);});}function openAnalytics(){const _0xfd9ed8=a3_0x991083,_0x350197=document[_0xfd9ed8(0x188)](_0xfd9ed8(0x217));setAnalyticsPeriod(_0xfd9ed8(0x220),_0x350197),openSheet(_0xfd9ed8(0x1f4));}function setAnalyticsPeriod(_0x258d1b,_0x12c8a8){const _0x441278=a3_0x991083;currentAnPeriod=_0x258d1b,document[_0x441278(0x19b)](_0x441278(0x217))[_0x441278(0x254)](_0x2bf658=>_0x2bf658['classList'][_0x441278(0x221)]('active'));if(_0x12c8a8)_0x12c8a8[_0x441278(0x24f)]['add'](_0x441278(0x18b));const _0x333542=document[_0x441278(0x212)](_0x441278(0x1ff));_0x333542['style'][_0x441278(0x18f)]=_0x258d1b===_0x441278(0x1e1)?_0x441278(0x26d):_0x441278(0x257);const _0x248b22=new Date();let _0x17d070=new Date(),_0x498f35=new Date();if(_0x258d1b===_0x441278(0x220))_0x17d070=getStartOfWeek(_0x248b22),_0x498f35=new Date(_0x17d070),_0x498f35[_0x441278(0x202)](_0x498f35[_0x441278(0x1f8)]()+0x6);else{if(_0x258d1b==='month')_0x17d070=new Date(_0x248b22['getFullYear'](),_0x248b22[_0x441278(0x19d)](),0x1),_0x498f35=new Date(_0x248b22['getFullYear'](),_0x248b22[_0x441278(0x19d)]()+0x1,0x0);else{!document[_0x441278(0x212)](_0x441278(0x21c))[_0x441278(0x248)]&&(document[_0x441278(0x212)](_0x441278(0x21c))[_0x441278(0x248)]=getLocalDateStr(_0x248b22),document[_0x441278(0x212)](_0x441278(0x20b))[_0x441278(0x248)]=getLocalDateStr(_0x248b22));refreshAnalytics();return;}}document[_0x441278(0x212)]('anStart')[_0x441278(0x248)]=getLocalDateStr(_0x17d070),document[_0x441278(0x212)](_0x441278(0x20b))['value']=getLocalDateStr(_0x498f35),refreshAnalytics();}function refreshAnalytics(){const _0x564dfe=a3_0x991083,_0x3b0457=document[_0x564dfe(0x212)](_0x564dfe(0x21c))['value'],_0x25df4a=document['getElementById']('anEnd')[_0x564dfe(0x248)];if(!_0x3b0457||!_0x25df4a)return;const _0x103b86=sessions[_0x564dfe(0x1d7)](_0x2e97c0=>_0x2e97c0[_0x564dfe(0x273)]>=_0x3b0457&&_0x2e97c0[_0x564dfe(0x273)]<=_0x25df4a&&_0x2e97c0[_0x564dfe(0x216)]!==_0x564dfe(0x235)),_0x33c6e0=_0x103b86[_0x564dfe(0x225)],_0x377567=_0x103b86[_0x564dfe(0x1d7)](_0x3297c7=>_0x3297c7[_0x564dfe(0x216)]===_0x564dfe(0x1a6))['length'],_0x4e6dcb=_0x33c6e0>0x0?Math[_0x564dfe(0x1f0)](_0x377567/_0x33c6e0*0x64):0x0;document['getElementById'](_0x564dfe(0x1e6))['textContent']=_0x4e6dcb+'%',document[_0x564dfe(0x212)]('anTotalStats')[_0x564dfe(0x266)]=_0x377567+_0x564dfe(0x1ea)+_0x33c6e0+_0x564dfe(0x249);const _0xe5d3ff=document[_0x564dfe(0x212)](_0x564dfe(0x1b0)),_0x53b1e5=0x2*Math['PI']*0x23,_0x422fb2=_0x53b1e5-_0x4e6dcb/0x64*_0x53b1e5;_0xe5d3ff[_0x564dfe(0x19a)][_0x564dfe(0x226)]=_0x422fb2;const _0x3238f7={};_0x103b86['forEach'](_0x28cd38=>{const _0x5b84aa=_0x564dfe,_0x5e8a93=_0x28cd38[_0x5b84aa(0x1bc)]||_0x5b84aa(0x236);if(!_0x3238f7[_0x5e8a93]){const _0x48fe27='#'+_0x5e8a93['toString']()['substr'](0x0,0x6);_0x3238f7[_0x5e8a93]={'total':0x0,'done':0x0,'color':_0x48fe27};}_0x3238f7[_0x5e8a93]['total']++;if(_0x28cd38[_0x5b84aa(0x216)]===_0x5b84aa(0x1a6))_0x3238f7[_0x5e8a93][_0x5b84aa(0x239)]++;});const _0x5b9e1b=document[_0x564dfe(0x212)](_0x564dfe(0x1ae));_0x5b9e1b[_0x564dfe(0x250)]='';const _0x1cb644=Object[_0x564dfe(0x276)](_0x3238f7)[_0x564dfe(0x200)]((_0x113c16,_0x2a2c20)=>_0x2a2c20[0x1][_0x564dfe(0x258)]-_0x113c16[0x1][_0x564dfe(0x258)]);if(_0x1cb644[_0x564dfe(0x225)]===0x0){_0x5b9e1b[_0x564dfe(0x250)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x1cb644[_0x564dfe(0x254)](([_0xdbea25,_0x168c5f])=>{const _0x3b9692=_0x564dfe,_0xb5d1f1=Math[_0x3b9692(0x1f0)](_0x168c5f[_0x3b9692(0x239)]/_0x168c5f[_0x3b9692(0x258)]*0x64),_0x294cec=document[_0x3b9692(0x22e)](_0x3b9692(0x25c));_0x294cec[_0x3b9692(0x223)]=_0x3b9692(0x264),_0x294cec[_0x3b9692(0x19a)]['borderLeftColor']=_0x168c5f[_0x3b9692(0x26f)],_0x294cec[_0x3b9692(0x250)]=_0x3b9692(0x1d3)+_0xdbea25[_0x3b9692(0x1ac)](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x168c5f['done']+_0x3b9692(0x26a)+_0x168c5f[_0x3b9692(0x258)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0xb5d1f1+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5b9e1b['appendChild'](_0x294cec);});}function openDetails(_0x140702){const _0x5c411=a3_0x991083;currentSession=_0x140702;const _0x34765d=new Date(_0x140702[_0x5c411(0x273)]),_0x2a9957=_0x34765d[_0x5c411(0x1f2)](_0x5c411(0x262),{'weekday':_0x5c411(0x1a1),'day':'numeric','month':_0x5c411(0x1a1)});document['getElementById'](_0x5c411(0x186))[_0x5c411(0x266)]=_0x2a9957[_0x5c411(0x277)](0x0)[_0x5c411(0x1ee)]()+_0x2a9957[_0x5c411(0x187)](0x1),document[_0x5c411(0x212)]('detTime')[_0x5c411(0x266)]=_0x140702['start']+_0x5c411(0x271)+_0x140702[_0x5c411(0x22d)],document[_0x5c411(0x212)](_0x5c411(0x207))['textContent']=_0x140702[_0x5c411(0x213)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x46f554=document[_0x5c411(0x212)]('detStatus'),_0x860683=document['getElementById'](_0x5c411(0x1b7)),_0x119715=_0x860683[_0x5c411(0x188)](_0x5c411(0x1f7)),_0x3bf556=_0x860683['querySelector']('.btn-reschedule'),_0x90c3c6=document[_0x5c411(0x212)](_0x5c411(0x1d4));if(_0x140702['status']===_0x5c411(0x1a6))_0x46f554['textContent']=_0x5c411(0x21a),_0x46f554[_0x5c411(0x19a)][_0x5c411(0x26f)]=_0x5c411(0x201),_0x860683['style'][_0x5c411(0x18f)]=_0x5c411(0x257);else{_0x46f554[_0x5c411(0x266)]='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x46f554[_0x5c411(0x19a)]['color']=_0x5c411(0x270),_0x860683[_0x5c411(0x19a)][_0x5c411(0x18f)]='block';const _0x2d2b2d=new Date(_0x140702[_0x5c411(0x273)]+'T'+_0x140702[_0x5c411(0x24c)]),_0x304c68=new Date(),_0x56a730=(_0x2d2b2d-_0x304c68)/(0x3e8*0x3c*0x3c),_0x50ee52=coachProfiles[_0x140702['coachId']]&&coachProfiles[_0x140702['coachId']][_0x5c411(0x199)]?parseInt(coachProfiles[_0x140702[_0x5c411(0x1bc)]]['cancel_window']):0x18;if(_0x50ee52===0x0||_0x56a730>=_0x50ee52)_0x119715['style'][_0x5c411(0x18f)]=_0x5c411(0x1d9),_0x3bf556[_0x5c411(0x19a)]['display']=_0x5c411(0x1d9),_0x90c3c6['style']['display']=_0x5c411(0x257);else{_0x119715[_0x5c411(0x19a)][_0x5c411(0x18f)]=_0x5c411(0x257),_0x3bf556[_0x5c411(0x19a)][_0x5c411(0x18f)]=_0x5c411(0x257),_0x90c3c6[_0x5c411(0x19a)][_0x5c411(0x18f)]='block';let _0x296e69=_0x50ee52===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x5c411(0x1ef)+_0x50ee52+'\x20—á.';_0x90c3c6[_0x5c411(0x266)]=_0x5c411(0x1de)+_0x296e69+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document[_0x5c411(0x212)](_0x5c411(0x205))[_0x5c411(0x24f)]['add']('active'),document[_0x5c411(0x212)]('detailsSheet')[_0x5c411(0x24f)][_0x5c411(0x184)](_0x5c411(0x261));}function closeAllSheets(){const _0x1eddd2=a3_0x991083;document[_0x1eddd2(0x212)]('overlay')['classList']['remove'](_0x1eddd2(0x18b)),document[_0x1eddd2(0x19b)]('.sheet')[_0x1eddd2(0x254)](_0x5692b4=>_0x5692b4[_0x1eddd2(0x24f)][_0x1eddd2(0x221)](_0x1eddd2(0x261)));}function openSheet(_0x262751){const _0xe8d5c1=a3_0x991083;document[_0xe8d5c1(0x212)](_0xe8d5c1(0x205))[_0xe8d5c1(0x24f)][_0xe8d5c1(0x184)](_0xe8d5c1(0x18b)),document[_0xe8d5c1(0x212)](_0x262751)[_0xe8d5c1(0x24f)][_0xe8d5c1(0x184)](_0xe8d5c1(0x261));}function getLocalDateStr(_0x3fa709){const _0x3d9699=a3_0x991083,_0x3e1e63=_0x3fa709[_0x3d9699(0x1ab)](),_0x54c91e=String(_0x3fa709[_0x3d9699(0x19d)]()+0x1)['padStart'](0x2,'0'),_0x441528=String(_0x3fa709[_0x3d9699(0x1f8)]())[_0x3d9699(0x23b)](0x2,'0');return _0x3e1e63+'-'+_0x54c91e+'-'+_0x441528;}function getStartOfWeek(_0xb8e327){const _0xbe87d5=a3_0x991083,_0x39f454=new Date(_0xb8e327),_0x38f28c=_0x39f454[_0xbe87d5(0x246)](),_0x350782=_0x39f454['getDate']()-_0x38f28c+(_0x38f28c===0x0?-0x6:0x1);return _0x39f454['setDate'](_0x350782),_0x39f454['setHours'](0x0,0x0,0x0,0x0),_0x39f454;}function a3_0x54ba(){const _0x221feb=['–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','3172345XeyrRn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','push','%\x20+\x202px)','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','cancelContainer','parse','substring','toString','constructor','coachId','ccYesBtn','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','startsWith','8617500pBwLTa','today','detailsSheet','calc(','timeColumn','daysHeaderTrack','setItem','join','offsetLeft','getHours','appendChild','reschedule','POST','addEventListener','getAttribute','settings','T23:59:59','rs-date-chip','600','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','cancelHint','v9.5-CLIENT-ANALYTICS','json','filter','DOMContentLoaded','block','stopPropagation','auto','.rs-date-chip','keys','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','scrollTop','fontWeight','custom','2374274CBJDiH','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','router.html','globalTimeLine','anPercent','day-off-overlay\x20stripe-bg','matrixViewport','<div\x20class=\x22dch-day\x22>','\x20–∏–∑\x20','visible','6877128RiKObE','show','toUpperCase','–∑–∞\x20','round','zIndex','toLocaleDateString','setAttribute','analyticsSheet','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','data','.btn-cancel','getDate','sid','toast','px\x200px','height','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','5631332CVybux','anCustomDates','sort','var(--acc-green)','setDate','ready','left','overlay','test','detNote','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','exceptions','timeLineBadge','anEnd','time-label','initData','saveLocally','</div>','disableVerticalSwipes','4cIpcYW','getElementById','note','.day-column','getItem','status','.period-switch\x20.p-btn','numeric','find','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','backgroundPosition','anStart','</div><div\x20class=\x22dch-num\x22>','Error\x20setting\x20color:','(((.+)+)+)+$','week','remove','initDataUnsafe','className','BackButton','length','strokeDashoffset','customConfirm','scrollTo','data-date','pattern','split','6445968PHfNYA','end','createElement','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','get_slots','firstChild','isArray','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','headerMonth','cancelled','Unknown','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','WebApp','done','getTime','padStart','user','Telegram','min','rsDatesTrack','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','#0a84ff','.day-col-header','rgba(','top','expand','getDay','width','value','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','rs-time-btn','mini','start','getMinutes','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','classList','innerHTML','seriesId','colIndex','day-col-header\x20','forEach','Error\x20setting\x20back\x20button:','log','none','total','rgba(10,\x20132,\x20255,\x20','<span>','ccTitle','div','%\x20-\x204px)','gridColumns','px\x20-','2229711cQHKhd','open','ru-RU','stringify','client-stat-card','insertBefore','textContent','floor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cid','</span>\x20/\x20','scrollWidth','apply','flex','offClick','color','var(--acc-blue)','\x20-\x20','button','dateStr','setBackgroundColor','blocked-slot\x20stripe-bg','entries','charAt','client_load','uc_client_list','createDocumentFragment','search','add','scroll','detDate','slice','querySelector','#ff453a','clientId','active','location','event-card','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','display','client_cancel','rsSlotsGrid','loadLocal','day-column\x20','max','offsetWidth','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','<div\x20class=\x22rs-day-name\x22>','</div><div\x20class=\x22rs-day-num\x22>','cancel_window','style','querySelectorAll','syncLoad','getMonth','calendar','clients','\x20status-completed','long','map','now','ranges','href','completed','onclick','scrollLeft','Critical\x20TMA\x20Error:','#050505','getFullYear','substr','then','analyticsList','1svWgyr','anDonutCircle'];a3_0x54ba=function(){return _0x221feb;};return a3_0x54ba();}function scrollToToday(){const _0x422a91=getLocalDateStr(new Date());setTimeout(()=>{const _0x3c2be4=a3_0x4351,_0x3e989e=document[_0x3c2be4(0x188)]('.day-col-header[data-date=\x22'+_0x422a91+'\x22]');if(_0x3e989e){const _0x539092=document[_0x3c2be4(0x212)](_0x3c2be4(0x1e8)),_0x5db1d0=_0x3e989e[_0x3c2be4(0x1c8)]-_0x539092['clientWidth']/0x2+_0x3e989e[_0x3c2be4(0x195)]/0x2;_0x539092[_0x3c2be4(0x228)]({'left':_0x5db1d0,'behavior':_0x3c2be4(0x1db)}),_0x539092[_0x3c2be4(0x1df)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4b4567=a3_0x991083,_0xed71fd=new Date(),_0x2fe8be=document[_0x4b4567(0x212)](_0x4b4567(0x1e5)),_0x56ee05=document['getElementById']('timeLineBadge'),_0x5151f5=(_0xed71fd[_0x4b4567(0x1c9)]()*0x3c+_0xed71fd[_0x4b4567(0x24d)]())/0x3c*GRID_H;_0x2fe8be[_0x4b4567(0x19a)][_0x4b4567(0x244)]=_0x5151f5+'px',_0x2fe8be[_0x4b4567(0x19a)][_0x4b4567(0x18f)]=_0x4b4567(0x1d9),_0x56ee05['style'][_0x4b4567(0x244)]=_0x5151f5+'px',_0x56ee05[_0x4b4567(0x19a)][_0x4b4567(0x18f)]=_0x4b4567(0x1d9),_0x56ee05['textContent']=String(_0xed71fd[_0x4b4567(0x1c9)]())[_0x4b4567(0x23b)](0x2,'0')+':'+String(_0xed71fd[_0x4b4567(0x24d)]())[_0x4b4567(0x23b)](0x2,'0');}function onScroll(){const _0x1705a9=a3_0x991083,_0x1f8ee4=document['getElementById'](_0x1705a9(0x1e8)),_0x573207=document[_0x1705a9(0x19b)](_0x1705a9(0x242));for(let _0x556c34 of _0x573207)if(_0x556c34[_0x1705a9(0x1c8)]>=_0x1f8ee4['scrollLeft']){const _0x53595f=new Date(_0x556c34['getAttribute'](_0x1705a9(0x229)));document['getElementById'](_0x1705a9(0x234))[_0x1705a9(0x266)]=_0x53595f['toLocaleString']('ru',{'month':'long'})[_0x1705a9(0x1ee)]()+'\x20'+_0x53595f[_0x1705a9(0x1ab)]();break;}}function showToast(_0x4e7e5b){const _0x2f7d17=a3_0x991083,_0x319b68=document[_0x2f7d17(0x212)](_0x2f7d17(0x1fa));_0x319b68[_0x2f7d17(0x266)]=_0x4e7e5b,_0x319b68[_0x2f7d17(0x24f)][_0x2f7d17(0x184)](_0x2f7d17(0x1ed)),setTimeout(()=>_0x319b68[_0x2f7d17(0x24f)][_0x2f7d17(0x221)](_0x2f7d17(0x1ed)),0x7d0);}function handleInfiniteScroll(){const _0x28ec40=a3_0x991083,_0x514470=document[_0x28ec40(0x212)](_0x28ec40(0x1e8)),_0x2df071=_0x514470[_0x28ec40(0x1a8)],_0x40efe6=_0x514470[_0x28ec40(0x26b)],_0x3bf6d0=_0x514470['clientWidth'];if(_0x40efe6-(_0x2df071+_0x3bf6d0)<0x12c){const _0x593a27=endOffset;endOffset+=0xe,renderDayRange(_0x593a27+0x1,endOffset),reRenderBlocks();}if(_0x2df071<0x12c){const _0x3e983e=startOffset;startOffset-=0xe,prependDays(startOffset,_0x3e983e-0x1),_0x514470[_0x28ec40(0x1a8)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x31a58f,_0x25edfb){const _0x37b7bc=a3_0x991083,_0x3dc7f6=document[_0x37b7bc(0x212)](_0x37b7bc(0x1c5)),_0x544a5a=document[_0x37b7bc(0x212)](_0x37b7bc(0x25e)),_0x39d706=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2da60a=new Date();_0x2da60a['setHours'](0x0,0x0,0x0,0x0);const _0xaa4a42=getLocalDateStr(new Date()),_0x1c8c79=document[_0x37b7bc(0x182)](),_0x30f274=document[_0x37b7bc(0x182)]();for(let _0x2187fb=_0x31a58f;_0x2187fb<=_0x25edfb;_0x2187fb++){const _0x1333ed=new Date(_0x2da60a);_0x1333ed[_0x37b7bc(0x202)](_0x1333ed[_0x37b7bc(0x1f8)]()+_0x2187fb);const _0x5c3d9a=getLocalDateStr(_0x1333ed);let _0x4de065=_0x1333ed[_0x37b7bc(0x246)]()-0x1;if(_0x4de065===-0x1)_0x4de065=0x6;const _0x20a0cc=_0x5c3d9a===_0xaa4a42,_0x22b42f=document[_0x37b7bc(0x22e)](_0x37b7bc(0x25c));_0x22b42f[_0x37b7bc(0x223)]=_0x37b7bc(0x253)+(_0x20a0cc?_0x37b7bc(0x1c1):''),_0x22b42f['setAttribute'](_0x37b7bc(0x229),_0x5c3d9a),_0x22b42f[_0x37b7bc(0x250)]=_0x37b7bc(0x1e9)+_0x39d706[_0x4de065]+'</div><div\x20class=\x22dch-num\x22>'+_0x1333ed['getDate']()+_0x37b7bc(0x20f),_0x1c8c79[_0x37b7bc(0x1ca)](_0x22b42f);const _0x869440=document[_0x37b7bc(0x22e)](_0x37b7bc(0x25c));_0x869440[_0x37b7bc(0x223)]=_0x37b7bc(0x193)+(_0x20a0cc?_0x37b7bc(0x1c1):''),_0x869440[_0x37b7bc(0x1f3)](_0x37b7bc(0x229),_0x5c3d9a),_0x869440[_0x37b7bc(0x1f3)]('data-day-idx',_0x4de065),_0x30f274[_0x37b7bc(0x1ca)](_0x869440);}_0x3dc7f6[_0x37b7bc(0x265)](_0x1c8c79,_0x3dc7f6[_0x37b7bc(0x231)]),_0x544a5a[_0x37b7bc(0x265)](_0x30f274,_0x544a5a[_0x37b7bc(0x188)](_0x37b7bc(0x214)));}function hexToRgba(_0x20afe0,_0x1ae3b4){const _0x202ad0=a3_0x991083;let _0xedd36c;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x202ad0(0x206)](_0x20afe0))return _0xedd36c=_0x20afe0[_0x202ad0(0x1b9)](0x1)[_0x202ad0(0x22b)](''),_0xedd36c[_0x202ad0(0x225)]==0x3&&(_0xedd36c=[_0xedd36c[0x0],_0xedd36c[0x0],_0xedd36c[0x1],_0xedd36c[0x1],_0xedd36c[0x2],_0xedd36c[0x2]]),_0xedd36c='0x'+_0xedd36c[_0x202ad0(0x1c7)](''),_0x202ad0(0x243)+[_0xedd36c>>0x10&0xff,_0xedd36c>>0x8&0xff,_0xedd36c&0xff][_0x202ad0(0x1c7)](',')+','+_0x1ae3b4+')';return _0x202ad0(0x259)+_0x1ae3b4+')';}let confirmResolver=null;function showCustomConfirm(_0x2acfb8,_0xce13a3,_0x5be6f0=!![]){const _0x513f4d=a3_0x991083;document[_0x513f4d(0x212)](_0x513f4d(0x25b))[_0x513f4d(0x266)]=_0x2acfb8,document[_0x513f4d(0x212)]('ccText')[_0x513f4d(0x266)]=_0xce13a3;const _0x138ad0=document[_0x513f4d(0x212)](_0x513f4d(0x1bd));return _0x5be6f0?(_0x138ad0[_0x513f4d(0x19a)]['color']=_0x513f4d(0x189),_0x138ad0[_0x513f4d(0x19a)][_0x513f4d(0x1e0)]=_0x513f4d(0x1d2)):(_0x138ad0[_0x513f4d(0x19a)][_0x513f4d(0x26f)]=_0x513f4d(0x241),_0x138ad0[_0x513f4d(0x19a)][_0x513f4d(0x1e0)]=_0x513f4d(0x1d2)),new Promise(_0x446ff0=>{const _0x303534=_0x513f4d;confirmResolver=_0x446ff0,document[_0x303534(0x212)](_0x303534(0x227))['classList'][_0x303534(0x184)]('visible');});}function a3_0x4351(_0x271c65,_0x5150a4){_0x271c65=_0x271c65-0x180;const _0x18b2e5=a3_0x54ba();let _0x3a8560=_0x18b2e5[_0x271c65];return _0x3a8560;}function resolveCustomConfirm(_0x38c92e){const _0x52c07f=a3_0x991083;document['getElementById'](_0x52c07f(0x227))[_0x52c07f(0x24f)][_0x52c07f(0x221)](_0x52c07f(0x1eb));if(confirmResolver)confirmResolver(_0x38c92e);}async function tryCancelCurrentSession(){const _0x52491f=a3_0x991083;if(!currentSession)return;const _0x4c4d2c=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x52491f(0x233),!![]);if(!_0x4c4d2c)return;const _0x372bfc=currentSession;closeAllSheets(),sessions=sessions[_0x52491f(0x1d7)](_0x426eda=>_0x426eda['id']!==_0x372bfc['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x52491f(0x1a3)]();try{const _0xc8e8ec=window[_0x52491f(0x23d)]?.[_0x52491f(0x238)],_0x2b982e=await fetch(API_URL,{'method':_0x52491f(0x1cc),'body':JSON['stringify']({'action':_0x52491f(0x190),'init_data':_0xc8e8ec?.[_0x52491f(0x20d)]||'','coachId':_0x372bfc[_0x52491f(0x1bc)],'dateStr':_0x372bfc[_0x52491f(0x273)],'sessionId':_0x372bfc['id']})});if(_0x2b982e['ok'])DataManager[_0x52491f(0x20e)]();}catch(_0x3c8942){showToast(_0x52491f(0x1b1));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x27cda6=a3_0x991083;if(!currentSession)return;document[_0x27cda6(0x212)](_0x27cda6(0x1c2))[_0x27cda6(0x24f)][_0x27cda6(0x221)](_0x27cda6(0x261)),document[_0x27cda6(0x212)]('rescheduleSheet')[_0x27cda6(0x24f)][_0x27cda6(0x184)]('open');const _0x30cf21=document[_0x27cda6(0x212)](_0x27cda6(0x23f)),_0x587f8b=document['getElementById'](_0x27cda6(0x191));_0x30cf21[_0x27cda6(0x250)]='',_0x587f8b[_0x27cda6(0x250)]=_0x27cda6(0x1be);const [_0x18c492,_0x533725]=currentSession[_0x27cda6(0x24c)][_0x27cda6(0x22b)](':')[_0x27cda6(0x1a2)](Number),[_0x4857af,_0x2f8a80]=currentSession[_0x27cda6(0x22d)]['split'](':')[_0x27cda6(0x1a2)](Number),_0xd94fb7=_0x4857af*0x3c+_0x2f8a80-(_0x18c492*0x3c+_0x533725);try{const _0x335aa0=window['Telegram']?.[_0x27cda6(0x238)],_0x529206=await fetch(API_URL,{'method':_0x27cda6(0x1cc),'body':JSON['stringify']({'action':_0x27cda6(0x230),'coachId':currentSession[_0x27cda6(0x1bc)],'duration':_0xd94fb7,'init_data':_0x335aa0?.[_0x27cda6(0x20d)]||'','excludeSessionId':currentSession['id']})}),_0x466fcc=await _0x529206['json']();_0x466fcc['ok']&&_0x466fcc[_0x27cda6(0x1f6)]?(availableSlotsCache=_0x466fcc[_0x27cda6(0x1f6)],renderRescheduleDates()):_0x587f8b[_0x27cda6(0x250)]=_0x27cda6(0x240);}catch(_0x18cfbc){_0x587f8b[_0x27cda6(0x250)]=_0x27cda6(0x1b6);}}function renderRescheduleDates(){const _0x5bdf63=a3_0x991083,_0x1d34ce=document[_0x5bdf63(0x212)]('rsDatesTrack');_0x1d34ce[_0x5bdf63(0x250)]='';const _0x1b79a3=Object[_0x5bdf63(0x1dd)](availableSlotsCache)[_0x5bdf63(0x200)](),_0x359745=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x1b79a3[_0x5bdf63(0x225)]===0x0){document[_0x5bdf63(0x212)]('rsSlotsGrid')['innerHTML']=_0x5bdf63(0x196);return;}_0x1b79a3['forEach']((_0x1086d7,_0x2e11fa)=>{const _0x51d32e=_0x5bdf63,_0x401646=new Date(_0x1086d7),_0x191d05=_0x359745[_0x401646[_0x51d32e(0x246)]()],_0x3ff0d5=_0x401646[_0x51d32e(0x1f8)](),_0x1f8108=document[_0x51d32e(0x22e)](_0x51d32e(0x25c));_0x1f8108[_0x51d32e(0x223)]=_0x51d32e(0x1d1);if(_0x2e11fa===0x0)_0x1f8108[_0x51d32e(0x24f)][_0x51d32e(0x184)](_0x51d32e(0x18b));_0x1f8108[_0x51d32e(0x250)]=_0x51d32e(0x197)+_0x191d05+_0x51d32e(0x198)+_0x3ff0d5+_0x51d32e(0x20f),_0x1f8108[_0x51d32e(0x1a7)]=()=>selectRsDate(_0x1086d7,_0x1f8108),_0x1d34ce[_0x51d32e(0x1ca)](_0x1f8108);}),selectRsDate(_0x1b79a3[0x0],_0x1d34ce[_0x5bdf63(0x231)]);}function selectRsDate(_0x1ccaf6,_0x2d677c){const _0x332226=a3_0x991083;selectedRsDate=_0x1ccaf6,document[_0x332226(0x19b)](_0x332226(0x1dc))['forEach'](_0x55e206=>_0x55e206[_0x332226(0x24f)][_0x332226(0x221)](_0x332226(0x18b)));if(_0x2d677c)_0x2d677c[_0x332226(0x24f)][_0x332226(0x184)]('active');const _0xe48f86=document['getElementById'](_0x332226(0x191));_0xe48f86[_0x332226(0x250)]='';const _0x475231=availableSlotsCache[_0x1ccaf6]||[];if(_0x475231[_0x332226(0x225)]===0x0){_0xe48f86['innerHTML']=_0x332226(0x240);return;}_0x475231['forEach'](_0x4a3829=>{const _0x5e1f31=_0x332226,_0x474f8e=document[_0x5e1f31(0x22e)](_0x5e1f31(0x272));_0x474f8e[_0x5e1f31(0x223)]=_0x5e1f31(0x24a),_0x474f8e[_0x5e1f31(0x266)]=_0x4a3829,_0x474f8e[_0x5e1f31(0x1a7)]=()=>confirmReschedule(_0x4a3829),_0xe48f86[_0x5e1f31(0x1ca)](_0x474f8e);});}async function confirmReschedule(_0x14945){const _0x20629f=a3_0x991083,_0x4964e3=new Date(selectedRsDate),_0x1dcf47=_0x4964e3[_0x20629f(0x1f2)](_0x20629f(0x262),{'day':_0x20629f(0x218),'month':_0x20629f(0x1a1)}),_0x3f73ed=await showCustomConfirm(_0x20629f(0x1f5),_0x20629f(0x237)+_0x1dcf47+'\x20–≤\x20'+_0x14945+'?',![]);if(!_0x3f73ed)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x20629f(0x1a3)]();const _0x383112=currentSession[_0x20629f(0x273)],_0x1eb205=currentSession['id'],[_0x4439c8,_0x5a9069]=currentSession['start']['split'](':')[_0x20629f(0x1a2)](Number),[_0x4c4c74,_0x5f1e7e]=currentSession['end'][_0x20629f(0x22b)](':')[_0x20629f(0x1a2)](Number),_0x4872c6=_0x4c4c74*0x3c+_0x5f1e7e-(_0x4439c8*0x3c+_0x5a9069),[_0x30f09f,_0x4a20df]=_0x14945[_0x20629f(0x22b)](':')['map'](Number),_0x5da5dc=_0x30f09f*0x3c+_0x4a20df+_0x4872c6,_0x1ff919=Math[_0x20629f(0x267)](_0x5da5dc/0x3c),_0x2afda8=_0x5da5dc%0x3c,_0x2af9a4=String(_0x1ff919)['padStart'](0x2,'0')+':'+String(_0x2afda8)[_0x20629f(0x23b)](0x2,'0'),_0x276642=sessions['findIndex'](_0x44f00b=>_0x44f00b['id']===_0x1eb205);_0x276642!==-0x1&&(sessions[_0x276642][_0x20629f(0x273)]=selectedRsDate,sessions[_0x276642][_0x20629f(0x24c)]=_0x14945,sessions[_0x276642][_0x20629f(0x22d)]=_0x2af9a4,reRenderBlocks());try{const _0x403c06=window[_0x20629f(0x23d)]?.[_0x20629f(0x238)],_0x2efd2e=await fetch(API_URL,{'method':_0x20629f(0x1cc),'body':JSON['stringify']({'action':_0x20629f(0x1cb),'init_data':_0x403c06?.[_0x20629f(0x20d)]||'','oldSessionId':_0x1eb205,'oldDate':_0x383112,'newDate':selectedRsDate,'newTime':_0x14945,'coachId':currentSession[_0x20629f(0x1bc)]})}),_0x54424d=await _0x2efd2e[_0x20629f(0x1d6)]();!_0x54424d['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x20629f(0x19c)]()):(showToast(_0x20629f(0x1e3)),DataManager[_0x20629f(0x20e)]());}catch(_0x6051b3){showToast(_0x20629f(0x1b1));}}document[a3_0x991083(0x1cd)](a3_0x991083(0x1d8),init);