const a3_0x479473=a3_0x21ac;(function(_0x9ad48a,_0x2639ca){const _0x21f079=a3_0x21ac,_0x4b0859=_0x9ad48a();while(!![]){try{const _0x393cfa=parseInt(_0x21f079(0x16a))/0x1+parseInt(_0x21f079(0x230))/0x2*(-parseInt(_0x21f079(0x1e7))/0x3)+parseInt(_0x21f079(0x24a))/0x4*(parseInt(_0x21f079(0x1ca))/0x5)+-parseInt(_0x21f079(0x1d6))/0x6*(-parseInt(_0x21f079(0x18b))/0x7)+-parseInt(_0x21f079(0x22c))/0x8+-parseInt(_0x21f079(0x1d3))/0x9*(-parseInt(_0x21f079(0x255))/0xa)+-parseInt(_0x21f079(0x23b))/0xb*(parseInt(_0x21f079(0x16e))/0xc);if(_0x393cfa===_0x2639ca)break;else _0x4b0859['push'](_0x4b0859['shift']());}catch(_0x56e072){_0x4b0859['push'](_0x4b0859['shift']());}}}(a3_0x275d,0x4ce3c));const APP_VERSION=a3_0x479473(0x16f),API_URL=a3_0x479473(0x1d2),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS='uc_client_settings',KEY_CLIENTS='uc_client_list';let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x479473(0x214),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x1f33e6=a3_0x479473,_0x4adc61=(function(){let _0x2dfe97=!![];return function(_0xf5145a,_0x555d62){const _0x1eeca0=_0x2dfe97?function(){const _0x44eef3=a3_0x21ac;if(_0x555d62){const _0x5ee2e2=_0x555d62[_0x44eef3(0x200)](_0xf5145a,arguments);return _0x555d62=null,_0x5ee2e2;}}:function(){};return _0x2dfe97=![],_0x1eeca0;};}()),_0x2aba90=_0x4adc61(this,function(){const _0x1053ca=a3_0x21ac;return _0x2aba90['toString']()['search'](_0x1053ca(0x239))['toString']()['constructor'](_0x2aba90)[_0x1053ca(0x173)](_0x1053ca(0x239));});_0x2aba90();try{const _0x124522=window['Telegram']?.[_0x1f33e6(0x1b8)];if(!_0x124522)return;_0x124522[_0x1f33e6(0x171)](),_0x124522[_0x1f33e6(0x20d)]();try{_0x124522[_0x1f33e6(0x233)]('#050505'),_0x124522[_0x1f33e6(0x1bc)]&&_0x124522[_0x1f33e6(0x1bc)](_0x1f33e6(0x201));}catch(_0x5e59a8){console['log']('Error\x20setting\x20color:',_0x5e59a8);}try{_0x124522[_0x1f33e6(0x1aa)]&&(_0x124522[_0x1f33e6(0x1aa)][_0x1f33e6(0x17b)](),_0x124522[_0x1f33e6(0x1aa)]['offClick'](),_0x124522[_0x1f33e6(0x1aa)][_0x1f33e6(0x1d9)](function(){const _0x4e4e99=_0x1f33e6;window[_0x4e4e99(0x21d)][_0x4e4e99(0x237)]=_0x4e4e99(0x1c1);}));}catch(_0x5d19b3){console[_0x1f33e6(0x1ce)](_0x1f33e6(0x1e9),_0x5d19b3);}try{if(_0x124522[_0x1f33e6(0x23d)])_0x124522[_0x1f33e6(0x23d)]();}catch(_0xd76e6a){}}catch(_0x28033f){console[_0x1f33e6(0x217)]('Critical\x20TMA\x20Error:',_0x28033f);}}());function isAdmin(){const _0x407574=a3_0x479473;try{const _0x20048b=Number(window['Telegram']?.[_0x407574(0x1b8)]?.[_0x407574(0x189)]?.[_0x407574(0x1a1)]?.['id']);return _0x20048b===0xbaf7174;}catch(_0x47cea3){return![];}}const DataManager={'saveLocally'(){const _0x71e2d8=a3_0x479473;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x71e2d8(0x196)](sessions)),localStorage[_0x71e2d8(0x1a9)](KEY_CLIENTS,JSON[_0x71e2d8(0x196)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x29e6e7){}},'loadLocal'(){const _0x266205=a3_0x479473;try{const _0x5d156a=localStorage[_0x266205(0x248)](KEY_SESSIONS);if(_0x5d156a)sessions=JSON[_0x266205(0x1c8)](_0x5d156a);const _0x4e4b18=localStorage[_0x266205(0x248)](KEY_CLIENTS);if(_0x4e4b18)clients=JSON[_0x266205(0x1c8)](_0x4e4b18);const _0x46ca8b=localStorage['getItem'](KEY_SETTINGS);if(_0x46ca8b){const _0x5c7e08=JSON[_0x266205(0x1c8)](_0x46ca8b);if(_0x5c7e08[_0x266205(0x232)])availabilityPattern=_0x5c7e08['pattern'];if(_0x5c7e08['ranges'])specialRanges=_0x5c7e08[_0x266205(0x1ef)];if(_0x5c7e08[_0x266205(0x183)])dateExceptions=_0x5c7e08[_0x266205(0x183)];}}catch(_0x36f07b){}},async 'syncLoad'(){const _0x438723=a3_0x479473,_0x34e32d=new Date(),_0x164765=_0x34e32d[_0x438723(0x215)]()+'-'+String(_0x34e32d['getMonth']()+0x1)[_0x438723(0x25d)](0x2,'0'),_0x2ee12c=new Date(_0x34e32d);_0x2ee12c['setMonth'](_0x34e32d['getMonth']()+0x1);const _0x2f68f1=_0x2ee12c[_0x438723(0x215)]()+'-'+String(_0x2ee12c[_0x438723(0x18f)]()+0x1)['padStart'](0x2,'0'),_0x5339f8=Date['now']();try{const _0x4db4fe=window[_0x438723(0x24c)]?.['WebApp'],_0x138b46=_0x4db4fe?.['initData']||'',[_0x18f23d,_0x38524c]=await Promise[_0x438723(0x206)]([fetch(API_URL,{'method':'POST','body':JSON[_0x438723(0x196)]({'action':_0x438723(0x18d),'init_data':_0x138b46,'month_str':_0x164765})})[_0x438723(0x25f)](_0x544fe5=>_0x544fe5[_0x438723(0x251)]()),fetch(API_URL,{'method':_0x438723(0x169),'body':JSON['stringify']({'action':_0x438723(0x18d),'init_data':_0x138b46,'month_str':_0x2f68f1})})[_0x438723(0x25f)](_0x4d22ad=>_0x4d22ad[_0x438723(0x251)]())]);if(lastUserActionTime>_0x5339f8){console[_0x438723(0x1ce)](_0x438723(0x249));return;}if(_0x18f23d['ok'])this[_0x438723(0x1f4)](_0x18f23d[_0x438723(0x19b)],_0x164765);if(_0x38524c['ok'])this[_0x438723(0x1f4)](_0x38524c[_0x438723(0x19b)],_0x2f68f1);this[_0x438723(0x168)]();}catch(_0x509eb3){}},'applyData'(_0x44630f,_0x14f050){const _0x4550aa=a3_0x479473;if(!_0x44630f)return;if(_0x44630f[_0x4550aa(0x209)]){if(_0x44630f[_0x4550aa(0x209)][_0x4550aa(0x232)])availabilityPattern=_0x44630f[_0x4550aa(0x209)][_0x4550aa(0x232)];if(_0x44630f[_0x4550aa(0x209)]['ranges'])specialRanges=_0x44630f[_0x4550aa(0x209)][_0x4550aa(0x1ef)];if(_0x44630f[_0x4550aa(0x209)][_0x4550aa(0x183)])dateExceptions=_0x44630f[_0x4550aa(0x209)][_0x4550aa(0x183)];}if(_0x44630f[_0x4550aa(0x176)]&&Array[_0x4550aa(0x243)](_0x44630f[_0x4550aa(0x176)]))clients=_0x44630f[_0x4550aa(0x176)];_0x44630f[_0x4550aa(0x24d)]&&(coachProfiles={...coachProfiles,..._0x44630f['coach_profiles']}),_0x44630f[_0x4550aa(0x192)]&&(sessions=sessions['filter'](_0x165e23=>!_0x165e23['dateStr']['startsWith'](_0x14f050)),Object[_0x4550aa(0x19c)](_0x44630f[_0x4550aa(0x192)])['forEach'](_0x5e8c8c=>{const _0x40d27d=_0x4550aa,_0x2750b7=_0x44630f[_0x40d27d(0x192)][_0x5e8c8c];_0x2750b7[_0x40d27d(0x20e)](_0xe02108=>{const _0x30edd1=_0x40d27d;sessions['push']({'id':_0xe02108['i'],'clientId':_0xe02108['c'],'coachId':_0xe02108[_0x30edd1(0x184)],'dateStr':_0x14f050+'-'+_0x5e8c8c[_0x30edd1(0x25d)](0x2,'0'),'start':_0xe02108['s'],'end':_0xe02108['e'],'note':_0xe02108['n']||'','status':_0xe02108['st']||_0x30edd1(0x167),'seriesId':_0xe02108[_0x30edd1(0x1f6)]});});})),reRenderBlocks();}};function init(){const _0x4a64b6=a3_0x479473;DataManager[_0x4a64b6(0x17e)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x4a64b6(0x22d)](_0x4a64b6(0x19e))['addEventListener'](_0x4a64b6(0x1b5),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x4a64b6(0x187)]();}function renderTimeColumn(){const _0x15d7d0=a3_0x479473,_0x541c97=document['getElementById'](_0x15d7d0(0x190)),_0x396a00=document[_0x15d7d0(0x22d)](_0x15d7d0(0x1a7));_0x541c97[_0x15d7d0(0x221)]='',_0x541c97[_0x15d7d0(0x235)](_0x396a00);for(let _0x3adedf=0x0;_0x3adedf<0x18;_0x3adedf++){const _0x220aa6=document[_0x15d7d0(0x1af)](_0x15d7d0(0x246));_0x220aa6['className']=_0x15d7d0(0x180);if(_0x3adedf>0x0)_0x220aa6[_0x15d7d0(0x221)]=_0x15d7d0(0x24e)+String(_0x3adedf)[_0x15d7d0(0x25d)](0x2,'0')+':00</span>';_0x541c97[_0x15d7d0(0x235)](_0x220aa6);}}function renderDayRange(_0x27278a,_0x2bb45c){const _0x33d55a=a3_0x479473,_0x5e1a62=document[_0x33d55a(0x22d)]('daysHeaderTrack'),_0x777467=document['getElementById'](_0x33d55a(0x1cc)),_0x254a0e=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x6555fc=new Date();_0x6555fc[_0x33d55a(0x1e1)](0x0,0x0,0x0,0x0);const _0x58207f=getLocalDateStr(new Date());for(let _0x5e7dc1=_0x27278a;_0x5e7dc1<=_0x2bb45c;_0x5e7dc1++){const _0x3b1374=new Date(_0x6555fc);_0x3b1374[_0x33d55a(0x1b9)](_0x3b1374[_0x33d55a(0x197)]()+_0x5e7dc1);const _0x500751=getLocalDateStr(_0x3b1374);let _0x50d9cc=_0x3b1374[_0x33d55a(0x1ff)]()-0x1;if(_0x50d9cc===-0x1)_0x50d9cc=0x6;const _0x34b726=_0x500751===_0x58207f,_0x5e42b4=document[_0x33d55a(0x1af)](_0x33d55a(0x246));_0x5e42b4[_0x33d55a(0x257)]=_0x33d55a(0x226)+(_0x34b726?'today':''),_0x5e42b4[_0x33d55a(0x211)](_0x33d55a(0x1df),_0x500751),_0x5e42b4[_0x33d55a(0x221)]=_0x33d55a(0x1c7)+_0x254a0e[_0x50d9cc]+_0x33d55a(0x1e8)+_0x3b1374[_0x33d55a(0x197)]()+'</div>',_0x5e1a62[_0x33d55a(0x235)](_0x5e42b4);const _0x1d40f4=document[_0x33d55a(0x1af)]('div');_0x1d40f4[_0x33d55a(0x257)]=_0x33d55a(0x1e4)+(_0x34b726?_0x33d55a(0x21e):''),_0x1d40f4[_0x33d55a(0x211)]('data-date',_0x500751),_0x1d40f4[_0x33d55a(0x211)](_0x33d55a(0x170),_0x50d9cc),_0x777467[_0x33d55a(0x235)](_0x1d40f4);}}function reRenderBlocks(){const _0x2adb29=a3_0x479473;document['querySelectorAll']('.day-column')[_0x2adb29(0x20e)](_0x2c7860=>{const _0x55b36c=_0x2adb29;_0x2c7860[_0x55b36c(0x17a)](_0x55b36c(0x245))[_0x55b36c(0x20e)](_0x1fd39e=>_0x1fd39e[_0x55b36c(0x188)]());const _0x25817c=_0x2c7860[_0x55b36c(0x1bd)](_0x55b36c(0x1df)),_0x5e5f27=parseInt(_0x2c7860['getAttribute'](_0x55b36c(0x170))),_0x371bd5=Math[_0x55b36c(0x1de)](_0x2c7860['offsetLeft']);(availabilityPattern[_0x5e5f27]||[])[_0x55b36c(0x20e)](_0x5a00e5=>{const _0x2f4b8f=_0x55b36c,_0x3ea3c0=document[_0x2f4b8f(0x1af)]('div');_0x3ea3c0[_0x2f4b8f(0x257)]=_0x2f4b8f(0x19a),_0x3ea3c0['style']['top']=_0x5a00e5*GRID_H+'px',_0x3ea3c0[_0x2f4b8f(0x219)][_0x2f4b8f(0x254)]='-'+_0x371bd5+_0x2f4b8f(0x19d)+_0x5a00e5*GRID_H+'px',_0x2c7860['appendChild'](_0x3ea3c0);});if(specialRanges['length']>0x0){const _0x40d7f8=new Date(_0x25817c+_0x55b36c(0x236))['getTime'](),_0x3a3b1a=new Date(_0x25817c+_0x55b36c(0x18e))[_0x55b36c(0x186)]();specialRanges[_0x55b36c(0x20e)](_0x5979da=>{const _0x5dd502=_0x55b36c,_0x52764b=new Date(_0x5979da['start'])[_0x5dd502(0x186)](),_0x331618=new Date(_0x5979da[_0x5dd502(0x17c)])['getTime'](),_0x12976d=Math['max'](_0x40d7f8,_0x52764b),_0x32422a=Math[_0x5dd502(0x213)](_0x3a3b1a,_0x331618);if(_0x12976d<_0x32422a){const _0x5315f5=(_0x12976d-_0x40d7f8)/0x36ee80*GRID_H,_0x4d781f=(_0x32422a-_0x12976d)/0x36ee80*GRID_H,_0x4a551a=document[_0x5dd502(0x1af)](_0x5dd502(0x246));_0x4d781f>=23.5*GRID_H?(_0x4a551a['className']=_0x5dd502(0x252),_0x4a551a[_0x5dd502(0x219)][_0x5dd502(0x254)]='-'+_0x371bd5+_0x5dd502(0x1be)):(_0x4a551a['className']=_0x5dd502(0x223),_0x4a551a[_0x5dd502(0x219)][_0x5dd502(0x222)]=_0x5315f5+'px',_0x4a551a[_0x5dd502(0x219)][_0x5dd502(0x244)]=_0x4d781f+'px',_0x4a551a[_0x5dd502(0x219)][_0x5dd502(0x254)]='-'+_0x371bd5+_0x5dd502(0x19d)+_0x5315f5+'px'),_0x2c7860[_0x5dd502(0x235)](_0x4a551a);}});}renderEventsForColumn(_0x2c7860,_0x25817c);});}function renderEventsForColumn(_0x22eb18,_0x1d6e7b){const _0x5ae6c6=a3_0x479473,_0x96390c=sessions['filter'](_0x31ac57=>_0x31ac57[_0x5ae6c6(0x1cb)]===_0x1d6e7b),_0x5e7cd6=_0x96390c[_0x5ae6c6(0x21c)](_0x5ed5ac=>{const _0x27f5d8=_0x5ae6c6,[_0x14fff0,_0x4e3e2e]=_0x5ed5ac[_0x27f5d8(0x238)][_0x27f5d8(0x218)](':')[_0x27f5d8(0x21c)](Number),[_0x146729,_0x3e14a7]=_0x5ed5ac[_0x27f5d8(0x17c)][_0x27f5d8(0x218)](':')[_0x27f5d8(0x21c)](Number);return{'data':_0x5ed5ac,'start':_0x14fff0*0x3c+_0x4e3e2e,'end':_0x146729*0x3c+_0x3e14a7,'colIndex':0x0};});_0x5e7cd6[_0x5ae6c6(0x179)]((_0x30f16c,_0x41ff42)=>_0x30f16c[_0x5ae6c6(0x238)]-_0x41ff42[_0x5ae6c6(0x238)]||_0x41ff42[_0x5ae6c6(0x17c)]-_0x41ff42['start']-(_0x30f16c[_0x5ae6c6(0x17c)]-_0x30f16c[_0x5ae6c6(0x238)]));const _0x75a651=[];_0x5e7cd6[_0x5ae6c6(0x20e)](_0x25aa05=>{const _0x2962e6=_0x5ae6c6;let _0x586aec=![];for(let _0x3ca069=0x0;_0x3ca069<_0x75a651[_0x2962e6(0x1ae)];_0x3ca069++){const _0x2747cd=_0x75a651[_0x3ca069];if(_0x25aa05[_0x2962e6(0x238)]>=_0x2747cd[_0x2747cd[_0x2962e6(0x1ae)]-0x1][_0x2962e6(0x17c)]){_0x2747cd[_0x2962e6(0x1ec)](_0x25aa05),_0x25aa05[_0x2962e6(0x220)]=_0x3ca069,_0x586aec=!![];break;}}!_0x586aec&&(_0x75a651['push']([_0x25aa05]),_0x25aa05[_0x2962e6(0x220)]=_0x75a651[_0x2962e6(0x1ae)]-0x1);}),_0x5e7cd6[_0x5ae6c6(0x20e)](_0x4135f1=>{const _0x5a94f8=_0x5ae6c6;let _0x3dc92b=0x0;_0x5e7cd6['forEach'](_0x52e905=>{const _0xc38045=a3_0x21ac;if(Math['max'](_0x4135f1[_0xc38045(0x238)],_0x52e905[_0xc38045(0x238)])<Math[_0xc38045(0x213)](_0x4135f1[_0xc38045(0x17c)],_0x52e905[_0xc38045(0x17c)])&&_0x52e905[_0xc38045(0x220)]>_0x3dc92b)_0x3dc92b=_0x52e905[_0xc38045(0x220)];});const _0x5ad638=_0x3dc92b+0x1,_0x21d770=0x64/_0x5ad638,_0x4cba90=_0x4135f1[_0x5a94f8(0x220)]*_0x21d770,_0x180af3=document['createElement']('div'),_0x1795cc=_0x4135f1[_0x5a94f8(0x19b)];let _0x44b1c3=_0x5a94f8(0x19f);if(clients&&clients[_0x5a94f8(0x1ae)]>0x0){const _0x215b7b=clients[_0x5a94f8(0x1b3)](_0xe02a5b=>String(_0xe02a5b['id'])===String(_0x1795cc[_0x5a94f8(0x212)]));if(_0x215b7b&&_0x215b7b['color'])_0x44b1c3=_0x215b7b[_0x5a94f8(0x224)];}const _0x29cc3b=_0x1795cc['status']===_0x5a94f8(0x1c9),_0x471804=_0x29cc3b?0x1:0.45;_0x180af3[_0x5a94f8(0x257)]=_0x5a94f8(0x166)+(_0x29cc3b?_0x5a94f8(0x208):''),_0x180af3[_0x5a94f8(0x219)][_0x5a94f8(0x1d1)]=hexToRgba(_0x44b1c3,_0x471804),_0x180af3[_0x5a94f8(0x219)][_0x5a94f8(0x1dd)]=_0x44b1c3;const _0xb33db3=_0x4135f1[_0x5a94f8(0x238)]/0x3c*GRID_H,_0x16d0e2=(_0x4135f1[_0x5a94f8(0x17c)]-_0x4135f1[_0x5a94f8(0x238)])/0x3c*GRID_H;_0x180af3[_0x5a94f8(0x219)][_0x5a94f8(0x222)]=_0xb33db3+'px',_0x180af3['style']['height']=Math[_0x5a94f8(0x1a0)](_0x16d0e2,0x14)+'px',_0x180af3[_0x5a94f8(0x219)][_0x5a94f8(0x20b)]=_0x5a94f8(0x23f)+_0x21d770+_0x5a94f8(0x1e6),_0x180af3[_0x5a94f8(0x219)][_0x5a94f8(0x1e2)]=_0x5a94f8(0x23f)+_0x4cba90+_0x5a94f8(0x1bb),_0x180af3[_0x5a94f8(0x219)][_0x5a94f8(0x225)]=0xa+_0x4135f1['colIndex'];if(_0x21d770<0x55)_0x180af3[_0x5a94f8(0x253)][_0x5a94f8(0x247)](_0x5a94f8(0x198));let _0x22701f='';if(_0x1795cc[_0x5a94f8(0x207)])_0x22701f+=_0x5a94f8(0x177);if(_0x29cc3b)_0x22701f+=_0x5a94f8(0x21a);_0x180af3[_0x5a94f8(0x221)]=_0x5a94f8(0x20c)+_0x1795cc[_0x5a94f8(0x238)]+_0x5a94f8(0x175)+_0x1795cc['end']+_0x5a94f8(0x1fb)+_0x22701f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x180af3[_0x5a94f8(0x203)]=_0x55c16b=>{_0x55c16b['stopPropagation'](),openDetails(_0x1795cc);},_0x22eb18[_0x5a94f8(0x235)](_0x180af3);});}function openAnalytics(){const _0x5c364f=a3_0x479473,_0x5f0c02=document[_0x5c364f(0x24b)](_0x5c364f(0x25e));setAnalyticsPeriod(_0x5c364f(0x214),_0x5f0c02),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x49a30f,_0x53050c){const _0x3a7299=a3_0x479473;currentAnPeriod=_0x49a30f,document[_0x3a7299(0x17a)](_0x3a7299(0x25e))['forEach'](_0xc363a2=>_0xc363a2[_0x3a7299(0x253)][_0x3a7299(0x188)](_0x3a7299(0x1f2)));if(_0x53050c)_0x53050c[_0x3a7299(0x253)]['add'](_0x3a7299(0x1f2));const _0x551035=document['getElementById'](_0x3a7299(0x1b6));_0x551035[_0x3a7299(0x219)][_0x3a7299(0x256)]=_0x49a30f==='custom'?_0x3a7299(0x181):'none';const _0x4b56ee=new Date();let _0xd88a91=new Date(),_0x4d904c=new Date();if(_0x49a30f==='week')_0xd88a91=getStartOfWeek(_0x4b56ee),_0x4d904c=new Date(_0xd88a91),_0x4d904c[_0x3a7299(0x1b9)](_0x4d904c['getDate']()+0x6);else{if(_0x49a30f===_0x3a7299(0x1ed))_0xd88a91=new Date(_0x4b56ee[_0x3a7299(0x215)](),_0x4b56ee['getMonth'](),0x1),_0x4d904c=new Date(_0x4b56ee[_0x3a7299(0x215)](),_0x4b56ee[_0x3a7299(0x18f)]()+0x1,0x0);else{!document[_0x3a7299(0x22d)](_0x3a7299(0x182))[_0x3a7299(0x1e0)]&&(document[_0x3a7299(0x22d)](_0x3a7299(0x182))[_0x3a7299(0x1e0)]=getLocalDateStr(_0x4b56ee),document[_0x3a7299(0x22d)](_0x3a7299(0x1b7))['value']=getLocalDateStr(_0x4b56ee));refreshAnalytics();return;}}document[_0x3a7299(0x22d)](_0x3a7299(0x182))[_0x3a7299(0x1e0)]=getLocalDateStr(_0xd88a91),document[_0x3a7299(0x22d)]('anEnd')['value']=getLocalDateStr(_0x4d904c),refreshAnalytics();}function refreshAnalytics(){const _0x3ac536=a3_0x479473,_0x272f11=document[_0x3ac536(0x22d)](_0x3ac536(0x182))[_0x3ac536(0x1e0)],_0x324e9c=document['getElementById'](_0x3ac536(0x1b7))[_0x3ac536(0x1e0)];if(!_0x272f11||!_0x324e9c)return;const _0x4e6c12=sessions[_0x3ac536(0x1ab)](_0x301a5b=>_0x301a5b[_0x3ac536(0x1cb)]>=_0x272f11&&_0x301a5b[_0x3ac536(0x1cb)]<=_0x324e9c&&_0x301a5b[_0x3ac536(0x231)]!==_0x3ac536(0x1f5)),_0x181993=_0x4e6c12[_0x3ac536(0x1ae)],_0x2ff2e3=_0x4e6c12[_0x3ac536(0x1ab)](_0x48af6d=>_0x48af6d[_0x3ac536(0x231)]===_0x3ac536(0x1c9))[_0x3ac536(0x1ae)],_0x348405=_0x181993>0x0?Math['round'](_0x2ff2e3/_0x181993*0x64):0x0;document[_0x3ac536(0x22d)](_0x3ac536(0x1db))['textContent']=_0x348405+'%',document[_0x3ac536(0x22d)]('anTotalStats')['textContent']=_0x2ff2e3+_0x3ac536(0x1a3)+_0x181993+_0x3ac536(0x229);const _0x432790=document['getElementById'](_0x3ac536(0x165)),_0x968ee6=0x2*Math['PI']*0x23,_0x522303=_0x968ee6-_0x348405/0x64*_0x968ee6;_0x432790[_0x3ac536(0x219)][_0x3ac536(0x241)]=_0x522303;const _0x2c9b72={};_0x4e6c12[_0x3ac536(0x20e)](_0x59ccd8=>{const _0x3c3fad=_0x3ac536,_0x5d6d74=_0x59ccd8[_0x3c3fad(0x1f1)]||_0x3c3fad(0x1b0);if(!_0x2c9b72[_0x5d6d74]){const _0x431577='#'+_0x5d6d74['toString']()[_0x3c3fad(0x17d)](0x0,0x6);_0x2c9b72[_0x5d6d74]={'total':0x0,'done':0x0,'color':_0x431577};}_0x2c9b72[_0x5d6d74][_0x3c3fad(0x1cd)]++;if(_0x59ccd8[_0x3c3fad(0x231)]===_0x3c3fad(0x1c9))_0x2c9b72[_0x5d6d74]['done']++;});const _0x3ab59d=document[_0x3ac536(0x22d)]('analyticsList');_0x3ab59d[_0x3ac536(0x221)]='';const _0x2511a0=Object['entries'](_0x2c9b72)[_0x3ac536(0x179)]((_0x314939,_0x85d6c6)=>_0x85d6c6[0x1][_0x3ac536(0x1cd)]-_0x314939[0x1][_0x3ac536(0x1cd)]);if(_0x2511a0['length']===0x0){_0x3ab59d[_0x3ac536(0x221)]=_0x3ac536(0x16c);return;}_0x2511a0[_0x3ac536(0x20e)](([_0x48b22d,_0x302a17])=>{const _0x13b5f2=_0x3ac536,_0x45131a=Math['round'](_0x302a17[_0x13b5f2(0x227)]/_0x302a17[_0x13b5f2(0x1cd)]*0x64),_0x5eaf0e=document[_0x13b5f2(0x1af)]('div');_0x5eaf0e[_0x13b5f2(0x257)]='client-stat-card',_0x5eaf0e[_0x13b5f2(0x219)]['borderLeftColor']=_0x302a17['color'],_0x5eaf0e[_0x13b5f2(0x221)]=_0x13b5f2(0x1ac)+_0x48b22d[_0x13b5f2(0x17d)](0x0,0x5)+_0x13b5f2(0x1c6)+_0x302a17[_0x13b5f2(0x227)]+'</span>\x20/\x20'+_0x302a17[_0x13b5f2(0x1cd)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x45131a+_0x13b5f2(0x1eb),_0x3ab59d['appendChild'](_0x5eaf0e);});}function openDetails(_0x121422){const _0x2f01dc=a3_0x479473;currentSession=_0x121422;const _0xd38b13=new Date(_0x121422['dateStr']),_0x4d5db5=_0xd38b13[_0x2f01dc(0x23a)](_0x2f01dc(0x202),{'weekday':_0x2f01dc(0x1b2),'day':_0x2f01dc(0x1f3),'month':_0x2f01dc(0x1b2)});document[_0x2f01dc(0x22d)]('detDate')[_0x2f01dc(0x174)]=_0x4d5db5[_0x2f01dc(0x1d4)](0x0)[_0x2f01dc(0x1fe)]()+_0x4d5db5[_0x2f01dc(0x1c4)](0x1),document[_0x2f01dc(0x22d)](_0x2f01dc(0x199))[_0x2f01dc(0x174)]=_0x121422[_0x2f01dc(0x238)]+_0x2f01dc(0x175)+_0x121422[_0x2f01dc(0x17c)],document['getElementById'](_0x2f01dc(0x20f))['textContent']=_0x121422[_0x2f01dc(0x1b1)]||_0x2f01dc(0x1d7);const _0x418f2f=document[_0x2f01dc(0x22d)](_0x2f01dc(0x1fa)),_0x2f9809=document[_0x2f01dc(0x22d)]('cancelContainer'),_0x9c2d06=_0x2f9809[_0x2f01dc(0x24b)](_0x2f01dc(0x240)),_0x381489=_0x2f9809['querySelector']('.btn-reschedule'),_0x1a60d1=document['getElementById'](_0x2f01dc(0x1fc));if(_0x121422[_0x2f01dc(0x231)]==='completed')_0x418f2f[_0x2f01dc(0x174)]=_0x2f01dc(0x22b),_0x418f2f[_0x2f01dc(0x219)]['color']=_0x2f01dc(0x22e),_0x2f9809[_0x2f01dc(0x219)][_0x2f01dc(0x256)]=_0x2f01dc(0x216);else{_0x418f2f[_0x2f01dc(0x174)]=_0x2f01dc(0x1c3),_0x418f2f[_0x2f01dc(0x219)][_0x2f01dc(0x224)]='var(--acc-blue)',_0x2f9809[_0x2f01dc(0x219)][_0x2f01dc(0x256)]='block';const _0x1996a0=new Date(_0x121422['dateStr']+'T'+_0x121422[_0x2f01dc(0x238)]),_0x506d4b=new Date(),_0x2cda9c=(_0x1996a0-_0x506d4b)/(0x3e8*0x3c*0x3c),_0x46a893=coachProfiles[_0x121422[_0x2f01dc(0x1f1)]]&&coachProfiles[_0x121422[_0x2f01dc(0x1f1)]][_0x2f01dc(0x1f7)]?parseInt(coachProfiles[_0x121422['coachId']][_0x2f01dc(0x1f7)]):0x18;if(_0x46a893===0x0||_0x2cda9c>=_0x46a893)_0x9c2d06[_0x2f01dc(0x219)][_0x2f01dc(0x256)]=_0x2f01dc(0x16d),_0x381489['style']['display']='block',_0x1a60d1['style'][_0x2f01dc(0x256)]=_0x2f01dc(0x216);else{_0x9c2d06[_0x2f01dc(0x219)][_0x2f01dc(0x256)]=_0x2f01dc(0x216),_0x381489['style'][_0x2f01dc(0x256)]=_0x2f01dc(0x216),_0x1a60d1[_0x2f01dc(0x219)]['display']=_0x2f01dc(0x16d);let _0x48bb14=_0x46a893===0x0?_0x2f01dc(0x228):_0x2f01dc(0x24f)+_0x46a893+'\x20—á.';_0x1a60d1['textContent']=_0x2f01dc(0x23e)+_0x48bb14+_0x2f01dc(0x21b);}}document[_0x2f01dc(0x22d)](_0x2f01dc(0x25c))['classList'][_0x2f01dc(0x247)]('active'),document['getElementById'](_0x2f01dc(0x1a5))[_0x2f01dc(0x253)]['add']('open');}function closeAllSheets(){const _0x16852f=a3_0x479473;document[_0x16852f(0x22d)](_0x16852f(0x25c))[_0x16852f(0x253)][_0x16852f(0x188)]('active'),document[_0x16852f(0x17a)](_0x16852f(0x18a))[_0x16852f(0x20e)](_0x50271a=>_0x50271a['classList'][_0x16852f(0x188)](_0x16852f(0x1f0)));}function openSheet(_0x26432f){const _0x39bbe3=a3_0x479473;document[_0x39bbe3(0x22d)](_0x39bbe3(0x25c))[_0x39bbe3(0x253)][_0x39bbe3(0x247)](_0x39bbe3(0x1f2)),document[_0x39bbe3(0x22d)](_0x26432f)['classList'][_0x39bbe3(0x247)](_0x39bbe3(0x1f0));}function getLocalDateStr(_0x5343f4){const _0x16179d=a3_0x479473,_0x49037c=_0x5343f4[_0x16179d(0x215)](),_0x4f3a80=String(_0x5343f4[_0x16179d(0x18f)]()+0x1)['padStart'](0x2,'0'),_0x4a76c4=String(_0x5343f4['getDate']())[_0x16179d(0x25d)](0x2,'0');return _0x49037c+'-'+_0x4f3a80+'-'+_0x4a76c4;}function getStartOfWeek(_0x20efae){const _0x54767e=a3_0x479473,_0x38f445=new Date(_0x20efae),_0x28deb7=_0x38f445[_0x54767e(0x1ff)](),_0x53730b=_0x38f445[_0x54767e(0x197)]()-_0x28deb7+(_0x28deb7===0x0?-0x6:0x1);return _0x38f445[_0x54767e(0x1b9)](_0x53730b),_0x38f445[_0x54767e(0x1e1)](0x0,0x0,0x0,0x0),_0x38f445;}function scrollToToday(){const _0x5145c5=getLocalDateStr(new Date());setTimeout(()=>{const _0x20507e=a3_0x21ac,_0x1c2405=document[_0x20507e(0x24b)](_0x20507e(0x1bf)+_0x5145c5+'\x22]');if(_0x1c2405){const _0x430478=document[_0x20507e(0x22d)](_0x20507e(0x19e)),_0x1abf42=_0x1c2405[_0x20507e(0x1ad)]-_0x430478[_0x20507e(0x1e5)]/0x2+_0x1c2405[_0x20507e(0x22f)]/0x2;_0x430478[_0x20507e(0x16b)]({'left':_0x1abf42,'behavior':_0x20507e(0x1da)}),_0x430478[_0x20507e(0x23c)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function a3_0x275d(){const _0x17ead4=['isArray','height','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','div','add','getItem','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','4umkaMG','querySelector','Telegram','coach_profiles','<span>','–∑–∞\x20','rs-date-chip','json','day-off-overlay\x20stripe-bg','classList','backgroundPosition','50qOSDQA','display','className','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','substring','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','initData','overlay','padStart','.period-switch\x20.p-btn','then','anDonutCircle','event-card','planned','saveLocally','POST','121663dbILVx','scrollTo','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','block','1340652laZocY','v9.5-CLIENT-ANALYTICS','data-day-idx','ready','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','search','textContent','\x20-\x20','clients','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','.day-col-header','sort','querySelectorAll','show','end','substr','loadLocal','</div>','time-label','flex','anStart','exceptions','cid','client_cancel','getTime','syncLoad','remove','initDataUnsafe','.sheet','4281053wTNUNO','join','client_load','T23:59:59','getMonth','timeColumn','rescheduleSheet','calendar','scrollLeft','rs-time-btn','.day-column','stringify','getDate','mini','detTime','blocked-slot\x20stripe-bg','data','keys','px\x20-','matrixViewport','#0a84ff','max','user','test','\x20–∏–∑\x20','reschedule','detailsSheet','getHours','timeLineBadge','customConfirm','setItem','BackButton','filter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','offsetLeft','length','createElement','Unknown','note','long','find','rsSlotsGrid','scroll','anCustomDates','anEnd','WebApp','setDate','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','%\x20+\x202px)','setBackgroundColor','getAttribute','px\x200px','.day-col-header[data-date=\x22','rsDatesTrack','router.html','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','slice','</div><div\x20class=\x22rs-day-num\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','<div\x20class=\x22dch-day\x22>','parse','completed','650135jBLkNU','dateStr','gridColumns','total','log','<div\x20class=\x22rs-day-name\x22>','visible','backgroundColor','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','452961ZQNauX','charAt','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','6xOvoai','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','fontWeight','onClick','auto','anPercent','createDocumentFragment','borderLeftColor','round','data-date','value','setHours','left','rgba(10,\x20132,\x20255,\x20','day-column\x20','clientWidth','%\x20-\x204px)','3SwlEpf','</div><div\x20class=\x22dch-num\x22>','Error\x20setting\x20back\x20button:','.rs-date-chip','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','push','month','globalTimeLine','ranges','open','coachId','active','numeric','applyData','cancelled','sid','cancel_window','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','detStatus','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancelHint','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','toUpperCase','getDay','apply','#050505','ru-RU','onclick','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','headerMonth','all','seriesId','\x20status-completed','settings','600','width','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','expand','forEach','detNote','getMinutes','setAttribute','clientId','min','week','getFullYear','none','error','split','style','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','map','location','today','ccText','colIndex','innerHTML','top','blocked-range-part\x20stripe-bg','color','zIndex','day-col-header\x20','done','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','3750216zqzZJf','getElementById','var(--acc-green)','offsetWidth','438952GUNvbm','status','pattern','setHeaderColor','get_slots','appendChild','T00:00:00','href','start','(((.+)+)+)+$','toLocaleDateString','11CKyiRa','scrollTop','disableVerticalSwipes','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','calc(','.btn-cancel','strokeDashoffset','floor'];a3_0x275d=function(){return _0x17ead4;};return a3_0x275d();}function a3_0x21ac(_0x3fe127,_0x84b044){_0x3fe127=_0x3fe127-0x165;const _0x41c522=a3_0x275d();let _0x23fb4a=_0x41c522[_0x3fe127];return _0x23fb4a;}function updateClock(){const _0x4c7ea8=a3_0x479473,_0xcd4dad=new Date(),_0x10f587=document[_0x4c7ea8(0x22d)](_0x4c7ea8(0x1ee)),_0x4912ff=document['getElementById'](_0x4c7ea8(0x1a7)),_0x47d747=(_0xcd4dad[_0x4c7ea8(0x1a6)]()*0x3c+_0xcd4dad[_0x4c7ea8(0x210)]())/0x3c*GRID_H;_0x10f587[_0x4c7ea8(0x219)][_0x4c7ea8(0x222)]=_0x47d747+'px',_0x10f587[_0x4c7ea8(0x219)][_0x4c7ea8(0x256)]=_0x4c7ea8(0x16d),_0x4912ff[_0x4c7ea8(0x219)][_0x4c7ea8(0x222)]=_0x47d747+'px',_0x4912ff[_0x4c7ea8(0x219)]['display']=_0x4c7ea8(0x16d),_0x4912ff[_0x4c7ea8(0x174)]=String(_0xcd4dad[_0x4c7ea8(0x1a6)]())[_0x4c7ea8(0x25d)](0x2,'0')+':'+String(_0xcd4dad[_0x4c7ea8(0x210)]())[_0x4c7ea8(0x25d)](0x2,'0');}function onScroll(){const _0x3de122=a3_0x479473,_0x101f14=document[_0x3de122(0x22d)](_0x3de122(0x19e)),_0x3e5733=document[_0x3de122(0x17a)](_0x3de122(0x178));for(let _0xc95a19 of _0x3e5733)if(_0xc95a19[_0x3de122(0x1ad)]>=_0x101f14[_0x3de122(0x193)]){const _0x49c9b2=new Date(_0xc95a19[_0x3de122(0x1bd)]('data-date'));document[_0x3de122(0x22d)](_0x3de122(0x205))[_0x3de122(0x174)]=_0x49c9b2['toLocaleString']('ru',{'month':_0x3de122(0x1b2)})['toUpperCase']()+'\x20'+_0x49c9b2[_0x3de122(0x215)]();break;}}function showToast(_0x3e6f3b){const _0x3a19db=a3_0x479473,_0x36e809=document['getElementById']('toast');_0x36e809[_0x3a19db(0x174)]=_0x3e6f3b,_0x36e809[_0x3a19db(0x253)]['add'](_0x3a19db(0x17b)),setTimeout(()=>_0x36e809['classList'][_0x3a19db(0x188)](_0x3a19db(0x17b)),0x7d0);}function handleInfiniteScroll(){const _0xb0748c=a3_0x479473,_0x543aa3=document[_0xb0748c(0x22d)]('matrixViewport'),_0x2ce2d9=_0x543aa3[_0xb0748c(0x193)],_0x21645d=_0x543aa3['scrollWidth'],_0x3aef3d=_0x543aa3[_0xb0748c(0x1e5)];if(_0x21645d-(_0x2ce2d9+_0x3aef3d)<0x12c){const _0xc08c0d=endOffset;endOffset+=0xe,renderDayRange(_0xc08c0d+0x1,endOffset),reRenderBlocks();}if(_0x2ce2d9<0x12c){const _0x356589=startOffset;startOffset-=0xe,prependDays(startOffset,_0x356589-0x1),_0x543aa3['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x9abca6,_0x4032b){const _0x23c891=a3_0x479473,_0x2cccab=document[_0x23c891(0x22d)]('daysHeaderTrack'),_0x1b3131=document[_0x23c891(0x22d)](_0x23c891(0x1cc)),_0x2c580c=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x813e47=new Date();_0x813e47[_0x23c891(0x1e1)](0x0,0x0,0x0,0x0);const _0x1b795f=getLocalDateStr(new Date()),_0x2f5ec6=document[_0x23c891(0x1dc)](),_0x518b5c=document[_0x23c891(0x1dc)]();for(let _0x26aac7=_0x9abca6;_0x26aac7<=_0x4032b;_0x26aac7++){const _0x4c52d1=new Date(_0x813e47);_0x4c52d1[_0x23c891(0x1b9)](_0x4c52d1[_0x23c891(0x197)]()+_0x26aac7);const _0x3eeff7=getLocalDateStr(_0x4c52d1);let _0x2dc909=_0x4c52d1[_0x23c891(0x1ff)]()-0x1;if(_0x2dc909===-0x1)_0x2dc909=0x6;const _0x30f35e=_0x3eeff7===_0x1b795f,_0x15f2dd=document[_0x23c891(0x1af)](_0x23c891(0x246));_0x15f2dd[_0x23c891(0x257)]=_0x23c891(0x226)+(_0x30f35e?_0x23c891(0x21e):''),_0x15f2dd[_0x23c891(0x211)](_0x23c891(0x1df),_0x3eeff7),_0x15f2dd['innerHTML']=_0x23c891(0x1c7)+_0x2c580c[_0x2dc909]+_0x23c891(0x1e8)+_0x4c52d1[_0x23c891(0x197)]()+'</div>',_0x2f5ec6['appendChild'](_0x15f2dd);const _0x1b30cb=document[_0x23c891(0x1af)](_0x23c891(0x246));_0x1b30cb[_0x23c891(0x257)]=_0x23c891(0x1e4)+(_0x30f35e?'today':''),_0x1b30cb[_0x23c891(0x211)](_0x23c891(0x1df),_0x3eeff7),_0x1b30cb['setAttribute'](_0x23c891(0x170),_0x2dc909),_0x518b5c[_0x23c891(0x235)](_0x1b30cb);}_0x2cccab['insertBefore'](_0x2f5ec6,_0x2cccab['firstChild']),_0x1b3131['insertBefore'](_0x518b5c,_0x1b3131[_0x23c891(0x24b)](_0x23c891(0x195)));}function hexToRgba(_0x803df8,_0x519317){const _0x45679f=a3_0x479473;let _0x445037;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x45679f(0x1a2)](_0x803df8))return _0x445037=_0x803df8[_0x45679f(0x259)](0x1)[_0x45679f(0x218)](''),_0x445037[_0x45679f(0x1ae)]==0x3&&(_0x445037=[_0x445037[0x0],_0x445037[0x0],_0x445037[0x1],_0x445037[0x1],_0x445037[0x2],_0x445037[0x2]]),_0x445037='0x'+_0x445037['join'](''),'rgba('+[_0x445037>>0x10&0xff,_0x445037>>0x8&0xff,_0x445037&0xff][_0x45679f(0x18c)](',')+','+_0x519317+')';return _0x45679f(0x1e3)+_0x519317+')';}let confirmResolver=null;function showCustomConfirm(_0x7d392b,_0x9c5e16,_0x1ed45d=!![]){const _0x77cafc=a3_0x479473;document['getElementById']('ccTitle')['textContent']=_0x7d392b,document[_0x77cafc(0x22d)](_0x77cafc(0x21f))[_0x77cafc(0x174)]=_0x9c5e16;const _0x240c0e=document[_0x77cafc(0x22d)]('ccYesBtn');return _0x1ed45d?(_0x240c0e['style'][_0x77cafc(0x224)]='#ff453a',_0x240c0e[_0x77cafc(0x219)][_0x77cafc(0x1d8)]=_0x77cafc(0x20a)):(_0x240c0e['style'][_0x77cafc(0x224)]=_0x77cafc(0x19f),_0x240c0e[_0x77cafc(0x219)][_0x77cafc(0x1d8)]=_0x77cafc(0x20a)),new Promise(_0x33fc30=>{const _0x1afe10=_0x77cafc;confirmResolver=_0x33fc30,document[_0x1afe10(0x22d)]('customConfirm')[_0x1afe10(0x253)][_0x1afe10(0x247)](_0x1afe10(0x1d0));});}function resolveCustomConfirm(_0x229d1c){const _0x4fa7fe=a3_0x479473;document[_0x4fa7fe(0x22d)](_0x4fa7fe(0x1a8))[_0x4fa7fe(0x253)][_0x4fa7fe(0x188)](_0x4fa7fe(0x1d0));if(confirmResolver)confirmResolver(_0x229d1c);}async function tryCancelCurrentSession(){const _0xf87c79=a3_0x479473;if(!currentSession)return;const _0x32e43f=await showCustomConfirm(_0xf87c79(0x1d5),'–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?',!![]);if(!_0x32e43f)return;const _0x5781c8=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x5cb323=>_0x5cb323['id']!==_0x5781c8['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date['now']();try{const _0x6b75d3=window[_0xf87c79(0x24c)]?.[_0xf87c79(0x1b8)],_0x15c8b2=await fetch(API_URL,{'method':'POST','body':JSON[_0xf87c79(0x196)]({'action':_0xf87c79(0x185),'init_data':_0x6b75d3?.[_0xf87c79(0x25b)]||'','coachId':_0x5781c8[_0xf87c79(0x1f1)],'dateStr':_0x5781c8[_0xf87c79(0x1cb)],'sessionId':_0x5781c8['id']})});if(_0x15c8b2['ok'])DataManager[_0xf87c79(0x168)]();}catch(_0x4559d4){showToast(_0xf87c79(0x204));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x47ca0a=a3_0x479473;if(!currentSession)return;document['getElementById']('detailsSheet')[_0x47ca0a(0x253)]['remove'](_0x47ca0a(0x1f0)),document[_0x47ca0a(0x22d)](_0x47ca0a(0x191))[_0x47ca0a(0x253)][_0x47ca0a(0x247)](_0x47ca0a(0x1f0));const _0x11ff19=document['getElementById'](_0x47ca0a(0x1c0)),_0x36df9c=document[_0x47ca0a(0x22d)](_0x47ca0a(0x1b4));_0x11ff19[_0x47ca0a(0x221)]='',_0x36df9c[_0x47ca0a(0x221)]=_0x47ca0a(0x172);const [_0x186e03,_0x12d31a]=currentSession[_0x47ca0a(0x238)]['split'](':')['map'](Number),[_0x17792a,_0x3ddac2]=currentSession[_0x47ca0a(0x17c)][_0x47ca0a(0x218)](':')[_0x47ca0a(0x21c)](Number),_0x3483d1=_0x17792a*0x3c+_0x3ddac2-(_0x186e03*0x3c+_0x12d31a);try{const _0x462d47=window['Telegram']?.[_0x47ca0a(0x1b8)],_0x490515=await fetch(API_URL,{'method':'POST','body':JSON[_0x47ca0a(0x196)]({'action':_0x47ca0a(0x234),'coachId':currentSession[_0x47ca0a(0x1f1)],'duration':_0x3483d1,'init_data':_0x462d47?.[_0x47ca0a(0x25b)]||'','excludeSessionId':currentSession['id']})}),_0x374ca4=await _0x490515['json']();_0x374ca4['ok']&&_0x374ca4['data']?(availableSlotsCache=_0x374ca4[_0x47ca0a(0x19b)],renderRescheduleDates()):_0x36df9c[_0x47ca0a(0x221)]=_0x47ca0a(0x22a);}catch(_0x3a1ae4){_0x36df9c[_0x47ca0a(0x221)]=_0x47ca0a(0x1f8);}}function renderRescheduleDates(){const _0x3fef10=a3_0x479473,_0x4675b7=document[_0x3fef10(0x22d)](_0x3fef10(0x1c0));_0x4675b7['innerHTML']='';const _0x4d9978=Object[_0x3fef10(0x19c)](availableSlotsCache)[_0x3fef10(0x179)](),_0x3b370c=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x4d9978['length']===0x0){document[_0x3fef10(0x22d)](_0x3fef10(0x1b4))['innerHTML']=_0x3fef10(0x25a);return;}_0x4d9978[_0x3fef10(0x20e)]((_0x503988,_0x7c4ebb)=>{const _0x19e634=_0x3fef10,_0x4fccea=new Date(_0x503988),_0x54774f=_0x3b370c[_0x4fccea[_0x19e634(0x1ff)]()],_0x179f97=_0x4fccea['getDate'](),_0x3c0e15=document['createElement'](_0x19e634(0x246));_0x3c0e15[_0x19e634(0x257)]=_0x19e634(0x250);if(_0x7c4ebb===0x0)_0x3c0e15[_0x19e634(0x253)][_0x19e634(0x247)]('active');_0x3c0e15[_0x19e634(0x221)]=_0x19e634(0x1cf)+_0x54774f+_0x19e634(0x1c5)+_0x179f97+_0x19e634(0x17f),_0x3c0e15[_0x19e634(0x203)]=()=>selectRsDate(_0x503988,_0x3c0e15),_0x4675b7[_0x19e634(0x235)](_0x3c0e15);}),selectRsDate(_0x4d9978[0x0],_0x4675b7['firstChild']);}function selectRsDate(_0x33376b,_0x1f2630){const _0x395123=a3_0x479473;selectedRsDate=_0x33376b,document['querySelectorAll'](_0x395123(0x1ea))[_0x395123(0x20e)](_0x152339=>_0x152339[_0x395123(0x253)][_0x395123(0x188)](_0x395123(0x1f2)));if(_0x1f2630)_0x1f2630[_0x395123(0x253)][_0x395123(0x247)](_0x395123(0x1f2));const _0x7fae2e=document['getElementById']('rsSlotsGrid');_0x7fae2e[_0x395123(0x221)]='';const _0x3270f5=availableSlotsCache[_0x33376b]||[];if(_0x3270f5[_0x395123(0x1ae)]===0x0){_0x7fae2e[_0x395123(0x221)]=_0x395123(0x22a);return;}_0x3270f5['forEach'](_0x12e134=>{const _0x9e7d02=_0x395123,_0x92b4ab=document['createElement']('button');_0x92b4ab[_0x9e7d02(0x257)]=_0x9e7d02(0x194),_0x92b4ab['textContent']=_0x12e134,_0x92b4ab['onclick']=()=>confirmReschedule(_0x12e134),_0x7fae2e['appendChild'](_0x92b4ab);});}async function confirmReschedule(_0x546290){const _0x35801e=a3_0x479473,_0x225551=new Date(selectedRsDate),_0x26fac4=_0x225551[_0x35801e(0x23a)]('ru-RU',{'day':_0x35801e(0x1f3),'month':_0x35801e(0x1b2)}),_0x1f0aaa=await showCustomConfirm(_0x35801e(0x1fd),_0x35801e(0x1c2)+_0x26fac4+'\x20–≤\x20'+_0x546290+'?',![]);if(!_0x1f0aaa)return;closeAllSheets(),showToast(_0x35801e(0x1ba)),lastUserActionTime=Date['now']();const _0x1f584b=currentSession[_0x35801e(0x1cb)],_0x281d0a=currentSession['id'],[_0x147f69,_0x79cd43]=currentSession[_0x35801e(0x238)][_0x35801e(0x218)](':')[_0x35801e(0x21c)](Number),[_0x1ca84c,_0x43158b]=currentSession[_0x35801e(0x17c)][_0x35801e(0x218)](':')[_0x35801e(0x21c)](Number),_0x5c1ea4=_0x1ca84c*0x3c+_0x43158b-(_0x147f69*0x3c+_0x79cd43),[_0xa32882,_0x3d6661]=_0x546290[_0x35801e(0x218)](':')['map'](Number),_0x59c872=_0xa32882*0x3c+_0x3d6661+_0x5c1ea4,_0x947791=Math[_0x35801e(0x242)](_0x59c872/0x3c),_0x3522ec=_0x59c872%0x3c,_0x5ca977=String(_0x947791)[_0x35801e(0x25d)](0x2,'0')+':'+String(_0x3522ec)['padStart'](0x2,'0'),_0x5e9c16=sessions['findIndex'](_0x375c2a=>_0x375c2a['id']===_0x281d0a);_0x5e9c16!==-0x1&&(sessions[_0x5e9c16][_0x35801e(0x1cb)]=selectedRsDate,sessions[_0x5e9c16]['start']=_0x546290,sessions[_0x5e9c16][_0x35801e(0x17c)]=_0x5ca977,reRenderBlocks());try{const _0x5db9b3=window[_0x35801e(0x24c)]?.[_0x35801e(0x1b8)],_0x31f157=await fetch(API_URL,{'method':_0x35801e(0x169),'body':JSON[_0x35801e(0x196)]({'action':_0x35801e(0x1a4),'init_data':_0x5db9b3?.[_0x35801e(0x25b)]||'','oldSessionId':_0x281d0a,'oldDate':_0x1f584b,'newDate':selectedRsDate,'newTime':_0x546290,'coachId':currentSession[_0x35801e(0x1f1)]})}),_0x5c8139=await _0x31f157[_0x35801e(0x251)]();!_0x5c8139['ok']?(showToast(_0x35801e(0x258)),DataManager[_0x35801e(0x187)]()):(showToast(_0x35801e(0x1f9)),DataManager[_0x35801e(0x168)]());}catch(_0x4d43c2){showToast(_0x35801e(0x204));}}document['addEventListener']('DOMContentLoaded',init);