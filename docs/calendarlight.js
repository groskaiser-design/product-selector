const a3_0x464a20=a3_0x1f6d;(function(_0x1ff018,_0x156df4){const _0x31488a=a3_0x1f6d,_0x2945ae=_0x1ff018();while(!![]){try{const _0x5c5f63=-parseInt(_0x31488a(0x22f))/0x1+parseInt(_0x31488a(0x26a))/0x2*(-parseInt(_0x31488a(0x19a))/0x3)+-parseInt(_0x31488a(0x198))/0x4+parseInt(_0x31488a(0x24a))/0x5*(parseInt(_0x31488a(0x18e))/0x6)+-parseInt(_0x31488a(0x275))/0x7+parseInt(_0x31488a(0x216))/0x8*(parseInt(_0x31488a(0x1ee))/0x9)+parseInt(_0x31488a(0x20e))/0xa;if(_0x5c5f63===_0x156df4)break;else _0x2945ae['push'](_0x2945ae['shift']());}catch(_0x19bc06){_0x2945ae['push'](_0x2945ae['shift']());}}}(a3_0x4c06,0xab26f));const APP_VERSION='v9.5-CLIENT-ANALYTICS',API_URL=a3_0x464a20(0x1d2),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS=a3_0x464a20(0x1bb),KEY_CLIENTS=a3_0x464a20(0x214);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x3c8346=a3_0x464a20,_0x25c37f=(function(){let _0x415486=!![];return function(_0x21a139,_0x88a37c){const _0x5ecc13=_0x415486?function(){const _0x2c7977=a3_0x1f6d;if(_0x88a37c){const _0xb9e9f1=_0x88a37c[_0x2c7977(0x213)](_0x21a139,arguments);return _0x88a37c=null,_0xb9e9f1;}}:function(){};return _0x415486=![],_0x5ecc13;};}()),_0x335c9a=_0x25c37f(this,function(){const _0x5e6476=a3_0x1f6d;return _0x335c9a[_0x5e6476(0x24e)]()[_0x5e6476(0x1c4)](_0x5e6476(0x24c))['toString']()[_0x5e6476(0x1d1)](_0x335c9a)['search'](_0x5e6476(0x24c));});_0x335c9a();try{const _0x4de148=window['Telegram']?.[_0x3c8346(0x1d6)];if(!_0x4de148)return;_0x4de148[_0x3c8346(0x227)](),_0x4de148[_0x3c8346(0x181)]();try{_0x4de148['setHeaderColor'](_0x3c8346(0x1fa)),_0x4de148[_0x3c8346(0x1cc)]&&_0x4de148[_0x3c8346(0x1cc)]('#050505');}catch(_0x52e7b3){console['log'](_0x3c8346(0x26c),_0x52e7b3);}try{_0x4de148[_0x3c8346(0x21c)]&&(_0x4de148[_0x3c8346(0x21c)]['show'](),_0x4de148[_0x3c8346(0x21c)][_0x3c8346(0x1d5)](),_0x4de148[_0x3c8346(0x21c)]['onClick'](function(){const _0x2095f4=_0x3c8346;window[_0x2095f4(0x1b6)]['href']=_0x2095f4(0x1d0);}));}catch(_0x146494){console[_0x3c8346(0x1ab)](_0x3c8346(0x17a),_0x146494);}try{if(_0x4de148['disableVerticalSwipes'])_0x4de148[_0x3c8346(0x23f)]();}catch(_0x1c68d0){}}catch(_0x2525f7){console[_0x3c8346(0x180)](_0x3c8346(0x1eb),_0x2525f7);}}());function isAdmin(){const _0x5eb4f4=a3_0x464a20;try{const _0xcec538=Number(window[_0x5eb4f4(0x224)]?.[_0x5eb4f4(0x1d6)]?.[_0x5eb4f4(0x203)]?.['user']?.['id']);return _0xcec538===0xbaf7174;}catch(_0x5d6eee){return![];}}const DataManager={'saveLocally'(){const _0x417eb5=a3_0x464a20;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x417eb5(0x231)](sessions)),localStorage[_0x417eb5(0x197)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x417eb5(0x197)](KEY_SETTINGS,JSON[_0x417eb5(0x231)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x20d58c){}},'loadLocal'(){const _0x2c3858=a3_0x464a20;try{const _0x4fa270=localStorage[_0x2c3858(0x266)](KEY_SESSIONS);if(_0x4fa270)sessions=JSON[_0x2c3858(0x17f)](_0x4fa270);const _0x53bfb2=localStorage[_0x2c3858(0x266)](KEY_CLIENTS);if(_0x53bfb2)clients=JSON[_0x2c3858(0x17f)](_0x53bfb2);const _0x485311=localStorage[_0x2c3858(0x266)](KEY_SETTINGS);if(_0x485311){const _0x50c459=JSON[_0x2c3858(0x17f)](_0x485311);if(_0x50c459[_0x2c3858(0x1e8)])availabilityPattern=_0x50c459[_0x2c3858(0x1e8)];if(_0x50c459[_0x2c3858(0x218)])specialRanges=_0x50c459[_0x2c3858(0x218)];if(_0x50c459[_0x2c3858(0x277)])dateExceptions=_0x50c459[_0x2c3858(0x277)];}}catch(_0x1d99d1){}},async 'syncLoad'(){const _0x3eb2e9=a3_0x464a20,_0x4528f8=new Date(),_0x3ee9e2=_0x4528f8[_0x3eb2e9(0x229)]()+'-'+String(_0x4528f8[_0x3eb2e9(0x1f2)]()+0x1)[_0x3eb2e9(0x256)](0x2,'0'),_0x1a0031=new Date(_0x4528f8);_0x1a0031[_0x3eb2e9(0x1ba)](_0x4528f8[_0x3eb2e9(0x1f2)]()+0x1);const _0x4d4d9e=_0x1a0031[_0x3eb2e9(0x229)]()+'-'+String(_0x1a0031[_0x3eb2e9(0x1f2)]()+0x1)[_0x3eb2e9(0x256)](0x2,'0'),_0x9e9b9f=Date[_0x3eb2e9(0x1dd)]();try{const _0x543989=window[_0x3eb2e9(0x224)]?.[_0x3eb2e9(0x1d6)],_0x31fbd2=_0x543989?.[_0x3eb2e9(0x1e4)]||'',[_0x292bff,_0x2a1367]=await Promise[_0x3eb2e9(0x1a5)]([fetch(API_URL,{'method':'POST','body':JSON[_0x3eb2e9(0x231)]({'action':_0x3eb2e9(0x1b5),'init_data':_0x31fbd2,'month_str':_0x3ee9e2})})[_0x3eb2e9(0x1b1)](_0x5619f1=>_0x5619f1[_0x3eb2e9(0x186)]()),fetch(API_URL,{'method':_0x3eb2e9(0x1de),'body':JSON[_0x3eb2e9(0x231)]({'action':'client_load','init_data':_0x31fbd2,'month_str':_0x4d4d9e})})['then'](_0x44f1ef=>_0x44f1ef[_0x3eb2e9(0x186)]())]);if(lastUserActionTime>_0x9e9b9f){console[_0x3eb2e9(0x1ab)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x292bff['ok'])this[_0x3eb2e9(0x255)](_0x292bff[_0x3eb2e9(0x1d7)],_0x3ee9e2);if(_0x2a1367['ok'])this[_0x3eb2e9(0x255)](_0x2a1367[_0x3eb2e9(0x1d7)],_0x4d4d9e);this[_0x3eb2e9(0x1a1)]();}catch(_0x334c7d){}},'applyData'(_0x5d305b,_0x296cfd){const _0x4b7de0=a3_0x464a20;if(!_0x5d305b)return;if(_0x5d305b[_0x4b7de0(0x23c)]){if(_0x5d305b[_0x4b7de0(0x23c)][_0x4b7de0(0x1e8)])availabilityPattern=_0x5d305b[_0x4b7de0(0x23c)]['pattern'];if(_0x5d305b[_0x4b7de0(0x23c)][_0x4b7de0(0x218)])specialRanges=_0x5d305b[_0x4b7de0(0x23c)][_0x4b7de0(0x218)];if(_0x5d305b['settings'][_0x4b7de0(0x277)])dateExceptions=_0x5d305b[_0x4b7de0(0x23c)][_0x4b7de0(0x277)];}if(_0x5d305b[_0x4b7de0(0x1ce)]&&Array[_0x4b7de0(0x1e9)](_0x5d305b[_0x4b7de0(0x1ce)]))clients=_0x5d305b[_0x4b7de0(0x1ce)];_0x5d305b[_0x4b7de0(0x1c9)]&&(coachProfiles={...coachProfiles,..._0x5d305b['coach_profiles']}),_0x5d305b['calendar']&&(sessions=sessions[_0x4b7de0(0x253)](_0xb07af6=>!_0xb07af6[_0x4b7de0(0x1ac)][_0x4b7de0(0x23e)](_0x296cfd)),Object[_0x4b7de0(0x242)](_0x5d305b[_0x4b7de0(0x215)])['forEach'](_0x62798=>{const _0x23986b=_0x4b7de0,_0x20f39c=_0x5d305b[_0x23986b(0x215)][_0x62798];_0x20f39c[_0x23986b(0x1ed)](_0x1d2ab8=>{const _0x2e7fce=_0x23986b;sessions[_0x2e7fce(0x263)]({'id':_0x1d2ab8['i'],'clientId':_0x1d2ab8['c'],'coachId':_0x1d2ab8[_0x2e7fce(0x230)],'dateStr':_0x296cfd+'-'+_0x62798[_0x2e7fce(0x256)](0x2,'0'),'start':_0x1d2ab8['s'],'end':_0x1d2ab8['e'],'note':_0x1d2ab8['n']||'','status':_0x1d2ab8['st']||'planned','seriesId':_0x1d2ab8[_0x2e7fce(0x1e7)]});});})),reRenderBlocks();}};function init(){const _0x252df9=a3_0x464a20;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x252df9(0x25f)](_0x252df9(0x1fc))[_0x252df9(0x1e3)](_0x252df9(0x1f4),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x2bf18c=a3_0x464a20,_0x2e96cf=document[_0x2bf18c(0x25f)](_0x2bf18c(0x185)),_0x46b56c=document[_0x2bf18c(0x25f)](_0x2bf18c(0x19b));_0x2e96cf[_0x2bf18c(0x1d4)]='',_0x2e96cf[_0x2bf18c(0x191)](_0x46b56c);for(let _0x2a6c33=0x0;_0x2a6c33<0x18;_0x2a6c33++){const _0x316df7=document[_0x2bf18c(0x1ea)]('div');_0x316df7[_0x2bf18c(0x21d)]=_0x2bf18c(0x183);if(_0x2a6c33>0x0)_0x316df7[_0x2bf18c(0x1d4)]=_0x2bf18c(0x246)+String(_0x2a6c33)[_0x2bf18c(0x256)](0x2,'0')+_0x2bf18c(0x1dc);_0x2e96cf[_0x2bf18c(0x191)](_0x316df7);}}function renderDayRange(_0x930f1b,_0x3ab03b){const _0x478055=a3_0x464a20,_0x161b4f=document[_0x478055(0x25f)](_0x478055(0x1ef)),_0x583863=document[_0x478055(0x25f)](_0x478055(0x245)),_0x56c658=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x557566=new Date();_0x557566[_0x478055(0x258)](0x0,0x0,0x0,0x0);const _0x5b1204=getLocalDateStr(new Date());for(let _0x221532=_0x930f1b;_0x221532<=_0x3ab03b;_0x221532++){const _0xc29a99=new Date(_0x557566);_0xc29a99[_0x478055(0x264)](_0xc29a99[_0x478055(0x217)]()+_0x221532);const _0x21f7ea=getLocalDateStr(_0xc29a99);let _0x432eaa=_0xc29a99['getDay']()-0x1;if(_0x432eaa===-0x1)_0x432eaa=0x6;const _0x4dd547=_0x21f7ea===_0x5b1204,_0x2188fe=document[_0x478055(0x1ea)]('div');_0x2188fe[_0x478055(0x21d)]=_0x478055(0x1a7)+(_0x4dd547?'today':''),_0x2188fe[_0x478055(0x17b)]('data-date',_0x21f7ea),_0x2188fe[_0x478055(0x1d4)]=_0x478055(0x1a4)+_0x56c658[_0x432eaa]+_0x478055(0x1d9)+_0xc29a99[_0x478055(0x217)]()+_0x478055(0x223),_0x161b4f[_0x478055(0x191)](_0x2188fe);const _0x3c7c91=document[_0x478055(0x1ea)](_0x478055(0x212));_0x3c7c91[_0x478055(0x21d)]=_0x478055(0x1a8)+(_0x4dd547?_0x478055(0x1aa):''),_0x3c7c91[_0x478055(0x17b)]('data-date',_0x21f7ea),_0x3c7c91[_0x478055(0x17b)](_0x478055(0x250),_0x432eaa),_0x583863[_0x478055(0x191)](_0x3c7c91);}}function reRenderBlocks(){const _0x1514ed=a3_0x464a20;document[_0x1514ed(0x1f1)](_0x1514ed(0x20a))[_0x1514ed(0x1ed)](_0x54fd9a=>{const _0x227ede=_0x1514ed;_0x54fd9a['querySelectorAll'](_0x227ede(0x222))[_0x227ede(0x1ed)](_0x50cd3f=>_0x50cd3f[_0x227ede(0x1c3)]());const _0x2848ea=_0x54fd9a[_0x227ede(0x1b9)](_0x227ede(0x254)),_0x3fdfef=parseInt(_0x54fd9a[_0x227ede(0x1b9)]('data-day-idx')),_0x480db7=Math['round'](_0x54fd9a[_0x227ede(0x199)]);(availabilityPattern[_0x3fdfef]||[])['forEach'](_0x3bafe4=>{const _0x51a4d4=_0x227ede,_0x49ca05=document[_0x51a4d4(0x1ea)](_0x51a4d4(0x212));_0x49ca05['className']=_0x51a4d4(0x1db),_0x49ca05[_0x51a4d4(0x272)][_0x51a4d4(0x194)]=_0x3bafe4*GRID_H+'px',_0x49ca05[_0x51a4d4(0x272)][_0x51a4d4(0x1af)]='-'+_0x480db7+_0x51a4d4(0x278)+_0x3bafe4*GRID_H+'px',_0x54fd9a[_0x51a4d4(0x191)](_0x49ca05);});if(specialRanges[_0x227ede(0x26f)]>0x0){const _0x2a2d3a=new Date(_0x2848ea+_0x227ede(0x202))[_0x227ede(0x25b)](),_0x166478=new Date(_0x2848ea+'T23:59:59')[_0x227ede(0x25b)]();specialRanges[_0x227ede(0x1ed)](_0x5c4623=>{const _0x19dbbd=_0x227ede,_0x37f709=new Date(_0x5c4623['start'])[_0x19dbbd(0x25b)](),_0x529286=new Date(_0x5c4623[_0x19dbbd(0x188)])[_0x19dbbd(0x25b)](),_0x3bef7f=Math[_0x19dbbd(0x1f9)](_0x2a2d3a,_0x37f709),_0x1a8ecc=Math[_0x19dbbd(0x228)](_0x166478,_0x529286);if(_0x3bef7f<_0x1a8ecc){const _0x17d4d0=(_0x3bef7f-_0x2a2d3a)/0x36ee80*GRID_H,_0x2e71e8=(_0x1a8ecc-_0x3bef7f)/0x36ee80*GRID_H,_0x7ee333=document[_0x19dbbd(0x1ea)](_0x19dbbd(0x212));_0x2e71e8>=23.5*GRID_H?(_0x7ee333[_0x19dbbd(0x21d)]=_0x19dbbd(0x1be),_0x7ee333[_0x19dbbd(0x272)][_0x19dbbd(0x1af)]='-'+_0x480db7+_0x19dbbd(0x1ff)):(_0x7ee333[_0x19dbbd(0x21d)]=_0x19dbbd(0x24d),_0x7ee333[_0x19dbbd(0x272)][_0x19dbbd(0x194)]=_0x17d4d0+'px',_0x7ee333[_0x19dbbd(0x272)][_0x19dbbd(0x265)]=_0x2e71e8+'px',_0x7ee333[_0x19dbbd(0x272)][_0x19dbbd(0x1af)]='-'+_0x480db7+'px\x20-'+_0x17d4d0+'px'),_0x54fd9a['appendChild'](_0x7ee333);}});}renderEventsForColumn(_0x54fd9a,_0x2848ea);});}function renderEventsForColumn(_0xa8820f,_0x126bcd){const _0x557ad1=a3_0x464a20,_0x44103b=sessions['filter'](_0x41e43f=>_0x41e43f[_0x557ad1(0x1ac)]===_0x126bcd),_0x1c1165=_0x44103b[_0x557ad1(0x1a9)](_0x749935=>{const _0x1262af=_0x557ad1,[_0x604a61,_0x2a8c9e]=_0x749935[_0x1262af(0x239)][_0x1262af(0x201)](':')['map'](Number),[_0x38c5fd,_0x15b086]=_0x749935[_0x1262af(0x188)][_0x1262af(0x201)](':')[_0x1262af(0x1a9)](Number);return{'data':_0x749935,'start':_0x604a61*0x3c+_0x2a8c9e,'end':_0x38c5fd*0x3c+_0x15b086,'colIndex':0x0};});_0x1c1165[_0x557ad1(0x1cb)]((_0x3ec02e,_0x3ad28f)=>_0x3ec02e[_0x557ad1(0x239)]-_0x3ad28f['start']||_0x3ad28f['end']-_0x3ad28f[_0x557ad1(0x239)]-(_0x3ec02e[_0x557ad1(0x188)]-_0x3ec02e[_0x557ad1(0x239)]));const _0x31fdd0=[];_0x1c1165[_0x557ad1(0x1ed)](_0x580a2a=>{const _0x2512c3=_0x557ad1;let _0x36fdc5=![];for(let _0x242890=0x0;_0x242890<_0x31fdd0[_0x2512c3(0x26f)];_0x242890++){const _0x3af505=_0x31fdd0[_0x242890];if(_0x580a2a[_0x2512c3(0x239)]>=_0x3af505[_0x3af505[_0x2512c3(0x26f)]-0x1][_0x2512c3(0x188)]){_0x3af505[_0x2512c3(0x263)](_0x580a2a),_0x580a2a[_0x2512c3(0x1d8)]=_0x242890,_0x36fdc5=!![];break;}}!_0x36fdc5&&(_0x31fdd0[_0x2512c3(0x263)]([_0x580a2a]),_0x580a2a['colIndex']=_0x31fdd0[_0x2512c3(0x26f)]-0x1);}),_0x1c1165['forEach'](_0x5e89bc=>{const _0x412bf5=_0x557ad1;let _0x253813=0x0;_0x1c1165[_0x412bf5(0x1ed)](_0x13cd31=>{const _0x33671d=_0x412bf5;if(Math[_0x33671d(0x1f9)](_0x5e89bc[_0x33671d(0x239)],_0x13cd31[_0x33671d(0x239)])<Math['min'](_0x5e89bc['end'],_0x13cd31[_0x33671d(0x188)])&&_0x13cd31[_0x33671d(0x1d8)]>_0x253813)_0x253813=_0x13cd31[_0x33671d(0x1d8)];});const _0x36ca65=_0x253813+0x1,_0x46d9cd=0x64/_0x36ca65,_0x1cef32=_0x5e89bc['colIndex']*_0x46d9cd,_0x1e6e50=document[_0x412bf5(0x1ea)](_0x412bf5(0x212)),_0x31bd17=_0x5e89bc[_0x412bf5(0x1d7)];let _0x591326=_0x412bf5(0x26d);if(clients&&clients[_0x412bf5(0x26f)]>0x0){const _0x4816be=clients[_0x412bf5(0x23b)](_0x3387d8=>String(_0x3387d8['id'])===String(_0x31bd17[_0x412bf5(0x268)]));if(_0x4816be&&_0x4816be[_0x412bf5(0x18b)])_0x591326=_0x4816be['color'];}const _0x5b4a8c=_0x31bd17['status']==='completed',_0xaa17d6=_0x5b4a8c?0x1:0.45;_0x1e6e50[_0x412bf5(0x21d)]=_0x412bf5(0x17c)+(_0x5b4a8c?_0x412bf5(0x233):''),_0x1e6e50[_0x412bf5(0x272)][_0x412bf5(0x18a)]=hexToRgba(_0x591326,_0xaa17d6),_0x1e6e50['style'][_0x412bf5(0x195)]=_0x591326;const _0x3f203d=_0x5e89bc[_0x412bf5(0x239)]/0x3c*GRID_H,_0x154e0c=(_0x5e89bc['end']-_0x5e89bc[_0x412bf5(0x239)])/0x3c*GRID_H;_0x1e6e50[_0x412bf5(0x272)]['top']=_0x3f203d+'px',_0x1e6e50[_0x412bf5(0x272)]['height']=Math[_0x412bf5(0x1f9)](_0x154e0c,0x14)+'px',_0x1e6e50[_0x412bf5(0x272)][_0x412bf5(0x1bd)]=_0x412bf5(0x244)+_0x46d9cd+_0x412bf5(0x1a3),_0x1e6e50[_0x412bf5(0x272)][_0x412bf5(0x173)]='calc('+_0x1cef32+_0x412bf5(0x1b8),_0x1e6e50[_0x412bf5(0x272)]['zIndex']=0xa+_0x5e89bc[_0x412bf5(0x1d8)];if(_0x46d9cd<0x55)_0x1e6e50['classList'][_0x412bf5(0x24f)](_0x412bf5(0x1ec));let _0x39c26c='';if(_0x31bd17[_0x412bf5(0x174)])_0x39c26c+=_0x412bf5(0x225);if(_0x5b4a8c)_0x39c26c+=_0x412bf5(0x261);_0x1e6e50[_0x412bf5(0x1d4)]=_0x412bf5(0x182)+_0x31bd17[_0x412bf5(0x239)]+_0x412bf5(0x1c5)+_0x31bd17[_0x412bf5(0x188)]+_0x412bf5(0x1b4)+_0x39c26c+_0x412bf5(0x177),_0x1e6e50[_0x412bf5(0x1f5)]=_0x2a5567=>{const _0x3cf6e6=_0x412bf5;_0x2a5567[_0x3cf6e6(0x18c)](),openDetails(_0x31bd17);},_0xa8820f[_0x412bf5(0x191)](_0x1e6e50);});}function openAnalytics(){const _0x28dbfb=a3_0x464a20,_0x2b2bb9=document['querySelector'](_0x28dbfb(0x1f7));setAnalyticsPeriod('week',_0x2b2bb9),openSheet(_0x28dbfb(0x196));}function setAnalyticsPeriod(_0x271387,_0x3e4014){const _0x13eda1=a3_0x464a20;currentAnPeriod=_0x271387,document[_0x13eda1(0x1f1)](_0x13eda1(0x1f7))['forEach'](_0x51c6da=>_0x51c6da[_0x13eda1(0x209)][_0x13eda1(0x1c3)]('active'));if(_0x3e4014)_0x3e4014[_0x13eda1(0x209)]['add'](_0x13eda1(0x1c7));const _0x47a9e2=document[_0x13eda1(0x25f)](_0x13eda1(0x190));_0x47a9e2[_0x13eda1(0x272)]['display']=_0x271387==='custom'?_0x13eda1(0x206):_0x13eda1(0x1c2);const _0x29ecab=new Date();let _0x434d62=new Date(),_0x4bb5e5=new Date();if(_0x271387===_0x13eda1(0x1fd))_0x434d62=getStartOfWeek(_0x29ecab),_0x4bb5e5=new Date(_0x434d62),_0x4bb5e5['setDate'](_0x4bb5e5[_0x13eda1(0x217)]()+0x6);else{if(_0x271387===_0x13eda1(0x20c))_0x434d62=new Date(_0x29ecab[_0x13eda1(0x229)](),_0x29ecab['getMonth'](),0x1),_0x4bb5e5=new Date(_0x29ecab['getFullYear'](),_0x29ecab[_0x13eda1(0x1f2)]()+0x1,0x0);else{!document[_0x13eda1(0x25f)](_0x13eda1(0x1a0))['value']&&(document[_0x13eda1(0x25f)](_0x13eda1(0x1a0))['value']=getLocalDateStr(_0x29ecab),document['getElementById'](_0x13eda1(0x1f3))[_0x13eda1(0x22a)]=getLocalDateStr(_0x29ecab));refreshAnalytics();return;}}document[_0x13eda1(0x25f)](_0x13eda1(0x1a0))['value']=getLocalDateStr(_0x434d62),document[_0x13eda1(0x25f)](_0x13eda1(0x1f3))['value']=getLocalDateStr(_0x4bb5e5),refreshAnalytics();}function refreshAnalytics(){const _0x324dc0=a3_0x464a20,_0x15bc66=document[_0x324dc0(0x25f)](_0x324dc0(0x1a0))[_0x324dc0(0x22a)],_0x339d21=document[_0x324dc0(0x25f)]('anEnd')[_0x324dc0(0x22a)];if(!_0x15bc66||!_0x339d21)return;const _0x7a3ac8=sessions['filter'](_0x12a599=>_0x12a599[_0x324dc0(0x1ac)]>=_0x15bc66&&_0x12a599[_0x324dc0(0x1ac)]<=_0x339d21&&_0x12a599['status']!==_0x324dc0(0x247)),_0x4801de=_0x7a3ac8[_0x324dc0(0x26f)],_0x5959b6=_0x7a3ac8[_0x324dc0(0x253)](_0x26a64b=>_0x26a64b[_0x324dc0(0x25a)]===_0x324dc0(0x240))[_0x324dc0(0x26f)],_0x2b55ff=_0x4801de>0x0?Math[_0x324dc0(0x19c)](_0x5959b6/_0x4801de*0x64):0x0;document[_0x324dc0(0x25f)](_0x324dc0(0x21e))[_0x324dc0(0x1c1)]=_0x2b55ff+'%',document['getElementById'](_0x324dc0(0x184))[_0x324dc0(0x1c1)]=_0x5959b6+'\x20–∏–∑\x20'+_0x4801de+_0x324dc0(0x237);const _0xba8ed5=document[_0x324dc0(0x25f)](_0x324dc0(0x1cd)),_0x2ba38a=0x2*Math['PI']*0x23,_0x1186c8=_0x2ba38a-_0x2b55ff/0x64*_0x2ba38a;_0xba8ed5[_0x324dc0(0x272)][_0x324dc0(0x1fb)]=_0x1186c8;const _0x527823={};_0x7a3ac8[_0x324dc0(0x1ed)](_0xd5c444=>{const _0x29f3bc=_0x324dc0,_0x5eb043=_0xd5c444[_0x29f3bc(0x1da)]||_0x29f3bc(0x21f);if(!_0x527823[_0x5eb043]){const _0xbea76f='#'+_0x5eb043[_0x29f3bc(0x24e)]()[_0x29f3bc(0x221)](0x0,0x6);_0x527823[_0x5eb043]={'total':0x0,'done':0x0,'color':_0xbea76f};}_0x527823[_0x5eb043]['total']++;if(_0xd5c444[_0x29f3bc(0x25a)]===_0x29f3bc(0x240))_0x527823[_0x5eb043][_0x29f3bc(0x232)]++;});const _0x5b45bb=document[_0x324dc0(0x25f)]('analyticsList');_0x5b45bb[_0x324dc0(0x1d4)]='';const _0x2e7ff0=Object[_0x324dc0(0x1bc)](_0x527823)[_0x324dc0(0x1cb)]((_0x5ab9b5,_0x408da3)=>_0x408da3[0x1][_0x324dc0(0x21b)]-_0x5ab9b5[0x1]['total']);if(_0x2e7ff0['length']===0x0){_0x5b45bb[_0x324dc0(0x1d4)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x2e7ff0[_0x324dc0(0x1ed)](([_0x4c7d12,_0x1114bf])=>{const _0x23db1e=_0x324dc0,_0x515584=Math['round'](_0x1114bf['done']/_0x1114bf['total']*0x64),_0x2c15a0=document[_0x23db1e(0x1ea)](_0x23db1e(0x212));_0x2c15a0[_0x23db1e(0x21d)]='client-stat-card',_0x2c15a0[_0x23db1e(0x272)][_0x23db1e(0x195)]=_0x1114bf['color'],_0x2c15a0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x4c7d12[_0x23db1e(0x221)](0x0,0x5)+_0x23db1e(0x19f)+_0x1114bf['done']+'</span>\x20/\x20'+_0x1114bf['total']+_0x23db1e(0x207)+_0x515584+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5b45bb['appendChild'](_0x2c15a0);});}function openDetails(_0x1ca4ea){const _0x88e9f0=a3_0x464a20;currentSession=_0x1ca4ea;const _0x379f3b=new Date(_0x1ca4ea[_0x88e9f0(0x1ac)]),_0x524aea=_0x379f3b[_0x88e9f0(0x1bf)](_0x88e9f0(0x208),{'weekday':_0x88e9f0(0x1f8),'day':'numeric','month':_0x88e9f0(0x1f8)});document[_0x88e9f0(0x25f)]('detDate')[_0x88e9f0(0x1c1)]=_0x524aea[_0x88e9f0(0x251)](0x0)[_0x88e9f0(0x1d3)]()+_0x524aea[_0x88e9f0(0x19d)](0x1),document[_0x88e9f0(0x25f)](_0x88e9f0(0x1fe))[_0x88e9f0(0x1c1)]=_0x1ca4ea['start']+_0x88e9f0(0x1c5)+_0x1ca4ea['end'],document[_0x88e9f0(0x25f)](_0x88e9f0(0x18f))['textContent']=_0x1ca4ea[_0x88e9f0(0x226)]||_0x88e9f0(0x270);const _0xc731f6=document[_0x88e9f0(0x25f)](_0x88e9f0(0x1ae)),_0x5c2eba=document[_0x88e9f0(0x25f)](_0x88e9f0(0x22d)),_0x2ab72c=_0x5c2eba[_0x88e9f0(0x262)](_0x88e9f0(0x25c)),_0x546b2d=_0x5c2eba['querySelector'](_0x88e9f0(0x249)),_0x3c4281=document[_0x88e9f0(0x25f)]('cancelHint');if(_0x1ca4ea['status']===_0x88e9f0(0x240))_0xc731f6[_0x88e9f0(0x1c1)]='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0xc731f6[_0x88e9f0(0x272)][_0x88e9f0(0x18b)]=_0x88e9f0(0x1a6),_0x5c2eba[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]=_0x88e9f0(0x1c2);else{_0xc731f6[_0x88e9f0(0x1c1)]=_0x88e9f0(0x18d),_0xc731f6[_0x88e9f0(0x272)]['color']=_0x88e9f0(0x1b2),_0x5c2eba[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]=_0x88e9f0(0x248);const _0x4537f1=new Date(_0x1ca4ea[_0x88e9f0(0x1ac)]+'T'+_0x1ca4ea[_0x88e9f0(0x239)]),_0x55ec96=new Date(),_0x21b7f1=(_0x4537f1-_0x55ec96)/(0x3e8*0x3c*0x3c),_0x23f931=coachProfiles[_0x1ca4ea[_0x88e9f0(0x1da)]]&&coachProfiles[_0x1ca4ea[_0x88e9f0(0x1da)]]['cancel_window']?parseInt(coachProfiles[_0x1ca4ea['coachId']][_0x88e9f0(0x1e0)]):0x18;if(_0x23f931===0x0||_0x21b7f1>=_0x23f931)_0x2ab72c[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]=_0x88e9f0(0x248),_0x546b2d[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]='block',_0x3c4281[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]=_0x88e9f0(0x1c2);else{_0x2ab72c[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]='none',_0x546b2d[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]='none',_0x3c4281[_0x88e9f0(0x272)][_0x88e9f0(0x20f)]=_0x88e9f0(0x248);let _0x77d54e=_0x23f931===0x0?_0x88e9f0(0x179):_0x88e9f0(0x25d)+_0x23f931+_0x88e9f0(0x1c8);_0x3c4281['textContent']=_0x88e9f0(0x24b)+_0x77d54e+_0x88e9f0(0x26b);}}document[_0x88e9f0(0x25f)](_0x88e9f0(0x192))['classList']['add']('active'),document[_0x88e9f0(0x25f)]('detailsSheet')['classList'][_0x88e9f0(0x24f)](_0x88e9f0(0x204));}function closeAllSheets(){const _0x23479e=a3_0x464a20;document[_0x23479e(0x25f)](_0x23479e(0x192))[_0x23479e(0x209)][_0x23479e(0x1c3)](_0x23479e(0x1c7)),document[_0x23479e(0x1f1)](_0x23479e(0x260))[_0x23479e(0x1ed)](_0x4403e9=>_0x4403e9[_0x23479e(0x209)][_0x23479e(0x1c3)](_0x23479e(0x204)));}function openSheet(_0x190036){const _0x3d37d1=a3_0x464a20;document[_0x3d37d1(0x25f)]('overlay')['classList'][_0x3d37d1(0x24f)](_0x3d37d1(0x1c7)),document[_0x3d37d1(0x25f)](_0x190036)['classList'][_0x3d37d1(0x24f)]('open');}function a3_0x1f6d(_0x6b4f42,_0x1a3d44){_0x6b4f42=_0x6b4f42-0x173;const _0x3e0701=a3_0x4c06();let _0xef164c=_0x3e0701[_0x6b4f42];return _0xef164c;}function getLocalDateStr(_0x32c9e5){const _0x474e41=a3_0x464a20,_0x3e8282=_0x32c9e5['getFullYear'](),_0x1ffbcd=String(_0x32c9e5['getMonth']()+0x1)[_0x474e41(0x256)](0x2,'0'),_0x5163c9=String(_0x32c9e5[_0x474e41(0x217)]())[_0x474e41(0x256)](0x2,'0');return _0x3e8282+'-'+_0x1ffbcd+'-'+_0x5163c9;}function getStartOfWeek(_0x1c5c50){const _0x4829bc=a3_0x464a20,_0x491823=new Date(_0x1c5c50),_0x1e1e3e=_0x491823[_0x4829bc(0x1ca)](),_0x5d3b59=_0x491823[_0x4829bc(0x217)]()-_0x1e1e3e+(_0x1e1e3e===0x0?-0x6:0x1);return _0x491823[_0x4829bc(0x264)](_0x5d3b59),_0x491823[_0x4829bc(0x258)](0x0,0x0,0x0,0x0),_0x491823;}function a3_0x4c06(){const _0x462c5f=['strokeDashoffset','matrixViewport','week','detTime','px\x200px','clientWidth','split','T00:00:00','initDataUnsafe','open','floor','flex','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','ru-RU','classList','.day-column','globalTimeLine','month','client_cancel','16488200soZaBa','display','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','600','div','apply','uc_client_list','calendar','7272BrXRyU','getDate','ranges','getMinutes','offsetWidth','total','BackButton','className','anPercent','Unknown','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','substr','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','</div>','Telegram','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','note','ready','min','getFullYear','value','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','test','cancelContainer','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','739910Qqflic','cid','stringify','done','\x20status-completed','scrollTop','visible','toast','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','ccYesBtn','start','scrollTo','find','settings','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','startsWith','disableVerticalSwipes','completed','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','keys','ccText','calc(','gridColumns','<span>','cancelled','block','.btn-reschedule','565755BUBEUe','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','(((.+)+)+)+$','blocked-range-part\x20stripe-bg','toString','add','data-day-idx','charAt','.day-col-header[data-date=\x22','filter','data-date','applyData','padStart','getHours','setHours','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','status','getTime','.btn-cancel','–∑–∞\x20','createDocumentFragment','getElementById','.sheet','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','querySelector','push','setDate','height','getItem','.rs-date-chip','clientId','button','22qYOifz','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','Error\x20setting\x20color:','#0a84ff','auto','length','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','headerMonth','style','rescheduleSheet','fontWeight','591836OgDPza','#ff453a','exceptions','px\x20-','left','seriesId','detailsSheet','reschedule','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','customConfirm','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','Error\x20setting\x20back\x20button:','setAttribute','event-card','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','DOMContentLoaded','parse','error','expand','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','time-label','anTotalStats','timeColumn','json','scrollLeft','end','</div><div\x20class=\x22rs-day-num\x22>','backgroundColor','color','stopPropagation','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','42SiMtut','detNote','anCustomDates','appendChild','overlay','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','top','borderLeftColor','analyticsSheet','setItem','2915932TWWAET','offsetLeft','346839mhPqUQ','timeLineBadge','round','slice','rs-date-chip','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','anStart','saveLocally','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','%\x20-\x204px)','<div\x20class=\x22dch-day\x22>','all','var(--acc-green)','day-col-header\x20','day-column\x20','map','today','log','dateStr','firstChild','detStatus','backgroundPosition','.day-col-header','then','var(--acc-blue)','<div\x20class=\x22rs-day-name\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','client_load','location','rgba(10,\x20132,\x20255,\x20','%\x20+\x202px)','getAttribute','setMonth','uc_client_settings','entries','width','day-off-overlay\x20stripe-bg','toLocaleDateString','syncLoad','textContent','none','remove','search','\x20-\x20','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','active','\x20—á.','coach_profiles','getDay','sort','setBackgroundColor','anDonutCircle','clients','scrollWidth','router.html','constructor','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','toUpperCase','innerHTML','offClick','WebApp','data','colIndex','</div><div\x20class=\x22dch-num\x22>','coachId','blocked-slot\x20stripe-bg',':00</span>','now','POST','insertBefore','cancel_window','substring','–û—Ç–º–µ–Ω–µ–Ω–æ','addEventListener','initData','rsDatesTrack','show','sid','pattern','isArray','createElement','Critical\x20TMA\x20Error:','mini','forEach','10746bEebwk','daysHeaderTrack','\x20–≤\x20','querySelectorAll','getMonth','anEnd','scroll','onclick','rsSlotsGrid','.period-switch\x20.p-btn','long','max','#050505'];a3_0x4c06=function(){return _0x462c5f;};return a3_0x4c06();}function scrollToToday(){const _0x4c7e75=getLocalDateStr(new Date());setTimeout(()=>{const _0x3a977e=a3_0x1f6d,_0xae0af1=document['querySelector'](_0x3a977e(0x252)+_0x4c7e75+'\x22]');if(_0xae0af1){const _0x283f11=document[_0x3a977e(0x25f)](_0x3a977e(0x1fc)),_0x3b0ab0=_0xae0af1[_0x3a977e(0x199)]-_0x283f11[_0x3a977e(0x200)]/0x2+_0xae0af1[_0x3a977e(0x21a)]/0x2;_0x283f11[_0x3a977e(0x23a)]({'left':_0x3b0ab0,'behavior':_0x3a977e(0x26e)}),_0x283f11[_0x3a977e(0x234)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x497e38=a3_0x464a20,_0x486d24=new Date(),_0x92c057=document[_0x497e38(0x25f)](_0x497e38(0x20b)),_0x5b6f80=document[_0x497e38(0x25f)](_0x497e38(0x19b)),_0x1ff2bb=(_0x486d24[_0x497e38(0x257)]()*0x3c+_0x486d24['getMinutes']())/0x3c*GRID_H;_0x92c057[_0x497e38(0x272)][_0x497e38(0x194)]=_0x1ff2bb+'px',_0x92c057[_0x497e38(0x272)][_0x497e38(0x20f)]=_0x497e38(0x248),_0x5b6f80[_0x497e38(0x272)][_0x497e38(0x194)]=_0x1ff2bb+'px',_0x5b6f80[_0x497e38(0x272)][_0x497e38(0x20f)]='block',_0x5b6f80[_0x497e38(0x1c1)]=String(_0x486d24[_0x497e38(0x257)]())[_0x497e38(0x256)](0x2,'0')+':'+String(_0x486d24[_0x497e38(0x219)]())['padStart'](0x2,'0');}function onScroll(){const _0x2a8487=a3_0x464a20,_0x11b412=document[_0x2a8487(0x25f)]('matrixViewport'),_0x20b07a=document['querySelectorAll'](_0x2a8487(0x1b0));for(let _0x134138 of _0x20b07a)if(_0x134138[_0x2a8487(0x199)]>=_0x11b412['scrollLeft']){const _0x2f6779=new Date(_0x134138[_0x2a8487(0x1b9)]('data-date'));document[_0x2a8487(0x25f)](_0x2a8487(0x271))[_0x2a8487(0x1c1)]=_0x2f6779['toLocaleString']('ru',{'month':_0x2a8487(0x1f8)})['toUpperCase']()+'\x20'+_0x2f6779[_0x2a8487(0x229)]();break;}}function showToast(_0x402e42){const _0x4232c9=a3_0x464a20,_0x45614d=document[_0x4232c9(0x25f)](_0x4232c9(0x236));_0x45614d[_0x4232c9(0x1c1)]=_0x402e42,_0x45614d[_0x4232c9(0x209)][_0x4232c9(0x24f)]('show'),setTimeout(()=>_0x45614d[_0x4232c9(0x209)][_0x4232c9(0x1c3)](_0x4232c9(0x1e6)),0x7d0);}function handleInfiniteScroll(){const _0x100d3e=a3_0x464a20,_0x584a3b=document['getElementById'](_0x100d3e(0x1fc)),_0x3c33fc=_0x584a3b[_0x100d3e(0x187)],_0x270947=_0x584a3b[_0x100d3e(0x1cf)],_0x1a4aed=_0x584a3b['clientWidth'];if(_0x270947-(_0x3c33fc+_0x1a4aed)<0x12c){const _0x27bed7=endOffset;endOffset+=0xe,renderDayRange(_0x27bed7+0x1,endOffset),reRenderBlocks();}if(_0x3c33fc<0x12c){const _0x5b310d=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5b310d-0x1),_0x584a3b[_0x100d3e(0x187)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x9a5153,_0x14e2be){const _0xb40d9f=a3_0x464a20,_0x56fb89=document[_0xb40d9f(0x25f)](_0xb40d9f(0x1ef)),_0x5f0a0d=document[_0xb40d9f(0x25f)](_0xb40d9f(0x245)),_0x2aefb9=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x294616=new Date();_0x294616['setHours'](0x0,0x0,0x0,0x0);const _0x21adf2=getLocalDateStr(new Date()),_0x4d0f1f=document[_0xb40d9f(0x25e)](),_0x160860=document[_0xb40d9f(0x25e)]();for(let _0x4f99ad=_0x9a5153;_0x4f99ad<=_0x14e2be;_0x4f99ad++){const _0x785942=new Date(_0x294616);_0x785942[_0xb40d9f(0x264)](_0x785942['getDate']()+_0x4f99ad);const _0x1b269b=getLocalDateStr(_0x785942);let _0x77da4a=_0x785942[_0xb40d9f(0x1ca)]()-0x1;if(_0x77da4a===-0x1)_0x77da4a=0x6;const _0x49b062=_0x1b269b===_0x21adf2,_0x37f9fa=document[_0xb40d9f(0x1ea)](_0xb40d9f(0x212));_0x37f9fa[_0xb40d9f(0x21d)]=_0xb40d9f(0x1a7)+(_0x49b062?'today':''),_0x37f9fa['setAttribute'](_0xb40d9f(0x254),_0x1b269b),_0x37f9fa[_0xb40d9f(0x1d4)]=_0xb40d9f(0x1a4)+_0x2aefb9[_0x77da4a]+_0xb40d9f(0x1d9)+_0x785942[_0xb40d9f(0x217)]()+'</div>',_0x4d0f1f['appendChild'](_0x37f9fa);const _0x187cc2=document['createElement'](_0xb40d9f(0x212));_0x187cc2[_0xb40d9f(0x21d)]=_0xb40d9f(0x1a8)+(_0x49b062?_0xb40d9f(0x1aa):''),_0x187cc2[_0xb40d9f(0x17b)](_0xb40d9f(0x254),_0x1b269b),_0x187cc2[_0xb40d9f(0x17b)]('data-day-idx',_0x77da4a),_0x160860[_0xb40d9f(0x191)](_0x187cc2);}_0x56fb89[_0xb40d9f(0x1df)](_0x4d0f1f,_0x56fb89[_0xb40d9f(0x1ad)]),_0x5f0a0d[_0xb40d9f(0x1df)](_0x160860,_0x5f0a0d[_0xb40d9f(0x262)](_0xb40d9f(0x20a)));}function hexToRgba(_0x290f3e,_0x346c25){const _0x11fe7f=a3_0x464a20;let _0x1c8601;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x11fe7f(0x22c)](_0x290f3e))return _0x1c8601=_0x290f3e[_0x11fe7f(0x1e1)](0x1)[_0x11fe7f(0x201)](''),_0x1c8601[_0x11fe7f(0x26f)]==0x3&&(_0x1c8601=[_0x1c8601[0x0],_0x1c8601[0x0],_0x1c8601[0x1],_0x1c8601[0x1],_0x1c8601[0x2],_0x1c8601[0x2]]),_0x1c8601='0x'+_0x1c8601['join'](''),'rgba('+[_0x1c8601>>0x10&0xff,_0x1c8601>>0x8&0xff,_0x1c8601&0xff]['join'](',')+','+_0x346c25+')';return _0x11fe7f(0x1b7)+_0x346c25+')';}let confirmResolver=null;function showCustomConfirm(_0x4e4bb4,_0x1be6be,_0x100fb1=!![]){const _0x459409=a3_0x464a20;document[_0x459409(0x25f)]('ccTitle')[_0x459409(0x1c1)]=_0x4e4bb4,document[_0x459409(0x25f)](_0x459409(0x243))[_0x459409(0x1c1)]=_0x1be6be;const _0x7b5be2=document[_0x459409(0x25f)](_0x459409(0x238));return _0x100fb1?(_0x7b5be2[_0x459409(0x272)][_0x459409(0x18b)]=_0x459409(0x276),_0x7b5be2[_0x459409(0x272)][_0x459409(0x274)]='600'):(_0x7b5be2[_0x459409(0x272)]['color']='#0a84ff',_0x7b5be2[_0x459409(0x272)][_0x459409(0x274)]=_0x459409(0x211)),new Promise(_0x5e7b35=>{const _0x358140=_0x459409;confirmResolver=_0x5e7b35,document['getElementById'](_0x358140(0x178))[_0x358140(0x209)][_0x358140(0x24f)](_0x358140(0x235));});}function resolveCustomConfirm(_0x29e55a){const _0x761fbe=a3_0x464a20;document[_0x761fbe(0x25f)]('customConfirm')['classList']['remove'](_0x761fbe(0x235));if(confirmResolver)confirmResolver(_0x29e55a);}async function tryCancelCurrentSession(){const _0x3fc0eb=a3_0x464a20;if(!currentSession)return;const _0x265ef0=await showCustomConfirm(_0x3fc0eb(0x220),_0x3fc0eb(0x17d),!![]);if(!_0x265ef0)return;const _0x546aa0=currentSession;closeAllSheets(),sessions=sessions[_0x3fc0eb(0x253)](_0x59d484=>_0x59d484['id']!==_0x546aa0['id']),reRenderBlocks(),showToast(_0x3fc0eb(0x1e2)),lastUserActionTime=Date[_0x3fc0eb(0x1dd)]();try{const _0x69de0b=window['Telegram']?.[_0x3fc0eb(0x1d6)],_0x3d9843=await fetch(API_URL,{'method':_0x3fc0eb(0x1de),'body':JSON[_0x3fc0eb(0x231)]({'action':_0x3fc0eb(0x20d),'init_data':_0x69de0b?.[_0x3fc0eb(0x1e4)]||'','coachId':_0x546aa0[_0x3fc0eb(0x1da)],'dateStr':_0x546aa0['dateStr'],'sessionId':_0x546aa0['id']})});if(_0x3d9843['ok'])DataManager['saveLocally']();}catch(_0x5dfed4){showToast(_0x3fc0eb(0x23d));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xd87a58=a3_0x464a20;if(!currentSession)return;document[_0xd87a58(0x25f)](_0xd87a58(0x175))[_0xd87a58(0x209)][_0xd87a58(0x1c3)](_0xd87a58(0x204)),document[_0xd87a58(0x25f)](_0xd87a58(0x273))['classList'][_0xd87a58(0x24f)](_0xd87a58(0x204));const _0x4bafdc=document[_0xd87a58(0x25f)](_0xd87a58(0x1e5)),_0x493726=document[_0xd87a58(0x25f)](_0xd87a58(0x1f6));_0x4bafdc['innerHTML']='',_0x493726[_0xd87a58(0x1d4)]=_0xd87a58(0x210);const [_0x1b3c03,_0x1c9b45]=currentSession['start']['split'](':')[_0xd87a58(0x1a9)](Number),[_0x166dfd,_0x2a089a]=currentSession[_0xd87a58(0x188)][_0xd87a58(0x201)](':')['map'](Number),_0x24ca07=_0x166dfd*0x3c+_0x2a089a-(_0x1b3c03*0x3c+_0x1c9b45);try{const _0x4483ff=window[_0xd87a58(0x224)]?.['WebApp'],_0x1fcc69=await fetch(API_URL,{'method':_0xd87a58(0x1de),'body':JSON['stringify']({'action':'get_slots','coachId':currentSession['coachId'],'duration':_0x24ca07,'init_data':_0x4483ff?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x5c7b43=await _0x1fcc69[_0xd87a58(0x186)]();_0x5c7b43['ok']&&_0x5c7b43[_0xd87a58(0x1d7)]?(availableSlotsCache=_0x5c7b43['data'],renderRescheduleDates()):_0x493726[_0xd87a58(0x1d4)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x5205bc){_0x493726[_0xd87a58(0x1d4)]=_0xd87a58(0x1c6);}}function renderRescheduleDates(){const _0x4bfcc6=a3_0x464a20,_0x3b2e17=document[_0x4bfcc6(0x25f)](_0x4bfcc6(0x1e5));_0x3b2e17[_0x4bfcc6(0x1d4)]='';const _0x440073=Object[_0x4bfcc6(0x242)](availableSlotsCache)[_0x4bfcc6(0x1cb)](),_0x2c37e7=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x440073[_0x4bfcc6(0x26f)]===0x0){document[_0x4bfcc6(0x25f)]('rsSlotsGrid')[_0x4bfcc6(0x1d4)]=_0x4bfcc6(0x241);return;}_0x440073[_0x4bfcc6(0x1ed)]((_0x1f01a6,_0xc45da0)=>{const _0x135c57=_0x4bfcc6,_0x1aa27c=new Date(_0x1f01a6),_0xf4e498=_0x2c37e7[_0x1aa27c[_0x135c57(0x1ca)]()],_0x245e27=_0x1aa27c[_0x135c57(0x217)](),_0x34ebcb=document[_0x135c57(0x1ea)](_0x135c57(0x212));_0x34ebcb['className']=_0x135c57(0x19e);if(_0xc45da0===0x0)_0x34ebcb[_0x135c57(0x209)][_0x135c57(0x24f)](_0x135c57(0x1c7));_0x34ebcb[_0x135c57(0x1d4)]=_0x135c57(0x1b3)+_0xf4e498+_0x135c57(0x189)+_0x245e27+'</div>',_0x34ebcb[_0x135c57(0x1f5)]=()=>selectRsDate(_0x1f01a6,_0x34ebcb),_0x3b2e17[_0x135c57(0x191)](_0x34ebcb);}),selectRsDate(_0x440073[0x0],_0x3b2e17[_0x4bfcc6(0x1ad)]);}function selectRsDate(_0x346355,_0x49e12e){const _0x12d1bf=a3_0x464a20;selectedRsDate=_0x346355,document[_0x12d1bf(0x1f1)](_0x12d1bf(0x267))[_0x12d1bf(0x1ed)](_0x236d5b=>_0x236d5b['classList'][_0x12d1bf(0x1c3)](_0x12d1bf(0x1c7)));if(_0x49e12e)_0x49e12e[_0x12d1bf(0x209)]['add'](_0x12d1bf(0x1c7));const _0x2bd6e2=document[_0x12d1bf(0x25f)](_0x12d1bf(0x1f6));_0x2bd6e2[_0x12d1bf(0x1d4)]='';const _0x42aced=availableSlotsCache[_0x346355]||[];if(_0x42aced['length']===0x0){_0x2bd6e2[_0x12d1bf(0x1d4)]=_0x12d1bf(0x193);return;}_0x42aced[_0x12d1bf(0x1ed)](_0x4da1de=>{const _0x6d2967=_0x12d1bf,_0xedaabf=document[_0x6d2967(0x1ea)](_0x6d2967(0x269));_0xedaabf[_0x6d2967(0x21d)]='rs-time-btn',_0xedaabf[_0x6d2967(0x1c1)]=_0x4da1de,_0xedaabf[_0x6d2967(0x1f5)]=()=>confirmReschedule(_0x4da1de),_0x2bd6e2[_0x6d2967(0x191)](_0xedaabf);});}async function confirmReschedule(_0x5aafa3){const _0x197af8=a3_0x464a20,_0x163897=new Date(selectedRsDate),_0x54fd00=_0x163897[_0x197af8(0x1bf)](_0x197af8(0x208),{'day':'numeric','month':'long'}),_0x20bec2=await showCustomConfirm(_0x197af8(0x259),_0x197af8(0x22e)+_0x54fd00+_0x197af8(0x1f0)+_0x5aafa3+'?',![]);if(!_0x20bec2)return;closeAllSheets(),showToast(_0x197af8(0x1a2)),lastUserActionTime=Date['now']();const _0x6da319=currentSession[_0x197af8(0x1ac)],_0x116938=currentSession['id'],[_0x459a9d,_0x1cc46d]=currentSession['start']['split'](':')[_0x197af8(0x1a9)](Number),[_0xa116f3,_0x4bd897]=currentSession['end'][_0x197af8(0x201)](':')['map'](Number),_0x220cae=_0xa116f3*0x3c+_0x4bd897-(_0x459a9d*0x3c+_0x1cc46d),[_0x456715,_0x58e635]=_0x5aafa3[_0x197af8(0x201)](':')[_0x197af8(0x1a9)](Number),_0x4fbddc=_0x456715*0x3c+_0x58e635+_0x220cae,_0x55d03c=Math[_0x197af8(0x205)](_0x4fbddc/0x3c),_0x3d72d5=_0x4fbddc%0x3c,_0x5af40c=String(_0x55d03c)[_0x197af8(0x256)](0x2,'0')+':'+String(_0x3d72d5)[_0x197af8(0x256)](0x2,'0'),_0x890618=sessions['findIndex'](_0x4e8dda=>_0x4e8dda['id']===_0x116938);_0x890618!==-0x1&&(sessions[_0x890618][_0x197af8(0x1ac)]=selectedRsDate,sessions[_0x890618][_0x197af8(0x239)]=_0x5aafa3,sessions[_0x890618][_0x197af8(0x188)]=_0x5af40c,reRenderBlocks());try{const _0x31a47e=window[_0x197af8(0x224)]?.[_0x197af8(0x1d6)],_0x2e2f3b=await fetch(API_URL,{'method':_0x197af8(0x1de),'body':JSON[_0x197af8(0x231)]({'action':_0x197af8(0x176),'init_data':_0x31a47e?.[_0x197af8(0x1e4)]||'','oldSessionId':_0x116938,'oldDate':_0x6da319,'newDate':selectedRsDate,'newTime':_0x5aafa3,'coachId':currentSession[_0x197af8(0x1da)]})}),_0x3503e4=await _0x2e2f3b[_0x197af8(0x186)]();!_0x3503e4['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x197af8(0x1c0)]()):(showToast(_0x197af8(0x22b)),DataManager['saveLocally']());}catch(_0x547565){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x464a20(0x1e3)](a3_0x464a20(0x17e),init);