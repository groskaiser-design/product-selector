const a3_0x150249=a3_0x36ec;(function(_0x457c01,_0x54aeb0){const _0x4bf781=a3_0x36ec,_0x11bdc6=_0x457c01();while(!![]){try{const _0xdc451c=-parseInt(_0x4bf781(0x122))/0x1*(-parseInt(_0x4bf781(0x195))/0x2)+parseInt(_0x4bf781(0x146))/0x3+-parseInt(_0x4bf781(0x1db))/0x4*(-parseInt(_0x4bf781(0x105))/0x5)+parseInt(_0x4bf781(0x1a6))/0x6+-parseInt(_0x4bf781(0x15c))/0x7*(-parseInt(_0x4bf781(0x171))/0x8)+parseInt(_0x4bf781(0x139))/0x9+parseInt(_0x4bf781(0x1c8))/0xa*(-parseInt(_0x4bf781(0x17d))/0xb);if(_0xdc451c===_0x54aeb0)break;else _0x11bdc6['push'](_0x11bdc6['shift']());}catch(_0x4ad113){_0x11bdc6['push'](_0x11bdc6['shift']());}}}(a3_0x3df0,0x212b7));function a3_0x36ec(_0x46eb41,_0xfeab0c){_0x46eb41=_0x46eb41-0xf7;const _0x2f517b=a3_0x3df0();let _0x2856c9=_0x2f517b[_0x46eb41];return _0x2856c9;}const APP_VERSION=a3_0x150249(0x169),API_URL=a3_0x150249(0x154),GRID_H=0x3c,KEY_SESSIONS=a3_0x150249(0x1e6),KEY_SETTINGS=a3_0x150249(0x1dd),KEY_CLIENTS=a3_0x150249(0x1d1);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x150249(0x137),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x518fcd=a3_0x150249,_0x35f638=(function(){let _0x4e5218=!![];return function(_0x247e58,_0x502f0e){const _0x18e950=_0x4e5218?function(){const _0x5330af=a3_0x36ec;if(_0x502f0e){const _0x26c94b=_0x502f0e[_0x5330af(0x1f3)](_0x247e58,arguments);return _0x502f0e=null,_0x26c94b;}}:function(){};return _0x4e5218=![],_0x18e950;};}()),_0x3d4a48=_0x35f638(this,function(){const _0x10b68d=a3_0x36ec;return _0x3d4a48[_0x10b68d(0x142)]()[_0x10b68d(0x1f4)](_0x10b68d(0x1ca))[_0x10b68d(0x142)]()[_0x10b68d(0x117)](_0x3d4a48)[_0x10b68d(0x1f4)](_0x10b68d(0x1ca));});_0x3d4a48();try{const _0x4677ed=window[_0x518fcd(0x182)]?.['WebApp'];if(!_0x4677ed)return;_0x4677ed[_0x518fcd(0x1e1)](),_0x4677ed[_0x518fcd(0x11a)]();try{_0x4677ed[_0x518fcd(0x1ef)](_0x518fcd(0x13b)),_0x4677ed[_0x518fcd(0x168)]&&_0x4677ed[_0x518fcd(0x168)](_0x518fcd(0x13b));}catch(_0x271179){console[_0x518fcd(0x162)]('Error\x20setting\x20color:',_0x271179);}try{_0x4677ed['BackButton']&&(_0x4677ed[_0x518fcd(0x134)][_0x518fcd(0x1cb)](),_0x4677ed[_0x518fcd(0x134)][_0x518fcd(0x1c4)](),_0x4677ed[_0x518fcd(0x134)][_0x518fcd(0x19a)](function(){const _0x25942e=_0x518fcd;window['location'][_0x25942e(0x1b9)]=_0x25942e(0x129);}));}catch(_0x331525){console['log'](_0x518fcd(0x1d4),_0x331525);}try{if(_0x4677ed[_0x518fcd(0xfb)])_0x4677ed[_0x518fcd(0xfb)]();}catch(_0x530fe5){}}catch(_0x407399){console[_0x518fcd(0x1e5)]('Critical\x20TMA\x20Error:',_0x407399);}}());function isAdmin(){const _0x312574=a3_0x150249;try{const _0x43eb9e=Number(window[_0x312574(0x182)]?.['WebApp']?.[_0x312574(0x120)]?.[_0x312574(0x18b)]?.['id']);return _0x43eb9e===0xbaf7174;}catch(_0x146a5f){return![];}}const DataManager={'saveLocally'(){const _0x3ebd9b=a3_0x150249;try{localStorage[_0x3ebd9b(0x1c9)](KEY_SESSIONS,JSON[_0x3ebd9b(0x131)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON[_0x3ebd9b(0x131)](clients)),localStorage[_0x3ebd9b(0x1c9)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0xb624ed){}},'loadLocal'(){const _0x374ccb=a3_0x150249;try{const _0x345cbc=localStorage[_0x374ccb(0x1f0)](KEY_SESSIONS);if(_0x345cbc)sessions=JSON[_0x374ccb(0x141)](_0x345cbc);const _0x1c2f0e=localStorage['getItem'](KEY_CLIENTS);if(_0x1c2f0e)clients=JSON[_0x374ccb(0x141)](_0x1c2f0e);const _0x5daab3=localStorage['getItem'](KEY_SETTINGS);if(_0x5daab3){const _0x272e2b=JSON[_0x374ccb(0x141)](_0x5daab3);if(_0x272e2b['pattern'])availabilityPattern=_0x272e2b[_0x374ccb(0x10b)];if(_0x272e2b[_0x374ccb(0x10f)])specialRanges=_0x272e2b[_0x374ccb(0x10f)];if(_0x272e2b[_0x374ccb(0x177)])dateExceptions=_0x272e2b[_0x374ccb(0x177)];}}catch(_0x5b2afa){}},async 'syncLoad'(){const _0xa3b868=a3_0x150249,_0x50048e=new Date(),_0x312cdf=_0x50048e[_0xa3b868(0x107)]()+'-'+String(_0x50048e[_0xa3b868(0x1ac)]()+0x1)[_0xa3b868(0xf7)](0x2,'0'),_0xd52c81=new Date(_0x50048e);_0xd52c81['setMonth'](_0x50048e[_0xa3b868(0x1ac)]()+0x1);const _0x12b1f8=_0xd52c81[_0xa3b868(0x107)]()+'-'+String(_0xd52c81[_0xa3b868(0x1ac)]()+0x1)['padStart'](0x2,'0'),_0x106585=Date[_0xa3b868(0x115)]();try{const _0x40051d=window[_0xa3b868(0x182)]?.['WebApp'],_0x508272=_0x40051d?.[_0xa3b868(0x16f)]||'',[_0x133986,_0x5349f5]=await Promise['all']([fetch(API_URL,{'method':_0xa3b868(0x144),'body':JSON[_0xa3b868(0x131)]({'action':_0xa3b868(0x1d6),'init_data':_0x508272,'month_str':_0x312cdf})})[_0xa3b868(0x152)](_0x42dc00=>_0x42dc00['json']()),fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':_0xa3b868(0x1d6),'init_data':_0x508272,'month_str':_0x12b1f8})})[_0xa3b868(0x152)](_0x247b53=>_0x247b53['json']())]);if(lastUserActionTime>_0x106585){console['log'](_0xa3b868(0x1f2));return;}if(_0x133986['ok'])this['applyData'](_0x133986['data'],_0x312cdf);if(_0x5349f5['ok'])this['applyData'](_0x5349f5[_0xa3b868(0x1b0)],_0x12b1f8);this['saveLocally']();}catch(_0x17caa9){}},'applyData'(_0x53e2c3,_0x17c47b){const _0x808dbf=a3_0x150249;if(!_0x53e2c3)return;if(_0x53e2c3[_0x808dbf(0x1be)]){if(_0x53e2c3[_0x808dbf(0x1be)][_0x808dbf(0x10b)])availabilityPattern=_0x53e2c3[_0x808dbf(0x1be)][_0x808dbf(0x10b)];if(_0x53e2c3[_0x808dbf(0x1be)][_0x808dbf(0x10f)])specialRanges=_0x53e2c3[_0x808dbf(0x1be)]['ranges'];if(_0x53e2c3[_0x808dbf(0x1be)][_0x808dbf(0x177)])dateExceptions=_0x53e2c3[_0x808dbf(0x1be)][_0x808dbf(0x177)];}if(_0x53e2c3[_0x808dbf(0x1d5)]&&Array[_0x808dbf(0x1ce)](_0x53e2c3[_0x808dbf(0x1d5)]))clients=_0x53e2c3[_0x808dbf(0x1d5)];_0x53e2c3[_0x808dbf(0x1b4)]&&(coachProfiles={...coachProfiles,..._0x53e2c3[_0x808dbf(0x1b4)]}),_0x53e2c3['calendar']&&(sessions=sessions[_0x808dbf(0x1d3)](_0x1d0ffa=>!_0x1d0ffa['dateStr'][_0x808dbf(0xfe)](_0x17c47b)),Object[_0x808dbf(0x130)](_0x53e2c3[_0x808dbf(0x15f)])[_0x808dbf(0x128)](_0x33667b=>{const _0x59b027=_0x808dbf,_0xd9e9d5=_0x53e2c3[_0x59b027(0x15f)][_0x33667b];_0xd9e9d5[_0x59b027(0x128)](_0x3612f5=>{const _0x184408=_0x59b027;sessions['push']({'id':_0x3612f5['i'],'clientId':_0x3612f5['c'],'coachId':_0x3612f5['cid'],'dateStr':_0x17c47b+'-'+_0x33667b[_0x184408(0xf7)](0x2,'0'),'start':_0x3612f5['s'],'end':_0x3612f5['e'],'note':_0x3612f5['n']||'','status':_0x3612f5['st']||_0x184408(0x176),'seriesId':_0x3612f5[_0x184408(0x14d)]});});})),reRenderBlocks();}};function init(){const _0x40c1f0=a3_0x150249;DataManager[_0x40c1f0(0x109)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x40c1f0(0x1ae)](_0x40c1f0(0x1da))['addEventListener']('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x40c1f0(0x16e)]();}function renderTimeColumn(){const _0x57f3f9=a3_0x150249,_0x989ee5=document[_0x57f3f9(0x1ae)]('timeColumn'),_0x1410e1=document[_0x57f3f9(0x1ae)]('timeLineBadge');_0x989ee5['innerHTML']='',_0x989ee5[_0x57f3f9(0x1d0)](_0x1410e1);for(let _0x4b44d4=0x0;_0x4b44d4<0x18;_0x4b44d4++){const _0x8c7498=document[_0x57f3f9(0x157)](_0x57f3f9(0x143));_0x8c7498[_0x57f3f9(0x118)]=_0x57f3f9(0x135);if(_0x4b44d4>0x0)_0x8c7498['innerHTML']=_0x57f3f9(0x12b)+String(_0x4b44d4)[_0x57f3f9(0xf7)](0x2,'0')+_0x57f3f9(0x1a8);_0x989ee5[_0x57f3f9(0x1d0)](_0x8c7498);}}function renderDayRange(_0x5dec02,_0x44e4ca){const _0x536475=a3_0x150249,_0x2d72f8=document[_0x536475(0x1ae)](_0x536475(0x1a3)),_0x30c2bb=document[_0x536475(0x1ae)](_0x536475(0x15a)),_0x18f1c3=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2895ef=new Date();_0x2895ef[_0x536475(0x13c)](0x0,0x0,0x0,0x0);const _0x166415=getLocalDateStr(new Date());for(let _0x5c14ed=_0x5dec02;_0x5c14ed<=_0x44e4ca;_0x5c14ed++){const _0x202dc5=new Date(_0x2895ef);_0x202dc5[_0x536475(0x132)](_0x202dc5['getDate']()+_0x5c14ed);const _0x5f4e33=getLocalDateStr(_0x202dc5);let _0x7f1fe6=_0x202dc5[_0x536475(0x15d)]()-0x1;if(_0x7f1fe6===-0x1)_0x7f1fe6=0x6;const _0x339f53=_0x5f4e33===_0x166415,_0x2631da=document['createElement'](_0x536475(0x143));_0x2631da['className']=_0x536475(0x148)+(_0x339f53?'today':''),_0x2631da['setAttribute']('data-date',_0x5f4e33),_0x2631da[_0x536475(0x153)]='<div\x20class=\x22dch-day\x22>'+_0x18f1c3[_0x7f1fe6]+_0x536475(0x1ad)+_0x202dc5[_0x536475(0x1c6)]()+_0x536475(0x140),_0x2d72f8['appendChild'](_0x2631da);const _0x5b84d8=document[_0x536475(0x157)](_0x536475(0x143));_0x5b84d8['className']=_0x536475(0x1bc)+(_0x339f53?_0x536475(0x1ed):''),_0x5b84d8[_0x536475(0x1cf)](_0x536475(0x199),_0x5f4e33),_0x5b84d8[_0x536475(0x1cf)]('data-day-idx',_0x7f1fe6),_0x30c2bb[_0x536475(0x1d0)](_0x5b84d8);}}function reRenderBlocks(){const _0xc2dbe1=a3_0x150249;document['querySelectorAll']('.day-column')[_0xc2dbe1(0x128)](_0x40fa2d=>{const _0x137095=_0xc2dbe1;_0x40fa2d[_0x137095(0x1a4)](_0x137095(0x15b))[_0x137095(0x128)](_0x3cc5de=>_0x3cc5de['remove']());const _0x513f5b=_0x40fa2d[_0x137095(0x14b)](_0x137095(0x199)),_0x365b29=parseInt(_0x40fa2d[_0x137095(0x14b)]('data-day-idx')),_0x554e6a=Math[_0x137095(0x1c2)](_0x40fa2d['offsetLeft']);(availabilityPattern[_0x365b29]||[])[_0x137095(0x128)](_0x1255ae=>{const _0x4cf884=_0x137095,_0x4d0ca9=document[_0x4cf884(0x157)](_0x4cf884(0x143));_0x4d0ca9['className']=_0x4cf884(0x1c1),_0x4d0ca9[_0x4cf884(0x163)][_0x4cf884(0xff)]=_0x1255ae*GRID_H+'px',_0x4d0ca9['style'][_0x4cf884(0x100)]='-'+_0x554e6a+'px\x20-'+_0x1255ae*GRID_H+'px',_0x40fa2d[_0x4cf884(0x1d0)](_0x4d0ca9);});if(specialRanges[_0x137095(0x1dc)]>0x0){const _0x14d875=new Date(_0x513f5b+'T00:00:00')[_0x137095(0x111)](),_0xe6298=new Date(_0x513f5b+_0x137095(0x188))[_0x137095(0x111)]();specialRanges[_0x137095(0x128)](_0x3ac085=>{const _0x3861bc=_0x137095,_0x6781d8=new Date(_0x3ac085[_0x3861bc(0x1b7)])['getTime'](),_0x227ff4=new Date(_0x3ac085[_0x3861bc(0x126)])[_0x3861bc(0x111)](),_0x2eba73=Math[_0x3861bc(0x1e3)](_0x14d875,_0x6781d8),_0x53f3ba=Math[_0x3861bc(0x156)](_0xe6298,_0x227ff4);if(_0x2eba73<_0x53f3ba){const _0x41ae76=(_0x2eba73-_0x14d875)/0x36ee80*GRID_H,_0x4a6d80=(_0x53f3ba-_0x2eba73)/0x36ee80*GRID_H,_0x109d88=document[_0x3861bc(0x157)](_0x3861bc(0x143));_0x4a6d80>=23.5*GRID_H?(_0x109d88[_0x3861bc(0x118)]=_0x3861bc(0x10d),_0x109d88['style'][_0x3861bc(0x100)]='-'+_0x554e6a+_0x3861bc(0x1b5)):(_0x109d88[_0x3861bc(0x118)]='blocked-range-part\x20stripe-bg',_0x109d88['style'][_0x3861bc(0xff)]=_0x41ae76+'px',_0x109d88['style']['height']=_0x4a6d80+'px',_0x109d88[_0x3861bc(0x163)][_0x3861bc(0x100)]='-'+_0x554e6a+'px\x20-'+_0x41ae76+'px'),_0x40fa2d[_0x3861bc(0x1d0)](_0x109d88);}});}renderEventsForColumn(_0x40fa2d,_0x513f5b);});}function renderEventsForColumn(_0x519dae,_0x36395d){const _0x1b599c=a3_0x150249,_0x49059b=sessions[_0x1b599c(0x1d3)](_0x1e1f20=>_0x1e1f20[_0x1b599c(0x119)]===_0x36395d),_0x205477=_0x49059b[_0x1b599c(0x12d)](_0x140507=>{const _0x2628be=_0x1b599c,[_0x2d0022,_0x5076de]=_0x140507[_0x2628be(0x1b7)][_0x2628be(0x1ea)](':')['map'](Number),[_0x58bd6b,_0x335c1c]=_0x140507[_0x2628be(0x126)][_0x2628be(0x1ea)](':')[_0x2628be(0x12d)](Number);return{'data':_0x140507,'start':_0x2d0022*0x3c+_0x5076de,'end':_0x58bd6b*0x3c+_0x335c1c,'colIndex':0x0};});_0x205477[_0x1b599c(0x14c)]((_0xe0c77d,_0x428f02)=>_0xe0c77d[_0x1b599c(0x1b7)]-_0x428f02['start']||_0x428f02['end']-_0x428f02[_0x1b599c(0x1b7)]-(_0xe0c77d[_0x1b599c(0x126)]-_0xe0c77d[_0x1b599c(0x1b7)]));const _0x35f585=[];_0x205477[_0x1b599c(0x128)](_0x5f17ab=>{const _0x4a4653=_0x1b599c;let _0x535835=![];for(let _0x2770e4=0x0;_0x2770e4<_0x35f585[_0x4a4653(0x1dc)];_0x2770e4++){const _0xca003c=_0x35f585[_0x2770e4];if(_0x5f17ab[_0x4a4653(0x1b7)]>=_0xca003c[_0xca003c[_0x4a4653(0x1dc)]-0x1]['end']){_0xca003c[_0x4a4653(0x167)](_0x5f17ab),_0x5f17ab['colIndex']=_0x2770e4,_0x535835=!![];break;}}!_0x535835&&(_0x35f585[_0x4a4653(0x167)]([_0x5f17ab]),_0x5f17ab[_0x4a4653(0x1bd)]=_0x35f585[_0x4a4653(0x1dc)]-0x1);}),_0x205477[_0x1b599c(0x128)](_0x352959=>{const _0x58c571=_0x1b599c;let _0x29700f=0x0;_0x205477[_0x58c571(0x128)](_0x591313=>{const _0x61a59=_0x58c571;if(Math[_0x61a59(0x1e3)](_0x352959[_0x61a59(0x1b7)],_0x591313[_0x61a59(0x1b7)])<Math['min'](_0x352959[_0x61a59(0x126)],_0x591313[_0x61a59(0x126)])&&_0x591313[_0x61a59(0x1bd)]>_0x29700f)_0x29700f=_0x591313['colIndex'];});const _0x11c3b5=_0x29700f+0x1,_0x486555=0x64/_0x11c3b5,_0x417afb=_0x352959[_0x58c571(0x1bd)]*_0x486555,_0x99053d=document[_0x58c571(0x157)](_0x58c571(0x143)),_0x27e337=_0x352959[_0x58c571(0x1b0)];let _0x5b29ba=_0x58c571(0x136);if(clients&&clients[_0x58c571(0x1dc)]>0x0){const _0x1418bd=clients[_0x58c571(0x1b2)](_0x14842a=>String(_0x14842a['id'])===String(_0x27e337[_0x58c571(0x186)]));if(_0x1418bd&&_0x1418bd[_0x58c571(0x16a)])_0x5b29ba=_0x1418bd['color'];}const _0x444662=_0x27e337['status']===_0x58c571(0x1d2),_0x101bd9=_0x444662?0x1:0.45;_0x99053d[_0x58c571(0x118)]='event-card'+(_0x444662?_0x58c571(0x18d):''),_0x99053d[_0x58c571(0x163)][_0x58c571(0x1b8)]=hexToRgba(_0x5b29ba,_0x101bd9),_0x99053d[_0x58c571(0x163)]['borderLeftColor']=_0x5b29ba;const _0x338aea=_0x352959[_0x58c571(0x1b7)]/0x3c*GRID_H,_0x24e5c0=(_0x352959[_0x58c571(0x126)]-_0x352959[_0x58c571(0x1b7)])/0x3c*GRID_H;_0x99053d[_0x58c571(0x163)][_0x58c571(0xff)]=_0x338aea+'px',_0x99053d[_0x58c571(0x163)][_0x58c571(0x1a0)]=Math['max'](_0x24e5c0,0x14)+'px',_0x99053d[_0x58c571(0x163)][_0x58c571(0x173)]='calc('+_0x486555+_0x58c571(0x1b3),_0x99053d['style']['left']=_0x58c571(0x180)+_0x417afb+'%\x20+\x202px)',_0x99053d[_0x58c571(0x163)][_0x58c571(0x133)]=0xa+_0x352959['colIndex'];if(_0x486555<0x55)_0x99053d[_0x58c571(0x192)][_0x58c571(0x190)]('mini');let _0xfb6a33='';if(_0x27e337['seriesId'])_0xfb6a33+=_0x58c571(0x1ab);if(_0x444662)_0xfb6a33+=_0x58c571(0x125);_0x99053d[_0x58c571(0x153)]=_0x58c571(0x10c)+_0x27e337[_0x58c571(0x1b7)]+'\x20-\x20'+_0x27e337[_0x58c571(0x126)]+_0x58c571(0x1eb)+_0xfb6a33+_0x58c571(0x1bb),_0x99053d[_0x58c571(0x15e)]=_0x252c6e=>{const _0x5930f0=_0x58c571;_0x252c6e[_0x5930f0(0x17e)](),openDetails(_0x27e337);},_0x519dae[_0x58c571(0x1d0)](_0x99053d);});}function openAnalytics(){const _0x5f3213=a3_0x150249,_0x399ac6=document['querySelector']('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x5f3213(0x137),_0x399ac6),openSheet(_0x5f3213(0x1a1));}function setAnalyticsPeriod(_0xe7ab88,_0x2bc2ed){const _0x594bc0=a3_0x150249;currentAnPeriod=_0xe7ab88,document[_0x594bc0(0x1a4)](_0x594bc0(0x1df))[_0x594bc0(0x128)](_0x5b31fe=>_0x5b31fe[_0x594bc0(0x192)][_0x594bc0(0x127)]('active'));if(_0x2bc2ed)_0x2bc2ed[_0x594bc0(0x192)]['add'](_0x594bc0(0x19c));const _0x481c2b=document['getElementById'](_0x594bc0(0x101));_0x481c2b[_0x594bc0(0x163)][_0x594bc0(0x189)]=_0xe7ab88==='custom'?_0x594bc0(0x103):_0x594bc0(0x112);const _0x5bb318=new Date();let _0x266174=new Date(),_0x268ada=new Date();if(_0xe7ab88==='week')_0x266174=getStartOfWeek(_0x5bb318),_0x268ada=new Date(_0x266174),_0x268ada[_0x594bc0(0x132)](_0x268ada[_0x594bc0(0x1c6)]()+0x6);else{if(_0xe7ab88===_0x594bc0(0x1b6))_0x266174=new Date(_0x5bb318[_0x594bc0(0x107)](),_0x5bb318[_0x594bc0(0x1ac)](),0x1),_0x268ada=new Date(_0x5bb318[_0x594bc0(0x107)](),_0x5bb318['getMonth']()+0x1,0x0);else{!document['getElementById'](_0x594bc0(0xfd))[_0x594bc0(0x13f)]&&(document[_0x594bc0(0x1ae)](_0x594bc0(0xfd))[_0x594bc0(0x13f)]=getLocalDateStr(_0x5bb318),document[_0x594bc0(0x1ae)](_0x594bc0(0x178))[_0x594bc0(0x13f)]=getLocalDateStr(_0x5bb318));refreshAnalytics();return;}}document[_0x594bc0(0x1ae)]('anStart')[_0x594bc0(0x13f)]=getLocalDateStr(_0x266174),document[_0x594bc0(0x1ae)](_0x594bc0(0x178))[_0x594bc0(0x13f)]=getLocalDateStr(_0x268ada),refreshAnalytics();}function refreshAnalytics(){const _0x8cae5b=a3_0x150249,_0x21bb99=document['getElementById'](_0x8cae5b(0xfd))[_0x8cae5b(0x13f)],_0x52ef81=document[_0x8cae5b(0x1ae)](_0x8cae5b(0x178))[_0x8cae5b(0x13f)];if(!_0x21bb99||!_0x52ef81)return;const _0x1d4eba=sessions[_0x8cae5b(0x1d3)](_0x76409d=>_0x76409d[_0x8cae5b(0x119)]>=_0x21bb99&&_0x76409d['dateStr']<=_0x52ef81&&_0x76409d[_0x8cae5b(0x197)]!==_0x8cae5b(0x114)),_0x22b674=_0x1d4eba[_0x8cae5b(0x1dc)],_0x2b0737=_0x1d4eba[_0x8cae5b(0x1d3)](_0x1c7ba5=>_0x1c7ba5[_0x8cae5b(0x197)]===_0x8cae5b(0x1d2))[_0x8cae5b(0x1dc)],_0x2752f7=_0x22b674>0x0?Math[_0x8cae5b(0x1c2)](_0x2b0737/_0x22b674*0x64):0x0;document['getElementById']('anPercent')[_0x8cae5b(0x17c)]=_0x2752f7+'%',document[_0x8cae5b(0x1ae)](_0x8cae5b(0x1e8))[_0x8cae5b(0x17c)]=_0x2b0737+_0x8cae5b(0x116)+_0x22b674+_0x8cae5b(0x12e);const _0x36613a=document[_0x8cae5b(0x1ae)](_0x8cae5b(0x193)),_0x4dbf02=0x2*Math['PI']*0x23,_0x5a79ac=_0x4dbf02-_0x2752f7/0x64*_0x4dbf02;_0x36613a[_0x8cae5b(0x163)][_0x8cae5b(0x113)]=_0x5a79ac;const _0x154931={};_0x1d4eba[_0x8cae5b(0x128)](_0x461491=>{const _0x8420ad=_0x8cae5b,_0x1a93d8=_0x461491[_0x8420ad(0xfc)]||_0x8420ad(0x1e9);if(!_0x154931[_0x1a93d8]){const _0x490df2='#'+_0x1a93d8[_0x8420ad(0x142)]()[_0x8420ad(0x11f)](0x0,0x6);_0x154931[_0x1a93d8]={'total':0x0,'done':0x0,'color':_0x490df2};}_0x154931[_0x1a93d8][_0x8420ad(0x161)]++;if(_0x461491[_0x8420ad(0x197)]===_0x8420ad(0x1d2))_0x154931[_0x1a93d8][_0x8420ad(0x1ba)]++;});const _0x11fe3c=document['getElementById'](_0x8cae5b(0x147));_0x11fe3c[_0x8cae5b(0x153)]='';const _0x4f4da4=Object[_0x8cae5b(0x1cc)](_0x154931)[_0x8cae5b(0x14c)]((_0x3ba31a,_0x35403a)=>_0x35403a[0x1][_0x8cae5b(0x161)]-_0x3ba31a[0x1][_0x8cae5b(0x161)]);if(_0x4f4da4[_0x8cae5b(0x1dc)]===0x0){_0x11fe3c[_0x8cae5b(0x153)]=_0x8cae5b(0x17f);return;}_0x4f4da4[_0x8cae5b(0x128)](([_0x86bb7f,_0xa2189d])=>{const _0xb04734=_0x8cae5b,_0x211e4f=Math[_0xb04734(0x1c2)](_0xa2189d[_0xb04734(0x1ba)]/_0xa2189d[_0xb04734(0x161)]*0x64),_0x3ac5ca=document[_0xb04734(0x157)](_0xb04734(0x143));_0x3ac5ca['className']='client-stat-card',_0x3ac5ca[_0xb04734(0x163)][_0xb04734(0x19d)]=_0xa2189d[_0xb04734(0x16a)],_0x3ac5ca[_0xb04734(0x153)]=_0xb04734(0x14f)+_0x86bb7f['substr'](0x0,0x5)+_0xb04734(0x11c)+_0xa2189d[_0xb04734(0x1ba)]+_0xb04734(0x170)+_0xa2189d[_0xb04734(0x161)]+_0xb04734(0x1e2)+_0x211e4f+_0xb04734(0x198),_0x11fe3c[_0xb04734(0x1d0)](_0x3ac5ca);});}function openDetails(_0x16c710){const _0x4c6547=a3_0x150249;currentSession=_0x16c710;const _0x2180e0=new Date(_0x16c710['dateStr']),_0x3d3e8e=_0x2180e0[_0x4c6547(0x19b)]('ru-RU',{'weekday':_0x4c6547(0x106),'day':_0x4c6547(0x187),'month':_0x4c6547(0x106)});document[_0x4c6547(0x1ae)]('detDate')[_0x4c6547(0x17c)]=_0x3d3e8e[_0x4c6547(0x191)](0x0)[_0x4c6547(0x13d)]()+_0x3d3e8e[_0x4c6547(0x11d)](0x1),document['getElementById'](_0x4c6547(0x1d9))[_0x4c6547(0x17c)]=_0x16c710[_0x4c6547(0x1b7)]+'\x20-\x20'+_0x16c710[_0x4c6547(0x126)],document[_0x4c6547(0x1ae)](_0x4c6547(0x1a5))[_0x4c6547(0x17c)]=_0x16c710[_0x4c6547(0x1f5)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x1f9b5a=document['getElementById'](_0x4c6547(0x10e)),_0x23f4c4=document[_0x4c6547(0x1ae)]('cancelContainer'),_0x56ab53=_0x23f4c4[_0x4c6547(0x183)](_0x4c6547(0x1ee)),_0xc99c5a=_0x23f4c4[_0x4c6547(0x183)](_0x4c6547(0x104)),_0x4f41bf=document[_0x4c6547(0x1ae)]('cancelHint');if(_0x16c710[_0x4c6547(0x197)]===_0x4c6547(0x1d2))_0x1f9b5a[_0x4c6547(0x17c)]=_0x4c6547(0x164),_0x1f9b5a[_0x4c6547(0x163)][_0x4c6547(0x16a)]=_0x4c6547(0x175),_0x23f4c4[_0x4c6547(0x163)][_0x4c6547(0x189)]=_0x4c6547(0x112);else{_0x1f9b5a['textContent']=_0x4c6547(0x158),_0x1f9b5a[_0x4c6547(0x163)][_0x4c6547(0x16a)]=_0x4c6547(0x1af),_0x23f4c4[_0x4c6547(0x163)][_0x4c6547(0x189)]=_0x4c6547(0x12a);const _0x423464=new Date(_0x16c710[_0x4c6547(0x119)]+'T'+_0x16c710[_0x4c6547(0x1b7)]),_0x282f0f=new Date(),_0x5c9e6d=(_0x423464-_0x282f0f)/(0x3e8*0x3c*0x3c),_0x5ea789=coachProfiles[_0x16c710[_0x4c6547(0xfc)]]&&coachProfiles[_0x16c710['coachId']][_0x4c6547(0x123)]?parseInt(coachProfiles[_0x16c710[_0x4c6547(0xfc)]][_0x4c6547(0x123)]):0x18;if(_0x5ea789===0x0||_0x5c9e6d>=_0x5ea789)_0x56ab53['style']['display']=_0x4c6547(0x12a),_0xc99c5a[_0x4c6547(0x163)][_0x4c6547(0x189)]=_0x4c6547(0x12a),_0x4f41bf[_0x4c6547(0x163)][_0x4c6547(0x189)]=_0x4c6547(0x112);else{_0x56ab53[_0x4c6547(0x163)][_0x4c6547(0x189)]=_0x4c6547(0x112),_0xc99c5a['style'][_0x4c6547(0x189)]=_0x4c6547(0x112),_0x4f41bf[_0x4c6547(0x163)][_0x4c6547(0x189)]=_0x4c6547(0x12a);let _0x4c8787=_0x5ea789===0x0?_0x4c6547(0x108):_0x4c6547(0x1d7)+_0x5ea789+_0x4c6547(0x145);_0x4f41bf[_0x4c6547(0x17c)]=_0x4c6547(0xfa)+_0x4c8787+_0x4c6547(0x16b);}}document['getElementById']('overlay')[_0x4c6547(0x192)][_0x4c6547(0x190)](_0x4c6547(0x19c)),document['getElementById']('detailsSheet')[_0x4c6547(0x192)][_0x4c6547(0x190)](_0x4c6547(0x1c0));}function a3_0x3df0(){const _0x316eb9=['loadLocal','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','pattern','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','day-off-overlay\x20stripe-bg','detStatus','ranges','.day-column','getTime','none','strokeDashoffset','cancelled','now','\x20–∏–∑\x20','constructor','className','dateStr','expand','test','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','slice','join','substr','initDataUnsafe','rsDatesTrack','254432icCZdx','cancel_window','rsSlotsGrid','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','end','remove','forEach','router.html','block','<span>','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','map','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','client_cancel','keys','stringify','setDate','zIndex','BackButton','time-label','#0a84ff','week','getMinutes','667197xMeyxj','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','#050505','setHours','toUpperCase','ru-RU','value','</div>','parse','toString','div','POST','\x20—á.','172242zaVqLW','analyticsList','day-col-header\x20','.day-col-header','toast','getAttribute','sort','sid','data-day-idx','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','offsetLeft','json','then','innerHTML','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','firstChild','min','createElement','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','#ff453a','gridColumns','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','1799rouAzw','getDay','onclick','calendar','scrollLeft','total','log','style','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','scrollTo','push','setBackgroundColor','v9.5-CLIENT-ANALYTICS','color','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','getHours','timeLineBadge','syncLoad','initData','</span>\x20/\x20','6616WQwPsX','customConfirm','width','overlay','var(--acc-green)','planned','exceptions','anEnd','600','rs-time-btn','rescheduleSheet','textContent','189079lPCdGo','stopPropagation','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','calc(','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','Telegram','querySelector','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','floor','clientId','numeric','T23:59:59','display','–û—Ç–º–µ–Ω–µ–Ω–æ','user','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','\x20status-completed','insertBefore','.sheet','add','charAt','classList','anDonutCircle','<div\x20class=\x22dch-day\x22>','2bspxPK','toLocaleString','status','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','data-date','onClick','toLocaleDateString','active','borderLeftColor','WebApp','headerMonth','height','analyticsSheet','get_slots','daysHeaderTrack','querySelectorAll','detNote','722334uSZglr','offsetWidth',':00</span>','rs-date-chip','auto','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','getMonth','</div><div\x20class=\x22dch-num\x22>','getElementById','var(--acc-blue)','data','.day-col-header[data-date=\x22','find','%\x20-\x204px)','coach_profiles','px\x200px','month','start','backgroundColor','href','done','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','day-column\x20','colIndex','settings','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','open','blocked-slot\x20stripe-bg','round','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','offClick','button','getDate','fontWeight','370XxFfQo','setItem','(((.+)+)+)+$','show','entries','detailsSheet','isArray','setAttribute','appendChild','uc_client_list','completed','filter','Error\x20setting\x20back\x20button:','clients','client_load','–∑–∞\x20','findIndex','detTime','matrixViewport','211796XKPiWq','length','uc_client_settings','createDocumentFragment','.period-switch\x20.p-btn','ccTitle','ready','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','max','substring','error','uc_client_sessions','clientWidth','anTotalStats','Unknown','split','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','globalTimeLine','today','.btn-cancel','setHeaderColor','getItem','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','apply','search','note','visible','padStart','</div><div\x20class=\x22rs-day-num\x22>','ccYesBtn','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','disableVerticalSwipes','coachId','anStart','startsWith','top','backgroundPosition','anCustomDates','addEventListener','flex','.btn-reschedule','5IswUjJ','long','getFullYear','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è'];a3_0x3df0=function(){return _0x316eb9;};return a3_0x3df0();}function closeAllSheets(){const _0x2b591d=a3_0x150249;document[_0x2b591d(0x1ae)](_0x2b591d(0x174))[_0x2b591d(0x192)][_0x2b591d(0x127)](_0x2b591d(0x19c)),document[_0x2b591d(0x1a4)](_0x2b591d(0x18f))['forEach'](_0xde8435=>_0xde8435[_0x2b591d(0x192)][_0x2b591d(0x127)](_0x2b591d(0x1c0)));}function openSheet(_0x361c3a){const _0x473ac2=a3_0x150249;document[_0x473ac2(0x1ae)](_0x473ac2(0x174))['classList'][_0x473ac2(0x190)](_0x473ac2(0x19c)),document[_0x473ac2(0x1ae)](_0x361c3a)['classList'][_0x473ac2(0x190)]('open');}function getLocalDateStr(_0x8b4893){const _0x3cde0d=a3_0x150249,_0x1bdf5e=_0x8b4893[_0x3cde0d(0x107)](),_0x543ccf=String(_0x8b4893[_0x3cde0d(0x1ac)]()+0x1)[_0x3cde0d(0xf7)](0x2,'0'),_0x3bec87=String(_0x8b4893[_0x3cde0d(0x1c6)]())['padStart'](0x2,'0');return _0x1bdf5e+'-'+_0x543ccf+'-'+_0x3bec87;}function getStartOfWeek(_0x4498ff){const _0x5ca23c=a3_0x150249,_0x35147b=new Date(_0x4498ff),_0x508312=_0x35147b[_0x5ca23c(0x15d)](),_0x2082e6=_0x35147b[_0x5ca23c(0x1c6)]()-_0x508312+(_0x508312===0x0?-0x6:0x1);return _0x35147b[_0x5ca23c(0x132)](_0x2082e6),_0x35147b[_0x5ca23c(0x13c)](0x0,0x0,0x0,0x0),_0x35147b;}function scrollToToday(){const _0x1810b3=getLocalDateStr(new Date());setTimeout(()=>{const _0x282a70=a3_0x36ec,_0x836d39=document[_0x282a70(0x183)](_0x282a70(0x1b1)+_0x1810b3+'\x22]');if(_0x836d39){const _0x455dd3=document[_0x282a70(0x1ae)]('matrixViewport'),_0x1adde8=_0x836d39[_0x282a70(0x150)]-_0x455dd3['clientWidth']/0x2+_0x836d39[_0x282a70(0x1a7)]/0x2;_0x455dd3[_0x282a70(0x166)]({'left':_0x1adde8,'behavior':_0x282a70(0x1aa)}),_0x455dd3['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x3fb5b7=a3_0x150249,_0x1297f8=new Date(),_0x25861a=document[_0x3fb5b7(0x1ae)](_0x3fb5b7(0x1ec)),_0x221b3b=document[_0x3fb5b7(0x1ae)](_0x3fb5b7(0x16d)),_0x207062=(_0x1297f8[_0x3fb5b7(0x16c)]()*0x3c+_0x1297f8[_0x3fb5b7(0x138)]())/0x3c*GRID_H;_0x25861a['style']['top']=_0x207062+'px',_0x25861a[_0x3fb5b7(0x163)][_0x3fb5b7(0x189)]=_0x3fb5b7(0x12a),_0x221b3b[_0x3fb5b7(0x163)][_0x3fb5b7(0xff)]=_0x207062+'px',_0x221b3b[_0x3fb5b7(0x163)][_0x3fb5b7(0x189)]='block',_0x221b3b[_0x3fb5b7(0x17c)]=String(_0x1297f8[_0x3fb5b7(0x16c)]())['padStart'](0x2,'0')+':'+String(_0x1297f8[_0x3fb5b7(0x138)]())[_0x3fb5b7(0xf7)](0x2,'0');}function onScroll(){const _0x328524=a3_0x150249,_0x4c55d4=document['getElementById']('matrixViewport'),_0x209124=document[_0x328524(0x1a4)](_0x328524(0x149));for(let _0x146d05 of _0x209124)if(_0x146d05[_0x328524(0x150)]>=_0x4c55d4[_0x328524(0x160)]){const _0x2da4c0=new Date(_0x146d05[_0x328524(0x14b)](_0x328524(0x199)));document[_0x328524(0x1ae)](_0x328524(0x19f))['textContent']=_0x2da4c0[_0x328524(0x196)]('ru',{'month':_0x328524(0x106)})[_0x328524(0x13d)]()+'\x20'+_0x2da4c0[_0x328524(0x107)]();break;}}function showToast(_0x197b15){const _0x1561f0=a3_0x150249,_0x3b2a5e=document[_0x1561f0(0x1ae)](_0x1561f0(0x14a));_0x3b2a5e[_0x1561f0(0x17c)]=_0x197b15,_0x3b2a5e[_0x1561f0(0x192)][_0x1561f0(0x190)](_0x1561f0(0x1cb)),setTimeout(()=>_0x3b2a5e[_0x1561f0(0x192)][_0x1561f0(0x127)](_0x1561f0(0x1cb)),0x7d0);}function handleInfiniteScroll(){const _0x2f8b2e=a3_0x150249,_0x39c1af=document[_0x2f8b2e(0x1ae)]('matrixViewport'),_0x196a87=_0x39c1af[_0x2f8b2e(0x160)],_0x195cdb=_0x39c1af['scrollWidth'],_0x55348a=_0x39c1af[_0x2f8b2e(0x1e7)];if(_0x195cdb-(_0x196a87+_0x55348a)<0x12c){const _0x7fd5cc=endOffset;endOffset+=0xe,renderDayRange(_0x7fd5cc+0x1,endOffset),reRenderBlocks();}if(_0x196a87<0x12c){const _0x4a2965=startOffset;startOffset-=0xe,prependDays(startOffset,_0x4a2965-0x1),_0x39c1af[_0x2f8b2e(0x160)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x57e84a,_0x4943bb){const _0x41b98b=a3_0x150249,_0x4cad67=document[_0x41b98b(0x1ae)](_0x41b98b(0x1a3)),_0x8c3ba6=document['getElementById'](_0x41b98b(0x15a)),_0x14e6f8=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2e36a1=new Date();_0x2e36a1[_0x41b98b(0x13c)](0x0,0x0,0x0,0x0);const _0x48196b=getLocalDateStr(new Date()),_0x3af85a=document[_0x41b98b(0x1de)](),_0x112a42=document[_0x41b98b(0x1de)]();for(let _0x418b74=_0x57e84a;_0x418b74<=_0x4943bb;_0x418b74++){const _0x5493a2=new Date(_0x2e36a1);_0x5493a2[_0x41b98b(0x132)](_0x5493a2[_0x41b98b(0x1c6)]()+_0x418b74);const _0x3c88a0=getLocalDateStr(_0x5493a2);let _0x46458b=_0x5493a2[_0x41b98b(0x15d)]()-0x1;if(_0x46458b===-0x1)_0x46458b=0x6;const _0x546bc2=_0x3c88a0===_0x48196b,_0x36923d=document[_0x41b98b(0x157)](_0x41b98b(0x143));_0x36923d[_0x41b98b(0x118)]=_0x41b98b(0x148)+(_0x546bc2?'today':''),_0x36923d[_0x41b98b(0x1cf)](_0x41b98b(0x199),_0x3c88a0),_0x36923d['innerHTML']=_0x41b98b(0x194)+_0x14e6f8[_0x46458b]+'</div><div\x20class=\x22dch-num\x22>'+_0x5493a2[_0x41b98b(0x1c6)]()+_0x41b98b(0x140),_0x3af85a[_0x41b98b(0x1d0)](_0x36923d);const _0x1bbd33=document[_0x41b98b(0x157)](_0x41b98b(0x143));_0x1bbd33[_0x41b98b(0x118)]='day-column\x20'+(_0x546bc2?_0x41b98b(0x1ed):''),_0x1bbd33[_0x41b98b(0x1cf)](_0x41b98b(0x199),_0x3c88a0),_0x1bbd33[_0x41b98b(0x1cf)](_0x41b98b(0x14e),_0x46458b),_0x112a42[_0x41b98b(0x1d0)](_0x1bbd33);}_0x4cad67[_0x41b98b(0x18e)](_0x3af85a,_0x4cad67[_0x41b98b(0x155)]),_0x8c3ba6[_0x41b98b(0x18e)](_0x112a42,_0x8c3ba6['querySelector'](_0x41b98b(0x110)));}function hexToRgba(_0x184969,_0x311ea1){const _0x1295e9=a3_0x150249;let _0x4f4d02;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x1295e9(0x11b)](_0x184969))return _0x4f4d02=_0x184969[_0x1295e9(0x1e4)](0x1)[_0x1295e9(0x1ea)](''),_0x4f4d02[_0x1295e9(0x1dc)]==0x3&&(_0x4f4d02=[_0x4f4d02[0x0],_0x4f4d02[0x0],_0x4f4d02[0x1],_0x4f4d02[0x1],_0x4f4d02[0x2],_0x4f4d02[0x2]]),_0x4f4d02='0x'+_0x4f4d02[_0x1295e9(0x11e)](''),'rgba('+[_0x4f4d02>>0x10&0xff,_0x4f4d02>>0x8&0xff,_0x4f4d02&0xff][_0x1295e9(0x11e)](',')+','+_0x311ea1+')';return'rgba(10,\x20132,\x20255,\x20'+_0x311ea1+')';}let confirmResolver=null;function showCustomConfirm(_0x2f9ae4,_0x6e133b,_0x5ad949=!![]){const _0x255d28=a3_0x150249;document['getElementById'](_0x255d28(0x1e0))[_0x255d28(0x17c)]=_0x2f9ae4,document[_0x255d28(0x1ae)]('ccText')[_0x255d28(0x17c)]=_0x6e133b;const _0x2cbbbd=document[_0x255d28(0x1ae)](_0x255d28(0xf9));return _0x5ad949?(_0x2cbbbd[_0x255d28(0x163)][_0x255d28(0x16a)]=_0x255d28(0x159),_0x2cbbbd[_0x255d28(0x163)][_0x255d28(0x1c7)]='600'):(_0x2cbbbd[_0x255d28(0x163)][_0x255d28(0x16a)]=_0x255d28(0x136),_0x2cbbbd[_0x255d28(0x163)][_0x255d28(0x1c7)]=_0x255d28(0x179)),new Promise(_0x28516d=>{const _0x4ff17f=_0x255d28;confirmResolver=_0x28516d,document[_0x4ff17f(0x1ae)]('customConfirm')[_0x4ff17f(0x192)]['add'](_0x4ff17f(0x1f6));});}function resolveCustomConfirm(_0x2f9786){const _0x52e312=a3_0x150249;document['getElementById'](_0x52e312(0x172))[_0x52e312(0x192)][_0x52e312(0x127)]('visible');if(confirmResolver)confirmResolver(_0x2f9786);}async function tryCancelCurrentSession(){const _0x30e414=a3_0x150249;if(!currentSession)return;const _0x49cc08=await showCustomConfirm(_0x30e414(0x1bf),_0x30e414(0x1c3),!![]);if(!_0x49cc08)return;const _0x241568=currentSession;closeAllSheets(),sessions=sessions[_0x30e414(0x1d3)](_0xdbca46=>_0xdbca46['id']!==_0x241568['id']),reRenderBlocks(),showToast(_0x30e414(0x18a)),lastUserActionTime=Date[_0x30e414(0x115)]();try{const _0x35e400=window[_0x30e414(0x182)]?.[_0x30e414(0x19e)],_0x239817=await fetch(API_URL,{'method':_0x30e414(0x144),'body':JSON[_0x30e414(0x131)]({'action':_0x30e414(0x12f),'init_data':_0x35e400?.[_0x30e414(0x16f)]||'','coachId':_0x241568[_0x30e414(0xfc)],'dateStr':_0x241568[_0x30e414(0x119)],'sessionId':_0x241568['id']})});if(_0x239817['ok'])DataManager['saveLocally']();}catch(_0x3d4498){showToast(_0x30e414(0x165));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xc9de08=a3_0x150249;if(!currentSession)return;document[_0xc9de08(0x1ae)](_0xc9de08(0x1cd))[_0xc9de08(0x192)][_0xc9de08(0x127)]('open'),document['getElementById'](_0xc9de08(0x17b))['classList']['add'](_0xc9de08(0x1c0));const _0x4fed41=document[_0xc9de08(0x1ae)](_0xc9de08(0x121)),_0x28a396=document['getElementById'](_0xc9de08(0x124));_0x4fed41[_0xc9de08(0x153)]='',_0x28a396[_0xc9de08(0x153)]=_0xc9de08(0x13a);const [_0x4802db,_0x1f8f3e]=currentSession['start'][_0xc9de08(0x1ea)](':')[_0xc9de08(0x12d)](Number),[_0x4c9378,_0x278e3e]=currentSession[_0xc9de08(0x126)][_0xc9de08(0x1ea)](':')['map'](Number),_0xe0b27=_0x4c9378*0x3c+_0x278e3e-(_0x4802db*0x3c+_0x1f8f3e);try{const _0x429fd9=window['Telegram']?.[_0xc9de08(0x19e)],_0x252ec6=await fetch(API_URL,{'method':'POST','body':JSON[_0xc9de08(0x131)]({'action':_0xc9de08(0x1a2),'coachId':currentSession[_0xc9de08(0xfc)],'duration':_0xe0b27,'init_data':_0x429fd9?.[_0xc9de08(0x16f)]||'','excludeSessionId':currentSession['id']})}),_0x1fe66e=await _0x252ec6['json']();_0x1fe66e['ok']&&_0x1fe66e['data']?(availableSlotsCache=_0x1fe66e[_0xc9de08(0x1b0)],renderRescheduleDates()):_0x28a396[_0xc9de08(0x153)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x14c642){_0x28a396[_0xc9de08(0x153)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x109a1f=a3_0x150249,_0x3fed78=document[_0x109a1f(0x1ae)](_0x109a1f(0x121));_0x3fed78['innerHTML']='';const _0x33f755=Object['keys'](availableSlotsCache)[_0x109a1f(0x14c)](),_0x162dbc=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x33f755[_0x109a1f(0x1dc)]===0x0){document[_0x109a1f(0x1ae)](_0x109a1f(0x124))[_0x109a1f(0x153)]=_0x109a1f(0x184);return;}_0x33f755[_0x109a1f(0x128)]((_0x156568,_0x115c14)=>{const _0x45c1fa=_0x109a1f,_0x268ebd=new Date(_0x156568),_0x2e14f0=_0x162dbc[_0x268ebd[_0x45c1fa(0x15d)]()],_0x476dcd=_0x268ebd[_0x45c1fa(0x1c6)](),_0x49ad04=document[_0x45c1fa(0x157)](_0x45c1fa(0x143));_0x49ad04[_0x45c1fa(0x118)]=_0x45c1fa(0x1a9);if(_0x115c14===0x0)_0x49ad04['classList']['add'](_0x45c1fa(0x19c));_0x49ad04[_0x45c1fa(0x153)]='<div\x20class=\x22rs-day-name\x22>'+_0x2e14f0+_0x45c1fa(0xf8)+_0x476dcd+_0x45c1fa(0x140),_0x49ad04[_0x45c1fa(0x15e)]=()=>selectRsDate(_0x156568,_0x49ad04),_0x3fed78[_0x45c1fa(0x1d0)](_0x49ad04);}),selectRsDate(_0x33f755[0x0],_0x3fed78[_0x109a1f(0x155)]);}function selectRsDate(_0x5cee33,_0x4ad895){const _0x2afacb=a3_0x150249;selectedRsDate=_0x5cee33,document[_0x2afacb(0x1a4)]('.rs-date-chip')[_0x2afacb(0x128)](_0x108cd6=>_0x108cd6[_0x2afacb(0x192)][_0x2afacb(0x127)]('active'));if(_0x4ad895)_0x4ad895['classList'][_0x2afacb(0x190)](_0x2afacb(0x19c));const _0x24637f=document[_0x2afacb(0x1ae)]('rsSlotsGrid');_0x24637f['innerHTML']='';const _0x5f2f5c=availableSlotsCache[_0x5cee33]||[];if(_0x5f2f5c['length']===0x0){_0x24637f['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x5f2f5c[_0x2afacb(0x128)](_0x176426=>{const _0x2b5699=_0x2afacb,_0x42ae1b=document[_0x2b5699(0x157)](_0x2b5699(0x1c5));_0x42ae1b[_0x2b5699(0x118)]=_0x2b5699(0x17a),_0x42ae1b[_0x2b5699(0x17c)]=_0x176426,_0x42ae1b[_0x2b5699(0x15e)]=()=>confirmReschedule(_0x176426),_0x24637f[_0x2b5699(0x1d0)](_0x42ae1b);});}async function confirmReschedule(_0x521da5){const _0xb55b12=a3_0x150249,_0x174498=new Date(selectedRsDate),_0x5a1b6b=_0x174498['toLocaleDateString'](_0xb55b12(0x13e),{'day':'numeric','month':_0xb55b12(0x106)}),_0x3e0b00=await showCustomConfirm(_0xb55b12(0x12c),_0xb55b12(0x10a)+_0x5a1b6b+'\x20–≤\x20'+_0x521da5+'?',![]);if(!_0x3e0b00)return;closeAllSheets(),showToast(_0xb55b12(0x1f1)),lastUserActionTime=Date[_0xb55b12(0x115)]();const _0x4630fe=currentSession['dateStr'],_0x451b5a=currentSession['id'],[_0x5a7d62,_0x2ca338]=currentSession[_0xb55b12(0x1b7)][_0xb55b12(0x1ea)](':')['map'](Number),[_0x65325,_0x2914bb]=currentSession[_0xb55b12(0x126)][_0xb55b12(0x1ea)](':')[_0xb55b12(0x12d)](Number),_0x986484=_0x65325*0x3c+_0x2914bb-(_0x5a7d62*0x3c+_0x2ca338),[_0x2603d7,_0x4f177c]=_0x521da5[_0xb55b12(0x1ea)](':')[_0xb55b12(0x12d)](Number),_0x158077=_0x2603d7*0x3c+_0x4f177c+_0x986484,_0x4c72d3=Math[_0xb55b12(0x185)](_0x158077/0x3c),_0x4d5694=_0x158077%0x3c,_0x4a1036=String(_0x4c72d3)[_0xb55b12(0xf7)](0x2,'0')+':'+String(_0x4d5694)['padStart'](0x2,'0'),_0x44173d=sessions[_0xb55b12(0x1d8)](_0x4a19db=>_0x4a19db['id']===_0x451b5a);_0x44173d!==-0x1&&(sessions[_0x44173d]['dateStr']=selectedRsDate,sessions[_0x44173d][_0xb55b12(0x1b7)]=_0x521da5,sessions[_0x44173d][_0xb55b12(0x126)]=_0x4a1036,reRenderBlocks());try{const _0x4af603=window[_0xb55b12(0x182)]?.[_0xb55b12(0x19e)],_0x5cf0c0=await fetch(API_URL,{'method':_0xb55b12(0x144),'body':JSON[_0xb55b12(0x131)]({'action':'reschedule','init_data':_0x4af603?.[_0xb55b12(0x16f)]||'','oldSessionId':_0x451b5a,'oldDate':_0x4630fe,'newDate':selectedRsDate,'newTime':_0x521da5,'coachId':currentSession[_0xb55b12(0xfc)]})}),_0x5b291b=await _0x5cf0c0[_0xb55b12(0x151)]();!_0x5b291b['ok']?(showToast(_0xb55b12(0x181)),DataManager['syncLoad']()):(showToast(_0xb55b12(0x18c)),DataManager['saveLocally']());}catch(_0x2138a7){showToast(_0xb55b12(0x165));}}document[a3_0x150249(0x102)]('DOMContentLoaded',init);