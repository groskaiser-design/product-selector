const a3_0x21b8ca=a3_0x2f45;(function(_0x5bbdd8,_0x4e1ccd){const _0x124470=a3_0x2f45,_0x57a704=_0x5bbdd8();while(!![]){try{const _0x11bbed=parseInt(_0x124470(0x75))/0x1*(parseInt(_0x124470(0x90))/0x2)+parseInt(_0x124470(0xcb))/0x3+-parseInt(_0x124470(0xa2))/0x4*(parseInt(_0x124470(0xff))/0x5)+parseInt(_0x124470(0xb4))/0x6+-parseInt(_0x124470(0xd0))/0x7*(parseInt(_0x124470(0xee))/0x8)+-parseInt(_0x124470(0x87))/0x9*(parseInt(_0x124470(0xea))/0xa)+parseInt(_0x124470(0x11a))/0xb;if(_0x11bbed===_0x4e1ccd)break;else _0x57a704['push'](_0x57a704['shift']());}catch(_0x1eafc4){_0x57a704['push'](_0x57a704['shift']());}}}(a3_0x4be2,0x8684c));const APP_VERSION=a3_0x21b8ca(0x13b),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS=a3_0x21b8ca(0xad),KEY_CLIENTS=a3_0x21b8ca(0x10d);function a3_0x4be2(){const _0x349d04=['.btn-cancel','user','textContent','getHours','slice','coachId','day-col-header\x20','detNote','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','.sheet','.day-col-header[data-date=\x22','globalTimeLine','18030XRpSEZ','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','backgroundPosition','long','8557992iCbKxQ','data','settings','\x20–∏–∑\x20','filter','setBackgroundColor','Critical\x20TMA\x20Error:','open','get_slots','Telegram','none','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','ru-RU','reschedule','fontWeight','cancelHint','data-date','255685sovawN','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','daysHeaderTrack','findIndex','style','rgba(','setItem','sid','syncLoad','day-off-overlay\x20stripe-bg','cancelContainer','cancel_window','day-column\x20','button','uc_client_list','offsetWidth','getFullYear','anDonutCircle','time-label','getAttribute','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','cancelled','BackButton','getMonth','setDate','planned','color','10899548YYUDfo','top','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','<div\x20class=\x22dch-day\x22>','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','auto','px\x20-','querySelector','WebApp','getMinutes','appendChild','.rs-date-chip','overlay','ccYesBtn','anStart','note','#ff453a','toString','width','sort','join','ranges','rgba(10,\x20132,\x20255,\x20','createElement','Error\x20setting\x20color:','600','scrollTop','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','div','.period-switch\x20.p-btn','height','.day-col-header','onClick','v9.5-CLIENT-ANALYTICS','insertBefore','</span>\x20/\x20','<span>','status','today','value','test','initDataUnsafe','week','headerMonth','min','rsSlotsGrid','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','disableVerticalSwipes','getDate','rescheduleSheet','ccText','seriesId','setMonth','floor','detailsSheet','analyticsSheet','matrixViewport','detStatus','.btn-reschedule','href','coach_profiles','\x20-\x20','detDate','firstChild','data-day-idx','</div>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','offsetLeft','clientWidth','analyticsList','addEventListener','apply','isArray','scrollLeft','offClick','setAttribute','blocked-slot\x20stripe-bg','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','3GXINvu','rsDatesTrack','setHours','clients','flex','max','parse','error','saveLocally','length','colIndex','pattern','find','anTotalStats','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','applyData','onclick','json','3879tWIpuQ','show','classList','end','innerHTML','(((.+)+)+)+$','entries','getDay','map','499126MZCccy','block','search','calc(','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','initData','split','add','dateStr','push','cid','POST','Error\x20setting\x20back\x20button:','calendar','now','timeColumn','display','var(--acc-green)','20MZhzLj','completed','blocked-range-part\x20stripe-bg','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','forEach','total','anPercent','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','#050505','uc_client_settings','then','scrollWidth','createDocumentFragment','timeLineBadge','querySelectorAll','borderLeftColor','1160454XwGJEf','exceptions','–û—Ç–º–µ–Ω–µ–Ω–æ','gridColumns','%\x20+\x202px)','stopPropagation','getTime','toLocaleDateString','router.html','mini','done','getElementById','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','\x20—á.','log','active','.day-column','visible','className','</div><div\x20class=\x22rs-day-num\x22>','padStart','scrollTo','location','2161647uQkDYa','round','#0a84ff','charAt','numeric','7iHSXZe','client-stat-card','</div><div\x20class=\x22dch-num\x22>','stringify','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','Unknown','client_load','start','remove','<div\x20class=\x22rs-day-name\x22>','anEnd','toUpperCase','var(--acc-blue)','ccTitle'];a3_0x4be2=function(){return _0x349d04;};return a3_0x4be2();}let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x21b8ca(0x144),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x5058f3=a3_0x21b8ca,_0x1d721b=(function(){let _0x577e50=!![];return function(_0x1cd10b,_0x3bee85){const _0xac226a=_0x577e50?function(){const _0x5a84be=a3_0x2f45;if(_0x3bee85){const _0x39e4a4=_0x3bee85[_0x5a84be(0x6d)](_0x1cd10b,arguments);return _0x3bee85=null,_0x39e4a4;}}:function(){};return _0x577e50=![],_0xac226a;};}()),_0xa712a5=_0x1d721b(this,function(){const _0xebe0a8=a3_0x2f45;return _0xa712a5['toString']()[_0xebe0a8(0x92)](_0xebe0a8(0x8c))[_0xebe0a8(0x12b)]()['constructor'](_0xa712a5)[_0xebe0a8(0x92)]('(((.+)+)+)+$');});_0xa712a5();try{const _0x3eff27=window[_0x5058f3(0xf7)]?.[_0x5058f3(0x122)];if(!_0x3eff27)return;_0x3eff27['ready'](),_0x3eff27['expand']();try{_0x3eff27['setHeaderColor'](_0x5058f3(0xac)),_0x3eff27['setBackgroundColor']&&_0x3eff27[_0x5058f3(0xf3)](_0x5058f3(0xac));}catch(_0x5e238d){console['log'](_0x5058f3(0x132),_0x5e238d);}try{_0x3eff27['BackButton']&&(_0x3eff27[_0x5058f3(0x115)]['show'](),_0x3eff27[_0x5058f3(0x115)][_0x5058f3(0x70)](),_0x3eff27[_0x5058f3(0x115)][_0x5058f3(0x13a)](function(){const _0x23cc9a=_0x5058f3;window[_0x23cc9a(0xca)][_0x23cc9a(0x155)]=_0x23cc9a(0xbc);}));}catch(_0x771f19){console['log'](_0x5058f3(0x9c),_0x771f19);}try{if(_0x3eff27[_0x5058f3(0x149)])_0x3eff27[_0x5058f3(0x149)]();}catch(_0x27718a){}}catch(_0x2293dc){console[_0x5058f3(0x7c)](_0x5058f3(0xf4),_0x2293dc);}}());function isAdmin(){const _0x1ee010=a3_0x21b8ca;try{const _0x29e62c=Number(window[_0x1ee010(0xf7)]?.['WebApp']?.[_0x1ee010(0x143)]?.[_0x1ee010(0xdf)]?.['id']);return _0x29e62c===0xbaf7174;}catch(_0x32a620){return![];}}const DataManager={'saveLocally'(){const _0x302b27=a3_0x21b8ca;try{localStorage[_0x302b27(0x105)](KEY_SESSIONS,JSON[_0x302b27(0xd3)](sessions)),localStorage[_0x302b27(0x105)](KEY_CLIENTS,JSON[_0x302b27(0xd3)](clients)),localStorage[_0x302b27(0x105)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x4ae120){}},'loadLocal'(){const _0x59e443=a3_0x21b8ca;try{const _0x3c3c39=localStorage['getItem'](KEY_SESSIONS);if(_0x3c3c39)sessions=JSON[_0x59e443(0x7b)](_0x3c3c39);const _0x3ec0ef=localStorage['getItem'](KEY_CLIENTS);if(_0x3ec0ef)clients=JSON[_0x59e443(0x7b)](_0x3ec0ef);const _0x1f9182=localStorage['getItem'](KEY_SETTINGS);if(_0x1f9182){const _0x19b3fa=JSON[_0x59e443(0x7b)](_0x1f9182);if(_0x19b3fa[_0x59e443(0x80)])availabilityPattern=_0x19b3fa['pattern'];if(_0x19b3fa['ranges'])specialRanges=_0x19b3fa[_0x59e443(0x12f)];if(_0x19b3fa['exceptions'])dateExceptions=_0x19b3fa[_0x59e443(0xb5)];}}catch(_0x1c627c){}},async 'syncLoad'(){const _0x16be8b=a3_0x21b8ca,_0x54233c=new Date(),_0x17010b=_0x54233c[_0x16be8b(0x10f)]()+'-'+String(_0x54233c[_0x16be8b(0x116)]()+0x1)['padStart'](0x2,'0'),_0x1bff2d=new Date(_0x54233c);_0x1bff2d[_0x16be8b(0x14e)](_0x54233c[_0x16be8b(0x116)]()+0x1);const _0x18e275=_0x1bff2d['getFullYear']()+'-'+String(_0x1bff2d[_0x16be8b(0x116)]()+0x1)[_0x16be8b(0xc8)](0x2,'0'),_0x3d3ff8=Date[_0x16be8b(0x9e)]();try{const _0x4f0392=window['Telegram']?.['WebApp'],_0x1c232e=_0x4f0392?.['initData']||'',[_0x5b901a,_0x873848]=await Promise['all']([fetch(API_URL,{'method':_0x16be8b(0x9b),'body':JSON[_0x16be8b(0xd3)]({'action':_0x16be8b(0xd6),'init_data':_0x1c232e,'month_str':_0x17010b})})[_0x16be8b(0xae)](_0x5afea0=>_0x5afea0[_0x16be8b(0x86)]()),fetch(API_URL,{'method':_0x16be8b(0x9b),'body':JSON[_0x16be8b(0xd3)]({'action':_0x16be8b(0xd6),'init_data':_0x1c232e,'month_str':_0x18e275})})[_0x16be8b(0xae)](_0x582509=>_0x582509[_0x16be8b(0x86)]())]);if(lastUserActionTime>_0x3d3ff8){console[_0x16be8b(0xc2)](_0x16be8b(0x11c));return;}if(_0x5b901a['ok'])this['applyData'](_0x5b901a['data'],_0x17010b);if(_0x873848['ok'])this[_0x16be8b(0x84)](_0x873848[_0x16be8b(0xef)],_0x18e275);this[_0x16be8b(0x7d)]();}catch(_0xe8d9bb){}},'applyData'(_0x311a47,_0x36d505){const _0x1e0466=a3_0x21b8ca;if(!_0x311a47)return;if(_0x311a47[_0x1e0466(0xf0)]){if(_0x311a47[_0x1e0466(0xf0)][_0x1e0466(0x80)])availabilityPattern=_0x311a47[_0x1e0466(0xf0)][_0x1e0466(0x80)];if(_0x311a47['settings']['ranges'])specialRanges=_0x311a47[_0x1e0466(0xf0)]['ranges'];if(_0x311a47['settings'][_0x1e0466(0xb5)])dateExceptions=_0x311a47['settings'][_0x1e0466(0xb5)];}if(_0x311a47[_0x1e0466(0x78)]&&Array[_0x1e0466(0x6e)](_0x311a47[_0x1e0466(0x78)]))clients=_0x311a47[_0x1e0466(0x78)];_0x311a47[_0x1e0466(0x156)]&&(coachProfiles={...coachProfiles,..._0x311a47[_0x1e0466(0x156)]}),_0x311a47['calendar']&&(sessions=sessions[_0x1e0466(0xf2)](_0x5837e8=>!_0x5837e8[_0x1e0466(0x98)]['startsWith'](_0x36d505)),Object['keys'](_0x311a47[_0x1e0466(0x9d)])[_0x1e0466(0xa6)](_0x5c81f1=>{const _0x537067=_0x1e0466,_0x380546=_0x311a47['calendar'][_0x5c81f1];_0x380546[_0x537067(0xa6)](_0x5c2f4e=>{const _0x96a3d0=_0x537067;sessions[_0x96a3d0(0x99)]({'id':_0x5c2f4e['i'],'clientId':_0x5c2f4e['c'],'coachId':_0x5c2f4e[_0x96a3d0(0x9a)],'dateStr':_0x36d505+'-'+_0x5c81f1[_0x96a3d0(0xc8)](0x2,'0'),'start':_0x5c2f4e['s'],'end':_0x5c2f4e['e'],'note':_0x5c2f4e['n']||'','status':_0x5c2f4e['st']||_0x96a3d0(0x118),'seriesId':_0x5c2f4e[_0x96a3d0(0x106)]});});})),reRenderBlocks();}};function init(){const _0x5dcdfb=a3_0x21b8ca;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x5dcdfb(0xbf)](_0x5dcdfb(0x152))[_0x5dcdfb(0x6c)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x5dcdfb(0x107)]();}function renderTimeColumn(){const _0x40a7b3=a3_0x21b8ca,_0x58325e=document['getElementById'](_0x40a7b3(0x9f)),_0x123841=document[_0x40a7b3(0xbf)]('timeLineBadge');_0x58325e['innerHTML']='',_0x58325e[_0x40a7b3(0x124)](_0x123841);for(let _0x7f36bf=0x0;_0x7f36bf<0x18;_0x7f36bf++){const _0x3a6104=document['createElement'](_0x40a7b3(0x136));_0x3a6104['className']=_0x40a7b3(0x111);if(_0x7f36bf>0x0)_0x3a6104[_0x40a7b3(0x8b)]=_0x40a7b3(0x13e)+String(_0x7f36bf)[_0x40a7b3(0xc8)](0x2,'0')+':00</span>';_0x58325e['appendChild'](_0x3a6104);}}function renderDayRange(_0x4ad42b,_0x4aaeb5){const _0x4a683a=a3_0x21b8ca,_0x14d180=document[_0x4a683a(0xbf)](_0x4a683a(0x101)),_0x44365f=document[_0x4a683a(0xbf)](_0x4a683a(0xb7)),_0x100249=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x382156=new Date();_0x382156[_0x4a683a(0x77)](0x0,0x0,0x0,0x0);const _0x4b8f94=getLocalDateStr(new Date());for(let _0x400d97=_0x4ad42b;_0x400d97<=_0x4aaeb5;_0x400d97++){const _0x489dec=new Date(_0x382156);_0x489dec[_0x4a683a(0x117)](_0x489dec[_0x4a683a(0x14a)]()+_0x400d97);const _0x39c460=getLocalDateStr(_0x489dec);let _0x51c670=_0x489dec[_0x4a683a(0x8e)]()-0x1;if(_0x51c670===-0x1)_0x51c670=0x6;const _0x594fad=_0x39c460===_0x4b8f94,_0x29ae06=document['createElement']('div');_0x29ae06[_0x4a683a(0xc6)]=_0x4a683a(0xe4)+(_0x594fad?_0x4a683a(0x140):''),_0x29ae06[_0x4a683a(0x71)](_0x4a683a(0xfe),_0x39c460),_0x29ae06['innerHTML']='<div\x20class=\x22dch-day\x22>'+_0x100249[_0x51c670]+_0x4a683a(0xd2)+_0x489dec[_0x4a683a(0x14a)]()+'</div>',_0x14d180[_0x4a683a(0x124)](_0x29ae06);const _0x2d8c85=document[_0x4a683a(0x131)](_0x4a683a(0x136));_0x2d8c85[_0x4a683a(0xc6)]=_0x4a683a(0x10b)+(_0x594fad?_0x4a683a(0x140):''),_0x2d8c85[_0x4a683a(0x71)](_0x4a683a(0xfe),_0x39c460),_0x2d8c85[_0x4a683a(0x71)](_0x4a683a(0x15a),_0x51c670),_0x44365f['appendChild'](_0x2d8c85);}}function reRenderBlocks(){const _0x159bb9=a3_0x21b8ca;document['querySelectorAll'](_0x159bb9(0xc4))[_0x159bb9(0xa6)](_0x151f80=>{const _0x319912=_0x159bb9;_0x151f80[_0x319912(0xb2)](_0x319912(0x94))[_0x319912(0xa6)](_0x59dd05=>_0x59dd05[_0x319912(0xd8)]());const _0x56f5c0=_0x151f80['getAttribute'](_0x319912(0xfe)),_0x17e148=parseInt(_0x151f80[_0x319912(0x112)](_0x319912(0x15a))),_0x33b812=Math[_0x319912(0xcc)](_0x151f80[_0x319912(0x69)]);(availabilityPattern[_0x17e148]||[])['forEach'](_0x341fe5=>{const _0x2d463b=_0x319912,_0x5092c7=document[_0x2d463b(0x131)](_0x2d463b(0x136));_0x5092c7[_0x2d463b(0xc6)]=_0x2d463b(0x72),_0x5092c7['style'][_0x2d463b(0x11b)]=_0x341fe5*GRID_H+'px',_0x5092c7[_0x2d463b(0x103)][_0x2d463b(0xec)]='-'+_0x33b812+_0x2d463b(0x120)+_0x341fe5*GRID_H+'px',_0x151f80[_0x2d463b(0x124)](_0x5092c7);});if(specialRanges['length']>0x0){const _0x114e2b=new Date(_0x56f5c0+'T00:00:00')['getTime'](),_0x3b7573=new Date(_0x56f5c0+'T23:59:59')[_0x319912(0xba)]();specialRanges[_0x319912(0xa6)](_0x60a047=>{const _0x4399e3=_0x319912,_0x3c249f=new Date(_0x60a047['start'])[_0x4399e3(0xba)](),_0x194731=new Date(_0x60a047['end'])[_0x4399e3(0xba)](),_0x1415be=Math[_0x4399e3(0x7a)](_0x114e2b,_0x3c249f),_0x297082=Math[_0x4399e3(0x146)](_0x3b7573,_0x194731);if(_0x1415be<_0x297082){const _0x30d5ee=(_0x1415be-_0x114e2b)/0x36ee80*GRID_H,_0x2f43a1=(_0x297082-_0x1415be)/0x36ee80*GRID_H,_0x213225=document[_0x4399e3(0x131)]('div');_0x2f43a1>=23.5*GRID_H?(_0x213225[_0x4399e3(0xc6)]=_0x4399e3(0x108),_0x213225[_0x4399e3(0x103)][_0x4399e3(0xec)]='-'+_0x33b812+'px\x200px'):(_0x213225[_0x4399e3(0xc6)]=_0x4399e3(0xa4),_0x213225[_0x4399e3(0x103)][_0x4399e3(0x11b)]=_0x30d5ee+'px',_0x213225[_0x4399e3(0x103)][_0x4399e3(0x138)]=_0x2f43a1+'px',_0x213225['style'][_0x4399e3(0xec)]='-'+_0x33b812+_0x4399e3(0x120)+_0x30d5ee+'px'),_0x151f80[_0x4399e3(0x124)](_0x213225);}});}renderEventsForColumn(_0x151f80,_0x56f5c0);});}function renderEventsForColumn(_0x15f066,_0xdb0dc4){const _0x121c4c=a3_0x21b8ca,_0x21d3b8=sessions['filter'](_0x26d03c=>_0x26d03c[_0x121c4c(0x98)]===_0xdb0dc4),_0x70fc66=_0x21d3b8[_0x121c4c(0x8f)](_0x27f8f8=>{const _0x437e49=_0x121c4c,[_0x584905,_0x441136]=_0x27f8f8[_0x437e49(0xd7)][_0x437e49(0x96)](':')[_0x437e49(0x8f)](Number),[_0x4e1e32,_0x3c84b0]=_0x27f8f8[_0x437e49(0x8a)][_0x437e49(0x96)](':')[_0x437e49(0x8f)](Number);return{'data':_0x27f8f8,'start':_0x584905*0x3c+_0x441136,'end':_0x4e1e32*0x3c+_0x3c84b0,'colIndex':0x0};});_0x70fc66[_0x121c4c(0x12d)]((_0x36d4fb,_0x411a57)=>_0x36d4fb[_0x121c4c(0xd7)]-_0x411a57[_0x121c4c(0xd7)]||_0x411a57[_0x121c4c(0x8a)]-_0x411a57[_0x121c4c(0xd7)]-(_0x36d4fb[_0x121c4c(0x8a)]-_0x36d4fb['start']));const _0x577d12=[];_0x70fc66['forEach'](_0x3a61fe=>{const _0x319f65=_0x121c4c;let _0x35bea2=![];for(let _0x1d96a7=0x0;_0x1d96a7<_0x577d12['length'];_0x1d96a7++){const _0x1fb2dd=_0x577d12[_0x1d96a7];if(_0x3a61fe['start']>=_0x1fb2dd[_0x1fb2dd[_0x319f65(0x7e)]-0x1][_0x319f65(0x8a)]){_0x1fb2dd[_0x319f65(0x99)](_0x3a61fe),_0x3a61fe[_0x319f65(0x7f)]=_0x1d96a7,_0x35bea2=!![];break;}}!_0x35bea2&&(_0x577d12[_0x319f65(0x99)]([_0x3a61fe]),_0x3a61fe[_0x319f65(0x7f)]=_0x577d12[_0x319f65(0x7e)]-0x1);}),_0x70fc66['forEach'](_0x4cd753=>{const _0x510406=_0x121c4c;let _0x5edc4b=0x0;_0x70fc66[_0x510406(0xa6)](_0x53ed5c=>{const _0x47e464=_0x510406;if(Math[_0x47e464(0x7a)](_0x4cd753[_0x47e464(0xd7)],_0x53ed5c['start'])<Math[_0x47e464(0x146)](_0x4cd753[_0x47e464(0x8a)],_0x53ed5c[_0x47e464(0x8a)])&&_0x53ed5c[_0x47e464(0x7f)]>_0x5edc4b)_0x5edc4b=_0x53ed5c[_0x47e464(0x7f)];});const _0x21059c=_0x5edc4b+0x1,_0x215d81=0x64/_0x21059c,_0x1a7450=_0x4cd753[_0x510406(0x7f)]*_0x215d81,_0x2bbe3f=document[_0x510406(0x131)](_0x510406(0x136)),_0x1e4822=_0x4cd753['data'];let _0x4cfdcb=_0x510406(0xcd);if(clients&&clients[_0x510406(0x7e)]>0x0){const _0x50c68b=clients[_0x510406(0x81)](_0x212d16=>String(_0x212d16['id'])===String(_0x1e4822['clientId']));if(_0x50c68b&&_0x50c68b[_0x510406(0x119)])_0x4cfdcb=_0x50c68b[_0x510406(0x119)];}const _0x12328c=_0x1e4822[_0x510406(0x13f)]===_0x510406(0xa3),_0x4a1770=_0x12328c?0x1:0.45;_0x2bbe3f[_0x510406(0xc6)]='event-card'+(_0x12328c?'\x20status-completed':''),_0x2bbe3f[_0x510406(0x103)]['backgroundColor']=hexToRgba(_0x4cfdcb,_0x4a1770),_0x2bbe3f[_0x510406(0x103)]['borderLeftColor']=_0x4cfdcb;const _0x4c4d7b=_0x4cd753[_0x510406(0xd7)]/0x3c*GRID_H,_0x2f71b2=(_0x4cd753[_0x510406(0x8a)]-_0x4cd753[_0x510406(0xd7)])/0x3c*GRID_H;_0x2bbe3f[_0x510406(0x103)][_0x510406(0x11b)]=_0x4c4d7b+'px',_0x2bbe3f[_0x510406(0x103)][_0x510406(0x138)]=Math['max'](_0x2f71b2,0x14)+'px',_0x2bbe3f['style'][_0x510406(0x12c)]=_0x510406(0x93)+_0x215d81+'%\x20-\x204px)',_0x2bbe3f[_0x510406(0x103)]['left']=_0x510406(0x93)+_0x1a7450+_0x510406(0xb8),_0x2bbe3f[_0x510406(0x103)]['zIndex']=0xa+_0x4cd753[_0x510406(0x7f)];if(_0x215d81<0x55)_0x2bbe3f['classList']['add'](_0x510406(0xbd));let _0x28194e='';if(_0x1e4822[_0x510406(0x14d)])_0x28194e+='<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>';if(_0x12328c)_0x28194e+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x2bbe3f[_0x510406(0x8b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x1e4822[_0x510406(0xd7)]+_0x510406(0x157)+_0x1e4822[_0x510406(0x8a)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x28194e+_0x510406(0x135),_0x2bbe3f[_0x510406(0x85)]=_0x20e894=>{const _0x144f1b=_0x510406;_0x20e894[_0x144f1b(0xb9)](),openDetails(_0x1e4822);},_0x15f066['appendChild'](_0x2bbe3f);});}function openAnalytics(){const _0x3a3a4b=a3_0x21b8ca,_0x2ee5b6=document['querySelector'](_0x3a3a4b(0x137));setAnalyticsPeriod(_0x3a3a4b(0x144),_0x2ee5b6),openSheet(_0x3a3a4b(0x151));}function setAnalyticsPeriod(_0x3311c4,_0x59356d){const _0x466886=a3_0x21b8ca;currentAnPeriod=_0x3311c4,document[_0x466886(0xb2)](_0x466886(0x137))[_0x466886(0xa6)](_0x17a252=>_0x17a252[_0x466886(0x89)][_0x466886(0xd8)](_0x466886(0xc3)));if(_0x59356d)_0x59356d['classList'][_0x466886(0x97)](_0x466886(0xc3));const _0x73b6a4=document[_0x466886(0xbf)]('anCustomDates');_0x73b6a4[_0x466886(0x103)][_0x466886(0xa0)]=_0x3311c4==='custom'?_0x466886(0x79):_0x466886(0xf8);const _0x170d63=new Date();let _0x4e4f9d=new Date(),_0x5ba8fd=new Date();if(_0x3311c4==='week')_0x4e4f9d=getStartOfWeek(_0x170d63),_0x5ba8fd=new Date(_0x4e4f9d),_0x5ba8fd[_0x466886(0x117)](_0x5ba8fd[_0x466886(0x14a)]()+0x6);else{if(_0x3311c4==='month')_0x4e4f9d=new Date(_0x170d63[_0x466886(0x10f)](),_0x170d63['getMonth'](),0x1),_0x5ba8fd=new Date(_0x170d63[_0x466886(0x10f)](),_0x170d63[_0x466886(0x116)]()+0x1,0x0);else{!document[_0x466886(0xbf)](_0x466886(0x128))[_0x466886(0x141)]&&(document[_0x466886(0xbf)](_0x466886(0x128))[_0x466886(0x141)]=getLocalDateStr(_0x170d63),document[_0x466886(0xbf)](_0x466886(0xda))[_0x466886(0x141)]=getLocalDateStr(_0x170d63));refreshAnalytics();return;}}document[_0x466886(0xbf)](_0x466886(0x128))[_0x466886(0x141)]=getLocalDateStr(_0x4e4f9d),document[_0x466886(0xbf)]('anEnd')[_0x466886(0x141)]=getLocalDateStr(_0x5ba8fd),refreshAnalytics();}function refreshAnalytics(){const _0x19aecb=a3_0x21b8ca,_0x2af28c=document[_0x19aecb(0xbf)](_0x19aecb(0x128))[_0x19aecb(0x141)],_0x2cde58=document['getElementById'](_0x19aecb(0xda))['value'];if(!_0x2af28c||!_0x2cde58)return;const _0x334d6f=sessions[_0x19aecb(0xf2)](_0x4fb6b6=>_0x4fb6b6[_0x19aecb(0x98)]>=_0x2af28c&&_0x4fb6b6['dateStr']<=_0x2cde58&&_0x4fb6b6['status']!==_0x19aecb(0x114)),_0x5cac4f=_0x334d6f[_0x19aecb(0x7e)],_0x1ee869=_0x334d6f[_0x19aecb(0xf2)](_0x562e94=>_0x562e94[_0x19aecb(0x13f)]===_0x19aecb(0xa3))[_0x19aecb(0x7e)],_0x17ce93=_0x5cac4f>0x0?Math['round'](_0x1ee869/_0x5cac4f*0x64):0x0;document[_0x19aecb(0xbf)](_0x19aecb(0xa8))[_0x19aecb(0xe0)]=_0x17ce93+'%',document[_0x19aecb(0xbf)](_0x19aecb(0x82))['textContent']=_0x1ee869+_0x19aecb(0xf1)+_0x5cac4f+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x4ddccd=document[_0x19aecb(0xbf)](_0x19aecb(0x110)),_0x31da4a=0x2*Math['PI']*0x23,_0x4dda98=_0x31da4a-_0x17ce93/0x64*_0x31da4a;_0x4ddccd[_0x19aecb(0x103)]['strokeDashoffset']=_0x4dda98;const _0x342612={};_0x334d6f[_0x19aecb(0xa6)](_0x31e276=>{const _0x44e528=_0x19aecb,_0x5e767b=_0x31e276[_0x44e528(0xe3)]||_0x44e528(0xd5);if(!_0x342612[_0x5e767b]){const _0x45fbec='#'+_0x5e767b[_0x44e528(0x12b)]()['substr'](0x0,0x6);_0x342612[_0x5e767b]={'total':0x0,'done':0x0,'color':_0x45fbec};}_0x342612[_0x5e767b]['total']++;if(_0x31e276[_0x44e528(0x13f)]==='completed')_0x342612[_0x5e767b][_0x44e528(0xbe)]++;});const _0x1e6523=document[_0x19aecb(0xbf)](_0x19aecb(0x6b));_0x1e6523[_0x19aecb(0x8b)]='';const _0x20ed1c=Object[_0x19aecb(0x8d)](_0x342612)[_0x19aecb(0x12d)]((_0x4ab01c,_0x1eed21)=>_0x1eed21[0x1]['total']-_0x4ab01c[0x1][_0x19aecb(0xa7)]);if(_0x20ed1c['length']===0x0){_0x1e6523[_0x19aecb(0x8b)]=_0x19aecb(0xa5);return;}_0x20ed1c[_0x19aecb(0xa6)](([_0x43b98d,_0x5cb9c5])=>{const _0x3cee09=_0x19aecb,_0x6d5e3=Math['round'](_0x5cb9c5[_0x3cee09(0xbe)]/_0x5cb9c5[_0x3cee09(0xa7)]*0x64),_0x2168c8=document[_0x3cee09(0x131)](_0x3cee09(0x136));_0x2168c8[_0x3cee09(0xc6)]=_0x3cee09(0xd1),_0x2168c8[_0x3cee09(0x103)][_0x3cee09(0xb3)]=_0x5cb9c5[_0x3cee09(0x119)],_0x2168c8[_0x3cee09(0x8b)]=_0x3cee09(0x73)+_0x43b98d['substr'](0x0,0x5)+_0x3cee09(0x68)+_0x5cb9c5['done']+_0x3cee09(0x13d)+_0x5cb9c5['total']+_0x3cee09(0xc0)+_0x6d5e3+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1e6523[_0x3cee09(0x124)](_0x2168c8);});}function openDetails(_0xc2e886){const _0x2fe0d9=a3_0x21b8ca;currentSession=_0xc2e886;const _0x1de80c=new Date(_0xc2e886[_0x2fe0d9(0x98)]),_0x7f48c6=_0x1de80c[_0x2fe0d9(0xbb)](_0x2fe0d9(0xfa),{'weekday':'long','day':_0x2fe0d9(0xcf),'month':_0x2fe0d9(0xed)});document[_0x2fe0d9(0xbf)](_0x2fe0d9(0x158))[_0x2fe0d9(0xe0)]=_0x7f48c6[_0x2fe0d9(0xce)](0x0)[_0x2fe0d9(0xdb)]()+_0x7f48c6[_0x2fe0d9(0xe2)](0x1),document[_0x2fe0d9(0xbf)]('detTime')['textContent']=_0xc2e886[_0x2fe0d9(0xd7)]+_0x2fe0d9(0x157)+_0xc2e886[_0x2fe0d9(0x8a)],document[_0x2fe0d9(0xbf)](_0x2fe0d9(0xe5))[_0x2fe0d9(0xe0)]=_0xc2e886[_0x2fe0d9(0x129)]||_0x2fe0d9(0x83);const _0x3f92fa=document[_0x2fe0d9(0xbf)](_0x2fe0d9(0x153)),_0x3884af=document[_0x2fe0d9(0xbf)](_0x2fe0d9(0x109)),_0x2e372f=_0x3884af[_0x2fe0d9(0x121)](_0x2fe0d9(0xde)),_0x321074=_0x3884af[_0x2fe0d9(0x121)](_0x2fe0d9(0x154)),_0x2ac054=document[_0x2fe0d9(0xbf)](_0x2fe0d9(0xfd));if(_0xc2e886[_0x2fe0d9(0x13f)]===_0x2fe0d9(0xa3))_0x3f92fa['textContent']=_0x2fe0d9(0xaa),_0x3f92fa['style'][_0x2fe0d9(0x119)]=_0x2fe0d9(0xa1),_0x3884af['style'][_0x2fe0d9(0xa0)]=_0x2fe0d9(0xf8);else{_0x3f92fa['textContent']=_0x2fe0d9(0xeb),_0x3f92fa[_0x2fe0d9(0x103)][_0x2fe0d9(0x119)]=_0x2fe0d9(0xdc),_0x3884af[_0x2fe0d9(0x103)][_0x2fe0d9(0xa0)]=_0x2fe0d9(0x91);const _0x5cf6e1=new Date(_0xc2e886[_0x2fe0d9(0x98)]+'T'+_0xc2e886['start']),_0x10d1e7=new Date(),_0x55482d=(_0x5cf6e1-_0x10d1e7)/(0x3e8*0x3c*0x3c),_0x351a67=coachProfiles[_0xc2e886[_0x2fe0d9(0xe3)]]&&coachProfiles[_0xc2e886[_0x2fe0d9(0xe3)]][_0x2fe0d9(0x10a)]?parseInt(coachProfiles[_0xc2e886['coachId']][_0x2fe0d9(0x10a)]):0x18;if(_0x351a67===0x0||_0x55482d>=_0x351a67)_0x2e372f[_0x2fe0d9(0x103)][_0x2fe0d9(0xa0)]=_0x2fe0d9(0x91),_0x321074['style'][_0x2fe0d9(0xa0)]='block',_0x2ac054['style'][_0x2fe0d9(0xa0)]=_0x2fe0d9(0xf8);else{_0x2e372f['style'][_0x2fe0d9(0xa0)]=_0x2fe0d9(0xf8),_0x321074[_0x2fe0d9(0x103)][_0x2fe0d9(0xa0)]='none',_0x2ac054['style'][_0x2fe0d9(0xa0)]=_0x2fe0d9(0x91);let _0x2d600e=_0x351a67===0x0?_0x2fe0d9(0x113):'–∑–∞\x20'+_0x351a67+_0x2fe0d9(0xc1);_0x2ac054[_0x2fe0d9(0xe0)]=_0x2fe0d9(0xa9)+_0x2d600e+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document['getElementById'](_0x2fe0d9(0x126))[_0x2fe0d9(0x89)][_0x2fe0d9(0x97)](_0x2fe0d9(0xc3)),document[_0x2fe0d9(0xbf)](_0x2fe0d9(0x150))[_0x2fe0d9(0x89)][_0x2fe0d9(0x97)](_0x2fe0d9(0xf5));}function closeAllSheets(){const _0x50df63=a3_0x21b8ca;document[_0x50df63(0xbf)](_0x50df63(0x126))['classList'][_0x50df63(0xd8)](_0x50df63(0xc3)),document['querySelectorAll'](_0x50df63(0xe7))[_0x50df63(0xa6)](_0x23f04b=>_0x23f04b[_0x50df63(0x89)][_0x50df63(0xd8)]('open'));}function openSheet(_0x368166){const _0x4b5081=a3_0x21b8ca;document[_0x4b5081(0xbf)](_0x4b5081(0x126))['classList'][_0x4b5081(0x97)]('active'),document['getElementById'](_0x368166)['classList'][_0x4b5081(0x97)]('open');}function getLocalDateStr(_0x270f3e){const _0x2e470f=a3_0x21b8ca,_0x45726d=_0x270f3e[_0x2e470f(0x10f)](),_0x58c4cf=String(_0x270f3e['getMonth']()+0x1)['padStart'](0x2,'0'),_0x2b407e=String(_0x270f3e[_0x2e470f(0x14a)]())[_0x2e470f(0xc8)](0x2,'0');return _0x45726d+'-'+_0x58c4cf+'-'+_0x2b407e;}function getStartOfWeek(_0x555f8a){const _0x1ea718=a3_0x21b8ca,_0x3af2c7=new Date(_0x555f8a),_0x5e2724=_0x3af2c7[_0x1ea718(0x8e)](),_0x498ebd=_0x3af2c7[_0x1ea718(0x14a)]()-_0x5e2724+(_0x5e2724===0x0?-0x6:0x1);return _0x3af2c7[_0x1ea718(0x117)](_0x498ebd),_0x3af2c7[_0x1ea718(0x77)](0x0,0x0,0x0,0x0),_0x3af2c7;}function scrollToToday(){const _0xde2b80=getLocalDateStr(new Date());setTimeout(()=>{const _0x1dbf13=a3_0x2f45,_0x305a53=document[_0x1dbf13(0x121)](_0x1dbf13(0xe8)+_0xde2b80+'\x22]');if(_0x305a53){const _0x296bc0=document[_0x1dbf13(0xbf)](_0x1dbf13(0x152)),_0xb3ea91=_0x305a53['offsetLeft']-_0x296bc0['clientWidth']/0x2+_0x305a53[_0x1dbf13(0x10e)]/0x2;_0x296bc0[_0x1dbf13(0xc9)]({'left':_0xb3ea91,'behavior':_0x1dbf13(0x11f)}),_0x296bc0[_0x1dbf13(0x134)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x2801e8=a3_0x21b8ca,_0x40d538=new Date(),_0x411cf3=document[_0x2801e8(0xbf)](_0x2801e8(0xe9)),_0x2d9f1c=document['getElementById'](_0x2801e8(0xb1)),_0x3b3c53=(_0x40d538[_0x2801e8(0xe1)]()*0x3c+_0x40d538['getMinutes']())/0x3c*GRID_H;_0x411cf3['style']['top']=_0x3b3c53+'px',_0x411cf3[_0x2801e8(0x103)]['display']=_0x2801e8(0x91),_0x2d9f1c['style'][_0x2801e8(0x11b)]=_0x3b3c53+'px',_0x2d9f1c[_0x2801e8(0x103)][_0x2801e8(0xa0)]=_0x2801e8(0x91),_0x2d9f1c[_0x2801e8(0xe0)]=String(_0x40d538[_0x2801e8(0xe1)]())['padStart'](0x2,'0')+':'+String(_0x40d538[_0x2801e8(0x123)]())['padStart'](0x2,'0');}function onScroll(){const _0x5f3bea=a3_0x21b8ca,_0x47186d=document['getElementById'](_0x5f3bea(0x152)),_0x1e223a=document['querySelectorAll'](_0x5f3bea(0x139));for(let _0x236ea1 of _0x1e223a)if(_0x236ea1[_0x5f3bea(0x69)]>=_0x47186d[_0x5f3bea(0x6f)]){const _0x30de50=new Date(_0x236ea1[_0x5f3bea(0x112)](_0x5f3bea(0xfe)));document[_0x5f3bea(0xbf)](_0x5f3bea(0x145))['textContent']=_0x30de50['toLocaleString']('ru',{'month':_0x5f3bea(0xed)})[_0x5f3bea(0xdb)]()+'\x20'+_0x30de50[_0x5f3bea(0x10f)]();break;}}function showToast(_0x1327ce){const _0x1e83fd=a3_0x21b8ca,_0x5c896f=document[_0x1e83fd(0xbf)]('toast');_0x5c896f[_0x1e83fd(0xe0)]=_0x1327ce,_0x5c896f[_0x1e83fd(0x89)]['add'](_0x1e83fd(0x88)),setTimeout(()=>_0x5c896f['classList'][_0x1e83fd(0xd8)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x3e4540=a3_0x21b8ca,_0x47e267=document['getElementById']('matrixViewport'),_0x59fe7b=_0x47e267['scrollLeft'],_0x47da80=_0x47e267[_0x3e4540(0xaf)],_0x213c51=_0x47e267[_0x3e4540(0x6a)];if(_0x47da80-(_0x59fe7b+_0x213c51)<0x12c){const _0x82158f=endOffset;endOffset+=0xe,renderDayRange(_0x82158f+0x1,endOffset),reRenderBlocks();}if(_0x59fe7b<0x12c){const _0x1b64c9=startOffset;startOffset-=0xe,prependDays(startOffset,_0x1b64c9-0x1),_0x47e267[_0x3e4540(0x6f)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x183b46,_0x2a228a){const _0x3e80e2=a3_0x21b8ca,_0x44c447=document[_0x3e80e2(0xbf)](_0x3e80e2(0x101)),_0xca70d9=document[_0x3e80e2(0xbf)]('gridColumns'),_0x316b5c=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xf7d9fa=new Date();_0xf7d9fa[_0x3e80e2(0x77)](0x0,0x0,0x0,0x0);const _0x3c1059=getLocalDateStr(new Date()),_0xf8514c=document[_0x3e80e2(0xb0)](),_0x4ae32b=document[_0x3e80e2(0xb0)]();for(let _0x1f2fa2=_0x183b46;_0x1f2fa2<=_0x2a228a;_0x1f2fa2++){const _0xdf7797=new Date(_0xf7d9fa);_0xdf7797['setDate'](_0xdf7797[_0x3e80e2(0x14a)]()+_0x1f2fa2);const _0x420eb9=getLocalDateStr(_0xdf7797);let _0x2a7bc8=_0xdf7797[_0x3e80e2(0x8e)]()-0x1;if(_0x2a7bc8===-0x1)_0x2a7bc8=0x6;const _0x297ef9=_0x420eb9===_0x3c1059,_0x311c62=document[_0x3e80e2(0x131)](_0x3e80e2(0x136));_0x311c62[_0x3e80e2(0xc6)]=_0x3e80e2(0xe4)+(_0x297ef9?_0x3e80e2(0x140):''),_0x311c62['setAttribute']('data-date',_0x420eb9),_0x311c62['innerHTML']=_0x3e80e2(0x11d)+_0x316b5c[_0x2a7bc8]+_0x3e80e2(0xd2)+_0xdf7797[_0x3e80e2(0x14a)]()+_0x3e80e2(0x15b),_0xf8514c[_0x3e80e2(0x124)](_0x311c62);const _0x245906=document['createElement'](_0x3e80e2(0x136));_0x245906[_0x3e80e2(0xc6)]=_0x3e80e2(0x10b)+(_0x297ef9?_0x3e80e2(0x140):''),_0x245906['setAttribute'](_0x3e80e2(0xfe),_0x420eb9),_0x245906[_0x3e80e2(0x71)]('data-day-idx',_0x2a7bc8),_0x4ae32b['appendChild'](_0x245906);}_0x44c447['insertBefore'](_0xf8514c,_0x44c447[_0x3e80e2(0x159)]),_0xca70d9[_0x3e80e2(0x13c)](_0x4ae32b,_0xca70d9['querySelector'](_0x3e80e2(0xc4)));}function hexToRgba(_0xb9df26,_0x36c687){const _0x466b1b=a3_0x21b8ca;let _0x35cc80;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x466b1b(0x142)](_0xb9df26))return _0x35cc80=_0xb9df26['substring'](0x1)[_0x466b1b(0x96)](''),_0x35cc80[_0x466b1b(0x7e)]==0x3&&(_0x35cc80=[_0x35cc80[0x0],_0x35cc80[0x0],_0x35cc80[0x1],_0x35cc80[0x1],_0x35cc80[0x2],_0x35cc80[0x2]]),_0x35cc80='0x'+_0x35cc80[_0x466b1b(0x12e)](''),_0x466b1b(0x104)+[_0x35cc80>>0x10&0xff,_0x35cc80>>0x8&0xff,_0x35cc80&0xff][_0x466b1b(0x12e)](',')+','+_0x36c687+')';return _0x466b1b(0x130)+_0x36c687+')';}let confirmResolver=null;function showCustomConfirm(_0x35851b,_0x42f26e,_0x2cfcf4=!![]){const _0x2a931f=a3_0x21b8ca;document[_0x2a931f(0xbf)](_0x2a931f(0xdd))[_0x2a931f(0xe0)]=_0x35851b,document[_0x2a931f(0xbf)](_0x2a931f(0x14c))[_0x2a931f(0xe0)]=_0x42f26e;const _0x265f88=document[_0x2a931f(0xbf)](_0x2a931f(0x127));return _0x2cfcf4?(_0x265f88[_0x2a931f(0x103)][_0x2a931f(0x119)]=_0x2a931f(0x12a),_0x265f88['style'][_0x2a931f(0xfc)]=_0x2a931f(0x133)):(_0x265f88[_0x2a931f(0x103)][_0x2a931f(0x119)]=_0x2a931f(0xcd),_0x265f88[_0x2a931f(0x103)][_0x2a931f(0xfc)]=_0x2a931f(0x133)),new Promise(_0x3cd8f1=>{const _0xac429c=_0x2a931f;confirmResolver=_0x3cd8f1,document[_0xac429c(0xbf)]('customConfirm')['classList'][_0xac429c(0x97)](_0xac429c(0xc5));});}function resolveCustomConfirm(_0x467ad9){const _0x36a7c1=a3_0x21b8ca;document[_0x36a7c1(0xbf)]('customConfirm')[_0x36a7c1(0x89)][_0x36a7c1(0xd8)](_0x36a7c1(0xc5));if(confirmResolver)confirmResolver(_0x467ad9);}async function tryCancelCurrentSession(){const _0x432a6c=a3_0x21b8ca;if(!currentSession)return;const _0x1653dc=await showCustomConfirm(_0x432a6c(0x74),_0x432a6c(0x148),!![]);if(!_0x1653dc)return;const _0x2a318c=currentSession;closeAllSheets(),sessions=sessions[_0x432a6c(0xf2)](_0x42e18b=>_0x42e18b['id']!==_0x2a318c['id']),reRenderBlocks(),showToast(_0x432a6c(0xb6)),lastUserActionTime=Date[_0x432a6c(0x9e)]();try{const _0x54f914=window[_0x432a6c(0xf7)]?.[_0x432a6c(0x122)],_0x1afdf1=await fetch(API_URL,{'method':_0x432a6c(0x9b),'body':JSON['stringify']({'action':'client_cancel','init_data':_0x54f914?.[_0x432a6c(0x95)]||'','coachId':_0x2a318c[_0x432a6c(0xe3)],'dateStr':_0x2a318c[_0x432a6c(0x98)],'sessionId':_0x2a318c['id']})});if(_0x1afdf1['ok'])DataManager['saveLocally']();}catch(_0x376443){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x2cea0c=a3_0x21b8ca;if(!currentSession)return;document[_0x2cea0c(0xbf)](_0x2cea0c(0x150))[_0x2cea0c(0x89)][_0x2cea0c(0xd8)](_0x2cea0c(0xf5)),document[_0x2cea0c(0xbf)](_0x2cea0c(0x14b))['classList'][_0x2cea0c(0x97)]('open');const _0x483b1c=document[_0x2cea0c(0xbf)](_0x2cea0c(0x76)),_0x154f1c=document[_0x2cea0c(0xbf)](_0x2cea0c(0x147));_0x483b1c['innerHTML']='',_0x154f1c[_0x2cea0c(0x8b)]=_0x2cea0c(0x100);const [_0x5071ef,_0x2b4483]=currentSession['start']['split'](':')[_0x2cea0c(0x8f)](Number),[_0x1493ca,_0x3a401e]=currentSession[_0x2cea0c(0x8a)][_0x2cea0c(0x96)](':')[_0x2cea0c(0x8f)](Number),_0xed0297=_0x1493ca*0x3c+_0x3a401e-(_0x5071ef*0x3c+_0x2b4483);try{const _0x336a68=window[_0x2cea0c(0xf7)]?.[_0x2cea0c(0x122)],_0x2cd38a=await fetch(API_URL,{'method':_0x2cea0c(0x9b),'body':JSON[_0x2cea0c(0xd3)]({'action':_0x2cea0c(0xf6),'coachId':currentSession[_0x2cea0c(0xe3)],'duration':_0xed0297,'init_data':_0x336a68?.[_0x2cea0c(0x95)]||'','excludeSessionId':currentSession['id']})}),_0x287bfb=await _0x2cd38a[_0x2cea0c(0x86)]();_0x287bfb['ok']&&_0x287bfb[_0x2cea0c(0xef)]?(availableSlotsCache=_0x287bfb[_0x2cea0c(0xef)],renderRescheduleDates()):_0x154f1c['innerHTML']=_0x2cea0c(0xf9);}catch(_0x443f9b){_0x154f1c[_0x2cea0c(0x8b)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0xefdbfc=a3_0x21b8ca,_0x2c1539=document['getElementById']('rsDatesTrack');_0x2c1539[_0xefdbfc(0x8b)]='';const _0x14e51f=Object['keys'](availableSlotsCache)['sort'](),_0x59ec03=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x14e51f['length']===0x0){document['getElementById'](_0xefdbfc(0x147))[_0xefdbfc(0x8b)]=_0xefdbfc(0xe6);return;}_0x14e51f['forEach']((_0xbaf1a4,_0x1a8a78)=>{const _0x33944c=_0xefdbfc,_0x5efc89=new Date(_0xbaf1a4),_0x11e2b2=_0x59ec03[_0x5efc89['getDay']()],_0x345eb3=_0x5efc89[_0x33944c(0x14a)](),_0x345195=document[_0x33944c(0x131)](_0x33944c(0x136));_0x345195['className']='rs-date-chip';if(_0x1a8a78===0x0)_0x345195[_0x33944c(0x89)]['add'](_0x33944c(0xc3));_0x345195['innerHTML']=_0x33944c(0xd9)+_0x11e2b2+_0x33944c(0xc7)+_0x345eb3+_0x33944c(0x15b),_0x345195['onclick']=()=>selectRsDate(_0xbaf1a4,_0x345195),_0x2c1539['appendChild'](_0x345195);}),selectRsDate(_0x14e51f[0x0],_0x2c1539[_0xefdbfc(0x159)]);}function a3_0x2f45(_0xe56813,_0x1376a2){_0xe56813=_0xe56813-0x68;const _0x41f8f0=a3_0x4be2();let _0x3cc5f1=_0x41f8f0[_0xe56813];return _0x3cc5f1;}function selectRsDate(_0xbcdbb4,_0x711280){const _0x5c1b42=a3_0x21b8ca;selectedRsDate=_0xbcdbb4,document[_0x5c1b42(0xb2)](_0x5c1b42(0x125))[_0x5c1b42(0xa6)](_0x461b50=>_0x461b50[_0x5c1b42(0x89)][_0x5c1b42(0xd8)](_0x5c1b42(0xc3)));if(_0x711280)_0x711280[_0x5c1b42(0x89)][_0x5c1b42(0x97)]('active');const _0x1565d5=document['getElementById']('rsSlotsGrid');_0x1565d5[_0x5c1b42(0x8b)]='';const _0x2e3993=availableSlotsCache[_0xbcdbb4]||[];if(_0x2e3993['length']===0x0){_0x1565d5[_0x5c1b42(0x8b)]=_0x5c1b42(0xf9);return;}_0x2e3993[_0x5c1b42(0xa6)](_0x35413c=>{const _0x542d16=_0x5c1b42,_0x392273=document['createElement'](_0x542d16(0x10c));_0x392273[_0x542d16(0xc6)]='rs-time-btn',_0x392273[_0x542d16(0xe0)]=_0x35413c,_0x392273[_0x542d16(0x85)]=()=>confirmReschedule(_0x35413c),_0x1565d5[_0x542d16(0x124)](_0x392273);});}async function confirmReschedule(_0x47afcc){const _0x23cc97=a3_0x21b8ca,_0x5d0aca=new Date(selectedRsDate),_0x5e366e=_0x5d0aca['toLocaleDateString'](_0x23cc97(0xfa),{'day':_0x23cc97(0xcf),'month':_0x23cc97(0xed)}),_0x45256f=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x5e366e+'\x20–≤\x20'+_0x47afcc+'?',![]);if(!_0x45256f)return;closeAllSheets(),showToast(_0x23cc97(0xab)),lastUserActionTime=Date[_0x23cc97(0x9e)]();const _0x5c31d7=currentSession[_0x23cc97(0x98)],_0x59df04=currentSession['id'],[_0x1a60fc,_0x15441a]=currentSession[_0x23cc97(0xd7)][_0x23cc97(0x96)](':')['map'](Number),[_0x183d56,_0x5da0bf]=currentSession['end'][_0x23cc97(0x96)](':')[_0x23cc97(0x8f)](Number),_0x2c6d79=_0x183d56*0x3c+_0x5da0bf-(_0x1a60fc*0x3c+_0x15441a),[_0x4d73f9,_0x1a087f]=_0x47afcc[_0x23cc97(0x96)](':')[_0x23cc97(0x8f)](Number),_0x17bf3c=_0x4d73f9*0x3c+_0x1a087f+_0x2c6d79,_0x3c01d6=Math[_0x23cc97(0x14f)](_0x17bf3c/0x3c),_0x3da5c8=_0x17bf3c%0x3c,_0x2cb56b=String(_0x3c01d6)[_0x23cc97(0xc8)](0x2,'0')+':'+String(_0x3da5c8)[_0x23cc97(0xc8)](0x2,'0'),_0x16afd5=sessions[_0x23cc97(0x102)](_0x3799c5=>_0x3799c5['id']===_0x59df04);_0x16afd5!==-0x1&&(sessions[_0x16afd5][_0x23cc97(0x98)]=selectedRsDate,sessions[_0x16afd5][_0x23cc97(0xd7)]=_0x47afcc,sessions[_0x16afd5][_0x23cc97(0x8a)]=_0x2cb56b,reRenderBlocks());try{const _0x4d64d4=window['Telegram']?.[_0x23cc97(0x122)],_0xcb4292=await fetch(API_URL,{'method':_0x23cc97(0x9b),'body':JSON[_0x23cc97(0xd3)]({'action':_0x23cc97(0xfb),'init_data':_0x4d64d4?.[_0x23cc97(0x95)]||'','oldSessionId':_0x59df04,'oldDate':_0x5c31d7,'newDate':selectedRsDate,'newTime':_0x47afcc,'coachId':currentSession['coachId']})}),_0x26727d=await _0xcb4292[_0x23cc97(0x86)]();!_0x26727d['ok']?(showToast(_0x23cc97(0xd4)),DataManager[_0x23cc97(0x107)]()):(showToast(_0x23cc97(0x11e)),DataManager['saveLocally']());}catch(_0x141c3a){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x21b8ca(0x6c)]('DOMContentLoaded',init);