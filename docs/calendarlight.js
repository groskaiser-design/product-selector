const a3_0x34cb26=a3_0x5bca;(function(_0x2f15ea,_0x1b5985){const _0x32205d=a3_0x5bca,_0x388457=_0x2f15ea();while(!![]){try{const _0x2dc973=-parseInt(_0x32205d(0x178))/0x1*(-parseInt(_0x32205d(0x107))/0x2)+parseInt(_0x32205d(0xd8))/0x3+-parseInt(_0x32205d(0x11e))/0x4*(parseInt(_0x32205d(0x12d))/0x5)+-parseInt(_0x32205d(0x19b))/0x6*(parseInt(_0x32205d(0x15a))/0x7)+-parseInt(_0x32205d(0x1b8))/0x8*(parseInt(_0x32205d(0x121))/0x9)+-parseInt(_0x32205d(0x197))/0xa*(parseInt(_0x32205d(0x1b1))/0xb)+-parseInt(_0x32205d(0x115))/0xc*(-parseInt(_0x32205d(0xd7))/0xd);if(_0x2dc973===_0x1b5985)break;else _0x388457['push'](_0x388457['shift']());}catch(_0xd57940){_0x388457['push'](_0x388457['shift']());}}}(a3_0x44da,0xa3089));const APP_VERSION=a3_0x34cb26(0x116),API_URL=a3_0x34cb26(0x14b),GRID_H=0x3c,KEY_SESSIONS=a3_0x34cb26(0x19a),KEY_SETTINGS=a3_0x34cb26(0xfa),KEY_CLIENTS=a3_0x34cb26(0x12b);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x34cb26(0x1b6),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x144f7e=a3_0x34cb26,_0x238f6d=(function(){let _0x1ba4b0=!![];return function(_0x142037,_0x466955){const _0x5a93b2=_0x1ba4b0?function(){const _0x1a6afe=a3_0x5bca;if(_0x466955){const _0x30c167=_0x466955[_0x1a6afe(0xe2)](_0x142037,arguments);return _0x466955=null,_0x30c167;}}:function(){};return _0x1ba4b0=![],_0x5a93b2;};}()),_0x119287=_0x238f6d(this,function(){const _0x190bf3=a3_0x5bca;return _0x119287[_0x190bf3(0xd2)]()[_0x190bf3(0xd0)](_0x190bf3(0x192))['toString']()[_0x190bf3(0x15e)](_0x119287)['search']('(((.+)+)+)+$');});_0x119287();try{const _0x1f9a0d=window[_0x144f7e(0x134)]?.[_0x144f7e(0x189)];if(!_0x1f9a0d)return;_0x1f9a0d[_0x144f7e(0xf0)](),_0x1f9a0d[_0x144f7e(0x194)]();try{_0x1f9a0d[_0x144f7e(0x1a2)](_0x144f7e(0x1b0)),_0x1f9a0d[_0x144f7e(0xfe)]&&_0x1f9a0d['setBackgroundColor'](_0x144f7e(0x1b0));}catch(_0x2cb070){console[_0x144f7e(0x198)](_0x144f7e(0x196),_0x2cb070);}try{_0x1f9a0d[_0x144f7e(0xe6)]&&(_0x1f9a0d[_0x144f7e(0xe6)][_0x144f7e(0xe9)](),_0x1f9a0d[_0x144f7e(0xe6)][_0x144f7e(0xd5)](),_0x1f9a0d[_0x144f7e(0xe6)][_0x144f7e(0x122)](function(){const _0x1587f0=_0x144f7e;window[_0x1587f0(0x14f)][_0x1587f0(0x16c)]='router.html';}));}catch(_0x365990){console[_0x144f7e(0x198)]('Error\x20setting\x20back\x20button:',_0x365990);}try{if(_0x1f9a0d[_0x144f7e(0x179)])_0x1f9a0d[_0x144f7e(0x179)]();}catch(_0x73ce8f){}}catch(_0xd5fe92){console[_0x144f7e(0xff)](_0x144f7e(0x104),_0xd5fe92);}}());function isAdmin(){const _0x5ba3f2=a3_0x34cb26;try{const _0x8255a7=Number(window['Telegram']?.[_0x5ba3f2(0x189)]?.[_0x5ba3f2(0xd6)]?.['user']?.['id']);return _0x8255a7===0xbaf7174;}catch(_0x191256){return![];}}const DataManager={'saveLocally'(){const _0x4ba184=a3_0x34cb26;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x4ba184(0xcd)](sessions)),localStorage[_0x4ba184(0xe1)](KEY_CLIENTS,JSON[_0x4ba184(0xcd)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x2a5eac){}},'loadLocal'(){const _0x421f8b=a3_0x34cb26;try{const _0x416d02=localStorage[_0x421f8b(0x1a8)](KEY_SESSIONS);if(_0x416d02)sessions=JSON[_0x421f8b(0x148)](_0x416d02);const _0x21cfe6=localStorage[_0x421f8b(0x1a8)](KEY_CLIENTS);if(_0x21cfe6)clients=JSON[_0x421f8b(0x148)](_0x21cfe6);const _0x4dba81=localStorage[_0x421f8b(0x1a8)](KEY_SETTINGS);if(_0x4dba81){const _0x4a078b=JSON[_0x421f8b(0x148)](_0x4dba81);if(_0x4a078b[_0x421f8b(0x113)])availabilityPattern=_0x4a078b[_0x421f8b(0x113)];if(_0x4a078b[_0x421f8b(0x165)])specialRanges=_0x4a078b['ranges'];if(_0x4a078b[_0x421f8b(0x1a6)])dateExceptions=_0x4a078b[_0x421f8b(0x1a6)];}}catch(_0x365c58){}},async 'syncLoad'(){const _0x2f960a=a3_0x34cb26,_0x49f852=new Date(),_0x43b059=_0x49f852[_0x2f960a(0xef)]()+'-'+String(_0x49f852['getMonth']()+0x1)['padStart'](0x2,'0'),_0x5b4d05=new Date(_0x49f852);_0x5b4d05[_0x2f960a(0x147)](_0x49f852[_0x2f960a(0x153)]()+0x1);const _0x4f0323=_0x5b4d05[_0x2f960a(0xef)]()+'-'+String(_0x5b4d05[_0x2f960a(0x153)]()+0x1)['padStart'](0x2,'0'),_0x3b1fcf=Date['now']();try{const _0x41a364=window[_0x2f960a(0x134)]?.[_0x2f960a(0x189)],_0x4df063=_0x41a364?.[_0x2f960a(0x18c)]||'',[_0x35bd92,_0x8131d]=await Promise['all']([fetch(API_URL,{'method':'POST','body':JSON[_0x2f960a(0xcd)]({'action':_0x2f960a(0x172),'init_data':_0x4df063,'month_str':_0x43b059})})[_0x2f960a(0x130)](_0x37ae78=>_0x37ae78[_0x2f960a(0xf2)]()),fetch(API_URL,{'method':_0x2f960a(0x156),'body':JSON['stringify']({'action':_0x2f960a(0x172),'init_data':_0x4df063,'month_str':_0x4f0323})})[_0x2f960a(0x130)](_0x349a1e=>_0x349a1e['json']())]);if(lastUserActionTime>_0x3b1fcf){console[_0x2f960a(0x198)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x35bd92['ok'])this[_0x2f960a(0x109)](_0x35bd92['data'],_0x43b059);if(_0x8131d['ok'])this[_0x2f960a(0x109)](_0x8131d[_0x2f960a(0x127)],_0x4f0323);this[_0x2f960a(0x15f)]();}catch(_0x797da4){}},'applyData'(_0x2cd1d3,_0x279b2e){const _0x1e54e8=a3_0x34cb26;if(!_0x2cd1d3)return;if(_0x2cd1d3[_0x1e54e8(0x11d)]){if(_0x2cd1d3['settings'][_0x1e54e8(0x113)])availabilityPattern=_0x2cd1d3[_0x1e54e8(0x11d)][_0x1e54e8(0x113)];if(_0x2cd1d3['settings']['ranges'])specialRanges=_0x2cd1d3[_0x1e54e8(0x11d)]['ranges'];if(_0x2cd1d3[_0x1e54e8(0x11d)][_0x1e54e8(0x1a6)])dateExceptions=_0x2cd1d3[_0x1e54e8(0x11d)][_0x1e54e8(0x1a6)];}if(_0x2cd1d3[_0x1e54e8(0x13d)]&&Array[_0x1e54e8(0x1b5)](_0x2cd1d3['clients']))clients=_0x2cd1d3[_0x1e54e8(0x13d)];_0x2cd1d3['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x2cd1d3[_0x1e54e8(0x14c)]}),_0x2cd1d3[_0x1e54e8(0x140)]&&(sessions=sessions[_0x1e54e8(0x14e)](_0x150bf2=>!_0x150bf2['dateStr']['startsWith'](_0x279b2e)),Object[_0x1e54e8(0xe3)](_0x2cd1d3[_0x1e54e8(0x140)])[_0x1e54e8(0x181)](_0x25f0d3=>{const _0x1f5eeb=_0x1e54e8,_0x1b090a=_0x2cd1d3[_0x1f5eeb(0x140)][_0x25f0d3];_0x1b090a[_0x1f5eeb(0x181)](_0x3d4ee9=>{const _0x44e6f7=_0x1f5eeb;sessions['push']({'id':_0x3d4ee9['i'],'clientId':_0x3d4ee9['c'],'coachId':_0x3d4ee9[_0x44e6f7(0xcb)],'dateStr':_0x279b2e+'-'+_0x25f0d3[_0x44e6f7(0xe5)](0x2,'0'),'start':_0x3d4ee9['s'],'end':_0x3d4ee9['e'],'note':_0x3d4ee9['n']||'','status':_0x3d4ee9['st']||'planned','seriesId':_0x3d4ee9[_0x44e6f7(0x164)]});});})),reRenderBlocks();}};function init(){const _0x336471=a3_0x34cb26;DataManager[_0x336471(0xdb)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x336471(0xf9)](_0x336471(0x17b))[_0x336471(0xe4)](_0x336471(0x1ac),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x336471(0x13f)]();}function renderTimeColumn(){const _0x406a26=a3_0x34cb26,_0x171589=document[_0x406a26(0xf9)](_0x406a26(0x15d)),_0x403590=document[_0x406a26(0xf9)](_0x406a26(0x16a));_0x171589[_0x406a26(0x19f)]='',_0x171589[_0x406a26(0x1aa)](_0x403590);for(let _0x214f0a=0x0;_0x214f0a<0x18;_0x214f0a++){const _0x8a882f=document[_0x406a26(0x150)](_0x406a26(0x10f));_0x8a882f[_0x406a26(0x152)]=_0x406a26(0x13a);if(_0x214f0a>0x0)_0x8a882f[_0x406a26(0x19f)]=_0x406a26(0x173)+String(_0x214f0a)[_0x406a26(0xe5)](0x2,'0')+_0x406a26(0x166);_0x171589[_0x406a26(0x1aa)](_0x8a882f);}}function renderDayRange(_0x16b5ca,_0x43e19c){const _0xe3ab9f=a3_0x34cb26,_0x4b517e=document[_0xe3ab9f(0xf9)](_0xe3ab9f(0x195)),_0x23d248=document[_0xe3ab9f(0xf9)](_0xe3ab9f(0x1b9)),_0x17a152=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x317c4d=new Date();_0x317c4d[_0xe3ab9f(0x139)](0x0,0x0,0x0,0x0);const _0x10e611=getLocalDateStr(new Date());for(let _0x809dcf=_0x16b5ca;_0x809dcf<=_0x43e19c;_0x809dcf++){const _0x46d55e=new Date(_0x317c4d);_0x46d55e[_0xe3ab9f(0x1be)](_0x46d55e[_0xe3ab9f(0x154)]()+_0x809dcf);const _0x44fd01=getLocalDateStr(_0x46d55e);let _0x1e4271=_0x46d55e['getDay']()-0x1;if(_0x1e4271===-0x1)_0x1e4271=0x6;const _0x3c115f=_0x44fd01===_0x10e611,_0x355e5d=document[_0xe3ab9f(0x150)]('div');_0x355e5d['className']=_0xe3ab9f(0x125)+(_0x3c115f?_0xe3ab9f(0x105):''),_0x355e5d['setAttribute'](_0xe3ab9f(0x1a5),_0x44fd01),_0x355e5d[_0xe3ab9f(0x19f)]='<div\x20class=\x22dch-day\x22>'+_0x17a152[_0x1e4271]+_0xe3ab9f(0x128)+_0x46d55e[_0xe3ab9f(0x154)]()+'</div>',_0x4b517e[_0xe3ab9f(0x1aa)](_0x355e5d);const _0x1ccd3f=document[_0xe3ab9f(0x150)](_0xe3ab9f(0x10f));_0x1ccd3f[_0xe3ab9f(0x152)]=_0xe3ab9f(0x129)+(_0x3c115f?_0xe3ab9f(0x105):''),_0x1ccd3f[_0xe3ab9f(0xfd)]('data-date',_0x44fd01),_0x1ccd3f['setAttribute'](_0xe3ab9f(0x1a3),_0x1e4271),_0x23d248['appendChild'](_0x1ccd3f);}}function reRenderBlocks(){const _0x2eb0d6=a3_0x34cb26;document[_0x2eb0d6(0xe0)]('.day-column')['forEach'](_0x4cc5e6=>{const _0xd2b8e2=_0x2eb0d6;_0x4cc5e6[_0xd2b8e2(0xe0)](_0xd2b8e2(0x184))[_0xd2b8e2(0x181)](_0x48925f=>_0x48925f['remove']());const _0x4862e0=_0x4cc5e6[_0xd2b8e2(0x18b)]('data-date'),_0x5de3d5=parseInt(_0x4cc5e6[_0xd2b8e2(0x18b)](_0xd2b8e2(0x1a3))),_0x471452=Math[_0xd2b8e2(0x131)](_0x4cc5e6[_0xd2b8e2(0x143)]);(availabilityPattern[_0x5de3d5]||[])[_0xd2b8e2(0x181)](_0x329fab=>{const _0x182caf=_0xd2b8e2,_0x502b7b=document[_0x182caf(0x150)](_0x182caf(0x10f));_0x502b7b[_0x182caf(0x152)]='blocked-slot\x20stripe-bg',_0x502b7b['style'][_0x182caf(0x193)]=_0x329fab*GRID_H+'px',_0x502b7b[_0x182caf(0x159)][_0x182caf(0x1ad)]='-'+_0x471452+'px\x20-'+_0x329fab*GRID_H+'px',_0x4cc5e6[_0x182caf(0x1aa)](_0x502b7b);});if(specialRanges[_0xd2b8e2(0x144)]>0x0){const _0x1fe11d=new Date(_0x4862e0+_0xd2b8e2(0x15b))[_0xd2b8e2(0x160)](),_0x31e8d6=new Date(_0x4862e0+_0xd2b8e2(0x17d))[_0xd2b8e2(0x160)]();specialRanges['forEach'](_0x2b0796=>{const _0x21dc20=_0xd2b8e2,_0x4840e4=new Date(_0x2b0796[_0x21dc20(0xce)])[_0x21dc20(0x160)](),_0xcd9d10=new Date(_0x2b0796['end'])[_0x21dc20(0x160)](),_0x3b894d=Math['max'](_0x1fe11d,_0x4840e4),_0x434452=Math['min'](_0x31e8d6,_0xcd9d10);if(_0x3b894d<_0x434452){const _0x4f5762=(_0x3b894d-_0x1fe11d)/0x36ee80*GRID_H,_0x2c9488=(_0x434452-_0x3b894d)/0x36ee80*GRID_H,_0x20fe26=document[_0x21dc20(0x150)](_0x21dc20(0x10f));_0x2c9488>=23.5*GRID_H?(_0x20fe26[_0x21dc20(0x152)]=_0x21dc20(0x146),_0x20fe26[_0x21dc20(0x159)][_0x21dc20(0x1ad)]='-'+_0x471452+_0x21dc20(0x1c2)):(_0x20fe26[_0x21dc20(0x152)]=_0x21dc20(0x1bc),_0x20fe26[_0x21dc20(0x159)][_0x21dc20(0x193)]=_0x4f5762+'px',_0x20fe26[_0x21dc20(0x159)][_0x21dc20(0xde)]=_0x2c9488+'px',_0x20fe26[_0x21dc20(0x159)][_0x21dc20(0x1ad)]='-'+_0x471452+_0x21dc20(0x101)+_0x4f5762+'px'),_0x4cc5e6[_0x21dc20(0x1aa)](_0x20fe26);}});}renderEventsForColumn(_0x4cc5e6,_0x4862e0);});}function renderEventsForColumn(_0x5e8cce,_0x2cf684){const _0x11d630=a3_0x34cb26,_0x48fdf2=sessions['filter'](_0x32a556=>_0x32a556[_0x11d630(0xf4)]===_0x2cf684),_0x416246=_0x48fdf2[_0x11d630(0x177)](_0x528586=>{const _0x89712f=_0x11d630,[_0x32b1fc,_0x21c95d]=_0x528586[_0x89712f(0xce)]['split'](':')['map'](Number),[_0x25ca86,_0x254279]=_0x528586[_0x89712f(0x18a)]['split'](':')[_0x89712f(0x177)](Number);return{'data':_0x528586,'start':_0x32b1fc*0x3c+_0x21c95d,'end':_0x25ca86*0x3c+_0x254279,'colIndex':0x0};});_0x416246[_0x11d630(0x110)]((_0x5c6122,_0xaf888d)=>_0x5c6122[_0x11d630(0xce)]-_0xaf888d[_0x11d630(0xce)]||_0xaf888d[_0x11d630(0x18a)]-_0xaf888d[_0x11d630(0xce)]-(_0x5c6122[_0x11d630(0x18a)]-_0x5c6122[_0x11d630(0xce)]));const _0x2dfb3b=[];_0x416246[_0x11d630(0x181)](_0x162a2d=>{const _0x58517f=_0x11d630;let _0x1a4683=![];for(let _0x4c2713=0x0;_0x4c2713<_0x2dfb3b[_0x58517f(0x144)];_0x4c2713++){const _0x3c678a=_0x2dfb3b[_0x4c2713];if(_0x162a2d['start']>=_0x3c678a[_0x3c678a['length']-0x1][_0x58517f(0x18a)]){_0x3c678a['push'](_0x162a2d),_0x162a2d[_0x58517f(0x188)]=_0x4c2713,_0x1a4683=!![];break;}}!_0x1a4683&&(_0x2dfb3b['push']([_0x162a2d]),_0x162a2d['colIndex']=_0x2dfb3b[_0x58517f(0x144)]-0x1);}),_0x416246[_0x11d630(0x181)](_0x548351=>{const _0x1b9787=_0x11d630;let _0x2bf9fa=0x0;_0x416246[_0x1b9787(0x181)](_0x8cb59c=>{const _0x39857a=_0x1b9787;if(Math[_0x39857a(0x161)](_0x548351['start'],_0x8cb59c[_0x39857a(0xce)])<Math['min'](_0x548351[_0x39857a(0x18a)],_0x8cb59c[_0x39857a(0x18a)])&&_0x8cb59c[_0x39857a(0x188)]>_0x2bf9fa)_0x2bf9fa=_0x8cb59c[_0x39857a(0x188)];});const _0x2f0550=_0x2bf9fa+0x1,_0x371067=0x64/_0x2f0550,_0x259916=_0x548351['colIndex']*_0x371067,_0x472968=document['createElement']('div'),_0x5bbaee=_0x548351[_0x1b9787(0x127)];let _0x3b5ac7=_0x1b9787(0x12c);if(clients&&clients[_0x1b9787(0x144)]>0x0){const _0x120e6e=clients[_0x1b9787(0x1a9)](_0x3d8bfc=>String(_0x3d8bfc['id'])===String(_0x5bbaee[_0x1b9787(0x186)]));if(_0x120e6e&&_0x120e6e[_0x1b9787(0x111)])_0x3b5ac7=_0x120e6e[_0x1b9787(0x111)];}const _0x16b14b=_0x5bbaee[_0x1b9787(0xeb)]===_0x1b9787(0x124),_0xcc7bb3=_0x16b14b?0x1:0.45;_0x472968[_0x1b9787(0x152)]=_0x1b9787(0x176)+(_0x16b14b?'\x20status-completed':''),_0x472968['style'][_0x1b9787(0x1b7)]=hexToRgba(_0x3b5ac7,_0xcc7bb3),_0x472968[_0x1b9787(0x159)]['borderLeftColor']=_0x3b5ac7;const _0x4fb6d6=_0x548351[_0x1b9787(0xce)]/0x3c*GRID_H,_0x1779db=(_0x548351[_0x1b9787(0x18a)]-_0x548351[_0x1b9787(0xce)])/0x3c*GRID_H;_0x472968[_0x1b9787(0x159)][_0x1b9787(0x193)]=_0x4fb6d6+'px',_0x472968[_0x1b9787(0x159)][_0x1b9787(0xde)]=Math['max'](_0x1779db,0x14)+'px',_0x472968[_0x1b9787(0x159)][_0x1b9787(0xf5)]='calc('+_0x371067+_0x1b9787(0x16b),_0x472968[_0x1b9787(0x159)][_0x1b9787(0x135)]='calc('+_0x259916+_0x1b9787(0x126),_0x472968['style'][_0x1b9787(0x142)]=0xa+_0x548351[_0x1b9787(0x188)];if(_0x371067<0x55)_0x472968[_0x1b9787(0xcf)][_0x1b9787(0x12a)]('mini');let _0x192e69='';if(_0x5bbaee['seriesId'])_0x192e69+=_0x1b9787(0x13c);if(_0x16b14b)_0x192e69+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x472968['innerHTML']=_0x1b9787(0x17c)+_0x5bbaee['start']+_0x1b9787(0x1ae)+_0x5bbaee[_0x1b9787(0x18a)]+_0x1b9787(0x187)+_0x192e69+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x472968['onclick']=_0x3cb981=>{const _0x4a8402=_0x1b9787;_0x3cb981[_0x4a8402(0x16f)](),openDetails(_0x5bbaee);},_0x5e8cce[_0x1b9787(0x1aa)](_0x472968);});}function openAnalytics(){const _0xd8aed4=a3_0x34cb26,_0x6b6425=document['querySelector'](_0xd8aed4(0x133));setAnalyticsPeriod('week',_0x6b6425),openSheet(_0xd8aed4(0x14a));}function setAnalyticsPeriod(_0x42ea8b,_0x5644f8){const _0x1eb78c=a3_0x34cb26;currentAnPeriod=_0x42ea8b,document[_0x1eb78c(0xe0)](_0x1eb78c(0x133))[_0x1eb78c(0x181)](_0x535682=>_0x535682[_0x1eb78c(0xcf)][_0x1eb78c(0x11b)](_0x1eb78c(0x1bf)));if(_0x5644f8)_0x5644f8['classList']['add'](_0x1eb78c(0x1bf));const _0x202c2a=document[_0x1eb78c(0xf9)](_0x1eb78c(0x106));_0x202c2a[_0x1eb78c(0x159)][_0x1eb78c(0x183)]=_0x42ea8b==='custom'?_0x1eb78c(0xd3):'none';const _0x100ac8=new Date();let _0x19a0bc=new Date(),_0x51a251=new Date();if(_0x42ea8b==='week')_0x19a0bc=getStartOfWeek(_0x100ac8),_0x51a251=new Date(_0x19a0bc),_0x51a251[_0x1eb78c(0x1be)](_0x51a251['getDate']()+0x6);else{if(_0x42ea8b==='month')_0x19a0bc=new Date(_0x100ac8[_0x1eb78c(0xef)](),_0x100ac8[_0x1eb78c(0x153)](),0x1),_0x51a251=new Date(_0x100ac8[_0x1eb78c(0xef)](),_0x100ac8[_0x1eb78c(0x153)]()+0x1,0x0);else{!document[_0x1eb78c(0xf9)](_0x1eb78c(0x17f))[_0x1eb78c(0xf3)]&&(document[_0x1eb78c(0xf9)]('anStart')['value']=getLocalDateStr(_0x100ac8),document['getElementById']('anEnd')['value']=getLocalDateStr(_0x100ac8));refreshAnalytics();return;}}document['getElementById'](_0x1eb78c(0x17f))[_0x1eb78c(0xf3)]=getLocalDateStr(_0x19a0bc),document[_0x1eb78c(0xf9)](_0x1eb78c(0x123))[_0x1eb78c(0xf3)]=getLocalDateStr(_0x51a251),refreshAnalytics();}function refreshAnalytics(){const _0x3aacdc=a3_0x34cb26,_0x105d11=document[_0x3aacdc(0xf9)](_0x3aacdc(0x17f))[_0x3aacdc(0xf3)],_0x4e39e9=document['getElementById'](_0x3aacdc(0x123))[_0x3aacdc(0xf3)];if(!_0x105d11||!_0x4e39e9)return;const _0x113a17=sessions[_0x3aacdc(0x14e)](_0xe4baa7=>_0xe4baa7[_0x3aacdc(0xf4)]>=_0x105d11&&_0xe4baa7[_0x3aacdc(0xf4)]<=_0x4e39e9&&_0xe4baa7[_0x3aacdc(0xeb)]!==_0x3aacdc(0x163)),_0x450c2a=_0x113a17['length'],_0x58eb22=_0x113a17['filter'](_0x2e5071=>_0x2e5071[_0x3aacdc(0xeb)]===_0x3aacdc(0x124))[_0x3aacdc(0x144)],_0x187906=_0x450c2a>0x0?Math[_0x3aacdc(0x131)](_0x58eb22/_0x450c2a*0x64):0x0;document['getElementById']('anPercent')[_0x3aacdc(0x10c)]=_0x187906+'%',document['getElementById'](_0x3aacdc(0x13b))[_0x3aacdc(0x10c)]=_0x58eb22+'\x20–∏–∑\x20'+_0x450c2a+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x4b8453=document[_0x3aacdc(0xf9)](_0x3aacdc(0xd9)),_0x50b510=0x2*Math['PI']*0x23,_0x13f255=_0x50b510-_0x187906/0x64*_0x50b510;_0x4b8453['style']['strokeDashoffset']=_0x13f255;const _0x2c4d6e={};_0x113a17[_0x3aacdc(0x181)](_0x4aea57=>{const _0x3f75e3=_0x3aacdc,_0x299ce6=_0x4aea57[_0x3f75e3(0x19d)]||_0x3f75e3(0x185);if(!_0x2c4d6e[_0x299ce6]){const _0x514648='#'+_0x299ce6['toString']()[_0x3f75e3(0x1c0)](0x0,0x6);_0x2c4d6e[_0x299ce6]={'total':0x0,'done':0x0,'color':_0x514648};}_0x2c4d6e[_0x299ce6]['total']++;if(_0x4aea57[_0x3f75e3(0xeb)]===_0x3f75e3(0x124))_0x2c4d6e[_0x299ce6][_0x3f75e3(0xdd)]++;});const _0x4e28a6=document[_0x3aacdc(0xf9)](_0x3aacdc(0x191));_0x4e28a6[_0x3aacdc(0x19f)]='';const _0xe48803=Object['entries'](_0x2c4d6e)[_0x3aacdc(0x110)]((_0x349d09,_0x385d4a)=>_0x385d4a[0x1][_0x3aacdc(0x112)]-_0x349d09[0x1][_0x3aacdc(0x112)]);if(_0xe48803[_0x3aacdc(0x144)]===0x0){_0x4e28a6[_0x3aacdc(0x19f)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0xe48803[_0x3aacdc(0x181)](([_0x1165e9,_0xbe50e6])=>{const _0x3d424a=_0x3aacdc,_0x3db846=Math[_0x3d424a(0x131)](_0xbe50e6[_0x3d424a(0xdd)]/_0xbe50e6['total']*0x64),_0x54dd1f=document[_0x3d424a(0x150)](_0x3d424a(0x10f));_0x54dd1f[_0x3d424a(0x152)]='client-stat-card',_0x54dd1f[_0x3d424a(0x159)][_0x3d424a(0x11f)]=_0xbe50e6['color'],_0x54dd1f[_0x3d424a(0x19f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x1165e9[_0x3d424a(0x1c0)](0x0,0x5)+_0x3d424a(0x1b3)+_0xbe50e6['done']+'</span>\x20/\x20'+_0xbe50e6[_0x3d424a(0x112)]+_0x3d424a(0x1b4)+_0x3db846+_0x3d424a(0x19c),_0x4e28a6[_0x3d424a(0x1aa)](_0x54dd1f);});}function openDetails(_0x348e82){const _0x3521a1=a3_0x34cb26;currentSession=_0x348e82;const _0x583c20=new Date(_0x348e82['dateStr']),_0x2e21ed=_0x583c20[_0x3521a1(0x11a)](_0x3521a1(0x149),{'weekday':_0x3521a1(0x12e),'day':_0x3521a1(0x1ba),'month':_0x3521a1(0x12e)});document[_0x3521a1(0xf9)](_0x3521a1(0xd4))[_0x3521a1(0x10c)]=_0x2e21ed['charAt'](0x0)[_0x3521a1(0x1c1)]()+_0x2e21ed[_0x3521a1(0x16d)](0x1),document[_0x3521a1(0xf9)](_0x3521a1(0xcc))[_0x3521a1(0x10c)]=_0x348e82[_0x3521a1(0xce)]+_0x3521a1(0x1ae)+_0x348e82[_0x3521a1(0x18a)],document[_0x3521a1(0xf9)](_0x3521a1(0x15c))[_0x3521a1(0x10c)]=_0x348e82['note']||_0x3521a1(0x141);const _0x387b0b=document['getElementById'](_0x3521a1(0x117)),_0x162047=document['getElementById'](_0x3521a1(0xda)),_0x4cd66e=_0x162047[_0x3521a1(0xf8)](_0x3521a1(0x138)),_0xb8d59c=_0x162047[_0x3521a1(0xf8)](_0x3521a1(0x1a4)),_0x33e161=document[_0x3521a1(0xf9)]('cancelHint');if(_0x348e82[_0x3521a1(0xeb)]==='completed')_0x387b0b[_0x3521a1(0x10c)]=_0x3521a1(0x18e),_0x387b0b[_0x3521a1(0x159)]['color']='var(--acc-green)',_0x162047['style'][_0x3521a1(0x183)]='none';else{_0x387b0b['textContent']='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x387b0b[_0x3521a1(0x159)]['color']=_0x3521a1(0x103),_0x162047[_0x3521a1(0x159)]['display']=_0x3521a1(0x18d);const _0x51b602=new Date(_0x348e82[_0x3521a1(0xf4)]+'T'+_0x348e82[_0x3521a1(0xce)]),_0x5c5e10=new Date(),_0x3ac1c1=(_0x51b602-_0x5c5e10)/(0x3e8*0x3c*0x3c),_0x43aaee=coachProfiles[_0x348e82[_0x3521a1(0x19d)]]&&coachProfiles[_0x348e82[_0x3521a1(0x19d)]][_0x3521a1(0x100)]?parseInt(coachProfiles[_0x348e82[_0x3521a1(0x19d)]][_0x3521a1(0x100)]):0x18;if(_0x43aaee===0x0||_0x3ac1c1>=_0x43aaee)_0x4cd66e[_0x3521a1(0x159)]['display']=_0x3521a1(0x18d),_0xb8d59c['style'][_0x3521a1(0x183)]=_0x3521a1(0x18d),_0x33e161[_0x3521a1(0x159)][_0x3521a1(0x183)]=_0x3521a1(0x175);else{_0x4cd66e[_0x3521a1(0x159)]['display']='none',_0xb8d59c[_0x3521a1(0x159)][_0x3521a1(0x183)]='none',_0x33e161['style'][_0x3521a1(0x183)]=_0x3521a1(0x18d);let _0x57c0e4=_0x43aaee===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':'–∑–∞\x20'+_0x43aaee+_0x3521a1(0xe8);_0x33e161[_0x3521a1(0x10c)]=_0x3521a1(0x10e)+_0x57c0e4+_0x3521a1(0xdc);}}document[_0x3521a1(0xf9)](_0x3521a1(0xdf))[_0x3521a1(0xcf)]['add'](_0x3521a1(0x1bf)),document[_0x3521a1(0xf9)](_0x3521a1(0x136))[_0x3521a1(0xcf)][_0x3521a1(0x12a)](_0x3521a1(0x199));}function a3_0x5bca(_0x2c08d5,_0x3e3b52){_0x2c08d5=_0x2c08d5-0xcb;const _0x4d9611=a3_0x44da();let _0x3e37ec=_0x4d9611[_0x2c08d5];return _0x3e37ec;}function closeAllSheets(){const _0x129f9b=a3_0x34cb26;document[_0x129f9b(0xf9)](_0x129f9b(0xdf))[_0x129f9b(0xcf)][_0x129f9b(0x11b)](_0x129f9b(0x1bf)),document[_0x129f9b(0xe0)](_0x129f9b(0x168))[_0x129f9b(0x181)](_0x4f99f1=>_0x4f99f1['classList'][_0x129f9b(0x11b)](_0x129f9b(0x199)));}function openSheet(_0xd9e797){const _0x337c08=a3_0x34cb26;document[_0x337c08(0xf9)](_0x337c08(0xdf))[_0x337c08(0xcf)][_0x337c08(0x12a)]('active'),document['getElementById'](_0xd9e797)[_0x337c08(0xcf)]['add']('open');}function getLocalDateStr(_0x21811a){const _0x54ffad=a3_0x34cb26,_0x15401f=_0x21811a['getFullYear'](),_0x1a50a2=String(_0x21811a[_0x54ffad(0x153)]()+0x1)['padStart'](0x2,'0'),_0xa537a=String(_0x21811a['getDate']())['padStart'](0x2,'0');return _0x15401f+'-'+_0x1a50a2+'-'+_0xa537a;}function getStartOfWeek(_0x43a6ef){const _0x4a9b60=a3_0x34cb26,_0x575ccb=new Date(_0x43a6ef),_0x4b1029=_0x575ccb[_0x4a9b60(0xf1)](),_0x3518f4=_0x575ccb[_0x4a9b60(0x154)]()-_0x4b1029+(_0x4b1029===0x0?-0x6:0x1);return _0x575ccb[_0x4a9b60(0x1be)](_0x3518f4),_0x575ccb[_0x4a9b60(0x139)](0x0,0x0,0x0,0x0),_0x575ccb;}function scrollToToday(){const _0x340670=getLocalDateStr(new Date());setTimeout(()=>{const _0x25c680=a3_0x5bca,_0x381e9e=document[_0x25c680(0xf8)](_0x25c680(0x16e)+_0x340670+'\x22]');if(_0x381e9e){const _0x24271d=document[_0x25c680(0xf9)](_0x25c680(0x17b)),_0x3cabea=_0x381e9e[_0x25c680(0x143)]-_0x24271d[_0x25c680(0x155)]/0x2+_0x381e9e[_0x25c680(0x1bb)]/0x2;_0x24271d['scrollTo']({'left':_0x3cabea,'behavior':_0x25c680(0x1a1)}),_0x24271d[_0x25c680(0xf6)]=0x9*GRID_H;}},0x32);}function a3_0x44da(){const _0x39e1c2=['%\x20-\x204px)','href','slice','.day-col-header[data-date=\x22','stopPropagation','onclick','rescheduleSheet','client_load','<span>','firstChild','none','event-card','map','7068zDkJyu','disableVerticalSwipes','toLocaleString','matrixViewport','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','T23:59:59','\x20–≤\x20','anStart','headerMonth','forEach','client_cancel','display','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','Unknown','clientId','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','colIndex','WebApp','end','getAttribute','initData','block','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','customConfirm','visible','analyticsList','(((.+)+)+)+$','top','expand','daysHeaderTrack','Error\x20setting\x20color:','10liusKV','log','open','uc_client_sessions','47958NYtYCJ','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','coachId','.day-column','innerHTML','globalTimeLine','auto','setHeaderColor','data-day-idx','.btn-reschedule','data-date','exceptions','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','getItem','find','appendChild','test','scroll','backgroundPosition','\x20-\x20','rsSlotsGrid','#050505','9566062SGIZww','toast','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','isArray','week','backgroundColor','36544PgbAvs','gridColumns','numeric','offsetWidth','blocked-range-part\x20stripe-bg','getMinutes','setDate','active','substr','toUpperCase','px\x200px','join','cid','detTime','stringify','start','classList','search','rgba(','toString','flex','detDate','offClick','initDataUnsafe','30162613xTCPiU','2451543dWpQcJ','anDonutCircle','cancelContainer','loadLocal','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','done','height','overlay','querySelectorAll','setItem','apply','keys','addEventListener','padStart','BackButton','#ff453a','\x20—á.','show','scrollWidth','status','ccText','findIndex','createDocumentFragment','getFullYear','ready','getDay','json','value','dateStr','width','scrollTop','600','querySelector','getElementById','uc_client_settings','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','split','setAttribute','setBackgroundColor','error','cancel_window','px\x20-','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','var(--acc-blue)','Critical\x20TMA\x20Error:','today','anCustomDates','200iTBovL','button','applyData','insertBefore','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','textContent','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','div','sort','color','total','pattern','</div>','12CuOCQC','v9.5-CLIENT-ANALYTICS','detStatus','substring','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','toLocaleDateString','remove','DOMContentLoaded','settings','24cTizaP','borderLeftColor','now','81ZPGjeb','onClick','anEnd','completed','day-col-header\x20','%\x20+\x202px)','data','</div><div\x20class=\x22dch-num\x22>','day-column\x20','add','uc_client_list','#0a84ff','842285GHWwCa','long','</div><div\x20class=\x22rs-day-num\x22>','then','round','.rs-date-chip','.period-switch\x20.p-btn','Telegram','left','detailsSheet','.day-col-header','.btn-cancel','setHours','time-label','anTotalStats','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','clients','rgba(10,\x20132,\x20255,\x20','syncLoad','calendar','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','zIndex','offsetLeft','length','rs-date-chip','day-off-overlay\x20stripe-bg','setMonth','parse','ru-RU','analyticsSheet','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','coach_profiles','fontWeight','filter','location','createElement','getHours','className','getMonth','getDate','clientWidth','POST','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','<div\x20class=\x22dch-day\x22>','style','1099qXpZPX','T00:00:00','detNote','timeColumn','constructor','saveLocally','getTime','max','rs-time-btn','cancelled','sid','ranges',':00</span>','scrollLeft','.sheet','rsDatesTrack','timeLineBadge'];a3_0x44da=function(){return _0x39e1c2;};return a3_0x44da();}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x5c34ca=a3_0x34cb26,_0x16e4c5=new Date(),_0x36bf92=document['getElementById'](_0x5c34ca(0x1a0)),_0x18f7ca=document['getElementById']('timeLineBadge'),_0x67a83a=(_0x16e4c5[_0x5c34ca(0x151)]()*0x3c+_0x16e4c5[_0x5c34ca(0x1bd)]())/0x3c*GRID_H;_0x36bf92['style'][_0x5c34ca(0x193)]=_0x67a83a+'px',_0x36bf92[_0x5c34ca(0x159)][_0x5c34ca(0x183)]=_0x5c34ca(0x18d),_0x18f7ca['style']['top']=_0x67a83a+'px',_0x18f7ca['style']['display']=_0x5c34ca(0x18d),_0x18f7ca['textContent']=String(_0x16e4c5[_0x5c34ca(0x151)]())[_0x5c34ca(0xe5)](0x2,'0')+':'+String(_0x16e4c5[_0x5c34ca(0x1bd)]())[_0x5c34ca(0xe5)](0x2,'0');}function onScroll(){const _0x4a465b=a3_0x34cb26,_0x45a476=document[_0x4a465b(0xf9)](_0x4a465b(0x17b)),_0x4c991b=document[_0x4a465b(0xe0)](_0x4a465b(0x137));for(let _0x2e7ee6 of _0x4c991b)if(_0x2e7ee6[_0x4a465b(0x143)]>=_0x45a476[_0x4a465b(0x167)]){const _0x1e39f0=new Date(_0x2e7ee6[_0x4a465b(0x18b)]('data-date'));document['getElementById'](_0x4a465b(0x180))[_0x4a465b(0x10c)]=_0x1e39f0[_0x4a465b(0x17a)]('ru',{'month':_0x4a465b(0x12e)})[_0x4a465b(0x1c1)]()+'\x20'+_0x1e39f0[_0x4a465b(0xef)]();break;}}function showToast(_0x1d19f5){const _0x2ec243=a3_0x34cb26,_0x1fbbd1=document[_0x2ec243(0xf9)](_0x2ec243(0x1b2));_0x1fbbd1[_0x2ec243(0x10c)]=_0x1d19f5,_0x1fbbd1[_0x2ec243(0xcf)][_0x2ec243(0x12a)](_0x2ec243(0xe9)),setTimeout(()=>_0x1fbbd1[_0x2ec243(0xcf)][_0x2ec243(0x11b)](_0x2ec243(0xe9)),0x7d0);}function handleInfiniteScroll(){const _0x56de96=a3_0x34cb26,_0x1fee3b=document[_0x56de96(0xf9)]('matrixViewport'),_0x170659=_0x1fee3b['scrollLeft'],_0x52d39e=_0x1fee3b[_0x56de96(0xea)],_0x12016d=_0x1fee3b[_0x56de96(0x155)];if(_0x52d39e-(_0x170659+_0x12016d)<0x12c){const _0x1d281b=endOffset;endOffset+=0xe,renderDayRange(_0x1d281b+0x1,endOffset),reRenderBlocks();}if(_0x170659<0x12c){const _0x700ab5=startOffset;startOffset-=0xe,prependDays(startOffset,_0x700ab5-0x1),_0x1fee3b[_0x56de96(0x167)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x18420b,_0x22e07c){const _0x54250c=a3_0x34cb26,_0x4ffbc5=document[_0x54250c(0xf9)](_0x54250c(0x195)),_0x166d3a=document[_0x54250c(0xf9)](_0x54250c(0x1b9)),_0x3c75b2=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x33a144=new Date();_0x33a144[_0x54250c(0x139)](0x0,0x0,0x0,0x0);const _0x422d6d=getLocalDateStr(new Date()),_0x3323f6=document['createDocumentFragment'](),_0x18d6e7=document[_0x54250c(0xee)]();for(let _0x1d86ad=_0x18420b;_0x1d86ad<=_0x22e07c;_0x1d86ad++){const _0x1b8085=new Date(_0x33a144);_0x1b8085[_0x54250c(0x1be)](_0x1b8085[_0x54250c(0x154)]()+_0x1d86ad);const _0x437bb2=getLocalDateStr(_0x1b8085);let _0x3222a3=_0x1b8085[_0x54250c(0xf1)]()-0x1;if(_0x3222a3===-0x1)_0x3222a3=0x6;const _0x22f492=_0x437bb2===_0x422d6d,_0x273a0e=document[_0x54250c(0x150)](_0x54250c(0x10f));_0x273a0e[_0x54250c(0x152)]='day-col-header\x20'+(_0x22f492?_0x54250c(0x105):''),_0x273a0e[_0x54250c(0xfd)]('data-date',_0x437bb2),_0x273a0e['innerHTML']=_0x54250c(0x158)+_0x3c75b2[_0x3222a3]+_0x54250c(0x128)+_0x1b8085[_0x54250c(0x154)]()+'</div>',_0x3323f6['appendChild'](_0x273a0e);const _0x5e153f=document[_0x54250c(0x150)](_0x54250c(0x10f));_0x5e153f[_0x54250c(0x152)]='day-column\x20'+(_0x22f492?_0x54250c(0x105):''),_0x5e153f[_0x54250c(0xfd)](_0x54250c(0x1a5),_0x437bb2),_0x5e153f[_0x54250c(0xfd)](_0x54250c(0x1a3),_0x3222a3),_0x18d6e7[_0x54250c(0x1aa)](_0x5e153f);}_0x4ffbc5[_0x54250c(0x10a)](_0x3323f6,_0x4ffbc5[_0x54250c(0x174)]),_0x166d3a[_0x54250c(0x10a)](_0x18d6e7,_0x166d3a[_0x54250c(0xf8)](_0x54250c(0x19e)));}function hexToRgba(_0x14e509,_0x47936b){const _0x5b7fa0=a3_0x34cb26;let _0x90cb1c;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x5b7fa0(0x1ab)](_0x14e509))return _0x90cb1c=_0x14e509[_0x5b7fa0(0x118)](0x1)[_0x5b7fa0(0xfc)](''),_0x90cb1c[_0x5b7fa0(0x144)]==0x3&&(_0x90cb1c=[_0x90cb1c[0x0],_0x90cb1c[0x0],_0x90cb1c[0x1],_0x90cb1c[0x1],_0x90cb1c[0x2],_0x90cb1c[0x2]]),_0x90cb1c='0x'+_0x90cb1c[_0x5b7fa0(0x1c3)](''),_0x5b7fa0(0xd1)+[_0x90cb1c>>0x10&0xff,_0x90cb1c>>0x8&0xff,_0x90cb1c&0xff][_0x5b7fa0(0x1c3)](',')+','+_0x47936b+')';return _0x5b7fa0(0x13e)+_0x47936b+')';}let confirmResolver=null;function showCustomConfirm(_0x56813a,_0x4a71a3,_0xde2e95=!![]){const _0x4be66e=a3_0x34cb26;document['getElementById']('ccTitle')['textContent']=_0x56813a,document[_0x4be66e(0xf9)](_0x4be66e(0xec))[_0x4be66e(0x10c)]=_0x4a71a3;const _0x36d1a7=document[_0x4be66e(0xf9)]('ccYesBtn');return _0xde2e95?(_0x36d1a7['style']['color']=_0x4be66e(0xe7),_0x36d1a7[_0x4be66e(0x159)]['fontWeight']=_0x4be66e(0xf7)):(_0x36d1a7[_0x4be66e(0x159)][_0x4be66e(0x111)]=_0x4be66e(0x12c),_0x36d1a7[_0x4be66e(0x159)][_0x4be66e(0x14d)]='600'),new Promise(_0x1647ef=>{const _0x5635b2=_0x4be66e;confirmResolver=_0x1647ef,document[_0x5635b2(0xf9)]('customConfirm')[_0x5635b2(0xcf)][_0x5635b2(0x12a)](_0x5635b2(0x190));});}function resolveCustomConfirm(_0x451685){const _0x268304=a3_0x34cb26;document[_0x268304(0xf9)](_0x268304(0x18f))[_0x268304(0xcf)]['remove']('visible');if(confirmResolver)confirmResolver(_0x451685);}async function tryCancelCurrentSession(){const _0x1181ca=a3_0x34cb26;if(!currentSession)return;const _0x295fbd=await showCustomConfirm(_0x1181ca(0x10d),_0x1181ca(0xfb),!![]);if(!_0x295fbd)return;const _0x1a4610=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x4e2c24=>_0x4e2c24['id']!==_0x1a4610['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x1181ca(0x120)]();try{const _0x2e52b5=window[_0x1181ca(0x134)]?.[_0x1181ca(0x189)],_0x5b92ab=await fetch(API_URL,{'method':_0x1181ca(0x156),'body':JSON[_0x1181ca(0xcd)]({'action':_0x1181ca(0x182),'init_data':_0x2e52b5?.[_0x1181ca(0x18c)]||'','coachId':_0x1a4610[_0x1181ca(0x19d)],'dateStr':_0x1a4610[_0x1181ca(0xf4)],'sessionId':_0x1a4610['id']})});if(_0x5b92ab['ok'])DataManager[_0x1181ca(0x15f)]();}catch(_0x3d4e8f){showToast(_0x1181ca(0x10b));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x2b0fee=a3_0x34cb26;if(!currentSession)return;document[_0x2b0fee(0xf9)](_0x2b0fee(0x136))[_0x2b0fee(0xcf)][_0x2b0fee(0x11b)]('open'),document[_0x2b0fee(0xf9)](_0x2b0fee(0x171))[_0x2b0fee(0xcf)][_0x2b0fee(0x12a)]('open');const _0x116e39=document[_0x2b0fee(0xf9)](_0x2b0fee(0x169)),_0x2a629e=document[_0x2b0fee(0xf9)](_0x2b0fee(0x1af));_0x116e39[_0x2b0fee(0x19f)]='',_0x2a629e['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x6a22b9,_0x3fad04]=currentSession[_0x2b0fee(0xce)][_0x2b0fee(0xfc)](':')['map'](Number),[_0x541819,_0x49a9b3]=currentSession['end'][_0x2b0fee(0xfc)](':')[_0x2b0fee(0x177)](Number),_0x331182=_0x541819*0x3c+_0x49a9b3-(_0x6a22b9*0x3c+_0x3fad04);try{const _0x50e482=window[_0x2b0fee(0x134)]?.[_0x2b0fee(0x189)],_0x3c9819=await fetch(API_URL,{'method':_0x2b0fee(0x156),'body':JSON[_0x2b0fee(0xcd)]({'action':'get_slots','coachId':currentSession['coachId'],'duration':_0x331182,'init_data':_0x50e482?.[_0x2b0fee(0x18c)]||'','excludeSessionId':currentSession['id']})}),_0x5cd70a=await _0x3c9819[_0x2b0fee(0xf2)]();_0x5cd70a['ok']&&_0x5cd70a[_0x2b0fee(0x127)]?(availableSlotsCache=_0x5cd70a[_0x2b0fee(0x127)],renderRescheduleDates()):_0x2a629e[_0x2b0fee(0x19f)]=_0x2b0fee(0x157);}catch(_0x109fb2){_0x2a629e[_0x2b0fee(0x19f)]=_0x2b0fee(0x102);}}function renderRescheduleDates(){const _0x1abf94=a3_0x34cb26,_0x429f10=document[_0x1abf94(0xf9)]('rsDatesTrack');_0x429f10[_0x1abf94(0x19f)]='';const _0x1ea4ab=Object[_0x1abf94(0xe3)](availableSlotsCache)[_0x1abf94(0x110)](),_0x23bfd0=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x1ea4ab[_0x1abf94(0x144)]===0x0){document['getElementById'](_0x1abf94(0x1af))[_0x1abf94(0x19f)]=_0x1abf94(0x1a7);return;}_0x1ea4ab['forEach']((_0x508230,_0xfbe6a3)=>{const _0x4478ca=_0x1abf94,_0x18124f=new Date(_0x508230),_0x112833=_0x23bfd0[_0x18124f[_0x4478ca(0xf1)]()],_0x1244f2=_0x18124f['getDate'](),_0x40ba08=document[_0x4478ca(0x150)](_0x4478ca(0x10f));_0x40ba08[_0x4478ca(0x152)]=_0x4478ca(0x145);if(_0xfbe6a3===0x0)_0x40ba08[_0x4478ca(0xcf)][_0x4478ca(0x12a)]('active');_0x40ba08[_0x4478ca(0x19f)]='<div\x20class=\x22rs-day-name\x22>'+_0x112833+_0x4478ca(0x12f)+_0x1244f2+_0x4478ca(0x114),_0x40ba08[_0x4478ca(0x170)]=()=>selectRsDate(_0x508230,_0x40ba08),_0x429f10[_0x4478ca(0x1aa)](_0x40ba08);}),selectRsDate(_0x1ea4ab[0x0],_0x429f10[_0x1abf94(0x174)]);}function selectRsDate(_0x2c4acb,_0x38fa19){const _0x383029=a3_0x34cb26;selectedRsDate=_0x2c4acb,document['querySelectorAll'](_0x383029(0x132))[_0x383029(0x181)](_0x12be2b=>_0x12be2b[_0x383029(0xcf)][_0x383029(0x11b)](_0x383029(0x1bf)));if(_0x38fa19)_0x38fa19[_0x383029(0xcf)][_0x383029(0x12a)](_0x383029(0x1bf));const _0x905d24=document[_0x383029(0xf9)](_0x383029(0x1af));_0x905d24[_0x383029(0x19f)]='';const _0x26be3d=availableSlotsCache[_0x2c4acb]||[];if(_0x26be3d[_0x383029(0x144)]===0x0){_0x905d24[_0x383029(0x19f)]=_0x383029(0x157);return;}_0x26be3d['forEach'](_0x3f9331=>{const _0x34d60c=_0x383029,_0x5677bf=document['createElement'](_0x34d60c(0x108));_0x5677bf[_0x34d60c(0x152)]=_0x34d60c(0x162),_0x5677bf['textContent']=_0x3f9331,_0x5677bf[_0x34d60c(0x170)]=()=>confirmReschedule(_0x3f9331),_0x905d24[_0x34d60c(0x1aa)](_0x5677bf);});}async function confirmReschedule(_0x1bb901){const _0x1abc32=a3_0x34cb26,_0x5d7219=new Date(selectedRsDate),_0x2f7e8e=_0x5d7219[_0x1abc32(0x11a)](_0x1abc32(0x149),{'day':_0x1abc32(0x1ba),'month':_0x1abc32(0x12e)}),_0x4e00d6=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏',_0x1abc32(0x119)+_0x2f7e8e+_0x1abc32(0x17e)+_0x1bb901+'?',![]);if(!_0x4e00d6)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x1abc32(0x120)]();const _0x290170=currentSession[_0x1abc32(0xf4)],_0x51bfc6=currentSession['id'],[_0x27fe2b,_0x1a61f8]=currentSession['start'][_0x1abc32(0xfc)](':')[_0x1abc32(0x177)](Number),[_0x31f9c9,_0x36d49d]=currentSession[_0x1abc32(0x18a)][_0x1abc32(0xfc)](':')['map'](Number),_0x5f1cf6=_0x31f9c9*0x3c+_0x36d49d-(_0x27fe2b*0x3c+_0x1a61f8),[_0x58704e,_0x368903]=_0x1bb901[_0x1abc32(0xfc)](':')['map'](Number),_0x27cda6=_0x58704e*0x3c+_0x368903+_0x5f1cf6,_0x52e0ed=Math['floor'](_0x27cda6/0x3c),_0x2d7aa2=_0x27cda6%0x3c,_0x4d7923=String(_0x52e0ed)[_0x1abc32(0xe5)](0x2,'0')+':'+String(_0x2d7aa2)[_0x1abc32(0xe5)](0x2,'0'),_0x2b1a45=sessions[_0x1abc32(0xed)](_0x33df94=>_0x33df94['id']===_0x51bfc6);_0x2b1a45!==-0x1&&(sessions[_0x2b1a45]['dateStr']=selectedRsDate,sessions[_0x2b1a45]['start']=_0x1bb901,sessions[_0x2b1a45][_0x1abc32(0x18a)]=_0x4d7923,reRenderBlocks());try{const _0x564ae9=window[_0x1abc32(0x134)]?.['WebApp'],_0x5a0fcf=await fetch(API_URL,{'method':_0x1abc32(0x156),'body':JSON['stringify']({'action':'reschedule','init_data':_0x564ae9?.[_0x1abc32(0x18c)]||'','oldSessionId':_0x51bfc6,'oldDate':_0x290170,'newDate':selectedRsDate,'newTime':_0x1bb901,'coachId':currentSession[_0x1abc32(0x19d)]})}),_0x165f58=await _0x5a0fcf[_0x1abc32(0xf2)]();!_0x165f58['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x1abc32(0x13f)]()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x1abc32(0x15f)]());}catch(_0x47663b){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x34cb26(0xe4)](a3_0x34cb26(0x11c),init);