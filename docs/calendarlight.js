const a3_0x158097=a3_0xe144;(function(_0x4a90de,_0x2fcbc6){const _0x58cf97=a3_0xe144,_0xe53041=_0x4a90de();while(!![]){try{const _0x2a5f20=-parseInt(_0x58cf97(0x212))/0x1+parseInt(_0x58cf97(0x1d9))/0x2+-parseInt(_0x58cf97(0x230))/0x3+-parseInt(_0x58cf97(0x1bd))/0x4+parseInt(_0x58cf97(0x223))/0x5*(parseInt(_0x58cf97(0x257))/0x6)+parseInt(_0x58cf97(0x296))/0x7*(-parseInt(_0x58cf97(0x292))/0x8)+parseInt(_0x58cf97(0x24f))/0x9;if(_0x2a5f20===_0x2fcbc6)break;else _0xe53041['push'](_0xe53041['shift']());}catch(_0x390bc7){_0xe53041['push'](_0xe53041['shift']());}}}(a3_0x2596,0xcb061));const APP_VERSION=a3_0x158097(0x1b3),API_URL=a3_0x158097(0x1b2),GRID_H=0x3c,KEY_SESSIONS=a3_0x158097(0x268),KEY_SETTINGS=a3_0x158097(0x256),KEY_CLIENTS=a3_0x158097(0x232);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x158097(0x281),coachProfiles={},currentSession=null,lastUserActionTime=0x0;function a3_0xe144(_0x1022c7,_0x1c6db7){_0x1022c7=_0x1022c7-0x1a0;const _0x4cb18b=a3_0x2596();let _0x3417d1=_0x4cb18b[_0x1022c7];return _0x3417d1;}function a3_0x2596(){const _0x3aaf65=['blocked-slot\x20stripe-bg','block','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','getAttribute','completed','top','total','–∑–∞\x20','1870836HiWdjO','dateStr','map','now','search','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','seriesId','saveLocally','long','getMinutes','numeric','setDate','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','cancelHint','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','auto','\x20—á.','anPercent','setHours','client_load','start','done','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','toast','gridColumns','planned','color','json','2219418agrIRw','rsDatesTrack','stopPropagation','syncLoad','.btn-reschedule','firstChild','fontWeight','reschedule','flex','analyticsList','loadLocal','.period-switch\x20.p-btn','timeColumn','getDay','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','borderLeftColor','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','\x20–≤\x20','colIndex','substring','visible','getHours','backgroundPosition','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','split','display','onclick','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','blocked-range-part\x20stripe-bg','overlay','.btn-cancel','day-column\x20','length','clientId','day-off-overlay\x20stripe-bg','var(--acc-blue)','</div><div\x20class=\x22dch-num\x22>','cid','disableVerticalSwipes','max','status','POST','get_slots','</div>','show','detNote','.sheet','keys','</span>\x20/\x20','settings','ccTitle','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','data-date','width','px\x20-','ccYesBtn','initDataUnsafe','511180wfeUEL','isArray','detailsSheet','anDonutCircle','\x20status-completed','toLocaleString','classList','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','cancel_window','600','exceptions','setAttribute','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','parse','timeLineBadge','height','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','5ISunpr','client_cancel','DOMContentLoaded','join','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','substr','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','add','calendar','zIndex','data-day-idx','client-stat-card','end','3348894DPORgH','coach_profiles','uc_client_list','onClick','time-label',':00</span>','entries','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','\x20-\x20','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','textContent','(((.+)+)+)+$','round','active','anEnd','globalTimeLine','test','clients','button','filter','daysHeaderTrack','T00:00:00','Telegram','<div\x20class=\x22rs-day-name\x22>','sid','href','div','getItem','createElement','14802714bLYEhr','note','#050505','toString','backgroundColor','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','</div><div\x20class=\x22rs-day-num\x22>','uc_client_settings','8904936fcUOus','cancelled','customConfirm','ranges','querySelector','today','anStart','event-card','setItem','startsWith','rgba(10,\x20132,\x20255,\x20','min','getElementById','sort','router.html','initData','\x20–∏–∑\x20','uc_client_sessions','offsetLeft','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','calc(','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','log','className','rsSlotsGrid','then','rescheduleSheet','%\x20-\x204px)','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','ru-RU','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','stringify','custom','rgba(','.day-col-header[data-date=\x22','open','insertBefore','slice','value','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','getDate','week','setBackgroundColor','left','padStart','scroll','location','innerHTML','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','ccText','px\x200px','style','toLocaleDateString','expand','month','offsetWidth','mini','none','10494712EowXje','remove','Critical\x20TMA\x20Error:','querySelectorAll','7UAYwBQ','floor','forEach','pattern','getMonth','matrixViewport','.day-column','scrollWidth','push','getTime','–û—Ç–º–µ–Ω–µ–Ω–æ','clientWidth','#0a84ff','data','appendChild','BackButton','coachId','WebApp','createDocumentFragment','scrollLeft','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','getFullYear','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','v9.5-CLIENT-ANALYTICS','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ'];a3_0x2596=function(){return _0x3aaf65;};return a3_0x2596();}(function initTMA(){const _0x38de55=a3_0x158097,_0x3b5c92=(function(){let _0x1dff9d=!![];return function(_0x1f6c37,_0x46b5fd){const _0x4d0df3=_0x1dff9d?function(){if(_0x46b5fd){const _0xa3f96a=_0x46b5fd['apply'](_0x1f6c37,arguments);return _0x46b5fd=null,_0xa3f96a;}}:function(){};return _0x1dff9d=![],_0x4d0df3;};}()),_0x36ef6f=_0x3b5c92(this,function(){const _0x291ef1=a3_0xe144;return _0x36ef6f[_0x291ef1(0x252)]()[_0x291ef1(0x1c1)](_0x291ef1(0x23d))[_0x291ef1(0x252)]()['constructor'](_0x36ef6f)[_0x291ef1(0x1c1)](_0x291ef1(0x23d));});_0x36ef6f();try{const _0x5c444f=window['Telegram']?.['WebApp'];if(!_0x5c444f)return;_0x5c444f['ready'](),_0x5c444f[_0x38de55(0x28d)]();try{_0x5c444f['setHeaderColor'](_0x38de55(0x251)),_0x5c444f[_0x38de55(0x282)]&&_0x5c444f[_0x38de55(0x282)](_0x38de55(0x251));}catch(_0x255c30){console[_0x38de55(0x26d)]('Error\x20setting\x20color:',_0x255c30);}try{_0x5c444f['BackButton']&&(_0x5c444f[_0x38de55(0x1ab)][_0x38de55(0x205)](),_0x5c444f[_0x38de55(0x1ab)]['offClick'](),_0x5c444f[_0x38de55(0x1ab)][_0x38de55(0x233)](function(){const _0x34a789=_0x38de55;window[_0x34a789(0x286)][_0x34a789(0x24b)]=_0x34a789(0x265);}));}catch(_0x56bae3){console[_0x38de55(0x26d)]('Error\x20setting\x20back\x20button:',_0x56bae3);}try{if(_0x5c444f[_0x38de55(0x1ff)])_0x5c444f[_0x38de55(0x1ff)]();}catch(_0x4059b5){}}catch(_0x251750){console['error'](_0x38de55(0x294),_0x251750);}}());function isAdmin(){const _0x2c8369=a3_0x158097;try{const _0x51d707=Number(window[_0x2c8369(0x248)]?.[_0x2c8369(0x1ad)]?.[_0x2c8369(0x211)]?.['user']?.['id']);return _0x51d707===0xbaf7174;}catch(_0x10ee0f){return![];}}const DataManager={'saveLocally'(){const _0x514fa6=a3_0x158097;try{localStorage['setItem'](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x514fa6(0x25f)](KEY_CLIENTS,JSON[_0x514fa6(0x277)](clients)),localStorage[_0x514fa6(0x25f)](KEY_SETTINGS,JSON[_0x514fa6(0x277)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x437b19){}},'loadLocal'(){const _0x1f6e53=a3_0x158097;try{const _0x9ef798=localStorage['getItem'](KEY_SESSIONS);if(_0x9ef798)sessions=JSON[_0x1f6e53(0x21f)](_0x9ef798);const _0x270391=localStorage['getItem'](KEY_CLIENTS);if(_0x270391)clients=JSON[_0x1f6e53(0x21f)](_0x270391);const _0x4a187e=localStorage[_0x1f6e53(0x24d)](KEY_SETTINGS);if(_0x4a187e){const _0x16943a=JSON[_0x1f6e53(0x21f)](_0x4a187e);if(_0x16943a[_0x1f6e53(0x299)])availabilityPattern=_0x16943a[_0x1f6e53(0x299)];if(_0x16943a[_0x1f6e53(0x25a)])specialRanges=_0x16943a[_0x1f6e53(0x25a)];if(_0x16943a[_0x1f6e53(0x21c)])dateExceptions=_0x16943a[_0x1f6e53(0x21c)];}}catch(_0x21f316){}},async 'syncLoad'(){const _0x5bdcfb=a3_0x158097,_0x235eff=new Date(),_0x1f2cab=_0x235eff[_0x5bdcfb(0x1b1)]()+'-'+String(_0x235eff['getMonth']()+0x1)[_0x5bdcfb(0x284)](0x2,'0'),_0x20e38b=new Date(_0x235eff);_0x20e38b['setMonth'](_0x235eff[_0x5bdcfb(0x1a0)]()+0x1);const _0x14cf60=_0x20e38b[_0x5bdcfb(0x1b1)]()+'-'+String(_0x20e38b[_0x5bdcfb(0x1a0)]()+0x1)[_0x5bdcfb(0x284)](0x2,'0'),_0xed7ea7=Date['now']();try{const _0x438bd0=window['Telegram']?.[_0x5bdcfb(0x1ad)],_0xe9afc6=_0x438bd0?.['initData']||'',[_0x597bf5,_0x5b8116]=await Promise['all']([fetch(API_URL,{'method':_0x5bdcfb(0x202),'body':JSON[_0x5bdcfb(0x277)]({'action':_0x5bdcfb(0x1d0),'init_data':_0xe9afc6,'month_str':_0x1f2cab})})[_0x5bdcfb(0x270)](_0xa1fc1c=>_0xa1fc1c['json']()),fetch(API_URL,{'method':_0x5bdcfb(0x202),'body':JSON[_0x5bdcfb(0x277)]({'action':_0x5bdcfb(0x1d0),'init_data':_0xe9afc6,'month_str':_0x14cf60})})['then'](_0x26d72d=>_0x26d72d[_0x5bdcfb(0x1d8)]())]);if(lastUserActionTime>_0xed7ea7){console[_0x5bdcfb(0x26d)](_0x5bdcfb(0x219));return;}if(_0x597bf5['ok'])this['applyData'](_0x597bf5[_0x5bdcfb(0x1a9)],_0x1f2cab);if(_0x5b8116['ok'])this['applyData'](_0x5b8116['data'],_0x14cf60);this['saveLocally']();}catch(_0x3ff01a){}},'applyData'(_0x304145,_0x315cba){const _0x5d7812=a3_0x158097;if(!_0x304145)return;if(_0x304145[_0x5d7812(0x20a)]){if(_0x304145['settings']['pattern'])availabilityPattern=_0x304145[_0x5d7812(0x20a)][_0x5d7812(0x299)];if(_0x304145[_0x5d7812(0x20a)]['ranges'])specialRanges=_0x304145[_0x5d7812(0x20a)]['ranges'];if(_0x304145[_0x5d7812(0x20a)]['exceptions'])dateExceptions=_0x304145[_0x5d7812(0x20a)][_0x5d7812(0x21c)];}if(_0x304145[_0x5d7812(0x243)]&&Array[_0x5d7812(0x213)](_0x304145[_0x5d7812(0x243)]))clients=_0x304145[_0x5d7812(0x243)];_0x304145['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x304145[_0x5d7812(0x231)]}),_0x304145[_0x5d7812(0x22b)]&&(sessions=sessions[_0x5d7812(0x245)](_0x20b0f4=>!_0x20b0f4['dateStr'][_0x5d7812(0x260)](_0x315cba)),Object['keys'](_0x304145[_0x5d7812(0x22b)])[_0x5d7812(0x298)](_0x284f13=>{const _0x2d078b=_0x5d7812,_0x547318=_0x304145[_0x2d078b(0x22b)][_0x284f13];_0x547318[_0x2d078b(0x298)](_0x427f2b=>{const _0x5d5799=_0x2d078b;sessions[_0x5d5799(0x1a4)]({'id':_0x427f2b['i'],'clientId':_0x427f2b['c'],'coachId':_0x427f2b[_0x5d5799(0x1fe)],'dateStr':_0x315cba+'-'+_0x284f13[_0x5d5799(0x284)](0x2,'0'),'start':_0x427f2b['s'],'end':_0x427f2b['e'],'note':_0x427f2b['n']||'','status':_0x427f2b['st']||_0x5d5799(0x1d6),'seriesId':_0x427f2b[_0x5d5799(0x24a)]});});})),reRenderBlocks();}};function init(){const _0x1dd7d3=a3_0x158097;DataManager[_0x1dd7d3(0x1e3)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x1dd7d3(0x1a1))['addEventListener'](_0x1dd7d3(0x285),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x1dd7d3(0x1dc)]();}function renderTimeColumn(){const _0x3aa63e=a3_0x158097,_0x53097c=document[_0x3aa63e(0x263)](_0x3aa63e(0x1e5)),_0x5e093a=document[_0x3aa63e(0x263)](_0x3aa63e(0x220));_0x53097c['innerHTML']='',_0x53097c[_0x3aa63e(0x1aa)](_0x5e093a);for(let _0x16a442=0x0;_0x16a442<0x18;_0x16a442++){const _0x20bd4c=document['createElement'](_0x3aa63e(0x24c));_0x20bd4c[_0x3aa63e(0x26e)]=_0x3aa63e(0x234);if(_0x16a442>0x0)_0x20bd4c['innerHTML']='<span>'+String(_0x16a442)[_0x3aa63e(0x284)](0x2,'0')+_0x3aa63e(0x235);_0x53097c[_0x3aa63e(0x1aa)](_0x20bd4c);}}function renderDayRange(_0x41ef9b,_0x3fc7be){const _0x9a8376=a3_0x158097,_0x165e8d=document['getElementById'](_0x9a8376(0x246)),_0x5f4b7f=document['getElementById']('gridColumns'),_0x434cce=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x3950e7=new Date();_0x3950e7[_0x9a8376(0x1cf)](0x0,0x0,0x0,0x0);const _0x468616=getLocalDateStr(new Date());for(let _0x36596c=_0x41ef9b;_0x36596c<=_0x3fc7be;_0x36596c++){const _0x5d6d42=new Date(_0x3950e7);_0x5d6d42[_0x9a8376(0x1c8)](_0x5d6d42[_0x9a8376(0x280)]()+_0x36596c);const _0x55e077=getLocalDateStr(_0x5d6d42);let _0x5800e9=_0x5d6d42[_0x9a8376(0x1e6)]()-0x1;if(_0x5800e9===-0x1)_0x5800e9=0x6;const _0x2b4d40=_0x55e077===_0x468616,_0x5f3b44=document[_0x9a8376(0x24e)](_0x9a8376(0x24c));_0x5f3b44[_0x9a8376(0x26e)]='day-col-header\x20'+(_0x2b4d40?_0x9a8376(0x25c):''),_0x5f3b44[_0x9a8376(0x21d)](_0x9a8376(0x20d),_0x55e077),_0x5f3b44[_0x9a8376(0x287)]='<div\x20class=\x22dch-day\x22>'+_0x434cce[_0x5800e9]+'</div><div\x20class=\x22dch-num\x22>'+_0x5d6d42[_0x9a8376(0x280)]()+'</div>',_0x165e8d[_0x9a8376(0x1aa)](_0x5f3b44);const _0x194e0e=document['createElement']('div');_0x194e0e[_0x9a8376(0x26e)]=_0x9a8376(0x1f8)+(_0x2b4d40?_0x9a8376(0x25c):''),_0x194e0e[_0x9a8376(0x21d)](_0x9a8376(0x20d),_0x55e077),_0x194e0e[_0x9a8376(0x21d)](_0x9a8376(0x22d),_0x5800e9),_0x5f4b7f[_0x9a8376(0x1aa)](_0x194e0e);}}function reRenderBlocks(){const _0x2c01c2=a3_0x158097;document[_0x2c01c2(0x295)](_0x2c01c2(0x1a2))['forEach'](_0xd91e55=>{const _0x3b914d=_0x2c01c2;_0xd91e55[_0x3b914d(0x295)](_0x3b914d(0x26c))[_0x3b914d(0x298)](_0xeebd25=>_0xeebd25[_0x3b914d(0x293)]());const _0x5989f4=_0xd91e55[_0x3b914d(0x1b8)]('data-date'),_0x3c7abf=parseInt(_0xd91e55[_0x3b914d(0x1b8)](_0x3b914d(0x22d))),_0xf35daf=Math['round'](_0xd91e55['offsetLeft']);(availabilityPattern[_0x3c7abf]||[])[_0x3b914d(0x298)](_0x4d5c64=>{const _0x5c275b=_0x3b914d,_0x404d23=document[_0x5c275b(0x24e)](_0x5c275b(0x24c));_0x404d23[_0x5c275b(0x26e)]=_0x5c275b(0x1b5),_0x404d23[_0x5c275b(0x28b)][_0x5c275b(0x1ba)]=_0x4d5c64*GRID_H+'px',_0x404d23[_0x5c275b(0x28b)][_0x5c275b(0x1ef)]='-'+_0xf35daf+_0x5c275b(0x20f)+_0x4d5c64*GRID_H+'px',_0xd91e55[_0x5c275b(0x1aa)](_0x404d23);});if(specialRanges[_0x3b914d(0x1f9)]>0x0){const _0x526e02=new Date(_0x5989f4+_0x3b914d(0x247))['getTime'](),_0x158890=new Date(_0x5989f4+'T23:59:59')[_0x3b914d(0x1a5)]();specialRanges[_0x3b914d(0x298)](_0x115bf5=>{const _0x43d822=_0x3b914d,_0x3a1978=new Date(_0x115bf5[_0x43d822(0x1d1)])[_0x43d822(0x1a5)](),_0x2d40fc=new Date(_0x115bf5[_0x43d822(0x22f)])['getTime'](),_0x5e7f17=Math[_0x43d822(0x200)](_0x526e02,_0x3a1978),_0x19feb5=Math[_0x43d822(0x262)](_0x158890,_0x2d40fc);if(_0x5e7f17<_0x19feb5){const _0x3ad688=(_0x5e7f17-_0x526e02)/0x36ee80*GRID_H,_0x43343c=(_0x19feb5-_0x5e7f17)/0x36ee80*GRID_H,_0x2de970=document[_0x43d822(0x24e)](_0x43d822(0x24c));_0x43343c>=23.5*GRID_H?(_0x2de970[_0x43d822(0x26e)]=_0x43d822(0x1fb),_0x2de970[_0x43d822(0x28b)][_0x43d822(0x1ef)]='-'+_0xf35daf+_0x43d822(0x28a)):(_0x2de970['className']=_0x43d822(0x1f5),_0x2de970[_0x43d822(0x28b)][_0x43d822(0x1ba)]=_0x3ad688+'px',_0x2de970[_0x43d822(0x28b)][_0x43d822(0x221)]=_0x43343c+'px',_0x2de970[_0x43d822(0x28b)][_0x43d822(0x1ef)]='-'+_0xf35daf+'px\x20-'+_0x3ad688+'px'),_0xd91e55[_0x43d822(0x1aa)](_0x2de970);}});}renderEventsForColumn(_0xd91e55,_0x5989f4);});}function renderEventsForColumn(_0x455f2c,_0x326dc7){const _0x3add85=a3_0x158097,_0x4be20a=sessions[_0x3add85(0x245)](_0x44d15a=>_0x44d15a[_0x3add85(0x1be)]===_0x326dc7),_0x20ca9d=_0x4be20a['map'](_0x298d41=>{const _0x2291b3=_0x3add85,[_0x329e9f,_0x345f0a]=_0x298d41[_0x2291b3(0x1d1)][_0x2291b3(0x1f1)](':')[_0x2291b3(0x1bf)](Number),[_0x31fbc4,_0x26b5e4]=_0x298d41[_0x2291b3(0x22f)][_0x2291b3(0x1f1)](':')[_0x2291b3(0x1bf)](Number);return{'data':_0x298d41,'start':_0x329e9f*0x3c+_0x345f0a,'end':_0x31fbc4*0x3c+_0x26b5e4,'colIndex':0x0};});_0x20ca9d[_0x3add85(0x264)]((_0x30dd00,_0x3a1305)=>_0x30dd00[_0x3add85(0x1d1)]-_0x3a1305[_0x3add85(0x1d1)]||_0x3a1305[_0x3add85(0x22f)]-_0x3a1305[_0x3add85(0x1d1)]-(_0x30dd00[_0x3add85(0x22f)]-_0x30dd00[_0x3add85(0x1d1)]));const _0x22c71b=[];_0x20ca9d[_0x3add85(0x298)](_0x3665e4=>{const _0x3acfe4=_0x3add85;let _0x25902f=![];for(let _0x5b8348=0x0;_0x5b8348<_0x22c71b[_0x3acfe4(0x1f9)];_0x5b8348++){const _0xfe1f9b=_0x22c71b[_0x5b8348];if(_0x3665e4[_0x3acfe4(0x1d1)]>=_0xfe1f9b[_0xfe1f9b[_0x3acfe4(0x1f9)]-0x1]['end']){_0xfe1f9b[_0x3acfe4(0x1a4)](_0x3665e4),_0x3665e4[_0x3acfe4(0x1eb)]=_0x5b8348,_0x25902f=!![];break;}}!_0x25902f&&(_0x22c71b[_0x3acfe4(0x1a4)]([_0x3665e4]),_0x3665e4[_0x3acfe4(0x1eb)]=_0x22c71b['length']-0x1);}),_0x20ca9d[_0x3add85(0x298)](_0x19672f=>{const _0x248e71=_0x3add85;let _0x1ac96e=0x0;_0x20ca9d[_0x248e71(0x298)](_0x2dfbc1=>{const _0x5220ba=_0x248e71;if(Math['max'](_0x19672f['start'],_0x2dfbc1[_0x5220ba(0x1d1)])<Math[_0x5220ba(0x262)](_0x19672f[_0x5220ba(0x22f)],_0x2dfbc1[_0x5220ba(0x22f)])&&_0x2dfbc1[_0x5220ba(0x1eb)]>_0x1ac96e)_0x1ac96e=_0x2dfbc1[_0x5220ba(0x1eb)];});const _0x42fa41=_0x1ac96e+0x1,_0x253d88=0x64/_0x42fa41,_0x58c608=_0x19672f[_0x248e71(0x1eb)]*_0x253d88,_0x502afa=document[_0x248e71(0x24e)](_0x248e71(0x24c)),_0x559e7c=_0x19672f['data'];let _0x483e2f=_0x248e71(0x1a8);if(clients&&clients[_0x248e71(0x1f9)]>0x0){const _0x4589c2=clients['find'](_0x191981=>String(_0x191981['id'])===String(_0x559e7c[_0x248e71(0x1fa)]));if(_0x4589c2&&_0x4589c2[_0x248e71(0x1d7)])_0x483e2f=_0x4589c2[_0x248e71(0x1d7)];}const _0x3fb319=_0x559e7c[_0x248e71(0x201)]===_0x248e71(0x1b9),_0x9e043e=_0x3fb319?0x1:0.45;_0x502afa['className']=_0x248e71(0x25e)+(_0x3fb319?_0x248e71(0x216):''),_0x502afa[_0x248e71(0x28b)][_0x248e71(0x253)]=hexToRgba(_0x483e2f,_0x9e043e),_0x502afa[_0x248e71(0x28b)][_0x248e71(0x1e8)]=_0x483e2f;const _0x2c52bb=_0x19672f['start']/0x3c*GRID_H,_0x54bc8b=(_0x19672f[_0x248e71(0x22f)]-_0x19672f[_0x248e71(0x1d1)])/0x3c*GRID_H;_0x502afa[_0x248e71(0x28b)][_0x248e71(0x1ba)]=_0x2c52bb+'px',_0x502afa[_0x248e71(0x28b)][_0x248e71(0x221)]=Math[_0x248e71(0x200)](_0x54bc8b,0x14)+'px',_0x502afa['style'][_0x248e71(0x20e)]=_0x248e71(0x26b)+_0x253d88+_0x248e71(0x272),_0x502afa[_0x248e71(0x28b)][_0x248e71(0x283)]=_0x248e71(0x26b)+_0x58c608+'%\x20+\x202px)',_0x502afa[_0x248e71(0x28b)][_0x248e71(0x22c)]=0xa+_0x19672f[_0x248e71(0x1eb)];if(_0x253d88<0x55)_0x502afa['classList'][_0x248e71(0x22a)](_0x248e71(0x290));let _0x3d5385='';if(_0x559e7c[_0x248e71(0x1c3)])_0x3d5385+=_0x248e71(0x1e7);if(_0x3fb319)_0x3d5385+=_0x248e71(0x1c9);_0x502afa['innerHTML']=_0x248e71(0x237)+_0x559e7c[_0x248e71(0x1d1)]+_0x248e71(0x238)+_0x559e7c['end']+_0x248e71(0x1f4)+_0x3d5385+_0x248e71(0x276),_0x502afa[_0x248e71(0x1f3)]=_0x402f4e=>{const _0x5a9af3=_0x248e71;_0x402f4e[_0x5a9af3(0x1db)](),openDetails(_0x559e7c);},_0x455f2c[_0x248e71(0x1aa)](_0x502afa);});}function openAnalytics(){const _0x5e15dc=a3_0x158097,_0x1d5226=document['querySelector'](_0x5e15dc(0x1e4));setAnalyticsPeriod(_0x5e15dc(0x281),_0x1d5226),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x18dd9f,_0x5e01fc){const _0x14f0c8=a3_0x158097;currentAnPeriod=_0x18dd9f,document[_0x14f0c8(0x295)](_0x14f0c8(0x1e4))['forEach'](_0x269255=>_0x269255[_0x14f0c8(0x218)][_0x14f0c8(0x293)](_0x14f0c8(0x23f)));if(_0x5e01fc)_0x5e01fc['classList'][_0x14f0c8(0x22a)](_0x14f0c8(0x23f));const _0x1e4598=document[_0x14f0c8(0x263)]('anCustomDates');_0x1e4598['style'][_0x14f0c8(0x1f2)]=_0x18dd9f===_0x14f0c8(0x278)?_0x14f0c8(0x1e1):'none';const _0x250280=new Date();let _0x29c81e=new Date(),_0x18494a=new Date();if(_0x18dd9f===_0x14f0c8(0x281))_0x29c81e=getStartOfWeek(_0x250280),_0x18494a=new Date(_0x29c81e),_0x18494a[_0x14f0c8(0x1c8)](_0x18494a[_0x14f0c8(0x280)]()+0x6);else{if(_0x18dd9f===_0x14f0c8(0x28e))_0x29c81e=new Date(_0x250280['getFullYear'](),_0x250280['getMonth'](),0x1),_0x18494a=new Date(_0x250280[_0x14f0c8(0x1b1)](),_0x250280['getMonth']()+0x1,0x0);else{!document['getElementById']('anStart')['value']&&(document[_0x14f0c8(0x263)](_0x14f0c8(0x25d))[_0x14f0c8(0x27e)]=getLocalDateStr(_0x250280),document[_0x14f0c8(0x263)](_0x14f0c8(0x240))[_0x14f0c8(0x27e)]=getLocalDateStr(_0x250280));refreshAnalytics();return;}}document[_0x14f0c8(0x263)](_0x14f0c8(0x25d))['value']=getLocalDateStr(_0x29c81e),document['getElementById'](_0x14f0c8(0x240))[_0x14f0c8(0x27e)]=getLocalDateStr(_0x18494a),refreshAnalytics();}function refreshAnalytics(){const _0x3fb725=a3_0x158097,_0x708462=document[_0x3fb725(0x263)](_0x3fb725(0x25d))[_0x3fb725(0x27e)],_0x1e4ad1=document['getElementById']('anEnd')[_0x3fb725(0x27e)];if(!_0x708462||!_0x1e4ad1)return;const _0x22d95b=sessions['filter'](_0x3321b1=>_0x3321b1[_0x3fb725(0x1be)]>=_0x708462&&_0x3321b1[_0x3fb725(0x1be)]<=_0x1e4ad1&&_0x3321b1[_0x3fb725(0x201)]!==_0x3fb725(0x258)),_0x514592=_0x22d95b[_0x3fb725(0x1f9)],_0xbd786d=_0x22d95b[_0x3fb725(0x245)](_0x1f9198=>_0x1f9198[_0x3fb725(0x201)]===_0x3fb725(0x1b9))['length'],_0x3ac4d2=_0x514592>0x0?Math[_0x3fb725(0x23e)](_0xbd786d/_0x514592*0x64):0x0;document['getElementById'](_0x3fb725(0x1ce))[_0x3fb725(0x23c)]=_0x3ac4d2+'%',document[_0x3fb725(0x263)]('anTotalStats')[_0x3fb725(0x23c)]=_0xbd786d+_0x3fb725(0x267)+_0x514592+_0x3fb725(0x1b4);const _0x12216b=document[_0x3fb725(0x263)](_0x3fb725(0x215)),_0x174477=0x2*Math['PI']*0x23,_0x5429c3=_0x174477-_0x3ac4d2/0x64*_0x174477;_0x12216b[_0x3fb725(0x28b)]['strokeDashoffset']=_0x5429c3;const _0x45ba11={};_0x22d95b[_0x3fb725(0x298)](_0x19c2fd=>{const _0x1ec08c=_0x3fb725,_0xc01d11=_0x19c2fd[_0x1ec08c(0x1ac)]||'Unknown';if(!_0x45ba11[_0xc01d11]){const _0x16ae84='#'+_0xc01d11[_0x1ec08c(0x252)]()[_0x1ec08c(0x228)](0x0,0x6);_0x45ba11[_0xc01d11]={'total':0x0,'done':0x0,'color':_0x16ae84};}_0x45ba11[_0xc01d11][_0x1ec08c(0x1bb)]++;if(_0x19c2fd[_0x1ec08c(0x201)]===_0x1ec08c(0x1b9))_0x45ba11[_0xc01d11][_0x1ec08c(0x1d2)]++;});const _0x4d3e2e=document['getElementById'](_0x3fb725(0x1e2));_0x4d3e2e[_0x3fb725(0x287)]='';const _0x34f4d5=Object[_0x3fb725(0x236)](_0x45ba11)[_0x3fb725(0x264)]((_0x6c5918,_0xeb17eb)=>_0xeb17eb[0x1][_0x3fb725(0x1bb)]-_0x6c5918[0x1][_0x3fb725(0x1bb)]);if(_0x34f4d5[_0x3fb725(0x1f9)]===0x0){_0x4d3e2e['innerHTML']=_0x3fb725(0x274);return;}_0x34f4d5[_0x3fb725(0x298)](([_0x13503,_0x1ce7d1])=>{const _0xad22ea=_0x3fb725,_0x68a240=Math[_0xad22ea(0x23e)](_0x1ce7d1[_0xad22ea(0x1d2)]/_0x1ce7d1[_0xad22ea(0x1bb)]*0x64),_0x5e395f=document[_0xad22ea(0x24e)](_0xad22ea(0x24c));_0x5e395f['className']=_0xad22ea(0x22e),_0x5e395f[_0xad22ea(0x28b)][_0xad22ea(0x1e8)]=_0x1ce7d1[_0xad22ea(0x1d7)],_0x5e395f[_0xad22ea(0x287)]=_0xad22ea(0x23b)+_0x13503[_0xad22ea(0x228)](0x0,0x5)+_0xad22ea(0x273)+_0x1ce7d1[_0xad22ea(0x1d2)]+_0xad22ea(0x209)+_0x1ce7d1[_0xad22ea(0x1bb)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x68a240+_0xad22ea(0x1f0),_0x4d3e2e[_0xad22ea(0x1aa)](_0x5e395f);});}function openDetails(_0x1454b9){const _0x27811d=a3_0x158097;currentSession=_0x1454b9;const _0x5c7497=new Date(_0x1454b9[_0x27811d(0x1be)]),_0x1817dd=_0x5c7497[_0x27811d(0x28c)](_0x27811d(0x275),{'weekday':'long','day':'numeric','month':_0x27811d(0x1c5)});document[_0x27811d(0x263)]('detDate')['textContent']=_0x1817dd['charAt'](0x0)['toUpperCase']()+_0x1817dd[_0x27811d(0x27d)](0x1),document[_0x27811d(0x263)]('detTime')[_0x27811d(0x23c)]=_0x1454b9['start']+_0x27811d(0x238)+_0x1454b9[_0x27811d(0x22f)],document['getElementById'](_0x27811d(0x206))['textContent']=_0x1454b9[_0x27811d(0x250)]||_0x27811d(0x227);const _0x1f9f3e=document[_0x27811d(0x263)]('detStatus'),_0x170143=document[_0x27811d(0x263)]('cancelContainer'),_0xf7518f=_0x170143[_0x27811d(0x25b)](_0x27811d(0x1f7)),_0x3388ea=_0x170143[_0x27811d(0x25b)](_0x27811d(0x1dd)),_0x5c866b=document[_0x27811d(0x263)](_0x27811d(0x1ca));if(_0x1454b9['status']===_0x27811d(0x1b9))_0x1f9f3e['textContent']=_0x27811d(0x1cb),_0x1f9f3e[_0x27811d(0x28b)]['color']='var(--acc-green)',_0x170143[_0x27811d(0x28b)]['display']=_0x27811d(0x291);else{_0x1f9f3e['textContent']='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x1f9f3e[_0x27811d(0x28b)][_0x27811d(0x1d7)]=_0x27811d(0x1fc),_0x170143[_0x27811d(0x28b)][_0x27811d(0x1f2)]=_0x27811d(0x1b6);const _0x4d4e5f=new Date(_0x1454b9[_0x27811d(0x1be)]+'T'+_0x1454b9['start']),_0x2e6e92=new Date(),_0x5d581d=(_0x4d4e5f-_0x2e6e92)/(0x3e8*0x3c*0x3c),_0x1e221d=coachProfiles[_0x1454b9[_0x27811d(0x1ac)]]&&coachProfiles[_0x1454b9[_0x27811d(0x1ac)]][_0x27811d(0x21a)]?parseInt(coachProfiles[_0x1454b9[_0x27811d(0x1ac)]][_0x27811d(0x21a)]):0x18;if(_0x1e221d===0x0||_0x5d581d>=_0x1e221d)_0xf7518f[_0x27811d(0x28b)]['display']='block',_0x3388ea['style'][_0x27811d(0x1f2)]=_0x27811d(0x1b6),_0x5c866b[_0x27811d(0x28b)][_0x27811d(0x1f2)]=_0x27811d(0x291);else{_0xf7518f['style'][_0x27811d(0x1f2)]='none',_0x3388ea['style']['display']=_0x27811d(0x291),_0x5c866b[_0x27811d(0x28b)][_0x27811d(0x1f2)]='block';let _0x1b2e97=_0x1e221d===0x0?_0x27811d(0x1d3):_0x27811d(0x1bc)+_0x1e221d+_0x27811d(0x1cd);_0x5c866b[_0x27811d(0x23c)]=_0x27811d(0x288)+_0x1b2e97+_0x27811d(0x26a);}}document[_0x27811d(0x263)](_0x27811d(0x1f6))[_0x27811d(0x218)][_0x27811d(0x22a)](_0x27811d(0x23f)),document[_0x27811d(0x263)](_0x27811d(0x214))[_0x27811d(0x218)][_0x27811d(0x22a)](_0x27811d(0x27b));}function closeAllSheets(){const _0x188159=a3_0x158097;document['getElementById'](_0x188159(0x1f6))[_0x188159(0x218)]['remove'](_0x188159(0x23f)),document[_0x188159(0x295)](_0x188159(0x207))[_0x188159(0x298)](_0x4cad82=>_0x4cad82[_0x188159(0x218)][_0x188159(0x293)](_0x188159(0x27b)));}function openSheet(_0x5f4b57){const _0x1b9d2a=a3_0x158097;document['getElementById'](_0x1b9d2a(0x1f6))[_0x1b9d2a(0x218)][_0x1b9d2a(0x22a)](_0x1b9d2a(0x23f)),document['getElementById'](_0x5f4b57)[_0x1b9d2a(0x218)][_0x1b9d2a(0x22a)](_0x1b9d2a(0x27b));}function getLocalDateStr(_0x5555d9){const _0x50b9a1=a3_0x158097,_0x4a60eb=_0x5555d9[_0x50b9a1(0x1b1)](),_0x2e346b=String(_0x5555d9[_0x50b9a1(0x1a0)]()+0x1)[_0x50b9a1(0x284)](0x2,'0'),_0x18feec=String(_0x5555d9[_0x50b9a1(0x280)]())['padStart'](0x2,'0');return _0x4a60eb+'-'+_0x2e346b+'-'+_0x18feec;}function getStartOfWeek(_0x14ec94){const _0x16ab0d=a3_0x158097,_0x570ef7=new Date(_0x14ec94),_0x753794=_0x570ef7['getDay'](),_0x1f3402=_0x570ef7[_0x16ab0d(0x280)]()-_0x753794+(_0x753794===0x0?-0x6:0x1);return _0x570ef7[_0x16ab0d(0x1c8)](_0x1f3402),_0x570ef7[_0x16ab0d(0x1cf)](0x0,0x0,0x0,0x0),_0x570ef7;}function scrollToToday(){const _0x4551a5=getLocalDateStr(new Date());setTimeout(()=>{const _0x5ee4c5=a3_0xe144,_0x11a861=document[_0x5ee4c5(0x25b)](_0x5ee4c5(0x27a)+_0x4551a5+'\x22]');if(_0x11a861){const _0x55bf21=document['getElementById'](_0x5ee4c5(0x1a1)),_0x4653e2=_0x11a861[_0x5ee4c5(0x269)]-_0x55bf21[_0x5ee4c5(0x1a7)]/0x2+_0x11a861[_0x5ee4c5(0x28f)]/0x2;_0x55bf21['scrollTo']({'left':_0x4653e2,'behavior':_0x5ee4c5(0x1cc)}),_0x55bf21['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x250a6c=a3_0x158097,_0x18ad29=new Date(),_0x2e0f6f=document[_0x250a6c(0x263)](_0x250a6c(0x241)),_0x9df1d3=document['getElementById'](_0x250a6c(0x220)),_0x25d092=(_0x18ad29[_0x250a6c(0x1ee)]()*0x3c+_0x18ad29[_0x250a6c(0x1c6)]())/0x3c*GRID_H;_0x2e0f6f[_0x250a6c(0x28b)]['top']=_0x25d092+'px',_0x2e0f6f[_0x250a6c(0x28b)]['display']='block',_0x9df1d3[_0x250a6c(0x28b)][_0x250a6c(0x1ba)]=_0x25d092+'px',_0x9df1d3[_0x250a6c(0x28b)][_0x250a6c(0x1f2)]=_0x250a6c(0x1b6),_0x9df1d3[_0x250a6c(0x23c)]=String(_0x18ad29['getHours']())[_0x250a6c(0x284)](0x2,'0')+':'+String(_0x18ad29[_0x250a6c(0x1c6)]())[_0x250a6c(0x284)](0x2,'0');}function onScroll(){const _0x1f947f=a3_0x158097,_0x35c87b=document['getElementById'](_0x1f947f(0x1a1)),_0x57248e=document[_0x1f947f(0x295)]('.day-col-header');for(let _0x421aca of _0x57248e)if(_0x421aca['offsetLeft']>=_0x35c87b[_0x1f947f(0x1af)]){const _0x57cd27=new Date(_0x421aca[_0x1f947f(0x1b8)](_0x1f947f(0x20d)));document['getElementById']('headerMonth')['textContent']=_0x57cd27[_0x1f947f(0x217)]('ru',{'month':_0x1f947f(0x1c5)})['toUpperCase']()+'\x20'+_0x57cd27[_0x1f947f(0x1b1)]();break;}}function showToast(_0x255902){const _0x320fb8=a3_0x158097,_0x307977=document[_0x320fb8(0x263)](_0x320fb8(0x1d4));_0x307977[_0x320fb8(0x23c)]=_0x255902,_0x307977['classList'][_0x320fb8(0x22a)]('show'),setTimeout(()=>_0x307977[_0x320fb8(0x218)][_0x320fb8(0x293)](_0x320fb8(0x205)),0x7d0);}function handleInfiniteScroll(){const _0x18443e=a3_0x158097,_0x192686=document['getElementById']('matrixViewport'),_0xc6161b=_0x192686[_0x18443e(0x1af)],_0x40e6f8=_0x192686[_0x18443e(0x1a3)],_0x2351fa=_0x192686[_0x18443e(0x1a7)];if(_0x40e6f8-(_0xc6161b+_0x2351fa)<0x12c){const _0x5d59ac=endOffset;endOffset+=0xe,renderDayRange(_0x5d59ac+0x1,endOffset),reRenderBlocks();}if(_0xc6161b<0x12c){const _0x1fbda7=startOffset;startOffset-=0xe,prependDays(startOffset,_0x1fbda7-0x1),_0x192686['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x6eefd6,_0x4b80d3){const _0x179717=a3_0x158097,_0xa9a1f0=document[_0x179717(0x263)](_0x179717(0x246)),_0x37f847=document['getElementById'](_0x179717(0x1d5)),_0x471f27=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x5d7eb2=new Date();_0x5d7eb2[_0x179717(0x1cf)](0x0,0x0,0x0,0x0);const _0x10cfa4=getLocalDateStr(new Date()),_0x39d105=document[_0x179717(0x1ae)](),_0x312ae4=document[_0x179717(0x1ae)]();for(let _0x436b6b=_0x6eefd6;_0x436b6b<=_0x4b80d3;_0x436b6b++){const _0x4ba19c=new Date(_0x5d7eb2);_0x4ba19c[_0x179717(0x1c8)](_0x4ba19c[_0x179717(0x280)]()+_0x436b6b);const _0xfef698=getLocalDateStr(_0x4ba19c);let _0x39d6ed=_0x4ba19c[_0x179717(0x1e6)]()-0x1;if(_0x39d6ed===-0x1)_0x39d6ed=0x6;const _0x1639da=_0xfef698===_0x10cfa4,_0x209f98=document['createElement'](_0x179717(0x24c));_0x209f98[_0x179717(0x26e)]='day-col-header\x20'+(_0x1639da?_0x179717(0x25c):''),_0x209f98[_0x179717(0x21d)](_0x179717(0x20d),_0xfef698),_0x209f98[_0x179717(0x287)]='<div\x20class=\x22dch-day\x22>'+_0x471f27[_0x39d6ed]+_0x179717(0x1fd)+_0x4ba19c[_0x179717(0x280)]()+'</div>',_0x39d105[_0x179717(0x1aa)](_0x209f98);const _0x273f2b=document[_0x179717(0x24e)](_0x179717(0x24c));_0x273f2b[_0x179717(0x26e)]=_0x179717(0x1f8)+(_0x1639da?_0x179717(0x25c):''),_0x273f2b[_0x179717(0x21d)]('data-date',_0xfef698),_0x273f2b['setAttribute']('data-day-idx',_0x39d6ed),_0x312ae4[_0x179717(0x1aa)](_0x273f2b);}_0xa9a1f0[_0x179717(0x27c)](_0x39d105,_0xa9a1f0[_0x179717(0x1de)]),_0x37f847[_0x179717(0x27c)](_0x312ae4,_0x37f847[_0x179717(0x25b)](_0x179717(0x1a2)));}function hexToRgba(_0x17b261,_0x18f59b){const _0x57d03f=a3_0x158097;let _0x3b215e;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x57d03f(0x242)](_0x17b261))return _0x3b215e=_0x17b261[_0x57d03f(0x1ec)](0x1)[_0x57d03f(0x1f1)](''),_0x3b215e[_0x57d03f(0x1f9)]==0x3&&(_0x3b215e=[_0x3b215e[0x0],_0x3b215e[0x0],_0x3b215e[0x1],_0x3b215e[0x1],_0x3b215e[0x2],_0x3b215e[0x2]]),_0x3b215e='0x'+_0x3b215e[_0x57d03f(0x226)](''),_0x57d03f(0x279)+[_0x3b215e>>0x10&0xff,_0x3b215e>>0x8&0xff,_0x3b215e&0xff][_0x57d03f(0x226)](',')+','+_0x18f59b+')';return _0x57d03f(0x261)+_0x18f59b+')';}let confirmResolver=null;function showCustomConfirm(_0x187d52,_0x360933,_0x5d95dd=!![]){const _0x21b382=a3_0x158097;document['getElementById'](_0x21b382(0x20b))['textContent']=_0x187d52,document[_0x21b382(0x263)](_0x21b382(0x289))[_0x21b382(0x23c)]=_0x360933;const _0x1876a7=document[_0x21b382(0x263)](_0x21b382(0x210));return _0x5d95dd?(_0x1876a7['style']['color']='#ff453a',_0x1876a7[_0x21b382(0x28b)][_0x21b382(0x1df)]=_0x21b382(0x21b)):(_0x1876a7[_0x21b382(0x28b)][_0x21b382(0x1d7)]='#0a84ff',_0x1876a7[_0x21b382(0x28b)][_0x21b382(0x1df)]=_0x21b382(0x21b)),new Promise(_0x2f8e05=>{const _0x1d324f=_0x21b382;confirmResolver=_0x2f8e05,document[_0x1d324f(0x263)](_0x1d324f(0x259))[_0x1d324f(0x218)]['add'](_0x1d324f(0x1ed));});}function resolveCustomConfirm(_0x1b622a){const _0x5927d4=a3_0x158097;document[_0x5927d4(0x263)]('customConfirm')['classList']['remove'](_0x5927d4(0x1ed));if(confirmResolver)confirmResolver(_0x1b622a);}async function tryCancelCurrentSession(){const _0x21b727=a3_0x158097;if(!currentSession)return;const _0x50b4b7=await showCustomConfirm(_0x21b727(0x239),_0x21b727(0x20c),!![]);if(!_0x50b4b7)return;const _0x435c68=currentSession;closeAllSheets(),sessions=sessions[_0x21b727(0x245)](_0x30f15c=>_0x30f15c['id']!==_0x435c68['id']),reRenderBlocks(),showToast(_0x21b727(0x1a6)),lastUserActionTime=Date[_0x21b727(0x1c0)]();try{const _0xf3d7dd=window[_0x21b727(0x248)]?.[_0x21b727(0x1ad)],_0x1bb36c=await fetch(API_URL,{'method':_0x21b727(0x202),'body':JSON[_0x21b727(0x277)]({'action':_0x21b727(0x224),'init_data':_0xf3d7dd?.[_0x21b727(0x266)]||'','coachId':_0x435c68[_0x21b727(0x1ac)],'dateStr':_0x435c68[_0x21b727(0x1be)],'sessionId':_0x435c68['id']})});if(_0x1bb36c['ok'])DataManager[_0x21b727(0x1c4)]();}catch(_0x4e03ff){showToast(_0x21b727(0x1c2));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x143a99=a3_0x158097;if(!currentSession)return;document['getElementById'](_0x143a99(0x214))['classList'][_0x143a99(0x293)](_0x143a99(0x27b)),document['getElementById'](_0x143a99(0x271))['classList'][_0x143a99(0x22a)](_0x143a99(0x27b));const _0x4d5770=document[_0x143a99(0x263)](_0x143a99(0x1da)),_0x58861b=document['getElementById'](_0x143a99(0x26f));_0x4d5770['innerHTML']='',_0x58861b[_0x143a99(0x287)]=_0x143a99(0x21e);const [_0x156586,_0xcf7136]=currentSession['start']['split'](':')[_0x143a99(0x1bf)](Number),[_0x1fe880,_0x2f1be5]=currentSession[_0x143a99(0x22f)]['split'](':')['map'](Number),_0x165dcb=_0x1fe880*0x3c+_0x2f1be5-(_0x156586*0x3c+_0xcf7136);try{const _0x48e962=window['Telegram']?.[_0x143a99(0x1ad)],_0x413c76=await fetch(API_URL,{'method':'POST','body':JSON[_0x143a99(0x277)]({'action':_0x143a99(0x203),'coachId':currentSession[_0x143a99(0x1ac)],'duration':_0x165dcb,'init_data':_0x48e962?.[_0x143a99(0x266)]||'','excludeSessionId':currentSession['id']})}),_0x390eed=await _0x413c76[_0x143a99(0x1d8)]();_0x390eed['ok']&&_0x390eed['data']?(availableSlotsCache=_0x390eed[_0x143a99(0x1a9)],renderRescheduleDates()):_0x58861b[_0x143a99(0x287)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x5bb447){_0x58861b[_0x143a99(0x287)]=_0x143a99(0x1b0);}}function renderRescheduleDates(){const _0x572f19=a3_0x158097,_0x13f5a1=document['getElementById'](_0x572f19(0x1da));_0x13f5a1[_0x572f19(0x287)]='';const _0x2e3f5c=Object[_0x572f19(0x208)](availableSlotsCache)[_0x572f19(0x264)](),_0x37d8e2=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x2e3f5c[_0x572f19(0x1f9)]===0x0){document[_0x572f19(0x263)]('rsSlotsGrid')[_0x572f19(0x287)]=_0x572f19(0x27f);return;}_0x2e3f5c[_0x572f19(0x298)]((_0x24611b,_0x59e8f9)=>{const _0x292d86=_0x572f19,_0x72e198=new Date(_0x24611b),_0x6accc8=_0x37d8e2[_0x72e198[_0x292d86(0x1e6)]()],_0x31689f=_0x72e198[_0x292d86(0x280)](),_0x2aeabf=document[_0x292d86(0x24e)](_0x292d86(0x24c));_0x2aeabf[_0x292d86(0x26e)]='rs-date-chip';if(_0x59e8f9===0x0)_0x2aeabf[_0x292d86(0x218)]['add'](_0x292d86(0x23f));_0x2aeabf[_0x292d86(0x287)]=_0x292d86(0x249)+_0x6accc8+_0x292d86(0x255)+_0x31689f+_0x292d86(0x204),_0x2aeabf[_0x292d86(0x1f3)]=()=>selectRsDate(_0x24611b,_0x2aeabf),_0x13f5a1['appendChild'](_0x2aeabf);}),selectRsDate(_0x2e3f5c[0x0],_0x13f5a1[_0x572f19(0x1de)]);}function selectRsDate(_0x299232,_0x577f5a){const _0xa9ce78=a3_0x158097;selectedRsDate=_0x299232,document[_0xa9ce78(0x295)]('.rs-date-chip')[_0xa9ce78(0x298)](_0x560db8=>_0x560db8[_0xa9ce78(0x218)]['remove'](_0xa9ce78(0x23f)));if(_0x577f5a)_0x577f5a[_0xa9ce78(0x218)][_0xa9ce78(0x22a)](_0xa9ce78(0x23f));const _0x4108d1=document[_0xa9ce78(0x263)](_0xa9ce78(0x26f));_0x4108d1[_0xa9ce78(0x287)]='';const _0x7e9d43=availableSlotsCache[_0x299232]||[];if(_0x7e9d43[_0xa9ce78(0x1f9)]===0x0){_0x4108d1[_0xa9ce78(0x287)]=_0xa9ce78(0x222);return;}_0x7e9d43[_0xa9ce78(0x298)](_0xad139e=>{const _0xce1cb6=_0xa9ce78,_0x5e54f6=document[_0xce1cb6(0x24e)](_0xce1cb6(0x244));_0x5e54f6[_0xce1cb6(0x26e)]='rs-time-btn',_0x5e54f6[_0xce1cb6(0x23c)]=_0xad139e,_0x5e54f6[_0xce1cb6(0x1f3)]=()=>confirmReschedule(_0xad139e),_0x4108d1[_0xce1cb6(0x1aa)](_0x5e54f6);});}async function confirmReschedule(_0x310589){const _0x44f138=a3_0x158097,_0xe582b5=new Date(selectedRsDate),_0x1166b0=_0xe582b5[_0x44f138(0x28c)]('ru-RU',{'day':_0x44f138(0x1c7),'month':_0x44f138(0x1c5)}),_0x58efc4=await showCustomConfirm(_0x44f138(0x1b7),_0x44f138(0x1e9)+_0x1166b0+_0x44f138(0x1ea)+_0x310589+'?',![]);if(!_0x58efc4)return;closeAllSheets(),showToast(_0x44f138(0x254)),lastUserActionTime=Date[_0x44f138(0x1c0)]();const _0x35c0cd=currentSession[_0x44f138(0x1be)],_0x53f724=currentSession['id'],[_0x2c8355,_0x1a8d17]=currentSession[_0x44f138(0x1d1)][_0x44f138(0x1f1)](':')[_0x44f138(0x1bf)](Number),[_0x5718f5,_0x3ecc5e]=currentSession[_0x44f138(0x22f)][_0x44f138(0x1f1)](':')[_0x44f138(0x1bf)](Number),_0x3f70b7=_0x5718f5*0x3c+_0x3ecc5e-(_0x2c8355*0x3c+_0x1a8d17),[_0x414bb6,_0x588c76]=_0x310589[_0x44f138(0x1f1)](':')['map'](Number),_0x4a2aa6=_0x414bb6*0x3c+_0x588c76+_0x3f70b7,_0x27be5b=Math[_0x44f138(0x297)](_0x4a2aa6/0x3c),_0x2cd710=_0x4a2aa6%0x3c,_0x5e9979=String(_0x27be5b)['padStart'](0x2,'0')+':'+String(_0x2cd710)['padStart'](0x2,'0'),_0x4d41b7=sessions['findIndex'](_0x3bfbc2=>_0x3bfbc2['id']===_0x53f724);_0x4d41b7!==-0x1&&(sessions[_0x4d41b7][_0x44f138(0x1be)]=selectedRsDate,sessions[_0x4d41b7][_0x44f138(0x1d1)]=_0x310589,sessions[_0x4d41b7]['end']=_0x5e9979,reRenderBlocks());try{const _0x1e732b=window[_0x44f138(0x248)]?.['WebApp'],_0x2be7df=await fetch(API_URL,{'method':'POST','body':JSON[_0x44f138(0x277)]({'action':_0x44f138(0x1e0),'init_data':_0x1e732b?.['initData']||'','oldSessionId':_0x53f724,'oldDate':_0x35c0cd,'newDate':selectedRsDate,'newTime':_0x310589,'coachId':currentSession[_0x44f138(0x1ac)]})}),_0x5bba5a=await _0x2be7df[_0x44f138(0x1d8)]();!_0x5bba5a['ok']?(showToast(_0x44f138(0x229)),DataManager[_0x44f138(0x1dc)]()):(showToast(_0x44f138(0x23a)),DataManager['saveLocally']());}catch(_0x6fdbeb){showToast(_0x44f138(0x1c2));}}document['addEventListener'](a3_0x158097(0x225),init);