const a3_0x296664=a3_0x52b9;(function(_0x1b31f5,_0x2103fa){const _0x39032f=a3_0x52b9,_0x19991a=_0x1b31f5();while(!![]){try{const _0x4eccae=parseInt(_0x39032f(0x1f2))/0x1*(-parseInt(_0x39032f(0x1f1))/0x2)+parseInt(_0x39032f(0x185))/0x3+-parseInt(_0x39032f(0x150))/0x4+-parseInt(_0x39032f(0x1a5))/0x5*(parseInt(_0x39032f(0x182))/0x6)+parseInt(_0x39032f(0x10c))/0x7*(-parseInt(_0x39032f(0x16e))/0x8)+-parseInt(_0x39032f(0x106))/0x9+-parseInt(_0x39032f(0x145))/0xa*(-parseInt(_0x39032f(0x19c))/0xb);if(_0x4eccae===_0x2103fa)break;else _0x19991a['push'](_0x19991a['shift']());}catch(_0x1cb1e2){_0x19991a['push'](_0x19991a['shift']());}}}(a3_0x520b,0xde1d2));const APP_VERSION=a3_0x296664(0x1be),API_URL=a3_0x296664(0x1d0),GRID_H=0x3c,KEY_SESSIONS=a3_0x296664(0x105),KEY_SETTINGS=a3_0x296664(0x146),KEY_CLIENTS=a3_0x296664(0x134);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x2cef21=a3_0x296664,_0x5f281d=(function(){let _0x42ae5c=!![];return function(_0x1b7ee9,_0x2f6a13){const _0x745991=_0x42ae5c?function(){const _0x48f5d8=a3_0x52b9;if(_0x2f6a13){const _0xb31b2a=_0x2f6a13[_0x48f5d8(0x166)](_0x1b7ee9,arguments);return _0x2f6a13=null,_0xb31b2a;}}:function(){};return _0x42ae5c=![],_0x745991;};}()),_0x46029f=_0x5f281d(this,function(){const _0x5d3c2e=a3_0x52b9;return _0x46029f[_0x5d3c2e(0x164)]()[_0x5d3c2e(0x1cd)](_0x5d3c2e(0x1df))[_0x5d3c2e(0x164)]()[_0x5d3c2e(0x15b)](_0x46029f)['search'](_0x5d3c2e(0x1df));});_0x46029f();try{const _0x5e40d2=window['Telegram']?.['WebApp'];if(!_0x5e40d2)return;_0x5e40d2[_0x2cef21(0x1c7)](),_0x5e40d2[_0x2cef21(0x1a7)]();try{_0x5e40d2['setHeaderColor']('#050505'),_0x5e40d2[_0x2cef21(0x16a)]&&_0x5e40d2['setBackgroundColor']('#050505');}catch(_0x23a430){console[_0x2cef21(0x1ce)](_0x2cef21(0x163),_0x23a430);}try{_0x5e40d2[_0x2cef21(0x15a)]&&(_0x5e40d2[_0x2cef21(0x15a)]['show'](),_0x5e40d2['BackButton'][_0x2cef21(0x1fc)](),_0x5e40d2[_0x2cef21(0x15a)][_0x2cef21(0x156)](function(){const _0x4bae9d=_0x2cef21;window[_0x4bae9d(0x1fa)]['href']='router.html';}));}catch(_0xbc64fc){console[_0x2cef21(0x1ce)](_0x2cef21(0x1ee),_0xbc64fc);}try{if(_0x5e40d2[_0x2cef21(0x12e)])_0x5e40d2['disableVerticalSwipes']();}catch(_0x2649db){}}catch(_0x3b98d7){console[_0x2cef21(0x125)](_0x2cef21(0x199),_0x3b98d7);}}());function isAdmin(){const _0x39b632=a3_0x296664;try{const _0x36155e=Number(window['Telegram']?.[_0x39b632(0x18a)]?.[_0x39b632(0x1ef)]?.['user']?.['id']);return _0x36155e===0xbaf7174;}catch(_0x1cc3ce){return![];}}const DataManager={'saveLocally'(){const _0x1cb3c3=a3_0x296664;try{localStorage[_0x1cb3c3(0x16c)](KEY_SESSIONS,JSON[_0x1cb3c3(0x15c)](sessions)),localStorage[_0x1cb3c3(0x16c)](KEY_CLIENTS,JSON[_0x1cb3c3(0x15c)](clients)),localStorage[_0x1cb3c3(0x16c)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0xcaa148){}},'loadLocal'(){const _0x123321=a3_0x296664;try{const _0xa80ed9=localStorage[_0x123321(0x137)](KEY_SESSIONS);if(_0xa80ed9)sessions=JSON['parse'](_0xa80ed9);const _0x1e0f29=localStorage[_0x123321(0x137)](KEY_CLIENTS);if(_0x1e0f29)clients=JSON[_0x123321(0x110)](_0x1e0f29);const _0x50266=localStorage[_0x123321(0x137)](KEY_SETTINGS);if(_0x50266){const _0x30cc0c=JSON[_0x123321(0x110)](_0x50266);if(_0x30cc0c[_0x123321(0x1da)])availabilityPattern=_0x30cc0c['pattern'];if(_0x30cc0c[_0x123321(0x155)])specialRanges=_0x30cc0c['ranges'];if(_0x30cc0c['exceptions'])dateExceptions=_0x30cc0c[_0x123321(0x1c1)];}}catch(_0x2fe6cf){}},async 'syncLoad'(){const _0x40887e=a3_0x296664,_0x167f7c=new Date(),_0x247298=_0x167f7c[_0x40887e(0x14b)]()+'-'+String(_0x167f7c[_0x40887e(0x1ab)]()+0x1)['padStart'](0x2,'0'),_0x140831=new Date(_0x167f7c);_0x140831[_0x40887e(0x144)](_0x167f7c[_0x40887e(0x1ab)]()+0x1);const _0x3e93fd=_0x140831[_0x40887e(0x14b)]()+'-'+String(_0x140831[_0x40887e(0x1ab)]()+0x1)['padStart'](0x2,'0'),_0x3e6bcb=Date[_0x40887e(0x16f)]();try{const _0x59339c=window[_0x40887e(0x1bf)]?.['WebApp'],_0x48c72d=_0x59339c?.['initData']||'',[_0x556a2a,_0x2ae4b9]=await Promise[_0x40887e(0x1c9)]([fetch(API_URL,{'method':_0x40887e(0x19f),'body':JSON[_0x40887e(0x15c)]({'action':_0x40887e(0x14c),'init_data':_0x48c72d,'month_str':_0x247298})})[_0x40887e(0x1f3)](_0x2f1ff4=>_0x2f1ff4['json']()),fetch(API_URL,{'method':_0x40887e(0x19f),'body':JSON[_0x40887e(0x15c)]({'action':'client_load','init_data':_0x48c72d,'month_str':_0x3e93fd})})[_0x40887e(0x1f3)](_0x20c222=>_0x20c222['json']())]);if(lastUserActionTime>_0x3e6bcb){console[_0x40887e(0x1ce)](_0x40887e(0x17d));return;}if(_0x556a2a['ok'])this[_0x40887e(0x194)](_0x556a2a[_0x40887e(0x1a1)],_0x247298);if(_0x2ae4b9['ok'])this[_0x40887e(0x194)](_0x2ae4b9[_0x40887e(0x1a1)],_0x3e93fd);this[_0x40887e(0x1e5)]();}catch(_0x35eecb){}},'applyData'(_0x15eff2,_0x14bb43){const _0x5c0bc8=a3_0x296664;if(!_0x15eff2)return;if(_0x15eff2[_0x5c0bc8(0x1af)]){if(_0x15eff2[_0x5c0bc8(0x1af)][_0x5c0bc8(0x1da)])availabilityPattern=_0x15eff2[_0x5c0bc8(0x1af)][_0x5c0bc8(0x1da)];if(_0x15eff2[_0x5c0bc8(0x1af)][_0x5c0bc8(0x155)])specialRanges=_0x15eff2[_0x5c0bc8(0x1af)]['ranges'];if(_0x15eff2['settings'][_0x5c0bc8(0x1c1)])dateExceptions=_0x15eff2[_0x5c0bc8(0x1af)][_0x5c0bc8(0x1c1)];}if(_0x15eff2[_0x5c0bc8(0x12f)]&&Array[_0x5c0bc8(0x1ec)](_0x15eff2['clients']))clients=_0x15eff2[_0x5c0bc8(0x12f)];_0x15eff2['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x15eff2['coach_profiles']}),_0x15eff2['calendar']&&(sessions=sessions['filter'](_0x5d7fc0=>!_0x5d7fc0[_0x5c0bc8(0x198)][_0x5c0bc8(0x113)](_0x14bb43)),Object[_0x5c0bc8(0x13b)](_0x15eff2[_0x5c0bc8(0x190)])['forEach'](_0x4a2be6=>{const _0x47ab90=_0x5c0bc8,_0x2572e3=_0x15eff2[_0x47ab90(0x190)][_0x4a2be6];_0x2572e3['forEach'](_0x2bed17=>{const _0x560f62=_0x47ab90;sessions[_0x560f62(0x169)]({'id':_0x2bed17['i'],'clientId':_0x2bed17['c'],'coachId':_0x2bed17['cid'],'dateStr':_0x14bb43+'-'+_0x4a2be6[_0x560f62(0x18d)](0x2,'0'),'start':_0x2bed17['s'],'end':_0x2bed17['e'],'note':_0x2bed17['n']||'','status':_0x2bed17['st']||'planned','seriesId':_0x2bed17[_0x560f62(0x184)]});});})),reRenderBlocks();}};function init(){const _0x1b2595=a3_0x296664;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x1b2595(0x193)](_0x1b2595(0x1ad))['addEventListener'](_0x1b2595(0x1de),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x9d6194=a3_0x296664,_0x3eaeb9=document[_0x9d6194(0x193)](_0x9d6194(0x11b)),_0x14b7a9=document[_0x9d6194(0x193)](_0x9d6194(0x16d));_0x3eaeb9[_0x9d6194(0x1e3)]='',_0x3eaeb9['appendChild'](_0x14b7a9);for(let _0x587af2=0x0;_0x587af2<0x18;_0x587af2++){const _0x1cfdcf=document[_0x9d6194(0x1dd)](_0x9d6194(0x12b));_0x1cfdcf[_0x9d6194(0x1cf)]=_0x9d6194(0x189);if(_0x587af2>0x0)_0x1cfdcf[_0x9d6194(0x1e3)]='<span>'+String(_0x587af2)[_0x9d6194(0x18d)](0x2,'0')+':00</span>';_0x3eaeb9[_0x9d6194(0x149)](_0x1cfdcf);}}function renderDayRange(_0x3baa83,_0x1a62ee){const _0x5c1ad2=a3_0x296664,_0x3b5035=document[_0x5c1ad2(0x193)](_0x5c1ad2(0x1a2)),_0x23ed45=document['getElementById'](_0x5c1ad2(0x103)),_0x4192d7=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2a82c9=new Date();_0x2a82c9[_0x5c1ad2(0x151)](0x0,0x0,0x0,0x0);const _0x469289=getLocalDateStr(new Date());for(let _0x506aed=_0x3baa83;_0x506aed<=_0x1a62ee;_0x506aed++){const _0x1c8ae1=new Date(_0x2a82c9);_0x1c8ae1[_0x5c1ad2(0x108)](_0x1c8ae1['getDate']()+_0x506aed);const _0x3afca6=getLocalDateStr(_0x1c8ae1);let _0x1cdd7b=_0x1c8ae1[_0x5c1ad2(0x117)]()-0x1;if(_0x1cdd7b===-0x1)_0x1cdd7b=0x6;const _0x489920=_0x3afca6===_0x469289,_0x52a38a=document[_0x5c1ad2(0x1dd)](_0x5c1ad2(0x12b));_0x52a38a[_0x5c1ad2(0x1cf)]=_0x5c1ad2(0x17e)+(_0x489920?_0x5c1ad2(0x154):''),_0x52a38a['setAttribute'](_0x5c1ad2(0x168),_0x3afca6),_0x52a38a['innerHTML']='<div\x20class=\x22dch-day\x22>'+_0x4192d7[_0x1cdd7b]+_0x5c1ad2(0x13a)+_0x1c8ae1[_0x5c1ad2(0x1f9)]()+_0x5c1ad2(0x1ca),_0x3b5035['appendChild'](_0x52a38a);const _0x5badca=document[_0x5c1ad2(0x1dd)]('div');_0x5badca['className']=_0x5c1ad2(0x161)+(_0x489920?_0x5c1ad2(0x154):''),_0x5badca[_0x5c1ad2(0x196)](_0x5c1ad2(0x168),_0x3afca6),_0x5badca[_0x5c1ad2(0x196)]('data-day-idx',_0x1cdd7b),_0x23ed45[_0x5c1ad2(0x149)](_0x5badca);}}function reRenderBlocks(){const _0xffa732=a3_0x296664;document[_0xffa732(0x1bb)](_0xffa732(0x10b))[_0xffa732(0x1ea)](_0x4edcbf=>{const _0x4c77b7=_0xffa732;_0x4edcbf[_0x4c77b7(0x1bb)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x4c77b7(0x1ea)](_0x56e700=>_0x56e700[_0x4c77b7(0x179)]());const _0x423c32=_0x4edcbf[_0x4c77b7(0x126)](_0x4c77b7(0x168)),_0x270c91=parseInt(_0x4edcbf[_0x4c77b7(0x126)]('data-day-idx')),_0x70072c=Math['round'](_0x4edcbf[_0x4c77b7(0x178)]);(availabilityPattern[_0x270c91]||[])[_0x4c77b7(0x1ea)](_0x29b1d2=>{const _0x3933ad=_0x4c77b7,_0x4dbfdc=document[_0x3933ad(0x1dd)](_0x3933ad(0x12b));_0x4dbfdc[_0x3933ad(0x1cf)]=_0x3933ad(0x18f),_0x4dbfdc['style']['top']=_0x29b1d2*GRID_H+'px',_0x4dbfdc[_0x3933ad(0x111)][_0x3933ad(0x11c)]='-'+_0x70072c+_0x3933ad(0x1d9)+_0x29b1d2*GRID_H+'px',_0x4edcbf[_0x3933ad(0x149)](_0x4dbfdc);});if(specialRanges[_0x4c77b7(0x186)]>0x0){const _0x4f81ec=new Date(_0x423c32+_0x4c77b7(0x11f))[_0x4c77b7(0x1b4)](),_0x2e17a6=new Date(_0x423c32+_0x4c77b7(0x1fb))['getTime']();specialRanges[_0x4c77b7(0x1ea)](_0x4f93bf=>{const _0x535e79=_0x4c77b7,_0x34786f=new Date(_0x4f93bf[_0x535e79(0x197)])['getTime'](),_0x50dab8=new Date(_0x4f93bf[_0x535e79(0x158)])[_0x535e79(0x1b4)](),_0x2965e7=Math['max'](_0x4f81ec,_0x34786f),_0x23d5d4=Math[_0x535e79(0x1e2)](_0x2e17a6,_0x50dab8);if(_0x2965e7<_0x23d5d4){const _0x3eab7d=(_0x2965e7-_0x4f81ec)/0x36ee80*GRID_H,_0x2f7750=(_0x23d5d4-_0x2965e7)/0x36ee80*GRID_H,_0x396bd3=document[_0x535e79(0x1dd)](_0x535e79(0x12b));_0x2f7750>=23.5*GRID_H?(_0x396bd3[_0x535e79(0x1cf)]=_0x535e79(0x1b1),_0x396bd3[_0x535e79(0x111)][_0x535e79(0x11c)]='-'+_0x70072c+'px\x200px'):(_0x396bd3[_0x535e79(0x1cf)]=_0x535e79(0x1c6),_0x396bd3[_0x535e79(0x111)]['top']=_0x3eab7d+'px',_0x396bd3[_0x535e79(0x111)][_0x535e79(0x107)]=_0x2f7750+'px',_0x396bd3['style'][_0x535e79(0x11c)]='-'+_0x70072c+'px\x20-'+_0x3eab7d+'px'),_0x4edcbf[_0x535e79(0x149)](_0x396bd3);}});}renderEventsForColumn(_0x4edcbf,_0x423c32);});}function renderEventsForColumn(_0xc72093,_0x4576f2){const _0x4fcd79=a3_0x296664,_0x3893fc=sessions[_0x4fcd79(0x10e)](_0x40ea41=>_0x40ea41[_0x4fcd79(0x198)]===_0x4576f2),_0x1e770c=_0x3893fc['map'](_0x107d8c=>{const _0x312823=_0x4fcd79,[_0x206b17,_0x8de979]=_0x107d8c[_0x312823(0x197)][_0x312823(0x1aa)](':')[_0x312823(0x153)](Number),[_0x153937,_0x419f4c]=_0x107d8c[_0x312823(0x158)]['split'](':')[_0x312823(0x153)](Number);return{'data':_0x107d8c,'start':_0x206b17*0x3c+_0x8de979,'end':_0x153937*0x3c+_0x419f4c,'colIndex':0x0};});_0x1e770c['sort']((_0x3e526b,_0x37ee77)=>_0x3e526b[_0x4fcd79(0x197)]-_0x37ee77['start']||_0x37ee77['end']-_0x37ee77[_0x4fcd79(0x197)]-(_0x3e526b['end']-_0x3e526b[_0x4fcd79(0x197)]));const _0x5d8abc=[];_0x1e770c['forEach'](_0x5c48c0=>{const _0x3ba924=_0x4fcd79;let _0x81f666=![];for(let _0x36773d=0x0;_0x36773d<_0x5d8abc[_0x3ba924(0x186)];_0x36773d++){const _0x4a4257=_0x5d8abc[_0x36773d];if(_0x5c48c0['start']>=_0x4a4257[_0x4a4257[_0x3ba924(0x186)]-0x1]['end']){_0x4a4257['push'](_0x5c48c0),_0x5c48c0[_0x3ba924(0x1a3)]=_0x36773d,_0x81f666=!![];break;}}!_0x81f666&&(_0x5d8abc[_0x3ba924(0x169)]([_0x5c48c0]),_0x5c48c0[_0x3ba924(0x1a3)]=_0x5d8abc[_0x3ba924(0x186)]-0x1);}),_0x1e770c['forEach'](_0x1827e8=>{const _0x3300a9=_0x4fcd79;let _0x44c1da=0x0;_0x1e770c[_0x3300a9(0x1ea)](_0xedaadb=>{const _0x50d767=_0x3300a9;if(Math['max'](_0x1827e8['start'],_0xedaadb[_0x50d767(0x197)])<Math[_0x50d767(0x1e2)](_0x1827e8['end'],_0xedaadb[_0x50d767(0x158)])&&_0xedaadb[_0x50d767(0x1a3)]>_0x44c1da)_0x44c1da=_0xedaadb[_0x50d767(0x1a3)];});const _0x167a3b=_0x44c1da+0x1,_0x2aa85c=0x64/_0x167a3b,_0x493809=_0x1827e8[_0x3300a9(0x1a3)]*_0x2aa85c,_0x3510cc=document[_0x3300a9(0x1dd)](_0x3300a9(0x12b)),_0x23fd0f=_0x1827e8[_0x3300a9(0x1a1)];let _0x3927bb=_0x3300a9(0x171);if(clients&&clients[_0x3300a9(0x186)]>0x0){const _0x4aecfb=clients[_0x3300a9(0x14e)](_0x3a1eba=>String(_0x3a1eba['id'])===String(_0x23fd0f[_0x3300a9(0x1d8)]));if(_0x4aecfb&&_0x4aecfb[_0x3300a9(0x1e0)])_0x3927bb=_0x4aecfb[_0x3300a9(0x1e0)];}const _0x513afd=_0x23fd0f['status']===_0x3300a9(0x14d),_0x37cf6d=_0x513afd?0x1:0.45;_0x3510cc[_0x3300a9(0x1cf)]='event-card'+(_0x513afd?_0x3300a9(0x123):''),_0x3510cc[_0x3300a9(0x111)]['backgroundColor']=hexToRgba(_0x3927bb,_0x37cf6d),_0x3510cc[_0x3300a9(0x111)]['borderLeftColor']=_0x3927bb;const _0x2f0802=_0x1827e8[_0x3300a9(0x197)]/0x3c*GRID_H,_0x590f69=(_0x1827e8[_0x3300a9(0x158)]-_0x1827e8['start'])/0x3c*GRID_H;_0x3510cc[_0x3300a9(0x111)][_0x3300a9(0x1a8)]=_0x2f0802+'px',_0x3510cc[_0x3300a9(0x111)]['height']=Math[_0x3300a9(0x138)](_0x590f69,0x14)+'px',_0x3510cc['style']['width']=_0x3300a9(0x141)+_0x2aa85c+_0x3300a9(0x12d),_0x3510cc[_0x3300a9(0x111)][_0x3300a9(0x1f5)]=_0x3300a9(0x141)+_0x493809+_0x3300a9(0x19e),_0x3510cc[_0x3300a9(0x111)][_0x3300a9(0x1e6)]=0xa+_0x1827e8[_0x3300a9(0x1a3)];if(_0x2aa85c<0x55)_0x3510cc[_0x3300a9(0x1f0)][_0x3300a9(0x13d)](_0x3300a9(0x160));let _0xaa77ce='';if(_0x23fd0f[_0x3300a9(0x176)])_0xaa77ce+=_0x3300a9(0x127);if(_0x513afd)_0xaa77ce+=_0x3300a9(0x1d4);_0x3510cc[_0x3300a9(0x1e3)]=_0x3300a9(0x175)+_0x23fd0f[_0x3300a9(0x197)]+_0x3300a9(0x118)+_0x23fd0f[_0x3300a9(0x158)]+_0x3300a9(0x11d)+_0xaa77ce+_0x3300a9(0x147),_0x3510cc[_0x3300a9(0x1e7)]=_0x4e2202=>{const _0x197be1=_0x3300a9;_0x4e2202[_0x197be1(0x18c)](),openDetails(_0x23fd0f);},_0xc72093[_0x3300a9(0x149)](_0x3510cc);});}function openAnalytics(){const _0xcdc350=a3_0x296664,_0x506e15=document[_0xcdc350(0x165)](_0xcdc350(0x109));setAnalyticsPeriod(_0xcdc350(0x1f8),_0x506e15),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x545cc9,_0x581cb2){const _0x36e431=a3_0x296664;currentAnPeriod=_0x545cc9,document['querySelectorAll'](_0x36e431(0x109))[_0x36e431(0x1ea)](_0xb12780=>_0xb12780[_0x36e431(0x1f0)][_0x36e431(0x179)](_0x36e431(0x177)));if(_0x581cb2)_0x581cb2['classList'][_0x36e431(0x13d)](_0x36e431(0x177));const _0x446e8c=document[_0x36e431(0x193)](_0x36e431(0x136));_0x446e8c['style']['display']=_0x545cc9==='custom'?_0x36e431(0x1c0):_0x36e431(0x1a0);const _0x81729a=new Date();let _0x1a087c=new Date(),_0x136a43=new Date();if(_0x545cc9===_0x36e431(0x1f8))_0x1a087c=getStartOfWeek(_0x81729a),_0x136a43=new Date(_0x1a087c),_0x136a43[_0x36e431(0x108)](_0x136a43[_0x36e431(0x1f9)]()+0x6);else{if(_0x545cc9===_0x36e431(0x13c))_0x1a087c=new Date(_0x81729a[_0x36e431(0x14b)](),_0x81729a[_0x36e431(0x1ab)](),0x1),_0x136a43=new Date(_0x81729a[_0x36e431(0x14b)](),_0x81729a[_0x36e431(0x1ab)]()+0x1,0x0);else{!document[_0x36e431(0x193)]('anStart')[_0x36e431(0x1f4)]&&(document[_0x36e431(0x193)](_0x36e431(0x191))[_0x36e431(0x1f4)]=getLocalDateStr(_0x81729a),document[_0x36e431(0x193)]('anEnd')[_0x36e431(0x1f4)]=getLocalDateStr(_0x81729a));refreshAnalytics();return;}}document[_0x36e431(0x193)](_0x36e431(0x191))[_0x36e431(0x1f4)]=getLocalDateStr(_0x1a087c),document[_0x36e431(0x193)](_0x36e431(0x1e1))[_0x36e431(0x1f4)]=getLocalDateStr(_0x136a43),refreshAnalytics();}function refreshAnalytics(){const _0x1e40f2=a3_0x296664,_0x1616a1=document['getElementById']('anStart')['value'],_0x46cb6f=document[_0x1e40f2(0x193)](_0x1e40f2(0x1e1))[_0x1e40f2(0x1f4)];if(!_0x1616a1||!_0x46cb6f)return;const _0x7fad45=sessions[_0x1e40f2(0x10e)](_0x4846c2=>_0x4846c2[_0x1e40f2(0x198)]>=_0x1616a1&&_0x4846c2[_0x1e40f2(0x198)]<=_0x46cb6f&&_0x4846c2[_0x1e40f2(0x162)]!=='cancelled'),_0xb1100c=_0x7fad45[_0x1e40f2(0x186)],_0x293f93=_0x7fad45['filter'](_0x57da8e=>_0x57da8e[_0x1e40f2(0x162)]===_0x1e40f2(0x14d))[_0x1e40f2(0x186)],_0x34283e=_0xb1100c>0x0?Math['round'](_0x293f93/_0xb1100c*0x64):0x0;document[_0x1e40f2(0x193)](_0x1e40f2(0x1b5))[_0x1e40f2(0x1ac)]=_0x34283e+'%',document[_0x1e40f2(0x193)](_0x1e40f2(0x112))[_0x1e40f2(0x1ac)]=_0x293f93+_0x1e40f2(0x12c)+_0xb1100c+_0x1e40f2(0x152);const _0x842651=document[_0x1e40f2(0x193)](_0x1e40f2(0x1ed)),_0x27d199=0x2*Math['PI']*0x23,_0x13966f=_0x27d199-_0x34283e/0x64*_0x27d199;_0x842651[_0x1e40f2(0x111)][_0x1e40f2(0x188)]=_0x13966f;const _0x159b78={};_0x7fad45['forEach'](_0x46a6d1=>{const _0x499c71=_0x1e40f2,_0x554bcf=_0x46a6d1[_0x499c71(0x167)]||_0x499c71(0x1b3);if(!_0x159b78[_0x554bcf]){const _0x1fe2b9='#'+_0x554bcf['toString']()[_0x499c71(0x1d5)](0x0,0x6);_0x159b78[_0x554bcf]={'total':0x0,'done':0x0,'color':_0x1fe2b9};}_0x159b78[_0x554bcf][_0x499c71(0x12a)]++;if(_0x46a6d1[_0x499c71(0x162)]==='completed')_0x159b78[_0x554bcf][_0x499c71(0x135)]++;});const _0x2d6b65=document['getElementById'](_0x1e40f2(0x172));_0x2d6b65[_0x1e40f2(0x1e3)]='';const _0x2292bd=Object[_0x1e40f2(0x148)](_0x159b78)[_0x1e40f2(0x1d6)]((_0x2d56bd,_0x1787f5)=>_0x1787f5[0x1]['total']-_0x2d56bd[0x1][_0x1e40f2(0x12a)]);if(_0x2292bd[_0x1e40f2(0x186)]===0x0){_0x2d6b65[_0x1e40f2(0x1e3)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x2292bd[_0x1e40f2(0x1ea)](([_0x36fe11,_0x169bec])=>{const _0x460555=_0x1e40f2,_0x5f4d58=Math[_0x460555(0x10a)](_0x169bec['done']/_0x169bec['total']*0x64),_0x41ba09=document[_0x460555(0x1dd)](_0x460555(0x12b));_0x41ba09[_0x460555(0x1cf)]='client-stat-card',_0x41ba09[_0x460555(0x111)][_0x460555(0x181)]=_0x169bec[_0x460555(0x1e0)],_0x41ba09[_0x460555(0x1e3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x36fe11['substr'](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x169bec['done']+'</span>\x20/\x20'+_0x169bec[_0x460555(0x12a)]+_0x460555(0x1e9)+_0x5f4d58+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2d6b65[_0x460555(0x149)](_0x41ba09);});}function openDetails(_0x3a160d){const _0x327000=a3_0x296664;currentSession=_0x3a160d;const _0x5b98f6=new Date(_0x3a160d[_0x327000(0x198)]),_0x58be07=_0x5b98f6[_0x327000(0x1d3)]('ru-RU',{'weekday':_0x327000(0x100),'day':_0x327000(0x104),'month':_0x327000(0x100)});document[_0x327000(0x193)]('detDate')[_0x327000(0x1ac)]=_0x58be07['charAt'](0x0)['toUpperCase']()+_0x58be07[_0x327000(0x170)](0x1),document[_0x327000(0x193)]('detTime')[_0x327000(0x1ac)]=_0x3a160d[_0x327000(0x197)]+_0x327000(0x118)+_0x3a160d[_0x327000(0x158)],document['getElementById']('detNote')['textContent']=_0x3a160d[_0x327000(0x13f)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x190600=document['getElementById']('detStatus'),_0x15432e=document['getElementById'](_0x327000(0x187)),_0x18a84e=_0x15432e[_0x327000(0x165)](_0x327000(0x1e4)),_0x33c84b=_0x15432e[_0x327000(0x165)](_0x327000(0x183)),_0x389dbe=document['getElementById'](_0x327000(0x19b));if(_0x3a160d[_0x327000(0x162)]===_0x327000(0x14d))_0x190600[_0x327000(0x1ac)]=_0x327000(0x1ae),_0x190600['style'][_0x327000(0x1e0)]=_0x327000(0x192),_0x15432e['style'][_0x327000(0x1bd)]=_0x327000(0x1a0);else{_0x190600['textContent']=_0x327000(0x174),_0x190600['style']['color']='var(--acc-blue)',_0x15432e['style'][_0x327000(0x1bd)]=_0x327000(0x1dc);const _0x204fad=new Date(_0x3a160d['dateStr']+'T'+_0x3a160d[_0x327000(0x197)]),_0x616366=new Date(),_0x50be30=(_0x204fad-_0x616366)/(0x3e8*0x3c*0x3c),_0x35770b=coachProfiles[_0x3a160d[_0x327000(0x167)]]&&coachProfiles[_0x3a160d['coachId']][_0x327000(0x1b7)]?parseInt(coachProfiles[_0x3a160d[_0x327000(0x167)]][_0x327000(0x1b7)]):0x18;if(_0x35770b===0x0||_0x50be30>=_0x35770b)_0x18a84e[_0x327000(0x111)][_0x327000(0x1bd)]='block',_0x33c84b[_0x327000(0x111)][_0x327000(0x1bd)]=_0x327000(0x1dc),_0x389dbe['style'][_0x327000(0x1bd)]=_0x327000(0x1a0);else{_0x18a84e[_0x327000(0x111)][_0x327000(0x1bd)]=_0x327000(0x1a0),_0x33c84b['style'][_0x327000(0x1bd)]=_0x327000(0x1a0),_0x389dbe[_0x327000(0x111)]['display']=_0x327000(0x1dc);let _0x37273e=_0x35770b===0x0?_0x327000(0x1b9):_0x327000(0x16b)+_0x35770b+_0x327000(0x124);_0x389dbe[_0x327000(0x1ac)]=_0x327000(0x1fd)+_0x37273e+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document[_0x327000(0x193)](_0x327000(0x17f))[_0x327000(0x1f0)]['add']('active'),document[_0x327000(0x193)](_0x327000(0x101))['classList'][_0x327000(0x13d)]('open');}function closeAllSheets(){const _0x1ea1ae=a3_0x296664;document['getElementById'](_0x1ea1ae(0x17f))['classList']['remove']('active'),document['querySelectorAll']('.sheet')['forEach'](_0x337530=>_0x337530[_0x1ea1ae(0x1f0)][_0x1ea1ae(0x179)]('open'));}function openSheet(_0x42775d){const _0x144aed=a3_0x296664;document['getElementById'](_0x144aed(0x17f))[_0x144aed(0x1f0)]['add'](_0x144aed(0x177)),document['getElementById'](_0x42775d)[_0x144aed(0x1f0)][_0x144aed(0x13d)](_0x144aed(0x122));}function a3_0x52b9(_0x2f7437,_0x1ccc8b){_0x2f7437=_0x2f7437-0x100;const _0x3aa647=a3_0x520b();let _0x2085f8=_0x3aa647[_0x2f7437];return _0x2085f8;}function getLocalDateStr(_0x463950){const _0x269a83=a3_0x296664,_0x1bd6d7=_0x463950[_0x269a83(0x14b)](),_0x8d760e=String(_0x463950[_0x269a83(0x1ab)]()+0x1)[_0x269a83(0x18d)](0x2,'0'),_0x203589=String(_0x463950[_0x269a83(0x1f9)]())['padStart'](0x2,'0');return _0x1bd6d7+'-'+_0x8d760e+'-'+_0x203589;}function getStartOfWeek(_0x548a37){const _0x58c4f5=a3_0x296664,_0xfb2ffb=new Date(_0x548a37),_0xe42e5d=_0xfb2ffb['getDay'](),_0x1a4a1d=_0xfb2ffb[_0x58c4f5(0x1f9)]()-_0xe42e5d+(_0xe42e5d===0x0?-0x6:0x1);return _0xfb2ffb[_0x58c4f5(0x108)](_0x1a4a1d),_0xfb2ffb[_0x58c4f5(0x151)](0x0,0x0,0x0,0x0),_0xfb2ffb;}function a3_0x520b(){const _0xdfc029=['anPercent','customConfirm','cancel_window','clientWidth','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','\x20–≤\x20','querySelectorAll','<div\x20class=\x22dch-day\x22>','display','v9.5-CLIENT-ANALYTICS','Telegram','flex','exceptions','globalTimeLine','get_slots','–û—Ç–º–µ–Ω–µ–Ω–æ','visible','blocked-range-part\x20stripe-bg','ready','ccYesBtn','all','</div>','initData','ru-RU','search','log','className','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','rgba(10,\x20132,\x20255,\x20','DOMContentLoaded','toLocaleDateString','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','substr','sort','insertBefore','clientId','px\x20-','pattern','toUpperCase','block','createElement','scroll','(((.+)+)+)+$','color','anEnd','min','innerHTML','.btn-cancel','saveLocally','zIndex','onclick','rsDatesTrack','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','forEach','firstChild','isArray','anDonutCircle','Error\x20setting\x20back\x20button:','initDataUnsafe','classList','2jXuXet','431242UmxFqh','then','value','left','data-day-idx','getMinutes','week','getDate','location','T23:59:59','offClick','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','long','detailsSheet','addEventListener','gridColumns','numeric','uc_client_sessions','13017447uGEpHK','height','setDate','.period-switch\x20.p-btn','round','.day-column','11761043WkFbwf','rescheduleSheet','filter','auto','parse','style','anTotalStats','startsWith','toLocaleString','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','substring','getDay','\x20-\x20','getHours','scrollLeft','timeColumn','backgroundPosition','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','T00:00:00','button','</div><div\x20class=\x22rs-day-num\x22>','open','\x20status-completed','\x20—á.','error','getAttribute','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','.rs-date-chip','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','total','div','\x20–∏–∑\x20','%\x20-\x204px)','disableVerticalSwipes','clients','createDocumentFragment','json','#ff453a','ccText','uc_client_list','done','anCustomDates','getItem','max','fontWeight','</div><div\x20class=\x22dch-num\x22>','keys','month','add','headerMonth','note','rsSlotsGrid','calc(','ccTitle','<div\x20class=\x22rs-day-name\x22>','setMonth','5290cuGkSB','uc_client_settings','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','entries','appendChild','syncLoad','getFullYear','client_load','completed','find','scrollTop','3124832YxdhWO','setHours','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','map','today','ranges','onClick','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','end','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','BackButton','constructor','stringify','offsetWidth','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','mini','day-column\x20','status','Error\x20setting\x20color:','toString','querySelector','apply','coachId','data-date','push','setBackgroundColor','–∑–∞\x20','setItem','timeLineBadge','8jFzCwg','now','slice','#0a84ff','analyticsList','toast','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','seriesId','active','offsetLeft','remove','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','reschedule','rs-time-btn','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','day-col-header\x20','overlay','scrollWidth','borderLeftColor','6bpmIjX','.btn-reschedule','sid','2672793YVAMSv','length','cancelContainer','strokeDashoffset','time-label','WebApp','findIndex','stopPropagation','padStart','rgba(','blocked-slot\x20stripe-bg','calendar','anStart','var(--acc-green)','getElementById','applyData','join','setAttribute','start','dateStr','Critical\x20TMA\x20Error:','scrollTo','cancelHint','119559abJZmO','.day-col-header','%\x20+\x202px)','POST','none','data','daysHeaderTrack','colIndex','600','6959360kfCMEc','show','expand','top','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','split','getMonth','textContent','matrixViewport','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','settings','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','day-off-overlay\x20stripe-bg','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','Unknown','getTime'];a3_0x520b=function(){return _0xdfc029;};return a3_0x520b();}function scrollToToday(){const _0x5bf70d=getLocalDateStr(new Date());setTimeout(()=>{const _0xa05f13=a3_0x52b9,_0x745bbc=document[_0xa05f13(0x165)]('.day-col-header[data-date=\x22'+_0x5bf70d+'\x22]');if(_0x745bbc){const _0x19cad1=document[_0xa05f13(0x193)](_0xa05f13(0x1ad)),_0x4ca172=_0x745bbc[_0xa05f13(0x178)]-_0x19cad1[_0xa05f13(0x1b8)]/0x2+_0x745bbc[_0xa05f13(0x15d)]/0x2;_0x19cad1[_0xa05f13(0x19a)]({'left':_0x4ca172,'behavior':_0xa05f13(0x10f)}),_0x19cad1[_0xa05f13(0x14f)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x2a05c2=a3_0x296664,_0x1a3360=new Date(),_0x3ec007=document[_0x2a05c2(0x193)](_0x2a05c2(0x1c2)),_0x55e86b=document['getElementById'](_0x2a05c2(0x16d)),_0x212b0e=(_0x1a3360[_0x2a05c2(0x119)]()*0x3c+_0x1a3360[_0x2a05c2(0x1f7)]())/0x3c*GRID_H;_0x3ec007[_0x2a05c2(0x111)][_0x2a05c2(0x1a8)]=_0x212b0e+'px',_0x3ec007[_0x2a05c2(0x111)][_0x2a05c2(0x1bd)]=_0x2a05c2(0x1dc),_0x55e86b[_0x2a05c2(0x111)][_0x2a05c2(0x1a8)]=_0x212b0e+'px',_0x55e86b[_0x2a05c2(0x111)][_0x2a05c2(0x1bd)]=_0x2a05c2(0x1dc),_0x55e86b[_0x2a05c2(0x1ac)]=String(_0x1a3360['getHours']())[_0x2a05c2(0x18d)](0x2,'0')+':'+String(_0x1a3360[_0x2a05c2(0x1f7)]())['padStart'](0x2,'0');}function onScroll(){const _0x2514b2=a3_0x296664,_0x4f21c5=document[_0x2514b2(0x193)](_0x2514b2(0x1ad)),_0x513e0f=document[_0x2514b2(0x1bb)](_0x2514b2(0x19d));for(let _0x5c367e of _0x513e0f)if(_0x5c367e[_0x2514b2(0x178)]>=_0x4f21c5[_0x2514b2(0x11a)]){const _0x3bb2c6=new Date(_0x5c367e[_0x2514b2(0x126)](_0x2514b2(0x168)));document[_0x2514b2(0x193)](_0x2514b2(0x13e))['textContent']=_0x3bb2c6[_0x2514b2(0x114)]('ru',{'month':_0x2514b2(0x100)})[_0x2514b2(0x1db)]()+'\x20'+_0x3bb2c6[_0x2514b2(0x14b)]();break;}}function showToast(_0x472a25){const _0x11bc2c=a3_0x296664,_0x372f4f=document[_0x11bc2c(0x193)](_0x11bc2c(0x173));_0x372f4f[_0x11bc2c(0x1ac)]=_0x472a25,_0x372f4f[_0x11bc2c(0x1f0)]['add'](_0x11bc2c(0x1a6)),setTimeout(()=>_0x372f4f['classList'][_0x11bc2c(0x179)](_0x11bc2c(0x1a6)),0x7d0);}function handleInfiniteScroll(){const _0x320d05=a3_0x296664,_0x53232e=document[_0x320d05(0x193)](_0x320d05(0x1ad)),_0xddf3ee=_0x53232e['scrollLeft'],_0x287f86=_0x53232e[_0x320d05(0x180)],_0x460c56=_0x53232e[_0x320d05(0x1b8)];if(_0x287f86-(_0xddf3ee+_0x460c56)<0x12c){const _0x33a656=endOffset;endOffset+=0xe,renderDayRange(_0x33a656+0x1,endOffset),reRenderBlocks();}if(_0xddf3ee<0x12c){const _0x46f506=startOffset;startOffset-=0xe,prependDays(startOffset,_0x46f506-0x1),_0x53232e[_0x320d05(0x11a)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x11e2cb,_0xe6eb3e){const _0x181f98=a3_0x296664,_0x2df8d2=document[_0x181f98(0x193)]('daysHeaderTrack'),_0x5ec263=document[_0x181f98(0x193)]('gridColumns'),_0xf0df69=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x312a7c=new Date();_0x312a7c['setHours'](0x0,0x0,0x0,0x0);const _0x3ca339=getLocalDateStr(new Date()),_0x1604e0=document[_0x181f98(0x130)](),_0x323786=document[_0x181f98(0x130)]();for(let _0x2d4fe7=_0x11e2cb;_0x2d4fe7<=_0xe6eb3e;_0x2d4fe7++){const _0x2d9e4d=new Date(_0x312a7c);_0x2d9e4d['setDate'](_0x2d9e4d[_0x181f98(0x1f9)]()+_0x2d4fe7);const _0x2e1ff4=getLocalDateStr(_0x2d9e4d);let _0x48366c=_0x2d9e4d[_0x181f98(0x117)]()-0x1;if(_0x48366c===-0x1)_0x48366c=0x6;const _0x464f7b=_0x2e1ff4===_0x3ca339,_0x1ab813=document['createElement'](_0x181f98(0x12b));_0x1ab813[_0x181f98(0x1cf)]=_0x181f98(0x17e)+(_0x464f7b?_0x181f98(0x154):''),_0x1ab813[_0x181f98(0x196)](_0x181f98(0x168),_0x2e1ff4),_0x1ab813['innerHTML']=_0x181f98(0x1bc)+_0xf0df69[_0x48366c]+_0x181f98(0x13a)+_0x2d9e4d[_0x181f98(0x1f9)]()+_0x181f98(0x1ca),_0x1604e0['appendChild'](_0x1ab813);const _0x29d872=document[_0x181f98(0x1dd)](_0x181f98(0x12b));_0x29d872[_0x181f98(0x1cf)]=_0x181f98(0x161)+(_0x464f7b?_0x181f98(0x154):''),_0x29d872[_0x181f98(0x196)](_0x181f98(0x168),_0x2e1ff4),_0x29d872['setAttribute'](_0x181f98(0x1f6),_0x48366c),_0x323786[_0x181f98(0x149)](_0x29d872);}_0x2df8d2[_0x181f98(0x1d7)](_0x1604e0,_0x2df8d2['firstChild']),_0x5ec263[_0x181f98(0x1d7)](_0x323786,_0x5ec263[_0x181f98(0x165)](_0x181f98(0x10b)));}function hexToRgba(_0x11bbb9,_0x546432){const _0x5e8734=a3_0x296664;let _0x5a1507;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x11bbb9))return _0x5a1507=_0x11bbb9[_0x5e8734(0x116)](0x1)['split'](''),_0x5a1507[_0x5e8734(0x186)]==0x3&&(_0x5a1507=[_0x5a1507[0x0],_0x5a1507[0x0],_0x5a1507[0x1],_0x5a1507[0x1],_0x5a1507[0x2],_0x5a1507[0x2]]),_0x5a1507='0x'+_0x5a1507[_0x5e8734(0x195)](''),_0x5e8734(0x18e)+[_0x5a1507>>0x10&0xff,_0x5a1507>>0x8&0xff,_0x5a1507&0xff][_0x5e8734(0x195)](',')+','+_0x546432+')';return _0x5e8734(0x1d1)+_0x546432+')';}let confirmResolver=null;function showCustomConfirm(_0x5bdcfe,_0x18e26c,_0x5da50f=!![]){const _0x123a83=a3_0x296664;document[_0x123a83(0x193)](_0x123a83(0x142))[_0x123a83(0x1ac)]=_0x5bdcfe,document[_0x123a83(0x193)](_0x123a83(0x133))[_0x123a83(0x1ac)]=_0x18e26c;const _0x1a4718=document['getElementById'](_0x123a83(0x1c8));return _0x5da50f?(_0x1a4718[_0x123a83(0x111)][_0x123a83(0x1e0)]=_0x123a83(0x132),_0x1a4718['style'][_0x123a83(0x139)]=_0x123a83(0x1a4)):(_0x1a4718[_0x123a83(0x111)][_0x123a83(0x1e0)]='#0a84ff',_0x1a4718[_0x123a83(0x111)][_0x123a83(0x139)]=_0x123a83(0x1a4)),new Promise(_0x333abc=>{const _0x52fc4c=_0x123a83;confirmResolver=_0x333abc,document['getElementById']('customConfirm')[_0x52fc4c(0x1f0)][_0x52fc4c(0x13d)](_0x52fc4c(0x1c5));});}function resolveCustomConfirm(_0x224ba7){const _0x55e96b=a3_0x296664;document[_0x55e96b(0x193)](_0x55e96b(0x1b6))[_0x55e96b(0x1f0)]['remove'](_0x55e96b(0x1c5));if(confirmResolver)confirmResolver(_0x224ba7);}async function tryCancelCurrentSession(){const _0x17b23e=a3_0x296664;if(!currentSession)return;const _0x4aa15e=await showCustomConfirm(_0x17b23e(0x159),_0x17b23e(0x17a),!![]);if(!_0x4aa15e)return;const _0x5ab3a0=currentSession;closeAllSheets(),sessions=sessions[_0x17b23e(0x10e)](_0x3559d7=>_0x3559d7['id']!==_0x5ab3a0['id']),reRenderBlocks(),showToast(_0x17b23e(0x1c4)),lastUserActionTime=Date['now']();try{const _0x398ca1=window['Telegram']?.['WebApp'],_0x5b8e49=await fetch(API_URL,{'method':_0x17b23e(0x19f),'body':JSON[_0x17b23e(0x15c)]({'action':'client_cancel','init_data':_0x398ca1?.[_0x17b23e(0x1cb)]||'','coachId':_0x5ab3a0[_0x17b23e(0x167)],'dateStr':_0x5ab3a0['dateStr'],'sessionId':_0x5ab3a0['id']})});if(_0x5b8e49['ok'])DataManager[_0x17b23e(0x1e5)]();}catch(_0xa8290c){showToast(_0x17b23e(0x11e));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x233eb0=a3_0x296664;if(!currentSession)return;document['getElementById']('detailsSheet')[_0x233eb0(0x1f0)][_0x233eb0(0x179)](_0x233eb0(0x122)),document[_0x233eb0(0x193)](_0x233eb0(0x10d))[_0x233eb0(0x1f0)][_0x233eb0(0x13d)](_0x233eb0(0x122));const _0x673a5a=document[_0x233eb0(0x193)](_0x233eb0(0x1e8)),_0x431831=document[_0x233eb0(0x193)](_0x233eb0(0x140));_0x673a5a[_0x233eb0(0x1e3)]='',_0x431831['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x4ed911,_0x435ebd]=currentSession[_0x233eb0(0x197)][_0x233eb0(0x1aa)](':')[_0x233eb0(0x153)](Number),[_0x59381a,_0x405738]=currentSession[_0x233eb0(0x158)][_0x233eb0(0x1aa)](':')[_0x233eb0(0x153)](Number),_0x55cc90=_0x59381a*0x3c+_0x405738-(_0x4ed911*0x3c+_0x435ebd);try{const _0x26bdd6=window[_0x233eb0(0x1bf)]?.[_0x233eb0(0x18a)],_0x2e84e8=await fetch(API_URL,{'method':_0x233eb0(0x19f),'body':JSON[_0x233eb0(0x15c)]({'action':_0x233eb0(0x1c3),'coachId':currentSession[_0x233eb0(0x167)],'duration':_0x55cc90,'init_data':_0x26bdd6?.[_0x233eb0(0x1cb)]||'','excludeSessionId':currentSession['id']})}),_0x47e4e9=await _0x2e84e8[_0x233eb0(0x131)]();_0x47e4e9['ok']&&_0x47e4e9[_0x233eb0(0x1a1)]?(availableSlotsCache=_0x47e4e9[_0x233eb0(0x1a1)],renderRescheduleDates()):_0x431831[_0x233eb0(0x1e3)]=_0x233eb0(0x1b2);}catch(_0x4c2a48){_0x431831[_0x233eb0(0x1e3)]=_0x233eb0(0x157);}}function renderRescheduleDates(){const _0x1c2139=a3_0x296664,_0x1b5419=document[_0x1c2139(0x193)]('rsDatesTrack');_0x1b5419[_0x1c2139(0x1e3)]='';const _0x3c0db5=Object[_0x1c2139(0x13b)](availableSlotsCache)[_0x1c2139(0x1d6)](),_0x3b8222=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x3c0db5[_0x1c2139(0x186)]===0x0){document[_0x1c2139(0x193)]('rsSlotsGrid')[_0x1c2139(0x1e3)]=_0x1c2139(0x15e);return;}_0x3c0db5[_0x1c2139(0x1ea)]((_0xc30677,_0x326642)=>{const _0xbb032c=_0x1c2139,_0x2805d2=new Date(_0xc30677),_0x38a4bd=_0x3b8222[_0x2805d2[_0xbb032c(0x117)]()],_0x4349d2=_0x2805d2[_0xbb032c(0x1f9)](),_0xdf7e0c=document[_0xbb032c(0x1dd)]('div');_0xdf7e0c[_0xbb032c(0x1cf)]='rs-date-chip';if(_0x326642===0x0)_0xdf7e0c[_0xbb032c(0x1f0)][_0xbb032c(0x13d)](_0xbb032c(0x177));_0xdf7e0c['innerHTML']=_0xbb032c(0x143)+_0x38a4bd+_0xbb032c(0x121)+_0x4349d2+'</div>',_0xdf7e0c[_0xbb032c(0x1e7)]=()=>selectRsDate(_0xc30677,_0xdf7e0c),_0x1b5419[_0xbb032c(0x149)](_0xdf7e0c);}),selectRsDate(_0x3c0db5[0x0],_0x1b5419[_0x1c2139(0x1eb)]);}function selectRsDate(_0x5c5eab,_0x5189ba){const _0x212d4f=a3_0x296664;selectedRsDate=_0x5c5eab,document['querySelectorAll'](_0x212d4f(0x128))[_0x212d4f(0x1ea)](_0x2e2c45=>_0x2e2c45[_0x212d4f(0x1f0)][_0x212d4f(0x179)](_0x212d4f(0x177)));if(_0x5189ba)_0x5189ba['classList'][_0x212d4f(0x13d)](_0x212d4f(0x177));const _0x480a1b=document[_0x212d4f(0x193)](_0x212d4f(0x140));_0x480a1b[_0x212d4f(0x1e3)]='';const _0xa036=availableSlotsCache[_0x5c5eab]||[];if(_0xa036[_0x212d4f(0x186)]===0x0){_0x480a1b[_0x212d4f(0x1e3)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0xa036[_0x212d4f(0x1ea)](_0x4fe5d3=>{const _0x1b8998=_0x212d4f,_0x2db2d2=document[_0x1b8998(0x1dd)](_0x1b8998(0x120));_0x2db2d2[_0x1b8998(0x1cf)]=_0x1b8998(0x17c),_0x2db2d2[_0x1b8998(0x1ac)]=_0x4fe5d3,_0x2db2d2['onclick']=()=>confirmReschedule(_0x4fe5d3),_0x480a1b[_0x1b8998(0x149)](_0x2db2d2);});}async function confirmReschedule(_0x79135d){const _0x171d8f=a3_0x296664,_0x35c6ef=new Date(selectedRsDate),_0x498e2f=_0x35c6ef[_0x171d8f(0x1d3)](_0x171d8f(0x1cc),{'day':_0x171d8f(0x104),'month':_0x171d8f(0x100)}),_0xda0d76=await showCustomConfirm(_0x171d8f(0x129),_0x171d8f(0x15f)+_0x498e2f+_0x171d8f(0x1ba)+_0x79135d+'?',![]);if(!_0xda0d76)return;closeAllSheets(),showToast(_0x171d8f(0x1b0)),lastUserActionTime=Date[_0x171d8f(0x16f)]();const _0x491916=currentSession[_0x171d8f(0x198)],_0x47becb=currentSession['id'],[_0xec790d,_0x5e2c54]=currentSession['start'][_0x171d8f(0x1aa)](':')[_0x171d8f(0x153)](Number),[_0x20da07,_0x21c11f]=currentSession[_0x171d8f(0x158)][_0x171d8f(0x1aa)](':')['map'](Number),_0x16b005=_0x20da07*0x3c+_0x21c11f-(_0xec790d*0x3c+_0x5e2c54),[_0x5353fa,_0x1e2681]=_0x79135d[_0x171d8f(0x1aa)](':')[_0x171d8f(0x153)](Number),_0x10196f=_0x5353fa*0x3c+_0x1e2681+_0x16b005,_0x3bd7ea=Math['floor'](_0x10196f/0x3c),_0x13887b=_0x10196f%0x3c,_0x5ac412=String(_0x3bd7ea)[_0x171d8f(0x18d)](0x2,'0')+':'+String(_0x13887b)[_0x171d8f(0x18d)](0x2,'0'),_0x521900=sessions[_0x171d8f(0x18b)](_0x2694a4=>_0x2694a4['id']===_0x47becb);_0x521900!==-0x1&&(sessions[_0x521900]['dateStr']=selectedRsDate,sessions[_0x521900][_0x171d8f(0x197)]=_0x79135d,sessions[_0x521900][_0x171d8f(0x158)]=_0x5ac412,reRenderBlocks());try{const _0xa07e14=window['Telegram']?.[_0x171d8f(0x18a)],_0x4835aa=await fetch(API_URL,{'method':_0x171d8f(0x19f),'body':JSON[_0x171d8f(0x15c)]({'action':_0x171d8f(0x17b),'init_data':_0xa07e14?.[_0x171d8f(0x1cb)]||'','oldSessionId':_0x47becb,'oldDate':_0x491916,'newDate':selectedRsDate,'newTime':_0x79135d,'coachId':currentSession[_0x171d8f(0x167)]})}),_0x497ec5=await _0x4835aa[_0x171d8f(0x131)]();!_0x497ec5['ok']?(showToast(_0x171d8f(0x115)),DataManager[_0x171d8f(0x14a)]()):(showToast(_0x171d8f(0x1a9)),DataManager[_0x171d8f(0x1e5)]());}catch(_0x5f16e8){showToast(_0x171d8f(0x11e));}}document[a3_0x296664(0x102)](a3_0x296664(0x1d2),init);