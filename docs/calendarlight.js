const a3_0x408645=a3_0x55c4;(function(_0x31fbd4,_0x7f5620){const _0x3ce21c=a3_0x55c4,_0x7fcec7=_0x31fbd4();while(!![]){try{const _0x4ba996=parseInt(_0x3ce21c(0x11f))/0x1*(-parseInt(_0x3ce21c(0x82))/0x2)+parseInt(_0x3ce21c(0x173))/0x3*(-parseInt(_0x3ce21c(0x15e))/0x4)+parseInt(_0x3ce21c(0x153))/0x5*(parseInt(_0x3ce21c(0xae))/0x6)+-parseInt(_0x3ce21c(0x10e))/0x7+parseInt(_0x3ce21c(0x112))/0x8+parseInt(_0x3ce21c(0x97))/0x9+parseInt(_0x3ce21c(0x162))/0xa;if(_0x4ba996===_0x7f5620)break;else _0x7fcec7['push'](_0x7fcec7['shift']());}catch(_0x38937b){_0x7fcec7['push'](_0x7fcec7['shift']());}}}(a3_0x5121,0x23d9f));const APP_VERSION='v9.5-CLIENT-ANALYTICS',API_URL=a3_0x408645(0xac),GRID_H=0x3c,KEY_SESSIONS=a3_0x408645(0xe9),KEY_SETTINGS=a3_0x408645(0xab),KEY_CLIENTS=a3_0x408645(0x16b);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x408645(0x88),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x4a4dad=a3_0x408645,_0x4288ed=(function(){let _0x2315b9=!![];return function(_0x1bb833,_0x259ca2){const _0x592c77=_0x2315b9?function(){const _0xe6d92e=a3_0x55c4;if(_0x259ca2){const _0x3878ab=_0x259ca2[_0xe6d92e(0x132)](_0x1bb833,arguments);return _0x259ca2=null,_0x3878ab;}}:function(){};return _0x2315b9=![],_0x592c77;};}()),_0x9519a9=_0x4288ed(this,function(){const _0x104d25=a3_0x55c4;return _0x9519a9[_0x104d25(0x15b)]()[_0x104d25(0x157)](_0x104d25(0x146))['toString']()['constructor'](_0x9519a9)[_0x104d25(0x157)](_0x104d25(0x146));});_0x9519a9();try{const _0x3f505e=window[_0x4a4dad(0xf7)]?.[_0x4a4dad(0x15a)];if(!_0x3f505e)return;_0x3f505e[_0x4a4dad(0x172)](),_0x3f505e['expand']();try{_0x3f505e[_0x4a4dad(0xec)](_0x4a4dad(0x90)),_0x3f505e[_0x4a4dad(0x98)]&&_0x3f505e['setBackgroundColor'](_0x4a4dad(0x90));}catch(_0x1dd979){console[_0x4a4dad(0xfd)](_0x4a4dad(0xdd),_0x1dd979);}try{_0x3f505e['BackButton']&&(_0x3f505e[_0x4a4dad(0x176)][_0x4a4dad(0x96)](),_0x3f505e['BackButton'][_0x4a4dad(0xb8)](),_0x3f505e[_0x4a4dad(0x176)][_0x4a4dad(0x152)](function(){const _0x38bba9=_0x4a4dad;window['location'][_0x38bba9(0x11c)]='router.html';}));}catch(_0x2e08d4){console[_0x4a4dad(0xfd)](_0x4a4dad(0x14e),_0x2e08d4);}try{if(_0x3f505e[_0x4a4dad(0x108)])_0x3f505e['disableVerticalSwipes']();}catch(_0x3a4c1f){}}catch(_0x2cd058){console[_0x4a4dad(0x105)]('Critical\x20TMA\x20Error:',_0x2cd058);}}());function isAdmin(){const _0x4ab900=a3_0x408645;try{const _0x89729e=Number(window[_0x4ab900(0xf7)]?.[_0x4ab900(0x15a)]?.[_0x4ab900(0xc6)]?.['user']?.['id']);return _0x89729e===0xbaf7174;}catch(_0x8b4b27){return![];}}const DataManager={'saveLocally'(){const _0x18984c=a3_0x408645;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x18984c(0xc4)](sessions)),localStorage[_0x18984c(0x107)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x18984c(0xc4)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x493f3c){}},'loadLocal'(){const _0xf0ded5=a3_0x408645;try{const _0x2e8ca2=localStorage[_0xf0ded5(0xe0)](KEY_SESSIONS);if(_0x2e8ca2)sessions=JSON[_0xf0ded5(0xd2)](_0x2e8ca2);const _0x26abd4=localStorage['getItem'](KEY_CLIENTS);if(_0x26abd4)clients=JSON[_0xf0ded5(0xd2)](_0x26abd4);const _0x5472aa=localStorage[_0xf0ded5(0xe0)](KEY_SETTINGS);if(_0x5472aa){const _0x3e0087=JSON[_0xf0ded5(0xd2)](_0x5472aa);if(_0x3e0087[_0xf0ded5(0x11d)])availabilityPattern=_0x3e0087['pattern'];if(_0x3e0087[_0xf0ded5(0xb1)])specialRanges=_0x3e0087[_0xf0ded5(0xb1)];if(_0x3e0087['exceptions'])dateExceptions=_0x3e0087[_0xf0ded5(0xa9)];}}catch(_0x53f38f){}},async 'syncLoad'(){const _0x538ced=a3_0x408645,_0x2bbe5b=new Date(),_0x5e8466=_0x2bbe5b[_0x538ced(0x10d)]()+'-'+String(_0x2bbe5b[_0x538ced(0xf4)]()+0x1)[_0x538ced(0x9c)](0x2,'0'),_0x3621ae=new Date(_0x2bbe5b);_0x3621ae[_0x538ced(0xf2)](_0x2bbe5b[_0x538ced(0xf4)]()+0x1);const _0x32498b=_0x3621ae[_0x538ced(0x10d)]()+'-'+String(_0x3621ae[_0x538ced(0xf4)]()+0x1)[_0x538ced(0x9c)](0x2,'0'),_0x1f8269=Date['now']();try{const _0x50df2=window[_0x538ced(0xf7)]?.['WebApp'],_0x1e4513=_0x50df2?.[_0x538ced(0x13f)]||'',[_0x364c2f,_0x4e4c72]=await Promise[_0x538ced(0x120)]([fetch(API_URL,{'method':_0x538ced(0xa4),'body':JSON[_0x538ced(0xc4)]({'action':_0x538ced(0x104),'init_data':_0x1e4513,'month_str':_0x5e8466})})['then'](_0x233f5e=>_0x233f5e['json']()),fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':'client_load','init_data':_0x1e4513,'month_str':_0x32498b})})[_0x538ced(0xad)](_0x1ddbd8=>_0x1ddbd8[_0x538ced(0x169)]())]);if(lastUserActionTime>_0x1f8269){console[_0x538ced(0xfd)](_0x538ced(0x12c));return;}if(_0x364c2f['ok'])this[_0x538ced(0xf6)](_0x364c2f[_0x538ced(0xe1)],_0x5e8466);if(_0x4e4c72['ok'])this[_0x538ced(0xf6)](_0x4e4c72[_0x538ced(0xe1)],_0x32498b);this['saveLocally']();}catch(_0x2051b7){}},'applyData'(_0xb2f637,_0x2a304a){const _0x1a42a5=a3_0x408645;if(!_0xb2f637)return;if(_0xb2f637[_0x1a42a5(0x117)]){if(_0xb2f637[_0x1a42a5(0x117)][_0x1a42a5(0x11d)])availabilityPattern=_0xb2f637[_0x1a42a5(0x117)][_0x1a42a5(0x11d)];if(_0xb2f637[_0x1a42a5(0x117)][_0x1a42a5(0xb1)])specialRanges=_0xb2f637[_0x1a42a5(0x117)][_0x1a42a5(0xb1)];if(_0xb2f637[_0x1a42a5(0x117)][_0x1a42a5(0xa9)])dateExceptions=_0xb2f637[_0x1a42a5(0x117)][_0x1a42a5(0xa9)];}if(_0xb2f637[_0x1a42a5(0xe2)]&&Array['isArray'](_0xb2f637[_0x1a42a5(0xe2)]))clients=_0xb2f637['clients'];_0xb2f637['coach_profiles']&&(coachProfiles={...coachProfiles,..._0xb2f637[_0x1a42a5(0x8f)]}),_0xb2f637[_0x1a42a5(0xb5)]&&(sessions=sessions[_0x1a42a5(0x87)](_0x23ab04=>!_0x23ab04[_0x1a42a5(0xaa)][_0x1a42a5(0x14b)](_0x2a304a)),Object[_0x1a42a5(0x8a)](_0xb2f637[_0x1a42a5(0xb5)])[_0x1a42a5(0xd7)](_0x165f02=>{const _0x51ecea=_0x1a42a5,_0x4456f5=_0xb2f637['calendar'][_0x165f02];_0x4456f5[_0x51ecea(0xd7)](_0x2a17c1=>{const _0x81e2d6=_0x51ecea;sessions[_0x81e2d6(0x11e)]({'id':_0x2a17c1['i'],'clientId':_0x2a17c1['c'],'coachId':_0x2a17c1[_0x81e2d6(0xf0)],'dateStr':_0x2a304a+'-'+_0x165f02[_0x81e2d6(0x9c)](0x2,'0'),'start':_0x2a17c1['s'],'end':_0x2a17c1['e'],'note':_0x2a17c1['n']||'','status':_0x2a17c1['st']||'planned','seriesId':_0x2a17c1[_0x81e2d6(0x14d)]});});})),reRenderBlocks();}};function init(){const _0x4766f1=a3_0x408645;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x4766f1(0x99)](_0x4766f1(0x9b))['addEventListener'](_0x4766f1(0x8c),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x5e418e=a3_0x408645,_0x1692bb=document[_0x5e418e(0x99)](_0x5e418e(0x143)),_0x54aa25=document[_0x5e418e(0x99)](_0x5e418e(0x12b));_0x1692bb[_0x5e418e(0xc3)]='',_0x1692bb[_0x5e418e(0x100)](_0x54aa25);for(let _0x2ca352=0x0;_0x2ca352<0x18;_0x2ca352++){const _0x48e8af=document[_0x5e418e(0x14a)](_0x5e418e(0x10a));_0x48e8af[_0x5e418e(0x84)]=_0x5e418e(0x160);if(_0x2ca352>0x0)_0x48e8af[_0x5e418e(0xc3)]=_0x5e418e(0xf3)+String(_0x2ca352)['padStart'](0x2,'0')+_0x5e418e(0x175);_0x1692bb[_0x5e418e(0x100)](_0x48e8af);}}function renderDayRange(_0x4f4576,_0xa8619){const _0x2e13ad=a3_0x408645,_0x3e1ce1=document['getElementById'](_0x2e13ad(0x13e)),_0xbab02d=document[_0x2e13ad(0x99)](_0x2e13ad(0xa0)),_0x5b8c02=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x11d4a9=new Date();_0x11d4a9['setHours'](0x0,0x0,0x0,0x0);const _0x398826=getLocalDateStr(new Date());for(let _0x4c5947=_0x4f4576;_0x4c5947<=_0xa8619;_0x4c5947++){const _0x2b0e0c=new Date(_0x11d4a9);_0x2b0e0c[_0x2e13ad(0x127)](_0x2b0e0c[_0x2e13ad(0x81)]()+_0x4c5947);const _0x5793ed=getLocalDateStr(_0x2b0e0c);let _0x16590e=_0x2b0e0c[_0x2e13ad(0x148)]()-0x1;if(_0x16590e===-0x1)_0x16590e=0x6;const _0x4d8769=_0x5793ed===_0x398826,_0x19f840=document['createElement'](_0x2e13ad(0x10a));_0x19f840['className']='day-col-header\x20'+(_0x4d8769?_0x2e13ad(0x12f):''),_0x19f840[_0x2e13ad(0x161)](_0x2e13ad(0x12d),_0x5793ed),_0x19f840[_0x2e13ad(0xc3)]=_0x2e13ad(0x177)+_0x5b8c02[_0x16590e]+'</div><div\x20class=\x22dch-num\x22>'+_0x2b0e0c[_0x2e13ad(0x81)]()+_0x2e13ad(0xd0),_0x3e1ce1['appendChild'](_0x19f840);const _0x452752=document[_0x2e13ad(0x14a)]('div');_0x452752[_0x2e13ad(0x84)]='day-column\x20'+(_0x4d8769?'today':''),_0x452752[_0x2e13ad(0x161)](_0x2e13ad(0x12d),_0x5793ed),_0x452752[_0x2e13ad(0x161)](_0x2e13ad(0x8b),_0x16590e),_0xbab02d[_0x2e13ad(0x100)](_0x452752);}}function reRenderBlocks(){const _0x4e7dcf=a3_0x408645;document[_0x4e7dcf(0xfa)](_0x4e7dcf(0x8d))[_0x4e7dcf(0xd7)](_0x3eaf72=>{const _0x1e1944=_0x4e7dcf;_0x3eaf72[_0x1e1944(0xfa)](_0x1e1944(0x111))[_0x1e1944(0xd7)](_0x3f73b9=>_0x3f73b9[_0x1e1944(0x91)]());const _0x22bf14=_0x3eaf72['getAttribute'](_0x1e1944(0x12d)),_0x1e0780=parseInt(_0x3eaf72[_0x1e1944(0x106)](_0x1e1944(0x8b))),_0x590b0a=Math[_0x1e1944(0x114)](_0x3eaf72[_0x1e1944(0xd6)]);(availabilityPattern[_0x1e0780]||[])[_0x1e1944(0xd7)](_0x545702=>{const _0x542d9b=_0x1e1944,_0x81a4c8=document['createElement']('div');_0x81a4c8['className']=_0x542d9b(0x144),_0x81a4c8[_0x542d9b(0xbe)]['top']=_0x545702*GRID_H+'px',_0x81a4c8['style'][_0x542d9b(0x145)]='-'+_0x590b0a+_0x542d9b(0x109)+_0x545702*GRID_H+'px',_0x3eaf72[_0x542d9b(0x100)](_0x81a4c8);});if(specialRanges[_0x1e1944(0x10c)]>0x0){const _0x284e92=new Date(_0x22bf14+'T00:00:00')[_0x1e1944(0xe7)](),_0x397206=new Date(_0x22bf14+'T23:59:59')[_0x1e1944(0xe7)]();specialRanges['forEach'](_0x4fe949=>{const _0x3cd480=_0x1e1944,_0x2e15e1=new Date(_0x4fe949[_0x3cd480(0xb3)])[_0x3cd480(0xe7)](),_0x10e59=new Date(_0x4fe949[_0x3cd480(0xd3)])[_0x3cd480(0xe7)](),_0x343d75=Math[_0x3cd480(0xa7)](_0x284e92,_0x2e15e1),_0x3d866d=Math[_0x3cd480(0x13c)](_0x397206,_0x10e59);if(_0x343d75<_0x3d866d){const _0x330fa8=(_0x343d75-_0x284e92)/0x36ee80*GRID_H,_0x531293=(_0x3d866d-_0x343d75)/0x36ee80*GRID_H,_0x1bcf90=document[_0x3cd480(0x14a)](_0x3cd480(0x10a));_0x531293>=23.5*GRID_H?(_0x1bcf90['className']=_0x3cd480(0x125),_0x1bcf90['style'][_0x3cd480(0x145)]='-'+_0x590b0a+_0x3cd480(0xcb)):(_0x1bcf90[_0x3cd480(0x84)]=_0x3cd480(0x141),_0x1bcf90['style']['top']=_0x330fa8+'px',_0x1bcf90[_0x3cd480(0xbe)][_0x3cd480(0x12a)]=_0x531293+'px',_0x1bcf90[_0x3cd480(0xbe)][_0x3cd480(0x145)]='-'+_0x590b0a+'px\x20-'+_0x330fa8+'px'),_0x3eaf72[_0x3cd480(0x100)](_0x1bcf90);}});}renderEventsForColumn(_0x3eaf72,_0x22bf14);});}function renderEventsForColumn(_0x4940c0,_0x3e741d){const _0x22e7a4=a3_0x408645,_0x14c115=sessions[_0x22e7a4(0x87)](_0x1e5c8e=>_0x1e5c8e[_0x22e7a4(0xaa)]===_0x3e741d),_0x381682=_0x14c115[_0x22e7a4(0xc8)](_0x5c41ff=>{const _0x47921f=_0x22e7a4,[_0x1ebc81,_0x4f37a9]=_0x5c41ff[_0x47921f(0xb3)][_0x47921f(0x10b)](':')[_0x47921f(0xc8)](Number),[_0x161cdd,_0x53d875]=_0x5c41ff[_0x47921f(0xd3)][_0x47921f(0x10b)](':')[_0x47921f(0xc8)](Number);return{'data':_0x5c41ff,'start':_0x1ebc81*0x3c+_0x4f37a9,'end':_0x161cdd*0x3c+_0x53d875,'colIndex':0x0};});_0x381682[_0x22e7a4(0x149)]((_0x5638ba,_0x81e02)=>_0x5638ba[_0x22e7a4(0xb3)]-_0x81e02[_0x22e7a4(0xb3)]||_0x81e02[_0x22e7a4(0xd3)]-_0x81e02[_0x22e7a4(0xb3)]-(_0x5638ba[_0x22e7a4(0xd3)]-_0x5638ba[_0x22e7a4(0xb3)]));const _0x3f448e=[];_0x381682[_0x22e7a4(0xd7)](_0x86193c=>{const _0x42c486=_0x22e7a4;let _0x140c7e=![];for(let _0x375105=0x0;_0x375105<_0x3f448e[_0x42c486(0x10c)];_0x375105++){const _0x4ae7e3=_0x3f448e[_0x375105];if(_0x86193c[_0x42c486(0xb3)]>=_0x4ae7e3[_0x4ae7e3[_0x42c486(0x10c)]-0x1][_0x42c486(0xd3)]){_0x4ae7e3[_0x42c486(0x11e)](_0x86193c),_0x86193c[_0x42c486(0xd1)]=_0x375105,_0x140c7e=!![];break;}}!_0x140c7e&&(_0x3f448e[_0x42c486(0x11e)]([_0x86193c]),_0x86193c[_0x42c486(0xd1)]=_0x3f448e[_0x42c486(0x10c)]-0x1);}),_0x381682['forEach'](_0xff0470=>{const _0x475063=_0x22e7a4;let _0x2bf62b=0x0;_0x381682['forEach'](_0x522286=>{const _0xdf9e91=a3_0x55c4;if(Math[_0xdf9e91(0xa7)](_0xff0470['start'],_0x522286[_0xdf9e91(0xb3)])<Math[_0xdf9e91(0x13c)](_0xff0470[_0xdf9e91(0xd3)],_0x522286[_0xdf9e91(0xd3)])&&_0x522286[_0xdf9e91(0xd1)]>_0x2bf62b)_0x2bf62b=_0x522286['colIndex'];});const _0x2f5441=_0x2bf62b+0x1,_0x55c6ad=0x64/_0x2f5441,_0x274189=_0xff0470[_0x475063(0xd1)]*_0x55c6ad,_0x55066d=document[_0x475063(0x14a)](_0x475063(0x10a)),_0x2b409c=_0xff0470[_0x475063(0xe1)];let _0x3f919c=_0x475063(0x101);if(clients&&clients[_0x475063(0x10c)]>0x0){const _0x5c329f=clients[_0x475063(0xc2)](_0x562ada=>String(_0x562ada['id'])===String(_0x2b409c['clientId']));if(_0x5c329f&&_0x5c329f[_0x475063(0x159)])_0x3f919c=_0x5c329f[_0x475063(0x159)];}const _0x411725=_0x2b409c[_0x475063(0x165)]===_0x475063(0x118),_0xbb9ce4=_0x411725?0x1:0.45;_0x55066d[_0x475063(0x84)]=_0x475063(0xfb)+(_0x411725?_0x475063(0x8e):''),_0x55066d[_0x475063(0xbe)][_0x475063(0xde)]=hexToRgba(_0x3f919c,_0xbb9ce4),_0x55066d['style'][_0x475063(0x15c)]=_0x3f919c;const _0x5c87fb=_0xff0470[_0x475063(0xb3)]/0x3c*GRID_H,_0x98ce57=(_0xff0470[_0x475063(0xd3)]-_0xff0470[_0x475063(0xb3)])/0x3c*GRID_H;_0x55066d[_0x475063(0xbe)][_0x475063(0x138)]=_0x5c87fb+'px',_0x55066d[_0x475063(0xbe)][_0x475063(0x12a)]=Math['max'](_0x98ce57,0x14)+'px',_0x55066d[_0x475063(0xbe)][_0x475063(0x119)]='calc('+_0x55c6ad+_0x475063(0xda),_0x55066d[_0x475063(0xbe)][_0x475063(0x93)]=_0x475063(0xcc)+_0x274189+_0x475063(0x14c),_0x55066d[_0x475063(0xbe)][_0x475063(0x134)]=0xa+_0xff0470['colIndex'];if(_0x55c6ad<0x55)_0x55066d[_0x475063(0x131)][_0x475063(0x170)](_0x475063(0xbc));let _0x9c2f69='';if(_0x2b409c[_0x475063(0xff)])_0x9c2f69+='<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>';if(_0x411725)_0x9c2f69+=_0x475063(0xeb);_0x55066d[_0x475063(0xc3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x2b409c[_0x475063(0xb3)]+_0x475063(0xb6)+_0x2b409c[_0x475063(0xd3)]+_0x475063(0x15f)+_0x9c2f69+_0x475063(0x13d),_0x55066d[_0x475063(0xf9)]=_0xbb3ab9=>{const _0x243467=_0x475063;_0xbb3ab9[_0x243467(0x171)](),openDetails(_0x2b409c);},_0x4940c0['appendChild'](_0x55066d);});}function openAnalytics(){const _0x554389=a3_0x408645,_0x281f32=document[_0x554389(0x124)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x554389(0x88),_0x281f32),openSheet(_0x554389(0x154));}function setAnalyticsPeriod(_0x59e142,_0x59925e){const _0x498512=a3_0x408645;currentAnPeriod=_0x59e142,document['querySelectorAll'](_0x498512(0x89))[_0x498512(0xd7)](_0x1d21a3=>_0x1d21a3[_0x498512(0x131)][_0x498512(0x91)](_0x498512(0xc0)));if(_0x59925e)_0x59925e[_0x498512(0x131)][_0x498512(0x170)](_0x498512(0xc0));const _0x5a2c88=document[_0x498512(0x99)]('anCustomDates');_0x5a2c88[_0x498512(0xbe)][_0x498512(0x16e)]=_0x59e142===_0x498512(0x150)?_0x498512(0xa1):'none';const _0x583c2e=new Date();let _0xbef62c=new Date(),_0x12edd7=new Date();if(_0x59e142===_0x498512(0x88))_0xbef62c=getStartOfWeek(_0x583c2e),_0x12edd7=new Date(_0xbef62c),_0x12edd7[_0x498512(0x127)](_0x12edd7[_0x498512(0x81)]()+0x6);else{if(_0x59e142==='month')_0xbef62c=new Date(_0x583c2e[_0x498512(0x10d)](),_0x583c2e[_0x498512(0xf4)](),0x1),_0x12edd7=new Date(_0x583c2e[_0x498512(0x10d)](),_0x583c2e[_0x498512(0xf4)]()+0x1,0x0);else{!document[_0x498512(0x99)]('anStart')['value']&&(document[_0x498512(0x99)](_0x498512(0xbb))[_0x498512(0xdc)]=getLocalDateStr(_0x583c2e),document[_0x498512(0x99)](_0x498512(0x168))[_0x498512(0xdc)]=getLocalDateStr(_0x583c2e));refreshAnalytics();return;}}document[_0x498512(0x99)](_0x498512(0xbb))[_0x498512(0xdc)]=getLocalDateStr(_0xbef62c),document[_0x498512(0x99)]('anEnd')['value']=getLocalDateStr(_0x12edd7),refreshAnalytics();}function refreshAnalytics(){const _0x1b6f11=a3_0x408645,_0x40ac4e=document[_0x1b6f11(0x99)]('anStart')['value'],_0x51952f=document[_0x1b6f11(0x99)](_0x1b6f11(0x168))[_0x1b6f11(0xdc)];if(!_0x40ac4e||!_0x51952f)return;const _0x2fa22d=sessions[_0x1b6f11(0x87)](_0x431848=>_0x431848[_0x1b6f11(0xaa)]>=_0x40ac4e&&_0x431848[_0x1b6f11(0xaa)]<=_0x51952f&&_0x431848[_0x1b6f11(0x165)]!=='cancelled'),_0xda48dc=_0x2fa22d['length'],_0x5ab677=_0x2fa22d[_0x1b6f11(0x87)](_0x56edd6=>_0x56edd6['status']===_0x1b6f11(0x118))[_0x1b6f11(0x10c)],_0x13f350=_0xda48dc>0x0?Math[_0x1b6f11(0x114)](_0x5ab677/_0xda48dc*0x64):0x0;document[_0x1b6f11(0x99)]('anPercent')[_0x1b6f11(0x9e)]=_0x13f350+'%',document[_0x1b6f11(0x99)](_0x1b6f11(0x147))['textContent']=_0x5ab677+_0x1b6f11(0xa8)+_0xda48dc+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x2a96bb=document['getElementById'](_0x1b6f11(0x16a)),_0x392504=0x2*Math['PI']*0x23,_0x4fe35b=_0x392504-_0x13f350/0x64*_0x392504;_0x2a96bb['style'][_0x1b6f11(0xba)]=_0x4fe35b;const _0x239c0c={};_0x2fa22d[_0x1b6f11(0xd7)](_0xd8faaf=>{const _0x5026f0=_0x1b6f11,_0x27ef29=_0xd8faaf[_0x5026f0(0xef)]||_0x5026f0(0x129);if(!_0x239c0c[_0x27ef29]){const _0x5ce260='#'+_0x27ef29[_0x5026f0(0x15b)]()[_0x5026f0(0x103)](0x0,0x6);_0x239c0c[_0x27ef29]={'total':0x0,'done':0x0,'color':_0x5ce260};}_0x239c0c[_0x27ef29][_0x5026f0(0x135)]++;if(_0xd8faaf[_0x5026f0(0x165)]===_0x5026f0(0x118))_0x239c0c[_0x27ef29]['done']++;});const _0x653f4b=document['getElementById'](_0x1b6f11(0xfc));_0x653f4b[_0x1b6f11(0xc3)]='';const _0x1105de=Object[_0x1b6f11(0xb7)](_0x239c0c)[_0x1b6f11(0x149)]((_0x5ce7c5,_0x2ae54d)=>_0x2ae54d[0x1][_0x1b6f11(0x135)]-_0x5ce7c5[0x1][_0x1b6f11(0x135)]);if(_0x1105de[_0x1b6f11(0x10c)]===0x0){_0x653f4b[_0x1b6f11(0xc3)]=_0x1b6f11(0x123);return;}_0x1105de['forEach'](([_0x23fa22,_0xf12d2])=>{const _0x69b4d2=_0x1b6f11,_0x2d30f2=Math[_0x69b4d2(0x114)](_0xf12d2['done']/_0xf12d2[_0x69b4d2(0x135)]*0x64),_0x4094cd=document[_0x69b4d2(0x14a)]('div');_0x4094cd[_0x69b4d2(0x84)]=_0x69b4d2(0x151),_0x4094cd[_0x69b4d2(0xbe)]['borderLeftColor']=_0xf12d2[_0x69b4d2(0x159)],_0x4094cd[_0x69b4d2(0xc3)]=_0x69b4d2(0xc1)+_0x23fa22[_0x69b4d2(0x103)](0x0,0x5)+_0x69b4d2(0xed)+_0xf12d2[_0x69b4d2(0x178)]+_0x69b4d2(0xbf)+_0xf12d2[_0x69b4d2(0x135)]+_0x69b4d2(0x133)+_0x2d30f2+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x653f4b[_0x69b4d2(0x100)](_0x4094cd);});}function openDetails(_0x3d2d7e){const _0x32f7ef=a3_0x408645;currentSession=_0x3d2d7e;const _0x13ad41=new Date(_0x3d2d7e[_0x32f7ef(0xaa)]),_0xe74081=_0x13ad41['toLocaleDateString'](_0x32f7ef(0xb4),{'weekday':'long','day':_0x32f7ef(0x122),'month':_0x32f7ef(0x9a)});document[_0x32f7ef(0x99)]('detDate')[_0x32f7ef(0x9e)]=_0xe74081[_0x32f7ef(0x9f)](0x0)[_0x32f7ef(0x128)]()+_0xe74081['slice'](0x1),document[_0x32f7ef(0x99)](_0x32f7ef(0x140))['textContent']=_0x3d2d7e['start']+_0x32f7ef(0xb6)+_0x3d2d7e[_0x32f7ef(0xd3)],document['getElementById'](_0x32f7ef(0x85))['textContent']=_0x3d2d7e['note']||_0x32f7ef(0x142);const _0x203998=document[_0x32f7ef(0x99)](_0x32f7ef(0x130)),_0x18ea81=document[_0x32f7ef(0x99)](_0x32f7ef(0xe3)),_0x155ef1=_0x18ea81[_0x32f7ef(0x124)](_0x32f7ef(0xa6)),_0x2a1878=_0x18ea81[_0x32f7ef(0x124)](_0x32f7ef(0xc5)),_0x396a94=document[_0x32f7ef(0x99)](_0x32f7ef(0xc9));if(_0x3d2d7e[_0x32f7ef(0x165)]===_0x32f7ef(0x118))_0x203998[_0x32f7ef(0x9e)]=_0x32f7ef(0xcf),_0x203998[_0x32f7ef(0xbe)]['color']=_0x32f7ef(0x158),_0x18ea81[_0x32f7ef(0xbe)]['display']=_0x32f7ef(0xca);else{_0x203998[_0x32f7ef(0x9e)]=_0x32f7ef(0x95),_0x203998['style'][_0x32f7ef(0x159)]=_0x32f7ef(0x126),_0x18ea81[_0x32f7ef(0xbe)]['display']=_0x32f7ef(0xf8);const _0x207311=new Date(_0x3d2d7e[_0x32f7ef(0xaa)]+'T'+_0x3d2d7e[_0x32f7ef(0xb3)]),_0x1e0cbb=new Date(),_0x565e4f=(_0x207311-_0x1e0cbb)/(0x3e8*0x3c*0x3c),_0x564f52=coachProfiles[_0x3d2d7e[_0x32f7ef(0xef)]]&&coachProfiles[_0x3d2d7e[_0x32f7ef(0xef)]][_0x32f7ef(0x110)]?parseInt(coachProfiles[_0x3d2d7e[_0x32f7ef(0xef)]][_0x32f7ef(0x110)]):0x18;if(_0x564f52===0x0||_0x565e4f>=_0x564f52)_0x155ef1[_0x32f7ef(0xbe)][_0x32f7ef(0x16e)]='block',_0x2a1878['style'][_0x32f7ef(0x16e)]=_0x32f7ef(0xf8),_0x396a94['style'][_0x32f7ef(0x16e)]='none';else{_0x155ef1['style'][_0x32f7ef(0x16e)]='none',_0x2a1878[_0x32f7ef(0xbe)][_0x32f7ef(0x16e)]=_0x32f7ef(0xca),_0x396a94['style'][_0x32f7ef(0x16e)]=_0x32f7ef(0xf8);let _0x13b747=_0x564f52===0x0?_0x32f7ef(0xaf):_0x32f7ef(0xb0)+_0x564f52+_0x32f7ef(0x139);_0x396a94[_0x32f7ef(0x9e)]='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x13b747+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document['getElementById'](_0x32f7ef(0x167))[_0x32f7ef(0x131)][_0x32f7ef(0x170)]('active'),document[_0x32f7ef(0x99)](_0x32f7ef(0xb9))[_0x32f7ef(0x131)][_0x32f7ef(0x170)](_0x32f7ef(0xce));}function closeAllSheets(){const _0xa5b4a3=a3_0x408645;document[_0xa5b4a3(0x99)](_0xa5b4a3(0x167))[_0xa5b4a3(0x131)][_0xa5b4a3(0x91)]('active'),document[_0xa5b4a3(0xfa)](_0xa5b4a3(0x12e))[_0xa5b4a3(0xd7)](_0x3f2786=>_0x3f2786[_0xa5b4a3(0x131)][_0xa5b4a3(0x91)](_0xa5b4a3(0xce)));}function openSheet(_0x13dfd7){const _0x182d80=a3_0x408645;document[_0x182d80(0x99)](_0x182d80(0x167))[_0x182d80(0x131)]['add'](_0x182d80(0xc0)),document[_0x182d80(0x99)](_0x13dfd7)[_0x182d80(0x131)][_0x182d80(0x170)](_0x182d80(0xce));}function getLocalDateStr(_0x3035d8){const _0x382499=a3_0x408645,_0x2d659f=_0x3035d8[_0x382499(0x10d)](),_0x29b3ea=String(_0x3035d8['getMonth']()+0x1)[_0x382499(0x9c)](0x2,'0'),_0x2882cb=String(_0x3035d8['getDate']())[_0x382499(0x9c)](0x2,'0');return _0x2d659f+'-'+_0x29b3ea+'-'+_0x2882cb;}function getStartOfWeek(_0x7fe795){const _0x3b3531=a3_0x408645,_0x2a541f=new Date(_0x7fe795),_0x534f03=_0x2a541f['getDay'](),_0x23767=_0x2a541f[_0x3b3531(0x81)]()-_0x534f03+(_0x534f03===0x0?-0x6:0x1);return _0x2a541f[_0x3b3531(0x127)](_0x23767),_0x2a541f[_0x3b3531(0x136)](0x0,0x0,0x0,0x0),_0x2a541f;}function scrollToToday(){const _0x147962=getLocalDateStr(new Date());setTimeout(()=>{const _0x1077db=a3_0x55c4,_0x51b1e3=document[_0x1077db(0x124)](_0x1077db(0xc7)+_0x147962+'\x22]');if(_0x51b1e3){const _0x3f66a6=document['getElementById']('matrixViewport'),_0x43af4f=_0x51b1e3['offsetLeft']-_0x3f66a6[_0x1077db(0x164)]/0x2+_0x51b1e3[_0x1077db(0x115)]/0x2;_0x3f66a6[_0x1077db(0xee)]({'left':_0x43af4f,'behavior':'auto'}),_0x3f66a6[_0x1077db(0xe5)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x198f83=a3_0x408645,_0x5879d5=new Date(),_0x35472c=document[_0x198f83(0x99)](_0x198f83(0x13a)),_0x3d6542=document[_0x198f83(0x99)](_0x198f83(0x12b)),_0xdfb680=(_0x5879d5[_0x198f83(0xe6)]()*0x3c+_0x5879d5['getMinutes']())/0x3c*GRID_H;_0x35472c[_0x198f83(0xbe)][_0x198f83(0x138)]=_0xdfb680+'px',_0x35472c[_0x198f83(0xbe)][_0x198f83(0x16e)]=_0x198f83(0xf8),_0x3d6542['style'][_0x198f83(0x138)]=_0xdfb680+'px',_0x3d6542[_0x198f83(0xbe)][_0x198f83(0x16e)]=_0x198f83(0xf8),_0x3d6542[_0x198f83(0x9e)]=String(_0x5879d5[_0x198f83(0xe6)]())[_0x198f83(0x9c)](0x2,'0')+':'+String(_0x5879d5[_0x198f83(0x121)]())[_0x198f83(0x9c)](0x2,'0');}function onScroll(){const _0x843d8a=a3_0x408645,_0x5208bc=document[_0x843d8a(0x99)](_0x843d8a(0x9b)),_0x35489e=document[_0x843d8a(0xfa)](_0x843d8a(0x116));for(let _0x16c5a2 of _0x35489e)if(_0x16c5a2[_0x843d8a(0xd6)]>=_0x5208bc['scrollLeft']){const _0x4363a5=new Date(_0x16c5a2[_0x843d8a(0x106)](_0x843d8a(0x12d)));document[_0x843d8a(0x99)]('headerMonth')['textContent']=_0x4363a5['toLocaleString']('ru',{'month':_0x843d8a(0x9a)})[_0x843d8a(0x128)]()+'\x20'+_0x4363a5[_0x843d8a(0x10d)]();break;}}function showToast(_0x41ced2){const _0x14e24f=a3_0x408645,_0x22d105=document['getElementById']('toast');_0x22d105[_0x14e24f(0x9e)]=_0x41ced2,_0x22d105['classList'][_0x14e24f(0x170)]('show'),setTimeout(()=>_0x22d105[_0x14e24f(0x131)][_0x14e24f(0x91)](_0x14e24f(0x96)),0x7d0);}function handleInfiniteScroll(){const _0x82f413=a3_0x408645,_0x286b8b=document['getElementById'](_0x82f413(0x9b)),_0x2a0a43=_0x286b8b['scrollLeft'],_0xce0b=_0x286b8b[_0x82f413(0x113)],_0x5ad2f1=_0x286b8b[_0x82f413(0x164)];if(_0xce0b-(_0x2a0a43+_0x5ad2f1)<0x12c){const _0x5ce890=endOffset;endOffset+=0xe,renderDayRange(_0x5ce890+0x1,endOffset),reRenderBlocks();}if(_0x2a0a43<0x12c){const _0x1be212=startOffset;startOffset-=0xe,prependDays(startOffset,_0x1be212-0x1),_0x286b8b['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x5f2e9a,_0x510276){const _0x2cd036=a3_0x408645,_0x5ca66f=document[_0x2cd036(0x99)]('daysHeaderTrack'),_0x5df30b=document['getElementById'](_0x2cd036(0xa0)),_0x5f0514=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xf08005=new Date();_0xf08005['setHours'](0x0,0x0,0x0,0x0);const _0x1d02f0=getLocalDateStr(new Date()),_0x20b87d=document[_0x2cd036(0x83)](),_0x4fba05=document['createDocumentFragment']();for(let _0x15b517=_0x5f2e9a;_0x15b517<=_0x510276;_0x15b517++){const _0x3b8379=new Date(_0xf08005);_0x3b8379[_0x2cd036(0x127)](_0x3b8379[_0x2cd036(0x81)]()+_0x15b517);const _0x238ef8=getLocalDateStr(_0x3b8379);let _0x5cf848=_0x3b8379['getDay']()-0x1;if(_0x5cf848===-0x1)_0x5cf848=0x6;const _0x562703=_0x238ef8===_0x1d02f0,_0x49f849=document['createElement'](_0x2cd036(0x10a));_0x49f849['className']=_0x2cd036(0x174)+(_0x562703?_0x2cd036(0x12f):''),_0x49f849[_0x2cd036(0x161)](_0x2cd036(0x12d),_0x238ef8),_0x49f849['innerHTML']=_0x2cd036(0x177)+_0x5f0514[_0x5cf848]+'</div><div\x20class=\x22dch-num\x22>'+_0x3b8379['getDate']()+'</div>',_0x20b87d[_0x2cd036(0x100)](_0x49f849);const _0x4dbd73=document['createElement']('div');_0x4dbd73[_0x2cd036(0x84)]='day-column\x20'+(_0x562703?'today':''),_0x4dbd73['setAttribute'](_0x2cd036(0x12d),_0x238ef8),_0x4dbd73['setAttribute'](_0x2cd036(0x8b),_0x5cf848),_0x4fba05['appendChild'](_0x4dbd73);}_0x5ca66f[_0x2cd036(0x86)](_0x20b87d,_0x5ca66f[_0x2cd036(0xcd)]),_0x5df30b[_0x2cd036(0x86)](_0x4fba05,_0x5df30b['querySelector'](_0x2cd036(0x8d)));}function hexToRgba(_0x25ec0e,_0x1767b0){const _0x1b1b6d=a3_0x408645;let _0x4f8b40;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x1b1b6d(0xea)](_0x25ec0e))return _0x4f8b40=_0x25ec0e[_0x1b1b6d(0xe4)](0x1)[_0x1b1b6d(0x10b)](''),_0x4f8b40[_0x1b1b6d(0x10c)]==0x3&&(_0x4f8b40=[_0x4f8b40[0x0],_0x4f8b40[0x0],_0x4f8b40[0x1],_0x4f8b40[0x1],_0x4f8b40[0x2],_0x4f8b40[0x2]]),_0x4f8b40='0x'+_0x4f8b40[_0x1b1b6d(0x155)](''),'rgba('+[_0x4f8b40>>0x10&0xff,_0x4f8b40>>0x8&0xff,_0x4f8b40&0xff]['join'](',')+','+_0x1767b0+')';return _0x1b1b6d(0xdf)+_0x1767b0+')';}let confirmResolver=null;function showCustomConfirm(_0x578892,_0x3ad55d,_0x33eed0=!![]){const _0x16789f=a3_0x408645;document[_0x16789f(0x99)]('ccTitle')['textContent']=_0x578892,document[_0x16789f(0x99)]('ccText')[_0x16789f(0x9e)]=_0x3ad55d;const _0x576177=document[_0x16789f(0x99)](_0x16789f(0xf5));return _0x33eed0?(_0x576177['style']['color']=_0x16789f(0xfe),_0x576177['style'][_0x16789f(0x9d)]=_0x16789f(0xa3)):(_0x576177[_0x16789f(0xbe)][_0x16789f(0x159)]=_0x16789f(0x101),_0x576177[_0x16789f(0xbe)][_0x16789f(0x9d)]=_0x16789f(0xa3)),new Promise(_0x260437=>{const _0x376966=_0x16789f;confirmResolver=_0x260437,document[_0x376966(0x99)](_0x376966(0x15d))['classList'][_0x376966(0x170)](_0x376966(0x156));});}function resolveCustomConfirm(_0x186769){const _0x251936=a3_0x408645;document[_0x251936(0x99)](_0x251936(0x15d))[_0x251936(0x131)][_0x251936(0x91)]('visible');if(confirmResolver)confirmResolver(_0x186769);}async function tryCancelCurrentSession(){const _0x13f2fe=a3_0x408645;if(!currentSession)return;const _0x2ff45c=await showCustomConfirm(_0x13f2fe(0x13b),_0x13f2fe(0xe8),!![]);if(!_0x2ff45c)return;const _0x48d8b0=currentSession;closeAllSheets(),sessions=sessions[_0x13f2fe(0x87)](_0x5f06f9=>_0x5f06f9['id']!==_0x48d8b0['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x13f2fe(0x11b)]();try{const _0x208712=window['Telegram']?.[_0x13f2fe(0x15a)],_0x5da3d7=await fetch(API_URL,{'method':_0x13f2fe(0xa4),'body':JSON[_0x13f2fe(0xc4)]({'action':_0x13f2fe(0xb2),'init_data':_0x208712?.['initData']||'','coachId':_0x48d8b0[_0x13f2fe(0xef)],'dateStr':_0x48d8b0[_0x13f2fe(0xaa)],'sessionId':_0x48d8b0['id']})});if(_0x5da3d7['ok'])DataManager[_0x13f2fe(0xd9)]();}catch(_0x2a0d36){showToast(_0x13f2fe(0x166));}}function a3_0x5121(){const _0x21935b=['getAttribute','setItem','disableVerticalSwipes','px\x20-','div','split','length','getFullYear','1004199DhMlPu','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','cancel_window','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','1494256eLWHEl','scrollWidth','round','offsetWidth','.day-col-header','settings','completed','width','syncLoad','now','href','pattern','push','787gkBPoa','all','getMinutes','numeric','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','querySelector','day-off-overlay\x20stripe-bg','var(--acc-blue)','setDate','toUpperCase','Unknown','height','timeLineBadge','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','data-date','.sheet','today','detStatus','classList','apply','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','zIndex','total','setHours','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','top','\x20—á.','globalTimeLine','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','min','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','daysHeaderTrack','initData','detTime','blocked-range-part\x20stripe-bg','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','timeColumn','blocked-slot\x20stripe-bg','backgroundPosition','(((.+)+)+)+$','anTotalStats','getDay','sort','createElement','startsWith','%\x20+\x202px)','sid','Error\x20setting\x20back\x20button:','rsDatesTrack','custom','client-stat-card','onClick','5VapSUT','analyticsSheet','join','visible','search','var(--acc-green)','color','WebApp','toString','borderLeftColor','customConfirm','739540NDhsLo','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','time-label','setAttribute','1387370CPDDPR','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','clientWidth','status','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','overlay','anEnd','json','anDonutCircle','uc_client_list','.rs-date-chip','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','display','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','add','stopPropagation','ready','3aTgdre','day-col-header\x20',':00</span>','BackButton','<div\x20class=\x22dch-day\x22>','done','getDate','622urDgpt','createDocumentFragment','className','detNote','insertBefore','filter','week','.period-switch\x20.p-btn','keys','data-day-idx','scroll','.day-column','\x20status-completed','coach_profiles','#050505','remove','reschedule','left','findIndex','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','show','2079945FghjBN','setBackgroundColor','getElementById','long','matrixViewport','padStart','fontWeight','textContent','charAt','gridColumns','flex','rs-date-chip','600','POST','addEventListener','.btn-cancel','max','\x20–∏–∑\x20','exceptions','dateStr','uc_client_settings','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','then','979932OYOeoL','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','–∑–∞\x20','ranges','client_cancel','start','ru-RU','calendar','\x20-\x20','entries','offClick','detailsSheet','strokeDashoffset','anStart','mini','rsSlotsGrid','style','</span>\x20/\x20','active','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','find','innerHTML','stringify','.btn-reschedule','initDataUnsafe','.day-col-header[data-date=\x22','map','cancelHint','none','px\x200px','calc(','firstChild','open','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','</div>','colIndex','parse','end','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','rs-time-btn','offsetLeft','forEach','get_slots','saveLocally','%\x20-\x204px)','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','value','Error\x20setting\x20color:','backgroundColor','rgba(10,\x20132,\x20255,\x20','getItem','data','clients','cancelContainer','substring','scrollTop','getHours','getTime','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','uc_client_sessions','test','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','setHeaderColor','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','scrollTo','coachId','cid','<div\x20class=\x22rs-day-name\x22>','setMonth','<span>','getMonth','ccYesBtn','applyData','Telegram','block','onclick','querySelectorAll','event-card','analyticsList','log','#ff453a','seriesId','appendChild','#0a84ff','rescheduleSheet','substr','client_load','error'];a3_0x5121=function(){return _0x21935b;};return a3_0x5121();}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x8cbead=a3_0x408645;if(!currentSession)return;document['getElementById'](_0x8cbead(0xb9))[_0x8cbead(0x131)][_0x8cbead(0x91)](_0x8cbead(0xce)),document[_0x8cbead(0x99)](_0x8cbead(0x102))[_0x8cbead(0x131)][_0x8cbead(0x170)]('open');const _0xf6463a=document['getElementById'](_0x8cbead(0x14f)),_0x943be5=document[_0x8cbead(0x99)](_0x8cbead(0xbd));_0xf6463a[_0x8cbead(0xc3)]='',_0x943be5[_0x8cbead(0xc3)]=_0x8cbead(0x10f);const [_0x54509b,_0x536bf8]=currentSession[_0x8cbead(0xb3)][_0x8cbead(0x10b)](':')[_0x8cbead(0xc8)](Number),[_0x44937e,_0x508f9e]=currentSession['end'][_0x8cbead(0x10b)](':')[_0x8cbead(0xc8)](Number),_0x399ffc=_0x44937e*0x3c+_0x508f9e-(_0x54509b*0x3c+_0x536bf8);try{const _0x304883=window['Telegram']?.[_0x8cbead(0x15a)],_0x365ad4=await fetch(API_URL,{'method':_0x8cbead(0xa4),'body':JSON[_0x8cbead(0xc4)]({'action':_0x8cbead(0xd8),'coachId':currentSession[_0x8cbead(0xef)],'duration':_0x399ffc,'init_data':_0x304883?.[_0x8cbead(0x13f)]||'','excludeSessionId':currentSession['id']})}),_0x5cadcc=await _0x365ad4[_0x8cbead(0x169)]();_0x5cadcc['ok']&&_0x5cadcc['data']?(availableSlotsCache=_0x5cadcc[_0x8cbead(0xe1)],renderRescheduleDates()):_0x943be5[_0x8cbead(0xc3)]=_0x8cbead(0x16f);}catch(_0x2cef76){_0x943be5[_0x8cbead(0xc3)]=_0x8cbead(0x163);}}function renderRescheduleDates(){const _0x553f76=a3_0x408645,_0x302dc0=document[_0x553f76(0x99)](_0x553f76(0x14f));_0x302dc0[_0x553f76(0xc3)]='';const _0x24e2a2=Object[_0x553f76(0x8a)](availableSlotsCache)['sort'](),_0x113843=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x24e2a2[_0x553f76(0x10c)]===0x0){document[_0x553f76(0x99)](_0x553f76(0xbd))[_0x553f76(0xc3)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x24e2a2[_0x553f76(0xd7)]((_0x4b0d94,_0x232164)=>{const _0x3e4ad5=_0x553f76,_0x1bcb1a=new Date(_0x4b0d94),_0x4a7fce=_0x113843[_0x1bcb1a['getDay']()],_0x2026e0=_0x1bcb1a[_0x3e4ad5(0x81)](),_0x11955c=document['createElement'](_0x3e4ad5(0x10a));_0x11955c['className']=_0x3e4ad5(0xa2);if(_0x232164===0x0)_0x11955c[_0x3e4ad5(0x131)][_0x3e4ad5(0x170)](_0x3e4ad5(0xc0));_0x11955c[_0x3e4ad5(0xc3)]=_0x3e4ad5(0xf1)+_0x4a7fce+'</div><div\x20class=\x22rs-day-num\x22>'+_0x2026e0+_0x3e4ad5(0xd0),_0x11955c[_0x3e4ad5(0xf9)]=()=>selectRsDate(_0x4b0d94,_0x11955c),_0x302dc0[_0x3e4ad5(0x100)](_0x11955c);}),selectRsDate(_0x24e2a2[0x0],_0x302dc0[_0x553f76(0xcd)]);}function selectRsDate(_0x5d6417,_0x5304c5){const _0x152c16=a3_0x408645;selectedRsDate=_0x5d6417,document['querySelectorAll'](_0x152c16(0x16c))[_0x152c16(0xd7)](_0x375abc=>_0x375abc[_0x152c16(0x131)][_0x152c16(0x91)](_0x152c16(0xc0)));if(_0x5304c5)_0x5304c5['classList']['add'](_0x152c16(0xc0));const _0x5a552e=document[_0x152c16(0x99)](_0x152c16(0xbd));_0x5a552e[_0x152c16(0xc3)]='';const _0x58c520=availableSlotsCache[_0x5d6417]||[];if(_0x58c520[_0x152c16(0x10c)]===0x0){_0x5a552e[_0x152c16(0xc3)]=_0x152c16(0x16f);return;}_0x58c520[_0x152c16(0xd7)](_0x39888d=>{const _0x3a0e80=_0x152c16,_0x41d01d=document[_0x3a0e80(0x14a)]('button');_0x41d01d['className']=_0x3a0e80(0xd5),_0x41d01d['textContent']=_0x39888d,_0x41d01d[_0x3a0e80(0xf9)]=()=>confirmReschedule(_0x39888d),_0x5a552e[_0x3a0e80(0x100)](_0x41d01d);});}function a3_0x55c4(_0x6a6021,_0x3b7475){_0x6a6021=_0x6a6021-0x81;const _0x3f79a2=a3_0x5121();let _0x4a3d85=_0x3f79a2[_0x6a6021];return _0x4a3d85;}async function confirmReschedule(_0x16eb5c){const _0x567a18=a3_0x408645,_0xb10c9c=new Date(selectedRsDate),_0xad1804=_0xb10c9c['toLocaleDateString'](_0x567a18(0xb4),{'day':_0x567a18(0x122),'month':_0x567a18(0x9a)}),_0x4f6eb5=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏',_0x567a18(0xd4)+_0xad1804+'\x20–≤\x20'+_0x16eb5c+'?',![]);if(!_0x4f6eb5)return;closeAllSheets(),showToast(_0x567a18(0x16d)),lastUserActionTime=Date[_0x567a18(0x11b)]();const _0xbf417e=currentSession[_0x567a18(0xaa)],_0x304eec=currentSession['id'],[_0x14043d,_0x203c1f]=currentSession[_0x567a18(0xb3)]['split'](':')[_0x567a18(0xc8)](Number),[_0x2e54c1,_0xd8467c]=currentSession[_0x567a18(0xd3)][_0x567a18(0x10b)](':')[_0x567a18(0xc8)](Number),_0x567243=_0x2e54c1*0x3c+_0xd8467c-(_0x14043d*0x3c+_0x203c1f),[_0x19c5b2,_0xd6060d]=_0x16eb5c[_0x567a18(0x10b)](':')[_0x567a18(0xc8)](Number),_0x4d29c4=_0x19c5b2*0x3c+_0xd6060d+_0x567243,_0x230ce6=Math['floor'](_0x4d29c4/0x3c),_0x2b7698=_0x4d29c4%0x3c,_0x3a0c7c=String(_0x230ce6)['padStart'](0x2,'0')+':'+String(_0x2b7698)[_0x567a18(0x9c)](0x2,'0'),_0x361b3d=sessions[_0x567a18(0x94)](_0x29ec0d=>_0x29ec0d['id']===_0x304eec);_0x361b3d!==-0x1&&(sessions[_0x361b3d][_0x567a18(0xaa)]=selectedRsDate,sessions[_0x361b3d][_0x567a18(0xb3)]=_0x16eb5c,sessions[_0x361b3d][_0x567a18(0xd3)]=_0x3a0c7c,reRenderBlocks());try{const _0x5a0f59=window['Telegram']?.[_0x567a18(0x15a)],_0x4106f0=await fetch(API_URL,{'method':_0x567a18(0xa4),'body':JSON[_0x567a18(0xc4)]({'action':_0x567a18(0x92),'init_data':_0x5a0f59?.[_0x567a18(0x13f)]||'','oldSessionId':_0x304eec,'oldDate':_0xbf417e,'newDate':selectedRsDate,'newTime':_0x16eb5c,'coachId':currentSession[_0x567a18(0xef)]})}),_0x4e4cb0=await _0x4106f0[_0x567a18(0x169)]();!_0x4e4cb0['ok']?(showToast(_0x567a18(0xdb)),DataManager[_0x567a18(0x11a)]()):(showToast(_0x567a18(0x137)),DataManager[_0x567a18(0xd9)]());}catch(_0x575248){showToast(_0x567a18(0x166));}}document[a3_0x408645(0xa5)]('DOMContentLoaded',init);