const a3_0x4118ce=a3_0x9335;(function(_0x3320df,_0x8d08a5){const _0x4e694d=a3_0x9335,_0x4dad49=_0x3320df();while(!![]){try{const _0x17cdfe=-parseInt(_0x4e694d(0x151))/0x1+parseInt(_0x4e694d(0x13c))/0x2*(-parseInt(_0x4e694d(0x171))/0x3)+-parseInt(_0x4e694d(0x165))/0x4*(-parseInt(_0x4e694d(0x125))/0x5)+parseInt(_0x4e694d(0x180))/0x6*(parseInt(_0x4e694d(0x183))/0x7)+parseInt(_0x4e694d(0x17a))/0x8*(-parseInt(_0x4e694d(0x106))/0x9)+-parseInt(_0x4e694d(0x128))/0xa+parseInt(_0x4e694d(0x185))/0xb;if(_0x17cdfe===_0x8d08a5)break;else _0x4dad49['push'](_0x4dad49['shift']());}catch(_0x7b4c25){_0x4dad49['push'](_0x4dad49['shift']());}}}(a3_0x36af,0xdceff));const APP_VERSION=a3_0x4118ce(0x16b),API_URL=a3_0x4118ce(0x1b5),GRID_H=0x3c,KEY_SESSIONS=a3_0x4118ce(0xfa),KEY_SETTINGS=a3_0x4118ce(0x173),KEY_CLIENTS=a3_0x4118ce(0xc9);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x4118ce(0x1ac),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x59b4d6=a3_0x4118ce,_0x4e05d9=(function(){let _0x330ce4=!![];return function(_0x5be7a4,_0x559aa5){const _0x2539ad=_0x330ce4?function(){const _0x32ffc8=a3_0x9335;if(_0x559aa5){const _0x5a3bdb=_0x559aa5[_0x32ffc8(0x11f)](_0x5be7a4,arguments);return _0x559aa5=null,_0x5a3bdb;}}:function(){};return _0x330ce4=![],_0x2539ad;};}()),_0x1e17a9=_0x4e05d9(this,function(){const _0x56d619=a3_0x9335;return _0x1e17a9[_0x56d619(0x164)]()[_0x56d619(0xf8)](_0x56d619(0x11b))['toString']()[_0x56d619(0x1bc)](_0x1e17a9)[_0x56d619(0xf8)]('(((.+)+)+)+$');});_0x1e17a9();try{const _0x2cd15a=window[_0x59b4d6(0x13b)]?.[_0x59b4d6(0xe9)];if(!_0x2cd15a)return;_0x2cd15a[_0x59b4d6(0x1b6)](),_0x2cd15a[_0x59b4d6(0x15f)]();try{_0x2cd15a[_0x59b4d6(0xf6)](_0x59b4d6(0x14c)),_0x2cd15a[_0x59b4d6(0x1a5)]&&_0x2cd15a[_0x59b4d6(0x1a5)](_0x59b4d6(0x14c));}catch(_0x1d67fb){console[_0x59b4d6(0xfe)](_0x59b4d6(0x154),_0x1d67fb);}try{_0x2cd15a['BackButton']&&(_0x2cd15a[_0x59b4d6(0xd8)][_0x59b4d6(0x137)](),_0x2cd15a['BackButton'][_0x59b4d6(0x19e)](),_0x2cd15a[_0x59b4d6(0xd8)][_0x59b4d6(0x1c2)](function(){const _0x12725c=_0x59b4d6;window[_0x12725c(0x15e)][_0x12725c(0xff)]=_0x12725c(0x124);}));}catch(_0x30576f){console[_0x59b4d6(0xfe)](_0x59b4d6(0x168),_0x30576f);}try{if(_0x2cd15a[_0x59b4d6(0xeb)])_0x2cd15a[_0x59b4d6(0xeb)]();}catch(_0x4e326e){}}catch(_0x171b43){console[_0x59b4d6(0x1a6)](_0x59b4d6(0x166),_0x171b43);}}());function isAdmin(){const _0x279e8=a3_0x4118ce;try{const _0x15b801=Number(window['Telegram']?.[_0x279e8(0xe9)]?.[_0x279e8(0x181)]?.['user']?.['id']);return _0x15b801===0xbaf7174;}catch(_0x123ef9){return![];}}const DataManager={'saveLocally'(){const _0x4f98fc=a3_0x4118ce;try{localStorage[_0x4f98fc(0x112)](KEY_SESSIONS,JSON[_0x4f98fc(0x107)](sessions)),localStorage[_0x4f98fc(0x112)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x4f98fc(0x112)](KEY_SETTINGS,JSON[_0x4f98fc(0x107)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x9df974){}},'loadLocal'(){const _0x453e69=a3_0x4118ce;try{const _0x222e75=localStorage[_0x453e69(0x19a)](KEY_SESSIONS);if(_0x222e75)sessions=JSON[_0x453e69(0x149)](_0x222e75);const _0x1a143d=localStorage[_0x453e69(0x19a)](KEY_CLIENTS);if(_0x1a143d)clients=JSON['parse'](_0x1a143d);const _0x3b216d=localStorage[_0x453e69(0x19a)](KEY_SETTINGS);if(_0x3b216d){const _0x2803bd=JSON[_0x453e69(0x149)](_0x3b216d);if(_0x2803bd['pattern'])availabilityPattern=_0x2803bd['pattern'];if(_0x2803bd[_0x453e69(0x145)])specialRanges=_0x2803bd[_0x453e69(0x145)];if(_0x2803bd[_0x453e69(0x130)])dateExceptions=_0x2803bd[_0x453e69(0x130)];}}catch(_0x55b7ac){}},async 'syncLoad'(){const _0x3a677f=a3_0x4118ce,_0x332b0b=new Date(),_0x3b4ad5=_0x332b0b[_0x3a677f(0x1a4)]()+'-'+String(_0x332b0b[_0x3a677f(0x135)]()+0x1)[_0x3a677f(0x191)](0x2,'0'),_0x40b764=new Date(_0x332b0b);_0x40b764['setMonth'](_0x332b0b[_0x3a677f(0x135)]()+0x1);const _0xfab384=_0x40b764[_0x3a677f(0x1a4)]()+'-'+String(_0x40b764[_0x3a677f(0x135)]()+0x1)[_0x3a677f(0x191)](0x2,'0'),_0x2da200=Date[_0x3a677f(0xe3)]();try{const _0x376939=window['Telegram']?.[_0x3a677f(0xe9)],_0x3fc927=_0x376939?.[_0x3a677f(0x119)]||'',[_0x1c9b28,_0x1a6892]=await Promise[_0x3a677f(0x12d)]([fetch(API_URL,{'method':_0x3a677f(0x188),'body':JSON[_0x3a677f(0x107)]({'action':'client_load','init_data':_0x3fc927,'month_str':_0x3b4ad5})})[_0x3a677f(0x10f)](_0x18b850=>_0x18b850[_0x3a677f(0x1af)]()),fetch(API_URL,{'method':_0x3a677f(0x188),'body':JSON[_0x3a677f(0x107)]({'action':_0x3a677f(0x102),'init_data':_0x3fc927,'month_str':_0xfab384})})[_0x3a677f(0x10f)](_0x4ae0d4=>_0x4ae0d4['json']())]);if(lastUserActionTime>_0x2da200){console[_0x3a677f(0xfe)](_0x3a677f(0x198));return;}if(_0x1c9b28['ok'])this[_0x3a677f(0x195)](_0x1c9b28[_0x3a677f(0x110)],_0x3b4ad5);if(_0x1a6892['ok'])this[_0x3a677f(0x195)](_0x1a6892[_0x3a677f(0x110)],_0xfab384);this[_0x3a677f(0x114)]();}catch(_0x5ec8fe){}},'applyData'(_0x1b3e5c,_0x454324){const _0x4d2c1d=a3_0x4118ce;if(!_0x1b3e5c)return;if(_0x1b3e5c[_0x4d2c1d(0x197)]){if(_0x1b3e5c['settings'][_0x4d2c1d(0xe1)])availabilityPattern=_0x1b3e5c[_0x4d2c1d(0x197)][_0x4d2c1d(0xe1)];if(_0x1b3e5c[_0x4d2c1d(0x197)][_0x4d2c1d(0x145)])specialRanges=_0x1b3e5c['settings'][_0x4d2c1d(0x145)];if(_0x1b3e5c[_0x4d2c1d(0x197)][_0x4d2c1d(0x130)])dateExceptions=_0x1b3e5c['settings']['exceptions'];}if(_0x1b3e5c[_0x4d2c1d(0x100)]&&Array[_0x4d2c1d(0x18c)](_0x1b3e5c[_0x4d2c1d(0x100)]))clients=_0x1b3e5c[_0x4d2c1d(0x100)];_0x1b3e5c[_0x4d2c1d(0x143)]&&(coachProfiles={...coachProfiles,..._0x1b3e5c[_0x4d2c1d(0x143)]}),_0x1b3e5c[_0x4d2c1d(0x199)]&&(sessions=sessions['filter'](_0x2ded4d=>!_0x2ded4d[_0x4d2c1d(0x115)]['startsWith'](_0x454324)),Object[_0x4d2c1d(0xf4)](_0x1b3e5c['calendar'])['forEach'](_0x55bccd=>{const _0x47bdc9=_0x4d2c1d,_0x5ac556=_0x1b3e5c['calendar'][_0x55bccd];_0x5ac556[_0x47bdc9(0x17d)](_0x559530=>{const _0x5b71af=_0x47bdc9;sessions['push']({'id':_0x559530['i'],'clientId':_0x559530['c'],'coachId':_0x559530[_0x5b71af(0xe7)],'dateStr':_0x454324+'-'+_0x55bccd[_0x5b71af(0x191)](0x2,'0'),'start':_0x559530['s'],'end':_0x559530['e'],'note':_0x559530['n']||'','status':_0x559530['st']||_0x5b71af(0x16e),'seriesId':_0x559530['sid']});});})),reRenderBlocks();}};function init(){const _0x2a9887=a3_0x4118ce;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x2a9887(0x12c)](_0x2a9887(0x146))['addEventListener'](_0x2a9887(0x167),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x2a9887(0x1c0)]();}function renderTimeColumn(){const _0x5ac349=a3_0x4118ce,_0x556bff=document[_0x5ac349(0x12c)](_0x5ac349(0x159)),_0x3bfb6b=document[_0x5ac349(0x12c)](_0x5ac349(0x1ad));_0x556bff[_0x5ac349(0x14e)]='',_0x556bff[_0x5ac349(0x153)](_0x3bfb6b);for(let _0x5253e7=0x0;_0x5253e7<0x18;_0x5253e7++){const _0x2f66d2=document[_0x5ac349(0x11e)](_0x5ac349(0xd7));_0x2f66d2[_0x5ac349(0xfc)]=_0x5ac349(0x13f);if(_0x5253e7>0x0)_0x2f66d2[_0x5ac349(0x14e)]=_0x5ac349(0xca)+String(_0x5253e7)[_0x5ac349(0x191)](0x2,'0')+_0x5ac349(0xd0);_0x556bff[_0x5ac349(0x153)](_0x2f66d2);}}function renderDayRange(_0x1d8500,_0x3844bd){const _0x3a2f51=a3_0x4118ce,_0x47e7e9=document[_0x3a2f51(0x12c)](_0x3a2f51(0xdb)),_0x5c0364=document[_0x3a2f51(0x12c)](_0x3a2f51(0xf5)),_0x2dacf1=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x226e7a=new Date();_0x226e7a[_0x3a2f51(0x158)](0x0,0x0,0x0,0x0);const _0x560bc4=getLocalDateStr(new Date());for(let _0x21a52a=_0x1d8500;_0x21a52a<=_0x3844bd;_0x21a52a++){const _0x274522=new Date(_0x226e7a);_0x274522[_0x3a2f51(0xcc)](_0x274522['getDate']()+_0x21a52a);const _0x9d4d30=getLocalDateStr(_0x274522);let _0x2022ec=_0x274522[_0x3a2f51(0x1a7)]()-0x1;if(_0x2022ec===-0x1)_0x2022ec=0x6;const _0x1e4b8a=_0x9d4d30===_0x560bc4,_0x4b573c=document[_0x3a2f51(0x11e)](_0x3a2f51(0xd7));_0x4b573c[_0x3a2f51(0xfc)]=_0x3a2f51(0x16f)+(_0x1e4b8a?_0x3a2f51(0x1b0):''),_0x4b573c[_0x3a2f51(0xe4)](_0x3a2f51(0x129),_0x9d4d30),_0x4b573c[_0x3a2f51(0x14e)]='<div\x20class=\x22dch-day\x22>'+_0x2dacf1[_0x2022ec]+_0x3a2f51(0x1a9)+_0x274522[_0x3a2f51(0x116)]()+_0x3a2f51(0x121),_0x47e7e9[_0x3a2f51(0x153)](_0x4b573c);const _0x5b6b45=document['createElement'](_0x3a2f51(0xd7));_0x5b6b45[_0x3a2f51(0xfc)]=_0x3a2f51(0xdc)+(_0x1e4b8a?'today':''),_0x5b6b45['setAttribute'](_0x3a2f51(0x129),_0x9d4d30),_0x5b6b45[_0x3a2f51(0xe4)]('data-day-idx',_0x2022ec),_0x5c0364[_0x3a2f51(0x153)](_0x5b6b45);}}function a3_0x9335(_0x164e37,_0x3dd44d){_0x164e37=_0x164e37-0xc9;const _0x4605cb=a3_0x36af();let _0x51f451=_0x4605cb[_0x164e37];return _0x51f451;}function reRenderBlocks(){const _0x58a85d=a3_0x4118ce;document[_0x58a85d(0x148)]('.day-column')['forEach'](_0x21167e=>{const _0x2cc698=_0x58a85d;_0x21167e['querySelectorAll'](_0x2cc698(0x1b9))[_0x2cc698(0x17d)](_0x1ca768=>_0x1ca768[_0x2cc698(0xf1)]());const _0x582ef7=_0x21167e[_0x2cc698(0x15c)](_0x2cc698(0x129)),_0x575e62=parseInt(_0x21167e[_0x2cc698(0x15c)](_0x2cc698(0xd5))),_0x5d99a4=Math[_0x2cc698(0x1b7)](_0x21167e[_0x2cc698(0xee)]);(availabilityPattern[_0x575e62]||[])[_0x2cc698(0x17d)](_0x1448e8=>{const _0x2446f5=_0x2cc698,_0x236a7d=document[_0x2446f5(0x11e)](_0x2446f5(0xd7));_0x236a7d[_0x2446f5(0xfc)]=_0x2446f5(0x1ab),_0x236a7d[_0x2446f5(0x126)][_0x2446f5(0x14b)]=_0x1448e8*GRID_H+'px',_0x236a7d[_0x2446f5(0x126)]['backgroundPosition']='-'+_0x5d99a4+_0x2446f5(0x13d)+_0x1448e8*GRID_H+'px',_0x21167e['appendChild'](_0x236a7d);});if(specialRanges[_0x2cc698(0x101)]>0x0){const _0x1f985b=new Date(_0x582ef7+_0x2cc698(0x14d))['getTime'](),_0x45fbe9=new Date(_0x582ef7+'T23:59:59')[_0x2cc698(0x187)]();specialRanges[_0x2cc698(0x17d)](_0x351edd=>{const _0x5dbd1a=_0x2cc698,_0x4a1ea6=new Date(_0x351edd[_0x5dbd1a(0x123)])[_0x5dbd1a(0x187)](),_0x3012b7=new Date(_0x351edd[_0x5dbd1a(0x19c)])[_0x5dbd1a(0x187)](),_0x4c40ee=Math[_0x5dbd1a(0x161)](_0x1f985b,_0x4a1ea6),_0x295418=Math[_0x5dbd1a(0x142)](_0x45fbe9,_0x3012b7);if(_0x4c40ee<_0x295418){const _0x20221f=(_0x4c40ee-_0x1f985b)/0x36ee80*GRID_H,_0x190f3f=(_0x295418-_0x4c40ee)/0x36ee80*GRID_H,_0xdcea0=document['createElement']('div');_0x190f3f>=23.5*GRID_H?(_0xdcea0[_0x5dbd1a(0xfc)]=_0x5dbd1a(0x194),_0xdcea0[_0x5dbd1a(0x126)][_0x5dbd1a(0xda)]='-'+_0x5d99a4+_0x5dbd1a(0x147)):(_0xdcea0['className']=_0x5dbd1a(0x113),_0xdcea0[_0x5dbd1a(0x126)][_0x5dbd1a(0x14b)]=_0x20221f+'px',_0xdcea0['style'][_0x5dbd1a(0x139)]=_0x190f3f+'px',_0xdcea0['style'][_0x5dbd1a(0xda)]='-'+_0x5d99a4+_0x5dbd1a(0x13d)+_0x20221f+'px'),_0x21167e['appendChild'](_0xdcea0);}});}renderEventsForColumn(_0x21167e,_0x582ef7);});}function renderEventsForColumn(_0x2cbb91,_0x5b62b2){const _0x13cbd8=a3_0x4118ce,_0x5e859d=sessions[_0x13cbd8(0x12a)](_0x1e5e35=>_0x1e5e35[_0x13cbd8(0x115)]===_0x5b62b2),_0x15dd31=_0x5e859d[_0x13cbd8(0x136)](_0x259134=>{const _0x2b445b=_0x13cbd8,[_0x4fe8fd,_0x5d7723]=_0x259134[_0x2b445b(0x123)][_0x2b445b(0x127)](':')[_0x2b445b(0x136)](Number),[_0x28497a,_0x4f8f4e]=_0x259134[_0x2b445b(0x19c)][_0x2b445b(0x127)](':')[_0x2b445b(0x136)](Number);return{'data':_0x259134,'start':_0x4fe8fd*0x3c+_0x5d7723,'end':_0x28497a*0x3c+_0x4f8f4e,'colIndex':0x0};});_0x15dd31[_0x13cbd8(0x15d)]((_0x59bb1a,_0x3954ec)=>_0x59bb1a[_0x13cbd8(0x123)]-_0x3954ec[_0x13cbd8(0x123)]||_0x3954ec[_0x13cbd8(0x19c)]-_0x3954ec[_0x13cbd8(0x123)]-(_0x59bb1a[_0x13cbd8(0x19c)]-_0x59bb1a[_0x13cbd8(0x123)]));const _0x33a017=[];_0x15dd31[_0x13cbd8(0x17d)](_0x407e4c=>{const _0x14fe8e=_0x13cbd8;let _0x534a0f=![];for(let _0x3893d2=0x0;_0x3893d2<_0x33a017['length'];_0x3893d2++){const _0x4c3d64=_0x33a017[_0x3893d2];if(_0x407e4c[_0x14fe8e(0x123)]>=_0x4c3d64[_0x4c3d64[_0x14fe8e(0x101)]-0x1]['end']){_0x4c3d64[_0x14fe8e(0x18f)](_0x407e4c),_0x407e4c['colIndex']=_0x3893d2,_0x534a0f=!![];break;}}!_0x534a0f&&(_0x33a017['push']([_0x407e4c]),_0x407e4c[_0x14fe8e(0xdf)]=_0x33a017[_0x14fe8e(0x101)]-0x1);}),_0x15dd31['forEach'](_0x308df9=>{const _0x5081bc=_0x13cbd8;let _0x7847c4=0x0;_0x15dd31[_0x5081bc(0x17d)](_0x5f0402=>{const _0x26189f=_0x5081bc;if(Math[_0x26189f(0x161)](_0x308df9[_0x26189f(0x123)],_0x5f0402[_0x26189f(0x123)])<Math[_0x26189f(0x142)](_0x308df9[_0x26189f(0x19c)],_0x5f0402['end'])&&_0x5f0402[_0x26189f(0xdf)]>_0x7847c4)_0x7847c4=_0x5f0402[_0x26189f(0xdf)];});const _0x48d6ae=_0x7847c4+0x1,_0x518a14=0x64/_0x48d6ae,_0x2648af=_0x308df9[_0x5081bc(0xdf)]*_0x518a14,_0xf18ade=document['createElement'](_0x5081bc(0xd7)),_0xad16bf=_0x308df9[_0x5081bc(0x110)];let _0x911ce=_0x5081bc(0xcb);if(clients&&clients[_0x5081bc(0x101)]>0x0){const _0x800d93=clients[_0x5081bc(0xf7)](_0x54976c=>String(_0x54976c['id'])===String(_0xad16bf[_0x5081bc(0x134)]));if(_0x800d93&&_0x800d93[_0x5081bc(0x160)])_0x911ce=_0x800d93[_0x5081bc(0x160)];}const _0x4c257b=_0xad16bf[_0x5081bc(0xd3)]===_0x5081bc(0x117),_0x7867ae=_0x4c257b?0x1:0.45;_0xf18ade['className']='event-card'+(_0x4c257b?'\x20status-completed':''),_0xf18ade[_0x5081bc(0x126)][_0x5081bc(0x19d)]=hexToRgba(_0x911ce,_0x7867ae),_0xf18ade[_0x5081bc(0x126)]['borderLeftColor']=_0x911ce;const _0x1654bd=_0x308df9[_0x5081bc(0x123)]/0x3c*GRID_H,_0x42e07e=(_0x308df9[_0x5081bc(0x19c)]-_0x308df9[_0x5081bc(0x123)])/0x3c*GRID_H;_0xf18ade[_0x5081bc(0x126)][_0x5081bc(0x14b)]=_0x1654bd+'px',_0xf18ade[_0x5081bc(0x126)][_0x5081bc(0x139)]=Math[_0x5081bc(0x161)](_0x42e07e,0x14)+'px',_0xf18ade[_0x5081bc(0x126)][_0x5081bc(0x186)]='calc('+_0x518a14+_0x5081bc(0x12e),_0xf18ade[_0x5081bc(0x126)]['left']=_0x5081bc(0xde)+_0x2648af+_0x5081bc(0x18e),_0xf18ade[_0x5081bc(0x126)][_0x5081bc(0xec)]=0xa+_0x308df9[_0x5081bc(0xdf)];if(_0x518a14<0x55)_0xf18ade[_0x5081bc(0x10b)][_0x5081bc(0x1bf)](_0x5081bc(0x141));let _0x4b679c='';if(_0xad16bf[_0x5081bc(0x104)])_0x4b679c+='<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>';if(_0x4c257b)_0x4b679c+=_0x5081bc(0x19b);_0xf18ade[_0x5081bc(0x14e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0xad16bf[_0x5081bc(0x123)]+_0x5081bc(0x184)+_0xad16bf[_0x5081bc(0x19c)]+_0x5081bc(0x120)+_0x4b679c+_0x5081bc(0xce),_0xf18ade[_0x5081bc(0x1a8)]=_0x4cce44=>{const _0x4f85dc=_0x5081bc;_0x4cce44[_0x4f85dc(0x1c1)](),openDetails(_0xad16bf);},_0x2cbb91[_0x5081bc(0x153)](_0xf18ade);});}function openAnalytics(){const _0x333180=a3_0x4118ce,_0x31b692=document[_0x333180(0x189)](_0x333180(0x178));setAnalyticsPeriod('week',_0x31b692),openSheet(_0x333180(0x10d));}function setAnalyticsPeriod(_0x17584a,_0x5543fd){const _0x216e9c=a3_0x4118ce;currentAnPeriod=_0x17584a,document[_0x216e9c(0x148)](_0x216e9c(0x178))[_0x216e9c(0x17d)](_0x1a0a50=>_0x1a0a50[_0x216e9c(0x10b)]['remove'](_0x216e9c(0x1c5)));if(_0x5543fd)_0x5543fd[_0x216e9c(0x10b)]['add'](_0x216e9c(0x1c5));const _0x318e5a=document[_0x216e9c(0x12c)]('anCustomDates');_0x318e5a['style'][_0x216e9c(0x12b)]=_0x17584a===_0x216e9c(0x103)?_0x216e9c(0x155):_0x216e9c(0x179);const _0x2eb4a6=new Date();let _0x598242=new Date(),_0x4453ed=new Date();if(_0x17584a===_0x216e9c(0x1ac))_0x598242=getStartOfWeek(_0x2eb4a6),_0x4453ed=new Date(_0x598242),_0x4453ed[_0x216e9c(0xcc)](_0x4453ed[_0x216e9c(0x116)]()+0x6);else{if(_0x17584a===_0x216e9c(0x1b2))_0x598242=new Date(_0x2eb4a6[_0x216e9c(0x1a4)](),_0x2eb4a6[_0x216e9c(0x135)](),0x1),_0x4453ed=new Date(_0x2eb4a6[_0x216e9c(0x1a4)](),_0x2eb4a6[_0x216e9c(0x135)]()+0x1,0x0);else{!document['getElementById'](_0x216e9c(0x122))[_0x216e9c(0x157)]&&(document['getElementById'](_0x216e9c(0x122))[_0x216e9c(0x157)]=getLocalDateStr(_0x2eb4a6),document['getElementById'](_0x216e9c(0x172))[_0x216e9c(0x157)]=getLocalDateStr(_0x2eb4a6));refreshAnalytics();return;}}document[_0x216e9c(0x12c)](_0x216e9c(0x122))[_0x216e9c(0x157)]=getLocalDateStr(_0x598242),document[_0x216e9c(0x12c)]('anEnd')['value']=getLocalDateStr(_0x4453ed),refreshAnalytics();}function refreshAnalytics(){const _0xea97c7=a3_0x4118ce,_0x1a8772=document[_0xea97c7(0x12c)](_0xea97c7(0x122))[_0xea97c7(0x157)],_0x28502f=document[_0xea97c7(0x12c)]('anEnd')['value'];if(!_0x1a8772||!_0x28502f)return;const _0x4e4801=sessions[_0xea97c7(0x12a)](_0xc59985=>_0xc59985[_0xea97c7(0x115)]>=_0x1a8772&&_0xc59985[_0xea97c7(0x115)]<=_0x28502f&&_0xc59985['status']!==_0xea97c7(0x11c)),_0x78d6eb=_0x4e4801[_0xea97c7(0x101)],_0x50fa59=_0x4e4801['filter'](_0x21a63b=>_0x21a63b[_0xea97c7(0xd3)]==='completed')[_0xea97c7(0x101)],_0x40d9a0=_0x78d6eb>0x0?Math[_0xea97c7(0x1b7)](_0x50fa59/_0x78d6eb*0x64):0x0;document[_0xea97c7(0x12c)]('anPercent')['textContent']=_0x40d9a0+'%',document[_0xea97c7(0x12c)](_0xea97c7(0x175))[_0xea97c7(0x1a2)]=_0x50fa59+'\x20–∏–∑\x20'+_0x78d6eb+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x47a15d=document[_0xea97c7(0x12c)]('anDonutCircle'),_0x192ff4=0x2*Math['PI']*0x23,_0x34220b=_0x192ff4-_0x40d9a0/0x64*_0x192ff4;_0x47a15d['style'][_0xea97c7(0xe5)]=_0x34220b;const _0x4c0df5={};_0x4e4801[_0xea97c7(0x17d)](_0x1ba89f=>{const _0x4ad4e2=_0xea97c7,_0x397395=_0x1ba89f[_0x4ad4e2(0x163)]||_0x4ad4e2(0x1b1);if(!_0x4c0df5[_0x397395]){const _0x332a90='#'+_0x397395[_0x4ad4e2(0x164)]()[_0x4ad4e2(0x1ae)](0x0,0x6);_0x4c0df5[_0x397395]={'total':0x0,'done':0x0,'color':_0x332a90};}_0x4c0df5[_0x397395][_0x4ad4e2(0x152)]++;if(_0x1ba89f['status']==='completed')_0x4c0df5[_0x397395][_0x4ad4e2(0x1be)]++;});const _0x5e457=document[_0xea97c7(0x12c)]('analyticsList');_0x5e457[_0xea97c7(0x14e)]='';const _0x43be1f=Object[_0xea97c7(0x18a)](_0x4c0df5)[_0xea97c7(0x15d)]((_0x112aa9,_0x1520cb)=>_0x1520cb[0x1]['total']-_0x112aa9[0x1][_0xea97c7(0x152)]);if(_0x43be1f['length']===0x0){_0x5e457[_0xea97c7(0x14e)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x43be1f['forEach'](([_0x38bb5b,_0x552490])=>{const _0x329d6f=_0xea97c7,_0x38e090=Math[_0x329d6f(0x1b7)](_0x552490[_0x329d6f(0x1be)]/_0x552490[_0x329d6f(0x152)]*0x64),_0x1f4f96=document[_0x329d6f(0x11e)](_0x329d6f(0xd7));_0x1f4f96[_0x329d6f(0xfc)]=_0x329d6f(0x1c4),_0x1f4f96['style'][_0x329d6f(0x18d)]=_0x552490[_0x329d6f(0x160)],_0x1f4f96[_0x329d6f(0x14e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x38bb5b[_0x329d6f(0x1ae)](0x0,0x5)+_0x329d6f(0xe8)+_0x552490['done']+_0x329d6f(0x118)+_0x552490[_0x329d6f(0x152)]+_0x329d6f(0xef)+_0x38e090+_0x329d6f(0x105),_0x5e457['appendChild'](_0x1f4f96);});}function openDetails(_0xdb267){const _0x4b3174=a3_0x4118ce;currentSession=_0xdb267;const _0x51d12c=new Date(_0xdb267['dateStr']),_0x2451eb=_0x51d12c[_0x4b3174(0x182)](_0x4b3174(0xcd),{'weekday':_0x4b3174(0x109),'day':_0x4b3174(0x169),'month':_0x4b3174(0x109)});document[_0x4b3174(0x12c)](_0x4b3174(0x16c))[_0x4b3174(0x1a2)]=_0x2451eb[_0x4b3174(0x132)](0x0)[_0x4b3174(0x162)]()+_0x2451eb[_0x4b3174(0xdd)](0x1),document[_0x4b3174(0x12c)](_0x4b3174(0x196))[_0x4b3174(0x1a2)]=_0xdb267[_0x4b3174(0x123)]+_0x4b3174(0x184)+_0xdb267[_0x4b3174(0x19c)],document[_0x4b3174(0x12c)](_0x4b3174(0xf2))[_0x4b3174(0x1a2)]=_0xdb267[_0x4b3174(0x1aa)]||_0x4b3174(0x108);const _0x5e6e29=document[_0x4b3174(0x12c)](_0x4b3174(0x156)),_0x3a469a=document[_0x4b3174(0x12c)]('cancelContainer'),_0x7707da=_0x3a469a['querySelector']('.btn-cancel'),_0x6c6d82=_0x3a469a[_0x4b3174(0x189)](_0x4b3174(0x174)),_0x230a13=document[_0x4b3174(0x12c)](_0x4b3174(0xed));if(_0xdb267[_0x4b3174(0xd3)]===_0x4b3174(0x117))_0x5e6e29[_0x4b3174(0x1a2)]=_0x4b3174(0xf3),_0x5e6e29['style']['color']=_0x4b3174(0x1b3),_0x3a469a['style'][_0x4b3174(0x12b)]=_0x4b3174(0x179);else{_0x5e6e29[_0x4b3174(0x1a2)]='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x5e6e29[_0x4b3174(0x126)][_0x4b3174(0x160)]=_0x4b3174(0x12f),_0x3a469a[_0x4b3174(0x126)][_0x4b3174(0x12b)]=_0x4b3174(0xd6);const _0x4bf03a=new Date(_0xdb267[_0x4b3174(0x115)]+'T'+_0xdb267['start']),_0x59228a=new Date(),_0x4090f3=(_0x4bf03a-_0x59228a)/(0x3e8*0x3c*0x3c),_0x5a01b0=coachProfiles[_0xdb267[_0x4b3174(0x163)]]&&coachProfiles[_0xdb267[_0x4b3174(0x163)]][_0x4b3174(0x170)]?parseInt(coachProfiles[_0xdb267[_0x4b3174(0x163)]][_0x4b3174(0x170)]):0x18;if(_0x5a01b0===0x0||_0x4090f3>=_0x5a01b0)_0x7707da[_0x4b3174(0x126)][_0x4b3174(0x12b)]=_0x4b3174(0xd6),_0x6c6d82[_0x4b3174(0x126)][_0x4b3174(0x12b)]=_0x4b3174(0xd6),_0x230a13['style'][_0x4b3174(0x12b)]=_0x4b3174(0x179);else{_0x7707da[_0x4b3174(0x126)][_0x4b3174(0x12b)]=_0x4b3174(0x179),_0x6c6d82[_0x4b3174(0x126)][_0x4b3174(0x12b)]=_0x4b3174(0x179),_0x230a13[_0x4b3174(0x126)]['display']=_0x4b3174(0xd6);let _0x3f49c1=_0x5a01b0===0x0?_0x4b3174(0x16d):'–∑–∞\x20'+_0x5a01b0+_0x4b3174(0xe2);_0x230a13[_0x4b3174(0x1a2)]=_0x4b3174(0x1ba)+_0x3f49c1+_0x4b3174(0x1b4);}}document[_0x4b3174(0x12c)](_0x4b3174(0x17e))[_0x4b3174(0x10b)]['add']('active'),document['getElementById']('detailsSheet')[_0x4b3174(0x10b)][_0x4b3174(0x1bf)]('open');}function closeAllSheets(){const _0x3d351b=a3_0x4118ce;document[_0x3d351b(0x12c)]('overlay')['classList'][_0x3d351b(0xf1)](_0x3d351b(0x1c5)),document[_0x3d351b(0x148)]('.sheet')['forEach'](_0x27df19=>_0x27df19['classList'][_0x3d351b(0xf1)](_0x3d351b(0x1bd)));}function a3_0x36af(){const _0x41ef34=['getElementById','all','%\x20-\x204px)','var(--acc-blue)','exceptions','visible','charAt','headerMonth','clientId','getMonth','map','show','clientWidth','height','insertBefore','Telegram','3372dglSHm','px\x20-','button','time-label','DOMContentLoaded','mini','min','coach_profiles','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','ranges','matrixViewport','px\x200px','querySelectorAll','parse','rsDatesTrack','top','#050505','T00:00:00','innerHTML','customConfirm','rescheduleSheet','1436627lKAHhl','total','appendChild','Error\x20setting\x20color:','flex','detStatus','value','setHours','timeColumn','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','join','getAttribute','sort','location','expand','color','max','toUpperCase','coachId','toString','8cXMpvt','Critical\x20TMA\x20Error:','scroll','Error\x20setting\x20back\x20button:','numeric','rsSlotsGrid','v9.5-CLIENT-ANALYTICS','detDate','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','planned','day-col-header\x20','cancel_window','1359ctAleT','anEnd','uc_client_settings','.btn-reschedule','anTotalStats','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','.period-switch\x20.p-btn','none','391520BLbRNs','scrollTo','addEventListener','forEach','overlay','toast','17724DMBFUe','initDataUnsafe','toLocaleDateString','49icCkSJ','\x20-\x20','32937168KJEulI','width','getTime','POST','querySelector','entries','getMinutes','isArray','borderLeftColor','%\x20+\x202px)','push','<div\x20class=\x22dch-day\x22>','padStart','get_slots','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','day-off-overlay\x20stripe-bg','applyData','detTime','settings','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','calendar','getItem','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','end','backgroundColor','offClick','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','.rs-date-chip','textContent','test','getFullYear','setBackgroundColor','error','getDay','onclick','</div><div\x20class=\x22dch-num\x22>','note','blocked-slot\x20stripe-bg','week','timeLineBadge','substr','json','today','Unknown','month','var(--acc-green)','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','ready','round','.day-col-header','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','firstChild','constructor','open','done','add','syncLoad','stopPropagation','onClick','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','client-stat-card','active','uc_client_list','<span>','#0a84ff','setDate','ru-RU','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</div><div\x20class=\x22rs-day-num\x22>',':00</span>','fontWeight','.day-col-header[data-date=\x22','status','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','data-day-idx','block','div','BackButton','createDocumentFragment','backgroundPosition','daysHeaderTrack','day-column\x20','slice','calc(','colIndex','scrollLeft','pattern','\x20—á.','now','setAttribute','strokeDashoffset','\x20–≤\x20','cid','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','WebApp','<div\x20class=\x22rs-day-name\x22>','disableVerticalSwipes','zIndex','cancelHint','offsetLeft','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','offsetWidth','remove','detNote','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','keys','gridColumns','setHeaderColor','find','search','rs-date-chip','uc_client_sessions','#ff453a','className','reschedule','log','href','clients','length','client_load','custom','seriesId','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','144bEfjfu','stringify','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','long','rgba(10,\x20132,\x20255,\x20','classList','ccYesBtn','analyticsSheet','substring','then','data','getHours','setItem','blocked-range-part\x20stripe-bg','saveLocally','dateStr','getDate','completed','</span>\x20/\x20','initData','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','(((.+)+)+)+$','cancelled','globalTimeLine','createElement','apply','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</div>','anStart','start','router.html','3298705eIEXip','style','split','4460640arZspi','data-date','filter','display'];a3_0x36af=function(){return _0x41ef34;};return a3_0x36af();}function openSheet(_0x5ea56e){const _0x16ce53=a3_0x4118ce;document[_0x16ce53(0x12c)](_0x16ce53(0x17e))['classList'][_0x16ce53(0x1bf)](_0x16ce53(0x1c5)),document['getElementById'](_0x5ea56e)['classList'][_0x16ce53(0x1bf)](_0x16ce53(0x1bd));}function getLocalDateStr(_0xd84162){const _0x5e7474=a3_0x4118ce,_0x237230=_0xd84162['getFullYear'](),_0xd7e525=String(_0xd84162['getMonth']()+0x1)[_0x5e7474(0x191)](0x2,'0'),_0x1fde96=String(_0xd84162['getDate']())[_0x5e7474(0x191)](0x2,'0');return _0x237230+'-'+_0xd7e525+'-'+_0x1fde96;}function getStartOfWeek(_0x58fd27){const _0x3f5682=a3_0x4118ce,_0x1c1e30=new Date(_0x58fd27),_0x57299f=_0x1c1e30['getDay'](),_0xec52b2=_0x1c1e30[_0x3f5682(0x116)]()-_0x57299f+(_0x57299f===0x0?-0x6:0x1);return _0x1c1e30['setDate'](_0xec52b2),_0x1c1e30[_0x3f5682(0x158)](0x0,0x0,0x0,0x0),_0x1c1e30;}function scrollToToday(){const _0x1cfbf5=getLocalDateStr(new Date());setTimeout(()=>{const _0x16ea27=a3_0x9335,_0x569f06=document[_0x16ea27(0x189)](_0x16ea27(0xd2)+_0x1cfbf5+'\x22]');if(_0x569f06){const _0x1c82ce=document[_0x16ea27(0x12c)](_0x16ea27(0x146)),_0x59c3b2=_0x569f06[_0x16ea27(0xee)]-_0x1c82ce[_0x16ea27(0x138)]/0x2+_0x569f06[_0x16ea27(0xf0)]/0x2;_0x1c82ce[_0x16ea27(0x17b)]({'left':_0x59c3b2,'behavior':'auto'}),_0x1c82ce['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x24a897=a3_0x4118ce,_0xd6d6a2=new Date(),_0x47e8f5=document[_0x24a897(0x12c)](_0x24a897(0x11d)),_0x5300bb=document['getElementById']('timeLineBadge'),_0x45423b=(_0xd6d6a2[_0x24a897(0x111)]()*0x3c+_0xd6d6a2['getMinutes']())/0x3c*GRID_H;_0x47e8f5['style'][_0x24a897(0x14b)]=_0x45423b+'px',_0x47e8f5['style'][_0x24a897(0x12b)]=_0x24a897(0xd6),_0x5300bb[_0x24a897(0x126)][_0x24a897(0x14b)]=_0x45423b+'px',_0x5300bb['style']['display']=_0x24a897(0xd6),_0x5300bb['textContent']=String(_0xd6d6a2[_0x24a897(0x111)]())[_0x24a897(0x191)](0x2,'0')+':'+String(_0xd6d6a2[_0x24a897(0x18b)]())['padStart'](0x2,'0');}function onScroll(){const _0x164fde=a3_0x4118ce,_0x2fcf97=document['getElementById'](_0x164fde(0x146)),_0x17f8b4=document[_0x164fde(0x148)](_0x164fde(0x1b8));for(let _0x259fc8 of _0x17f8b4)if(_0x259fc8[_0x164fde(0xee)]>=_0x2fcf97[_0x164fde(0xe0)]){const _0x42fd92=new Date(_0x259fc8[_0x164fde(0x15c)](_0x164fde(0x129)));document[_0x164fde(0x12c)](_0x164fde(0x133))[_0x164fde(0x1a2)]=_0x42fd92['toLocaleString']('ru',{'month':_0x164fde(0x109)})[_0x164fde(0x162)]()+'\x20'+_0x42fd92[_0x164fde(0x1a4)]();break;}}function showToast(_0x300462){const _0x5cfa8c=a3_0x4118ce,_0x226bae=document[_0x5cfa8c(0x12c)](_0x5cfa8c(0x17f));_0x226bae['textContent']=_0x300462,_0x226bae[_0x5cfa8c(0x10b)]['add']('show'),setTimeout(()=>_0x226bae[_0x5cfa8c(0x10b)][_0x5cfa8c(0xf1)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x3ffda5=a3_0x4118ce,_0x1febdf=document[_0x3ffda5(0x12c)](_0x3ffda5(0x146)),_0x2cac27=_0x1febdf['scrollLeft'],_0x241685=_0x1febdf['scrollWidth'],_0x1aedea=_0x1febdf[_0x3ffda5(0x138)];if(_0x241685-(_0x2cac27+_0x1aedea)<0x12c){const _0x463056=endOffset;endOffset+=0xe,renderDayRange(_0x463056+0x1,endOffset),reRenderBlocks();}if(_0x2cac27<0x12c){const _0x5d34e0=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5d34e0-0x1),_0x1febdf[_0x3ffda5(0xe0)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x4b11b6,_0x49744f){const _0x114bb8=a3_0x4118ce,_0x5ef790=document[_0x114bb8(0x12c)](_0x114bb8(0xdb)),_0x10bea9=document[_0x114bb8(0x12c)](_0x114bb8(0xf5)),_0x2f1131=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2e88e5=new Date();_0x2e88e5[_0x114bb8(0x158)](0x0,0x0,0x0,0x0);const _0x16a753=getLocalDateStr(new Date()),_0x5c7dd5=document[_0x114bb8(0xd9)](),_0xe8895=document['createDocumentFragment']();for(let _0xdc8690=_0x4b11b6;_0xdc8690<=_0x49744f;_0xdc8690++){const _0x5e4dae=new Date(_0x2e88e5);_0x5e4dae[_0x114bb8(0xcc)](_0x5e4dae[_0x114bb8(0x116)]()+_0xdc8690);const _0x218a81=getLocalDateStr(_0x5e4dae);let _0x4e22e3=_0x5e4dae[_0x114bb8(0x1a7)]()-0x1;if(_0x4e22e3===-0x1)_0x4e22e3=0x6;const _0x51f905=_0x218a81===_0x16a753,_0x17aedb=document[_0x114bb8(0x11e)]('div');_0x17aedb[_0x114bb8(0xfc)]=_0x114bb8(0x16f)+(_0x51f905?_0x114bb8(0x1b0):''),_0x17aedb[_0x114bb8(0xe4)]('data-date',_0x218a81),_0x17aedb[_0x114bb8(0x14e)]=_0x114bb8(0x190)+_0x2f1131[_0x4e22e3]+_0x114bb8(0x1a9)+_0x5e4dae['getDate']()+_0x114bb8(0x121),_0x5c7dd5[_0x114bb8(0x153)](_0x17aedb);const _0x180eca=document[_0x114bb8(0x11e)](_0x114bb8(0xd7));_0x180eca[_0x114bb8(0xfc)]='day-column\x20'+(_0x51f905?_0x114bb8(0x1b0):''),_0x180eca['setAttribute'](_0x114bb8(0x129),_0x218a81),_0x180eca[_0x114bb8(0xe4)]('data-day-idx',_0x4e22e3),_0xe8895[_0x114bb8(0x153)](_0x180eca);}_0x5ef790[_0x114bb8(0x13a)](_0x5c7dd5,_0x5ef790[_0x114bb8(0x1bb)]),_0x10bea9[_0x114bb8(0x13a)](_0xe8895,_0x10bea9[_0x114bb8(0x189)]('.day-column'));}function hexToRgba(_0x15b705,_0x344832){const _0x3a6c60=a3_0x4118ce;let _0x2d99a7;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x3a6c60(0x1a3)](_0x15b705))return _0x2d99a7=_0x15b705[_0x3a6c60(0x10e)](0x1)[_0x3a6c60(0x127)](''),_0x2d99a7[_0x3a6c60(0x101)]==0x3&&(_0x2d99a7=[_0x2d99a7[0x0],_0x2d99a7[0x0],_0x2d99a7[0x1],_0x2d99a7[0x1],_0x2d99a7[0x2],_0x2d99a7[0x2]]),_0x2d99a7='0x'+_0x2d99a7[_0x3a6c60(0x15b)](''),'rgba('+[_0x2d99a7>>0x10&0xff,_0x2d99a7>>0x8&0xff,_0x2d99a7&0xff][_0x3a6c60(0x15b)](',')+','+_0x344832+')';return _0x3a6c60(0x10a)+_0x344832+')';}let confirmResolver=null;function showCustomConfirm(_0x105e75,_0x3d15bf,_0x4c67fb=!![]){const _0x5d0655=a3_0x4118ce;document[_0x5d0655(0x12c)]('ccTitle')['textContent']=_0x105e75,document[_0x5d0655(0x12c)]('ccText')[_0x5d0655(0x1a2)]=_0x3d15bf;const _0x55b8fd=document['getElementById'](_0x5d0655(0x10c));return _0x4c67fb?(_0x55b8fd[_0x5d0655(0x126)][_0x5d0655(0x160)]=_0x5d0655(0xfb),_0x55b8fd[_0x5d0655(0x126)][_0x5d0655(0xd1)]='600'):(_0x55b8fd[_0x5d0655(0x126)][_0x5d0655(0x160)]='#0a84ff',_0x55b8fd[_0x5d0655(0x126)][_0x5d0655(0xd1)]='600'),new Promise(_0x5f2f1b=>{const _0x43bc2c=_0x5d0655;confirmResolver=_0x5f2f1b,document['getElementById']('customConfirm')[_0x43bc2c(0x10b)][_0x43bc2c(0x1bf)](_0x43bc2c(0x131));});}function resolveCustomConfirm(_0x33ea93){const _0x47d74f=a3_0x4118ce;document[_0x47d74f(0x12c)](_0x47d74f(0x14f))[_0x47d74f(0x10b)][_0x47d74f(0xf1)](_0x47d74f(0x131));if(confirmResolver)confirmResolver(_0x33ea93);}async function tryCancelCurrentSession(){const _0x11164d=a3_0x4118ce;if(!currentSession)return;const _0x4cc718=await showCustomConfirm(_0x11164d(0x144),_0x11164d(0x1a0),!![]);if(!_0x4cc718)return;const _0x10fef8=currentSession;closeAllSheets(),sessions=sessions[_0x11164d(0x12a)](_0x350b2c=>_0x350b2c['id']!==_0x10fef8['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x11164d(0xe3)]();try{const _0x5a76f2=window[_0x11164d(0x13b)]?.['WebApp'],_0x3205a2=await fetch(API_URL,{'method':'POST','body':JSON[_0x11164d(0x107)]({'action':'client_cancel','init_data':_0x5a76f2?.[_0x11164d(0x119)]||'','coachId':_0x10fef8['coachId'],'dateStr':_0x10fef8[_0x11164d(0x115)],'sessionId':_0x10fef8['id']})});if(_0x3205a2['ok'])DataManager['saveLocally']();}catch(_0x40092d){showToast(_0x11164d(0xd4));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x483fbc=a3_0x4118ce;if(!currentSession)return;document[_0x483fbc(0x12c)]('detailsSheet')[_0x483fbc(0x10b)][_0x483fbc(0xf1)]('open'),document[_0x483fbc(0x12c)](_0x483fbc(0x150))[_0x483fbc(0x10b)][_0x483fbc(0x1bf)]('open');const _0x30b7b7=document[_0x483fbc(0x12c)](_0x483fbc(0x14a)),_0x75d0d8=document[_0x483fbc(0x12c)]('rsSlotsGrid');_0x30b7b7[_0x483fbc(0x14e)]='',_0x75d0d8[_0x483fbc(0x14e)]=_0x483fbc(0x1c3);const [_0x3051c1,_0x33e688]=currentSession[_0x483fbc(0x123)][_0x483fbc(0x127)](':')[_0x483fbc(0x136)](Number),[_0x1e4d42,_0x59c6ff]=currentSession['end'][_0x483fbc(0x127)](':')['map'](Number),_0x29aa61=_0x1e4d42*0x3c+_0x59c6ff-(_0x3051c1*0x3c+_0x33e688);try{const _0x2d49ef=window['Telegram']?.['WebApp'],_0x43c5b9=await fetch(API_URL,{'method':_0x483fbc(0x188),'body':JSON[_0x483fbc(0x107)]({'action':_0x483fbc(0x192),'coachId':currentSession[_0x483fbc(0x163)],'duration':_0x29aa61,'init_data':_0x2d49ef?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x13fd27=await _0x43c5b9[_0x483fbc(0x1af)]();_0x13fd27['ok']&&_0x13fd27[_0x483fbc(0x110)]?(availableSlotsCache=_0x13fd27[_0x483fbc(0x110)],renderRescheduleDates()):_0x75d0d8[_0x483fbc(0x14e)]=_0x483fbc(0x176);}catch(_0xc492de){_0x75d0d8[_0x483fbc(0x14e)]=_0x483fbc(0x193);}}function renderRescheduleDates(){const _0xc98ebc=a3_0x4118ce,_0x1d80c2=document['getElementById'](_0xc98ebc(0x14a));_0x1d80c2[_0xc98ebc(0x14e)]='';const _0x4563d2=Object[_0xc98ebc(0xf4)](availableSlotsCache)[_0xc98ebc(0x15d)](),_0x5a583f=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x4563d2[_0xc98ebc(0x101)]===0x0){document[_0xc98ebc(0x12c)](_0xc98ebc(0x16a))[_0xc98ebc(0x14e)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x4563d2[_0xc98ebc(0x17d)]((_0x4ffc2c,_0x181b6c)=>{const _0x68a6cd=_0xc98ebc,_0x2f699d=new Date(_0x4ffc2c),_0x39da6e=_0x5a583f[_0x2f699d[_0x68a6cd(0x1a7)]()],_0xd97b78=_0x2f699d['getDate'](),_0x1d6132=document[_0x68a6cd(0x11e)](_0x68a6cd(0xd7));_0x1d6132['className']=_0x68a6cd(0xf9);if(_0x181b6c===0x0)_0x1d6132[_0x68a6cd(0x10b)][_0x68a6cd(0x1bf)](_0x68a6cd(0x1c5));_0x1d6132[_0x68a6cd(0x14e)]=_0x68a6cd(0xea)+_0x39da6e+_0x68a6cd(0xcf)+_0xd97b78+'</div>',_0x1d6132[_0x68a6cd(0x1a8)]=()=>selectRsDate(_0x4ffc2c,_0x1d6132),_0x1d80c2[_0x68a6cd(0x153)](_0x1d6132);}),selectRsDate(_0x4563d2[0x0],_0x1d80c2['firstChild']);}function selectRsDate(_0x3e0292,_0x390f91){const _0x412a5a=a3_0x4118ce;selectedRsDate=_0x3e0292,document['querySelectorAll'](_0x412a5a(0x1a1))[_0x412a5a(0x17d)](_0x15c60f=>_0x15c60f['classList'][_0x412a5a(0xf1)](_0x412a5a(0x1c5)));if(_0x390f91)_0x390f91[_0x412a5a(0x10b)][_0x412a5a(0x1bf)]('active');const _0x505d93=document[_0x412a5a(0x12c)](_0x412a5a(0x16a));_0x505d93[_0x412a5a(0x14e)]='';const _0x23d5ad=availableSlotsCache[_0x3e0292]||[];if(_0x23d5ad[_0x412a5a(0x101)]===0x0){_0x505d93[_0x412a5a(0x14e)]=_0x412a5a(0x176);return;}_0x23d5ad[_0x412a5a(0x17d)](_0x5d987a=>{const _0x2dfca6=_0x412a5a,_0x155225=document['createElement'](_0x2dfca6(0x13e));_0x155225['className']='rs-time-btn',_0x155225[_0x2dfca6(0x1a2)]=_0x5d987a,_0x155225[_0x2dfca6(0x1a8)]=()=>confirmReschedule(_0x5d987a),_0x505d93[_0x2dfca6(0x153)](_0x155225);});}async function confirmReschedule(_0x4e6678){const _0x49856c=a3_0x4118ce,_0x7363a4=new Date(selectedRsDate),_0x47504a=_0x7363a4['toLocaleDateString'](_0x49856c(0xcd),{'day':'numeric','month':_0x49856c(0x109)}),_0x494846=await showCustomConfirm(_0x49856c(0x11a),_0x49856c(0x177)+_0x47504a+_0x49856c(0xe6)+_0x4e6678+'?',![]);if(!_0x494846)return;closeAllSheets(),showToast(_0x49856c(0x15a)),lastUserActionTime=Date[_0x49856c(0xe3)]();const _0x4db988=currentSession[_0x49856c(0x115)],_0xb329=currentSession['id'],[_0x2dcc10,_0x4cf26c]=currentSession[_0x49856c(0x123)][_0x49856c(0x127)](':')[_0x49856c(0x136)](Number),[_0x476ca1,_0x3d73f3]=currentSession[_0x49856c(0x19c)]['split'](':')['map'](Number),_0x19ace0=_0x476ca1*0x3c+_0x3d73f3-(_0x2dcc10*0x3c+_0x4cf26c),[_0x1b47ce,_0x59ba20]=_0x4e6678[_0x49856c(0x127)](':')[_0x49856c(0x136)](Number),_0x45b611=_0x1b47ce*0x3c+_0x59ba20+_0x19ace0,_0x3ce2f7=Math['floor'](_0x45b611/0x3c),_0x781003=_0x45b611%0x3c,_0x24fb4d=String(_0x3ce2f7)[_0x49856c(0x191)](0x2,'0')+':'+String(_0x781003)[_0x49856c(0x191)](0x2,'0'),_0xce097f=sessions['findIndex'](_0x59248f=>_0x59248f['id']===_0xb329);_0xce097f!==-0x1&&(sessions[_0xce097f][_0x49856c(0x115)]=selectedRsDate,sessions[_0xce097f][_0x49856c(0x123)]=_0x4e6678,sessions[_0xce097f][_0x49856c(0x19c)]=_0x24fb4d,reRenderBlocks());try{const _0x1d6fc6=window[_0x49856c(0x13b)]?.['WebApp'],_0x3020a6=await fetch(API_URL,{'method':_0x49856c(0x188),'body':JSON[_0x49856c(0x107)]({'action':_0x49856c(0xfd),'init_data':_0x1d6fc6?.[_0x49856c(0x119)]||'','oldSessionId':_0xb329,'oldDate':_0x4db988,'newDate':selectedRsDate,'newTime':_0x4e6678,'coachId':currentSession[_0x49856c(0x163)]})}),_0x6cddf1=await _0x3020a6['json']();!_0x6cddf1['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x49856c(0x1c0)]()):(showToast(_0x49856c(0x19f)),DataManager[_0x49856c(0x114)]());}catch(_0x451e4b){showToast(_0x49856c(0xd4));}}document[a3_0x4118ce(0x17c)](a3_0x4118ce(0x140),init);