const a3_0x5278ca=a3_0x5ca6;(function(_0x42200a,_0x5ce75d){const _0x476df4=a3_0x5ca6,_0x1b167f=_0x42200a();while(!![]){try{const _0x5bf5f6=-parseInt(_0x476df4(0x129))/0x1+parseInt(_0x476df4(0x1c3))/0x2+-parseInt(_0x476df4(0x13d))/0x3+-parseInt(_0x476df4(0x10c))/0x4+-parseInt(_0x476df4(0x186))/0x5+-parseInt(_0x476df4(0x1c2))/0x6+parseInt(_0x476df4(0x180))/0x7*(parseInt(_0x476df4(0x1e2))/0x8);if(_0x5bf5f6===_0x5ce75d)break;else _0x1b167f['push'](_0x1b167f['shift']());}catch(_0x4999e3){_0x1b167f['push'](_0x1b167f['shift']());}}}(a3_0x145e,0xc7c79));const APP_VERSION=a3_0x5278ca(0x1b1),API_URL=a3_0x5278ca(0x1c6),GRID_H=0x3c,KEY_SESSIONS=a3_0x5278ca(0x18d),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x5278ca(0x10d);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;function a3_0x145e(){const _0x554b2d=['daysHeaderTrack','div','day-col-header\x20','\x20—á.','initDataUnsafe','insertBefore','forEach','\x20–≤\x20','min','scrollLeft','none','.btn-cancel','toUpperCase','timeColumn','querySelectorAll','offClick','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','WebApp','querySelector','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','calendar','cid','isArray','globalTimeLine','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','json','<span>','5299HivvbW','numeric','scrollTop','map','client-stat-card','cancelHint','684530YAgaQW','sort','\x20-\x20','substr','toString','search','toLocaleString','uc_client_sessions','cancel_window','open','href','end','clients','getTime','BackButton','block','onclick','%\x20+\x202px)','anStart','router.html','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','Error\x20setting\x20color:','calc(','test','addEventListener','%\x20-\x204px)','.period-switch\x20.p-btn','exceptions','getMonth','.day-col-header[data-date=\x22','style','getElementById','getMinutes','completed','done','initData','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','padStart','#ff453a','color','substring','constructor','left','v9.5-CLIENT-ANALYTICS','day-column\x20','backgroundPosition','parse','stringify','join','rgba(','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','offsetLeft','split','Unknown','.rs-date-chip','filter','POST','disableVerticalSwipes','blocked-slot\x20stripe-bg','strokeDashoffset','3447648OSQGiK','1866574vkDGvK','charAt','startsWith','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','getDate','getItem','ru-RU','T23:59:59','anCustomDates','<div\x20class=\x22dch-day\x22>','start','Error\x20setting\x20back\x20button:','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','var(--acc-blue)','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','.sheet','clientId','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','round','textContent','getFullYear','#050505','getHours','600','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Critical\x20TMA\x20Error:','scroll','sid','value','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','remove','43944bFPGno','syncLoad','dateStr','colIndex','setBackgroundColor','coach_profiles','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','status','client_load','max','week','length','data-day-idx','total','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','(((.+)+)+)+$','createElement','scrollWidth','overlay','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','active','settings','log','reschedule','seriesId','data','coachId','height','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','timeLineBadge','</div>','T00:00:00','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','px\x20-','ccText','backgroundColor','flex','location','\x20–∏–∑\x20','stopPropagation','matrixViewport','zIndex','4251628Vjmlkr','uc_client_list','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','detStatus','data-date','customConfirm','DOMContentLoaded','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','#0a84ff','auto','<div\x20class=\x22rs-day-name\x22>','time-label','apply','mini','today','width','classList','pattern','rsDatesTrack','get_slots','saveLocally','applyData','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','rsSlotsGrid','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','visible','setAttribute','top','anDonutCircle','961232MjByuT','Telegram','loadLocal','toLocaleDateString','firstChild','slice','rs-date-chip','ccYesBtn',':00</span>','setItem','borderLeftColor','</div><div\x20class=\x22rs-day-num\x22>','now','setHours','appendChild','scrollTo','clientWidth','setDate','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','4612614pSinfQ','anEnd','className','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','detNote','long','createDocumentFragment','rs-time-btn','–û—Ç–º–µ–Ω–µ–Ω–æ','then','–∑–∞\x20','client_cancel','getDay','analyticsSheet','</div><div\x20class=\x22dch-num\x22>','.day-column','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','all','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','planned','fontWeight','error','display','detailsSheet','innerHTML','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','detTime','getAttribute','offsetWidth','px\x200px','show','\x20status-completed','.btn-reschedule','ranges','ready','add','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','push','event-card'];a3_0x145e=function(){return _0x554b2d;};return a3_0x145e();}(function initTMA(){const _0x4fa6db=a3_0x5278ca,_0x25ed5e=(function(){let _0x46c32f=!![];return function(_0x7b7a13,_0x53a21e){const _0x61666b=_0x46c32f?function(){const _0x15b7fa=a3_0x5ca6;if(_0x53a21e){const _0x13f182=_0x53a21e[_0x15b7fa(0x118)](_0x7b7a13,arguments);return _0x53a21e=null,_0x13f182;}}:function(){};return _0x46c32f=![],_0x61666b;};}()),_0x14762f=_0x25ed5e(this,function(){const _0x415f90=a3_0x5ca6;return _0x14762f['toString']()[_0x415f90(0x18b)](_0x415f90(0x1f1))[_0x415f90(0x18a)]()[_0x415f90(0x1af)](_0x14762f)['search'](_0x415f90(0x1f1));});_0x14762f();try{const _0x13b1bf=window['Telegram']?.[_0x4fa6db(0x175)];if(!_0x13b1bf)return;_0x13b1bf[_0x4fa6db(0x15f)](),_0x13b1bf['expand']();try{_0x13b1bf['setHeaderColor'](_0x4fa6db(0x1d8)),_0x13b1bf['setBackgroundColor']&&_0x13b1bf[_0x4fa6db(0x1e6)](_0x4fa6db(0x1d8));}catch(_0x300bb9){console['log'](_0x4fa6db(0x19b),_0x300bb9);}try{_0x13b1bf[_0x4fa6db(0x194)]&&(_0x13b1bf[_0x4fa6db(0x194)]['show'](),_0x13b1bf[_0x4fa6db(0x194)][_0x4fa6db(0x173)](),_0x13b1bf[_0x4fa6db(0x194)]['onClick'](function(){const _0x32443b=_0x4fa6db;window[_0x32443b(0x107)][_0x32443b(0x190)]=_0x32443b(0x199);}));}catch(_0x36f8a6){console[_0x4fa6db(0x1f8)](_0x4fa6db(0x1ce),_0x36f8a6);}try{if(_0x13b1bf[_0x4fa6db(0x1bf)])_0x13b1bf[_0x4fa6db(0x1bf)]();}catch(_0x4f8758){}}catch(_0x27ea5e){console[_0x4fa6db(0x152)](_0x4fa6db(0x1dc),_0x27ea5e);}}());function isAdmin(){const _0x5bfe08=a3_0x5278ca;try{const _0x36e519=Number(window[_0x5bfe08(0x12a)]?.['WebApp']?.[_0x5bfe08(0x168)]?.['user']?.['id']);return _0x36e519===0xbaf7174;}catch(_0x3afc47){return![];}}const DataManager={'saveLocally'(){const _0x25b1d1=a3_0x5278ca;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x25b1d1(0x1b5)](sessions)),localStorage[_0x25b1d1(0x132)](KEY_CLIENTS,JSON[_0x25b1d1(0x1b5)](clients)),localStorage[_0x25b1d1(0x132)](KEY_SETTINGS,JSON[_0x25b1d1(0x1b5)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x52c235){}},'loadLocal'(){const _0x519501=a3_0x5278ca;try{const _0x2a4d02=localStorage[_0x519501(0x1c8)](KEY_SESSIONS);if(_0x2a4d02)sessions=JSON[_0x519501(0x1b4)](_0x2a4d02);const _0x2a67c5=localStorage['getItem'](KEY_CLIENTS);if(_0x2a67c5)clients=JSON[_0x519501(0x1b4)](_0x2a67c5);const _0x124c68=localStorage[_0x519501(0x1c8)](KEY_SETTINGS);if(_0x124c68){const _0x5a9189=JSON[_0x519501(0x1b4)](_0x124c68);if(_0x5a9189[_0x519501(0x11d)])availabilityPattern=_0x5a9189[_0x519501(0x11d)];if(_0x5a9189[_0x519501(0x15e)])specialRanges=_0x5a9189[_0x519501(0x15e)];if(_0x5a9189['exceptions'])dateExceptions=_0x5a9189['exceptions'];}}catch(_0x16d28a){}},async 'syncLoad'(){const _0x1b4417=a3_0x5278ca,_0x11177d=new Date(),_0x3805ac=_0x11177d[_0x1b4417(0x1d7)]()+'-'+String(_0x11177d[_0x1b4417(0x1a2)]()+0x1)['padStart'](0x2,'0'),_0x11cbbb=new Date(_0x11177d);_0x11cbbb['setMonth'](_0x11177d[_0x1b4417(0x1a2)]()+0x1);const _0xe40c8=_0x11cbbb[_0x1b4417(0x1d7)]()+'-'+String(_0x11cbbb['getMonth']()+0x1)['padStart'](0x2,'0'),_0x520621=Date['now']();try{const _0x38726d=window['Telegram']?.[_0x1b4417(0x175)],_0x33d9dd=_0x38726d?.['initData']||'',[_0xfd7f10,_0x3df979]=await Promise[_0x1b4417(0x14e)]([fetch(API_URL,{'method':_0x1b4417(0x1be),'body':JSON[_0x1b4417(0x1b5)]({'action':'client_load','init_data':_0x33d9dd,'month_str':_0x3805ac})})['then'](_0x4347b2=>_0x4347b2['json']()),fetch(API_URL,{'method':_0x1b4417(0x1be),'body':JSON[_0x1b4417(0x1b5)]({'action':_0x1b4417(0x1ea),'init_data':_0x33d9dd,'month_str':_0xe40c8})})[_0x1b4417(0x146)](_0x553774=>_0x553774[_0x1b4417(0x17e)]())]);if(lastUserActionTime>_0x520621){console[_0x1b4417(0x1f8)](_0x1b4417(0x156));return;}if(_0xfd7f10['ok'])this[_0x1b4417(0x121)](_0xfd7f10[_0x1b4417(0x1fb)],_0x3805ac);if(_0x3df979['ok'])this[_0x1b4417(0x121)](_0x3df979['data'],_0xe40c8);this[_0x1b4417(0x120)]();}catch(_0x5d2f9b){}},'applyData'(_0x18b69d,_0x2a53a0){const _0x5853e9=a3_0x5278ca;if(!_0x18b69d)return;if(_0x18b69d[_0x5853e9(0x1f7)]){if(_0x18b69d[_0x5853e9(0x1f7)]['pattern'])availabilityPattern=_0x18b69d['settings']['pattern'];if(_0x18b69d[_0x5853e9(0x1f7)][_0x5853e9(0x15e)])specialRanges=_0x18b69d[_0x5853e9(0x1f7)][_0x5853e9(0x15e)];if(_0x18b69d['settings'][_0x5853e9(0x1a1)])dateExceptions=_0x18b69d[_0x5853e9(0x1f7)][_0x5853e9(0x1a1)];}if(_0x18b69d[_0x5853e9(0x192)]&&Array[_0x5853e9(0x17b)](_0x18b69d[_0x5853e9(0x192)]))clients=_0x18b69d[_0x5853e9(0x192)];_0x18b69d['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x18b69d[_0x5853e9(0x1e7)]}),_0x18b69d[_0x5853e9(0x179)]&&(sessions=sessions[_0x5853e9(0x1bd)](_0x2aacb9=>!_0x2aacb9[_0x5853e9(0x1e4)][_0x5853e9(0x1c5)](_0x2a53a0)),Object['keys'](_0x18b69d['calendar'])[_0x5853e9(0x16a)](_0x3e60e9=>{const _0x18a91d=_0x18b69d['calendar'][_0x3e60e9];_0x18a91d['forEach'](_0x821c41=>{const _0x207215=a3_0x5ca6;sessions['push']({'id':_0x821c41['i'],'clientId':_0x821c41['c'],'coachId':_0x821c41[_0x207215(0x17a)],'dateStr':_0x2a53a0+'-'+_0x3e60e9[_0x207215(0x1ab)](0x2,'0'),'start':_0x821c41['s'],'end':_0x821c41['e'],'note':_0x821c41['n']||'','status':_0x821c41['st']||_0x207215(0x150),'seriesId':_0x821c41[_0x207215(0x1de)]});});})),reRenderBlocks();}};function init(){const _0xd8fa62=a3_0x5278ca;DataManager[_0xd8fa62(0x12b)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0xd8fa62(0x10a))['addEventListener'](_0xd8fa62(0x1dd),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0xd8fa62(0x1e3)]();}function renderTimeColumn(){const _0x1cd151=a3_0x5278ca,_0xbc7aef=document[_0x1cd151(0x1a5)](_0x1cd151(0x171)),_0x3abb47=document[_0x1cd151(0x1a5)](_0x1cd151(0x1ff));_0xbc7aef[_0x1cd151(0x155)]='',_0xbc7aef[_0x1cd151(0x137)](_0x3abb47);for(let _0x428825=0x0;_0x428825<0x18;_0x428825++){const _0x1786cb=document[_0x1cd151(0x1f2)](_0x1cd151(0x165));_0x1786cb['className']=_0x1cd151(0x117);if(_0x428825>0x0)_0x1786cb[_0x1cd151(0x155)]=_0x1cd151(0x17f)+String(_0x428825)[_0x1cd151(0x1ab)](0x2,'0')+_0x1cd151(0x131);_0xbc7aef[_0x1cd151(0x137)](_0x1786cb);}}function renderDayRange(_0x387ab2,_0x5bd716){const _0x195113=a3_0x5278ca,_0x2c9258=document[_0x195113(0x1a5)]('daysHeaderTrack'),_0x1fa897=document[_0x195113(0x1a5)]('gridColumns'),_0x11731a=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x579b25=new Date();_0x579b25['setHours'](0x0,0x0,0x0,0x0);const _0x197d29=getLocalDateStr(new Date());for(let _0xed4a91=_0x387ab2;_0xed4a91<=_0x5bd716;_0xed4a91++){const _0x215bf2=new Date(_0x579b25);_0x215bf2['setDate'](_0x215bf2[_0x195113(0x1c7)]()+_0xed4a91);const _0x1342f3=getLocalDateStr(_0x215bf2);let _0x47fefd=_0x215bf2['getDay']()-0x1;if(_0x47fefd===-0x1)_0x47fefd=0x6;const _0x53dee4=_0x1342f3===_0x197d29,_0x1fdaea=document[_0x195113(0x1f2)](_0x195113(0x165));_0x1fdaea[_0x195113(0x13f)]=_0x195113(0x166)+(_0x53dee4?'today':''),_0x1fdaea[_0x195113(0x126)](_0x195113(0x110),_0x1342f3),_0x1fdaea[_0x195113(0x155)]='<div\x20class=\x22dch-day\x22>'+_0x11731a[_0x47fefd]+_0x195113(0x14b)+_0x215bf2[_0x195113(0x1c7)]()+_0x195113(0x200),_0x2c9258['appendChild'](_0x1fdaea);const _0x3ee7da=document['createElement'](_0x195113(0x165));_0x3ee7da[_0x195113(0x13f)]=_0x195113(0x1b2)+(_0x53dee4?_0x195113(0x11a):''),_0x3ee7da[_0x195113(0x126)](_0x195113(0x110),_0x1342f3),_0x3ee7da[_0x195113(0x126)](_0x195113(0x1ee),_0x47fefd),_0x1fa897['appendChild'](_0x3ee7da);}}function reRenderBlocks(){const _0x700024=a3_0x5278ca;document['querySelectorAll'](_0x700024(0x14c))[_0x700024(0x16a)](_0x5be31d=>{const _0x1332ec=_0x700024;_0x5be31d['querySelectorAll'](_0x1332ec(0x1e0))[_0x1332ec(0x16a)](_0x128a17=>_0x128a17['remove']());const _0x4cbd5e=_0x5be31d[_0x1332ec(0x158)](_0x1332ec(0x110)),_0x48e456=parseInt(_0x5be31d[_0x1332ec(0x158)]('data-day-idx')),_0x52b8b0=Math[_0x1332ec(0x1d5)](_0x5be31d[_0x1332ec(0x1b9)]);(availabilityPattern[_0x48e456]||[])[_0x1332ec(0x16a)](_0x142b36=>{const _0x1f276b=_0x1332ec,_0x2eff13=document[_0x1f276b(0x1f2)](_0x1f276b(0x165));_0x2eff13['className']=_0x1f276b(0x1c0),_0x2eff13[_0x1f276b(0x1a4)]['top']=_0x142b36*GRID_H+'px',_0x2eff13[_0x1f276b(0x1a4)]['backgroundPosition']='-'+_0x52b8b0+_0x1f276b(0x103)+_0x142b36*GRID_H+'px',_0x5be31d[_0x1f276b(0x137)](_0x2eff13);});if(specialRanges[_0x1332ec(0x1ed)]>0x0){const _0x393cc8=new Date(_0x4cbd5e+_0x1332ec(0x101))[_0x1332ec(0x193)](),_0x5683af=new Date(_0x4cbd5e+_0x1332ec(0x1ca))[_0x1332ec(0x193)]();specialRanges['forEach'](_0x5a39cd=>{const _0x558688=_0x1332ec,_0x507bef=new Date(_0x5a39cd['start'])['getTime'](),_0x3ba2fe=new Date(_0x5a39cd[_0x558688(0x191)])[_0x558688(0x193)](),_0x2b75b8=Math[_0x558688(0x1eb)](_0x393cc8,_0x507bef),_0x157f1a=Math[_0x558688(0x16c)](_0x5683af,_0x3ba2fe);if(_0x2b75b8<_0x157f1a){const _0x5b0076=(_0x2b75b8-_0x393cc8)/0x36ee80*GRID_H,_0x3f6f14=(_0x157f1a-_0x2b75b8)/0x36ee80*GRID_H,_0x19e4c6=document[_0x558688(0x1f2)](_0x558688(0x165));_0x3f6f14>=23.5*GRID_H?(_0x19e4c6[_0x558688(0x13f)]='day-off-overlay\x20stripe-bg',_0x19e4c6[_0x558688(0x1a4)][_0x558688(0x1b3)]='-'+_0x52b8b0+_0x558688(0x15a)):(_0x19e4c6['className']='blocked-range-part\x20stripe-bg',_0x19e4c6[_0x558688(0x1a4)][_0x558688(0x127)]=_0x5b0076+'px',_0x19e4c6['style'][_0x558688(0x1fd)]=_0x3f6f14+'px',_0x19e4c6[_0x558688(0x1a4)][_0x558688(0x1b3)]='-'+_0x52b8b0+'px\x20-'+_0x5b0076+'px'),_0x5be31d['appendChild'](_0x19e4c6);}});}renderEventsForColumn(_0x5be31d,_0x4cbd5e);});}function renderEventsForColumn(_0x4e1180,_0x5dce4f){const _0x507f3a=a3_0x5278ca,_0x319a22=sessions[_0x507f3a(0x1bd)](_0x1ba106=>_0x1ba106[_0x507f3a(0x1e4)]===_0x5dce4f),_0x4bd5a3=_0x319a22[_0x507f3a(0x183)](_0x1ef394=>{const _0x688fe7=_0x507f3a,[_0x4022ea,_0x122a20]=_0x1ef394[_0x688fe7(0x1cd)][_0x688fe7(0x1ba)](':')[_0x688fe7(0x183)](Number),[_0x5bf495,_0x2b4c77]=_0x1ef394[_0x688fe7(0x191)]['split'](':')[_0x688fe7(0x183)](Number);return{'data':_0x1ef394,'start':_0x4022ea*0x3c+_0x122a20,'end':_0x5bf495*0x3c+_0x2b4c77,'colIndex':0x0};});_0x4bd5a3['sort']((_0x19b302,_0x3e7a08)=>_0x19b302['start']-_0x3e7a08['start']||_0x3e7a08['end']-_0x3e7a08[_0x507f3a(0x1cd)]-(_0x19b302[_0x507f3a(0x191)]-_0x19b302[_0x507f3a(0x1cd)]));const _0x4861b2=[];_0x4bd5a3[_0x507f3a(0x16a)](_0x141d07=>{const _0x11d816=_0x507f3a;let _0x61b422=![];for(let _0x1407dc=0x0;_0x1407dc<_0x4861b2[_0x11d816(0x1ed)];_0x1407dc++){const _0x5a91c0=_0x4861b2[_0x1407dc];if(_0x141d07['start']>=_0x5a91c0[_0x5a91c0[_0x11d816(0x1ed)]-0x1][_0x11d816(0x191)]){_0x5a91c0[_0x11d816(0x162)](_0x141d07),_0x141d07['colIndex']=_0x1407dc,_0x61b422=!![];break;}}!_0x61b422&&(_0x4861b2[_0x11d816(0x162)]([_0x141d07]),_0x141d07[_0x11d816(0x1e5)]=_0x4861b2[_0x11d816(0x1ed)]-0x1);}),_0x4bd5a3[_0x507f3a(0x16a)](_0x5cb702=>{const _0x428b2a=_0x507f3a;let _0x3bf9b0=0x0;_0x4bd5a3['forEach'](_0x4ee11d=>{const _0x44d566=a3_0x5ca6;if(Math[_0x44d566(0x1eb)](_0x5cb702[_0x44d566(0x1cd)],_0x4ee11d[_0x44d566(0x1cd)])<Math[_0x44d566(0x16c)](_0x5cb702[_0x44d566(0x191)],_0x4ee11d['end'])&&_0x4ee11d[_0x44d566(0x1e5)]>_0x3bf9b0)_0x3bf9b0=_0x4ee11d[_0x44d566(0x1e5)];});const _0x214fae=_0x3bf9b0+0x1,_0x8e17b3=0x64/_0x214fae,_0x588eb5=_0x5cb702[_0x428b2a(0x1e5)]*_0x8e17b3,_0x357532=document[_0x428b2a(0x1f2)](_0x428b2a(0x165)),_0x13690c=_0x5cb702[_0x428b2a(0x1fb)];let _0x1d5a05=_0x428b2a(0x114);if(clients&&clients[_0x428b2a(0x1ed)]>0x0){const _0x29b44a=clients['find'](_0x28d1d7=>String(_0x28d1d7['id'])===String(_0x13690c[_0x428b2a(0x1d3)]));if(_0x29b44a&&_0x29b44a[_0x428b2a(0x1ad)])_0x1d5a05=_0x29b44a[_0x428b2a(0x1ad)];}const _0xe703e7=_0x13690c[_0x428b2a(0x1e9)]==='completed',_0x343d1f=_0xe703e7?0x1:0.45;_0x357532['className']=_0x428b2a(0x163)+(_0xe703e7?_0x428b2a(0x15c):''),_0x357532['style'][_0x428b2a(0x105)]=hexToRgba(_0x1d5a05,_0x343d1f),_0x357532['style']['borderLeftColor']=_0x1d5a05;const _0x5c84de=_0x5cb702[_0x428b2a(0x1cd)]/0x3c*GRID_H,_0x277d6f=(_0x5cb702[_0x428b2a(0x191)]-_0x5cb702[_0x428b2a(0x1cd)])/0x3c*GRID_H;_0x357532[_0x428b2a(0x1a4)][_0x428b2a(0x127)]=_0x5c84de+'px',_0x357532[_0x428b2a(0x1a4)][_0x428b2a(0x1fd)]=Math['max'](_0x277d6f,0x14)+'px',_0x357532[_0x428b2a(0x1a4)][_0x428b2a(0x11b)]=_0x428b2a(0x19c)+_0x8e17b3+_0x428b2a(0x19f),_0x357532[_0x428b2a(0x1a4)][_0x428b2a(0x1b0)]='calc('+_0x588eb5+_0x428b2a(0x197),_0x357532[_0x428b2a(0x1a4)][_0x428b2a(0x10b)]=0xa+_0x5cb702[_0x428b2a(0x1e5)];if(_0x8e17b3<0x55)_0x357532['classList'][_0x428b2a(0x160)](_0x428b2a(0x119));let _0x169107='';if(_0x13690c[_0x428b2a(0x1fa)])_0x169107+=_0x428b2a(0x17d);if(_0xe703e7)_0x169107+=_0x428b2a(0x1d4);_0x357532['innerHTML']=_0x428b2a(0x1f5)+_0x13690c[_0x428b2a(0x1cd)]+_0x428b2a(0x188)+_0x13690c[_0x428b2a(0x191)]+_0x428b2a(0x14f)+_0x169107+_0x428b2a(0x1db),_0x357532['onclick']=_0x348e25=>{const _0x236748=_0x428b2a;_0x348e25[_0x236748(0x109)](),openDetails(_0x13690c);},_0x4e1180[_0x428b2a(0x137)](_0x357532);});}function openAnalytics(){const _0x15983c=a3_0x5278ca,_0x457759=document[_0x15983c(0x176)](_0x15983c(0x1a0));setAnalyticsPeriod(_0x15983c(0x1ec),_0x457759),openSheet(_0x15983c(0x14a));}function a3_0x5ca6(_0x36a8b3,_0x7db59e){_0x36a8b3=_0x36a8b3-0x101;const _0xda9150=a3_0x145e();let _0x5da349=_0xda9150[_0x36a8b3];return _0x5da349;}function setAnalyticsPeriod(_0x731171,_0x2122f4){const _0xa8202f=a3_0x5278ca;currentAnPeriod=_0x731171,document[_0xa8202f(0x172)](_0xa8202f(0x1a0))[_0xa8202f(0x16a)](_0x46d2cd=>_0x46d2cd[_0xa8202f(0x11c)]['remove'](_0xa8202f(0x1f6)));if(_0x2122f4)_0x2122f4['classList'][_0xa8202f(0x160)]('active');const _0x40ebbc=document[_0xa8202f(0x1a5)](_0xa8202f(0x1cb));_0x40ebbc['style'][_0xa8202f(0x153)]=_0x731171==='custom'?_0xa8202f(0x106):_0xa8202f(0x16e);const _0x2458a8=new Date();let _0x257486=new Date(),_0x29b0fa=new Date();if(_0x731171==='week')_0x257486=getStartOfWeek(_0x2458a8),_0x29b0fa=new Date(_0x257486),_0x29b0fa['setDate'](_0x29b0fa['getDate']()+0x6);else{if(_0x731171==='month')_0x257486=new Date(_0x2458a8[_0xa8202f(0x1d7)](),_0x2458a8[_0xa8202f(0x1a2)](),0x1),_0x29b0fa=new Date(_0x2458a8[_0xa8202f(0x1d7)](),_0x2458a8[_0xa8202f(0x1a2)]()+0x1,0x0);else{!document['getElementById']('anStart')[_0xa8202f(0x1df)]&&(document[_0xa8202f(0x1a5)](_0xa8202f(0x198))['value']=getLocalDateStr(_0x2458a8),document[_0xa8202f(0x1a5)]('anEnd')[_0xa8202f(0x1df)]=getLocalDateStr(_0x2458a8));refreshAnalytics();return;}}document['getElementById'](_0xa8202f(0x198))[_0xa8202f(0x1df)]=getLocalDateStr(_0x257486),document['getElementById'](_0xa8202f(0x13e))[_0xa8202f(0x1df)]=getLocalDateStr(_0x29b0fa),refreshAnalytics();}function refreshAnalytics(){const _0x370228=a3_0x5278ca,_0x1501cb=document[_0x370228(0x1a5)](_0x370228(0x198))[_0x370228(0x1df)],_0x4ee5e9=document['getElementById'](_0x370228(0x13e))[_0x370228(0x1df)];if(!_0x1501cb||!_0x4ee5e9)return;const _0x3c5180=sessions[_0x370228(0x1bd)](_0xa220d8=>_0xa220d8[_0x370228(0x1e4)]>=_0x1501cb&&_0xa220d8[_0x370228(0x1e4)]<=_0x4ee5e9&&_0xa220d8[_0x370228(0x1e9)]!=='cancelled'),_0x366585=_0x3c5180[_0x370228(0x1ed)],_0x416997=_0x3c5180[_0x370228(0x1bd)](_0x132e3e=>_0x132e3e['status']===_0x370228(0x1a7))[_0x370228(0x1ed)],_0x348e72=_0x366585>0x0?Math[_0x370228(0x1d5)](_0x416997/_0x366585*0x64):0x0;document[_0x370228(0x1a5)]('anPercent')[_0x370228(0x1d6)]=_0x348e72+'%',document['getElementById']('anTotalStats')['textContent']=_0x416997+_0x370228(0x108)+_0x366585+_0x370228(0x174);const _0x1cf6e0=document[_0x370228(0x1a5)](_0x370228(0x128)),_0x19be6e=0x2*Math['PI']*0x23,_0x399911=_0x19be6e-_0x348e72/0x64*_0x19be6e;_0x1cf6e0['style'][_0x370228(0x1c1)]=_0x399911;const _0xd85a5f={};_0x3c5180[_0x370228(0x16a)](_0x27751c=>{const _0x521c4f=_0x370228,_0x205d29=_0x27751c[_0x521c4f(0x1fc)]||_0x521c4f(0x1bb);if(!_0xd85a5f[_0x205d29]){const _0x2a9358='#'+_0x205d29[_0x521c4f(0x18a)]()[_0x521c4f(0x189)](0x0,0x6);_0xd85a5f[_0x205d29]={'total':0x0,'done':0x0,'color':_0x2a9358};}_0xd85a5f[_0x205d29][_0x521c4f(0x1ef)]++;if(_0x27751c['status']===_0x521c4f(0x1a7))_0xd85a5f[_0x205d29][_0x521c4f(0x1a8)]++;});const _0x53cc20=document['getElementById']('analyticsList');_0x53cc20['innerHTML']='';const _0x2b581a=Object['entries'](_0xd85a5f)[_0x370228(0x187)]((_0x52c0a9,_0x500e7a)=>_0x500e7a[0x1][_0x370228(0x1ef)]-_0x52c0a9[0x1]['total']);if(_0x2b581a['length']===0x0){_0x53cc20[_0x370228(0x155)]=_0x370228(0x13b);return;}_0x2b581a['forEach'](([_0x159034,_0x32899a])=>{const _0x7ba62a=_0x370228,_0x59d1b5=Math['round'](_0x32899a[_0x7ba62a(0x1a8)]/_0x32899a[_0x7ba62a(0x1ef)]*0x64),_0x16b8c6=document[_0x7ba62a(0x1f2)](_0x7ba62a(0x165));_0x16b8c6['className']=_0x7ba62a(0x184),_0x16b8c6[_0x7ba62a(0x1a4)][_0x7ba62a(0x133)]=_0x32899a[_0x7ba62a(0x1ad)],_0x16b8c6[_0x7ba62a(0x155)]=_0x7ba62a(0x1f0)+_0x159034[_0x7ba62a(0x189)](0x0,0x5)+_0x7ba62a(0x1fe)+_0x32899a[_0x7ba62a(0x1a8)]+'</span>\x20/\x20'+_0x32899a[_0x7ba62a(0x1ef)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x59d1b5+_0x7ba62a(0x122),_0x53cc20['appendChild'](_0x16b8c6);});}function openDetails(_0x98d24b){const _0x5dd431=a3_0x5278ca;currentSession=_0x98d24b;const _0x136fff=new Date(_0x98d24b[_0x5dd431(0x1e4)]),_0x3292a2=_0x136fff[_0x5dd431(0x12c)](_0x5dd431(0x1c9),{'weekday':_0x5dd431(0x142),'day':_0x5dd431(0x181),'month':'long'});document[_0x5dd431(0x1a5)]('detDate')[_0x5dd431(0x1d6)]=_0x3292a2[_0x5dd431(0x1c4)](0x0)[_0x5dd431(0x170)]()+_0x3292a2[_0x5dd431(0x12e)](0x1),document[_0x5dd431(0x1a5)](_0x5dd431(0x157))['textContent']=_0x98d24b[_0x5dd431(0x1cd)]+_0x5dd431(0x188)+_0x98d24b['end'],document['getElementById'](_0x5dd431(0x141))[_0x5dd431(0x1d6)]=_0x98d24b['note']||_0x5dd431(0x140);const _0x352651=document[_0x5dd431(0x1a5)](_0x5dd431(0x10f)),_0x4b48d7=document[_0x5dd431(0x1a5)]('cancelContainer'),_0x3ac9ca=_0x4b48d7[_0x5dd431(0x176)](_0x5dd431(0x16f)),_0x39503d=_0x4b48d7[_0x5dd431(0x176)](_0x5dd431(0x15d)),_0x3a27b2=document['getElementById'](_0x5dd431(0x185));if(_0x98d24b['status']===_0x5dd431(0x1a7))_0x352651[_0x5dd431(0x1d6)]=_0x5dd431(0x1e8),_0x352651[_0x5dd431(0x1a4)][_0x5dd431(0x1ad)]='var(--acc-green)',_0x4b48d7[_0x5dd431(0x1a4)]['display']=_0x5dd431(0x16e);else{_0x352651[_0x5dd431(0x1d6)]=_0x5dd431(0x10e),_0x352651[_0x5dd431(0x1a4)][_0x5dd431(0x1ad)]=_0x5dd431(0x1d0),_0x4b48d7[_0x5dd431(0x1a4)]['display']='block';const _0x2bae13=new Date(_0x98d24b[_0x5dd431(0x1e4)]+'T'+_0x98d24b[_0x5dd431(0x1cd)]),_0x236cda=new Date(),_0x27b220=(_0x2bae13-_0x236cda)/(0x3e8*0x3c*0x3c),_0xc08bf0=coachProfiles[_0x98d24b[_0x5dd431(0x1fc)]]&&coachProfiles[_0x98d24b[_0x5dd431(0x1fc)]][_0x5dd431(0x18e)]?parseInt(coachProfiles[_0x98d24b[_0x5dd431(0x1fc)]][_0x5dd431(0x18e)]):0x18;if(_0xc08bf0===0x0||_0x27b220>=_0xc08bf0)_0x3ac9ca[_0x5dd431(0x1a4)][_0x5dd431(0x153)]=_0x5dd431(0x195),_0x39503d[_0x5dd431(0x1a4)]['display']=_0x5dd431(0x195),_0x3a27b2[_0x5dd431(0x1a4)]['display']=_0x5dd431(0x16e);else{_0x3ac9ca[_0x5dd431(0x1a4)]['display']=_0x5dd431(0x16e),_0x39503d[_0x5dd431(0x1a4)]['display']=_0x5dd431(0x16e),_0x3a27b2['style'][_0x5dd431(0x153)]=_0x5dd431(0x195);let _0x3203c6=_0xc08bf0===0x0?_0x5dd431(0x13c):_0x5dd431(0x147)+_0xc08bf0+_0x5dd431(0x167);_0x3a27b2[_0x5dd431(0x1d6)]=_0x5dd431(0x102)+_0x3203c6+_0x5dd431(0x124);}}document[_0x5dd431(0x1a5)]('overlay')[_0x5dd431(0x11c)][_0x5dd431(0x160)](_0x5dd431(0x1f6)),document[_0x5dd431(0x1a5)](_0x5dd431(0x154))[_0x5dd431(0x11c)][_0x5dd431(0x160)](_0x5dd431(0x18f));}function closeAllSheets(){const _0x3d685c=a3_0x5278ca;document[_0x3d685c(0x1a5)](_0x3d685c(0x1f4))[_0x3d685c(0x11c)][_0x3d685c(0x1e1)](_0x3d685c(0x1f6)),document[_0x3d685c(0x172)](_0x3d685c(0x1d2))[_0x3d685c(0x16a)](_0x3d1d77=>_0x3d1d77[_0x3d685c(0x11c)][_0x3d685c(0x1e1)](_0x3d685c(0x18f)));}function openSheet(_0x599d39){const _0x398f33=a3_0x5278ca;document[_0x398f33(0x1a5)](_0x398f33(0x1f4))['classList'][_0x398f33(0x160)](_0x398f33(0x1f6)),document[_0x398f33(0x1a5)](_0x599d39)[_0x398f33(0x11c)][_0x398f33(0x160)](_0x398f33(0x18f));}function getLocalDateStr(_0x397621){const _0x779dd3=a3_0x5278ca,_0x8b9a1d=_0x397621[_0x779dd3(0x1d7)](),_0x449fe9=String(_0x397621[_0x779dd3(0x1a2)]()+0x1)[_0x779dd3(0x1ab)](0x2,'0'),_0x32f928=String(_0x397621[_0x779dd3(0x1c7)]())[_0x779dd3(0x1ab)](0x2,'0');return _0x8b9a1d+'-'+_0x449fe9+'-'+_0x32f928;}function getStartOfWeek(_0x5eebff){const _0x10ef08=a3_0x5278ca,_0x1fa496=new Date(_0x5eebff),_0x351d9f=_0x1fa496[_0x10ef08(0x149)](),_0x4665bb=_0x1fa496[_0x10ef08(0x1c7)]()-_0x351d9f+(_0x351d9f===0x0?-0x6:0x1);return _0x1fa496[_0x10ef08(0x13a)](_0x4665bb),_0x1fa496[_0x10ef08(0x136)](0x0,0x0,0x0,0x0),_0x1fa496;}function scrollToToday(){const _0x1874ab=getLocalDateStr(new Date());setTimeout(()=>{const _0x151637=a3_0x5ca6,_0x2b5eb6=document[_0x151637(0x176)](_0x151637(0x1a3)+_0x1874ab+'\x22]');if(_0x2b5eb6){const _0xc29b58=document[_0x151637(0x1a5)](_0x151637(0x10a)),_0x33ca88=_0x2b5eb6[_0x151637(0x1b9)]-_0xc29b58[_0x151637(0x139)]/0x2+_0x2b5eb6[_0x151637(0x159)]/0x2;_0xc29b58[_0x151637(0x138)]({'left':_0x33ca88,'behavior':_0x151637(0x115)}),_0xc29b58[_0x151637(0x182)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4441bf=a3_0x5278ca,_0x8659b6=new Date(),_0x56ce4f=document['getElementById'](_0x4441bf(0x17c)),_0x361799=document[_0x4441bf(0x1a5)]('timeLineBadge'),_0x2b4ea4=(_0x8659b6[_0x4441bf(0x1d9)]()*0x3c+_0x8659b6[_0x4441bf(0x1a6)]())/0x3c*GRID_H;_0x56ce4f[_0x4441bf(0x1a4)][_0x4441bf(0x127)]=_0x2b4ea4+'px',_0x56ce4f[_0x4441bf(0x1a4)][_0x4441bf(0x153)]=_0x4441bf(0x195),_0x361799[_0x4441bf(0x1a4)][_0x4441bf(0x127)]=_0x2b4ea4+'px',_0x361799[_0x4441bf(0x1a4)]['display']=_0x4441bf(0x195),_0x361799[_0x4441bf(0x1d6)]=String(_0x8659b6[_0x4441bf(0x1d9)]())[_0x4441bf(0x1ab)](0x2,'0')+':'+String(_0x8659b6[_0x4441bf(0x1a6)]())[_0x4441bf(0x1ab)](0x2,'0');}function onScroll(){const _0x8018a9=a3_0x5278ca,_0x39af32=document[_0x8018a9(0x1a5)](_0x8018a9(0x10a)),_0x3ac084=document[_0x8018a9(0x172)]('.day-col-header');for(let _0x4ee5a2 of _0x3ac084)if(_0x4ee5a2['offsetLeft']>=_0x39af32[_0x8018a9(0x16d)]){const _0x263a06=new Date(_0x4ee5a2['getAttribute']('data-date'));document[_0x8018a9(0x1a5)]('headerMonth')[_0x8018a9(0x1d6)]=_0x263a06[_0x8018a9(0x18c)]('ru',{'month':_0x8018a9(0x142)})[_0x8018a9(0x170)]()+'\x20'+_0x263a06['getFullYear']();break;}}function showToast(_0x22bf28){const _0x3ec4c6=a3_0x5278ca,_0x41dcdc=document[_0x3ec4c6(0x1a5)]('toast');_0x41dcdc[_0x3ec4c6(0x1d6)]=_0x22bf28,_0x41dcdc[_0x3ec4c6(0x11c)]['add'](_0x3ec4c6(0x15b)),setTimeout(()=>_0x41dcdc[_0x3ec4c6(0x11c)][_0x3ec4c6(0x1e1)](_0x3ec4c6(0x15b)),0x7d0);}function handleInfiniteScroll(){const _0x3d103=a3_0x5278ca,_0x1b2ecc=document[_0x3d103(0x1a5)](_0x3d103(0x10a)),_0x4d0520=_0x1b2ecc[_0x3d103(0x16d)],_0x56c01f=_0x1b2ecc[_0x3d103(0x1f3)],_0x4af836=_0x1b2ecc['clientWidth'];if(_0x56c01f-(_0x4d0520+_0x4af836)<0x12c){const _0x44447d=endOffset;endOffset+=0xe,renderDayRange(_0x44447d+0x1,endOffset),reRenderBlocks();}if(_0x4d0520<0x12c){const _0x52c06a=startOffset;startOffset-=0xe,prependDays(startOffset,_0x52c06a-0x1),_0x1b2ecc[_0x3d103(0x16d)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x35bdc0,_0x1fdb75){const _0x1eaa4e=a3_0x5278ca,_0x9b80ca=document[_0x1eaa4e(0x1a5)](_0x1eaa4e(0x164)),_0x7643fa=document[_0x1eaa4e(0x1a5)]('gridColumns'),_0x2eaad1=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1f2153=new Date();_0x1f2153['setHours'](0x0,0x0,0x0,0x0);const _0x384c57=getLocalDateStr(new Date()),_0x11c724=document[_0x1eaa4e(0x143)](),_0x402056=document[_0x1eaa4e(0x143)]();for(let _0x450014=_0x35bdc0;_0x450014<=_0x1fdb75;_0x450014++){const _0x417fb8=new Date(_0x1f2153);_0x417fb8[_0x1eaa4e(0x13a)](_0x417fb8[_0x1eaa4e(0x1c7)]()+_0x450014);const _0x4a046d=getLocalDateStr(_0x417fb8);let _0x4acf7d=_0x417fb8['getDay']()-0x1;if(_0x4acf7d===-0x1)_0x4acf7d=0x6;const _0x17ac0f=_0x4a046d===_0x384c57,_0x10e1c3=document['createElement'](_0x1eaa4e(0x165));_0x10e1c3['className']=_0x1eaa4e(0x166)+(_0x17ac0f?_0x1eaa4e(0x11a):''),_0x10e1c3[_0x1eaa4e(0x126)](_0x1eaa4e(0x110),_0x4a046d),_0x10e1c3[_0x1eaa4e(0x155)]=_0x1eaa4e(0x1cc)+_0x2eaad1[_0x4acf7d]+_0x1eaa4e(0x14b)+_0x417fb8['getDate']()+_0x1eaa4e(0x200),_0x11c724[_0x1eaa4e(0x137)](_0x10e1c3);const _0x547f6e=document[_0x1eaa4e(0x1f2)](_0x1eaa4e(0x165));_0x547f6e[_0x1eaa4e(0x13f)]=_0x1eaa4e(0x1b2)+(_0x17ac0f?'today':''),_0x547f6e[_0x1eaa4e(0x126)](_0x1eaa4e(0x110),_0x4a046d),_0x547f6e[_0x1eaa4e(0x126)]('data-day-idx',_0x4acf7d),_0x402056[_0x1eaa4e(0x137)](_0x547f6e);}_0x9b80ca[_0x1eaa4e(0x169)](_0x11c724,_0x9b80ca[_0x1eaa4e(0x12d)]),_0x7643fa['insertBefore'](_0x402056,_0x7643fa[_0x1eaa4e(0x176)]('.day-column'));}function hexToRgba(_0x204480,_0x3069f1){const _0x2eaa44=a3_0x5278ca;let _0x1af9e7;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x2eaa44(0x19d)](_0x204480))return _0x1af9e7=_0x204480[_0x2eaa44(0x1ae)](0x1)[_0x2eaa44(0x1ba)](''),_0x1af9e7[_0x2eaa44(0x1ed)]==0x3&&(_0x1af9e7=[_0x1af9e7[0x0],_0x1af9e7[0x0],_0x1af9e7[0x1],_0x1af9e7[0x1],_0x1af9e7[0x2],_0x1af9e7[0x2]]),_0x1af9e7='0x'+_0x1af9e7[_0x2eaa44(0x1b6)](''),_0x2eaa44(0x1b7)+[_0x1af9e7>>0x10&0xff,_0x1af9e7>>0x8&0xff,_0x1af9e7&0xff][_0x2eaa44(0x1b6)](',')+','+_0x3069f1+')';return'rgba(10,\x20132,\x20255,\x20'+_0x3069f1+')';}let confirmResolver=null;function showCustomConfirm(_0x2aa2e3,_0x9a50dc,_0x4a53fc=!![]){const _0x394baa=a3_0x5278ca;document[_0x394baa(0x1a5)]('ccTitle')[_0x394baa(0x1d6)]=_0x2aa2e3,document[_0x394baa(0x1a5)](_0x394baa(0x104))['textContent']=_0x9a50dc;const _0x31c342=document['getElementById'](_0x394baa(0x130));return _0x4a53fc?(_0x31c342['style'][_0x394baa(0x1ad)]=_0x394baa(0x1ac),_0x31c342['style'][_0x394baa(0x151)]=_0x394baa(0x1da)):(_0x31c342['style'][_0x394baa(0x1ad)]=_0x394baa(0x114),_0x31c342[_0x394baa(0x1a4)][_0x394baa(0x151)]=_0x394baa(0x1da)),new Promise(_0x4eda6c=>{const _0x318316=_0x394baa;confirmResolver=_0x4eda6c,document[_0x318316(0x1a5)](_0x318316(0x111))['classList'][_0x318316(0x160)](_0x318316(0x125));});}function resolveCustomConfirm(_0x2c857f){const _0x3fce14=a3_0x5278ca;document[_0x3fce14(0x1a5)](_0x3fce14(0x111))[_0x3fce14(0x11c)]['remove'](_0x3fce14(0x125));if(confirmResolver)confirmResolver(_0x2c857f);}async function tryCancelCurrentSession(){const _0x1c1f1f=a3_0x5278ca;if(!currentSession)return;const _0x3c0e49=await showCustomConfirm(_0x1c1f1f(0x1b8),_0x1c1f1f(0x14d),!![]);if(!_0x3c0e49)return;const _0x13058b=currentSession;closeAllSheets(),sessions=sessions[_0x1c1f1f(0x1bd)](_0x1a16aa=>_0x1a16aa['id']!==_0x13058b['id']),reRenderBlocks(),showToast(_0x1c1f1f(0x145)),lastUserActionTime=Date[_0x1c1f1f(0x135)]();try{const _0x446e88=window['Telegram']?.['WebApp'],_0xaecd34=await fetch(API_URL,{'method':_0x1c1f1f(0x1be),'body':JSON[_0x1c1f1f(0x1b5)]({'action':_0x1c1f1f(0x148),'init_data':_0x446e88?.[_0x1c1f1f(0x1a9)]||'','coachId':_0x13058b[_0x1c1f1f(0x1fc)],'dateStr':_0x13058b['dateStr'],'sessionId':_0x13058b['id']})});if(_0xaecd34['ok'])DataManager[_0x1c1f1f(0x120)]();}catch(_0x1dcd88){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x58f5c7=a3_0x5278ca;if(!currentSession)return;document[_0x58f5c7(0x1a5)](_0x58f5c7(0x154))['classList'][_0x58f5c7(0x1e1)](_0x58f5c7(0x18f)),document[_0x58f5c7(0x1a5)]('rescheduleSheet')['classList'][_0x58f5c7(0x160)]('open');const _0x3cda21=document[_0x58f5c7(0x1a5)]('rsDatesTrack'),_0x432f61=document[_0x58f5c7(0x1a5)](_0x58f5c7(0x123));_0x3cda21[_0x58f5c7(0x155)]='',_0x432f61[_0x58f5c7(0x155)]=_0x58f5c7(0x178);const [_0x3d10f2,_0x59695a]=currentSession[_0x58f5c7(0x1cd)][_0x58f5c7(0x1ba)](':')[_0x58f5c7(0x183)](Number),[_0x3fd2d0,_0x2b2055]=currentSession['end']['split'](':')[_0x58f5c7(0x183)](Number),_0x3ebda4=_0x3fd2d0*0x3c+_0x2b2055-(_0x3d10f2*0x3c+_0x59695a);try{const _0x44edf8=window['Telegram']?.['WebApp'],_0x35da7a=await fetch(API_URL,{'method':_0x58f5c7(0x1be),'body':JSON[_0x58f5c7(0x1b5)]({'action':_0x58f5c7(0x11f),'coachId':currentSession[_0x58f5c7(0x1fc)],'duration':_0x3ebda4,'init_data':_0x44edf8?.[_0x58f5c7(0x1a9)]||'','excludeSessionId':currentSession['id']})}),_0x1738e7=await _0x35da7a[_0x58f5c7(0x17e)]();_0x1738e7['ok']&&_0x1738e7[_0x58f5c7(0x1fb)]?(availableSlotsCache=_0x1738e7['data'],renderRescheduleDates()):_0x432f61[_0x58f5c7(0x155)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x35417d){_0x432f61[_0x58f5c7(0x155)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x4daf5a=a3_0x5278ca,_0xaacdb2=document[_0x4daf5a(0x1a5)](_0x4daf5a(0x11e));_0xaacdb2['innerHTML']='';const _0x5567de=Object['keys'](availableSlotsCache)[_0x4daf5a(0x187)](),_0x17a46f=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x5567de[_0x4daf5a(0x1ed)]===0x0){document[_0x4daf5a(0x1a5)](_0x4daf5a(0x123))[_0x4daf5a(0x155)]=_0x4daf5a(0x1aa);return;}_0x5567de[_0x4daf5a(0x16a)]((_0x2e5c1b,_0x484a4d)=>{const _0x52258a=_0x4daf5a,_0x5ccefb=new Date(_0x2e5c1b),_0x52f3ad=_0x17a46f[_0x5ccefb[_0x52258a(0x149)]()],_0x215268=_0x5ccefb[_0x52258a(0x1c7)](),_0x56f13e=document['createElement'](_0x52258a(0x165));_0x56f13e[_0x52258a(0x13f)]=_0x52258a(0x12f);if(_0x484a4d===0x0)_0x56f13e[_0x52258a(0x11c)][_0x52258a(0x160)](_0x52258a(0x1f6));_0x56f13e[_0x52258a(0x155)]=_0x52258a(0x116)+_0x52f3ad+_0x52258a(0x134)+_0x215268+_0x52258a(0x200),_0x56f13e[_0x52258a(0x196)]=()=>selectRsDate(_0x2e5c1b,_0x56f13e),_0xaacdb2[_0x52258a(0x137)](_0x56f13e);}),selectRsDate(_0x5567de[0x0],_0xaacdb2[_0x4daf5a(0x12d)]);}function selectRsDate(_0x220969,_0x5e47b2){const _0x38e409=a3_0x5278ca;selectedRsDate=_0x220969,document[_0x38e409(0x172)](_0x38e409(0x1bc))[_0x38e409(0x16a)](_0x506e2d=>_0x506e2d['classList'][_0x38e409(0x1e1)]('active'));if(_0x5e47b2)_0x5e47b2[_0x38e409(0x11c)][_0x38e409(0x160)](_0x38e409(0x1f6));const _0x368fb1=document[_0x38e409(0x1a5)]('rsSlotsGrid');_0x368fb1[_0x38e409(0x155)]='';const _0x127c77=availableSlotsCache[_0x220969]||[];if(_0x127c77[_0x38e409(0x1ed)]===0x0){_0x368fb1['innerHTML']=_0x38e409(0x1cf);return;}_0x127c77[_0x38e409(0x16a)](_0x837344=>{const _0x2804e3=_0x38e409,_0x55cbb7=document[_0x2804e3(0x1f2)]('button');_0x55cbb7[_0x2804e3(0x13f)]=_0x2804e3(0x144),_0x55cbb7[_0x2804e3(0x1d6)]=_0x837344,_0x55cbb7['onclick']=()=>confirmReschedule(_0x837344),_0x368fb1[_0x2804e3(0x137)](_0x55cbb7);});}async function confirmReschedule(_0x5c4942){const _0xe6a55c=a3_0x5278ca,_0x146f03=new Date(selectedRsDate),_0x50122f=_0x146f03[_0xe6a55c(0x12c)]('ru-RU',{'day':_0xe6a55c(0x181),'month':_0xe6a55c(0x142)}),_0x5c759d=await showCustomConfirm(_0xe6a55c(0x177),_0xe6a55c(0x161)+_0x50122f+_0xe6a55c(0x16b)+_0x5c4942+'?',![]);if(!_0x5c759d)return;closeAllSheets(),showToast(_0xe6a55c(0x1d1)),lastUserActionTime=Date[_0xe6a55c(0x135)]();const _0x2b189f=currentSession[_0xe6a55c(0x1e4)],_0x1f71df=currentSession['id'],[_0x2e7584,_0x1ed32b]=currentSession[_0xe6a55c(0x1cd)][_0xe6a55c(0x1ba)](':')[_0xe6a55c(0x183)](Number),[_0x44415c,_0x1d9b17]=currentSession[_0xe6a55c(0x191)][_0xe6a55c(0x1ba)](':')[_0xe6a55c(0x183)](Number),_0x3ab640=_0x44415c*0x3c+_0x1d9b17-(_0x2e7584*0x3c+_0x1ed32b),[_0x437d4e,_0x1af132]=_0x5c4942[_0xe6a55c(0x1ba)](':')[_0xe6a55c(0x183)](Number),_0x33de29=_0x437d4e*0x3c+_0x1af132+_0x3ab640,_0x2f9347=Math['floor'](_0x33de29/0x3c),_0x21fdb6=_0x33de29%0x3c,_0x3027de=String(_0x2f9347)[_0xe6a55c(0x1ab)](0x2,'0')+':'+String(_0x21fdb6)['padStart'](0x2,'0'),_0x41867c=sessions['findIndex'](_0x132402=>_0x132402['id']===_0x1f71df);_0x41867c!==-0x1&&(sessions[_0x41867c][_0xe6a55c(0x1e4)]=selectedRsDate,sessions[_0x41867c][_0xe6a55c(0x1cd)]=_0x5c4942,sessions[_0x41867c][_0xe6a55c(0x191)]=_0x3027de,reRenderBlocks());try{const _0x3b06da=window[_0xe6a55c(0x12a)]?.[_0xe6a55c(0x175)],_0x1b3a6f=await fetch(API_URL,{'method':_0xe6a55c(0x1be),'body':JSON['stringify']({'action':_0xe6a55c(0x1f9),'init_data':_0x3b06da?.['initData']||'','oldSessionId':_0x1f71df,'oldDate':_0x2b189f,'newDate':selectedRsDate,'newTime':_0x5c4942,'coachId':currentSession[_0xe6a55c(0x1fc)]})}),_0x295de2=await _0x1b3a6f[_0xe6a55c(0x17e)]();!_0x295de2['ok']?(showToast(_0xe6a55c(0x19a)),DataManager['syncLoad']()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0xe6a55c(0x120)]());}catch(_0xdd6fe5){showToast(_0xe6a55c(0x113));}}document[a3_0x5278ca(0x19e)](a3_0x5278ca(0x112),init);