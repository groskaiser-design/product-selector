const a3_0x873536=a3_0x11f1;(function(_0x3bce22,_0x243d96){const _0x997e1d=a3_0x11f1,_0x1bcf45=_0x3bce22();while(!![]){try{const _0x142b30=-parseInt(_0x997e1d(0x176))/0x1*(parseInt(_0x997e1d(0xe7))/0x2)+-parseInt(_0x997e1d(0x183))/0x3+-parseInt(_0x997e1d(0x12c))/0x4+-parseInt(_0x997e1d(0x118))/0x5+-parseInt(_0x997e1d(0x1b9))/0x6+-parseInt(_0x997e1d(0x18a))/0x7*(parseInt(_0x997e1d(0x1cb))/0x8)+parseInt(_0x997e1d(0x107))/0x9;if(_0x142b30===_0x243d96)break;else _0x1bcf45['push'](_0x1bcf45['shift']());}catch(_0x2de73d){_0x1bcf45['push'](_0x1bcf45['shift']());}}}(a3_0x3efb,0x25e72));const APP_VERSION=a3_0x873536(0x180),API_URL=a3_0x873536(0x12b),GRID_H=0x3c,KEY_SESSIONS=a3_0x873536(0x15b),KEY_SETTINGS=a3_0x873536(0xf4),KEY_CLIENTS=a3_0x873536(0x1b2);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x873536(0x194),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x29612f=a3_0x873536,_0x3cbdf2=(function(){let _0x1533e4=!![];return function(_0xd22baa,_0x596c42){const _0x266e21=_0x1533e4?function(){if(_0x596c42){const _0x1456f2=_0x596c42['apply'](_0xd22baa,arguments);return _0x596c42=null,_0x1456f2;}}:function(){};return _0x1533e4=![],_0x266e21;};}()),_0x57eeac=_0x3cbdf2(this,function(){const _0x220f35=a3_0x11f1;return _0x57eeac[_0x220f35(0xe3)]()['search'](_0x220f35(0x1b1))[_0x220f35(0xe3)]()['constructor'](_0x57eeac)['search'](_0x220f35(0x1b1));});_0x57eeac();try{const _0x3beb9f=window[_0x29612f(0x111)]?.['WebApp'];if(!_0x3beb9f)return;_0x3beb9f['ready'](),_0x3beb9f['expand']();try{_0x3beb9f[_0x29612f(0x129)](_0x29612f(0x18c)),_0x3beb9f['setBackgroundColor']&&_0x3beb9f[_0x29612f(0x139)](_0x29612f(0x18c));}catch(_0x126b8b){console[_0x29612f(0x13f)](_0x29612f(0x10f),_0x126b8b);}try{_0x3beb9f[_0x29612f(0x1be)]&&(_0x3beb9f['BackButton'][_0x29612f(0x135)](),_0x3beb9f[_0x29612f(0x1be)][_0x29612f(0x1b4)](),_0x3beb9f[_0x29612f(0x1be)][_0x29612f(0x1c1)](function(){const _0x41d4f4=_0x29612f;window[_0x41d4f4(0xed)][_0x41d4f4(0x1b3)]=_0x41d4f4(0xff);}));}catch(_0x21b96e){console[_0x29612f(0x13f)](_0x29612f(0x15c),_0x21b96e);}try{if(_0x3beb9f[_0x29612f(0xeb)])_0x3beb9f['disableVerticalSwipes']();}catch(_0x379647){}}catch(_0x26bfa6){console[_0x29612f(0x1d0)](_0x29612f(0x114),_0x26bfa6);}}());function isAdmin(){const _0xf79eab=a3_0x873536;try{const _0x9b1bdd=Number(window['Telegram']?.['WebApp']?.[_0xf79eab(0x197)]?.['user']?.['id']);return _0x9b1bdd===0xbaf7174;}catch(_0x52c1dc){return![];}}const DataManager={'saveLocally'(){const _0x1653c9=a3_0x873536;try{localStorage['setItem'](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x1653c9(0x174)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x1653c9(0x174)](KEY_SETTINGS,JSON[_0x1653c9(0x1d4)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x3b8650){}},'loadLocal'(){const _0x199eb3=a3_0x873536;try{const _0x561098=localStorage[_0x199eb3(0x1ba)](KEY_SESSIONS);if(_0x561098)sessions=JSON['parse'](_0x561098);const _0xf52fbd=localStorage[_0x199eb3(0x1ba)](KEY_CLIENTS);if(_0xf52fbd)clients=JSON[_0x199eb3(0x1cf)](_0xf52fbd);const _0x48883b=localStorage[_0x199eb3(0x1ba)](KEY_SETTINGS);if(_0x48883b){const _0x1258de=JSON[_0x199eb3(0x1cf)](_0x48883b);if(_0x1258de[_0x199eb3(0x181)])availabilityPattern=_0x1258de[_0x199eb3(0x181)];if(_0x1258de[_0x199eb3(0x16c)])specialRanges=_0x1258de['ranges'];if(_0x1258de['exceptions'])dateExceptions=_0x1258de[_0x199eb3(0x1c8)];}}catch(_0x36c20f){}},async 'syncLoad'(){const _0x36fdb4=a3_0x873536,_0x3a282e=new Date(),_0x443d47=_0x3a282e[_0x36fdb4(0x18e)]()+'-'+String(_0x3a282e['getMonth']()+0x1)[_0x36fdb4(0x130)](0x2,'0'),_0x194e16=new Date(_0x3a282e);_0x194e16['setMonth'](_0x3a282e[_0x36fdb4(0x155)]()+0x1);const _0xaf1099=_0x194e16[_0x36fdb4(0x18e)]()+'-'+String(_0x194e16['getMonth']()+0x1)['padStart'](0x2,'0'),_0x425952=Date[_0x36fdb4(0x11b)]();try{const _0x1c81b1=window['Telegram']?.['WebApp'],_0x28ed4c=_0x1c81b1?.[_0x36fdb4(0x15e)]||'',[_0x39e2d9,_0x175030]=await Promise[_0x36fdb4(0x198)]([fetch(API_URL,{'method':_0x36fdb4(0x1cd),'body':JSON[_0x36fdb4(0x1d4)]({'action':'client_load','init_data':_0x28ed4c,'month_str':_0x443d47})})[_0x36fdb4(0x17b)](_0x599da8=>_0x599da8[_0x36fdb4(0xea)]()),fetch(API_URL,{'method':'POST','body':JSON[_0x36fdb4(0x1d4)]({'action':'client_load','init_data':_0x28ed4c,'month_str':_0xaf1099})})[_0x36fdb4(0x17b)](_0x1ae493=>_0x1ae493['json']())]);if(lastUserActionTime>_0x425952){console[_0x36fdb4(0x13f)](_0x36fdb4(0x115));return;}if(_0x39e2d9['ok'])this[_0x36fdb4(0x1d3)](_0x39e2d9[_0x36fdb4(0x106)],_0x443d47);if(_0x175030['ok'])this[_0x36fdb4(0x1d3)](_0x175030[_0x36fdb4(0x106)],_0xaf1099);this[_0x36fdb4(0x127)]();}catch(_0x335e66){}},'applyData'(_0x5e6213,_0x4699d1){const _0x5cb41a=a3_0x873536;if(!_0x5e6213)return;if(_0x5e6213[_0x5cb41a(0x17f)]){if(_0x5e6213[_0x5cb41a(0x17f)][_0x5cb41a(0x181)])availabilityPattern=_0x5e6213[_0x5cb41a(0x17f)]['pattern'];if(_0x5e6213[_0x5cb41a(0x17f)]['ranges'])specialRanges=_0x5e6213[_0x5cb41a(0x17f)]['ranges'];if(_0x5e6213[_0x5cb41a(0x17f)]['exceptions'])dateExceptions=_0x5e6213[_0x5cb41a(0x17f)]['exceptions'];}if(_0x5e6213['clients']&&Array[_0x5cb41a(0x11d)](_0x5e6213[_0x5cb41a(0x10c)]))clients=_0x5e6213['clients'];_0x5e6213[_0x5cb41a(0x17c)]&&(coachProfiles={...coachProfiles,..._0x5e6213[_0x5cb41a(0x17c)]}),_0x5e6213[_0x5cb41a(0x168)]&&(sessions=sessions['filter'](_0x3a2a38=>!_0x3a2a38['dateStr'][_0x5cb41a(0x18f)](_0x4699d1)),Object[_0x5cb41a(0xf1)](_0x5e6213[_0x5cb41a(0x168)])['forEach'](_0x3d0e89=>{const _0x283f8d=_0x5cb41a,_0x1c157f=_0x5e6213[_0x283f8d(0x168)][_0x3d0e89];_0x1c157f[_0x283f8d(0x102)](_0x47433a=>{const _0x11b9bd=_0x283f8d;sessions[_0x11b9bd(0x148)]({'id':_0x47433a['i'],'clientId':_0x47433a['c'],'coachId':_0x47433a['cid'],'dateStr':_0x4699d1+'-'+_0x3d0e89[_0x11b9bd(0x130)](0x2,'0'),'start':_0x47433a['s'],'end':_0x47433a['e'],'note':_0x47433a['n']||'','status':_0x47433a['st']||_0x11b9bd(0x166),'seriesId':_0x47433a['sid']});});})),reRenderBlocks();}};function init(){const _0x4960ce=a3_0x873536;DataManager[_0x4960ce(0xde)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x4960ce(0x16b)](_0x4960ce(0x1c6))['addEventListener']('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x11658c=a3_0x873536,_0x4cc51d=document[_0x11658c(0x16b)](_0x11658c(0x182)),_0x4cd3a2=document['getElementById'](_0x11658c(0x128));_0x4cc51d[_0x11658c(0x193)]='',_0x4cc51d['appendChild'](_0x4cd3a2);for(let _0x7de96b=0x0;_0x7de96b<0x18;_0x7de96b++){const _0x185736=document[_0x11658c(0x190)](_0x11658c(0xfd));_0x185736['className']=_0x11658c(0x109);if(_0x7de96b>0x0)_0x185736[_0x11658c(0x193)]=_0x11658c(0x1c9)+String(_0x7de96b)[_0x11658c(0x130)](0x2,'0')+_0x11658c(0x1a6);_0x4cc51d[_0x11658c(0xf5)](_0x185736);}}function renderDayRange(_0x4f4e2f,_0x3fa499){const _0x4e97f5=a3_0x873536,_0x34616c=document[_0x4e97f5(0x16b)]('daysHeaderTrack'),_0x56f98e=document[_0x4e97f5(0x16b)](_0x4e97f5(0x1a9)),_0x3e2649=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4709bd=new Date();_0x4709bd[_0x4e97f5(0xf0)](0x0,0x0,0x0,0x0);const _0x1afed9=getLocalDateStr(new Date());for(let _0x2b2092=_0x4f4e2f;_0x2b2092<=_0x3fa499;_0x2b2092++){const _0x374975=new Date(_0x4709bd);_0x374975[_0x4e97f5(0x13e)](_0x374975[_0x4e97f5(0x13b)]()+_0x2b2092);const _0x5eb656=getLocalDateStr(_0x374975);let _0x104c96=_0x374975[_0x4e97f5(0x185)]()-0x1;if(_0x104c96===-0x1)_0x104c96=0x6;const _0x49ead3=_0x5eb656===_0x1afed9,_0xfff7cc=document[_0x4e97f5(0x190)](_0x4e97f5(0xfd));_0xfff7cc['className']=_0x4e97f5(0xfa)+(_0x49ead3?_0x4e97f5(0x123):''),_0xfff7cc['setAttribute'](_0x4e97f5(0x15a),_0x5eb656),_0xfff7cc[_0x4e97f5(0x193)]=_0x4e97f5(0x188)+_0x3e2649[_0x104c96]+_0x4e97f5(0x17e)+_0x374975[_0x4e97f5(0x13b)]()+_0x4e97f5(0x142),_0x34616c[_0x4e97f5(0xf5)](_0xfff7cc);const _0x23ed9b=document['createElement'](_0x4e97f5(0xfd));_0x23ed9b['className']=_0x4e97f5(0x145)+(_0x49ead3?_0x4e97f5(0x123):''),_0x23ed9b[_0x4e97f5(0x199)](_0x4e97f5(0x15a),_0x5eb656),_0x23ed9b[_0x4e97f5(0x199)](_0x4e97f5(0x173),_0x104c96),_0x56f98e[_0x4e97f5(0xf5)](_0x23ed9b);}}function reRenderBlocks(){const _0x3bf8b0=a3_0x873536;document[_0x3bf8b0(0x11a)]('.day-column')[_0x3bf8b0(0x102)](_0x49fbed=>{const _0x555498=_0x3bf8b0;_0x49fbed[_0x555498(0x11a)](_0x555498(0x1af))['forEach'](_0x264fbb=>_0x264fbb['remove']());const _0x517115=_0x49fbed[_0x555498(0x159)](_0x555498(0x15a)),_0xf89117=parseInt(_0x49fbed[_0x555498(0x159)]('data-day-idx')),_0x194bd2=Math[_0x555498(0x14e)](_0x49fbed[_0x555498(0x177)]);(availabilityPattern[_0xf89117]||[])[_0x555498(0x102)](_0x5e5637=>{const _0x3ac148=_0x555498,_0x1a3f6f=document['createElement']('div');_0x1a3f6f['className']=_0x3ac148(0x1a8),_0x1a3f6f[_0x3ac148(0xf9)][_0x3ac148(0x133)]=_0x5e5637*GRID_H+'px',_0x1a3f6f[_0x3ac148(0xf9)]['backgroundPosition']='-'+_0x194bd2+_0x3ac148(0x1a1)+_0x5e5637*GRID_H+'px',_0x49fbed[_0x3ac148(0xf5)](_0x1a3f6f);});if(specialRanges[_0x555498(0x132)]>0x0){const _0x45b12a=new Date(_0x517115+_0x555498(0x19e))[_0x555498(0x13a)](),_0x4400a1=new Date(_0x517115+_0x555498(0x178))[_0x555498(0x13a)]();specialRanges['forEach'](_0x143a38=>{const _0x243491=_0x555498,_0x291243=new Date(_0x143a38[_0x243491(0x16a)])[_0x243491(0x13a)](),_0x29152d=new Date(_0x143a38['end'])['getTime'](),_0x2975b6=Math['max'](_0x45b12a,_0x291243),_0x192835=Math[_0x243491(0x105)](_0x4400a1,_0x29152d);if(_0x2975b6<_0x192835){const _0x5c4ff8=(_0x2975b6-_0x45b12a)/0x36ee80*GRID_H,_0x9c08c2=(_0x192835-_0x2975b6)/0x36ee80*GRID_H,_0x5e6ef4=document[_0x243491(0x190)](_0x243491(0xfd));_0x9c08c2>=23.5*GRID_H?(_0x5e6ef4['className']=_0x243491(0x164),_0x5e6ef4[_0x243491(0xf9)][_0x243491(0x1b5)]='-'+_0x194bd2+_0x243491(0x17d)):(_0x5e6ef4['className']='blocked-range-part\x20stripe-bg',_0x5e6ef4[_0x243491(0xf9)][_0x243491(0x133)]=_0x5c4ff8+'px',_0x5e6ef4[_0x243491(0xf9)][_0x243491(0x1b6)]=_0x9c08c2+'px',_0x5e6ef4[_0x243491(0xf9)][_0x243491(0x1b5)]='-'+_0x194bd2+_0x243491(0x1a1)+_0x5c4ff8+'px'),_0x49fbed['appendChild'](_0x5e6ef4);}});}renderEventsForColumn(_0x49fbed,_0x517115);});}function renderEventsForColumn(_0x337e24,_0x196b32){const _0x3827c3=a3_0x873536,_0x454e4e=sessions[_0x3827c3(0x103)](_0x43a85e=>_0x43a85e[_0x3827c3(0x1c5)]===_0x196b32),_0x72e604=_0x454e4e[_0x3827c3(0x1c2)](_0x584660=>{const _0x55f107=_0x3827c3,[_0x56dc64,_0x3d389e]=_0x584660['start']['split'](':')[_0x55f107(0x1c2)](Number),[_0x2d6935,_0x4347ce]=_0x584660[_0x55f107(0x19a)][_0x55f107(0x1a3)](':')[_0x55f107(0x1c2)](Number);return{'data':_0x584660,'start':_0x56dc64*0x3c+_0x3d389e,'end':_0x2d6935*0x3c+_0x4347ce,'colIndex':0x0};});_0x72e604[_0x3827c3(0x171)]((_0xfe3a27,_0x155a19)=>_0xfe3a27[_0x3827c3(0x16a)]-_0x155a19[_0x3827c3(0x16a)]||_0x155a19[_0x3827c3(0x19a)]-_0x155a19['start']-(_0xfe3a27[_0x3827c3(0x19a)]-_0xfe3a27[_0x3827c3(0x16a)]));const _0x4070b0=[];_0x72e604[_0x3827c3(0x102)](_0x1ac058=>{const _0x3caee2=_0x3827c3;let _0x20f3c1=![];for(let _0x2f4534=0x0;_0x2f4534<_0x4070b0['length'];_0x2f4534++){const _0x463ef8=_0x4070b0[_0x2f4534];if(_0x1ac058[_0x3caee2(0x16a)]>=_0x463ef8[_0x463ef8[_0x3caee2(0x132)]-0x1][_0x3caee2(0x19a)]){_0x463ef8[_0x3caee2(0x148)](_0x1ac058),_0x1ac058[_0x3caee2(0x153)]=_0x2f4534,_0x20f3c1=!![];break;}}!_0x20f3c1&&(_0x4070b0[_0x3caee2(0x148)]([_0x1ac058]),_0x1ac058[_0x3caee2(0x153)]=_0x4070b0[_0x3caee2(0x132)]-0x1);}),_0x72e604[_0x3827c3(0x102)](_0x3349ea=>{const _0x401618=_0x3827c3;let _0x1cbb1f=0x0;_0x72e604['forEach'](_0x47f6d4=>{const _0x2c69c1=a3_0x11f1;if(Math[_0x2c69c1(0xe0)](_0x3349ea[_0x2c69c1(0x16a)],_0x47f6d4['start'])<Math[_0x2c69c1(0x105)](_0x3349ea[_0x2c69c1(0x19a)],_0x47f6d4[_0x2c69c1(0x19a)])&&_0x47f6d4[_0x2c69c1(0x153)]>_0x1cbb1f)_0x1cbb1f=_0x47f6d4[_0x2c69c1(0x153)];});const _0x193b3f=_0x1cbb1f+0x1,_0x635416=0x64/_0x193b3f,_0x2002a0=_0x3349ea['colIndex']*_0x635416,_0x3f757b=document[_0x401618(0x190)]('div'),_0x19bf63=_0x3349ea[_0x401618(0x106)];let _0x41d49a=_0x401618(0x17a);if(clients&&clients[_0x401618(0x132)]>0x0){const _0x35308a=clients[_0x401618(0x19b)](_0x1af331=>String(_0x1af331['id'])===String(_0x19bf63['clientId']));if(_0x35308a&&_0x35308a[_0x401618(0x1b7)])_0x41d49a=_0x35308a[_0x401618(0x1b7)];}const _0x19b841=_0x19bf63[_0x401618(0x11e)]===_0x401618(0x184),_0x23e213=_0x19b841?0x1:0.45;_0x3f757b['className']=_0x401618(0x19f)+(_0x19b841?_0x401618(0x18b):''),_0x3f757b['style'][_0x401618(0x101)]=hexToRgba(_0x41d49a,_0x23e213),_0x3f757b[_0x401618(0xf9)][_0x401618(0x12f)]=_0x41d49a;const _0x16e967=_0x3349ea[_0x401618(0x16a)]/0x3c*GRID_H,_0x8313b8=(_0x3349ea[_0x401618(0x19a)]-_0x3349ea['start'])/0x3c*GRID_H;_0x3f757b[_0x401618(0xf9)][_0x401618(0x133)]=_0x16e967+'px',_0x3f757b[_0x401618(0xf9)][_0x401618(0x1b6)]=Math['max'](_0x8313b8,0x14)+'px',_0x3f757b[_0x401618(0xf9)][_0x401618(0x162)]=_0x401618(0x122)+_0x635416+_0x401618(0x1a7),_0x3f757b[_0x401618(0xf9)][_0x401618(0x125)]=_0x401618(0x122)+_0x2002a0+_0x401618(0xfb),_0x3f757b[_0x401618(0xf9)]['zIndex']=0xa+_0x3349ea[_0x401618(0x153)];if(_0x635416<0x55)_0x3f757b[_0x401618(0x14b)]['add'](_0x401618(0xe6));let _0x347ce7='';if(_0x19bf63['seriesId'])_0x347ce7+='<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>';if(_0x19b841)_0x347ce7+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x3f757b[_0x401618(0x193)]=_0x401618(0xee)+_0x19bf63[_0x401618(0x16a)]+_0x401618(0x112)+_0x19bf63[_0x401618(0x19a)]+_0x401618(0x1a4)+_0x347ce7+_0x401618(0x187),_0x3f757b[_0x401618(0xe4)]=_0x4f7a72=>{const _0x5b5d62=_0x401618;_0x4f7a72[_0x5b5d62(0x160)](),openDetails(_0x19bf63);},_0x337e24[_0x401618(0xf5)](_0x3f757b);});}function openAnalytics(){const _0x689592=a3_0x873536,_0x29b1a1=document[_0x689592(0x152)](_0x689592(0xf2));setAnalyticsPeriod(_0x689592(0x194),_0x29b1a1),openSheet(_0x689592(0x100));}function setAnalyticsPeriod(_0x316226,_0x2eeb18){const _0x597140=a3_0x873536;currentAnPeriod=_0x316226,document[_0x597140(0x11a)](_0x597140(0xf2))['forEach'](_0x94f717=>_0x94f717[_0x597140(0x14b)][_0x597140(0x1aa)](_0x597140(0x157)));if(_0x2eeb18)_0x2eeb18[_0x597140(0x14b)][_0x597140(0x1d1)]('active');const _0x57d286=document['getElementById'](_0x597140(0x150));_0x57d286[_0x597140(0xf9)][_0x597140(0x1bf)]=_0x316226===_0x597140(0x131)?_0x597140(0x1ac):_0x597140(0x16d);const _0x3065e8=new Date();let _0x1c2088=new Date(),_0x2fb90f=new Date();if(_0x316226===_0x597140(0x194))_0x1c2088=getStartOfWeek(_0x3065e8),_0x2fb90f=new Date(_0x1c2088),_0x2fb90f[_0x597140(0x13e)](_0x2fb90f[_0x597140(0x13b)]()+0x6);else{if(_0x316226===_0x597140(0x149))_0x1c2088=new Date(_0x3065e8[_0x597140(0x18e)](),_0x3065e8[_0x597140(0x155)](),0x1),_0x2fb90f=new Date(_0x3065e8[_0x597140(0x18e)](),_0x3065e8[_0x597140(0x155)]()+0x1,0x0);else{!document[_0x597140(0x16b)](_0x597140(0xec))[_0x597140(0x154)]&&(document[_0x597140(0x16b)]('anStart')[_0x597140(0x154)]=getLocalDateStr(_0x3065e8),document['getElementById'](_0x597140(0x1a2))[_0x597140(0x154)]=getLocalDateStr(_0x3065e8));refreshAnalytics();return;}}document[_0x597140(0x16b)]('anStart')['value']=getLocalDateStr(_0x1c2088),document[_0x597140(0x16b)]('anEnd')[_0x597140(0x154)]=getLocalDateStr(_0x2fb90f),refreshAnalytics();}function refreshAnalytics(){const _0x4c55a3=a3_0x873536,_0x246df8=document[_0x4c55a3(0x16b)]('anStart')[_0x4c55a3(0x154)],_0x44470c=document['getElementById'](_0x4c55a3(0x1a2))[_0x4c55a3(0x154)];if(!_0x246df8||!_0x44470c)return;const _0x3b61cb=sessions[_0x4c55a3(0x103)](_0x30e70b=>_0x30e70b['dateStr']>=_0x246df8&&_0x30e70b[_0x4c55a3(0x1c5)]<=_0x44470c&&_0x30e70b[_0x4c55a3(0x11e)]!=='cancelled'),_0x295aa3=_0x3b61cb[_0x4c55a3(0x132)],_0x39d6d8=_0x3b61cb[_0x4c55a3(0x103)](_0x5dc146=>_0x5dc146[_0x4c55a3(0x11e)]===_0x4c55a3(0x184))[_0x4c55a3(0x132)],_0x2a4e36=_0x295aa3>0x0?Math['round'](_0x39d6d8/_0x295aa3*0x64):0x0;document['getElementById'](_0x4c55a3(0xe8))[_0x4c55a3(0x14a)]=_0x2a4e36+'%',document[_0x4c55a3(0x16b)]('anTotalStats')[_0x4c55a3(0x14a)]=_0x39d6d8+_0x4c55a3(0x113)+_0x295aa3+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x110eed=document[_0x4c55a3(0x16b)](_0x4c55a3(0x120)),_0x417aa5=0x2*Math['PI']*0x23,_0x3d5ce6=_0x417aa5-_0x2a4e36/0x64*_0x417aa5;_0x110eed[_0x4c55a3(0xf9)]['strokeDashoffset']=_0x3d5ce6;const _0x29fb09={};_0x3b61cb['forEach'](_0x9052aa=>{const _0x10ec06=_0x4c55a3,_0x1bb95e=_0x9052aa[_0x10ec06(0x16e)]||_0x10ec06(0x18d);if(!_0x29fb09[_0x1bb95e]){const _0x213e58='#'+_0x1bb95e[_0x10ec06(0xe3)]()[_0x10ec06(0x169)](0x0,0x6);_0x29fb09[_0x1bb95e]={'total':0x0,'done':0x0,'color':_0x213e58};}_0x29fb09[_0x1bb95e][_0x10ec06(0x179)]++;if(_0x9052aa['status']===_0x10ec06(0x184))_0x29fb09[_0x1bb95e][_0x10ec06(0x19d)]++;});const _0x54f196=document[_0x4c55a3(0x16b)](_0x4c55a3(0xf3));_0x54f196[_0x4c55a3(0x193)]='';const _0x3277c1=Object['entries'](_0x29fb09)[_0x4c55a3(0x171)]((_0x47866d,_0x34af98)=>_0x34af98[0x1][_0x4c55a3(0x179)]-_0x47866d[0x1][_0x4c55a3(0x179)]);if(_0x3277c1[_0x4c55a3(0x132)]===0x0){_0x54f196[_0x4c55a3(0x193)]=_0x4c55a3(0x117);return;}_0x3277c1[_0x4c55a3(0x102)](([_0x15f543,_0xd12c1d])=>{const _0x25db22=_0x4c55a3,_0x1f6d55=Math[_0x25db22(0x14e)](_0xd12c1d['done']/_0xd12c1d[_0x25db22(0x179)]*0x64),_0x54ceb3=document[_0x25db22(0x190)]('div');_0x54ceb3['className']=_0x25db22(0x119),_0x54ceb3[_0x25db22(0xf9)][_0x25db22(0x12f)]=_0xd12c1d['color'],_0x54ceb3[_0x25db22(0x193)]=_0x25db22(0x141)+_0x15f543['substr'](0x0,0x5)+_0x25db22(0x143)+_0xd12c1d['done']+_0x25db22(0xef)+_0xd12c1d['total']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x1f6d55+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x54f196[_0x25db22(0xf5)](_0x54ceb3);});}function openDetails(_0x3908e9){const _0x3ba358=a3_0x873536;currentSession=_0x3908e9;const _0x5c6672=new Date(_0x3908e9[_0x3ba358(0x1c5)]),_0x48df6f=_0x5c6672[_0x3ba358(0x15f)](_0x3ba358(0x1bc),{'weekday':'long','day':'numeric','month':'long'});document[_0x3ba358(0x16b)](_0x3ba358(0x196))[_0x3ba358(0x14a)]=_0x48df6f['charAt'](0x0)[_0x3ba358(0x165)]()+_0x48df6f['slice'](0x1),document[_0x3ba358(0x16b)](_0x3ba358(0x1c3))[_0x3ba358(0x14a)]=_0x3908e9['start']+'\x20-\x20'+_0x3908e9[_0x3ba358(0x19a)],document[_0x3ba358(0x16b)]('detNote')[_0x3ba358(0x14a)]=_0x3908e9[_0x3ba358(0x16f)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x2b9852=document[_0x3ba358(0x16b)](_0x3ba358(0x110)),_0x1e7c7a=document[_0x3ba358(0x16b)](_0x3ba358(0xe5)),_0xb67e51=_0x1e7c7a[_0x3ba358(0x152)](_0x3ba358(0xf6)),_0x20c899=_0x1e7c7a[_0x3ba358(0x152)](_0x3ba358(0x1d2)),_0x2f09f7=document[_0x3ba358(0x16b)](_0x3ba358(0x144));if(_0x3908e9[_0x3ba358(0x11e)]===_0x3ba358(0x184))_0x2b9852[_0x3ba358(0x14a)]=_0x3ba358(0x1ca),_0x2b9852[_0x3ba358(0xf9)][_0x3ba358(0x1b7)]=_0x3ba358(0x116),_0x1e7c7a[_0x3ba358(0xf9)]['display']=_0x3ba358(0x16d);else{_0x2b9852[_0x3ba358(0x14a)]=_0x3ba358(0x147),_0x2b9852['style']['color']='var(--acc-blue)',_0x1e7c7a[_0x3ba358(0xf9)][_0x3ba358(0x1bf)]=_0x3ba358(0x1d6);const _0x57a5ce=new Date(_0x3908e9[_0x3ba358(0x1c5)]+'T'+_0x3908e9['start']),_0x24d909=new Date(),_0x299dab=(_0x57a5ce-_0x24d909)/(0x3e8*0x3c*0x3c),_0x56a833=coachProfiles[_0x3908e9['coachId']]&&coachProfiles[_0x3908e9[_0x3ba358(0x16e)]][_0x3ba358(0x19c)]?parseInt(coachProfiles[_0x3908e9[_0x3ba358(0x16e)]][_0x3ba358(0x19c)]):0x18;if(_0x56a833===0x0||_0x299dab>=_0x56a833)_0xb67e51[_0x3ba358(0xf9)]['display']=_0x3ba358(0x1d6),_0x20c899['style']['display']=_0x3ba358(0x1d6),_0x2f09f7[_0x3ba358(0xf9)][_0x3ba358(0x1bf)]='none';else{_0xb67e51[_0x3ba358(0xf9)]['display']=_0x3ba358(0x16d),_0x20c899[_0x3ba358(0xf9)]['display']=_0x3ba358(0x16d),_0x2f09f7[_0x3ba358(0xf9)]['display']='block';let _0x4aa0b9=_0x56a833===0x0?_0x3ba358(0xf7):_0x3ba358(0x172)+_0x56a833+_0x3ba358(0x1c4);_0x2f09f7['textContent']=_0x3ba358(0x10e)+_0x4aa0b9+_0x3ba358(0x1a5);}}document['getElementById'](_0x3ba358(0x191))[_0x3ba358(0x14b)][_0x3ba358(0x1d1)](_0x3ba358(0x157)),document['getElementById']('detailsSheet')[_0x3ba358(0x14b)]['add'](_0x3ba358(0x186));}function closeAllSheets(){const _0x37e6ce=a3_0x873536;document[_0x37e6ce(0x16b)](_0x37e6ce(0x191))[_0x37e6ce(0x14b)][_0x37e6ce(0x1aa)](_0x37e6ce(0x157)),document['querySelectorAll'](_0x37e6ce(0x146))[_0x37e6ce(0x102)](_0xaa9bbb=>_0xaa9bbb['classList'][_0x37e6ce(0x1aa)](_0x37e6ce(0x186)));}function openSheet(_0x41eafd){const _0x35bfb1=a3_0x873536;document[_0x35bfb1(0x16b)](_0x35bfb1(0x191))[_0x35bfb1(0x14b)][_0x35bfb1(0x1d1)](_0x35bfb1(0x157)),document[_0x35bfb1(0x16b)](_0x41eafd)[_0x35bfb1(0x14b)]['add'](_0x35bfb1(0x186));}function getLocalDateStr(_0x174178){const _0x40b5bb=a3_0x873536,_0x3a4e9b=_0x174178[_0x40b5bb(0x18e)](),_0x10bb4d=String(_0x174178[_0x40b5bb(0x155)]()+0x1)['padStart'](0x2,'0'),_0x137cb0=String(_0x174178[_0x40b5bb(0x13b)]())['padStart'](0x2,'0');return _0x3a4e9b+'-'+_0x10bb4d+'-'+_0x137cb0;}function getStartOfWeek(_0x1afd36){const _0xfd5dc6=a3_0x873536,_0x52bc23=new Date(_0x1afd36),_0x4f9239=_0x52bc23[_0xfd5dc6(0x185)](),_0xd31227=_0x52bc23[_0xfd5dc6(0x13b)]()-_0x4f9239+(_0x4f9239===0x0?-0x6:0x1);return _0x52bc23[_0xfd5dc6(0x13e)](_0xd31227),_0x52bc23[_0xfd5dc6(0xf0)](0x0,0x0,0x0,0x0),_0x52bc23;}function a3_0x11f1(_0x2d33e0,_0x48b8a6){_0x2d33e0=_0x2d33e0-0xde;const _0x8dd34f=a3_0x3efb();let _0x1f3d14=_0x8dd34f[_0x2d33e0];return _0x1f3d14;}function scrollToToday(){const _0x58977e=getLocalDateStr(new Date());setTimeout(()=>{const _0x59ab71=a3_0x11f1,_0x30c194=document[_0x59ab71(0x152)](_0x59ab71(0x13c)+_0x58977e+'\x22]');if(_0x30c194){const _0x458e03=document['getElementById'](_0x59ab71(0x1c6)),_0x3f8a3b=_0x30c194[_0x59ab71(0x177)]-_0x458e03[_0x59ab71(0x14d)]/0x2+_0x30c194[_0x59ab71(0x158)]/0x2;_0x458e03[_0x59ab71(0xf8)]({'left':_0x3f8a3b,'behavior':_0x59ab71(0x1b8)}),_0x458e03['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x36435c=a3_0x873536,_0x18530a=new Date(),_0x1be40a=document[_0x36435c(0x16b)](_0x36435c(0x126)),_0x33fb70=document[_0x36435c(0x16b)](_0x36435c(0x128)),_0x37d163=(_0x18530a[_0x36435c(0xfe)]()*0x3c+_0x18530a[_0x36435c(0x1c0)]())/0x3c*GRID_H;_0x1be40a[_0x36435c(0xf9)][_0x36435c(0x133)]=_0x37d163+'px',_0x1be40a[_0x36435c(0xf9)][_0x36435c(0x1bf)]='block',_0x33fb70[_0x36435c(0xf9)][_0x36435c(0x133)]=_0x37d163+'px',_0x33fb70[_0x36435c(0xf9)][_0x36435c(0x1bf)]='block',_0x33fb70[_0x36435c(0x14a)]=String(_0x18530a[_0x36435c(0xfe)]())['padStart'](0x2,'0')+':'+String(_0x18530a[_0x36435c(0x1c0)]())['padStart'](0x2,'0');}function onScroll(){const _0x389f84=a3_0x873536,_0x4bc636=document[_0x389f84(0x16b)](_0x389f84(0x1c6)),_0x2b6880=document[_0x389f84(0x11a)](_0x389f84(0xe2));for(let _0x2f4a67 of _0x2b6880)if(_0x2f4a67[_0x389f84(0x177)]>=_0x4bc636['scrollLeft']){const _0x50d0fd=new Date(_0x2f4a67[_0x389f84(0x159)](_0x389f84(0x15a)));document[_0x389f84(0x16b)](_0x389f84(0x167))['textContent']=_0x50d0fd['toLocaleString']('ru',{'month':_0x389f84(0x163)})['toUpperCase']()+'\x20'+_0x50d0fd[_0x389f84(0x18e)]();break;}}function showToast(_0x499ead){const _0x1f7beb=a3_0x873536,_0x547699=document[_0x1f7beb(0x16b)]('toast');_0x547699['textContent']=_0x499ead,_0x547699[_0x1f7beb(0x14b)][_0x1f7beb(0x1d1)]('show'),setTimeout(()=>_0x547699['classList']['remove']('show'),0x7d0);}function handleInfiniteScroll(){const _0x2c8602=a3_0x873536,_0x47e885=document[_0x2c8602(0x16b)](_0x2c8602(0x1c6)),_0x29725f=_0x47e885[_0x2c8602(0x170)],_0x34b229=_0x47e885['scrollWidth'],_0x28741b=_0x47e885['clientWidth'];if(_0x34b229-(_0x29725f+_0x28741b)<0x12c){const _0x4f4dff=endOffset;endOffset+=0xe,renderDayRange(_0x4f4dff+0x1,endOffset),reRenderBlocks();}if(_0x29725f<0x12c){const _0x31c23e=startOffset;startOffset-=0xe,prependDays(startOffset,_0x31c23e-0x1),_0x47e885[_0x2c8602(0x170)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x251b58,_0x4a92ae){const _0x401a24=a3_0x873536,_0x3ac6a3=document['getElementById'](_0x401a24(0x138)),_0xdf940c=document[_0x401a24(0x16b)](_0x401a24(0x1a9)),_0xd72d55=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x3c66f1=new Date();_0x3c66f1[_0x401a24(0xf0)](0x0,0x0,0x0,0x0);const _0x3c3762=getLocalDateStr(new Date()),_0x2a9fe2=document[_0x401a24(0x121)](),_0x14ec9a=document[_0x401a24(0x121)]();for(let _0x1cb69b=_0x251b58;_0x1cb69b<=_0x4a92ae;_0x1cb69b++){const _0x5b8ab7=new Date(_0x3c66f1);_0x5b8ab7['setDate'](_0x5b8ab7[_0x401a24(0x13b)]()+_0x1cb69b);const _0x1f0f03=getLocalDateStr(_0x5b8ab7);let _0x3ddc3d=_0x5b8ab7[_0x401a24(0x185)]()-0x1;if(_0x3ddc3d===-0x1)_0x3ddc3d=0x6;const _0x1df2c5=_0x1f0f03===_0x3c3762,_0x36be08=document[_0x401a24(0x190)](_0x401a24(0xfd));_0x36be08['className']='day-col-header\x20'+(_0x1df2c5?'today':''),_0x36be08['setAttribute'](_0x401a24(0x15a),_0x1f0f03),_0x36be08[_0x401a24(0x193)]=_0x401a24(0x188)+_0xd72d55[_0x3ddc3d]+_0x401a24(0x17e)+_0x5b8ab7['getDate']()+_0x401a24(0x142),_0x2a9fe2[_0x401a24(0xf5)](_0x36be08);const _0x23c280=document[_0x401a24(0x190)]('div');_0x23c280['className']=_0x401a24(0x145)+(_0x1df2c5?_0x401a24(0x123):''),_0x23c280[_0x401a24(0x199)](_0x401a24(0x15a),_0x1f0f03),_0x23c280[_0x401a24(0x199)](_0x401a24(0x173),_0x3ddc3d),_0x14ec9a[_0x401a24(0xf5)](_0x23c280);}_0x3ac6a3[_0x401a24(0x1ab)](_0x2a9fe2,_0x3ac6a3[_0x401a24(0x1ae)]),_0xdf940c['insertBefore'](_0x14ec9a,_0xdf940c['querySelector'](_0x401a24(0x14c)));}function hexToRgba(_0x371d61,_0xb8d740){const _0x2382d1=a3_0x873536;let _0x586abe;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x2382d1(0x192)](_0x371d61))return _0x586abe=_0x371d61[_0x2382d1(0x195)](0x1)[_0x2382d1(0x1a3)](''),_0x586abe[_0x2382d1(0x132)]==0x3&&(_0x586abe=[_0x586abe[0x0],_0x586abe[0x0],_0x586abe[0x1],_0x586abe[0x1],_0x586abe[0x2],_0x586abe[0x2]]),_0x586abe='0x'+_0x586abe[_0x2382d1(0x15d)](''),'rgba('+[_0x586abe>>0x10&0xff,_0x586abe>>0x8&0xff,_0x586abe&0xff][_0x2382d1(0x15d)](',')+','+_0xb8d740+')';return'rgba(10,\x20132,\x20255,\x20'+_0xb8d740+')';}let confirmResolver=null;function showCustomConfirm(_0x13d70e,_0x5e6cf3,_0x20d118=!![]){const _0x43ca81=a3_0x873536;document[_0x43ca81(0x16b)]('ccTitle')['textContent']=_0x13d70e,document[_0x43ca81(0x16b)]('ccText')[_0x43ca81(0x14a)]=_0x5e6cf3;const _0x2f0cd4=document[_0x43ca81(0x16b)](_0x43ca81(0xe1));return _0x20d118?(_0x2f0cd4[_0x43ca81(0xf9)][_0x43ca81(0x1b7)]=_0x43ca81(0x12e),_0x2f0cd4[_0x43ca81(0xf9)][_0x43ca81(0x151)]=_0x43ca81(0x134)):(_0x2f0cd4['style'][_0x43ca81(0x1b7)]=_0x43ca81(0x17a),_0x2f0cd4[_0x43ca81(0xf9)][_0x43ca81(0x151)]=_0x43ca81(0x134)),new Promise(_0x41e1dd=>{const _0x339c82=_0x43ca81;confirmResolver=_0x41e1dd,document[_0x339c82(0x16b)](_0x339c82(0x10a))['classList']['add'](_0x339c82(0x12a));});}function resolveCustomConfirm(_0x36fe48){const _0x400fe9=a3_0x873536;document[_0x400fe9(0x16b)](_0x400fe9(0x10a))[_0x400fe9(0x14b)][_0x400fe9(0x1aa)](_0x400fe9(0x12a));if(confirmResolver)confirmResolver(_0x36fe48);}async function tryCancelCurrentSession(){const _0x3ab665=a3_0x873536;if(!currentSession)return;const _0x979316=await showCustomConfirm(_0x3ab665(0x156),_0x3ab665(0x175),!![]);if(!_0x979316)return;const _0x428753=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x5a068d=>_0x5a068d['id']!==_0x428753['id']),reRenderBlocks(),showToast(_0x3ab665(0x12d)),lastUserActionTime=Date[_0x3ab665(0x11b)]();try{const _0x3d6052=window[_0x3ab665(0x111)]?.[_0x3ab665(0x1d5)],_0x3228af=await fetch(API_URL,{'method':_0x3ab665(0x1cd),'body':JSON[_0x3ab665(0x1d4)]({'action':_0x3ab665(0x1b0),'init_data':_0x3d6052?.['initData']||'','coachId':_0x428753[_0x3ab665(0x16e)],'dateStr':_0x428753['dateStr'],'sessionId':_0x428753['id']})});if(_0x3228af['ok'])DataManager[_0x3ab665(0x127)]();}catch(_0x1d00e3){showToast(_0x3ab665(0x137));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x47ab3b=a3_0x873536;if(!currentSession)return;document[_0x47ab3b(0x16b)](_0x47ab3b(0x1cc))[_0x47ab3b(0x14b)][_0x47ab3b(0x1aa)](_0x47ab3b(0x186)),document[_0x47ab3b(0x16b)](_0x47ab3b(0x10d))[_0x47ab3b(0x14b)][_0x47ab3b(0x1d1)]('open');const _0x224c88=document[_0x47ab3b(0x16b)]('rsDatesTrack'),_0x4d1513=document[_0x47ab3b(0x16b)](_0x47ab3b(0x1bd));_0x224c88[_0x47ab3b(0x193)]='',_0x4d1513[_0x47ab3b(0x193)]=_0x47ab3b(0x108);const [_0x5a56b7,_0x38c093]=currentSession[_0x47ab3b(0x16a)][_0x47ab3b(0x1a3)](':')[_0x47ab3b(0x1c2)](Number),[_0x149386,_0x78bcd8]=currentSession[_0x47ab3b(0x19a)][_0x47ab3b(0x1a3)](':')[_0x47ab3b(0x1c2)](Number),_0x132559=_0x149386*0x3c+_0x78bcd8-(_0x5a56b7*0x3c+_0x38c093);try{const _0x3c38d3=window[_0x47ab3b(0x111)]?.[_0x47ab3b(0x1d5)],_0x4e4615=await fetch(API_URL,{'method':'POST','body':JSON[_0x47ab3b(0x1d4)]({'action':'get_slots','coachId':currentSession['coachId'],'duration':_0x132559,'init_data':_0x3c38d3?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x1a21da=await _0x4e4615[_0x47ab3b(0xea)]();_0x1a21da['ok']&&_0x1a21da[_0x47ab3b(0x106)]?(availableSlotsCache=_0x1a21da[_0x47ab3b(0x106)],renderRescheduleDates()):_0x4d1513['innerHTML']=_0x47ab3b(0xdf);}catch(_0x1c7106){_0x4d1513['innerHTML']=_0x47ab3b(0x11c);}}function renderRescheduleDates(){const _0xf9bc6c=a3_0x873536,_0x451025=document[_0xf9bc6c(0x16b)]('rsDatesTrack');_0x451025[_0xf9bc6c(0x193)]='';const _0x398ccc=Object[_0xf9bc6c(0xf1)](availableSlotsCache)[_0xf9bc6c(0x171)](),_0x10385f=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x398ccc[_0xf9bc6c(0x132)]===0x0){document[_0xf9bc6c(0x16b)]('rsSlotsGrid')[_0xf9bc6c(0x193)]=_0xf9bc6c(0x1ad);return;}_0x398ccc['forEach']((_0x3643e1,_0x30fbcd)=>{const _0x561b84=_0xf9bc6c,_0x1e064=new Date(_0x3643e1),_0x576b80=_0x10385f[_0x1e064[_0x561b84(0x185)]()],_0x58fefc=_0x1e064[_0x561b84(0x13b)](),_0x560f73=document[_0x561b84(0x190)]('div');_0x560f73[_0x561b84(0x14f)]=_0x561b84(0x189);if(_0x30fbcd===0x0)_0x560f73[_0x561b84(0x14b)][_0x561b84(0x1d1)]('active');_0x560f73[_0x561b84(0x193)]=_0x561b84(0x161)+_0x576b80+'</div><div\x20class=\x22rs-day-num\x22>'+_0x58fefc+'</div>',_0x560f73[_0x561b84(0xe4)]=()=>selectRsDate(_0x3643e1,_0x560f73),_0x451025['appendChild'](_0x560f73);}),selectRsDate(_0x398ccc[0x0],_0x451025[_0xf9bc6c(0x1ae)]);}function selectRsDate(_0x4ebc28,_0x3cc22a){const _0x3a9680=a3_0x873536;selectedRsDate=_0x4ebc28,document[_0x3a9680(0x11a)]('.rs-date-chip')[_0x3a9680(0x102)](_0x15f456=>_0x15f456['classList'][_0x3a9680(0x1aa)](_0x3a9680(0x157)));if(_0x3cc22a)_0x3cc22a['classList'][_0x3a9680(0x1d1)](_0x3a9680(0x157));const _0x437223=document[_0x3a9680(0x16b)](_0x3a9680(0x1bd));_0x437223[_0x3a9680(0x193)]='';const _0x5b52e0=availableSlotsCache[_0x4ebc28]||[];if(_0x5b52e0[_0x3a9680(0x132)]===0x0){_0x437223[_0x3a9680(0x193)]=_0x3a9680(0xdf);return;}_0x5b52e0[_0x3a9680(0x102)](_0x275fd4=>{const _0x14741d=_0x3a9680,_0x4192e6=document[_0x14741d(0x190)](_0x14741d(0x1a0));_0x4192e6[_0x14741d(0x14f)]=_0x14741d(0xe9),_0x4192e6[_0x14741d(0x14a)]=_0x275fd4,_0x4192e6[_0x14741d(0xe4)]=()=>confirmReschedule(_0x275fd4),_0x437223[_0x14741d(0xf5)](_0x4192e6);});}function a3_0x3efb(){const _0x16bb19=['<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','isArray','status','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','anDonutCircle','createDocumentFragment','calc(','today','addEventListener','left','globalTimeLine','saveLocally','timeLineBadge','setHeaderColor','visible','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','675504hpONsf','–û—Ç–º–µ–Ω–µ–Ω–æ','#ff453a','borderLeftColor','padStart','custom','length','top','600','show','reschedule','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','daysHeaderTrack','setBackgroundColor','getTime','getDate','.day-col-header[data-date=\x22','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','setDate','log','findIndex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','</div>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','cancelHint','day-column\x20','.sheet','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','push','month','textContent','classList','.day-column','clientWidth','round','className','anCustomDates','fontWeight','querySelector','colIndex','value','getMonth','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','active','offsetWidth','getAttribute','data-date','uc_client_sessions','Error\x20setting\x20back\x20button:','join','initData','toLocaleDateString','stopPropagation','<div\x20class=\x22rs-day-name\x22>','width','long','day-off-overlay\x20stripe-bg','toUpperCase','planned','headerMonth','calendar','substr','start','getElementById','ranges','none','coachId','note','scrollLeft','sort','–∑–∞\x20','data-day-idx','setItem','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','1fPghVT','offsetLeft','T23:59:59','total','#0a84ff','then','coach_profiles','px\x200px','</div><div\x20class=\x22dch-num\x22>','settings','v9.5-CLIENT-ANALYTICS','pattern','timeColumn','483363ruwQZw','completed','getDay','open','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<div\x20class=\x22dch-day\x22>','rs-date-chip','889eMpQyj','\x20status-completed','#050505','Unknown','getFullYear','startsWith','createElement','overlay','test','innerHTML','week','substring','detDate','initDataUnsafe','all','setAttribute','end','find','cancel_window','done','T00:00:00','event-card','button','px\x20-','anEnd','split','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞',':00</span>','%\x20-\x204px)','blocked-slot\x20stripe-bg','gridColumns','remove','insertBefore','flex','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','firstChild','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','client_cancel','(((.+)+)+)+$','uc_client_list','href','offClick','backgroundPosition','height','color','auto','867504kQBrcz','getItem','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','ru-RU','rsSlotsGrid','BackButton','display','getMinutes','onClick','map','detTime','\x20—á.','dateStr','matrixViewport','syncLoad','exceptions','<span>','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','4720CDAdSp','detailsSheet','POST','DOMContentLoaded','parse','error','add','.btn-reschedule','applyData','stringify','WebApp','block','loadLocal','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','max','ccYesBtn','.day-col-header','toString','onclick','cancelContainer','mini','161866ixWNQu','anPercent','rs-time-btn','json','disableVerticalSwipes','anStart','location','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','</span>\x20/\x20','setHours','keys','.period-switch\x20.p-btn','analyticsList','uc_client_settings','appendChild','.btn-cancel','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','scrollTo','style','day-col-header\x20','%\x20+\x202px)','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','div','getHours','router.html','analyticsSheet','backgroundColor','forEach','filter','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','min','data','8753778lPtfKR','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','time-label','customConfirm','numeric','clients','rescheduleSheet','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','Error\x20setting\x20color:','detStatus','Telegram','\x20-\x20','\x20–∏–∑\x20','Critical\x20TMA\x20Error:','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','var(--acc-green)','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','934740UGwVHC','client-stat-card','querySelectorAll','now'];a3_0x3efb=function(){return _0x16bb19;};return a3_0x3efb();}async function confirmReschedule(_0x1efaee){const _0x24220e=a3_0x873536,_0x1b29c8=new Date(selectedRsDate),_0x2f50e9=_0x1b29c8[_0x24220e(0x15f)](_0x24220e(0x1bc),{'day':_0x24220e(0x10b),'month':_0x24220e(0x163)}),_0x3c5588=await showCustomConfirm(_0x24220e(0x1bb),_0x24220e(0xfc)+_0x2f50e9+'\x20–≤\x20'+_0x1efaee+'?',![]);if(!_0x3c5588)return;closeAllSheets(),showToast(_0x24220e(0x11f)),lastUserActionTime=Date[_0x24220e(0x11b)]();const _0x4773ca=currentSession[_0x24220e(0x1c5)],_0x4e0e36=currentSession['id'],[_0x7a542d,_0x58ffa2]=currentSession[_0x24220e(0x16a)][_0x24220e(0x1a3)](':')[_0x24220e(0x1c2)](Number),[_0x4e0a63,_0xd213ff]=currentSession[_0x24220e(0x19a)][_0x24220e(0x1a3)](':')[_0x24220e(0x1c2)](Number),_0x3387dc=_0x4e0a63*0x3c+_0xd213ff-(_0x7a542d*0x3c+_0x58ffa2),[_0x5762b2,_0x565e23]=_0x1efaee['split'](':')[_0x24220e(0x1c2)](Number),_0xf452cd=_0x5762b2*0x3c+_0x565e23+_0x3387dc,_0xe32460=Math['floor'](_0xf452cd/0x3c),_0x1653e2=_0xf452cd%0x3c,_0x2c32b3=String(_0xe32460)[_0x24220e(0x130)](0x2,'0')+':'+String(_0x1653e2)[_0x24220e(0x130)](0x2,'0'),_0x2c16a8=sessions[_0x24220e(0x140)](_0x18b62e=>_0x18b62e['id']===_0x4e0e36);_0x2c16a8!==-0x1&&(sessions[_0x2c16a8][_0x24220e(0x1c5)]=selectedRsDate,sessions[_0x2c16a8][_0x24220e(0x16a)]=_0x1efaee,sessions[_0x2c16a8][_0x24220e(0x19a)]=_0x2c32b3,reRenderBlocks());try{const _0x154c64=window['Telegram']?.['WebApp'],_0x4e5358=await fetch(API_URL,{'method':_0x24220e(0x1cd),'body':JSON[_0x24220e(0x1d4)]({'action':_0x24220e(0x136),'init_data':_0x154c64?.[_0x24220e(0x15e)]||'','oldSessionId':_0x4e0e36,'oldDate':_0x4773ca,'newDate':selectedRsDate,'newTime':_0x1efaee,'coachId':currentSession['coachId']})}),_0x146f27=await _0x4e5358['json']();!_0x146f27['ok']?(showToast(_0x24220e(0x13d)),DataManager[_0x24220e(0x1c7)]()):(showToast(_0x24220e(0x104)),DataManager[_0x24220e(0x127)]());}catch(_0x540309){showToast(_0x24220e(0x137));}}document[a3_0x873536(0x124)](a3_0x873536(0x1ce),init);