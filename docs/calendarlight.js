const a3_0x471e83=a3_0xe1cc;(function(_0x3c3a0d,_0x47e24d){const _0x37d764=a3_0xe1cc,_0x3a537a=_0x3c3a0d();while(!![]){try{const _0x23b997=parseInt(_0x37d764(0x2a8))/0x1+-parseInt(_0x37d764(0x234))/0x2*(-parseInt(_0x37d764(0x228))/0x3)+-parseInt(_0x37d764(0x1be))/0x4+-parseInt(_0x37d764(0x2ab))/0x5*(-parseInt(_0x37d764(0x22f))/0x6)+-parseInt(_0x37d764(0x1fa))/0x7+parseInt(_0x37d764(0x2a4))/0x8*(-parseInt(_0x37d764(0x250))/0x9)+parseInt(_0x37d764(0x260))/0xa*(parseInt(_0x37d764(0x27e))/0xb);if(_0x23b997===_0x47e24d)break;else _0x3a537a['push'](_0x3a537a['shift']());}catch(_0x3cc8ff){_0x3a537a['push'](_0x3a537a['shift']());}}}(a3_0x47ac,0xd9872));const APP_VERSION=a3_0x471e83(0x279),API_URL=a3_0x471e83(0x2a9),GRID_H=0x3c,KEY_SESSIONS=a3_0x471e83(0x25f),KEY_SETTINGS=a3_0x471e83(0x239),KEY_CLIENTS=a3_0x471e83(0x273);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x471e83(0x1fe),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x23072f=a3_0x471e83,_0x5ce8bc=(function(){let _0x29b34b=!![];return function(_0x1fe356,_0x1085be){const _0x5abaff=_0x29b34b?function(){const _0x4542fc=a3_0xe1cc;if(_0x1085be){const _0x2afc00=_0x1085be[_0x4542fc(0x254)](_0x1fe356,arguments);return _0x1085be=null,_0x2afc00;}}:function(){};return _0x29b34b=![],_0x5abaff;};}()),_0x11c5c0=_0x5ce8bc(this,function(){const _0x1a43c6=a3_0xe1cc;return _0x11c5c0[_0x1a43c6(0x1ea)]()['search'](_0x1a43c6(0x205))[_0x1a43c6(0x1ea)]()[_0x1a43c6(0x25e)](_0x11c5c0)[_0x1a43c6(0x272)]('(((.+)+)+)+$');});_0x11c5c0();try{const _0x3e6cbd=window['Telegram']?.[_0x23072f(0x293)];if(!_0x3e6cbd)return;_0x3e6cbd[_0x23072f(0x220)](),_0x3e6cbd['expand']();try{_0x3e6cbd[_0x23072f(0x248)](_0x23072f(0x218)),_0x3e6cbd[_0x23072f(0x1dd)]&&_0x3e6cbd['setBackgroundColor'](_0x23072f(0x218));}catch(_0x53de70){console[_0x23072f(0x1da)](_0x23072f(0x1e1),_0x53de70);}try{_0x3e6cbd['BackButton']&&(_0x3e6cbd[_0x23072f(0x26a)][_0x23072f(0x23c)](),_0x3e6cbd[_0x23072f(0x26a)][_0x23072f(0x23f)](),_0x3e6cbd[_0x23072f(0x26a)][_0x23072f(0x1de)](function(){const _0x273a0f=_0x23072f;window['location'][_0x273a0f(0x252)]=_0x273a0f(0x286);}));}catch(_0x58b1ae){console[_0x23072f(0x1da)]('Error\x20setting\x20back\x20button:',_0x58b1ae);}try{if(_0x3e6cbd[_0x23072f(0x213)])_0x3e6cbd[_0x23072f(0x213)]();}catch(_0x1c92e3){}}catch(_0x5317fa){console[_0x23072f(0x27b)]('Critical\x20TMA\x20Error:',_0x5317fa);}}());function isAdmin(){const _0x466282=a3_0x471e83;try{const _0x40fb40=Number(window['Telegram']?.['WebApp']?.[_0x466282(0x1ce)]?.[_0x466282(0x295)]?.['id']);return _0x40fb40===0xbaf7174;}catch(_0xcaea8f){return![];}}const DataManager={'saveLocally'(){const _0x5ee5f8=a3_0x471e83;try{localStorage[_0x5ee5f8(0x1e2)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x5ee5f8(0x1e2)](KEY_CLIENTS,JSON[_0x5ee5f8(0x1d2)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x5ee5f8(0x1d2)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x23bcc5){}},'loadLocal'(){const _0x4344df=a3_0x471e83;try{const _0x5ed4c0=localStorage[_0x4344df(0x287)](KEY_SESSIONS);if(_0x5ed4c0)sessions=JSON[_0x4344df(0x26d)](_0x5ed4c0);const _0x4d61ee=localStorage['getItem'](KEY_CLIENTS);if(_0x4d61ee)clients=JSON[_0x4344df(0x26d)](_0x4d61ee);const _0x3d4493=localStorage[_0x4344df(0x287)](KEY_SETTINGS);if(_0x3d4493){const _0x1fb616=JSON[_0x4344df(0x26d)](_0x3d4493);if(_0x1fb616[_0x4344df(0x1bf)])availabilityPattern=_0x1fb616[_0x4344df(0x1bf)];if(_0x1fb616['ranges'])specialRanges=_0x1fb616['ranges'];if(_0x1fb616['exceptions'])dateExceptions=_0x1fb616['exceptions'];}}catch(_0x5f12f1){}},async 'syncLoad'(){const _0x17ebb0=a3_0x471e83,_0x10d2c0=new Date(),_0x2d4996=_0x10d2c0[_0x17ebb0(0x24c)]()+'-'+String(_0x10d2c0[_0x17ebb0(0x1d5)]()+0x1)[_0x17ebb0(0x2a6)](0x2,'0'),_0x4db869=new Date(_0x10d2c0);_0x4db869['setMonth'](_0x10d2c0['getMonth']()+0x1);const _0x2c4b20=_0x4db869[_0x17ebb0(0x24c)]()+'-'+String(_0x4db869['getMonth']()+0x1)['padStart'](0x2,'0'),_0x122f2f=Date[_0x17ebb0(0x259)]();try{const _0x27e581=window['Telegram']?.[_0x17ebb0(0x293)],_0x2a5085=_0x27e581?.['initData']||'',[_0x97163b,_0x59806e]=await Promise[_0x17ebb0(0x290)]([fetch(API_URL,{'method':_0x17ebb0(0x297),'body':JSON[_0x17ebb0(0x1d2)]({'action':'client_load','init_data':_0x2a5085,'month_str':_0x2d4996})})[_0x17ebb0(0x296)](_0x185828=>_0x185828[_0x17ebb0(0x1e4)]()),fetch(API_URL,{'method':_0x17ebb0(0x297),'body':JSON['stringify']({'action':_0x17ebb0(0x27f),'init_data':_0x2a5085,'month_str':_0x2c4b20})})['then'](_0x236d9d=>_0x236d9d['json']())]);if(lastUserActionTime>_0x122f2f){console[_0x17ebb0(0x1da)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x97163b['ok'])this['applyData'](_0x97163b['data'],_0x2d4996);if(_0x59806e['ok'])this[_0x17ebb0(0x214)](_0x59806e['data'],_0x2c4b20);this[_0x17ebb0(0x231)]();}catch(_0x555c){}},'applyData'(_0x5ce5ad,_0xdb5d50){const _0x4061cd=a3_0x471e83;if(!_0x5ce5ad)return;if(_0x5ce5ad['settings']){if(_0x5ce5ad[_0x4061cd(0x265)][_0x4061cd(0x1bf)])availabilityPattern=_0x5ce5ad['settings'][_0x4061cd(0x1bf)];if(_0x5ce5ad[_0x4061cd(0x265)][_0x4061cd(0x253)])specialRanges=_0x5ce5ad[_0x4061cd(0x265)][_0x4061cd(0x253)];if(_0x5ce5ad[_0x4061cd(0x265)][_0x4061cd(0x28d)])dateExceptions=_0x5ce5ad['settings']['exceptions'];}if(_0x5ce5ad[_0x4061cd(0x2a7)]&&Array[_0x4061cd(0x294)](_0x5ce5ad['clients']))clients=_0x5ce5ad[_0x4061cd(0x2a7)];_0x5ce5ad[_0x4061cd(0x299)]&&(coachProfiles={...coachProfiles,..._0x5ce5ad['coach_profiles']}),_0x5ce5ad[_0x4061cd(0x28e)]&&(sessions=sessions[_0x4061cd(0x281)](_0x16960d=>!_0x16960d[_0x4061cd(0x1c2)]['startsWith'](_0xdb5d50)),Object['keys'](_0x5ce5ad[_0x4061cd(0x28e)])[_0x4061cd(0x24b)](_0x496cbe=>{const _0x2d12bd=_0x4061cd,_0x3ac8e4=_0x5ce5ad['calendar'][_0x496cbe];_0x3ac8e4[_0x2d12bd(0x24b)](_0x562413=>{const _0x497649=_0x2d12bd;sessions[_0x497649(0x22d)]({'id':_0x562413['i'],'clientId':_0x562413['c'],'coachId':_0x562413[_0x497649(0x1c1)],'dateStr':_0xdb5d50+'-'+_0x496cbe[_0x497649(0x2a6)](0x2,'0'),'start':_0x562413['s'],'end':_0x562413['e'],'note':_0x562413['n']||'','status':_0x562413['st']||_0x497649(0x24f),'seriesId':_0x562413[_0x497649(0x268)]});});})),reRenderBlocks();}};function init(){const _0x3679d8=a3_0x471e83;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x3679d8(0x244)](_0x3679d8(0x1f5))['addEventListener']('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x3679d8(0x1e5)]();}function renderTimeColumn(){const _0x4d79d6=a3_0x471e83,_0x46f29d=document[_0x4d79d6(0x244)](_0x4d79d6(0x22b)),_0x2978d8=document[_0x4d79d6(0x244)]('timeLineBadge');_0x46f29d[_0x4d79d6(0x285)]='',_0x46f29d[_0x4d79d6(0x209)](_0x2978d8);for(let _0x473f79=0x0;_0x473f79<0x18;_0x473f79++){const _0x4f92a2=document[_0x4d79d6(0x207)](_0x4d79d6(0x1c0));_0x4f92a2['className']=_0x4d79d6(0x1c8);if(_0x473f79>0x0)_0x4f92a2['innerHTML']=_0x4d79d6(0x1c7)+String(_0x473f79)[_0x4d79d6(0x2a6)](0x2,'0')+_0x4d79d6(0x1d0);_0x46f29d[_0x4d79d6(0x209)](_0x4f92a2);}}function renderDayRange(_0x11f25f,_0x23c96f){const _0x494442=a3_0x471e83,_0x5f0501=document[_0x494442(0x244)](_0x494442(0x243)),_0x31cfcc=document[_0x494442(0x244)](_0x494442(0x2aa)),_0x286479=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x80c03b=new Date();_0x80c03b[_0x494442(0x23e)](0x0,0x0,0x0,0x0);const _0x51728d=getLocalDateStr(new Date());for(let _0x1265c1=_0x11f25f;_0x1265c1<=_0x23c96f;_0x1265c1++){const _0x1bda60=new Date(_0x80c03b);_0x1bda60['setDate'](_0x1bda60['getDate']()+_0x1265c1);const _0x5b4d27=getLocalDateStr(_0x1bda60);let _0x373eba=_0x1bda60[_0x494442(0x20d)]()-0x1;if(_0x373eba===-0x1)_0x373eba=0x6;const _0x538b6a=_0x5b4d27===_0x51728d,_0x3a9232=document[_0x494442(0x207)]('div');_0x3a9232[_0x494442(0x26e)]=_0x494442(0x232)+(_0x538b6a?'today':''),_0x3a9232[_0x494442(0x1fd)](_0x494442(0x280),_0x5b4d27),_0x3a9232[_0x494442(0x285)]=_0x494442(0x1d3)+_0x286479[_0x373eba]+_0x494442(0x1d9)+_0x1bda60[_0x494442(0x208)]()+_0x494442(0x21a),_0x5f0501['appendChild'](_0x3a9232);const _0x2b3247=document[_0x494442(0x207)](_0x494442(0x1c0));_0x2b3247[_0x494442(0x26e)]=_0x494442(0x1d6)+(_0x538b6a?_0x494442(0x1f9):''),_0x2b3247['setAttribute'](_0x494442(0x280),_0x5b4d27),_0x2b3247[_0x494442(0x1fd)](_0x494442(0x233),_0x373eba),_0x31cfcc[_0x494442(0x209)](_0x2b3247);}}function reRenderBlocks(){const _0x3aace2=a3_0x471e83;document[_0x3aace2(0x277)](_0x3aace2(0x20f))[_0x3aace2(0x24b)](_0x3df35f=>{const _0x5bb89f=_0x3aace2;_0x3df35f['querySelectorAll'](_0x5bb89f(0x1cd))['forEach'](_0x520792=>_0x520792['remove']());const _0x4f5ed5=_0x3df35f['getAttribute'](_0x5bb89f(0x280)),_0x35f5d0=parseInt(_0x3df35f[_0x5bb89f(0x298)]('data-day-idx')),_0x380495=Math['round'](_0x3df35f[_0x5bb89f(0x2a5)]);(availabilityPattern[_0x35f5d0]||[])['forEach'](_0x262994=>{const _0x16724f=_0x5bb89f,_0x5cf766=document['createElement'](_0x16724f(0x1c0));_0x5cf766[_0x16724f(0x26e)]=_0x16724f(0x283),_0x5cf766['style']['top']=_0x262994*GRID_H+'px',_0x5cf766['style'][_0x16724f(0x29f)]='-'+_0x380495+_0x16724f(0x267)+_0x262994*GRID_H+'px',_0x3df35f[_0x16724f(0x209)](_0x5cf766);});if(specialRanges['length']>0x0){const _0x1c1eda=new Date(_0x4f5ed5+_0x5bb89f(0x1d4))[_0x5bb89f(0x1ed)](),_0x5e9865=new Date(_0x4f5ed5+'T23:59:59')[_0x5bb89f(0x1ed)]();specialRanges[_0x5bb89f(0x24b)](_0xd64174=>{const _0x1da940=_0x5bb89f,_0x5955f7=new Date(_0xd64174[_0x1da940(0x1ee)])['getTime'](),_0x559f17=new Date(_0xd64174['end'])['getTime'](),_0x1b752c=Math[_0x1da940(0x271)](_0x1c1eda,_0x5955f7),_0x376722=Math[_0x1da940(0x266)](_0x5e9865,_0x559f17);if(_0x1b752c<_0x376722){const _0xc4adc5=(_0x1b752c-_0x1c1eda)/0x36ee80*GRID_H,_0x59f9f6=(_0x376722-_0x1b752c)/0x36ee80*GRID_H,_0x414c87=document[_0x1da940(0x207)](_0x1da940(0x1c0));_0x59f9f6>=23.5*GRID_H?(_0x414c87[_0x1da940(0x26e)]=_0x1da940(0x29b),_0x414c87[_0x1da940(0x1f1)]['backgroundPosition']='-'+_0x380495+_0x1da940(0x217)):(_0x414c87[_0x1da940(0x26e)]='blocked-range-part\x20stripe-bg',_0x414c87[_0x1da940(0x1f1)][_0x1da940(0x223)]=_0xc4adc5+'px',_0x414c87[_0x1da940(0x1f1)][_0x1da940(0x1e7)]=_0x59f9f6+'px',_0x414c87[_0x1da940(0x1f1)][_0x1da940(0x29f)]='-'+_0x380495+_0x1da940(0x267)+_0xc4adc5+'px'),_0x3df35f['appendChild'](_0x414c87);}});}renderEventsForColumn(_0x3df35f,_0x4f5ed5);});}function renderEventsForColumn(_0x3df87e,_0x1940d2){const _0x12e6d2=a3_0x471e83,_0x39d49a=sessions[_0x12e6d2(0x281)](_0x3188f1=>_0x3188f1[_0x12e6d2(0x1c2)]===_0x1940d2),_0xd7e596=_0x39d49a[_0x12e6d2(0x204)](_0x17b239=>{const _0x3438ce=_0x12e6d2,[_0x4331f4,_0x124e63]=_0x17b239[_0x3438ce(0x1ee)][_0x3438ce(0x28b)](':')[_0x3438ce(0x204)](Number),[_0x11c1a4,_0x447d10]=_0x17b239['end'][_0x3438ce(0x28b)](':')[_0x3438ce(0x204)](Number);return{'data':_0x17b239,'start':_0x4331f4*0x3c+_0x124e63,'end':_0x11c1a4*0x3c+_0x447d10,'colIndex':0x0};});_0xd7e596['sort']((_0x10988f,_0x342a62)=>_0x10988f[_0x12e6d2(0x1ee)]-_0x342a62[_0x12e6d2(0x1ee)]||_0x342a62['end']-_0x342a62[_0x12e6d2(0x1ee)]-(_0x10988f[_0x12e6d2(0x28c)]-_0x10988f[_0x12e6d2(0x1ee)]));const _0x5611a3=[];_0xd7e596[_0x12e6d2(0x24b)](_0x36bffd=>{const _0x3f04bb=_0x12e6d2;let _0x1653b1=![];for(let _0x36e788=0x0;_0x36e788<_0x5611a3[_0x3f04bb(0x20a)];_0x36e788++){const _0x2bc6ae=_0x5611a3[_0x36e788];if(_0x36bffd[_0x3f04bb(0x1ee)]>=_0x2bc6ae[_0x2bc6ae[_0x3f04bb(0x20a)]-0x1]['end']){_0x2bc6ae[_0x3f04bb(0x22d)](_0x36bffd),_0x36bffd[_0x3f04bb(0x1cc)]=_0x36e788,_0x1653b1=!![];break;}}!_0x1653b1&&(_0x5611a3[_0x3f04bb(0x22d)]([_0x36bffd]),_0x36bffd[_0x3f04bb(0x1cc)]=_0x5611a3[_0x3f04bb(0x20a)]-0x1);}),_0xd7e596['forEach'](_0x20529b=>{const _0x5a3249=_0x12e6d2;let _0x59b6a0=0x0;_0xd7e596[_0x5a3249(0x24b)](_0x3080fe=>{const _0x5b74c0=_0x5a3249;if(Math[_0x5b74c0(0x271)](_0x20529b['start'],_0x3080fe['start'])<Math[_0x5b74c0(0x266)](_0x20529b[_0x5b74c0(0x28c)],_0x3080fe['end'])&&_0x3080fe['colIndex']>_0x59b6a0)_0x59b6a0=_0x3080fe[_0x5b74c0(0x1cc)];});const _0x56c840=_0x59b6a0+0x1,_0x381307=0x64/_0x56c840,_0x1a084a=_0x20529b[_0x5a3249(0x1cc)]*_0x381307,_0x2c56e6=document[_0x5a3249(0x207)](_0x5a3249(0x1c0)),_0x7ff6fc=_0x20529b[_0x5a3249(0x2a2)];let _0x4a021f=_0x5a3249(0x23d);if(clients&&clients[_0x5a3249(0x20a)]>0x0){const _0xbab347=clients['find'](_0x563609=>String(_0x563609['id'])===String(_0x7ff6fc[_0x5a3249(0x1e8)]));if(_0xbab347&&_0xbab347[_0x5a3249(0x1b9)])_0x4a021f=_0xbab347[_0x5a3249(0x1b9)];}const _0x4dcf23=_0x7ff6fc[_0x5a3249(0x1c3)]===_0x5a3249(0x27c),_0x2b431=_0x4dcf23?0x1:0.45;_0x2c56e6['className']=_0x5a3249(0x203)+(_0x4dcf23?'\x20status-completed':''),_0x2c56e6[_0x5a3249(0x1f1)][_0x5a3249(0x20c)]=hexToRgba(_0x4a021f,_0x2b431),_0x2c56e6[_0x5a3249(0x1f1)][_0x5a3249(0x1f4)]=_0x4a021f;const _0x3f9722=_0x20529b[_0x5a3249(0x1ee)]/0x3c*GRID_H,_0x47aae7=(_0x20529b[_0x5a3249(0x28c)]-_0x20529b[_0x5a3249(0x1ee)])/0x3c*GRID_H;_0x2c56e6[_0x5a3249(0x1f1)][_0x5a3249(0x223)]=_0x3f9722+'px',_0x2c56e6[_0x5a3249(0x1f1)][_0x5a3249(0x1e7)]=Math[_0x5a3249(0x271)](_0x47aae7,0x14)+'px',_0x2c56e6[_0x5a3249(0x1f1)][_0x5a3249(0x224)]='calc('+_0x381307+'%\x20-\x204px)',_0x2c56e6['style']['left']=_0x5a3249(0x1cb)+_0x1a084a+_0x5a3249(0x225),_0x2c56e6[_0x5a3249(0x1f1)][_0x5a3249(0x29a)]=0xa+_0x20529b['colIndex'];if(_0x381307<0x55)_0x2c56e6[_0x5a3249(0x1f3)][_0x5a3249(0x1df)](_0x5a3249(0x221));let _0x50db85='';if(_0x7ff6fc[_0x5a3249(0x21b)])_0x50db85+=_0x5a3249(0x235);if(_0x4dcf23)_0x50db85+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x2c56e6['innerHTML']=_0x5a3249(0x26c)+_0x7ff6fc[_0x5a3249(0x1ee)]+_0x5a3249(0x1e6)+_0x7ff6fc[_0x5a3249(0x28c)]+_0x5a3249(0x276)+_0x50db85+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2c56e6[_0x5a3249(0x270)]=_0x167fd8=>{const _0x155856=_0x5a3249;_0x167fd8[_0x155856(0x1bc)](),openDetails(_0x7ff6fc);},_0x3df87e[_0x5a3249(0x209)](_0x2c56e6);});}function openAnalytics(){const _0x289c0d=a3_0x471e83,_0x205f9d=document[_0x289c0d(0x229)](_0x289c0d(0x288));setAnalyticsPeriod('week',_0x205f9d),openSheet(_0x289c0d(0x1c4));}function setAnalyticsPeriod(_0x4443df,_0x18b24e){const _0x4c96db=a3_0x471e83;currentAnPeriod=_0x4443df,document[_0x4c96db(0x277)](_0x4c96db(0x288))[_0x4c96db(0x24b)](_0x50983d=>_0x50983d[_0x4c96db(0x1f3)][_0x4c96db(0x251)]('active'));if(_0x18b24e)_0x18b24e[_0x4c96db(0x1f3)][_0x4c96db(0x1df)](_0x4c96db(0x1f7));const _0x411753=document[_0x4c96db(0x244)](_0x4c96db(0x25b));_0x411753['style'][_0x4c96db(0x26b)]=_0x4443df===_0x4c96db(0x292)?_0x4c96db(0x240):_0x4c96db(0x262);const _0x44fd2f=new Date();let _0x5df319=new Date(),_0x57346c=new Date();if(_0x4443df===_0x4c96db(0x1fe))_0x5df319=getStartOfWeek(_0x44fd2f),_0x57346c=new Date(_0x5df319),_0x57346c[_0x4c96db(0x22e)](_0x57346c[_0x4c96db(0x208)]()+0x6);else{if(_0x4443df==='month')_0x5df319=new Date(_0x44fd2f[_0x4c96db(0x24c)](),_0x44fd2f[_0x4c96db(0x1d5)](),0x1),_0x57346c=new Date(_0x44fd2f['getFullYear'](),_0x44fd2f['getMonth']()+0x1,0x0);else{!document[_0x4c96db(0x244)](_0x4c96db(0x255))[_0x4c96db(0x20b)]&&(document[_0x4c96db(0x244)]('anStart')[_0x4c96db(0x20b)]=getLocalDateStr(_0x44fd2f),document[_0x4c96db(0x244)]('anEnd')['value']=getLocalDateStr(_0x44fd2f));refreshAnalytics();return;}}document[_0x4c96db(0x244)]('anStart')[_0x4c96db(0x20b)]=getLocalDateStr(_0x5df319),document[_0x4c96db(0x244)](_0x4c96db(0x289))[_0x4c96db(0x20b)]=getLocalDateStr(_0x57346c),refreshAnalytics();}function refreshAnalytics(){const _0xe2f6a=a3_0x471e83,_0x207a09=document[_0xe2f6a(0x244)](_0xe2f6a(0x255))['value'],_0x141480=document['getElementById'](_0xe2f6a(0x289))[_0xe2f6a(0x20b)];if(!_0x207a09||!_0x141480)return;const _0xe35938=sessions['filter'](_0x2c6e0d=>_0x2c6e0d[_0xe2f6a(0x1c2)]>=_0x207a09&&_0x2c6e0d[_0xe2f6a(0x1c2)]<=_0x141480&&_0x2c6e0d['status']!=='cancelled'),_0x2c543c=_0xe35938['length'],_0x2d7e0c=_0xe35938['filter'](_0x3f44fc=>_0x3f44fc['status']===_0xe2f6a(0x27c))['length'],_0x51a8c2=_0x2c543c>0x0?Math[_0xe2f6a(0x1e9)](_0x2d7e0c/_0x2c543c*0x64):0x0;document[_0xe2f6a(0x244)](_0xe2f6a(0x2a0))['textContent']=_0x51a8c2+'%',document[_0xe2f6a(0x244)](_0xe2f6a(0x274))[_0xe2f6a(0x1ca)]=_0x2d7e0c+_0xe2f6a(0x21d)+_0x2c543c+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x1203e2=document[_0xe2f6a(0x244)](_0xe2f6a(0x28f)),_0x228b86=0x2*Math['PI']*0x23,_0x53391a=_0x228b86-_0x51a8c2/0x64*_0x228b86;_0x1203e2['style']['strokeDashoffset']=_0x53391a;const _0x195ee3={};_0xe35938['forEach'](_0x5ada93=>{const _0x37d95f=_0xe2f6a,_0x43b65c=_0x5ada93[_0x37d95f(0x1c9)]||'Unknown';if(!_0x195ee3[_0x43b65c]){const _0x3042d6='#'+_0x43b65c[_0x37d95f(0x1ea)]()[_0x37d95f(0x236)](0x0,0x6);_0x195ee3[_0x43b65c]={'total':0x0,'done':0x0,'color':_0x3042d6};}_0x195ee3[_0x43b65c][_0x37d95f(0x21c)]++;if(_0x5ada93['status']===_0x37d95f(0x27c))_0x195ee3[_0x43b65c]['done']++;});const _0x49a769=document[_0xe2f6a(0x244)](_0xe2f6a(0x245));_0x49a769[_0xe2f6a(0x285)]='';const _0x27fac5=Object['entries'](_0x195ee3)['sort']((_0x807870,_0x8050bf)=>_0x8050bf[0x1][_0xe2f6a(0x21c)]-_0x807870[0x1][_0xe2f6a(0x21c)]);if(_0x27fac5[_0xe2f6a(0x20a)]===0x0){_0x49a769[_0xe2f6a(0x285)]=_0xe2f6a(0x1d7);return;}_0x27fac5[_0xe2f6a(0x24b)](([_0x3b6546,_0x359248])=>{const _0x3e1f11=_0xe2f6a,_0x1c84bf=Math[_0x3e1f11(0x1e9)](_0x359248[_0x3e1f11(0x282)]/_0x359248[_0x3e1f11(0x21c)]*0x64),_0x30c648=document['createElement'](_0x3e1f11(0x1c0));_0x30c648[_0x3e1f11(0x26e)]=_0x3e1f11(0x1ba),_0x30c648[_0x3e1f11(0x1f1)][_0x3e1f11(0x1f4)]=_0x359248[_0x3e1f11(0x1b9)],_0x30c648[_0x3e1f11(0x285)]=_0x3e1f11(0x29d)+_0x3b6546[_0x3e1f11(0x236)](0x0,0x5)+_0x3e1f11(0x219)+_0x359248['done']+_0x3e1f11(0x210)+_0x359248[_0x3e1f11(0x21c)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x1c84bf+_0x3e1f11(0x258),_0x49a769[_0x3e1f11(0x209)](_0x30c648);});}function openDetails(_0x59149c){const _0x14cfd7=a3_0x471e83;currentSession=_0x59149c;const _0x2a7168=new Date(_0x59149c[_0x14cfd7(0x1c2)]),_0x5539fc=_0x2a7168[_0x14cfd7(0x1cf)]('ru-RU',{'weekday':'long','day':_0x14cfd7(0x263),'month':_0x14cfd7(0x1ef)});document[_0x14cfd7(0x244)](_0x14cfd7(0x215))[_0x14cfd7(0x1ca)]=_0x5539fc['charAt'](0x0)['toUpperCase']()+_0x5539fc['slice'](0x1),document[_0x14cfd7(0x244)](_0x14cfd7(0x241))[_0x14cfd7(0x1ca)]=_0x59149c[_0x14cfd7(0x1ee)]+_0x14cfd7(0x1e6)+_0x59149c[_0x14cfd7(0x28c)],document[_0x14cfd7(0x244)]('detNote')[_0x14cfd7(0x1ca)]=_0x59149c['note']||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x1c4b36=document[_0x14cfd7(0x244)](_0x14cfd7(0x24e)),_0x7c31e0=document[_0x14cfd7(0x244)]('cancelContainer'),_0x3f1f2c=_0x7c31e0[_0x14cfd7(0x229)](_0x14cfd7(0x230)),_0x5b7359=_0x7c31e0[_0x14cfd7(0x229)](_0x14cfd7(0x212)),_0x16f93d=document[_0x14cfd7(0x244)](_0x14cfd7(0x249));if(_0x59149c['status']==='completed')_0x1c4b36['textContent']=_0x14cfd7(0x1dc),_0x1c4b36[_0x14cfd7(0x1f1)][_0x14cfd7(0x1b9)]='var(--acc-green)',_0x7c31e0[_0x14cfd7(0x1f1)][_0x14cfd7(0x26b)]='none';else{_0x1c4b36[_0x14cfd7(0x1ca)]=_0x14cfd7(0x25d),_0x1c4b36[_0x14cfd7(0x1f1)][_0x14cfd7(0x1b9)]=_0x14cfd7(0x28a),_0x7c31e0[_0x14cfd7(0x1f1)]['display']=_0x14cfd7(0x25c);const _0x29e6f0=new Date(_0x59149c[_0x14cfd7(0x1c2)]+'T'+_0x59149c[_0x14cfd7(0x1ee)]),_0x27a8ae=new Date(),_0x47b897=(_0x29e6f0-_0x27a8ae)/(0x3e8*0x3c*0x3c),_0x335947=coachProfiles[_0x59149c[_0x14cfd7(0x1c9)]]&&coachProfiles[_0x59149c[_0x14cfd7(0x1c9)]][_0x14cfd7(0x216)]?parseInt(coachProfiles[_0x59149c[_0x14cfd7(0x1c9)]][_0x14cfd7(0x216)]):0x18;if(_0x335947===0x0||_0x47b897>=_0x335947)_0x3f1f2c['style'][_0x14cfd7(0x26b)]='block',_0x5b7359['style'][_0x14cfd7(0x26b)]='block',_0x16f93d[_0x14cfd7(0x1f1)][_0x14cfd7(0x26b)]='none';else{_0x3f1f2c['style'][_0x14cfd7(0x26b)]='none',_0x5b7359[_0x14cfd7(0x1f1)][_0x14cfd7(0x26b)]=_0x14cfd7(0x262),_0x16f93d[_0x14cfd7(0x1f1)][_0x14cfd7(0x26b)]='block';let _0x5e5d87=_0x335947===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x14cfd7(0x24a)+_0x335947+_0x14cfd7(0x1fc);_0x16f93d['textContent']='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x5e5d87+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document[_0x14cfd7(0x244)](_0x14cfd7(0x1e0))['classList'][_0x14cfd7(0x1df)](_0x14cfd7(0x1f7)),document[_0x14cfd7(0x244)](_0x14cfd7(0x1bb))[_0x14cfd7(0x1f3)][_0x14cfd7(0x1df)](_0x14cfd7(0x206));}function closeAllSheets(){const _0x2fdf2a=a3_0x471e83;document['getElementById']('overlay')[_0x2fdf2a(0x1f3)][_0x2fdf2a(0x251)](_0x2fdf2a(0x1f7)),document[_0x2fdf2a(0x277)]('.sheet')[_0x2fdf2a(0x24b)](_0x5154c1=>_0x5154c1[_0x2fdf2a(0x1f3)][_0x2fdf2a(0x251)]('open'));}function openSheet(_0x133776){const _0x2ab79e=a3_0x471e83;document[_0x2ab79e(0x244)](_0x2ab79e(0x1e0))[_0x2ab79e(0x1f3)][_0x2ab79e(0x1df)](_0x2ab79e(0x1f7)),document[_0x2ab79e(0x244)](_0x133776)['classList']['add']('open');}function getLocalDateStr(_0x19527c){const _0x360966=a3_0x471e83,_0x5a5373=_0x19527c['getFullYear'](),_0x3c459b=String(_0x19527c[_0x360966(0x1d5)]()+0x1)['padStart'](0x2,'0'),_0x35f42b=String(_0x19527c[_0x360966(0x208)]())[_0x360966(0x2a6)](0x2,'0');return _0x5a5373+'-'+_0x3c459b+'-'+_0x35f42b;}function a3_0xe1cc(_0x346472,_0x24f182){_0x346472=_0x346472-0x1b9;const _0xf36dee=a3_0x47ac();let _0x194a9a=_0xf36dee[_0x346472];return _0x194a9a;}function getStartOfWeek(_0x1218c1){const _0x46d833=a3_0x471e83,_0x47a7ba=new Date(_0x1218c1),_0x585411=_0x47a7ba[_0x46d833(0x20d)](),_0x2d70f4=_0x47a7ba['getDate']()-_0x585411+(_0x585411===0x0?-0x6:0x1);return _0x47a7ba['setDate'](_0x2d70f4),_0x47a7ba['setHours'](0x0,0x0,0x0,0x0),_0x47a7ba;}function scrollToToday(){const _0x5b1b70=getLocalDateStr(new Date());setTimeout(()=>{const _0x331c51=a3_0xe1cc,_0x2837a2=document[_0x331c51(0x229)]('.day-col-header[data-date=\x22'+_0x5b1b70+'\x22]');if(_0x2837a2){const _0x567187=document[_0x331c51(0x244)](_0x331c51(0x1f5)),_0x3d51a7=_0x2837a2[_0x331c51(0x2a5)]-_0x567187[_0x331c51(0x1ec)]/0x2+_0x2837a2['offsetWidth']/0x2;_0x567187[_0x331c51(0x222)]({'left':_0x3d51a7,'behavior':_0x331c51(0x1bd)}),_0x567187[_0x331c51(0x25a)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x429b14=a3_0x471e83,_0x80c7cc=new Date(),_0x28ac5e=document[_0x429b14(0x244)](_0x429b14(0x211)),_0x27afe3=document[_0x429b14(0x244)]('timeLineBadge'),_0x1776a3=(_0x80c7cc[_0x429b14(0x22c)]()*0x3c+_0x80c7cc['getMinutes']())/0x3c*GRID_H;_0x28ac5e['style'][_0x429b14(0x223)]=_0x1776a3+'px',_0x28ac5e['style']['display']=_0x429b14(0x25c),_0x27afe3[_0x429b14(0x1f1)]['top']=_0x1776a3+'px',_0x27afe3[_0x429b14(0x1f1)][_0x429b14(0x26b)]=_0x429b14(0x25c),_0x27afe3[_0x429b14(0x1ca)]=String(_0x80c7cc[_0x429b14(0x22c)]())[_0x429b14(0x2a6)](0x2,'0')+':'+String(_0x80c7cc['getMinutes']())[_0x429b14(0x2a6)](0x2,'0');}function onScroll(){const _0x7cf614=a3_0x471e83,_0x54d3de=document[_0x7cf614(0x244)](_0x7cf614(0x1f5)),_0x4ab2fb=document[_0x7cf614(0x277)](_0x7cf614(0x237));for(let _0x3f7cff of _0x4ab2fb)if(_0x3f7cff[_0x7cf614(0x2a5)]>=_0x54d3de['scrollLeft']){const _0x44ddf2=new Date(_0x3f7cff[_0x7cf614(0x298)](_0x7cf614(0x280)));document[_0x7cf614(0x244)](_0x7cf614(0x1c6))[_0x7cf614(0x1ca)]=_0x44ddf2[_0x7cf614(0x291)]('ru',{'month':_0x7cf614(0x1ef)})[_0x7cf614(0x226)]()+'\x20'+_0x44ddf2[_0x7cf614(0x24c)]();break;}}function showToast(_0x45d96c){const _0x2e8586=a3_0x471e83,_0x547151=document[_0x2e8586(0x244)]('toast');_0x547151[_0x2e8586(0x1ca)]=_0x45d96c,_0x547151['classList'][_0x2e8586(0x1df)](_0x2e8586(0x23c)),setTimeout(()=>_0x547151[_0x2e8586(0x1f3)][_0x2e8586(0x251)](_0x2e8586(0x23c)),0x7d0);}function a3_0x47ac(){const _0xab838=['map','(((.+)+)+)+$','open','createElement','getDate','appendChild','length','value','backgroundColor','getDay','rs-date-chip','.day-column','</span>\x20/\x20','globalTimeLine','.btn-reschedule','disableVerticalSwipes','applyData','detDate','cancel_window','px\x200px','#050505','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','</div>','seriesId','total','\x20–∏–∑\x20','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','customConfirm','ready','mini','scrollTo','top','width','%\x20+\x202px)','toUpperCase','floor','1742241rkSlgT','querySelector','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','timeColumn','getHours','push','setDate','6xWYOFa','.btn-cancel','saveLocally','day-col-header\x20','data-day-idx','2IEHhtn','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','substr','.day-col-header','<div\x20class=\x22rs-day-name\x22>','uc_client_settings','.rs-date-chip','visible','show','#0a84ff','setHours','offClick','flex','detTime','ccText','daysHeaderTrack','getElementById','analyticsList','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','Telegram','setHeaderColor','cancelHint','–∑–∞\x20','forEach','getFullYear','button','detStatus','planned','9lgsJnl','remove','href','ranges','apply','anStart','\x20–≤\x20','keys','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','now','scrollTop','anCustomDates','block','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','constructor','uc_client_sessions','3589060jeTeYN','initData','none','numeric','get_slots','settings','min','px\x20-','sid','join','BackButton','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','parse','className','</div><div\x20class=\x22rs-day-num\x22>','onclick','max','search','uc_client_list','anTotalStats','scrollWidth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','–û—Ç–º–µ–Ω–µ–Ω–æ','v9.5-CLIENT-ANALYTICS','rgba(10,\x20132,\x20255,\x20','error','completed','insertBefore','11KIVJeE','client_load','data-date','filter','done','blocked-slot\x20stripe-bg','createDocumentFragment','innerHTML','router.html','getItem','.period-switch\x20.p-btn','anEnd','var(--acc-blue)','split','end','exceptions','calendar','anDonutCircle','all','toLocaleString','custom','WebApp','isArray','user','then','POST','getAttribute','coach_profiles','zIndex','day-off-overlay\x20stripe-bg','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','rs-time-btn','backgroundPosition','anPercent','rsDatesTrack','data','findIndex','6960056FcvUVc','offsetLeft','padStart','clients','988430PNPgKK','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','gridColumns','4689005hWLBgi','color','client-stat-card','detailsSheet','stopPropagation','auto','1504376guwDmT','pattern','div','cid','dateStr','status','analyticsSheet','ccYesBtn','headerMonth','<span>','time-label','coachId','textContent','calc(','colIndex','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','initDataUnsafe','toLocaleDateString',':00</span>','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','stringify','<div\x20class=\x22dch-day\x22>','T00:00:00','getMonth','day-column\x20','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','scrollLeft','</div><div\x20class=\x22dch-num\x22>','log','rgba(','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','setBackgroundColor','onClick','add','overlay','Error\x20setting\x20color:','setItem','addEventListener','json','syncLoad','\x20-\x20','height','clientId','round','toString','test','clientWidth','getTime','start','long','firstChild','style','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','classList','borderLeftColor','matrixViewport','rsSlotsGrid','active','600','today','5101523fboKyl','client_cancel','\x20—á.','setAttribute','week','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','DOMContentLoaded','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','ccTitle','event-card'];a3_0x47ac=function(){return _0xab838;};return a3_0x47ac();}function handleInfiniteScroll(){const _0x3d49d7=a3_0x471e83,_0x228155=document['getElementById'](_0x3d49d7(0x1f5)),_0x3cb06e=_0x228155[_0x3d49d7(0x1d8)],_0x3bbe1a=_0x228155[_0x3d49d7(0x275)],_0x1c5cae=_0x228155[_0x3d49d7(0x1ec)];if(_0x3bbe1a-(_0x3cb06e+_0x1c5cae)<0x12c){const _0x1d15ee=endOffset;endOffset+=0xe,renderDayRange(_0x1d15ee+0x1,endOffset),reRenderBlocks();}if(_0x3cb06e<0x12c){const _0x5086f4=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5086f4-0x1),_0x228155[_0x3d49d7(0x1d8)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x3d532a,_0x5638ba){const _0x3256f5=a3_0x471e83,_0x1cc672=document[_0x3256f5(0x244)](_0x3256f5(0x243)),_0x11e274=document[_0x3256f5(0x244)](_0x3256f5(0x2aa)),_0x5cad6c=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xd1cad=new Date();_0xd1cad[_0x3256f5(0x23e)](0x0,0x0,0x0,0x0);const _0x4abd3a=getLocalDateStr(new Date()),_0x4d9f43=document[_0x3256f5(0x284)](),_0x175c90=document[_0x3256f5(0x284)]();for(let _0x3d169a=_0x3d532a;_0x3d169a<=_0x5638ba;_0x3d169a++){const _0x55e810=new Date(_0xd1cad);_0x55e810[_0x3256f5(0x22e)](_0x55e810[_0x3256f5(0x208)]()+_0x3d169a);const _0x46793b=getLocalDateStr(_0x55e810);let _0x1537e5=_0x55e810[_0x3256f5(0x20d)]()-0x1;if(_0x1537e5===-0x1)_0x1537e5=0x6;const _0xa07906=_0x46793b===_0x4abd3a,_0x605dab=document['createElement'](_0x3256f5(0x1c0));_0x605dab[_0x3256f5(0x26e)]='day-col-header\x20'+(_0xa07906?'today':''),_0x605dab[_0x3256f5(0x1fd)](_0x3256f5(0x280),_0x46793b),_0x605dab[_0x3256f5(0x285)]='<div\x20class=\x22dch-day\x22>'+_0x5cad6c[_0x1537e5]+'</div><div\x20class=\x22dch-num\x22>'+_0x55e810[_0x3256f5(0x208)]()+_0x3256f5(0x21a),_0x4d9f43['appendChild'](_0x605dab);const _0xe015c=document[_0x3256f5(0x207)]('div');_0xe015c[_0x3256f5(0x26e)]=_0x3256f5(0x1d6)+(_0xa07906?'today':''),_0xe015c[_0x3256f5(0x1fd)](_0x3256f5(0x280),_0x46793b),_0xe015c[_0x3256f5(0x1fd)](_0x3256f5(0x233),_0x1537e5),_0x175c90[_0x3256f5(0x209)](_0xe015c);}_0x1cc672[_0x3256f5(0x27d)](_0x4d9f43,_0x1cc672['firstChild']),_0x11e274[_0x3256f5(0x27d)](_0x175c90,_0x11e274[_0x3256f5(0x229)](_0x3256f5(0x20f)));}function hexToRgba(_0x54836a,_0x42011e){const _0x259821=a3_0x471e83;let _0x16f700;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x259821(0x1eb)](_0x54836a))return _0x16f700=_0x54836a['substring'](0x1)[_0x259821(0x28b)](''),_0x16f700['length']==0x3&&(_0x16f700=[_0x16f700[0x0],_0x16f700[0x0],_0x16f700[0x1],_0x16f700[0x1],_0x16f700[0x2],_0x16f700[0x2]]),_0x16f700='0x'+_0x16f700['join'](''),_0x259821(0x1db)+[_0x16f700>>0x10&0xff,_0x16f700>>0x8&0xff,_0x16f700&0xff][_0x259821(0x269)](',')+','+_0x42011e+')';return _0x259821(0x27a)+_0x42011e+')';}let confirmResolver=null;function showCustomConfirm(_0x93b9d8,_0x2b10c5,_0x4f4330=!![]){const _0x143139=a3_0x471e83;document[_0x143139(0x244)](_0x143139(0x202))[_0x143139(0x1ca)]=_0x93b9d8,document[_0x143139(0x244)](_0x143139(0x242))['textContent']=_0x2b10c5;const _0xca08b=document[_0x143139(0x244)](_0x143139(0x1c5));return _0x4f4330?(_0xca08b[_0x143139(0x1f1)][_0x143139(0x1b9)]='#ff453a',_0xca08b[_0x143139(0x1f1)]['fontWeight']='600'):(_0xca08b['style'][_0x143139(0x1b9)]=_0x143139(0x23d),_0xca08b[_0x143139(0x1f1)]['fontWeight']=_0x143139(0x1f8)),new Promise(_0xedbc58=>{const _0x381a06=_0x143139;confirmResolver=_0xedbc58,document[_0x381a06(0x244)](_0x381a06(0x21f))['classList']['add'](_0x381a06(0x23b));});}function resolveCustomConfirm(_0x11d58b){const _0x3d1ff0=a3_0x471e83;document['getElementById'](_0x3d1ff0(0x21f))[_0x3d1ff0(0x1f3)][_0x3d1ff0(0x251)](_0x3d1ff0(0x23b));if(confirmResolver)confirmResolver(_0x11d58b);}async function tryCancelCurrentSession(){const _0x3b8673=a3_0x471e83;if(!currentSession)return;const _0x2dd702=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x3b8673(0x29c),!![]);if(!_0x2dd702)return;const _0x5e0514=currentSession;closeAllSheets(),sessions=sessions[_0x3b8673(0x281)](_0x3cdd8f=>_0x3cdd8f['id']!==_0x5e0514['id']),reRenderBlocks(),showToast(_0x3b8673(0x278)),lastUserActionTime=Date['now']();try{const _0x51a864=window[_0x3b8673(0x247)]?.[_0x3b8673(0x293)],_0x3b3825=await fetch(API_URL,{'method':_0x3b8673(0x297),'body':JSON[_0x3b8673(0x1d2)]({'action':_0x3b8673(0x1fb),'init_data':_0x51a864?.['initData']||'','coachId':_0x5e0514[_0x3b8673(0x1c9)],'dateStr':_0x5e0514[_0x3b8673(0x1c2)],'sessionId':_0x5e0514['id']})});if(_0x3b3825['ok'])DataManager[_0x3b8673(0x231)]();}catch(_0x5dbff7){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x2895b6=a3_0x471e83;if(!currentSession)return;document[_0x2895b6(0x244)](_0x2895b6(0x1bb))[_0x2895b6(0x1f3)][_0x2895b6(0x251)](_0x2895b6(0x206)),document[_0x2895b6(0x244)]('rescheduleSheet')['classList']['add'](_0x2895b6(0x206));const _0x33fe8a=document[_0x2895b6(0x244)](_0x2895b6(0x2a1)),_0x23ee15=document['getElementById'](_0x2895b6(0x1f6));_0x33fe8a[_0x2895b6(0x285)]='',_0x23ee15[_0x2895b6(0x285)]=_0x2895b6(0x1d1);const [_0x17fddd,_0x1bbe5e]=currentSession['start'][_0x2895b6(0x28b)](':')[_0x2895b6(0x204)](Number),[_0x27cd0c,_0x4f930a]=currentSession[_0x2895b6(0x28c)][_0x2895b6(0x28b)](':')[_0x2895b6(0x204)](Number),_0x12ff7a=_0x27cd0c*0x3c+_0x4f930a-(_0x17fddd*0x3c+_0x1bbe5e);try{const _0x139868=window[_0x2895b6(0x247)]?.['WebApp'],_0x28f3f8=await fetch(API_URL,{'method':'POST','body':JSON[_0x2895b6(0x1d2)]({'action':_0x2895b6(0x264),'coachId':currentSession[_0x2895b6(0x1c9)],'duration':_0x12ff7a,'init_data':_0x139868?.[_0x2895b6(0x261)]||'','excludeSessionId':currentSession['id']})}),_0x5b5247=await _0x28f3f8['json']();_0x5b5247['ok']&&_0x5b5247[_0x2895b6(0x2a2)]?(availableSlotsCache=_0x5b5247[_0x2895b6(0x2a2)],renderRescheduleDates()):_0x23ee15[_0x2895b6(0x285)]=_0x2895b6(0x1ff);}catch(_0x34d271){_0x23ee15[_0x2895b6(0x285)]=_0x2895b6(0x21e);}}function renderRescheduleDates(){const _0xbec702=a3_0x471e83,_0xa3c0da=document[_0xbec702(0x244)](_0xbec702(0x2a1));_0xa3c0da[_0xbec702(0x285)]='';const _0x2796ac=Object[_0xbec702(0x257)](availableSlotsCache)['sort'](),_0x5bdb72=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x2796ac['length']===0x0){document[_0xbec702(0x244)](_0xbec702(0x1f6))['innerHTML']=_0xbec702(0x22a);return;}_0x2796ac[_0xbec702(0x24b)]((_0x4d470e,_0x589b25)=>{const _0x5f1ed4=_0xbec702,_0x8a18bc=new Date(_0x4d470e),_0x919d79=_0x5bdb72[_0x8a18bc['getDay']()],_0x3264da=_0x8a18bc[_0x5f1ed4(0x208)](),_0x11e04c=document[_0x5f1ed4(0x207)]('div');_0x11e04c[_0x5f1ed4(0x26e)]=_0x5f1ed4(0x20e);if(_0x589b25===0x0)_0x11e04c[_0x5f1ed4(0x1f3)][_0x5f1ed4(0x1df)]('active');_0x11e04c[_0x5f1ed4(0x285)]=_0x5f1ed4(0x238)+_0x919d79+_0x5f1ed4(0x26f)+_0x3264da+_0x5f1ed4(0x21a),_0x11e04c['onclick']=()=>selectRsDate(_0x4d470e,_0x11e04c),_0xa3c0da[_0x5f1ed4(0x209)](_0x11e04c);}),selectRsDate(_0x2796ac[0x0],_0xa3c0da[_0xbec702(0x1f0)]);}function selectRsDate(_0x500497,_0x1abe22){const _0x34d67d=a3_0x471e83;selectedRsDate=_0x500497,document[_0x34d67d(0x277)](_0x34d67d(0x23a))['forEach'](_0x172169=>_0x172169[_0x34d67d(0x1f3)]['remove'](_0x34d67d(0x1f7)));if(_0x1abe22)_0x1abe22['classList'][_0x34d67d(0x1df)](_0x34d67d(0x1f7));const _0x33256e=document[_0x34d67d(0x244)]('rsSlotsGrid');_0x33256e[_0x34d67d(0x285)]='';const _0x602705=availableSlotsCache[_0x500497]||[];if(_0x602705[_0x34d67d(0x20a)]===0x0){_0x33256e['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x602705[_0x34d67d(0x24b)](_0x1f3731=>{const _0x4a1550=_0x34d67d,_0x5e93e9=document[_0x4a1550(0x207)](_0x4a1550(0x24d));_0x5e93e9[_0x4a1550(0x26e)]=_0x4a1550(0x29e),_0x5e93e9[_0x4a1550(0x1ca)]=_0x1f3731,_0x5e93e9[_0x4a1550(0x270)]=()=>confirmReschedule(_0x1f3731),_0x33256e[_0x4a1550(0x209)](_0x5e93e9);});}async function confirmReschedule(_0x386521){const _0xdeaf15=a3_0x471e83,_0xe49999=new Date(selectedRsDate),_0x46582b=_0xe49999[_0xdeaf15(0x1cf)]('ru-RU',{'day':_0xdeaf15(0x263),'month':_0xdeaf15(0x1ef)}),_0x141ee8=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏',_0xdeaf15(0x1f2)+_0x46582b+_0xdeaf15(0x256)+_0x386521+'?',![]);if(!_0x141ee8)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0xdeaf15(0x259)]();const _0x1ea069=currentSession[_0xdeaf15(0x1c2)],_0x5318d3=currentSession['id'],[_0x4c17f5,_0x41502f]=currentSession[_0xdeaf15(0x1ee)][_0xdeaf15(0x28b)](':')[_0xdeaf15(0x204)](Number),[_0x3eb8d0,_0x52e95e]=currentSession[_0xdeaf15(0x28c)][_0xdeaf15(0x28b)](':')['map'](Number),_0x597a74=_0x3eb8d0*0x3c+_0x52e95e-(_0x4c17f5*0x3c+_0x41502f),[_0x5a68dd,_0x2dc2a0]=_0x386521[_0xdeaf15(0x28b)](':')['map'](Number),_0x1bb9ad=_0x5a68dd*0x3c+_0x2dc2a0+_0x597a74,_0x51d58c=Math[_0xdeaf15(0x227)](_0x1bb9ad/0x3c),_0x485b78=_0x1bb9ad%0x3c,_0xec48f7=String(_0x51d58c)[_0xdeaf15(0x2a6)](0x2,'0')+':'+String(_0x485b78)[_0xdeaf15(0x2a6)](0x2,'0'),_0x349ed2=sessions[_0xdeaf15(0x2a3)](_0x404bb1=>_0x404bb1['id']===_0x5318d3);_0x349ed2!==-0x1&&(sessions[_0x349ed2][_0xdeaf15(0x1c2)]=selectedRsDate,sessions[_0x349ed2][_0xdeaf15(0x1ee)]=_0x386521,sessions[_0x349ed2][_0xdeaf15(0x28c)]=_0xec48f7,reRenderBlocks());try{const _0x1ae655=window[_0xdeaf15(0x247)]?.[_0xdeaf15(0x293)],_0x4a4b03=await fetch(API_URL,{'method':_0xdeaf15(0x297),'body':JSON[_0xdeaf15(0x1d2)]({'action':'reschedule','init_data':_0x1ae655?.[_0xdeaf15(0x261)]||'','oldSessionId':_0x5318d3,'oldDate':_0x1ea069,'newDate':selectedRsDate,'newTime':_0x386521,'coachId':currentSession[_0xdeaf15(0x1c9)]})}),_0x1b4196=await _0x4a4b03['json']();!_0x1b4196['ok']?(showToast(_0xdeaf15(0x246)),DataManager['syncLoad']()):(showToast(_0xdeaf15(0x201)),DataManager[_0xdeaf15(0x231)]());}catch(_0x322818){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x471e83(0x1e3)](a3_0x471e83(0x200),init);