const a3_0x59f90e=a3_0x42ae;(function(_0x242510,_0x3acbfd){const _0xe4ee97=a3_0x42ae,_0x3753e1=_0x242510();while(!![]){try{const _0x128d8c=-parseInt(_0xe4ee97(0x1b8))/0x1*(parseInt(_0xe4ee97(0x1d8))/0x2)+-parseInt(_0xe4ee97(0x14e))/0x3+-parseInt(_0xe4ee97(0x224))/0x4+-parseInt(_0xe4ee97(0x1ff))/0x5+parseInt(_0xe4ee97(0x17f))/0x6*(-parseInt(_0xe4ee97(0x157))/0x7)+-parseInt(_0xe4ee97(0x14f))/0x8+parseInt(_0xe4ee97(0x164))/0x9*(parseInt(_0xe4ee97(0x139))/0xa);if(_0x128d8c===_0x3acbfd)break;else _0x3753e1['push'](_0x3753e1['shift']());}catch(_0x1cb6ef){_0x3753e1['push'](_0x3753e1['shift']());}}}(a3_0x32b5,0x288a8));const APP_VERSION=a3_0x59f90e(0x135),API_URL=a3_0x59f90e(0x130),GRID_H=0x3c,KEY_SESSIONS=a3_0x59f90e(0x17b),KEY_SETTINGS=a3_0x59f90e(0x13c),KEY_CLIENTS=a3_0x59f90e(0x149);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x149bc3=a3_0x59f90e,_0x5b9f5f=(function(){let _0x453041=!![];return function(_0x4f6e53,_0x480a17){const _0x2495a3=_0x453041?function(){const _0x4bceef=a3_0x42ae;if(_0x480a17){const _0x5cfb7e=_0x480a17[_0x4bceef(0x16f)](_0x4f6e53,arguments);return _0x480a17=null,_0x5cfb7e;}}:function(){};return _0x453041=![],_0x2495a3;};}()),_0x2ae90c=_0x5b9f5f(this,function(){const _0x3e449b=a3_0x42ae;return _0x2ae90c[_0x3e449b(0x13f)]()[_0x3e449b(0x1cd)](_0x3e449b(0x1a0))['toString']()[_0x3e449b(0x1ca)](_0x2ae90c)[_0x3e449b(0x1cd)]('(((.+)+)+)+$');});_0x2ae90c();try{const _0x29d377=window['Telegram']?.[_0x149bc3(0x1aa)];if(!_0x29d377)return;_0x29d377[_0x149bc3(0x1f0)](),_0x29d377[_0x149bc3(0x167)]();try{_0x29d377[_0x149bc3(0x18e)](_0x149bc3(0x20c)),_0x29d377[_0x149bc3(0x20e)]&&_0x29d377['setBackgroundColor']('#050505');}catch(_0xaf3388){console['log'](_0x149bc3(0x1c0),_0xaf3388);}try{_0x29d377[_0x149bc3(0x1b7)]&&(_0x29d377[_0x149bc3(0x1b7)][_0x149bc3(0x1ef)](),_0x29d377['BackButton'][_0x149bc3(0x1f7)](),_0x29d377[_0x149bc3(0x1b7)][_0x149bc3(0x14c)](function(){const _0x541611=_0x149bc3;window[_0x541611(0x222)][_0x541611(0x195)]='router.html';}));}catch(_0xbd7856){console[_0x149bc3(0x1e2)](_0x149bc3(0x1e4),_0xbd7856);}try{if(_0x29d377[_0x149bc3(0x148)])_0x29d377['disableVerticalSwipes']();}catch(_0xfba15){}}catch(_0x1a77ec){console['error'](_0x149bc3(0x220),_0x1a77ec);}}());function isAdmin(){const _0x2f084f=a3_0x59f90e;try{const _0x458ef8=Number(window[_0x2f084f(0x13d)]?.['WebApp']?.[_0x2f084f(0x18b)]?.[_0x2f084f(0x1a8)]?.['id']);return _0x458ef8===0xbaf7174;}catch(_0x3e20a8){return![];}}const DataManager={'saveLocally'(){const _0x2837bd=a3_0x59f90e;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x2837bd(0x1f2)](sessions)),localStorage[_0x2837bd(0x1b1)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x2837bd(0x1b1)](KEY_SETTINGS,JSON[_0x2837bd(0x1f2)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x5ed1fd){}},'loadLocal'(){const _0xd3184=a3_0x59f90e;try{const _0x13566d=localStorage['getItem'](KEY_SESSIONS);if(_0x13566d)sessions=JSON[_0xd3184(0x1a9)](_0x13566d);const _0x4518fb=localStorage['getItem'](KEY_CLIENTS);if(_0x4518fb)clients=JSON['parse'](_0x4518fb);const _0x9d92c6=localStorage[_0xd3184(0x219)](KEY_SETTINGS);if(_0x9d92c6){const _0x5d583e=JSON[_0xd3184(0x1a9)](_0x9d92c6);if(_0x5d583e[_0xd3184(0x13b)])availabilityPattern=_0x5d583e[_0xd3184(0x13b)];if(_0x5d583e[_0xd3184(0x1e3)])specialRanges=_0x5d583e[_0xd3184(0x1e3)];if(_0x5d583e[_0xd3184(0x18d)])dateExceptions=_0x5d583e[_0xd3184(0x18d)];}}catch(_0x1d2a29){}},async 'syncLoad'(){const _0x1b1457=a3_0x59f90e,_0x32525a=new Date(),_0x25199f=_0x32525a[_0x1b1457(0x1b4)]()+'-'+String(_0x32525a[_0x1b1457(0x19f)]()+0x1)[_0x1b1457(0x1a7)](0x2,'0'),_0x4982ca=new Date(_0x32525a);_0x4982ca[_0x1b1457(0x1a3)](_0x32525a[_0x1b1457(0x19f)]()+0x1);const _0x38d726=_0x4982ca[_0x1b1457(0x1b4)]()+'-'+String(_0x4982ca['getMonth']()+0x1)['padStart'](0x2,'0'),_0x5f1d5a=Date[_0x1b1457(0x1cc)]();try{const _0x1bc01c=window['Telegram']?.['WebApp'],_0x5644bd=_0x1bc01c?.[_0x1b1457(0x1d5)]||'',[_0x1aad54,_0x57aebf]=await Promise[_0x1b1457(0x1f9)]([fetch(API_URL,{'method':'POST','body':JSON[_0x1b1457(0x1f2)]({'action':_0x1b1457(0x198),'init_data':_0x5644bd,'month_str':_0x25199f})})[_0x1b1457(0x1db)](_0x3948b4=>_0x3948b4[_0x1b1457(0x131)]()),fetch(API_URL,{'method':_0x1b1457(0x180),'body':JSON[_0x1b1457(0x1f2)]({'action':_0x1b1457(0x198),'init_data':_0x5644bd,'month_str':_0x38d726})})[_0x1b1457(0x1db)](_0x53b69e=>_0x53b69e[_0x1b1457(0x131)]())]);if(lastUserActionTime>_0x5f1d5a){console['log']('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x1aad54['ok'])this['applyData'](_0x1aad54[_0x1b1457(0x1ed)],_0x25199f);if(_0x57aebf['ok'])this[_0x1b1457(0x163)](_0x57aebf['data'],_0x38d726);this['saveLocally']();}catch(_0x3c607f){}},'applyData'(_0x5770d3,_0x50cea8){const _0x3ed991=a3_0x59f90e;if(!_0x5770d3)return;if(_0x5770d3[_0x3ed991(0x1ae)]){if(_0x5770d3['settings'][_0x3ed991(0x13b)])availabilityPattern=_0x5770d3[_0x3ed991(0x1ae)][_0x3ed991(0x13b)];if(_0x5770d3[_0x3ed991(0x1ae)][_0x3ed991(0x1e3)])specialRanges=_0x5770d3['settings'][_0x3ed991(0x1e3)];if(_0x5770d3[_0x3ed991(0x1ae)][_0x3ed991(0x18d)])dateExceptions=_0x5770d3[_0x3ed991(0x1ae)][_0x3ed991(0x18d)];}if(_0x5770d3[_0x3ed991(0x208)]&&Array['isArray'](_0x5770d3[_0x3ed991(0x208)]))clients=_0x5770d3[_0x3ed991(0x208)];_0x5770d3[_0x3ed991(0x1e6)]&&(coachProfiles={...coachProfiles,..._0x5770d3[_0x3ed991(0x1e6)]}),_0x5770d3[_0x3ed991(0x1c7)]&&(sessions=sessions[_0x3ed991(0x1dc)](_0x855439=>!_0x855439[_0x3ed991(0x218)]['startsWith'](_0x50cea8)),Object[_0x3ed991(0x162)](_0x5770d3['calendar'])[_0x3ed991(0x18c)](_0x34eeee=>{const _0x3c9cd1=_0x3ed991,_0x98e472=_0x5770d3[_0x3c9cd1(0x1c7)][_0x34eeee];_0x98e472[_0x3c9cd1(0x18c)](_0x5694aa=>{const _0x10729b=_0x3c9cd1;sessions[_0x10729b(0x182)]({'id':_0x5694aa['i'],'clientId':_0x5694aa['c'],'coachId':_0x5694aa['cid'],'dateStr':_0x50cea8+'-'+_0x34eeee['padStart'](0x2,'0'),'start':_0x5694aa['s'],'end':_0x5694aa['e'],'note':_0x5694aa['n']||'','status':_0x5694aa['st']||'planned','seriesId':_0x5694aa[_0x10729b(0x1a1)]});});})),reRenderBlocks();}};function init(){const _0x463806=a3_0x59f90e;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x463806(0x21f)](_0x463806(0x1da))[_0x463806(0x1c4)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x463806(0x14b)]();}function renderTimeColumn(){const _0x9c91d1=a3_0x59f90e,_0x2b6a7d=document['getElementById'](_0x9c91d1(0x1b3)),_0x3b9c51=document['getElementById']('timeLineBadge');_0x2b6a7d[_0x9c91d1(0x209)]='',_0x2b6a7d[_0x9c91d1(0x1b5)](_0x3b9c51);for(let _0x3a7895=0x0;_0x3a7895<0x18;_0x3a7895++){const _0x510ebc=document['createElement'](_0x9c91d1(0x13e));_0x510ebc['className']=_0x9c91d1(0x221);if(_0x3a7895>0x0)_0x510ebc[_0x9c91d1(0x209)]=_0x9c91d1(0x1f5)+String(_0x3a7895)[_0x9c91d1(0x1a7)](0x2,'0')+_0x9c91d1(0x12f);_0x2b6a7d[_0x9c91d1(0x1b5)](_0x510ebc);}}function renderDayRange(_0x3ceecf,_0xbd6fdc){const _0x57847f=a3_0x59f90e,_0x4e633a=document[_0x57847f(0x21f)](_0x57847f(0x1f1)),_0x1aee97=document['getElementById'](_0x57847f(0x199)),_0x59feac=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xd4b125=new Date();_0xd4b125['setHours'](0x0,0x0,0x0,0x0);const _0x73faa3=getLocalDateStr(new Date());for(let _0x460a92=_0x3ceecf;_0x460a92<=_0xbd6fdc;_0x460a92++){const _0x5528f9=new Date(_0xd4b125);_0x5528f9['setDate'](_0x5528f9[_0x57847f(0x1ba)]()+_0x460a92);const _0x54b659=getLocalDateStr(_0x5528f9);let _0x2a255b=_0x5528f9['getDay']()-0x1;if(_0x2a255b===-0x1)_0x2a255b=0x6;const _0x522848=_0x54b659===_0x73faa3,_0x258ec0=document[_0x57847f(0x159)](_0x57847f(0x13e));_0x258ec0[_0x57847f(0x146)]=_0x57847f(0x19b)+(_0x522848?_0x57847f(0x187):''),_0x258ec0[_0x57847f(0x178)](_0x57847f(0x15b),_0x54b659),_0x258ec0[_0x57847f(0x209)]=_0x57847f(0x207)+_0x59feac[_0x2a255b]+_0x57847f(0x193)+_0x5528f9[_0x57847f(0x1ba)]()+_0x57847f(0x192),_0x4e633a[_0x57847f(0x1b5)](_0x258ec0);const _0x23c8c4=document['createElement'](_0x57847f(0x13e));_0x23c8c4[_0x57847f(0x146)]=_0x57847f(0x191)+(_0x522848?'today':''),_0x23c8c4[_0x57847f(0x178)](_0x57847f(0x15b),_0x54b659),_0x23c8c4['setAttribute']('data-day-idx',_0x2a255b),_0x1aee97[_0x57847f(0x1b5)](_0x23c8c4);}}function reRenderBlocks(){const _0x39b5fb=a3_0x59f90e;document[_0x39b5fb(0x214)](_0x39b5fb(0x15c))[_0x39b5fb(0x18c)](_0x54d739=>{const _0x373d25=_0x39b5fb;_0x54d739['querySelectorAll']('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')['forEach'](_0x3fedbd=>_0x3fedbd[_0x373d25(0x12e)]());const _0x3e3c75=_0x54d739[_0x373d25(0x132)](_0x373d25(0x15b)),_0x5641a9=parseInt(_0x54d739[_0x373d25(0x132)](_0x373d25(0x19a))),_0x1c5278=Math['round'](_0x54d739[_0x373d25(0x14d)]);(availabilityPattern[_0x5641a9]||[])['forEach'](_0x3b48dd=>{const _0x56cbf1=_0x373d25,_0x3a9c81=document['createElement'](_0x56cbf1(0x13e));_0x3a9c81[_0x56cbf1(0x146)]=_0x56cbf1(0x212),_0x3a9c81['style'][_0x56cbf1(0x161)]=_0x3b48dd*GRID_H+'px',_0x3a9c81[_0x56cbf1(0x160)]['backgroundPosition']='-'+_0x1c5278+_0x56cbf1(0x1dd)+_0x3b48dd*GRID_H+'px',_0x54d739[_0x56cbf1(0x1b5)](_0x3a9c81);});if(specialRanges[_0x373d25(0x1d4)]>0x0){const _0x5b87f2=new Date(_0x3e3c75+_0x373d25(0x1a5))[_0x373d25(0x15e)](),_0x191454=new Date(_0x3e3c75+_0x373d25(0x1b0))[_0x373d25(0x15e)]();specialRanges[_0x373d25(0x18c)](_0x13b1e7=>{const _0x885edd=_0x373d25,_0x4b288f=new Date(_0x13b1e7['start'])['getTime'](),_0x3c9971=new Date(_0x13b1e7['end'])[_0x885edd(0x15e)](),_0x2e5d03=Math['max'](_0x5b87f2,_0x4b288f),_0x261530=Math['min'](_0x191454,_0x3c9971);if(_0x2e5d03<_0x261530){const _0x2ab613=(_0x2e5d03-_0x5b87f2)/0x36ee80*GRID_H,_0x330516=(_0x261530-_0x2e5d03)/0x36ee80*GRID_H,_0x3cef65=document[_0x885edd(0x159)](_0x885edd(0x13e));_0x330516>=23.5*GRID_H?(_0x3cef65[_0x885edd(0x146)]=_0x885edd(0x14a),_0x3cef65[_0x885edd(0x160)][_0x885edd(0x1b6)]='-'+_0x1c5278+_0x885edd(0x170)):(_0x3cef65[_0x885edd(0x146)]=_0x885edd(0x188),_0x3cef65[_0x885edd(0x160)][_0x885edd(0x161)]=_0x2ab613+'px',_0x3cef65[_0x885edd(0x160)]['height']=_0x330516+'px',_0x3cef65[_0x885edd(0x160)][_0x885edd(0x1b6)]='-'+_0x1c5278+_0x885edd(0x1dd)+_0x2ab613+'px'),_0x54d739['appendChild'](_0x3cef65);}});}renderEventsForColumn(_0x54d739,_0x3e3c75);});}function renderEventsForColumn(_0x49fd0f,_0x1a5aaa){const _0x20e7fc=a3_0x59f90e,_0x42553f=sessions[_0x20e7fc(0x1dc)](_0x30e1ff=>_0x30e1ff['dateStr']===_0x1a5aaa),_0x2310a4=_0x42553f[_0x20e7fc(0x142)](_0x3db021=>{const _0x442611=_0x20e7fc,[_0x555275,_0x1c29e8]=_0x3db021['start'][_0x442611(0x155)](':')[_0x442611(0x142)](Number),[_0x33f67a,_0x205ff2]=_0x3db021[_0x442611(0x145)]['split'](':')[_0x442611(0x142)](Number);return{'data':_0x3db021,'start':_0x555275*0x3c+_0x1c29e8,'end':_0x33f67a*0x3c+_0x205ff2,'colIndex':0x0};});_0x2310a4['sort']((_0x104006,_0x4a5d4f)=>_0x104006['start']-_0x4a5d4f['start']||_0x4a5d4f[_0x20e7fc(0x145)]-_0x4a5d4f[_0x20e7fc(0x185)]-(_0x104006[_0x20e7fc(0x145)]-_0x104006[_0x20e7fc(0x185)]));const _0x318572=[];_0x2310a4[_0x20e7fc(0x18c)](_0x5bd4cf=>{const _0xd0e690=_0x20e7fc;let _0x4ad3e2=![];for(let _0x5b6f43=0x0;_0x5b6f43<_0x318572[_0xd0e690(0x1d4)];_0x5b6f43++){const _0x11f6ef=_0x318572[_0x5b6f43];if(_0x5bd4cf[_0xd0e690(0x185)]>=_0x11f6ef[_0x11f6ef[_0xd0e690(0x1d4)]-0x1][_0xd0e690(0x145)]){_0x11f6ef[_0xd0e690(0x182)](_0x5bd4cf),_0x5bd4cf[_0xd0e690(0x153)]=_0x5b6f43,_0x4ad3e2=!![];break;}}!_0x4ad3e2&&(_0x318572['push']([_0x5bd4cf]),_0x5bd4cf['colIndex']=_0x318572[_0xd0e690(0x1d4)]-0x1);}),_0x2310a4[_0x20e7fc(0x18c)](_0x318025=>{const _0x5806d6=_0x20e7fc;let _0x19dc0a=0x0;_0x2310a4[_0x5806d6(0x18c)](_0x4e5479=>{const _0x212eec=_0x5806d6;if(Math[_0x212eec(0x1f8)](_0x318025['start'],_0x4e5479['start'])<Math['min'](_0x318025[_0x212eec(0x145)],_0x4e5479['end'])&&_0x4e5479['colIndex']>_0x19dc0a)_0x19dc0a=_0x4e5479[_0x212eec(0x153)];});const _0x3edea2=_0x19dc0a+0x1,_0x2bb77b=0x64/_0x3edea2,_0x313f08=_0x318025[_0x5806d6(0x153)]*_0x2bb77b,_0x3f734c=document[_0x5806d6(0x159)]('div'),_0x5835f4=_0x318025[_0x5806d6(0x1ed)];let _0x2f8a15=_0x5806d6(0x137);if(clients&&clients[_0x5806d6(0x1d4)]>0x0){const _0x521d86=clients['find'](_0x23ec35=>String(_0x23ec35['id'])===String(_0x5835f4[_0x5806d6(0x176)]));if(_0x521d86&&_0x521d86['color'])_0x2f8a15=_0x521d86[_0x5806d6(0x1c5)];}const _0x3fd97d=_0x5835f4[_0x5806d6(0x196)]===_0x5806d6(0x202),_0xfdf42d=_0x3fd97d?0x1:0.45;_0x3f734c[_0x5806d6(0x146)]=_0x5806d6(0x1ad)+(_0x3fd97d?_0x5806d6(0x1bb):''),_0x3f734c['style'][_0x5806d6(0x216)]=hexToRgba(_0x2f8a15,_0xfdf42d),_0x3f734c[_0x5806d6(0x160)][_0x5806d6(0x1fc)]=_0x2f8a15;const _0x1f973a=_0x318025[_0x5806d6(0x185)]/0x3c*GRID_H,_0xf46d7d=(_0x318025[_0x5806d6(0x145)]-_0x318025[_0x5806d6(0x185)])/0x3c*GRID_H;_0x3f734c[_0x5806d6(0x160)][_0x5806d6(0x161)]=_0x1f973a+'px',_0x3f734c[_0x5806d6(0x160)][_0x5806d6(0x136)]=Math[_0x5806d6(0x1f8)](_0xf46d7d,0x14)+'px',_0x3f734c['style']['width']=_0x5806d6(0x1c3)+_0x2bb77b+_0x5806d6(0x20d),_0x3f734c[_0x5806d6(0x160)][_0x5806d6(0x1bc)]=_0x5806d6(0x1c3)+_0x313f08+_0x5806d6(0x1bd),_0x3f734c[_0x5806d6(0x160)][_0x5806d6(0x152)]=0xa+_0x318025[_0x5806d6(0x153)];if(_0x2bb77b<0x55)_0x3f734c['classList'][_0x5806d6(0x17c)](_0x5806d6(0x1ab));let _0x460c69='';if(_0x5835f4[_0x5806d6(0x186)])_0x460c69+=_0x5806d6(0x19e);if(_0x3fd97d)_0x460c69+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x3f734c[_0x5806d6(0x209)]=_0x5806d6(0x210)+_0x5835f4[_0x5806d6(0x185)]+'\x20-\x20'+_0x5835f4[_0x5806d6(0x145)]+_0x5806d6(0x1cb)+_0x460c69+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3f734c['onclick']=_0x34ff9c=>{_0x34ff9c['stopPropagation'](),openDetails(_0x5835f4);},_0x49fd0f['appendChild'](_0x3f734c);});}function openAnalytics(){const _0x42ccb2=a3_0x59f90e,_0x1897d7=document[_0x42ccb2(0x20f)](_0x42ccb2(0x169));setAnalyticsPeriod(_0x42ccb2(0x16b),_0x1897d7),openSheet(_0x42ccb2(0x16e));}function setAnalyticsPeriod(_0xeef9c5,_0x29e8b5){const _0x4eea10=a3_0x59f90e;currentAnPeriod=_0xeef9c5,document[_0x4eea10(0x214)](_0x4eea10(0x169))['forEach'](_0x46cd01=>_0x46cd01[_0x4eea10(0x172)][_0x4eea10(0x12e)](_0x4eea10(0x143)));if(_0x29e8b5)_0x29e8b5[_0x4eea10(0x172)][_0x4eea10(0x17c)](_0x4eea10(0x143));const _0x3f4a45=document[_0x4eea10(0x21f)](_0x4eea10(0x1c6));_0x3f4a45[_0x4eea10(0x160)][_0x4eea10(0x13a)]=_0xeef9c5===_0x4eea10(0x1d7)?'flex':_0x4eea10(0x223);const _0x1384be=new Date();let _0x396edc=new Date(),_0x4354e3=new Date();if(_0xeef9c5===_0x4eea10(0x16b))_0x396edc=getStartOfWeek(_0x1384be),_0x4354e3=new Date(_0x396edc),_0x4354e3[_0x4eea10(0x1d1)](_0x4354e3['getDate']()+0x6);else{if(_0xeef9c5===_0x4eea10(0x1d9))_0x396edc=new Date(_0x1384be[_0x4eea10(0x1b4)](),_0x1384be[_0x4eea10(0x19f)](),0x1),_0x4354e3=new Date(_0x1384be[_0x4eea10(0x1b4)](),_0x1384be['getMonth']()+0x1,0x0);else{!document[_0x4eea10(0x21f)](_0x4eea10(0x177))[_0x4eea10(0x173)]&&(document['getElementById'](_0x4eea10(0x177))[_0x4eea10(0x173)]=getLocalDateStr(_0x1384be),document[_0x4eea10(0x21f)](_0x4eea10(0x147))[_0x4eea10(0x173)]=getLocalDateStr(_0x1384be));refreshAnalytics();return;}}document['getElementById']('anStart')[_0x4eea10(0x173)]=getLocalDateStr(_0x396edc),document[_0x4eea10(0x21f)](_0x4eea10(0x147))[_0x4eea10(0x173)]=getLocalDateStr(_0x4354e3),refreshAnalytics();}function a3_0x32b5(){const _0x423fb4=['uc_client_sessions','add','toLocaleDateString','toast','373146NPeulQ','POST','button','push','.btn-reschedule','detStatus','start','seriesId','today','blocked-range-part\x20stripe-bg','setHours','anTotalStats','initDataUnsafe','forEach','exceptions','setHeaderColor','reschedule','auto','day-column\x20','</div>','</div><div\x20class=\x22dch-num\x22>','toUpperCase','href','status','var(--acc-green)','client_load','gridColumns','data-day-idx','day-col-header\x20','\x20–∏–∑\x20','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','getMonth','(((.+)+)+)+$','sid','entries','setMonth','get_slots','T00:00:00','–∑–∞\x20','padStart','user','parse','WebApp','mini','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','event-card','settings','long','T23:59:59','setItem','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','timeColumn','getFullYear','appendChild','backgroundPosition','BackButton','14169SfdAoY','total','getDate','\x20status-completed','left','%\x20+\x202px)','.btn-cancel','createDocumentFragment','Error\x20setting\x20color:','scrollTo','substr','calc(','addEventListener','color','anCustomDates','calendar','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','insertBefore','constructor','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','now','search','scrollWidth','detTime','round','setDate','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','open','length','initData','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','custom','28kJTayH','month','matrixViewport','then','filter','px\x20-','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','scrollTop','</div><div\x20class=\x22rs-day-num\x22>','log','ranges','Error\x20setting\x20back\x20button:','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','coach_profiles','ccYesBtn','block','600','ccTitle','join','<div\x20class=\x22rs-day-name\x22>','data','rgba(','show','ready','daysHeaderTrack','stringify','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','<span>','rsDatesTrack','offClick','max','all','var(--acc-blue)','detDate','borderLeftColor','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','cancelContainer','1609940AAAesL','\x20—á.','onclick','completed','firstChild','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','getHours','textContent','<div\x20class=\x22dch-day\x22>','clients','innerHTML','toLocaleString','ru-RU','#050505','%\x20-\x204px)','setBackgroundColor','querySelector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','getDay','blocked-slot\x20stripe-bg','coachId','querySelectorAll','.rs-date-chip','backgroundColor','findIndex','dateStr','getItem','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','sort','.day-col-header','getMinutes','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','getElementById','Critical\x20TMA\x20Error:','time-label','location','none','854040xbiLEd','rgba(10,\x20132,\x20255,\x20','fontWeight','remove',':00</span>','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','json','getAttribute','substring','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','v9.5-CLIENT-ANALYTICS','height','#0a84ff','.sheet','2065990hjZQlx','display','pattern','uc_client_settings','Telegram','div','toString','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','</span>\x20/\x20','map','active','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','end','className','anEnd','disableVerticalSwipes','uc_client_list','day-off-overlay\x20stripe-bg','syncLoad','onClick','offsetLeft','965259VDgpRn','303576rNIyan','floor','\x20–≤\x20','zIndex','colIndex','#ff453a','split','overlay','21tdRBJb','clientWidth','createElement','note','data-date','.day-column','strokeDashoffset','getTime','charAt','style','top','keys','applyData','63zvGfaQ','rs-date-chip','visible','expand','.day-col-header[data-date=\x22','.period-switch\x20.p-btn','rsSlotsGrid','week','numeric','headerMonth','analyticsSheet','apply','px\x200px','scrollLeft','classList','value','anDonutCircle','timeLineBadge','clientId','anStart','setAttribute','customConfirm','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>'];a3_0x32b5=function(){return _0x423fb4;};return a3_0x32b5();}function refreshAnalytics(){const _0xa1a43b=a3_0x59f90e,_0x3c8b99=document[_0xa1a43b(0x21f)](_0xa1a43b(0x177))[_0xa1a43b(0x173)],_0x15fafc=document[_0xa1a43b(0x21f)](_0xa1a43b(0x147))['value'];if(!_0x3c8b99||!_0x15fafc)return;const _0x2ee8ed=sessions['filter'](_0x342c3e=>_0x342c3e['dateStr']>=_0x3c8b99&&_0x342c3e['dateStr']<=_0x15fafc&&_0x342c3e[_0xa1a43b(0x196)]!=='cancelled'),_0x23284d=_0x2ee8ed['length'],_0x28bcce=_0x2ee8ed['filter'](_0xab40b3=>_0xab40b3[_0xa1a43b(0x196)]===_0xa1a43b(0x202))[_0xa1a43b(0x1d4)],_0x4e8152=_0x23284d>0x0?Math[_0xa1a43b(0x1d0)](_0x28bcce/_0x23284d*0x64):0x0;document[_0xa1a43b(0x21f)]('anPercent')[_0xa1a43b(0x206)]=_0x4e8152+'%',document[_0xa1a43b(0x21f)](_0xa1a43b(0x18a))[_0xa1a43b(0x206)]=_0x28bcce+_0xa1a43b(0x19c)+_0x23284d+_0xa1a43b(0x1df);const _0xe914ac=document['getElementById'](_0xa1a43b(0x174)),_0x39d796=0x2*Math['PI']*0x23,_0xe90316=_0x39d796-_0x4e8152/0x64*_0x39d796;_0xe914ac[_0xa1a43b(0x160)][_0xa1a43b(0x15d)]=_0xe90316;const _0x23c20e={};_0x2ee8ed[_0xa1a43b(0x18c)](_0x47a04d=>{const _0x14b973=_0xa1a43b,_0x25b587=_0x47a04d[_0x14b973(0x213)]||'Unknown';if(!_0x23c20e[_0x25b587]){const _0x33b5de='#'+_0x25b587[_0x14b973(0x13f)]()[_0x14b973(0x1c2)](0x0,0x6);_0x23c20e[_0x25b587]={'total':0x0,'done':0x0,'color':_0x33b5de};}_0x23c20e[_0x25b587][_0x14b973(0x1b9)]++;if(_0x47a04d['status']===_0x14b973(0x202))_0x23c20e[_0x25b587]['done']++;});const _0x35d763=document[_0xa1a43b(0x21f)]('analyticsList');_0x35d763[_0xa1a43b(0x209)]='';const _0x5317f1=Object[_0xa1a43b(0x1a2)](_0x23c20e)[_0xa1a43b(0x21b)]((_0x412bc5,_0x214ae9)=>_0x214ae9[0x1][_0xa1a43b(0x1b9)]-_0x412bc5[0x1][_0xa1a43b(0x1b9)]);if(_0x5317f1['length']===0x0){_0x35d763[_0xa1a43b(0x209)]=_0xa1a43b(0x1d2);return;}_0x5317f1['forEach'](([_0x53c2c7,_0x132e6a])=>{const _0x384ff8=_0xa1a43b,_0x1578ca=Math['round'](_0x132e6a['done']/_0x132e6a[_0x384ff8(0x1b9)]*0x64),_0x635cdb=document[_0x384ff8(0x159)]('div');_0x635cdb[_0x384ff8(0x146)]='client-stat-card',_0x635cdb[_0x384ff8(0x160)]['borderLeftColor']=_0x132e6a['color'],_0x635cdb[_0x384ff8(0x209)]=_0x384ff8(0x1ac)+_0x53c2c7['substr'](0x0,0x5)+_0x384ff8(0x1f3)+_0x132e6a['done']+_0x384ff8(0x141)+_0x132e6a['total']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x1578ca+_0x384ff8(0x1de),_0x35d763[_0x384ff8(0x1b5)](_0x635cdb);});}function openDetails(_0x2d6f1d){const _0x2050b8=a3_0x59f90e;currentSession=_0x2d6f1d;const _0x32f3d8=new Date(_0x2d6f1d[_0x2050b8(0x218)]),_0x44b575=_0x32f3d8[_0x2050b8(0x17d)](_0x2050b8(0x20b),{'weekday':_0x2050b8(0x1af),'day':'numeric','month':'long'});document[_0x2050b8(0x21f)](_0x2050b8(0x1fb))['textContent']=_0x44b575[_0x2050b8(0x15f)](0x0)[_0x2050b8(0x194)]()+_0x44b575['slice'](0x1),document[_0x2050b8(0x21f)](_0x2050b8(0x1cf))['textContent']=_0x2d6f1d['start']+'\x20-\x20'+_0x2d6f1d['end'],document[_0x2050b8(0x21f)]('detNote')[_0x2050b8(0x206)]=_0x2d6f1d[_0x2050b8(0x15a)]||_0x2050b8(0x21e);const _0x11e114=document['getElementById'](_0x2050b8(0x184)),_0x156c18=document[_0x2050b8(0x21f)](_0x2050b8(0x1fe)),_0x251d75=_0x156c18['querySelector'](_0x2050b8(0x1be)),_0x55191f=_0x156c18[_0x2050b8(0x20f)](_0x2050b8(0x183)),_0xbdc04a=document[_0x2050b8(0x21f)]('cancelHint');if(_0x2d6f1d['status']===_0x2050b8(0x202))_0x11e114[_0x2050b8(0x206)]=_0x2050b8(0x1e5),_0x11e114[_0x2050b8(0x160)][_0x2050b8(0x1c5)]=_0x2050b8(0x197),_0x156c18['style'][_0x2050b8(0x13a)]=_0x2050b8(0x223);else{_0x11e114['textContent']='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x11e114[_0x2050b8(0x160)][_0x2050b8(0x1c5)]=_0x2050b8(0x1fa),_0x156c18[_0x2050b8(0x160)][_0x2050b8(0x13a)]='block';const _0x35990b=new Date(_0x2d6f1d[_0x2050b8(0x218)]+'T'+_0x2d6f1d['start']),_0x2b0e8f=new Date(),_0x3078e8=(_0x35990b-_0x2b0e8f)/(0x3e8*0x3c*0x3c),_0x5278c9=coachProfiles[_0x2d6f1d[_0x2050b8(0x213)]]&&coachProfiles[_0x2d6f1d[_0x2050b8(0x213)]]['cancel_window']?parseInt(coachProfiles[_0x2d6f1d[_0x2050b8(0x213)]]['cancel_window']):0x18;if(_0x5278c9===0x0||_0x3078e8>=_0x5278c9)_0x251d75['style']['display']='block',_0x55191f[_0x2050b8(0x160)][_0x2050b8(0x13a)]=_0x2050b8(0x1e8),_0xbdc04a[_0x2050b8(0x160)]['display']=_0x2050b8(0x223);else{_0x251d75[_0x2050b8(0x160)][_0x2050b8(0x13a)]='none',_0x55191f[_0x2050b8(0x160)][_0x2050b8(0x13a)]=_0x2050b8(0x223),_0xbdc04a[_0x2050b8(0x160)][_0x2050b8(0x13a)]=_0x2050b8(0x1e8);let _0x2c2193=_0x5278c9===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x2050b8(0x1a6)+_0x5278c9+_0x2050b8(0x200);_0xbdc04a[_0x2050b8(0x206)]=_0x2050b8(0x1c8)+_0x2c2193+_0x2050b8(0x1d6);}}document['getElementById'](_0x2050b8(0x156))[_0x2050b8(0x172)]['add'](_0x2050b8(0x143)),document[_0x2050b8(0x21f)]('detailsSheet')[_0x2050b8(0x172)][_0x2050b8(0x17c)](_0x2050b8(0x1d3));}function closeAllSheets(){const _0x188ff0=a3_0x59f90e;document[_0x188ff0(0x21f)](_0x188ff0(0x156))[_0x188ff0(0x172)][_0x188ff0(0x12e)](_0x188ff0(0x143)),document[_0x188ff0(0x214)](_0x188ff0(0x138))[_0x188ff0(0x18c)](_0x2ff38c=>_0x2ff38c['classList'][_0x188ff0(0x12e)]('open'));}function openSheet(_0x32cbe2){const _0x268174=a3_0x59f90e;document[_0x268174(0x21f)](_0x268174(0x156))[_0x268174(0x172)][_0x268174(0x17c)]('active'),document[_0x268174(0x21f)](_0x32cbe2)[_0x268174(0x172)][_0x268174(0x17c)](_0x268174(0x1d3));}function getLocalDateStr(_0xdadffa){const _0x49f271=a3_0x59f90e,_0x252732=_0xdadffa[_0x49f271(0x1b4)](),_0x46bb6b=String(_0xdadffa[_0x49f271(0x19f)]()+0x1)[_0x49f271(0x1a7)](0x2,'0'),_0x1f1f10=String(_0xdadffa[_0x49f271(0x1ba)]())[_0x49f271(0x1a7)](0x2,'0');return _0x252732+'-'+_0x46bb6b+'-'+_0x1f1f10;}function getStartOfWeek(_0x227be1){const _0x341a98=a3_0x59f90e,_0xf234ed=new Date(_0x227be1),_0x50613c=_0xf234ed[_0x341a98(0x211)](),_0x315cb2=_0xf234ed[_0x341a98(0x1ba)]()-_0x50613c+(_0x50613c===0x0?-0x6:0x1);return _0xf234ed[_0x341a98(0x1d1)](_0x315cb2),_0xf234ed['setHours'](0x0,0x0,0x0,0x0),_0xf234ed;}function scrollToToday(){const _0x1d5d3b=getLocalDateStr(new Date());setTimeout(()=>{const _0x437e92=a3_0x42ae,_0x4b6565=document[_0x437e92(0x20f)](_0x437e92(0x168)+_0x1d5d3b+'\x22]');if(_0x4b6565){const _0x35c336=document[_0x437e92(0x21f)](_0x437e92(0x1da)),_0x4e8902=_0x4b6565[_0x437e92(0x14d)]-_0x35c336[_0x437e92(0x158)]/0x2+_0x4b6565['offsetWidth']/0x2;_0x35c336[_0x437e92(0x1c1)]({'left':_0x4e8902,'behavior':_0x437e92(0x190)}),_0x35c336[_0x437e92(0x1e0)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x1d4819=a3_0x59f90e,_0x259d47=new Date(),_0x137e82=document[_0x1d4819(0x21f)]('globalTimeLine'),_0x2becce=document[_0x1d4819(0x21f)](_0x1d4819(0x175)),_0x543963=(_0x259d47[_0x1d4819(0x205)]()*0x3c+_0x259d47[_0x1d4819(0x21d)]())/0x3c*GRID_H;_0x137e82[_0x1d4819(0x160)]['top']=_0x543963+'px',_0x137e82[_0x1d4819(0x160)]['display']=_0x1d4819(0x1e8),_0x2becce[_0x1d4819(0x160)][_0x1d4819(0x161)]=_0x543963+'px',_0x2becce['style'][_0x1d4819(0x13a)]='block',_0x2becce['textContent']=String(_0x259d47[_0x1d4819(0x205)]())[_0x1d4819(0x1a7)](0x2,'0')+':'+String(_0x259d47[_0x1d4819(0x21d)]())[_0x1d4819(0x1a7)](0x2,'0');}function onScroll(){const _0x3c3fff=a3_0x59f90e,_0x95a6c8=document['getElementById'](_0x3c3fff(0x1da)),_0x5b8a43=document[_0x3c3fff(0x214)](_0x3c3fff(0x21c));for(let _0x47b076 of _0x5b8a43)if(_0x47b076['offsetLeft']>=_0x95a6c8[_0x3c3fff(0x171)]){const _0x44e6b1=new Date(_0x47b076[_0x3c3fff(0x132)](_0x3c3fff(0x15b)));document[_0x3c3fff(0x21f)](_0x3c3fff(0x16d))[_0x3c3fff(0x206)]=_0x44e6b1[_0x3c3fff(0x20a)]('ru',{'month':_0x3c3fff(0x1af)})['toUpperCase']()+'\x20'+_0x44e6b1[_0x3c3fff(0x1b4)]();break;}}function showToast(_0x2d9aba){const _0x2688fd=a3_0x59f90e,_0x549e3e=document[_0x2688fd(0x21f)](_0x2688fd(0x17e));_0x549e3e[_0x2688fd(0x206)]=_0x2d9aba,_0x549e3e[_0x2688fd(0x172)][_0x2688fd(0x17c)](_0x2688fd(0x1ef)),setTimeout(()=>_0x549e3e['classList'][_0x2688fd(0x12e)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x4bb499=a3_0x59f90e,_0x327564=document[_0x4bb499(0x21f)](_0x4bb499(0x1da)),_0x5e6574=_0x327564[_0x4bb499(0x171)],_0x1c04db=_0x327564[_0x4bb499(0x1ce)],_0x524e1e=_0x327564[_0x4bb499(0x158)];if(_0x1c04db-(_0x5e6574+_0x524e1e)<0x12c){const _0x1b4d0e=endOffset;endOffset+=0xe,renderDayRange(_0x1b4d0e+0x1,endOffset),reRenderBlocks();}if(_0x5e6574<0x12c){const _0x51d5bd=startOffset;startOffset-=0xe,prependDays(startOffset,_0x51d5bd-0x1),_0x327564['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x4885b1,_0x590b98){const _0x19d944=a3_0x59f90e,_0x3e13a0=document[_0x19d944(0x21f)]('daysHeaderTrack'),_0x4b30a9=document[_0x19d944(0x21f)](_0x19d944(0x199)),_0x4b22d4=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2ba30d=new Date();_0x2ba30d[_0x19d944(0x189)](0x0,0x0,0x0,0x0);const _0x193add=getLocalDateStr(new Date()),_0x4be5ef=document[_0x19d944(0x1bf)](),_0x1c44d9=document[_0x19d944(0x1bf)]();for(let _0x4e1a05=_0x4885b1;_0x4e1a05<=_0x590b98;_0x4e1a05++){const _0xa3e2d7=new Date(_0x2ba30d);_0xa3e2d7[_0x19d944(0x1d1)](_0xa3e2d7[_0x19d944(0x1ba)]()+_0x4e1a05);const _0x4ef903=getLocalDateStr(_0xa3e2d7);let _0x36855d=_0xa3e2d7['getDay']()-0x1;if(_0x36855d===-0x1)_0x36855d=0x6;const _0x54aa41=_0x4ef903===_0x193add,_0x6e000f=document[_0x19d944(0x159)](_0x19d944(0x13e));_0x6e000f[_0x19d944(0x146)]=_0x19d944(0x19b)+(_0x54aa41?_0x19d944(0x187):''),_0x6e000f[_0x19d944(0x178)](_0x19d944(0x15b),_0x4ef903),_0x6e000f[_0x19d944(0x209)]=_0x19d944(0x207)+_0x4b22d4[_0x36855d]+'</div><div\x20class=\x22dch-num\x22>'+_0xa3e2d7[_0x19d944(0x1ba)]()+'</div>',_0x4be5ef['appendChild'](_0x6e000f);const _0x5db4f7=document[_0x19d944(0x159)](_0x19d944(0x13e));_0x5db4f7[_0x19d944(0x146)]=_0x19d944(0x191)+(_0x54aa41?_0x19d944(0x187):''),_0x5db4f7[_0x19d944(0x178)]('data-date',_0x4ef903),_0x5db4f7[_0x19d944(0x178)]('data-day-idx',_0x36855d),_0x1c44d9[_0x19d944(0x1b5)](_0x5db4f7);}_0x3e13a0['insertBefore'](_0x4be5ef,_0x3e13a0[_0x19d944(0x203)]),_0x4b30a9[_0x19d944(0x1c9)](_0x1c44d9,_0x4b30a9[_0x19d944(0x20f)]('.day-column'));}function hexToRgba(_0xfc41b1,_0x4578f3){const _0x3dedc5=a3_0x59f90e;let _0x475a3e;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0xfc41b1))return _0x475a3e=_0xfc41b1[_0x3dedc5(0x133)](0x1)[_0x3dedc5(0x155)](''),_0x475a3e['length']==0x3&&(_0x475a3e=[_0x475a3e[0x0],_0x475a3e[0x0],_0x475a3e[0x1],_0x475a3e[0x1],_0x475a3e[0x2],_0x475a3e[0x2]]),_0x475a3e='0x'+_0x475a3e[_0x3dedc5(0x1eb)](''),_0x3dedc5(0x1ee)+[_0x475a3e>>0x10&0xff,_0x475a3e>>0x8&0xff,_0x475a3e&0xff][_0x3dedc5(0x1eb)](',')+','+_0x4578f3+')';return _0x3dedc5(0x225)+_0x4578f3+')';}function a3_0x42ae(_0xffd753,_0x3c218a){_0xffd753=_0xffd753-0x12e;const _0x490622=a3_0x32b5();let _0x34a816=_0x490622[_0xffd753];return _0x34a816;}let confirmResolver=null;function showCustomConfirm(_0xfa380c,_0x24e643,_0x236ff6=!![]){const _0x4755da=a3_0x59f90e;document[_0x4755da(0x21f)](_0x4755da(0x1ea))[_0x4755da(0x206)]=_0xfa380c,document[_0x4755da(0x21f)]('ccText')[_0x4755da(0x206)]=_0x24e643;const _0x2d9da3=document[_0x4755da(0x21f)](_0x4755da(0x1e7));return _0x236ff6?(_0x2d9da3['style']['color']=_0x4755da(0x154),_0x2d9da3[_0x4755da(0x160)]['fontWeight']='600'):(_0x2d9da3[_0x4755da(0x160)]['color']=_0x4755da(0x137),_0x2d9da3[_0x4755da(0x160)][_0x4755da(0x226)]=_0x4755da(0x1e9)),new Promise(_0x37ca53=>{const _0x478d7e=_0x4755da;confirmResolver=_0x37ca53,document['getElementById'](_0x478d7e(0x179))[_0x478d7e(0x172)][_0x478d7e(0x17c)](_0x478d7e(0x166));});}function resolveCustomConfirm(_0x159f28){const _0x54fd86=a3_0x59f90e;document[_0x54fd86(0x21f)](_0x54fd86(0x179))['classList']['remove']('visible');if(confirmResolver)confirmResolver(_0x159f28);}async function tryCancelCurrentSession(){const _0x4dedfb=a3_0x59f90e;if(!currentSession)return;const _0x163804=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?',!![]);if(!_0x163804)return;const _0x3c5996=currentSession;closeAllSheets(),sessions=sessions[_0x4dedfb(0x1dc)](_0x317d24=>_0x317d24['id']!==_0x3c5996['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x4dedfb(0x1cc)]();try{const _0x11a2a2=window[_0x4dedfb(0x13d)]?.['WebApp'],_0x5b5292=await fetch(API_URL,{'method':_0x4dedfb(0x180),'body':JSON[_0x4dedfb(0x1f2)]({'action':'client_cancel','init_data':_0x11a2a2?.[_0x4dedfb(0x1d5)]||'','coachId':_0x3c5996[_0x4dedfb(0x213)],'dateStr':_0x3c5996[_0x4dedfb(0x218)],'sessionId':_0x3c5996['id']})});if(_0x5b5292['ok'])DataManager['saveLocally']();}catch(_0x338c22){showToast(_0x4dedfb(0x1fd));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xf5222a=a3_0x59f90e;if(!currentSession)return;document[_0xf5222a(0x21f)]('detailsSheet')['classList'][_0xf5222a(0x12e)](_0xf5222a(0x1d3)),document[_0xf5222a(0x21f)]('rescheduleSheet')[_0xf5222a(0x172)]['add']('open');const _0x44efb9=document[_0xf5222a(0x21f)](_0xf5222a(0x1f6)),_0x22297f=document['getElementById']('rsSlotsGrid');_0x44efb9[_0xf5222a(0x209)]='',_0x22297f[_0xf5222a(0x209)]=_0xf5222a(0x140);const [_0x2986cd,_0x4a7b35]=currentSession[_0xf5222a(0x185)][_0xf5222a(0x155)](':')['map'](Number),[_0x3208f5,_0x5702d1]=currentSession[_0xf5222a(0x145)][_0xf5222a(0x155)](':')['map'](Number),_0x343233=_0x3208f5*0x3c+_0x5702d1-(_0x2986cd*0x3c+_0x4a7b35);try{const _0x21e575=window['Telegram']?.[_0xf5222a(0x1aa)],_0x13670e=await fetch(API_URL,{'method':_0xf5222a(0x180),'body':JSON[_0xf5222a(0x1f2)]({'action':_0xf5222a(0x1a4),'coachId':currentSession['coachId'],'duration':_0x343233,'init_data':_0x21e575?.[_0xf5222a(0x1d5)]||'','excludeSessionId':currentSession['id']})}),_0x3fe354=await _0x13670e[_0xf5222a(0x131)]();_0x3fe354['ok']&&_0x3fe354[_0xf5222a(0x1ed)]?(availableSlotsCache=_0x3fe354['data'],renderRescheduleDates()):_0x22297f[_0xf5222a(0x209)]=_0xf5222a(0x134);}catch(_0x38489d){_0x22297f['innerHTML']=_0xf5222a(0x17a);}}function renderRescheduleDates(){const _0x57ad55=a3_0x59f90e,_0x25d358=document['getElementById'](_0x57ad55(0x1f6));_0x25d358[_0x57ad55(0x209)]='';const _0x956b92=Object[_0x57ad55(0x162)](availableSlotsCache)[_0x57ad55(0x21b)](),_0x1a1f49=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x956b92[_0x57ad55(0x1d4)]===0x0){document['getElementById'](_0x57ad55(0x16a))[_0x57ad55(0x209)]=_0x57ad55(0x1f4);return;}_0x956b92['forEach']((_0x53af25,_0x406111)=>{const _0x3842ee=_0x57ad55,_0x1a79a0=new Date(_0x53af25),_0x405b10=_0x1a1f49[_0x1a79a0[_0x3842ee(0x211)]()],_0x1c0ff0=_0x1a79a0['getDate'](),_0x51f82e=document[_0x3842ee(0x159)](_0x3842ee(0x13e));_0x51f82e[_0x3842ee(0x146)]=_0x3842ee(0x165);if(_0x406111===0x0)_0x51f82e[_0x3842ee(0x172)][_0x3842ee(0x17c)](_0x3842ee(0x143));_0x51f82e[_0x3842ee(0x209)]=_0x3842ee(0x1ec)+_0x405b10+_0x3842ee(0x1e1)+_0x1c0ff0+'</div>',_0x51f82e['onclick']=()=>selectRsDate(_0x53af25,_0x51f82e),_0x25d358[_0x3842ee(0x1b5)](_0x51f82e);}),selectRsDate(_0x956b92[0x0],_0x25d358[_0x57ad55(0x203)]);}function selectRsDate(_0x4323b3,_0x5ce66){const _0x32269f=a3_0x59f90e;selectedRsDate=_0x4323b3,document[_0x32269f(0x214)](_0x32269f(0x215))[_0x32269f(0x18c)](_0x574a51=>_0x574a51['classList'][_0x32269f(0x12e)](_0x32269f(0x143)));if(_0x5ce66)_0x5ce66['classList'][_0x32269f(0x17c)](_0x32269f(0x143));const _0x2738fc=document[_0x32269f(0x21f)](_0x32269f(0x16a));_0x2738fc['innerHTML']='';const _0x559b7b=availableSlotsCache[_0x4323b3]||[];if(_0x559b7b['length']===0x0){_0x2738fc[_0x32269f(0x209)]=_0x32269f(0x134);return;}_0x559b7b[_0x32269f(0x18c)](_0x465759=>{const _0x384930=_0x32269f,_0xf8c151=document[_0x384930(0x159)](_0x384930(0x181));_0xf8c151[_0x384930(0x146)]='rs-time-btn',_0xf8c151['textContent']=_0x465759,_0xf8c151[_0x384930(0x201)]=()=>confirmReschedule(_0x465759),_0x2738fc['appendChild'](_0xf8c151);});}async function confirmReschedule(_0x1ab15a){const _0x4bd700=a3_0x59f90e,_0x4eddde=new Date(selectedRsDate),_0x1818ae=_0x4eddde[_0x4bd700(0x17d)](_0x4bd700(0x20b),{'day':_0x4bd700(0x16c),'month':_0x4bd700(0x1af)}),_0x76c84=await showCustomConfirm(_0x4bd700(0x1b2),_0x4bd700(0x144)+_0x1818ae+_0x4bd700(0x151)+_0x1ab15a+'?',![]);if(!_0x76c84)return;closeAllSheets(),showToast(_0x4bd700(0x21a)),lastUserActionTime=Date[_0x4bd700(0x1cc)]();const _0x1bbc1c=currentSession['dateStr'],_0x164ea0=currentSession['id'],[_0x270a02,_0x429985]=currentSession['start']['split'](':')['map'](Number),[_0x54367d,_0x570ac4]=currentSession[_0x4bd700(0x145)][_0x4bd700(0x155)](':')['map'](Number),_0x79bc46=_0x54367d*0x3c+_0x570ac4-(_0x270a02*0x3c+_0x429985),[_0x361f74,_0x462d27]=_0x1ab15a[_0x4bd700(0x155)](':')['map'](Number),_0xaf85eb=_0x361f74*0x3c+_0x462d27+_0x79bc46,_0x1ef7ef=Math[_0x4bd700(0x150)](_0xaf85eb/0x3c),_0x44c68b=_0xaf85eb%0x3c,_0x3148ce=String(_0x1ef7ef)['padStart'](0x2,'0')+':'+String(_0x44c68b)['padStart'](0x2,'0'),_0x52f266=sessions[_0x4bd700(0x217)](_0x28363a=>_0x28363a['id']===_0x164ea0);_0x52f266!==-0x1&&(sessions[_0x52f266][_0x4bd700(0x218)]=selectedRsDate,sessions[_0x52f266][_0x4bd700(0x185)]=_0x1ab15a,sessions[_0x52f266][_0x4bd700(0x145)]=_0x3148ce,reRenderBlocks());try{const _0x2ea3ba=window[_0x4bd700(0x13d)]?.['WebApp'],_0xa77546=await fetch(API_URL,{'method':_0x4bd700(0x180),'body':JSON[_0x4bd700(0x1f2)]({'action':_0x4bd700(0x18f),'init_data':_0x2ea3ba?.[_0x4bd700(0x1d5)]||'','oldSessionId':_0x164ea0,'oldDate':_0x1bbc1c,'newDate':selectedRsDate,'newTime':_0x1ab15a,'coachId':currentSession[_0x4bd700(0x213)]})}),_0xbbae50=await _0xa77546[_0x4bd700(0x131)]();!_0xbbae50['ok']?(showToast(_0x4bd700(0x19d)),DataManager[_0x4bd700(0x14b)]()):(showToast(_0x4bd700(0x204)),DataManager['saveLocally']());}catch(_0x47a55c){showToast(_0x4bd700(0x1fd));}}document[a3_0x59f90e(0x1c4)]('DOMContentLoaded',init);