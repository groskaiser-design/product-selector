const a3_0x528780=a3_0x520a;(function(_0x525f50,_0x1945b4){const _0x3ea2a1=a3_0x520a,_0x5a80f4=_0x525f50();while(!![]){try{const _0x15348a=-parseInt(_0x3ea2a1(0x262))/0x1+-parseInt(_0x3ea2a1(0x253))/0x2+-parseInt(_0x3ea2a1(0x1df))/0x3+-parseInt(_0x3ea2a1(0x1f3))/0x4+-parseInt(_0x3ea2a1(0x1fd))/0x5+-parseInt(_0x3ea2a1(0x1b2))/0x6+parseInt(_0x3ea2a1(0x1e2))/0x7;if(_0x15348a===_0x1945b4)break;else _0x5a80f4['push'](_0x5a80f4['shift']());}catch(_0x5ad620){_0x5a80f4['push'](_0x5a80f4['shift']());}}}(a3_0x481b,0xe1f59));const APP_VERSION=a3_0x528780(0x240),API_URL=a3_0x528780(0x285),GRID_H=0x3c,KEY_SESSIONS=a3_0x528780(0x220),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x528780(0x25d);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x528780(0x1be),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x2495bc=a3_0x528780,_0x25e3b9=(function(){let _0x1ebd35=!![];return function(_0x517d3a,_0x394a6f){const _0x43ab24=_0x1ebd35?function(){if(_0x394a6f){const _0x5338ef=_0x394a6f['apply'](_0x517d3a,arguments);return _0x394a6f=null,_0x5338ef;}}:function(){};return _0x1ebd35=![],_0x43ab24;};}()),_0x2b4861=_0x25e3b9(this,function(){const _0x574746=a3_0x520a;return _0x2b4861['toString']()[_0x574746(0x232)](_0x574746(0x2a0))[_0x574746(0x229)]()[_0x574746(0x1bd)](_0x2b4861)[_0x574746(0x232)](_0x574746(0x2a0));});_0x2b4861();try{const _0x117efc=window[_0x2495bc(0x250)]?.['WebApp'];if(!_0x117efc)return;_0x117efc[_0x2495bc(0x1b6)](),_0x117efc[_0x2495bc(0x296)]();try{_0x117efc[_0x2495bc(0x1b3)](_0x2495bc(0x1c4)),_0x117efc[_0x2495bc(0x24e)]&&_0x117efc['setBackgroundColor'](_0x2495bc(0x1c4));}catch(_0x2208ab){console[_0x2495bc(0x1f9)]('Error\x20setting\x20color:',_0x2208ab);}try{_0x117efc['BackButton']&&(_0x117efc[_0x2495bc(0x281)]['show'](),_0x117efc['BackButton'][_0x2495bc(0x258)](),_0x117efc[_0x2495bc(0x281)][_0x2495bc(0x1cc)](function(){const _0x5430c1=_0x2495bc;window[_0x5430c1(0x289)]['href']=_0x5430c1(0x272);}));}catch(_0x77180d){console[_0x2495bc(0x1f9)](_0x2495bc(0x1f5),_0x77180d);}try{if(_0x117efc[_0x2495bc(0x1bc)])_0x117efc['disableVerticalSwipes']();}catch(_0x42e266){}}catch(_0x5e5ea8){console[_0x2495bc(0x25b)](_0x2495bc(0x237),_0x5e5ea8);}}());function isAdmin(){const _0x3cbd5b=a3_0x528780;try{const _0x55fd89=Number(window[_0x3cbd5b(0x250)]?.[_0x3cbd5b(0x24d)]?.['initDataUnsafe']?.[_0x3cbd5b(0x1e6)]?.['id']);return _0x55fd89===0xbaf7174;}catch(_0x52b4f0){return![];}}const DataManager={'saveLocally'(){const _0x2ed089=a3_0x528780;try{localStorage[_0x2ed089(0x25c)](KEY_SESSIONS,JSON[_0x2ed089(0x1e4)](sessions)),localStorage[_0x2ed089(0x25c)](KEY_CLIENTS,JSON[_0x2ed089(0x1e4)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x2ed089(0x1e4)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x2d6085){}},'loadLocal'(){const _0x144c43=a3_0x528780;try{const _0x5e41ac=localStorage[_0x144c43(0x1b4)](KEY_SESSIONS);if(_0x5e41ac)sessions=JSON[_0x144c43(0x1ee)](_0x5e41ac);const _0x3b6eec=localStorage[_0x144c43(0x1b4)](KEY_CLIENTS);if(_0x3b6eec)clients=JSON['parse'](_0x3b6eec);const _0x30621a=localStorage['getItem'](KEY_SETTINGS);if(_0x30621a){const _0x1f704b=JSON[_0x144c43(0x1ee)](_0x30621a);if(_0x1f704b[_0x144c43(0x27a)])availabilityPattern=_0x1f704b[_0x144c43(0x27a)];if(_0x1f704b[_0x144c43(0x27b)])specialRanges=_0x1f704b['ranges'];if(_0x1f704b[_0x144c43(0x269)])dateExceptions=_0x1f704b[_0x144c43(0x269)];}}catch(_0x29655d){}},async 'syncLoad'(){const _0x4f9cba=a3_0x528780,_0x2410dc=new Date(),_0x58ed7d=_0x2410dc[_0x4f9cba(0x1ba)]()+'-'+String(_0x2410dc[_0x4f9cba(0x206)]()+0x1)[_0x4f9cba(0x23a)](0x2,'0'),_0x48d72c=new Date(_0x2410dc);_0x48d72c[_0x4f9cba(0x215)](_0x2410dc['getMonth']()+0x1);const _0x43a6fd=_0x48d72c[_0x4f9cba(0x1ba)]()+'-'+String(_0x48d72c[_0x4f9cba(0x206)]()+0x1)[_0x4f9cba(0x23a)](0x2,'0'),_0x168e31=Date['now']();try{const _0x2a7841=window[_0x4f9cba(0x250)]?.[_0x4f9cba(0x24d)],_0x17dab2=_0x2a7841?.[_0x4f9cba(0x1eb)]||'',[_0x57453b,_0x4518e9]=await Promise[_0x4f9cba(0x242)]([fetch(API_URL,{'method':_0x4f9cba(0x23f),'body':JSON[_0x4f9cba(0x1e4)]({'action':'client_load','init_data':_0x17dab2,'month_str':_0x58ed7d})})[_0x4f9cba(0x248)](_0x5a0d9e=>_0x5a0d9e[_0x4f9cba(0x249)]()),fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':'client_load','init_data':_0x17dab2,'month_str':_0x43a6fd})})[_0x4f9cba(0x248)](_0x4d8aac=>_0x4d8aac[_0x4f9cba(0x249)]())]);if(lastUserActionTime>_0x168e31){console[_0x4f9cba(0x1f9)](_0x4f9cba(0x1d6));return;}if(_0x57453b['ok'])this['applyData'](_0x57453b[_0x4f9cba(0x1d3)],_0x58ed7d);if(_0x4518e9['ok'])this['applyData'](_0x4518e9[_0x4f9cba(0x1d3)],_0x43a6fd);this[_0x4f9cba(0x20f)]();}catch(_0x12a49b){}},'applyData'(_0xdd7b8f,_0x5e7612){const _0x587dd7=a3_0x528780;if(!_0xdd7b8f)return;if(_0xdd7b8f[_0x587dd7(0x1c8)]){if(_0xdd7b8f[_0x587dd7(0x1c8)][_0x587dd7(0x27a)])availabilityPattern=_0xdd7b8f[_0x587dd7(0x1c8)][_0x587dd7(0x27a)];if(_0xdd7b8f['settings'][_0x587dd7(0x27b)])specialRanges=_0xdd7b8f['settings'][_0x587dd7(0x27b)];if(_0xdd7b8f['settings']['exceptions'])dateExceptions=_0xdd7b8f[_0x587dd7(0x1c8)][_0x587dd7(0x269)];}if(_0xdd7b8f[_0x587dd7(0x26a)]&&Array['isArray'](_0xdd7b8f[_0x587dd7(0x26a)]))clients=_0xdd7b8f['clients'];_0xdd7b8f['coach_profiles']&&(coachProfiles={...coachProfiles,..._0xdd7b8f['coach_profiles']}),_0xdd7b8f[_0x587dd7(0x261)]&&(sessions=sessions['filter'](_0x4ae10e=>!_0x4ae10e[_0x587dd7(0x26e)][_0x587dd7(0x214)](_0x5e7612)),Object['keys'](_0xdd7b8f['calendar'])[_0x587dd7(0x260)](_0x10e131=>{const _0x37f53a=_0x587dd7,_0x31183b=_0xdd7b8f['calendar'][_0x10e131];_0x31183b[_0x37f53a(0x260)](_0x15fbc5=>{const _0x540479=_0x37f53a;sessions[_0x540479(0x271)]({'id':_0x15fbc5['i'],'clientId':_0x15fbc5['c'],'coachId':_0x15fbc5[_0x540479(0x1c9)],'dateStr':_0x5e7612+'-'+_0x10e131[_0x540479(0x23a)](0x2,'0'),'start':_0x15fbc5['s'],'end':_0x15fbc5['e'],'note':_0x15fbc5['n']||'','status':_0x15fbc5['st']||_0x540479(0x284),'seriesId':_0x15fbc5[_0x540479(0x1db)]});});})),reRenderBlocks();}};function init(){const _0x535d6e=a3_0x528780;DataManager[_0x535d6e(0x235)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById']('matrixViewport')['addEventListener'](_0x535d6e(0x277),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x40c19a=a3_0x528780,_0x2ddab0=document[_0x40c19a(0x2a1)](_0x40c19a(0x209)),_0x126456=document['getElementById'](_0x40c19a(0x200));_0x2ddab0[_0x40c19a(0x267)]='',_0x2ddab0[_0x40c19a(0x246)](_0x126456);for(let _0x5179a8=0x0;_0x5179a8<0x18;_0x5179a8++){const _0x373b2b=document['createElement'](_0x40c19a(0x1f8));_0x373b2b[_0x40c19a(0x1c5)]=_0x40c19a(0x247);if(_0x5179a8>0x0)_0x373b2b['innerHTML']=_0x40c19a(0x1da)+String(_0x5179a8)[_0x40c19a(0x23a)](0x2,'0')+_0x40c19a(0x28c);_0x2ddab0[_0x40c19a(0x246)](_0x373b2b);}}function renderDayRange(_0x1ca5b8,_0x143f78){const _0x1bca7a=a3_0x528780,_0x59f19b=document[_0x1bca7a(0x2a1)](_0x1bca7a(0x29c)),_0x517ca6=document['getElementById'](_0x1bca7a(0x22e)),_0x12a737=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4ccadb=new Date();_0x4ccadb[_0x1bca7a(0x1c3)](0x0,0x0,0x0,0x0);const _0x129b36=getLocalDateStr(new Date());for(let _0x345d4c=_0x1ca5b8;_0x345d4c<=_0x143f78;_0x345d4c++){const _0x583755=new Date(_0x4ccadb);_0x583755[_0x1bca7a(0x266)](_0x583755[_0x1bca7a(0x265)]()+_0x345d4c);const _0x33aef6=getLocalDateStr(_0x583755);let _0x40c2a2=_0x583755[_0x1bca7a(0x24c)]()-0x1;if(_0x40c2a2===-0x1)_0x40c2a2=0x6;const _0x13bd1f=_0x33aef6===_0x129b36,_0x234633=document[_0x1bca7a(0x23b)](_0x1bca7a(0x1f8));_0x234633[_0x1bca7a(0x1c5)]=_0x1bca7a(0x268)+(_0x13bd1f?_0x1bca7a(0x20d):''),_0x234633[_0x1bca7a(0x1e3)](_0x1bca7a(0x25a),_0x33aef6),_0x234633[_0x1bca7a(0x267)]=_0x1bca7a(0x28e)+_0x12a737[_0x40c2a2]+_0x1bca7a(0x279)+_0x583755['getDate']()+_0x1bca7a(0x228),_0x59f19b[_0x1bca7a(0x246)](_0x234633);const _0x24f6a3=document[_0x1bca7a(0x23b)](_0x1bca7a(0x1f8));_0x24f6a3[_0x1bca7a(0x1c5)]=_0x1bca7a(0x1cf)+(_0x13bd1f?'today':''),_0x24f6a3[_0x1bca7a(0x1e3)](_0x1bca7a(0x25a),_0x33aef6),_0x24f6a3[_0x1bca7a(0x1e3)](_0x1bca7a(0x275),_0x40c2a2),_0x517ca6[_0x1bca7a(0x246)](_0x24f6a3);}}function a3_0x520a(_0x31586a,_0x18a92c){_0x31586a=_0x31586a-0x1ad;const _0x3f4fd1=a3_0x481b();let _0x169fbf=_0x3f4fd1[_0x31586a];return _0x169fbf;}function reRenderBlocks(){const _0x17a02f=a3_0x528780;document[_0x17a02f(0x208)]('.day-column')[_0x17a02f(0x260)](_0x32b78d=>{const _0x3f2c53=_0x17a02f;_0x32b78d[_0x3f2c53(0x208)](_0x3f2c53(0x1e0))[_0x3f2c53(0x260)](_0x57bcf5=>_0x57bcf5[_0x3f2c53(0x1e5)]());const _0x5d1e41=_0x32b78d[_0x3f2c53(0x259)]('data-date'),_0x496ba1=parseInt(_0x32b78d[_0x3f2c53(0x259)](_0x3f2c53(0x275))),_0x19acb3=Math[_0x3f2c53(0x293)](_0x32b78d['offsetLeft']);(availabilityPattern[_0x496ba1]||[])[_0x3f2c53(0x260)](_0x49f3a1=>{const _0x35f27c=_0x3f2c53,_0xc5f800=document[_0x35f27c(0x23b)](_0x35f27c(0x1f8));_0xc5f800[_0x35f27c(0x1c5)]='blocked-slot\x20stripe-bg',_0xc5f800[_0x35f27c(0x201)][_0x35f27c(0x1ed)]=_0x49f3a1*GRID_H+'px',_0xc5f800[_0x35f27c(0x201)][_0x35f27c(0x1b9)]='-'+_0x19acb3+'px\x20-'+_0x49f3a1*GRID_H+'px',_0x32b78d[_0x35f27c(0x246)](_0xc5f800);});if(specialRanges[_0x3f2c53(0x1d0)]>0x0){const _0xf10f43=new Date(_0x5d1e41+_0x3f2c53(0x27d))[_0x3f2c53(0x204)](),_0x2c500e=new Date(_0x5d1e41+_0x3f2c53(0x239))['getTime']();specialRanges[_0x3f2c53(0x260)](_0x28e688=>{const _0x56cfa6=_0x3f2c53,_0x4e10f4=new Date(_0x28e688[_0x56cfa6(0x1b0)])[_0x56cfa6(0x204)](),_0x501a5a=new Date(_0x28e688[_0x56cfa6(0x1f1)])[_0x56cfa6(0x204)](),_0x52c9b9=Math[_0x56cfa6(0x244)](_0xf10f43,_0x4e10f4),_0x1501b1=Math[_0x56cfa6(0x1af)](_0x2c500e,_0x501a5a);if(_0x52c9b9<_0x1501b1){const _0x308b52=(_0x52c9b9-_0xf10f43)/0x36ee80*GRID_H,_0x106217=(_0x1501b1-_0x52c9b9)/0x36ee80*GRID_H,_0x3b15a7=document['createElement']('div');_0x106217>=23.5*GRID_H?(_0x3b15a7['className']='day-off-overlay\x20stripe-bg',_0x3b15a7[_0x56cfa6(0x201)][_0x56cfa6(0x1b9)]='-'+_0x19acb3+_0x56cfa6(0x20a)):(_0x3b15a7[_0x56cfa6(0x1c5)]='blocked-range-part\x20stripe-bg',_0x3b15a7['style'][_0x56cfa6(0x1ed)]=_0x308b52+'px',_0x3b15a7['style']['height']=_0x106217+'px',_0x3b15a7[_0x56cfa6(0x201)][_0x56cfa6(0x1b9)]='-'+_0x19acb3+_0x56cfa6(0x290)+_0x308b52+'px'),_0x32b78d['appendChild'](_0x3b15a7);}});}renderEventsForColumn(_0x32b78d,_0x5d1e41);});}function renderEventsForColumn(_0x5843d8,_0x36f9a7){const _0x280193=a3_0x528780,_0x11a5d5=sessions[_0x280193(0x29d)](_0x4bf06f=>_0x4bf06f[_0x280193(0x26e)]===_0x36f9a7),_0x53f375=_0x11a5d5[_0x280193(0x28b)](_0x840890=>{const _0x76ebd3=_0x280193,[_0x5b67fb,_0x1c5eb3]=_0x840890['start'][_0x76ebd3(0x213)](':')[_0x76ebd3(0x28b)](Number),[_0x2b2ac3,_0x1b5c2d]=_0x840890['end'][_0x76ebd3(0x213)](':')['map'](Number);return{'data':_0x840890,'start':_0x5b67fb*0x3c+_0x1c5eb3,'end':_0x2b2ac3*0x3c+_0x1b5c2d,'colIndex':0x0};});_0x53f375[_0x280193(0x1f7)]((_0x4b5b2b,_0x25f9ca)=>_0x4b5b2b[_0x280193(0x1b0)]-_0x25f9ca[_0x280193(0x1b0)]||_0x25f9ca[_0x280193(0x1f1)]-_0x25f9ca[_0x280193(0x1b0)]-(_0x4b5b2b[_0x280193(0x1f1)]-_0x4b5b2b[_0x280193(0x1b0)]));const _0x54e932=[];_0x53f375[_0x280193(0x260)](_0x567ab6=>{const _0x2489af=_0x280193;let _0x343b9b=![];for(let _0x2d2aec=0x0;_0x2d2aec<_0x54e932[_0x2489af(0x1d0)];_0x2d2aec++){const _0x26eeac=_0x54e932[_0x2d2aec];if(_0x567ab6[_0x2489af(0x1b0)]>=_0x26eeac[_0x26eeac[_0x2489af(0x1d0)]-0x1][_0x2489af(0x1f1)]){_0x26eeac['push'](_0x567ab6),_0x567ab6[_0x2489af(0x1ae)]=_0x2d2aec,_0x343b9b=!![];break;}}!_0x343b9b&&(_0x54e932[_0x2489af(0x271)]([_0x567ab6]),_0x567ab6[_0x2489af(0x1ae)]=_0x54e932['length']-0x1);}),_0x53f375['forEach'](_0x25a65c=>{const _0x27ef89=_0x280193;let _0x1c72a1=0x0;_0x53f375['forEach'](_0x363f0c=>{const _0x28a202=a3_0x520a;if(Math[_0x28a202(0x244)](_0x25a65c[_0x28a202(0x1b0)],_0x363f0c[_0x28a202(0x1b0)])<Math[_0x28a202(0x1af)](_0x25a65c[_0x28a202(0x1f1)],_0x363f0c[_0x28a202(0x1f1)])&&_0x363f0c[_0x28a202(0x1ae)]>_0x1c72a1)_0x1c72a1=_0x363f0c[_0x28a202(0x1ae)];});const _0x3a0af0=_0x1c72a1+0x1,_0x477f73=0x64/_0x3a0af0,_0x2afdc2=_0x25a65c[_0x27ef89(0x1ae)]*_0x477f73,_0x53a4d4=document['createElement'](_0x27ef89(0x1f8)),_0x25e705=_0x25a65c['data'];let _0x5c92b5=_0x27ef89(0x1d7);if(clients&&clients['length']>0x0){const _0x27a4a7=clients[_0x27ef89(0x264)](_0x264f9e=>String(_0x264f9e['id'])===String(_0x25e705[_0x27ef89(0x236)]));if(_0x27a4a7&&_0x27a4a7[_0x27ef89(0x286)])_0x5c92b5=_0x27a4a7['color'];}const _0x5d9d49=_0x25e705['status']===_0x27ef89(0x1ff),_0x2d532a=_0x5d9d49?0x1:0.45;_0x53a4d4[_0x27ef89(0x1c5)]=_0x27ef89(0x227)+(_0x5d9d49?_0x27ef89(0x1d9):''),_0x53a4d4[_0x27ef89(0x201)][_0x27ef89(0x245)]=hexToRgba(_0x5c92b5,_0x2d532a),_0x53a4d4[_0x27ef89(0x201)]['borderLeftColor']=_0x5c92b5;const _0x13bb5c=_0x25a65c['start']/0x3c*GRID_H,_0x111109=(_0x25a65c[_0x27ef89(0x1f1)]-_0x25a65c[_0x27ef89(0x1b0)])/0x3c*GRID_H;_0x53a4d4['style'][_0x27ef89(0x1ed)]=_0x13bb5c+'px',_0x53a4d4[_0x27ef89(0x201)]['height']=Math[_0x27ef89(0x244)](_0x111109,0x14)+'px',_0x53a4d4['style'][_0x27ef89(0x274)]=_0x27ef89(0x270)+_0x477f73+_0x27ef89(0x295),_0x53a4d4[_0x27ef89(0x201)]['left']='calc('+_0x2afdc2+'%\x20+\x202px)',_0x53a4d4['style'][_0x27ef89(0x1dd)]=0xa+_0x25a65c[_0x27ef89(0x1ae)];if(_0x477f73<0x55)_0x53a4d4[_0x27ef89(0x297)][_0x27ef89(0x282)](_0x27ef89(0x1ef));let _0x4411e9='';if(_0x25e705['seriesId'])_0x4411e9+=_0x27ef89(0x1ea);if(_0x5d9d49)_0x4411e9+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x53a4d4[_0x27ef89(0x267)]=_0x27ef89(0x24f)+_0x25e705[_0x27ef89(0x1b0)]+_0x27ef89(0x217)+_0x25e705[_0x27ef89(0x1f1)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4411e9+_0x27ef89(0x22d),_0x53a4d4[_0x27ef89(0x1d2)]=_0x4b5d68=>{const _0xffe1a8=_0x27ef89;_0x4b5d68[_0xffe1a8(0x28d)](),openDetails(_0x25e705);},_0x5843d8[_0x27ef89(0x246)](_0x53a4d4);});}function openAnalytics(){const _0x2ac88b=a3_0x528780,_0x66d3fd=document[_0x2ac88b(0x23e)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x2ac88b(0x1be),_0x66d3fd),openSheet(_0x2ac88b(0x210));}function setAnalyticsPeriod(_0x17c0b1,_0x30ea66){const _0x11043c=a3_0x528780;currentAnPeriod=_0x17c0b1,document[_0x11043c(0x208)](_0x11043c(0x26c))[_0x11043c(0x260)](_0x469e03=>_0x469e03['classList'][_0x11043c(0x1e5)](_0x11043c(0x1e8)));if(_0x30ea66)_0x30ea66[_0x11043c(0x297)][_0x11043c(0x282)]('active');const _0x28c9d7=document[_0x11043c(0x2a1)]('anCustomDates');_0x28c9d7['style'][_0x11043c(0x233)]=_0x17c0b1===_0x11043c(0x1e9)?_0x11043c(0x28a):_0x11043c(0x20e);const _0xdbd2c5=new Date();let _0x43ec12=new Date(),_0x3a2e13=new Date();if(_0x17c0b1===_0x11043c(0x1be))_0x43ec12=getStartOfWeek(_0xdbd2c5),_0x3a2e13=new Date(_0x43ec12),_0x3a2e13[_0x11043c(0x266)](_0x3a2e13['getDate']()+0x6);else{if(_0x17c0b1==='month')_0x43ec12=new Date(_0xdbd2c5[_0x11043c(0x1ba)](),_0xdbd2c5['getMonth'](),0x1),_0x3a2e13=new Date(_0xdbd2c5[_0x11043c(0x1ba)](),_0xdbd2c5[_0x11043c(0x206)]()+0x1,0x0);else{!document[_0x11043c(0x2a1)]('anStart')[_0x11043c(0x218)]&&(document[_0x11043c(0x2a1)](_0x11043c(0x26f))[_0x11043c(0x218)]=getLocalDateStr(_0xdbd2c5),document[_0x11043c(0x2a1)](_0x11043c(0x22f))[_0x11043c(0x218)]=getLocalDateStr(_0xdbd2c5));refreshAnalytics();return;}}document[_0x11043c(0x2a1)](_0x11043c(0x26f))[_0x11043c(0x218)]=getLocalDateStr(_0x43ec12),document[_0x11043c(0x2a1)]('anEnd')[_0x11043c(0x218)]=getLocalDateStr(_0x3a2e13),refreshAnalytics();}function refreshAnalytics(){const _0x21b4df=a3_0x528780,_0x115259=document[_0x21b4df(0x2a1)](_0x21b4df(0x26f))['value'],_0x2b4879=document[_0x21b4df(0x2a1)](_0x21b4df(0x22f))[_0x21b4df(0x218)];if(!_0x115259||!_0x2b4879)return;const _0x7cd40d=sessions[_0x21b4df(0x29d)](_0x19b51a=>_0x19b51a[_0x21b4df(0x26e)]>=_0x115259&&_0x19b51a[_0x21b4df(0x26e)]<=_0x2b4879&&_0x19b51a['status']!=='cancelled'),_0x5e1f2e=_0x7cd40d[_0x21b4df(0x1d0)],_0x31c798=_0x7cd40d[_0x21b4df(0x29d)](_0xb0a8e1=>_0xb0a8e1[_0x21b4df(0x243)]===_0x21b4df(0x1ff))[_0x21b4df(0x1d0)],_0x3ce437=_0x5e1f2e>0x0?Math['round'](_0x31c798/_0x5e1f2e*0x64):0x0;document['getElementById'](_0x21b4df(0x291))['textContent']=_0x3ce437+'%',document[_0x21b4df(0x2a1)](_0x21b4df(0x1e7))[_0x21b4df(0x276)]=_0x31c798+_0x21b4df(0x1b7)+_0x5e1f2e+_0x21b4df(0x224);const _0x1cb1df=document['getElementById'](_0x21b4df(0x27f)),_0x1e7cf4=0x2*Math['PI']*0x23,_0x3870cc=_0x1e7cf4-_0x3ce437/0x64*_0x1e7cf4;_0x1cb1df[_0x21b4df(0x201)]['strokeDashoffset']=_0x3870cc;const _0x5705d6={};_0x7cd40d[_0x21b4df(0x260)](_0x1cd365=>{const _0x23d021=_0x21b4df,_0x1740ce=_0x1cd365[_0x23d021(0x1b1)]||'Unknown';if(!_0x5705d6[_0x1740ce]){const _0x3cb966='#'+_0x1740ce[_0x23d021(0x229)]()[_0x23d021(0x1cb)](0x0,0x6);_0x5705d6[_0x1740ce]={'total':0x0,'done':0x0,'color':_0x3cb966};}_0x5705d6[_0x1740ce][_0x23d021(0x294)]++;if(_0x1cd365[_0x23d021(0x243)]===_0x23d021(0x1ff))_0x5705d6[_0x1740ce]['done']++;});const _0x242233=document[_0x21b4df(0x2a1)](_0x21b4df(0x1bb));_0x242233['innerHTML']='';const _0x49750b=Object[_0x21b4df(0x1c7)](_0x5705d6)[_0x21b4df(0x1f7)]((_0x194239,_0x5e3b0b)=>_0x5e3b0b[0x1][_0x21b4df(0x294)]-_0x194239[0x1]['total']);if(_0x49750b[_0x21b4df(0x1d0)]===0x0){_0x242233[_0x21b4df(0x267)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x49750b[_0x21b4df(0x260)](([_0x3973a4,_0x12b33d])=>{const _0x146821=_0x21b4df,_0x1390a3=Math['round'](_0x12b33d[_0x146821(0x23d)]/_0x12b33d[_0x146821(0x294)]*0x64),_0x5921b1=document[_0x146821(0x23b)](_0x146821(0x1f8));_0x5921b1['className']='client-stat-card',_0x5921b1['style']['borderLeftColor']=_0x12b33d[_0x146821(0x286)],_0x5921b1[_0x146821(0x267)]=_0x146821(0x222)+_0x3973a4[_0x146821(0x1cb)](0x0,0x5)+_0x146821(0x21e)+_0x12b33d[_0x146821(0x23d)]+_0x146821(0x21f)+_0x12b33d[_0x146821(0x294)]+_0x146821(0x219)+_0x1390a3+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x242233[_0x146821(0x246)](_0x5921b1);});}function openDetails(_0x10b7ac){const _0x21c2cf=a3_0x528780;currentSession=_0x10b7ac;const _0x153a8c=new Date(_0x10b7ac[_0x21c2cf(0x26e)]),_0x48d525=_0x153a8c[_0x21c2cf(0x292)]('ru-RU',{'weekday':'long','day':_0x21c2cf(0x22c),'month':_0x21c2cf(0x26d)});document[_0x21c2cf(0x2a1)]('detDate')[_0x21c2cf(0x276)]=_0x48d525[_0x21c2cf(0x29b)](0x0)[_0x21c2cf(0x25f)]()+_0x48d525[_0x21c2cf(0x1d5)](0x1),document[_0x21c2cf(0x2a1)]('detTime')['textContent']=_0x10b7ac[_0x21c2cf(0x1b0)]+_0x21c2cf(0x217)+_0x10b7ac[_0x21c2cf(0x1f1)],document[_0x21c2cf(0x2a1)]('detNote')[_0x21c2cf(0x276)]=_0x10b7ac[_0x21c2cf(0x283)]||_0x21c2cf(0x1f0);const _0x57721f=document[_0x21c2cf(0x2a1)]('detStatus'),_0x438f61=document['getElementById'](_0x21c2cf(0x27e)),_0x3f3301=_0x438f61[_0x21c2cf(0x23e)](_0x21c2cf(0x1fb)),_0x1956f7=_0x438f61['querySelector'](_0x21c2cf(0x254)),_0x2b23a4=document[_0x21c2cf(0x2a1)](_0x21c2cf(0x212));if(_0x10b7ac['status']===_0x21c2cf(0x1ff))_0x57721f[_0x21c2cf(0x276)]=_0x21c2cf(0x287),_0x57721f[_0x21c2cf(0x201)][_0x21c2cf(0x286)]=_0x21c2cf(0x1ca),_0x438f61[_0x21c2cf(0x201)][_0x21c2cf(0x233)]=_0x21c2cf(0x20e);else{_0x57721f[_0x21c2cf(0x276)]=_0x21c2cf(0x280),_0x57721f[_0x21c2cf(0x201)][_0x21c2cf(0x286)]=_0x21c2cf(0x1c6),_0x438f61['style'][_0x21c2cf(0x233)]=_0x21c2cf(0x255);const _0x1f7bcc=new Date(_0x10b7ac[_0x21c2cf(0x26e)]+'T'+_0x10b7ac['start']),_0x2b3eb8=new Date(),_0x592011=(_0x1f7bcc-_0x2b3eb8)/(0x3e8*0x3c*0x3c),_0x2283e2=coachProfiles[_0x10b7ac[_0x21c2cf(0x1b1)]]&&coachProfiles[_0x10b7ac['coachId']][_0x21c2cf(0x241)]?parseInt(coachProfiles[_0x10b7ac[_0x21c2cf(0x1b1)]][_0x21c2cf(0x241)]):0x18;if(_0x2283e2===0x0||_0x592011>=_0x2283e2)_0x3f3301[_0x21c2cf(0x201)]['display']=_0x21c2cf(0x255),_0x1956f7[_0x21c2cf(0x201)][_0x21c2cf(0x233)]=_0x21c2cf(0x255),_0x2b23a4[_0x21c2cf(0x201)]['display']=_0x21c2cf(0x20e);else{_0x3f3301[_0x21c2cf(0x201)][_0x21c2cf(0x233)]=_0x21c2cf(0x20e),_0x1956f7[_0x21c2cf(0x201)]['display']=_0x21c2cf(0x20e),_0x2b23a4[_0x21c2cf(0x201)][_0x21c2cf(0x233)]=_0x21c2cf(0x255);let _0x18d153=_0x2283e2===0x0?_0x21c2cf(0x1bf):_0x21c2cf(0x234)+_0x2283e2+_0x21c2cf(0x28f);_0x2b23a4[_0x21c2cf(0x276)]=_0x21c2cf(0x1d4)+_0x18d153+_0x21c2cf(0x256);}}document[_0x21c2cf(0x2a1)](_0x21c2cf(0x24a))[_0x21c2cf(0x297)][_0x21c2cf(0x282)](_0x21c2cf(0x1e8)),document['getElementById'](_0x21c2cf(0x24b))[_0x21c2cf(0x297)][_0x21c2cf(0x282)](_0x21c2cf(0x1d1));}function closeAllSheets(){const _0xf0a44=a3_0x528780;document[_0xf0a44(0x2a1)](_0xf0a44(0x24a))['classList'][_0xf0a44(0x1e5)](_0xf0a44(0x1e8)),document[_0xf0a44(0x208)](_0xf0a44(0x263))['forEach'](_0x5c32fe=>_0x5c32fe['classList'][_0xf0a44(0x1e5)]('open'));}function openSheet(_0x254968){const _0x417e00=a3_0x528780;document[_0x417e00(0x2a1)]('overlay')[_0x417e00(0x297)][_0x417e00(0x282)]('active'),document[_0x417e00(0x2a1)](_0x254968)['classList'][_0x417e00(0x282)](_0x417e00(0x1d1));}function getLocalDateStr(_0x33d524){const _0x60af96=a3_0x528780,_0x145a61=_0x33d524[_0x60af96(0x1ba)](),_0x15c1a3=String(_0x33d524[_0x60af96(0x206)]()+0x1)['padStart'](0x2,'0'),_0x164b45=String(_0x33d524[_0x60af96(0x265)]())[_0x60af96(0x23a)](0x2,'0');return _0x145a61+'-'+_0x15c1a3+'-'+_0x164b45;}function getStartOfWeek(_0x34a558){const _0x2b2170=a3_0x528780,_0x2cdfc4=new Date(_0x34a558),_0x3859ee=_0x2cdfc4[_0x2b2170(0x24c)](),_0x24b63d=_0x2cdfc4[_0x2b2170(0x265)]()-_0x3859ee+(_0x3859ee===0x0?-0x6:0x1);return _0x2cdfc4[_0x2b2170(0x266)](_0x24b63d),_0x2cdfc4[_0x2b2170(0x1c3)](0x0,0x0,0x0,0x0),_0x2cdfc4;}function scrollToToday(){const _0x561648=getLocalDateStr(new Date());setTimeout(()=>{const _0x38098b=a3_0x520a,_0x73e172=document['querySelector']('.day-col-header[data-date=\x22'+_0x561648+'\x22]');if(_0x73e172){const _0x560ed7=document['getElementById']('matrixViewport'),_0x97b09a=_0x73e172[_0x38098b(0x21b)]-_0x560ed7[_0x38098b(0x1b8)]/0x2+_0x73e172[_0x38098b(0x21a)]/0x2;_0x560ed7[_0x38098b(0x1cd)]({'left':_0x97b09a,'behavior':_0x38098b(0x278)}),_0x560ed7[_0x38098b(0x216)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x33b354=a3_0x528780,_0x36e87f=new Date(),_0x5b9289=document[_0x33b354(0x2a1)](_0x33b354(0x251)),_0x58cde0=document['getElementById'](_0x33b354(0x200)),_0x10c99c=(_0x36e87f['getHours']()*0x3c+_0x36e87f[_0x33b354(0x1ad)]())/0x3c*GRID_H;_0x5b9289[_0x33b354(0x201)][_0x33b354(0x1ed)]=_0x10c99c+'px',_0x5b9289[_0x33b354(0x201)]['display']='block',_0x58cde0['style'][_0x33b354(0x1ed)]=_0x10c99c+'px',_0x58cde0['style'][_0x33b354(0x233)]=_0x33b354(0x255),_0x58cde0[_0x33b354(0x276)]=String(_0x36e87f['getHours']())['padStart'](0x2,'0')+':'+String(_0x36e87f[_0x33b354(0x1ad)]())['padStart'](0x2,'0');}function onScroll(){const _0x3900b8=a3_0x528780,_0xc5c323=document['getElementById'](_0x3900b8(0x1d8)),_0x14e078=document[_0x3900b8(0x208)](_0x3900b8(0x252));for(let _0x52fbb7 of _0x14e078)if(_0x52fbb7['offsetLeft']>=_0xc5c323[_0x3900b8(0x299)]){const _0x21dd38=new Date(_0x52fbb7[_0x3900b8(0x259)](_0x3900b8(0x25a)));document['getElementById'](_0x3900b8(0x1b5))[_0x3900b8(0x276)]=_0x21dd38[_0x3900b8(0x288)]('ru',{'month':_0x3900b8(0x26d)})[_0x3900b8(0x25f)]()+'\x20'+_0x21dd38[_0x3900b8(0x1ba)]();break;}}function showToast(_0x5774f8){const _0xe4c3e8=a3_0x528780,_0x249974=document[_0xe4c3e8(0x2a1)]('toast');_0x249974['textContent']=_0x5774f8,_0x249974[_0xe4c3e8(0x297)][_0xe4c3e8(0x282)](_0xe4c3e8(0x230)),setTimeout(()=>_0x249974[_0xe4c3e8(0x297)][_0xe4c3e8(0x1e5)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x57888f=a3_0x528780,_0x3bf1c0=document[_0x57888f(0x2a1)](_0x57888f(0x1d8)),_0x28aac8=_0x3bf1c0[_0x57888f(0x299)],_0x5c9aba=_0x3bf1c0['scrollWidth'],_0x246569=_0x3bf1c0[_0x57888f(0x1b8)];if(_0x5c9aba-(_0x28aac8+_0x246569)<0x12c){const _0x344212=endOffset;endOffset+=0xe,renderDayRange(_0x344212+0x1,endOffset),reRenderBlocks();}if(_0x28aac8<0x12c){const _0x3add7e=startOffset;startOffset-=0xe,prependDays(startOffset,_0x3add7e-0x1),_0x3bf1c0[_0x57888f(0x299)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1e69ed,_0x1a227f){const _0x4912c3=a3_0x528780,_0xf2d2f3=document[_0x4912c3(0x2a1)](_0x4912c3(0x29c)),_0x3e4997=document['getElementById'](_0x4912c3(0x22e)),_0x45993f=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x5b9387=new Date();_0x5b9387[_0x4912c3(0x1c3)](0x0,0x0,0x0,0x0);const _0xa8f437=getLocalDateStr(new Date()),_0x3e1376=document[_0x4912c3(0x1fe)](),_0x15647b=document[_0x4912c3(0x1fe)]();for(let _0x4e00be=_0x1e69ed;_0x4e00be<=_0x1a227f;_0x4e00be++){const _0x107793=new Date(_0x5b9387);_0x107793[_0x4912c3(0x266)](_0x107793['getDate']()+_0x4e00be);const _0x2d8cbc=getLocalDateStr(_0x107793);let _0x3ac931=_0x107793[_0x4912c3(0x24c)]()-0x1;if(_0x3ac931===-0x1)_0x3ac931=0x6;const _0x5b8c63=_0x2d8cbc===_0xa8f437,_0x55762e=document[_0x4912c3(0x23b)](_0x4912c3(0x1f8));_0x55762e[_0x4912c3(0x1c5)]=_0x4912c3(0x268)+(_0x5b8c63?'today':''),_0x55762e[_0x4912c3(0x1e3)]('data-date',_0x2d8cbc),_0x55762e[_0x4912c3(0x267)]=_0x4912c3(0x28e)+_0x45993f[_0x3ac931]+_0x4912c3(0x279)+_0x107793[_0x4912c3(0x265)]()+_0x4912c3(0x228),_0x3e1376['appendChild'](_0x55762e);const _0x5064dd=document[_0x4912c3(0x23b)](_0x4912c3(0x1f8));_0x5064dd[_0x4912c3(0x1c5)]='day-column\x20'+(_0x5b8c63?_0x4912c3(0x20d):''),_0x5064dd[_0x4912c3(0x1e3)](_0x4912c3(0x25a),_0x2d8cbc),_0x5064dd['setAttribute'](_0x4912c3(0x275),_0x3ac931),_0x15647b[_0x4912c3(0x246)](_0x5064dd);}_0xf2d2f3[_0x4912c3(0x23c)](_0x3e1376,_0xf2d2f3[_0x4912c3(0x202)]),_0x3e4997[_0x4912c3(0x23c)](_0x15647b,_0x3e4997[_0x4912c3(0x23e)](_0x4912c3(0x20b)));}function hexToRgba(_0x34588a,_0x4192cc){const _0x265734=a3_0x528780;let _0x563c35;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x265734(0x223)](_0x34588a))return _0x563c35=_0x34588a[_0x265734(0x203)](0x1)['split'](''),_0x563c35[_0x265734(0x1d0)]==0x3&&(_0x563c35=[_0x563c35[0x0],_0x563c35[0x0],_0x563c35[0x1],_0x563c35[0x1],_0x563c35[0x2],_0x563c35[0x2]]),_0x563c35='0x'+_0x563c35[_0x265734(0x1fc)](''),_0x265734(0x1e1)+[_0x563c35>>0x10&0xff,_0x563c35>>0x8&0xff,_0x563c35&0xff]['join'](',')+','+_0x4192cc+')';return _0x265734(0x26b)+_0x4192cc+')';}let confirmResolver=null;function showCustomConfirm(_0x30bc25,_0x33d099,_0x16d233=!![]){const _0x1a9a13=a3_0x528780;document[_0x1a9a13(0x2a1)](_0x1a9a13(0x2a2))[_0x1a9a13(0x276)]=_0x30bc25,document[_0x1a9a13(0x2a1)](_0x1a9a13(0x257))[_0x1a9a13(0x276)]=_0x33d099;const _0x309bed=document[_0x1a9a13(0x2a1)](_0x1a9a13(0x1f4));return _0x16d233?(_0x309bed[_0x1a9a13(0x201)][_0x1a9a13(0x286)]=_0x1a9a13(0x1f6),_0x309bed[_0x1a9a13(0x201)][_0x1a9a13(0x225)]=_0x1a9a13(0x1c0)):(_0x309bed[_0x1a9a13(0x201)][_0x1a9a13(0x286)]=_0x1a9a13(0x1d7),_0x309bed[_0x1a9a13(0x201)][_0x1a9a13(0x225)]=_0x1a9a13(0x1c0)),new Promise(_0x42bde4=>{const _0x462dd2=_0x1a9a13;confirmResolver=_0x42bde4,document[_0x462dd2(0x2a1)](_0x462dd2(0x298))[_0x462dd2(0x297)][_0x462dd2(0x282)](_0x462dd2(0x231));});}function resolveCustomConfirm(_0x149f9f){const _0x25041e=a3_0x528780;document[_0x25041e(0x2a1)]('customConfirm')[_0x25041e(0x297)][_0x25041e(0x1e5)]('visible');if(confirmResolver)confirmResolver(_0x149f9f);}async function tryCancelCurrentSession(){const _0x15ae8c=a3_0x528780;if(!currentSession)return;const _0x3736a8=await showCustomConfirm(_0x15ae8c(0x1ec),_0x15ae8c(0x207),!![]);if(!_0x3736a8)return;const _0x557f94=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x34e85b=>_0x34e85b['id']!==_0x557f94['id']),reRenderBlocks(),showToast(_0x15ae8c(0x29a)),lastUserActionTime=Date[_0x15ae8c(0x20c)]();try{const _0x4cd616=window['Telegram']?.['WebApp'],_0x35e712=await fetch(API_URL,{'method':_0x15ae8c(0x23f),'body':JSON[_0x15ae8c(0x1e4)]({'action':_0x15ae8c(0x238),'init_data':_0x4cd616?.['initData']||'','coachId':_0x557f94[_0x15ae8c(0x1b1)],'dateStr':_0x557f94[_0x15ae8c(0x26e)],'sessionId':_0x557f94['id']})});if(_0x35e712['ok'])DataManager[_0x15ae8c(0x20f)]();}catch(_0x25ae7b){showToast(_0x15ae8c(0x226));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x152e1e=a3_0x528780;if(!currentSession)return;document['getElementById'](_0x152e1e(0x24b))[_0x152e1e(0x297)]['remove'](_0x152e1e(0x1d1)),document[_0x152e1e(0x2a1)]('rescheduleSheet')[_0x152e1e(0x297)][_0x152e1e(0x282)](_0x152e1e(0x1d1));const _0x5c1239=document[_0x152e1e(0x2a1)]('rsDatesTrack'),_0x39ce56=document[_0x152e1e(0x2a1)](_0x152e1e(0x22b));_0x5c1239[_0x152e1e(0x267)]='',_0x39ce56['innerHTML']=_0x152e1e(0x1fa);const [_0x4e825c,_0x18a93b]=currentSession[_0x152e1e(0x1b0)][_0x152e1e(0x213)](':')[_0x152e1e(0x28b)](Number),[_0x57a898,_0x22de18]=currentSession[_0x152e1e(0x1f1)][_0x152e1e(0x213)](':')[_0x152e1e(0x28b)](Number),_0x1f9bcf=_0x57a898*0x3c+_0x22de18-(_0x4e825c*0x3c+_0x18a93b);try{const _0x18e551=window[_0x152e1e(0x250)]?.['WebApp'],_0x1ac205=await fetch(API_URL,{'method':_0x152e1e(0x23f),'body':JSON['stringify']({'action':_0x152e1e(0x1c2),'coachId':currentSession[_0x152e1e(0x1b1)],'duration':_0x1f9bcf,'init_data':_0x18e551?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x713c1f=await _0x1ac205[_0x152e1e(0x249)]();_0x713c1f['ok']&&_0x713c1f[_0x152e1e(0x1d3)]?(availableSlotsCache=_0x713c1f[_0x152e1e(0x1d3)],renderRescheduleDates()):_0x39ce56[_0x152e1e(0x267)]=_0x152e1e(0x1de);}catch(_0x45a333){_0x39ce56[_0x152e1e(0x267)]=_0x152e1e(0x21c);}}function renderRescheduleDates(){const _0x4fef14=a3_0x528780,_0x171d8e=document[_0x4fef14(0x2a1)](_0x4fef14(0x221));_0x171d8e[_0x4fef14(0x267)]='';const _0x2d714b=Object['keys'](availableSlotsCache)['sort'](),_0x5071c4=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x2d714b[_0x4fef14(0x1d0)]===0x0){document[_0x4fef14(0x2a1)]('rsSlotsGrid')['innerHTML']=_0x4fef14(0x1ce);return;}_0x2d714b[_0x4fef14(0x260)]((_0x2ab1e9,_0xac3879)=>{const _0xa8917b=_0x4fef14,_0x411d63=new Date(_0x2ab1e9),_0xb5b25a=_0x5071c4[_0x411d63[_0xa8917b(0x24c)]()],_0x12f2a1=_0x411d63[_0xa8917b(0x265)](),_0x815e83=document[_0xa8917b(0x23b)](_0xa8917b(0x1f8));_0x815e83['className']=_0xa8917b(0x1f2);if(_0xac3879===0x0)_0x815e83[_0xa8917b(0x297)][_0xa8917b(0x282)](_0xa8917b(0x1e8));_0x815e83['innerHTML']=_0xa8917b(0x211)+_0xb5b25a+_0xa8917b(0x29f)+_0x12f2a1+_0xa8917b(0x228),_0x815e83[_0xa8917b(0x1d2)]=()=>selectRsDate(_0x2ab1e9,_0x815e83),_0x171d8e['appendChild'](_0x815e83);}),selectRsDate(_0x2d714b[0x0],_0x171d8e[_0x4fef14(0x202)]);}function selectRsDate(_0x5be8c4,_0x328021){const _0x166719=a3_0x528780;selectedRsDate=_0x5be8c4,document[_0x166719(0x208)]('.rs-date-chip')[_0x166719(0x260)](_0x53d9b2=>_0x53d9b2[_0x166719(0x297)][_0x166719(0x1e5)](_0x166719(0x1e8)));if(_0x328021)_0x328021[_0x166719(0x297)][_0x166719(0x282)]('active');const _0x55e4f9=document[_0x166719(0x2a1)](_0x166719(0x22b));_0x55e4f9[_0x166719(0x267)]='';const _0x3f352a=availableSlotsCache[_0x5be8c4]||[];if(_0x3f352a[_0x166719(0x1d0)]===0x0){_0x55e4f9[_0x166719(0x267)]=_0x166719(0x1de);return;}_0x3f352a[_0x166719(0x260)](_0x1f54ec=>{const _0x3ee7c4=_0x166719,_0xa2d162=document[_0x3ee7c4(0x23b)](_0x3ee7c4(0x1c1));_0xa2d162[_0x3ee7c4(0x1c5)]='rs-time-btn',_0xa2d162[_0x3ee7c4(0x276)]=_0x1f54ec,_0xa2d162[_0x3ee7c4(0x1d2)]=()=>confirmReschedule(_0x1f54ec),_0x55e4f9[_0x3ee7c4(0x246)](_0xa2d162);});}async function confirmReschedule(_0x152ad3){const _0x5a3193=a3_0x528780,_0x5be75b=new Date(selectedRsDate),_0x157299=_0x5be75b['toLocaleDateString']('ru-RU',{'day':'numeric','month':'long'}),_0x1d6a32=await showCustomConfirm(_0x5a3193(0x1dc),_0x5a3193(0x21d)+_0x157299+_0x5a3193(0x27c)+_0x152ad3+'?',![]);if(!_0x1d6a32)return;closeAllSheets(),showToast(_0x5a3193(0x273)),lastUserActionTime=Date[_0x5a3193(0x20c)]();const _0x459296=currentSession[_0x5a3193(0x26e)],_0x40c88a=currentSession['id'],[_0x442b2e,_0x3a9050]=currentSession[_0x5a3193(0x1b0)][_0x5a3193(0x213)](':')[_0x5a3193(0x28b)](Number),[_0x4dfb01,_0x38e2c0]=currentSession[_0x5a3193(0x1f1)][_0x5a3193(0x213)](':')[_0x5a3193(0x28b)](Number),_0x424be0=_0x4dfb01*0x3c+_0x38e2c0-(_0x442b2e*0x3c+_0x3a9050),[_0x40da21,_0x10d494]=_0x152ad3[_0x5a3193(0x213)](':')['map'](Number),_0x5a86e0=_0x40da21*0x3c+_0x10d494+_0x424be0,_0x4436b0=Math['floor'](_0x5a86e0/0x3c),_0x4f4975=_0x5a86e0%0x3c,_0x4cabac=String(_0x4436b0)[_0x5a3193(0x23a)](0x2,'0')+':'+String(_0x4f4975)[_0x5a3193(0x23a)](0x2,'0'),_0x2dfcfb=sessions[_0x5a3193(0x25e)](_0x3c5f4d=>_0x3c5f4d['id']===_0x40c88a);_0x2dfcfb!==-0x1&&(sessions[_0x2dfcfb]['dateStr']=selectedRsDate,sessions[_0x2dfcfb][_0x5a3193(0x1b0)]=_0x152ad3,sessions[_0x2dfcfb][_0x5a3193(0x1f1)]=_0x4cabac,reRenderBlocks());try{const _0xed40c3=window['Telegram']?.[_0x5a3193(0x24d)],_0x336e4f=await fetch(API_URL,{'method':_0x5a3193(0x23f),'body':JSON[_0x5a3193(0x1e4)]({'action':_0x5a3193(0x205),'init_data':_0xed40c3?.[_0x5a3193(0x1eb)]||'','oldSessionId':_0x40c88a,'oldDate':_0x459296,'newDate':selectedRsDate,'newTime':_0x152ad3,'coachId':currentSession[_0x5a3193(0x1b1)]})}),_0x341018=await _0x336e4f[_0x5a3193(0x249)]();!_0x341018['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager['syncLoad']()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x5a3193(0x20f)]());}catch(_0x525026){showToast(_0x5a3193(0x226));}}document[a3_0x528780(0x22a)](a3_0x528780(0x29e),init);function a3_0x481b(){const _0x52eca9=['offClick','getAttribute','data-date','error','setItem','uc_client_list','findIndex','toUpperCase','forEach','calendar','1546515xbBFjK','.sheet','find','getDate','setDate','innerHTML','day-col-header\x20','exceptions','clients','rgba(10,\x20132,\x20255,\x20','.period-switch\x20.p-btn','long','dateStr','anStart','calc(','push','router.html','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','width','data-day-idx','textContent','scroll','auto','</div><div\x20class=\x22dch-num\x22>','pattern','ranges','\x20–≤\x20','T00:00:00','cancelContainer','anDonutCircle','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','BackButton','add','note','planned','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','color','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','toLocaleString','location','flex','map',':00</span>','stopPropagation','<div\x20class=\x22dch-day\x22>','\x20—á.','px\x20-','anPercent','toLocaleDateString','round','total','%\x20-\x204px)','expand','classList','customConfirm','scrollLeft','–û—Ç–º–µ–Ω–µ–Ω–æ','charAt','daysHeaderTrack','filter','DOMContentLoaded','</div><div\x20class=\x22rs-day-num\x22>','(((.+)+)+)+$','getElementById','ccTitle','getMinutes','colIndex','min','start','coachId','2940750fNuVKs','setHeaderColor','getItem','headerMonth','ready','\x20–∏–∑\x20','clientWidth','backgroundPosition','getFullYear','analyticsList','disableVerticalSwipes','constructor','week','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','600','button','get_slots','setHours','#050505','className','var(--acc-blue)','entries','settings','cid','var(--acc-green)','substr','onClick','scrollTo','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','day-column\x20','length','open','onclick','data','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','slice','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','#0a84ff','matrixViewport','\x20status-completed','<span>','sid','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','zIndex','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','2038221oadyBA','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','rgba(','47981052Ikwnxb','setAttribute','stringify','remove','user','anTotalStats','active','custom','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','initData','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','top','parse','mini','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','end','rs-date-chip','2639336aqWkKD','ccYesBtn','Error\x20setting\x20back\x20button:','#ff453a','sort','div','log','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','.btn-cancel','join','8585180muqfIw','createDocumentFragment','completed','timeLineBadge','style','firstChild','substring','getTime','reschedule','getMonth','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','querySelectorAll','timeColumn','px\x200px','.day-column','now','today','none','saveLocally','analyticsSheet','<div\x20class=\x22rs-day-name\x22>','cancelHint','split','startsWith','setMonth','scrollTop','\x20-\x20','value','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','offsetWidth','offsetLeft','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','</span>\x20/\x20','uc_client_sessions','rsDatesTrack','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','test','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','fontWeight','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','event-card','</div>','toString','addEventListener','rsSlotsGrid','numeric','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','gridColumns','anEnd','show','visible','search','display','–∑–∞\x20','loadLocal','clientId','Critical\x20TMA\x20Error:','client_cancel','T23:59:59','padStart','createElement','insertBefore','done','querySelector','POST','v9.5-CLIENT-ANALYTICS','cancel_window','all','status','max','backgroundColor','appendChild','time-label','then','json','overlay','detailsSheet','getDay','WebApp','setBackgroundColor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','Telegram','globalTimeLine','.day-col-header','1671980vlEYZB','.btn-reschedule','block','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','ccText'];a3_0x481b=function(){return _0x52eca9;};return a3_0x481b();}