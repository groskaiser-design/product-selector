const a3_0x5912a1=a3_0x13d0;(function(_0x1a58bb,_0x3fccb3){const _0x1cdfd9=a3_0x13d0,_0x4dbae4=_0x1a58bb();while(!![]){try{const _0x4b0dba=-parseInt(_0x1cdfd9(0x162))/0x1+-parseInt(_0x1cdfd9(0x222))/0x2*(-parseInt(_0x1cdfd9(0x1a1))/0x3)+-parseInt(_0x1cdfd9(0x140))/0x4*(-parseInt(_0x1cdfd9(0x151))/0x5)+-parseInt(_0x1cdfd9(0x230))/0x6+-parseInt(_0x1cdfd9(0x16c))/0x7*(parseInt(_0x1cdfd9(0x1be))/0x8)+parseInt(_0x1cdfd9(0x193))/0x9+parseInt(_0x1cdfd9(0x166))/0xa;if(_0x4b0dba===_0x3fccb3)break;else _0x4dbae4['push'](_0x4dbae4['shift']());}catch(_0x49e92d){_0x4dbae4['push'](_0x4dbae4['shift']());}}}(a3_0x2fa8,0x92235));const APP_VERSION=a3_0x5912a1(0x18d),API_URL=a3_0x5912a1(0x173),GRID_H=0x3c,KEY_SESSIONS=a3_0x5912a1(0x146),KEY_SETTINGS=a3_0x5912a1(0x1ac),KEY_CLIENTS=a3_0x5912a1(0x14b);function a3_0x2fa8(){const _0x29509c=['var(--acc-green)','substr','querySelectorAll','overlay','createElement','timeColumn','borderLeftColor','4HKmwmh','getItem','(((.+)+)+)+$','client_cancel','map','classList','uc_client_sessions','setHours','rsDatesTrack','calendar','#ff453a','uc_client_list','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','router.html','time-label','Telegram','5668345DNLyVe','total','detNote','round','anStart','month','client-stat-card','toLocaleDateString','.rs-date-chip','toLocaleString','rgba(10,\x20132,\x20255,\x20','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','test','T00:00:00','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','clientWidth','1047527ybFelc','toUpperCase','detDate','ccTitle','6394110uyPxHY','.period-switch\x20.p-btn','.day-column','remove','expand','backgroundColor','644553tkVzyg','ccYesBtn','width','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','disableVerticalSwipes','left','sid','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','add','rsSlotsGrid','value','<div\x20class=\x22dch-day\x22>','done','POST','end','globalTimeLine','\x20status-completed','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','setAttribute','analyticsSheet','color','push','height','search','\x20–∏–∑\x20','getDate','block','findIndex','coach_profiles','keys','getAttribute','zIndex','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','v9.5-CLIENT-ANALYTICS','href','rs-time-btn','anPercent','applyData','coachId','8539794AoGgid','seriesId','stopPropagation','#050505','apply','.btn-cancel','constructor','timeLineBadge','startsWith','data-date','substring','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','dateStr','backgroundPosition','1314561wtQOUt','scrollLeft','ccText','getDay','active','data-day-idx','offsetLeft','client_load','clientId','setHeaderColor','display','uc_client_settings','querySelector','entries','WebApp','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','forEach','anTotalStats','detailsSheet','Critical\x20TMA\x20Error:','insertBefore','max','getMonth','cancel_window','</div>','data','json','colIndex','offsetWidth','104vhIvcq','.btn-reschedule','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','div','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','now','day-col-header\x20','padStart','%\x20-\x204px)','split','.sheet','day-off-overlay\x20stripe-bg','pattern','gridColumns','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','blocked-slot\x20stripe-bg','cancelled','createDocumentFragment','log','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','auto','getTime','firstChild','slice','anEnd','parse','initData','scroll','onClick','<div\x20class=\x22rs-day-name\x22>','getHours','blocked-range-part\x20stripe-bg','ready','textContent','detTime','setMonth','initDataUnsafe','completed','day-column\x20','ru-RU','charAt','cancelContainer','appendChild','syncLoad','top','var(--acc-blue)','scrollWidth','innerHTML','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','className','numeric','offClick','isArray','matrixViewport','length','reschedule','ranges','getFullYear','exceptions','filter','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','rgba(','px\x200px','\x20—á.','customConfirm','toast','calc(','600','analyticsList','today','BackButton','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','settings','cancelHint','saveLocally','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','visible','getMinutes','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','</span>\x20/\x20','sort','addEventListener','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','daysHeaderTrack','toString','clients','.day-col-header[data-date=\x22','show','join','getElementById','setBackgroundColor','\x20-\x20','status','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','stringify','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','week','4vkCGbG','<span>','scrollTop','start','fontWeight','style','get_slots','button','#0a84ff','min','px\x20-','loadLocal','Unknown','long','4531110ItMBmb','user','none','open','T23:59:59','onclick','find','setItem','.day-col-header','rescheduleSheet','rs-date-chip'];a3_0x2fa8=function(){return _0x29509c;};return a3_0x2fa8();}let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x5912a1(0x221),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x443af9=a3_0x5912a1,_0x49a00d=(function(){let _0x30e754=!![];return function(_0x257446,_0x386478){const _0xcce9e9=_0x30e754?function(){const _0x552c9e=a3_0x13d0;if(_0x386478){const _0x401c2a=_0x386478[_0x552c9e(0x197)](_0x257446,arguments);return _0x386478=null,_0x401c2a;}}:function(){};return _0x30e754=![],_0xcce9e9;};}()),_0x3331d5=_0x49a00d(this,function(){const _0x5b47d7=a3_0x13d0;return _0x3331d5[_0x5b47d7(0x214)]()[_0x5b47d7(0x183)]('(((.+)+)+)+$')['toString']()[_0x5b47d7(0x199)](_0x3331d5)[_0x5b47d7(0x183)](_0x5b47d7(0x142));});_0x3331d5();try{const _0x282fe5=window['Telegram']?.[_0x443af9(0x1af)];if(!_0x282fe5)return;_0x282fe5[_0x443af9(0x1df)](),_0x282fe5[_0x443af9(0x16a)]();try{_0x282fe5[_0x443af9(0x1aa)](_0x443af9(0x196)),_0x282fe5['setBackgroundColor']&&_0x282fe5[_0x443af9(0x21a)]('#050505');}catch(_0x1ef397){console[_0x443af9(0x1d1)]('Error\x20setting\x20color:',_0x1ef397);}try{_0x282fe5[_0x443af9(0x205)]&&(_0x282fe5[_0x443af9(0x205)][_0x443af9(0x217)](),_0x282fe5[_0x443af9(0x205)][_0x443af9(0x1f2)](),_0x282fe5['BackButton'][_0x443af9(0x1db)](function(){const _0x1bf777=_0x443af9;window['location'][_0x1bf777(0x18e)]=_0x1bf777(0x14e);}));}catch(_0x44b23e){console[_0x443af9(0x1d1)]('Error\x20setting\x20back\x20button:',_0x44b23e);}try{if(_0x282fe5[_0x443af9(0x170)])_0x282fe5[_0x443af9(0x170)]();}catch(_0x55932d){}}catch(_0x3554d3){console['error'](_0x443af9(0x1b4),_0x3554d3);}}());function isAdmin(){const _0x207eac=a3_0x5912a1;try{const _0x5891cc=Number(window[_0x207eac(0x150)]?.[_0x207eac(0x1af)]?.[_0x207eac(0x1e3)]?.[_0x207eac(0x231)]?.['id']);return _0x5891cc===0xbaf7174;}catch(_0x354171){return![];}}const DataManager={'saveLocally'(){const _0x3161db=a3_0x5912a1;try{localStorage[_0x3161db(0x237)](KEY_SESSIONS,JSON[_0x3161db(0x21e)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON[_0x3161db(0x21e)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x3161db(0x21e)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x5f3027){}},'loadLocal'(){const _0x3e555b=a3_0x5912a1;try{const _0x4ba919=localStorage[_0x3e555b(0x141)](KEY_SESSIONS);if(_0x4ba919)sessions=JSON[_0x3e555b(0x1d8)](_0x4ba919);const _0xf2f9bd=localStorage[_0x3e555b(0x141)](KEY_CLIENTS);if(_0xf2f9bd)clients=JSON[_0x3e555b(0x1d8)](_0xf2f9bd);const _0x9c2c19=localStorage[_0x3e555b(0x141)](KEY_SETTINGS);if(_0x9c2c19){const _0x436b24=JSON[_0x3e555b(0x1d8)](_0x9c2c19);if(_0x436b24[_0x3e555b(0x1cb)])availabilityPattern=_0x436b24[_0x3e555b(0x1cb)];if(_0x436b24[_0x3e555b(0x1f7)])specialRanges=_0x436b24['ranges'];if(_0x436b24['exceptions'])dateExceptions=_0x436b24[_0x3e555b(0x1f9)];}}catch(_0x340145){}},async 'syncLoad'(){const _0x4e37b2=a3_0x5912a1,_0x2bb672=new Date(),_0x1d749f=_0x2bb672['getFullYear']()+'-'+String(_0x2bb672['getMonth']()+0x1)[_0x4e37b2(0x1c6)](0x2,'0'),_0x5ed090=new Date(_0x2bb672);_0x5ed090[_0x4e37b2(0x1e2)](_0x2bb672[_0x4e37b2(0x1b7)]()+0x1);const _0x2c0cec=_0x5ed090[_0x4e37b2(0x1f8)]()+'-'+String(_0x5ed090[_0x4e37b2(0x1b7)]()+0x1)[_0x4e37b2(0x1c6)](0x2,'0'),_0x15417e=Date[_0x4e37b2(0x1c4)]();try{const _0x373a63=window[_0x4e37b2(0x150)]?.[_0x4e37b2(0x1af)],_0x8c1f87=_0x373a63?.['initData']||'',[_0x2c2386,_0x32a990]=await Promise['all']([fetch(API_URL,{'method':_0x4e37b2(0x179),'body':JSON[_0x4e37b2(0x21e)]({'action':'client_load','init_data':_0x8c1f87,'month_str':_0x1d749f})})['then'](_0x1a41a9=>_0x1a41a9[_0x4e37b2(0x1bb)]()),fetch(API_URL,{'method':_0x4e37b2(0x179),'body':JSON[_0x4e37b2(0x21e)]({'action':_0x4e37b2(0x1a8),'init_data':_0x8c1f87,'month_str':_0x2c0cec})})['then'](_0x2098b2=>_0x2098b2[_0x4e37b2(0x1bb)]())]);if(lastUserActionTime>_0x15417e){console['log'](_0x4e37b2(0x21d));return;}if(_0x2c2386['ok'])this[_0x4e37b2(0x191)](_0x2c2386[_0x4e37b2(0x1ba)],_0x1d749f);if(_0x32a990['ok'])this[_0x4e37b2(0x191)](_0x32a990[_0x4e37b2(0x1ba)],_0x2c0cec);this[_0x4e37b2(0x209)]();}catch(_0x13f683){}},'applyData'(_0x464f02,_0x260af7){const _0x55f5f5=a3_0x5912a1;if(!_0x464f02)return;if(_0x464f02['settings']){if(_0x464f02['settings'][_0x55f5f5(0x1cb)])availabilityPattern=_0x464f02[_0x55f5f5(0x207)]['pattern'];if(_0x464f02[_0x55f5f5(0x207)]['ranges'])specialRanges=_0x464f02['settings'][_0x55f5f5(0x1f7)];if(_0x464f02[_0x55f5f5(0x207)][_0x55f5f5(0x1f9)])dateExceptions=_0x464f02[_0x55f5f5(0x207)][_0x55f5f5(0x1f9)];}if(_0x464f02[_0x55f5f5(0x215)]&&Array[_0x55f5f5(0x1f3)](_0x464f02[_0x55f5f5(0x215)]))clients=_0x464f02[_0x55f5f5(0x215)];_0x464f02[_0x55f5f5(0x188)]&&(coachProfiles={...coachProfiles,..._0x464f02[_0x55f5f5(0x188)]}),_0x464f02[_0x55f5f5(0x149)]&&(sessions=sessions[_0x55f5f5(0x1fa)](_0x143429=>!_0x143429[_0x55f5f5(0x19f)][_0x55f5f5(0x19b)](_0x260af7)),Object[_0x55f5f5(0x189)](_0x464f02[_0x55f5f5(0x149)])[_0x55f5f5(0x1b1)](_0x255878=>{const _0x4603eb=_0x55f5f5,_0x5a5193=_0x464f02[_0x4603eb(0x149)][_0x255878];_0x5a5193[_0x4603eb(0x1b1)](_0x12ade2=>{const _0x524ad8=_0x4603eb;sessions[_0x524ad8(0x181)]({'id':_0x12ade2['i'],'clientId':_0x12ade2['c'],'coachId':_0x12ade2['cid'],'dateStr':_0x260af7+'-'+_0x255878['padStart'](0x2,'0'),'start':_0x12ade2['s'],'end':_0x12ade2['e'],'note':_0x12ade2['n']||'','status':_0x12ade2['st']||'planned','seriesId':_0x12ade2[_0x524ad8(0x172)]});});})),reRenderBlocks();}};function init(){const _0x3691e0=a3_0x5912a1;DataManager[_0x3691e0(0x22d)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x3691e0(0x1f4))[_0x3691e0(0x210)](_0x3691e0(0x1da),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x3691e0(0x1ea)]();}function renderTimeColumn(){const _0x2e806c=a3_0x5912a1,_0x2899f3=document['getElementById'](_0x2e806c(0x13e)),_0x329304=document[_0x2e806c(0x219)](_0x2e806c(0x19a));_0x2899f3[_0x2e806c(0x1ee)]='',_0x2899f3[_0x2e806c(0x1e9)](_0x329304);for(let _0x2acaee=0x0;_0x2acaee<0x18;_0x2acaee++){const _0x4f7188=document[_0x2e806c(0x23f)](_0x2e806c(0x1c2));_0x4f7188[_0x2e806c(0x1f0)]=_0x2e806c(0x14f);if(_0x2acaee>0x0)_0x4f7188[_0x2e806c(0x1ee)]=_0x2e806c(0x223)+String(_0x2acaee)[_0x2e806c(0x1c6)](0x2,'0')+':00</span>';_0x2899f3[_0x2e806c(0x1e9)](_0x4f7188);}}function renderDayRange(_0xebbe87,_0xf97c93){const _0x329480=a3_0x5912a1,_0x1bce26=document[_0x329480(0x219)](_0x329480(0x213)),_0xfcb314=document['getElementById'](_0x329480(0x1cc)),_0x2b1377=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xeabb3f=new Date();_0xeabb3f['setHours'](0x0,0x0,0x0,0x0);const _0x3ed0cb=getLocalDateStr(new Date());for(let _0x151349=_0xebbe87;_0x151349<=_0xf97c93;_0x151349++){const _0x3a0ee7=new Date(_0xeabb3f);_0x3a0ee7['setDate'](_0x3a0ee7[_0x329480(0x185)]()+_0x151349);const _0xaeb3e6=getLocalDateStr(_0x3a0ee7);let _0x3c2233=_0x3a0ee7[_0x329480(0x1a4)]()-0x1;if(_0x3c2233===-0x1)_0x3c2233=0x6;const _0x32c338=_0xaeb3e6===_0x3ed0cb,_0x230446=document[_0x329480(0x23f)](_0x329480(0x1c2));_0x230446[_0x329480(0x1f0)]=_0x329480(0x1c5)+(_0x32c338?_0x329480(0x204):''),_0x230446['setAttribute'](_0x329480(0x19c),_0xaeb3e6),_0x230446['innerHTML']=_0x329480(0x177)+_0x2b1377[_0x3c2233]+'</div><div\x20class=\x22dch-num\x22>'+_0x3a0ee7[_0x329480(0x185)]()+_0x329480(0x1b9),_0x1bce26[_0x329480(0x1e9)](_0x230446);const _0x1e6802=document[_0x329480(0x23f)](_0x329480(0x1c2));_0x1e6802['className']=_0x329480(0x1e5)+(_0x32c338?_0x329480(0x204):''),_0x1e6802[_0x329480(0x17e)](_0x329480(0x19c),_0xaeb3e6),_0x1e6802[_0x329480(0x17e)](_0x329480(0x1a6),_0x3c2233),_0xfcb314[_0x329480(0x1e9)](_0x1e6802);}}function reRenderBlocks(){const _0x1ecb48=a3_0x5912a1;document[_0x1ecb48(0x23d)](_0x1ecb48(0x168))['forEach'](_0x2d62db=>{const _0x7b435e=_0x1ecb48;_0x2d62db['querySelectorAll'](_0x7b435e(0x15c))[_0x7b435e(0x1b1)](_0x1bf655=>_0x1bf655[_0x7b435e(0x169)]());const _0x809984=_0x2d62db[_0x7b435e(0x18a)]('data-date'),_0x2c4400=parseInt(_0x2d62db[_0x7b435e(0x18a)](_0x7b435e(0x1a6))),_0x194f15=Math[_0x7b435e(0x154)](_0x2d62db[_0x7b435e(0x1a7)]);(availabilityPattern[_0x2c4400]||[])[_0x7b435e(0x1b1)](_0x4260d7=>{const _0x34594b=_0x7b435e,_0x5ef165=document[_0x34594b(0x23f)](_0x34594b(0x1c2));_0x5ef165[_0x34594b(0x1f0)]=_0x34594b(0x1ce),_0x5ef165[_0x34594b(0x227)][_0x34594b(0x1eb)]=_0x4260d7*GRID_H+'px',_0x5ef165[_0x34594b(0x227)]['backgroundPosition']='-'+_0x194f15+_0x34594b(0x22c)+_0x4260d7*GRID_H+'px',_0x2d62db[_0x34594b(0x1e9)](_0x5ef165);});if(specialRanges['length']>0x0){const _0x229481=new Date(_0x809984+_0x7b435e(0x15f))['getTime'](),_0x570124=new Date(_0x809984+_0x7b435e(0x234))[_0x7b435e(0x1d4)]();specialRanges[_0x7b435e(0x1b1)](_0x3105eb=>{const _0x382b82=_0x7b435e,_0x3d6943=new Date(_0x3105eb[_0x382b82(0x225)])[_0x382b82(0x1d4)](),_0x3598ce=new Date(_0x3105eb[_0x382b82(0x17a)])['getTime'](),_0x1ca1db=Math[_0x382b82(0x1b6)](_0x229481,_0x3d6943),_0x2a37e8=Math['min'](_0x570124,_0x3598ce);if(_0x1ca1db<_0x2a37e8){const _0x3c758b=(_0x1ca1db-_0x229481)/0x36ee80*GRID_H,_0x14752d=(_0x2a37e8-_0x1ca1db)/0x36ee80*GRID_H,_0x10dbfc=document[_0x382b82(0x23f)]('div');_0x14752d>=23.5*GRID_H?(_0x10dbfc[_0x382b82(0x1f0)]=_0x382b82(0x1ca),_0x10dbfc[_0x382b82(0x227)][_0x382b82(0x1a0)]='-'+_0x194f15+_0x382b82(0x1fd)):(_0x10dbfc['className']=_0x382b82(0x1de),_0x10dbfc['style'][_0x382b82(0x1eb)]=_0x3c758b+'px',_0x10dbfc[_0x382b82(0x227)][_0x382b82(0x182)]=_0x14752d+'px',_0x10dbfc['style'][_0x382b82(0x1a0)]='-'+_0x194f15+_0x382b82(0x22c)+_0x3c758b+'px'),_0x2d62db[_0x382b82(0x1e9)](_0x10dbfc);}});}renderEventsForColumn(_0x2d62db,_0x809984);});}function renderEventsForColumn(_0x1320e6,_0x255b5f){const _0x49ed45=a3_0x5912a1,_0x170d79=sessions[_0x49ed45(0x1fa)](_0xa00478=>_0xa00478[_0x49ed45(0x19f)]===_0x255b5f),_0x33e290=_0x170d79[_0x49ed45(0x144)](_0x4751e2=>{const _0x3a90db=_0x49ed45,[_0xef4242,_0x52ae13]=_0x4751e2[_0x3a90db(0x225)]['split'](':')[_0x3a90db(0x144)](Number),[_0xd17036,_0x2b4fbd]=_0x4751e2[_0x3a90db(0x17a)][_0x3a90db(0x1c8)](':')[_0x3a90db(0x144)](Number);return{'data':_0x4751e2,'start':_0xef4242*0x3c+_0x52ae13,'end':_0xd17036*0x3c+_0x2b4fbd,'colIndex':0x0};});_0x33e290[_0x49ed45(0x20f)]((_0x3803bf,_0x27f37a)=>_0x3803bf[_0x49ed45(0x225)]-_0x27f37a['start']||_0x27f37a[_0x49ed45(0x17a)]-_0x27f37a[_0x49ed45(0x225)]-(_0x3803bf[_0x49ed45(0x17a)]-_0x3803bf[_0x49ed45(0x225)]));const _0x42b03b=[];_0x33e290[_0x49ed45(0x1b1)](_0x41b7f1=>{const _0x378d35=_0x49ed45;let _0x56a521=![];for(let _0x3b7c09=0x0;_0x3b7c09<_0x42b03b[_0x378d35(0x1f5)];_0x3b7c09++){const _0x5dd920=_0x42b03b[_0x3b7c09];if(_0x41b7f1[_0x378d35(0x225)]>=_0x5dd920[_0x5dd920[_0x378d35(0x1f5)]-0x1][_0x378d35(0x17a)]){_0x5dd920['push'](_0x41b7f1),_0x41b7f1['colIndex']=_0x3b7c09,_0x56a521=!![];break;}}!_0x56a521&&(_0x42b03b[_0x378d35(0x181)]([_0x41b7f1]),_0x41b7f1[_0x378d35(0x1bc)]=_0x42b03b['length']-0x1);}),_0x33e290[_0x49ed45(0x1b1)](_0x2174bf=>{const _0x4dd3d1=_0x49ed45;let _0x143553=0x0;_0x33e290[_0x4dd3d1(0x1b1)](_0x51035d=>{const _0x13b13b=_0x4dd3d1;if(Math[_0x13b13b(0x1b6)](_0x2174bf[_0x13b13b(0x225)],_0x51035d[_0x13b13b(0x225)])<Math[_0x13b13b(0x22b)](_0x2174bf['end'],_0x51035d['end'])&&_0x51035d[_0x13b13b(0x1bc)]>_0x143553)_0x143553=_0x51035d[_0x13b13b(0x1bc)];});const _0x57003f=_0x143553+0x1,_0x2a1967=0x64/_0x57003f,_0x5abae2=_0x2174bf['colIndex']*_0x2a1967,_0x24b695=document[_0x4dd3d1(0x23f)](_0x4dd3d1(0x1c2)),_0x3c66e8=_0x2174bf[_0x4dd3d1(0x1ba)];let _0x3ff7c5='#0a84ff';if(clients&&clients[_0x4dd3d1(0x1f5)]>0x0){const _0x381672=clients[_0x4dd3d1(0x236)](_0x330eea=>String(_0x330eea['id'])===String(_0x3c66e8[_0x4dd3d1(0x1a9)]));if(_0x381672&&_0x381672[_0x4dd3d1(0x180)])_0x3ff7c5=_0x381672[_0x4dd3d1(0x180)];}const _0x39c877=_0x3c66e8[_0x4dd3d1(0x21c)]===_0x4dd3d1(0x1e4),_0x4df925=_0x39c877?0x1:0.45;_0x24b695[_0x4dd3d1(0x1f0)]='event-card'+(_0x39c877?_0x4dd3d1(0x17c):''),_0x24b695[_0x4dd3d1(0x227)][_0x4dd3d1(0x16b)]=hexToRgba(_0x3ff7c5,_0x4df925),_0x24b695[_0x4dd3d1(0x227)][_0x4dd3d1(0x13f)]=_0x3ff7c5;const _0x301c66=_0x2174bf[_0x4dd3d1(0x225)]/0x3c*GRID_H,_0xa781f7=(_0x2174bf['end']-_0x2174bf[_0x4dd3d1(0x225)])/0x3c*GRID_H;_0x24b695[_0x4dd3d1(0x227)][_0x4dd3d1(0x1eb)]=_0x301c66+'px',_0x24b695[_0x4dd3d1(0x227)][_0x4dd3d1(0x182)]=Math[_0x4dd3d1(0x1b6)](_0xa781f7,0x14)+'px',_0x24b695[_0x4dd3d1(0x227)][_0x4dd3d1(0x16e)]=_0x4dd3d1(0x201)+_0x2a1967+_0x4dd3d1(0x1c7),_0x24b695[_0x4dd3d1(0x227)][_0x4dd3d1(0x171)]=_0x4dd3d1(0x201)+_0x5abae2+'%\x20+\x202px)',_0x24b695[_0x4dd3d1(0x227)][_0x4dd3d1(0x18b)]=0xa+_0x2174bf['colIndex'];if(_0x2a1967<0x55)_0x24b695[_0x4dd3d1(0x145)][_0x4dd3d1(0x174)]('mini');let _0x22a9b1='';if(_0x3c66e8[_0x4dd3d1(0x194)])_0x22a9b1+=_0x4dd3d1(0x1fb);if(_0x39c877)_0x22a9b1+=_0x4dd3d1(0x20d);_0x24b695[_0x4dd3d1(0x1ee)]=_0x4dd3d1(0x16f)+_0x3c66e8[_0x4dd3d1(0x225)]+_0x4dd3d1(0x21b)+_0x3c66e8[_0x4dd3d1(0x17a)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x22a9b1+_0x4dd3d1(0x1c3),_0x24b695[_0x4dd3d1(0x235)]=_0x216a05=>{const _0x3a5b90=_0x4dd3d1;_0x216a05[_0x3a5b90(0x195)](),openDetails(_0x3c66e8);},_0x1320e6['appendChild'](_0x24b695);});}function openAnalytics(){const _0x4e5ca3=a3_0x5912a1,_0x1ee99b=document[_0x4e5ca3(0x1ad)](_0x4e5ca3(0x167));setAnalyticsPeriod('week',_0x1ee99b),openSheet(_0x4e5ca3(0x17f));}function setAnalyticsPeriod(_0x392c6,_0x308091){const _0x49ed7c=a3_0x5912a1;currentAnPeriod=_0x392c6,document['querySelectorAll'](_0x49ed7c(0x167))[_0x49ed7c(0x1b1)](_0x3dc616=>_0x3dc616[_0x49ed7c(0x145)][_0x49ed7c(0x169)]('active'));if(_0x308091)_0x308091[_0x49ed7c(0x145)]['add'](_0x49ed7c(0x1a5));const _0x299bc1=document[_0x49ed7c(0x219)]('anCustomDates');_0x299bc1[_0x49ed7c(0x227)][_0x49ed7c(0x1ab)]=_0x392c6==='custom'?'flex':_0x49ed7c(0x232);const _0x5c72b8=new Date();let _0x539b0e=new Date(),_0x239d25=new Date();if(_0x392c6===_0x49ed7c(0x221))_0x539b0e=getStartOfWeek(_0x5c72b8),_0x239d25=new Date(_0x539b0e),_0x239d25['setDate'](_0x239d25[_0x49ed7c(0x185)]()+0x6);else{if(_0x392c6===_0x49ed7c(0x156))_0x539b0e=new Date(_0x5c72b8[_0x49ed7c(0x1f8)](),_0x5c72b8[_0x49ed7c(0x1b7)](),0x1),_0x239d25=new Date(_0x5c72b8['getFullYear'](),_0x5c72b8[_0x49ed7c(0x1b7)]()+0x1,0x0);else{!document[_0x49ed7c(0x219)]('anStart')['value']&&(document['getElementById']('anStart')[_0x49ed7c(0x176)]=getLocalDateStr(_0x5c72b8),document['getElementById'](_0x49ed7c(0x1d7))['value']=getLocalDateStr(_0x5c72b8));refreshAnalytics();return;}}document['getElementById'](_0x49ed7c(0x155))[_0x49ed7c(0x176)]=getLocalDateStr(_0x539b0e),document[_0x49ed7c(0x219)]('anEnd')[_0x49ed7c(0x176)]=getLocalDateStr(_0x239d25),refreshAnalytics();}function refreshAnalytics(){const _0x2cb1d9=a3_0x5912a1,_0x5a5b6d=document[_0x2cb1d9(0x219)]('anStart')[_0x2cb1d9(0x176)],_0x1f5a73=document[_0x2cb1d9(0x219)]('anEnd')[_0x2cb1d9(0x176)];if(!_0x5a5b6d||!_0x1f5a73)return;const _0x4ea785=sessions[_0x2cb1d9(0x1fa)](_0x140fe9=>_0x140fe9[_0x2cb1d9(0x19f)]>=_0x5a5b6d&&_0x140fe9[_0x2cb1d9(0x19f)]<=_0x1f5a73&&_0x140fe9['status']!==_0x2cb1d9(0x1cf)),_0x599981=_0x4ea785[_0x2cb1d9(0x1f5)],_0x4df000=_0x4ea785[_0x2cb1d9(0x1fa)](_0x43c756=>_0x43c756[_0x2cb1d9(0x21c)]===_0x2cb1d9(0x1e4))['length'],_0xc5e50c=_0x599981>0x0?Math[_0x2cb1d9(0x154)](_0x4df000/_0x599981*0x64):0x0;document[_0x2cb1d9(0x219)](_0x2cb1d9(0x190))['textContent']=_0xc5e50c+'%',document[_0x2cb1d9(0x219)](_0x2cb1d9(0x1b2))['textContent']=_0x4df000+_0x2cb1d9(0x184)+_0x599981+_0x2cb1d9(0x1cd);const _0x1ea413=document[_0x2cb1d9(0x219)]('anDonutCircle'),_0x1ea673=0x2*Math['PI']*0x23,_0x4c722e=_0x1ea673-_0xc5e50c/0x64*_0x1ea673;_0x1ea413[_0x2cb1d9(0x227)]['strokeDashoffset']=_0x4c722e;const _0x475dc0={};_0x4ea785[_0x2cb1d9(0x1b1)](_0x2f9ede=>{const _0x502a35=_0x2cb1d9,_0x505b8e=_0x2f9ede['coachId']||_0x502a35(0x22e);if(!_0x475dc0[_0x505b8e]){const _0x475c24='#'+_0x505b8e[_0x502a35(0x214)]()[_0x502a35(0x23c)](0x0,0x6);_0x475dc0[_0x505b8e]={'total':0x0,'done':0x0,'color':_0x475c24};}_0x475dc0[_0x505b8e]['total']++;if(_0x2f9ede[_0x502a35(0x21c)]===_0x502a35(0x1e4))_0x475dc0[_0x505b8e][_0x502a35(0x178)]++;});const _0x39c254=document[_0x2cb1d9(0x219)](_0x2cb1d9(0x203));_0x39c254[_0x2cb1d9(0x1ee)]='';const _0x572387=Object[_0x2cb1d9(0x1ae)](_0x475dc0)['sort']((_0x59c1a9,_0x3d2beb)=>_0x3d2beb[0x1][_0x2cb1d9(0x152)]-_0x59c1a9[0x1][_0x2cb1d9(0x152)]);if(_0x572387['length']===0x0){_0x39c254['innerHTML']=_0x2cb1d9(0x14c);return;}_0x572387[_0x2cb1d9(0x1b1)](([_0x45db28,_0x2a5b90])=>{const _0x38e8f5=_0x2cb1d9,_0x237f62=Math[_0x38e8f5(0x154)](_0x2a5b90[_0x38e8f5(0x178)]/_0x2a5b90[_0x38e8f5(0x152)]*0x64),_0x25de4f=document[_0x38e8f5(0x23f)](_0x38e8f5(0x1c2));_0x25de4f[_0x38e8f5(0x1f0)]=_0x38e8f5(0x157),_0x25de4f[_0x38e8f5(0x227)][_0x38e8f5(0x13f)]=_0x2a5b90[_0x38e8f5(0x180)],_0x25de4f[_0x38e8f5(0x1ee)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x45db28[_0x38e8f5(0x23c)](0x0,0x5)+_0x38e8f5(0x21f)+_0x2a5b90[_0x38e8f5(0x178)]+_0x38e8f5(0x20e)+_0x2a5b90[_0x38e8f5(0x152)]+_0x38e8f5(0x17d)+_0x237f62+_0x38e8f5(0x14d),_0x39c254[_0x38e8f5(0x1e9)](_0x25de4f);});}function openDetails(_0x2ed614){const _0x5419f1=a3_0x5912a1;currentSession=_0x2ed614;const _0x59cca6=new Date(_0x2ed614['dateStr']),_0x1c2d3e=_0x59cca6['toLocaleDateString'](_0x5419f1(0x1e6),{'weekday':_0x5419f1(0x22f),'day':_0x5419f1(0x1f1),'month':_0x5419f1(0x22f)});document[_0x5419f1(0x219)](_0x5419f1(0x164))[_0x5419f1(0x1e0)]=_0x1c2d3e[_0x5419f1(0x1e7)](0x0)[_0x5419f1(0x163)]()+_0x1c2d3e[_0x5419f1(0x1d6)](0x1),document[_0x5419f1(0x219)](_0x5419f1(0x1e1))[_0x5419f1(0x1e0)]=_0x2ed614[_0x5419f1(0x225)]+_0x5419f1(0x21b)+_0x2ed614['end'],document[_0x5419f1(0x219)](_0x5419f1(0x153))['textContent']=_0x2ed614['note']||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x5e3bec=document['getElementById']('detStatus'),_0x1db411=document[_0x5419f1(0x219)](_0x5419f1(0x1e8)),_0x221629=_0x1db411[_0x5419f1(0x1ad)](_0x5419f1(0x198)),_0x4c47ee=_0x1db411[_0x5419f1(0x1ad)](_0x5419f1(0x1bf)),_0x5294cb=document['getElementById'](_0x5419f1(0x208));if(_0x2ed614[_0x5419f1(0x21c)]==='completed')_0x5e3bec[_0x5419f1(0x1e0)]=_0x5419f1(0x1ef),_0x5e3bec['style']['color']=_0x5419f1(0x23b),_0x1db411[_0x5419f1(0x227)][_0x5419f1(0x1ab)]='none';else{_0x5e3bec[_0x5419f1(0x1e0)]=_0x5419f1(0x1c0),_0x5e3bec['style'][_0x5419f1(0x180)]=_0x5419f1(0x1ec),_0x1db411['style'][_0x5419f1(0x1ab)]=_0x5419f1(0x186);const _0x4d39ce=new Date(_0x2ed614[_0x5419f1(0x19f)]+'T'+_0x2ed614[_0x5419f1(0x225)]),_0x46d822=new Date(),_0x3b5722=(_0x4d39ce-_0x46d822)/(0x3e8*0x3c*0x3c),_0x31d9b6=coachProfiles[_0x2ed614[_0x5419f1(0x192)]]&&coachProfiles[_0x2ed614[_0x5419f1(0x192)]][_0x5419f1(0x1b8)]?parseInt(coachProfiles[_0x2ed614[_0x5419f1(0x192)]][_0x5419f1(0x1b8)]):0x18;if(_0x31d9b6===0x0||_0x3b5722>=_0x31d9b6)_0x221629[_0x5419f1(0x227)]['display']=_0x5419f1(0x186),_0x4c47ee[_0x5419f1(0x227)][_0x5419f1(0x1ab)]=_0x5419f1(0x186),_0x5294cb['style']['display']='none';else{_0x221629[_0x5419f1(0x227)]['display']=_0x5419f1(0x232),_0x4c47ee[_0x5419f1(0x227)]['display']=_0x5419f1(0x232),_0x5294cb[_0x5419f1(0x227)][_0x5419f1(0x1ab)]=_0x5419f1(0x186);let _0x2b3be3=_0x31d9b6===0x0?_0x5419f1(0x212):'–∑–∞\x20'+_0x31d9b6+_0x5419f1(0x1fe);_0x5294cb[_0x5419f1(0x1e0)]=_0x5419f1(0x160)+_0x2b3be3+_0x5419f1(0x1c1);}}document[_0x5419f1(0x219)]('overlay')[_0x5419f1(0x145)][_0x5419f1(0x174)](_0x5419f1(0x1a5)),document[_0x5419f1(0x219)](_0x5419f1(0x1b3))[_0x5419f1(0x145)][_0x5419f1(0x174)](_0x5419f1(0x233));}function closeAllSheets(){const _0x1471e7=a3_0x5912a1;document[_0x1471e7(0x219)](_0x1471e7(0x23e))[_0x1471e7(0x145)][_0x1471e7(0x169)](_0x1471e7(0x1a5)),document[_0x1471e7(0x23d)](_0x1471e7(0x1c9))[_0x1471e7(0x1b1)](_0x49c8a5=>_0x49c8a5['classList']['remove'](_0x1471e7(0x233)));}function openSheet(_0x1fcb65){const _0x5c6fb8=a3_0x5912a1;document[_0x5c6fb8(0x219)]('overlay')['classList'][_0x5c6fb8(0x174)](_0x5c6fb8(0x1a5)),document['getElementById'](_0x1fcb65)[_0x5c6fb8(0x145)]['add'](_0x5c6fb8(0x233));}function getLocalDateStr(_0x28d95d){const _0x58e7f4=a3_0x5912a1,_0x49abfe=_0x28d95d[_0x58e7f4(0x1f8)](),_0xfc1dd5=String(_0x28d95d[_0x58e7f4(0x1b7)]()+0x1)[_0x58e7f4(0x1c6)](0x2,'0'),_0x4750c5=String(_0x28d95d[_0x58e7f4(0x185)]())['padStart'](0x2,'0');return _0x49abfe+'-'+_0xfc1dd5+'-'+_0x4750c5;}function getStartOfWeek(_0x307f5e){const _0x59bbcd=a3_0x5912a1,_0x17bb54=new Date(_0x307f5e),_0x1017b6=_0x17bb54['getDay'](),_0xd0b0d3=_0x17bb54[_0x59bbcd(0x185)]()-_0x1017b6+(_0x1017b6===0x0?-0x6:0x1);return _0x17bb54['setDate'](_0xd0b0d3),_0x17bb54[_0x59bbcd(0x147)](0x0,0x0,0x0,0x0),_0x17bb54;}function scrollToToday(){const _0x3dc9d8=getLocalDateStr(new Date());setTimeout(()=>{const _0x3b995c=a3_0x13d0,_0x4e26eb=document[_0x3b995c(0x1ad)](_0x3b995c(0x216)+_0x3dc9d8+'\x22]');if(_0x4e26eb){const _0x3cac83=document['getElementById'](_0x3b995c(0x1f4)),_0x540420=_0x4e26eb['offsetLeft']-_0x3cac83[_0x3b995c(0x161)]/0x2+_0x4e26eb[_0x3b995c(0x1bd)]/0x2;_0x3cac83['scrollTo']({'left':_0x540420,'behavior':_0x3b995c(0x1d3)}),_0x3cac83[_0x3b995c(0x224)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x2f490f=a3_0x5912a1,_0x2be321=new Date(),_0x15a79c=document[_0x2f490f(0x219)](_0x2f490f(0x17b)),_0x4868e8=document[_0x2f490f(0x219)](_0x2f490f(0x19a)),_0xb1e244=(_0x2be321[_0x2f490f(0x1dd)]()*0x3c+_0x2be321['getMinutes']())/0x3c*GRID_H;_0x15a79c[_0x2f490f(0x227)][_0x2f490f(0x1eb)]=_0xb1e244+'px',_0x15a79c[_0x2f490f(0x227)]['display']=_0x2f490f(0x186),_0x4868e8[_0x2f490f(0x227)][_0x2f490f(0x1eb)]=_0xb1e244+'px',_0x4868e8['style']['display']=_0x2f490f(0x186),_0x4868e8[_0x2f490f(0x1e0)]=String(_0x2be321['getHours']())[_0x2f490f(0x1c6)](0x2,'0')+':'+String(_0x2be321[_0x2f490f(0x20c)]())['padStart'](0x2,'0');}function onScroll(){const _0x221b99=a3_0x5912a1,_0x2c2121=document[_0x221b99(0x219)](_0x221b99(0x1f4)),_0xa330e7=document['querySelectorAll'](_0x221b99(0x238));for(let _0x56fece of _0xa330e7)if(_0x56fece[_0x221b99(0x1a7)]>=_0x2c2121[_0x221b99(0x1a2)]){const _0x2650ee=new Date(_0x56fece[_0x221b99(0x18a)](_0x221b99(0x19c)));document['getElementById']('headerMonth')[_0x221b99(0x1e0)]=_0x2650ee[_0x221b99(0x15a)]('ru',{'month':_0x221b99(0x22f)})[_0x221b99(0x163)]()+'\x20'+_0x2650ee[_0x221b99(0x1f8)]();break;}}function showToast(_0x1ec9f6){const _0x31be4e=a3_0x5912a1,_0x326c90=document['getElementById'](_0x31be4e(0x200));_0x326c90[_0x31be4e(0x1e0)]=_0x1ec9f6,_0x326c90[_0x31be4e(0x145)]['add'](_0x31be4e(0x217)),setTimeout(()=>_0x326c90[_0x31be4e(0x145)][_0x31be4e(0x169)](_0x31be4e(0x217)),0x7d0);}function handleInfiniteScroll(){const _0x28015b=a3_0x5912a1,_0x3ce928=document[_0x28015b(0x219)](_0x28015b(0x1f4)),_0x3491bf=_0x3ce928[_0x28015b(0x1a2)],_0x56e0b5=_0x3ce928[_0x28015b(0x1ed)],_0x17620e=_0x3ce928[_0x28015b(0x161)];if(_0x56e0b5-(_0x3491bf+_0x17620e)<0x12c){const _0x15720e=endOffset;endOffset+=0xe,renderDayRange(_0x15720e+0x1,endOffset),reRenderBlocks();}if(_0x3491bf<0x12c){const _0x3332aa=startOffset;startOffset-=0xe,prependDays(startOffset,_0x3332aa-0x1),_0x3ce928['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x411d8c,_0x1ae1c5){const _0x4af091=a3_0x5912a1,_0x48c0a4=document['getElementById'](_0x4af091(0x213)),_0x322cb8=document[_0x4af091(0x219)](_0x4af091(0x1cc)),_0x519222=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4807fe=new Date();_0x4807fe[_0x4af091(0x147)](0x0,0x0,0x0,0x0);const _0x2c9ed9=getLocalDateStr(new Date()),_0x2cdced=document[_0x4af091(0x1d0)](),_0x4f5cfe=document[_0x4af091(0x1d0)]();for(let _0x227a96=_0x411d8c;_0x227a96<=_0x1ae1c5;_0x227a96++){const _0x1df824=new Date(_0x4807fe);_0x1df824['setDate'](_0x1df824['getDate']()+_0x227a96);const _0x2735e2=getLocalDateStr(_0x1df824);let _0x1fc56c=_0x1df824[_0x4af091(0x1a4)]()-0x1;if(_0x1fc56c===-0x1)_0x1fc56c=0x6;const _0x5d4ab6=_0x2735e2===_0x2c9ed9,_0x31b085=document[_0x4af091(0x23f)](_0x4af091(0x1c2));_0x31b085['className']='day-col-header\x20'+(_0x5d4ab6?_0x4af091(0x204):''),_0x31b085[_0x4af091(0x17e)](_0x4af091(0x19c),_0x2735e2),_0x31b085['innerHTML']=_0x4af091(0x177)+_0x519222[_0x1fc56c]+'</div><div\x20class=\x22dch-num\x22>'+_0x1df824[_0x4af091(0x185)]()+_0x4af091(0x1b9),_0x2cdced[_0x4af091(0x1e9)](_0x31b085);const _0x9d2098=document[_0x4af091(0x23f)](_0x4af091(0x1c2));_0x9d2098[_0x4af091(0x1f0)]='day-column\x20'+(_0x5d4ab6?_0x4af091(0x204):''),_0x9d2098['setAttribute'](_0x4af091(0x19c),_0x2735e2),_0x9d2098[_0x4af091(0x17e)]('data-day-idx',_0x1fc56c),_0x4f5cfe[_0x4af091(0x1e9)](_0x9d2098);}_0x48c0a4[_0x4af091(0x1b5)](_0x2cdced,_0x48c0a4['firstChild']),_0x322cb8[_0x4af091(0x1b5)](_0x4f5cfe,_0x322cb8[_0x4af091(0x1ad)](_0x4af091(0x168)));}function hexToRgba(_0x4d5339,_0x441a59){const _0x2212fc=a3_0x5912a1;let _0x367332;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x2212fc(0x15e)](_0x4d5339))return _0x367332=_0x4d5339[_0x2212fc(0x19d)](0x1)[_0x2212fc(0x1c8)](''),_0x367332[_0x2212fc(0x1f5)]==0x3&&(_0x367332=[_0x367332[0x0],_0x367332[0x0],_0x367332[0x1],_0x367332[0x1],_0x367332[0x2],_0x367332[0x2]]),_0x367332='0x'+_0x367332[_0x2212fc(0x218)](''),_0x2212fc(0x1fc)+[_0x367332>>0x10&0xff,_0x367332>>0x8&0xff,_0x367332&0xff][_0x2212fc(0x218)](',')+','+_0x441a59+')';return _0x2212fc(0x15b)+_0x441a59+')';}let confirmResolver=null;function showCustomConfirm(_0xa7a5a,_0x59fdf1,_0x1a6e7e=!![]){const _0x8f6cdf=a3_0x5912a1;document[_0x8f6cdf(0x219)](_0x8f6cdf(0x165))[_0x8f6cdf(0x1e0)]=_0xa7a5a,document[_0x8f6cdf(0x219)](_0x8f6cdf(0x1a3))[_0x8f6cdf(0x1e0)]=_0x59fdf1;const _0x264fa8=document[_0x8f6cdf(0x219)](_0x8f6cdf(0x16d));return _0x1a6e7e?(_0x264fa8[_0x8f6cdf(0x227)][_0x8f6cdf(0x180)]=_0x8f6cdf(0x14a),_0x264fa8['style'][_0x8f6cdf(0x226)]=_0x8f6cdf(0x202)):(_0x264fa8[_0x8f6cdf(0x227)][_0x8f6cdf(0x180)]=_0x8f6cdf(0x22a),_0x264fa8['style']['fontWeight']=_0x8f6cdf(0x202)),new Promise(_0x8f4876=>{const _0x11478a=_0x8f6cdf;confirmResolver=_0x8f4876,document['getElementById']('customConfirm')[_0x11478a(0x145)][_0x11478a(0x174)](_0x11478a(0x20b));});}function resolveCustomConfirm(_0x5a1e29){const _0x1c6722=a3_0x5912a1;document['getElementById'](_0x1c6722(0x1ff))['classList'][_0x1c6722(0x169)](_0x1c6722(0x20b));if(confirmResolver)confirmResolver(_0x5a1e29);}async function tryCancelCurrentSession(){const _0x30197a=a3_0x5912a1;if(!currentSession)return;const _0x94e7f6=await showCustomConfirm(_0x30197a(0x19e),_0x30197a(0x1d2),!![]);if(!_0x94e7f6)return;const _0x3aec81=currentSession;closeAllSheets(),sessions=sessions[_0x30197a(0x1fa)](_0x41077c=>_0x41077c['id']!==_0x3aec81['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x30197a(0x1c4)]();try{const _0x114e4b=window['Telegram']?.[_0x30197a(0x1af)],_0x5103cf=await fetch(API_URL,{'method':_0x30197a(0x179),'body':JSON[_0x30197a(0x21e)]({'action':_0x30197a(0x143),'init_data':_0x114e4b?.[_0x30197a(0x1d9)]||'','coachId':_0x3aec81[_0x30197a(0x192)],'dateStr':_0x3aec81['dateStr'],'sessionId':_0x3aec81['id']})});if(_0x5103cf['ok'])DataManager[_0x30197a(0x209)]();}catch(_0x32cad9){showToast(_0x30197a(0x18c));}}function a3_0x13d0(_0x28a503,_0x205e32){_0x28a503=_0x28a503-0x13e;const _0x406065=a3_0x2fa8();let _0x3b2d3b=_0x406065[_0x28a503];return _0x3b2d3b;}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x311046=a3_0x5912a1;if(!currentSession)return;document[_0x311046(0x219)]('detailsSheet')[_0x311046(0x145)][_0x311046(0x169)]('open'),document[_0x311046(0x219)](_0x311046(0x239))[_0x311046(0x145)][_0x311046(0x174)](_0x311046(0x233));const _0x4c1300=document[_0x311046(0x219)]('rsDatesTrack'),_0x1ec77a=document['getElementById'](_0x311046(0x175));_0x4c1300[_0x311046(0x1ee)]='',_0x1ec77a['innerHTML']=_0x311046(0x15d);const [_0x671f5c,_0x1da8db]=currentSession[_0x311046(0x225)][_0x311046(0x1c8)](':')[_0x311046(0x144)](Number),[_0x3fbf94,_0x2df589]=currentSession[_0x311046(0x17a)][_0x311046(0x1c8)](':')[_0x311046(0x144)](Number),_0x318e7a=_0x3fbf94*0x3c+_0x2df589-(_0x671f5c*0x3c+_0x1da8db);try{const _0x351bc1=window[_0x311046(0x150)]?.['WebApp'],_0x4ba4a2=await fetch(API_URL,{'method':_0x311046(0x179),'body':JSON[_0x311046(0x21e)]({'action':_0x311046(0x228),'coachId':currentSession[_0x311046(0x192)],'duration':_0x318e7a,'init_data':_0x351bc1?.[_0x311046(0x1d9)]||'','excludeSessionId':currentSession['id']})}),_0x2d8096=await _0x4ba4a2['json']();_0x2d8096['ok']&&_0x2d8096[_0x311046(0x1ba)]?(availableSlotsCache=_0x2d8096[_0x311046(0x1ba)],renderRescheduleDates()):_0x1ec77a['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x32eb39){_0x1ec77a[_0x311046(0x1ee)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x43276b=a3_0x5912a1,_0x10dde3=document[_0x43276b(0x219)](_0x43276b(0x148));_0x10dde3[_0x43276b(0x1ee)]='';const _0x114aac=Object['keys'](availableSlotsCache)['sort'](),_0x4d4a55=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x114aac[_0x43276b(0x1f5)]===0x0){document[_0x43276b(0x219)](_0x43276b(0x175))['innerHTML']=_0x43276b(0x211);return;}_0x114aac[_0x43276b(0x1b1)]((_0x423680,_0x2f1223)=>{const _0xbe29c5=_0x43276b,_0x38eb2c=new Date(_0x423680),_0x49d3dc=_0x4d4a55[_0x38eb2c['getDay']()],_0x37b045=_0x38eb2c['getDate'](),_0xadef5a=document[_0xbe29c5(0x23f)](_0xbe29c5(0x1c2));_0xadef5a['className']=_0xbe29c5(0x23a);if(_0x2f1223===0x0)_0xadef5a[_0xbe29c5(0x145)][_0xbe29c5(0x174)]('active');_0xadef5a[_0xbe29c5(0x1ee)]=_0xbe29c5(0x1dc)+_0x49d3dc+'</div><div\x20class=\x22rs-day-num\x22>'+_0x37b045+'</div>',_0xadef5a[_0xbe29c5(0x235)]=()=>selectRsDate(_0x423680,_0xadef5a),_0x10dde3[_0xbe29c5(0x1e9)](_0xadef5a);}),selectRsDate(_0x114aac[0x0],_0x10dde3[_0x43276b(0x1d5)]);}function selectRsDate(_0xa96e20,_0x59ad72){const _0xba9d56=a3_0x5912a1;selectedRsDate=_0xa96e20,document[_0xba9d56(0x23d)](_0xba9d56(0x159))[_0xba9d56(0x1b1)](_0x194205=>_0x194205[_0xba9d56(0x145)][_0xba9d56(0x169)](_0xba9d56(0x1a5)));if(_0x59ad72)_0x59ad72[_0xba9d56(0x145)][_0xba9d56(0x174)](_0xba9d56(0x1a5));const _0x2db1b2=document[_0xba9d56(0x219)](_0xba9d56(0x175));_0x2db1b2[_0xba9d56(0x1ee)]='';const _0xf9e7e1=availableSlotsCache[_0xa96e20]||[];if(_0xf9e7e1[_0xba9d56(0x1f5)]===0x0){_0x2db1b2[_0xba9d56(0x1ee)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0xf9e7e1[_0xba9d56(0x1b1)](_0x59b441=>{const _0xe4f144=_0xba9d56,_0x434357=document[_0xe4f144(0x23f)](_0xe4f144(0x229));_0x434357[_0xe4f144(0x1f0)]=_0xe4f144(0x18f),_0x434357['textContent']=_0x59b441,_0x434357[_0xe4f144(0x235)]=()=>confirmReschedule(_0x59b441),_0x2db1b2[_0xe4f144(0x1e9)](_0x434357);});}async function confirmReschedule(_0x4fba6d){const _0x53eb47=a3_0x5912a1,_0x43c493=new Date(selectedRsDate),_0x178260=_0x43c493[_0x53eb47(0x158)]('ru-RU',{'day':_0x53eb47(0x1f1),'month':_0x53eb47(0x22f)}),_0xc66c0=await showCustomConfirm(_0x53eb47(0x220),_0x53eb47(0x20a)+_0x178260+'\x20–≤\x20'+_0x4fba6d+'?',![]);if(!_0xc66c0)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x53eb47(0x1c4)]();const _0x312bd0=currentSession[_0x53eb47(0x19f)],_0x34002d=currentSession['id'],[_0x28e089,_0x54e830]=currentSession['start'][_0x53eb47(0x1c8)](':')[_0x53eb47(0x144)](Number),[_0x19cae2,_0x2f1d30]=currentSession[_0x53eb47(0x17a)][_0x53eb47(0x1c8)](':')['map'](Number),_0x319450=_0x19cae2*0x3c+_0x2f1d30-(_0x28e089*0x3c+_0x54e830),[_0xa80c09,_0x4c2b95]=_0x4fba6d[_0x53eb47(0x1c8)](':')['map'](Number),_0x418fa2=_0xa80c09*0x3c+_0x4c2b95+_0x319450,_0x2aea78=Math['floor'](_0x418fa2/0x3c),_0x42daeb=_0x418fa2%0x3c,_0x514c60=String(_0x2aea78)[_0x53eb47(0x1c6)](0x2,'0')+':'+String(_0x42daeb)['padStart'](0x2,'0'),_0x2efbae=sessions[_0x53eb47(0x187)](_0x211826=>_0x211826['id']===_0x34002d);_0x2efbae!==-0x1&&(sessions[_0x2efbae]['dateStr']=selectedRsDate,sessions[_0x2efbae]['start']=_0x4fba6d,sessions[_0x2efbae][_0x53eb47(0x17a)]=_0x514c60,reRenderBlocks());try{const _0x12442e=window[_0x53eb47(0x150)]?.[_0x53eb47(0x1af)],_0x28abf7=await fetch(API_URL,{'method':_0x53eb47(0x179),'body':JSON['stringify']({'action':_0x53eb47(0x1f6),'init_data':_0x12442e?.[_0x53eb47(0x1d9)]||'','oldSessionId':_0x34002d,'oldDate':_0x312bd0,'newDate':selectedRsDate,'newTime':_0x4fba6d,'coachId':currentSession[_0x53eb47(0x192)]})}),_0x433b99=await _0x28abf7[_0x53eb47(0x1bb)]();!_0x433b99['ok']?(showToast(_0x53eb47(0x1b0)),DataManager[_0x53eb47(0x1ea)]()):(showToast(_0x53eb47(0x206)),DataManager['saveLocally']());}catch(_0x3371c1){showToast(_0x53eb47(0x18c));}}document['addEventListener']('DOMContentLoaded',init);