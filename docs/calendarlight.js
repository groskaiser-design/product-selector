const a3_0x221c56=a3_0xd316;(function(_0x18ee77,_0x181229){const _0x229d78=a3_0xd316,_0x5ae820=_0x18ee77();while(!![]){try{const _0x5cfe5b=-parseInt(_0x229d78(0x256))/0x1*(-parseInt(_0x229d78(0x227))/0x2)+parseInt(_0x229d78(0x1a7))/0x3+-parseInt(_0x229d78(0x1ae))/0x4+parseInt(_0x229d78(0x241))/0x5+-parseInt(_0x229d78(0x1a3))/0x6+parseInt(_0x229d78(0x199))/0x7+-parseInt(_0x229d78(0x284))/0x8;if(_0x5cfe5b===_0x181229)break;else _0x5ae820['push'](_0x5ae820['shift']());}catch(_0x29c70f){_0x5ae820['push'](_0x5ae820['shift']());}}}(a3_0xb982,0x4e1a5));const APP_VERSION=a3_0x221c56(0x26f),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c,KEY_SESSIONS=a3_0x221c56(0x224),KEY_SETTINGS=a3_0x221c56(0x1bb),KEY_CLIENTS=a3_0x221c56(0x237);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x221c56(0x206),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x2ba2eb=a3_0x221c56,_0x4e2b19=(function(){let _0x38410b=!![];return function(_0x227f63,_0x42b608){const _0x46c586=_0x38410b?function(){const _0x431d53=a3_0xd316;if(_0x42b608){const _0x392cb6=_0x42b608[_0x431d53(0x1c8)](_0x227f63,arguments);return _0x42b608=null,_0x392cb6;}}:function(){};return _0x38410b=![],_0x46c586;};}()),_0x1e3e72=_0x4e2b19(this,function(){const _0x24d480=a3_0xd316;return _0x1e3e72[_0x24d480(0x289)]()[_0x24d480(0x257)](_0x24d480(0x22d))['toString']()[_0x24d480(0x222)](_0x1e3e72)[_0x24d480(0x257)](_0x24d480(0x22d));});_0x1e3e72();try{const _0x147d44=window['Telegram']?.[_0x2ba2eb(0x197)];if(!_0x147d44)return;_0x147d44[_0x2ba2eb(0x271)](),_0x147d44[_0x2ba2eb(0x26a)]();try{_0x147d44['setHeaderColor'](_0x2ba2eb(0x19d)),_0x147d44[_0x2ba2eb(0x1b6)]&&_0x147d44['setBackgroundColor'](_0x2ba2eb(0x19d));}catch(_0x46e711){console[_0x2ba2eb(0x1b1)]('Error\x20setting\x20color:',_0x46e711);}try{_0x147d44[_0x2ba2eb(0x1b9)]&&(_0x147d44[_0x2ba2eb(0x1b9)][_0x2ba2eb(0x263)](),_0x147d44[_0x2ba2eb(0x1b9)][_0x2ba2eb(0x1ec)](),_0x147d44[_0x2ba2eb(0x1b9)][_0x2ba2eb(0x291)](function(){const _0x37cef7=_0x2ba2eb;window[_0x37cef7(0x235)][_0x37cef7(0x211)]=_0x37cef7(0x240);}));}catch(_0x23d794){console[_0x2ba2eb(0x1b1)](_0x2ba2eb(0x220),_0x23d794);}try{if(_0x147d44[_0x2ba2eb(0x1b3)])_0x147d44['disableVerticalSwipes']();}catch(_0x45c027){}}catch(_0x274660){console[_0x2ba2eb(0x25a)](_0x2ba2eb(0x208),_0x274660);}}());function isAdmin(){const _0x54901b=a3_0x221c56;try{const _0x4d5298=Number(window[_0x54901b(0x205)]?.[_0x54901b(0x197)]?.[_0x54901b(0x1db)]?.[_0x54901b(0x1c6)]?.['id']);return _0x4d5298===0xbaf7174;}catch(_0x732006){return![];}}const DataManager={'saveLocally'(){const _0x3c6cc9=a3_0x221c56;try{localStorage[_0x3c6cc9(0x239)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x3c6cc9(0x239)](KEY_CLIENTS,JSON[_0x3c6cc9(0x261)](clients)),localStorage[_0x3c6cc9(0x239)](KEY_SETTINGS,JSON[_0x3c6cc9(0x261)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x70c834){}},'loadLocal'(){const _0x4e85c3=a3_0x221c56;try{const _0x293575=localStorage[_0x4e85c3(0x28f)](KEY_SESSIONS);if(_0x293575)sessions=JSON[_0x4e85c3(0x23c)](_0x293575);const _0x390820=localStorage[_0x4e85c3(0x28f)](KEY_CLIENTS);if(_0x390820)clients=JSON[_0x4e85c3(0x23c)](_0x390820);const _0x3e31a3=localStorage[_0x4e85c3(0x28f)](KEY_SETTINGS);if(_0x3e31a3){const _0x266c46=JSON[_0x4e85c3(0x23c)](_0x3e31a3);if(_0x266c46[_0x4e85c3(0x266)])availabilityPattern=_0x266c46[_0x4e85c3(0x266)];if(_0x266c46['ranges'])specialRanges=_0x266c46[_0x4e85c3(0x269)];if(_0x266c46[_0x4e85c3(0x1e3)])dateExceptions=_0x266c46[_0x4e85c3(0x1e3)];}}catch(_0x3f0d12){}},async 'syncLoad'(){const _0x545e56=a3_0x221c56,_0x3cf7c6=new Date(),_0x5ade48=_0x3cf7c6['getFullYear']()+'-'+String(_0x3cf7c6['getMonth']()+0x1)['padStart'](0x2,'0'),_0x5c227b=new Date(_0x3cf7c6);_0x5c227b[_0x545e56(0x27b)](_0x3cf7c6['getMonth']()+0x1);const _0x5b2809=_0x5c227b['getFullYear']()+'-'+String(_0x5c227b[_0x545e56(0x1d4)]()+0x1)['padStart'](0x2,'0'),_0x2679f2=Date[_0x545e56(0x23f)]();try{const _0x3c8a16=window[_0x545e56(0x205)]?.['WebApp'],_0x2b6d9c=_0x3c8a16?.[_0x545e56(0x225)]||'',[_0x5c20aa,_0x31e928]=await Promise[_0x545e56(0x215)]([fetch(API_URL,{'method':_0x545e56(0x1d6),'body':JSON['stringify']({'action':_0x545e56(0x228),'init_data':_0x2b6d9c,'month_str':_0x5ade48})})[_0x545e56(0x1bd)](_0x36f952=>_0x36f952[_0x545e56(0x1dd)]()),fetch(API_URL,{'method':_0x545e56(0x1d6),'body':JSON['stringify']({'action':_0x545e56(0x228),'init_data':_0x2b6d9c,'month_str':_0x5b2809})})[_0x545e56(0x1bd)](_0x5892a6=>_0x5892a6[_0x545e56(0x1dd)]())]);if(lastUserActionTime>_0x2679f2){console[_0x545e56(0x1b1)](_0x545e56(0x283));return;}if(_0x5c20aa['ok'])this[_0x545e56(0x1b5)](_0x5c20aa[_0x545e56(0x27a)],_0x5ade48);if(_0x31e928['ok'])this[_0x545e56(0x1b5)](_0x31e928[_0x545e56(0x27a)],_0x5b2809);this[_0x545e56(0x244)]();}catch(_0x4aa600){}},'applyData'(_0x16f87e,_0x6923ec){const _0x4f3998=a3_0x221c56;if(!_0x16f87e)return;if(_0x16f87e['settings']){if(_0x16f87e[_0x4f3998(0x27d)]['pattern'])availabilityPattern=_0x16f87e[_0x4f3998(0x27d)][_0x4f3998(0x266)];if(_0x16f87e[_0x4f3998(0x27d)][_0x4f3998(0x269)])specialRanges=_0x16f87e[_0x4f3998(0x27d)][_0x4f3998(0x269)];if(_0x16f87e[_0x4f3998(0x27d)][_0x4f3998(0x1e3)])dateExceptions=_0x16f87e[_0x4f3998(0x27d)][_0x4f3998(0x1e3)];}if(_0x16f87e[_0x4f3998(0x1d2)]&&Array[_0x4f3998(0x201)](_0x16f87e[_0x4f3998(0x1d2)]))clients=_0x16f87e[_0x4f3998(0x1d2)];_0x16f87e[_0x4f3998(0x245)]&&(coachProfiles={...coachProfiles,..._0x16f87e[_0x4f3998(0x245)]}),_0x16f87e['calendar']&&(sessions=sessions[_0x4f3998(0x275)](_0x4107a6=>!_0x4107a6[_0x4f3998(0x1a2)][_0x4f3998(0x28e)](_0x6923ec)),Object[_0x4f3998(0x1e5)](_0x16f87e[_0x4f3998(0x1ac)])['forEach'](_0x19a6bf=>{const _0x5254ef=_0x4f3998,_0x5601b7=_0x16f87e[_0x5254ef(0x1ac)][_0x19a6bf];_0x5601b7[_0x5254ef(0x1bc)](_0x10d10d=>{const _0x492585=_0x5254ef;sessions['push']({'id':_0x10d10d['i'],'clientId':_0x10d10d['c'],'coachId':_0x10d10d[_0x492585(0x216)],'dateStr':_0x6923ec+'-'+_0x19a6bf['padStart'](0x2,'0'),'start':_0x10d10d['s'],'end':_0x10d10d['e'],'note':_0x10d10d['n']||'','status':_0x10d10d['st']||'planned','seriesId':_0x10d10d[_0x492585(0x264)]});});})),reRenderBlocks();}};function init(){const _0x437813=a3_0x221c56;DataManager[_0x437813(0x1c9)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x437813(0x1ff)]('matrixViewport')['addEventListener'](_0x437813(0x259),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x4b4f2f=a3_0x221c56,_0x43a123=document[_0x4b4f2f(0x1ff)]('timeColumn'),_0x35564f=document['getElementById']('timeLineBadge');_0x43a123[_0x4b4f2f(0x252)]='',_0x43a123['appendChild'](_0x35564f);for(let _0x156e93=0x0;_0x156e93<0x18;_0x156e93++){const _0x54e22d=document[_0x4b4f2f(0x287)](_0x4b4f2f(0x1e2));_0x54e22d[_0x4b4f2f(0x25f)]=_0x4b4f2f(0x20e);if(_0x156e93>0x0)_0x54e22d['innerHTML']=_0x4b4f2f(0x1a6)+String(_0x156e93)[_0x4b4f2f(0x1b2)](0x2,'0')+_0x4b4f2f(0x1dc);_0x43a123[_0x4b4f2f(0x1b8)](_0x54e22d);}}function renderDayRange(_0x381bcd,_0x2e9ee1){const _0x215a03=a3_0x221c56,_0x14116b=document[_0x215a03(0x1ff)](_0x215a03(0x1f3)),_0x5be0c2=document[_0x215a03(0x1ff)](_0x215a03(0x281)),_0x5c99da=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x587792=new Date();_0x587792[_0x215a03(0x23b)](0x0,0x0,0x0,0x0);const _0x113fe0=getLocalDateStr(new Date());for(let _0x1b6d7a=_0x381bcd;_0x1b6d7a<=_0x2e9ee1;_0x1b6d7a++){const _0x509594=new Date(_0x587792);_0x509594[_0x215a03(0x1c5)](_0x509594[_0x215a03(0x1c7)]()+_0x1b6d7a);const _0x3ba96a=getLocalDateStr(_0x509594);let _0x2808e0=_0x509594[_0x215a03(0x272)]()-0x1;if(_0x2808e0===-0x1)_0x2808e0=0x6;const _0x36a236=_0x3ba96a===_0x113fe0,_0x1fcc1a=document[_0x215a03(0x287)]('div');_0x1fcc1a[_0x215a03(0x25f)]=_0x215a03(0x1fc)+(_0x36a236?_0x215a03(0x223):''),_0x1fcc1a[_0x215a03(0x229)]('data-date',_0x3ba96a),_0x1fcc1a[_0x215a03(0x252)]=_0x215a03(0x1d5)+_0x5c99da[_0x2808e0]+_0x215a03(0x20c)+_0x509594[_0x215a03(0x1c7)]()+_0x215a03(0x247),_0x14116b[_0x215a03(0x1b8)](_0x1fcc1a);const _0x49f678=document['createElement'](_0x215a03(0x1e2));_0x49f678[_0x215a03(0x25f)]=_0x215a03(0x217)+(_0x36a236?_0x215a03(0x223):''),_0x49f678['setAttribute']('data-date',_0x3ba96a),_0x49f678[_0x215a03(0x229)]('data-day-idx',_0x2808e0),_0x5be0c2[_0x215a03(0x1b8)](_0x49f678);}}function reRenderBlocks(){const _0xed4006=a3_0x221c56;document['querySelectorAll'](_0xed4006(0x260))[_0xed4006(0x1bc)](_0x523907=>{const _0x1f72f5=_0xed4006;_0x523907[_0x1f72f5(0x21d)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')['forEach'](_0x1afb55=>_0x1afb55[_0x1f72f5(0x1df)]());const _0x55d9ea=_0x523907[_0x1f72f5(0x23a)](_0x1f72f5(0x21b)),_0x3c3d82=parseInt(_0x523907['getAttribute']('data-day-idx')),_0x1558fc=Math['round'](_0x523907['offsetLeft']);(availabilityPattern[_0x3c3d82]||[])['forEach'](_0x51e12b=>{const _0x21c7f1=_0x1f72f5,_0x44280b=document[_0x21c7f1(0x287)]('div');_0x44280b[_0x21c7f1(0x25f)]=_0x21c7f1(0x1c0),_0x44280b['style']['top']=_0x51e12b*GRID_H+'px',_0x44280b[_0x21c7f1(0x1b7)][_0x21c7f1(0x22f)]='-'+_0x1558fc+_0x21c7f1(0x28c)+_0x51e12b*GRID_H+'px',_0x523907[_0x21c7f1(0x1b8)](_0x44280b);});if(specialRanges[_0x1f72f5(0x292)]>0x0){const _0x18ae2f=new Date(_0x55d9ea+_0x1f72f5(0x23e))[_0x1f72f5(0x1ce)](),_0x3cadeb=new Date(_0x55d9ea+_0x1f72f5(0x1a1))[_0x1f72f5(0x1ce)]();specialRanges[_0x1f72f5(0x1bc)](_0x27ffe4=>{const _0x420805=_0x1f72f5,_0x29c145=new Date(_0x27ffe4[_0x420805(0x22c)])[_0x420805(0x1ce)](),_0x5ae979=new Date(_0x27ffe4['end'])[_0x420805(0x1ce)](),_0x5ba511=Math[_0x420805(0x200)](_0x18ae2f,_0x29c145),_0x444946=Math['min'](_0x3cadeb,_0x5ae979);if(_0x5ba511<_0x444946){const _0x53ef35=(_0x5ba511-_0x18ae2f)/0x36ee80*GRID_H,_0x55a923=(_0x444946-_0x5ba511)/0x36ee80*GRID_H,_0x569e22=document[_0x420805(0x287)](_0x420805(0x1e2));_0x55a923>=23.5*GRID_H?(_0x569e22['className']=_0x420805(0x288),_0x569e22[_0x420805(0x1b7)][_0x420805(0x22f)]='-'+_0x1558fc+_0x420805(0x204)):(_0x569e22['className']=_0x420805(0x25c),_0x569e22['style'][_0x420805(0x1ad)]=_0x53ef35+'px',_0x569e22[_0x420805(0x1b7)][_0x420805(0x234)]=_0x55a923+'px',_0x569e22[_0x420805(0x1b7)][_0x420805(0x22f)]='-'+_0x1558fc+_0x420805(0x28c)+_0x53ef35+'px'),_0x523907['appendChild'](_0x569e22);}});}renderEventsForColumn(_0x523907,_0x55d9ea);});}function renderEventsForColumn(_0x2d96f7,_0x1af355){const _0x7d426f=a3_0x221c56,_0x701345=sessions[_0x7d426f(0x275)](_0x29d88e=>_0x29d88e[_0x7d426f(0x1a2)]===_0x1af355),_0x3ea728=_0x701345[_0x7d426f(0x1cc)](_0x1a7f02=>{const _0x410749=_0x7d426f,[_0x12f4b8,_0x259882]=_0x1a7f02['start'][_0x410749(0x1d1)](':')[_0x410749(0x1cc)](Number),[_0x4f80d0,_0x597247]=_0x1a7f02[_0x410749(0x221)][_0x410749(0x1d1)](':')[_0x410749(0x1cc)](Number);return{'data':_0x1a7f02,'start':_0x12f4b8*0x3c+_0x259882,'end':_0x4f80d0*0x3c+_0x597247,'colIndex':0x0};});_0x3ea728[_0x7d426f(0x19e)]((_0x4322eb,_0x516f4a)=>_0x4322eb[_0x7d426f(0x22c)]-_0x516f4a['start']||_0x516f4a['end']-_0x516f4a['start']-(_0x4322eb[_0x7d426f(0x221)]-_0x4322eb[_0x7d426f(0x22c)]));const _0x1e1f8a=[];_0x3ea728['forEach'](_0x2e8304=>{const _0x55a0c9=_0x7d426f;let _0x5c9b26=![];for(let _0x43883a=0x0;_0x43883a<_0x1e1f8a['length'];_0x43883a++){const _0x3b78a0=_0x1e1f8a[_0x43883a];if(_0x2e8304[_0x55a0c9(0x22c)]>=_0x3b78a0[_0x3b78a0[_0x55a0c9(0x292)]-0x1][_0x55a0c9(0x221)]){_0x3b78a0['push'](_0x2e8304),_0x2e8304[_0x55a0c9(0x253)]=_0x43883a,_0x5c9b26=!![];break;}}!_0x5c9b26&&(_0x1e1f8a['push']([_0x2e8304]),_0x2e8304[_0x55a0c9(0x253)]=_0x1e1f8a[_0x55a0c9(0x292)]-0x1);}),_0x3ea728['forEach'](_0x5259dc=>{const _0x2d53ec=_0x7d426f;let _0x24398e=0x0;_0x3ea728[_0x2d53ec(0x1bc)](_0x13e00b=>{const _0x1b0903=_0x2d53ec;if(Math[_0x1b0903(0x200)](_0x5259dc[_0x1b0903(0x22c)],_0x13e00b[_0x1b0903(0x22c)])<Math[_0x1b0903(0x258)](_0x5259dc[_0x1b0903(0x221)],_0x13e00b[_0x1b0903(0x221)])&&_0x13e00b[_0x1b0903(0x253)]>_0x24398e)_0x24398e=_0x13e00b[_0x1b0903(0x253)];});const _0xaca133=_0x24398e+0x1,_0x258936=0x64/_0xaca133,_0x48d9d5=_0x5259dc[_0x2d53ec(0x253)]*_0x258936,_0x317072=document[_0x2d53ec(0x287)](_0x2d53ec(0x1e2)),_0x45fd9f=_0x5259dc['data'];let _0x7c676b=_0x2d53ec(0x270);if(clients&&clients[_0x2d53ec(0x292)]>0x0){const _0x86cbeb=clients[_0x2d53ec(0x293)](_0x2b14c6=>String(_0x2b14c6['id'])===String(_0x45fd9f['clientId']));if(_0x86cbeb&&_0x86cbeb[_0x2d53ec(0x267)])_0x7c676b=_0x86cbeb[_0x2d53ec(0x267)];}const _0xb53d4b=_0x45fd9f['status']==='completed',_0x38118f=_0xb53d4b?0x1:0.45;_0x317072[_0x2d53ec(0x25f)]=_0x2d53ec(0x1cb)+(_0xb53d4b?_0x2d53ec(0x1f5):''),_0x317072[_0x2d53ec(0x1b7)][_0x2d53ec(0x1a4)]=hexToRgba(_0x7c676b,_0x38118f),_0x317072[_0x2d53ec(0x1b7)][_0x2d53ec(0x19c)]=_0x7c676b;const _0x172c85=_0x5259dc[_0x2d53ec(0x22c)]/0x3c*GRID_H,_0x3986a6=(_0x5259dc[_0x2d53ec(0x221)]-_0x5259dc[_0x2d53ec(0x22c)])/0x3c*GRID_H;_0x317072[_0x2d53ec(0x1b7)][_0x2d53ec(0x1ad)]=_0x172c85+'px',_0x317072[_0x2d53ec(0x1b7)][_0x2d53ec(0x234)]=Math['max'](_0x3986a6,0x14)+'px',_0x317072[_0x2d53ec(0x1b7)][_0x2d53ec(0x248)]=_0x2d53ec(0x1e8)+_0x258936+_0x2d53ec(0x19a),_0x317072['style'][_0x2d53ec(0x1fb)]=_0x2d53ec(0x1e8)+_0x48d9d5+_0x2d53ec(0x1be),_0x317072[_0x2d53ec(0x1b7)]['zIndex']=0xa+_0x5259dc[_0x2d53ec(0x253)];if(_0x258936<0x55)_0x317072[_0x2d53ec(0x1bf)]['add'](_0x2d53ec(0x278));let _0x1b19fd='';if(_0x45fd9f[_0x2d53ec(0x273)])_0x1b19fd+=_0x2d53ec(0x1fd);if(_0xb53d4b)_0x1b19fd+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x317072[_0x2d53ec(0x252)]=_0x2d53ec(0x1af)+_0x45fd9f[_0x2d53ec(0x22c)]+_0x2d53ec(0x274)+_0x45fd9f[_0x2d53ec(0x221)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1b19fd+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x317072[_0x2d53ec(0x232)]=_0x4925b3=>{const _0x5ad587=_0x2d53ec;_0x4925b3[_0x5ad587(0x25e)](),openDetails(_0x45fd9f);},_0x2d96f7[_0x2d53ec(0x1b8)](_0x317072);});}function openAnalytics(){const _0x227906=a3_0x221c56,_0x39e4b4=document[_0x227906(0x230)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x227906(0x206),_0x39e4b4),openSheet(_0x227906(0x20a));}function setAnalyticsPeriod(_0x417a5f,_0x167efe){const _0x27db58=a3_0x221c56;currentAnPeriod=_0x417a5f,document[_0x27db58(0x21d)](_0x27db58(0x1f8))[_0x27db58(0x1bc)](_0x27c237=>_0x27c237[_0x27db58(0x1bf)]['remove']('active'));if(_0x167efe)_0x167efe[_0x27db58(0x1bf)]['add'](_0x27db58(0x1a5));const _0x4cf03b=document[_0x27db58(0x1ff)]('anCustomDates');_0x4cf03b[_0x27db58(0x1b7)][_0x27db58(0x21f)]=_0x417a5f===_0x27db58(0x1eb)?_0x27db58(0x1d0):_0x27db58(0x1f4);const _0xb14d6f=new Date();let _0x560480=new Date(),_0x7f6acd=new Date();if(_0x417a5f===_0x27db58(0x206))_0x560480=getStartOfWeek(_0xb14d6f),_0x7f6acd=new Date(_0x560480),_0x7f6acd[_0x27db58(0x1c5)](_0x7f6acd[_0x27db58(0x1c7)]()+0x6);else{if(_0x417a5f==='month')_0x560480=new Date(_0xb14d6f[_0x27db58(0x24b)](),_0xb14d6f[_0x27db58(0x1d4)](),0x1),_0x7f6acd=new Date(_0xb14d6f[_0x27db58(0x24b)](),_0xb14d6f[_0x27db58(0x1d4)]()+0x1,0x0);else{!document[_0x27db58(0x1ff)](_0x27db58(0x1c3))['value']&&(document[_0x27db58(0x1ff)](_0x27db58(0x1c3))[_0x27db58(0x1f2)]=getLocalDateStr(_0xb14d6f),document[_0x27db58(0x1ff)](_0x27db58(0x26d))[_0x27db58(0x1f2)]=getLocalDateStr(_0xb14d6f));refreshAnalytics();return;}}document[_0x27db58(0x1ff)](_0x27db58(0x1c3))[_0x27db58(0x1f2)]=getLocalDateStr(_0x560480),document['getElementById'](_0x27db58(0x26d))[_0x27db58(0x1f2)]=getLocalDateStr(_0x7f6acd),refreshAnalytics();}function refreshAnalytics(){const _0x20c44d=a3_0x221c56,_0x7bdb47=document['getElementById'](_0x20c44d(0x1c3))[_0x20c44d(0x1f2)],_0x1b4081=document[_0x20c44d(0x1ff)](_0x20c44d(0x26d))['value'];if(!_0x7bdb47||!_0x1b4081)return;const _0x18c90b=sessions[_0x20c44d(0x275)](_0x1070d4=>_0x1070d4[_0x20c44d(0x1a2)]>=_0x7bdb47&&_0x1070d4['dateStr']<=_0x1b4081&&_0x1070d4[_0x20c44d(0x1c2)]!==_0x20c44d(0x246)),_0x341daf=_0x18c90b['length'],_0x545b48=_0x18c90b['filter'](_0x5e6c30=>_0x5e6c30[_0x20c44d(0x1c2)]===_0x20c44d(0x203))[_0x20c44d(0x292)],_0x576e5e=_0x341daf>0x0?Math['round'](_0x545b48/_0x341daf*0x64):0x0;document[_0x20c44d(0x1ff)](_0x20c44d(0x242))[_0x20c44d(0x277)]=_0x576e5e+'%',document[_0x20c44d(0x1ff)](_0x20c44d(0x20d))[_0x20c44d(0x277)]=_0x545b48+_0x20c44d(0x285)+_0x341daf+_0x20c44d(0x290);const _0x64f8f3=document[_0x20c44d(0x1ff)](_0x20c44d(0x26e)),_0x9c0c6e=0x2*Math['PI']*0x23,_0x2aeeac=_0x9c0c6e-_0x576e5e/0x64*_0x9c0c6e;_0x64f8f3['style'][_0x20c44d(0x25d)]=_0x2aeeac;const _0x23994d={};_0x18c90b[_0x20c44d(0x1bc)](_0x258b3c=>{const _0x3e9509=_0x20c44d,_0x56f510=_0x258b3c[_0x3e9509(0x210)]||_0x3e9509(0x1f6);if(!_0x23994d[_0x56f510]){const _0x359477='#'+_0x56f510[_0x3e9509(0x289)]()['substr'](0x0,0x6);_0x23994d[_0x56f510]={'total':0x0,'done':0x0,'color':_0x359477};}_0x23994d[_0x56f510][_0x3e9509(0x26b)]++;if(_0x258b3c['status']===_0x3e9509(0x203))_0x23994d[_0x56f510][_0x3e9509(0x233)]++;});const _0xe4dca7=document[_0x20c44d(0x1ff)](_0x20c44d(0x1ea));_0xe4dca7[_0x20c44d(0x252)]='';const _0x2abcc2=Object[_0x20c44d(0x202)](_0x23994d)['sort']((_0x4e4449,_0x283ba1)=>_0x283ba1[0x1][_0x20c44d(0x26b)]-_0x4e4449[0x1][_0x20c44d(0x26b)]);if(_0x2abcc2[_0x20c44d(0x292)]===0x0){_0xe4dca7[_0x20c44d(0x252)]=_0x20c44d(0x268);return;}_0x2abcc2[_0x20c44d(0x1bc)](([_0x1d5dfc,_0x1da458])=>{const _0x2c5a13=_0x20c44d,_0x437b2c=Math[_0x2c5a13(0x1d7)](_0x1da458['done']/_0x1da458[_0x2c5a13(0x26b)]*0x64),_0x621c60=document[_0x2c5a13(0x287)](_0x2c5a13(0x1e2));_0x621c60[_0x2c5a13(0x25f)]='client-stat-card',_0x621c60[_0x2c5a13(0x1b7)][_0x2c5a13(0x19c)]=_0x1da458['color'],_0x621c60[_0x2c5a13(0x252)]=_0x2c5a13(0x279)+_0x1d5dfc[_0x2c5a13(0x20b)](0x0,0x5)+_0x2c5a13(0x1ba)+_0x1da458[_0x2c5a13(0x233)]+_0x2c5a13(0x219)+_0x1da458[_0x2c5a13(0x26b)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x437b2c+_0x2c5a13(0x250),_0xe4dca7['appendChild'](_0x621c60);});}function openDetails(_0x5ebde2){const _0x3e3d5f=a3_0x221c56;currentSession=_0x5ebde2;const _0x197f03=new Date(_0x5ebde2[_0x3e3d5f(0x1a2)]),_0x4e8318=_0x197f03['toLocaleDateString'](_0x3e3d5f(0x23d),{'weekday':_0x3e3d5f(0x1f1),'day':_0x3e3d5f(0x212),'month':_0x3e3d5f(0x1f1)});document[_0x3e3d5f(0x1ff)](_0x3e3d5f(0x21a))[_0x3e3d5f(0x277)]=_0x4e8318[_0x3e3d5f(0x1fa)](0x0)[_0x3e3d5f(0x19f)]()+_0x4e8318[_0x3e3d5f(0x226)](0x1),document[_0x3e3d5f(0x1ff)]('detTime')['textContent']=_0x5ebde2[_0x3e3d5f(0x22c)]+'\x20-\x20'+_0x5ebde2[_0x3e3d5f(0x221)],document[_0x3e3d5f(0x1ff)](_0x3e3d5f(0x24d))['textContent']=_0x5ebde2[_0x3e3d5f(0x1a9)]||_0x3e3d5f(0x238);const _0x5a5ad2=document[_0x3e3d5f(0x1ff)](_0x3e3d5f(0x243)),_0x51488f=document[_0x3e3d5f(0x1ff)](_0x3e3d5f(0x1d3)),_0x553212=_0x51488f['querySelector'](_0x3e3d5f(0x251)),_0x64b321=_0x51488f[_0x3e3d5f(0x230)]('.btn-reschedule'),_0x236404=document[_0x3e3d5f(0x1ff)](_0x3e3d5f(0x27c));if(_0x5ebde2[_0x3e3d5f(0x1c2)]==='completed')_0x5a5ad2[_0x3e3d5f(0x277)]=_0x3e3d5f(0x294),_0x5a5ad2[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x267)]=_0x3e3d5f(0x19b),_0x51488f[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x21f)]='none';else{_0x5a5ad2[_0x3e3d5f(0x277)]=_0x3e3d5f(0x276),_0x5a5ad2[_0x3e3d5f(0x1b7)]['color']=_0x3e3d5f(0x24e),_0x51488f[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x21f)]='block';const _0x598dfc=new Date(_0x5ebde2['dateStr']+'T'+_0x5ebde2['start']),_0x5546a3=new Date(),_0x52167a=(_0x598dfc-_0x5546a3)/(0x3e8*0x3c*0x3c),_0x1747dc=coachProfiles[_0x5ebde2[_0x3e3d5f(0x210)]]&&coachProfiles[_0x5ebde2[_0x3e3d5f(0x210)]][_0x3e3d5f(0x280)]?parseInt(coachProfiles[_0x5ebde2[_0x3e3d5f(0x210)]][_0x3e3d5f(0x280)]):0x18;if(_0x1747dc===0x0||_0x52167a>=_0x1747dc)_0x553212['style']['display']=_0x3e3d5f(0x1f7),_0x64b321[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x21f)]='block',_0x236404[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x21f)]=_0x3e3d5f(0x1f4);else{_0x553212[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x21f)]=_0x3e3d5f(0x1f4),_0x64b321[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x21f)]='none',_0x236404[_0x3e3d5f(0x1b7)][_0x3e3d5f(0x21f)]=_0x3e3d5f(0x1f7);let _0x361593=_0x1747dc===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':'–∑–∞\x20'+_0x1747dc+_0x3e3d5f(0x28a);_0x236404[_0x3e3d5f(0x277)]=_0x3e3d5f(0x1aa)+_0x361593+_0x3e3d5f(0x1c1);}}document[_0x3e3d5f(0x1ff)](_0x3e3d5f(0x1fe))[_0x3e3d5f(0x1bf)][_0x3e3d5f(0x1ef)]('active'),document[_0x3e3d5f(0x1ff)](_0x3e3d5f(0x1e0))[_0x3e3d5f(0x1bf)][_0x3e3d5f(0x1ef)](_0x3e3d5f(0x27e));}function closeAllSheets(){const _0x49bb4b=a3_0x221c56;document['getElementById'](_0x49bb4b(0x1fe))['classList']['remove'](_0x49bb4b(0x1a5)),document[_0x49bb4b(0x21d)](_0x49bb4b(0x207))[_0x49bb4b(0x1bc)](_0x78ea5=>_0x78ea5[_0x49bb4b(0x1bf)][_0x49bb4b(0x1df)](_0x49bb4b(0x27e)));}function openSheet(_0x15508c){const _0x7f0d7e=a3_0x221c56;document[_0x7f0d7e(0x1ff)](_0x7f0d7e(0x1fe))[_0x7f0d7e(0x1bf)][_0x7f0d7e(0x1ef)](_0x7f0d7e(0x1a5)),document[_0x7f0d7e(0x1ff)](_0x15508c)['classList']['add'](_0x7f0d7e(0x27e));}function getLocalDateStr(_0x5cd8af){const _0x384028=a3_0x221c56,_0x4ae306=_0x5cd8af[_0x384028(0x24b)](),_0x120998=String(_0x5cd8af['getMonth']()+0x1)['padStart'](0x2,'0'),_0x3f3a29=String(_0x5cd8af[_0x384028(0x1c7)]())['padStart'](0x2,'0');return _0x4ae306+'-'+_0x120998+'-'+_0x3f3a29;}function a3_0xb982(){const _0x4a9d9d=['setDate','user','getDate','apply','loadLocal','.day-col-header','event-card','map','auto','getTime','rgba(','flex','split','clients','cancelContainer','getMonth','<div\x20class=\x22dch-day\x22>','POST','round','fontWeight','\x20–≤\x20','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','initDataUnsafe',':00</span>','json','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','remove','detailsSheet','offsetLeft','div','exceptions','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','keys','join','rsDatesTrack','calc(','rs-date-chip','analyticsList','custom','offClick','button','globalTimeLine','add','test','long','value','daysHeaderTrack','none','\x20status-completed','Unknown','block','.period-switch\x20.p-btn','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','charAt','left','day-col-header\x20','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','overlay','getElementById','max','isArray','entries','completed','px\x200px','Telegram','week','.sheet','Critical\x20TMA\x20Error:','ccTitle','analyticsSheet','substr','</div><div\x20class=\x22dch-num\x22>','anTotalStats','time-label','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','coachId','href','numeric','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','client_cancel','all','cid','day-column\x20','.day-col-header[data-date=\x22','</span>\x20/\x20','detDate','data-date','rescheduleSheet','querySelectorAll','get_slots','display','Error\x20setting\x20back\x20button:','end','constructor','today','uc_client_sessions','initData','slice','22HqzemZ','client_load','setAttribute','ccText','–û—Ç–º–µ–Ω–µ–Ω–æ','start','(((.+)+)+)+$','getMinutes','backgroundPosition','querySelector','offsetWidth','onclick','done','height','location','headerMonth','uc_client_list','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','setItem','getAttribute','setHours','parse','ru-RU','T00:00:00','now','router.html','2837190Mkikhs','anPercent','detStatus','saveLocally','coach_profiles','cancelled','</div>','width','scrollWidth','rs-time-btn','getFullYear','</div><div\x20class=\x22rs-day-num\x22>','detNote','var(--acc-blue)','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.btn-cancel','innerHTML','colIndex','syncLoad','firstChild','30859qraoKa','search','min','scroll','error','customConfirm','blocked-range-part\x20stripe-bg','strokeDashoffset','stopPropagation','className','.day-column','stringify','insertBefore','show','sid','scrollTop','pattern','color','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','ranges','expand','total','600','anEnd','anDonutCircle','v9.5-CLIENT-ANALYTICS','#0a84ff','ready','getDay','seriesId','\x20-\x20','filter','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','textContent','mini','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','data','setMonth','cancelHint','settings','open','toast','cancel_window','gridColumns','visible','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','4887040vIVQyx','\x20–∏–∑\x20','#ff453a','createElement','day-off-overlay\x20stripe-bg','toString','\x20—á.','addEventListener','px\x20-','clientWidth','startsWith','getItem','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','onClick','length','find','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','<div\x20class=\x22rs-day-name\x22>','WebApp','getHours','1931979rzQQwH','%\x20-\x204px)','var(--acc-green)','borderLeftColor','#050505','sort','toUpperCase','rsSlotsGrid','T23:59:59','dateStr','2246178OlwFDG','backgroundColor','active','<span>','1123278gbOfbF','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','note','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','scrollLeft','calendar','top','1008632czWXqV','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','matrixViewport','log','padStart','disableVerticalSwipes','floor','applyData','setBackgroundColor','style','appendChild','BackButton','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','uc_client_settings','forEach','then','%\x20+\x202px)','classList','blocked-slot\x20stripe-bg','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','status','anStart','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏'];a3_0xb982=function(){return _0x4a9d9d;};return a3_0xb982();}function getStartOfWeek(_0x495f23){const _0x3c7648=a3_0x221c56,_0x18f425=new Date(_0x495f23),_0x30dbb6=_0x18f425[_0x3c7648(0x272)](),_0x4446ef=_0x18f425[_0x3c7648(0x1c7)]()-_0x30dbb6+(_0x30dbb6===0x0?-0x6:0x1);return _0x18f425['setDate'](_0x4446ef),_0x18f425['setHours'](0x0,0x0,0x0,0x0),_0x18f425;}function scrollToToday(){const _0x11433b=getLocalDateStr(new Date());setTimeout(()=>{const _0x275d2b=a3_0xd316,_0x2e0e32=document['querySelector'](_0x275d2b(0x218)+_0x11433b+'\x22]');if(_0x2e0e32){const _0x31cbdb=document['getElementById'](_0x275d2b(0x1b0)),_0x492804=_0x2e0e32[_0x275d2b(0x1e1)]-_0x31cbdb['clientWidth']/0x2+_0x2e0e32[_0x275d2b(0x231)]/0x2;_0x31cbdb['scrollTo']({'left':_0x492804,'behavior':_0x275d2b(0x1cd)}),_0x31cbdb[_0x275d2b(0x265)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x59b332=a3_0x221c56,_0x1421d1=new Date(),_0x103b64=document[_0x59b332(0x1ff)](_0x59b332(0x1ee)),_0x436138=document[_0x59b332(0x1ff)]('timeLineBadge'),_0x3db355=(_0x1421d1[_0x59b332(0x198)]()*0x3c+_0x1421d1[_0x59b332(0x22e)]())/0x3c*GRID_H;_0x103b64['style']['top']=_0x3db355+'px',_0x103b64[_0x59b332(0x1b7)][_0x59b332(0x21f)]='block',_0x436138['style'][_0x59b332(0x1ad)]=_0x3db355+'px',_0x436138['style'][_0x59b332(0x21f)]=_0x59b332(0x1f7),_0x436138[_0x59b332(0x277)]=String(_0x1421d1['getHours']())['padStart'](0x2,'0')+':'+String(_0x1421d1[_0x59b332(0x22e)]())[_0x59b332(0x1b2)](0x2,'0');}function onScroll(){const _0x3b28f6=a3_0x221c56,_0xcf19a8=document[_0x3b28f6(0x1ff)](_0x3b28f6(0x1b0)),_0x1165a5=document[_0x3b28f6(0x21d)](_0x3b28f6(0x1ca));for(let _0x2efad8 of _0x1165a5)if(_0x2efad8['offsetLeft']>=_0xcf19a8['scrollLeft']){const _0x25471c=new Date(_0x2efad8[_0x3b28f6(0x23a)]('data-date'));document[_0x3b28f6(0x1ff)](_0x3b28f6(0x236))['textContent']=_0x25471c['toLocaleString']('ru',{'month':'long'})[_0x3b28f6(0x19f)]()+'\x20'+_0x25471c[_0x3b28f6(0x24b)]();break;}}function showToast(_0x2185bc){const _0x5b3ade=a3_0x221c56,_0x3a5495=document['getElementById'](_0x5b3ade(0x27f));_0x3a5495[_0x5b3ade(0x277)]=_0x2185bc,_0x3a5495[_0x5b3ade(0x1bf)]['add'](_0x5b3ade(0x263)),setTimeout(()=>_0x3a5495[_0x5b3ade(0x1bf)][_0x5b3ade(0x1df)](_0x5b3ade(0x263)),0x7d0);}function handleInfiniteScroll(){const _0x462795=a3_0x221c56,_0x5a4d13=document[_0x462795(0x1ff)](_0x462795(0x1b0)),_0x1bdcea=_0x5a4d13[_0x462795(0x1ab)],_0xb411ab=_0x5a4d13[_0x462795(0x249)],_0x3c71df=_0x5a4d13[_0x462795(0x28d)];if(_0xb411ab-(_0x1bdcea+_0x3c71df)<0x12c){const _0x4add4c=endOffset;endOffset+=0xe,renderDayRange(_0x4add4c+0x1,endOffset),reRenderBlocks();}if(_0x1bdcea<0x12c){const _0x28f07f=startOffset;startOffset-=0xe,prependDays(startOffset,_0x28f07f-0x1),_0x5a4d13['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x502fa6,_0x44ac3d){const _0x190159=a3_0x221c56,_0x2c73b6=document[_0x190159(0x1ff)](_0x190159(0x1f3)),_0x488434=document['getElementById'](_0x190159(0x281)),_0x32831d=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2386ab=new Date();_0x2386ab[_0x190159(0x23b)](0x0,0x0,0x0,0x0);const _0x56ff73=getLocalDateStr(new Date()),_0x41d65a=document['createDocumentFragment'](),_0x271348=document['createDocumentFragment']();for(let _0x3ca352=_0x502fa6;_0x3ca352<=_0x44ac3d;_0x3ca352++){const _0x510bac=new Date(_0x2386ab);_0x510bac['setDate'](_0x510bac[_0x190159(0x1c7)]()+_0x3ca352);const _0x577eab=getLocalDateStr(_0x510bac);let _0x52127f=_0x510bac[_0x190159(0x272)]()-0x1;if(_0x52127f===-0x1)_0x52127f=0x6;const _0x3b7b4a=_0x577eab===_0x56ff73,_0x194d17=document[_0x190159(0x287)](_0x190159(0x1e2));_0x194d17['className']=_0x190159(0x1fc)+(_0x3b7b4a?_0x190159(0x223):''),_0x194d17[_0x190159(0x229)](_0x190159(0x21b),_0x577eab),_0x194d17[_0x190159(0x252)]=_0x190159(0x1d5)+_0x32831d[_0x52127f]+_0x190159(0x20c)+_0x510bac['getDate']()+'</div>',_0x41d65a[_0x190159(0x1b8)](_0x194d17);const _0x1e6303=document['createElement'](_0x190159(0x1e2));_0x1e6303[_0x190159(0x25f)]=_0x190159(0x217)+(_0x3b7b4a?_0x190159(0x223):''),_0x1e6303[_0x190159(0x229)](_0x190159(0x21b),_0x577eab),_0x1e6303[_0x190159(0x229)]('data-day-idx',_0x52127f),_0x271348[_0x190159(0x1b8)](_0x1e6303);}_0x2c73b6[_0x190159(0x262)](_0x41d65a,_0x2c73b6['firstChild']),_0x488434[_0x190159(0x262)](_0x271348,_0x488434['querySelector'](_0x190159(0x260)));}function hexToRgba(_0x450b60,_0x2192ac){const _0x32994e=a3_0x221c56;let _0x3a1fc8;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x32994e(0x1f0)](_0x450b60))return _0x3a1fc8=_0x450b60['substring'](0x1)[_0x32994e(0x1d1)](''),_0x3a1fc8[_0x32994e(0x292)]==0x3&&(_0x3a1fc8=[_0x3a1fc8[0x0],_0x3a1fc8[0x0],_0x3a1fc8[0x1],_0x3a1fc8[0x1],_0x3a1fc8[0x2],_0x3a1fc8[0x2]]),_0x3a1fc8='0x'+_0x3a1fc8[_0x32994e(0x1e6)](''),_0x32994e(0x1cf)+[_0x3a1fc8>>0x10&0xff,_0x3a1fc8>>0x8&0xff,_0x3a1fc8&0xff][_0x32994e(0x1e6)](',')+','+_0x2192ac+')';return'rgba(10,\x20132,\x20255,\x20'+_0x2192ac+')';}let confirmResolver=null;function showCustomConfirm(_0x356a24,_0x1c966c,_0x3fa082=!![]){const _0x13c62d=a3_0x221c56;document[_0x13c62d(0x1ff)](_0x13c62d(0x209))[_0x13c62d(0x277)]=_0x356a24,document['getElementById'](_0x13c62d(0x22a))[_0x13c62d(0x277)]=_0x1c966c;const _0x4231f2=document[_0x13c62d(0x1ff)]('ccYesBtn');return _0x3fa082?(_0x4231f2[_0x13c62d(0x1b7)][_0x13c62d(0x267)]=_0x13c62d(0x286),_0x4231f2[_0x13c62d(0x1b7)]['fontWeight']=_0x13c62d(0x26c)):(_0x4231f2[_0x13c62d(0x1b7)][_0x13c62d(0x267)]=_0x13c62d(0x270),_0x4231f2['style'][_0x13c62d(0x1d8)]=_0x13c62d(0x26c)),new Promise(_0x2c9b7c=>{const _0x15a2bc=_0x13c62d;confirmResolver=_0x2c9b7c,document[_0x15a2bc(0x1ff)](_0x15a2bc(0x25b))[_0x15a2bc(0x1bf)]['add'](_0x15a2bc(0x282));});}function resolveCustomConfirm(_0x26895e){const _0x5cc663=a3_0x221c56;document['getElementById'](_0x5cc663(0x25b))['classList']['remove']('visible');if(confirmResolver)confirmResolver(_0x26895e);}async function tryCancelCurrentSession(){const _0x176c0b=a3_0x221c56;if(!currentSession)return;const _0x5044ff=await showCustomConfirm(_0x176c0b(0x1da),_0x176c0b(0x213),!![]);if(!_0x5044ff)return;const _0x7db04e=currentSession;closeAllSheets(),sessions=sessions[_0x176c0b(0x275)](_0x5caf5c=>_0x5caf5c['id']!==_0x7db04e['id']),reRenderBlocks(),showToast(_0x176c0b(0x22b)),lastUserActionTime=Date[_0x176c0b(0x23f)]();try{const _0x2cbb2f=window['Telegram']?.[_0x176c0b(0x197)],_0xb988e8=await fetch(API_URL,{'method':_0x176c0b(0x1d6),'body':JSON['stringify']({'action':_0x176c0b(0x214),'init_data':_0x2cbb2f?.['initData']||'','coachId':_0x7db04e[_0x176c0b(0x210)],'dateStr':_0x7db04e[_0x176c0b(0x1a2)],'sessionId':_0x7db04e['id']})});if(_0xb988e8['ok'])DataManager[_0x176c0b(0x244)]();}catch(_0x3064a4){showToast(_0x176c0b(0x1c4));}}function a3_0xd316(_0x53e1d8,_0x2e156e){_0x53e1d8=_0x53e1d8-0x197;const _0x4be0d3=a3_0xb982();let _0x5b7d67=_0x4be0d3[_0x53e1d8];return _0x5b7d67;}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x4cc2fd=a3_0x221c56;if(!currentSession)return;document[_0x4cc2fd(0x1ff)]('detailsSheet')[_0x4cc2fd(0x1bf)][_0x4cc2fd(0x1df)](_0x4cc2fd(0x27e)),document[_0x4cc2fd(0x1ff)](_0x4cc2fd(0x21c))['classList'][_0x4cc2fd(0x1ef)]('open');const _0x7790ae=document['getElementById'](_0x4cc2fd(0x1e7)),_0x582b60=document[_0x4cc2fd(0x1ff)](_0x4cc2fd(0x1a0));_0x7790ae[_0x4cc2fd(0x252)]='',_0x582b60[_0x4cc2fd(0x252)]='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x5a022c,_0x293f4b]=currentSession[_0x4cc2fd(0x22c)][_0x4cc2fd(0x1d1)](':')['map'](Number),[_0x37927a,_0x5514f9]=currentSession[_0x4cc2fd(0x221)][_0x4cc2fd(0x1d1)](':')['map'](Number),_0x5f057c=_0x37927a*0x3c+_0x5514f9-(_0x5a022c*0x3c+_0x293f4b);try{const _0x235f2a=window['Telegram']?.[_0x4cc2fd(0x197)],_0x17e09d=await fetch(API_URL,{'method':_0x4cc2fd(0x1d6),'body':JSON[_0x4cc2fd(0x261)]({'action':_0x4cc2fd(0x21e),'coachId':currentSession[_0x4cc2fd(0x210)],'duration':_0x5f057c,'init_data':_0x235f2a?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x4e9717=await _0x17e09d[_0x4cc2fd(0x1dd)]();_0x4e9717['ok']&&_0x4e9717[_0x4cc2fd(0x27a)]?(availableSlotsCache=_0x4e9717['data'],renderRescheduleDates()):_0x582b60['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x4a51f6){_0x582b60[_0x4cc2fd(0x252)]=_0x4cc2fd(0x1a8);}}function renderRescheduleDates(){const _0xc70538=a3_0x221c56,_0x5ef2a8=document[_0xc70538(0x1ff)](_0xc70538(0x1e7));_0x5ef2a8[_0xc70538(0x252)]='';const _0x3df8e0=Object[_0xc70538(0x1e5)](availableSlotsCache)[_0xc70538(0x19e)](),_0x1598d1=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x3df8e0['length']===0x0){document['getElementById'](_0xc70538(0x1a0))[_0xc70538(0x252)]=_0xc70538(0x1f9);return;}_0x3df8e0['forEach']((_0x51d853,_0x7cc8b)=>{const _0x26acfb=_0xc70538,_0x7c98d2=new Date(_0x51d853),_0x1e6b63=_0x1598d1[_0x7c98d2['getDay']()],_0xa09d07=_0x7c98d2[_0x26acfb(0x1c7)](),_0x378f0c=document[_0x26acfb(0x287)](_0x26acfb(0x1e2));_0x378f0c[_0x26acfb(0x25f)]=_0x26acfb(0x1e9);if(_0x7cc8b===0x0)_0x378f0c['classList'][_0x26acfb(0x1ef)](_0x26acfb(0x1a5));_0x378f0c[_0x26acfb(0x252)]=_0x26acfb(0x295)+_0x1e6b63+_0x26acfb(0x24c)+_0xa09d07+_0x26acfb(0x247),_0x378f0c[_0x26acfb(0x232)]=()=>selectRsDate(_0x51d853,_0x378f0c),_0x5ef2a8[_0x26acfb(0x1b8)](_0x378f0c);}),selectRsDate(_0x3df8e0[0x0],_0x5ef2a8[_0xc70538(0x255)]);}function selectRsDate(_0x25aad9,_0x4d3dfe){const _0x36f25d=a3_0x221c56;selectedRsDate=_0x25aad9,document['querySelectorAll']('.rs-date-chip')[_0x36f25d(0x1bc)](_0x536b8b=>_0x536b8b[_0x36f25d(0x1bf)][_0x36f25d(0x1df)]('active'));if(_0x4d3dfe)_0x4d3dfe[_0x36f25d(0x1bf)][_0x36f25d(0x1ef)](_0x36f25d(0x1a5));const _0x3f2170=document['getElementById'](_0x36f25d(0x1a0));_0x3f2170['innerHTML']='';const _0x19e93d=availableSlotsCache[_0x25aad9]||[];if(_0x19e93d[_0x36f25d(0x292)]===0x0){_0x3f2170[_0x36f25d(0x252)]=_0x36f25d(0x20f);return;}_0x19e93d[_0x36f25d(0x1bc)](_0x588bd5=>{const _0x1593a5=_0x36f25d,_0x4739b5=document[_0x1593a5(0x287)](_0x1593a5(0x1ed));_0x4739b5['className']=_0x1593a5(0x24a),_0x4739b5[_0x1593a5(0x277)]=_0x588bd5,_0x4739b5[_0x1593a5(0x232)]=()=>confirmReschedule(_0x588bd5),_0x3f2170[_0x1593a5(0x1b8)](_0x4739b5);});}async function confirmReschedule(_0x35d23a){const _0x5730f1=a3_0x221c56,_0x5b5192=new Date(selectedRsDate),_0x8ee590=_0x5b5192['toLocaleDateString']('ru-RU',{'day':_0x5730f1(0x212),'month':_0x5730f1(0x1f1)}),_0x3d923f=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏',_0x5730f1(0x24f)+_0x8ee590+_0x5730f1(0x1d9)+_0x35d23a+'?',![]);if(!_0x3d923f)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x5730f1(0x23f)]();const _0x4bc0f7=currentSession[_0x5730f1(0x1a2)],_0x41d8ea=currentSession['id'],[_0x19d977,_0x1332d7]=currentSession[_0x5730f1(0x22c)][_0x5730f1(0x1d1)](':')[_0x5730f1(0x1cc)](Number),[_0x44e694,_0x25c36f]=currentSession[_0x5730f1(0x221)][_0x5730f1(0x1d1)](':')[_0x5730f1(0x1cc)](Number),_0x4790e5=_0x44e694*0x3c+_0x25c36f-(_0x19d977*0x3c+_0x1332d7),[_0x2c3f7f,_0x5d2df7]=_0x35d23a[_0x5730f1(0x1d1)](':')[_0x5730f1(0x1cc)](Number),_0x292876=_0x2c3f7f*0x3c+_0x5d2df7+_0x4790e5,_0x36e33a=Math[_0x5730f1(0x1b4)](_0x292876/0x3c),_0x46d275=_0x292876%0x3c,_0x15e26b=String(_0x36e33a)[_0x5730f1(0x1b2)](0x2,'0')+':'+String(_0x46d275)['padStart'](0x2,'0'),_0x5f52bd=sessions['findIndex'](_0x55a8ba=>_0x55a8ba['id']===_0x41d8ea);_0x5f52bd!==-0x1&&(sessions[_0x5f52bd][_0x5730f1(0x1a2)]=selectedRsDate,sessions[_0x5f52bd][_0x5730f1(0x22c)]=_0x35d23a,sessions[_0x5f52bd][_0x5730f1(0x221)]=_0x15e26b,reRenderBlocks());try{const _0x56de3f=window['Telegram']?.['WebApp'],_0x3678e9=await fetch(API_URL,{'method':_0x5730f1(0x1d6),'body':JSON[_0x5730f1(0x261)]({'action':'reschedule','init_data':_0x56de3f?.[_0x5730f1(0x225)]||'','oldSessionId':_0x41d8ea,'oldDate':_0x4bc0f7,'newDate':selectedRsDate,'newTime':_0x35d23a,'coachId':currentSession['coachId']})}),_0x4aea5f=await _0x3678e9[_0x5730f1(0x1dd)]();!_0x4aea5f['ok']?(showToast(_0x5730f1(0x1de)),DataManager[_0x5730f1(0x254)]()):(showToast(_0x5730f1(0x1e4)),DataManager[_0x5730f1(0x244)]());}catch(_0x414bcd){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x221c56(0x28b)]('DOMContentLoaded',init);