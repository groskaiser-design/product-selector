const a3_0x322265=a3_0x15eb;(function(_0x40699e,_0x2c7a67){const _0x48713e=a3_0x15eb,_0x53ad2c=_0x40699e();while(!![]){try{const _0x18bc59=-parseInt(_0x48713e(0x185))/0x1*(parseInt(_0x48713e(0x17b))/0x2)+-parseInt(_0x48713e(0x16a))/0x3*(-parseInt(_0x48713e(0xff))/0x4)+-parseInt(_0x48713e(0x181))/0x5+parseInt(_0x48713e(0xe2))/0x6*(parseInt(_0x48713e(0x166))/0x7)+-parseInt(_0x48713e(0xf7))/0x8*(parseInt(_0x48713e(0xde))/0x9)+parseInt(_0x48713e(0x14e))/0xa*(-parseInt(_0x48713e(0x107))/0xb)+-parseInt(_0x48713e(0x1bd))/0xc*(-parseInt(_0x48713e(0x129))/0xd);if(_0x18bc59===_0x2c7a67)break;else _0x53ad2c['push'](_0x53ad2c['shift']());}catch(_0x42417f){_0x53ad2c['push'](_0x53ad2c['shift']());}}}(a3_0x4721,0x633ec));const APP_VERSION=a3_0x322265(0x12b),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c,KEY_SESSIONS=a3_0x322265(0x1a4),KEY_SETTINGS=a3_0x322265(0x11d),KEY_CLIENTS=a3_0x322265(0x171);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x322265(0xfd),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x31e9b7=a3_0x322265,_0x481907=(function(){let _0x39dce5=!![];return function(_0x1d710a,_0x41e3cb){const _0x2f657c=_0x39dce5?function(){if(_0x41e3cb){const _0x3ff036=_0x41e3cb['apply'](_0x1d710a,arguments);return _0x41e3cb=null,_0x3ff036;}}:function(){};return _0x39dce5=![],_0x2f657c;};}()),_0x2aede5=_0x481907(this,function(){const _0x1f7280=a3_0x15eb;return _0x2aede5[_0x1f7280(0xdb)]()[_0x1f7280(0xcc)]('(((.+)+)+)+$')[_0x1f7280(0xdb)]()[_0x1f7280(0x13a)](_0x2aede5)['search'](_0x1f7280(0x164));});_0x2aede5();try{const _0x3dfd56=window[_0x31e9b7(0x110)]?.[_0x31e9b7(0x156)];if(!_0x3dfd56)return;_0x3dfd56[_0x31e9b7(0x1b5)](),_0x3dfd56[_0x31e9b7(0x161)]();try{_0x3dfd56[_0x31e9b7(0xd8)](_0x31e9b7(0xd5)),_0x3dfd56[_0x31e9b7(0x100)]&&_0x3dfd56[_0x31e9b7(0x100)]('#050505');}catch(_0x44cc25){console[_0x31e9b7(0x141)](_0x31e9b7(0x168),_0x44cc25);}try{_0x3dfd56['BackButton']&&(_0x3dfd56[_0x31e9b7(0x11b)][_0x31e9b7(0xe4)](),_0x3dfd56[_0x31e9b7(0x11b)][_0x31e9b7(0x13c)](),_0x3dfd56[_0x31e9b7(0x11b)][_0x31e9b7(0x18f)](function(){const _0x58803e=_0x31e9b7;window[_0x58803e(0x154)][_0x58803e(0xe9)]=_0x58803e(0x169);}));}catch(_0x22bfb4){console[_0x31e9b7(0x141)]('Error\x20setting\x20back\x20button:',_0x22bfb4);}try{if(_0x3dfd56[_0x31e9b7(0x18e)])_0x3dfd56[_0x31e9b7(0x18e)]();}catch(_0x3407ac){}}catch(_0x2db8ba){console[_0x31e9b7(0x122)](_0x31e9b7(0x10e),_0x2db8ba);}}());function isAdmin(){const _0x56c007=a3_0x322265;try{const _0x4a541b=Number(window[_0x56c007(0x110)]?.['WebApp']?.['initDataUnsafe']?.[_0x56c007(0x1b3)]?.['id']);return _0x4a541b===0xbaf7174;}catch(_0x5dd4dd){return![];}}const DataManager={'saveLocally'(){const _0x337d3f=a3_0x322265;try{localStorage[_0x337d3f(0x192)](KEY_SESSIONS,JSON[_0x337d3f(0x18a)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0x337d3f(0x192)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x4113fd){}},'loadLocal'(){const _0x24fdaf=a3_0x322265;try{const _0x9dede1=localStorage[_0x24fdaf(0x128)](KEY_SESSIONS);if(_0x9dede1)sessions=JSON[_0x24fdaf(0x114)](_0x9dede1);const _0x57015f=localStorage[_0x24fdaf(0x128)](KEY_CLIENTS);if(_0x57015f)clients=JSON['parse'](_0x57015f);const _0x56bef3=localStorage[_0x24fdaf(0x128)](KEY_SETTINGS);if(_0x56bef3){const _0x56974c=JSON[_0x24fdaf(0x114)](_0x56bef3);if(_0x56974c[_0x24fdaf(0xfa)])availabilityPattern=_0x56974c[_0x24fdaf(0xfa)];if(_0x56974c['ranges'])specialRanges=_0x56974c[_0x24fdaf(0xe8)];if(_0x56974c['exceptions'])dateExceptions=_0x56974c['exceptions'];}}catch(_0x31db32){}},async 'syncLoad'(){const _0x398556=a3_0x322265,_0x551f7f=new Date(),_0x15fc60=_0x551f7f['getFullYear']()+'-'+String(_0x551f7f['getMonth']()+0x1)[_0x398556(0x1b4)](0x2,'0'),_0x41a83c=new Date(_0x551f7f);_0x41a83c[_0x398556(0x1ad)](_0x551f7f[_0x398556(0x144)]()+0x1);const _0x438465=_0x41a83c[_0x398556(0x165)]()+'-'+String(_0x41a83c[_0x398556(0x144)]()+0x1)['padStart'](0x2,'0'),_0x735fd0=Date[_0x398556(0x11e)]();try{const _0x5ab3fe=window['Telegram']?.[_0x398556(0x156)],_0xe184d4=_0x5ab3fe?.[_0x398556(0xfb)]||'',[_0x579ec5,_0x342d90]=await Promise[_0x398556(0xda)]([fetch(API_URL,{'method':'POST','body':JSON[_0x398556(0x18a)]({'action':'client_load','init_data':_0xe184d4,'month_str':_0x15fc60})})[_0x398556(0x1c0)](_0x2024f8=>_0x2024f8[_0x398556(0x1c5)]()),fetch(API_URL,{'method':_0x398556(0x198),'body':JSON['stringify']({'action':_0x398556(0x194),'init_data':_0xe184d4,'month_str':_0x438465})})[_0x398556(0x1c0)](_0x428fc9=>_0x428fc9[_0x398556(0x1c5)]())]);if(lastUserActionTime>_0x735fd0){console[_0x398556(0x141)](_0x398556(0x16e));return;}if(_0x579ec5['ok'])this[_0x398556(0x150)](_0x579ec5[_0x398556(0x136)],_0x15fc60);if(_0x342d90['ok'])this[_0x398556(0x150)](_0x342d90[_0x398556(0x136)],_0x438465);this['saveLocally']();}catch(_0x2e0f9b){}},'applyData'(_0x56f1d7,_0x283d5a){const _0x17810a=a3_0x322265;if(!_0x56f1d7)return;if(_0x56f1d7[_0x17810a(0x1a5)]){if(_0x56f1d7[_0x17810a(0x1a5)][_0x17810a(0xfa)])availabilityPattern=_0x56f1d7['settings'][_0x17810a(0xfa)];if(_0x56f1d7[_0x17810a(0x1a5)][_0x17810a(0xe8)])specialRanges=_0x56f1d7[_0x17810a(0x1a5)][_0x17810a(0xe8)];if(_0x56f1d7[_0x17810a(0x1a5)]['exceptions'])dateExceptions=_0x56f1d7[_0x17810a(0x1a5)][_0x17810a(0x14a)];}if(_0x56f1d7[_0x17810a(0xcf)]&&Array[_0x17810a(0x1ab)](_0x56f1d7[_0x17810a(0xcf)]))clients=_0x56f1d7['clients'];_0x56f1d7[_0x17810a(0x18d)]&&(coachProfiles={...coachProfiles,..._0x56f1d7[_0x17810a(0x18d)]}),_0x56f1d7[_0x17810a(0x118)]&&(sessions=sessions[_0x17810a(0x19f)](_0x35ce44=>!_0x35ce44[_0x17810a(0xc7)][_0x17810a(0x1c7)](_0x283d5a)),Object[_0x17810a(0x148)](_0x56f1d7[_0x17810a(0x118)])[_0x17810a(0x1c8)](_0x6a4b35=>{const _0x355004=_0x56f1d7['calendar'][_0x6a4b35];_0x355004['forEach'](_0x3c9a7a=>{const _0x211ca5=a3_0x15eb;sessions['push']({'id':_0x3c9a7a['i'],'clientId':_0x3c9a7a['c'],'coachId':_0x3c9a7a[_0x211ca5(0xe7)],'dateStr':_0x283d5a+'-'+_0x6a4b35['padStart'](0x2,'0'),'start':_0x3c9a7a['s'],'end':_0x3c9a7a['e'],'note':_0x3c9a7a['n']||'','status':_0x3c9a7a['st']||_0x211ca5(0x14d),'seriesId':_0x3c9a7a[_0x211ca5(0x13b)]});});})),reRenderBlocks();}};function init(){const _0x55b8a8=a3_0x322265;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x55b8a8(0x15a))[_0x55b8a8(0x115)](_0x55b8a8(0x140),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x55b8a8(0x157)]();}function renderTimeColumn(){const _0x171ff9=a3_0x322265,_0x4787e1=document[_0x171ff9(0x178)](_0x171ff9(0xe5)),_0x49c335=document[_0x171ff9(0x178)](_0x171ff9(0xd7));_0x4787e1[_0x171ff9(0x12a)]='',_0x4787e1[_0x171ff9(0x134)](_0x49c335);for(let _0x54283b=0x0;_0x54283b<0x18;_0x54283b++){const _0x1044cc=document[_0x171ff9(0x1c6)]('div');_0x1044cc[_0x171ff9(0x193)]=_0x171ff9(0xe0);if(_0x54283b>0x0)_0x1044cc[_0x171ff9(0x12a)]='<span>'+String(_0x54283b)[_0x171ff9(0x1b4)](0x2,'0')+_0x171ff9(0x15d);_0x4787e1[_0x171ff9(0x134)](_0x1044cc);}}function renderDayRange(_0x4dc418,_0x118e10){const _0x1c5ffb=a3_0x322265,_0x5c637c=document[_0x1c5ffb(0x178)](_0x1c5ffb(0x111)),_0x4354e7=document[_0x1c5ffb(0x178)]('gridColumns'),_0x2b320e=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x10bef4=new Date();_0x10bef4[_0x1c5ffb(0xdd)](0x0,0x0,0x0,0x0);const _0x1a8269=getLocalDateStr(new Date());for(let _0xde28d1=_0x4dc418;_0xde28d1<=_0x118e10;_0xde28d1++){const _0x983c84=new Date(_0x10bef4);_0x983c84[_0x1c5ffb(0x1b1)](_0x983c84[_0x1c5ffb(0x1b0)]()+_0xde28d1);const _0x138403=getLocalDateStr(_0x983c84);let _0x426218=_0x983c84[_0x1c5ffb(0x180)]()-0x1;if(_0x426218===-0x1)_0x426218=0x6;const _0x13bf9e=_0x138403===_0x1a8269,_0x6322b2=document[_0x1c5ffb(0x1c6)]('div');_0x6322b2['className']=_0x1c5ffb(0xef)+(_0x13bf9e?_0x1c5ffb(0x12c):''),_0x6322b2[_0x1c5ffb(0x167)](_0x1c5ffb(0x16f),_0x138403),_0x6322b2[_0x1c5ffb(0x12a)]=_0x1c5ffb(0x199)+_0x2b320e[_0x426218]+'</div><div\x20class=\x22dch-num\x22>'+_0x983c84[_0x1c5ffb(0x1b0)]()+_0x1c5ffb(0xca),_0x5c637c[_0x1c5ffb(0x134)](_0x6322b2);const _0xa295b2=document[_0x1c5ffb(0x1c6)]('div');_0xa295b2[_0x1c5ffb(0x193)]='day-column\x20'+(_0x13bf9e?'today':''),_0xa295b2[_0x1c5ffb(0x167)](_0x1c5ffb(0x16f),_0x138403),_0xa295b2[_0x1c5ffb(0x167)](_0x1c5ffb(0x1aa),_0x426218),_0x4354e7['appendChild'](_0xa295b2);}}function reRenderBlocks(){const _0x37d98f=a3_0x322265;document[_0x37d98f(0x138)](_0x37d98f(0x10c))[_0x37d98f(0x1c8)](_0x111573=>{const _0x1c903c=_0x37d98f;_0x111573[_0x1c903c(0x138)](_0x1c903c(0x174))[_0x1c903c(0x1c8)](_0x22a02d=>_0x22a02d[_0x1c903c(0xe1)]());const _0x2fa0dc=_0x111573[_0x1c903c(0x13e)](_0x1c903c(0x16f)),_0x230eef=parseInt(_0x111573[_0x1c903c(0x13e)]('data-day-idx')),_0x1019de=Math[_0x1c903c(0x119)](_0x111573[_0x1c903c(0x173)]);(availabilityPattern[_0x230eef]||[])[_0x1c903c(0x1c8)](_0x96cb43=>{const _0x5f5500=_0x1c903c,_0x406b1f=document['createElement'](_0x5f5500(0x120));_0x406b1f[_0x5f5500(0x193)]=_0x5f5500(0xf2),_0x406b1f[_0x5f5500(0x1a7)][_0x5f5500(0x1b7)]=_0x96cb43*GRID_H+'px',_0x406b1f[_0x5f5500(0x1a7)][_0x5f5500(0x17c)]='-'+_0x1019de+_0x5f5500(0x1bc)+_0x96cb43*GRID_H+'px',_0x111573['appendChild'](_0x406b1f);});if(specialRanges[_0x1c903c(0x189)]>0x0){const _0x55ae6a=new Date(_0x2fa0dc+_0x1c903c(0x137))[_0x1c903c(0x1b8)](),_0x4c0e46=new Date(_0x2fa0dc+'T23:59:59')[_0x1c903c(0x1b8)]();specialRanges[_0x1c903c(0x1c8)](_0x20c1f3=>{const _0x5c84d7=_0x1c903c,_0x55ac9b=new Date(_0x20c1f3[_0x5c84d7(0x1c4)])[_0x5c84d7(0x1b8)](),_0x109b07=new Date(_0x20c1f3[_0x5c84d7(0xf8)])[_0x5c84d7(0x1b8)](),_0x4b77ed=Math['max'](_0x55ae6a,_0x55ac9b),_0x23301d=Math[_0x5c84d7(0x158)](_0x4c0e46,_0x109b07);if(_0x4b77ed<_0x23301d){const _0x523df6=(_0x4b77ed-_0x55ae6a)/0x36ee80*GRID_H,_0x234b40=(_0x23301d-_0x4b77ed)/0x36ee80*GRID_H,_0x4c8f26=document[_0x5c84d7(0x1c6)](_0x5c84d7(0x120));_0x234b40>=23.5*GRID_H?(_0x4c8f26[_0x5c84d7(0x193)]=_0x5c84d7(0xd3),_0x4c8f26[_0x5c84d7(0x1a7)][_0x5c84d7(0x17c)]='-'+_0x1019de+'px\x200px'):(_0x4c8f26[_0x5c84d7(0x193)]=_0x5c84d7(0x191),_0x4c8f26[_0x5c84d7(0x1a7)][_0x5c84d7(0x1b7)]=_0x523df6+'px',_0x4c8f26[_0x5c84d7(0x1a7)]['height']=_0x234b40+'px',_0x4c8f26['style'][_0x5c84d7(0x17c)]='-'+_0x1019de+_0x5c84d7(0x1bc)+_0x523df6+'px'),_0x111573[_0x5c84d7(0x134)](_0x4c8f26);}});}renderEventsForColumn(_0x111573,_0x2fa0dc);});}function renderEventsForColumn(_0x114a43,_0x258ca2){const _0x4f30de=a3_0x322265,_0x2cdfbf=sessions[_0x4f30de(0x19f)](_0x2e8545=>_0x2e8545[_0x4f30de(0xc7)]===_0x258ca2),_0x354897=_0x2cdfbf['map'](_0x973764=>{const _0x370973=_0x4f30de,[_0x2aa3c2,_0xfb804e]=_0x973764[_0x370973(0x1c4)][_0x370973(0xd0)](':')[_0x370973(0x1ba)](Number),[_0x4cb1c8,_0x52c94b]=_0x973764[_0x370973(0xf8)]['split'](':')['map'](Number);return{'data':_0x973764,'start':_0x2aa3c2*0x3c+_0xfb804e,'end':_0x4cb1c8*0x3c+_0x52c94b,'colIndex':0x0};});_0x354897[_0x4f30de(0x145)]((_0x166526,_0x586824)=>_0x166526[_0x4f30de(0x1c4)]-_0x586824[_0x4f30de(0x1c4)]||_0x586824[_0x4f30de(0xf8)]-_0x586824[_0x4f30de(0x1c4)]-(_0x166526['end']-_0x166526['start']));const _0x4104bf=[];_0x354897[_0x4f30de(0x1c8)](_0xcb66b3=>{const _0xab0a15=_0x4f30de;let _0x3f4d7c=![];for(let _0x336406=0x0;_0x336406<_0x4104bf['length'];_0x336406++){const _0x40732d=_0x4104bf[_0x336406];if(_0xcb66b3[_0xab0a15(0x1c4)]>=_0x40732d[_0x40732d[_0xab0a15(0x189)]-0x1][_0xab0a15(0xf8)]){_0x40732d[_0xab0a15(0x1a8)](_0xcb66b3),_0xcb66b3[_0xab0a15(0x11c)]=_0x336406,_0x3f4d7c=!![];break;}}!_0x3f4d7c&&(_0x4104bf[_0xab0a15(0x1a8)]([_0xcb66b3]),_0xcb66b3['colIndex']=_0x4104bf[_0xab0a15(0x189)]-0x1);}),_0x354897[_0x4f30de(0x1c8)](_0x56ba25=>{const _0x4dc83e=_0x4f30de;let _0x26ebcd=0x0;_0x354897[_0x4dc83e(0x1c8)](_0x123307=>{const _0x231344=_0x4dc83e;if(Math[_0x231344(0xeb)](_0x56ba25['start'],_0x123307['start'])<Math['min'](_0x56ba25['end'],_0x123307[_0x231344(0xf8)])&&_0x123307['colIndex']>_0x26ebcd)_0x26ebcd=_0x123307[_0x231344(0x11c)];});const _0x4a2850=_0x26ebcd+0x1,_0x1ffdb9=0x64/_0x4a2850,_0x3d2359=_0x56ba25[_0x4dc83e(0x11c)]*_0x1ffdb9,_0x20303a=document[_0x4dc83e(0x1c6)]('div'),_0x47dfc8=_0x56ba25[_0x4dc83e(0x136)];let _0x557581=_0x4dc83e(0x112);if(clients&&clients[_0x4dc83e(0x189)]>0x0){const _0x544fbc=clients[_0x4dc83e(0x196)](_0x244f4c=>String(_0x244f4c['id'])===String(_0x47dfc8['clientId']));if(_0x544fbc&&_0x544fbc[_0x4dc83e(0x146)])_0x557581=_0x544fbc[_0x4dc83e(0x146)];}const _0x5e6a4c=_0x47dfc8[_0x4dc83e(0x17e)]===_0x4dc83e(0x143),_0x1d89cd=_0x5e6a4c?0x1:0.45;_0x20303a[_0x4dc83e(0x193)]=_0x4dc83e(0xc8)+(_0x5e6a4c?_0x4dc83e(0x17d):''),_0x20303a['style'][_0x4dc83e(0xfe)]=hexToRgba(_0x557581,_0x1d89cd),_0x20303a[_0x4dc83e(0x1a7)][_0x4dc83e(0x135)]=_0x557581;const _0x351363=_0x56ba25[_0x4dc83e(0x1c4)]/0x3c*GRID_H,_0x4e419c=(_0x56ba25[_0x4dc83e(0xf8)]-_0x56ba25['start'])/0x3c*GRID_H;_0x20303a[_0x4dc83e(0x1a7)][_0x4dc83e(0x1b7)]=_0x351363+'px',_0x20303a['style'][_0x4dc83e(0xea)]=Math['max'](_0x4e419c,0x14)+'px',_0x20303a[_0x4dc83e(0x1a7)][_0x4dc83e(0x116)]=_0x4dc83e(0xf1)+_0x1ffdb9+'%\x20-\x204px)',_0x20303a[_0x4dc83e(0x1a7)][_0x4dc83e(0xd9)]=_0x4dc83e(0xf1)+_0x3d2359+'%\x20+\x202px)',_0x20303a[_0x4dc83e(0x1a7)][_0x4dc83e(0x11f)]=0xa+_0x56ba25['colIndex'];if(_0x1ffdb9<0x55)_0x20303a[_0x4dc83e(0x190)][_0x4dc83e(0x1ac)](_0x4dc83e(0x175));let _0x2676a0='';if(_0x47dfc8[_0x4dc83e(0x104)])_0x2676a0+=_0x4dc83e(0x12e);if(_0x5e6a4c)_0x2676a0+=_0x4dc83e(0x121);_0x20303a[_0x4dc83e(0x12a)]=_0x4dc83e(0x126)+_0x47dfc8[_0x4dc83e(0x1c4)]+_0x4dc83e(0x1a9)+_0x47dfc8[_0x4dc83e(0xf8)]+_0x4dc83e(0x151)+_0x2676a0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x20303a[_0x4dc83e(0x19e)]=_0x156a8b=>{_0x156a8b['stopPropagation'](),openDetails(_0x47dfc8);},_0x114a43[_0x4dc83e(0x134)](_0x20303a);});}function openAnalytics(){const _0x38c488=a3_0x322265,_0x332926=document['querySelector']('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x38c488(0xfd),_0x332926),openSheet(_0x38c488(0x109));}function setAnalyticsPeriod(_0x428318,_0x4b04ed){const _0x2b3995=a3_0x322265;currentAnPeriod=_0x428318,document[_0x2b3995(0x138)](_0x2b3995(0x1b2))[_0x2b3995(0x1c8)](_0x3b94b0=>_0x3b94b0[_0x2b3995(0x190)][_0x2b3995(0xe1)](_0x2b3995(0x106)));if(_0x4b04ed)_0x4b04ed['classList'][_0x2b3995(0x1ac)](_0x2b3995(0x106));const _0x56522f=document[_0x2b3995(0x178)](_0x2b3995(0x105));_0x56522f[_0x2b3995(0x1a7)][_0x2b3995(0x186)]=_0x428318===_0x2b3995(0x13f)?_0x2b3995(0x108):_0x2b3995(0xcd);const _0x49f503=new Date();let _0x3b9d53=new Date(),_0xbcf197=new Date();if(_0x428318==='week')_0x3b9d53=getStartOfWeek(_0x49f503),_0xbcf197=new Date(_0x3b9d53),_0xbcf197[_0x2b3995(0x1b1)](_0xbcf197[_0x2b3995(0x1b0)]()+0x6);else{if(_0x428318===_0x2b3995(0x1c3))_0x3b9d53=new Date(_0x49f503[_0x2b3995(0x165)](),_0x49f503[_0x2b3995(0x144)](),0x1),_0xbcf197=new Date(_0x49f503[_0x2b3995(0x165)](),_0x49f503[_0x2b3995(0x144)]()+0x1,0x0);else{!document[_0x2b3995(0x178)](_0x2b3995(0x170))['value']&&(document[_0x2b3995(0x178)](_0x2b3995(0x170))[_0x2b3995(0x10b)]=getLocalDateStr(_0x49f503),document[_0x2b3995(0x178)](_0x2b3995(0x14c))['value']=getLocalDateStr(_0x49f503));refreshAnalytics();return;}}document['getElementById'](_0x2b3995(0x170))[_0x2b3995(0x10b)]=getLocalDateStr(_0x3b9d53),document['getElementById'](_0x2b3995(0x14c))['value']=getLocalDateStr(_0xbcf197),refreshAnalytics();}function refreshAnalytics(){const _0x3fc46d=a3_0x322265,_0x237b54=document[_0x3fc46d(0x178)](_0x3fc46d(0x170))[_0x3fc46d(0x10b)],_0x2ffd4e=document['getElementById'](_0x3fc46d(0x14c))[_0x3fc46d(0x10b)];if(!_0x237b54||!_0x2ffd4e)return;const _0x1e2b41=sessions['filter'](_0x40e609=>_0x40e609[_0x3fc46d(0xc7)]>=_0x237b54&&_0x40e609[_0x3fc46d(0xc7)]<=_0x2ffd4e&&_0x40e609['status']!==_0x3fc46d(0x16c)),_0x668f5e=_0x1e2b41[_0x3fc46d(0x189)],_0x193505=_0x1e2b41[_0x3fc46d(0x19f)](_0x51c111=>_0x51c111['status']==='completed')[_0x3fc46d(0x189)],_0x467093=_0x668f5e>0x0?Math[_0x3fc46d(0x119)](_0x193505/_0x668f5e*0x64):0x0;document[_0x3fc46d(0x178)]('anPercent')['textContent']=_0x467093+'%',document['getElementById']('anTotalStats')[_0x3fc46d(0x19c)]=_0x193505+_0x3fc46d(0x147)+_0x668f5e+_0x3fc46d(0x12f);const _0x57f465=document[_0x3fc46d(0x178)](_0x3fc46d(0x123)),_0x17964f=0x2*Math['PI']*0x23,_0x3aa66d=_0x17964f-_0x467093/0x64*_0x17964f;_0x57f465[_0x3fc46d(0x1a7)][_0x3fc46d(0x15f)]=_0x3aa66d;const _0x4e3632={};_0x1e2b41['forEach'](_0x3302fb=>{const _0x5f389c=_0x3fc46d,_0x128d22=_0x3302fb[_0x5f389c(0x103)]||_0x5f389c(0x1bf);if(!_0x4e3632[_0x128d22]){const _0x25d8dc='#'+_0x128d22[_0x5f389c(0xdb)]()[_0x5f389c(0x102)](0x0,0x6);_0x4e3632[_0x128d22]={'total':0x0,'done':0x0,'color':_0x25d8dc};}_0x4e3632[_0x128d22][_0x5f389c(0x130)]++;if(_0x3302fb[_0x5f389c(0x17e)]===_0x5f389c(0x143))_0x4e3632[_0x128d22][_0x5f389c(0xf6)]++;});const _0x25b3eb=document['getElementById'](_0x3fc46d(0xf3));_0x25b3eb['innerHTML']='';const _0x5d1934=Object[_0x3fc46d(0x184)](_0x4e3632)[_0x3fc46d(0x145)]((_0x223e1d,_0x151813)=>_0x151813[0x1][_0x3fc46d(0x130)]-_0x223e1d[0x1][_0x3fc46d(0x130)]);if(_0x5d1934['length']===0x0){_0x25b3eb['innerHTML']='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x5d1934['forEach'](([_0x4338b7,_0x43fa09])=>{const _0x426029=_0x3fc46d,_0x198c6a=Math[_0x426029(0x119)](_0x43fa09[_0x426029(0xf6)]/_0x43fa09[_0x426029(0x130)]*0x64),_0x18e856=document[_0x426029(0x1c6)](_0x426029(0x120));_0x18e856[_0x426029(0x193)]=_0x426029(0xdc),_0x18e856[_0x426029(0x1a7)]['borderLeftColor']=_0x43fa09[_0x426029(0x146)],_0x18e856['innerHTML']=_0x426029(0x117)+_0x4338b7[_0x426029(0x102)](0x0,0x5)+_0x426029(0x15c)+_0x43fa09[_0x426029(0xf6)]+'</span>\x20/\x20'+_0x43fa09[_0x426029(0x130)]+_0x426029(0x124)+_0x198c6a+_0x426029(0x18c),_0x25b3eb[_0x426029(0x134)](_0x18e856);});}function openDetails(_0x3a7132){const _0xb4f692=a3_0x322265;currentSession=_0x3a7132;const _0x50ca6e=new Date(_0x3a7132[_0xb4f692(0xc7)]),_0x1b1525=_0x50ca6e['toLocaleDateString'](_0xb4f692(0x12d),{'weekday':_0xb4f692(0x17a),'day':_0xb4f692(0x176),'month':_0xb4f692(0x17a)});document['getElementById'](_0xb4f692(0xf5))[_0xb4f692(0x19c)]=_0x1b1525[_0xb4f692(0x127)](0x0)['toUpperCase']()+_0x1b1525['slice'](0x1),document['getElementById'](_0xb4f692(0x162))[_0xb4f692(0x19c)]=_0x3a7132['start']+_0xb4f692(0x1a9)+_0x3a7132['end'],document[_0xb4f692(0x178)](_0xb4f692(0xdf))[_0xb4f692(0x19c)]=_0x3a7132['note']||_0xb4f692(0x142);const _0x536462=document[_0xb4f692(0x178)](_0xb4f692(0x1c2)),_0x424c22=document['getElementById'](_0xb4f692(0xed)),_0x3d05ea=_0x424c22[_0xb4f692(0x1b9)]('.btn-cancel'),_0xb088c4=_0x424c22[_0xb4f692(0x1b9)](_0xb4f692(0xd2)),_0x1e9d15=document['getElementById'](_0xb4f692(0xcb));if(_0x3a7132[_0xb4f692(0x17e)]===_0xb4f692(0x143))_0x536462[_0xb4f692(0x19c)]='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0x536462['style'][_0xb4f692(0x146)]=_0xb4f692(0x152),_0x424c22[_0xb4f692(0x1a7)][_0xb4f692(0x186)]='none';else{_0x536462[_0xb4f692(0x19c)]='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x536462['style'][_0xb4f692(0x146)]='var(--acc-blue)',_0x424c22[_0xb4f692(0x1a7)][_0xb4f692(0x186)]='block';const _0x1d4858=new Date(_0x3a7132[_0xb4f692(0xc7)]+'T'+_0x3a7132[_0xb4f692(0x1c4)]),_0x2cfa6a=new Date(),_0x2f8249=(_0x1d4858-_0x2cfa6a)/(0x3e8*0x3c*0x3c),_0x1fc123=coachProfiles[_0x3a7132['coachId']]&&coachProfiles[_0x3a7132[_0xb4f692(0x103)]][_0xb4f692(0x177)]?parseInt(coachProfiles[_0x3a7132[_0xb4f692(0x103)]][_0xb4f692(0x177)]):0x18;if(_0x1fc123===0x0||_0x2f8249>=_0x1fc123)_0x3d05ea['style'][_0xb4f692(0x186)]=_0xb4f692(0xec),_0xb088c4[_0xb4f692(0x1a7)]['display']='block',_0x1e9d15[_0xb4f692(0x1a7)][_0xb4f692(0x186)]='none';else{_0x3d05ea[_0xb4f692(0x1a7)][_0xb4f692(0x186)]=_0xb4f692(0xcd),_0xb088c4[_0xb4f692(0x1a7)][_0xb4f692(0x186)]=_0xb4f692(0xcd),_0x1e9d15['style'][_0xb4f692(0x186)]=_0xb4f692(0xec);let _0x1fee75=_0x1fc123===0x0?_0xb4f692(0x159):_0xb4f692(0x1ae)+_0x1fc123+_0xb4f692(0x19a);_0x1e9d15[_0xb4f692(0x19c)]=_0xb4f692(0x18b)+_0x1fee75+_0xb4f692(0xd6);}}document[_0xb4f692(0x178)](_0xb4f692(0x17f))[_0xb4f692(0x190)][_0xb4f692(0x1ac)](_0xb4f692(0x106)),document['getElementById'](_0xb4f692(0x132))[_0xb4f692(0x190)][_0xb4f692(0x1ac)](_0xb4f692(0xf4));}function closeAllSheets(){const _0x1a54d7=a3_0x322265;document[_0x1a54d7(0x178)](_0x1a54d7(0x17f))['classList'][_0x1a54d7(0xe1)](_0x1a54d7(0x106)),document['querySelectorAll'](_0x1a54d7(0x1a2))['forEach'](_0x252aee=>_0x252aee[_0x1a54d7(0x190)]['remove']('open'));}function openSheet(_0xc3e6ea){const _0x3916fe=a3_0x322265;document['getElementById']('overlay')[_0x3916fe(0x190)][_0x3916fe(0x1ac)](_0x3916fe(0x106)),document[_0x3916fe(0x178)](_0xc3e6ea)['classList'][_0x3916fe(0x1ac)](_0x3916fe(0xf4));}function getLocalDateStr(_0x1e1019){const _0x4c0c32=a3_0x322265,_0x3a65f9=_0x1e1019['getFullYear'](),_0x17eee9=String(_0x1e1019[_0x4c0c32(0x144)]()+0x1)[_0x4c0c32(0x1b4)](0x2,'0'),_0x3d7053=String(_0x1e1019['getDate']())[_0x4c0c32(0x1b4)](0x2,'0');return _0x3a65f9+'-'+_0x17eee9+'-'+_0x3d7053;}function getStartOfWeek(_0x5cacdc){const _0x1b1355=a3_0x322265,_0x2344e1=new Date(_0x5cacdc),_0x1f6682=_0x2344e1[_0x1b1355(0x180)](),_0x3b3bb8=_0x2344e1[_0x1b1355(0x1b0)]()-_0x1f6682+(_0x1f6682===0x0?-0x6:0x1);return _0x2344e1[_0x1b1355(0x1b1)](_0x3b3bb8),_0x2344e1['setHours'](0x0,0x0,0x0,0x0),_0x2344e1;}function scrollToToday(){const _0x57ddd8=getLocalDateStr(new Date());setTimeout(()=>{const _0xb4551c=a3_0x15eb,_0x53a5e6=document[_0xb4551c(0x1b9)]('.day-col-header[data-date=\x22'+_0x57ddd8+'\x22]');if(_0x53a5e6){const _0x2278b5=document['getElementById'](_0xb4551c(0x15a)),_0x38831f=_0x53a5e6[_0xb4551c(0x173)]-_0x2278b5[_0xb4551c(0x10d)]/0x2+_0x53a5e6[_0xb4551c(0x1a1)]/0x2;_0x2278b5['scrollTo']({'left':_0x38831f,'behavior':_0xb4551c(0xe3)}),_0x2278b5[_0xb4551c(0xfc)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x5f425b=a3_0x322265,_0x337150=new Date(),_0x3bed1d=document[_0x5f425b(0x178)](_0x5f425b(0x188)),_0x4ae9ca=document[_0x5f425b(0x178)]('timeLineBadge'),_0x595bcc=(_0x337150[_0x5f425b(0x15b)]()*0x3c+_0x337150[_0x5f425b(0xce)]())/0x3c*GRID_H;_0x3bed1d['style'][_0x5f425b(0x1b7)]=_0x595bcc+'px',_0x3bed1d['style'][_0x5f425b(0x186)]=_0x5f425b(0xec),_0x4ae9ca[_0x5f425b(0x1a7)][_0x5f425b(0x1b7)]=_0x595bcc+'px',_0x4ae9ca['style'][_0x5f425b(0x186)]=_0x5f425b(0xec),_0x4ae9ca['textContent']=String(_0x337150[_0x5f425b(0x15b)]())[_0x5f425b(0x1b4)](0x2,'0')+':'+String(_0x337150[_0x5f425b(0xce)]())['padStart'](0x2,'0');}function a3_0x4721(){const _0x164f3=['find','floor','POST','<div\x20class=\x22dch-day\x22>','\x20—á.','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','textContent','rsSlotsGrid','onclick','filter','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','offsetWidth','.sheet','toLocaleDateString','uc_client_sessions','settings','createDocumentFragment','style','push','\x20-\x20','data-day-idx','isArray','add','setMonth','–∑–∞\x20','ccText','getDate','setDate','.period-switch\x20.p-btn','user','padStart','ready','visible','top','getTime','querySelector','map','fontWeight','px\x20-','9423228CPlOTb','join','Unknown','then','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','detStatus','month','start','json','createElement','startsWith','forEach','ccYesBtn','dateStr','event-card','findIndex','</div>','cancelHint','search','none','getMinutes','clients','split','get_slots','.btn-reschedule','day-off-overlay\x20stripe-bg','rs-date-chip','#050505','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','timeLineBadge','setHeaderColor','left','all','toString','client-stat-card','setHours','85896CnnpAT','detNote','time-label','remove','6gWDrBc','auto','show','timeColumn','firstChild','cid','ranges','href','height','max','block','cancelContainer','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','day-col-header\x20','scrollLeft','calc(','blocked-slot\x20stripe-bg','analyticsList','open','detDate','done','496ThiYSW','end','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','pattern','initData','scrollTop','week','backgroundColor','23272uQnqWg','setBackgroundColor','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','substr','coachId','seriesId','anCustomDates','active','55rLrDFT','flex','analyticsSheet','saveLocally','value','.day-column','clientWidth','Critical\x20TMA\x20Error:','</div><div\x20class=\x22dch-num\x22>','Telegram','daysHeaderTrack','#0a84ff','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','parse','addEventListener','width','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','calendar','round','600','BackButton','colIndex','uc_client_settings','now','zIndex','div','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','error','anDonutCircle','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','.rs-date-chip','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','charAt','getItem','13GAIyxF','innerHTML','v9.5-CLIENT-ANALYTICS','today','ru-RU','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','total','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','detailsSheet','scrollWidth','appendChild','borderLeftColor','data','T00:00:00','querySelectorAll','day-column\x20','constructor','sid','offClick','rgba(','getAttribute','custom','scroll','log','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','completed','getMonth','sort','color','\x20–∏–∑\x20','keys','customConfirm','exceptions','<div\x20class=\x22rs-day-name\x22>','anEnd','planned','404780UDjFCr','#ff453a','applyData','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','var(--acc-green)','toast','location','gridColumns','WebApp','syncLoad','min','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','matrixViewport','getHours','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>',':00</span>','–û—Ç–º–µ–Ω–µ–Ω–æ','strokeDashoffset','headerMonth','expand','detTime','toLocaleString','(((.+)+)+)+$','getFullYear','5027848iyjfHn','setAttribute','Error\x20setting\x20color:','router.html','306wSlJIs','rsDatesTrack','cancelled','substring','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','data-date','anStart','uc_client_list','insertBefore','offsetLeft','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','mini','numeric','cancel_window','getElementById','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','long','16320crqUIC','backgroundPosition','\x20status-completed','status','overlay','getDay','3257715enrIwi','\x20–≤\x20','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','entries','30sAOUFf','display','test','globalTimeLine','length','stringify','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','coach_profiles','disableVerticalSwipes','onClick','classList','blocked-range-part\x20stripe-bg','setItem','className','client_load','client_cancel'];a3_0x4721=function(){return _0x164f3;};return a3_0x4721();}function onScroll(){const _0x5dde9c=a3_0x322265,_0x191a15=document[_0x5dde9c(0x178)](_0x5dde9c(0x15a)),_0x167abb=document[_0x5dde9c(0x138)]('.day-col-header');for(let _0x19a3d4 of _0x167abb)if(_0x19a3d4[_0x5dde9c(0x173)]>=_0x191a15['scrollLeft']){const _0x3f2944=new Date(_0x19a3d4[_0x5dde9c(0x13e)](_0x5dde9c(0x16f)));document['getElementById'](_0x5dde9c(0x160))[_0x5dde9c(0x19c)]=_0x3f2944[_0x5dde9c(0x163)]('ru',{'month':_0x5dde9c(0x17a)})['toUpperCase']()+'\x20'+_0x3f2944[_0x5dde9c(0x165)]();break;}}function showToast(_0x547402){const _0x4ae477=a3_0x322265,_0x119c73=document[_0x4ae477(0x178)](_0x4ae477(0x153));_0x119c73[_0x4ae477(0x19c)]=_0x547402,_0x119c73[_0x4ae477(0x190)][_0x4ae477(0x1ac)]('show'),setTimeout(()=>_0x119c73[_0x4ae477(0x190)][_0x4ae477(0xe1)](_0x4ae477(0xe4)),0x7d0);}function handleInfiniteScroll(){const _0x44beb0=a3_0x322265,_0xe216fc=document[_0x44beb0(0x178)](_0x44beb0(0x15a)),_0x4a46e7=_0xe216fc[_0x44beb0(0xf0)],_0x2c5e7b=_0xe216fc[_0x44beb0(0x133)],_0x5771a4=_0xe216fc[_0x44beb0(0x10d)];if(_0x2c5e7b-(_0x4a46e7+_0x5771a4)<0x12c){const _0x428552=endOffset;endOffset+=0xe,renderDayRange(_0x428552+0x1,endOffset),reRenderBlocks();}if(_0x4a46e7<0x12c){const _0x5e8960=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5e8960-0x1),_0xe216fc[_0x44beb0(0xf0)]+=0xe*0x41,reRenderBlocks();}}function a3_0x15eb(_0x3cf673,_0x3105af){_0x3cf673=_0x3cf673-0xc6;const _0x26ab0b=a3_0x4721();let _0x53e039=_0x26ab0b[_0x3cf673];return _0x53e039;}function prependDays(_0x4b9558,_0x4560c9){const _0x582098=a3_0x322265,_0x125e26=document[_0x582098(0x178)](_0x582098(0x111)),_0x35f4d7=document[_0x582098(0x178)](_0x582098(0x155)),_0x47aeac=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x61e809=new Date();_0x61e809[_0x582098(0xdd)](0x0,0x0,0x0,0x0);const _0x7381a9=getLocalDateStr(new Date()),_0x5be787=document['createDocumentFragment'](),_0x527a95=document[_0x582098(0x1a6)]();for(let _0xddb30c=_0x4b9558;_0xddb30c<=_0x4560c9;_0xddb30c++){const _0x2f54dd=new Date(_0x61e809);_0x2f54dd[_0x582098(0x1b1)](_0x2f54dd['getDate']()+_0xddb30c);const _0x311bb5=getLocalDateStr(_0x2f54dd);let _0x3f07a6=_0x2f54dd[_0x582098(0x180)]()-0x1;if(_0x3f07a6===-0x1)_0x3f07a6=0x6;const _0xcd1047=_0x311bb5===_0x7381a9,_0x53ed7e=document[_0x582098(0x1c6)]('div');_0x53ed7e[_0x582098(0x193)]='day-col-header\x20'+(_0xcd1047?_0x582098(0x12c):''),_0x53ed7e[_0x582098(0x167)](_0x582098(0x16f),_0x311bb5),_0x53ed7e[_0x582098(0x12a)]=_0x582098(0x199)+_0x47aeac[_0x3f07a6]+_0x582098(0x10f)+_0x2f54dd[_0x582098(0x1b0)]()+'</div>',_0x5be787['appendChild'](_0x53ed7e);const _0x2d65e4=document['createElement'](_0x582098(0x120));_0x2d65e4[_0x582098(0x193)]=_0x582098(0x139)+(_0xcd1047?_0x582098(0x12c):''),_0x2d65e4[_0x582098(0x167)](_0x582098(0x16f),_0x311bb5),_0x2d65e4[_0x582098(0x167)]('data-day-idx',_0x3f07a6),_0x527a95[_0x582098(0x134)](_0x2d65e4);}_0x125e26[_0x582098(0x172)](_0x5be787,_0x125e26[_0x582098(0xe6)]),_0x35f4d7[_0x582098(0x172)](_0x527a95,_0x35f4d7[_0x582098(0x1b9)](_0x582098(0x10c)));}function hexToRgba(_0x4d4a7b,_0x37f70b){const _0x120726=a3_0x322265;let _0x46a3a2;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x120726(0x187)](_0x4d4a7b))return _0x46a3a2=_0x4d4a7b[_0x120726(0x16d)](0x1)[_0x120726(0xd0)](''),_0x46a3a2[_0x120726(0x189)]==0x3&&(_0x46a3a2=[_0x46a3a2[0x0],_0x46a3a2[0x0],_0x46a3a2[0x1],_0x46a3a2[0x1],_0x46a3a2[0x2],_0x46a3a2[0x2]]),_0x46a3a2='0x'+_0x46a3a2[_0x120726(0x1be)](''),_0x120726(0x13d)+[_0x46a3a2>>0x10&0xff,_0x46a3a2>>0x8&0xff,_0x46a3a2&0xff][_0x120726(0x1be)](',')+','+_0x37f70b+')';return'rgba(10,\x20132,\x20255,\x20'+_0x37f70b+')';}let confirmResolver=null;function showCustomConfirm(_0x5c20e1,_0x274f56,_0x678e16=!![]){const _0x34214e=a3_0x322265;document[_0x34214e(0x178)]('ccTitle')[_0x34214e(0x19c)]=_0x5c20e1,document[_0x34214e(0x178)](_0x34214e(0x1af))[_0x34214e(0x19c)]=_0x274f56;const _0x293b7e=document['getElementById'](_0x34214e(0xc6));return _0x678e16?(_0x293b7e[_0x34214e(0x1a7)][_0x34214e(0x146)]=_0x34214e(0x14f),_0x293b7e[_0x34214e(0x1a7)]['fontWeight']='600'):(_0x293b7e['style']['color']=_0x34214e(0x112),_0x293b7e[_0x34214e(0x1a7)][_0x34214e(0x1bb)]=_0x34214e(0x11a)),new Promise(_0x5ca00a=>{const _0x132a8c=_0x34214e;confirmResolver=_0x5ca00a,document[_0x132a8c(0x178)]('customConfirm')[_0x132a8c(0x190)][_0x132a8c(0x1ac)](_0x132a8c(0x1b6));});}function resolveCustomConfirm(_0x57180e){const _0x43c2a8=a3_0x322265;document[_0x43c2a8(0x178)](_0x43c2a8(0x149))['classList'][_0x43c2a8(0xe1)]('visible');if(confirmResolver)confirmResolver(_0x57180e);}async function tryCancelCurrentSession(){const _0x59f655=a3_0x322265;if(!currentSession)return;const _0x53745e=await showCustomConfirm(_0x59f655(0x101),_0x59f655(0xee),!![]);if(!_0x53745e)return;const _0x501aaf=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x950862=>_0x950862['id']!==_0x501aaf['id']),reRenderBlocks(),showToast(_0x59f655(0x15e)),lastUserActionTime=Date['now']();try{const _0x1f0305=window[_0x59f655(0x110)]?.[_0x59f655(0x156)],_0x38653f=await fetch(API_URL,{'method':'POST','body':JSON[_0x59f655(0x18a)]({'action':_0x59f655(0x195),'init_data':_0x1f0305?.[_0x59f655(0xfb)]||'','coachId':_0x501aaf['coachId'],'dateStr':_0x501aaf[_0x59f655(0xc7)],'sessionId':_0x501aaf['id']})});if(_0x38653f['ok'])DataManager['saveLocally']();}catch(_0x53ae1d){showToast(_0x59f655(0x183));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x3cc304=a3_0x322265;if(!currentSession)return;document[_0x3cc304(0x178)](_0x3cc304(0x132))[_0x3cc304(0x190)][_0x3cc304(0xe1)](_0x3cc304(0xf4)),document['getElementById']('rescheduleSheet')[_0x3cc304(0x190)]['add'](_0x3cc304(0xf4));const _0xd41a29=document[_0x3cc304(0x178)](_0x3cc304(0x16b)),_0x39ae87=document[_0x3cc304(0x178)](_0x3cc304(0x19d));_0xd41a29[_0x3cc304(0x12a)]='',_0x39ae87['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x4708bc,_0x3a8b7b]=currentSession[_0x3cc304(0x1c4)][_0x3cc304(0xd0)](':')[_0x3cc304(0x1ba)](Number),[_0x34f5d7,_0xaa13b]=currentSession[_0x3cc304(0xf8)][_0x3cc304(0xd0)](':')[_0x3cc304(0x1ba)](Number),_0x134f1a=_0x34f5d7*0x3c+_0xaa13b-(_0x4708bc*0x3c+_0x3a8b7b);try{const _0x4a5300=window[_0x3cc304(0x110)]?.[_0x3cc304(0x156)],_0x597904=await fetch(API_URL,{'method':'POST','body':JSON[_0x3cc304(0x18a)]({'action':_0x3cc304(0xd1),'coachId':currentSession[_0x3cc304(0x103)],'duration':_0x134f1a,'init_data':_0x4a5300?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x1aede7=await _0x597904[_0x3cc304(0x1c5)]();_0x1aede7['ok']&&_0x1aede7[_0x3cc304(0x136)]?(availableSlotsCache=_0x1aede7[_0x3cc304(0x136)],renderRescheduleDates()):_0x39ae87[_0x3cc304(0x12a)]=_0x3cc304(0x19b);}catch(_0x1a27c0){_0x39ae87[_0x3cc304(0x12a)]=_0x3cc304(0x1a0);}}function renderRescheduleDates(){const _0x182119=a3_0x322265,_0xe95109=document[_0x182119(0x178)]('rsDatesTrack');_0xe95109[_0x182119(0x12a)]='';const _0x1054b0=Object[_0x182119(0x148)](availableSlotsCache)[_0x182119(0x145)](),_0x25be95=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x1054b0[_0x182119(0x189)]===0x0){document[_0x182119(0x178)](_0x182119(0x19d))['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x1054b0['forEach']((_0x319b51,_0x1d705f)=>{const _0x251305=_0x182119,_0x124be9=new Date(_0x319b51),_0x8c2f8=_0x25be95[_0x124be9[_0x251305(0x180)]()],_0x326ca7=_0x124be9[_0x251305(0x1b0)](),_0x29555b=document['createElement'](_0x251305(0x120));_0x29555b[_0x251305(0x193)]=_0x251305(0xd4);if(_0x1d705f===0x0)_0x29555b[_0x251305(0x190)][_0x251305(0x1ac)](_0x251305(0x106));_0x29555b[_0x251305(0x12a)]=_0x251305(0x14b)+_0x8c2f8+'</div><div\x20class=\x22rs-day-num\x22>'+_0x326ca7+'</div>',_0x29555b[_0x251305(0x19e)]=()=>selectRsDate(_0x319b51,_0x29555b),_0xe95109['appendChild'](_0x29555b);}),selectRsDate(_0x1054b0[0x0],_0xe95109[_0x182119(0xe6)]);}function selectRsDate(_0x4620b9,_0x4176cd){const _0x50a44f=a3_0x322265;selectedRsDate=_0x4620b9,document[_0x50a44f(0x138)](_0x50a44f(0x125))['forEach'](_0x27519b=>_0x27519b['classList'][_0x50a44f(0xe1)](_0x50a44f(0x106)));if(_0x4176cd)_0x4176cd[_0x50a44f(0x190)]['add']('active');const _0x326c99=document[_0x50a44f(0x178)](_0x50a44f(0x19d));_0x326c99['innerHTML']='';const _0x44ff5f=availableSlotsCache[_0x4620b9]||[];if(_0x44ff5f[_0x50a44f(0x189)]===0x0){_0x326c99[_0x50a44f(0x12a)]=_0x50a44f(0x19b);return;}_0x44ff5f[_0x50a44f(0x1c8)](_0x6aff62=>{const _0x42deec=_0x50a44f,_0x201dbe=document[_0x42deec(0x1c6)]('button');_0x201dbe[_0x42deec(0x193)]='rs-time-btn',_0x201dbe['textContent']=_0x6aff62,_0x201dbe['onclick']=()=>confirmReschedule(_0x6aff62),_0x326c99[_0x42deec(0x134)](_0x201dbe);});}async function confirmReschedule(_0x50cd97){const _0x6a6ee3=a3_0x322265,_0x4db0cf=new Date(selectedRsDate),_0x1756e2=_0x4db0cf[_0x6a6ee3(0x1a3)]('ru-RU',{'day':'numeric','month':_0x6a6ee3(0x17a)}),_0x23a6b6=await showCustomConfirm(_0x6a6ee3(0xf9),_0x6a6ee3(0x179)+_0x1756e2+_0x6a6ee3(0x182)+_0x50cd97+'?',![]);if(!_0x23a6b6)return;closeAllSheets(),showToast(_0x6a6ee3(0x131)),lastUserActionTime=Date[_0x6a6ee3(0x11e)]();const _0x2beba3=currentSession[_0x6a6ee3(0xc7)],_0x1ae093=currentSession['id'],[_0x143d08,_0x3e6192]=currentSession['start'][_0x6a6ee3(0xd0)](':')['map'](Number),[_0x100418,_0x3b03e4]=currentSession[_0x6a6ee3(0xf8)][_0x6a6ee3(0xd0)](':')[_0x6a6ee3(0x1ba)](Number),_0x55b128=_0x100418*0x3c+_0x3b03e4-(_0x143d08*0x3c+_0x3e6192),[_0x57b2e5,_0x31e4ca]=_0x50cd97[_0x6a6ee3(0xd0)](':')['map'](Number),_0x4f37e1=_0x57b2e5*0x3c+_0x31e4ca+_0x55b128,_0x18c405=Math[_0x6a6ee3(0x197)](_0x4f37e1/0x3c),_0x498ac8=_0x4f37e1%0x3c,_0x4906f9=String(_0x18c405)[_0x6a6ee3(0x1b4)](0x2,'0')+':'+String(_0x498ac8)[_0x6a6ee3(0x1b4)](0x2,'0'),_0x46cf78=sessions[_0x6a6ee3(0xc9)](_0x22c71d=>_0x22c71d['id']===_0x1ae093);_0x46cf78!==-0x1&&(sessions[_0x46cf78][_0x6a6ee3(0xc7)]=selectedRsDate,sessions[_0x46cf78][_0x6a6ee3(0x1c4)]=_0x50cd97,sessions[_0x46cf78]['end']=_0x4906f9,reRenderBlocks());try{const _0xfb1c46=window[_0x6a6ee3(0x110)]?.[_0x6a6ee3(0x156)],_0x6575bb=await fetch(API_URL,{'method':_0x6a6ee3(0x198),'body':JSON[_0x6a6ee3(0x18a)]({'action':'reschedule','init_data':_0xfb1c46?.[_0x6a6ee3(0xfb)]||'','oldSessionId':_0x1ae093,'oldDate':_0x2beba3,'newDate':selectedRsDate,'newTime':_0x50cd97,'coachId':currentSession[_0x6a6ee3(0x103)]})}),_0x598711=await _0x6575bb[_0x6a6ee3(0x1c5)]();!_0x598711['ok']?(showToast(_0x6a6ee3(0x1c1)),DataManager[_0x6a6ee3(0x157)]()):(showToast(_0x6a6ee3(0x113)),DataManager[_0x6a6ee3(0x10a)]());}catch(_0x4bbdf6){showToast(_0x6a6ee3(0x183));}}document[a3_0x322265(0x115)]('DOMContentLoaded',init);