const a3_0x1df310=a3_0x3ed4;(function(_0xdea4f4,_0x168467){const _0x4a02d5=a3_0x3ed4,_0x287993=_0xdea4f4();while(!![]){try{const _0x58b138=parseInt(_0x4a02d5(0x287))/0x1*(parseInt(_0x4a02d5(0x255))/0x2)+-parseInt(_0x4a02d5(0x256))/0x3+parseInt(_0x4a02d5(0x291))/0x4+-parseInt(_0x4a02d5(0x21d))/0x5*(-parseInt(_0x4a02d5(0x1db))/0x6)+-parseInt(_0x4a02d5(0x1a4))/0x7*(parseInt(_0x4a02d5(0x19e))/0x8)+-parseInt(_0x4a02d5(0x26c))/0x9+parseInt(_0x4a02d5(0x1e0))/0xa*(parseInt(_0x4a02d5(0x258))/0xb);if(_0x58b138===_0x168467)break;else _0x287993['push'](_0x287993['shift']());}catch(_0x5b0861){_0x287993['push'](_0x287993['shift']());}}}(a3_0xe45d,0x426b0));const APP_VERSION=a3_0x1df310(0x1df),API_URL=a3_0x1df310(0x198),GRID_H=0x3c,KEY_SESSIONS=a3_0x1df310(0x20f),KEY_SETTINGS=a3_0x1df310(0x1c2),KEY_CLIENTS=a3_0x1df310(0x20a);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x1df310(0x288),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x44a438=a3_0x1df310,_0x45d151=(function(){let _0x5c36d1=!![];return function(_0x3b7399,_0x3b5d45){const _0x2ae0d3=_0x5c36d1?function(){const _0x20b2fc=a3_0x3ed4;if(_0x3b5d45){const _0x2beb33=_0x3b5d45[_0x20b2fc(0x21e)](_0x3b7399,arguments);return _0x3b5d45=null,_0x2beb33;}}:function(){};return _0x5c36d1=![],_0x2ae0d3;};}()),_0x1990e9=_0x45d151(this,function(){const _0x1624f0=a3_0x3ed4;return _0x1990e9[_0x1624f0(0x1d2)]()['search']('(((.+)+)+)+$')[_0x1624f0(0x1d2)]()[_0x1624f0(0x217)](_0x1990e9)[_0x1624f0(0x24c)](_0x1624f0(0x1a6));});_0x1990e9();try{const _0x4bfcfa=window['Telegram']?.[_0x44a438(0x1f7)];if(!_0x4bfcfa)return;_0x4bfcfa[_0x44a438(0x200)](),_0x4bfcfa[_0x44a438(0x27f)]();try{_0x4bfcfa[_0x44a438(0x22b)](_0x44a438(0x213)),_0x4bfcfa[_0x44a438(0x264)]&&_0x4bfcfa['setBackgroundColor'](_0x44a438(0x213));}catch(_0x2e804f){console[_0x44a438(0x1b0)]('Error\x20setting\x20color:',_0x2e804f);}try{_0x4bfcfa[_0x44a438(0x21c)]&&(_0x4bfcfa['BackButton'][_0x44a438(0x1c5)](),_0x4bfcfa['BackButton'][_0x44a438(0x246)](),_0x4bfcfa[_0x44a438(0x21c)]['onClick'](function(){const _0x46bc3a=_0x44a438;window[_0x46bc3a(0x1b6)][_0x46bc3a(0x1ff)]=_0x46bc3a(0x286);}));}catch(_0x322b2c){console[_0x44a438(0x1b0)](_0x44a438(0x1cc),_0x322b2c);}try{if(_0x4bfcfa[_0x44a438(0x1f2)])_0x4bfcfa[_0x44a438(0x1f2)]();}catch(_0x55b618){}}catch(_0x2a3f18){console['error'](_0x44a438(0x252),_0x2a3f18);}}());function isAdmin(){const _0x1f01dc=a3_0x1df310;try{const _0x3a7366=Number(window[_0x1f01dc(0x1bc)]?.['WebApp']?.[_0x1f01dc(0x1d1)]?.[_0x1f01dc(0x211)]?.['id']);return _0x3a7366===0xbaf7174;}catch(_0x36e2bc){return![];}}const DataManager={'saveLocally'(){const _0x435868=a3_0x1df310;try{localStorage['setItem'](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x435868(0x218)](KEY_CLIENTS,JSON[_0x435868(0x1b5)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x435868(0x1b5)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x502b31){}},'loadLocal'(){const _0x2443b2=a3_0x1df310;try{const _0x3e7f01=localStorage[_0x2443b2(0x1f0)](KEY_SESSIONS);if(_0x3e7f01)sessions=JSON[_0x2443b2(0x1c9)](_0x3e7f01);const _0x263fc8=localStorage[_0x2443b2(0x1f0)](KEY_CLIENTS);if(_0x263fc8)clients=JSON['parse'](_0x263fc8);const _0x149592=localStorage[_0x2443b2(0x1f0)](KEY_SETTINGS);if(_0x149592){const _0x38dc54=JSON[_0x2443b2(0x1c9)](_0x149592);if(_0x38dc54[_0x2443b2(0x219)])availabilityPattern=_0x38dc54[_0x2443b2(0x219)];if(_0x38dc54[_0x2443b2(0x23e)])specialRanges=_0x38dc54[_0x2443b2(0x23e)];if(_0x38dc54[_0x2443b2(0x228)])dateExceptions=_0x38dc54[_0x2443b2(0x228)];}}catch(_0x5504c2){}},async 'syncLoad'(){const _0x5f5279=a3_0x1df310,_0x4dfdde=new Date(),_0x169d11=_0x4dfdde[_0x5f5279(0x1cf)]()+'-'+String(_0x4dfdde[_0x5f5279(0x25a)]()+0x1)['padStart'](0x2,'0'),_0x2474c6=new Date(_0x4dfdde);_0x2474c6[_0x5f5279(0x1dd)](_0x4dfdde[_0x5f5279(0x25a)]()+0x1);const _0x5e877a=_0x2474c6['getFullYear']()+'-'+String(_0x2474c6[_0x5f5279(0x25a)]()+0x1)[_0x5f5279(0x224)](0x2,'0'),_0x207544=Date['now']();try{const _0xca5601=window[_0x5f5279(0x1bc)]?.[_0x5f5279(0x1f7)],_0x34a15c=_0xca5601?.[_0x5f5279(0x227)]||'',[_0x5daa5d,_0x3257fd]=await Promise[_0x5f5279(0x281)]([fetch(API_URL,{'method':'POST','body':JSON[_0x5f5279(0x1b5)]({'action':'client_load','init_data':_0x34a15c,'month_str':_0x169d11})})[_0x5f5279(0x19c)](_0x50d952=>_0x50d952[_0x5f5279(0x1bd)]()),fetch(API_URL,{'method':_0x5f5279(0x27d),'body':JSON['stringify']({'action':_0x5f5279(0x1c3),'init_data':_0x34a15c,'month_str':_0x5e877a})})[_0x5f5279(0x19c)](_0x518508=>_0x518508[_0x5f5279(0x1bd)]())]);if(lastUserActionTime>_0x207544){console[_0x5f5279(0x1b0)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x5daa5d['ok'])this[_0x5f5279(0x292)](_0x5daa5d[_0x5f5279(0x1fa)],_0x169d11);if(_0x3257fd['ok'])this[_0x5f5279(0x292)](_0x3257fd[_0x5f5279(0x1fa)],_0x5e877a);this['saveLocally']();}catch(_0x2e7c80){}},'applyData'(_0x401159,_0x8f7bc9){const _0x4189b1=a3_0x1df310;if(!_0x401159)return;if(_0x401159[_0x4189b1(0x28d)]){if(_0x401159[_0x4189b1(0x28d)]['pattern'])availabilityPattern=_0x401159[_0x4189b1(0x28d)][_0x4189b1(0x219)];if(_0x401159['settings'][_0x4189b1(0x23e)])specialRanges=_0x401159[_0x4189b1(0x28d)][_0x4189b1(0x23e)];if(_0x401159[_0x4189b1(0x28d)][_0x4189b1(0x228)])dateExceptions=_0x401159[_0x4189b1(0x28d)]['exceptions'];}if(_0x401159['clients']&&Array['isArray'](_0x401159['clients']))clients=_0x401159[_0x4189b1(0x1de)];_0x401159[_0x4189b1(0x22a)]&&(coachProfiles={...coachProfiles,..._0x401159[_0x4189b1(0x22a)]}),_0x401159[_0x4189b1(0x26a)]&&(sessions=sessions[_0x4189b1(0x277)](_0x15e570=>!_0x15e570[_0x4189b1(0x1b9)][_0x4189b1(0x19b)](_0x8f7bc9)),Object[_0x4189b1(0x251)](_0x401159[_0x4189b1(0x26a)])[_0x4189b1(0x230)](_0x86d5bf=>{const _0xbe0fc4=_0x4189b1,_0x419cc4=_0x401159[_0xbe0fc4(0x26a)][_0x86d5bf];_0x419cc4[_0xbe0fc4(0x230)](_0x282d5b=>{const _0x4f3dc2=_0xbe0fc4;sessions['push']({'id':_0x282d5b['i'],'clientId':_0x282d5b['c'],'coachId':_0x282d5b[_0x4f3dc2(0x28f)],'dateStr':_0x8f7bc9+'-'+_0x86d5bf[_0x4f3dc2(0x224)](0x2,'0'),'start':_0x282d5b['s'],'end':_0x282d5b['e'],'note':_0x282d5b['n']||'','status':_0x282d5b['st']||_0x4f3dc2(0x289),'seriesId':_0x282d5b[_0x4f3dc2(0x209)]});});})),reRenderBlocks();}};function init(){const _0x224c82=a3_0x1df310;DataManager[_0x224c82(0x297)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x224c82(0x234)]('matrixViewport')[_0x224c82(0x1fe)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x224c82(0x1ac)]();}function a3_0x3ed4(_0x119b48,_0x5aec8e){_0x119b48=_0x119b48-0x197;const _0x53e4e7=a3_0xe45d();let _0x193101=_0x53e4e7[_0x119b48];return _0x193101;}function renderTimeColumn(){const _0xde26bb=a3_0x1df310,_0x29e170=document[_0xde26bb(0x234)](_0xde26bb(0x1cd)),_0x5af700=document[_0xde26bb(0x234)](_0xde26bb(0x248));_0x29e170[_0xde26bb(0x1ca)]='',_0x29e170[_0xde26bb(0x24b)](_0x5af700);for(let _0x594402=0x0;_0x594402<0x18;_0x594402++){const _0x3fa5e9=document[_0xde26bb(0x24e)]('div');_0x3fa5e9[_0xde26bb(0x26e)]='time-label';if(_0x594402>0x0)_0x3fa5e9[_0xde26bb(0x1ca)]='<span>'+String(_0x594402)[_0xde26bb(0x224)](0x2,'0')+_0xde26bb(0x1ba);_0x29e170[_0xde26bb(0x24b)](_0x3fa5e9);}}function renderDayRange(_0x4e2efc,_0x17c2f0){const _0x3bfaa5=a3_0x1df310,_0x249ee7=document[_0x3bfaa5(0x234)]('daysHeaderTrack'),_0x5875b1=document['getElementById'](_0x3bfaa5(0x250)),_0x27d759=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1845b6=new Date();_0x1845b6[_0x3bfaa5(0x1ee)](0x0,0x0,0x0,0x0);const _0x39ba87=getLocalDateStr(new Date());for(let _0x43598a=_0x4e2efc;_0x43598a<=_0x17c2f0;_0x43598a++){const _0x43e9e3=new Date(_0x1845b6);_0x43e9e3[_0x3bfaa5(0x299)](_0x43e9e3[_0x3bfaa5(0x216)]()+_0x43598a);const _0x5bd9f3=getLocalDateStr(_0x43e9e3);let _0x3b0aa9=_0x43e9e3['getDay']()-0x1;if(_0x3b0aa9===-0x1)_0x3b0aa9=0x6;const _0x19432c=_0x5bd9f3===_0x39ba87,_0x51e084=document['createElement'](_0x3bfaa5(0x280));_0x51e084[_0x3bfaa5(0x26e)]=_0x3bfaa5(0x274)+(_0x19432c?_0x3bfaa5(0x272):''),_0x51e084[_0x3bfaa5(0x295)](_0x3bfaa5(0x242),_0x5bd9f3),_0x51e084[_0x3bfaa5(0x1ca)]='<div\x20class=\x22dch-day\x22>'+_0x27d759[_0x3b0aa9]+_0x3bfaa5(0x1e6)+_0x43e9e3['getDate']()+_0x3bfaa5(0x1d4),_0x249ee7[_0x3bfaa5(0x24b)](_0x51e084);const _0x7f690=document[_0x3bfaa5(0x24e)]('div');_0x7f690[_0x3bfaa5(0x26e)]=_0x3bfaa5(0x24f)+(_0x19432c?_0x3bfaa5(0x272):''),_0x7f690[_0x3bfaa5(0x295)]('data-date',_0x5bd9f3),_0x7f690[_0x3bfaa5(0x295)](_0x3bfaa5(0x1a9),_0x3b0aa9),_0x5875b1[_0x3bfaa5(0x24b)](_0x7f690);}}function reRenderBlocks(){const _0x3e761d=a3_0x1df310;document[_0x3e761d(0x259)](_0x3e761d(0x25c))[_0x3e761d(0x230)](_0x294bc5=>{const _0x566204=_0x3e761d;_0x294bc5[_0x566204(0x259)](_0x566204(0x220))[_0x566204(0x230)](_0x3ce0dd=>_0x3ce0dd[_0x566204(0x1eb)]());const _0x42d1e6=_0x294bc5[_0x566204(0x1f4)]('data-date'),_0x343474=parseInt(_0x294bc5[_0x566204(0x1f4)](_0x566204(0x1a9))),_0x5b64f3=Math[_0x566204(0x203)](_0x294bc5['offsetLeft']);(availabilityPattern[_0x343474]||[])[_0x566204(0x230)](_0x362f0e=>{const _0x175ab9=_0x566204,_0x381dc5=document['createElement'](_0x175ab9(0x280));_0x381dc5[_0x175ab9(0x26e)]=_0x175ab9(0x1c6),_0x381dc5['style'][_0x175ab9(0x20b)]=_0x362f0e*GRID_H+'px',_0x381dc5[_0x175ab9(0x1d8)]['backgroundPosition']='-'+_0x5b64f3+_0x175ab9(0x23c)+_0x362f0e*GRID_H+'px',_0x294bc5[_0x175ab9(0x24b)](_0x381dc5);});if(specialRanges[_0x566204(0x1f1)]>0x0){const _0x504080=new Date(_0x42d1e6+_0x566204(0x201))[_0x566204(0x270)](),_0x370998=new Date(_0x42d1e6+_0x566204(0x21f))[_0x566204(0x270)]();specialRanges['forEach'](_0x1f761d=>{const _0x4a72b3=_0x566204,_0x2e1bc4=new Date(_0x1f761d['start'])[_0x4a72b3(0x270)](),_0x352b70=new Date(_0x1f761d[_0x4a72b3(0x1b4)])[_0x4a72b3(0x270)](),_0x5c73e7=Math[_0x4a72b3(0x24a)](_0x504080,_0x2e1bc4),_0x8be7f0=Math[_0x4a72b3(0x27a)](_0x370998,_0x352b70);if(_0x5c73e7<_0x8be7f0){const _0x1e7bb7=(_0x5c73e7-_0x504080)/0x36ee80*GRID_H,_0x3ec4a5=(_0x8be7f0-_0x5c73e7)/0x36ee80*GRID_H,_0x420486=document[_0x4a72b3(0x24e)](_0x4a72b3(0x280));_0x3ec4a5>=23.5*GRID_H?(_0x420486['className']=_0x4a72b3(0x1af),_0x420486[_0x4a72b3(0x1d8)]['backgroundPosition']='-'+_0x5b64f3+_0x4a72b3(0x1a3)):(_0x420486['className']=_0x4a72b3(0x262),_0x420486[_0x4a72b3(0x1d8)][_0x4a72b3(0x20b)]=_0x1e7bb7+'px',_0x420486['style'][_0x4a72b3(0x1cb)]=_0x3ec4a5+'px',_0x420486[_0x4a72b3(0x1d8)][_0x4a72b3(0x1b1)]='-'+_0x5b64f3+_0x4a72b3(0x23c)+_0x1e7bb7+'px'),_0x294bc5['appendChild'](_0x420486);}});}renderEventsForColumn(_0x294bc5,_0x42d1e6);});}function renderEventsForColumn(_0x1642ac,_0x3c83fa){const _0x4011ef=a3_0x1df310,_0x3afc62=sessions[_0x4011ef(0x277)](_0x30e670=>_0x30e670[_0x4011ef(0x1b9)]===_0x3c83fa),_0x3509a7=_0x3afc62[_0x4011ef(0x1b8)](_0x30b7f7=>{const _0x4d7070=_0x4011ef,[_0x51dc41,_0x490bbc]=_0x30b7f7['start']['split'](':')[_0x4d7070(0x1b8)](Number),[_0x517eb8,_0x1f3a59]=_0x30b7f7['end'][_0x4d7070(0x25b)](':')[_0x4d7070(0x1b8)](Number);return{'data':_0x30b7f7,'start':_0x51dc41*0x3c+_0x490bbc,'end':_0x517eb8*0x3c+_0x1f3a59,'colIndex':0x0};});_0x3509a7[_0x4011ef(0x245)]((_0x1f3d23,_0x3b8417)=>_0x1f3d23[_0x4011ef(0x1d7)]-_0x3b8417[_0x4011ef(0x1d7)]||_0x3b8417[_0x4011ef(0x1b4)]-_0x3b8417[_0x4011ef(0x1d7)]-(_0x1f3d23['end']-_0x1f3d23[_0x4011ef(0x1d7)]));const _0x2b293b=[];_0x3509a7['forEach'](_0x2c281a=>{const _0x5e614=_0x4011ef;let _0x3bb43c=![];for(let _0x2d2c12=0x0;_0x2d2c12<_0x2b293b[_0x5e614(0x1f1)];_0x2d2c12++){const _0x8d73e3=_0x2b293b[_0x2d2c12];if(_0x2c281a[_0x5e614(0x1d7)]>=_0x8d73e3[_0x8d73e3[_0x5e614(0x1f1)]-0x1][_0x5e614(0x1b4)]){_0x8d73e3[_0x5e614(0x1a5)](_0x2c281a),_0x2c281a[_0x5e614(0x1e8)]=_0x2d2c12,_0x3bb43c=!![];break;}}!_0x3bb43c&&(_0x2b293b[_0x5e614(0x1a5)]([_0x2c281a]),_0x2c281a['colIndex']=_0x2b293b['length']-0x1);}),_0x3509a7[_0x4011ef(0x230)](_0x2fc940=>{const _0x3e926b=_0x4011ef;let _0x4d2af3=0x0;_0x3509a7[_0x3e926b(0x230)](_0x452c26=>{const _0x2ab1a7=_0x3e926b;if(Math[_0x2ab1a7(0x24a)](_0x2fc940['start'],_0x452c26[_0x2ab1a7(0x1d7)])<Math[_0x2ab1a7(0x27a)](_0x2fc940[_0x2ab1a7(0x1b4)],_0x452c26[_0x2ab1a7(0x1b4)])&&_0x452c26[_0x2ab1a7(0x1e8)]>_0x4d2af3)_0x4d2af3=_0x452c26[_0x2ab1a7(0x1e8)];});const _0x354ed5=_0x4d2af3+0x1,_0x19184b=0x64/_0x354ed5,_0x17912f=_0x2fc940[_0x3e926b(0x1e8)]*_0x19184b,_0xe5987e=document[_0x3e926b(0x24e)](_0x3e926b(0x280)),_0x3a93fa=_0x2fc940[_0x3e926b(0x1fa)];let _0x3d8b36=_0x3e926b(0x1be);if(clients&&clients[_0x3e926b(0x1f1)]>0x0){const _0x49cb9e=clients['find'](_0x29cb64=>String(_0x29cb64['id'])===String(_0x3a93fa[_0x3e926b(0x1b7)]));if(_0x49cb9e&&_0x49cb9e[_0x3e926b(0x199)])_0x3d8b36=_0x49cb9e[_0x3e926b(0x199)];}const _0x5493f3=_0x3a93fa['status']===_0x3e926b(0x1a7),_0x21b219=_0x5493f3?0x1:0.45;_0xe5987e[_0x3e926b(0x26e)]=_0x3e926b(0x27c)+(_0x5493f3?_0x3e926b(0x1a2):''),_0xe5987e[_0x3e926b(0x1d8)][_0x3e926b(0x19d)]=hexToRgba(_0x3d8b36,_0x21b219),_0xe5987e['style'][_0x3e926b(0x236)]=_0x3d8b36;const _0x2d92a7=_0x2fc940['start']/0x3c*GRID_H,_0x1ab162=(_0x2fc940[_0x3e926b(0x1b4)]-_0x2fc940[_0x3e926b(0x1d7)])/0x3c*GRID_H;_0xe5987e[_0x3e926b(0x1d8)]['top']=_0x2d92a7+'px',_0xe5987e[_0x3e926b(0x1d8)][_0x3e926b(0x1cb)]=Math[_0x3e926b(0x24a)](_0x1ab162,0x14)+'px',_0xe5987e[_0x3e926b(0x1d8)][_0x3e926b(0x233)]='calc('+_0x19184b+_0x3e926b(0x1e1),_0xe5987e['style']['left']=_0x3e926b(0x237)+_0x17912f+_0x3e926b(0x298),_0xe5987e['style'][_0x3e926b(0x261)]=0xa+_0x2fc940['colIndex'];if(_0x19184b<0x55)_0xe5987e[_0x3e926b(0x1d3)]['add'](_0x3e926b(0x244));let _0x539e10='';if(_0x3a93fa['seriesId'])_0x539e10+=_0x3e926b(0x231);if(_0x5493f3)_0x539e10+=_0x3e926b(0x229);_0xe5987e[_0x3e926b(0x1ca)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x3a93fa[_0x3e926b(0x1d7)]+'\x20-\x20'+_0x3a93fa['end']+_0x3e926b(0x1e3)+_0x539e10+_0x3e926b(0x1dc),_0xe5987e['onclick']=_0x2b5868=>{const _0x4a8706=_0x3e926b;_0x2b5868[_0x4a8706(0x1a8)](),openDetails(_0x3a93fa);},_0x1642ac[_0x3e926b(0x24b)](_0xe5987e);});}function openAnalytics(){const _0x4fe481=a3_0x1df310,_0x3b55ca=document[_0x4fe481(0x26d)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x4fe481(0x288),_0x3b55ca),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x162b80,_0x4b06f1){const _0x3e1acf=a3_0x1df310;currentAnPeriod=_0x162b80,document['querySelectorAll'](_0x3e1acf(0x1ed))[_0x3e1acf(0x230)](_0xa8b8fc=>_0xa8b8fc[_0x3e1acf(0x1d3)]['remove'](_0x3e1acf(0x202)));if(_0x4b06f1)_0x4b06f1[_0x3e1acf(0x1d3)][_0x3e1acf(0x1ce)](_0x3e1acf(0x202));const _0x117b22=document[_0x3e1acf(0x234)](_0x3e1acf(0x28a));_0x117b22[_0x3e1acf(0x1d8)]['display']=_0x162b80==='custom'?_0x3e1acf(0x205):'none';const _0x4b6206=new Date();let _0x2834c5=new Date(),_0x31114f=new Date();if(_0x162b80===_0x3e1acf(0x288))_0x2834c5=getStartOfWeek(_0x4b6206),_0x31114f=new Date(_0x2834c5),_0x31114f['setDate'](_0x31114f['getDate']()+0x6);else{if(_0x162b80===_0x3e1acf(0x27b))_0x2834c5=new Date(_0x4b6206[_0x3e1acf(0x1cf)](),_0x4b6206['getMonth'](),0x1),_0x31114f=new Date(_0x4b6206[_0x3e1acf(0x1cf)](),_0x4b6206[_0x3e1acf(0x25a)]()+0x1,0x0);else{!document[_0x3e1acf(0x234)]('anStart')[_0x3e1acf(0x247)]&&(document['getElementById'](_0x3e1acf(0x1c4))[_0x3e1acf(0x247)]=getLocalDateStr(_0x4b6206),document[_0x3e1acf(0x234)]('anEnd')[_0x3e1acf(0x247)]=getLocalDateStr(_0x4b6206));refreshAnalytics();return;}}document[_0x3e1acf(0x234)]('anStart')['value']=getLocalDateStr(_0x2834c5),document[_0x3e1acf(0x234)](_0x3e1acf(0x1bb))['value']=getLocalDateStr(_0x31114f),refreshAnalytics();}function refreshAnalytics(){const _0x1a5b29=a3_0x1df310,_0x6aa88a=document[_0x1a5b29(0x234)]('anStart')[_0x1a5b29(0x247)],_0x3e237d=document['getElementById'](_0x1a5b29(0x1bb))[_0x1a5b29(0x247)];if(!_0x6aa88a||!_0x3e237d)return;const _0x171f2c=sessions[_0x1a5b29(0x277)](_0x48c9e1=>_0x48c9e1['dateStr']>=_0x6aa88a&&_0x48c9e1[_0x1a5b29(0x1b9)]<=_0x3e237d&&_0x48c9e1['status']!=='cancelled'),_0x4c6948=_0x171f2c[_0x1a5b29(0x1f1)],_0x16ceda=_0x171f2c[_0x1a5b29(0x277)](_0xbfc3a0=>_0xbfc3a0[_0x1a5b29(0x23f)]===_0x1a5b29(0x1a7))[_0x1a5b29(0x1f1)],_0x258823=_0x4c6948>0x0?Math[_0x1a5b29(0x203)](_0x16ceda/_0x4c6948*0x64):0x0;document[_0x1a5b29(0x234)](_0x1a5b29(0x19f))[_0x1a5b29(0x253)]=_0x258823+'%',document[_0x1a5b29(0x234)]('anTotalStats')[_0x1a5b29(0x253)]=_0x16ceda+_0x1a5b29(0x23d)+_0x4c6948+_0x1a5b29(0x222);const _0x20b7cd=document['getElementById']('anDonutCircle'),_0x189090=0x2*Math['PI']*0x23,_0x10639c=_0x189090-_0x258823/0x64*_0x189090;_0x20b7cd[_0x1a5b29(0x1d8)][_0x1a5b29(0x267)]=_0x10639c;const _0x585121={};_0x171f2c[_0x1a5b29(0x230)](_0x36bb23=>{const _0x5096c5=_0x1a5b29,_0x5dcf94=_0x36bb23[_0x5096c5(0x265)]||_0x5096c5(0x1c7);if(!_0x585121[_0x5dcf94]){const _0x51b2ad='#'+_0x5dcf94[_0x5096c5(0x1d2)]()[_0x5096c5(0x1ef)](0x0,0x6);_0x585121[_0x5dcf94]={'total':0x0,'done':0x0,'color':_0x51b2ad};}_0x585121[_0x5dcf94]['total']++;if(_0x36bb23['status']===_0x5096c5(0x1a7))_0x585121[_0x5dcf94][_0x5096c5(0x1fc)]++;});const _0x3ded1e=document[_0x1a5b29(0x234)]('analyticsList');_0x3ded1e[_0x1a5b29(0x1ca)]='';const _0x42a5a6=Object[_0x1a5b29(0x1d5)](_0x585121)['sort']((_0x54e26f,_0x131fbe)=>_0x131fbe[0x1]['total']-_0x54e26f[0x1][_0x1a5b29(0x249)]);if(_0x42a5a6[_0x1a5b29(0x1f1)]===0x0){_0x3ded1e[_0x1a5b29(0x1ca)]=_0x1a5b29(0x20c);return;}_0x42a5a6[_0x1a5b29(0x230)](([_0x5bea76,_0x1b2519])=>{const _0x42e986=_0x1a5b29,_0x49c96d=Math[_0x42e986(0x203)](_0x1b2519[_0x42e986(0x1fc)]/_0x1b2519[_0x42e986(0x249)]*0x64),_0x1a66c1=document[_0x42e986(0x24e)]('div');_0x1a66c1[_0x42e986(0x26e)]='client-stat-card',_0x1a66c1['style'][_0x42e986(0x236)]=_0x1b2519[_0x42e986(0x199)],_0x1a66c1[_0x42e986(0x1ca)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x5bea76['substr'](0x0,0x5)+_0x42e986(0x296)+_0x1b2519[_0x42e986(0x1fc)]+_0x42e986(0x1f9)+_0x1b2519[_0x42e986(0x249)]+_0x42e986(0x221)+_0x49c96d+_0x42e986(0x241),_0x3ded1e[_0x42e986(0x24b)](_0x1a66c1);});}function openDetails(_0x55e0d6){const _0x4655f8=a3_0x1df310;currentSession=_0x55e0d6;const _0x9dde8=new Date(_0x55e0d6[_0x4655f8(0x1b9)]),_0x2d8779=_0x9dde8[_0x4655f8(0x215)](_0x4655f8(0x254),{'weekday':_0x4655f8(0x268),'day':'numeric','month':_0x4655f8(0x268)});document[_0x4655f8(0x234)](_0x4655f8(0x1f8))[_0x4655f8(0x253)]=_0x2d8779['charAt'](0x0)[_0x4655f8(0x223)]()+_0x2d8779[_0x4655f8(0x28e)](0x1),document[_0x4655f8(0x234)](_0x4655f8(0x21b))[_0x4655f8(0x253)]=_0x55e0d6[_0x4655f8(0x1d7)]+_0x4655f8(0x269)+_0x55e0d6[_0x4655f8(0x1b4)],document[_0x4655f8(0x234)](_0x4655f8(0x1fb))['textContent']=_0x55e0d6['note']||_0x4655f8(0x25f);const _0x5976d9=document[_0x4655f8(0x234)](_0x4655f8(0x1bf)),_0x3a865b=document['getElementById'](_0x4655f8(0x212)),_0x16ebf5=_0x3a865b[_0x4655f8(0x26d)](_0x4655f8(0x260)),_0x3c3963=_0x3a865b[_0x4655f8(0x26d)](_0x4655f8(0x204)),_0x587f53=document[_0x4655f8(0x234)](_0x4655f8(0x279));if(_0x55e0d6['status']===_0x4655f8(0x1a7))_0x5976d9[_0x4655f8(0x253)]=_0x4655f8(0x1d9),_0x5976d9[_0x4655f8(0x1d8)][_0x4655f8(0x199)]=_0x4655f8(0x243),_0x3a865b[_0x4655f8(0x1d8)][_0x4655f8(0x22c)]=_0x4655f8(0x239);else{_0x5976d9[_0x4655f8(0x253)]=_0x4655f8(0x1b3),_0x5976d9['style'][_0x4655f8(0x199)]=_0x4655f8(0x1f3),_0x3a865b['style'][_0x4655f8(0x22c)]=_0x4655f8(0x23a);const _0x3be409=new Date(_0x55e0d6[_0x4655f8(0x1b9)]+'T'+_0x55e0d6[_0x4655f8(0x1d7)]),_0x44ea96=new Date(),_0x1ab1b9=(_0x3be409-_0x44ea96)/(0x3e8*0x3c*0x3c),_0x3484cb=coachProfiles[_0x55e0d6[_0x4655f8(0x265)]]&&coachProfiles[_0x55e0d6[_0x4655f8(0x265)]][_0x4655f8(0x284)]?parseInt(coachProfiles[_0x55e0d6[_0x4655f8(0x265)]][_0x4655f8(0x284)]):0x18;if(_0x3484cb===0x0||_0x1ab1b9>=_0x3484cb)_0x16ebf5[_0x4655f8(0x1d8)][_0x4655f8(0x22c)]=_0x4655f8(0x23a),_0x3c3963[_0x4655f8(0x1d8)][_0x4655f8(0x22c)]=_0x4655f8(0x23a),_0x587f53[_0x4655f8(0x1d8)]['display']=_0x4655f8(0x239);else{_0x16ebf5[_0x4655f8(0x1d8)][_0x4655f8(0x22c)]='none',_0x3c3963[_0x4655f8(0x1d8)][_0x4655f8(0x22c)]='none',_0x587f53['style'][_0x4655f8(0x22c)]=_0x4655f8(0x23a);let _0x1a050c=_0x3484cb===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x4655f8(0x1ae)+_0x3484cb+_0x4655f8(0x263);_0x587f53[_0x4655f8(0x253)]='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x1a050c+_0x4655f8(0x1e9);}}document[_0x4655f8(0x234)](_0x4655f8(0x19a))[_0x4655f8(0x1d3)]['add'](_0x4655f8(0x202)),document[_0x4655f8(0x234)](_0x4655f8(0x257))['classList']['add'](_0x4655f8(0x1a1));}function closeAllSheets(){const _0x233ff2=a3_0x1df310;document[_0x233ff2(0x234)](_0x233ff2(0x19a))[_0x233ff2(0x1d3)][_0x233ff2(0x1eb)](_0x233ff2(0x202)),document['querySelectorAll'](_0x233ff2(0x25d))['forEach'](_0x55f2d9=>_0x55f2d9[_0x233ff2(0x1d3)][_0x233ff2(0x1eb)](_0x233ff2(0x1a1)));}function openSheet(_0x286551){const _0x189e84=a3_0x1df310;document[_0x189e84(0x234)](_0x189e84(0x19a))[_0x189e84(0x1d3)]['add']('active'),document[_0x189e84(0x234)](_0x286551)[_0x189e84(0x1d3)][_0x189e84(0x1ce)](_0x189e84(0x1a1));}function getLocalDateStr(_0x49a6a8){const _0x39bc63=a3_0x1df310,_0x323ca8=_0x49a6a8[_0x39bc63(0x1cf)](),_0x3733f6=String(_0x49a6a8[_0x39bc63(0x25a)]()+0x1)[_0x39bc63(0x224)](0x2,'0'),_0x294313=String(_0x49a6a8[_0x39bc63(0x216)]())[_0x39bc63(0x224)](0x2,'0');return _0x323ca8+'-'+_0x3733f6+'-'+_0x294313;}function getStartOfWeek(_0x19288d){const _0x450c16=a3_0x1df310,_0x2d4769=new Date(_0x19288d),_0x4bcc48=_0x2d4769['getDay'](),_0x4512a8=_0x2d4769[_0x450c16(0x216)]()-_0x4bcc48+(_0x4bcc48===0x0?-0x6:0x1);return _0x2d4769['setDate'](_0x4512a8),_0x2d4769[_0x450c16(0x1ee)](0x0,0x0,0x0,0x0),_0x2d4769;}function scrollToToday(){const _0x47572b=getLocalDateStr(new Date());setTimeout(()=>{const _0x497d98=a3_0x3ed4,_0x2b29b2=document[_0x497d98(0x26d)](_0x497d98(0x197)+_0x47572b+'\x22]');if(_0x2b29b2){const _0x4ad72c=document[_0x497d98(0x234)]('matrixViewport'),_0x199933=_0x2b29b2['offsetLeft']-_0x4ad72c['clientWidth']/0x2+_0x2b29b2['offsetWidth']/0x2;_0x4ad72c[_0x497d98(0x290)]({'left':_0x199933,'behavior':_0x497d98(0x25e)}),_0x4ad72c[_0x497d98(0x283)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x28df5f=a3_0x1df310,_0x5d6846=new Date(),_0x5e72c2=document[_0x28df5f(0x234)](_0x28df5f(0x275)),_0x30fc72=document[_0x28df5f(0x234)](_0x28df5f(0x248)),_0x3d511d=(_0x5d6846[_0x28df5f(0x1ad)]()*0x3c+_0x5d6846['getMinutes']())/0x3c*GRID_H;_0x5e72c2['style'][_0x28df5f(0x20b)]=_0x3d511d+'px',_0x5e72c2[_0x28df5f(0x1d8)][_0x28df5f(0x22c)]='block',_0x30fc72[_0x28df5f(0x1d8)][_0x28df5f(0x20b)]=_0x3d511d+'px',_0x30fc72[_0x28df5f(0x1d8)][_0x28df5f(0x22c)]=_0x28df5f(0x23a),_0x30fc72[_0x28df5f(0x253)]=String(_0x5d6846[_0x28df5f(0x1ad)]())[_0x28df5f(0x224)](0x2,'0')+':'+String(_0x5d6846[_0x28df5f(0x293)]())[_0x28df5f(0x224)](0x2,'0');}function onScroll(){const _0x16dd29=a3_0x1df310,_0x55f6fc=document['getElementById'](_0x16dd29(0x1c1)),_0x51192a=document[_0x16dd29(0x259)](_0x16dd29(0x276));for(let _0xd83922 of _0x51192a)if(_0xd83922[_0x16dd29(0x20e)]>=_0x55f6fc['scrollLeft']){const _0x3849d2=new Date(_0xd83922[_0x16dd29(0x1f4)](_0x16dd29(0x242)));document[_0x16dd29(0x234)](_0x16dd29(0x232))['textContent']=_0x3849d2['toLocaleString']('ru',{'month':_0x16dd29(0x268)})[_0x16dd29(0x223)]()+'\x20'+_0x3849d2['getFullYear']();break;}}function showToast(_0x384f84){const _0x5a896c=a3_0x1df310,_0x49c08c=document[_0x5a896c(0x234)]('toast');_0x49c08c['textContent']=_0x384f84,_0x49c08c[_0x5a896c(0x1d3)][_0x5a896c(0x1ce)]('show'),setTimeout(()=>_0x49c08c[_0x5a896c(0x1d3)][_0x5a896c(0x1eb)](_0x5a896c(0x1c5)),0x7d0);}function handleInfiniteScroll(){const _0x14cd4b=a3_0x1df310,_0x2f728b=document['getElementById']('matrixViewport'),_0x290147=_0x2f728b[_0x14cd4b(0x1d6)],_0x10a833=_0x2f728b[_0x14cd4b(0x1ea)],_0x340ef9=_0x2f728b[_0x14cd4b(0x235)];if(_0x10a833-(_0x290147+_0x340ef9)<0x12c){const _0x4eabc3=endOffset;endOffset+=0xe,renderDayRange(_0x4eabc3+0x1,endOffset),reRenderBlocks();}if(_0x290147<0x12c){const _0x2ff580=startOffset;startOffset-=0xe,prependDays(startOffset,_0x2ff580-0x1),_0x2f728b[_0x14cd4b(0x1d6)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x57a2d2,_0x27c4c1){const _0x4b9852=a3_0x1df310,_0x27063f=document['getElementById'](_0x4b9852(0x1a0)),_0x56a5c4=document[_0x4b9852(0x234)](_0x4b9852(0x250)),_0x5d89b6=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x367dfd=new Date();_0x367dfd[_0x4b9852(0x1ee)](0x0,0x0,0x0,0x0);const _0x43ddde=getLocalDateStr(new Date()),_0x40e664=document[_0x4b9852(0x26f)](),_0xe1be3c=document[_0x4b9852(0x26f)]();for(let _0xa12826=_0x57a2d2;_0xa12826<=_0x27c4c1;_0xa12826++){const _0x1ba360=new Date(_0x367dfd);_0x1ba360[_0x4b9852(0x299)](_0x1ba360['getDate']()+_0xa12826);const _0x1680d1=getLocalDateStr(_0x1ba360);let _0x91a115=_0x1ba360['getDay']()-0x1;if(_0x91a115===-0x1)_0x91a115=0x6;const _0x3185a4=_0x1680d1===_0x43ddde,_0x5410f0=document['createElement'](_0x4b9852(0x280));_0x5410f0[_0x4b9852(0x26e)]=_0x4b9852(0x274)+(_0x3185a4?'today':''),_0x5410f0[_0x4b9852(0x295)](_0x4b9852(0x242),_0x1680d1),_0x5410f0[_0x4b9852(0x1ca)]=_0x4b9852(0x210)+_0x5d89b6[_0x91a115]+_0x4b9852(0x1e6)+_0x1ba360[_0x4b9852(0x216)]()+_0x4b9852(0x1d4),_0x40e664[_0x4b9852(0x24b)](_0x5410f0);const _0x2e7671=document[_0x4b9852(0x24e)]('div');_0x2e7671[_0x4b9852(0x26e)]=_0x4b9852(0x24f)+(_0x3185a4?_0x4b9852(0x272):''),_0x2e7671[_0x4b9852(0x295)](_0x4b9852(0x242),_0x1680d1),_0x2e7671[_0x4b9852(0x295)](_0x4b9852(0x1a9),_0x91a115),_0xe1be3c[_0x4b9852(0x24b)](_0x2e7671);}_0x27063f[_0x4b9852(0x1ab)](_0x40e664,_0x27063f[_0x4b9852(0x1e7)]),_0x56a5c4[_0x4b9852(0x1ab)](_0xe1be3c,_0x56a5c4[_0x4b9852(0x26d)]('.day-column'));}function hexToRgba(_0x4355e3,_0x507388){const _0x4d738f=a3_0x1df310;let _0xb588be;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x4355e3))return _0xb588be=_0x4355e3[_0x4d738f(0x1f6)](0x1)['split'](''),_0xb588be[_0x4d738f(0x1f1)]==0x3&&(_0xb588be=[_0xb588be[0x0],_0xb588be[0x0],_0xb588be[0x1],_0xb588be[0x1],_0xb588be[0x2],_0xb588be[0x2]]),_0xb588be='0x'+_0xb588be[_0x4d738f(0x273)](''),_0x4d738f(0x1aa)+[_0xb588be>>0x10&0xff,_0xb588be>>0x8&0xff,_0xb588be&0xff][_0x4d738f(0x273)](',')+','+_0x507388+')';return'rgba(10,\x20132,\x20255,\x20'+_0x507388+')';}let confirmResolver=null;function showCustomConfirm(_0x187785,_0x10ad6a,_0x572d06=!![]){const _0x38d17a=a3_0x1df310;document[_0x38d17a(0x234)](_0x38d17a(0x24d))['textContent']=_0x187785,document[_0x38d17a(0x234)](_0x38d17a(0x206))[_0x38d17a(0x253)]=_0x10ad6a;const _0x3c90aa=document[_0x38d17a(0x234)](_0x38d17a(0x214));return _0x572d06?(_0x3c90aa[_0x38d17a(0x1d8)][_0x38d17a(0x199)]=_0x38d17a(0x27e),_0x3c90aa[_0x38d17a(0x1d8)][_0x38d17a(0x207)]=_0x38d17a(0x21a)):(_0x3c90aa[_0x38d17a(0x1d8)][_0x38d17a(0x199)]='#0a84ff',_0x3c90aa[_0x38d17a(0x1d8)][_0x38d17a(0x207)]=_0x38d17a(0x21a)),new Promise(_0x443168=>{const _0x263f7d=_0x38d17a;confirmResolver=_0x443168,document[_0x263f7d(0x234)](_0x263f7d(0x266))[_0x263f7d(0x1d3)][_0x263f7d(0x1ce)](_0x263f7d(0x225));});}function resolveCustomConfirm(_0x2ef819){const _0x24b85f=a3_0x1df310;document[_0x24b85f(0x234)](_0x24b85f(0x266))[_0x24b85f(0x1d3)][_0x24b85f(0x1eb)](_0x24b85f(0x225));if(confirmResolver)confirmResolver(_0x2ef819);}async function tryCancelCurrentSession(){const _0x554183=a3_0x1df310;if(!currentSession)return;const _0x2eedf7=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?',!![]);if(!_0x2eedf7)return;const _0x2148f3=currentSession;closeAllSheets(),sessions=sessions[_0x554183(0x277)](_0x67f91a=>_0x67f91a['id']!==_0x2148f3['id']),reRenderBlocks(),showToast(_0x554183(0x1da)),lastUserActionTime=Date['now']();try{const _0x3d4287=window[_0x554183(0x1bc)]?.['WebApp'],_0x59aed9=await fetch(API_URL,{'method':_0x554183(0x27d),'body':JSON[_0x554183(0x1b5)]({'action':_0x554183(0x271),'init_data':_0x3d4287?.['initData']||'','coachId':_0x2148f3[_0x554183(0x265)],'dateStr':_0x2148f3[_0x554183(0x1b9)],'sessionId':_0x2148f3['id']})});if(_0x59aed9['ok'])DataManager[_0x554183(0x1c8)]();}catch(_0x16e623){showToast(_0x554183(0x1c0));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x4b2a9b=a3_0x1df310;if(!currentSession)return;document[_0x4b2a9b(0x234)](_0x4b2a9b(0x257))[_0x4b2a9b(0x1d3)][_0x4b2a9b(0x1eb)](_0x4b2a9b(0x1a1)),document[_0x4b2a9b(0x234)](_0x4b2a9b(0x226))[_0x4b2a9b(0x1d3)][_0x4b2a9b(0x1ce)]('open');const _0x3c1698=document[_0x4b2a9b(0x234)](_0x4b2a9b(0x26b)),_0x1aca8a=document[_0x4b2a9b(0x234)](_0x4b2a9b(0x282));_0x3c1698['innerHTML']='',_0x1aca8a[_0x4b2a9b(0x1ca)]=_0x4b2a9b(0x278);const [_0x35785b,_0x457486]=currentSession[_0x4b2a9b(0x1d7)][_0x4b2a9b(0x25b)](':')[_0x4b2a9b(0x1b8)](Number),[_0x9447d3,_0x3ad637]=currentSession[_0x4b2a9b(0x1b4)]['split'](':')[_0x4b2a9b(0x1b8)](Number),_0x1673d2=_0x9447d3*0x3c+_0x3ad637-(_0x35785b*0x3c+_0x457486);try{const _0xfe89c8=window[_0x4b2a9b(0x1bc)]?.[_0x4b2a9b(0x1f7)],_0x379cf8=await fetch(API_URL,{'method':_0x4b2a9b(0x27d),'body':JSON[_0x4b2a9b(0x1b5)]({'action':_0x4b2a9b(0x285),'coachId':currentSession[_0x4b2a9b(0x265)],'duration':_0x1673d2,'init_data':_0xfe89c8?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x59a641=await _0x379cf8[_0x4b2a9b(0x1bd)]();_0x59a641['ok']&&_0x59a641[_0x4b2a9b(0x1fa)]?(availableSlotsCache=_0x59a641[_0x4b2a9b(0x1fa)],renderRescheduleDates()):_0x1aca8a[_0x4b2a9b(0x1ca)]=_0x4b2a9b(0x23b);}catch(_0xa573e2){_0x1aca8a['innerHTML']=_0x4b2a9b(0x208);}}function a3_0xe45d(){const _0x228f85=['length','disableVerticalSwipes','var(--acc-blue)','getAttribute','floor','substring','WebApp','detDate','</span>\x20/\x20','data','detNote','done','rs-time-btn','addEventListener','href','ready','T00:00:00','active','round','.btn-reschedule','flex','ccText','fontWeight','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','sid','uc_client_list','top','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','now','offsetLeft','uc_client_sessions','<div\x20class=\x22dch-day\x22>','user','cancelContainer','#050505','ccYesBtn','toLocaleDateString','getDate','constructor','setItem','pattern','600','detTime','BackButton','85cuGoUV','apply','T23:59:59','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','toUpperCase','padStart','visible','rescheduleSheet','initData','exceptions','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','coach_profiles','setHeaderColor','display','<div\x20class=\x22rs-day-name\x22>','button','.rs-date-chip','forEach','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','headerMonth','width','getElementById','clientWidth','borderLeftColor','calc(','\x20–≤\x20','none','block','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','px\x20-','\x20–∏–∑\x20','ranges','status','onclick','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','data-date','var(--acc-green)','mini','sort','offClick','value','timeLineBadge','total','max','appendChild','search','ccTitle','createElement','day-column\x20','gridColumns','keys','Critical\x20TMA\x20Error:','textContent','ru-RU','38HyRHaK','1025322IjLHsD','detailsSheet','638PxCNtw','querySelectorAll','getMonth','split','.day-column','.sheet','auto','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','.btn-cancel','zIndex','blocked-range-part\x20stripe-bg','\x20—á.','setBackgroundColor','coachId','customConfirm','strokeDashoffset','long','\x20-\x20','calendar','rsDatesTrack','743346BbKbnq','querySelector','className','createDocumentFragment','getTime','client_cancel','today','join','day-col-header\x20','globalTimeLine','.day-col-header','filter','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','cancelHint','min','month','event-card','POST','#ff453a','expand','div','all','rsSlotsGrid','scrollTop','cancel_window','get_slots','router.html','8663WspEBW','week','planned','anCustomDates','DOMContentLoaded','findIndex','settings','slice','cid','scrollTo','675048twjaZN','applyData','getMinutes','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','setAttribute','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','loadLocal','%\x20+\x202px)','setDate','.day-col-header[data-date=\x22','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','color','overlay','startsWith','then','backgroundColor','8lpppHb','anPercent','daysHeaderTrack','open','\x20status-completed','px\x200px','2855454EkhBqv','push','(((.+)+)+)+$','completed','stopPropagation','data-day-idx','rgba(','insertBefore','syncLoad','getHours','–∑–∞\x20','day-off-overlay\x20stripe-bg','log','backgroundPosition','reschedule','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','end','stringify','location','clientId','map','dateStr',':00</span>','anEnd','Telegram','json','#0a84ff','detStatus','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','matrixViewport','uc_client_settings','client_load','anStart','show','blocked-slot\x20stripe-bg','Unknown','saveLocally','parse','innerHTML','height','Error\x20setting\x20back\x20button:','timeColumn','add','getFullYear','rs-date-chip','initDataUnsafe','toString','classList','</div>','entries','scrollLeft','start','style','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','–û—Ç–º–µ–Ω–µ–Ω–æ','3966fyFxTF','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setMonth','clients','v9.5-CLIENT-ANALYTICS','130990dQXdRt','%\x20-\x204px)','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getDay','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','</div><div\x20class=\x22dch-num\x22>','firstChild','colIndex','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','scrollWidth','remove','</div><div\x20class=\x22rs-day-num\x22>','.period-switch\x20.p-btn','setHours','substr','getItem'];a3_0xe45d=function(){return _0x228f85;};return a3_0xe45d();}function renderRescheduleDates(){const _0x57015c=a3_0x1df310,_0x133a37=document[_0x57015c(0x234)]('rsDatesTrack');_0x133a37['innerHTML']='';const _0x178b6b=Object['keys'](availableSlotsCache)[_0x57015c(0x245)](),_0xc4c39b=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x178b6b[_0x57015c(0x1f1)]===0x0){document[_0x57015c(0x234)](_0x57015c(0x282))[_0x57015c(0x1ca)]=_0x57015c(0x1e2);return;}_0x178b6b[_0x57015c(0x230)]((_0x120105,_0x227039)=>{const _0x36ad5e=_0x57015c,_0x55cd26=new Date(_0x120105),_0x4182fc=_0xc4c39b[_0x55cd26[_0x36ad5e(0x1e4)]()],_0x485fe5=_0x55cd26[_0x36ad5e(0x216)](),_0x148154=document[_0x36ad5e(0x24e)](_0x36ad5e(0x280));_0x148154[_0x36ad5e(0x26e)]=_0x36ad5e(0x1d0);if(_0x227039===0x0)_0x148154[_0x36ad5e(0x1d3)][_0x36ad5e(0x1ce)](_0x36ad5e(0x202));_0x148154[_0x36ad5e(0x1ca)]=_0x36ad5e(0x22d)+_0x4182fc+_0x36ad5e(0x1ec)+_0x485fe5+_0x36ad5e(0x1d4),_0x148154[_0x36ad5e(0x240)]=()=>selectRsDate(_0x120105,_0x148154),_0x133a37[_0x36ad5e(0x24b)](_0x148154);}),selectRsDate(_0x178b6b[0x0],_0x133a37[_0x57015c(0x1e7)]);}function selectRsDate(_0x3e1265,_0x290e2f){const _0x451f07=a3_0x1df310;selectedRsDate=_0x3e1265,document[_0x451f07(0x259)](_0x451f07(0x22f))[_0x451f07(0x230)](_0x4d0298=>_0x4d0298[_0x451f07(0x1d3)][_0x451f07(0x1eb)](_0x451f07(0x202)));if(_0x290e2f)_0x290e2f[_0x451f07(0x1d3)][_0x451f07(0x1ce)](_0x451f07(0x202));const _0x14b262=document[_0x451f07(0x234)]('rsSlotsGrid');_0x14b262[_0x451f07(0x1ca)]='';const _0x5b8840=availableSlotsCache[_0x3e1265]||[];if(_0x5b8840['length']===0x0){_0x14b262['innerHTML']=_0x451f07(0x23b);return;}_0x5b8840[_0x451f07(0x230)](_0x328596=>{const _0x2696a6=_0x451f07,_0x258ab7=document[_0x2696a6(0x24e)](_0x2696a6(0x22e));_0x258ab7['className']=_0x2696a6(0x1fd),_0x258ab7[_0x2696a6(0x253)]=_0x328596,_0x258ab7[_0x2696a6(0x240)]=()=>confirmReschedule(_0x328596),_0x14b262[_0x2696a6(0x24b)](_0x258ab7);});}async function confirmReschedule(_0x1222e9){const _0x58f901=a3_0x1df310,_0xb430ab=new Date(selectedRsDate),_0x2a6c7d=_0xb430ab[_0x58f901(0x215)](_0x58f901(0x254),{'day':'numeric','month':_0x58f901(0x268)}),_0x28fd88=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x2a6c7d+_0x58f901(0x238)+_0x1222e9+'?',![]);if(!_0x28fd88)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x58f901(0x20d)]();const _0xd006c5=currentSession['dateStr'],_0x309b2e=currentSession['id'],[_0xdd842a,_0x58709a]=currentSession[_0x58f901(0x1d7)][_0x58f901(0x25b)](':')[_0x58f901(0x1b8)](Number),[_0x1fee6d,_0x143ec5]=currentSession['end']['split'](':')[_0x58f901(0x1b8)](Number),_0x2268f1=_0x1fee6d*0x3c+_0x143ec5-(_0xdd842a*0x3c+_0x58709a),[_0x4cd276,_0x502cf3]=_0x1222e9[_0x58f901(0x25b)](':')[_0x58f901(0x1b8)](Number),_0x4bb00c=_0x4cd276*0x3c+_0x502cf3+_0x2268f1,_0x44e199=Math[_0x58f901(0x1f5)](_0x4bb00c/0x3c),_0xc7f228=_0x4bb00c%0x3c,_0x251538=String(_0x44e199)['padStart'](0x2,'0')+':'+String(_0xc7f228)['padStart'](0x2,'0'),_0x318a73=sessions[_0x58f901(0x28c)](_0x218015=>_0x218015['id']===_0x309b2e);_0x318a73!==-0x1&&(sessions[_0x318a73]['dateStr']=selectedRsDate,sessions[_0x318a73][_0x58f901(0x1d7)]=_0x1222e9,sessions[_0x318a73][_0x58f901(0x1b4)]=_0x251538,reRenderBlocks());try{const _0x10353d=window['Telegram']?.[_0x58f901(0x1f7)],_0x19f696=await fetch(API_URL,{'method':_0x58f901(0x27d),'body':JSON[_0x58f901(0x1b5)]({'action':_0x58f901(0x1b2),'init_data':_0x10353d?.['initData']||'','oldSessionId':_0x309b2e,'oldDate':_0xd006c5,'newDate':selectedRsDate,'newTime':_0x1222e9,'coachId':currentSession[_0x58f901(0x265)]})}),_0x21362a=await _0x19f696['json']();!_0x21362a['ok']?(showToast(_0x58f901(0x294)),DataManager[_0x58f901(0x1ac)]()):(showToast(_0x58f901(0x1e5)),DataManager['saveLocally']());}catch(_0x2f2b8f){showToast(_0x58f901(0x1c0));}}document[a3_0x1df310(0x1fe)](a3_0x1df310(0x28b),init);