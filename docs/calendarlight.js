const a3_0x5ad53a=a3_0x4a6b;(function(_0x166835,_0xe4ced2){const _0x52fc28=a3_0x4a6b,_0x2a78f6=_0x166835();while(!![]){try{const _0x525e97=-parseInt(_0x52fc28(0x154))/0x1+parseInt(_0x52fc28(0xc8))/0x2*(parseInt(_0x52fc28(0x14e))/0x3)+parseInt(_0x52fc28(0xbb))/0x4+parseInt(_0x52fc28(0x177))/0x5*(-parseInt(_0x52fc28(0xba))/0x6)+-parseInt(_0x52fc28(0x114))/0x7+parseInt(_0x52fc28(0xaa))/0x8*(parseInt(_0x52fc28(0x171))/0x9)+parseInt(_0x52fc28(0x119))/0xa;if(_0x525e97===_0xe4ced2)break;else _0x2a78f6['push'](_0x2a78f6['shift']());}catch(_0xb8083b){_0x2a78f6['push'](_0x2a78f6['shift']());}}}(a3_0x3832,0x4d9d2));const APP_VERSION=a3_0x5ad53a(0x127),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c,KEY_SESSIONS=a3_0x5ad53a(0xd6),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x5ad53a(0x16e);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x5ad53a(0x90),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x211ae5=a3_0x5ad53a,_0x57d14e=(function(){let _0x1e9ef0=!![];return function(_0x35007d,_0x1f7c28){const _0x1fdea5=_0x1e9ef0?function(){const _0x20d9bb=a3_0x4a6b;if(_0x1f7c28){const _0x2ca7db=_0x1f7c28[_0x20d9bb(0x183)](_0x35007d,arguments);return _0x1f7c28=null,_0x2ca7db;}}:function(){};return _0x1e9ef0=![],_0x1fdea5;};}()),_0x1467eb=_0x57d14e(this,function(){const _0x2f93e6=a3_0x4a6b;return _0x1467eb[_0x2f93e6(0xcd)]()[_0x2f93e6(0xe1)](_0x2f93e6(0x15b))['toString']()[_0x2f93e6(0xdd)](_0x1467eb)[_0x2f93e6(0xe1)](_0x2f93e6(0x15b));});_0x1467eb();try{const _0x113aaa=window[_0x211ae5(0xb5)]?.[_0x211ae5(0x16b)];if(!_0x113aaa)return;_0x113aaa[_0x211ae5(0x166)](),_0x113aaa[_0x211ae5(0xc4)]();try{_0x113aaa[_0x211ae5(0x152)](_0x211ae5(0xd4)),_0x113aaa[_0x211ae5(0x94)]&&_0x113aaa[_0x211ae5(0x94)]('#050505');}catch(_0x5a8ce2){console['log'](_0x211ae5(0x172),_0x5a8ce2);}try{_0x113aaa[_0x211ae5(0x11b)]&&(_0x113aaa[_0x211ae5(0x11b)][_0x211ae5(0x167)](),_0x113aaa[_0x211ae5(0x11b)][_0x211ae5(0x146)](),_0x113aaa[_0x211ae5(0x11b)][_0x211ae5(0x145)](function(){const _0xbaa43e=_0x211ae5;window[_0xbaa43e(0xae)][_0xbaa43e(0x165)]=_0xbaa43e(0xf5);}));}catch(_0x2a5b31){console[_0x211ae5(0xbc)]('Error\x20setting\x20back\x20button:',_0x2a5b31);}try{if(_0x113aaa['disableVerticalSwipes'])_0x113aaa['disableVerticalSwipes']();}catch(_0x2c3bb6){}}catch(_0x5401d8){console[_0x211ae5(0xd3)](_0x211ae5(0x140),_0x5401d8);}}());function isAdmin(){const _0x179dba=a3_0x5ad53a;try{const _0x1a14d1=Number(window[_0x179dba(0xb5)]?.[_0x179dba(0x16b)]?.['initDataUnsafe']?.[_0x179dba(0xa0)]?.['id']);return _0x1a14d1===0xbaf7174;}catch(_0x5cc77c){return![];}}const DataManager={'saveLocally'(){const _0x40781b=a3_0x5ad53a;try{localStorage[_0x40781b(0xad)](KEY_SESSIONS,JSON[_0x40781b(0x128)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON[_0x40781b(0x128)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x40781b(0x128)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x596b7b){}},'loadLocal'(){const _0xe4fbb7=a3_0x5ad53a;try{const _0x2474eb=localStorage[_0xe4fbb7(0xc0)](KEY_SESSIONS);if(_0x2474eb)sessions=JSON['parse'](_0x2474eb);const _0x576adf=localStorage[_0xe4fbb7(0xc0)](KEY_CLIENTS);if(_0x576adf)clients=JSON[_0xe4fbb7(0xed)](_0x576adf);const _0x29c6fc=localStorage[_0xe4fbb7(0xc0)](KEY_SETTINGS);if(_0x29c6fc){const _0x59c059=JSON[_0xe4fbb7(0xed)](_0x29c6fc);if(_0x59c059[_0xe4fbb7(0x113)])availabilityPattern=_0x59c059[_0xe4fbb7(0x113)];if(_0x59c059[_0xe4fbb7(0x11c)])specialRanges=_0x59c059[_0xe4fbb7(0x11c)];if(_0x59c059[_0xe4fbb7(0xfd)])dateExceptions=_0x59c059['exceptions'];}}catch(_0xf318e7){}},async 'syncLoad'(){const _0x339ef6=a3_0x5ad53a,_0x2909e1=new Date(),_0x1e9301=_0x2909e1[_0x339ef6(0xf4)]()+'-'+String(_0x2909e1[_0x339ef6(0xe9)]()+0x1)['padStart'](0x2,'0'),_0x13a0a1=new Date(_0x2909e1);_0x13a0a1[_0x339ef6(0xfb)](_0x2909e1[_0x339ef6(0xe9)]()+0x1);const _0x200cae=_0x13a0a1['getFullYear']()+'-'+String(_0x13a0a1[_0x339ef6(0xe9)]()+0x1)[_0x339ef6(0xf9)](0x2,'0'),_0x27577c=Date[_0x339ef6(0x160)]();try{const _0x67e360=window[_0x339ef6(0xb5)]?.[_0x339ef6(0x16b)],_0x180a1b=_0x67e360?.[_0x339ef6(0xa8)]||'',[_0x59416f,_0x199b6d]=await Promise['all']([fetch(API_URL,{'method':'POST','body':JSON[_0x339ef6(0x128)]({'action':_0x339ef6(0xff),'init_data':_0x180a1b,'month_str':_0x1e9301})})[_0x339ef6(0xe3)](_0x6ddbe2=>_0x6ddbe2[_0x339ef6(0xaf)]()),fetch(API_URL,{'method':_0x339ef6(0xb2),'body':JSON[_0x339ef6(0x128)]({'action':_0x339ef6(0xff),'init_data':_0x180a1b,'month_str':_0x200cae})})[_0x339ef6(0xe3)](_0x508f11=>_0x508f11['json']())]);if(lastUserActionTime>_0x27577c){console[_0x339ef6(0xbc)](_0x339ef6(0xf2));return;}if(_0x59416f['ok'])this[_0x339ef6(0x10a)](_0x59416f[_0x339ef6(0xce)],_0x1e9301);if(_0x199b6d['ok'])this[_0x339ef6(0x10a)](_0x199b6d['data'],_0x200cae);this[_0x339ef6(0x9d)]();}catch(_0x52d858){}},'applyData'(_0x16efc2,_0x24bb62){const _0xcb3b0a=a3_0x5ad53a;if(!_0x16efc2)return;if(_0x16efc2[_0xcb3b0a(0x13d)]){if(_0x16efc2['settings']['pattern'])availabilityPattern=_0x16efc2['settings'][_0xcb3b0a(0x113)];if(_0x16efc2['settings'][_0xcb3b0a(0x11c)])specialRanges=_0x16efc2[_0xcb3b0a(0x13d)][_0xcb3b0a(0x11c)];if(_0x16efc2[_0xcb3b0a(0x13d)]['exceptions'])dateExceptions=_0x16efc2[_0xcb3b0a(0x13d)][_0xcb3b0a(0xfd)];}if(_0x16efc2[_0xcb3b0a(0xdb)]&&Array[_0xcb3b0a(0x11f)](_0x16efc2[_0xcb3b0a(0xdb)]))clients=_0x16efc2[_0xcb3b0a(0xdb)];_0x16efc2[_0xcb3b0a(0x100)]&&(coachProfiles={...coachProfiles,..._0x16efc2[_0xcb3b0a(0x100)]}),_0x16efc2[_0xcb3b0a(0x132)]&&(sessions=sessions[_0xcb3b0a(0x150)](_0x183878=>!_0x183878['dateStr'][_0xcb3b0a(0xec)](_0x24bb62)),Object['keys'](_0x16efc2[_0xcb3b0a(0x132)])[_0xcb3b0a(0x9e)](_0x18f1f2=>{const _0x45345c=_0xcb3b0a,_0x568823=_0x16efc2[_0x45345c(0x132)][_0x18f1f2];_0x568823['forEach'](_0x2ecc42=>{const _0x33e0c6=_0x45345c;sessions[_0x33e0c6(0x17c)]({'id':_0x2ecc42['i'],'clientId':_0x2ecc42['c'],'coachId':_0x2ecc42[_0x33e0c6(0x10f)],'dateStr':_0x24bb62+'-'+_0x18f1f2[_0x33e0c6(0xf9)](0x2,'0'),'start':_0x2ecc42['s'],'end':_0x2ecc42['e'],'note':_0x2ecc42['n']||'','status':_0x2ecc42['st']||_0x33e0c6(0xd9),'seriesId':_0x2ecc42[_0x33e0c6(0x8c)]});});})),reRenderBlocks();}};function init(){const _0x1f1171=a3_0x5ad53a;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x1f1171(0x14c))[_0x1f1171(0x120)](_0x1f1171(0xe5),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x1f1171(0xe4)]();}function renderTimeColumn(){const _0x3fb46d=a3_0x5ad53a,_0x450693=document['getElementById'](_0x3fb46d(0xab)),_0x5c3ce8=document[_0x3fb46d(0x13e)]('timeLineBadge');_0x450693[_0x3fb46d(0x12b)]='',_0x450693[_0x3fb46d(0x14a)](_0x5c3ce8);for(let _0x4d2035=0x0;_0x4d2035<0x18;_0x4d2035++){const _0x372ea6=document[_0x3fb46d(0x125)](_0x3fb46d(0xdf));_0x372ea6[_0x3fb46d(0xf1)]=_0x3fb46d(0x13c);if(_0x4d2035>0x0)_0x372ea6[_0x3fb46d(0x12b)]=_0x3fb46d(0x186)+String(_0x4d2035)[_0x3fb46d(0xf9)](0x2,'0')+_0x3fb46d(0x129);_0x450693[_0x3fb46d(0x14a)](_0x372ea6);}}function renderDayRange(_0x22775a,_0x3fc446){const _0xbcbfec=a3_0x5ad53a,_0x372e5d=document['getElementById'](_0xbcbfec(0xe8)),_0x5e6333=document['getElementById'](_0xbcbfec(0x13b)),_0x1a7c40=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x345c54=new Date();_0x345c54[_0xbcbfec(0x155)](0x0,0x0,0x0,0x0);const _0x23c058=getLocalDateStr(new Date());for(let _0x657fe6=_0x22775a;_0x657fe6<=_0x3fc446;_0x657fe6++){const _0x22483c=new Date(_0x345c54);_0x22483c['setDate'](_0x22483c[_0xbcbfec(0x10b)]()+_0x657fe6);const _0x4e8dd8=getLocalDateStr(_0x22483c);let _0x1f5100=_0x22483c['getDay']()-0x1;if(_0x1f5100===-0x1)_0x1f5100=0x6;const _0x3c8d4f=_0x4e8dd8===_0x23c058,_0x472dec=document[_0xbcbfec(0x125)]('div');_0x472dec[_0xbcbfec(0xf1)]=_0xbcbfec(0x97)+(_0x3c8d4f?_0xbcbfec(0x11e):''),_0x472dec[_0xbcbfec(0x95)]('data-date',_0x4e8dd8),_0x472dec[_0xbcbfec(0x12b)]=_0xbcbfec(0xdc)+_0x1a7c40[_0x1f5100]+_0xbcbfec(0xac)+_0x22483c[_0xbcbfec(0x10b)]()+'</div>',_0x372e5d[_0xbcbfec(0x14a)](_0x472dec);const _0x12fd09=document[_0xbcbfec(0x125)](_0xbcbfec(0xdf));_0x12fd09[_0xbcbfec(0xf1)]=_0xbcbfec(0x142)+(_0x3c8d4f?'today':''),_0x12fd09[_0xbcbfec(0x95)](_0xbcbfec(0xc1),_0x4e8dd8),_0x12fd09[_0xbcbfec(0x95)]('data-day-idx',_0x1f5100),_0x5e6333[_0xbcbfec(0x14a)](_0x12fd09);}}function reRenderBlocks(){const _0x353a5a=a3_0x5ad53a;document['querySelectorAll'](_0x353a5a(0x185))[_0x353a5a(0x9e)](_0x54f749=>{const _0x2749a5=_0x353a5a;_0x54f749[_0x2749a5(0xca)](_0x2749a5(0xc2))[_0x2749a5(0x9e)](_0x35f9aa=>_0x35f9aa['remove']());const _0x2ae993=_0x54f749['getAttribute'](_0x2749a5(0xc1)),_0x16de07=parseInt(_0x54f749[_0x2749a5(0x115)](_0x2749a5(0x182))),_0x2e8ce3=Math['round'](_0x54f749[_0x2749a5(0x163)]);(availabilityPattern[_0x16de07]||[])[_0x2749a5(0x9e)](_0x26223a=>{const _0x8a2a72=_0x2749a5,_0x28fb5b=document[_0x8a2a72(0x125)](_0x8a2a72(0xdf));_0x28fb5b[_0x8a2a72(0xf1)]=_0x8a2a72(0x130),_0x28fb5b[_0x8a2a72(0xbd)][_0x8a2a72(0x162)]=_0x26223a*GRID_H+'px',_0x28fb5b[_0x8a2a72(0xbd)][_0x8a2a72(0xf0)]='-'+_0x2e8ce3+_0x8a2a72(0xea)+_0x26223a*GRID_H+'px',_0x54f749[_0x8a2a72(0x14a)](_0x28fb5b);});if(specialRanges[_0x2749a5(0xf8)]>0x0){const _0x3ef0dc=new Date(_0x2ae993+_0x2749a5(0x16c))[_0x2749a5(0xee)](),_0x4512e8=new Date(_0x2ae993+_0x2749a5(0x12c))[_0x2749a5(0xee)]();specialRanges['forEach'](_0x39fe86=>{const _0x1deb3b=_0x2749a5,_0x5a5108=new Date(_0x39fe86[_0x1deb3b(0x14b)])[_0x1deb3b(0xee)](),_0x23035e=new Date(_0x39fe86[_0x1deb3b(0x107)])[_0x1deb3b(0xee)](),_0x15de39=Math[_0x1deb3b(0x9c)](_0x3ef0dc,_0x5a5108),_0x5c2392=Math[_0x1deb3b(0x141)](_0x4512e8,_0x23035e);if(_0x15de39<_0x5c2392){const _0x11ce5f=(_0x15de39-_0x3ef0dc)/0x36ee80*GRID_H,_0x22f9b4=(_0x5c2392-_0x15de39)/0x36ee80*GRID_H,_0x37e3cd=document[_0x1deb3b(0x125)](_0x1deb3b(0xdf));_0x22f9b4>=23.5*GRID_H?(_0x37e3cd[_0x1deb3b(0xf1)]='day-off-overlay\x20stripe-bg',_0x37e3cd['style'][_0x1deb3b(0xf0)]='-'+_0x2e8ce3+_0x1deb3b(0xfa)):(_0x37e3cd[_0x1deb3b(0xf1)]=_0x1deb3b(0xa4),_0x37e3cd['style'][_0x1deb3b(0x162)]=_0x11ce5f+'px',_0x37e3cd[_0x1deb3b(0xbd)]['height']=_0x22f9b4+'px',_0x37e3cd[_0x1deb3b(0xbd)][_0x1deb3b(0xf0)]='-'+_0x2e8ce3+_0x1deb3b(0xea)+_0x11ce5f+'px'),_0x54f749[_0x1deb3b(0x14a)](_0x37e3cd);}});}renderEventsForColumn(_0x54f749,_0x2ae993);});}function renderEventsForColumn(_0x239121,_0x53d1d4){const _0x2ebdb9=a3_0x5ad53a,_0x56863c=sessions[_0x2ebdb9(0x150)](_0x54242e=>_0x54242e['dateStr']===_0x53d1d4),_0x1834a2=_0x56863c['map'](_0x4a39a6=>{const _0x21ba84=_0x2ebdb9,[_0x442f82,_0x422065]=_0x4a39a6['start'][_0x21ba84(0x111)](':')[_0x21ba84(0x9a)](Number),[_0x3ebb7f,_0x4b0c11]=_0x4a39a6[_0x21ba84(0x107)][_0x21ba84(0x111)](':')[_0x21ba84(0x9a)](Number);return{'data':_0x4a39a6,'start':_0x442f82*0x3c+_0x422065,'end':_0x3ebb7f*0x3c+_0x4b0c11,'colIndex':0x0};});_0x1834a2[_0x2ebdb9(0xc9)]((_0x1ce771,_0x1e82ff)=>_0x1ce771['start']-_0x1e82ff[_0x2ebdb9(0x14b)]||_0x1e82ff[_0x2ebdb9(0x107)]-_0x1e82ff[_0x2ebdb9(0x14b)]-(_0x1ce771[_0x2ebdb9(0x107)]-_0x1ce771['start']));const _0x18e342=[];_0x1834a2[_0x2ebdb9(0x9e)](_0x3e3523=>{const _0x3fb579=_0x2ebdb9;let _0x4bb04f=![];for(let _0x44f3e6=0x0;_0x44f3e6<_0x18e342[_0x3fb579(0xf8)];_0x44f3e6++){const _0x61ae35=_0x18e342[_0x44f3e6];if(_0x3e3523[_0x3fb579(0x14b)]>=_0x61ae35[_0x61ae35['length']-0x1][_0x3fb579(0x107)]){_0x61ae35[_0x3fb579(0x17c)](_0x3e3523),_0x3e3523[_0x3fb579(0x176)]=_0x44f3e6,_0x4bb04f=!![];break;}}!_0x4bb04f&&(_0x18e342['push']([_0x3e3523]),_0x3e3523[_0x3fb579(0x176)]=_0x18e342['length']-0x1);}),_0x1834a2[_0x2ebdb9(0x9e)](_0xd37838=>{const _0x10038e=_0x2ebdb9;let _0x536bf6=0x0;_0x1834a2[_0x10038e(0x9e)](_0x23ede4=>{const _0x400f59=_0x10038e;if(Math[_0x400f59(0x9c)](_0xd37838[_0x400f59(0x14b)],_0x23ede4[_0x400f59(0x14b)])<Math['min'](_0xd37838[_0x400f59(0x107)],_0x23ede4[_0x400f59(0x107)])&&_0x23ede4['colIndex']>_0x536bf6)_0x536bf6=_0x23ede4[_0x400f59(0x176)];});const _0x20f8fa=_0x536bf6+0x1,_0x437934=0x64/_0x20f8fa,_0x58d0bb=_0xd37838['colIndex']*_0x437934,_0x3137fc=document[_0x10038e(0x125)]('div'),_0x1dd68d=_0xd37838[_0x10038e(0xce)];let _0x58d1b7=_0x10038e(0x8a);if(clients&&clients['length']>0x0){const _0x1a1655=clients['find'](_0x5e0922=>String(_0x5e0922['id'])===String(_0x1dd68d[_0x10038e(0x133)]));if(_0x1a1655&&_0x1a1655[_0x10038e(0x9b)])_0x58d1b7=_0x1a1655[_0x10038e(0x9b)];}const _0x44cc83=_0x1dd68d['status']==='completed',_0x1c4b36=_0x44cc83?0x1:0.45;_0x3137fc[_0x10038e(0xf1)]='event-card'+(_0x44cc83?_0x10038e(0x14d):''),_0x3137fc['style'][_0x10038e(0x16a)]=hexToRgba(_0x58d1b7,_0x1c4b36),_0x3137fc[_0x10038e(0xbd)]['borderLeftColor']=_0x58d1b7;const _0x36605f=_0xd37838[_0x10038e(0x14b)]/0x3c*GRID_H,_0x34253b=(_0xd37838[_0x10038e(0x107)]-_0xd37838['start'])/0x3c*GRID_H;_0x3137fc[_0x10038e(0xbd)]['top']=_0x36605f+'px',_0x3137fc[_0x10038e(0xbd)][_0x10038e(0xde)]=Math[_0x10038e(0x9c)](_0x34253b,0x14)+'px',_0x3137fc[_0x10038e(0xbd)][_0x10038e(0x102)]=_0x10038e(0x121)+_0x437934+_0x10038e(0x157),_0x3137fc['style']['left']='calc('+_0x58d0bb+_0x10038e(0x174),_0x3137fc[_0x10038e(0xbd)][_0x10038e(0x123)]=0xa+_0xd37838[_0x10038e(0x176)];if(_0x437934<0x55)_0x3137fc[_0x10038e(0x175)][_0x10038e(0x17d)](_0x10038e(0xf7));let _0x27f4ec='';if(_0x1dd68d[_0x10038e(0x148)])_0x27f4ec+=_0x10038e(0xe2);if(_0x44cc83)_0x27f4ec+=_0x10038e(0xd1);_0x3137fc[_0x10038e(0x12b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x1dd68d[_0x10038e(0x14b)]+_0x10038e(0x103)+_0x1dd68d[_0x10038e(0x107)]+_0x10038e(0xf3)+_0x27f4ec+_0x10038e(0x16f),_0x3137fc['onclick']=_0x24e403=>{const _0x4c168a=_0x10038e;_0x24e403[_0x4c168a(0x12e)](),openDetails(_0x1dd68d);},_0x239121[_0x10038e(0x14a)](_0x3137fc);});}function openAnalytics(){const _0x501f7f=a3_0x5ad53a,_0x4deb15=document[_0x501f7f(0x117)](_0x501f7f(0x12f));setAnalyticsPeriod('week',_0x4deb15),openSheet(_0x501f7f(0x138));}function setAnalyticsPeriod(_0x71b603,_0x59f065){const _0x389de8=a3_0x5ad53a;currentAnPeriod=_0x71b603,document[_0x389de8(0xca)](_0x389de8(0x12f))[_0x389de8(0x9e)](_0x57d2b2=>_0x57d2b2[_0x389de8(0x175)][_0x389de8(0x112)](_0x389de8(0x153)));if(_0x59f065)_0x59f065[_0x389de8(0x175)][_0x389de8(0x17d)]('active');const _0x5565f8=document[_0x389de8(0x13e)]('anCustomDates');_0x5565f8[_0x389de8(0xbd)]['display']=_0x71b603===_0x389de8(0x168)?_0x389de8(0x17f):_0x389de8(0xb6);const _0x58a997=new Date();let _0xe76bcc=new Date(),_0x4d55b6=new Date();if(_0x71b603==='week')_0xe76bcc=getStartOfWeek(_0x58a997),_0x4d55b6=new Date(_0xe76bcc),_0x4d55b6[_0x389de8(0x12a)](_0x4d55b6[_0x389de8(0x10b)]()+0x6);else{if(_0x71b603==='month')_0xe76bcc=new Date(_0x58a997[_0x389de8(0xf4)](),_0x58a997[_0x389de8(0xe9)](),0x1),_0x4d55b6=new Date(_0x58a997['getFullYear'](),_0x58a997['getMonth']()+0x1,0x0);else{!document[_0x389de8(0x13e)](_0x389de8(0xe6))['value']&&(document[_0x389de8(0x13e)](_0x389de8(0xe6))['value']=getLocalDateStr(_0x58a997),document[_0x389de8(0x13e)](_0x389de8(0x110))[_0x389de8(0x131)]=getLocalDateStr(_0x58a997));refreshAnalytics();return;}}document['getElementById'](_0x389de8(0xe6))[_0x389de8(0x131)]=getLocalDateStr(_0xe76bcc),document['getElementById'](_0x389de8(0x110))['value']=getLocalDateStr(_0x4d55b6),refreshAnalytics();}function refreshAnalytics(){const _0x11e268=a3_0x5ad53a,_0x5d158a=document[_0x11e268(0x13e)](_0x11e268(0xe6))[_0x11e268(0x131)],_0x312346=document[_0x11e268(0x13e)](_0x11e268(0x110))[_0x11e268(0x131)];if(!_0x5d158a||!_0x312346)return;const _0x242e7d=sessions[_0x11e268(0x150)](_0x1c2d0d=>_0x1c2d0d[_0x11e268(0x136)]>=_0x5d158a&&_0x1c2d0d[_0x11e268(0x136)]<=_0x312346&&_0x1c2d0d['status']!==_0x11e268(0x169)),_0x4f112a=_0x242e7d[_0x11e268(0xf8)],_0x56f2ac=_0x242e7d['filter'](_0x29bd78=>_0x29bd78[_0x11e268(0x179)]===_0x11e268(0x13f))[_0x11e268(0xf8)],_0x4e1afd=_0x4f112a>0x0?Math[_0x11e268(0x104)](_0x56f2ac/_0x4f112a*0x64):0x0;document[_0x11e268(0x13e)](_0x11e268(0x10e))['textContent']=_0x4e1afd+'%',document['getElementById'](_0x11e268(0xcf))[_0x11e268(0x178)]=_0x56f2ac+_0x11e268(0x93)+_0x4f112a+_0x11e268(0x151);const _0x33c5ff=document['getElementById'](_0x11e268(0xd8)),_0x4d9e45=0x2*Math['PI']*0x23,_0x65a341=_0x4d9e45-_0x4e1afd/0x64*_0x4d9e45;_0x33c5ff['style']['strokeDashoffset']=_0x65a341;const _0x129aa0={};_0x242e7d[_0x11e268(0x9e)](_0xee8a55=>{const _0x253a2d=_0x11e268,_0x58de18=_0xee8a55[_0x253a2d(0x147)]||'Unknown';if(!_0x129aa0[_0x58de18]){const _0x5106ab='#'+_0x58de18[_0x253a2d(0xcd)]()[_0x253a2d(0x105)](0x0,0x6);_0x129aa0[_0x58de18]={'total':0x0,'done':0x0,'color':_0x5106ab};}_0x129aa0[_0x58de18][_0x253a2d(0x8b)]++;if(_0xee8a55[_0x253a2d(0x179)]===_0x253a2d(0x13f))_0x129aa0[_0x58de18][_0x253a2d(0x109)]++;});const _0x4b9e86=document[_0x11e268(0x13e)](_0x11e268(0x12d));_0x4b9e86[_0x11e268(0x12b)]='';const _0x4cc82f=Object['entries'](_0x129aa0)['sort']((_0x17af49,_0x2f4696)=>_0x2f4696[0x1]['total']-_0x17af49[0x1][_0x11e268(0x8b)]);if(_0x4cc82f[_0x11e268(0xf8)]===0x0){_0x4b9e86['innerHTML']=_0x11e268(0xb8);return;}_0x4cc82f[_0x11e268(0x9e)](([_0x512427,_0x15617c])=>{const _0x3a5a1b=_0x11e268,_0x2004a4=Math[_0x3a5a1b(0x104)](_0x15617c[_0x3a5a1b(0x109)]/_0x15617c[_0x3a5a1b(0x8b)]*0x64),_0x3be8b8=document['createElement'](_0x3a5a1b(0xdf));_0x3be8b8[_0x3a5a1b(0xf1)]='client-stat-card',_0x3be8b8[_0x3a5a1b(0xbd)][_0x3a5a1b(0x92)]=_0x15617c[_0x3a5a1b(0x9b)],_0x3be8b8[_0x3a5a1b(0x12b)]=_0x3a5a1b(0x91)+_0x512427['substr'](0x0,0x5)+_0x3a5a1b(0xe7)+_0x15617c[_0x3a5a1b(0x109)]+_0x3a5a1b(0x10d)+_0x15617c[_0x3a5a1b(0x8b)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x2004a4+_0x3a5a1b(0x156),_0x4b9e86[_0x3a5a1b(0x14a)](_0x3be8b8);});}function openDetails(_0x5b380d){const _0x2f9e2a=a3_0x5ad53a;currentSession=_0x5b380d;const _0x4ba904=new Date(_0x5b380d[_0x2f9e2a(0x136)]),_0x385f40=_0x4ba904[_0x2f9e2a(0xcc)]('ru-RU',{'weekday':_0x2f9e2a(0x187),'day':_0x2f9e2a(0x13a),'month':_0x2f9e2a(0x187)});document[_0x2f9e2a(0x13e)](_0x2f9e2a(0x170))[_0x2f9e2a(0x178)]=_0x385f40[_0x2f9e2a(0x108)](0x0)['toUpperCase']()+_0x385f40[_0x2f9e2a(0x106)](0x1),document['getElementById'](_0x2f9e2a(0xfc))['textContent']=_0x5b380d['start']+_0x2f9e2a(0x103)+_0x5b380d[_0x2f9e2a(0x107)],document[_0x2f9e2a(0x13e)](_0x2f9e2a(0xbf))[_0x2f9e2a(0x178)]=_0x5b380d[_0x2f9e2a(0x96)]||_0x2f9e2a(0xcb);const _0x88d692=document[_0x2f9e2a(0x13e)](_0x2f9e2a(0x159)),_0x505ca8=document[_0x2f9e2a(0x13e)]('cancelContainer'),_0x233cf9=_0x505ca8[_0x2f9e2a(0x117)](_0x2f9e2a(0xa5)),_0x1ffa97=_0x505ca8['querySelector'](_0x2f9e2a(0xf6)),_0x1061b6=document[_0x2f9e2a(0x13e)](_0x2f9e2a(0xeb));if(_0x5b380d[_0x2f9e2a(0x179)]===_0x2f9e2a(0x13f))_0x88d692['textContent']=_0x2f9e2a(0xd0),_0x88d692[_0x2f9e2a(0xbd)][_0x2f9e2a(0x9b)]='var(--acc-green)',_0x505ca8[_0x2f9e2a(0xbd)][_0x2f9e2a(0x99)]=_0x2f9e2a(0xb6);else{_0x88d692[_0x2f9e2a(0x178)]=_0x2f9e2a(0x126),_0x88d692[_0x2f9e2a(0xbd)][_0x2f9e2a(0x9b)]=_0x2f9e2a(0xc7),_0x505ca8[_0x2f9e2a(0xbd)][_0x2f9e2a(0x99)]=_0x2f9e2a(0x124);const _0xf4fcba=new Date(_0x5b380d[_0x2f9e2a(0x136)]+'T'+_0x5b380d[_0x2f9e2a(0x14b)]),_0x209ef9=new Date(),_0x35b4ad=(_0xf4fcba-_0x209ef9)/(0x3e8*0x3c*0x3c),_0x234c15=coachProfiles[_0x5b380d[_0x2f9e2a(0x147)]]&&coachProfiles[_0x5b380d[_0x2f9e2a(0x147)]]['cancel_window']?parseInt(coachProfiles[_0x5b380d['coachId']]['cancel_window']):0x18;if(_0x234c15===0x0||_0x35b4ad>=_0x234c15)_0x233cf9['style'][_0x2f9e2a(0x99)]=_0x2f9e2a(0x124),_0x1ffa97[_0x2f9e2a(0xbd)][_0x2f9e2a(0x99)]=_0x2f9e2a(0x124),_0x1061b6[_0x2f9e2a(0xbd)][_0x2f9e2a(0x99)]=_0x2f9e2a(0xb6);else{_0x233cf9[_0x2f9e2a(0xbd)][_0x2f9e2a(0x99)]='none',_0x1ffa97['style']['display']=_0x2f9e2a(0xb6),_0x1061b6['style'][_0x2f9e2a(0x99)]=_0x2f9e2a(0x124);let _0x3aaf1a=_0x234c15===0x0?_0x2f9e2a(0xb7):'–∑–∞\x20'+_0x234c15+'\x20—á.';_0x1061b6['textContent']=_0x2f9e2a(0x143)+_0x3aaf1a+_0x2f9e2a(0x16d);}}document[_0x2f9e2a(0x13e)](_0x2f9e2a(0xa9))[_0x2f9e2a(0x175)][_0x2f9e2a(0x17d)](_0x2f9e2a(0x153)),document[_0x2f9e2a(0x13e)]('detailsSheet')[_0x2f9e2a(0x175)][_0x2f9e2a(0x17d)](_0x2f9e2a(0x139));}function closeAllSheets(){const _0x186138=a3_0x5ad53a;document[_0x186138(0x13e)](_0x186138(0xa9))[_0x186138(0x175)]['remove'](_0x186138(0x153)),document[_0x186138(0xca)](_0x186138(0x9f))[_0x186138(0x9e)](_0x3bb40e=>_0x3bb40e[_0x186138(0x175)][_0x186138(0x112)](_0x186138(0x139)));}function a3_0x4a6b(_0x5009bb,_0x414f15){_0x5009bb=_0x5009bb-0x8a;const _0x3bf92f=a3_0x3832();let _0x9c5856=_0x3bf92f[_0x5009bb];return _0x9c5856;}function openSheet(_0x296b63){const _0x305966=a3_0x5ad53a;document[_0x305966(0x13e)]('overlay')[_0x305966(0x175)][_0x305966(0x17d)](_0x305966(0x153)),document[_0x305966(0x13e)](_0x296b63)[_0x305966(0x175)][_0x305966(0x17d)](_0x305966(0x139));}function getLocalDateStr(_0x256226){const _0x29dac2=a3_0x5ad53a,_0x393d45=_0x256226['getFullYear'](),_0x52a1e9=String(_0x256226[_0x29dac2(0xe9)]()+0x1)[_0x29dac2(0xf9)](0x2,'0'),_0x32463e=String(_0x256226[_0x29dac2(0x10b)]())[_0x29dac2(0xf9)](0x2,'0');return _0x393d45+'-'+_0x52a1e9+'-'+_0x32463e;}function getStartOfWeek(_0x64287b){const _0x48b4ba=a3_0x5ad53a,_0x5124d3=new Date(_0x64287b),_0x4e4fb2=_0x5124d3[_0x48b4ba(0xd7)](),_0x9d186=_0x5124d3[_0x48b4ba(0x10b)]()-_0x4e4fb2+(_0x4e4fb2===0x0?-0x6:0x1);return _0x5124d3[_0x48b4ba(0x12a)](_0x9d186),_0x5124d3[_0x48b4ba(0x155)](0x0,0x0,0x0,0x0),_0x5124d3;}function scrollToToday(){const _0x59b3eb=getLocalDateStr(new Date());setTimeout(()=>{const _0x216299=a3_0x4a6b,_0x4dc0d3=document[_0x216299(0x117)]('.day-col-header[data-date=\x22'+_0x59b3eb+'\x22]');if(_0x4dc0d3){const _0x3cc6d6=document[_0x216299(0x13e)](_0x216299(0x14c)),_0x5dcb24=_0x4dc0d3[_0x216299(0x163)]-_0x3cc6d6['clientWidth']/0x2+_0x4dc0d3[_0x216299(0xc6)]/0x2;_0x3cc6d6['scrollTo']({'left':_0x5dcb24,'behavior':_0x216299(0x144)}),_0x3cc6d6[_0x216299(0x17b)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x29169b=a3_0x5ad53a,_0x173f62=new Date(),_0xda231c=document[_0x29169b(0x13e)](_0x29169b(0xbe)),_0x2cbccd=document[_0x29169b(0x13e)](_0x29169b(0xa3)),_0x36940c=(_0x173f62[_0x29169b(0xc5)]()*0x3c+_0x173f62[_0x29169b(0xe0)]())/0x3c*GRID_H;_0xda231c[_0x29169b(0xbd)][_0x29169b(0x162)]=_0x36940c+'px',_0xda231c[_0x29169b(0xbd)][_0x29169b(0x99)]='block',_0x2cbccd['style'][_0x29169b(0x162)]=_0x36940c+'px',_0x2cbccd[_0x29169b(0xbd)][_0x29169b(0x99)]=_0x29169b(0x124),_0x2cbccd[_0x29169b(0x178)]=String(_0x173f62['getHours']())[_0x29169b(0xf9)](0x2,'0')+':'+String(_0x173f62['getMinutes']())['padStart'](0x2,'0');}function onScroll(){const _0x523d45=a3_0x5ad53a,_0x15861c=document[_0x523d45(0x13e)](_0x523d45(0x14c)),_0x1cd797=document[_0x523d45(0xca)](_0x523d45(0x134));for(let _0x47f843 of _0x1cd797)if(_0x47f843[_0x523d45(0x163)]>=_0x15861c[_0x523d45(0xb0)]){const _0x1443fc=new Date(_0x47f843[_0x523d45(0x115)](_0x523d45(0xc1)));document['getElementById'](_0x523d45(0x15c))[_0x523d45(0x178)]=_0x1443fc['toLocaleString']('ru',{'month':'long'})['toUpperCase']()+'\x20'+_0x1443fc[_0x523d45(0xf4)]();break;}}function showToast(_0x189c92){const _0x3216bc=a3_0x5ad53a,_0xc95f63=document[_0x3216bc(0x13e)](_0x3216bc(0x98));_0xc95f63[_0x3216bc(0x178)]=_0x189c92,_0xc95f63[_0x3216bc(0x175)]['add']('show'),setTimeout(()=>_0xc95f63[_0x3216bc(0x175)]['remove'](_0x3216bc(0x167)),0x7d0);}function a3_0x3832(){const _0x28f12f=['value','calendar','clientId','.day-col-header','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','dateStr','clientWidth','analyticsSheet','open','numeric','gridColumns','time-label','settings','getElementById','completed','Critical\x20TMA\x20Error:','min','day-column\x20','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','auto','onClick','offClick','coachId','seriesId','insertBefore','appendChild','start','matrixViewport','\x20status-completed','27doWaZb','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','filter','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','setHeaderColor','active','472520ZiSOCl','setHours','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','%\x20-\x204px)','test','detStatus','floor','(((.+)+)+)+$','headerMonth','ccTitle','600','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','now','visible','top','offsetLeft','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','href','ready','show','custom','cancelled','backgroundColor','WebApp','T00:00:00','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','uc_client_list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','detDate','18990GswvVz','Error\x20setting\x20color:','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','%\x20+\x202px)','classList','colIndex','2904385VJfIxX','textContent','status','</div>','scrollTop','push','add','scrollWidth','flex','button','rsDatesTrack','data-day-idx','apply','rgba(10,\x20132,\x20255,\x20','.day-column','<span>','long','#0a84ff','total','sid','createDocumentFragment','firstChild','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','week','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','borderLeftColor','\x20–∏–∑\x20','setBackgroundColor','setAttribute','note','day-col-header\x20','toast','display','map','color','max','saveLocally','forEach','.sheet','user','ccText','join','timeLineBadge','blocked-range-part\x20stripe-bg','.btn-cancel','<div\x20class=\x22rs-day-name\x22>','rsSlotsGrid','initData','overlay','1696ctPUHS','timeColumn','</div><div\x20class=\x22dch-num\x22>','setItem','location','json','scrollLeft','get_slots','POST','rs-date-chip','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','Telegram','none','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','detailsSheet','6EqqeLG','2230048ZYEVRw','log','style','globalTimeLine','detNote','getItem','data-date','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','fontWeight','expand','getHours','offsetWidth','var(--acc-blue)','129478CkbKDR','sort','querySelectorAll','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','toLocaleDateString','toString','data','anTotalStats','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','#ff453a','error','#050505','client_cancel','uc_client_sessions','getDay','anDonutCircle','planned','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','clients','<div\x20class=\x22dch-day\x22>','constructor','height','div','getMinutes','search','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','then','syncLoad','scroll','anStart','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','daysHeaderTrack','getMonth','px\x20-','cancelHint','startsWith','parse','getTime','customConfirm','backgroundPosition','className','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getFullYear','router.html','.btn-reschedule','mini','length','padStart','px\x200px','setMonth','detTime','exceptions','rgba(','client_load','coach_profiles','reschedule','width','\x20-\x20','round','substr','slice','end','charAt','done','applyData','getDate','\x20–≤\x20','</span>\x20/\x20','anPercent','cid','anEnd','split','remove','pattern','3340232SdGwAM','getAttribute','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','querySelector','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','2609960TKfIog','rescheduleSheet','BackButton','ranges','onclick','today','isArray','addEventListener','calc(','DOMContentLoaded','zIndex','block','createElement','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','v9.5-CLIENT-ANALYTICS','stringify',':00</span>','setDate','innerHTML','T23:59:59','analyticsList','stopPropagation','.period-switch\x20.p-btn','blocked-slot\x20stripe-bg'];a3_0x3832=function(){return _0x28f12f;};return a3_0x3832();}function handleInfiniteScroll(){const _0x62ce60=a3_0x5ad53a,_0xbb3e0b=document[_0x62ce60(0x13e)](_0x62ce60(0x14c)),_0x42886b=_0xbb3e0b['scrollLeft'],_0x2128da=_0xbb3e0b[_0x62ce60(0x17e)],_0x121422=_0xbb3e0b[_0x62ce60(0x137)];if(_0x2128da-(_0x42886b+_0x121422)<0x12c){const _0x501470=endOffset;endOffset+=0xe,renderDayRange(_0x501470+0x1,endOffset),reRenderBlocks();}if(_0x42886b<0x12c){const _0x4517c6=startOffset;startOffset-=0xe,prependDays(startOffset,_0x4517c6-0x1),_0xbb3e0b[_0x62ce60(0xb0)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x3e7f12,_0x24f63f){const _0xb7ec05=a3_0x5ad53a,_0x2ae714=document[_0xb7ec05(0x13e)](_0xb7ec05(0xe8)),_0x4c40af=document[_0xb7ec05(0x13e)](_0xb7ec05(0x13b)),_0x5930f6=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x12f836=new Date();_0x12f836[_0xb7ec05(0x155)](0x0,0x0,0x0,0x0);const _0x4fc648=getLocalDateStr(new Date()),_0x4da275=document[_0xb7ec05(0x8d)](),_0x3b26b0=document['createDocumentFragment']();for(let _0x23c864=_0x3e7f12;_0x23c864<=_0x24f63f;_0x23c864++){const _0x5ef304=new Date(_0x12f836);_0x5ef304[_0xb7ec05(0x12a)](_0x5ef304['getDate']()+_0x23c864);const _0x1be554=getLocalDateStr(_0x5ef304);let _0x4fe55a=_0x5ef304[_0xb7ec05(0xd7)]()-0x1;if(_0x4fe55a===-0x1)_0x4fe55a=0x6;const _0x1821ba=_0x1be554===_0x4fc648,_0x650aae=document[_0xb7ec05(0x125)](_0xb7ec05(0xdf));_0x650aae[_0xb7ec05(0xf1)]=_0xb7ec05(0x97)+(_0x1821ba?_0xb7ec05(0x11e):''),_0x650aae[_0xb7ec05(0x95)](_0xb7ec05(0xc1),_0x1be554),_0x650aae[_0xb7ec05(0x12b)]=_0xb7ec05(0xdc)+_0x5930f6[_0x4fe55a]+'</div><div\x20class=\x22dch-num\x22>'+_0x5ef304[_0xb7ec05(0x10b)]()+_0xb7ec05(0x17a),_0x4da275[_0xb7ec05(0x14a)](_0x650aae);const _0x4ebd05=document[_0xb7ec05(0x125)](_0xb7ec05(0xdf));_0x4ebd05[_0xb7ec05(0xf1)]=_0xb7ec05(0x142)+(_0x1821ba?'today':''),_0x4ebd05['setAttribute']('data-date',_0x1be554),_0x4ebd05[_0xb7ec05(0x95)]('data-day-idx',_0x4fe55a),_0x3b26b0[_0xb7ec05(0x14a)](_0x4ebd05);}_0x2ae714[_0xb7ec05(0x149)](_0x4da275,_0x2ae714[_0xb7ec05(0x8e)]),_0x4c40af[_0xb7ec05(0x149)](_0x3b26b0,_0x4c40af['querySelector'](_0xb7ec05(0x185)));}function hexToRgba(_0x5246ee,_0x23f2ec){const _0x4dbe95=a3_0x5ad53a;let _0x31a858;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x4dbe95(0x158)](_0x5246ee))return _0x31a858=_0x5246ee['substring'](0x1)[_0x4dbe95(0x111)](''),_0x31a858['length']==0x3&&(_0x31a858=[_0x31a858[0x0],_0x31a858[0x0],_0x31a858[0x1],_0x31a858[0x1],_0x31a858[0x2],_0x31a858[0x2]]),_0x31a858='0x'+_0x31a858[_0x4dbe95(0xa2)](''),_0x4dbe95(0xfe)+[_0x31a858>>0x10&0xff,_0x31a858>>0x8&0xff,_0x31a858&0xff][_0x4dbe95(0xa2)](',')+','+_0x23f2ec+')';return _0x4dbe95(0x184)+_0x23f2ec+')';}let confirmResolver=null;function showCustomConfirm(_0x1719dd,_0x288eb7,_0x5f4f0f=!![]){const _0x1397f3=a3_0x5ad53a;document[_0x1397f3(0x13e)](_0x1397f3(0x15d))[_0x1397f3(0x178)]=_0x1719dd,document[_0x1397f3(0x13e)](_0x1397f3(0xa1))[_0x1397f3(0x178)]=_0x288eb7;const _0x2b4cdd=document[_0x1397f3(0x13e)]('ccYesBtn');return _0x5f4f0f?(_0x2b4cdd[_0x1397f3(0xbd)][_0x1397f3(0x9b)]=_0x1397f3(0xd2),_0x2b4cdd['style'][_0x1397f3(0xc3)]=_0x1397f3(0x15e)):(_0x2b4cdd['style'][_0x1397f3(0x9b)]=_0x1397f3(0x8a),_0x2b4cdd[_0x1397f3(0xbd)][_0x1397f3(0xc3)]=_0x1397f3(0x15e)),new Promise(_0x298b38=>{const _0x480da3=_0x1397f3;confirmResolver=_0x298b38,document[_0x480da3(0x13e)](_0x480da3(0xef))[_0x480da3(0x175)][_0x480da3(0x17d)](_0x480da3(0x161));});}function resolveCustomConfirm(_0x36546d){const _0x492ad9=a3_0x5ad53a;document[_0x492ad9(0x13e)]('customConfirm')[_0x492ad9(0x175)][_0x492ad9(0x112)](_0x492ad9(0x161));if(confirmResolver)confirmResolver(_0x36546d);}async function tryCancelCurrentSession(){const _0x537601=a3_0x5ad53a;if(!currentSession)return;const _0x3ee600=await showCustomConfirm(_0x537601(0x15f),_0x537601(0xb4),!![]);if(!_0x3ee600)return;const _0x581bfd=currentSession;closeAllSheets(),sessions=sessions[_0x537601(0x150)](_0x364418=>_0x364418['id']!==_0x581bfd['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date['now']();try{const _0x14d3c9=window[_0x537601(0xb5)]?.['WebApp'],_0xc138c6=await fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':_0x537601(0xd5),'init_data':_0x14d3c9?.[_0x537601(0xa8)]||'','coachId':_0x581bfd[_0x537601(0x147)],'dateStr':_0x581bfd['dateStr'],'sessionId':_0x581bfd['id']})});if(_0xc138c6['ok'])DataManager['saveLocally']();}catch(_0x5e60df){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xdd955e=a3_0x5ad53a;if(!currentSession)return;document[_0xdd955e(0x13e)](_0xdd955e(0xb9))[_0xdd955e(0x175)]['remove'](_0xdd955e(0x139)),document[_0xdd955e(0x13e)](_0xdd955e(0x11a))[_0xdd955e(0x175)]['add'](_0xdd955e(0x139));const _0x2dc323=document['getElementById'](_0xdd955e(0x181)),_0x4da381=document[_0xdd955e(0x13e)]('rsSlotsGrid');_0x2dc323['innerHTML']='',_0x4da381[_0xdd955e(0x12b)]=_0xdd955e(0x118);const [_0x3e370e,_0xbbe206]=currentSession[_0xdd955e(0x14b)]['split'](':')[_0xdd955e(0x9a)](Number),[_0x492b46,_0x39f8ba]=currentSession['end'][_0xdd955e(0x111)](':')[_0xdd955e(0x9a)](Number),_0x46beed=_0x492b46*0x3c+_0x39f8ba-(_0x3e370e*0x3c+_0xbbe206);try{const _0x56b90c=window[_0xdd955e(0xb5)]?.[_0xdd955e(0x16b)],_0x503773=await fetch(API_URL,{'method':_0xdd955e(0xb2),'body':JSON[_0xdd955e(0x128)]({'action':_0xdd955e(0xb1),'coachId':currentSession[_0xdd955e(0x147)],'duration':_0x46beed,'init_data':_0x56b90c?.[_0xdd955e(0xa8)]||'','excludeSessionId':currentSession['id']})}),_0x5da2e0=await _0x503773[_0xdd955e(0xaf)]();_0x5da2e0['ok']&&_0x5da2e0[_0xdd955e(0xce)]?(availableSlotsCache=_0x5da2e0[_0xdd955e(0xce)],renderRescheduleDates()):_0x4da381['innerHTML']=_0xdd955e(0x8f);}catch(_0xcedb3b){_0x4da381[_0xdd955e(0x12b)]=_0xdd955e(0xda);}}function renderRescheduleDates(){const _0x775295=a3_0x5ad53a,_0xd2d281=document[_0x775295(0x13e)](_0x775295(0x181));_0xd2d281['innerHTML']='';const _0x4df1b8=Object['keys'](availableSlotsCache)['sort'](),_0x26d95e=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x4df1b8[_0x775295(0xf8)]===0x0){document['getElementById'](_0x775295(0xa7))[_0x775295(0x12b)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x4df1b8[_0x775295(0x9e)]((_0x47dea9,_0x40bdeb)=>{const _0x32cfdd=_0x775295,_0x388110=new Date(_0x47dea9),_0x135954=_0x26d95e[_0x388110[_0x32cfdd(0xd7)]()],_0x30d2c3=_0x388110['getDate'](),_0x333689=document[_0x32cfdd(0x125)](_0x32cfdd(0xdf));_0x333689['className']=_0x32cfdd(0xb3);if(_0x40bdeb===0x0)_0x333689[_0x32cfdd(0x175)]['add'](_0x32cfdd(0x153));_0x333689[_0x32cfdd(0x12b)]=_0x32cfdd(0xa6)+_0x135954+'</div><div\x20class=\x22rs-day-num\x22>'+_0x30d2c3+_0x32cfdd(0x17a),_0x333689[_0x32cfdd(0x11d)]=()=>selectRsDate(_0x47dea9,_0x333689),_0xd2d281['appendChild'](_0x333689);}),selectRsDate(_0x4df1b8[0x0],_0xd2d281[_0x775295(0x8e)]);}function selectRsDate(_0x3eaa83,_0x3f1648){const _0x102538=a3_0x5ad53a;selectedRsDate=_0x3eaa83,document[_0x102538(0xca)]('.rs-date-chip')[_0x102538(0x9e)](_0x3ae74d=>_0x3ae74d['classList'][_0x102538(0x112)](_0x102538(0x153)));if(_0x3f1648)_0x3f1648[_0x102538(0x175)][_0x102538(0x17d)](_0x102538(0x153));const _0x138007=document[_0x102538(0x13e)](_0x102538(0xa7));_0x138007['innerHTML']='';const _0x1c8812=availableSlotsCache[_0x3eaa83]||[];if(_0x1c8812[_0x102538(0xf8)]===0x0){_0x138007[_0x102538(0x12b)]=_0x102538(0x8f);return;}_0x1c8812['forEach'](_0x2e5665=>{const _0x1d4f8d=_0x102538,_0x262e5a=document['createElement'](_0x1d4f8d(0x180));_0x262e5a['className']='rs-time-btn',_0x262e5a['textContent']=_0x2e5665,_0x262e5a['onclick']=()=>confirmReschedule(_0x2e5665),_0x138007[_0x1d4f8d(0x14a)](_0x262e5a);});}async function confirmReschedule(_0x457fe7){const _0x4bdde6=a3_0x5ad53a,_0x44be25=new Date(selectedRsDate),_0x12806e=_0x44be25[_0x4bdde6(0xcc)]('ru-RU',{'day':'numeric','month':_0x4bdde6(0x187)}),_0x4e0d85=await showCustomConfirm(_0x4bdde6(0x164),'–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x12806e+_0x4bdde6(0x10c)+_0x457fe7+'?',![]);if(!_0x4e0d85)return;closeAllSheets(),showToast(_0x4bdde6(0x135)),lastUserActionTime=Date[_0x4bdde6(0x160)]();const _0xbb3be4=currentSession['dateStr'],_0x104025=currentSession['id'],[_0x8f848d,_0x277368]=currentSession[_0x4bdde6(0x14b)][_0x4bdde6(0x111)](':')[_0x4bdde6(0x9a)](Number),[_0x3e9b13,_0x569d10]=currentSession[_0x4bdde6(0x107)][_0x4bdde6(0x111)](':')[_0x4bdde6(0x9a)](Number),_0x217cb5=_0x3e9b13*0x3c+_0x569d10-(_0x8f848d*0x3c+_0x277368),[_0x557416,_0x1585f7]=_0x457fe7[_0x4bdde6(0x111)](':')[_0x4bdde6(0x9a)](Number),_0x168c47=_0x557416*0x3c+_0x1585f7+_0x217cb5,_0x432b57=Math[_0x4bdde6(0x15a)](_0x168c47/0x3c),_0x333983=_0x168c47%0x3c,_0x40455e=String(_0x432b57)[_0x4bdde6(0xf9)](0x2,'0')+':'+String(_0x333983)['padStart'](0x2,'0'),_0x7aab87=sessions['findIndex'](_0x54cd98=>_0x54cd98['id']===_0x104025);_0x7aab87!==-0x1&&(sessions[_0x7aab87]['dateStr']=selectedRsDate,sessions[_0x7aab87][_0x4bdde6(0x14b)]=_0x457fe7,sessions[_0x7aab87][_0x4bdde6(0x107)]=_0x40455e,reRenderBlocks());try{const _0x15d66a=window[_0x4bdde6(0xb5)]?.[_0x4bdde6(0x16b)],_0x944070=await fetch(API_URL,{'method':_0x4bdde6(0xb2),'body':JSON[_0x4bdde6(0x128)]({'action':_0x4bdde6(0x101),'init_data':_0x15d66a?.['initData']||'','oldSessionId':_0x104025,'oldDate':_0xbb3be4,'newDate':selectedRsDate,'newTime':_0x457fe7,'coachId':currentSession[_0x4bdde6(0x147)]})}),_0x8b2261=await _0x944070[_0x4bdde6(0xaf)]();!_0x8b2261['ok']?(showToast(_0x4bdde6(0x116)),DataManager[_0x4bdde6(0xe4)]()):(showToast(_0x4bdde6(0x173)),DataManager['saveLocally']());}catch(_0x2dc1d5){showToast(_0x4bdde6(0x14f));}}document['addEventListener'](a3_0x5ad53a(0x122),init);