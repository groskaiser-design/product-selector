const a3_0x35baf0=a3_0x57a6;(function(_0x1a7ced,_0xeedc49){const _0x399628=a3_0x57a6,_0x5b1544=_0x1a7ced();while(!![]){try{const _0x532d70=parseInt(_0x399628(0xba))/0x1+parseInt(_0x399628(0x15e))/0x2*(parseInt(_0x399628(0x89))/0x3)+-parseInt(_0x399628(0x129))/0x4*(parseInt(_0x399628(0x15c))/0x5)+parseInt(_0x399628(0xee))/0x6*(-parseInt(_0x399628(0x6d))/0x7)+parseInt(_0x399628(0x9e))/0x8+-parseInt(_0x399628(0x96))/0x9*(parseInt(_0x399628(0x115))/0xa)+-parseInt(_0x399628(0x8a))/0xb*(-parseInt(_0x399628(0xaa))/0xc);if(_0x532d70===_0xeedc49)break;else _0x5b1544['push'](_0x5b1544['shift']());}catch(_0x221245){_0x5b1544['push'](_0x5b1544['shift']());}}}(a3_0x2982,0x6f9fc));const APP_VERSION=a3_0x35baf0(0xd9),API_URL=a3_0x35baf0(0x10a),GRID_H=0x3c,KEY_SESSIONS=a3_0x35baf0(0xb8),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x35baf0(0x85);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x46d23b=a3_0x35baf0,_0x3c3e2a=(function(){let _0x1e6598=!![];return function(_0x1c8ff,_0x2ef9a4){const _0x5e71fb=_0x1e6598?function(){const _0x5c5699=a3_0x57a6;if(_0x2ef9a4){const _0x334e9e=_0x2ef9a4[_0x5c5699(0x7e)](_0x1c8ff,arguments);return _0x2ef9a4=null,_0x334e9e;}}:function(){};return _0x1e6598=![],_0x5e71fb;};}()),_0x23bc2e=_0x3c3e2a(this,function(){const _0x20fd05=a3_0x57a6;return _0x23bc2e[_0x20fd05(0x93)]()[_0x20fd05(0x6c)](_0x20fd05(0x153))[_0x20fd05(0x93)]()['constructor'](_0x23bc2e)[_0x20fd05(0x6c)]('(((.+)+)+)+$');});_0x23bc2e();try{const _0x5cfa05=window[_0x46d23b(0x11f)]?.[_0x46d23b(0x97)];if(!_0x5cfa05)return;_0x5cfa05[_0x46d23b(0x76)](),_0x5cfa05[_0x46d23b(0x83)]();try{_0x5cfa05[_0x46d23b(0x87)]('#050505'),_0x5cfa05[_0x46d23b(0x74)]&&_0x5cfa05[_0x46d23b(0x74)](_0x46d23b(0x15b));}catch(_0x41bb2f){console[_0x46d23b(0xb7)]('Error\x20setting\x20color:',_0x41bb2f);}try{_0x5cfa05[_0x46d23b(0x111)]&&(_0x5cfa05['BackButton']['show'](),_0x5cfa05['BackButton'][_0x46d23b(0xdb)](),_0x5cfa05[_0x46d23b(0x111)][_0x46d23b(0xb6)](function(){const _0x3ff88f=_0x46d23b;window[_0x3ff88f(0xbe)][_0x3ff88f(0xcb)]=_0x3ff88f(0x144);}));}catch(_0x3684d0){console['log'](_0x46d23b(0xdf),_0x3684d0);}try{if(_0x5cfa05['disableVerticalSwipes'])_0x5cfa05['disableVerticalSwipes']();}catch(_0x36f89c){}}catch(_0x113792){console['error'](_0x46d23b(0xbf),_0x113792);}}());function isAdmin(){const _0x3cba2d=a3_0x35baf0;try{const _0x457153=Number(window['Telegram']?.[_0x3cba2d(0x97)]?.['initDataUnsafe']?.[_0x3cba2d(0x10f)]?.['id']);return _0x457153===0xbaf7174;}catch(_0x198887){return![];}}const DataManager={'saveLocally'(){const _0x500e44=a3_0x35baf0;try{localStorage[_0x500e44(0x8d)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x500e44(0x8d)](KEY_CLIENTS,JSON[_0x500e44(0x79)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x500e44(0x79)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x376e55){}},'loadLocal'(){const _0x362202=a3_0x35baf0;try{const _0x2447eb=localStorage[_0x362202(0x145)](KEY_SESSIONS);if(_0x2447eb)sessions=JSON[_0x362202(0x9f)](_0x2447eb);const _0xdc371b=localStorage[_0x362202(0x145)](KEY_CLIENTS);if(_0xdc371b)clients=JSON[_0x362202(0x9f)](_0xdc371b);const _0x35c7d7=localStorage['getItem'](KEY_SETTINGS);if(_0x35c7d7){const _0x284b7b=JSON[_0x362202(0x9f)](_0x35c7d7);if(_0x284b7b['pattern'])availabilityPattern=_0x284b7b[_0x362202(0x110)];if(_0x284b7b['ranges'])specialRanges=_0x284b7b[_0x362202(0x155)];if(_0x284b7b[_0x362202(0x136)])dateExceptions=_0x284b7b[_0x362202(0x136)];}}catch(_0x47e30b){}},async 'syncLoad'(){const _0x54b07d=a3_0x35baf0,_0x400ad5=new Date(),_0x59ea0b=_0x400ad5[_0x54b07d(0x13b)]()+'-'+String(_0x400ad5['getMonth']()+0x1)[_0x54b07d(0x100)](0x2,'0'),_0x4b5a77=new Date(_0x400ad5);_0x4b5a77[_0x54b07d(0x135)](_0x400ad5['getMonth']()+0x1);const _0xe0a5b3=_0x4b5a77[_0x54b07d(0x13b)]()+'-'+String(_0x4b5a77[_0x54b07d(0xd3)]()+0x1)[_0x54b07d(0x100)](0x2,'0'),_0x40b8d5=Date['now']();try{const _0x4ba6c6=window['Telegram']?.[_0x54b07d(0x97)],_0x3fea2c=_0x4ba6c6?.[_0x54b07d(0x114)]||'',[_0x2efffb,_0x34cbd1]=await Promise[_0x54b07d(0x82)]([fetch(API_URL,{'method':_0x54b07d(0x75),'body':JSON['stringify']({'action':_0x54b07d(0x131),'init_data':_0x3fea2c,'month_str':_0x59ea0b})})[_0x54b07d(0xbb)](_0x58c9aa=>_0x58c9aa[_0x54b07d(0xb0)]()),fetch(API_URL,{'method':_0x54b07d(0x75),'body':JSON[_0x54b07d(0x79)]({'action':_0x54b07d(0x131),'init_data':_0x3fea2c,'month_str':_0xe0a5b3})})[_0x54b07d(0xbb)](_0x235f44=>_0x235f44[_0x54b07d(0xb0)]())]);if(lastUserActionTime>_0x40b8d5){console[_0x54b07d(0xb7)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x2efffb['ok'])this[_0x54b07d(0xe8)](_0x2efffb[_0x54b07d(0x15d)],_0x59ea0b);if(_0x34cbd1['ok'])this['applyData'](_0x34cbd1['data'],_0xe0a5b3);this[_0x54b07d(0xf4)]();}catch(_0x2517a8){}},'applyData'(_0x137ff6,_0x13a202){const _0xfbf388=a3_0x35baf0;if(!_0x137ff6)return;if(_0x137ff6[_0xfbf388(0x6f)]){if(_0x137ff6[_0xfbf388(0x6f)][_0xfbf388(0x110)])availabilityPattern=_0x137ff6[_0xfbf388(0x6f)][_0xfbf388(0x110)];if(_0x137ff6[_0xfbf388(0x6f)]['ranges'])specialRanges=_0x137ff6[_0xfbf388(0x6f)][_0xfbf388(0x155)];if(_0x137ff6['settings'][_0xfbf388(0x136)])dateExceptions=_0x137ff6[_0xfbf388(0x6f)][_0xfbf388(0x136)];}if(_0x137ff6['clients']&&Array[_0xfbf388(0xeb)](_0x137ff6[_0xfbf388(0x101)]))clients=_0x137ff6[_0xfbf388(0x101)];_0x137ff6[_0xfbf388(0xe3)]&&(coachProfiles={...coachProfiles,..._0x137ff6[_0xfbf388(0xe3)]}),_0x137ff6['calendar']&&(sessions=sessions[_0xfbf388(0x90)](_0x516a58=>!_0x516a58['dateStr'][_0xfbf388(0x157)](_0x13a202)),Object['keys'](_0x137ff6[_0xfbf388(0x160)])[_0xfbf388(0xdc)](_0x4c605a=>{const _0x265fe1=_0xfbf388,_0x58ba3c=_0x137ff6[_0x265fe1(0x160)][_0x4c605a];_0x58ba3c[_0x265fe1(0xdc)](_0x5a0f4e=>{const _0x4ac749=_0x265fe1;sessions['push']({'id':_0x5a0f4e['i'],'clientId':_0x5a0f4e['c'],'coachId':_0x5a0f4e[_0x4ac749(0xaf)],'dateStr':_0x13a202+'-'+_0x4c605a[_0x4ac749(0x100)](0x2,'0'),'start':_0x5a0f4e['s'],'end':_0x5a0f4e['e'],'note':_0x5a0f4e['n']||'','status':_0x5a0f4e['st']||_0x4ac749(0xda),'seriesId':_0x5a0f4e['sid']});});})),reRenderBlocks();}};function init(){const _0x491281=a3_0x35baf0;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x491281(0x7a)](_0x491281(0xd4))[_0x491281(0xe4)](_0x491281(0xbc),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x491281(0x156)]();}function renderTimeColumn(){const _0x554034=a3_0x35baf0,_0x1a9267=document[_0x554034(0x7a)](_0x554034(0x14b)),_0x5233a5=document['getElementById'](_0x554034(0xce));_0x1a9267[_0x554034(0xf1)]='',_0x1a9267['appendChild'](_0x5233a5);for(let _0x184695=0x0;_0x184695<0x18;_0x184695++){const _0x1d2b41=document[_0x554034(0xe1)](_0x554034(0x70));_0x1d2b41[_0x554034(0x88)]=_0x554034(0x119);if(_0x184695>0x0)_0x1d2b41[_0x554034(0xf1)]=_0x554034(0x84)+String(_0x184695)['padStart'](0x2,'0')+_0x554034(0x77);_0x1a9267[_0x554034(0x128)](_0x1d2b41);}}function renderDayRange(_0x517c1b,_0x445664){const _0x21d7b0=a3_0x35baf0,_0xd8bad3=document[_0x21d7b0(0x7a)](_0x21d7b0(0x143)),_0x5dfd33=document[_0x21d7b0(0x7a)](_0x21d7b0(0x10c)),_0x2f8d91=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x180433=new Date();_0x180433['setHours'](0x0,0x0,0x0,0x0);const _0x27aeb6=getLocalDateStr(new Date());for(let _0x19b99a=_0x517c1b;_0x19b99a<=_0x445664;_0x19b99a++){const _0x1859c5=new Date(_0x180433);_0x1859c5[_0x21d7b0(0xd8)](_0x1859c5[_0x21d7b0(0x94)]()+_0x19b99a);const _0x49e623=getLocalDateStr(_0x1859c5);let _0x4a720d=_0x1859c5[_0x21d7b0(0x105)]()-0x1;if(_0x4a720d===-0x1)_0x4a720d=0x6;const _0x5e35ac=_0x49e623===_0x27aeb6,_0x23629f=document[_0x21d7b0(0xe1)]('div');_0x23629f[_0x21d7b0(0x88)]=_0x21d7b0(0x99)+(_0x5e35ac?_0x21d7b0(0x72):''),_0x23629f[_0x21d7b0(0xec)](_0x21d7b0(0x14e),_0x49e623),_0x23629f['innerHTML']='<div\x20class=\x22dch-day\x22>'+_0x2f8d91[_0x4a720d]+_0x21d7b0(0xe2)+_0x1859c5[_0x21d7b0(0x94)]()+'</div>',_0xd8bad3[_0x21d7b0(0x128)](_0x23629f);const _0x576a08=document[_0x21d7b0(0xe1)](_0x21d7b0(0x70));_0x576a08[_0x21d7b0(0x88)]=_0x21d7b0(0xc9)+(_0x5e35ac?'today':''),_0x576a08[_0x21d7b0(0xec)](_0x21d7b0(0x14e),_0x49e623),_0x576a08['setAttribute'](_0x21d7b0(0x104),_0x4a720d),_0x5dfd33[_0x21d7b0(0x128)](_0x576a08);}}function reRenderBlocks(){const _0x1d4c89=a3_0x35baf0;document[_0x1d4c89(0x162)](_0x1d4c89(0xa4))[_0x1d4c89(0xdc)](_0x548b8b=>{const _0x5be9dd=_0x1d4c89;_0x548b8b[_0x5be9dd(0x162)](_0x5be9dd(0x13a))[_0x5be9dd(0xdc)](_0x9662c4=>_0x9662c4[_0x5be9dd(0x141)]());const _0xbfd023=_0x548b8b['getAttribute'](_0x5be9dd(0x14e)),_0x1b3dcb=parseInt(_0x548b8b[_0x5be9dd(0xff)]('data-day-idx')),_0x2bb175=Math[_0x5be9dd(0x159)](_0x548b8b['offsetLeft']);(availabilityPattern[_0x1b3dcb]||[])['forEach'](_0x591ff3=>{const _0x57db4b=_0x5be9dd,_0x49f026=document[_0x57db4b(0xe1)](_0x57db4b(0x70));_0x49f026['className']='blocked-slot\x20stripe-bg',_0x49f026['style'][_0x57db4b(0x147)]=_0x591ff3*GRID_H+'px',_0x49f026[_0x57db4b(0x154)][_0x57db4b(0x122)]='-'+_0x2bb175+_0x57db4b(0xf7)+_0x591ff3*GRID_H+'px',_0x548b8b[_0x57db4b(0x128)](_0x49f026);});if(specialRanges[_0x5be9dd(0x81)]>0x0){const _0xbad3e1=new Date(_0xbfd023+_0x5be9dd(0x14f))['getTime'](),_0xe0181d=new Date(_0xbfd023+_0x5be9dd(0x146))[_0x5be9dd(0x71)]();specialRanges[_0x5be9dd(0xdc)](_0x21cca7=>{const _0x433dd9=_0x5be9dd,_0x332f32=new Date(_0x21cca7['start'])[_0x433dd9(0x71)](),_0x54105d=new Date(_0x21cca7[_0x433dd9(0xc1)])[_0x433dd9(0x71)](),_0x1d23f1=Math[_0x433dd9(0xf6)](_0xbad3e1,_0x332f32),_0x48e1c7=Math[_0x433dd9(0xed)](_0xe0181d,_0x54105d);if(_0x1d23f1<_0x48e1c7){const _0x29be96=(_0x1d23f1-_0xbad3e1)/0x36ee80*GRID_H,_0x5f2863=(_0x48e1c7-_0x1d23f1)/0x36ee80*GRID_H,_0x139aaa=document[_0x433dd9(0xe1)](_0x433dd9(0x70));_0x5f2863>=23.5*GRID_H?(_0x139aaa[_0x433dd9(0x88)]='day-off-overlay\x20stripe-bg',_0x139aaa[_0x433dd9(0x154)][_0x433dd9(0x122)]='-'+_0x2bb175+'px\x200px'):(_0x139aaa['className']=_0x433dd9(0xc0),_0x139aaa['style'][_0x433dd9(0x147)]=_0x29be96+'px',_0x139aaa[_0x433dd9(0x154)][_0x433dd9(0xf0)]=_0x5f2863+'px',_0x139aaa[_0x433dd9(0x154)][_0x433dd9(0x122)]='-'+_0x2bb175+_0x433dd9(0xf7)+_0x29be96+'px'),_0x548b8b['appendChild'](_0x139aaa);}});}renderEventsForColumn(_0x548b8b,_0xbfd023);});}function renderEventsForColumn(_0x5cff0c,_0x225298){const _0x57e6e6=a3_0x35baf0,_0x142984=sessions[_0x57e6e6(0x90)](_0x26ef04=>_0x26ef04[_0x57e6e6(0x9b)]===_0x225298),_0x3d1d50=_0x142984[_0x57e6e6(0x8b)](_0x254e54=>{const _0x45fe62=_0x57e6e6,[_0x1f4c25,_0x2485f0]=_0x254e54[_0x45fe62(0x152)][_0x45fe62(0xd5)](':')['map'](Number),[_0x302d0f,_0x594379]=_0x254e54[_0x45fe62(0xc1)][_0x45fe62(0xd5)](':')[_0x45fe62(0x8b)](Number);return{'data':_0x254e54,'start':_0x1f4c25*0x3c+_0x2485f0,'end':_0x302d0f*0x3c+_0x594379,'colIndex':0x0};});_0x3d1d50[_0x57e6e6(0x12b)]((_0x14a827,_0x4842e6)=>_0x14a827[_0x57e6e6(0x152)]-_0x4842e6['start']||_0x4842e6[_0x57e6e6(0xc1)]-_0x4842e6[_0x57e6e6(0x152)]-(_0x14a827[_0x57e6e6(0xc1)]-_0x14a827['start']));const _0x599702=[];_0x3d1d50[_0x57e6e6(0xdc)](_0x10d100=>{const _0x2c5dff=_0x57e6e6;let _0x272b84=![];for(let _0x577744=0x0;_0x577744<_0x599702[_0x2c5dff(0x81)];_0x577744++){const _0x861a40=_0x599702[_0x577744];if(_0x10d100[_0x2c5dff(0x152)]>=_0x861a40[_0x861a40[_0x2c5dff(0x81)]-0x1][_0x2c5dff(0xc1)]){_0x861a40['push'](_0x10d100),_0x10d100['colIndex']=_0x577744,_0x272b84=!![];break;}}!_0x272b84&&(_0x599702[_0x2c5dff(0xc4)]([_0x10d100]),_0x10d100[_0x2c5dff(0xac)]=_0x599702[_0x2c5dff(0x81)]-0x1);}),_0x3d1d50[_0x57e6e6(0xdc)](_0x9700e2=>{const _0x7964c9=_0x57e6e6;let _0x2e4a75=0x0;_0x3d1d50[_0x7964c9(0xdc)](_0x34118a=>{const _0x3eadca=_0x7964c9;if(Math[_0x3eadca(0xf6)](_0x9700e2[_0x3eadca(0x152)],_0x34118a[_0x3eadca(0x152)])<Math['min'](_0x9700e2[_0x3eadca(0xc1)],_0x34118a[_0x3eadca(0xc1)])&&_0x34118a[_0x3eadca(0xac)]>_0x2e4a75)_0x2e4a75=_0x34118a[_0x3eadca(0xac)];});const _0x488749=_0x2e4a75+0x1,_0x51cebd=0x64/_0x488749,_0x34057d=_0x9700e2[_0x7964c9(0xac)]*_0x51cebd,_0x16f59b=document[_0x7964c9(0xe1)](_0x7964c9(0x70)),_0x55dc26=_0x9700e2[_0x7964c9(0x15d)];let _0x273449=_0x7964c9(0x11e);if(clients&&clients['length']>0x0){const _0xbb1a2f=clients[_0x7964c9(0x12f)](_0x2f37ed=>String(_0x2f37ed['id'])===String(_0x55dc26[_0x7964c9(0x142)]));if(_0xbb1a2f&&_0xbb1a2f[_0x7964c9(0x150)])_0x273449=_0xbb1a2f[_0x7964c9(0x150)];}const _0x18f6c9=_0x55dc26['status']===_0x7964c9(0xca),_0x35733f=_0x18f6c9?0x1:0.45;_0x16f59b[_0x7964c9(0x88)]=_0x7964c9(0x113)+(_0x18f6c9?'\x20status-completed':''),_0x16f59b[_0x7964c9(0x154)][_0x7964c9(0x107)]=hexToRgba(_0x273449,_0x35733f),_0x16f59b[_0x7964c9(0x154)][_0x7964c9(0xfa)]=_0x273449;const _0x5f5962=_0x9700e2['start']/0x3c*GRID_H,_0x138391=(_0x9700e2['end']-_0x9700e2['start'])/0x3c*GRID_H;_0x16f59b['style'][_0x7964c9(0x147)]=_0x5f5962+'px',_0x16f59b[_0x7964c9(0x154)]['height']=Math[_0x7964c9(0xf6)](_0x138391,0x14)+'px',_0x16f59b[_0x7964c9(0x154)][_0x7964c9(0x158)]=_0x7964c9(0x12a)+_0x51cebd+'%\x20-\x204px)',_0x16f59b['style'][_0x7964c9(0xa1)]=_0x7964c9(0x12a)+_0x34057d+_0x7964c9(0x12d),_0x16f59b['style'][_0x7964c9(0x6b)]=0xa+_0x9700e2[_0x7964c9(0xac)];if(_0x51cebd<0x55)_0x16f59b[_0x7964c9(0xfb)][_0x7964c9(0x106)]('mini');let _0x3fc4bf='';if(_0x55dc26[_0x7964c9(0x125)])_0x3fc4bf+=_0x7964c9(0x10d);if(_0x18f6c9)_0x3fc4bf+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x16f59b[_0x7964c9(0xf1)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x55dc26[_0x7964c9(0x152)]+_0x7964c9(0xe9)+_0x55dc26[_0x7964c9(0xc1)]+_0x7964c9(0x102)+_0x3fc4bf+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x16f59b[_0x7964c9(0xd6)]=_0x15b74e=>{const _0x367524=_0x7964c9;_0x15b74e[_0x367524(0xae)](),openDetails(_0x55dc26);},_0x5cff0c[_0x7964c9(0x128)](_0x16f59b);});}function openAnalytics(){const _0x49b6db=a3_0x35baf0,_0x41373d=document['querySelector'](_0x49b6db(0x7f));setAnalyticsPeriod(_0x49b6db(0xd0),_0x41373d),openSheet(_0x49b6db(0xfe));}function setAnalyticsPeriod(_0x3c66a9,_0x210cac){const _0x2c36c2=a3_0x35baf0;currentAnPeriod=_0x3c66a9,document[_0x2c36c2(0x162)](_0x2c36c2(0x7f))[_0x2c36c2(0xdc)](_0x288858=>_0x288858[_0x2c36c2(0xfb)][_0x2c36c2(0x141)](_0x2c36c2(0x14d)));if(_0x210cac)_0x210cac[_0x2c36c2(0xfb)][_0x2c36c2(0x106)]('active');const _0x186708=document[_0x2c36c2(0x7a)]('anCustomDates');_0x186708[_0x2c36c2(0x154)][_0x2c36c2(0xd2)]=_0x3c66a9===_0x2c36c2(0x130)?'flex':_0x2c36c2(0xc2);const _0x79626a=new Date();let _0x580711=new Date(),_0x22ad99=new Date();if(_0x3c66a9===_0x2c36c2(0xd0))_0x580711=getStartOfWeek(_0x79626a),_0x22ad99=new Date(_0x580711),_0x22ad99[_0x2c36c2(0xd8)](_0x22ad99[_0x2c36c2(0x94)]()+0x6);else{if(_0x3c66a9===_0x2c36c2(0x73))_0x580711=new Date(_0x79626a[_0x2c36c2(0x13b)](),_0x79626a['getMonth'](),0x1),_0x22ad99=new Date(_0x79626a[_0x2c36c2(0x13b)](),_0x79626a[_0x2c36c2(0xd3)]()+0x1,0x0);else{!document[_0x2c36c2(0x7a)](_0x2c36c2(0x132))[_0x2c36c2(0xb5)]&&(document[_0x2c36c2(0x7a)]('anStart')[_0x2c36c2(0xb5)]=getLocalDateStr(_0x79626a),document[_0x2c36c2(0x7a)](_0x2c36c2(0x11a))[_0x2c36c2(0xb5)]=getLocalDateStr(_0x79626a));refreshAnalytics();return;}}document[_0x2c36c2(0x7a)](_0x2c36c2(0x132))[_0x2c36c2(0xb5)]=getLocalDateStr(_0x580711),document[_0x2c36c2(0x7a)](_0x2c36c2(0x11a))[_0x2c36c2(0xb5)]=getLocalDateStr(_0x22ad99),refreshAnalytics();}function a3_0x2982(){const _0x1ab1f3=['</span>\x20/\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','applyData','\x20-\x20','cancelled','isArray','setAttribute','min','6qiMplh','globalTimeLine','height','innerHTML','detTime','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','saveLocally','</div>','max','px\x20-','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','now','borderLeftColor','classList','clientWidth','headerMonth','analyticsSheet','getAttribute','padStart','clients','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','data-day-idx','getDay','add','backgroundColor','\x20–≤\x20','scrollLeft','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','substring','gridColumns','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','querySelector','user','pattern','BackButton','detNote','event-card','initData','10YpYcTp','var(--acc-blue)','join','ccText','time-label','anEnd','long','block','toLocaleDateString','#0a84ff','Telegram','firstChild','setHours','backgroundPosition','offsetLeft','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','seriesId','toLocaleString','detailsSheet','appendChild','4CkPEsW','calc(','sort','anTotalStats','%\x20+\x202px)','offsetWidth','find','custom','client_load','anStart','scrollWidth','substr','setMonth','exceptions','numeric','analyticsList','rsDatesTrack','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','getFullYear','rescheduleSheet','toUpperCase','ru-RU','fontWeight','strokeDashoffset','remove','clientId','daysHeaderTrack','router.html','getItem','T23:59:59','top','total','scrollTo','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','timeColumn','cancelHint','active','data-date','T00:00:00','color','entries','start','(((.+)+)+)+$','style','ranges','syncLoad','startsWith','width','round','findIndex','#050505','2546165ZLECfT','data','167798RVKbRF','createDocumentFragment','calendar','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','querySelectorAll','getHours','zIndex','search','4933299aihwSs','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','settings','div','getTime','today','month','setBackgroundColor','POST','ready',':00</span>','client_cancel','stringify','getElementById','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','button','apply','.period-switch\x20.p-btn','DOMContentLoaded','length','all','expand','<span>','uc_client_list','textContent','setHeaderColor','className','12AArLPo','123970OhnlqI','map','coachId','setItem','rgba(10,\x20132,\x20255,\x20','cancel_window','filter','.btn-reschedule','insertBefore','toString','getDate','<div\x20class=\x22dch-day\x22>','4469445kNxNXu','WebApp','slice','day-col-header\x20','show','dateStr','.day-col-header[data-date=\x22','test','7149824iBjAkG','parse','visible','left','rsSlotsGrid','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','.day-column','keys','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','ccTitle','\x20—á.','324aUrlRJ','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','colIndex','status','stopPropagation','cid','json','customConfirm','Unknown','getMinutes','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','value','onClick','log','uc_client_sessions','detDate','634193zCxplL','then','scroll','client-stat-card','location','Critical\x20TMA\x20Error:','blocked-range-part\x20stripe-bg','end','none','cancelContainer','push','note','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','day-column\x20','completed','href','done','detStatus','timeLineBadge','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','week','open','display','getMonth','matrixViewport','split','onclick','<div\x20class=\x22rs-day-name\x22>','setDate','v9.5-CLIENT-ANALYTICS','planned','offClick','forEach','#ff453a','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','Error\x20setting\x20back\x20button:','600','createElement','</div><div\x20class=\x22dch-num\x22>','coach_profiles','addEventListener','rs-time-btn'];a3_0x2982=function(){return _0x1ab1f3;};return a3_0x2982();}function refreshAnalytics(){const _0x447c9c=a3_0x35baf0,_0x26b3f1=document['getElementById'](_0x447c9c(0x132))[_0x447c9c(0xb5)],_0x43ba68=document['getElementById'](_0x447c9c(0x11a))['value'];if(!_0x26b3f1||!_0x43ba68)return;const _0x172d7f=sessions['filter'](_0x248b21=>_0x248b21['dateStr']>=_0x26b3f1&&_0x248b21[_0x447c9c(0x9b)]<=_0x43ba68&&_0x248b21[_0x447c9c(0xad)]!==_0x447c9c(0xea)),_0x468517=_0x172d7f[_0x447c9c(0x81)],_0x4353bd=_0x172d7f['filter'](_0x301e6e=>_0x301e6e['status']===_0x447c9c(0xca))[_0x447c9c(0x81)],_0x42a8dc=_0x468517>0x0?Math['round'](_0x4353bd/_0x468517*0x64):0x0;document[_0x447c9c(0x7a)]('anPercent')[_0x447c9c(0x86)]=_0x42a8dc+'%',document[_0x447c9c(0x7a)](_0x447c9c(0x12c))[_0x447c9c(0x86)]=_0x4353bd+'\x20–∏–∑\x20'+_0x468517+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0xa54784=document['getElementById']('anDonutCircle'),_0x58c3db=0x2*Math['PI']*0x23,_0x27b943=_0x58c3db-_0x42a8dc/0x64*_0x58c3db;_0xa54784[_0x447c9c(0x154)][_0x447c9c(0x140)]=_0x27b943;const _0x1e8e46={};_0x172d7f[_0x447c9c(0xdc)](_0xb2689d=>{const _0x37779a=_0x447c9c,_0x69c59b=_0xb2689d[_0x37779a(0x8c)]||_0x37779a(0xb2);if(!_0x1e8e46[_0x69c59b]){const _0x5b0cd3='#'+_0x69c59b[_0x37779a(0x93)]()[_0x37779a(0x134)](0x0,0x6);_0x1e8e46[_0x69c59b]={'total':0x0,'done':0x0,'color':_0x5b0cd3};}_0x1e8e46[_0x69c59b][_0x37779a(0x148)]++;if(_0xb2689d[_0x37779a(0xad)]===_0x37779a(0xca))_0x1e8e46[_0x69c59b][_0x37779a(0xcc)]++;});const _0x222395=document[_0x447c9c(0x7a)](_0x447c9c(0x138));_0x222395[_0x447c9c(0xf1)]='';const _0x2577db=Object[_0x447c9c(0x151)](_0x1e8e46)[_0x447c9c(0x12b)]((_0x52e263,_0x2e1fd1)=>_0x2e1fd1[0x1][_0x447c9c(0x148)]-_0x52e263[0x1]['total']);if(_0x2577db[_0x447c9c(0x81)]===0x0){_0x222395[_0x447c9c(0xf1)]=_0x447c9c(0xf8);return;}_0x2577db[_0x447c9c(0xdc)](([_0x25e432,_0x4ee657])=>{const _0x26b497=_0x447c9c,_0x5b015e=Math[_0x26b497(0x159)](_0x4ee657[_0x26b497(0xcc)]/_0x4ee657['total']*0x64),_0x261168=document[_0x26b497(0xe1)](_0x26b497(0x70));_0x261168[_0x26b497(0x88)]=_0x26b497(0xbd),_0x261168['style']['borderLeftColor']=_0x4ee657[_0x26b497(0x150)],_0x261168[_0x26b497(0xf1)]=_0x26b497(0x161)+_0x25e432[_0x26b497(0x134)](0x0,0x5)+_0x26b497(0xe7)+_0x4ee657[_0x26b497(0xcc)]+_0x26b497(0xe6)+_0x4ee657[_0x26b497(0x148)]+_0x26b497(0xcf)+_0x5b015e+_0x26b497(0xab),_0x222395[_0x26b497(0x128)](_0x261168);});}function openDetails(_0x1b2cce){const _0x26d12a=a3_0x35baf0;currentSession=_0x1b2cce;const _0x13dc9b=new Date(_0x1b2cce['dateStr']),_0x4a54e1=_0x13dc9b[_0x26d12a(0x11d)](_0x26d12a(0x13e),{'weekday':_0x26d12a(0x11b),'day':_0x26d12a(0x137),'month':_0x26d12a(0x11b)});document[_0x26d12a(0x7a)](_0x26d12a(0xb9))[_0x26d12a(0x86)]=_0x4a54e1['charAt'](0x0)[_0x26d12a(0x13d)]()+_0x4a54e1[_0x26d12a(0x98)](0x1),document[_0x26d12a(0x7a)](_0x26d12a(0xf2))[_0x26d12a(0x86)]=_0x1b2cce[_0x26d12a(0x152)]+_0x26d12a(0xe9)+_0x1b2cce['end'],document[_0x26d12a(0x7a)](_0x26d12a(0x112))['textContent']=_0x1b2cce[_0x26d12a(0xc5)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x354da1=document['getElementById'](_0x26d12a(0xcd)),_0x56d1c4=document[_0x26d12a(0x7a)](_0x26d12a(0xc3)),_0x507bd2=_0x56d1c4[_0x26d12a(0x10e)]('.btn-cancel'),_0x117026=_0x56d1c4[_0x26d12a(0x10e)](_0x26d12a(0x91)),_0x18b9d6=document[_0x26d12a(0x7a)](_0x26d12a(0x14c));if(_0x1b2cce[_0x26d12a(0xad)]===_0x26d12a(0xca))_0x354da1[_0x26d12a(0x86)]=_0x26d12a(0xc8),_0x354da1['style'][_0x26d12a(0x150)]='var(--acc-green)',_0x56d1c4[_0x26d12a(0x154)][_0x26d12a(0xd2)]=_0x26d12a(0xc2);else{_0x354da1[_0x26d12a(0x86)]=_0x26d12a(0x6e),_0x354da1['style'][_0x26d12a(0x150)]=_0x26d12a(0x116),_0x56d1c4[_0x26d12a(0x154)][_0x26d12a(0xd2)]='block';const _0x535a42=new Date(_0x1b2cce[_0x26d12a(0x9b)]+'T'+_0x1b2cce[_0x26d12a(0x152)]),_0x49e5a5=new Date(),_0x1a14cb=(_0x535a42-_0x49e5a5)/(0x3e8*0x3c*0x3c),_0x5ab5b7=coachProfiles[_0x1b2cce['coachId']]&&coachProfiles[_0x1b2cce[_0x26d12a(0x8c)]][_0x26d12a(0x8f)]?parseInt(coachProfiles[_0x1b2cce[_0x26d12a(0x8c)]][_0x26d12a(0x8f)]):0x18;if(_0x5ab5b7===0x0||_0x1a14cb>=_0x5ab5b7)_0x507bd2[_0x26d12a(0x154)][_0x26d12a(0xd2)]=_0x26d12a(0x11c),_0x117026[_0x26d12a(0x154)][_0x26d12a(0xd2)]=_0x26d12a(0x11c),_0x18b9d6[_0x26d12a(0x154)][_0x26d12a(0xd2)]='none';else{_0x507bd2[_0x26d12a(0x154)][_0x26d12a(0xd2)]='none',_0x117026[_0x26d12a(0x154)]['display']=_0x26d12a(0xc2),_0x18b9d6[_0x26d12a(0x154)][_0x26d12a(0xd2)]=_0x26d12a(0x11c);let _0x56fb36=_0x5ab5b7===0x0?_0x26d12a(0x124):'–∑–∞\x20'+_0x5ab5b7+_0x26d12a(0xa9);_0x18b9d6[_0x26d12a(0x86)]='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x56fb36+_0x26d12a(0xde);}}document[_0x26d12a(0x7a)]('overlay')[_0x26d12a(0xfb)][_0x26d12a(0x106)](_0x26d12a(0x14d)),document[_0x26d12a(0x7a)]('detailsSheet')['classList']['add'](_0x26d12a(0xd1));}function closeAllSheets(){const _0x21b278=a3_0x35baf0;document[_0x21b278(0x7a)]('overlay')[_0x21b278(0xfb)][_0x21b278(0x141)]('active'),document[_0x21b278(0x162)]('.sheet')[_0x21b278(0xdc)](_0xff31d5=>_0xff31d5[_0x21b278(0xfb)][_0x21b278(0x141)]('open'));}function openSheet(_0x41b80a){const _0x333a78=a3_0x35baf0;document[_0x333a78(0x7a)]('overlay')[_0x333a78(0xfb)]['add'](_0x333a78(0x14d)),document['getElementById'](_0x41b80a)[_0x333a78(0xfb)][_0x333a78(0x106)](_0x333a78(0xd1));}function getLocalDateStr(_0x8a8c98){const _0x371321=a3_0x35baf0,_0x515d60=_0x8a8c98[_0x371321(0x13b)](),_0x5c61db=String(_0x8a8c98[_0x371321(0xd3)]()+0x1)[_0x371321(0x100)](0x2,'0'),_0x2f4f5a=String(_0x8a8c98[_0x371321(0x94)]())[_0x371321(0x100)](0x2,'0');return _0x515d60+'-'+_0x5c61db+'-'+_0x2f4f5a;}function getStartOfWeek(_0x9870b2){const _0x241786=a3_0x35baf0,_0x73de98=new Date(_0x9870b2),_0x533b00=_0x73de98[_0x241786(0x105)](),_0x424182=_0x73de98['getDate']()-_0x533b00+(_0x533b00===0x0?-0x6:0x1);return _0x73de98[_0x241786(0xd8)](_0x424182),_0x73de98[_0x241786(0x121)](0x0,0x0,0x0,0x0),_0x73de98;}function scrollToToday(){const _0x58baa6=getLocalDateStr(new Date());setTimeout(()=>{const _0x2bceb0=a3_0x57a6,_0x57d8cf=document[_0x2bceb0(0x10e)](_0x2bceb0(0x9c)+_0x58baa6+'\x22]');if(_0x57d8cf){const _0x237561=document['getElementById'](_0x2bceb0(0xd4)),_0x481bd6=_0x57d8cf[_0x2bceb0(0x123)]-_0x237561[_0x2bceb0(0xfc)]/0x2+_0x57d8cf[_0x2bceb0(0x12e)]/0x2;_0x237561[_0x2bceb0(0x149)]({'left':_0x481bd6,'behavior':'auto'}),_0x237561['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function a3_0x57a6(_0x3a71a5,_0x513e76){_0x3a71a5=_0x3a71a5-0x6b;const _0x15a7cb=a3_0x2982();let _0x53a863=_0x15a7cb[_0x3a71a5];return _0x53a863;}function updateClock(){const _0x449623=a3_0x35baf0,_0x1fc0fc=new Date(),_0x2fb775=document['getElementById'](_0x449623(0xef)),_0xc6aa56=document[_0x449623(0x7a)](_0x449623(0xce)),_0x5898dc=(_0x1fc0fc[_0x449623(0x163)]()*0x3c+_0x1fc0fc[_0x449623(0xb3)]())/0x3c*GRID_H;_0x2fb775[_0x449623(0x154)][_0x449623(0x147)]=_0x5898dc+'px',_0x2fb775[_0x449623(0x154)][_0x449623(0xd2)]=_0x449623(0x11c),_0xc6aa56[_0x449623(0x154)]['top']=_0x5898dc+'px',_0xc6aa56[_0x449623(0x154)][_0x449623(0xd2)]='block',_0xc6aa56[_0x449623(0x86)]=String(_0x1fc0fc[_0x449623(0x163)]())['padStart'](0x2,'0')+':'+String(_0x1fc0fc[_0x449623(0xb3)]())[_0x449623(0x100)](0x2,'0');}function onScroll(){const _0x45d2b2=a3_0x35baf0,_0x1514dd=document[_0x45d2b2(0x7a)](_0x45d2b2(0xd4)),_0x11462d=document[_0x45d2b2(0x162)]('.day-col-header');for(let _0x35dab6 of _0x11462d)if(_0x35dab6[_0x45d2b2(0x123)]>=_0x1514dd[_0x45d2b2(0x109)]){const _0xcefd5a=new Date(_0x35dab6['getAttribute'](_0x45d2b2(0x14e)));document['getElementById'](_0x45d2b2(0xfd))[_0x45d2b2(0x86)]=_0xcefd5a[_0x45d2b2(0x126)]('ru',{'month':_0x45d2b2(0x11b)})[_0x45d2b2(0x13d)]()+'\x20'+_0xcefd5a[_0x45d2b2(0x13b)]();break;}}function showToast(_0x223ea9){const _0x5afe89=a3_0x35baf0,_0x589056=document[_0x5afe89(0x7a)]('toast');_0x589056['textContent']=_0x223ea9,_0x589056[_0x5afe89(0xfb)][_0x5afe89(0x106)](_0x5afe89(0x9a)),setTimeout(()=>_0x589056['classList'][_0x5afe89(0x141)](_0x5afe89(0x9a)),0x7d0);}function handleInfiniteScroll(){const _0x459365=a3_0x35baf0,_0x1243e3=document['getElementById']('matrixViewport'),_0x25d98f=_0x1243e3[_0x459365(0x109)],_0x1b1ef0=_0x1243e3[_0x459365(0x133)],_0x43b1c8=_0x1243e3[_0x459365(0xfc)];if(_0x1b1ef0-(_0x25d98f+_0x43b1c8)<0x12c){const _0xd2c04c=endOffset;endOffset+=0xe,renderDayRange(_0xd2c04c+0x1,endOffset),reRenderBlocks();}if(_0x25d98f<0x12c){const _0x5ca360=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5ca360-0x1),_0x1243e3[_0x459365(0x109)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x10e8f1,_0x5a4124){const _0x4bf3dd=a3_0x35baf0,_0x531712=document[_0x4bf3dd(0x7a)]('daysHeaderTrack'),_0x975d62=document[_0x4bf3dd(0x7a)](_0x4bf3dd(0x10c)),_0x4c93e1=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x5a857b=new Date();_0x5a857b[_0x4bf3dd(0x121)](0x0,0x0,0x0,0x0);const _0xf4c2f6=getLocalDateStr(new Date()),_0xb5bd14=document[_0x4bf3dd(0x15f)](),_0x1c67bf=document[_0x4bf3dd(0x15f)]();for(let _0x376281=_0x10e8f1;_0x376281<=_0x5a4124;_0x376281++){const _0x54e403=new Date(_0x5a857b);_0x54e403['setDate'](_0x54e403[_0x4bf3dd(0x94)]()+_0x376281);const _0x59a2ea=getLocalDateStr(_0x54e403);let _0x22e280=_0x54e403['getDay']()-0x1;if(_0x22e280===-0x1)_0x22e280=0x6;const _0xd8be0e=_0x59a2ea===_0xf4c2f6,_0x4210a6=document[_0x4bf3dd(0xe1)](_0x4bf3dd(0x70));_0x4210a6[_0x4bf3dd(0x88)]='day-col-header\x20'+(_0xd8be0e?'today':''),_0x4210a6[_0x4bf3dd(0xec)](_0x4bf3dd(0x14e),_0x59a2ea),_0x4210a6[_0x4bf3dd(0xf1)]=_0x4bf3dd(0x95)+_0x4c93e1[_0x22e280]+_0x4bf3dd(0xe2)+_0x54e403[_0x4bf3dd(0x94)]()+_0x4bf3dd(0xf5),_0xb5bd14[_0x4bf3dd(0x128)](_0x4210a6);const _0x225474=document['createElement'](_0x4bf3dd(0x70));_0x225474[_0x4bf3dd(0x88)]='day-column\x20'+(_0xd8be0e?_0x4bf3dd(0x72):''),_0x225474[_0x4bf3dd(0xec)](_0x4bf3dd(0x14e),_0x59a2ea),_0x225474['setAttribute'](_0x4bf3dd(0x104),_0x22e280),_0x1c67bf[_0x4bf3dd(0x128)](_0x225474);}_0x531712[_0x4bf3dd(0x92)](_0xb5bd14,_0x531712[_0x4bf3dd(0x120)]),_0x975d62[_0x4bf3dd(0x92)](_0x1c67bf,_0x975d62[_0x4bf3dd(0x10e)](_0x4bf3dd(0xa4)));}function hexToRgba(_0x1b50da,_0x53200d){const _0x48d531=a3_0x35baf0;let _0x53c805;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x48d531(0x9d)](_0x1b50da))return _0x53c805=_0x1b50da[_0x48d531(0x10b)](0x1)[_0x48d531(0xd5)](''),_0x53c805[_0x48d531(0x81)]==0x3&&(_0x53c805=[_0x53c805[0x0],_0x53c805[0x0],_0x53c805[0x1],_0x53c805[0x1],_0x53c805[0x2],_0x53c805[0x2]]),_0x53c805='0x'+_0x53c805[_0x48d531(0x117)](''),'rgba('+[_0x53c805>>0x10&0xff,_0x53c805>>0x8&0xff,_0x53c805&0xff][_0x48d531(0x117)](',')+','+_0x53200d+')';return _0x48d531(0x8e)+_0x53200d+')';}let confirmResolver=null;function showCustomConfirm(_0x2ec866,_0x312326,_0x2dd56e=!![]){const _0x52cf5b=a3_0x35baf0;document[_0x52cf5b(0x7a)](_0x52cf5b(0xa8))[_0x52cf5b(0x86)]=_0x2ec866,document['getElementById'](_0x52cf5b(0x118))[_0x52cf5b(0x86)]=_0x312326;const _0x154303=document[_0x52cf5b(0x7a)]('ccYesBtn');return _0x2dd56e?(_0x154303[_0x52cf5b(0x154)]['color']=_0x52cf5b(0xdd),_0x154303[_0x52cf5b(0x154)][_0x52cf5b(0x13f)]=_0x52cf5b(0xe0)):(_0x154303['style'][_0x52cf5b(0x150)]=_0x52cf5b(0x11e),_0x154303['style'][_0x52cf5b(0x13f)]='600'),new Promise(_0x153fca=>{const _0x3f136e=_0x52cf5b;confirmResolver=_0x153fca,document['getElementById'](_0x3f136e(0xb1))[_0x3f136e(0xfb)]['add'](_0x3f136e(0xa0));});}function resolveCustomConfirm(_0x121f24){const _0x3ffbe5=a3_0x35baf0;document[_0x3ffbe5(0x7a)](_0x3ffbe5(0xb1))['classList'][_0x3ffbe5(0x141)](_0x3ffbe5(0xa0));if(confirmResolver)confirmResolver(_0x121f24);}async function tryCancelCurrentSession(){const _0x59ddea=a3_0x35baf0;if(!currentSession)return;const _0x543676=await showCustomConfirm(_0x59ddea(0xc7),_0x59ddea(0xb4),!![]);if(!_0x543676)return;const _0x24ee10=currentSession;closeAllSheets(),sessions=sessions[_0x59ddea(0x90)](_0x4c998a=>_0x4c998a['id']!==_0x24ee10['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x59ddea(0xf9)]();try{const _0x49aaf7=window['Telegram']?.[_0x59ddea(0x97)],_0x268ebc=await fetch(API_URL,{'method':'POST','body':JSON[_0x59ddea(0x79)]({'action':_0x59ddea(0x78),'init_data':_0x49aaf7?.[_0x59ddea(0x114)]||'','coachId':_0x24ee10[_0x59ddea(0x8c)],'dateStr':_0x24ee10[_0x59ddea(0x9b)],'sessionId':_0x24ee10['id']})});if(_0x268ebc['ok'])DataManager['saveLocally']();}catch(_0x1dabe0){showToast(_0x59ddea(0xf3));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x3186e0=a3_0x35baf0;if(!currentSession)return;document[_0x3186e0(0x7a)](_0x3186e0(0x127))[_0x3186e0(0xfb)][_0x3186e0(0x141)](_0x3186e0(0xd1)),document[_0x3186e0(0x7a)](_0x3186e0(0x13c))[_0x3186e0(0xfb)][_0x3186e0(0x106)](_0x3186e0(0xd1));const _0x2ef806=document['getElementById'](_0x3186e0(0x139)),_0x1ee566=document[_0x3186e0(0x7a)](_0x3186e0(0xa2));_0x2ef806['innerHTML']='',_0x1ee566['innerHTML']=_0x3186e0(0x7c);const [_0x24a444,_0x1139b6]=currentSession['start'][_0x3186e0(0xd5)](':')[_0x3186e0(0x8b)](Number),[_0x4d0bf2,_0x567d04]=currentSession[_0x3186e0(0xc1)][_0x3186e0(0xd5)](':')[_0x3186e0(0x8b)](Number),_0x3b4693=_0x4d0bf2*0x3c+_0x567d04-(_0x24a444*0x3c+_0x1139b6);try{const _0x1d8d1d=window[_0x3186e0(0x11f)]?.[_0x3186e0(0x97)],_0x22ccb1=await fetch(API_URL,{'method':_0x3186e0(0x75),'body':JSON[_0x3186e0(0x79)]({'action':'get_slots','coachId':currentSession[_0x3186e0(0x8c)],'duration':_0x3b4693,'init_data':_0x1d8d1d?.[_0x3186e0(0x114)]||'','excludeSessionId':currentSession['id']})}),_0x4b6842=await _0x22ccb1[_0x3186e0(0xb0)]();_0x4b6842['ok']&&_0x4b6842[_0x3186e0(0x15d)]?(availableSlotsCache=_0x4b6842['data'],renderRescheduleDates()):_0x1ee566['innerHTML']=_0x3186e0(0xa6);}catch(_0x4447ba){_0x1ee566[_0x3186e0(0xf1)]=_0x3186e0(0xc6);}}function renderRescheduleDates(){const _0x55d68c=a3_0x35baf0,_0x40f60d=document[_0x55d68c(0x7a)]('rsDatesTrack');_0x40f60d['innerHTML']='';const _0x5f3695=Object[_0x55d68c(0xa5)](availableSlotsCache)[_0x55d68c(0x12b)](),_0x2fbef6=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x5f3695['length']===0x0){document[_0x55d68c(0x7a)](_0x55d68c(0xa2))[_0x55d68c(0xf1)]=_0x55d68c(0xa3);return;}_0x5f3695[_0x55d68c(0xdc)]((_0x131e00,_0x24076f)=>{const _0x18cac1=_0x55d68c,_0x414648=new Date(_0x131e00),_0xb15b15=_0x2fbef6[_0x414648[_0x18cac1(0x105)]()],_0x422bc8=_0x414648[_0x18cac1(0x94)](),_0x57236d=document[_0x18cac1(0xe1)](_0x18cac1(0x70));_0x57236d[_0x18cac1(0x88)]='rs-date-chip';if(_0x24076f===0x0)_0x57236d['classList'][_0x18cac1(0x106)](_0x18cac1(0x14d));_0x57236d[_0x18cac1(0xf1)]=_0x18cac1(0xd7)+_0xb15b15+'</div><div\x20class=\x22rs-day-num\x22>'+_0x422bc8+'</div>',_0x57236d[_0x18cac1(0xd6)]=()=>selectRsDate(_0x131e00,_0x57236d),_0x40f60d['appendChild'](_0x57236d);}),selectRsDate(_0x5f3695[0x0],_0x40f60d[_0x55d68c(0x120)]);}function selectRsDate(_0x289702,_0x11b1b6){const _0x287c88=a3_0x35baf0;selectedRsDate=_0x289702,document['querySelectorAll']('.rs-date-chip')[_0x287c88(0xdc)](_0x537c62=>_0x537c62['classList'][_0x287c88(0x141)](_0x287c88(0x14d)));if(_0x11b1b6)_0x11b1b6[_0x287c88(0xfb)][_0x287c88(0x106)]('active');const _0x3f0e00=document['getElementById'](_0x287c88(0xa2));_0x3f0e00[_0x287c88(0xf1)]='';const _0xb6543=availableSlotsCache[_0x289702]||[];if(_0xb6543[_0x287c88(0x81)]===0x0){_0x3f0e00[_0x287c88(0xf1)]=_0x287c88(0xa6);return;}_0xb6543[_0x287c88(0xdc)](_0x323e6c=>{const _0xefe119=_0x287c88,_0x4d8eed=document[_0xefe119(0xe1)](_0xefe119(0x7d));_0x4d8eed['className']=_0xefe119(0xe5),_0x4d8eed['textContent']=_0x323e6c,_0x4d8eed[_0xefe119(0xd6)]=()=>confirmReschedule(_0x323e6c),_0x3f0e00[_0xefe119(0x128)](_0x4d8eed);});}async function confirmReschedule(_0xb3148d){const _0x19f1c7=a3_0x35baf0,_0x32d919=new Date(selectedRsDate),_0x4b761e=_0x32d919[_0x19f1c7(0x11d)]('ru-RU',{'day':_0x19f1c7(0x137),'month':'long'}),_0x673f69=await showCustomConfirm(_0x19f1c7(0x14a),_0x19f1c7(0x103)+_0x4b761e+_0x19f1c7(0x108)+_0xb3148d+'?',![]);if(!_0x673f69)return;closeAllSheets(),showToast(_0x19f1c7(0xa7)),lastUserActionTime=Date['now']();const _0x45ad71=currentSession[_0x19f1c7(0x9b)],_0x277707=currentSession['id'],[_0x26bae0,_0x5ee10d]=currentSession['start'][_0x19f1c7(0xd5)](':')[_0x19f1c7(0x8b)](Number),[_0x538ecb,_0x70a03]=currentSession[_0x19f1c7(0xc1)][_0x19f1c7(0xd5)](':')[_0x19f1c7(0x8b)](Number),_0x570640=_0x538ecb*0x3c+_0x70a03-(_0x26bae0*0x3c+_0x5ee10d),[_0x40f4c5,_0x3c4e7d]=_0xb3148d[_0x19f1c7(0xd5)](':')[_0x19f1c7(0x8b)](Number),_0x3c3bf8=_0x40f4c5*0x3c+_0x3c4e7d+_0x570640,_0x1a453f=Math['floor'](_0x3c3bf8/0x3c),_0x4d2311=_0x3c3bf8%0x3c,_0x2397a3=String(_0x1a453f)[_0x19f1c7(0x100)](0x2,'0')+':'+String(_0x4d2311)[_0x19f1c7(0x100)](0x2,'0'),_0x31e22f=sessions[_0x19f1c7(0x15a)](_0x3efbf9=>_0x3efbf9['id']===_0x277707);_0x31e22f!==-0x1&&(sessions[_0x31e22f][_0x19f1c7(0x9b)]=selectedRsDate,sessions[_0x31e22f][_0x19f1c7(0x152)]=_0xb3148d,sessions[_0x31e22f][_0x19f1c7(0xc1)]=_0x2397a3,reRenderBlocks());try{const _0x48d2fd=window['Telegram']?.[_0x19f1c7(0x97)],_0x40c31f=await fetch(API_URL,{'method':'POST','body':JSON[_0x19f1c7(0x79)]({'action':'reschedule','init_data':_0x48d2fd?.['initData']||'','oldSessionId':_0x277707,'oldDate':_0x45ad71,'newDate':selectedRsDate,'newTime':_0xb3148d,'coachId':currentSession[_0x19f1c7(0x8c)]})}),_0x24e458=await _0x40c31f[_0x19f1c7(0xb0)]();!_0x24e458['ok']?(showToast('–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!'),DataManager[_0x19f1c7(0x156)]()):(showToast(_0x19f1c7(0x7b)),DataManager['saveLocally']());}catch(_0x2a290a){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x35baf0(0xe4)](a3_0x35baf0(0x80),init);