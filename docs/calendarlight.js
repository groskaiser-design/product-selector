const a3_0x2d07ad=a3_0x10ef;(function(_0x3593dc,_0x21f6f6){const _0x15809c=a3_0x10ef,_0x18d413=_0x3593dc();while(!![]){try{const _0x386a54=parseInt(_0x15809c(0x230))/0x1*(-parseInt(_0x15809c(0x1b9))/0x2)+parseInt(_0x15809c(0x219))/0x3+parseInt(_0x15809c(0x216))/0x4*(parseInt(_0x15809c(0x21a))/0x5)+-parseInt(_0x15809c(0x236))/0x6+parseInt(_0x15809c(0x166))/0x7*(parseInt(_0x15809c(0x17f))/0x8)+parseInt(_0x15809c(0x23c))/0x9*(-parseInt(_0x15809c(0x1ad))/0xa)+parseInt(_0x15809c(0x19c))/0xb;if(_0x386a54===_0x21f6f6)break;else _0x18d413['push'](_0x18d413['shift']());}catch(_0x235c23){_0x18d413['push'](_0x18d413['shift']());}}}(a3_0x3c1c,0xe7c4a));const APP_VERSION=a3_0x2d07ad(0x1b3),API_URL=a3_0x2d07ad(0x1f6),GRID_H=0x3c,KEY_SESSIONS=a3_0x2d07ad(0x18e),KEY_SETTINGS=a3_0x2d07ad(0x17d),KEY_CLIENTS=a3_0x2d07ad(0x1e7);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x2d07ad(0x199),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x49259c=a3_0x2d07ad,_0x34d30d=(function(){let _0x165a82=!![];return function(_0x52d29a,_0x4a677d){const _0x5b00c9=_0x165a82?function(){const _0x3b5490=a3_0x10ef;if(_0x4a677d){const _0xf3f69d=_0x4a677d[_0x3b5490(0x21b)](_0x52d29a,arguments);return _0x4a677d=null,_0xf3f69d;}}:function(){};return _0x165a82=![],_0x5b00c9;};}()),_0x4b8440=_0x34d30d(this,function(){const _0x423acb=a3_0x10ef;return _0x4b8440['toString']()['search']('(((.+)+)+)+$')[_0x423acb(0x13f)]()[_0x423acb(0x1cf)](_0x4b8440)[_0x423acb(0x186)](_0x423acb(0x23d));});_0x4b8440();try{const _0x449c90=window['Telegram']?.[_0x49259c(0x215)];if(!_0x449c90)return;_0x449c90[_0x49259c(0x21e)](),_0x449c90[_0x49259c(0x18d)]();try{_0x449c90[_0x49259c(0x1d2)](_0x49259c(0x208)),_0x449c90[_0x49259c(0x13c)]&&_0x449c90[_0x49259c(0x13c)](_0x49259c(0x208));}catch(_0x3afb40){console['log'](_0x49259c(0x1f2),_0x3afb40);}try{_0x449c90['BackButton']&&(_0x449c90['BackButton']['show'](),_0x449c90['BackButton'][_0x49259c(0x221)](),_0x449c90[_0x49259c(0x20f)][_0x49259c(0x201)](function(){const _0x151be4=_0x49259c;window[_0x151be4(0x164)]['href']=_0x151be4(0x141);}));}catch(_0x4d8e4b){console[_0x49259c(0x15c)](_0x49259c(0x16f),_0x4d8e4b);}try{if(_0x449c90[_0x49259c(0x1c5)])_0x449c90[_0x49259c(0x1c5)]();}catch(_0x4b4824){}}catch(_0x8c7a49){console['error'](_0x49259c(0x14e),_0x8c7a49);}}());function isAdmin(){const _0x8e77e8=a3_0x2d07ad;try{const _0x1f6c6a=Number(window[_0x8e77e8(0x140)]?.[_0x8e77e8(0x215)]?.['initDataUnsafe']?.[_0x8e77e8(0x1ff)]?.['id']);return _0x1f6c6a===0xbaf7174;}catch(_0x2d1a00){return![];}}function a3_0x10ef(_0x155603,_0x41efb3){_0x155603=_0x155603-0x13a;const _0x678ef3=a3_0x3c1c();let _0x3d0e9a=_0x678ef3[_0x155603];return _0x3d0e9a;}const DataManager={'saveLocally'(){const _0x4138fb=a3_0x2d07ad;try{localStorage[_0x4138fb(0x188)](KEY_SESSIONS,JSON[_0x4138fb(0x193)](sessions)),localStorage[_0x4138fb(0x188)](KEY_CLIENTS,JSON[_0x4138fb(0x193)](clients)),localStorage[_0x4138fb(0x188)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x43369f){}},'loadLocal'(){const _0x300569=a3_0x2d07ad;try{const _0x324475=localStorage['getItem'](KEY_SESSIONS);if(_0x324475)sessions=JSON['parse'](_0x324475);const _0x124e3b=localStorage['getItem'](KEY_CLIENTS);if(_0x124e3b)clients=JSON[_0x300569(0x214)](_0x124e3b);const _0x2417cf=localStorage[_0x300569(0x1b4)](KEY_SETTINGS);if(_0x2417cf){const _0x43d822=JSON[_0x300569(0x214)](_0x2417cf);if(_0x43d822[_0x300569(0x168)])availabilityPattern=_0x43d822[_0x300569(0x168)];if(_0x43d822['ranges'])specialRanges=_0x43d822[_0x300569(0x1fe)];if(_0x43d822[_0x300569(0x1de)])dateExceptions=_0x43d822[_0x300569(0x1de)];}}catch(_0x401a18){}},async 'syncLoad'(){const _0x5506d8=a3_0x2d07ad,_0x101de1=new Date(),_0x18625f=_0x101de1['getFullYear']()+'-'+String(_0x101de1['getMonth']()+0x1)[_0x5506d8(0x1b1)](0x2,'0'),_0x1d3aac=new Date(_0x101de1);_0x1d3aac['setMonth'](_0x101de1[_0x5506d8(0x15f)]()+0x1);const _0x2535ce=_0x1d3aac[_0x5506d8(0x14b)]()+'-'+String(_0x1d3aac['getMonth']()+0x1)[_0x5506d8(0x1b1)](0x2,'0'),_0x378f44=Date[_0x5506d8(0x1ae)]();try{const _0x24606b=window[_0x5506d8(0x140)]?.['WebApp'],_0x4008a8=_0x24606b?.['initData']||'',[_0x2f2472,_0x105881]=await Promise[_0x5506d8(0x179)]([fetch(API_URL,{'method':_0x5506d8(0x1d5),'body':JSON['stringify']({'action':'client_load','init_data':_0x4008a8,'month_str':_0x18625f})})['then'](_0x32d2e2=>_0x32d2e2['json']()),fetch(API_URL,{'method':_0x5506d8(0x1d5),'body':JSON['stringify']({'action':_0x5506d8(0x1b7),'init_data':_0x4008a8,'month_str':_0x2535ce})})[_0x5506d8(0x239)](_0x3bade8=>_0x3bade8[_0x5506d8(0x152)]())]);if(lastUserActionTime>_0x378f44){console[_0x5506d8(0x15c)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x2f2472['ok'])this[_0x5506d8(0x1ab)](_0x2f2472['data'],_0x18625f);if(_0x105881['ok'])this[_0x5506d8(0x1ab)](_0x105881[_0x5506d8(0x237)],_0x2535ce);this[_0x5506d8(0x225)]();}catch(_0x599cae){}},'applyData'(_0x1da115,_0x4dd56b){const _0x488a69=a3_0x2d07ad;if(!_0x1da115)return;if(_0x1da115[_0x488a69(0x1db)]){if(_0x1da115[_0x488a69(0x1db)][_0x488a69(0x168)])availabilityPattern=_0x1da115[_0x488a69(0x1db)][_0x488a69(0x168)];if(_0x1da115['settings'][_0x488a69(0x1fe)])specialRanges=_0x1da115[_0x488a69(0x1db)]['ranges'];if(_0x1da115[_0x488a69(0x1db)][_0x488a69(0x1de)])dateExceptions=_0x1da115[_0x488a69(0x1db)]['exceptions'];}if(_0x1da115[_0x488a69(0x212)]&&Array['isArray'](_0x1da115[_0x488a69(0x212)]))clients=_0x1da115[_0x488a69(0x212)];_0x1da115['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x1da115[_0x488a69(0x15e)]}),_0x1da115[_0x488a69(0x169)]&&(sessions=sessions[_0x488a69(0x1a6)](_0x1f9149=>!_0x1f9149[_0x488a69(0x1c0)][_0x488a69(0x1c1)](_0x4dd56b)),Object[_0x488a69(0x14a)](_0x1da115[_0x488a69(0x169)])['forEach'](_0x184f61=>{const _0x168ec2=_0x488a69,_0x484cf3=_0x1da115[_0x168ec2(0x169)][_0x184f61];_0x484cf3[_0x168ec2(0x172)](_0xa48904=>{const _0x2b830d=_0x168ec2;sessions[_0x2b830d(0x178)]({'id':_0xa48904['i'],'clientId':_0xa48904['c'],'coachId':_0xa48904[_0x2b830d(0x202)],'dateStr':_0x4dd56b+'-'+_0x184f61['padStart'](0x2,'0'),'start':_0xa48904['s'],'end':_0xa48904['e'],'note':_0xa48904['n']||'','status':_0xa48904['st']||_0x2b830d(0x21c),'seriesId':_0xa48904[_0x2b830d(0x1c3)]});});})),reRenderBlocks();}};function init(){const _0x16566b=a3_0x2d07ad;DataManager[_0x16566b(0x1e8)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x16566b(0x1ce)](_0x16566b(0x16e))['addEventListener']('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x16566b(0x161)]();}function renderTimeColumn(){const _0xaa4024=a3_0x2d07ad,_0x316445=document['getElementById'](_0xaa4024(0x1e0)),_0x15fddf=document[_0xaa4024(0x1ce)](_0xaa4024(0x227));_0x316445[_0xaa4024(0x1af)]='',_0x316445[_0xaa4024(0x20a)](_0x15fddf);for(let _0x240eaf=0x0;_0x240eaf<0x18;_0x240eaf++){const _0x3742be=document[_0xaa4024(0x14c)]('div');_0x3742be[_0xaa4024(0x1f9)]=_0xaa4024(0x14f);if(_0x240eaf>0x0)_0x3742be['innerHTML']='<span>'+String(_0x240eaf)[_0xaa4024(0x1b1)](0x2,'0')+':00</span>';_0x316445[_0xaa4024(0x20a)](_0x3742be);}}function renderDayRange(_0x3b3cfc,_0x50f638){const _0x167b11=a3_0x2d07ad,_0x3a3773=document[_0x167b11(0x1ce)](_0x167b11(0x1f8)),_0x4a8918=document[_0x167b11(0x1ce)](_0x167b11(0x1df)),_0x4cef6b=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1eeb50=new Date();_0x1eeb50[_0x167b11(0x13a)](0x0,0x0,0x0,0x0);const _0x3d8c1c=getLocalDateStr(new Date());for(let _0x303025=_0x3b3cfc;_0x303025<=_0x50f638;_0x303025++){const _0x522c9d=new Date(_0x1eeb50);_0x522c9d['setDate'](_0x522c9d[_0x167b11(0x153)]()+_0x303025);const _0xd0d692=getLocalDateStr(_0x522c9d);let _0x20e068=_0x522c9d['getDay']()-0x1;if(_0x20e068===-0x1)_0x20e068=0x6;const _0x40d0d6=_0xd0d692===_0x3d8c1c,_0x3e46d7=document[_0x167b11(0x14c)](_0x167b11(0x181));_0x3e46d7[_0x167b11(0x1f9)]=_0x167b11(0x1cb)+(_0x40d0d6?_0x167b11(0x1c7):''),_0x3e46d7['setAttribute']('data-date',_0xd0d692),_0x3e46d7[_0x167b11(0x1af)]=_0x167b11(0x1da)+_0x4cef6b[_0x20e068]+_0x167b11(0x1fa)+_0x522c9d[_0x167b11(0x153)]()+_0x167b11(0x1fb),_0x3a3773[_0x167b11(0x20a)](_0x3e46d7);const _0x9cfab5=document[_0x167b11(0x14c)]('div');_0x9cfab5[_0x167b11(0x1f9)]=_0x167b11(0x1d7)+(_0x40d0d6?_0x167b11(0x1c7):''),_0x9cfab5['setAttribute'](_0x167b11(0x1a0),_0xd0d692),_0x9cfab5[_0x167b11(0x1a7)](_0x167b11(0x1a4),_0x20e068),_0x4a8918[_0x167b11(0x20a)](_0x9cfab5);}}function reRenderBlocks(){document['querySelectorAll']('.day-column')['forEach'](_0x4e8ba7=>{const _0x2ae039=a3_0x10ef;_0x4e8ba7[_0x2ae039(0x217)](_0x2ae039(0x149))[_0x2ae039(0x172)](_0x3d1051=>_0x3d1051['remove']());const _0x385702=_0x4e8ba7['getAttribute'](_0x2ae039(0x1a0)),_0x5c024a=parseInt(_0x4e8ba7[_0x2ae039(0x1b5)](_0x2ae039(0x1a4))),_0x2c7877=Math[_0x2ae039(0x154)](_0x4e8ba7['offsetLeft']);(availabilityPattern[_0x5c024a]||[])['forEach'](_0x3353fd=>{const _0x34dd17=_0x2ae039,_0x39fb2d=document[_0x34dd17(0x14c)](_0x34dd17(0x181));_0x39fb2d[_0x34dd17(0x1f9)]=_0x34dd17(0x1f1),_0x39fb2d[_0x34dd17(0x21f)]['top']=_0x3353fd*GRID_H+'px',_0x39fb2d['style'][_0x34dd17(0x15a)]='-'+_0x2c7877+_0x34dd17(0x1d9)+_0x3353fd*GRID_H+'px',_0x4e8ba7[_0x34dd17(0x20a)](_0x39fb2d);});if(specialRanges[_0x2ae039(0x173)]>0x0){const _0x4a6474=new Date(_0x385702+_0x2ae039(0x16a))[_0x2ae039(0x144)](),_0x4a5b54=new Date(_0x385702+_0x2ae039(0x156))['getTime']();specialRanges[_0x2ae039(0x172)](_0x810d32=>{const _0x4743e3=_0x2ae039,_0x414598=new Date(_0x810d32[_0x4743e3(0x210)])[_0x4743e3(0x144)](),_0x56dbfb=new Date(_0x810d32[_0x4743e3(0x185)])[_0x4743e3(0x144)](),_0x20b947=Math[_0x4743e3(0x1b0)](_0x4a6474,_0x414598),_0x5a2d5f=Math[_0x4743e3(0x200)](_0x4a5b54,_0x56dbfb);if(_0x20b947<_0x5a2d5f){const _0x520a2f=(_0x20b947-_0x4a6474)/0x36ee80*GRID_H,_0x17f27b=(_0x5a2d5f-_0x20b947)/0x36ee80*GRID_H,_0x1e5079=document['createElement'](_0x4743e3(0x181));_0x17f27b>=23.5*GRID_H?(_0x1e5079[_0x4743e3(0x1f9)]='day-off-overlay\x20stripe-bg',_0x1e5079[_0x4743e3(0x21f)][_0x4743e3(0x15a)]='-'+_0x2c7877+_0x4743e3(0x232)):(_0x1e5079[_0x4743e3(0x1f9)]=_0x4743e3(0x147),_0x1e5079[_0x4743e3(0x21f)][_0x4743e3(0x1f0)]=_0x520a2f+'px',_0x1e5079['style'][_0x4743e3(0x180)]=_0x17f27b+'px',_0x1e5079[_0x4743e3(0x21f)][_0x4743e3(0x15a)]='-'+_0x2c7877+'px\x20-'+_0x520a2f+'px'),_0x4e8ba7['appendChild'](_0x1e5079);}});}renderEventsForColumn(_0x4e8ba7,_0x385702);});}function renderEventsForColumn(_0x284d17,_0x43f3d6){const _0x2b8723=a3_0x2d07ad,_0x48fb4a=sessions[_0x2b8723(0x1a6)](_0x5e39eb=>_0x5e39eb['dateStr']===_0x43f3d6),_0x1dfc1c=_0x48fb4a[_0x2b8723(0x1ba)](_0x169ee5=>{const _0x3143fc=_0x2b8723,[_0x4dd858,_0x146bca]=_0x169ee5[_0x3143fc(0x210)][_0x3143fc(0x151)](':')['map'](Number),[_0x488700,_0x1c4176]=_0x169ee5['end'][_0x3143fc(0x151)](':')[_0x3143fc(0x1ba)](Number);return{'data':_0x169ee5,'start':_0x4dd858*0x3c+_0x146bca,'end':_0x488700*0x3c+_0x1c4176,'colIndex':0x0};});_0x1dfc1c[_0x2b8723(0x1fd)]((_0x4c3b16,_0xbe4d2f)=>_0x4c3b16['start']-_0xbe4d2f[_0x2b8723(0x210)]||_0xbe4d2f['end']-_0xbe4d2f[_0x2b8723(0x210)]-(_0x4c3b16[_0x2b8723(0x185)]-_0x4c3b16[_0x2b8723(0x210)]));const _0x1d4bbd=[];_0x1dfc1c[_0x2b8723(0x172)](_0x412579=>{const _0x1bc332=_0x2b8723;let _0x232cfb=![];for(let _0x3d47e8=0x0;_0x3d47e8<_0x1d4bbd[_0x1bc332(0x173)];_0x3d47e8++){const _0x31aa19=_0x1d4bbd[_0x3d47e8];if(_0x412579['start']>=_0x31aa19[_0x31aa19[_0x1bc332(0x173)]-0x1][_0x1bc332(0x185)]){_0x31aa19[_0x1bc332(0x178)](_0x412579),_0x412579[_0x1bc332(0x174)]=_0x3d47e8,_0x232cfb=!![];break;}}!_0x232cfb&&(_0x1d4bbd[_0x1bc332(0x178)]([_0x412579]),_0x412579[_0x1bc332(0x174)]=_0x1d4bbd['length']-0x1);}),_0x1dfc1c[_0x2b8723(0x172)](_0x621942=>{const _0x2afca0=_0x2b8723;let _0x20c2a4=0x0;_0x1dfc1c[_0x2afca0(0x172)](_0x19fa08=>{const _0x291452=_0x2afca0;if(Math[_0x291452(0x1b0)](_0x621942[_0x291452(0x210)],_0x19fa08['start'])<Math[_0x291452(0x200)](_0x621942[_0x291452(0x185)],_0x19fa08['end'])&&_0x19fa08[_0x291452(0x174)]>_0x20c2a4)_0x20c2a4=_0x19fa08[_0x291452(0x174)];});const _0x40f8f7=_0x20c2a4+0x1,_0x1482e4=0x64/_0x40f8f7,_0xecbb06=_0x621942['colIndex']*_0x1482e4,_0x3ddd65=document[_0x2afca0(0x14c)]('div'),_0x390fc0=_0x621942[_0x2afca0(0x237)];let _0x52c9df=_0x2afca0(0x204);if(clients&&clients['length']>0x0){const _0x1d3062=clients[_0x2afca0(0x224)](_0x111c63=>String(_0x111c63['id'])===String(_0x390fc0[_0x2afca0(0x16b)]));if(_0x1d3062&&_0x1d3062['color'])_0x52c9df=_0x1d3062['color'];}const _0x477822=_0x390fc0[_0x2afca0(0x158)]===_0x2afca0(0x1aa),_0x21f469=_0x477822?0x1:0.45;_0x3ddd65[_0x2afca0(0x1f9)]=_0x2afca0(0x23b)+(_0x477822?'\x20status-completed':''),_0x3ddd65['style']['backgroundColor']=hexToRgba(_0x52c9df,_0x21f469),_0x3ddd65[_0x2afca0(0x21f)][_0x2afca0(0x235)]=_0x52c9df;const _0x454785=_0x621942[_0x2afca0(0x210)]/0x3c*GRID_H,_0x466971=(_0x621942['end']-_0x621942[_0x2afca0(0x210)])/0x3c*GRID_H;_0x3ddd65[_0x2afca0(0x21f)][_0x2afca0(0x1f0)]=_0x454785+'px',_0x3ddd65[_0x2afca0(0x21f)][_0x2afca0(0x180)]=Math[_0x2afca0(0x1b0)](_0x466971,0x14)+'px',_0x3ddd65[_0x2afca0(0x21f)][_0x2afca0(0x192)]=_0x2afca0(0x1bf)+_0x1482e4+'%\x20-\x204px)',_0x3ddd65[_0x2afca0(0x21f)][_0x2afca0(0x19b)]=_0x2afca0(0x1bf)+_0xecbb06+_0x2afca0(0x155),_0x3ddd65['style'][_0x2afca0(0x162)]=0xa+_0x621942[_0x2afca0(0x174)];if(_0x1482e4<0x55)_0x3ddd65['classList'][_0x2afca0(0x177)](_0x2afca0(0x148));let _0x2656a0='';if(_0x390fc0[_0x2afca0(0x146)])_0x2656a0+=_0x2afca0(0x145);if(_0x477822)_0x2656a0+=_0x2afca0(0x165);_0x3ddd65['innerHTML']=_0x2afca0(0x1c8)+_0x390fc0['start']+_0x2afca0(0x191)+_0x390fc0['end']+_0x2afca0(0x196)+_0x2656a0+_0x2afca0(0x20e),_0x3ddd65[_0x2afca0(0x228)]=_0x25c65d=>{const _0x2c528d=_0x2afca0;_0x25c65d[_0x2c528d(0x1dd)](),openDetails(_0x390fc0);},_0x284d17['appendChild'](_0x3ddd65);});}function openAnalytics(){const _0x594e6d=a3_0x2d07ad,_0xc477ef=document[_0x594e6d(0x226)]('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x594e6d(0x199),_0xc477ef),openSheet(_0x594e6d(0x211));}function setAnalyticsPeriod(_0x483330,_0x33369c){const _0x284090=a3_0x2d07ad;currentAnPeriod=_0x483330,document[_0x284090(0x217)](_0x284090(0x176))[_0x284090(0x172)](_0x371e7f=>_0x371e7f['classList']['remove'](_0x284090(0x197)));if(_0x33369c)_0x33369c[_0x284090(0x1e9)][_0x284090(0x177)](_0x284090(0x197));const _0x19dda3=document[_0x284090(0x1ce)](_0x284090(0x17b));_0x19dda3[_0x284090(0x21f)][_0x284090(0x142)]=_0x483330===_0x284090(0x170)?_0x284090(0x194):_0x284090(0x15d);const _0x1a0374=new Date();let _0x32e6ec=new Date(),_0x5eb48e=new Date();if(_0x483330===_0x284090(0x199))_0x32e6ec=getStartOfWeek(_0x1a0374),_0x5eb48e=new Date(_0x32e6ec),_0x5eb48e['setDate'](_0x5eb48e[_0x284090(0x153)]()+0x6);else{if(_0x483330===_0x284090(0x1ed))_0x32e6ec=new Date(_0x1a0374[_0x284090(0x14b)](),_0x1a0374[_0x284090(0x15f)](),0x1),_0x5eb48e=new Date(_0x1a0374['getFullYear'](),_0x1a0374[_0x284090(0x15f)]()+0x1,0x0);else{!document[_0x284090(0x1ce)](_0x284090(0x231))[_0x284090(0x1fc)]&&(document['getElementById'](_0x284090(0x231))[_0x284090(0x1fc)]=getLocalDateStr(_0x1a0374),document[_0x284090(0x1ce)]('anEnd')[_0x284090(0x1fc)]=getLocalDateStr(_0x1a0374));refreshAnalytics();return;}}document[_0x284090(0x1ce)](_0x284090(0x231))[_0x284090(0x1fc)]=getLocalDateStr(_0x32e6ec),document['getElementById']('anEnd')[_0x284090(0x1fc)]=getLocalDateStr(_0x5eb48e),refreshAnalytics();}function refreshAnalytics(){const _0x5a4c35=a3_0x2d07ad,_0x1de55a=document['getElementById']('anStart')[_0x5a4c35(0x1fc)],_0x50652e=document[_0x5a4c35(0x1ce)]('anEnd')[_0x5a4c35(0x1fc)];if(!_0x1de55a||!_0x50652e)return;const _0x1ec7a5=sessions[_0x5a4c35(0x1a6)](_0x3e17a8=>_0x3e17a8[_0x5a4c35(0x1c0)]>=_0x1de55a&&_0x3e17a8[_0x5a4c35(0x1c0)]<=_0x50652e&&_0x3e17a8['status']!==_0x5a4c35(0x16d)),_0x3abe78=_0x1ec7a5[_0x5a4c35(0x173)],_0x291476=_0x1ec7a5['filter'](_0x5c00cf=>_0x5c00cf['status']===_0x5a4c35(0x1aa))[_0x5a4c35(0x173)],_0x52c531=_0x3abe78>0x0?Math[_0x5a4c35(0x154)](_0x291476/_0x3abe78*0x64):0x0;document[_0x5a4c35(0x1ce)](_0x5a4c35(0x189))[_0x5a4c35(0x19d)]=_0x52c531+'%',document[_0x5a4c35(0x1ce)](_0x5a4c35(0x19e))['textContent']=_0x291476+_0x5a4c35(0x1b2)+_0x3abe78+_0x5a4c35(0x1f3);const _0x30feda=document[_0x5a4c35(0x1ce)](_0x5a4c35(0x1cd)),_0x1ecdfb=0x2*Math['PI']*0x23,_0x340a16=_0x1ecdfb-_0x52c531/0x64*_0x1ecdfb;_0x30feda[_0x5a4c35(0x21f)][_0x5a4c35(0x1bb)]=_0x340a16;const _0x9ca940={};_0x1ec7a5[_0x5a4c35(0x172)](_0x45f38d=>{const _0x16a6b8=_0x5a4c35,_0x5aec29=_0x45f38d['coachId']||_0x16a6b8(0x13b);if(!_0x9ca940[_0x5aec29]){const _0x5a1afd='#'+_0x5aec29[_0x16a6b8(0x13f)]()[_0x16a6b8(0x1e3)](0x0,0x6);_0x9ca940[_0x5aec29]={'total':0x0,'done':0x0,'color':_0x5a1afd};}_0x9ca940[_0x5aec29]['total']++;if(_0x45f38d[_0x16a6b8(0x158)]===_0x16a6b8(0x1aa))_0x9ca940[_0x5aec29][_0x16a6b8(0x218)]++;});const _0x57ad97=document['getElementById'](_0x5a4c35(0x195));_0x57ad97['innerHTML']='';const _0x9495ad=Object['entries'](_0x9ca940)[_0x5a4c35(0x1fd)]((_0x40aed7,_0x504f33)=>_0x504f33[0x1]['total']-_0x40aed7[0x1][_0x5a4c35(0x223)]);if(_0x9495ad[_0x5a4c35(0x173)]===0x0){_0x57ad97[_0x5a4c35(0x1af)]=_0x5a4c35(0x1d6);return;}_0x9495ad[_0x5a4c35(0x172)](([_0x207cb3,_0x283a42])=>{const _0x47328a=_0x5a4c35,_0x25b266=Math[_0x47328a(0x154)](_0x283a42['done']/_0x283a42[_0x47328a(0x223)]*0x64),_0x177a85=document[_0x47328a(0x14c)](_0x47328a(0x181));_0x177a85[_0x47328a(0x1f9)]='client-stat-card',_0x177a85[_0x47328a(0x21f)][_0x47328a(0x235)]=_0x283a42[_0x47328a(0x183)],_0x177a85[_0x47328a(0x1af)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x207cb3[_0x47328a(0x1e3)](0x0,0x5)+_0x47328a(0x205)+_0x283a42[_0x47328a(0x218)]+_0x47328a(0x1e5)+_0x283a42['total']+_0x47328a(0x238)+_0x25b266+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x57ad97[_0x47328a(0x20a)](_0x177a85);});}function openDetails(_0x41a05f){const _0x1d5d2b=a3_0x2d07ad;currentSession=_0x41a05f;const _0x2afc38=new Date(_0x41a05f[_0x1d5d2b(0x1c0)]),_0x5bc1b3=_0x2afc38['toLocaleDateString'](_0x1d5d2b(0x18b),{'weekday':_0x1d5d2b(0x175),'day':_0x1d5d2b(0x1ec),'month':_0x1d5d2b(0x175)});document['getElementById'](_0x1d5d2b(0x17e))[_0x1d5d2b(0x19d)]=_0x5bc1b3[_0x1d5d2b(0x233)](0x0)['toUpperCase']()+_0x5bc1b3[_0x1d5d2b(0x1f7)](0x1),document[_0x1d5d2b(0x1ce)](_0x1d5d2b(0x190))[_0x1d5d2b(0x19d)]=_0x41a05f[_0x1d5d2b(0x210)]+_0x1d5d2b(0x191)+_0x41a05f['end'],document[_0x1d5d2b(0x1ce)](_0x1d5d2b(0x22d))[_0x1d5d2b(0x19d)]=_0x41a05f[_0x1d5d2b(0x184)]||_0x1d5d2b(0x1d0);const _0x8510dc=document[_0x1d5d2b(0x1ce)](_0x1d5d2b(0x15b)),_0x56c8be=document[_0x1d5d2b(0x1ce)](_0x1d5d2b(0x17c)),_0x424bf2=_0x56c8be[_0x1d5d2b(0x226)](_0x1d5d2b(0x1e2)),_0x5a3971=_0x56c8be[_0x1d5d2b(0x226)](_0x1d5d2b(0x18c)),_0x1a445c=document[_0x1d5d2b(0x1ce)](_0x1d5d2b(0x23a));if(_0x41a05f[_0x1d5d2b(0x158)]==='completed')_0x8510dc[_0x1d5d2b(0x19d)]=_0x1d5d2b(0x1a5),_0x8510dc[_0x1d5d2b(0x21f)][_0x1d5d2b(0x183)]=_0x1d5d2b(0x1b6),_0x56c8be[_0x1d5d2b(0x21f)][_0x1d5d2b(0x142)]=_0x1d5d2b(0x15d);else{_0x8510dc['textContent']=_0x1d5d2b(0x1f5),_0x8510dc[_0x1d5d2b(0x21f)][_0x1d5d2b(0x183)]=_0x1d5d2b(0x14d),_0x56c8be[_0x1d5d2b(0x21f)][_0x1d5d2b(0x142)]=_0x1d5d2b(0x1d8);const _0x5057b3=new Date(_0x41a05f[_0x1d5d2b(0x1c0)]+'T'+_0x41a05f[_0x1d5d2b(0x210)]),_0x536848=new Date(),_0x3d5e76=(_0x5057b3-_0x536848)/(0x3e8*0x3c*0x3c),_0x4890a9=coachProfiles[_0x41a05f[_0x1d5d2b(0x1c2)]]&&coachProfiles[_0x41a05f[_0x1d5d2b(0x1c2)]][_0x1d5d2b(0x1c6)]?parseInt(coachProfiles[_0x41a05f[_0x1d5d2b(0x1c2)]]['cancel_window']):0x18;if(_0x4890a9===0x0||_0x3d5e76>=_0x4890a9)_0x424bf2[_0x1d5d2b(0x21f)][_0x1d5d2b(0x142)]=_0x1d5d2b(0x1d8),_0x5a3971[_0x1d5d2b(0x21f)][_0x1d5d2b(0x142)]=_0x1d5d2b(0x1d8),_0x1a445c['style'][_0x1d5d2b(0x142)]=_0x1d5d2b(0x15d);else{_0x424bf2[_0x1d5d2b(0x21f)]['display']=_0x1d5d2b(0x15d),_0x5a3971[_0x1d5d2b(0x21f)][_0x1d5d2b(0x142)]=_0x1d5d2b(0x15d),_0x1a445c[_0x1d5d2b(0x21f)][_0x1d5d2b(0x142)]='block';let _0xd6f2bd=_0x4890a9===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x1d5d2b(0x19f)+_0x4890a9+_0x1d5d2b(0x1ac);_0x1a445c['textContent']=_0x1d5d2b(0x19a)+_0xd6f2bd+_0x1d5d2b(0x1a1);}}document[_0x1d5d2b(0x1ce)](_0x1d5d2b(0x17a))[_0x1d5d2b(0x1e9)][_0x1d5d2b(0x177)](_0x1d5d2b(0x197)),document[_0x1d5d2b(0x1ce)](_0x1d5d2b(0x160))[_0x1d5d2b(0x1e9)]['add'](_0x1d5d2b(0x1ee));}function closeAllSheets(){const _0x16c280=a3_0x2d07ad;document['getElementById']('overlay')[_0x16c280(0x1e9)][_0x16c280(0x18a)](_0x16c280(0x197)),document[_0x16c280(0x217)](_0x16c280(0x1e6))['forEach'](_0xb902ee=>_0xb902ee[_0x16c280(0x1e9)]['remove']('open'));}function a3_0x3c1c(){const _0x4ce0f2=['note','end','search','show','setItem','anPercent','remove','ru-RU','.btn-reschedule','expand','uc_client_sessions','rsDatesTrack','detTime','\x20-\x20','width','stringify','flex','analyticsList','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','active','.day-col-header[data-date=\x22','week','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','left','7692135lRjOsX','textContent','anTotalStats','–∑–∞\x20','data-date','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','rs-time-btn','customConfirm','data-day-idx','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','filter','setAttribute','#ff453a','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','completed','applyData','\x20—á.','730vllIwH','now','innerHTML','max','padStart','\x20–∏–∑\x20','v9.5-CLIENT-ANALYTICS','getItem','getAttribute','var(--acc-green)','client_load','join','6yiRtMr','map','strokeDashoffset','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','rescheduleSheet','visible','calc(','dateStr','startsWith','coachId','sid','</div><div\x20class=\x22rs-day-num\x22>','disableVerticalSwipes','cancel_window','today','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','scrollLeft','firstChild','day-col-header\x20','toast','anDonutCircle','getElementById','constructor','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','setHeaderColor','floor','rgba(','POST','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','day-column\x20','block','px\x20-','<div\x20class=\x22dch-day\x22>','settings','reschedule','stopPropagation','exceptions','gridColumns','timeColumn','createDocumentFragment','.btn-cancel','substr','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','</span>\x20/\x20','.sheet','uc_client_list','loadLocal','classList','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','scrollTop','numeric','month','open','test','top','blocked-slot\x20stripe-bg','Error\x20setting\x20color:','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','rs-date-chip','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','slice','daysHeaderTrack','className','</div><div\x20class=\x22dch-num\x22>','</div>','value','sort','ranges','user','min','onClick','cid','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','#0a84ff','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','button','#050505','addEventListener','appendChild','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','getDay','scrollTo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','BackButton','start','analyticsSheet','clients','–û—Ç–º–µ–Ω–µ–Ω–æ','parse','WebApp','302788iKwHvF','querySelectorAll','done','4243308XDtBPD','70Lchslv','apply','planned','findIndex','ready','style','toLocaleDateString','offClick','getMinutes','total','find','saveLocally','querySelector','timeLineBadge','onclick','offsetLeft','600','fontWeight','toLocaleString','detNote','ccTitle','globalTimeLine','401531RKFFkq','anStart','px\x200px','charAt','rsSlotsGrid','borderLeftColor','6021336bCNGNr','data','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','then','cancelHint','event-card','11574HimqhK','(((.+)+)+)+$','setHours','Unknown','setBackgroundColor','toUpperCase','scrollWidth','toString','Telegram','router.html','display','.rs-date-chip','getTime','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','seriesId','blocked-range-part\x20stripe-bg','mini','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','keys','getFullYear','createElement','var(--acc-blue)','Critical\x20TMA\x20Error:','time-label','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','split','json','getDate','round','%\x20+\x202px)','T23:59:59','insertBefore','status','<div\x20class=\x22rs-day-name\x22>','backgroundPosition','detStatus','log','none','coach_profiles','getMonth','detailsSheet','syncLoad','zIndex','\x20–≤\x20','location','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','54509kaQkOk','initData','pattern','calendar','T00:00:00','clientId','substring','cancelled','matrixViewport','Error\x20setting\x20back\x20button:','custom','.day-col-header','forEach','length','colIndex','long','.period-switch\x20.p-btn','add','push','all','overlay','anCustomDates','cancelContainer','uc_client_settings','detDate','80kiDCKT','height','div','setDate','color'];a3_0x3c1c=function(){return _0x4ce0f2;};return a3_0x3c1c();}function openSheet(_0x4803b8){const _0x157348=a3_0x2d07ad;document[_0x157348(0x1ce)](_0x157348(0x17a))['classList'][_0x157348(0x177)]('active'),document[_0x157348(0x1ce)](_0x4803b8)[_0x157348(0x1e9)][_0x157348(0x177)](_0x157348(0x1ee));}function getLocalDateStr(_0x9b236a){const _0x35176a=a3_0x2d07ad,_0x23f4be=_0x9b236a[_0x35176a(0x14b)](),_0x2bcd4c=String(_0x9b236a[_0x35176a(0x15f)]()+0x1)[_0x35176a(0x1b1)](0x2,'0'),_0x42f4d1=String(_0x9b236a['getDate']())[_0x35176a(0x1b1)](0x2,'0');return _0x23f4be+'-'+_0x2bcd4c+'-'+_0x42f4d1;}function getStartOfWeek(_0x42933a){const _0x414b00=a3_0x2d07ad,_0x50f611=new Date(_0x42933a),_0x55b2ff=_0x50f611[_0x414b00(0x20c)](),_0xe9a6d6=_0x50f611[_0x414b00(0x153)]()-_0x55b2ff+(_0x55b2ff===0x0?-0x6:0x1);return _0x50f611[_0x414b00(0x182)](_0xe9a6d6),_0x50f611['setHours'](0x0,0x0,0x0,0x0),_0x50f611;}function scrollToToday(){const _0x51e929=getLocalDateStr(new Date());setTimeout(()=>{const _0x31c015=a3_0x10ef,_0x457d93=document[_0x31c015(0x226)](_0x31c015(0x198)+_0x51e929+'\x22]');if(_0x457d93){const _0x2e7a84=document[_0x31c015(0x1ce)]('matrixViewport'),_0x4afa28=_0x457d93[_0x31c015(0x229)]-_0x2e7a84['clientWidth']/0x2+_0x457d93['offsetWidth']/0x2;_0x2e7a84[_0x31c015(0x20d)]({'left':_0x4afa28,'behavior':'auto'}),_0x2e7a84[_0x31c015(0x1eb)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4caa5e=a3_0x2d07ad,_0x1439e4=new Date(),_0x44e55e=document['getElementById'](_0x4caa5e(0x22f)),_0x134bf8=document[_0x4caa5e(0x1ce)](_0x4caa5e(0x227)),_0x464425=(_0x1439e4['getHours']()*0x3c+_0x1439e4[_0x4caa5e(0x222)]())/0x3c*GRID_H;_0x44e55e[_0x4caa5e(0x21f)][_0x4caa5e(0x1f0)]=_0x464425+'px',_0x44e55e[_0x4caa5e(0x21f)][_0x4caa5e(0x142)]=_0x4caa5e(0x1d8),_0x134bf8[_0x4caa5e(0x21f)][_0x4caa5e(0x1f0)]=_0x464425+'px',_0x134bf8[_0x4caa5e(0x21f)]['display']=_0x4caa5e(0x1d8),_0x134bf8[_0x4caa5e(0x19d)]=String(_0x1439e4['getHours']())[_0x4caa5e(0x1b1)](0x2,'0')+':'+String(_0x1439e4['getMinutes']())[_0x4caa5e(0x1b1)](0x2,'0');}function onScroll(){const _0x1040c3=a3_0x2d07ad,_0x54f4a3=document[_0x1040c3(0x1ce)](_0x1040c3(0x16e)),_0x1c290c=document['querySelectorAll'](_0x1040c3(0x171));for(let _0x164863 of _0x1c290c)if(_0x164863[_0x1040c3(0x229)]>=_0x54f4a3['scrollLeft']){const _0x26908f=new Date(_0x164863[_0x1040c3(0x1b5)](_0x1040c3(0x1a0)));document['getElementById']('headerMonth')[_0x1040c3(0x19d)]=_0x26908f[_0x1040c3(0x22c)]('ru',{'month':_0x1040c3(0x175)})[_0x1040c3(0x13d)]()+'\x20'+_0x26908f[_0x1040c3(0x14b)]();break;}}function showToast(_0x5134a5){const _0x43cc0a=a3_0x2d07ad,_0x37514b=document[_0x43cc0a(0x1ce)](_0x43cc0a(0x1cc));_0x37514b[_0x43cc0a(0x19d)]=_0x5134a5,_0x37514b['classList'][_0x43cc0a(0x177)](_0x43cc0a(0x187)),setTimeout(()=>_0x37514b[_0x43cc0a(0x1e9)]['remove'](_0x43cc0a(0x187)),0x7d0);}function handleInfiniteScroll(){const _0x3a43b2=a3_0x2d07ad,_0x1751e2=document[_0x3a43b2(0x1ce)]('matrixViewport'),_0x4f037f=_0x1751e2[_0x3a43b2(0x1c9)],_0x125092=_0x1751e2[_0x3a43b2(0x13e)],_0x218a6a=_0x1751e2['clientWidth'];if(_0x125092-(_0x4f037f+_0x218a6a)<0x12c){const _0x4ceb43=endOffset;endOffset+=0xe,renderDayRange(_0x4ceb43+0x1,endOffset),reRenderBlocks();}if(_0x4f037f<0x12c){const _0x17f84c=startOffset;startOffset-=0xe,prependDays(startOffset,_0x17f84c-0x1),_0x1751e2[_0x3a43b2(0x1c9)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1c0df,_0x38cded){const _0x41bf32=a3_0x2d07ad,_0x19ff40=document[_0x41bf32(0x1ce)]('daysHeaderTrack'),_0x4a6d45=document[_0x41bf32(0x1ce)](_0x41bf32(0x1df)),_0x56cb7d=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x40e297=new Date();_0x40e297['setHours'](0x0,0x0,0x0,0x0);const _0x147294=getLocalDateStr(new Date()),_0x1a0438=document[_0x41bf32(0x1e1)](),_0xf4d846=document[_0x41bf32(0x1e1)]();for(let _0x4ad5b2=_0x1c0df;_0x4ad5b2<=_0x38cded;_0x4ad5b2++){const _0x19e969=new Date(_0x40e297);_0x19e969['setDate'](_0x19e969['getDate']()+_0x4ad5b2);const _0x160030=getLocalDateStr(_0x19e969);let _0x411b3b=_0x19e969[_0x41bf32(0x20c)]()-0x1;if(_0x411b3b===-0x1)_0x411b3b=0x6;const _0x394180=_0x160030===_0x147294,_0x382757=document[_0x41bf32(0x14c)](_0x41bf32(0x181));_0x382757[_0x41bf32(0x1f9)]='day-col-header\x20'+(_0x394180?'today':''),_0x382757[_0x41bf32(0x1a7)](_0x41bf32(0x1a0),_0x160030),_0x382757[_0x41bf32(0x1af)]=_0x41bf32(0x1da)+_0x56cb7d[_0x411b3b]+_0x41bf32(0x1fa)+_0x19e969['getDate']()+_0x41bf32(0x1fb),_0x1a0438[_0x41bf32(0x20a)](_0x382757);const _0x3c9779=document[_0x41bf32(0x14c)](_0x41bf32(0x181));_0x3c9779[_0x41bf32(0x1f9)]=_0x41bf32(0x1d7)+(_0x394180?_0x41bf32(0x1c7):''),_0x3c9779['setAttribute'](_0x41bf32(0x1a0),_0x160030),_0x3c9779[_0x41bf32(0x1a7)](_0x41bf32(0x1a4),_0x411b3b),_0xf4d846[_0x41bf32(0x20a)](_0x3c9779);}_0x19ff40[_0x41bf32(0x157)](_0x1a0438,_0x19ff40[_0x41bf32(0x1ca)]),_0x4a6d45['insertBefore'](_0xf4d846,_0x4a6d45[_0x41bf32(0x226)]('.day-column'));}function hexToRgba(_0xca9ea6,_0x37ad0d){const _0x139083=a3_0x2d07ad;let _0x72d949;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x139083(0x1ef)](_0xca9ea6))return _0x72d949=_0xca9ea6[_0x139083(0x16c)](0x1)[_0x139083(0x151)](''),_0x72d949[_0x139083(0x173)]==0x3&&(_0x72d949=[_0x72d949[0x0],_0x72d949[0x0],_0x72d949[0x1],_0x72d949[0x1],_0x72d949[0x2],_0x72d949[0x2]]),_0x72d949='0x'+_0x72d949[_0x139083(0x1b8)](''),_0x139083(0x1d4)+[_0x72d949>>0x10&0xff,_0x72d949>>0x8&0xff,_0x72d949&0xff][_0x139083(0x1b8)](',')+','+_0x37ad0d+')';return'rgba(10,\x20132,\x20255,\x20'+_0x37ad0d+')';}let confirmResolver=null;function showCustomConfirm(_0x173616,_0x48193b,_0x5c1c9c=!![]){const _0x1c66bc=a3_0x2d07ad;document[_0x1c66bc(0x1ce)](_0x1c66bc(0x22e))[_0x1c66bc(0x19d)]=_0x173616,document[_0x1c66bc(0x1ce)]('ccText')[_0x1c66bc(0x19d)]=_0x48193b;const _0x1f436d=document[_0x1c66bc(0x1ce)]('ccYesBtn');return _0x5c1c9c?(_0x1f436d[_0x1c66bc(0x21f)][_0x1c66bc(0x183)]=_0x1c66bc(0x1a8),_0x1f436d[_0x1c66bc(0x21f)]['fontWeight']='600'):(_0x1f436d[_0x1c66bc(0x21f)]['color']=_0x1c66bc(0x204),_0x1f436d[_0x1c66bc(0x21f)][_0x1c66bc(0x22b)]=_0x1c66bc(0x22a)),new Promise(_0x5870e5=>{const _0x2247a9=_0x1c66bc;confirmResolver=_0x5870e5,document[_0x2247a9(0x1ce)](_0x2247a9(0x1a3))[_0x2247a9(0x1e9)][_0x2247a9(0x177)]('visible');});}function resolveCustomConfirm(_0x55eba5){const _0x5ca84b=a3_0x2d07ad;document[_0x5ca84b(0x1ce)](_0x5ca84b(0x1a3))[_0x5ca84b(0x1e9)][_0x5ca84b(0x18a)](_0x5ca84b(0x1be));if(confirmResolver)confirmResolver(_0x55eba5);}async function tryCancelCurrentSession(){const _0x1dd357=a3_0x2d07ad;if(!currentSession)return;const _0x33273d=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x1dd357(0x1ea),!![]);if(!_0x33273d)return;const _0x27e65d=currentSession;closeAllSheets(),sessions=sessions[_0x1dd357(0x1a6)](_0xddd14a=>_0xddd14a['id']!==_0x27e65d['id']),reRenderBlocks(),showToast(_0x1dd357(0x213)),lastUserActionTime=Date[_0x1dd357(0x1ae)]();try{const _0x404ef6=window[_0x1dd357(0x140)]?.[_0x1dd357(0x215)],_0x1595d9=await fetch(API_URL,{'method':_0x1dd357(0x1d5),'body':JSON['stringify']({'action':'client_cancel','init_data':_0x404ef6?.['initData']||'','coachId':_0x27e65d[_0x1dd357(0x1c2)],'dateStr':_0x27e65d[_0x1dd357(0x1c0)],'sessionId':_0x27e65d['id']})});if(_0x1595d9['ok'])DataManager[_0x1dd357(0x225)]();}catch(_0x111604){showToast(_0x1dd357(0x1a9));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x28ad8e=a3_0x2d07ad;if(!currentSession)return;document[_0x28ad8e(0x1ce)]('detailsSheet')[_0x28ad8e(0x1e9)][_0x28ad8e(0x18a)](_0x28ad8e(0x1ee)),document[_0x28ad8e(0x1ce)](_0x28ad8e(0x1bd))[_0x28ad8e(0x1e9)][_0x28ad8e(0x177)](_0x28ad8e(0x1ee));const _0x35b60b=document[_0x28ad8e(0x1ce)](_0x28ad8e(0x18f)),_0xe8c6f8=document[_0x28ad8e(0x1ce)](_0x28ad8e(0x234));_0x35b60b[_0x28ad8e(0x1af)]='',_0xe8c6f8[_0x28ad8e(0x1af)]=_0x28ad8e(0x203);const [_0x506195,_0x45ec3b]=currentSession['start']['split'](':')[_0x28ad8e(0x1ba)](Number),[_0x138a8b,_0x34d8dd]=currentSession[_0x28ad8e(0x185)][_0x28ad8e(0x151)](':')['map'](Number),_0x2d502a=_0x138a8b*0x3c+_0x34d8dd-(_0x506195*0x3c+_0x45ec3b);try{const _0x1b9695=window['Telegram']?.[_0x28ad8e(0x215)],_0x3297d8=await fetch(API_URL,{'method':_0x28ad8e(0x1d5),'body':JSON[_0x28ad8e(0x193)]({'action':'get_slots','coachId':currentSession[_0x28ad8e(0x1c2)],'duration':_0x2d502a,'init_data':_0x1b9695?.[_0x28ad8e(0x167)]||'','excludeSessionId':currentSession['id']})}),_0x5d960=await _0x3297d8['json']();_0x5d960['ok']&&_0x5d960[_0x28ad8e(0x237)]?(availableSlotsCache=_0x5d960[_0x28ad8e(0x237)],renderRescheduleDates()):_0xe8c6f8['innerHTML']=_0x28ad8e(0x150);}catch(_0x383b11){_0xe8c6f8[_0x28ad8e(0x1af)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x3dc0a8=a3_0x2d07ad,_0x4d5202=document[_0x3dc0a8(0x1ce)]('rsDatesTrack');_0x4d5202['innerHTML']='';const _0x5adc9b=Object[_0x3dc0a8(0x14a)](availableSlotsCache)[_0x3dc0a8(0x1fd)](),_0x145b6a=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x5adc9b[_0x3dc0a8(0x173)]===0x0){document['getElementById'](_0x3dc0a8(0x234))[_0x3dc0a8(0x1af)]=_0x3dc0a8(0x20b);return;}_0x5adc9b[_0x3dc0a8(0x172)]((_0x251c58,_0x3518df)=>{const _0x4ae0b8=_0x3dc0a8,_0x26b76e=new Date(_0x251c58),_0x302685=_0x145b6a[_0x26b76e[_0x4ae0b8(0x20c)]()],_0x495fb2=_0x26b76e['getDate'](),_0x36caa3=document[_0x4ae0b8(0x14c)](_0x4ae0b8(0x181));_0x36caa3[_0x4ae0b8(0x1f9)]=_0x4ae0b8(0x1f4);if(_0x3518df===0x0)_0x36caa3['classList'][_0x4ae0b8(0x177)](_0x4ae0b8(0x197));_0x36caa3[_0x4ae0b8(0x1af)]=_0x4ae0b8(0x159)+_0x302685+_0x4ae0b8(0x1c4)+_0x495fb2+_0x4ae0b8(0x1fb),_0x36caa3[_0x4ae0b8(0x228)]=()=>selectRsDate(_0x251c58,_0x36caa3),_0x4d5202[_0x4ae0b8(0x20a)](_0x36caa3);}),selectRsDate(_0x5adc9b[0x0],_0x4d5202[_0x3dc0a8(0x1ca)]);}function selectRsDate(_0x3b7b23,_0x4e6524){const _0x11f64c=a3_0x2d07ad;selectedRsDate=_0x3b7b23,document[_0x11f64c(0x217)](_0x11f64c(0x143))[_0x11f64c(0x172)](_0x3f75e8=>_0x3f75e8[_0x11f64c(0x1e9)][_0x11f64c(0x18a)](_0x11f64c(0x197)));if(_0x4e6524)_0x4e6524[_0x11f64c(0x1e9)][_0x11f64c(0x177)](_0x11f64c(0x197));const _0x307fe5=document[_0x11f64c(0x1ce)](_0x11f64c(0x234));_0x307fe5[_0x11f64c(0x1af)]='';const _0x11d3c5=availableSlotsCache[_0x3b7b23]||[];if(_0x11d3c5[_0x11f64c(0x173)]===0x0){_0x307fe5[_0x11f64c(0x1af)]=_0x11f64c(0x150);return;}_0x11d3c5[_0x11f64c(0x172)](_0x4ba669=>{const _0x2f87e8=_0x11f64c,_0x4f0157=document[_0x2f87e8(0x14c)](_0x2f87e8(0x207));_0x4f0157[_0x2f87e8(0x1f9)]=_0x2f87e8(0x1a2),_0x4f0157[_0x2f87e8(0x19d)]=_0x4ba669,_0x4f0157[_0x2f87e8(0x228)]=()=>confirmReschedule(_0x4ba669),_0x307fe5[_0x2f87e8(0x20a)](_0x4f0157);});}async function confirmReschedule(_0x32bc48){const _0x274522=a3_0x2d07ad,_0x75091b=new Date(selectedRsDate),_0x5e77bd=_0x75091b[_0x274522(0x220)]('ru-RU',{'day':_0x274522(0x1ec),'month':'long'}),_0x491936=await showCustomConfirm(_0x274522(0x1bc),'–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x5e77bd+_0x274522(0x163)+_0x32bc48+'?',![]);if(!_0x491936)return;closeAllSheets(),showToast(_0x274522(0x1e4)),lastUserActionTime=Date[_0x274522(0x1ae)]();const _0x3388e6=currentSession[_0x274522(0x1c0)],_0x1f1a55=currentSession['id'],[_0x3f8670,_0x4634d4]=currentSession[_0x274522(0x210)][_0x274522(0x151)](':')[_0x274522(0x1ba)](Number),[_0x3f644c,_0x1183d9]=currentSession[_0x274522(0x185)][_0x274522(0x151)](':')[_0x274522(0x1ba)](Number),_0x39eb96=_0x3f644c*0x3c+_0x1183d9-(_0x3f8670*0x3c+_0x4634d4),[_0x545851,_0x175f9d]=_0x32bc48[_0x274522(0x151)](':')['map'](Number),_0x2b6f14=_0x545851*0x3c+_0x175f9d+_0x39eb96,_0x567d3d=Math[_0x274522(0x1d3)](_0x2b6f14/0x3c),_0x21672f=_0x2b6f14%0x3c,_0x1eeeb5=String(_0x567d3d)[_0x274522(0x1b1)](0x2,'0')+':'+String(_0x21672f)[_0x274522(0x1b1)](0x2,'0'),_0x517abc=sessions[_0x274522(0x21d)](_0x5eccaa=>_0x5eccaa['id']===_0x1f1a55);_0x517abc!==-0x1&&(sessions[_0x517abc][_0x274522(0x1c0)]=selectedRsDate,sessions[_0x517abc][_0x274522(0x210)]=_0x32bc48,sessions[_0x517abc][_0x274522(0x185)]=_0x1eeeb5,reRenderBlocks());try{const _0x5b6c94=window[_0x274522(0x140)]?.[_0x274522(0x215)],_0x16b416=await fetch(API_URL,{'method':_0x274522(0x1d5),'body':JSON[_0x274522(0x193)]({'action':_0x274522(0x1dc),'init_data':_0x5b6c94?.[_0x274522(0x167)]||'','oldSessionId':_0x1f1a55,'oldDate':_0x3388e6,'newDate':selectedRsDate,'newTime':_0x32bc48,'coachId':currentSession[_0x274522(0x1c2)]})}),_0x3cf346=await _0x16b416['json']();!_0x3cf346['ok']?(showToast(_0x274522(0x206)),DataManager[_0x274522(0x161)]()):(showToast(_0x274522(0x1d1)),DataManager[_0x274522(0x225)]());}catch(_0x265a3c){showToast(_0x274522(0x1a9));}}document[a3_0x2d07ad(0x209)]('DOMContentLoaded',init);