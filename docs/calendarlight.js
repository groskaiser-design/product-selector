const a3_0x3793b2=a3_0x43e1;(function(_0x6b8ca7,_0x2ce0b4){const _0x4e56fb=a3_0x43e1,_0x2b8059=_0x6b8ca7();while(!![]){try{const _0x1d00d5=parseInt(_0x4e56fb(0x97))/0x1*(parseInt(_0x4e56fb(0xe4))/0x2)+-parseInt(_0x4e56fb(0xa9))/0x3*(parseInt(_0x4e56fb(0x7e))/0x4)+-parseInt(_0x4e56fb(0x112))/0x5+-parseInt(_0x4e56fb(0xb6))/0x6+-parseInt(_0x4e56fb(0x160))/0x7*(-parseInt(_0x4e56fb(0xe1))/0x8)+parseInt(_0x4e56fb(0x87))/0x9*(parseInt(_0x4e56fb(0x122))/0xa)+parseInt(_0x4e56fb(0x109))/0xb*(parseInt(_0x4e56fb(0x13c))/0xc);if(_0x1d00d5===_0x2ce0b4)break;else _0x2b8059['push'](_0x2b8059['shift']());}catch(_0x117ce8){_0x2b8059['push'](_0x2b8059['shift']());}}}(a3_0x1df2,0x3e5cf));const APP_VERSION=a3_0x3793b2(0x166),API_URL=a3_0x3793b2(0xab),GRID_H=0x3c,KEY_SESSIONS=a3_0x3793b2(0x161),KEY_SETTINGS=a3_0x3793b2(0x93),KEY_CLIENTS=a3_0x3793b2(0xec);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x3793b2(0x78),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x18009d=a3_0x3793b2,_0x54a661=(function(){let _0x2deabd=!![];return function(_0x569754,_0x54e1f7){const _0x52083b=_0x2deabd?function(){const _0x5848cd=a3_0x43e1;if(_0x54e1f7){const _0x1de693=_0x54e1f7[_0x5848cd(0xbf)](_0x569754,arguments);return _0x54e1f7=null,_0x1de693;}}:function(){};return _0x2deabd=![],_0x52083b;};}()),_0xae3daa=_0x54a661(this,function(){const _0x4e0e9a=a3_0x43e1;return _0xae3daa[_0x4e0e9a(0x8f)]()[_0x4e0e9a(0x130)](_0x4e0e9a(0xeb))['toString']()[_0x4e0e9a(0xad)](_0xae3daa)[_0x4e0e9a(0x130)]('(((.+)+)+)+$');});_0xae3daa();try{const _0x389f6f=window['Telegram']?.[_0x18009d(0x12b)];if(!_0x389f6f)return;_0x389f6f[_0x18009d(0xa1)](),_0x389f6f[_0x18009d(0xd3)]();try{_0x389f6f[_0x18009d(0xd8)](_0x18009d(0xaf)),_0x389f6f[_0x18009d(0xf8)]&&_0x389f6f[_0x18009d(0xf8)](_0x18009d(0xaf));}catch(_0x55a532){console['log'](_0x18009d(0x8d),_0x55a532);}try{_0x389f6f['BackButton']&&(_0x389f6f[_0x18009d(0x12d)][_0x18009d(0xfc)](),_0x389f6f[_0x18009d(0x12d)]['offClick'](),_0x389f6f['BackButton']['onClick'](function(){window['location']['href']='router.html';}));}catch(_0x32c65e){console['log'](_0x18009d(0x165),_0x32c65e);}try{if(_0x389f6f[_0x18009d(0x10a)])_0x389f6f[_0x18009d(0x10a)]();}catch(_0x473773){}}catch(_0x52f51e){console[_0x18009d(0x11e)](_0x18009d(0xdf),_0x52f51e);}}());function isAdmin(){const _0x54931a=a3_0x3793b2;try{const _0x14b9ec=Number(window['Telegram']?.[_0x54931a(0x12b)]?.[_0x54931a(0x110)]?.[_0x54931a(0x126)]?.['id']);return _0x14b9ec===0xbaf7174;}catch(_0x4a63dc){return![];}}const DataManager={'saveLocally'(){const _0x461525=a3_0x3793b2;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x461525(0x111)](sessions)),localStorage[_0x461525(0x148)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage['setItem'](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x458547){}},'loadLocal'(){const _0x4e4fee=a3_0x3793b2;try{const _0x355af3=localStorage[_0x4e4fee(0xfe)](KEY_SESSIONS);if(_0x355af3)sessions=JSON[_0x4e4fee(0xc2)](_0x355af3);const _0x3645b6=localStorage[_0x4e4fee(0xfe)](KEY_CLIENTS);if(_0x3645b6)clients=JSON[_0x4e4fee(0xc2)](_0x3645b6);const _0x302076=localStorage[_0x4e4fee(0xfe)](KEY_SETTINGS);if(_0x302076){const _0x226fdf=JSON[_0x4e4fee(0xc2)](_0x302076);if(_0x226fdf[_0x4e4fee(0x8c)])availabilityPattern=_0x226fdf['pattern'];if(_0x226fdf[_0x4e4fee(0x90)])specialRanges=_0x226fdf['ranges'];if(_0x226fdf[_0x4e4fee(0x71)])dateExceptions=_0x226fdf[_0x4e4fee(0x71)];}}catch(_0x951b36){}},async 'syncLoad'(){const _0x30c97f=a3_0x3793b2,_0x5f2469=new Date(),_0x4afffa=_0x5f2469[_0x30c97f(0x14a)]()+'-'+String(_0x5f2469[_0x30c97f(0x11d)]()+0x1)[_0x30c97f(0xf2)](0x2,'0'),_0x4de05e=new Date(_0x5f2469);_0x4de05e[_0x30c97f(0x98)](_0x5f2469[_0x30c97f(0x11d)]()+0x1);const _0x4bb597=_0x4de05e[_0x30c97f(0x14a)]()+'-'+String(_0x4de05e[_0x30c97f(0x11d)]()+0x1)[_0x30c97f(0xf2)](0x2,'0'),_0x5ee000=Date[_0x30c97f(0xda)]();try{const _0xdc1779=window[_0x30c97f(0x133)]?.[_0x30c97f(0x12b)],_0x99f697=_0xdc1779?.['initData']||'',[_0x98f552,_0x1eae43]=await Promise[_0x30c97f(0x117)]([fetch(API_URL,{'method':_0x30c97f(0xb7),'body':JSON['stringify']({'action':'client_load','init_data':_0x99f697,'month_str':_0x4afffa})})[_0x30c97f(0x167)](_0x3b019b=>_0x3b019b[_0x30c97f(0x10e)]()),fetch(API_URL,{'method':_0x30c97f(0xb7),'body':JSON[_0x30c97f(0x111)]({'action':_0x30c97f(0xd0),'init_data':_0x99f697,'month_str':_0x4bb597})})[_0x30c97f(0x167)](_0x439ef8=>_0x439ef8[_0x30c97f(0x10e)]())]);if(lastUserActionTime>_0x5ee000){console[_0x30c97f(0x99)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x98f552['ok'])this[_0x30c97f(0x142)](_0x98f552[_0x30c97f(0x76)],_0x4afffa);if(_0x1eae43['ok'])this[_0x30c97f(0x142)](_0x1eae43[_0x30c97f(0x76)],_0x4bb597);this['saveLocally']();}catch(_0x5cd290){}},'applyData'(_0x42cb5e,_0x3a304a){const _0x294ace=a3_0x3793b2;if(!_0x42cb5e)return;if(_0x42cb5e[_0x294ace(0x149)]){if(_0x42cb5e['settings'][_0x294ace(0x8c)])availabilityPattern=_0x42cb5e['settings'][_0x294ace(0x8c)];if(_0x42cb5e['settings']['ranges'])specialRanges=_0x42cb5e[_0x294ace(0x149)][_0x294ace(0x90)];if(_0x42cb5e[_0x294ace(0x149)][_0x294ace(0x71)])dateExceptions=_0x42cb5e[_0x294ace(0x149)][_0x294ace(0x71)];}if(_0x42cb5e[_0x294ace(0x84)]&&Array['isArray'](_0x42cb5e[_0x294ace(0x84)]))clients=_0x42cb5e[_0x294ace(0x84)];_0x42cb5e['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x42cb5e[_0x294ace(0xd5)]}),_0x42cb5e[_0x294ace(0x146)]&&(sessions=sessions[_0x294ace(0x95)](_0xc54696=>!_0xc54696[_0x294ace(0x10d)]['startsWith'](_0x3a304a)),Object['keys'](_0x42cb5e[_0x294ace(0x146)])[_0x294ace(0x13b)](_0x51ab09=>{const _0xcb2fd=_0x294ace,_0x45bca9=_0x42cb5e[_0xcb2fd(0x146)][_0x51ab09];_0x45bca9[_0xcb2fd(0x13b)](_0x52cfe8=>{const _0x51265c=_0xcb2fd;sessions[_0x51265c(0x6f)]({'id':_0x52cfe8['i'],'clientId':_0x52cfe8['c'],'coachId':_0x52cfe8[_0x51265c(0xcc)],'dateStr':_0x3a304a+'-'+_0x51ab09[_0x51265c(0xf2)](0x2,'0'),'start':_0x52cfe8['s'],'end':_0x52cfe8['e'],'note':_0x52cfe8['n']||'','status':_0x52cfe8['st']||_0x51265c(0xea),'seriesId':_0x52cfe8[_0x51265c(0x73)]});});})),reRenderBlocks();}};function init(){const _0x3fb911=a3_0x3793b2;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x3fb911(0x7d)]('matrixViewport')[_0x3fb911(0x153)](_0x3fb911(0xc8),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x3fb911(0xca)]();}function renderTimeColumn(){const _0x40f423=a3_0x3793b2,_0x26fcfe=document['getElementById'](_0x40f423(0xb2)),_0x1360af=document[_0x40f423(0x7d)](_0x40f423(0xc3));_0x26fcfe[_0x40f423(0xf9)]='',_0x26fcfe[_0x40f423(0xe6)](_0x1360af);for(let _0xcd0743=0x0;_0xcd0743<0x18;_0xcd0743++){const _0x2d857c=document[_0x40f423(0xf1)](_0x40f423(0xff));_0x2d857c[_0x40f423(0x119)]=_0x40f423(0x14d);if(_0xcd0743>0x0)_0x2d857c[_0x40f423(0xf9)]=_0x40f423(0x12c)+String(_0xcd0743)['padStart'](0x2,'0')+_0x40f423(0x152);_0x26fcfe[_0x40f423(0xe6)](_0x2d857c);}}function renderDayRange(_0x1256a,_0x33c063){const _0x5a1f38=a3_0x3793b2,_0x4dc776=document[_0x5a1f38(0x7d)](_0x5a1f38(0x100)),_0x4ad0ec=document[_0x5a1f38(0x7d)](_0x5a1f38(0xa6)),_0x4fa2be=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x5e3581=new Date();_0x5e3581[_0x5a1f38(0x132)](0x0,0x0,0x0,0x0);const _0x17817=getLocalDateStr(new Date());for(let _0x1dca7b=_0x1256a;_0x1dca7b<=_0x33c063;_0x1dca7b++){const _0x1f11a3=new Date(_0x5e3581);_0x1f11a3[_0x5a1f38(0xe0)](_0x1f11a3[_0x5a1f38(0xee)]()+_0x1dca7b);const _0x5b4b48=getLocalDateStr(_0x1f11a3);let _0x2d7657=_0x1f11a3[_0x5a1f38(0xed)]()-0x1;if(_0x2d7657===-0x1)_0x2d7657=0x6;const _0x46163d=_0x5b4b48===_0x17817,_0x103d61=document[_0x5a1f38(0xf1)]('div');_0x103d61[_0x5a1f38(0x119)]='day-col-header\x20'+(_0x46163d?_0x5a1f38(0x138):''),_0x103d61[_0x5a1f38(0xa4)](_0x5a1f38(0x11a),_0x5b4b48),_0x103d61[_0x5a1f38(0xf9)]=_0x5a1f38(0xe8)+_0x4fa2be[_0x2d7657]+'</div><div\x20class=\x22dch-num\x22>'+_0x1f11a3[_0x5a1f38(0xee)]()+'</div>',_0x4dc776[_0x5a1f38(0xe6)](_0x103d61);const _0x24819b=document[_0x5a1f38(0xf1)](_0x5a1f38(0xff));_0x24819b[_0x5a1f38(0x119)]=_0x5a1f38(0x158)+(_0x46163d?_0x5a1f38(0x138):''),_0x24819b[_0x5a1f38(0xa4)](_0x5a1f38(0x11a),_0x5b4b48),_0x24819b[_0x5a1f38(0xa4)](_0x5a1f38(0x96),_0x2d7657),_0x4ad0ec[_0x5a1f38(0xe6)](_0x24819b);}}function reRenderBlocks(){const _0x5c4175=a3_0x3793b2;document[_0x5c4175(0xaa)]('.day-column')[_0x5c4175(0x13b)](_0x2c07a5=>{const _0x4d100e=_0x5c4175;_0x2c07a5[_0x4d100e(0xaa)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x4d100e(0x13b)](_0x5c6598=>_0x5c6598[_0x4d100e(0x128)]());const _0xf1ce79=_0x2c07a5[_0x4d100e(0x144)](_0x4d100e(0x11a)),_0x11e4fc=parseInt(_0x2c07a5[_0x4d100e(0x144)](_0x4d100e(0x96))),_0x19ab9d=Math[_0x4d100e(0x7b)](_0x2c07a5[_0x4d100e(0x16a)]);(availabilityPattern[_0x11e4fc]||[])[_0x4d100e(0x13b)](_0x5f2ac6=>{const _0x4b5b78=_0x4d100e,_0x1f6555=document[_0x4b5b78(0xf1)](_0x4b5b78(0xff));_0x1f6555[_0x4b5b78(0x119)]=_0x4b5b78(0xc4),_0x1f6555[_0x4b5b78(0x124)][_0x4b5b78(0x82)]=_0x5f2ac6*GRID_H+'px',_0x1f6555[_0x4b5b78(0x124)][_0x4b5b78(0x85)]='-'+_0x19ab9d+_0x4b5b78(0x131)+_0x5f2ac6*GRID_H+'px',_0x2c07a5[_0x4b5b78(0xe6)](_0x1f6555);});if(specialRanges[_0x4d100e(0x114)]>0x0){const _0x52dccd=new Date(_0xf1ce79+_0x4d100e(0x157))[_0x4d100e(0xfa)](),_0x468631=new Date(_0xf1ce79+_0x4d100e(0xbb))[_0x4d100e(0xfa)]();specialRanges[_0x4d100e(0x13b)](_0x154e7c=>{const _0x3421d0=_0x4d100e,_0x3bc67b=new Date(_0x154e7c[_0x3421d0(0xd4)])['getTime'](),_0x453c8c=new Date(_0x154e7c['end'])[_0x3421d0(0xfa)](),_0x9153fc=Math[_0x3421d0(0x123)](_0x52dccd,_0x3bc67b),_0xc67db9=Math['min'](_0x468631,_0x453c8c);if(_0x9153fc<_0xc67db9){const _0x48f299=(_0x9153fc-_0x52dccd)/0x36ee80*GRID_H,_0x2e6435=(_0xc67db9-_0x9153fc)/0x36ee80*GRID_H,_0x944649=document['createElement'](_0x3421d0(0xff));_0x2e6435>=23.5*GRID_H?(_0x944649[_0x3421d0(0x119)]=_0x3421d0(0xf7),_0x944649[_0x3421d0(0x124)][_0x3421d0(0x85)]='-'+_0x19ab9d+_0x3421d0(0x169)):(_0x944649['className']=_0x3421d0(0x101),_0x944649[_0x3421d0(0x124)]['top']=_0x48f299+'px',_0x944649[_0x3421d0(0x124)][_0x3421d0(0x150)]=_0x2e6435+'px',_0x944649['style'][_0x3421d0(0x85)]='-'+_0x19ab9d+'px\x20-'+_0x48f299+'px'),_0x2c07a5[_0x3421d0(0xe6)](_0x944649);}});}renderEventsForColumn(_0x2c07a5,_0xf1ce79);});}function renderEventsForColumn(_0x4e250c,_0xb474b2){const _0x3a41c4=a3_0x3793b2,_0x492503=sessions[_0x3a41c4(0x95)](_0x178f90=>_0x178f90[_0x3a41c4(0x10d)]===_0xb474b2),_0x313e7f=_0x492503['map'](_0x23a292=>{const _0x19b37b=_0x3a41c4,[_0x1e77c4,_0x148097]=_0x23a292[_0x19b37b(0xd4)]['split'](':')['map'](Number),[_0x4f876a,_0x5675ce]=_0x23a292[_0x19b37b(0xd9)][_0x19b37b(0x9b)](':')['map'](Number);return{'data':_0x23a292,'start':_0x1e77c4*0x3c+_0x148097,'end':_0x4f876a*0x3c+_0x5675ce,'colIndex':0x0};});_0x313e7f[_0x3a41c4(0x11b)]((_0x5c2189,_0x3874de)=>_0x5c2189[_0x3a41c4(0xd4)]-_0x3874de[_0x3a41c4(0xd4)]||_0x3874de[_0x3a41c4(0xd9)]-_0x3874de['start']-(_0x5c2189[_0x3a41c4(0xd9)]-_0x5c2189[_0x3a41c4(0xd4)]));const _0x5d8b01=[];_0x313e7f['forEach'](_0x469000=>{const _0x4b6667=_0x3a41c4;let _0x1b2a61=![];for(let _0x9fc36a=0x0;_0x9fc36a<_0x5d8b01[_0x4b6667(0x114)];_0x9fc36a++){const _0x3125ba=_0x5d8b01[_0x9fc36a];if(_0x469000[_0x4b6667(0xd4)]>=_0x3125ba[_0x3125ba[_0x4b6667(0x114)]-0x1][_0x4b6667(0xd9)]){_0x3125ba[_0x4b6667(0x6f)](_0x469000),_0x469000[_0x4b6667(0xf5)]=_0x9fc36a,_0x1b2a61=!![];break;}}!_0x1b2a61&&(_0x5d8b01['push']([_0x469000]),_0x469000[_0x4b6667(0xf5)]=_0x5d8b01['length']-0x1);}),_0x313e7f[_0x3a41c4(0x13b)](_0x247ca7=>{const _0xf63525=_0x3a41c4;let _0x3ddbde=0x0;_0x313e7f['forEach'](_0xf4dd21=>{const _0x4f0272=a3_0x43e1;if(Math[_0x4f0272(0x123)](_0x247ca7[_0x4f0272(0xd4)],_0xf4dd21['start'])<Math[_0x4f0272(0x79)](_0x247ca7[_0x4f0272(0xd9)],_0xf4dd21[_0x4f0272(0xd9)])&&_0xf4dd21['colIndex']>_0x3ddbde)_0x3ddbde=_0xf4dd21['colIndex'];});const _0x3bbcf9=_0x3ddbde+0x1,_0x31d530=0x64/_0x3bbcf9,_0x53e80a=_0x247ca7[_0xf63525(0xf5)]*_0x31d530,_0x4cb966=document[_0xf63525(0xf1)]('div'),_0x12c367=_0x247ca7[_0xf63525(0x76)];let _0x2c41f7=_0xf63525(0xbe);if(clients&&clients[_0xf63525(0x114)]>0x0){const _0x52e491=clients[_0xf63525(0xcf)](_0x2f59d9=>String(_0x2f59d9['id'])===String(_0x12c367[_0xf63525(0x88)]));if(_0x52e491&&_0x52e491[_0xf63525(0xb1)])_0x2c41f7=_0x52e491[_0xf63525(0xb1)];}const _0x8f38e2=_0x12c367[_0xf63525(0xf4)]===_0xf63525(0x134),_0x182c00=_0x8f38e2?0x1:0.45;_0x4cb966[_0xf63525(0x119)]=_0xf63525(0x137)+(_0x8f38e2?_0xf63525(0xf3):''),_0x4cb966['style']['backgroundColor']=hexToRgba(_0x2c41f7,_0x182c00),_0x4cb966[_0xf63525(0x124)]['borderLeftColor']=_0x2c41f7;const _0x5f3174=_0x247ca7[_0xf63525(0xd4)]/0x3c*GRID_H,_0x1ad98=(_0x247ca7[_0xf63525(0xd9)]-_0x247ca7['start'])/0x3c*GRID_H;_0x4cb966[_0xf63525(0x124)][_0xf63525(0x82)]=_0x5f3174+'px',_0x4cb966[_0xf63525(0x124)][_0xf63525(0x150)]=Math[_0xf63525(0x123)](_0x1ad98,0x14)+'px',_0x4cb966[_0xf63525(0x124)][_0xf63525(0x159)]='calc('+_0x31d530+_0xf63525(0xe9),_0x4cb966[_0xf63525(0x124)][_0xf63525(0xba)]=_0xf63525(0x135)+_0x53e80a+_0xf63525(0x156),_0x4cb966[_0xf63525(0x124)]['zIndex']=0xa+_0x247ca7[_0xf63525(0xf5)];if(_0x31d530<0x55)_0x4cb966[_0xf63525(0x13e)][_0xf63525(0xd2)]('mini');let _0x11fa69='';if(_0x12c367[_0xf63525(0x155)])_0x11fa69+=_0xf63525(0xf0);if(_0x8f38e2)_0x11fa69+=_0xf63525(0x94);_0x4cb966[_0xf63525(0xf9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x12c367[_0xf63525(0xd4)]+_0xf63525(0xb9)+_0x12c367['end']+_0xf63525(0xc9)+_0x11fa69+_0xf63525(0x89),_0x4cb966[_0xf63525(0x86)]=_0x36e253=>{_0x36e253['stopPropagation'](),openDetails(_0x12c367);},_0x4e250c[_0xf63525(0xe6)](_0x4cb966);});}function openAnalytics(){const _0x37c42a=a3_0x3793b2,_0x19736a=document[_0x37c42a(0xb5)](_0x37c42a(0x14e));setAnalyticsPeriod('week',_0x19736a),openSheet(_0x37c42a(0x162));}function setAnalyticsPeriod(_0x3fc17f,_0x46e089){const _0x5132=a3_0x3793b2;currentAnPeriod=_0x3fc17f,document[_0x5132(0xaa)]('.period-switch\x20.p-btn')[_0x5132(0x13b)](_0x42c1fc=>_0x42c1fc[_0x5132(0x13e)][_0x5132(0x128)](_0x5132(0xdb)));if(_0x46e089)_0x46e089[_0x5132(0x13e)][_0x5132(0xd2)](_0x5132(0xdb));const _0x32c07e=document[_0x5132(0x7d)](_0x5132(0xcb));_0x32c07e['style'][_0x5132(0x8e)]=_0x3fc17f==='custom'?_0x5132(0xc0):_0x5132(0xb0);const _0x1c1f9a=new Date();let _0x110c35=new Date(),_0xab2183=new Date();if(_0x3fc17f===_0x5132(0x78))_0x110c35=getStartOfWeek(_0x1c1f9a),_0xab2183=new Date(_0x110c35),_0xab2183[_0x5132(0xe0)](_0xab2183[_0x5132(0xee)]()+0x6);else{if(_0x3fc17f===_0x5132(0xe5))_0x110c35=new Date(_0x1c1f9a['getFullYear'](),_0x1c1f9a[_0x5132(0x11d)](),0x1),_0xab2183=new Date(_0x1c1f9a[_0x5132(0x14a)](),_0x1c1f9a[_0x5132(0x11d)]()+0x1,0x0);else{!document[_0x5132(0x7d)](_0x5132(0x103))[_0x5132(0xc5)]&&(document[_0x5132(0x7d)](_0x5132(0x103))[_0x5132(0xc5)]=getLocalDateStr(_0x1c1f9a),document[_0x5132(0x7d)](_0x5132(0x140))[_0x5132(0xc5)]=getLocalDateStr(_0x1c1f9a));refreshAnalytics();return;}}document['getElementById']('anStart')['value']=getLocalDateStr(_0x110c35),document[_0x5132(0x7d)](_0x5132(0x140))['value']=getLocalDateStr(_0xab2183),refreshAnalytics();}function refreshAnalytics(){const _0x3b77c7=a3_0x3793b2,_0xc680ce=document[_0x3b77c7(0x7d)]('anStart')[_0x3b77c7(0xc5)],_0x43aa5e=document[_0x3b77c7(0x7d)](_0x3b77c7(0x140))[_0x3b77c7(0xc5)];if(!_0xc680ce||!_0x43aa5e)return;const _0x2f2ce6=sessions[_0x3b77c7(0x95)](_0x39465d=>_0x39465d[_0x3b77c7(0x10d)]>=_0xc680ce&&_0x39465d[_0x3b77c7(0x10d)]<=_0x43aa5e&&_0x39465d['status']!==_0x3b77c7(0xa2)),_0x3f83dc=_0x2f2ce6[_0x3b77c7(0x114)],_0x424df0=_0x2f2ce6[_0x3b77c7(0x95)](_0x3b1ec0=>_0x3b1ec0['status']===_0x3b77c7(0x134))[_0x3b77c7(0x114)],_0x308014=_0x3f83dc>0x0?Math['round'](_0x424df0/_0x3f83dc*0x64):0x0;document[_0x3b77c7(0x7d)]('anPercent')[_0x3b77c7(0x147)]=_0x308014+'%',document['getElementById']('anTotalStats')[_0x3b77c7(0x147)]=_0x424df0+_0x3b77c7(0xbc)+_0x3f83dc+_0x3b77c7(0xcd);const _0x25eadc=document[_0x3b77c7(0x7d)](_0x3b77c7(0x77)),_0x2cc6ae=0x2*Math['PI']*0x23,_0x1e5162=_0x2cc6ae-_0x308014/0x64*_0x2cc6ae;_0x25eadc[_0x3b77c7(0x124)][_0x3b77c7(0xf6)]=_0x1e5162;const _0x123385={};_0x2f2ce6[_0x3b77c7(0x13b)](_0x238dfc=>{const _0x37d392=_0x3b77c7,_0x32caeb=_0x238dfc[_0x37d392(0x13a)]||_0x37d392(0xd7);if(!_0x123385[_0x32caeb]){const _0x21f4bf='#'+_0x32caeb['toString']()[_0x37d392(0x9f)](0x0,0x6);_0x123385[_0x32caeb]={'total':0x0,'done':0x0,'color':_0x21f4bf};}_0x123385[_0x32caeb][_0x37d392(0x12a)]++;if(_0x238dfc['status']===_0x37d392(0x134))_0x123385[_0x32caeb]['done']++;});const _0x3fae4d=document['getElementById'](_0x3b77c7(0x15e));_0x3fae4d[_0x3b77c7(0xf9)]='';const _0x10b4f1=Object[_0x3b77c7(0x141)](_0x123385)[_0x3b77c7(0x11b)]((_0x1fec7e,_0x500b82)=>_0x500b82[0x1][_0x3b77c7(0x12a)]-_0x1fec7e[0x1][_0x3b77c7(0x12a)]);if(_0x10b4f1[_0x3b77c7(0x114)]===0x0){_0x3fae4d['innerHTML']=_0x3b77c7(0x11c);return;}_0x10b4f1[_0x3b77c7(0x13b)](([_0x547520,_0x55d0b8])=>{const _0x50b762=_0x3b77c7,_0x22d77d=Math[_0x50b762(0x7b)](_0x55d0b8[_0x50b762(0xc7)]/_0x55d0b8['total']*0x64),_0x5ba467=document[_0x50b762(0xf1)](_0x50b762(0xff));_0x5ba467['className']='client-stat-card',_0x5ba467[_0x50b762(0x124)][_0x50b762(0xdd)]=_0x55d0b8[_0x50b762(0xb1)],_0x5ba467[_0x50b762(0xf9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x547520[_0x50b762(0x9f)](0x0,0x5)+_0x50b762(0x81)+_0x55d0b8[_0x50b762(0xc7)]+'</span>\x20/\x20'+_0x55d0b8[_0x50b762(0x12a)]+_0x50b762(0xfb)+_0x22d77d+_0x50b762(0x107),_0x3fae4d[_0x50b762(0xe6)](_0x5ba467);});}function openDetails(_0x5a5db7){const _0x2ea8d3=a3_0x3793b2;currentSession=_0x5a5db7;const _0x4a344e=new Date(_0x5a5db7[_0x2ea8d3(0x10d)]),_0x48d9d5=_0x4a344e[_0x2ea8d3(0x12f)](_0x2ea8d3(0x127),{'weekday':_0x2ea8d3(0xde),'day':_0x2ea8d3(0x7c),'month':_0x2ea8d3(0xde)});document[_0x2ea8d3(0x7d)](_0x2ea8d3(0xe7))[_0x2ea8d3(0x147)]=_0x48d9d5[_0x2ea8d3(0x11f)](0x0)[_0x2ea8d3(0xef)]()+_0x48d9d5[_0x2ea8d3(0x72)](0x1),document['getElementById'](_0x2ea8d3(0x104))['textContent']=_0x5a5db7[_0x2ea8d3(0xd4)]+_0x2ea8d3(0xb9)+_0x5a5db7['end'],document[_0x2ea8d3(0x7d)](_0x2ea8d3(0x10b))[_0x2ea8d3(0x147)]=_0x5a5db7[_0x2ea8d3(0x9a)]||_0x2ea8d3(0x7a);const _0x5dc56f=document[_0x2ea8d3(0x7d)](_0x2ea8d3(0xa3)),_0x53318e=document['getElementById']('cancelContainer'),_0x3d718a=_0x53318e[_0x2ea8d3(0xb5)](_0x2ea8d3(0x163)),_0x1be90b=_0x53318e[_0x2ea8d3(0xb5)](_0x2ea8d3(0x14f)),_0x274cfb=document[_0x2ea8d3(0x7d)]('cancelHint');if(_0x5a5db7['status']===_0x2ea8d3(0x134))_0x5dc56f[_0x2ea8d3(0x147)]=_0x2ea8d3(0x14b),_0x5dc56f[_0x2ea8d3(0x124)]['color']=_0x2ea8d3(0x15b),_0x53318e[_0x2ea8d3(0x124)][_0x2ea8d3(0x8e)]=_0x2ea8d3(0xb0);else{_0x5dc56f['textContent']='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0x5dc56f['style'][_0x2ea8d3(0xb1)]='var(--acc-blue)',_0x53318e[_0x2ea8d3(0x124)][_0x2ea8d3(0x8e)]=_0x2ea8d3(0x136);const _0x157d32=new Date(_0x5a5db7[_0x2ea8d3(0x10d)]+'T'+_0x5a5db7['start']),_0x45a75a=new Date(),_0x5211c1=(_0x157d32-_0x45a75a)/(0x3e8*0x3c*0x3c),_0x1ca4b8=coachProfiles[_0x5a5db7[_0x2ea8d3(0x13a)]]&&coachProfiles[_0x5a5db7[_0x2ea8d3(0x13a)]][_0x2ea8d3(0xc6)]?parseInt(coachProfiles[_0x5a5db7[_0x2ea8d3(0x13a)]][_0x2ea8d3(0xc6)]):0x18;if(_0x1ca4b8===0x0||_0x5211c1>=_0x1ca4b8)_0x3d718a[_0x2ea8d3(0x124)][_0x2ea8d3(0x8e)]=_0x2ea8d3(0x136),_0x1be90b[_0x2ea8d3(0x124)][_0x2ea8d3(0x8e)]=_0x2ea8d3(0x136),_0x274cfb['style'][_0x2ea8d3(0x8e)]='none';else{_0x3d718a['style'][_0x2ea8d3(0x8e)]=_0x2ea8d3(0xb0),_0x1be90b[_0x2ea8d3(0x124)][_0x2ea8d3(0x8e)]=_0x2ea8d3(0xb0),_0x274cfb[_0x2ea8d3(0x124)][_0x2ea8d3(0x8e)]=_0x2ea8d3(0x136);let _0x318ae5=_0x1ca4b8===0x0?_0x2ea8d3(0x151):'–∑–∞\x20'+_0x1ca4b8+'\x20—á.';_0x274cfb[_0x2ea8d3(0x147)]=_0x2ea8d3(0xbd)+_0x318ae5+_0x2ea8d3(0xce);}}document[_0x2ea8d3(0x7d)](_0x2ea8d3(0xd6))[_0x2ea8d3(0x13e)][_0x2ea8d3(0xd2)]('active'),document[_0x2ea8d3(0x7d)](_0x2ea8d3(0x115))['classList'][_0x2ea8d3(0xd2)](_0x2ea8d3(0x118));}function closeAllSheets(){const _0x1c0142=a3_0x3793b2;document[_0x1c0142(0x7d)](_0x1c0142(0xd6))['classList']['remove'](_0x1c0142(0xdb)),document['querySelectorAll'](_0x1c0142(0x9d))[_0x1c0142(0x13b)](_0x2074d4=>_0x2074d4[_0x1c0142(0x13e)]['remove'](_0x1c0142(0x118)));}function openSheet(_0x54f68f){const _0x15c554=a3_0x3793b2;document[_0x15c554(0x7d)](_0x15c554(0xd6))[_0x15c554(0x13e)]['add']('active'),document[_0x15c554(0x7d)](_0x54f68f)[_0x15c554(0x13e)][_0x15c554(0xd2)](_0x15c554(0x118));}function getLocalDateStr(_0x271b88){const _0x1b78b5=a3_0x3793b2,_0x35544e=_0x271b88[_0x1b78b5(0x14a)](),_0x5cbf91=String(_0x271b88['getMonth']()+0x1)[_0x1b78b5(0xf2)](0x2,'0'),_0x3897fb=String(_0x271b88[_0x1b78b5(0xee)]())[_0x1b78b5(0xf2)](0x2,'0');return _0x35544e+'-'+_0x5cbf91+'-'+_0x3897fb;}function getStartOfWeek(_0x1571a4){const _0x54a0ca=a3_0x3793b2,_0x7ba304=new Date(_0x1571a4),_0xadfaba=_0x7ba304['getDay'](),_0x57dfb=_0x7ba304[_0x54a0ca(0xee)]()-_0xadfaba+(_0xadfaba===0x0?-0x6:0x1);return _0x7ba304[_0x54a0ca(0xe0)](_0x57dfb),_0x7ba304[_0x54a0ca(0x132)](0x0,0x0,0x0,0x0),_0x7ba304;}function scrollToToday(){const _0x53bc7d=getLocalDateStr(new Date());setTimeout(()=>{const _0x3b98f2=a3_0x43e1,_0x3666b5=document[_0x3b98f2(0xb5)](_0x3b98f2(0x13f)+_0x53bc7d+'\x22]');if(_0x3666b5){const _0x9b8a58=document[_0x3b98f2(0x7d)](_0x3b98f2(0x106)),_0x55e9a2=_0x3666b5[_0x3b98f2(0x16a)]-_0x9b8a58['clientWidth']/0x2+_0x3666b5['offsetWidth']/0x2;_0x9b8a58[_0x3b98f2(0x15a)]({'left':_0x55e9a2,'behavior':_0x3b98f2(0x15c)}),_0x9b8a58[_0x3b98f2(0x15d)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x64dd57=a3_0x3793b2,_0x5f0dff=new Date(),_0x3e7778=document[_0x64dd57(0x7d)](_0x64dd57(0x6e)),_0x24b14f=document['getElementById'](_0x64dd57(0xc3)),_0x5b0a12=(_0x5f0dff[_0x64dd57(0xdc)]()*0x3c+_0x5f0dff[_0x64dd57(0xa8)]())/0x3c*GRID_H;_0x3e7778[_0x64dd57(0x124)][_0x64dd57(0x82)]=_0x5b0a12+'px',_0x3e7778['style']['display']=_0x64dd57(0x136),_0x24b14f[_0x64dd57(0x124)][_0x64dd57(0x82)]=_0x5b0a12+'px',_0x24b14f[_0x64dd57(0x124)][_0x64dd57(0x8e)]='block',_0x24b14f[_0x64dd57(0x147)]=String(_0x5f0dff[_0x64dd57(0xdc)]())[_0x64dd57(0xf2)](0x2,'0')+':'+String(_0x5f0dff[_0x64dd57(0xa8)]())['padStart'](0x2,'0');}function onScroll(){const _0x25b683=a3_0x3793b2,_0x51a0ae=document['getElementById'](_0x25b683(0x106)),_0x8fd4a1=document['querySelectorAll'](_0x25b683(0xd1));for(let _0x59a6d9 of _0x8fd4a1)if(_0x59a6d9[_0x25b683(0x16a)]>=_0x51a0ae[_0x25b683(0x143)]){const _0x31e7d3=new Date(_0x59a6d9['getAttribute'](_0x25b683(0x11a)));document[_0x25b683(0x7d)](_0x25b683(0xfd))['textContent']=_0x31e7d3[_0x25b683(0xae)]('ru',{'month':_0x25b683(0xde)})['toUpperCase']()+'\x20'+_0x31e7d3[_0x25b683(0x14a)]();break;}}function a3_0x43e1(_0x2eaac2,_0x16c346){_0x2eaac2=_0x2eaac2-0x6d;const _0x1a70aa=a3_0x1df2();let _0x1b09b0=_0x1a70aa[_0x2eaac2];return _0x1b09b0;}function showToast(_0x37df5c){const _0x2a4d59=a3_0x3793b2,_0x5760d5=document['getElementById']('toast');_0x5760d5[_0x2a4d59(0x147)]=_0x37df5c,_0x5760d5['classList'][_0x2a4d59(0xd2)](_0x2a4d59(0xfc)),setTimeout(()=>_0x5760d5[_0x2a4d59(0x13e)][_0x2a4d59(0x128)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x5e388e=a3_0x3793b2,_0x829168=document[_0x5e388e(0x7d)](_0x5e388e(0x106)),_0x47342f=_0x829168[_0x5e388e(0x143)],_0x37a85d=_0x829168[_0x5e388e(0x9c)],_0x7a1837=_0x829168[_0x5e388e(0x145)];if(_0x37a85d-(_0x47342f+_0x7a1837)<0x12c){const _0x4cf014=endOffset;endOffset+=0xe,renderDayRange(_0x4cf014+0x1,endOffset),reRenderBlocks();}if(_0x47342f<0x12c){const _0x36c053=startOffset;startOffset-=0xe,prependDays(startOffset,_0x36c053-0x1),_0x829168[_0x5e388e(0x143)]+=0xe*0x41,reRenderBlocks();}}function a3_0x1df2(){const _0x115df7=['analyticsList','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','14VCQrqn','uc_client_sessions','analyticsSheet','.btn-cancel','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','Error\x20setting\x20back\x20button:','v9.5-CLIENT-ANALYTICS','then','rs-time-btn','px\x200px','offsetLeft','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','globalTimeLine','push','</div>','exceptions','slice','sid','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','button','data','anDonutCircle','week','min','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','round','numeric','getElementById','45380nORhCO','rgba(','createDocumentFragment','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','top','map','clients','backgroundPosition','onclick','146709AzWFpv','clientId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','.day-column','pattern','Error\x20setting\x20color:','display','toString','ranges','rsSlotsGrid','floor','uc_client_settings','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','filter','data-day-idx','5057WPoTNN','setMonth','log','note','split','scrollWidth','.sheet','rsDatesTrack','substr','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','ready','cancelled','detStatus','setAttribute','<div\x20class=\x22rs-day-name\x22>','gridColumns','ccYesBtn','getMinutes','84HzyuOI','querySelectorAll','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','saveLocally','constructor','toLocaleString','#050505','none','color','timeColumn','600','join','querySelector','1212546ZtLqVg','POST','ccText','\x20-\x20','left','T23:59:59','\x20–∏–∑\x20','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','#0a84ff','apply','flex','rescheduleSheet','parse','timeLineBadge','blocked-slot\x20stripe-bg','value','cancel_window','done','scroll','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','syncLoad','anCustomDates','cid','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','find','client_load','.day-col-header','add','expand','start','coach_profiles','overlay','Unknown','setHeaderColor','end','now','active','getHours','borderLeftColor','long','Critical\x20TMA\x20Error:','setDate','1329504QsADsm','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','62FHdaeF','month','appendChild','detDate','<div\x20class=\x22dch-day\x22>','%\x20-\x204px)','planned','(((.+)+)+)+$','uc_client_list','getDay','getDate','toUpperCase','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','createElement','padStart','\x20status-completed','status','colIndex','strokeDashoffset','day-off-overlay\x20stripe-bg','setBackgroundColor','innerHTML','getTime','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','show','headerMonth','getItem','div','daysHeaderTrack','blocked-range-part\x20stripe-bg','initData','anStart','detTime','ccTitle','matrixViewport','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','3443UXMrVi','disableVerticalSwipes','detNote','test','dateStr','json','#ff453a','initDataUnsafe','stringify','1190320daorWz','–û—Ç–º–µ–Ω–µ–Ω–æ','length','detailsSheet','</div><div\x20class=\x22dch-num\x22>','all','open','className','data-date','sort','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','getMonth','error','charAt','firstChild','\x20–≤\x20','310UtSJEm','max','style','</div><div\x20class=\x22rs-day-num\x22>','user','ru-RU','remove','insertBefore','total','WebApp','<span>','BackButton','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','toLocaleDateString','search','px\x20-','setHours','Telegram','completed','calc(','block','event-card','today','day-col-header\x20','coachId','forEach','720zQNhuz','visible','classList','.day-col-header[data-date=\x22','anEnd','entries','applyData','scrollLeft','getAttribute','clientWidth','calendar','textContent','setItem','settings','getFullYear','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','customConfirm','time-label','.period-switch\x20.p-btn','.btn-reschedule','height','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è',':00</span>','addEventListener','fontWeight','seriesId','%\x20+\x202px)','T00:00:00','day-column\x20','width','scrollTo','var(--acc-green)','auto','scrollTop'];a3_0x1df2=function(){return _0x115df7;};return a3_0x1df2();}function prependDays(_0x392a36,_0x54bfe9){const _0x2c5c29=a3_0x3793b2,_0x4dbecc=document['getElementById'](_0x2c5c29(0x100)),_0x1e747d=document['getElementById'](_0x2c5c29(0xa6)),_0x15199f=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4986af=new Date();_0x4986af[_0x2c5c29(0x132)](0x0,0x0,0x0,0x0);const _0x390bae=getLocalDateStr(new Date()),_0x17e623=document[_0x2c5c29(0x80)](),_0x4039fe=document['createDocumentFragment']();for(let _0x3dee7b=_0x392a36;_0x3dee7b<=_0x54bfe9;_0x3dee7b++){const _0x39f834=new Date(_0x4986af);_0x39f834[_0x2c5c29(0xe0)](_0x39f834['getDate']()+_0x3dee7b);const _0x30386f=getLocalDateStr(_0x39f834);let _0x4a15e1=_0x39f834[_0x2c5c29(0xed)]()-0x1;if(_0x4a15e1===-0x1)_0x4a15e1=0x6;const _0x4beb19=_0x30386f===_0x390bae,_0x2eaf5c=document['createElement']('div');_0x2eaf5c['className']=_0x2c5c29(0x139)+(_0x4beb19?'today':''),_0x2eaf5c[_0x2c5c29(0xa4)](_0x2c5c29(0x11a),_0x30386f),_0x2eaf5c[_0x2c5c29(0xf9)]=_0x2c5c29(0xe8)+_0x15199f[_0x4a15e1]+_0x2c5c29(0x116)+_0x39f834[_0x2c5c29(0xee)]()+_0x2c5c29(0x70),_0x17e623[_0x2c5c29(0xe6)](_0x2eaf5c);const _0xf3ba01=document[_0x2c5c29(0xf1)]('div');_0xf3ba01[_0x2c5c29(0x119)]='day-column\x20'+(_0x4beb19?'today':''),_0xf3ba01[_0x2c5c29(0xa4)](_0x2c5c29(0x11a),_0x30386f),_0xf3ba01[_0x2c5c29(0xa4)]('data-day-idx',_0x4a15e1),_0x4039fe[_0x2c5c29(0xe6)](_0xf3ba01);}_0x4dbecc['insertBefore'](_0x17e623,_0x4dbecc[_0x2c5c29(0x120)]),_0x1e747d[_0x2c5c29(0x129)](_0x4039fe,_0x1e747d[_0x2c5c29(0xb5)](_0x2c5c29(0x8b)));}function hexToRgba(_0x5b05a9,_0x3fe1a3){const _0x2287f9=a3_0x3793b2;let _0x21dc58;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x2287f9(0x10c)](_0x5b05a9))return _0x21dc58=_0x5b05a9['substring'](0x1)[_0x2287f9(0x9b)](''),_0x21dc58[_0x2287f9(0x114)]==0x3&&(_0x21dc58=[_0x21dc58[0x0],_0x21dc58[0x0],_0x21dc58[0x1],_0x21dc58[0x1],_0x21dc58[0x2],_0x21dc58[0x2]]),_0x21dc58='0x'+_0x21dc58['join'](''),_0x2287f9(0x7f)+[_0x21dc58>>0x10&0xff,_0x21dc58>>0x8&0xff,_0x21dc58&0xff][_0x2287f9(0xb4)](',')+','+_0x3fe1a3+')';return'rgba(10,\x20132,\x20255,\x20'+_0x3fe1a3+')';}let confirmResolver=null;function showCustomConfirm(_0x38aadc,_0x228cf6,_0x3af344=!![]){const _0x182fbb=a3_0x3793b2;document[_0x182fbb(0x7d)](_0x182fbb(0x105))[_0x182fbb(0x147)]=_0x38aadc,document[_0x182fbb(0x7d)](_0x182fbb(0xb8))['textContent']=_0x228cf6;const _0x1fc4d0=document[_0x182fbb(0x7d)](_0x182fbb(0xa7));return _0x3af344?(_0x1fc4d0[_0x182fbb(0x124)]['color']=_0x182fbb(0x10f),_0x1fc4d0['style'][_0x182fbb(0x154)]=_0x182fbb(0xb3)):(_0x1fc4d0[_0x182fbb(0x124)][_0x182fbb(0xb1)]='#0a84ff',_0x1fc4d0[_0x182fbb(0x124)][_0x182fbb(0x154)]=_0x182fbb(0xb3)),new Promise(_0x1b6eae=>{const _0x2e5fc6=_0x182fbb;confirmResolver=_0x1b6eae,document['getElementById']('customConfirm')[_0x2e5fc6(0x13e)][_0x2e5fc6(0xd2)](_0x2e5fc6(0x13d));});}function resolveCustomConfirm(_0xe20be5){const _0x4fc1be=a3_0x3793b2;document[_0x4fc1be(0x7d)](_0x4fc1be(0x14c))[_0x4fc1be(0x13e)][_0x4fc1be(0x128)]('visible');if(confirmResolver)confirmResolver(_0xe20be5);}async function tryCancelCurrentSession(){const _0x5ec7fb=a3_0x3793b2;if(!currentSession)return;const _0xd7e104=await showCustomConfirm(_0x5ec7fb(0x6d),_0x5ec7fb(0xe3),!![]);if(!_0xd7e104)return;const _0x5ad4fd=currentSession;closeAllSheets(),sessions=sessions[_0x5ec7fb(0x95)](_0x3ab0c6=>_0x3ab0c6['id']!==_0x5ad4fd['id']),reRenderBlocks(),showToast(_0x5ec7fb(0x113)),lastUserActionTime=Date[_0x5ec7fb(0xda)]();try{const _0x1f34a8=window['Telegram']?.[_0x5ec7fb(0x12b)],_0x5e1417=await fetch(API_URL,{'method':_0x5ec7fb(0xb7),'body':JSON['stringify']({'action':'client_cancel','init_data':_0x1f34a8?.['initData']||'','coachId':_0x5ad4fd[_0x5ec7fb(0x13a)],'dateStr':_0x5ad4fd[_0x5ec7fb(0x10d)],'sessionId':_0x5ad4fd['id']})});if(_0x5e1417['ok'])DataManager[_0x5ec7fb(0xac)]();}catch(_0x380f03){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x1a203b=a3_0x3793b2;if(!currentSession)return;document[_0x1a203b(0x7d)](_0x1a203b(0x115))[_0x1a203b(0x13e)][_0x1a203b(0x128)](_0x1a203b(0x118)),document[_0x1a203b(0x7d)](_0x1a203b(0xc1))['classList'][_0x1a203b(0xd2)](_0x1a203b(0x118));const _0xed5465=document[_0x1a203b(0x7d)](_0x1a203b(0x9e)),_0xde5995=document['getElementById'](_0x1a203b(0x91));_0xed5465[_0x1a203b(0xf9)]='',_0xde5995[_0x1a203b(0xf9)]='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x2bb789,_0x59a12c]=currentSession[_0x1a203b(0xd4)][_0x1a203b(0x9b)](':')['map'](Number),[_0x773a05,_0x66a704]=currentSession[_0x1a203b(0xd9)][_0x1a203b(0x9b)](':')['map'](Number),_0x5e06da=_0x773a05*0x3c+_0x66a704-(_0x2bb789*0x3c+_0x59a12c);try{const _0x5ee2af=window['Telegram']?.[_0x1a203b(0x12b)],_0x505090=await fetch(API_URL,{'method':_0x1a203b(0xb7),'body':JSON['stringify']({'action':'get_slots','coachId':currentSession[_0x1a203b(0x13a)],'duration':_0x5e06da,'init_data':_0x5ee2af?.[_0x1a203b(0x102)]||'','excludeSessionId':currentSession['id']})}),_0x17344a=await _0x505090['json']();_0x17344a['ok']&&_0x17344a['data']?(availableSlotsCache=_0x17344a['data'],renderRescheduleDates()):_0xde5995['innerHTML']=_0x1a203b(0xe2);}catch(_0xb2fd46){_0xde5995[_0x1a203b(0xf9)]=_0x1a203b(0xa0);}}function renderRescheduleDates(){const _0x383a03=a3_0x3793b2,_0xd24974=document[_0x383a03(0x7d)](_0x383a03(0x9e));_0xd24974['innerHTML']='';const _0x5dff47=Object['keys'](availableSlotsCache)[_0x383a03(0x11b)](),_0xc911f6=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x5dff47['length']===0x0){document[_0x383a03(0x7d)]('rsSlotsGrid')[_0x383a03(0xf9)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x5dff47['forEach']((_0x25d3b3,_0x5d0c5c)=>{const _0x450335=_0x383a03,_0x344a3e=new Date(_0x25d3b3),_0x34d8ba=_0xc911f6[_0x344a3e[_0x450335(0xed)]()],_0x224cf9=_0x344a3e[_0x450335(0xee)](),_0x2dcecf=document['createElement']('div');_0x2dcecf['className']='rs-date-chip';if(_0x5d0c5c===0x0)_0x2dcecf[_0x450335(0x13e)][_0x450335(0xd2)](_0x450335(0xdb));_0x2dcecf['innerHTML']=_0x450335(0xa5)+_0x34d8ba+_0x450335(0x125)+_0x224cf9+'</div>',_0x2dcecf[_0x450335(0x86)]=()=>selectRsDate(_0x25d3b3,_0x2dcecf),_0xd24974['appendChild'](_0x2dcecf);}),selectRsDate(_0x5dff47[0x0],_0xd24974[_0x383a03(0x120)]);}function selectRsDate(_0x51a751,_0x29889c){const _0x27bc75=a3_0x3793b2;selectedRsDate=_0x51a751,document['querySelectorAll']('.rs-date-chip')[_0x27bc75(0x13b)](_0x44f6f9=>_0x44f6f9[_0x27bc75(0x13e)][_0x27bc75(0x128)](_0x27bc75(0xdb)));if(_0x29889c)_0x29889c['classList'][_0x27bc75(0xd2)](_0x27bc75(0xdb));const _0x5c011a=document[_0x27bc75(0x7d)](_0x27bc75(0x91));_0x5c011a['innerHTML']='';const _0x243104=availableSlotsCache[_0x51a751]||[];if(_0x243104['length']===0x0){_0x5c011a[_0x27bc75(0xf9)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x243104['forEach'](_0x535b9c=>{const _0x10bb03=_0x27bc75,_0x216fa5=document['createElement'](_0x10bb03(0x75));_0x216fa5[_0x10bb03(0x119)]=_0x10bb03(0x168),_0x216fa5[_0x10bb03(0x147)]=_0x535b9c,_0x216fa5[_0x10bb03(0x86)]=()=>confirmReschedule(_0x535b9c),_0x5c011a[_0x10bb03(0xe6)](_0x216fa5);});}async function confirmReschedule(_0x27618c){const _0xe6933e=a3_0x3793b2,_0x4ea79b=new Date(selectedRsDate),_0x3e2d44=_0x4ea79b['toLocaleDateString'](_0xe6933e(0x127),{'day':'numeric','month':_0xe6933e(0xde)}),_0x1b790d=await showCustomConfirm(_0xe6933e(0x8a),_0xe6933e(0x74)+_0x3e2d44+_0xe6933e(0x121)+_0x27618c+'?',![]);if(!_0x1b790d)return;closeAllSheets(),showToast(_0xe6933e(0x108)),lastUserActionTime=Date['now']();const _0x14c7c1=currentSession[_0xe6933e(0x10d)],_0x51317a=currentSession['id'],[_0x5e1259,_0x57208e]=currentSession[_0xe6933e(0xd4)][_0xe6933e(0x9b)](':')['map'](Number),[_0x1bd9fe,_0x39bf47]=currentSession[_0xe6933e(0xd9)][_0xe6933e(0x9b)](':')[_0xe6933e(0x83)](Number),_0x5e8fee=_0x1bd9fe*0x3c+_0x39bf47-(_0x5e1259*0x3c+_0x57208e),[_0x168cdc,_0x1bf95f]=_0x27618c[_0xe6933e(0x9b)](':')[_0xe6933e(0x83)](Number),_0x4c509b=_0x168cdc*0x3c+_0x1bf95f+_0x5e8fee,_0x25a602=Math[_0xe6933e(0x92)](_0x4c509b/0x3c),_0x1f5523=_0x4c509b%0x3c,_0x43720e=String(_0x25a602)[_0xe6933e(0xf2)](0x2,'0')+':'+String(_0x1f5523)[_0xe6933e(0xf2)](0x2,'0'),_0x20ca9e=sessions['findIndex'](_0x1225f9=>_0x1225f9['id']===_0x51317a);_0x20ca9e!==-0x1&&(sessions[_0x20ca9e][_0xe6933e(0x10d)]=selectedRsDate,sessions[_0x20ca9e]['start']=_0x27618c,sessions[_0x20ca9e][_0xe6933e(0xd9)]=_0x43720e,reRenderBlocks());try{const _0x4a4291=window['Telegram']?.[_0xe6933e(0x12b)],_0x3d566f=await fetch(API_URL,{'method':_0xe6933e(0xb7),'body':JSON[_0xe6933e(0x111)]({'action':'reschedule','init_data':_0x4a4291?.[_0xe6933e(0x102)]||'','oldSessionId':_0x51317a,'oldDate':_0x14c7c1,'newDate':selectedRsDate,'newTime':_0x27618c,'coachId':currentSession['coachId']})}),_0x2b7265=await _0x3d566f[_0xe6933e(0x10e)]();!_0x2b7265['ok']?(showToast(_0xe6933e(0x15f)),DataManager['syncLoad']()):(showToast(_0xe6933e(0x164)),DataManager[_0xe6933e(0xac)]());}catch(_0x852486){showToast(_0xe6933e(0x12e));}}document[a3_0x3793b2(0x153)]('DOMContentLoaded',init);