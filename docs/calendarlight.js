const a3_0xcd8bcf=a3_0x2a13;(function(_0x42355d,_0x214cae){const _0x391f62=a3_0x2a13,_0x36684c=_0x42355d();while(!![]){try{const _0xc18a64=-parseInt(_0x391f62(0x282))/0x1+-parseInt(_0x391f62(0x254))/0x2*(parseInt(_0x391f62(0x236))/0x3)+-parseInt(_0x391f62(0x1bc))/0x4+parseInt(_0x391f62(0x265))/0x5+-parseInt(_0x391f62(0x1d4))/0x6+-parseInt(_0x391f62(0x225))/0x7*(-parseInt(_0x391f62(0x207))/0x8)+-parseInt(_0x391f62(0x277))/0x9*(-parseInt(_0x391f62(0x2a0))/0xa);if(_0xc18a64===_0x214cae)break;else _0x36684c['push'](_0x36684c['shift']());}catch(_0x555358){_0x36684c['push'](_0x36684c['shift']());}}}(a3_0x3d99,0x6555f));const APP_VERSION='v9.5-CLIENT-ANALYTICS',API_URL=a3_0xcd8bcf(0x1b4),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS=a3_0xcd8bcf(0x214),KEY_CLIENTS=a3_0xcd8bcf(0x23e);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0xcd8bcf(0x260),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x37d552=a3_0xcd8bcf,_0x587300=(function(){let _0x4bf3cb=!![];return function(_0x25516b,_0x36db08){const _0x1262b0=_0x4bf3cb?function(){const _0x1475fa=a3_0x2a13;if(_0x36db08){const _0x275ad3=_0x36db08[_0x1475fa(0x1f1)](_0x25516b,arguments);return _0x36db08=null,_0x275ad3;}}:function(){};return _0x4bf3cb=![],_0x1262b0;};}()),_0x37ec1a=_0x587300(this,function(){const _0x7e5f34=a3_0x2a13;return _0x37ec1a[_0x7e5f34(0x1e8)]()[_0x7e5f34(0x28b)](_0x7e5f34(0x28e))['toString']()[_0x7e5f34(0x279)](_0x37ec1a)[_0x7e5f34(0x28b)](_0x7e5f34(0x28e));});_0x37ec1a();try{const _0x50b915=window['Telegram']?.[_0x37d552(0x1a8)];if(!_0x50b915)return;_0x50b915[_0x37d552(0x24a)](),_0x50b915['expand']();try{_0x50b915['setHeaderColor']('#050505'),_0x50b915['setBackgroundColor']&&_0x50b915[_0x37d552(0x215)](_0x37d552(0x1fd));}catch(_0x14784f){console[_0x37d552(0x27e)]('Error\x20setting\x20color:',_0x14784f);}try{_0x50b915[_0x37d552(0x244)]&&(_0x50b915[_0x37d552(0x244)][_0x37d552(0x255)](),_0x50b915[_0x37d552(0x244)][_0x37d552(0x2a1)](),_0x50b915[_0x37d552(0x244)][_0x37d552(0x1ee)](function(){const _0x288e06=_0x37d552;window[_0x288e06(0x212)]['href']=_0x288e06(0x257);}));}catch(_0x36415a){console[_0x37d552(0x27e)](_0x37d552(0x29b),_0x36415a);}try{if(_0x50b915[_0x37d552(0x1dd)])_0x50b915[_0x37d552(0x1dd)]();}catch(_0x4972c4){}}catch(_0x14bb81){console[_0x37d552(0x287)](_0x37d552(0x1da),_0x14bb81);}}());function isAdmin(){const _0x28dbf7=a3_0xcd8bcf;try{const _0x24f3c5=Number(window[_0x28dbf7(0x200)]?.['WebApp']?.[_0x28dbf7(0x230)]?.[_0x28dbf7(0x278)]?.['id']);return _0x24f3c5===0xbaf7174;}catch(_0xf6091){return![];}}const DataManager={'saveLocally'(){const _0x42e26e=a3_0xcd8bcf;try{localStorage[_0x42e26e(0x1d6)](KEY_SESSIONS,JSON[_0x42e26e(0x256)](sessions)),localStorage[_0x42e26e(0x1d6)](KEY_CLIENTS,JSON[_0x42e26e(0x256)](clients)),localStorage[_0x42e26e(0x1d6)](KEY_SETTINGS,JSON[_0x42e26e(0x256)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x2f3a50){}},'loadLocal'(){const _0x570861=a3_0xcd8bcf;try{const _0x1e9c29=localStorage[_0x570861(0x20f)](KEY_SESSIONS);if(_0x1e9c29)sessions=JSON[_0x570861(0x1b8)](_0x1e9c29);const _0x267f86=localStorage[_0x570861(0x20f)](KEY_CLIENTS);if(_0x267f86)clients=JSON[_0x570861(0x1b8)](_0x267f86);const _0x9943ad=localStorage[_0x570861(0x20f)](KEY_SETTINGS);if(_0x9943ad){const _0x5c3088=JSON[_0x570861(0x1b8)](_0x9943ad);if(_0x5c3088[_0x570861(0x269)])availabilityPattern=_0x5c3088[_0x570861(0x269)];if(_0x5c3088['ranges'])specialRanges=_0x5c3088['ranges'];if(_0x5c3088[_0x570861(0x27c)])dateExceptions=_0x5c3088['exceptions'];}}catch(_0x10cb45){}},async 'syncLoad'(){const _0x1b8b1a=a3_0xcd8bcf,_0x177471=new Date(),_0x103f3e=_0x177471['getFullYear']()+'-'+String(_0x177471[_0x1b8b1a(0x206)]()+0x1)[_0x1b8b1a(0x22a)](0x2,'0'),_0x4393e6=new Date(_0x177471);_0x4393e6[_0x1b8b1a(0x23f)](_0x177471[_0x1b8b1a(0x206)]()+0x1);const _0x2f8390=_0x4393e6['getFullYear']()+'-'+String(_0x4393e6['getMonth']()+0x1)[_0x1b8b1a(0x22a)](0x2,'0'),_0x5c6275=Date[_0x1b8b1a(0x25c)]();try{const _0x1dd71b=window[_0x1b8b1a(0x200)]?.[_0x1b8b1a(0x1a8)],_0x26fde6=_0x1dd71b?.[_0x1b8b1a(0x262)]||'',[_0x21e756,_0x554bf3]=await Promise['all']([fetch(API_URL,{'method':_0x1b8b1a(0x1dc),'body':JSON[_0x1b8b1a(0x256)]({'action':_0x1b8b1a(0x1c5),'init_data':_0x26fde6,'month_str':_0x103f3e})})[_0x1b8b1a(0x291)](_0x3a0ecf=>_0x3a0ecf['json']()),fetch(API_URL,{'method':'POST','body':JSON[_0x1b8b1a(0x256)]({'action':_0x1b8b1a(0x1c5),'init_data':_0x26fde6,'month_str':_0x2f8390})})[_0x1b8b1a(0x291)](_0x2499f5=>_0x2499f5[_0x1b8b1a(0x1bf)]())]);if(lastUserActionTime>_0x5c6275){console['log'](_0x1b8b1a(0x1ce));return;}if(_0x21e756['ok'])this[_0x1b8b1a(0x267)](_0x21e756[_0x1b8b1a(0x1c8)],_0x103f3e);if(_0x554bf3['ok'])this[_0x1b8b1a(0x267)](_0x554bf3[_0x1b8b1a(0x1c8)],_0x2f8390);this['saveLocally']();}catch(_0xc8006f){}},'applyData'(_0x1825ed,_0x44eb2c){const _0x45550f=a3_0xcd8bcf;if(!_0x1825ed)return;if(_0x1825ed[_0x45550f(0x216)]){if(_0x1825ed['settings'][_0x45550f(0x269)])availabilityPattern=_0x1825ed['settings'][_0x45550f(0x269)];if(_0x1825ed[_0x45550f(0x216)][_0x45550f(0x1f3)])specialRanges=_0x1825ed[_0x45550f(0x216)][_0x45550f(0x1f3)];if(_0x1825ed['settings'][_0x45550f(0x27c)])dateExceptions=_0x1825ed[_0x45550f(0x216)][_0x45550f(0x27c)];}if(_0x1825ed['clients']&&Array[_0x45550f(0x1e4)](_0x1825ed[_0x45550f(0x25a)]))clients=_0x1825ed[_0x45550f(0x25a)];_0x1825ed[_0x45550f(0x25b)]&&(coachProfiles={...coachProfiles,..._0x1825ed[_0x45550f(0x25b)]}),_0x1825ed[_0x45550f(0x1e2)]&&(sessions=sessions[_0x45550f(0x239)](_0x51792a=>!_0x51792a[_0x45550f(0x296)][_0x45550f(0x238)](_0x44eb2c)),Object['keys'](_0x1825ed[_0x45550f(0x1e2)])[_0x45550f(0x23a)](_0x5908dd=>{const _0x2d5044=_0x45550f,_0x483356=_0x1825ed[_0x2d5044(0x1e2)][_0x5908dd];_0x483356[_0x2d5044(0x23a)](_0x140239=>{const _0x24a8c3=_0x2d5044;sessions[_0x24a8c3(0x1bd)]({'id':_0x140239['i'],'clientId':_0x140239['c'],'coachId':_0x140239[_0x24a8c3(0x218)],'dateStr':_0x44eb2c+'-'+_0x5908dd[_0x24a8c3(0x22a)](0x2,'0'),'start':_0x140239['s'],'end':_0x140239['e'],'note':_0x140239['n']||'','status':_0x140239['st']||_0x24a8c3(0x1b5),'seriesId':_0x140239[_0x24a8c3(0x281)]});});})),reRenderBlocks();}};function init(){const _0x18b2c6=a3_0xcd8bcf;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x18b2c6(0x240)]('matrixViewport')['addEventListener'](_0x18b2c6(0x250),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0xee77e4=a3_0xcd8bcf,_0x146b2c=document[_0xee77e4(0x240)](_0xee77e4(0x243)),_0x12feb5=document['getElementById'](_0xee77e4(0x220));_0x146b2c[_0xee77e4(0x286)]='',_0x146b2c[_0xee77e4(0x25e)](_0x12feb5);for(let _0x2ca805=0x0;_0x2ca805<0x18;_0x2ca805++){const _0x667166=document[_0xee77e4(0x261)](_0xee77e4(0x20a));_0x667166[_0xee77e4(0x231)]=_0xee77e4(0x1ac);if(_0x2ca805>0x0)_0x667166[_0xee77e4(0x286)]='<span>'+String(_0x2ca805)['padStart'](0x2,'0')+_0xee77e4(0x28a);_0x146b2c[_0xee77e4(0x25e)](_0x667166);}}function renderDayRange(_0x4604db,_0x380916){const _0x1d92b5=a3_0xcd8bcf,_0xd00dfa=document[_0x1d92b5(0x240)](_0x1d92b5(0x26c)),_0x5279ae=document[_0x1d92b5(0x240)]('gridColumns'),_0x242a86=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x233a09=new Date();_0x233a09['setHours'](0x0,0x0,0x0,0x0);const _0x3f4c80=getLocalDateStr(new Date());for(let _0x2f9206=_0x4604db;_0x2f9206<=_0x380916;_0x2f9206++){const _0x3a8a21=new Date(_0x233a09);_0x3a8a21[_0x1d92b5(0x285)](_0x3a8a21[_0x1d92b5(0x266)]()+_0x2f9206);const _0x47d574=getLocalDateStr(_0x3a8a21);let _0x4c4581=_0x3a8a21[_0x1d92b5(0x1cc)]()-0x1;if(_0x4c4581===-0x1)_0x4c4581=0x6;const _0x223ac6=_0x47d574===_0x3f4c80,_0x5cfc54=document[_0x1d92b5(0x261)](_0x1d92b5(0x20a));_0x5cfc54[_0x1d92b5(0x231)]=_0x1d92b5(0x1ed)+(_0x223ac6?_0x1d92b5(0x23b):''),_0x5cfc54[_0x1d92b5(0x29c)](_0x1d92b5(0x1e7),_0x47d574),_0x5cfc54['innerHTML']=_0x1d92b5(0x264)+_0x242a86[_0x4c4581]+_0x1d92b5(0x1ba)+_0x3a8a21[_0x1d92b5(0x266)]()+_0x1d92b5(0x1e5),_0xd00dfa[_0x1d92b5(0x25e)](_0x5cfc54);const _0x354804=document[_0x1d92b5(0x261)](_0x1d92b5(0x20a));_0x354804['className']=_0x1d92b5(0x274)+(_0x223ac6?'today':''),_0x354804[_0x1d92b5(0x29c)]('data-date',_0x47d574),_0x354804[_0x1d92b5(0x29c)]('data-day-idx',_0x4c4581),_0x5279ae[_0x1d92b5(0x25e)](_0x354804);}}function reRenderBlocks(){const _0x1784c3=a3_0xcd8bcf;document['querySelectorAll'](_0x1784c3(0x1b0))[_0x1784c3(0x23a)](_0x33e1fa=>{const _0x55732c=_0x1784c3;_0x33e1fa[_0x55732c(0x234)](_0x55732c(0x251))[_0x55732c(0x23a)](_0x4e2a4d=>_0x4e2a4d[_0x55732c(0x1e9)]());const _0x473839=_0x33e1fa['getAttribute'](_0x55732c(0x1e7)),_0x219ee2=parseInt(_0x33e1fa[_0x55732c(0x1b6)](_0x55732c(0x1b7))),_0x23d648=Math['round'](_0x33e1fa[_0x55732c(0x258)]);(availabilityPattern[_0x219ee2]||[])[_0x55732c(0x23a)](_0x26f861=>{const _0x473969=_0x55732c,_0x6f124=document[_0x473969(0x261)](_0x473969(0x20a));_0x6f124[_0x473969(0x231)]=_0x473969(0x203),_0x6f124['style'][_0x473969(0x1f4)]=_0x26f861*GRID_H+'px',_0x6f124['style'][_0x473969(0x209)]='-'+_0x23d648+_0x473969(0x1af)+_0x26f861*GRID_H+'px',_0x33e1fa[_0x473969(0x25e)](_0x6f124);});if(specialRanges[_0x55732c(0x1ff)]>0x0){const _0x1c9b51=new Date(_0x473839+_0x55732c(0x1e1))[_0x55732c(0x252)](),_0x54cdb0=new Date(_0x473839+_0x55732c(0x21c))[_0x55732c(0x252)]();specialRanges[_0x55732c(0x23a)](_0x119029=>{const _0x4eee31=_0x55732c,_0x1ddab5=new Date(_0x119029[_0x4eee31(0x26e)])[_0x4eee31(0x252)](),_0xe249e6=new Date(_0x119029[_0x4eee31(0x290)])['getTime'](),_0x10ba83=Math[_0x4eee31(0x28d)](_0x1c9b51,_0x1ddab5),_0x4354a0=Math[_0x4eee31(0x271)](_0x54cdb0,_0xe249e6);if(_0x10ba83<_0x4354a0){const _0x3238ef=(_0x10ba83-_0x1c9b51)/0x36ee80*GRID_H,_0x3aee9c=(_0x4354a0-_0x10ba83)/0x36ee80*GRID_H,_0x29df02=document['createElement'](_0x4eee31(0x20a));_0x3aee9c>=23.5*GRID_H?(_0x29df02[_0x4eee31(0x231)]=_0x4eee31(0x221),_0x29df02[_0x4eee31(0x247)][_0x4eee31(0x209)]='-'+_0x23d648+'px\x200px'):(_0x29df02['className']=_0x4eee31(0x242),_0x29df02[_0x4eee31(0x247)][_0x4eee31(0x1f4)]=_0x3238ef+'px',_0x29df02[_0x4eee31(0x247)][_0x4eee31(0x246)]=_0x3aee9c+'px',_0x29df02[_0x4eee31(0x247)][_0x4eee31(0x209)]='-'+_0x23d648+_0x4eee31(0x1af)+_0x3238ef+'px'),_0x33e1fa[_0x4eee31(0x25e)](_0x29df02);}});}renderEventsForColumn(_0x33e1fa,_0x473839);});}function renderEventsForColumn(_0x2fdcc5,_0x3c145d){const _0x103153=a3_0xcd8bcf,_0x19ab8a=sessions[_0x103153(0x239)](_0x703d89=>_0x703d89[_0x103153(0x296)]===_0x3c145d),_0x5f0882=_0x19ab8a[_0x103153(0x26d)](_0x24aab9=>{const _0x46f465=_0x103153,[_0x579c75,_0x512fa0]=_0x24aab9['start'][_0x46f465(0x295)](':')[_0x46f465(0x26d)](Number),[_0x272d75,_0x5f5804]=_0x24aab9[_0x46f465(0x290)][_0x46f465(0x295)](':')[_0x46f465(0x26d)](Number);return{'data':_0x24aab9,'start':_0x579c75*0x3c+_0x512fa0,'end':_0x272d75*0x3c+_0x5f5804,'colIndex':0x0};});_0x5f0882[_0x103153(0x20c)]((_0x48b9a9,_0x49afee)=>_0x48b9a9[_0x103153(0x26e)]-_0x49afee[_0x103153(0x26e)]||_0x49afee['end']-_0x49afee[_0x103153(0x26e)]-(_0x48b9a9[_0x103153(0x290)]-_0x48b9a9[_0x103153(0x26e)]));const _0x516804=[];_0x5f0882[_0x103153(0x23a)](_0x45c1da=>{const _0x1e4a66=_0x103153;let _0x4e8171=![];for(let _0x4bf917=0x0;_0x4bf917<_0x516804['length'];_0x4bf917++){const _0x32ef98=_0x516804[_0x4bf917];if(_0x45c1da[_0x1e4a66(0x26e)]>=_0x32ef98[_0x32ef98[_0x1e4a66(0x1ff)]-0x1]['end']){_0x32ef98[_0x1e4a66(0x1bd)](_0x45c1da),_0x45c1da[_0x1e4a66(0x272)]=_0x4bf917,_0x4e8171=!![];break;}}!_0x4e8171&&(_0x516804[_0x1e4a66(0x1bd)]([_0x45c1da]),_0x45c1da[_0x1e4a66(0x272)]=_0x516804[_0x1e4a66(0x1ff)]-0x1);}),_0x5f0882[_0x103153(0x23a)](_0x3d7399=>{const _0x35b663=_0x103153;let _0x5e4ba1=0x0;_0x5f0882['forEach'](_0x5e3a39=>{const _0x5735b2=a3_0x2a13;if(Math[_0x5735b2(0x28d)](_0x3d7399[_0x5735b2(0x26e)],_0x5e3a39[_0x5735b2(0x26e)])<Math[_0x5735b2(0x271)](_0x3d7399['end'],_0x5e3a39[_0x5735b2(0x290)])&&_0x5e3a39[_0x5735b2(0x272)]>_0x5e4ba1)_0x5e4ba1=_0x5e3a39['colIndex'];});const _0x3e4d98=_0x5e4ba1+0x1,_0x54f34b=0x64/_0x3e4d98,_0x398fb0=_0x3d7399[_0x35b663(0x272)]*_0x54f34b,_0x581acd=document[_0x35b663(0x261)](_0x35b663(0x20a)),_0x39a015=_0x3d7399[_0x35b663(0x1c8)];let _0x5a2247=_0x35b663(0x211);if(clients&&clients[_0x35b663(0x1ff)]>0x0){const _0x53de89=clients[_0x35b663(0x1cd)](_0x3de05f=>String(_0x3de05f['id'])===String(_0x39a015['clientId']));if(_0x53de89&&_0x53de89[_0x35b663(0x1b9)])_0x5a2247=_0x53de89['color'];}const _0x467b37=_0x39a015[_0x35b663(0x29d)]===_0x35b663(0x292),_0x3400d4=_0x467b37?0x1:0.45;_0x581acd[_0x35b663(0x231)]=_0x35b663(0x21a)+(_0x467b37?_0x35b663(0x1cb):''),_0x581acd[_0x35b663(0x247)]['backgroundColor']=hexToRgba(_0x5a2247,_0x3400d4),_0x581acd[_0x35b663(0x247)]['borderLeftColor']=_0x5a2247;const _0x3dcab9=_0x3d7399[_0x35b663(0x26e)]/0x3c*GRID_H,_0x5f0265=(_0x3d7399[_0x35b663(0x290)]-_0x3d7399[_0x35b663(0x26e)])/0x3c*GRID_H;_0x581acd[_0x35b663(0x247)][_0x35b663(0x1f4)]=_0x3dcab9+'px',_0x581acd[_0x35b663(0x247)][_0x35b663(0x246)]=Math[_0x35b663(0x28d)](_0x5f0265,0x14)+'px',_0x581acd[_0x35b663(0x247)][_0x35b663(0x26a)]=_0x35b663(0x1e6)+_0x54f34b+_0x35b663(0x222),_0x581acd['style'][_0x35b663(0x1c0)]=_0x35b663(0x1e6)+_0x398fb0+_0x35b663(0x1d7),_0x581acd[_0x35b663(0x247)][_0x35b663(0x263)]=0xa+_0x3d7399[_0x35b663(0x272)];if(_0x54f34b<0x55)_0x581acd[_0x35b663(0x1fb)][_0x35b663(0x25f)](_0x35b663(0x245));let _0x26a683='';if(_0x39a015[_0x35b663(0x294)])_0x26a683+=_0x35b663(0x1ca);if(_0x467b37)_0x26a683+=_0x35b663(0x232);_0x581acd[_0x35b663(0x286)]=_0x35b663(0x229)+_0x39a015[_0x35b663(0x26e)]+_0x35b663(0x21f)+_0x39a015[_0x35b663(0x290)]+_0x35b663(0x259)+_0x26a683+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x581acd[_0x35b663(0x201)]=_0x485271=>{const _0x26015b=_0x35b663;_0x485271[_0x26015b(0x1b2)](),openDetails(_0x39a015);},_0x2fdcc5['appendChild'](_0x581acd);});}function openAnalytics(){const _0x5e6b3b=a3_0xcd8bcf,_0x2fc8c8=document[_0x5e6b3b(0x1ae)](_0x5e6b3b(0x1d2));setAnalyticsPeriod('week',_0x2fc8c8),openSheet(_0x5e6b3b(0x21e));}function setAnalyticsPeriod(_0x4032c3,_0x2cf42b){const _0x23525b=a3_0xcd8bcf;currentAnPeriod=_0x4032c3,document['querySelectorAll'](_0x23525b(0x1d2))[_0x23525b(0x23a)](_0xb1dfc1=>_0xb1dfc1[_0x23525b(0x1fb)]['remove'](_0x23525b(0x25d)));if(_0x2cf42b)_0x2cf42b['classList'][_0x23525b(0x25f)](_0x23525b(0x25d));const _0x2b8a57=document[_0x23525b(0x240)]('anCustomDates');_0x2b8a57[_0x23525b(0x247)][_0x23525b(0x1ab)]=_0x4032c3==='custom'?_0x23525b(0x233):_0x23525b(0x1ef);const _0x16993d=new Date();let _0x505984=new Date(),_0x1d321a=new Date();if(_0x4032c3==='week')_0x505984=getStartOfWeek(_0x16993d),_0x1d321a=new Date(_0x505984),_0x1d321a['setDate'](_0x1d321a[_0x23525b(0x266)]()+0x6);else{if(_0x4032c3==='month')_0x505984=new Date(_0x16993d[_0x23525b(0x1ad)](),_0x16993d[_0x23525b(0x206)](),0x1),_0x1d321a=new Date(_0x16993d[_0x23525b(0x1ad)](),_0x16993d[_0x23525b(0x206)]()+0x1,0x0);else{!document['getElementById'](_0x23525b(0x299))['value']&&(document['getElementById'](_0x23525b(0x299))['value']=getLocalDateStr(_0x16993d),document[_0x23525b(0x240)](_0x23525b(0x1f5))[_0x23525b(0x2a2)]=getLocalDateStr(_0x16993d));refreshAnalytics();return;}}document[_0x23525b(0x240)](_0x23525b(0x299))[_0x23525b(0x2a2)]=getLocalDateStr(_0x505984),document[_0x23525b(0x240)]('anEnd')['value']=getLocalDateStr(_0x1d321a),refreshAnalytics();}function refreshAnalytics(){const _0x14ea57=a3_0xcd8bcf,_0x297ec0=document[_0x14ea57(0x240)](_0x14ea57(0x299))[_0x14ea57(0x2a2)],_0x221f3e=document[_0x14ea57(0x240)](_0x14ea57(0x1f5))[_0x14ea57(0x2a2)];if(!_0x297ec0||!_0x221f3e)return;const _0x1383b8=sessions[_0x14ea57(0x239)](_0x481cd7=>_0x481cd7['dateStr']>=_0x297ec0&&_0x481cd7['dateStr']<=_0x221f3e&&_0x481cd7[_0x14ea57(0x29d)]!=='cancelled'),_0x16b64a=_0x1383b8['length'],_0x310e7a=_0x1383b8['filter'](_0x10e5c0=>_0x10e5c0[_0x14ea57(0x29d)]==='completed')[_0x14ea57(0x1ff)],_0xd0168c=_0x16b64a>0x0?Math[_0x14ea57(0x283)](_0x310e7a/_0x16b64a*0x64):0x0;document[_0x14ea57(0x240)](_0x14ea57(0x1f9))[_0x14ea57(0x1be)]=_0xd0168c+'%',document[_0x14ea57(0x240)]('anTotalStats')[_0x14ea57(0x1be)]=_0x310e7a+_0x14ea57(0x24d)+_0x16b64a+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x361e31=document['getElementById'](_0x14ea57(0x1d9)),_0x2fb4bf=0x2*Math['PI']*0x23,_0x3ad6ce=_0x2fb4bf-_0xd0168c/0x64*_0x2fb4bf;_0x361e31['style']['strokeDashoffset']=_0x3ad6ce;const _0x43c625={};_0x1383b8[_0x14ea57(0x23a)](_0x39c610=>{const _0x4fd82f=_0x14ea57,_0x4381ce=_0x39c610['coachId']||'Unknown';if(!_0x43c625[_0x4381ce]){const _0x5a341d='#'+_0x4381ce['toString']()['substr'](0x0,0x6);_0x43c625[_0x4381ce]={'total':0x0,'done':0x0,'color':_0x5a341d};}_0x43c625[_0x4381ce][_0x4fd82f(0x20d)]++;if(_0x39c610['status']===_0x4fd82f(0x292))_0x43c625[_0x4381ce][_0x4fd82f(0x210)]++;});const _0x64679=document[_0x14ea57(0x240)](_0x14ea57(0x20e));_0x64679[_0x14ea57(0x286)]='';const _0xa64ea9=Object[_0x14ea57(0x1d3)](_0x43c625)[_0x14ea57(0x20c)]((_0x5110f4,_0x555207)=>_0x555207[0x1][_0x14ea57(0x20d)]-_0x5110f4[0x1][_0x14ea57(0x20d)]);if(_0xa64ea9['length']===0x0){_0x64679[_0x14ea57(0x286)]=_0x14ea57(0x237);return;}_0xa64ea9[_0x14ea57(0x23a)](([_0x599c3b,_0xba2748])=>{const _0x3ed7d6=_0x14ea57,_0x453a4e=Math[_0x3ed7d6(0x283)](_0xba2748[_0x3ed7d6(0x210)]/_0xba2748[_0x3ed7d6(0x20d)]*0x64),_0x323bd7=document[_0x3ed7d6(0x261)](_0x3ed7d6(0x20a));_0x323bd7[_0x3ed7d6(0x231)]='client-stat-card',_0x323bd7[_0x3ed7d6(0x247)][_0x3ed7d6(0x1eb)]=_0xba2748['color'],_0x323bd7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x599c3b[_0x3ed7d6(0x27f)](0x0,0x5)+_0x3ed7d6(0x24e)+_0xba2748['done']+'</span>\x20/\x20'+_0xba2748['total']+_0x3ed7d6(0x24b)+_0x453a4e+_0x3ed7d6(0x1fa),_0x64679[_0x3ed7d6(0x25e)](_0x323bd7);});}function openDetails(_0x3ab2e4){const _0x3e5759=a3_0xcd8bcf;currentSession=_0x3ab2e4;const _0x436005=new Date(_0x3ab2e4[_0x3e5759(0x296)]),_0x42985a=_0x436005[_0x3e5759(0x1b1)]('ru-RU',{'weekday':'long','day':_0x3e5759(0x235),'month':_0x3e5759(0x1ec)});document[_0x3e5759(0x240)](_0x3e5759(0x1a9))[_0x3e5759(0x1be)]=_0x42985a['charAt'](0x0)[_0x3e5759(0x1fe)]()+_0x42985a[_0x3e5759(0x29e)](0x1),document[_0x3e5759(0x240)](_0x3e5759(0x1cf))[_0x3e5759(0x1be)]=_0x3ab2e4[_0x3e5759(0x26e)]+'\x20-\x20'+_0x3ab2e4[_0x3e5759(0x290)],document[_0x3e5759(0x240)](_0x3e5759(0x1d5))[_0x3e5759(0x1be)]=_0x3ab2e4[_0x3e5759(0x27a)]||_0x3e5759(0x28f);const _0x250aa6=document[_0x3e5759(0x240)](_0x3e5759(0x22e)),_0x33e510=document['getElementById'](_0x3e5759(0x213)),_0x1da16d=_0x33e510[_0x3e5759(0x1ae)]('.btn-cancel'),_0x1a9c10=_0x33e510[_0x3e5759(0x1ae)](_0x3e5759(0x241)),_0x2cedf2=document[_0x3e5759(0x240)]('cancelHint');if(_0x3ab2e4[_0x3e5759(0x29d)]===_0x3e5759(0x292))_0x250aa6[_0x3e5759(0x1be)]=_0x3e5759(0x26f),_0x250aa6['style'][_0x3e5759(0x1b9)]=_0x3e5759(0x248),_0x33e510[_0x3e5759(0x247)][_0x3e5759(0x1ab)]=_0x3e5759(0x1ef);else{_0x250aa6['textContent']=_0x3e5759(0x275),_0x250aa6['style']['color']=_0x3e5759(0x22f),_0x33e510[_0x3e5759(0x247)][_0x3e5759(0x1ab)]=_0x3e5759(0x1c4);const _0x1ba87e=new Date(_0x3ab2e4[_0x3e5759(0x296)]+'T'+_0x3ab2e4[_0x3e5759(0x26e)]),_0xf8e891=new Date(),_0x29d4ec=(_0x1ba87e-_0xf8e891)/(0x3e8*0x3c*0x3c),_0x510d34=coachProfiles[_0x3ab2e4[_0x3e5759(0x1bb)]]&&coachProfiles[_0x3ab2e4['coachId']][_0x3e5759(0x1c1)]?parseInt(coachProfiles[_0x3ab2e4[_0x3e5759(0x1bb)]]['cancel_window']):0x18;if(_0x510d34===0x0||_0x29d4ec>=_0x510d34)_0x1da16d[_0x3e5759(0x247)][_0x3e5759(0x1ab)]=_0x3e5759(0x1c4),_0x1a9c10['style'][_0x3e5759(0x1ab)]='block',_0x2cedf2[_0x3e5759(0x247)]['display']=_0x3e5759(0x1ef);else{_0x1da16d[_0x3e5759(0x247)][_0x3e5759(0x1ab)]='none',_0x1a9c10[_0x3e5759(0x247)][_0x3e5759(0x1ab)]='none',_0x2cedf2['style'][_0x3e5759(0x1ab)]=_0x3e5759(0x1c4);let _0x1ee264=_0x510d34===0x0?_0x3e5759(0x205):_0x3e5759(0x1d1)+_0x510d34+_0x3e5759(0x1df);_0x2cedf2[_0x3e5759(0x1be)]=_0x3e5759(0x224)+_0x1ee264+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document['getElementById']('overlay')[_0x3e5759(0x1fb)]['add'](_0x3e5759(0x25d)),document[_0x3e5759(0x240)](_0x3e5759(0x276))['classList'][_0x3e5759(0x25f)](_0x3e5759(0x29f));}function closeAllSheets(){const _0x118ff0=a3_0xcd8bcf;document[_0x118ff0(0x240)](_0x118ff0(0x27d))['classList'][_0x118ff0(0x1e9)](_0x118ff0(0x25d)),document[_0x118ff0(0x234)]('.sheet')[_0x118ff0(0x23a)](_0x321ef6=>_0x321ef6['classList'][_0x118ff0(0x1e9)](_0x118ff0(0x29f)));}function openSheet(_0xa2d819){const _0x3b913e=a3_0xcd8bcf;document[_0x3b913e(0x240)]('overlay')[_0x3b913e(0x1fb)][_0x3b913e(0x25f)]('active'),document[_0x3b913e(0x240)](_0xa2d819)[_0x3b913e(0x1fb)]['add'](_0x3b913e(0x29f));}function getLocalDateStr(_0x598897){const _0x42bedf=a3_0xcd8bcf,_0x148aa7=_0x598897[_0x42bedf(0x1ad)](),_0x5b6921=String(_0x598897[_0x42bedf(0x206)]()+0x1)[_0x42bedf(0x22a)](0x2,'0'),_0x208434=String(_0x598897[_0x42bedf(0x266)]())[_0x42bedf(0x22a)](0x2,'0');return _0x148aa7+'-'+_0x5b6921+'-'+_0x208434;}function getStartOfWeek(_0x4a49fa){const _0x20b10d=a3_0xcd8bcf,_0x3495e7=new Date(_0x4a49fa),_0x4c7053=_0x3495e7[_0x20b10d(0x1cc)](),_0xe02a68=_0x3495e7[_0x20b10d(0x266)]()-_0x4c7053+(_0x4c7053===0x0?-0x6:0x1);return _0x3495e7[_0x20b10d(0x285)](_0xe02a68),_0x3495e7['setHours'](0x0,0x0,0x0,0x0),_0x3495e7;}function scrollToToday(){const _0x2d985c=getLocalDateStr(new Date());setTimeout(()=>{const _0x5133d1=a3_0x2a13,_0x25055d=document[_0x5133d1(0x1ae)]('.day-col-header[data-date=\x22'+_0x2d985c+'\x22]');if(_0x25055d){const _0x40db75=document[_0x5133d1(0x240)]('matrixViewport'),_0x273bb4=_0x25055d[_0x5133d1(0x258)]-_0x40db75['clientWidth']/0x2+_0x25055d[_0x5133d1(0x249)]/0x2;_0x40db75[_0x5133d1(0x22b)]({'left':_0x273bb4,'behavior':'auto'}),_0x40db75[_0x5133d1(0x284)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x191e78=a3_0xcd8bcf,_0x4b7350=new Date(),_0x120fe3=document[_0x191e78(0x240)](_0x191e78(0x23c)),_0x2ebe92=document[_0x191e78(0x240)](_0x191e78(0x220)),_0x256b36=(_0x4b7350[_0x191e78(0x20b)]()*0x3c+_0x4b7350['getMinutes']())/0x3c*GRID_H;_0x120fe3['style'][_0x191e78(0x1f4)]=_0x256b36+'px',_0x120fe3[_0x191e78(0x247)][_0x191e78(0x1ab)]='block',_0x2ebe92['style']['top']=_0x256b36+'px',_0x2ebe92[_0x191e78(0x247)]['display']=_0x191e78(0x1c4),_0x2ebe92[_0x191e78(0x1be)]=String(_0x4b7350[_0x191e78(0x20b)]())[_0x191e78(0x22a)](0x2,'0')+':'+String(_0x4b7350[_0x191e78(0x1db)]())[_0x191e78(0x22a)](0x2,'0');}function a3_0x3d99(){const _0x45ba48=['setAttribute','status','slice','open','873830CYFzlh','offClick','value','rs-time-btn','ccTitle','insertBefore','WebApp','detDate','substring','display','time-label','getFullYear','querySelector','px\x20-','.day-column','toLocaleDateString','stopPropagation','scrollLeft','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','planned','getAttribute','data-day-idx','parse','color','</div><div\x20class=\x22dch-num\x22>','coachId','2317880uzKOiD','push','textContent','json','left','cancel_window','floor','rescheduleSheet','block','client_load','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','rs-date-chip','data','.rs-date-chip','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','\x20status-completed','getDay','find','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','detTime','ru-RU','–∑–∞\x20','.period-switch\x20.p-btn','entries','3966180RbAWDX','detNote','setItem','%\x20+\x202px)','client_cancel','anDonutCircle','Critical\x20TMA\x20Error:','getMinutes','POST','disableVerticalSwipes','test','\x20—á.','join','T00:00:00','calendar','fontWeight','isArray','</div>','calc(','data-date','toString','remove','customConfirm','borderLeftColor','long','day-col-header\x20','onClick','none','.day-col-header','apply','toLocaleString','ranges','top','anEnd','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','anPercent','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','classList','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','#050505','toUpperCase','length','Telegram','onclick','findIndex','blocked-slot\x20stripe-bg','\x20–≤\x20','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','getMonth','3325528FeZYgm','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','backgroundPosition','div','getHours','sort','total','analyticsList','getItem','done','#0a84ff','location','cancelContainer','uc_client_settings','setBackgroundColor','settings','DOMContentLoaded','cid','rgba(10,\x20132,\x20255,\x20','event-card','toast','T23:59:59','rsSlotsGrid','analyticsSheet','\x20-\x20','timeLineBadge','day-off-overlay\x20stripe-bg','%\x20-\x204px)','firstChild','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','7oaSPHb','600','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','scrollWidth','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','padStart','scrollTo','</div><div\x20class=\x22rs-day-num\x22>','button','detStatus','var(--acc-blue)','initDataUnsafe','className','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','flex','querySelectorAll','numeric','70671OhSfCh','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','startsWith','filter','forEach','today','globalTimeLine','createDocumentFragment','uc_client_list','setMonth','getElementById','.btn-reschedule','blocked-range-part\x20stripe-bg','timeColumn','BackButton','mini','height','style','var(--acc-green)','offsetWidth','ready','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','#ff453a','\x20–∏–∑\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','–û—Ç–º–µ–Ω–µ–Ω–æ','scroll','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','getTime','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','50RDpfCv','show','stringify','router.html','offsetLeft','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','clients','coach_profiles','now','active','appendChild','add','week','createElement','initData','zIndex','<div\x20class=\x22dch-day\x22>','3436775bayHDa','getDate','applyData','ccYesBtn','pattern','width','saveLocally','daysHeaderTrack','map','start','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','visible','min','colIndex','syncLoad','day-column\x20','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','detailsSheet','171inRtvG','user','constructor','note','clientWidth','exceptions','overlay','log','substr','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','sid','518827RhBLYW','round','scrollTop','setDate','innerHTML','error','setHours','rsDatesTrack',':00</span>','search','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','max','(((.+)+)+)+$','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','end','then','completed','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','seriesId','split','dateStr','matrixViewport','keys','anStart','addEventListener','Error\x20setting\x20back\x20button:'];a3_0x3d99=function(){return _0x45ba48;};return a3_0x3d99();}function onScroll(){const _0x584b6a=a3_0xcd8bcf,_0x37acb4=document[_0x584b6a(0x240)](_0x584b6a(0x297)),_0x320c30=document['querySelectorAll'](_0x584b6a(0x1f0));for(let _0x213f1b of _0x320c30)if(_0x213f1b[_0x584b6a(0x258)]>=_0x37acb4[_0x584b6a(0x1b3)]){const _0x50203b=new Date(_0x213f1b[_0x584b6a(0x1b6)]('data-date'));document[_0x584b6a(0x240)]('headerMonth')['textContent']=_0x50203b[_0x584b6a(0x1f2)]('ru',{'month':_0x584b6a(0x1ec)})['toUpperCase']()+'\x20'+_0x50203b[_0x584b6a(0x1ad)]();break;}}function showToast(_0x4d9a79){const _0x42e033=a3_0xcd8bcf,_0x199a92=document[_0x42e033(0x240)](_0x42e033(0x21b));_0x199a92['textContent']=_0x4d9a79,_0x199a92['classList'][_0x42e033(0x25f)](_0x42e033(0x255)),setTimeout(()=>_0x199a92[_0x42e033(0x1fb)][_0x42e033(0x1e9)](_0x42e033(0x255)),0x7d0);}function handleInfiniteScroll(){const _0x2a34f4=a3_0xcd8bcf,_0x152bc1=document[_0x2a34f4(0x240)]('matrixViewport'),_0x12675c=_0x152bc1[_0x2a34f4(0x1b3)],_0x388a59=_0x152bc1[_0x2a34f4(0x228)],_0x4e57cf=_0x152bc1[_0x2a34f4(0x27b)];if(_0x388a59-(_0x12675c+_0x4e57cf)<0x12c){const _0x4722c2=endOffset;endOffset+=0xe,renderDayRange(_0x4722c2+0x1,endOffset),reRenderBlocks();}if(_0x12675c<0x12c){const _0x29b4eb=startOffset;startOffset-=0xe,prependDays(startOffset,_0x29b4eb-0x1),_0x152bc1[_0x2a34f4(0x1b3)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x19080e,_0xb79d38){const _0x332041=a3_0xcd8bcf,_0x1acde6=document[_0x332041(0x240)](_0x332041(0x26c)),_0x287569=document[_0x332041(0x240)]('gridColumns'),_0x3114fa=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x376e3c=new Date();_0x376e3c[_0x332041(0x288)](0x0,0x0,0x0,0x0);const _0x504795=getLocalDateStr(new Date()),_0x377837=document[_0x332041(0x23d)](),_0x46e7f8=document[_0x332041(0x23d)]();for(let _0x2a3f34=_0x19080e;_0x2a3f34<=_0xb79d38;_0x2a3f34++){const _0x36019a=new Date(_0x376e3c);_0x36019a['setDate'](_0x36019a['getDate']()+_0x2a3f34);const _0x371015=getLocalDateStr(_0x36019a);let _0x5662ff=_0x36019a[_0x332041(0x1cc)]()-0x1;if(_0x5662ff===-0x1)_0x5662ff=0x6;const _0xa83e87=_0x371015===_0x504795,_0x2e97a3=document[_0x332041(0x261)](_0x332041(0x20a));_0x2e97a3['className']=_0x332041(0x1ed)+(_0xa83e87?_0x332041(0x23b):''),_0x2e97a3[_0x332041(0x29c)]('data-date',_0x371015),_0x2e97a3['innerHTML']=_0x332041(0x264)+_0x3114fa[_0x5662ff]+_0x332041(0x1ba)+_0x36019a['getDate']()+_0x332041(0x1e5),_0x377837['appendChild'](_0x2e97a3);const _0x32360f=document[_0x332041(0x261)](_0x332041(0x20a));_0x32360f[_0x332041(0x231)]=_0x332041(0x274)+(_0xa83e87?_0x332041(0x23b):''),_0x32360f[_0x332041(0x29c)](_0x332041(0x1e7),_0x371015),_0x32360f[_0x332041(0x29c)](_0x332041(0x1b7),_0x5662ff),_0x46e7f8['appendChild'](_0x32360f);}_0x1acde6['insertBefore'](_0x377837,_0x1acde6['firstChild']),_0x287569[_0x332041(0x1a7)](_0x46e7f8,_0x287569[_0x332041(0x1ae)](_0x332041(0x1b0)));}function hexToRgba(_0x199a41,_0x54aa53){const _0x44c5ff=a3_0xcd8bcf;let _0x2e27a5;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x44c5ff(0x1de)](_0x199a41))return _0x2e27a5=_0x199a41[_0x44c5ff(0x1aa)](0x1)[_0x44c5ff(0x295)](''),_0x2e27a5[_0x44c5ff(0x1ff)]==0x3&&(_0x2e27a5=[_0x2e27a5[0x0],_0x2e27a5[0x0],_0x2e27a5[0x1],_0x2e27a5[0x1],_0x2e27a5[0x2],_0x2e27a5[0x2]]),_0x2e27a5='0x'+_0x2e27a5['join'](''),'rgba('+[_0x2e27a5>>0x10&0xff,_0x2e27a5>>0x8&0xff,_0x2e27a5&0xff][_0x44c5ff(0x1e0)](',')+','+_0x54aa53+')';return _0x44c5ff(0x219)+_0x54aa53+')';}let confirmResolver=null;function a3_0x2a13(_0x390121,_0x4ede6c){_0x390121=_0x390121-0x1a6;const _0x308b3e=a3_0x3d99();let _0x57a6bf=_0x308b3e[_0x390121];return _0x57a6bf;}function showCustomConfirm(_0xb0f85d,_0x1d4791,_0x223691=!![]){const _0x43879c=a3_0xcd8bcf;document[_0x43879c(0x240)](_0x43879c(0x1a6))[_0x43879c(0x1be)]=_0xb0f85d,document[_0x43879c(0x240)]('ccText')[_0x43879c(0x1be)]=_0x1d4791;const _0x58a7fb=document[_0x43879c(0x240)](_0x43879c(0x268));return _0x223691?(_0x58a7fb[_0x43879c(0x247)][_0x43879c(0x1b9)]=_0x43879c(0x24c),_0x58a7fb[_0x43879c(0x247)][_0x43879c(0x1e3)]=_0x43879c(0x226)):(_0x58a7fb[_0x43879c(0x247)]['color']='#0a84ff',_0x58a7fb['style']['fontWeight']=_0x43879c(0x226)),new Promise(_0x460a70=>{const _0x58eaf4=_0x43879c;confirmResolver=_0x460a70,document[_0x58eaf4(0x240)](_0x58eaf4(0x1ea))['classList'][_0x58eaf4(0x25f)]('visible');});}function resolveCustomConfirm(_0x2cf9e9){const _0x56180c=a3_0xcd8bcf;document['getElementById'](_0x56180c(0x1ea))[_0x56180c(0x1fb)][_0x56180c(0x1e9)](_0x56180c(0x270));if(confirmResolver)confirmResolver(_0x2cf9e9);}async function tryCancelCurrentSession(){const _0x40d729=a3_0xcd8bcf;if(!currentSession)return;const _0x511311=await showCustomConfirm(_0x40d729(0x1fc),_0x40d729(0x1c6),!![]);if(!_0x511311)return;const _0x42a3e6=currentSession;closeAllSheets(),sessions=sessions[_0x40d729(0x239)](_0x1d8198=>_0x1d8198['id']!==_0x42a3e6['id']),reRenderBlocks(),showToast(_0x40d729(0x24f)),lastUserActionTime=Date[_0x40d729(0x25c)]();try{const _0x15e96e=window['Telegram']?.[_0x40d729(0x1a8)],_0x52d7bd=await fetch(API_URL,{'method':_0x40d729(0x1dc),'body':JSON[_0x40d729(0x256)]({'action':_0x40d729(0x1d8),'init_data':_0x15e96e?.['initData']||'','coachId':_0x42a3e6[_0x40d729(0x1bb)],'dateStr':_0x42a3e6[_0x40d729(0x296)],'sessionId':_0x42a3e6['id']})});if(_0x52d7bd['ok'])DataManager[_0x40d729(0x26b)]();}catch(_0x338d1f){showToast(_0x40d729(0x1f8));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xbbf7ee=a3_0xcd8bcf;if(!currentSession)return;document[_0xbbf7ee(0x240)](_0xbbf7ee(0x276))[_0xbbf7ee(0x1fb)]['remove']('open'),document['getElementById'](_0xbbf7ee(0x1c3))[_0xbbf7ee(0x1fb)][_0xbbf7ee(0x25f)]('open');const _0x3ea0ba=document[_0xbbf7ee(0x240)](_0xbbf7ee(0x289)),_0x57a011=document[_0xbbf7ee(0x240)](_0xbbf7ee(0x21d));_0x3ea0ba[_0xbbf7ee(0x286)]='',_0x57a011['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x32fcf2,_0x3acc2a]=currentSession[_0xbbf7ee(0x26e)]['split'](':')[_0xbbf7ee(0x26d)](Number),[_0x37bb11,_0x48d774]=currentSession[_0xbbf7ee(0x290)][_0xbbf7ee(0x295)](':')[_0xbbf7ee(0x26d)](Number),_0x5d1588=_0x37bb11*0x3c+_0x48d774-(_0x32fcf2*0x3c+_0x3acc2a);try{const _0x128eda=window[_0xbbf7ee(0x200)]?.[_0xbbf7ee(0x1a8)],_0x3d6ea0=await fetch(API_URL,{'method':_0xbbf7ee(0x1dc),'body':JSON[_0xbbf7ee(0x256)]({'action':'get_slots','coachId':currentSession[_0xbbf7ee(0x1bb)],'duration':_0x5d1588,'init_data':_0x128eda?.[_0xbbf7ee(0x262)]||'','excludeSessionId':currentSession['id']})}),_0x143594=await _0x3d6ea0[_0xbbf7ee(0x1bf)]();_0x143594['ok']&&_0x143594[_0xbbf7ee(0x1c8)]?(availableSlotsCache=_0x143594[_0xbbf7ee(0x1c8)],renderRescheduleDates()):_0x57a011['innerHTML']=_0xbbf7ee(0x1f7);}catch(_0x1f75fe){_0x57a011[_0xbbf7ee(0x286)]=_0xbbf7ee(0x227);}}function renderRescheduleDates(){const _0x552be8=a3_0xcd8bcf,_0x50dc5d=document['getElementById'](_0x552be8(0x289));_0x50dc5d[_0x552be8(0x286)]='';const _0x3e1bc6=Object[_0x552be8(0x298)](availableSlotsCache)[_0x552be8(0x20c)](),_0x326683=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x3e1bc6[_0x552be8(0x1ff)]===0x0){document[_0x552be8(0x240)]('rsSlotsGrid')[_0x552be8(0x286)]=_0x552be8(0x293);return;}_0x3e1bc6[_0x552be8(0x23a)]((_0x1054e8,_0x199cd3)=>{const _0x1444cd=_0x552be8,_0x137ff9=new Date(_0x1054e8),_0x3914ea=_0x326683[_0x137ff9['getDay']()],_0x1ad1bf=_0x137ff9[_0x1444cd(0x266)](),_0x4a7c40=document[_0x1444cd(0x261)](_0x1444cd(0x20a));_0x4a7c40['className']=_0x1444cd(0x1c7);if(_0x199cd3===0x0)_0x4a7c40[_0x1444cd(0x1fb)]['add'](_0x1444cd(0x25d));_0x4a7c40[_0x1444cd(0x286)]='<div\x20class=\x22rs-day-name\x22>'+_0x3914ea+_0x1444cd(0x22c)+_0x1ad1bf+'</div>',_0x4a7c40[_0x1444cd(0x201)]=()=>selectRsDate(_0x1054e8,_0x4a7c40),_0x50dc5d[_0x1444cd(0x25e)](_0x4a7c40);}),selectRsDate(_0x3e1bc6[0x0],_0x50dc5d[_0x552be8(0x223)]);}function selectRsDate(_0x9bd04a,_0x420e32){const _0x1651ac=a3_0xcd8bcf;selectedRsDate=_0x9bd04a,document[_0x1651ac(0x234)](_0x1651ac(0x1c9))[_0x1651ac(0x23a)](_0x1f7d4b=>_0x1f7d4b['classList'][_0x1651ac(0x1e9)]('active'));if(_0x420e32)_0x420e32[_0x1651ac(0x1fb)][_0x1651ac(0x25f)]('active');const _0x1bc2cf=document[_0x1651ac(0x240)]('rsSlotsGrid');_0x1bc2cf[_0x1651ac(0x286)]='';const _0x179b9d=availableSlotsCache[_0x9bd04a]||[];if(_0x179b9d[_0x1651ac(0x1ff)]===0x0){_0x1bc2cf[_0x1651ac(0x286)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x179b9d[_0x1651ac(0x23a)](_0x3afb0a=>{const _0x5191ba=_0x1651ac,_0x485d0b=document['createElement'](_0x5191ba(0x22d));_0x485d0b[_0x5191ba(0x231)]=_0x5191ba(0x2a3),_0x485d0b[_0x5191ba(0x1be)]=_0x3afb0a,_0x485d0b[_0x5191ba(0x201)]=()=>confirmReschedule(_0x3afb0a),_0x1bc2cf[_0x5191ba(0x25e)](_0x485d0b);});}async function confirmReschedule(_0x3ca374){const _0x190daa=a3_0xcd8bcf,_0x1d6aca=new Date(selectedRsDate),_0x41b754=_0x1d6aca[_0x190daa(0x1b1)](_0x190daa(0x1d0),{'day':_0x190daa(0x235),'month':_0x190daa(0x1ec)}),_0x39a5df=await showCustomConfirm(_0x190daa(0x208),_0x190daa(0x280)+_0x41b754+_0x190daa(0x204)+_0x3ca374+'?',![]);if(!_0x39a5df)return;closeAllSheets(),showToast(_0x190daa(0x1f6)),lastUserActionTime=Date[_0x190daa(0x25c)]();const _0x395696=currentSession[_0x190daa(0x296)],_0x4f90d0=currentSession['id'],[_0x4fe030,_0x13db85]=currentSession['start'][_0x190daa(0x295)](':')[_0x190daa(0x26d)](Number),[_0x533f9c,_0x34b2f7]=currentSession[_0x190daa(0x290)][_0x190daa(0x295)](':')[_0x190daa(0x26d)](Number),_0x15f14e=_0x533f9c*0x3c+_0x34b2f7-(_0x4fe030*0x3c+_0x13db85),[_0x441c9b,_0x161ad5]=_0x3ca374['split'](':')[_0x190daa(0x26d)](Number),_0x553cc7=_0x441c9b*0x3c+_0x161ad5+_0x15f14e,_0x4ef7df=Math[_0x190daa(0x1c2)](_0x553cc7/0x3c),_0x2e12f9=_0x553cc7%0x3c,_0x1e6776=String(_0x4ef7df)[_0x190daa(0x22a)](0x2,'0')+':'+String(_0x2e12f9)['padStart'](0x2,'0'),_0x53a3d8=sessions[_0x190daa(0x202)](_0x479463=>_0x479463['id']===_0x4f90d0);_0x53a3d8!==-0x1&&(sessions[_0x53a3d8][_0x190daa(0x296)]=selectedRsDate,sessions[_0x53a3d8]['start']=_0x3ca374,sessions[_0x53a3d8][_0x190daa(0x290)]=_0x1e6776,reRenderBlocks());try{const _0x306228=window[_0x190daa(0x200)]?.[_0x190daa(0x1a8)],_0x46e1e8=await fetch(API_URL,{'method':'POST','body':JSON[_0x190daa(0x256)]({'action':'reschedule','init_data':_0x306228?.['initData']||'','oldSessionId':_0x4f90d0,'oldDate':_0x395696,'newDate':selectedRsDate,'newTime':_0x3ca374,'coachId':currentSession['coachId']})}),_0x1cce6e=await _0x46e1e8[_0x190daa(0x1bf)]();!_0x1cce6e['ok']?(showToast(_0x190daa(0x28c)),DataManager[_0x190daa(0x273)]()):(showToast(_0x190daa(0x253)),DataManager['saveLocally']());}catch(_0x46a17f){showToast(_0x190daa(0x1f8));}}document[a3_0xcd8bcf(0x29a)](a3_0xcd8bcf(0x217),init);