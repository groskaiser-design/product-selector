const a3_0x1d5cab=a3_0x1c10;(function(_0x11ba2c,_0x3b3d10){const _0xc290ab=a3_0x1c10,_0xb23049=_0x11ba2c();while(!![]){try{const _0x5c1296=-parseInt(_0xc290ab(0x1b5))/0x1*(-parseInt(_0xc290ab(0x16a))/0x2)+parseInt(_0xc290ab(0x108))/0x3+parseInt(_0xc290ab(0x165))/0x4+parseInt(_0xc290ab(0x12f))/0x5+-parseInt(_0xc290ab(0x1c1))/0x6+parseInt(_0xc290ab(0x185))/0x7*(parseInt(_0xc290ab(0x119))/0x8)+-parseInt(_0xc290ab(0x1e1))/0x9;if(_0x5c1296===_0x3b3d10)break;else _0xb23049['push'](_0xb23049['shift']());}catch(_0x5e34ef){_0xb23049['push'](_0xb23049['shift']());}}}(a3_0xfaea,0x8c9b6));const APP_VERSION=a3_0x1d5cab(0x15d),API_URL=a3_0x1d5cab(0x159),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x1d5cab(0x17c);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x1d5cab(0x12d),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x8bc9f4=a3_0x1d5cab,_0x22a90d=(function(){let _0x4e7961=!![];return function(_0x3456a3,_0x3c3b3b){const _0x314484=_0x4e7961?function(){const _0x4ba49e=a3_0x1c10;if(_0x3c3b3b){const _0x1b2adb=_0x3c3b3b[_0x4ba49e(0x13f)](_0x3456a3,arguments);return _0x3c3b3b=null,_0x1b2adb;}}:function(){};return _0x4e7961=![],_0x314484;};}()),_0x25e039=_0x22a90d(this,function(){const _0x2f8476=a3_0x1c10;return _0x25e039[_0x2f8476(0x18b)]()[_0x2f8476(0x193)]('(((.+)+)+)+$')['toString']()[_0x2f8476(0x1bd)](_0x25e039)[_0x2f8476(0x193)](_0x2f8476(0x1c0));});_0x25e039();try{const _0x2e6d51=window[_0x8bc9f4(0x133)]?.['WebApp'];if(!_0x2e6d51)return;_0x2e6d51[_0x8bc9f4(0x17e)](),_0x2e6d51[_0x8bc9f4(0x1eb)]();try{_0x2e6d51['setHeaderColor'](_0x8bc9f4(0x175)),_0x2e6d51[_0x8bc9f4(0x195)]&&_0x2e6d51[_0x8bc9f4(0x195)](_0x8bc9f4(0x175));}catch(_0x4d8a4c){console[_0x8bc9f4(0x126)](_0x8bc9f4(0x15e),_0x4d8a4c);}try{_0x2e6d51['BackButton']&&(_0x2e6d51['BackButton'][_0x8bc9f4(0x16c)](),_0x2e6d51[_0x8bc9f4(0x153)][_0x8bc9f4(0x1e6)](),_0x2e6d51['BackButton'][_0x8bc9f4(0x130)](function(){const _0x18b0f7=_0x8bc9f4;window['location'][_0x18b0f7(0x107)]='router.html';}));}catch(_0x46fd97){console[_0x8bc9f4(0x126)]('Error\x20setting\x20back\x20button:',_0x46fd97);}try{if(_0x2e6d51[_0x8bc9f4(0x1bf)])_0x2e6d51[_0x8bc9f4(0x1bf)]();}catch(_0xfced1e){}}catch(_0x5dd11f){console['error'](_0x8bc9f4(0x109),_0x5dd11f);}}());function isAdmin(){const _0x39d1cc=a3_0x1d5cab;try{const _0x4aaa87=Number(window[_0x39d1cc(0x133)]?.[_0x39d1cc(0x160)]?.['initDataUnsafe']?.[_0x39d1cc(0x1bb)]?.['id']);return _0x4aaa87===0xbaf7174;}catch(_0x1254ee){return![];}}const DataManager={'saveLocally'(){const _0x55272d=a3_0x1d5cab;try{localStorage[_0x55272d(0x188)](KEY_SESSIONS,JSON['stringify'](sessions)),localStorage[_0x55272d(0x188)](KEY_CLIENTS,JSON[_0x55272d(0x1bc)](clients)),localStorage[_0x55272d(0x188)](KEY_SETTINGS,JSON[_0x55272d(0x1bc)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x3828a9){}},'loadLocal'(){const _0x4ab2c6=a3_0x1d5cab;try{const _0x199220=localStorage[_0x4ab2c6(0x1b9)](KEY_SESSIONS);if(_0x199220)sessions=JSON[_0x4ab2c6(0x1a2)](_0x199220);const _0x30dee8=localStorage[_0x4ab2c6(0x1b9)](KEY_CLIENTS);if(_0x30dee8)clients=JSON['parse'](_0x30dee8);const _0x3baa17=localStorage[_0x4ab2c6(0x1b9)](KEY_SETTINGS);if(_0x3baa17){const _0x4063cd=JSON['parse'](_0x3baa17);if(_0x4063cd[_0x4ab2c6(0x15b)])availabilityPattern=_0x4063cd[_0x4ab2c6(0x15b)];if(_0x4063cd['ranges'])specialRanges=_0x4063cd[_0x4ab2c6(0x140)];if(_0x4063cd['exceptions'])dateExceptions=_0x4063cd[_0x4ab2c6(0x1d3)];}}catch(_0x172864){}},async 'syncLoad'(){const _0x45545b=a3_0x1d5cab,_0x1e21fb=new Date(),_0x1a586e=_0x1e21fb['getFullYear']()+'-'+String(_0x1e21fb[_0x45545b(0x1c6)]()+0x1)[_0x45545b(0x132)](0x2,'0'),_0x3811d8=new Date(_0x1e21fb);_0x3811d8[_0x45545b(0x197)](_0x1e21fb[_0x45545b(0x1c6)]()+0x1);const _0x4bc1b9=_0x3811d8[_0x45545b(0x1da)]()+'-'+String(_0x3811d8[_0x45545b(0x1c6)]()+0x1)[_0x45545b(0x132)](0x2,'0'),_0x25f560=Date[_0x45545b(0x1ba)]();try{const _0x22c32f=window[_0x45545b(0x133)]?.['WebApp'],_0x35fef2=_0x22c32f?.['initData']||'',[_0x159c1a,_0x46562c]=await Promise[_0x45545b(0x129)]([fetch(API_URL,{'method':'POST','body':JSON[_0x45545b(0x1bc)]({'action':_0x45545b(0x1be),'init_data':_0x35fef2,'month_str':_0x1a586e})})[_0x45545b(0x1de)](_0x3dc759=>_0x3dc759[_0x45545b(0x1f7)]()),fetch(API_URL,{'method':_0x45545b(0x1ee),'body':JSON[_0x45545b(0x1bc)]({'action':_0x45545b(0x1be),'init_data':_0x35fef2,'month_str':_0x4bc1b9})})[_0x45545b(0x1de)](_0x5ba207=>_0x5ba207[_0x45545b(0x1f7)]())]);if(lastUserActionTime>_0x25f560){console[_0x45545b(0x126)](_0x45545b(0x13e));return;}if(_0x159c1a['ok'])this[_0x45545b(0x11a)](_0x159c1a['data'],_0x1a586e);if(_0x46562c['ok'])this[_0x45545b(0x11a)](_0x46562c[_0x45545b(0x10c)],_0x4bc1b9);this[_0x45545b(0x115)]();}catch(_0x464047){}},'applyData'(_0x43f187,_0x34a74a){const _0x3105b6=a3_0x1d5cab;if(!_0x43f187)return;if(_0x43f187[_0x3105b6(0x156)]){if(_0x43f187[_0x3105b6(0x156)]['pattern'])availabilityPattern=_0x43f187[_0x3105b6(0x156)][_0x3105b6(0x15b)];if(_0x43f187['settings'][_0x3105b6(0x140)])specialRanges=_0x43f187[_0x3105b6(0x156)]['ranges'];if(_0x43f187[_0x3105b6(0x156)][_0x3105b6(0x1d3)])dateExceptions=_0x43f187[_0x3105b6(0x156)][_0x3105b6(0x1d3)];}if(_0x43f187[_0x3105b6(0x128)]&&Array[_0x3105b6(0x15c)](_0x43f187[_0x3105b6(0x128)]))clients=_0x43f187[_0x3105b6(0x128)];_0x43f187[_0x3105b6(0x13b)]&&(coachProfiles={...coachProfiles,..._0x43f187['coach_profiles']}),_0x43f187[_0x3105b6(0x1ab)]&&(sessions=sessions[_0x3105b6(0x1dd)](_0x54b101=>!_0x54b101[_0x3105b6(0x10a)][_0x3105b6(0x143)](_0x34a74a)),Object[_0x3105b6(0x10d)](_0x43f187[_0x3105b6(0x1ab)])[_0x3105b6(0x1a1)](_0x2b02ee=>{const _0x259563=_0x3105b6,_0x5925bc=_0x43f187[_0x259563(0x1ab)][_0x2b02ee];_0x5925bc[_0x259563(0x1a1)](_0x223bea=>{const _0x5cfa29=_0x259563;sessions['push']({'id':_0x223bea['i'],'clientId':_0x223bea['c'],'coachId':_0x223bea[_0x5cfa29(0x154)],'dateStr':_0x34a74a+'-'+_0x2b02ee[_0x5cfa29(0x132)](0x2,'0'),'start':_0x223bea['s'],'end':_0x223bea['e'],'note':_0x223bea['n']||'','status':_0x223bea['st']||_0x5cfa29(0x1a6),'seriesId':_0x223bea['sid']});});})),reRenderBlocks();}};function init(){const _0x3156c6=a3_0x1d5cab;DataManager[_0x3156c6(0x1b0)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x3156c6(0x131)]('matrixViewport')['addEventListener'](_0x3156c6(0x1c4),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x975d1d=a3_0x1d5cab,_0x33bed3=document[_0x975d1d(0x131)](_0x975d1d(0x19c)),_0x40b279=document[_0x975d1d(0x131)](_0x975d1d(0x1f4));_0x33bed3[_0x975d1d(0x16b)]='',_0x33bed3[_0x975d1d(0x16f)](_0x40b279);for(let _0x33ae35=0x0;_0x33ae35<0x18;_0x33ae35++){const _0x3481ba=document[_0x975d1d(0x15f)](_0x975d1d(0x12b));_0x3481ba[_0x975d1d(0x1b2)]=_0x975d1d(0x11e);if(_0x33ae35>0x0)_0x3481ba[_0x975d1d(0x16b)]=_0x975d1d(0x1ea)+String(_0x33ae35)[_0x975d1d(0x132)](0x2,'0')+':00</span>';_0x33bed3[_0x975d1d(0x16f)](_0x3481ba);}}function renderDayRange(_0x20b416,_0xd1fbcc){const _0x4763c0=a3_0x1d5cab,_0x529b01=document[_0x4763c0(0x131)](_0x4763c0(0x1b3)),_0x427d23=document[_0x4763c0(0x131)](_0x4763c0(0x1ce)),_0x2189cd=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x557ece=new Date();_0x557ece[_0x4763c0(0x1c3)](0x0,0x0,0x0,0x0);const _0xac5c9f=getLocalDateStr(new Date());for(let _0x43201c=_0x20b416;_0x43201c<=_0xd1fbcc;_0x43201c++){const _0x5d0db9=new Date(_0x557ece);_0x5d0db9[_0x4763c0(0x196)](_0x5d0db9[_0x4763c0(0x151)]()+_0x43201c);const _0x30614e=getLocalDateStr(_0x5d0db9);let _0x48a017=_0x5d0db9['getDay']()-0x1;if(_0x48a017===-0x1)_0x48a017=0x6;const _0x1810b3=_0x30614e===_0xac5c9f,_0x2a15b1=document[_0x4763c0(0x15f)](_0x4763c0(0x12b));_0x2a15b1[_0x4763c0(0x1b2)]=_0x4763c0(0x14e)+(_0x1810b3?_0x4763c0(0x1f5):''),_0x2a15b1['setAttribute'](_0x4763c0(0x14a),_0x30614e),_0x2a15b1['innerHTML']=_0x4763c0(0x1cc)+_0x2189cd[_0x48a017]+'</div><div\x20class=\x22dch-num\x22>'+_0x5d0db9['getDate']()+_0x4763c0(0x123),_0x529b01[_0x4763c0(0x16f)](_0x2a15b1);const _0x4cec88=document['createElement'](_0x4763c0(0x12b));_0x4cec88[_0x4763c0(0x1b2)]=_0x4763c0(0x18f)+(_0x1810b3?_0x4763c0(0x1f5):''),_0x4cec88[_0x4763c0(0x1f2)](_0x4763c0(0x14a),_0x30614e),_0x4cec88[_0x4763c0(0x1f2)](_0x4763c0(0x139),_0x48a017),_0x427d23[_0x4763c0(0x16f)](_0x4cec88);}}function reRenderBlocks(){const _0x688837=a3_0x1d5cab;document[_0x688837(0x14c)](_0x688837(0x1f1))[_0x688837(0x1a1)](_0x2c7643=>{const _0x169795=_0x688837;_0x2c7643[_0x169795(0x14c)](_0x169795(0x164))[_0x169795(0x1a1)](_0x4497d3=>_0x4497d3[_0x169795(0x163)]());const _0x3755cb=_0x2c7643['getAttribute']('data-date'),_0x449327=parseInt(_0x2c7643[_0x169795(0x11b)](_0x169795(0x139))),_0x13ebff=Math[_0x169795(0x181)](_0x2c7643['offsetLeft']);(availabilityPattern[_0x449327]||[])[_0x169795(0x1a1)](_0x45c04e=>{const _0x3688b3=_0x169795,_0x4a3a7e=document[_0x3688b3(0x15f)]('div');_0x4a3a7e['className']=_0x3688b3(0x1ca),_0x4a3a7e[_0x3688b3(0x1d1)][_0x3688b3(0x13c)]=_0x45c04e*GRID_H+'px',_0x4a3a7e[_0x3688b3(0x1d1)][_0x3688b3(0x1ad)]='-'+_0x13ebff+'px\x20-'+_0x45c04e*GRID_H+'px',_0x2c7643['appendChild'](_0x4a3a7e);});if(specialRanges[_0x169795(0x15a)]>0x0){const _0x9d3fac=new Date(_0x3755cb+_0x169795(0x1e9))[_0x169795(0x176)](),_0x14bbac=new Date(_0x3755cb+'T23:59:59')['getTime']();specialRanges['forEach'](_0x116929=>{const _0x58f052=_0x169795,_0x37c610=new Date(_0x116929[_0x58f052(0x1ec)])[_0x58f052(0x176)](),_0x4c048d=new Date(_0x116929['end'])[_0x58f052(0x176)](),_0x435703=Math[_0x58f052(0x1cb)](_0x9d3fac,_0x37c610),_0x10a916=Math['min'](_0x14bbac,_0x4c048d);if(_0x435703<_0x10a916){const _0x4a8c6c=(_0x435703-_0x9d3fac)/0x36ee80*GRID_H,_0x5da6cf=(_0x10a916-_0x435703)/0x36ee80*GRID_H,_0x45e829=document[_0x58f052(0x15f)](_0x58f052(0x12b));_0x5da6cf>=23.5*GRID_H?(_0x45e829[_0x58f052(0x1b2)]=_0x58f052(0x1f6),_0x45e829[_0x58f052(0x1d1)][_0x58f052(0x1ad)]='-'+_0x13ebff+_0x58f052(0x1a9)):(_0x45e829[_0x58f052(0x1b2)]='blocked-range-part\x20stripe-bg',_0x45e829[_0x58f052(0x1d1)][_0x58f052(0x13c)]=_0x4a8c6c+'px',_0x45e829[_0x58f052(0x1d1)][_0x58f052(0x171)]=_0x5da6cf+'px',_0x45e829['style']['backgroundPosition']='-'+_0x13ebff+_0x58f052(0x124)+_0x4a8c6c+'px'),_0x2c7643[_0x58f052(0x16f)](_0x45e829);}});}renderEventsForColumn(_0x2c7643,_0x3755cb);});}function renderEventsForColumn(_0x561a4e,_0x59c9ba){const _0x15d850=a3_0x1d5cab,_0x48db64=sessions[_0x15d850(0x1dd)](_0x2e6ec5=>_0x2e6ec5['dateStr']===_0x59c9ba),_0x4b70bf=_0x48db64[_0x15d850(0x1ac)](_0x46620e=>{const _0x5f0913=_0x15d850,[_0x33e5c0,_0x313bb3]=_0x46620e['start'][_0x5f0913(0x1d8)](':')[_0x5f0913(0x1ac)](Number),[_0xa30b78,_0x1ef1ef]=_0x46620e[_0x5f0913(0x137)][_0x5f0913(0x1d8)](':')[_0x5f0913(0x1ac)](Number);return{'data':_0x46620e,'start':_0x33e5c0*0x3c+_0x313bb3,'end':_0xa30b78*0x3c+_0x1ef1ef,'colIndex':0x0};});_0x4b70bf['sort']((_0x1e7e2a,_0xa5f5d6)=>_0x1e7e2a[_0x15d850(0x1ec)]-_0xa5f5d6[_0x15d850(0x1ec)]||_0xa5f5d6[_0x15d850(0x137)]-_0xa5f5d6[_0x15d850(0x1ec)]-(_0x1e7e2a[_0x15d850(0x137)]-_0x1e7e2a[_0x15d850(0x1ec)]));const _0x388263=[];_0x4b70bf[_0x15d850(0x1a1)](_0x4a4036=>{const _0x73f99a=_0x15d850;let _0x12fb32=![];for(let _0x32e55a=0x0;_0x32e55a<_0x388263['length'];_0x32e55a++){const _0x12156b=_0x388263[_0x32e55a];if(_0x4a4036['start']>=_0x12156b[_0x12156b['length']-0x1]['end']){_0x12156b[_0x73f99a(0x1dc)](_0x4a4036),_0x4a4036[_0x73f99a(0x1f9)]=_0x32e55a,_0x12fb32=!![];break;}}!_0x12fb32&&(_0x388263[_0x73f99a(0x1dc)]([_0x4a4036]),_0x4a4036[_0x73f99a(0x1f9)]=_0x388263[_0x73f99a(0x15a)]-0x1);}),_0x4b70bf['forEach'](_0x58e068=>{const _0x379087=_0x15d850;let _0x53d50b=0x0;_0x4b70bf[_0x379087(0x1a1)](_0x1d6443=>{const _0x2c8079=_0x379087;if(Math[_0x2c8079(0x1cb)](_0x58e068[_0x2c8079(0x1ec)],_0x1d6443['start'])<Math['min'](_0x58e068[_0x2c8079(0x137)],_0x1d6443[_0x2c8079(0x137)])&&_0x1d6443[_0x2c8079(0x1f9)]>_0x53d50b)_0x53d50b=_0x1d6443['colIndex'];});const _0x4cbe9c=_0x53d50b+0x1,_0x2b571f=0x64/_0x4cbe9c,_0x30a9ff=_0x58e068[_0x379087(0x1f9)]*_0x2b571f,_0x136a9d=document[_0x379087(0x15f)]('div'),_0x15b0c1=_0x58e068[_0x379087(0x10c)];let _0x15469c=_0x379087(0x19d);if(clients&&clients[_0x379087(0x15a)]>0x0){const _0x3213d1=clients[_0x379087(0x14b)](_0x4f542a=>String(_0x4f542a['id'])===String(_0x15b0c1[_0x379087(0x1b6)]));if(_0x3213d1&&_0x3213d1[_0x379087(0x12c)])_0x15469c=_0x3213d1['color'];}const _0x4aa561=_0x15b0c1[_0x379087(0x1a8)]===_0x379087(0x169),_0x29bd5a=_0x4aa561?0x1:0.45;_0x136a9d[_0x379087(0x1b2)]=_0x379087(0x1a0)+(_0x4aa561?'\x20status-completed':''),_0x136a9d['style'][_0x379087(0x19f)]=hexToRgba(_0x15469c,_0x29bd5a),_0x136a9d[_0x379087(0x1d1)][_0x379087(0x148)]=_0x15469c;const _0x46b379=_0x58e068['start']/0x3c*GRID_H,_0x2f472c=(_0x58e068['end']-_0x58e068['start'])/0x3c*GRID_H;_0x136a9d[_0x379087(0x1d1)][_0x379087(0x13c)]=_0x46b379+'px',_0x136a9d[_0x379087(0x1d1)][_0x379087(0x171)]=Math['max'](_0x2f472c,0x14)+'px',_0x136a9d[_0x379087(0x1d1)][_0x379087(0x1d2)]=_0x379087(0x1e8)+_0x2b571f+'%\x20-\x204px)',_0x136a9d[_0x379087(0x1d1)][_0x379087(0x187)]=_0x379087(0x1e8)+_0x30a9ff+_0x379087(0x10b),_0x136a9d[_0x379087(0x1d1)][_0x379087(0x147)]=0xa+_0x58e068[_0x379087(0x1f9)];if(_0x2b571f<0x55)_0x136a9d[_0x379087(0x18e)][_0x379087(0x134)](_0x379087(0x11c));let _0x4591ae='';if(_0x15b0c1[_0x379087(0x16d)])_0x4591ae+=_0x379087(0x10f);if(_0x4aa561)_0x4591ae+=_0x379087(0x1e2);_0x136a9d[_0x379087(0x16b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x15b0c1[_0x379087(0x1ec)]+_0x379087(0x180)+_0x15b0c1[_0x379087(0x137)]+_0x379087(0x1a5)+_0x4591ae+_0x379087(0x1b8),_0x136a9d[_0x379087(0x135)]=_0x2d1f31=>{_0x2d1f31['stopPropagation'](),openDetails(_0x15b0c1);},_0x561a4e[_0x379087(0x16f)](_0x136a9d);});}function a3_0x1c10(_0x49b741,_0x5dde82){_0x49b741=_0x49b741-0x107;const _0x40078b=a3_0xfaea();let _0x38d72b=_0x40078b[_0x49b741];return _0x38d72b;}function openAnalytics(){const _0x15b862=a3_0x1d5cab,_0x521d8f=document['querySelector'](_0x15b862(0x1ed));setAnalyticsPeriod(_0x15b862(0x12d),_0x521d8f),openSheet(_0x15b862(0x1e3));}function setAnalyticsPeriod(_0x345627,_0x5bde3d){const _0xb61784=a3_0x1d5cab;currentAnPeriod=_0x345627,document[_0xb61784(0x14c)](_0xb61784(0x1ed))[_0xb61784(0x1a1)](_0x216d15=>_0x216d15[_0xb61784(0x18e)][_0xb61784(0x163)](_0xb61784(0x145)));if(_0x5bde3d)_0x5bde3d['classList'][_0xb61784(0x134)](_0xb61784(0x145));const _0x314d31=document['getElementById']('anCustomDates');_0x314d31[_0xb61784(0x1d1)][_0xb61784(0x12e)]=_0x345627===_0xb61784(0x158)?_0xb61784(0x1b1):_0xb61784(0x1d4);const _0x1f2fbb=new Date();let _0x8d70d0=new Date(),_0x5783f2=new Date();if(_0x345627===_0xb61784(0x12d))_0x8d70d0=getStartOfWeek(_0x1f2fbb),_0x5783f2=new Date(_0x8d70d0),_0x5783f2[_0xb61784(0x196)](_0x5783f2[_0xb61784(0x151)]()+0x6);else{if(_0x345627==='month')_0x8d70d0=new Date(_0x1f2fbb['getFullYear'](),_0x1f2fbb[_0xb61784(0x1c6)](),0x1),_0x5783f2=new Date(_0x1f2fbb[_0xb61784(0x1da)](),_0x1f2fbb['getMonth']()+0x1,0x0);else{!document['getElementById'](_0xb61784(0x13a))[_0xb61784(0x114)]&&(document[_0xb61784(0x131)]('anStart')['value']=getLocalDateStr(_0x1f2fbb),document[_0xb61784(0x131)](_0xb61784(0x198))[_0xb61784(0x114)]=getLocalDateStr(_0x1f2fbb));refreshAnalytics();return;}}document[_0xb61784(0x131)](_0xb61784(0x13a))[_0xb61784(0x114)]=getLocalDateStr(_0x8d70d0),document[_0xb61784(0x131)]('anEnd')['value']=getLocalDateStr(_0x5783f2),refreshAnalytics();}function refreshAnalytics(){const _0x101ad8=a3_0x1d5cab,_0x3b632c=document[_0x101ad8(0x131)](_0x101ad8(0x13a))[_0x101ad8(0x114)],_0x59d174=document[_0x101ad8(0x131)](_0x101ad8(0x198))['value'];if(!_0x3b632c||!_0x59d174)return;const _0x2584b6=sessions['filter'](_0x5076f6=>_0x5076f6[_0x101ad8(0x10a)]>=_0x3b632c&&_0x5076f6[_0x101ad8(0x10a)]<=_0x59d174&&_0x5076f6[_0x101ad8(0x1a8)]!=='cancelled'),_0x518a35=_0x2584b6[_0x101ad8(0x15a)],_0x46201e=_0x2584b6[_0x101ad8(0x1dd)](_0x3c8b20=>_0x3c8b20[_0x101ad8(0x1a8)]===_0x101ad8(0x169))[_0x101ad8(0x15a)],_0x5033fd=_0x518a35>0x0?Math[_0x101ad8(0x181)](_0x46201e/_0x518a35*0x64):0x0;document[_0x101ad8(0x131)]('anPercent')[_0x101ad8(0x14d)]=_0x5033fd+'%',document[_0x101ad8(0x131)](_0x101ad8(0x19b))[_0x101ad8(0x14d)]=_0x46201e+_0x101ad8(0x111)+_0x518a35+_0x101ad8(0x19e);const _0x2b2b51=document[_0x101ad8(0x131)](_0x101ad8(0x17a)),_0x379c7e=0x2*Math['PI']*0x23,_0x4804bc=_0x379c7e-_0x5033fd/0x64*_0x379c7e;_0x2b2b51[_0x101ad8(0x1d1)][_0x101ad8(0x14f)]=_0x4804bc;const _0x512177={};_0x2584b6[_0x101ad8(0x1a1)](_0x12a0fa=>{const _0x2e037e=_0x101ad8,_0x2cfb0c=_0x12a0fa[_0x2e037e(0x13d)]||'Unknown';if(!_0x512177[_0x2cfb0c]){const _0x19d591='#'+_0x2cfb0c[_0x2e037e(0x18b)]()[_0x2e037e(0x168)](0x0,0x6);_0x512177[_0x2cfb0c]={'total':0x0,'done':0x0,'color':_0x19d591};}_0x512177[_0x2cfb0c][_0x2e037e(0x172)]++;if(_0x12a0fa[_0x2e037e(0x1a8)]==='completed')_0x512177[_0x2cfb0c][_0x2e037e(0x1e5)]++;});const _0x56c4e5=document[_0x101ad8(0x131)](_0x101ad8(0x116));_0x56c4e5[_0x101ad8(0x16b)]='';const _0x5b03ef=Object[_0x101ad8(0x177)](_0x512177)['sort']((_0x2ee2e1,_0x5e0ebf)=>_0x5e0ebf[0x1]['total']-_0x2ee2e1[0x1][_0x101ad8(0x172)]);if(_0x5b03ef[_0x101ad8(0x15a)]===0x0){_0x56c4e5[_0x101ad8(0x16b)]=_0x101ad8(0x1c8);return;}_0x5b03ef[_0x101ad8(0x1a1)](([_0x2cbb7e,_0x485e6f])=>{const _0x360a89=_0x101ad8,_0x459095=Math['round'](_0x485e6f[_0x360a89(0x1e5)]/_0x485e6f['total']*0x64),_0x38d558=document[_0x360a89(0x15f)](_0x360a89(0x12b));_0x38d558[_0x360a89(0x1b2)]=_0x360a89(0x121),_0x38d558['style']['borderLeftColor']=_0x485e6f['color'],_0x38d558['innerHTML']=_0x360a89(0x1e4)+_0x2cbb7e[_0x360a89(0x168)](0x0,0x5)+_0x360a89(0x17b)+_0x485e6f[_0x360a89(0x1e5)]+'</span>\x20/\x20'+_0x485e6f[_0x360a89(0x172)]+_0x360a89(0x1cd)+_0x459095+_0x360a89(0x113),_0x56c4e5['appendChild'](_0x38d558);});}function openDetails(_0x1a59f5){const _0x56987a=a3_0x1d5cab;currentSession=_0x1a59f5;const _0x336e72=new Date(_0x1a59f5[_0x56987a(0x10a)]),_0x5144eb=_0x336e72[_0x56987a(0x155)](_0x56987a(0x11d),{'weekday':_0x56987a(0x179),'day':'numeric','month':'long'});document[_0x56987a(0x131)]('detDate')[_0x56987a(0x14d)]=_0x5144eb[_0x56987a(0x1ef)](0x0)[_0x56987a(0x1d5)]()+_0x5144eb[_0x56987a(0x122)](0x1),document[_0x56987a(0x131)](_0x56987a(0x1d0))[_0x56987a(0x14d)]=_0x1a59f5[_0x56987a(0x1ec)]+_0x56987a(0x180)+_0x1a59f5[_0x56987a(0x137)],document['getElementById'](_0x56987a(0x18d))[_0x56987a(0x14d)]=_0x1a59f5[_0x56987a(0x138)]||_0x56987a(0x192);const _0xd19abe=document[_0x56987a(0x131)]('detStatus'),_0x8159c7=document[_0x56987a(0x131)](_0x56987a(0x173)),_0xd127c8=_0x8159c7[_0x56987a(0x1cf)](_0x56987a(0x1f3)),_0x2475bd=_0x8159c7[_0x56987a(0x1cf)](_0x56987a(0x161)),_0x542f2=document[_0x56987a(0x131)]('cancelHint');if(_0x1a59f5['status']===_0x56987a(0x169))_0xd19abe[_0x56987a(0x14d)]=_0x56987a(0x152),_0xd19abe['style'][_0x56987a(0x12c)]=_0x56987a(0x186),_0x8159c7[_0x56987a(0x1d1)]['display']=_0x56987a(0x1d4);else{_0xd19abe[_0x56987a(0x14d)]=_0x56987a(0x16e),_0xd19abe[_0x56987a(0x1d1)][_0x56987a(0x12c)]=_0x56987a(0x1df),_0x8159c7[_0x56987a(0x1d1)][_0x56987a(0x12e)]=_0x56987a(0x1e7);const _0xaa657a=new Date(_0x1a59f5[_0x56987a(0x10a)]+'T'+_0x1a59f5[_0x56987a(0x1ec)]),_0x1964e5=new Date(),_0x5c2f42=(_0xaa657a-_0x1964e5)/(0x3e8*0x3c*0x3c),_0xcc28df=coachProfiles[_0x1a59f5['coachId']]&&coachProfiles[_0x1a59f5[_0x56987a(0x13d)]]['cancel_window']?parseInt(coachProfiles[_0x1a59f5[_0x56987a(0x13d)]][_0x56987a(0x162)]):0x18;if(_0xcc28df===0x0||_0x5c2f42>=_0xcc28df)_0xd127c8[_0x56987a(0x1d1)][_0x56987a(0x12e)]=_0x56987a(0x1e7),_0x2475bd[_0x56987a(0x1d1)][_0x56987a(0x12e)]='block',_0x542f2[_0x56987a(0x1d1)][_0x56987a(0x12e)]='none';else{_0xd127c8[_0x56987a(0x1d1)]['display']=_0x56987a(0x1d4),_0x2475bd['style'][_0x56987a(0x12e)]=_0x56987a(0x1d4),_0x542f2['style'][_0x56987a(0x12e)]=_0x56987a(0x1e7);let _0xbee40f=_0xcc28df===0x0?_0x56987a(0x117):'–∑–∞\x20'+_0xcc28df+'\x20—á.';_0x542f2[_0x56987a(0x14d)]=_0x56987a(0x170)+_0xbee40f+_0x56987a(0x194);}}document[_0x56987a(0x131)](_0x56987a(0x10e))[_0x56987a(0x18e)][_0x56987a(0x134)](_0x56987a(0x145)),document['getElementById'](_0x56987a(0x157))[_0x56987a(0x18e)][_0x56987a(0x134)]('open');}function closeAllSheets(){const _0x412c2e=a3_0x1d5cab;document['getElementById'](_0x412c2e(0x10e))[_0x412c2e(0x18e)][_0x412c2e(0x163)]('active'),document[_0x412c2e(0x14c)](_0x412c2e(0x17f))['forEach'](_0x13b9b5=>_0x13b9b5[_0x412c2e(0x18e)]['remove'](_0x412c2e(0x1b4)));}function openSheet(_0x570eec){const _0xd24be0=a3_0x1d5cab;document[_0xd24be0(0x131)]('overlay')[_0xd24be0(0x18e)][_0xd24be0(0x134)](_0xd24be0(0x145)),document[_0xd24be0(0x131)](_0x570eec)[_0xd24be0(0x18e)][_0xd24be0(0x134)]('open');}function getLocalDateStr(_0x50e8f5){const _0x2afa67=a3_0x1d5cab,_0x11f8ee=_0x50e8f5['getFullYear'](),_0x330ee9=String(_0x50e8f5[_0x2afa67(0x1c6)]()+0x1)[_0x2afa67(0x132)](0x2,'0'),_0x40cdb0=String(_0x50e8f5['getDate']())[_0x2afa67(0x132)](0x2,'0');return _0x11f8ee+'-'+_0x330ee9+'-'+_0x40cdb0;}function getStartOfWeek(_0x620044){const _0x4da262=a3_0x1d5cab,_0x2170fd=new Date(_0x620044),_0x596d4f=_0x2170fd[_0x4da262(0x1c7)](),_0xbd3413=_0x2170fd['getDate']()-_0x596d4f+(_0x596d4f===0x0?-0x6:0x1);return _0x2170fd[_0x4da262(0x196)](_0xbd3413),_0x2170fd[_0x4da262(0x1c3)](0x0,0x0,0x0,0x0),_0x2170fd;}function a3_0xfaea(){const _0x46f75c=['Telegram','add','onclick','rs-date-chip','end','note','data-day-idx','anStart','coach_profiles','top','coachId','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','apply','ranges','reschedule','button','startsWith','clientWidth','active','.day-col-header[data-date=\x22','zIndex','borderLeftColor','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','data-date','find','querySelectorAll','textContent','day-col-header\x20','strokeDashoffset','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','getDate','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','BackButton','cid','toLocaleDateString','settings','detailsSheet','custom','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','length','pattern','isArray','v9.5-CLIENT-ANALYTICS','Error\x20setting\x20color:','createElement','WebApp','.btn-reschedule','cancel_window','remove','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','363720gCweQM','rsSlotsGrid','rgba(10,\x20132,\x20255,\x20','substr','completed','4RbvcWR','innerHTML','show','seriesId','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','appendChild','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','height','total','cancelContainer','fontWeight','#050505','getTime','entries','client_cancel','long','anDonutCircle','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','uc_client_list','offsetWidth','ready','.sheet','\x20-\x20','round','matrixViewport','insertBefore','findIndex','1388163SJXuvd','var(--acc-green)','left','setItem','scrollTo','customConfirm','toString','</div><div\x20class=\x22rs-day-num\x22>','detNote','classList','day-column\x20','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','numeric','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','search','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','setBackgroundColor','setDate','setMonth','anEnd','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','offsetLeft','anTotalStats','timeColumn','#0a84ff','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','backgroundColor','event-card','forEach','parse','DOMContentLoaded','initData','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','planned','rs-time-btn','status','px\x200px','firstChild','calendar','map','backgroundPosition','ccText','ccTitle','loadLocal','flex','className','daysHeaderTrack','open','319419bSLgWw','clientId','rescheduleSheet','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getItem','now','user','stringify','constructor','client_load','disableVerticalSwipes','(((.+)+)+)+$','4874400EpKkxm','getHours','setHours','scroll','addEventListener','getMonth','getDay','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','scrollLeft','blocked-slot\x20stripe-bg','max','<div\x20class=\x22dch-day\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','gridColumns','querySelector','detTime','style','width','exceptions','none','toUpperCase','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','toLocaleString','split','toast','getFullYear','<div\x20class=\x22rs-day-name\x22>','push','filter','then','var(--acc-blue)','globalTimeLine','17070804DssvbP','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','analyticsSheet','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','done','offClick','block','calc(','T00:00:00','<span>','expand','start','.period-switch\x20.p-btn','POST','charAt','join','.day-column','setAttribute','.btn-cancel','timeLineBadge','today','day-off-overlay\x20stripe-bg','json','.day-col-header','colIndex','href','3004452TztQyt','Critical\x20TMA\x20Error:','dateStr','%\x20+\x202px)','data','keys','overlay','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','rsDatesTrack','\x20–∏–∑\x20','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','value','saveLocally','analyticsList','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','getMinutes','24OZjdfD','applyData','getAttribute','mini','ru-RU','time-label','createDocumentFragment','get_slots','client-stat-card','slice','</div>','px\x20-','sort','log','600','clients','all','headerMonth','div','color','week','display','4794515PYXfxG','onClick','getElementById','padStart'];a3_0xfaea=function(){return _0x46f75c;};return a3_0xfaea();}function scrollToToday(){const _0x592edb=getLocalDateStr(new Date());setTimeout(()=>{const _0x594d27=a3_0x1c10,_0x47a940=document[_0x594d27(0x1cf)](_0x594d27(0x146)+_0x592edb+'\x22]');if(_0x47a940){const _0x3bae0a=document['getElementById'](_0x594d27(0x182)),_0x248e62=_0x47a940['offsetLeft']-_0x3bae0a[_0x594d27(0x144)]/0x2+_0x47a940[_0x594d27(0x17d)]/0x2;_0x3bae0a[_0x594d27(0x189)]({'left':_0x248e62,'behavior':'auto'}),_0x3bae0a['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0xf22a3b=a3_0x1d5cab,_0x50d752=new Date(),_0x4ef45d=document[_0xf22a3b(0x131)](_0xf22a3b(0x1e0)),_0x1f6981=document[_0xf22a3b(0x131)](_0xf22a3b(0x1f4)),_0x551272=(_0x50d752['getHours']()*0x3c+_0x50d752[_0xf22a3b(0x118)]())/0x3c*GRID_H;_0x4ef45d['style'][_0xf22a3b(0x13c)]=_0x551272+'px',_0x4ef45d['style']['display']=_0xf22a3b(0x1e7),_0x1f6981[_0xf22a3b(0x1d1)][_0xf22a3b(0x13c)]=_0x551272+'px',_0x1f6981[_0xf22a3b(0x1d1)][_0xf22a3b(0x12e)]='block',_0x1f6981['textContent']=String(_0x50d752[_0xf22a3b(0x1c2)]())[_0xf22a3b(0x132)](0x2,'0')+':'+String(_0x50d752[_0xf22a3b(0x118)]())[_0xf22a3b(0x132)](0x2,'0');}function onScroll(){const _0x1469ed=a3_0x1d5cab,_0x2dcac5=document[_0x1469ed(0x131)]('matrixViewport'),_0x806056=document[_0x1469ed(0x14c)](_0x1469ed(0x1f8));for(let _0x4f8e10 of _0x806056)if(_0x4f8e10[_0x1469ed(0x19a)]>=_0x2dcac5[_0x1469ed(0x1c9)]){const _0x32517a=new Date(_0x4f8e10[_0x1469ed(0x11b)](_0x1469ed(0x14a)));document[_0x1469ed(0x131)](_0x1469ed(0x12a))['textContent']=_0x32517a[_0x1469ed(0x1d7)]('ru',{'month':_0x1469ed(0x179)})[_0x1469ed(0x1d5)]()+'\x20'+_0x32517a['getFullYear']();break;}}function showToast(_0x1abeb7){const _0x203070=a3_0x1d5cab,_0x25fa1d=document['getElementById'](_0x203070(0x1d9));_0x25fa1d[_0x203070(0x14d)]=_0x1abeb7,_0x25fa1d['classList'][_0x203070(0x134)](_0x203070(0x16c)),setTimeout(()=>_0x25fa1d[_0x203070(0x18e)][_0x203070(0x163)](_0x203070(0x16c)),0x7d0);}function handleInfiniteScroll(){const _0x39f2c3=a3_0x1d5cab,_0x25fc8e=document[_0x39f2c3(0x131)](_0x39f2c3(0x182)),_0x167a71=_0x25fc8e['scrollLeft'],_0x581d34=_0x25fc8e['scrollWidth'],_0x1d7c78=_0x25fc8e[_0x39f2c3(0x144)];if(_0x581d34-(_0x167a71+_0x1d7c78)<0x12c){const _0x1a22fa=endOffset;endOffset+=0xe,renderDayRange(_0x1a22fa+0x1,endOffset),reRenderBlocks();}if(_0x167a71<0x12c){const _0x44f8d9=startOffset;startOffset-=0xe,prependDays(startOffset,_0x44f8d9-0x1),_0x25fc8e[_0x39f2c3(0x1c9)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1de785,_0x208d92){const _0x2d2345=a3_0x1d5cab,_0x46a4b4=document['getElementById']('daysHeaderTrack'),_0x2ac7b1=document[_0x2d2345(0x131)](_0x2d2345(0x1ce)),_0x78fd75=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4fc9e0=new Date();_0x4fc9e0['setHours'](0x0,0x0,0x0,0x0);const _0x4e217b=getLocalDateStr(new Date()),_0x5222ee=document[_0x2d2345(0x11f)](),_0x1a424f=document[_0x2d2345(0x11f)]();for(let _0x3853be=_0x1de785;_0x3853be<=_0x208d92;_0x3853be++){const _0x45d9ef=new Date(_0x4fc9e0);_0x45d9ef[_0x2d2345(0x196)](_0x45d9ef[_0x2d2345(0x151)]()+_0x3853be);const _0x8224d8=getLocalDateStr(_0x45d9ef);let _0x3f3cda=_0x45d9ef[_0x2d2345(0x1c7)]()-0x1;if(_0x3f3cda===-0x1)_0x3f3cda=0x6;const _0x5caeb2=_0x8224d8===_0x4e217b,_0x57fd46=document[_0x2d2345(0x15f)](_0x2d2345(0x12b));_0x57fd46[_0x2d2345(0x1b2)]=_0x2d2345(0x14e)+(_0x5caeb2?'today':''),_0x57fd46[_0x2d2345(0x1f2)]('data-date',_0x8224d8),_0x57fd46[_0x2d2345(0x16b)]=_0x2d2345(0x1cc)+_0x78fd75[_0x3f3cda]+'</div><div\x20class=\x22dch-num\x22>'+_0x45d9ef[_0x2d2345(0x151)]()+'</div>',_0x5222ee[_0x2d2345(0x16f)](_0x57fd46);const _0x1b9349=document[_0x2d2345(0x15f)](_0x2d2345(0x12b));_0x1b9349[_0x2d2345(0x1b2)]=_0x2d2345(0x18f)+(_0x5caeb2?_0x2d2345(0x1f5):''),_0x1b9349[_0x2d2345(0x1f2)](_0x2d2345(0x14a),_0x8224d8),_0x1b9349[_0x2d2345(0x1f2)](_0x2d2345(0x139),_0x3f3cda),_0x1a424f['appendChild'](_0x1b9349);}_0x46a4b4['insertBefore'](_0x5222ee,_0x46a4b4[_0x2d2345(0x1aa)]),_0x2ac7b1[_0x2d2345(0x183)](_0x1a424f,_0x2ac7b1[_0x2d2345(0x1cf)](_0x2d2345(0x1f1)));}function hexToRgba(_0x598e78,_0x5a6b7e){const _0x1b82a7=a3_0x1d5cab;let _0x55e391;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x598e78))return _0x55e391=_0x598e78['substring'](0x1)['split'](''),_0x55e391['length']==0x3&&(_0x55e391=[_0x55e391[0x0],_0x55e391[0x0],_0x55e391[0x1],_0x55e391[0x1],_0x55e391[0x2],_0x55e391[0x2]]),_0x55e391='0x'+_0x55e391[_0x1b82a7(0x1f0)](''),'rgba('+[_0x55e391>>0x10&0xff,_0x55e391>>0x8&0xff,_0x55e391&0xff]['join'](',')+','+_0x5a6b7e+')';return _0x1b82a7(0x167)+_0x5a6b7e+')';}let confirmResolver=null;function showCustomConfirm(_0x4d3509,_0x5a9167,_0xeceb60=!![]){const _0x40f996=a3_0x1d5cab;document[_0x40f996(0x131)](_0x40f996(0x1af))['textContent']=_0x4d3509,document[_0x40f996(0x131)](_0x40f996(0x1ae))['textContent']=_0x5a9167;const _0x239558=document[_0x40f996(0x131)]('ccYesBtn');return _0xeceb60?(_0x239558[_0x40f996(0x1d1)][_0x40f996(0x12c)]='#ff453a',_0x239558[_0x40f996(0x1d1)][_0x40f996(0x174)]=_0x40f996(0x127)):(_0x239558[_0x40f996(0x1d1)][_0x40f996(0x12c)]=_0x40f996(0x19d),_0x239558['style'][_0x40f996(0x174)]=_0x40f996(0x127)),new Promise(_0x571e78=>{const _0x385640=_0x40f996;confirmResolver=_0x571e78,document['getElementById'](_0x385640(0x18a))['classList'][_0x385640(0x134)]('visible');});}function resolveCustomConfirm(_0x5ad909){const _0x2394dc=a3_0x1d5cab;document['getElementById']('customConfirm')[_0x2394dc(0x18e)][_0x2394dc(0x163)]('visible');if(confirmResolver)confirmResolver(_0x5ad909);}async function tryCancelCurrentSession(){const _0x3a0f9c=a3_0x1d5cab;if(!currentSession)return;const _0x3ca7e5=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x3a0f9c(0x190),!![]);if(!_0x3ca7e5)return;const _0x1231e6=currentSession;closeAllSheets(),sessions=sessions[_0x3a0f9c(0x1dd)](_0x190725=>_0x190725['id']!==_0x1231e6['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date['now']();try{const _0x21ba5d=window[_0x3a0f9c(0x133)]?.[_0x3a0f9c(0x160)],_0x106442=await fetch(API_URL,{'method':'POST','body':JSON[_0x3a0f9c(0x1bc)]({'action':_0x3a0f9c(0x178),'init_data':_0x21ba5d?.[_0x3a0f9c(0x1a4)]||'','coachId':_0x1231e6[_0x3a0f9c(0x13d)],'dateStr':_0x1231e6[_0x3a0f9c(0x10a)],'sessionId':_0x1231e6['id']})});if(_0x106442['ok'])DataManager['saveLocally']();}catch(_0x54dd93){showToast(_0x3a0f9c(0x1d6));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x43957c=a3_0x1d5cab;if(!currentSession)return;document[_0x43957c(0x131)](_0x43957c(0x157))[_0x43957c(0x18e)][_0x43957c(0x163)](_0x43957c(0x1b4)),document['getElementById'](_0x43957c(0x1b7))['classList'][_0x43957c(0x134)](_0x43957c(0x1b4));const _0x206146=document[_0x43957c(0x131)]('rsDatesTrack'),_0x41220a=document[_0x43957c(0x131)](_0x43957c(0x166));_0x206146[_0x43957c(0x16b)]='',_0x41220a[_0x43957c(0x16b)]='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x4ef9b4,_0x4dfbb0]=currentSession[_0x43957c(0x1ec)][_0x43957c(0x1d8)](':')[_0x43957c(0x1ac)](Number),[_0x271e2c,_0x5ca1e2]=currentSession[_0x43957c(0x137)][_0x43957c(0x1d8)](':')[_0x43957c(0x1ac)](Number),_0x2ccdde=_0x271e2c*0x3c+_0x5ca1e2-(_0x4ef9b4*0x3c+_0x4dfbb0);try{const _0x17b381=window['Telegram']?.[_0x43957c(0x160)],_0x1eeb72=await fetch(API_URL,{'method':'POST','body':JSON[_0x43957c(0x1bc)]({'action':_0x43957c(0x120),'coachId':currentSession[_0x43957c(0x13d)],'duration':_0x2ccdde,'init_data':_0x17b381?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x40a4de=await _0x1eeb72['json']();_0x40a4de['ok']&&_0x40a4de[_0x43957c(0x10c)]?(availableSlotsCache=_0x40a4de['data'],renderRescheduleDates()):_0x41220a[_0x43957c(0x16b)]=_0x43957c(0x149);}catch(_0x281873){_0x41220a[_0x43957c(0x16b)]=_0x43957c(0x199);}}function renderRescheduleDates(){const _0x269ee7=a3_0x1d5cab,_0x23aa68=document[_0x269ee7(0x131)](_0x269ee7(0x110));_0x23aa68['innerHTML']='';const _0x1137a8=Object[_0x269ee7(0x10d)](availableSlotsCache)[_0x269ee7(0x125)](),_0x41ffdf=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x1137a8[_0x269ee7(0x15a)]===0x0){document[_0x269ee7(0x131)]('rsSlotsGrid')['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x1137a8[_0x269ee7(0x1a1)]((_0xd65ffc,_0x58592c)=>{const _0x391866=_0x269ee7,_0x43cb4f=new Date(_0xd65ffc),_0x2fc088=_0x41ffdf[_0x43cb4f[_0x391866(0x1c7)]()],_0x260255=_0x43cb4f[_0x391866(0x151)](),_0x2a082d=document[_0x391866(0x15f)](_0x391866(0x12b));_0x2a082d['className']=_0x391866(0x136);if(_0x58592c===0x0)_0x2a082d[_0x391866(0x18e)][_0x391866(0x134)](_0x391866(0x145));_0x2a082d[_0x391866(0x16b)]=_0x391866(0x1db)+_0x2fc088+_0x391866(0x18c)+_0x260255+'</div>',_0x2a082d['onclick']=()=>selectRsDate(_0xd65ffc,_0x2a082d),_0x23aa68[_0x391866(0x16f)](_0x2a082d);}),selectRsDate(_0x1137a8[0x0],_0x23aa68[_0x269ee7(0x1aa)]);}function selectRsDate(_0x55b1c2,_0xac7cd5){const _0x94b49d=a3_0x1d5cab;selectedRsDate=_0x55b1c2,document[_0x94b49d(0x14c)]('.rs-date-chip')[_0x94b49d(0x1a1)](_0x15b94a=>_0x15b94a[_0x94b49d(0x18e)]['remove']('active'));if(_0xac7cd5)_0xac7cd5[_0x94b49d(0x18e)][_0x94b49d(0x134)](_0x94b49d(0x145));const _0x3202e7=document[_0x94b49d(0x131)]('rsSlotsGrid');_0x3202e7[_0x94b49d(0x16b)]='';const _0x557726=availableSlotsCache[_0x55b1c2]||[];if(_0x557726[_0x94b49d(0x15a)]===0x0){_0x3202e7[_0x94b49d(0x16b)]=_0x94b49d(0x149);return;}_0x557726[_0x94b49d(0x1a1)](_0xe23c0c=>{const _0x1a7972=_0x94b49d,_0x3c9d15=document['createElement'](_0x1a7972(0x142));_0x3c9d15[_0x1a7972(0x1b2)]=_0x1a7972(0x1a7),_0x3c9d15[_0x1a7972(0x14d)]=_0xe23c0c,_0x3c9d15['onclick']=()=>confirmReschedule(_0xe23c0c),_0x3202e7[_0x1a7972(0x16f)](_0x3c9d15);});}async function confirmReschedule(_0x17ed3c){const _0x17ddee=a3_0x1d5cab,_0x320035=new Date(selectedRsDate),_0x4eba1e=_0x320035[_0x17ddee(0x155)](_0x17ddee(0x11d),{'day':_0x17ddee(0x191),'month':'long'}),_0x986b8=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0x4eba1e+'\x20–≤\x20'+_0x17ed3c+'?',![]);if(!_0x986b8)return;closeAllSheets(),showToast(_0x17ddee(0x150)),lastUserActionTime=Date[_0x17ddee(0x1ba)]();const _0x322cb6=currentSession[_0x17ddee(0x10a)],_0x5d436d=currentSession['id'],[_0x734b58,_0x27ac94]=currentSession['start']['split'](':')[_0x17ddee(0x1ac)](Number),[_0x56167a,_0x1d8593]=currentSession[_0x17ddee(0x137)][_0x17ddee(0x1d8)](':')[_0x17ddee(0x1ac)](Number),_0x13ab3a=_0x56167a*0x3c+_0x1d8593-(_0x734b58*0x3c+_0x27ac94),[_0x36ee96,_0x58981f]=_0x17ed3c['split'](':')[_0x17ddee(0x1ac)](Number),_0x1f94bf=_0x36ee96*0x3c+_0x58981f+_0x13ab3a,_0x2e8424=Math['floor'](_0x1f94bf/0x3c),_0x5d19f4=_0x1f94bf%0x3c,_0xfa74a4=String(_0x2e8424)[_0x17ddee(0x132)](0x2,'0')+':'+String(_0x5d19f4)[_0x17ddee(0x132)](0x2,'0'),_0x1383eb=sessions[_0x17ddee(0x184)](_0x4c275c=>_0x4c275c['id']===_0x5d436d);_0x1383eb!==-0x1&&(sessions[_0x1383eb]['dateStr']=selectedRsDate,sessions[_0x1383eb][_0x17ddee(0x1ec)]=_0x17ed3c,sessions[_0x1383eb][_0x17ddee(0x137)]=_0xfa74a4,reRenderBlocks());try{const _0x165ff9=window['Telegram']?.['WebApp'],_0x480906=await fetch(API_URL,{'method':_0x17ddee(0x1ee),'body':JSON[_0x17ddee(0x1bc)]({'action':_0x17ddee(0x141),'init_data':_0x165ff9?.[_0x17ddee(0x1a4)]||'','oldSessionId':_0x5d436d,'oldDate':_0x322cb6,'newDate':selectedRsDate,'newTime':_0x17ed3c,'coachId':currentSession[_0x17ddee(0x13d)]})}),_0x196cb3=await _0x480906[_0x17ddee(0x1f7)]();!_0x196cb3['ok']?(showToast(_0x17ddee(0x112)),DataManager['syncLoad']()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x17ddee(0x115)]());}catch(_0x736934){showToast(_0x17ddee(0x1d6));}}document[a3_0x1d5cab(0x1c5)](a3_0x1d5cab(0x1a3),init);