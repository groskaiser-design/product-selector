const a3_0x2dad4e=a3_0x15c7;(function(_0x2a53d1,_0x582965){const _0x4d4052=a3_0x15c7,_0x5949a6=_0x2a53d1();while(!![]){try{const _0x336ab9=parseInt(_0x4d4052(0x171))/0x1+-parseInt(_0x4d4052(0x1cb))/0x2+-parseInt(_0x4d4052(0x12b))/0x3+-parseInt(_0x4d4052(0x1e3))/0x4*(-parseInt(_0x4d4052(0x131))/0x5)+-parseInt(_0x4d4052(0x1ea))/0x6*(-parseInt(_0x4d4052(0x20f))/0x7)+-parseInt(_0x4d4052(0x179))/0x8*(-parseInt(_0x4d4052(0x1a4))/0x9)+-parseInt(_0x4d4052(0x141))/0xa;if(_0x336ab9===_0x582965)break;else _0x5949a6['push'](_0x5949a6['shift']());}catch(_0x44b264){_0x5949a6['push'](_0x5949a6['shift']());}}}(a3_0x594a,0x86df2));const APP_VERSION=a3_0x2dad4e(0x18f),API_URL=a3_0x2dad4e(0x1d7),GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS=a3_0x2dad4e(0x162),KEY_CLIENTS=a3_0x2dad4e(0x1fb);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x2dad4e(0x157),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x3bd953=a3_0x2dad4e,_0x41ec1e=(function(){let _0x5b9d63=!![];return function(_0x1e1755,_0x4d52a1){const _0x211ece=_0x5b9d63?function(){const _0x52f63b=a3_0x15c7;if(_0x4d52a1){const _0x34ff05=_0x4d52a1[_0x52f63b(0x140)](_0x1e1755,arguments);return _0x4d52a1=null,_0x34ff05;}}:function(){};return _0x5b9d63=![],_0x211ece;};}()),_0x1568f4=_0x41ec1e(this,function(){const _0x59541d=a3_0x15c7;return _0x1568f4['toString']()['search'](_0x59541d(0x1eb))[_0x59541d(0x13e)]()['constructor'](_0x1568f4)[_0x59541d(0x137)](_0x59541d(0x1eb));});_0x1568f4();try{const _0x42dd30=window[_0x3bd953(0x13c)]?.[_0x3bd953(0x187)];if(!_0x42dd30)return;_0x42dd30[_0x3bd953(0x125)](),_0x42dd30['expand']();try{_0x42dd30[_0x3bd953(0x20b)](_0x3bd953(0x14d)),_0x42dd30[_0x3bd953(0x136)]&&_0x42dd30[_0x3bd953(0x136)](_0x3bd953(0x14d));}catch(_0x589cb6){console[_0x3bd953(0x1d1)]('Error\x20setting\x20color:',_0x589cb6);}try{_0x42dd30[_0x3bd953(0x18b)]&&(_0x42dd30['BackButton'][_0x3bd953(0x1f8)](),_0x42dd30[_0x3bd953(0x18b)][_0x3bd953(0x127)](),_0x42dd30[_0x3bd953(0x18b)]['onClick'](function(){const _0x433882=_0x3bd953;window[_0x433882(0x13d)]['href']='router.html';}));}catch(_0x33319f){console[_0x3bd953(0x1d1)](_0x3bd953(0x1e6),_0x33319f);}try{if(_0x42dd30[_0x3bd953(0x153)])_0x42dd30[_0x3bd953(0x153)]();}catch(_0x2dee5b){}}catch(_0x42569f){console[_0x3bd953(0x12c)]('Critical\x20TMA\x20Error:',_0x42569f);}}());function isAdmin(){const _0x1327fb=a3_0x2dad4e;try{const _0x295047=Number(window[_0x1327fb(0x13c)]?.[_0x1327fb(0x187)]?.[_0x1327fb(0x13f)]?.[_0x1327fb(0x174)]?.['id']);return _0x295047===0xbaf7174;}catch(_0x2590b4){return![];}}const DataManager={'saveLocally'(){const _0x49252b=a3_0x2dad4e;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x49252b(0x203)](sessions)),localStorage[_0x49252b(0x16a)](KEY_CLIENTS,JSON[_0x49252b(0x203)](clients)),localStorage[_0x49252b(0x16a)](KEY_SETTINGS,JSON[_0x49252b(0x203)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x42a8c5){}},'loadLocal'(){const _0x4c6eac=a3_0x2dad4e;try{const _0x59e58d=localStorage['getItem'](KEY_SESSIONS);if(_0x59e58d)sessions=JSON[_0x4c6eac(0x1be)](_0x59e58d);const _0x32f5e3=localStorage[_0x4c6eac(0x14f)](KEY_CLIENTS);if(_0x32f5e3)clients=JSON[_0x4c6eac(0x1be)](_0x32f5e3);const _0x41443a=localStorage['getItem'](KEY_SETTINGS);if(_0x41443a){const _0x5a37e1=JSON[_0x4c6eac(0x1be)](_0x41443a);if(_0x5a37e1[_0x4c6eac(0x1aa)])availabilityPattern=_0x5a37e1[_0x4c6eac(0x1aa)];if(_0x5a37e1[_0x4c6eac(0x1a0)])specialRanges=_0x5a37e1['ranges'];if(_0x5a37e1[_0x4c6eac(0x17f)])dateExceptions=_0x5a37e1[_0x4c6eac(0x17f)];}}catch(_0x1d0e72){}},async 'syncLoad'(){const _0x1f0414=a3_0x2dad4e,_0x4fa5e6=new Date(),_0x2bf63f=_0x4fa5e6['getFullYear']()+'-'+String(_0x4fa5e6[_0x1f0414(0x184)]()+0x1)[_0x1f0414(0x1e9)](0x2,'0'),_0x53cb1b=new Date(_0x4fa5e6);_0x53cb1b[_0x1f0414(0x197)](_0x4fa5e6['getMonth']()+0x1);const _0x4473f1=_0x53cb1b[_0x1f0414(0x12a)]()+'-'+String(_0x53cb1b[_0x1f0414(0x184)]()+0x1)[_0x1f0414(0x1e9)](0x2,'0'),_0x46e696=Date['now']();try{const _0x5b3882=window['Telegram']?.['WebApp'],_0x3b7772=_0x5b3882?.[_0x1f0414(0x1c5)]||'',[_0x57e0e0,_0x5d3cbb]=await Promise[_0x1f0414(0x1a2)]([fetch(API_URL,{'method':_0x1f0414(0x201),'body':JSON[_0x1f0414(0x203)]({'action':_0x1f0414(0x1db),'init_data':_0x3b7772,'month_str':_0x2bf63f})})['then'](_0x2ee40f=>_0x2ee40f['json']()),fetch(API_URL,{'method':_0x1f0414(0x201),'body':JSON[_0x1f0414(0x203)]({'action':_0x1f0414(0x1db),'init_data':_0x3b7772,'month_str':_0x4473f1})})[_0x1f0414(0x146)](_0x385d2f=>_0x385d2f[_0x1f0414(0x16f)]())]);if(lastUserActionTime>_0x46e696){console['log'](_0x1f0414(0x168));return;}if(_0x57e0e0['ok'])this[_0x1f0414(0x161)](_0x57e0e0['data'],_0x2bf63f);if(_0x5d3cbb['ok'])this['applyData'](_0x5d3cbb[_0x1f0414(0x138)],_0x4473f1);this[_0x1f0414(0x195)]();}catch(_0x540afe){}},'applyData'(_0x4438aa,_0x320468){const _0xfcad9e=a3_0x2dad4e;if(!_0x4438aa)return;if(_0x4438aa['settings']){if(_0x4438aa[_0xfcad9e(0x16b)]['pattern'])availabilityPattern=_0x4438aa[_0xfcad9e(0x16b)][_0xfcad9e(0x1aa)];if(_0x4438aa[_0xfcad9e(0x16b)][_0xfcad9e(0x1a0)])specialRanges=_0x4438aa['settings'][_0xfcad9e(0x1a0)];if(_0x4438aa[_0xfcad9e(0x16b)][_0xfcad9e(0x17f)])dateExceptions=_0x4438aa['settings'][_0xfcad9e(0x17f)];}if(_0x4438aa[_0xfcad9e(0x1ff)]&&Array['isArray'](_0x4438aa[_0xfcad9e(0x1ff)]))clients=_0x4438aa[_0xfcad9e(0x1ff)];_0x4438aa[_0xfcad9e(0x1ed)]&&(coachProfiles={...coachProfiles,..._0x4438aa[_0xfcad9e(0x1ed)]}),_0x4438aa['calendar']&&(sessions=sessions[_0xfcad9e(0x189)](_0x3f8398=>!_0x3f8398[_0xfcad9e(0x190)][_0xfcad9e(0x169)](_0x320468)),Object[_0xfcad9e(0x130)](_0x4438aa['calendar'])[_0xfcad9e(0x17d)](_0x5f2d65=>{const _0x396b38=_0xfcad9e,_0x3dcac2=_0x4438aa['calendar'][_0x5f2d65];_0x3dcac2[_0x396b38(0x17d)](_0x3a07b2=>{const _0x3a12d6=_0x396b38;sessions[_0x3a12d6(0x181)]({'id':_0x3a07b2['i'],'clientId':_0x3a07b2['c'],'coachId':_0x3a07b2[_0x3a12d6(0x188)],'dateStr':_0x320468+'-'+_0x5f2d65['padStart'](0x2,'0'),'start':_0x3a07b2['s'],'end':_0x3a07b2['e'],'note':_0x3a07b2['n']||'','status':_0x3a07b2['st']||'planned','seriesId':_0x3a07b2['sid']});});})),reRenderBlocks();}};function init(){const _0x4f83b7=a3_0x2dad4e;DataManager[_0x4f83b7(0x1a8)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x4f83b7(0x204)]('matrixViewport')[_0x4f83b7(0x152)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x4f83b7(0x164)]();}function renderTimeColumn(){const _0x2ca056=a3_0x2dad4e,_0x1131dd=document[_0x2ca056(0x204)](_0x2ca056(0x1fd)),_0x2f78c1=document[_0x2ca056(0x204)](_0x2ca056(0x208));_0x1131dd[_0x2ca056(0x11a)]='',_0x1131dd[_0x2ca056(0x211)](_0x2f78c1);for(let _0x3500c0=0x0;_0x3500c0<0x18;_0x3500c0++){const _0x804198=document['createElement'](_0x2ca056(0x1fe));_0x804198[_0x2ca056(0x165)]=_0x2ca056(0x11f);if(_0x3500c0>0x0)_0x804198['innerHTML']='<span>'+String(_0x3500c0)[_0x2ca056(0x1e9)](0x2,'0')+_0x2ca056(0x135);_0x1131dd[_0x2ca056(0x211)](_0x804198);}}function renderDayRange(_0x26f06f,_0x281b8c){const _0x1c370e=a3_0x2dad4e,_0x3705ca=document[_0x1c370e(0x204)](_0x1c370e(0x19e)),_0x11515f=document[_0x1c370e(0x204)](_0x1c370e(0x185)),_0x49d4fc=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x361a1e=new Date();_0x361a1e[_0x1c370e(0x1fc)](0x0,0x0,0x0,0x0);const _0x3cb127=getLocalDateStr(new Date());for(let _0x20997e=_0x26f06f;_0x20997e<=_0x281b8c;_0x20997e++){const _0x257601=new Date(_0x361a1e);_0x257601['setDate'](_0x257601[_0x1c370e(0x20d)]()+_0x20997e);const _0x30179a=getLocalDateStr(_0x257601);let _0x8b43d6=_0x257601['getDay']()-0x1;if(_0x8b43d6===-0x1)_0x8b43d6=0x6;const _0x42f8f7=_0x30179a===_0x3cb127,_0x4865d0=document[_0x1c370e(0x133)](_0x1c370e(0x1fe));_0x4865d0[_0x1c370e(0x165)]=_0x1c370e(0x1e1)+(_0x42f8f7?_0x1c370e(0x186):''),_0x4865d0[_0x1c370e(0x206)]('data-date',_0x30179a),_0x4865d0[_0x1c370e(0x11a)]='<div\x20class=\x22dch-day\x22>'+_0x49d4fc[_0x8b43d6]+_0x1c370e(0x1de)+_0x257601[_0x1c370e(0x20d)]()+'</div>',_0x3705ca[_0x1c370e(0x211)](_0x4865d0);const _0x5a95c3=document[_0x1c370e(0x133)](_0x1c370e(0x1fe));_0x5a95c3[_0x1c370e(0x165)]=_0x1c370e(0x1cc)+(_0x42f8f7?_0x1c370e(0x186):''),_0x5a95c3[_0x1c370e(0x206)](_0x1c370e(0x163),_0x30179a),_0x5a95c3[_0x1c370e(0x206)](_0x1c370e(0x1c8),_0x8b43d6),_0x11515f[_0x1c370e(0x211)](_0x5a95c3);}}function reRenderBlocks(){const _0x1cd33a=a3_0x2dad4e;document['querySelectorAll']('.day-column')[_0x1cd33a(0x17d)](_0x55781a=>{const _0x47f3c2=_0x1cd33a;_0x55781a[_0x47f3c2(0x19b)](_0x47f3c2(0x15f))[_0x47f3c2(0x17d)](_0x30e031=>_0x30e031[_0x47f3c2(0x180)]());const _0x26f4b9=_0x55781a[_0x47f3c2(0x145)]('data-date'),_0x7f2c0d=parseInt(_0x55781a['getAttribute'](_0x47f3c2(0x1c8))),_0x2cae2e=Math['round'](_0x55781a[_0x47f3c2(0x14e)]);(availabilityPattern[_0x7f2c0d]||[])[_0x47f3c2(0x17d)](_0x3ce5e8=>{const _0x4d9e9a=_0x47f3c2,_0x2e76b3=document[_0x4d9e9a(0x133)](_0x4d9e9a(0x1fe));_0x2e76b3[_0x4d9e9a(0x165)]=_0x4d9e9a(0x1a7),_0x2e76b3[_0x4d9e9a(0x160)][_0x4d9e9a(0x1d5)]=_0x3ce5e8*GRID_H+'px',_0x2e76b3['style']['backgroundPosition']='-'+_0x2cae2e+'px\x20-'+_0x3ce5e8*GRID_H+'px',_0x55781a[_0x4d9e9a(0x211)](_0x2e76b3);});if(specialRanges[_0x47f3c2(0x123)]>0x0){const _0x255186=new Date(_0x26f4b9+'T00:00:00')[_0x47f3c2(0x166)](),_0x150be8=new Date(_0x26f4b9+_0x47f3c2(0x11e))[_0x47f3c2(0x166)]();specialRanges[_0x47f3c2(0x17d)](_0x38e9fe=>{const _0x427fa9=_0x47f3c2,_0x5780ad=new Date(_0x38e9fe['start'])[_0x427fa9(0x166)](),_0x2dd34f=new Date(_0x38e9fe[_0x427fa9(0x13b)])['getTime'](),_0x1b29a3=Math['max'](_0x255186,_0x5780ad),_0x2f997c=Math['min'](_0x150be8,_0x2dd34f);if(_0x1b29a3<_0x2f997c){const _0x275459=(_0x1b29a3-_0x255186)/0x36ee80*GRID_H,_0x22b72a=(_0x2f997c-_0x1b29a3)/0x36ee80*GRID_H,_0xe788f4=document[_0x427fa9(0x133)]('div');_0x22b72a>=23.5*GRID_H?(_0xe788f4[_0x427fa9(0x165)]=_0x427fa9(0x1c1),_0xe788f4[_0x427fa9(0x160)][_0x427fa9(0x167)]='-'+_0x2cae2e+'px\x200px'):(_0xe788f4[_0x427fa9(0x165)]=_0x427fa9(0x12f),_0xe788f4['style'][_0x427fa9(0x1d5)]=_0x275459+'px',_0xe788f4[_0x427fa9(0x160)]['height']=_0x22b72a+'px',_0xe788f4[_0x427fa9(0x160)][_0x427fa9(0x167)]='-'+_0x2cae2e+'px\x20-'+_0x275459+'px'),_0x55781a['appendChild'](_0xe788f4);}});}renderEventsForColumn(_0x55781a,_0x26f4b9);});}function renderEventsForColumn(_0x5cc295,_0x53889b){const _0x3cdecf=a3_0x2dad4e,_0x57e1ad=sessions['filter'](_0x53f498=>_0x53f498['dateStr']===_0x53889b),_0x103f82=_0x57e1ad[_0x3cdecf(0x143)](_0x25fe3f=>{const _0x43cd5d=_0x3cdecf,[_0x3571f3,_0xc1b89f]=_0x25fe3f[_0x43cd5d(0x1cd)][_0x43cd5d(0x1a9)](':')[_0x43cd5d(0x143)](Number),[_0x6056d4,_0x41ba09]=_0x25fe3f['end'][_0x43cd5d(0x1a9)](':')[_0x43cd5d(0x143)](Number);return{'data':_0x25fe3f,'start':_0x3571f3*0x3c+_0xc1b89f,'end':_0x6056d4*0x3c+_0x41ba09,'colIndex':0x0};});_0x103f82['sort']((_0x25132e,_0x3e9e58)=>_0x25132e['start']-_0x3e9e58[_0x3cdecf(0x1cd)]||_0x3e9e58[_0x3cdecf(0x13b)]-_0x3e9e58['start']-(_0x25132e[_0x3cdecf(0x13b)]-_0x25132e['start']));const _0x50db90=[];_0x103f82[_0x3cdecf(0x17d)](_0x4ac072=>{const _0x20ef21=_0x3cdecf;let _0x1dfd29=![];for(let _0x51f262=0x0;_0x51f262<_0x50db90[_0x20ef21(0x123)];_0x51f262++){const _0x4e5245=_0x50db90[_0x51f262];if(_0x4ac072[_0x20ef21(0x1cd)]>=_0x4e5245[_0x4e5245[_0x20ef21(0x123)]-0x1][_0x20ef21(0x13b)]){_0x4e5245[_0x20ef21(0x181)](_0x4ac072),_0x4ac072[_0x20ef21(0x132)]=_0x51f262,_0x1dfd29=!![];break;}}!_0x1dfd29&&(_0x50db90['push']([_0x4ac072]),_0x4ac072[_0x20ef21(0x132)]=_0x50db90[_0x20ef21(0x123)]-0x1);}),_0x103f82[_0x3cdecf(0x17d)](_0x36e6f1=>{const _0x54c9dd=_0x3cdecf;let _0x166c4a=0x0;_0x103f82[_0x54c9dd(0x17d)](_0x4ada05=>{const _0x95e121=_0x54c9dd;if(Math[_0x95e121(0x1ad)](_0x36e6f1['start'],_0x4ada05['start'])<Math[_0x95e121(0x192)](_0x36e6f1[_0x95e121(0x13b)],_0x4ada05['end'])&&_0x4ada05[_0x95e121(0x132)]>_0x166c4a)_0x166c4a=_0x4ada05[_0x95e121(0x132)];});const _0x2a7657=_0x166c4a+0x1,_0x43b116=0x64/_0x2a7657,_0x4afac5=_0x36e6f1[_0x54c9dd(0x132)]*_0x43b116,_0x43e467=document[_0x54c9dd(0x133)](_0x54c9dd(0x1fe)),_0x3df9b5=_0x36e6f1['data'];let _0x5608de=_0x54c9dd(0x144);if(clients&&clients[_0x54c9dd(0x123)]>0x0){const _0x2aec85=clients[_0x54c9dd(0x1fa)](_0x5095b6=>String(_0x5095b6['id'])===String(_0x3df9b5['clientId']));if(_0x2aec85&&_0x2aec85[_0x54c9dd(0x159)])_0x5608de=_0x2aec85['color'];}const _0x410c65=_0x3df9b5[_0x54c9dd(0x19c)]===_0x54c9dd(0x1a6),_0x1017a6=_0x410c65?0x1:0.45;_0x43e467[_0x54c9dd(0x165)]=_0x54c9dd(0x1ee)+(_0x410c65?_0x54c9dd(0x19f):''),_0x43e467[_0x54c9dd(0x160)][_0x54c9dd(0x1a5)]=hexToRgba(_0x5608de,_0x1017a6),_0x43e467[_0x54c9dd(0x160)][_0x54c9dd(0x1ce)]=_0x5608de;const _0x15a4ec=_0x36e6f1[_0x54c9dd(0x1cd)]/0x3c*GRID_H,_0x209f0b=(_0x36e6f1[_0x54c9dd(0x13b)]-_0x36e6f1['start'])/0x3c*GRID_H;_0x43e467[_0x54c9dd(0x160)][_0x54c9dd(0x1d5)]=_0x15a4ec+'px',_0x43e467[_0x54c9dd(0x160)]['height']=Math['max'](_0x209f0b,0x14)+'px',_0x43e467['style'][_0x54c9dd(0x173)]=_0x54c9dd(0x1d4)+_0x43b116+_0x54c9dd(0x1e5),_0x43e467[_0x54c9dd(0x160)][_0x54c9dd(0x15b)]=_0x54c9dd(0x1d4)+_0x4afac5+_0x54c9dd(0x1b4),_0x43e467[_0x54c9dd(0x160)][_0x54c9dd(0x134)]=0xa+_0x36e6f1[_0x54c9dd(0x132)];if(_0x43b116<0x55)_0x43e467[_0x54c9dd(0x1dc)][_0x54c9dd(0x1f9)]('mini');let _0x4923cd='';if(_0x3df9b5[_0x54c9dd(0x1c6)])_0x4923cd+=_0x54c9dd(0x1bc);if(_0x410c65)_0x4923cd+=_0x54c9dd(0x1d6);_0x43e467[_0x54c9dd(0x11a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x3df9b5['start']+_0x54c9dd(0x1df)+_0x3df9b5['end']+_0x54c9dd(0x212)+_0x4923cd+_0x54c9dd(0x175),_0x43e467[_0x54c9dd(0x1f2)]=_0x2b5255=>{const _0x4b928d=_0x54c9dd;_0x2b5255[_0x4b928d(0x17a)](),openDetails(_0x3df9b5);},_0x5cc295[_0x54c9dd(0x211)](_0x43e467);});}function openAnalytics(){const _0x497abb=a3_0x2dad4e,_0x197bc4=document[_0x497abb(0x182)](_0x497abb(0x14b));setAnalyticsPeriod(_0x497abb(0x157),_0x197bc4),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x22c660,_0x4ee06a){const _0x57cb6c=a3_0x2dad4e;currentAnPeriod=_0x22c660,document[_0x57cb6c(0x19b)]('.period-switch\x20.p-btn')[_0x57cb6c(0x17d)](_0x4c8dbe=>_0x4c8dbe[_0x57cb6c(0x1dc)][_0x57cb6c(0x180)](_0x57cb6c(0x210)));if(_0x4ee06a)_0x4ee06a['classList'][_0x57cb6c(0x1f9)](_0x57cb6c(0x210));const _0x2eed96=document[_0x57cb6c(0x204)](_0x57cb6c(0x1d2));_0x2eed96[_0x57cb6c(0x160)]['display']=_0x22c660===_0x57cb6c(0x172)?_0x57cb6c(0x1dd):_0x57cb6c(0x17b);const _0xb02e9e=new Date();let _0x5b0768=new Date(),_0x291ce0=new Date();if(_0x22c660===_0x57cb6c(0x157))_0x5b0768=getStartOfWeek(_0xb02e9e),_0x291ce0=new Date(_0x5b0768),_0x291ce0[_0x57cb6c(0x14c)](_0x291ce0[_0x57cb6c(0x20d)]()+0x6);else{if(_0x22c660===_0x57cb6c(0x1bb))_0x5b0768=new Date(_0xb02e9e[_0x57cb6c(0x12a)](),_0xb02e9e['getMonth'](),0x1),_0x291ce0=new Date(_0xb02e9e[_0x57cb6c(0x12a)](),_0xb02e9e[_0x57cb6c(0x184)]()+0x1,0x0);else{!document[_0x57cb6c(0x204)](_0x57cb6c(0x12e))[_0x57cb6c(0x151)]&&(document['getElementById'](_0x57cb6c(0x12e))[_0x57cb6c(0x151)]=getLocalDateStr(_0xb02e9e),document[_0x57cb6c(0x204)](_0x57cb6c(0x124))[_0x57cb6c(0x151)]=getLocalDateStr(_0xb02e9e));refreshAnalytics();return;}}document[_0x57cb6c(0x204)](_0x57cb6c(0x12e))[_0x57cb6c(0x151)]=getLocalDateStr(_0x5b0768),document[_0x57cb6c(0x204)](_0x57cb6c(0x124))[_0x57cb6c(0x151)]=getLocalDateStr(_0x291ce0),refreshAnalytics();}function refreshAnalytics(){const _0xc8363f=a3_0x2dad4e,_0x2b5dae=document[_0xc8363f(0x204)](_0xc8363f(0x12e))[_0xc8363f(0x151)],_0x4284b9=document[_0xc8363f(0x204)]('anEnd')[_0xc8363f(0x151)];if(!_0x2b5dae||!_0x4284b9)return;const _0x1d3f8d=sessions[_0xc8363f(0x189)](_0x39bb04=>_0x39bb04['dateStr']>=_0x2b5dae&&_0x39bb04[_0xc8363f(0x190)]<=_0x4284b9&&_0x39bb04[_0xc8363f(0x19c)]!==_0xc8363f(0x17e)),_0x5f4b72=_0x1d3f8d[_0xc8363f(0x123)],_0x4e5b98=_0x1d3f8d['filter'](_0x1220e8=>_0x1220e8[_0xc8363f(0x19c)]==='completed')[_0xc8363f(0x123)],_0x3de7f8=_0x5f4b72>0x0?Math[_0xc8363f(0x1d9)](_0x4e5b98/_0x5f4b72*0x64):0x0;document[_0xc8363f(0x204)](_0xc8363f(0x1af))[_0xc8363f(0x19d)]=_0x3de7f8+'%',document[_0xc8363f(0x204)](_0xc8363f(0x202))[_0xc8363f(0x19d)]=_0x4e5b98+'\x20–∏–∑\x20'+_0x5f4b72+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x97ba30=document[_0xc8363f(0x204)](_0xc8363f(0x1c4)),_0x1f3977=0x2*Math['PI']*0x23,_0x3c2393=_0x1f3977-_0x3de7f8/0x64*_0x1f3977;_0x97ba30[_0xc8363f(0x160)][_0xc8363f(0x1c0)]=_0x3c2393;const _0x4b687e={};_0x1d3f8d['forEach'](_0x3979e5=>{const _0x278771=_0xc8363f,_0x3c1617=_0x3979e5['coachId']||'Unknown';if(!_0x4b687e[_0x3c1617]){const _0xad8783='#'+_0x3c1617[_0x278771(0x13e)]()['substr'](0x0,0x6);_0x4b687e[_0x3c1617]={'total':0x0,'done':0x0,'color':_0xad8783};}_0x4b687e[_0x3c1617][_0x278771(0x1b2)]++;if(_0x3979e5[_0x278771(0x19c)]==='completed')_0x4b687e[_0x3c1617][_0x278771(0x1e8)]++;});const _0x133b3f=document[_0xc8363f(0x204)]('analyticsList');_0x133b3f[_0xc8363f(0x11a)]='';const _0x42d4fe=Object[_0xc8363f(0x16e)](_0x4b687e)[_0xc8363f(0x1c9)]((_0x45d64a,_0x245343)=>_0x245343[0x1][_0xc8363f(0x1b2)]-_0x45d64a[0x1]['total']);if(_0x42d4fe[_0xc8363f(0x123)]===0x0){_0x133b3f[_0xc8363f(0x11a)]=_0xc8363f(0x1b3);return;}_0x42d4fe['forEach'](([_0x222824,_0x422d2d])=>{const _0x4bf2f6=_0xc8363f,_0x3de2f6=Math[_0x4bf2f6(0x1d9)](_0x422d2d[_0x4bf2f6(0x1e8)]/_0x422d2d[_0x4bf2f6(0x1b2)]*0x64),_0x221b6b=document[_0x4bf2f6(0x133)](_0x4bf2f6(0x1fe));_0x221b6b['className']=_0x4bf2f6(0x176),_0x221b6b[_0x4bf2f6(0x160)][_0x4bf2f6(0x1ce)]=_0x422d2d['color'],_0x221b6b[_0x4bf2f6(0x11a)]=_0x4bf2f6(0x15e)+_0x222824['substr'](0x0,0x5)+_0x4bf2f6(0x1ef)+_0x422d2d[_0x4bf2f6(0x1e8)]+_0x4bf2f6(0x1ac)+_0x422d2d['total']+_0x4bf2f6(0x191)+_0x3de2f6+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x133b3f[_0x4bf2f6(0x211)](_0x221b6b);});}function openDetails(_0x160702){const _0x4df0cb=a3_0x2dad4e;currentSession=_0x160702;const _0x1f074a=new Date(_0x160702[_0x4df0cb(0x190)]),_0x1a8d56=_0x1f074a[_0x4df0cb(0x14a)](_0x4df0cb(0x1f0),{'weekday':_0x4df0cb(0x18d),'day':_0x4df0cb(0x177),'month':_0x4df0cb(0x18d)});document['getElementById'](_0x4df0cb(0x147))['textContent']=_0x1a8d56[_0x4df0cb(0x1f3)](0x0)[_0x4df0cb(0x1e7)]()+_0x1a8d56[_0x4df0cb(0x11d)](0x1),document[_0x4df0cb(0x204)](_0x4df0cb(0x148))[_0x4df0cb(0x19d)]=_0x160702['start']+_0x4df0cb(0x1df)+_0x160702[_0x4df0cb(0x13b)],document[_0x4df0cb(0x204)](_0x4df0cb(0x1e0))[_0x4df0cb(0x19d)]=_0x160702[_0x4df0cb(0x1f1)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x33936d=document[_0x4df0cb(0x204)](_0x4df0cb(0x213)),_0x4e184b=document[_0x4df0cb(0x204)](_0x4df0cb(0x1d0)),_0x3df13d=_0x4e184b['querySelector'](_0x4df0cb(0x18a)),_0x539f71=_0x4e184b['querySelector'](_0x4df0cb(0x1ec)),_0x28c45f=document['getElementById'](_0x4df0cb(0x1b7));if(_0x160702['status']===_0x4df0cb(0x1a6))_0x33936d[_0x4df0cb(0x19d)]=_0x4df0cb(0x128),_0x33936d[_0x4df0cb(0x160)]['color']=_0x4df0cb(0x1f6),_0x4e184b[_0x4df0cb(0x160)][_0x4df0cb(0x19a)]=_0x4df0cb(0x17b);else{_0x33936d['textContent']=_0x4df0cb(0x1b5),_0x33936d['style'][_0x4df0cb(0x159)]=_0x4df0cb(0x1c2),_0x4e184b[_0x4df0cb(0x160)][_0x4df0cb(0x19a)]='block';const _0x29a985=new Date(_0x160702[_0x4df0cb(0x190)]+'T'+_0x160702[_0x4df0cb(0x1cd)]),_0x224750=new Date(),_0x2eff9b=(_0x29a985-_0x224750)/(0x3e8*0x3c*0x3c),_0x1ad039=coachProfiles[_0x160702[_0x4df0cb(0x1a3)]]&&coachProfiles[_0x160702[_0x4df0cb(0x1a3)]][_0x4df0cb(0x198)]?parseInt(coachProfiles[_0x160702['coachId']][_0x4df0cb(0x198)]):0x18;if(_0x1ad039===0x0||_0x2eff9b>=_0x1ad039)_0x3df13d[_0x4df0cb(0x160)][_0x4df0cb(0x19a)]='block',_0x539f71[_0x4df0cb(0x160)][_0x4df0cb(0x19a)]=_0x4df0cb(0x1cf),_0x28c45f[_0x4df0cb(0x160)][_0x4df0cb(0x19a)]='none';else{_0x3df13d[_0x4df0cb(0x160)][_0x4df0cb(0x19a)]=_0x4df0cb(0x17b),_0x539f71['style'][_0x4df0cb(0x19a)]=_0x4df0cb(0x17b),_0x28c45f[_0x4df0cb(0x160)][_0x4df0cb(0x19a)]=_0x4df0cb(0x1cf);let _0x4d2e13=_0x1ad039===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x4df0cb(0x1b8)+_0x1ad039+_0x4df0cb(0x209);_0x28c45f['textContent']=_0x4df0cb(0x12d)+_0x4d2e13+_0x4df0cb(0x154);}}document[_0x4df0cb(0x204)](_0x4df0cb(0x16d))['classList'][_0x4df0cb(0x1f9)]('active'),document[_0x4df0cb(0x204)](_0x4df0cb(0x18c))['classList'][_0x4df0cb(0x1f9)]('open');}function closeAllSheets(){const _0x5987a1=a3_0x2dad4e;document[_0x5987a1(0x204)]('overlay')[_0x5987a1(0x1dc)][_0x5987a1(0x180)](_0x5987a1(0x210)),document['querySelectorAll']('.sheet')[_0x5987a1(0x17d)](_0x11df02=>_0x11df02[_0x5987a1(0x1dc)]['remove'](_0x5987a1(0x20a)));}function openSheet(_0x595c7f){const _0x2e3ae2=a3_0x2dad4e;document['getElementById'](_0x2e3ae2(0x16d))['classList'][_0x2e3ae2(0x1f9)]('active'),document[_0x2e3ae2(0x204)](_0x595c7f)[_0x2e3ae2(0x1dc)][_0x2e3ae2(0x1f9)](_0x2e3ae2(0x20a));}function getLocalDateStr(_0x451290){const _0x169753=a3_0x2dad4e,_0x1b5443=_0x451290[_0x169753(0x12a)](),_0x34443a=String(_0x451290[_0x169753(0x184)]()+0x1)['padStart'](0x2,'0'),_0x94de6d=String(_0x451290[_0x169753(0x20d)]())['padStart'](0x2,'0');return _0x1b5443+'-'+_0x34443a+'-'+_0x94de6d;}function getStartOfWeek(_0x2f82fb){const _0x1004dd=a3_0x2dad4e,_0x4e7fcf=new Date(_0x2f82fb),_0x8e51af=_0x4e7fcf[_0x1004dd(0x1b0)](),_0x28219c=_0x4e7fcf[_0x1004dd(0x20d)]()-_0x8e51af+(_0x8e51af===0x0?-0x6:0x1);return _0x4e7fcf[_0x1004dd(0x14c)](_0x28219c),_0x4e7fcf[_0x1004dd(0x1fc)](0x0,0x0,0x0,0x0),_0x4e7fcf;}function scrollToToday(){const _0x4c0039=getLocalDateStr(new Date());setTimeout(()=>{const _0x126f26=a3_0x15c7,_0xd77988=document[_0x126f26(0x182)](_0x126f26(0x17c)+_0x4c0039+'\x22]');if(_0xd77988){const _0x4b85b0=document['getElementById'](_0x126f26(0x183)),_0x31164c=_0xd77988[_0x126f26(0x14e)]-_0x4b85b0[_0x126f26(0x149)]/0x2+_0xd77988[_0x126f26(0x122)]/0x2;_0x4b85b0[_0x126f26(0x1b6)]({'left':_0x31164c,'behavior':_0x126f26(0x11c)}),_0x4b85b0[_0x126f26(0x15c)]=0x9*GRID_H;}},0x32);}function a3_0x594a(){const _0x153891=['insertBefore','map','#0a84ff','getAttribute','then','detDate','detTime','clientWidth','toLocaleDateString','.period-switch\x20.p-btn','setDate','#050505','offsetLeft','getItem','ccTitle','value','addEventListener','disableVerticalSwipes','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','createDocumentFragment','.rs-date-chip','week','scrollWidth','color','scrollLeft','left','scrollTop','rgba(10,\x20132,\x20255,\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','style','applyData','uc_client_settings','data-date','syncLoad','className','getTime','backgroundPosition','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','startsWith','setItem','settings','600','overlay','entries','json','rescheduleSheet','204509TJxbmk','custom','width','user','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','client-stat-card','numeric','visible','1839144mZyJGj','stopPropagation','none','.day-col-header[data-date=\x22','forEach','cancelled','exceptions','remove','push','querySelector','matrixViewport','getMonth','gridColumns','today','WebApp','cid','filter','.btn-cancel','BackButton','detailsSheet','long','globalTimeLine','v9.5-CLIENT-ANALYTICS','dateStr','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','min','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','floor','saveLocally','</div>','setMonth','cancel_window','substring','display','querySelectorAll','status','textContent','daysHeaderTrack','\x20status-completed','ranges','join','all','coachId','18usfktE','backgroundColor','completed','blocked-slot\x20stripe-bg','loadLocal','split','pattern','rsSlotsGrid','</span>\x20/\x20','max','headerMonth','anPercent','getDay','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','total','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','%\x20+\x202px)','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','scrollTo','cancelHint','–∑–∞\x20','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','month','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','ccYesBtn','parse','rs-time-btn','strokeDashoffset','day-off-overlay\x20stripe-bg','var(--acc-blue)','getMinutes','anDonutCircle','initData','seriesId','rs-date-chip','data-day-idx','sort','fontWeight','1134922kkIYgc','day-column\x20','start','borderLeftColor','block','cancelContainer','log','anCustomDates','rsDatesTrack','calc(','top','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','firstChild','round','#ff453a','client_load','classList','flex','</div><div\x20class=\x22dch-num\x22>','\x20-\x20','detNote','day-col-header\x20','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','428EWNVMB','reschedule','%\x20-\x204px)','Error\x20setting\x20back\x20button:','toUpperCase','done','padStart','12DtiNzq','(((.+)+)+)+$','.btn-reschedule','coach_profiles','event-card','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','ru-RU','note','onclick','charAt','toast','</div><div\x20class=\x22rs-day-num\x22>','var(--acc-green)','DOMContentLoaded','show','add','find','uc_client_list','setHours','timeColumn','div','clients','now','POST','anTotalStats','stringify','getElementById','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','setAttribute','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','timeLineBadge','\x20—á.','open','setHeaderColor','.day-col-header','getDate','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','3342619qDTeCw','active','appendChild','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','detStatus','innerHTML','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','auto','slice','T23:59:59','time-label','\x20–≤\x20','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','offsetWidth','length','anEnd','ready','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','offClick','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','–û—Ç–º–µ–Ω–µ–Ω–æ','getFullYear','2486010uDemLn','error','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','anStart','blocked-range-part\x20stripe-bg','keys','45165uNgsrx','colIndex','createElement','zIndex',':00</span>','setBackgroundColor','search','data','test','getHours','end','Telegram','location','toString','initDataUnsafe','apply','6372950izGnFc'];a3_0x594a=function(){return _0x153891;};return a3_0x594a();}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x38e7b9=a3_0x2dad4e,_0x2929cc=new Date(),_0x190326=document[_0x38e7b9(0x204)](_0x38e7b9(0x18e)),_0xfdd075=document[_0x38e7b9(0x204)](_0x38e7b9(0x208)),_0x457bb2=(_0x2929cc[_0x38e7b9(0x13a)]()*0x3c+_0x2929cc[_0x38e7b9(0x1c3)]())/0x3c*GRID_H;_0x190326['style']['top']=_0x457bb2+'px',_0x190326[_0x38e7b9(0x160)][_0x38e7b9(0x19a)]=_0x38e7b9(0x1cf),_0xfdd075[_0x38e7b9(0x160)]['top']=_0x457bb2+'px',_0xfdd075['style'][_0x38e7b9(0x19a)]='block',_0xfdd075[_0x38e7b9(0x19d)]=String(_0x2929cc[_0x38e7b9(0x13a)]())['padStart'](0x2,'0')+':'+String(_0x2929cc[_0x38e7b9(0x1c3)]())[_0x38e7b9(0x1e9)](0x2,'0');}function onScroll(){const _0x5468ea=a3_0x2dad4e,_0x528598=document[_0x5468ea(0x204)](_0x5468ea(0x183)),_0x3197ee=document[_0x5468ea(0x19b)](_0x5468ea(0x20c));for(let _0xe229d8 of _0x3197ee)if(_0xe229d8[_0x5468ea(0x14e)]>=_0x528598['scrollLeft']){const _0x41930a=new Date(_0xe229d8[_0x5468ea(0x145)](_0x5468ea(0x163)));document[_0x5468ea(0x204)](_0x5468ea(0x1ae))[_0x5468ea(0x19d)]=_0x41930a['toLocaleString']('ru',{'month':_0x5468ea(0x18d)})['toUpperCase']()+'\x20'+_0x41930a['getFullYear']();break;}}function showToast(_0x2d614c){const _0x52c50a=a3_0x2dad4e,_0x208bc0=document[_0x52c50a(0x204)](_0x52c50a(0x1f4));_0x208bc0[_0x52c50a(0x19d)]=_0x2d614c,_0x208bc0[_0x52c50a(0x1dc)]['add'](_0x52c50a(0x1f8)),setTimeout(()=>_0x208bc0[_0x52c50a(0x1dc)][_0x52c50a(0x180)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x18cb9e=a3_0x2dad4e,_0xdbb1bd=document['getElementById']('matrixViewport'),_0x301bd8=_0xdbb1bd[_0x18cb9e(0x15a)],_0x564ccb=_0xdbb1bd[_0x18cb9e(0x158)],_0x45de71=_0xdbb1bd[_0x18cb9e(0x149)];if(_0x564ccb-(_0x301bd8+_0x45de71)<0x12c){const _0x4933d4=endOffset;endOffset+=0xe,renderDayRange(_0x4933d4+0x1,endOffset),reRenderBlocks();}if(_0x301bd8<0x12c){const _0x83e388=startOffset;startOffset-=0xe,prependDays(startOffset,_0x83e388-0x1),_0xdbb1bd[_0x18cb9e(0x15a)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x2feb79,_0xe4584d){const _0x5277e7=a3_0x2dad4e,_0xb39366=document[_0x5277e7(0x204)](_0x5277e7(0x19e)),_0x5769a2=document['getElementById'](_0x5277e7(0x185)),_0x342c6c=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x464b3f=new Date();_0x464b3f[_0x5277e7(0x1fc)](0x0,0x0,0x0,0x0);const _0x43fed3=getLocalDateStr(new Date()),_0x47d02a=document['createDocumentFragment'](),_0xf67e38=document[_0x5277e7(0x155)]();for(let _0x1bd956=_0x2feb79;_0x1bd956<=_0xe4584d;_0x1bd956++){const _0x3830e4=new Date(_0x464b3f);_0x3830e4[_0x5277e7(0x14c)](_0x3830e4[_0x5277e7(0x20d)]()+_0x1bd956);const _0x4c98ae=getLocalDateStr(_0x3830e4);let _0x2fe1f7=_0x3830e4['getDay']()-0x1;if(_0x2fe1f7===-0x1)_0x2fe1f7=0x6;const _0x21e871=_0x4c98ae===_0x43fed3,_0x554f05=document[_0x5277e7(0x133)](_0x5277e7(0x1fe));_0x554f05[_0x5277e7(0x165)]=_0x5277e7(0x1e1)+(_0x21e871?_0x5277e7(0x186):''),_0x554f05[_0x5277e7(0x206)]('data-date',_0x4c98ae),_0x554f05['innerHTML']='<div\x20class=\x22dch-day\x22>'+_0x342c6c[_0x2fe1f7]+'</div><div\x20class=\x22dch-num\x22>'+_0x3830e4[_0x5277e7(0x20d)]()+_0x5277e7(0x196),_0x47d02a[_0x5277e7(0x211)](_0x554f05);const _0x23c68e=document['createElement'](_0x5277e7(0x1fe));_0x23c68e[_0x5277e7(0x165)]='day-column\x20'+(_0x21e871?_0x5277e7(0x186):''),_0x23c68e[_0x5277e7(0x206)](_0x5277e7(0x163),_0x4c98ae),_0x23c68e[_0x5277e7(0x206)](_0x5277e7(0x1c8),_0x2fe1f7),_0xf67e38[_0x5277e7(0x211)](_0x23c68e);}_0xb39366[_0x5277e7(0x142)](_0x47d02a,_0xb39366[_0x5277e7(0x1d8)]),_0x5769a2[_0x5277e7(0x142)](_0xf67e38,_0x5769a2['querySelector']('.day-column'));}function hexToRgba(_0x1ce467,_0x195e5f){const _0x4e9c50=a3_0x2dad4e;let _0x4abf11;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x4e9c50(0x139)](_0x1ce467))return _0x4abf11=_0x1ce467[_0x4e9c50(0x199)](0x1)['split'](''),_0x4abf11[_0x4e9c50(0x123)]==0x3&&(_0x4abf11=[_0x4abf11[0x0],_0x4abf11[0x0],_0x4abf11[0x1],_0x4abf11[0x1],_0x4abf11[0x2],_0x4abf11[0x2]]),_0x4abf11='0x'+_0x4abf11[_0x4e9c50(0x1a1)](''),'rgba('+[_0x4abf11>>0x10&0xff,_0x4abf11>>0x8&0xff,_0x4abf11&0xff][_0x4e9c50(0x1a1)](',')+','+_0x195e5f+')';return _0x4e9c50(0x15d)+_0x195e5f+')';}let confirmResolver=null;function showCustomConfirm(_0x5c39f3,_0x25d9ae,_0x348e8c=!![]){const _0x19fa57=a3_0x2dad4e;document['getElementById'](_0x19fa57(0x150))[_0x19fa57(0x19d)]=_0x5c39f3,document[_0x19fa57(0x204)]('ccText')[_0x19fa57(0x19d)]=_0x25d9ae;const _0x3eb83a=document['getElementById'](_0x19fa57(0x1bd));return _0x348e8c?(_0x3eb83a[_0x19fa57(0x160)][_0x19fa57(0x159)]=_0x19fa57(0x1da),_0x3eb83a[_0x19fa57(0x160)][_0x19fa57(0x1ca)]='600'):(_0x3eb83a[_0x19fa57(0x160)][_0x19fa57(0x159)]=_0x19fa57(0x144),_0x3eb83a['style'][_0x19fa57(0x1ca)]=_0x19fa57(0x16c)),new Promise(_0x5c50c5=>{const _0x2c1563=_0x19fa57;confirmResolver=_0x5c50c5,document[_0x2c1563(0x204)]('customConfirm')[_0x2c1563(0x1dc)][_0x2c1563(0x1f9)](_0x2c1563(0x178));});}function resolveCustomConfirm(_0x1dbea9){const _0x106073=a3_0x2dad4e;document[_0x106073(0x204)]('customConfirm')[_0x106073(0x1dc)][_0x106073(0x180)](_0x106073(0x178));if(confirmResolver)confirmResolver(_0x1dbea9);}async function tryCancelCurrentSession(){const _0x35b61d=a3_0x2dad4e;if(!currentSession)return;const _0x5b41c2=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x35b61d(0x205),!![]);if(!_0x5b41c2)return;const _0x58c0c4=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x5924e0=>_0x5924e0['id']!==_0x58c0c4['id']),reRenderBlocks(),showToast(_0x35b61d(0x129)),lastUserActionTime=Date[_0x35b61d(0x200)]();try{const _0x4c727=window[_0x35b61d(0x13c)]?.[_0x35b61d(0x187)],_0x189fed=await fetch(API_URL,{'method':_0x35b61d(0x201),'body':JSON[_0x35b61d(0x203)]({'action':'client_cancel','init_data':_0x4c727?.[_0x35b61d(0x1c5)]||'','coachId':_0x58c0c4['coachId'],'dateStr':_0x58c0c4[_0x35b61d(0x190)],'sessionId':_0x58c0c4['id']})});if(_0x189fed['ok'])DataManager[_0x35b61d(0x195)]();}catch(_0x7c595b){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xb9d6f0=a3_0x2dad4e;if(!currentSession)return;document[_0xb9d6f0(0x204)]('detailsSheet')[_0xb9d6f0(0x1dc)][_0xb9d6f0(0x180)](_0xb9d6f0(0x20a)),document[_0xb9d6f0(0x204)](_0xb9d6f0(0x170))[_0xb9d6f0(0x1dc)][_0xb9d6f0(0x1f9)](_0xb9d6f0(0x20a));const _0x21da9e=document[_0xb9d6f0(0x204)]('rsDatesTrack'),_0xdf6f43=document[_0xb9d6f0(0x204)](_0xb9d6f0(0x1ab));_0x21da9e[_0xb9d6f0(0x11a)]='',_0xdf6f43[_0xb9d6f0(0x11a)]=_0xb9d6f0(0x20e);const [_0x153e6d,_0x4352c5]=currentSession[_0xb9d6f0(0x1cd)][_0xb9d6f0(0x1a9)](':')[_0xb9d6f0(0x143)](Number),[_0x47a7a1,_0xe33371]=currentSession[_0xb9d6f0(0x13b)]['split'](':')[_0xb9d6f0(0x143)](Number),_0x768450=_0x47a7a1*0x3c+_0xe33371-(_0x153e6d*0x3c+_0x4352c5);try{const _0x298474=window[_0xb9d6f0(0x13c)]?.[_0xb9d6f0(0x187)],_0x487ced=await fetch(API_URL,{'method':'POST','body':JSON[_0xb9d6f0(0x203)]({'action':'get_slots','coachId':currentSession[_0xb9d6f0(0x1a3)],'duration':_0x768450,'init_data':_0x298474?.[_0xb9d6f0(0x1c5)]||'','excludeSessionId':currentSession['id']})}),_0x244ae5=await _0x487ced[_0xb9d6f0(0x16f)]();_0x244ae5['ok']&&_0x244ae5['data']?(availableSlotsCache=_0x244ae5[_0xb9d6f0(0x138)],renderRescheduleDates()):_0xdf6f43[_0xb9d6f0(0x11a)]=_0xb9d6f0(0x1ba);}catch(_0x1cd018){_0xdf6f43['innerHTML']=_0xb9d6f0(0x126);}}function renderRescheduleDates(){const _0x2f3991=a3_0x2dad4e,_0x14d5bf=document[_0x2f3991(0x204)](_0x2f3991(0x1d3));_0x14d5bf[_0x2f3991(0x11a)]='';const _0x3fc55c=Object[_0x2f3991(0x130)](availableSlotsCache)['sort'](),_0x49ce3b=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x3fc55c['length']===0x0){document[_0x2f3991(0x204)](_0x2f3991(0x1ab))[_0x2f3991(0x11a)]=_0x2f3991(0x1b1);return;}_0x3fc55c[_0x2f3991(0x17d)]((_0x4a8186,_0x40d014)=>{const _0x1ea56c=_0x2f3991,_0xa3118b=new Date(_0x4a8186),_0x7265b4=_0x49ce3b[_0xa3118b['getDay']()],_0x13d9ad=_0xa3118b[_0x1ea56c(0x20d)](),_0x3ed755=document[_0x1ea56c(0x133)](_0x1ea56c(0x1fe));_0x3ed755[_0x1ea56c(0x165)]=_0x1ea56c(0x1c7);if(_0x40d014===0x0)_0x3ed755[_0x1ea56c(0x1dc)][_0x1ea56c(0x1f9)]('active');_0x3ed755[_0x1ea56c(0x11a)]='<div\x20class=\x22rs-day-name\x22>'+_0x7265b4+_0x1ea56c(0x1f5)+_0x13d9ad+_0x1ea56c(0x196),_0x3ed755[_0x1ea56c(0x1f2)]=()=>selectRsDate(_0x4a8186,_0x3ed755),_0x14d5bf[_0x1ea56c(0x211)](_0x3ed755);}),selectRsDate(_0x3fc55c[0x0],_0x14d5bf['firstChild']);}function a3_0x15c7(_0x26dcf7,_0x34b982){_0x26dcf7=_0x26dcf7-0x11a;const _0x2ab7b2=a3_0x594a();let _0x17f951=_0x2ab7b2[_0x26dcf7];return _0x17f951;}function selectRsDate(_0x32a050,_0xec7e62){const _0x5da51f=a3_0x2dad4e;selectedRsDate=_0x32a050,document[_0x5da51f(0x19b)](_0x5da51f(0x156))['forEach'](_0x3ccec8=>_0x3ccec8[_0x5da51f(0x1dc)][_0x5da51f(0x180)]('active'));if(_0xec7e62)_0xec7e62[_0x5da51f(0x1dc)]['add'](_0x5da51f(0x210));const _0xe0a219=document['getElementById']('rsSlotsGrid');_0xe0a219[_0x5da51f(0x11a)]='';const _0x3494ea=availableSlotsCache[_0x32a050]||[];if(_0x3494ea[_0x5da51f(0x123)]===0x0){_0xe0a219['innerHTML']=_0x5da51f(0x1ba);return;}_0x3494ea[_0x5da51f(0x17d)](_0x4ff362=>{const _0x2b346b=_0x5da51f,_0x14ad43=document[_0x2b346b(0x133)]('button');_0x14ad43[_0x2b346b(0x165)]=_0x2b346b(0x1bf),_0x14ad43[_0x2b346b(0x19d)]=_0x4ff362,_0x14ad43[_0x2b346b(0x1f2)]=()=>confirmReschedule(_0x4ff362),_0xe0a219['appendChild'](_0x14ad43);});}async function confirmReschedule(_0x1c6d4f){const _0xa8c1cd=a3_0x2dad4e,_0x1210a3=new Date(selectedRsDate),_0x6e974f=_0x1210a3['toLocaleDateString']('ru-RU',{'day':_0xa8c1cd(0x177),'month':_0xa8c1cd(0x18d)}),_0x21955c=await showCustomConfirm(_0xa8c1cd(0x11b),_0xa8c1cd(0x193)+_0x6e974f+_0xa8c1cd(0x120)+_0x1c6d4f+'?',![]);if(!_0x21955c)return;closeAllSheets(),showToast(_0xa8c1cd(0x121)),lastUserActionTime=Date[_0xa8c1cd(0x200)]();const _0x21c853=currentSession[_0xa8c1cd(0x190)],_0xd7a65e=currentSession['id'],[_0x337251,_0x5ea0ca]=currentSession[_0xa8c1cd(0x1cd)]['split'](':')[_0xa8c1cd(0x143)](Number),[_0x2dc552,_0x7a1907]=currentSession[_0xa8c1cd(0x13b)][_0xa8c1cd(0x1a9)](':')[_0xa8c1cd(0x143)](Number),_0x4e586b=_0x2dc552*0x3c+_0x7a1907-(_0x337251*0x3c+_0x5ea0ca),[_0x4a5081,_0x4191ab]=_0x1c6d4f[_0xa8c1cd(0x1a9)](':')[_0xa8c1cd(0x143)](Number),_0x153869=_0x4a5081*0x3c+_0x4191ab+_0x4e586b,_0x36609b=Math[_0xa8c1cd(0x194)](_0x153869/0x3c),_0x197665=_0x153869%0x3c,_0x4c4715=String(_0x36609b)[_0xa8c1cd(0x1e9)](0x2,'0')+':'+String(_0x197665)[_0xa8c1cd(0x1e9)](0x2,'0'),_0xb6e881=sessions['findIndex'](_0x1be296=>_0x1be296['id']===_0xd7a65e);_0xb6e881!==-0x1&&(sessions[_0xb6e881]['dateStr']=selectedRsDate,sessions[_0xb6e881][_0xa8c1cd(0x1cd)]=_0x1c6d4f,sessions[_0xb6e881][_0xa8c1cd(0x13b)]=_0x4c4715,reRenderBlocks());try{const _0x34688c=window[_0xa8c1cd(0x13c)]?.[_0xa8c1cd(0x187)],_0x1211e6=await fetch(API_URL,{'method':_0xa8c1cd(0x201),'body':JSON[_0xa8c1cd(0x203)]({'action':_0xa8c1cd(0x1e4),'init_data':_0x34688c?.[_0xa8c1cd(0x1c5)]||'','oldSessionId':_0xd7a65e,'oldDate':_0x21c853,'newDate':selectedRsDate,'newTime':_0x1c6d4f,'coachId':currentSession[_0xa8c1cd(0x1a3)]})}),_0x4e17ee=await _0x1211e6['json']();!_0x4e17ee['ok']?(showToast(_0xa8c1cd(0x207)),DataManager[_0xa8c1cd(0x164)]()):(showToast(_0xa8c1cd(0x1e2)),DataManager['saveLocally']());}catch(_0x5d728c){showToast(_0xa8c1cd(0x1b9));}}document[a3_0x2dad4e(0x152)](a3_0x2dad4e(0x1f7),init);