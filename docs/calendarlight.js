const a3_0x68042c=a3_0x5365;(function(_0x2a7741,_0xe3e41a){const _0x2f1c7e=a3_0x5365,_0xfacf6c=_0x2a7741();while(!![]){try{const _0x2286ca=-parseInt(_0x2f1c7e(0xfe))/0x1*(parseInt(_0x2f1c7e(0xb9))/0x2)+-parseInt(_0x2f1c7e(0x11a))/0x3+-parseInt(_0x2f1c7e(0x128))/0x4*(parseInt(_0x2f1c7e(0x180))/0x5)+-parseInt(_0x2f1c7e(0x150))/0x6*(parseInt(_0x2f1c7e(0xe5))/0x7)+-parseInt(_0x2f1c7e(0x153))/0x8+-parseInt(_0x2f1c7e(0xaa))/0x9*(-parseInt(_0x2f1c7e(0xd8))/0xa)+parseInt(_0x2f1c7e(0xd0))/0xb*(parseInt(_0x2f1c7e(0x170))/0xc);if(_0x2286ca===_0xe3e41a)break;else _0xfacf6c['push'](_0xfacf6c['shift']());}catch(_0x15da10){_0xfacf6c['push'](_0xfacf6c['shift']());}}}(a3_0xe7ca,0x48cb3));const APP_VERSION=a3_0x68042c(0xdd),API_URL=a3_0x68042c(0xd3),GRID_H=0x3c,KEY_SESSIONS=a3_0x68042c(0xfb),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x68042c(0xfd);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod='week',coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x4b2946=a3_0x68042c,_0x5a53b0=(function(){let _0xd3f936=!![];return function(_0x58059b,_0x26766c){const _0x164d27=_0xd3f936?function(){const _0x252557=a3_0x5365;if(_0x26766c){const _0x39a436=_0x26766c[_0x252557(0xcb)](_0x58059b,arguments);return _0x26766c=null,_0x39a436;}}:function(){};return _0xd3f936=![],_0x164d27;};}()),_0x1923e1=_0x5a53b0(this,function(){const _0x42092f=a3_0x5365;return _0x1923e1[_0x42092f(0xb7)]()[_0x42092f(0xf8)](_0x42092f(0xf2))[_0x42092f(0xb7)]()['constructor'](_0x1923e1)[_0x42092f(0xf8)](_0x42092f(0xf2));});_0x1923e1();try{const _0x273a75=window[_0x4b2946(0xa0)]?.[_0x4b2946(0x13c)];if(!_0x273a75)return;_0x273a75['ready'](),_0x273a75[_0x4b2946(0xe9)]();try{_0x273a75['setHeaderColor'](_0x4b2946(0x151)),_0x273a75[_0x4b2946(0xcd)]&&_0x273a75['setBackgroundColor'](_0x4b2946(0x151));}catch(_0x20dca2){console[_0x4b2946(0xd2)]('Error\x20setting\x20color:',_0x20dca2);}try{_0x273a75[_0x4b2946(0xed)]&&(_0x273a75[_0x4b2946(0xed)][_0x4b2946(0x161)](),_0x273a75['BackButton'][_0x4b2946(0xca)](),_0x273a75[_0x4b2946(0xed)][_0x4b2946(0x148)](function(){const _0x75a614=_0x4b2946;window['location'][_0x75a614(0x11b)]=_0x75a614(0x97);}));}catch(_0x1158e2){console['log'](_0x4b2946(0x12b),_0x1158e2);}try{if(_0x273a75[_0x4b2946(0x134)])_0x273a75[_0x4b2946(0x134)]();}catch(_0x243513){}}catch(_0x184820){console[_0x4b2946(0x181)](_0x4b2946(0xf6),_0x184820);}}());function isAdmin(){const _0x2539f4=a3_0x68042c;try{const _0x128713=Number(window[_0x2539f4(0xa0)]?.[_0x2539f4(0x13c)]?.[_0x2539f4(0x116)]?.[_0x2539f4(0x12e)]?.['id']);return _0x128713===0xbaf7174;}catch(_0x26d65e){return![];}}const DataManager={'saveLocally'(){const _0xfb40d1=a3_0x68042c;try{localStorage[_0xfb40d1(0xb6)](KEY_SESSIONS,JSON[_0xfb40d1(0x179)](sessions)),localStorage[_0xfb40d1(0xb6)](KEY_CLIENTS,JSON['stringify'](clients)),localStorage[_0xfb40d1(0xb6)](KEY_SETTINGS,JSON[_0xfb40d1(0x179)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x49d1ca){}},'loadLocal'(){const _0x3ea1e6=a3_0x68042c;try{const _0x28fba7=localStorage[_0x3ea1e6(0x16e)](KEY_SESSIONS);if(_0x28fba7)sessions=JSON['parse'](_0x28fba7);const _0x4e1acd=localStorage[_0x3ea1e6(0x16e)](KEY_CLIENTS);if(_0x4e1acd)clients=JSON[_0x3ea1e6(0x13d)](_0x4e1acd);const _0x38db76=localStorage[_0x3ea1e6(0x16e)](KEY_SETTINGS);if(_0x38db76){const _0x448d07=JSON[_0x3ea1e6(0x13d)](_0x38db76);if(_0x448d07[_0x3ea1e6(0x126)])availabilityPattern=_0x448d07[_0x3ea1e6(0x126)];if(_0x448d07[_0x3ea1e6(0x103)])specialRanges=_0x448d07['ranges'];if(_0x448d07['exceptions'])dateExceptions=_0x448d07[_0x3ea1e6(0x92)];}}catch(_0x5f288e){}},async 'syncLoad'(){const _0x29a2e7=a3_0x68042c,_0x6a69e3=new Date(),_0x5ba151=_0x6a69e3[_0x29a2e7(0x175)]()+'-'+String(_0x6a69e3[_0x29a2e7(0x173)]()+0x1)[_0x29a2e7(0x15c)](0x2,'0'),_0x304377=new Date(_0x6a69e3);_0x304377[_0x29a2e7(0xa8)](_0x6a69e3['getMonth']()+0x1);const _0xcecc9a=_0x304377['getFullYear']()+'-'+String(_0x304377[_0x29a2e7(0x173)]()+0x1)[_0x29a2e7(0x15c)](0x2,'0'),_0x37b067=Date[_0x29a2e7(0xda)]();try{const _0xaa1a10=window['Telegram']?.[_0x29a2e7(0x13c)],_0x359b4d=_0xaa1a10?.[_0x29a2e7(0xe1)]||'',[_0x117b08,_0x573f42]=await Promise[_0x29a2e7(0xe2)]([fetch(API_URL,{'method':'POST','body':JSON[_0x29a2e7(0x179)]({'action':_0x29a2e7(0x113),'init_data':_0x359b4d,'month_str':_0x5ba151})})[_0x29a2e7(0x169)](_0x370a87=>_0x370a87[_0x29a2e7(0x12c)]()),fetch(API_URL,{'method':_0x29a2e7(0xb2),'body':JSON[_0x29a2e7(0x179)]({'action':_0x29a2e7(0x113),'init_data':_0x359b4d,'month_str':_0xcecc9a})})[_0x29a2e7(0x169)](_0xb15812=>_0xb15812[_0x29a2e7(0x12c)]())]);if(lastUserActionTime>_0x37b067){console[_0x29a2e7(0xd2)](_0x29a2e7(0x10b));return;}if(_0x117b08['ok'])this[_0x29a2e7(0xf0)](_0x117b08[_0x29a2e7(0x14d)],_0x5ba151);if(_0x573f42['ok'])this[_0x29a2e7(0xf0)](_0x573f42['data'],_0xcecc9a);this[_0x29a2e7(0xfc)]();}catch(_0x110cb8){}},'applyData'(_0x3a9d0a,_0xe40bab){const _0x2584a2=a3_0x68042c;if(!_0x3a9d0a)return;if(_0x3a9d0a[_0x2584a2(0x13e)]){if(_0x3a9d0a['settings'][_0x2584a2(0x126)])availabilityPattern=_0x3a9d0a[_0x2584a2(0x13e)][_0x2584a2(0x126)];if(_0x3a9d0a[_0x2584a2(0x13e)][_0x2584a2(0x103)])specialRanges=_0x3a9d0a[_0x2584a2(0x13e)][_0x2584a2(0x103)];if(_0x3a9d0a[_0x2584a2(0x13e)][_0x2584a2(0x92)])dateExceptions=_0x3a9d0a['settings']['exceptions'];}if(_0x3a9d0a[_0x2584a2(0x9c)]&&Array['isArray'](_0x3a9d0a[_0x2584a2(0x9c)]))clients=_0x3a9d0a[_0x2584a2(0x9c)];_0x3a9d0a[_0x2584a2(0xad)]&&(coachProfiles={...coachProfiles,..._0x3a9d0a[_0x2584a2(0xad)]}),_0x3a9d0a[_0x2584a2(0x9e)]&&(sessions=sessions[_0x2584a2(0x164)](_0x92a77d=>!_0x92a77d[_0x2584a2(0x101)][_0x2584a2(0xdf)](_0xe40bab)),Object['keys'](_0x3a9d0a['calendar'])[_0x2584a2(0x152)](_0x35471f=>{const _0x20d159=_0x2584a2,_0x4be6f6=_0x3a9d0a[_0x20d159(0x9e)][_0x35471f];_0x4be6f6[_0x20d159(0x152)](_0x5e9164=>{const _0x44c47a=_0x20d159;sessions[_0x44c47a(0x120)]({'id':_0x5e9164['i'],'clientId':_0x5e9164['c'],'coachId':_0x5e9164[_0x44c47a(0xe4)],'dateStr':_0xe40bab+'-'+_0x35471f['padStart'](0x2,'0'),'start':_0x5e9164['s'],'end':_0x5e9164['e'],'note':_0x5e9164['n']||'','status':_0x5e9164['st']||_0x44c47a(0x90),'seriesId':_0x5e9164[_0x44c47a(0x17d)]});});})),reRenderBlocks();}};function init(){const _0xdd4e79=a3_0x68042c;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0xdd4e79(0xb0)](_0xdd4e79(0xde))[_0xdd4e79(0xee)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x43a0e9=a3_0x68042c,_0x5a4cc6=document['getElementById'](_0x43a0e9(0x9f)),_0x19b083=document['getElementById']('timeLineBadge');_0x5a4cc6[_0x43a0e9(0x10c)]='',_0x5a4cc6['appendChild'](_0x19b083);for(let _0x389093=0x0;_0x389093<0x18;_0x389093++){const _0x26f69a=document[_0x43a0e9(0x104)]('div');_0x26f69a[_0x43a0e9(0xaf)]='time-label';if(_0x389093>0x0)_0x26f69a[_0x43a0e9(0x10c)]=_0x43a0e9(0xc4)+String(_0x389093)[_0x43a0e9(0x15c)](0x2,'0')+_0x43a0e9(0x95);_0x5a4cc6[_0x43a0e9(0xd5)](_0x26f69a);}}function renderDayRange(_0x4e266b,_0x2a5351){const _0x33f032=a3_0x68042c,_0x157165=document['getElementById'](_0x33f032(0x105)),_0x316748=document['getElementById'](_0x33f032(0x91)),_0xdeb429=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x5a3e46=new Date();_0x5a3e46['setHours'](0x0,0x0,0x0,0x0);const _0x3dfc5b=getLocalDateStr(new Date());for(let _0x1f9c6e=_0x4e266b;_0x1f9c6e<=_0x2a5351;_0x1f9c6e++){const _0x49cde8=new Date(_0x5a3e46);_0x49cde8[_0x33f032(0x167)](_0x49cde8['getDate']()+_0x1f9c6e);const _0x59f031=getLocalDateStr(_0x49cde8);let _0x2a2d59=_0x49cde8[_0x33f032(0x176)]()-0x1;if(_0x2a2d59===-0x1)_0x2a2d59=0x6;const _0x16dc20=_0x59f031===_0x3dfc5b,_0xe56e24=document[_0x33f032(0x104)](_0x33f032(0xce));_0xe56e24[_0x33f032(0xaf)]=_0x33f032(0x127)+(_0x16dc20?_0x33f032(0x14a):''),_0xe56e24['setAttribute'](_0x33f032(0x137),_0x59f031),_0xe56e24[_0x33f032(0x10c)]=_0x33f032(0x16f)+_0xdeb429[_0x2a2d59]+_0x33f032(0xe7)+_0x49cde8[_0x33f032(0x15d)]()+_0x33f032(0x99),_0x157165[_0x33f032(0xd5)](_0xe56e24);const _0x40c349=document[_0x33f032(0x104)](_0x33f032(0xce));_0x40c349[_0x33f032(0xaf)]=_0x33f032(0x100)+(_0x16dc20?_0x33f032(0x14a):''),_0x40c349[_0x33f032(0x11e)]('data-date',_0x59f031),_0x40c349[_0x33f032(0x11e)](_0x33f032(0x14e),_0x2a2d59),_0x316748[_0x33f032(0xd5)](_0x40c349);}}function reRenderBlocks(){const _0x57d9d3=a3_0x68042c;document[_0x57d9d3(0x125)](_0x57d9d3(0x178))['forEach'](_0x1ddb38=>{const _0x26205c=_0x57d9d3;_0x1ddb38['querySelectorAll'](_0x26205c(0xcf))[_0x26205c(0x152)](_0x3a1ffa=>_0x3a1ffa[_0x26205c(0xeb)]());const _0x5889f5=_0x1ddb38['getAttribute'](_0x26205c(0x137)),_0x2a1068=parseInt(_0x1ddb38[_0x26205c(0x158)]('data-day-idx')),_0x267aa6=Math['round'](_0x1ddb38[_0x26205c(0x147)]);(availabilityPattern[_0x2a1068]||[])[_0x26205c(0x152)](_0x208d6c=>{const _0x2fbbc0=_0x26205c,_0x151aff=document[_0x2fbbc0(0x104)]('div');_0x151aff[_0x2fbbc0(0xaf)]=_0x2fbbc0(0xa6),_0x151aff[_0x2fbbc0(0xf1)][_0x2fbbc0(0x130)]=_0x208d6c*GRID_H+'px',_0x151aff[_0x2fbbc0(0xf1)]['backgroundPosition']='-'+_0x267aa6+_0x2fbbc0(0x12d)+_0x208d6c*GRID_H+'px',_0x1ddb38[_0x2fbbc0(0xd5)](_0x151aff);});if(specialRanges[_0x26205c(0x15e)]>0x0){const _0x120d7a=new Date(_0x5889f5+_0x26205c(0x177))['getTime'](),_0xf2cca5=new Date(_0x5889f5+_0x26205c(0xf3))[_0x26205c(0xb5)]();specialRanges['forEach'](_0x247057=>{const _0x3e3606=_0x26205c,_0x2bad03=new Date(_0x247057[_0x3e3606(0xf4)])[_0x3e3606(0xb5)](),_0x501d2f=new Date(_0x247057[_0x3e3606(0x11f)])[_0x3e3606(0xb5)](),_0x396067=Math[_0x3e3606(0xb4)](_0x120d7a,_0x2bad03),_0xbfccfb=Math['min'](_0xf2cca5,_0x501d2f);if(_0x396067<_0xbfccfb){const _0x55bd4b=(_0x396067-_0x120d7a)/0x36ee80*GRID_H,_0x12fe9a=(_0xbfccfb-_0x396067)/0x36ee80*GRID_H,_0x1e111b=document['createElement']('div');_0x12fe9a>=23.5*GRID_H?(_0x1e111b['className']=_0x3e3606(0x8e),_0x1e111b[_0x3e3606(0xf1)][_0x3e3606(0x10f)]='-'+_0x267aa6+'px\x200px'):(_0x1e111b[_0x3e3606(0xaf)]=_0x3e3606(0xe3),_0x1e111b[_0x3e3606(0xf1)][_0x3e3606(0x130)]=_0x55bd4b+'px',_0x1e111b['style'][_0x3e3606(0x9a)]=_0x12fe9a+'px',_0x1e111b['style'][_0x3e3606(0x10f)]='-'+_0x267aa6+'px\x20-'+_0x55bd4b+'px'),_0x1ddb38[_0x3e3606(0xd5)](_0x1e111b);}});}renderEventsForColumn(_0x1ddb38,_0x5889f5);});}function renderEventsForColumn(_0x1b762b,_0x468518){const _0x306f44=a3_0x68042c,_0x3547aa=sessions[_0x306f44(0x164)](_0xce77ff=>_0xce77ff['dateStr']===_0x468518),_0x17cde6=_0x3547aa[_0x306f44(0xac)](_0x1b813f=>{const _0x50b418=_0x306f44,[_0x4f7177,_0x5a0640]=_0x1b813f[_0x50b418(0xf4)][_0x50b418(0x119)](':')[_0x50b418(0xac)](Number),[_0x5aa317,_0x21c4ca]=_0x1b813f[_0x50b418(0x11f)][_0x50b418(0x119)](':')[_0x50b418(0xac)](Number);return{'data':_0x1b813f,'start':_0x4f7177*0x3c+_0x5a0640,'end':_0x5aa317*0x3c+_0x21c4ca,'colIndex':0x0};});_0x17cde6[_0x306f44(0x13f)]((_0x422913,_0x3916b4)=>_0x422913[_0x306f44(0xf4)]-_0x3916b4[_0x306f44(0xf4)]||_0x3916b4['end']-_0x3916b4['start']-(_0x422913['end']-_0x422913['start']));const _0x25bc89=[];_0x17cde6['forEach'](_0x35ac9e=>{const _0xba7e9d=_0x306f44;let _0x4e3525=![];for(let _0x580c85=0x0;_0x580c85<_0x25bc89[_0xba7e9d(0x15e)];_0x580c85++){const _0x373014=_0x25bc89[_0x580c85];if(_0x35ac9e[_0xba7e9d(0xf4)]>=_0x373014[_0x373014[_0xba7e9d(0x15e)]-0x1][_0xba7e9d(0x11f)]){_0x373014[_0xba7e9d(0x120)](_0x35ac9e),_0x35ac9e[_0xba7e9d(0xd9)]=_0x580c85,_0x4e3525=!![];break;}}!_0x4e3525&&(_0x25bc89[_0xba7e9d(0x120)]([_0x35ac9e]),_0x35ac9e[_0xba7e9d(0xd9)]=_0x25bc89[_0xba7e9d(0x15e)]-0x1);}),_0x17cde6['forEach'](_0x583f17=>{const _0x5c15b1=_0x306f44;let _0x30e904=0x0;_0x17cde6[_0x5c15b1(0x152)](_0x163217=>{const _0x1595fc=_0x5c15b1;if(Math[_0x1595fc(0xb4)](_0x583f17[_0x1595fc(0xf4)],_0x163217[_0x1595fc(0xf4)])<Math[_0x1595fc(0x111)](_0x583f17[_0x1595fc(0x11f)],_0x163217[_0x1595fc(0x11f)])&&_0x163217[_0x1595fc(0xd9)]>_0x30e904)_0x30e904=_0x163217[_0x1595fc(0xd9)];});const _0x25b460=_0x30e904+0x1,_0x477476=0x64/_0x25b460,_0x327e02=_0x583f17[_0x5c15b1(0xd9)]*_0x477476,_0x4f11fd=document[_0x5c15b1(0x104)](_0x5c15b1(0xce)),_0x564618=_0x583f17['data'];let _0x464cf9=_0x5c15b1(0x93);if(clients&&clients[_0x5c15b1(0x15e)]>0x0){const _0x242fa3=clients['find'](_0x2b7210=>String(_0x2b7210['id'])===String(_0x564618[_0x5c15b1(0x174)]));if(_0x242fa3&&_0x242fa3['color'])_0x464cf9=_0x242fa3[_0x5c15b1(0x163)];}const _0x51720d=_0x564618[_0x5c15b1(0x172)]===_0x5c15b1(0x9d),_0x54d730=_0x51720d?0x1:0.45;_0x4f11fd['className']='event-card'+(_0x51720d?_0x5c15b1(0x168):''),_0x4f11fd[_0x5c15b1(0xf1)][_0x5c15b1(0x171)]=hexToRgba(_0x464cf9,_0x54d730),_0x4f11fd[_0x5c15b1(0xf1)][_0x5c15b1(0x109)]=_0x464cf9;const _0x87d385=_0x583f17[_0x5c15b1(0xf4)]/0x3c*GRID_H,_0x49c1b9=(_0x583f17[_0x5c15b1(0x11f)]-_0x583f17[_0x5c15b1(0xf4)])/0x3c*GRID_H;_0x4f11fd[_0x5c15b1(0xf1)][_0x5c15b1(0x130)]=_0x87d385+'px',_0x4f11fd[_0x5c15b1(0xf1)][_0x5c15b1(0x9a)]=Math['max'](_0x49c1b9,0x14)+'px',_0x4f11fd[_0x5c15b1(0xf1)][_0x5c15b1(0x16b)]=_0x5c15b1(0xd7)+_0x477476+'%\x20-\x204px)',_0x4f11fd[_0x5c15b1(0xf1)][_0x5c15b1(0xbb)]='calc('+_0x327e02+'%\x20+\x202px)',_0x4f11fd[_0x5c15b1(0xf1)][_0x5c15b1(0x13a)]=0xa+_0x583f17[_0x5c15b1(0xd9)];if(_0x477476<0x55)_0x4f11fd[_0x5c15b1(0x186)][_0x5c15b1(0x17a)](_0x5c15b1(0xdb));let _0x1d02d5='';if(_0x564618['seriesId'])_0x1d02d5+=_0x5c15b1(0x14f);if(_0x51720d)_0x1d02d5+=_0x5c15b1(0x14c);_0x4f11fd[_0x5c15b1(0x10c)]=_0x5c15b1(0x145)+_0x564618[_0x5c15b1(0xf4)]+_0x5c15b1(0x11d)+_0x564618[_0x5c15b1(0x11f)]+_0x5c15b1(0x17b)+_0x1d02d5+_0x5c15b1(0xc6),_0x4f11fd['onclick']=_0x2d4b2f=>{const _0x380589=_0x5c15b1;_0x2d4b2f[_0x380589(0xa4)](),openDetails(_0x564618);},_0x1b762b[_0x5c15b1(0xd5)](_0x4f11fd);});}function openAnalytics(){const _0x1358e0=a3_0x68042c,_0x47887f=document['querySelector']('.period-switch\x20.p-btn');setAnalyticsPeriod(_0x1358e0(0xc3),_0x47887f),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x19e4d3,_0x5f1d88){const _0x10e4c0=a3_0x68042c;currentAnPeriod=_0x19e4d3,document[_0x10e4c0(0x125)](_0x10e4c0(0xa1))['forEach'](_0x26d29e=>_0x26d29e[_0x10e4c0(0x186)]['remove']('active'));if(_0x5f1d88)_0x5f1d88[_0x10e4c0(0x186)][_0x10e4c0(0x17a)](_0x10e4c0(0x135));const _0x1d2168=document[_0x10e4c0(0xb0)](_0x10e4c0(0xc0));_0x1d2168[_0x10e4c0(0xf1)][_0x10e4c0(0xb1)]=_0x19e4d3===_0x10e4c0(0xe8)?_0x10e4c0(0x17f):_0x10e4c0(0x16c);const _0x2f37d6=new Date();let _0x4713e0=new Date(),_0x5be0b7=new Date();if(_0x19e4d3===_0x10e4c0(0xc3))_0x4713e0=getStartOfWeek(_0x2f37d6),_0x5be0b7=new Date(_0x4713e0),_0x5be0b7['setDate'](_0x5be0b7['getDate']()+0x6);else{if(_0x19e4d3==='month')_0x4713e0=new Date(_0x2f37d6[_0x10e4c0(0x175)](),_0x2f37d6[_0x10e4c0(0x173)](),0x1),_0x5be0b7=new Date(_0x2f37d6[_0x10e4c0(0x175)](),_0x2f37d6[_0x10e4c0(0x173)]()+0x1,0x0);else{!document[_0x10e4c0(0xb0)](_0x10e4c0(0x185))[_0x10e4c0(0x165)]&&(document[_0x10e4c0(0xb0)](_0x10e4c0(0x185))[_0x10e4c0(0x165)]=getLocalDateStr(_0x2f37d6),document[_0x10e4c0(0xb0)](_0x10e4c0(0x129))[_0x10e4c0(0x165)]=getLocalDateStr(_0x2f37d6));refreshAnalytics();return;}}document[_0x10e4c0(0xb0)]('anStart')[_0x10e4c0(0x165)]=getLocalDateStr(_0x4713e0),document[_0x10e4c0(0xb0)](_0x10e4c0(0x129))['value']=getLocalDateStr(_0x5be0b7),refreshAnalytics();}function refreshAnalytics(){const _0x31e9ac=a3_0x68042c,_0x57114b=document[_0x31e9ac(0xb0)](_0x31e9ac(0x185))[_0x31e9ac(0x165)],_0x5a6628=document[_0x31e9ac(0xb0)](_0x31e9ac(0x129))[_0x31e9ac(0x165)];if(!_0x57114b||!_0x5a6628)return;const _0x14f93c=sessions[_0x31e9ac(0x164)](_0xf423ed=>_0xf423ed[_0x31e9ac(0x101)]>=_0x57114b&&_0xf423ed['dateStr']<=_0x5a6628&&_0xf423ed[_0x31e9ac(0x172)]!=='cancelled'),_0x5e10e5=_0x14f93c['length'],_0x36849d=_0x14f93c[_0x31e9ac(0x164)](_0x38e62e=>_0x38e62e['status']===_0x31e9ac(0x9d))[_0x31e9ac(0x15e)],_0x117ff3=_0x5e10e5>0x0?Math['round'](_0x36849d/_0x5e10e5*0x64):0x0;document[_0x31e9ac(0xb0)]('anPercent')[_0x31e9ac(0x13b)]=_0x117ff3+'%',document[_0x31e9ac(0xb0)]('anTotalStats')[_0x31e9ac(0x13b)]=_0x36849d+_0x31e9ac(0x138)+_0x5e10e5+_0x31e9ac(0x94);const _0x3d3bd5=document[_0x31e9ac(0xb0)](_0x31e9ac(0x143)),_0x496818=0x2*Math['PI']*0x23,_0xa6ddf9=_0x496818-_0x117ff3/0x64*_0x496818;_0x3d3bd5[_0x31e9ac(0xf1)]['strokeDashoffset']=_0xa6ddf9;const _0x2053ab={};_0x14f93c['forEach'](_0x404ffc=>{const _0x2550ef=_0x31e9ac,_0x45fe93=_0x404ffc[_0x2550ef(0x12a)]||'Unknown';if(!_0x2053ab[_0x45fe93]){const _0x520268='#'+_0x45fe93[_0x2550ef(0xb7)]()[_0x2550ef(0x144)](0x0,0x6);_0x2053ab[_0x45fe93]={'total':0x0,'done':0x0,'color':_0x520268};}_0x2053ab[_0x45fe93]['total']++;if(_0x404ffc[_0x2550ef(0x172)]===_0x2550ef(0x9d))_0x2053ab[_0x45fe93]['done']++;});const _0x4057fa=document['getElementById'](_0x31e9ac(0x16d));_0x4057fa[_0x31e9ac(0x10c)]='';const _0x5a4c43=Object[_0x31e9ac(0xbe)](_0x2053ab)[_0x31e9ac(0x13f)]((_0x3cf6b5,_0x161d9a)=>_0x161d9a[0x1][_0x31e9ac(0x10d)]-_0x3cf6b5[0x1][_0x31e9ac(0x10d)]);if(_0x5a4c43[_0x31e9ac(0x15e)]===0x0){_0x4057fa[_0x31e9ac(0x10c)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x5a4c43['forEach'](([_0x273377,_0x3284e4])=>{const _0x5b8bc4=_0x31e9ac,_0x1819e3=Math['round'](_0x3284e4['done']/_0x3284e4['total']*0x64),_0x54ac08=document[_0x5b8bc4(0x104)](_0x5b8bc4(0xce));_0x54ac08[_0x5b8bc4(0xaf)]=_0x5b8bc4(0xcc),_0x54ac08['style']['borderLeftColor']=_0x3284e4[_0x5b8bc4(0x163)],_0x54ac08[_0x5b8bc4(0x10c)]=_0x5b8bc4(0x9b)+_0x273377[_0x5b8bc4(0x144)](0x0,0x5)+_0x5b8bc4(0xc7)+_0x3284e4['done']+'</span>\x20/\x20'+_0x3284e4[_0x5b8bc4(0x10d)]+_0x5b8bc4(0x10a)+_0x1819e3+_0x5b8bc4(0x106),_0x4057fa[_0x5b8bc4(0xd5)](_0x54ac08);});}function openDetails(_0x2735d2){const _0x246228=a3_0x68042c;currentSession=_0x2735d2;const _0x4d068c=new Date(_0x2735d2[_0x246228(0x101)]),_0x5418ed=_0x4d068c[_0x246228(0x17c)]('ru-RU',{'weekday':_0x246228(0x15f),'day':_0x246228(0x123),'month':'long'});document[_0x246228(0xb0)](_0x246228(0xff))['textContent']=_0x5418ed[_0x246228(0x182)](0x0)[_0x246228(0x14b)]()+_0x5418ed['slice'](0x1),document[_0x246228(0xb0)](_0x246228(0xc1))[_0x246228(0x13b)]=_0x2735d2[_0x246228(0xf4)]+'\x20-\x20'+_0x2735d2['end'],document[_0x246228(0xb0)]('detNote')[_0x246228(0x13b)]=_0x2735d2[_0x246228(0x184)]||_0x246228(0x15a);const _0x115645=document['getElementById'](_0x246228(0x112)),_0x340bf6=document[_0x246228(0xb0)](_0x246228(0x107)),_0x31f3f8=_0x340bf6[_0x246228(0x131)](_0x246228(0x140)),_0x25e503=_0x340bf6['querySelector'](_0x246228(0xa5)),_0x1fa305=document[_0x246228(0xb0)]('cancelHint');if(_0x2735d2[_0x246228(0x172)]===_0x246228(0x9d))_0x115645[_0x246228(0x13b)]=_0x246228(0x17e),_0x115645[_0x246228(0xf1)][_0x246228(0x163)]=_0x246228(0x8f),_0x340bf6[_0x246228(0xf1)][_0x246228(0xb1)]='none';else{_0x115645[_0x246228(0x13b)]=_0x246228(0x110),_0x115645[_0x246228(0xf1)][_0x246228(0x163)]=_0x246228(0x117),_0x340bf6[_0x246228(0xf1)][_0x246228(0xb1)]=_0x246228(0xc2);const _0x176728=new Date(_0x2735d2[_0x246228(0x101)]+'T'+_0x2735d2[_0x246228(0xf4)]),_0x25eff4=new Date(),_0x2c9448=(_0x176728-_0x25eff4)/(0x3e8*0x3c*0x3c),_0x285981=coachProfiles[_0x2735d2[_0x246228(0x12a)]]&&coachProfiles[_0x2735d2[_0x246228(0x12a)]][_0x246228(0x157)]?parseInt(coachProfiles[_0x2735d2['coachId']][_0x246228(0x157)]):0x18;if(_0x285981===0x0||_0x2c9448>=_0x285981)_0x31f3f8[_0x246228(0xf1)]['display']=_0x246228(0xc2),_0x25e503[_0x246228(0xf1)]['display']='block',_0x1fa305[_0x246228(0xf1)][_0x246228(0xb1)]=_0x246228(0x16c);else{_0x31f3f8[_0x246228(0xf1)][_0x246228(0xb1)]=_0x246228(0x16c),_0x25e503[_0x246228(0xf1)][_0x246228(0xb1)]=_0x246228(0x16c),_0x1fa305['style']['display']=_0x246228(0xc2);let _0x2640ae=_0x285981===0x0?_0x246228(0x16a):_0x246228(0xbc)+_0x285981+'\x20—á.';_0x1fa305['textContent']='–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20'+_0x2640ae+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document[_0x246228(0xb0)](_0x246228(0xbd))[_0x246228(0x186)][_0x246228(0x17a)]('active'),document[_0x246228(0xb0)]('detailsSheet')[_0x246228(0x186)][_0x246228(0x17a)](_0x246228(0x12f));}function closeAllSheets(){const _0x42379f=a3_0x68042c;document['getElementById'](_0x42379f(0xbd))['classList']['remove'](_0x42379f(0x135)),document[_0x42379f(0x125)](_0x42379f(0xdc))[_0x42379f(0x152)](_0x55b132=>_0x55b132[_0x42379f(0x186)][_0x42379f(0xeb)](_0x42379f(0x12f)));}function openSheet(_0x23e1de){const _0x5ca540=a3_0x68042c;document[_0x5ca540(0xb0)](_0x5ca540(0xbd))[_0x5ca540(0x186)][_0x5ca540(0x17a)](_0x5ca540(0x135)),document[_0x5ca540(0xb0)](_0x23e1de)[_0x5ca540(0x186)]['add'](_0x5ca540(0x12f));}function getLocalDateStr(_0x4a03c2){const _0x15bf73=a3_0x68042c,_0x370fa7=_0x4a03c2[_0x15bf73(0x175)](),_0x40b980=String(_0x4a03c2[_0x15bf73(0x173)]()+0x1)[_0x15bf73(0x15c)](0x2,'0'),_0x5098e7=String(_0x4a03c2['getDate']())[_0x15bf73(0x15c)](0x2,'0');return _0x370fa7+'-'+_0x40b980+'-'+_0x5098e7;}function getStartOfWeek(_0x37da62){const _0x21ffc5=a3_0x68042c,_0xe9fcaa=new Date(_0x37da62),_0x3042a3=_0xe9fcaa[_0x21ffc5(0x176)](),_0x41912e=_0xe9fcaa['getDate']()-_0x3042a3+(_0x3042a3===0x0?-0x6:0x1);return _0xe9fcaa[_0x21ffc5(0x167)](_0x41912e),_0xe9fcaa[_0x21ffc5(0x136)](0x0,0x0,0x0,0x0),_0xe9fcaa;}function scrollToToday(){const _0x2f6d6b=getLocalDateStr(new Date());setTimeout(()=>{const _0x1a3ef6=a3_0x5365,_0x11a24f=document['querySelector'](_0x1a3ef6(0x146)+_0x2f6d6b+'\x22]');if(_0x11a24f){const _0x580f66=document[_0x1a3ef6(0xb0)](_0x1a3ef6(0xde)),_0x5bce30=_0x11a24f[_0x1a3ef6(0x147)]-_0x580f66[_0x1a3ef6(0xa9)]/0x2+_0x11a24f[_0x1a3ef6(0xf9)]/0x2;_0x580f66['scrollTo']({'left':_0x5bce30,'behavior':_0x1a3ef6(0xa2)}),_0x580f66['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x388cce=a3_0x68042c,_0x173158=new Date(),_0x4d23e2=document[_0x388cce(0xb0)](_0x388cce(0xe0)),_0x8194bd=document[_0x388cce(0xb0)]('timeLineBadge'),_0x1ba4fd=(_0x173158[_0x388cce(0xc9)]()*0x3c+_0x173158[_0x388cce(0xa3)]())/0x3c*GRID_H;_0x4d23e2[_0x388cce(0xf1)][_0x388cce(0x130)]=_0x1ba4fd+'px',_0x4d23e2[_0x388cce(0xf1)][_0x388cce(0xb1)]=_0x388cce(0xc2),_0x8194bd[_0x388cce(0xf1)][_0x388cce(0x130)]=_0x1ba4fd+'px',_0x8194bd[_0x388cce(0xf1)]['display']='block',_0x8194bd[_0x388cce(0x13b)]=String(_0x173158['getHours']())['padStart'](0x2,'0')+':'+String(_0x173158[_0x388cce(0xa3)]())['padStart'](0x2,'0');}function onScroll(){const _0x441137=a3_0x68042c,_0x6b98c7=document[_0x441137(0xb0)]('matrixViewport'),_0x15c017=document[_0x441137(0x125)](_0x441137(0x15b));for(let _0x3fa59e of _0x15c017)if(_0x3fa59e[_0x441137(0x147)]>=_0x6b98c7[_0x441137(0xe6)]){const _0x36a0f3=new Date(_0x3fa59e[_0x441137(0x158)](_0x441137(0x137)));document[_0x441137(0xb0)](_0x441137(0xb3))[_0x441137(0x13b)]=_0x36a0f3[_0x441137(0xec)]('ru',{'month':_0x441137(0x15f)})[_0x441137(0x14b)]()+'\x20'+_0x36a0f3[_0x441137(0x175)]();break;}}function showToast(_0x284850){const _0xfeac0=a3_0x68042c,_0xc31cac=document[_0xfeac0(0xb0)](_0xfeac0(0x160));_0xc31cac[_0xfeac0(0x13b)]=_0x284850,_0xc31cac[_0xfeac0(0x186)]['add'](_0xfeac0(0x161)),setTimeout(()=>_0xc31cac[_0xfeac0(0x186)]['remove'](_0xfeac0(0x161)),0x7d0);}function handleInfiniteScroll(){const _0x27aecb=a3_0x68042c,_0x347cd5=document[_0x27aecb(0xb0)](_0x27aecb(0xde)),_0x15ead6=_0x347cd5['scrollLeft'],_0x40898b=_0x347cd5['scrollWidth'],_0x4b1234=_0x347cd5[_0x27aecb(0xa9)];if(_0x40898b-(_0x15ead6+_0x4b1234)<0x12c){const _0x1ec40e=endOffset;endOffset+=0xe,renderDayRange(_0x1ec40e+0x1,endOffset),reRenderBlocks();}if(_0x15ead6<0x12c){const _0x1323cd=startOffset;startOffset-=0xe,prependDays(startOffset,_0x1323cd-0x1),_0x347cd5['scrollLeft']+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x4e9c3d,_0x4ed033){const _0x27fbef=a3_0x68042c,_0x511c2d=document[_0x27fbef(0xb0)](_0x27fbef(0x105)),_0x1f0ee4=document[_0x27fbef(0xb0)](_0x27fbef(0x91)),_0x2117b4=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1fd2cb=new Date();_0x1fd2cb[_0x27fbef(0x136)](0x0,0x0,0x0,0x0);const _0x324a99=getLocalDateStr(new Date()),_0x3deafd=document[_0x27fbef(0x149)](),_0x3af2f8=document['createDocumentFragment']();for(let _0x362d5e=_0x4e9c3d;_0x362d5e<=_0x4ed033;_0x362d5e++){const _0x2b3af2=new Date(_0x1fd2cb);_0x2b3af2[_0x27fbef(0x167)](_0x2b3af2[_0x27fbef(0x15d)]()+_0x362d5e);const _0x44e525=getLocalDateStr(_0x2b3af2);let _0x275a73=_0x2b3af2['getDay']()-0x1;if(_0x275a73===-0x1)_0x275a73=0x6;const _0x1c3ca2=_0x44e525===_0x324a99,_0x4676f8=document['createElement'](_0x27fbef(0xce));_0x4676f8[_0x27fbef(0xaf)]=_0x27fbef(0x127)+(_0x1c3ca2?_0x27fbef(0x14a):''),_0x4676f8['setAttribute'](_0x27fbef(0x137),_0x44e525),_0x4676f8[_0x27fbef(0x10c)]=_0x27fbef(0x16f)+_0x2117b4[_0x275a73]+_0x27fbef(0xe7)+_0x2b3af2['getDate']()+'</div>',_0x3deafd[_0x27fbef(0xd5)](_0x4676f8);const _0xa779e4=document[_0x27fbef(0x104)](_0x27fbef(0xce));_0xa779e4['className']=_0x27fbef(0x100)+(_0x1c3ca2?_0x27fbef(0x14a):''),_0xa779e4[_0x27fbef(0x11e)](_0x27fbef(0x137),_0x44e525),_0xa779e4[_0x27fbef(0x11e)](_0x27fbef(0x14e),_0x275a73),_0x3af2f8[_0x27fbef(0xd5)](_0xa779e4);}_0x511c2d[_0x27fbef(0x183)](_0x3deafd,_0x511c2d[_0x27fbef(0xae)]),_0x1f0ee4[_0x27fbef(0x183)](_0x3af2f8,_0x1f0ee4[_0x27fbef(0x131)](_0x27fbef(0x178)));}function hexToRgba(_0x568042,_0x15eb67){const _0x5e2f98=a3_0x68042c;let _0x26a3a4;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x5e2f98(0x118)](_0x568042))return _0x26a3a4=_0x568042[_0x5e2f98(0xa7)](0x1)['split'](''),_0x26a3a4[_0x5e2f98(0x15e)]==0x3&&(_0x26a3a4=[_0x26a3a4[0x0],_0x26a3a4[0x0],_0x26a3a4[0x1],_0x26a3a4[0x1],_0x26a3a4[0x2],_0x26a3a4[0x2]]),_0x26a3a4='0x'+_0x26a3a4['join'](''),_0x5e2f98(0x166)+[_0x26a3a4>>0x10&0xff,_0x26a3a4>>0x8&0xff,_0x26a3a4&0xff][_0x5e2f98(0xef)](',')+','+_0x15eb67+')';return _0x5e2f98(0xb8)+_0x15eb67+')';}let confirmResolver=null;function showCustomConfirm(_0x306856,_0x3dea6a,_0x1d1a61=!![]){const _0x179ddd=a3_0x68042c;document[_0x179ddd(0xb0)](_0x179ddd(0x156))[_0x179ddd(0x13b)]=_0x306856,document[_0x179ddd(0xb0)](_0x179ddd(0xbf))['textContent']=_0x3dea6a;const _0x5f1c56=document[_0x179ddd(0xb0)](_0x179ddd(0xba));return _0x1d1a61?(_0x5f1c56[_0x179ddd(0xf1)]['color']=_0x179ddd(0x10e),_0x5f1c56['style'][_0x179ddd(0x162)]=_0x179ddd(0x11c)):(_0x5f1c56[_0x179ddd(0xf1)][_0x179ddd(0x163)]=_0x179ddd(0x93),_0x5f1c56[_0x179ddd(0xf1)][_0x179ddd(0x162)]=_0x179ddd(0x11c)),new Promise(_0x1c97ea=>{const _0x2761fd=_0x179ddd;confirmResolver=_0x1c97ea,document[_0x2761fd(0xb0)]('customConfirm')[_0x2761fd(0x186)]['add'](_0x2761fd(0xab));});}function resolveCustomConfirm(_0x4d7601){const _0x57c84f=a3_0x68042c;document[_0x57c84f(0xb0)](_0x57c84f(0x124))[_0x57c84f(0x186)][_0x57c84f(0xeb)]('visible');if(confirmResolver)confirmResolver(_0x4d7601);}async function tryCancelCurrentSession(){const _0x4415db=a3_0x68042c;if(!currentSession)return;const _0x32d054=await showCustomConfirm(_0x4415db(0x155),_0x4415db(0x98),!![]);if(!_0x32d054)return;const _0x661af5=currentSession;closeAllSheets(),sessions=sessions[_0x4415db(0x164)](_0x5224ca=>_0x5224ca['id']!==_0x661af5['id']),reRenderBlocks(),showToast(_0x4415db(0x96)),lastUserActionTime=Date[_0x4415db(0xda)]();try{const _0x18989e=window[_0x4415db(0xa0)]?.['WebApp'],_0x256f17=await fetch(API_URL,{'method':'POST','body':JSON[_0x4415db(0x179)]({'action':_0x4415db(0xd6),'init_data':_0x18989e?.[_0x4415db(0xe1)]||'','coachId':_0x661af5['coachId'],'dateStr':_0x661af5[_0x4415db(0x101)],'sessionId':_0x661af5['id']})});if(_0x256f17['ok'])DataManager[_0x4415db(0xfc)]();}catch(_0x15d676){showToast(_0x4415db(0x154));}}function a3_0x5365(_0x273b79,_0x462ade){_0x273b79=_0x273b79-0x8d;const _0x474851=a3_0xe7ca();let _0x4b1794=_0x474851[_0x273b79];return _0x4b1794;}function a3_0xe7ca(){const _0x43a6c7=['planned','gridColumns','exceptions','#0a84ff','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ',':00</span>','–û—Ç–º–µ–Ω–µ–Ω–æ','router.html','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','</div>','height','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','clients','completed','calendar','timeColumn','Telegram','.period-switch\x20.p-btn','auto','getMinutes','stopPropagation','.btn-reschedule','blocked-slot\x20stripe-bg','substring','setMonth','clientWidth','2646477qdLQTz','visible','map','coach_profiles','firstChild','className','getElementById','display','POST','headerMonth','max','getTime','setItem','toString','rgba(10,\x20132,\x20255,\x20','861944BXWAon','ccYesBtn','left','–∑–∞\x20','overlay','entries','ccText','anCustomDates','detTime','block','week','<span>','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','getHours','offClick','apply','client-stat-card','setBackgroundColor','div','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','627ZTutvF','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','log','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','floor','appendChild','client_cancel','calc(','10KKnVAC','colIndex','now','mini','.sheet','v9.5-CLIENT-ANALYTICS','matrixViewport','startsWith','globalTimeLine','initData','all','blocked-range-part\x20stripe-bg','cid','126763eSZohN','scrollLeft','</div><div\x20class=\x22dch-num\x22>','custom','expand','rescheduleSheet','remove','toLocaleString','BackButton','addEventListener','join','applyData','style','(((.+)+)+)+$','T23:59:59','start','rs-date-chip','Critical\x20TMA\x20Error:','rsSlotsGrid','search','offsetWidth','syncLoad','uc_client_sessions','saveLocally','uc_client_list','1ysNlOj','detDate','day-column\x20','dateStr','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','ranges','createElement','daysHeaderTrack','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancelContainer','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','borderLeftColor','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','innerHTML','total','#ff453a','backgroundPosition','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','min','detStatus','client_load','rs-time-btn','.rs-date-chip','initDataUnsafe','var(--acc-blue)','test','split','679842CNKVvk','href','600','\x20-\x20','setAttribute','end','push','\x20–≤\x20','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','numeric','customConfirm','querySelectorAll','pattern','day-col-header\x20','6628afLyRO','anEnd','coachId','Error\x20setting\x20back\x20button:','json','px\x20-','user','open','top','querySelector','onclick','rsDatesTrack','disableVerticalSwipes','active','setHours','data-date','\x20–∏–∑\x20','button','zIndex','textContent','WebApp','parse','settings','sort','.btn-cancel','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','keys','anDonutCircle','substr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','.day-col-header[data-date=\x22','offsetLeft','onClick','createDocumentFragment','today','toUpperCase','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','data','data-day-idx','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','78SZlRJo','#050505','forEach','1948408HlECeH','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','ccTitle','cancel_window','getAttribute','get_slots','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','.day-col-header','padStart','getDate','length','long','toast','show','fontWeight','color','filter','value','rgba(','setDate','\x20status-completed','then','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','width','none','analyticsList','getItem','<div\x20class=\x22dch-day\x22>','241884dCuhzJ','backgroundColor','status','getMonth','clientId','getFullYear','getDay','T00:00:00','.day-column','stringify','add','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleDateString','sid','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','flex','25VXYsqA','error','charAt','insertBefore','note','anStart','classList','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','day-off-overlay\x20stripe-bg','var(--acc-green)'];a3_0xe7ca=function(){return _0x43a6c7;};return a3_0xe7ca();}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x251fe1=a3_0x68042c;if(!currentSession)return;document[_0x251fe1(0xb0)]('detailsSheet')[_0x251fe1(0x186)]['remove'](_0x251fe1(0x12f)),document['getElementById'](_0x251fe1(0xea))[_0x251fe1(0x186)][_0x251fe1(0x17a)](_0x251fe1(0x12f));const _0x35d9b0=document[_0x251fe1(0xb0)](_0x251fe1(0x133)),_0x5adf0a=document[_0x251fe1(0xb0)](_0x251fe1(0xf7));_0x35d9b0['innerHTML']='',_0x5adf0a[_0x251fe1(0x10c)]=_0x251fe1(0xd1);const [_0x50de43,_0x35cd53]=currentSession[_0x251fe1(0xf4)][_0x251fe1(0x119)](':')['map'](Number),[_0x24c540,_0x1d96de]=currentSession[_0x251fe1(0x11f)]['split'](':')[_0x251fe1(0xac)](Number),_0x170fe8=_0x24c540*0x3c+_0x1d96de-(_0x50de43*0x3c+_0x35cd53);try{const _0x28964f=window[_0x251fe1(0xa0)]?.[_0x251fe1(0x13c)],_0x557f38=await fetch(API_URL,{'method':_0x251fe1(0xb2),'body':JSON['stringify']({'action':_0x251fe1(0x159),'coachId':currentSession[_0x251fe1(0x12a)],'duration':_0x170fe8,'init_data':_0x28964f?.[_0x251fe1(0xe1)]||'','excludeSessionId':currentSession['id']})}),_0x2b746f=await _0x557f38[_0x251fe1(0x12c)]();_0x2b746f['ok']&&_0x2b746f['data']?(availableSlotsCache=_0x2b746f['data'],renderRescheduleDates()):_0x5adf0a['innerHTML']=_0x251fe1(0x8d);}catch(_0x172b0e){_0x5adf0a[_0x251fe1(0x10c)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x1f7199=a3_0x68042c,_0x53feb0=document[_0x1f7199(0xb0)](_0x1f7199(0x133));_0x53feb0['innerHTML']='';const _0x34cb76=Object[_0x1f7199(0x142)](availableSlotsCache)[_0x1f7199(0x13f)](),_0x3e7cb3=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x34cb76[_0x1f7199(0x15e)]===0x0){document[_0x1f7199(0xb0)]('rsSlotsGrid')[_0x1f7199(0x10c)]=_0x1f7199(0x122);return;}_0x34cb76[_0x1f7199(0x152)]((_0x294f19,_0x5705ce)=>{const _0x553ab3=_0x1f7199,_0x34408e=new Date(_0x294f19),_0x386347=_0x3e7cb3[_0x34408e[_0x553ab3(0x176)]()],_0x2c6cbd=_0x34408e[_0x553ab3(0x15d)](),_0x42ea88=document['createElement'](_0x553ab3(0xce));_0x42ea88[_0x553ab3(0xaf)]=_0x553ab3(0xf5);if(_0x5705ce===0x0)_0x42ea88[_0x553ab3(0x186)][_0x553ab3(0x17a)](_0x553ab3(0x135));_0x42ea88[_0x553ab3(0x10c)]='<div\x20class=\x22rs-day-name\x22>'+_0x386347+'</div><div\x20class=\x22rs-day-num\x22>'+_0x2c6cbd+'</div>',_0x42ea88['onclick']=()=>selectRsDate(_0x294f19,_0x42ea88),_0x53feb0[_0x553ab3(0xd5)](_0x42ea88);}),selectRsDate(_0x34cb76[0x0],_0x53feb0[_0x1f7199(0xae)]);}function selectRsDate(_0x5e4b55,_0x1f0b40){const _0x4f335a=a3_0x68042c;selectedRsDate=_0x5e4b55,document[_0x4f335a(0x125)](_0x4f335a(0x115))[_0x4f335a(0x152)](_0x3caed5=>_0x3caed5['classList'][_0x4f335a(0xeb)](_0x4f335a(0x135)));if(_0x1f0b40)_0x1f0b40['classList'][_0x4f335a(0x17a)](_0x4f335a(0x135));const _0x19fb90=document[_0x4f335a(0xb0)](_0x4f335a(0xf7));_0x19fb90['innerHTML']='';const _0x2eed3c=availableSlotsCache[_0x5e4b55]||[];if(_0x2eed3c[_0x4f335a(0x15e)]===0x0){_0x19fb90[_0x4f335a(0x10c)]=_0x4f335a(0x8d);return;}_0x2eed3c['forEach'](_0x111f26=>{const _0x2b9301=_0x4f335a,_0x53a531=document[_0x2b9301(0x104)](_0x2b9301(0x139));_0x53a531['className']=_0x2b9301(0x114),_0x53a531[_0x2b9301(0x13b)]=_0x111f26,_0x53a531[_0x2b9301(0x132)]=()=>confirmReschedule(_0x111f26),_0x19fb90[_0x2b9301(0xd5)](_0x53a531);});}async function confirmReschedule(_0x176f3b){const _0x40af43=a3_0x68042c,_0x56f45b=new Date(selectedRsDate),_0x4fda25=_0x56f45b[_0x40af43(0x17c)]('ru-RU',{'day':'numeric','month':_0x40af43(0x15f)}),_0x45dc3f=await showCustomConfirm(_0x40af43(0x108),_0x40af43(0x141)+_0x4fda25+_0x40af43(0x121)+_0x176f3b+'?',![]);if(!_0x45dc3f)return;closeAllSheets(),showToast(_0x40af43(0xc8)),lastUserActionTime=Date[_0x40af43(0xda)]();const _0x5ad286=currentSession[_0x40af43(0x101)],_0x5a79ac=currentSession['id'],[_0x412db0,_0x4e899a]=currentSession[_0x40af43(0xf4)]['split'](':')['map'](Number),[_0x481927,_0x3c2502]=currentSession[_0x40af43(0x11f)]['split'](':')[_0x40af43(0xac)](Number),_0x463fd1=_0x481927*0x3c+_0x3c2502-(_0x412db0*0x3c+_0x4e899a),[_0x11c139,_0x5c36a0]=_0x176f3b['split'](':')[_0x40af43(0xac)](Number),_0x5896c9=_0x11c139*0x3c+_0x5c36a0+_0x463fd1,_0x882660=Math[_0x40af43(0xd4)](_0x5896c9/0x3c),_0x5686fa=_0x5896c9%0x3c,_0x54894f=String(_0x882660)['padStart'](0x2,'0')+':'+String(_0x5686fa)[_0x40af43(0x15c)](0x2,'0'),_0x367bd3=sessions['findIndex'](_0x27ca0f=>_0x27ca0f['id']===_0x5a79ac);_0x367bd3!==-0x1&&(sessions[_0x367bd3]['dateStr']=selectedRsDate,sessions[_0x367bd3][_0x40af43(0xf4)]=_0x176f3b,sessions[_0x367bd3][_0x40af43(0x11f)]=_0x54894f,reRenderBlocks());try{const _0x5b2cb4=window[_0x40af43(0xa0)]?.[_0x40af43(0x13c)],_0x3d762c=await fetch(API_URL,{'method':_0x40af43(0xb2),'body':JSON['stringify']({'action':'reschedule','init_data':_0x5b2cb4?.[_0x40af43(0xe1)]||'','oldSessionId':_0x5a79ac,'oldDate':_0x5ad286,'newDate':selectedRsDate,'newTime':_0x176f3b,'coachId':currentSession[_0x40af43(0x12a)]})}),_0x2de0f0=await _0x3d762c[_0x40af43(0x12c)]();!_0x2de0f0['ok']?(showToast(_0x40af43(0x102)),DataManager[_0x40af43(0xfa)]()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x40af43(0xfc)]());}catch(_0x500667){showToast(_0x40af43(0x154));}}document[a3_0x68042c(0xee)](a3_0x68042c(0xc5),init);