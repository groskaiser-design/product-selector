const a3_0x454e55=a3_0x10a1;(function(_0x41df4b,_0x450fd9){const _0x516ae9=a3_0x10a1,_0x491ff1=_0x41df4b();while(!![]){try{const _0x54f36b=-parseInt(_0x516ae9(0x127))/0x1*(-parseInt(_0x516ae9(0x145))/0x2)+parseInt(_0x516ae9(0xdc))/0x3*(-parseInt(_0x516ae9(0x196))/0x4)+-parseInt(_0x516ae9(0x1a0))/0x5+parseInt(_0x516ae9(0x15a))/0x6*(-parseInt(_0x516ae9(0x18a))/0x7)+-parseInt(_0x516ae9(0xab))/0x8*(parseInt(_0x516ae9(0xe7))/0x9)+parseInt(_0x516ae9(0x137))/0xa+parseInt(_0x516ae9(0xd6))/0xb;if(_0x54f36b===_0x450fd9)break;else _0x491ff1['push'](_0x491ff1['shift']());}catch(_0x207b5f){_0x491ff1['push'](_0x491ff1['shift']());}}}(a3_0x549d,0x5da78));const APP_VERSION=a3_0x454e55(0xeb),API_URL=a3_0x454e55(0x115),GRID_H=0x3c,KEY_SESSIONS=a3_0x454e55(0xf2),KEY_SETTINGS=a3_0x454e55(0xb5),KEY_CLIENTS='uc_client_list';let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x454e55(0x13b),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x1bfeb0=a3_0x454e55,_0x2dd40d=(function(){let _0x4daf8b=!![];return function(_0x5a3d98,_0x4a6eb0){const _0x1412ad=_0x4daf8b?function(){if(_0x4a6eb0){const _0x3be078=_0x4a6eb0['apply'](_0x5a3d98,arguments);return _0x4a6eb0=null,_0x3be078;}}:function(){};return _0x4daf8b=![],_0x1412ad;};}()),_0x4cb546=_0x2dd40d(this,function(){const _0x277015=a3_0x10a1;return _0x4cb546[_0x277015(0xec)]()[_0x277015(0x19a)]('(((.+)+)+)+$')[_0x277015(0xec)]()['constructor'](_0x4cb546)['search']('(((.+)+)+)+$');});_0x4cb546();try{const _0x4bb9b7=window['Telegram']?.[_0x1bfeb0(0x185)];if(!_0x4bb9b7)return;_0x4bb9b7[_0x1bfeb0(0xa6)](),_0x4bb9b7[_0x1bfeb0(0xf5)]();try{_0x4bb9b7[_0x1bfeb0(0x18b)](_0x1bfeb0(0x163)),_0x4bb9b7['setBackgroundColor']&&_0x4bb9b7['setBackgroundColor'](_0x1bfeb0(0x163));}catch(_0x5b6280){console['log'](_0x1bfeb0(0xef),_0x5b6280);}try{_0x4bb9b7[_0x1bfeb0(0xf7)]&&(_0x4bb9b7[_0x1bfeb0(0xf7)][_0x1bfeb0(0x16a)](),_0x4bb9b7[_0x1bfeb0(0xf7)][_0x1bfeb0(0xe2)](),_0x4bb9b7['BackButton']['onClick'](function(){const _0x473b4f=_0x1bfeb0;window[_0x473b4f(0x134)][_0x473b4f(0x164)]='router.html';}));}catch(_0x428a99){console[_0x1bfeb0(0xc8)](_0x1bfeb0(0x143),_0x428a99);}try{if(_0x4bb9b7[_0x1bfeb0(0xaf)])_0x4bb9b7['disableVerticalSwipes']();}catch(_0xf48a45){}}catch(_0x59390f){console[_0x1bfeb0(0x167)](_0x1bfeb0(0x11f),_0x59390f);}}());function isAdmin(){const _0x37e027=a3_0x454e55;try{const _0x5f0316=Number(window[_0x37e027(0xe0)]?.[_0x37e027(0x185)]?.[_0x37e027(0x13d)]?.['user']?.['id']);return _0x5f0316===0xbaf7174;}catch(_0x8a1ae6){return![];}}function a3_0x10a1(_0x205d25,_0x3add4f){_0x205d25=_0x205d25-0xa4;const _0xed3306=a3_0x549d();let _0xe5de8e=_0xed3306[_0x205d25];return _0xe5de8e;}const DataManager={'saveLocally'(){const _0x39ba61=a3_0x454e55;try{localStorage[_0x39ba61(0x13c)](KEY_SESSIONS,JSON[_0x39ba61(0x146)](sessions)),localStorage[_0x39ba61(0x13c)](KEY_CLIENTS,JSON[_0x39ba61(0x146)](clients)),localStorage[_0x39ba61(0x13c)](KEY_SETTINGS,JSON[_0x39ba61(0x146)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x4e41b4){}},'loadLocal'(){const _0x10952a=a3_0x454e55;try{const _0x2a8677=localStorage['getItem'](KEY_SESSIONS);if(_0x2a8677)sessions=JSON[_0x10952a(0x125)](_0x2a8677);const _0x294352=localStorage[_0x10952a(0x135)](KEY_CLIENTS);if(_0x294352)clients=JSON[_0x10952a(0x125)](_0x294352);const _0x379ee6=localStorage['getItem'](KEY_SETTINGS);if(_0x379ee6){const _0x44f3f2=JSON[_0x10952a(0x125)](_0x379ee6);if(_0x44f3f2['pattern'])availabilityPattern=_0x44f3f2[_0x10952a(0xc7)];if(_0x44f3f2[_0x10952a(0x12f)])specialRanges=_0x44f3f2['ranges'];if(_0x44f3f2[_0x10952a(0x103)])dateExceptions=_0x44f3f2[_0x10952a(0x103)];}}catch(_0x4c4b84){}},async 'syncLoad'(){const _0x1c522c=a3_0x454e55,_0x405493=new Date(),_0x478490=_0x405493[_0x1c522c(0x11b)]()+'-'+String(_0x405493[_0x1c522c(0xfc)]()+0x1)[_0x1c522c(0x172)](0x2,'0'),_0x4a82f9=new Date(_0x405493);_0x4a82f9[_0x1c522c(0xc2)](_0x405493[_0x1c522c(0xfc)]()+0x1);const _0x5a9f23=_0x4a82f9[_0x1c522c(0x11b)]()+'-'+String(_0x4a82f9[_0x1c522c(0xfc)]()+0x1)[_0x1c522c(0x172)](0x2,'0'),_0x3d0bb1=Date[_0x1c522c(0xd4)]();try{const _0x3c169c=window[_0x1c522c(0xe0)]?.[_0x1c522c(0x185)],_0x1ba585=_0x3c169c?.[_0x1c522c(0xb6)]||'',[_0x2422ac,_0x125c8c]=await Promise['all']([fetch(API_URL,{'method':_0x1c522c(0x18d),'body':JSON[_0x1c522c(0x146)]({'action':_0x1c522c(0xea),'init_data':_0x1ba585,'month_str':_0x478490})})[_0x1c522c(0xfb)](_0x2be164=>_0x2be164[_0x1c522c(0x15c)]()),fetch(API_URL,{'method':_0x1c522c(0x18d),'body':JSON[_0x1c522c(0x146)]({'action':_0x1c522c(0xea),'init_data':_0x1ba585,'month_str':_0x5a9f23})})[_0x1c522c(0xfb)](_0x4912c9=>_0x4912c9[_0x1c522c(0x15c)]())]);if(lastUserActionTime>_0x3d0bb1){console[_0x1c522c(0xc8)](_0x1c522c(0x16b));return;}if(_0x2422ac['ok'])this[_0x1c522c(0x13f)](_0x2422ac['data'],_0x478490);if(_0x125c8c['ok'])this['applyData'](_0x125c8c[_0x1c522c(0x126)],_0x5a9f23);this['saveLocally']();}catch(_0x3f4feb){}},'applyData'(_0x1e721c,_0x2da8d7){const _0x432b5d=a3_0x454e55;if(!_0x1e721c)return;if(_0x1e721c['settings']){if(_0x1e721c[_0x432b5d(0x133)]['pattern'])availabilityPattern=_0x1e721c[_0x432b5d(0x133)]['pattern'];if(_0x1e721c['settings'][_0x432b5d(0x12f)])specialRanges=_0x1e721c[_0x432b5d(0x133)][_0x432b5d(0x12f)];if(_0x1e721c[_0x432b5d(0x133)][_0x432b5d(0x103)])dateExceptions=_0x1e721c[_0x432b5d(0x133)][_0x432b5d(0x103)];}if(_0x1e721c['clients']&&Array[_0x432b5d(0xed)](_0x1e721c['clients']))clients=_0x1e721c[_0x432b5d(0x122)];_0x1e721c['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x1e721c[_0x432b5d(0xc9)]}),_0x1e721c[_0x432b5d(0x100)]&&(sessions=sessions[_0x432b5d(0x117)](_0x5678a4=>!_0x5678a4[_0x432b5d(0x113)][_0x432b5d(0xcc)](_0x2da8d7)),Object[_0x432b5d(0xc6)](_0x1e721c[_0x432b5d(0x100)])['forEach'](_0x2a039e=>{const _0x45ceac=_0x432b5d,_0x11d8a9=_0x1e721c[_0x45ceac(0x100)][_0x2a039e];_0x11d8a9['forEach'](_0x7bcdc5=>{const _0x2bf504=_0x45ceac;sessions[_0x2bf504(0xf3)]({'id':_0x7bcdc5['i'],'clientId':_0x7bcdc5['c'],'coachId':_0x7bcdc5[_0x2bf504(0x17d)],'dateStr':_0x2da8d7+'-'+_0x2a039e[_0x2bf504(0x172)](0x2,'0'),'start':_0x7bcdc5['s'],'end':_0x7bcdc5['e'],'note':_0x7bcdc5['n']||'','status':_0x7bcdc5['st']||_0x2bf504(0x14e),'seriesId':_0x7bcdc5[_0x2bf504(0x11d)]});});})),reRenderBlocks();}};function init(){const _0x126fde=a3_0x454e55;DataManager[_0x126fde(0x187)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x126fde(0xdf)](_0x126fde(0x14a))[_0x126fde(0xf8)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x126fde(0x139)]();}function renderTimeColumn(){const _0x517786=a3_0x454e55,_0x3ada2b=document[_0x517786(0xdf)](_0x517786(0x161)),_0x35e087=document[_0x517786(0xdf)](_0x517786(0xda));_0x3ada2b['innerHTML']='',_0x3ada2b[_0x517786(0x152)](_0x35e087);for(let _0x155063=0x0;_0x155063<0x18;_0x155063++){const _0x1535b4=document[_0x517786(0x131)](_0x517786(0x17b));_0x1535b4[_0x517786(0x18c)]=_0x517786(0x10c);if(_0x155063>0x0)_0x1535b4['innerHTML']='<span>'+String(_0x155063)[_0x517786(0x172)](0x2,'0')+_0x517786(0x14f);_0x3ada2b[_0x517786(0x152)](_0x1535b4);}}function renderDayRange(_0x103a9f,_0x5a3494){const _0x5ab847=a3_0x454e55,_0x1a8ba3=document[_0x5ab847(0xdf)](_0x5ab847(0x136)),_0x521162=document['getElementById'](_0x5ab847(0xc3)),_0x19094d=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x176d08=new Date();_0x176d08[_0x5ab847(0xa7)](0x0,0x0,0x0,0x0);const _0xa77cc=getLocalDateStr(new Date());for(let _0x57636f=_0x103a9f;_0x57636f<=_0x5a3494;_0x57636f++){const _0x3c42d9=new Date(_0x176d08);_0x3c42d9[_0x5ab847(0x109)](_0x3c42d9['getDate']()+_0x57636f);const _0x317e84=getLocalDateStr(_0x3c42d9);let _0x13ed17=_0x3c42d9[_0x5ab847(0xb1)]()-0x1;if(_0x13ed17===-0x1)_0x13ed17=0x6;const _0x360449=_0x317e84===_0xa77cc,_0xafd6b9=document[_0x5ab847(0x131)](_0x5ab847(0x17b));_0xafd6b9['className']='day-col-header\x20'+(_0x360449?_0x5ab847(0xfe):''),_0xafd6b9[_0x5ab847(0x151)](_0x5ab847(0xe4),_0x317e84),_0xafd6b9['innerHTML']=_0x5ab847(0x175)+_0x19094d[_0x13ed17]+_0x5ab847(0x104)+_0x3c42d9[_0x5ab847(0x155)]()+_0x5ab847(0xb7),_0x1a8ba3[_0x5ab847(0x152)](_0xafd6b9);const _0x33337f=document[_0x5ab847(0x131)](_0x5ab847(0x17b));_0x33337f[_0x5ab847(0x18c)]=_0x5ab847(0x10b)+(_0x360449?'today':''),_0x33337f['setAttribute']('data-date',_0x317e84),_0x33337f[_0x5ab847(0x151)]('data-day-idx',_0x13ed17),_0x521162[_0x5ab847(0x152)](_0x33337f);}}function reRenderBlocks(){const _0x48e556=a3_0x454e55;document['querySelectorAll'](_0x48e556(0xb8))[_0x48e556(0x153)](_0x1bd37b=>{const _0x7e3511=_0x48e556;_0x1bd37b[_0x7e3511(0xa5)](_0x7e3511(0xd9))[_0x7e3511(0x153)](_0x24320e=>_0x24320e[_0x7e3511(0xfa)]());const _0x1836e7=_0x1bd37b[_0x7e3511(0x197)](_0x7e3511(0xe4)),_0x3f4d5c=parseInt(_0x1bd37b[_0x7e3511(0x197)](_0x7e3511(0x17f))),_0x34689f=Math[_0x7e3511(0x12b)](_0x1bd37b[_0x7e3511(0x156)]);(availabilityPattern[_0x3f4d5c]||[])[_0x7e3511(0x153)](_0x345adb=>{const _0x32c047=_0x7e3511,_0x3d05d2=document[_0x32c047(0x131)](_0x32c047(0x17b));_0x3d05d2['className']='blocked-slot\x20stripe-bg',_0x3d05d2[_0x32c047(0x193)][_0x32c047(0xc0)]=_0x345adb*GRID_H+'px',_0x3d05d2['style'][_0x32c047(0x168)]='-'+_0x34689f+_0x32c047(0x130)+_0x345adb*GRID_H+'px',_0x1bd37b[_0x32c047(0x152)](_0x3d05d2);});if(specialRanges['length']>0x0){const _0x52c5b3=new Date(_0x1836e7+_0x7e3511(0xd2))[_0x7e3511(0x12a)](),_0x2aa4fc=new Date(_0x1836e7+_0x7e3511(0x138))[_0x7e3511(0x12a)]();specialRanges['forEach'](_0x1871b6=>{const _0x55a681=_0x7e3511,_0x489eac=new Date(_0x1871b6['start'])[_0x55a681(0x12a)](),_0x530d8d=new Date(_0x1871b6[_0x55a681(0x189)])[_0x55a681(0x12a)](),_0x298bcb=Math[_0x55a681(0xe5)](_0x52c5b3,_0x489eac),_0x1349e5=Math[_0x55a681(0xf4)](_0x2aa4fc,_0x530d8d);if(_0x298bcb<_0x1349e5){const _0x18cb44=(_0x298bcb-_0x52c5b3)/0x36ee80*GRID_H,_0x4cc27f=(_0x1349e5-_0x298bcb)/0x36ee80*GRID_H,_0x4a3477=document[_0x55a681(0x131)](_0x55a681(0x17b));_0x4cc27f>=23.5*GRID_H?(_0x4a3477[_0x55a681(0x18c)]='day-off-overlay\x20stripe-bg',_0x4a3477[_0x55a681(0x193)]['backgroundPosition']='-'+_0x34689f+_0x55a681(0xd5)):(_0x4a3477[_0x55a681(0x18c)]=_0x55a681(0x118),_0x4a3477['style']['top']=_0x18cb44+'px',_0x4a3477[_0x55a681(0x193)][_0x55a681(0xfd)]=_0x4cc27f+'px',_0x4a3477[_0x55a681(0x193)][_0x55a681(0x168)]='-'+_0x34689f+_0x55a681(0x130)+_0x18cb44+'px'),_0x1bd37b[_0x55a681(0x152)](_0x4a3477);}});}renderEventsForColumn(_0x1bd37b,_0x1836e7);});}function renderEventsForColumn(_0x559f81,_0x45912a){const _0x397315=a3_0x454e55,_0x1e6998=sessions[_0x397315(0x117)](_0x1cf325=>_0x1cf325['dateStr']===_0x45912a),_0x56c543=_0x1e6998[_0x397315(0x105)](_0x476dcc=>{const _0x4edece=_0x397315,[_0x48535d,_0x2efacb]=_0x476dcc[_0x4edece(0x121)][_0x4edece(0x159)](':')[_0x4edece(0x105)](Number),[_0x3f9784,_0x410bdd]=_0x476dcc[_0x4edece(0x189)][_0x4edece(0x159)](':')[_0x4edece(0x105)](Number);return{'data':_0x476dcc,'start':_0x48535d*0x3c+_0x2efacb,'end':_0x3f9784*0x3c+_0x410bdd,'colIndex':0x0};});_0x56c543[_0x397315(0xb2)]((_0x44f9d2,_0x171d4a)=>_0x44f9d2[_0x397315(0x121)]-_0x171d4a[_0x397315(0x121)]||_0x171d4a[_0x397315(0x189)]-_0x171d4a['start']-(_0x44f9d2[_0x397315(0x189)]-_0x44f9d2[_0x397315(0x121)]));const _0x24cfa6=[];_0x56c543['forEach'](_0xf8858c=>{const _0x4b5beb=_0x397315;let _0x3771b3=![];for(let _0x48f98a=0x0;_0x48f98a<_0x24cfa6['length'];_0x48f98a++){const _0x433f92=_0x24cfa6[_0x48f98a];if(_0xf8858c['start']>=_0x433f92[_0x433f92[_0x4b5beb(0xe9)]-0x1][_0x4b5beb(0x189)]){_0x433f92[_0x4b5beb(0xf3)](_0xf8858c),_0xf8858c['colIndex']=_0x48f98a,_0x3771b3=!![];break;}}!_0x3771b3&&(_0x24cfa6[_0x4b5beb(0xf3)]([_0xf8858c]),_0xf8858c[_0x4b5beb(0x19b)]=_0x24cfa6[_0x4b5beb(0xe9)]-0x1);}),_0x56c543[_0x397315(0x153)](_0x3c36f3=>{const _0x2dca61=_0x397315;let _0x22495d=0x0;_0x56c543['forEach'](_0x4608ed=>{const _0xb7d973=a3_0x10a1;if(Math[_0xb7d973(0xe5)](_0x3c36f3[_0xb7d973(0x121)],_0x4608ed[_0xb7d973(0x121)])<Math[_0xb7d973(0xf4)](_0x3c36f3[_0xb7d973(0x189)],_0x4608ed[_0xb7d973(0x189)])&&_0x4608ed['colIndex']>_0x22495d)_0x22495d=_0x4608ed[_0xb7d973(0x19b)];});const _0xdbe6a7=_0x22495d+0x1,_0x25b0f1=0x64/_0xdbe6a7,_0x49ef8a=_0x3c36f3[_0x2dca61(0x19b)]*_0x25b0f1,_0x4652a0=document['createElement'](_0x2dca61(0x17b)),_0x1a729f=_0x3c36f3['data'];let _0x3cda7e=_0x2dca61(0xde);if(clients&&clients[_0x2dca61(0xe9)]>0x0){const _0x4569c5=clients['find'](_0xf3dcaf=>String(_0xf3dcaf['id'])===String(_0x1a729f['clientId']));if(_0x4569c5&&_0x4569c5[_0x2dca61(0x178)])_0x3cda7e=_0x4569c5['color'];}const _0x1c0184=_0x1a729f[_0x2dca61(0x141)]==='completed',_0xa4f8ce=_0x1c0184?0x1:0.45;_0x4652a0[_0x2dca61(0x18c)]=_0x2dca61(0x11e)+(_0x1c0184?_0x2dca61(0x15f):''),_0x4652a0[_0x2dca61(0x193)][_0x2dca61(0x10f)]=hexToRgba(_0x3cda7e,_0xa4f8ce),_0x4652a0[_0x2dca61(0x193)][_0x2dca61(0x17c)]=_0x3cda7e;const _0x53ddb3=_0x3c36f3[_0x2dca61(0x121)]/0x3c*GRID_H,_0x382e3f=(_0x3c36f3[_0x2dca61(0x189)]-_0x3c36f3[_0x2dca61(0x121)])/0x3c*GRID_H;_0x4652a0[_0x2dca61(0x193)][_0x2dca61(0xc0)]=_0x53ddb3+'px',_0x4652a0[_0x2dca61(0x193)]['height']=Math['max'](_0x382e3f,0x14)+'px',_0x4652a0['style'][_0x2dca61(0x18e)]=_0x2dca61(0x19c)+_0x25b0f1+_0x2dca61(0x190),_0x4652a0[_0x2dca61(0x193)][_0x2dca61(0x16d)]='calc('+_0x49ef8a+_0x2dca61(0xf9),_0x4652a0['style']['zIndex']=0xa+_0x3c36f3['colIndex'];if(_0x25b0f1<0x55)_0x4652a0[_0x2dca61(0xbc)]['add'](_0x2dca61(0xbd));let _0x314953='';if(_0x1a729f['seriesId'])_0x314953+=_0x2dca61(0x12c);if(_0x1c0184)_0x314953+=_0x2dca61(0xac);_0x4652a0[_0x2dca61(0x14d)]=_0x2dca61(0x171)+_0x1a729f[_0x2dca61(0x121)]+_0x2dca61(0x150)+_0x1a729f[_0x2dca61(0x189)]+_0x2dca61(0x1a1)+_0x314953+_0x2dca61(0x184),_0x4652a0['onclick']=_0x133577=>{const _0x56077b=_0x2dca61;_0x133577[_0x56077b(0xae)](),openDetails(_0x1a729f);},_0x559f81[_0x2dca61(0x152)](_0x4652a0);});}function openAnalytics(){const _0x304d1f=a3_0x454e55,_0x347172=document[_0x304d1f(0x181)](_0x304d1f(0xf1));setAnalyticsPeriod('week',_0x347172),openSheet(_0x304d1f(0x170));}function setAnalyticsPeriod(_0x6f1468,_0x1d250d){const _0x28abc5=a3_0x454e55;currentAnPeriod=_0x6f1468,document[_0x28abc5(0xa5)](_0x28abc5(0xf1))['forEach'](_0x161527=>_0x161527['classList']['remove']('active'));if(_0x1d250d)_0x1d250d[_0x28abc5(0xbc)]['add'](_0x28abc5(0x110));const _0xb530b1=document[_0x28abc5(0xdf)](_0x28abc5(0x148));_0xb530b1[_0x28abc5(0x193)][_0x28abc5(0x15d)]=_0x6f1468===_0x28abc5(0x102)?'flex':'none';const _0x5a82a5=new Date();let _0x2195bc=new Date(),_0x675000=new Date();if(_0x6f1468===_0x28abc5(0x13b))_0x2195bc=getStartOfWeek(_0x5a82a5),_0x675000=new Date(_0x2195bc),_0x675000[_0x28abc5(0x109)](_0x675000['getDate']()+0x6);else{if(_0x6f1468===_0x28abc5(0x182))_0x2195bc=new Date(_0x5a82a5[_0x28abc5(0x11b)](),_0x5a82a5[_0x28abc5(0xfc)](),0x1),_0x675000=new Date(_0x5a82a5[_0x28abc5(0x11b)](),_0x5a82a5[_0x28abc5(0xfc)]()+0x1,0x0);else{!document[_0x28abc5(0xdf)]('anStart')['value']&&(document[_0x28abc5(0xdf)](_0x28abc5(0xff))['value']=getLocalDateStr(_0x5a82a5),document['getElementById'](_0x28abc5(0x17a))['value']=getLocalDateStr(_0x5a82a5));refreshAnalytics();return;}}document[_0x28abc5(0xdf)](_0x28abc5(0xff))['value']=getLocalDateStr(_0x2195bc),document[_0x28abc5(0xdf)]('anEnd')[_0x28abc5(0x111)]=getLocalDateStr(_0x675000),refreshAnalytics();}function refreshAnalytics(){const _0x59fb08=a3_0x454e55,_0xcc4ef0=document[_0x59fb08(0xdf)](_0x59fb08(0xff))[_0x59fb08(0x111)],_0x492d0a=document[_0x59fb08(0xdf)](_0x59fb08(0x17a))[_0x59fb08(0x111)];if(!_0xcc4ef0||!_0x492d0a)return;const _0x370c6f=sessions[_0x59fb08(0x117)](_0x15464b=>_0x15464b[_0x59fb08(0x113)]>=_0xcc4ef0&&_0x15464b[_0x59fb08(0x113)]<=_0x492d0a&&_0x15464b[_0x59fb08(0x141)]!==_0x59fb08(0xd0)),_0x12fd48=_0x370c6f[_0x59fb08(0xe9)],_0x5610aa=_0x370c6f[_0x59fb08(0x117)](_0x4f7d95=>_0x4f7d95[_0x59fb08(0x141)]===_0x59fb08(0x13e))[_0x59fb08(0xe9)],_0x277153=_0x12fd48>0x0?Math[_0x59fb08(0x12b)](_0x5610aa/_0x12fd48*0x64):0x0;document[_0x59fb08(0xdf)](_0x59fb08(0x162))['textContent']=_0x277153+'%',document['getElementById']('anTotalStats')[_0x59fb08(0x15e)]=_0x5610aa+_0x59fb08(0x112)+_0x12fd48+_0x59fb08(0x108);const _0x319a77=document[_0x59fb08(0xdf)](_0x59fb08(0xb9)),_0x858330=0x2*Math['PI']*0x23,_0x1a8215=_0x858330-_0x277153/0x64*_0x858330;_0x319a77[_0x59fb08(0x193)][_0x59fb08(0x165)]=_0x1a8215;const _0x685ed8={};_0x370c6f[_0x59fb08(0x153)](_0x4e4c12=>{const _0x167590=_0x59fb08,_0xbbca09=_0x4e4c12['coachId']||_0x167590(0x18f);if(!_0x685ed8[_0xbbca09]){const _0x12e7e1='#'+_0xbbca09[_0x167590(0xec)]()[_0x167590(0x101)](0x0,0x6);_0x685ed8[_0xbbca09]={'total':0x0,'done':0x0,'color':_0x12e7e1};}_0x685ed8[_0xbbca09][_0x167590(0x158)]++;if(_0x4e4c12[_0x167590(0x141)]===_0x167590(0x13e))_0x685ed8[_0xbbca09][_0x167590(0x188)]++;});const _0x4a691a=document[_0x59fb08(0xdf)](_0x59fb08(0x128));_0x4a691a[_0x59fb08(0x14d)]='';const _0x2e3421=Object[_0x59fb08(0x199)](_0x685ed8)[_0x59fb08(0xb2)]((_0x18caff,_0x57cac0)=>_0x57cac0[0x1]['total']-_0x18caff[0x1][_0x59fb08(0x158)]);if(_0x2e3421[_0x59fb08(0xe9)]===0x0){_0x4a691a[_0x59fb08(0x14d)]=_0x59fb08(0xad);return;}_0x2e3421[_0x59fb08(0x153)](([_0x17e302,_0x1af98d])=>{const _0x200a00=_0x59fb08,_0x2d8564=Math[_0x200a00(0x12b)](_0x1af98d[_0x200a00(0x188)]/_0x1af98d['total']*0x64),_0x5847f1=document[_0x200a00(0x131)](_0x200a00(0x17b));_0x5847f1[_0x200a00(0x18c)]=_0x200a00(0x16f),_0x5847f1[_0x200a00(0x193)][_0x200a00(0x17c)]=_0x1af98d[_0x200a00(0x178)],_0x5847f1[_0x200a00(0x14d)]=_0x200a00(0x177)+_0x17e302[_0x200a00(0x101)](0x0,0x5)+_0x200a00(0x16c)+_0x1af98d['done']+'</span>\x20/\x20'+_0x1af98d[_0x200a00(0x158)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x2d8564+_0x200a00(0xce),_0x4a691a[_0x200a00(0x152)](_0x5847f1);});}function openDetails(_0x3f120a){const _0x473779=a3_0x454e55;currentSession=_0x3f120a;const _0xd8574c=new Date(_0x3f120a['dateStr']),_0x8ae7de=_0xd8574c['toLocaleDateString'](_0x473779(0x114),{'weekday':_0x473779(0x183),'day':_0x473779(0xc4),'month':_0x473779(0x183)});document[_0x473779(0xdf)](_0x473779(0xd8))['textContent']=_0x8ae7de['charAt'](0x0)[_0x473779(0x119)]()+_0x8ae7de[_0x473779(0xe8)](0x1),document[_0x473779(0xdf)]('detTime')[_0x473779(0x15e)]=_0x3f120a[_0x473779(0x121)]+_0x473779(0x150)+_0x3f120a['end'],document[_0x473779(0xdf)](_0x473779(0x173))[_0x473779(0x15e)]=_0x3f120a['note']||_0x473779(0xe3);const _0x3f9be5=document['getElementById']('detStatus'),_0x50e49e=document['getElementById'](_0x473779(0x19f)),_0x5b9452=_0x50e49e[_0x473779(0x181)](_0x473779(0x176)),_0x26895c=_0x50e49e[_0x473779(0x181)](_0x473779(0xd1)),_0x338500=document['getElementById'](_0x473779(0x12d));if(_0x3f120a[_0x473779(0x141)]==='completed')_0x3f9be5['textContent']=_0x473779(0xb4),_0x3f9be5['style']['color']=_0x473779(0xcb),_0x50e49e[_0x473779(0x193)][_0x473779(0x15d)]='none';else{_0x3f9be5[_0x473779(0x15e)]=_0x473779(0x144),_0x3f9be5[_0x473779(0x193)][_0x473779(0x178)]='var(--acc-blue)',_0x50e49e['style'][_0x473779(0x15d)]=_0x473779(0x142);const _0x2a2017=new Date(_0x3f120a[_0x473779(0x113)]+'T'+_0x3f120a[_0x473779(0x121)]),_0x37858b=new Date(),_0x2f402a=(_0x2a2017-_0x37858b)/(0x3e8*0x3c*0x3c),_0x5b0bcd=coachProfiles[_0x3f120a[_0x473779(0x123)]]&&coachProfiles[_0x3f120a[_0x473779(0x123)]][_0x473779(0x166)]?parseInt(coachProfiles[_0x3f120a[_0x473779(0x123)]][_0x473779(0x166)]):0x18;if(_0x5b0bcd===0x0||_0x2f402a>=_0x5b0bcd)_0x5b9452[_0x473779(0x193)][_0x473779(0x15d)]='block',_0x26895c[_0x473779(0x193)]['display']='block',_0x338500[_0x473779(0x193)]['display']=_0x473779(0xcf);else{_0x5b9452[_0x473779(0x193)][_0x473779(0x15d)]=_0x473779(0xcf),_0x26895c['style'][_0x473779(0x15d)]=_0x473779(0xcf),_0x338500[_0x473779(0x193)][_0x473779(0x15d)]=_0x473779(0x142);let _0x2d250c=_0x5b0bcd===0x0?_0x473779(0x12e):_0x473779(0x13a)+_0x5b0bcd+_0x473779(0x19e);_0x338500[_0x473779(0x15e)]=_0x473779(0x160)+_0x2d250c+_0x473779(0x157);}}document[_0x473779(0xdf)](_0x473779(0x186))['classList'][_0x473779(0xbe)](_0x473779(0x110)),document['getElementById'](_0x473779(0x140))[_0x473779(0xbc)][_0x473779(0xbe)](_0x473779(0x10e));}function a3_0x549d(){const _0x333439=['1755306TccFag','slice','length','client_load','v9.5-CLIENT-ANALYTICS','toString','isArray','firstChild','Error\x20setting\x20color:','getMinutes','.period-switch\x20.p-btn','uc_client_sessions','push','min','expand','rsDatesTrack','BackButton','addEventListener','%\x20+\x202px)','remove','then','getMonth','height','today','anStart','calendar','substr','custom','exceptions','</div><div\x20class=\x22dch-num\x22>','map','visible','floor','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','setDate','rescheduleSheet','day-column\x20','time-label','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','open','backgroundColor','active','value','\x20–∏–∑\x20','dateStr','ru-RU','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','\x20–≤\x20','filter','blocked-range-part\x20stripe-bg','toUpperCase','ccTitle','getFullYear','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','sid','event-card','Critical\x20TMA\x20Error:','customConfirm','start','clients','coachId','findIndex','parse','data','6sMEbpL','analyticsList','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','getTime','round','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','cancelHint','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','ranges','px\x20-','createElement','rs-time-btn','settings','location','getItem','daysHeaderTrack','1755720jjeqqT','T23:59:59','syncLoad','–∑–∞\x20','week','setItem','initDataUnsafe','completed','applyData','detailsSheet','status','block','Error\x20setting\x20back\x20button:','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','89106nWCDYO','stringify','DOMContentLoaded','anCustomDates','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','matrixViewport','auto','ccYesBtn','innerHTML','planned',':00</span>','\x20-\x20','setAttribute','appendChild','forEach','toLocaleDateString','getDate','offsetLeft','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','total','split','314214vLlyeU','join','json','display','textContent','\x20status-completed','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','timeColumn','anPercent','#050505','href','strokeDashoffset','cancel_window','error','backgroundPosition','client_cancel','show','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','left','rsSlotsGrid','client-stat-card','analyticsSheet','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','padStart','detNote','globalTimeLine','<div\x20class=\x22dch-day\x22>','.btn-cancel','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','color','fontWeight','anEnd','div','borderLeftColor','cid','.rs-date-chip','data-day-idx','rgba(10,\x20132,\x20255,\x20','querySelector','month','long','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','WebApp','overlay','loadLocal','done','end','14SGPgMw','setHeaderColor','className','POST','width','Unknown','%\x20-\x204px)','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','createDocumentFragment','style','#ff453a','scrollWidth','220MDKdtx','getAttribute','reschedule','entries','search','colIndex','calc(','clientWidth','\x20—á.','cancelContainer','2923260REwLzK','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','onclick','querySelectorAll','ready','setHours','rgba(','substring','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','24eegAJO','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','stopPropagation','disableVerticalSwipes','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','getDay','sort','offsetWidth','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','uc_client_settings','initData','</div>','.day-column','anDonutCircle','saveLocally','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','classList','mini','add','<div\x20class=\x22rs-day-name\x22>','top','.day-col-header','setMonth','gridColumns','numeric','get_slots','keys','pattern','log','coach_profiles','insertBefore','var(--acc-green)','startsWith','headerMonth','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','none','cancelled','.btn-reschedule','T00:00:00','600','now','px\x200px','13461690KsiGAn','day-col-header\x20','detDate','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','timeLineBadge','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','468cJNjZv','.sheet','#0a84ff','getElementById','Telegram','rs-date-chip','offClick','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','data-date','max','scrollLeft'];a3_0x549d=function(){return _0x333439;};return a3_0x549d();}function closeAllSheets(){const _0x1d5f80=a3_0x454e55;document[_0x1d5f80(0xdf)](_0x1d5f80(0x186))[_0x1d5f80(0xbc)][_0x1d5f80(0xfa)](_0x1d5f80(0x110)),document[_0x1d5f80(0xa5)](_0x1d5f80(0xdd))[_0x1d5f80(0x153)](_0x3ac255=>_0x3ac255['classList'][_0x1d5f80(0xfa)](_0x1d5f80(0x10e)));}function openSheet(_0x162bd2){const _0x49fc04=a3_0x454e55;document[_0x49fc04(0xdf)](_0x49fc04(0x186))[_0x49fc04(0xbc)][_0x49fc04(0xbe)](_0x49fc04(0x110)),document[_0x49fc04(0xdf)](_0x162bd2)[_0x49fc04(0xbc)][_0x49fc04(0xbe)](_0x49fc04(0x10e));}function getLocalDateStr(_0x4344f3){const _0x2d8b63=a3_0x454e55,_0x3724f0=_0x4344f3[_0x2d8b63(0x11b)](),_0x560d7f=String(_0x4344f3['getMonth']()+0x1)[_0x2d8b63(0x172)](0x2,'0'),_0x18c061=String(_0x4344f3[_0x2d8b63(0x155)]())[_0x2d8b63(0x172)](0x2,'0');return _0x3724f0+'-'+_0x560d7f+'-'+_0x18c061;}function getStartOfWeek(_0x48f2fc){const _0x153818=a3_0x454e55,_0x562512=new Date(_0x48f2fc),_0x34f8a4=_0x562512[_0x153818(0xb1)](),_0x1df77f=_0x562512[_0x153818(0x155)]()-_0x34f8a4+(_0x34f8a4===0x0?-0x6:0x1);return _0x562512[_0x153818(0x109)](_0x1df77f),_0x562512[_0x153818(0xa7)](0x0,0x0,0x0,0x0),_0x562512;}function scrollToToday(){const _0x5a1003=getLocalDateStr(new Date());setTimeout(()=>{const _0x105b47=a3_0x10a1,_0x154976=document[_0x105b47(0x181)]('.day-col-header[data-date=\x22'+_0x5a1003+'\x22]');if(_0x154976){const _0x3736af=document['getElementById'](_0x105b47(0x14a)),_0x10cd04=_0x154976['offsetLeft']-_0x3736af[_0x105b47(0x19d)]/0x2+_0x154976[_0x105b47(0xb3)]/0x2;_0x3736af['scrollTo']({'left':_0x10cd04,'behavior':_0x105b47(0x14b)}),_0x3736af['scrollTop']=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x1f6de4=a3_0x454e55,_0x374fe9=new Date(),_0x4e2c0c=document['getElementById'](_0x1f6de4(0x174)),_0x116980=document[_0x1f6de4(0xdf)](_0x1f6de4(0xda)),_0x48cf7a=(_0x374fe9['getHours']()*0x3c+_0x374fe9[_0x1f6de4(0xf0)]())/0x3c*GRID_H;_0x4e2c0c[_0x1f6de4(0x193)][_0x1f6de4(0xc0)]=_0x48cf7a+'px',_0x4e2c0c[_0x1f6de4(0x193)][_0x1f6de4(0x15d)]=_0x1f6de4(0x142),_0x116980[_0x1f6de4(0x193)][_0x1f6de4(0xc0)]=_0x48cf7a+'px',_0x116980[_0x1f6de4(0x193)]['display']=_0x1f6de4(0x142),_0x116980[_0x1f6de4(0x15e)]=String(_0x374fe9['getHours']())[_0x1f6de4(0x172)](0x2,'0')+':'+String(_0x374fe9[_0x1f6de4(0xf0)]())['padStart'](0x2,'0');}function onScroll(){const _0xc738f5=a3_0x454e55,_0x2ce1b9=document[_0xc738f5(0xdf)](_0xc738f5(0x14a)),_0x1dc11d=document[_0xc738f5(0xa5)](_0xc738f5(0xc1));for(let _0x10a034 of _0x1dc11d)if(_0x10a034['offsetLeft']>=_0x2ce1b9[_0xc738f5(0xe6)]){const _0x188261=new Date(_0x10a034[_0xc738f5(0x197)]('data-date'));document[_0xc738f5(0xdf)](_0xc738f5(0xcd))[_0xc738f5(0x15e)]=_0x188261['toLocaleString']('ru',{'month':_0xc738f5(0x183)})[_0xc738f5(0x119)]()+'\x20'+_0x188261[_0xc738f5(0x11b)]();break;}}function showToast(_0x20b7b9){const _0x523739=a3_0x454e55,_0x2fb546=document[_0x523739(0xdf)]('toast');_0x2fb546[_0x523739(0x15e)]=_0x20b7b9,_0x2fb546['classList'][_0x523739(0xbe)](_0x523739(0x16a)),setTimeout(()=>_0x2fb546[_0x523739(0xbc)][_0x523739(0xfa)](_0x523739(0x16a)),0x7d0);}function handleInfiniteScroll(){const _0x2b9ce0=a3_0x454e55,_0x1c376c=document['getElementById']('matrixViewport'),_0x1a7e86=_0x1c376c[_0x2b9ce0(0xe6)],_0x2592ed=_0x1c376c[_0x2b9ce0(0x195)],_0x2b3df7=_0x1c376c[_0x2b9ce0(0x19d)];if(_0x2592ed-(_0x1a7e86+_0x2b3df7)<0x12c){const _0x1c0d89=endOffset;endOffset+=0xe,renderDayRange(_0x1c0d89+0x1,endOffset),reRenderBlocks();}if(_0x1a7e86<0x12c){const _0x2f28fb=startOffset;startOffset-=0xe,prependDays(startOffset,_0x2f28fb-0x1),_0x1c376c[_0x2b9ce0(0xe6)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x9216ca,_0x51511d){const _0x7b94b2=a3_0x454e55,_0x4f062c=document[_0x7b94b2(0xdf)](_0x7b94b2(0x136)),_0xce344a=document['getElementById'](_0x7b94b2(0xc3)),_0x235bb9=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0xed6eb6=new Date();_0xed6eb6['setHours'](0x0,0x0,0x0,0x0);const _0x591d03=getLocalDateStr(new Date()),_0x5dd93e=document[_0x7b94b2(0x192)](),_0x1bc2cb=document[_0x7b94b2(0x192)]();for(let _0x118a81=_0x9216ca;_0x118a81<=_0x51511d;_0x118a81++){const _0xd0a248=new Date(_0xed6eb6);_0xd0a248['setDate'](_0xd0a248[_0x7b94b2(0x155)]()+_0x118a81);const _0x51ccd3=getLocalDateStr(_0xd0a248);let _0x2cd252=_0xd0a248[_0x7b94b2(0xb1)]()-0x1;if(_0x2cd252===-0x1)_0x2cd252=0x6;const _0x249d69=_0x51ccd3===_0x591d03,_0x9b7f78=document[_0x7b94b2(0x131)](_0x7b94b2(0x17b));_0x9b7f78[_0x7b94b2(0x18c)]=_0x7b94b2(0xd7)+(_0x249d69?_0x7b94b2(0xfe):''),_0x9b7f78[_0x7b94b2(0x151)](_0x7b94b2(0xe4),_0x51ccd3),_0x9b7f78[_0x7b94b2(0x14d)]='<div\x20class=\x22dch-day\x22>'+_0x235bb9[_0x2cd252]+'</div><div\x20class=\x22dch-num\x22>'+_0xd0a248[_0x7b94b2(0x155)]()+_0x7b94b2(0xb7),_0x5dd93e['appendChild'](_0x9b7f78);const _0x3fcfdb=document[_0x7b94b2(0x131)](_0x7b94b2(0x17b));_0x3fcfdb[_0x7b94b2(0x18c)]=_0x7b94b2(0x10b)+(_0x249d69?_0x7b94b2(0xfe):''),_0x3fcfdb[_0x7b94b2(0x151)](_0x7b94b2(0xe4),_0x51ccd3),_0x3fcfdb[_0x7b94b2(0x151)](_0x7b94b2(0x17f),_0x2cd252),_0x1bc2cb[_0x7b94b2(0x152)](_0x3fcfdb);}_0x4f062c[_0x7b94b2(0xca)](_0x5dd93e,_0x4f062c[_0x7b94b2(0xee)]),_0xce344a[_0x7b94b2(0xca)](_0x1bc2cb,_0xce344a[_0x7b94b2(0x181)](_0x7b94b2(0xb8)));}function hexToRgba(_0x34da17,_0x2e558b){const _0x23ed4b=a3_0x454e55;let _0x3c5a9f;if(/^#([A-Fa-f0-9]{3}){1,2}$/['test'](_0x34da17))return _0x3c5a9f=_0x34da17[_0x23ed4b(0xa9)](0x1)['split'](''),_0x3c5a9f[_0x23ed4b(0xe9)]==0x3&&(_0x3c5a9f=[_0x3c5a9f[0x0],_0x3c5a9f[0x0],_0x3c5a9f[0x1],_0x3c5a9f[0x1],_0x3c5a9f[0x2],_0x3c5a9f[0x2]]),_0x3c5a9f='0x'+_0x3c5a9f[_0x23ed4b(0x15b)](''),_0x23ed4b(0xa8)+[_0x3c5a9f>>0x10&0xff,_0x3c5a9f>>0x8&0xff,_0x3c5a9f&0xff][_0x23ed4b(0x15b)](',')+','+_0x2e558b+')';return _0x23ed4b(0x180)+_0x2e558b+')';}let confirmResolver=null;function showCustomConfirm(_0x187644,_0x381fc2,_0x487d77=!![]){const _0x22d5e7=a3_0x454e55;document[_0x22d5e7(0xdf)](_0x22d5e7(0x11a))[_0x22d5e7(0x15e)]=_0x187644,document['getElementById']('ccText')[_0x22d5e7(0x15e)]=_0x381fc2;const _0xa75d9c=document[_0x22d5e7(0xdf)](_0x22d5e7(0x14c));return _0x487d77?(_0xa75d9c['style'][_0x22d5e7(0x178)]=_0x22d5e7(0x194),_0xa75d9c[_0x22d5e7(0x193)][_0x22d5e7(0x179)]=_0x22d5e7(0xd3)):(_0xa75d9c[_0x22d5e7(0x193)][_0x22d5e7(0x178)]=_0x22d5e7(0xde),_0xa75d9c[_0x22d5e7(0x193)][_0x22d5e7(0x179)]=_0x22d5e7(0xd3)),new Promise(_0x1e8136=>{const _0x352d99=_0x22d5e7;confirmResolver=_0x1e8136,document[_0x352d99(0xdf)](_0x352d99(0x120))[_0x352d99(0xbc)][_0x352d99(0xbe)](_0x352d99(0x106));});}function resolveCustomConfirm(_0x34ba1d){const _0x22e999=a3_0x454e55;document[_0x22e999(0xdf)](_0x22e999(0x120))[_0x22e999(0xbc)]['remove']('visible');if(confirmResolver)confirmResolver(_0x34ba1d);}async function tryCancelCurrentSession(){const _0x36a100=a3_0x454e55;if(!currentSession)return;const _0x3d27f1=await showCustomConfirm(_0x36a100(0x149),_0x36a100(0x129),!![]);if(!_0x3d27f1)return;const _0x3521ff=currentSession;closeAllSheets(),sessions=sessions['filter'](_0x192d2f=>_0x192d2f['id']!==_0x3521ff['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x36a100(0xd4)]();try{const _0x1e0b8e=window['Telegram']?.[_0x36a100(0x185)],_0x4647d3=await fetch(API_URL,{'method':_0x36a100(0x18d),'body':JSON[_0x36a100(0x146)]({'action':_0x36a100(0x169),'init_data':_0x1e0b8e?.['initData']||'','coachId':_0x3521ff['coachId'],'dateStr':_0x3521ff[_0x36a100(0x113)],'sessionId':_0x3521ff['id']})});if(_0x4647d3['ok'])DataManager[_0x36a100(0xba)]();}catch(_0x16c3d1){showToast(_0x36a100(0xdb));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x5839e2=a3_0x454e55;if(!currentSession)return;document[_0x5839e2(0xdf)](_0x5839e2(0x140))[_0x5839e2(0xbc)][_0x5839e2(0xfa)]('open'),document[_0x5839e2(0xdf)](_0x5839e2(0x10a))[_0x5839e2(0xbc)][_0x5839e2(0xbe)]('open');const _0x3d6b5f=document[_0x5839e2(0xdf)](_0x5839e2(0xf6)),_0x5f2e1e=document[_0x5839e2(0xdf)](_0x5839e2(0x16e));_0x3d6b5f[_0x5839e2(0x14d)]='',_0x5f2e1e[_0x5839e2(0x14d)]=_0x5839e2(0x11c);const [_0x5384bc,_0x10c8d4]=currentSession[_0x5839e2(0x121)][_0x5839e2(0x159)](':')[_0x5839e2(0x105)](Number),[_0x465fac,_0x171e15]=currentSession['end'][_0x5839e2(0x159)](':')[_0x5839e2(0x105)](Number),_0x117415=_0x465fac*0x3c+_0x171e15-(_0x5384bc*0x3c+_0x10c8d4);try{const _0x4a6d71=window[_0x5839e2(0xe0)]?.[_0x5839e2(0x185)],_0x63514d=await fetch(API_URL,{'method':'POST','body':JSON[_0x5839e2(0x146)]({'action':_0x5839e2(0xc5),'coachId':currentSession[_0x5839e2(0x123)],'duration':_0x117415,'init_data':_0x4a6d71?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x1d57b4=await _0x63514d[_0x5839e2(0x15c)]();_0x1d57b4['ok']&&_0x1d57b4['data']?(availableSlotsCache=_0x1d57b4[_0x5839e2(0x126)],renderRescheduleDates()):_0x5f2e1e['innerHTML']=_0x5839e2(0xb0);}catch(_0x4d2ba6){_0x5f2e1e['innerHTML']=_0x5839e2(0x191);}}function renderRescheduleDates(){const _0x1419c2=a3_0x454e55,_0x46e188=document['getElementById'](_0x1419c2(0xf6));_0x46e188[_0x1419c2(0x14d)]='';const _0x368cb3=Object[_0x1419c2(0xc6)](availableSlotsCache)['sort'](),_0x3b2d63=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x368cb3[_0x1419c2(0xe9)]===0x0){document['getElementById'](_0x1419c2(0x16e))[_0x1419c2(0x14d)]=_0x1419c2(0x10d);return;}_0x368cb3[_0x1419c2(0x153)]((_0xfa1963,_0x408492)=>{const _0x3810dc=_0x1419c2,_0x34f5b2=new Date(_0xfa1963),_0x520ddb=_0x3b2d63[_0x34f5b2[_0x3810dc(0xb1)]()],_0x2fc77e=_0x34f5b2[_0x3810dc(0x155)](),_0x3f2819=document['createElement'](_0x3810dc(0x17b));_0x3f2819[_0x3810dc(0x18c)]=_0x3810dc(0xe1);if(_0x408492===0x0)_0x3f2819[_0x3810dc(0xbc)][_0x3810dc(0xbe)](_0x3810dc(0x110));_0x3f2819[_0x3810dc(0x14d)]=_0x3810dc(0xbf)+_0x520ddb+'</div><div\x20class=\x22rs-day-num\x22>'+_0x2fc77e+_0x3810dc(0xb7),_0x3f2819['onclick']=()=>selectRsDate(_0xfa1963,_0x3f2819),_0x46e188[_0x3810dc(0x152)](_0x3f2819);}),selectRsDate(_0x368cb3[0x0],_0x46e188[_0x1419c2(0xee)]);}function selectRsDate(_0x3f41be,_0x1e6a1b){const _0x1a9004=a3_0x454e55;selectedRsDate=_0x3f41be,document[_0x1a9004(0xa5)](_0x1a9004(0x17e))[_0x1a9004(0x153)](_0x451fce=>_0x451fce[_0x1a9004(0xbc)][_0x1a9004(0xfa)]('active'));if(_0x1e6a1b)_0x1e6a1b['classList'][_0x1a9004(0xbe)](_0x1a9004(0x110));const _0x1dc384=document['getElementById'](_0x1a9004(0x16e));_0x1dc384[_0x1a9004(0x14d)]='';const _0x472249=availableSlotsCache[_0x3f41be]||[];if(_0x472249[_0x1a9004(0xe9)]===0x0){_0x1dc384['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x472249['forEach'](_0x566b16=>{const _0x23be07=_0x1a9004,_0x25c85c=document[_0x23be07(0x131)]('button');_0x25c85c[_0x23be07(0x18c)]=_0x23be07(0x132),_0x25c85c[_0x23be07(0x15e)]=_0x566b16,_0x25c85c[_0x23be07(0xa4)]=()=>confirmReschedule(_0x566b16),_0x1dc384[_0x23be07(0x152)](_0x25c85c);});}async function confirmReschedule(_0x27d7a6){const _0x5eec74=a3_0x454e55,_0x4e79cd=new Date(selectedRsDate),_0xe1871=_0x4e79cd[_0x5eec74(0x154)](_0x5eec74(0x114),{'day':_0x5eec74(0xc4),'month':_0x5eec74(0x183)}),_0x16e0e0=await showCustomConfirm(_0x5eec74(0xaa),'–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20'+_0xe1871+_0x5eec74(0x116)+_0x27d7a6+'?',![]);if(!_0x16e0e0)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x5eec74(0xd4)]();const _0x48d0d5=currentSession[_0x5eec74(0x113)],_0x1677c8=currentSession['id'],[_0x24d68e,_0xe531e3]=currentSession['start']['split'](':')[_0x5eec74(0x105)](Number),[_0xbaffd2,_0x20237b]=currentSession[_0x5eec74(0x189)]['split'](':')[_0x5eec74(0x105)](Number),_0x400a37=_0xbaffd2*0x3c+_0x20237b-(_0x24d68e*0x3c+_0xe531e3),[_0x363304,_0x35abcf]=_0x27d7a6['split'](':')[_0x5eec74(0x105)](Number),_0x99337e=_0x363304*0x3c+_0x35abcf+_0x400a37,_0x10fdda=Math[_0x5eec74(0x107)](_0x99337e/0x3c),_0xad7d6f=_0x99337e%0x3c,_0x15f32b=String(_0x10fdda)['padStart'](0x2,'0')+':'+String(_0xad7d6f)[_0x5eec74(0x172)](0x2,'0'),_0x5a27bc=sessions[_0x5eec74(0x124)](_0x379df1=>_0x379df1['id']===_0x1677c8);_0x5a27bc!==-0x1&&(sessions[_0x5a27bc][_0x5eec74(0x113)]=selectedRsDate,sessions[_0x5a27bc][_0x5eec74(0x121)]=_0x27d7a6,sessions[_0x5a27bc][_0x5eec74(0x189)]=_0x15f32b,reRenderBlocks());try{const _0x5e898c=window[_0x5eec74(0xe0)]?.['WebApp'],_0x107db5=await fetch(API_URL,{'method':_0x5eec74(0x18d),'body':JSON['stringify']({'action':_0x5eec74(0x198),'init_data':_0x5e898c?.[_0x5eec74(0xb6)]||'','oldSessionId':_0x1677c8,'oldDate':_0x48d0d5,'newDate':selectedRsDate,'newTime':_0x27d7a6,'coachId':currentSession['coachId']})}),_0x1676ce=await _0x107db5[_0x5eec74(0x15c)]();!_0x1676ce['ok']?(showToast(_0x5eec74(0xbb)),DataManager[_0x5eec74(0x139)]()):(showToast('–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'),DataManager[_0x5eec74(0xba)]());}catch(_0x5de27c){showToast(_0x5eec74(0xdb));}}document[a3_0x454e55(0xf8)](a3_0x454e55(0x147),init);