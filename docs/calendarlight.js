const a3_0x163bd8=a3_0x3e8e;(function(_0x2ab08b,_0x1ea9df){const _0x30d7a2=a3_0x3e8e,_0x4e7808=_0x2ab08b();while(!![]){try{const _0xa7bde=parseInt(_0x30d7a2(0x165))/0x1*(parseInt(_0x30d7a2(0x150))/0x2)+-parseInt(_0x30d7a2(0x21e))/0x3+parseInt(_0x30d7a2(0x1b4))/0x4*(parseInt(_0x30d7a2(0x195))/0x5)+-parseInt(_0x30d7a2(0x181))/0x6*(-parseInt(_0x30d7a2(0x1be))/0x7)+-parseInt(_0x30d7a2(0x1f5))/0x8+-parseInt(_0x30d7a2(0x1da))/0x9+parseInt(_0x30d7a2(0x212))/0xa;if(_0xa7bde===_0x1ea9df)break;else _0x4e7808['push'](_0x4e7808['shift']());}catch(_0x80a191){_0x4e7808['push'](_0x4e7808['shift']());}}}(a3_0x11ff,0xd766d));const APP_VERSION=a3_0x163bd8(0x171),API_URL=a3_0x163bd8(0x1b7),GRID_H=0x3c,KEY_SESSIONS=a3_0x163bd8(0x1f0),KEY_SETTINGS='uc_client_settings',KEY_CLIENTS=a3_0x163bd8(0x153);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x163bd8(0x170),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x5284ca=a3_0x163bd8,_0x42de4d=(function(){let _0x4e5e81=!![];return function(_0x3b810b,_0x26cdeb){const _0x625367=_0x4e5e81?function(){const _0x3a633b=a3_0x3e8e;if(_0x26cdeb){const _0x20cf71=_0x26cdeb[_0x3a633b(0x16e)](_0x3b810b,arguments);return _0x26cdeb=null,_0x20cf71;}}:function(){};return _0x4e5e81=![],_0x625367;};}()),_0x1ffd9f=_0x42de4d(this,function(){const _0x1b20c8=a3_0x3e8e;return _0x1ffd9f[_0x1b20c8(0x1a4)]()['search'](_0x1b20c8(0x14f))[_0x1b20c8(0x1a4)]()[_0x1b20c8(0x1c5)](_0x1ffd9f)[_0x1b20c8(0x1df)](_0x1b20c8(0x14f));});_0x1ffd9f();try{const _0x1841a7=window['Telegram']?.['WebApp'];if(!_0x1841a7)return;_0x1841a7[_0x5284ca(0x1d9)](),_0x1841a7[_0x5284ca(0x161)]();try{_0x1841a7['setHeaderColor'](_0x5284ca(0x157)),_0x1841a7[_0x5284ca(0x18f)]&&_0x1841a7[_0x5284ca(0x18f)](_0x5284ca(0x157));}catch(_0x596dd1){console[_0x5284ca(0x1db)](_0x5284ca(0x1d7),_0x596dd1);}try{_0x1841a7[_0x5284ca(0x156)]&&(_0x1841a7[_0x5284ca(0x156)][_0x5284ca(0x1b0)](),_0x1841a7[_0x5284ca(0x156)][_0x5284ca(0x17e)](),_0x1841a7[_0x5284ca(0x156)]['onClick'](function(){const _0x2ced30=_0x5284ca;window[_0x2ced30(0x1e7)]['href']=_0x2ced30(0x16d);}));}catch(_0xab40da){console[_0x5284ca(0x1db)](_0x5284ca(0x1a9),_0xab40da);}try{if(_0x1841a7[_0x5284ca(0x15e)])_0x1841a7['disableVerticalSwipes']();}catch(_0x3c8b7c){}}catch(_0x184260){console[_0x5284ca(0x183)](_0x5284ca(0x197),_0x184260);}}());function isAdmin(){const _0x1186af=a3_0x163bd8;try{const _0x4d4c89=Number(window['Telegram']?.['WebApp']?.[_0x1186af(0x177)]?.[_0x1186af(0x1b8)]?.['id']);return _0x4d4c89===0xbaf7174;}catch(_0x539ea3){return![];}}const DataManager={'saveLocally'(){const _0x3fb464=a3_0x163bd8;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x3fb464(0x130)](sessions)),localStorage[_0x3fb464(0x15f)](KEY_CLIENTS,JSON[_0x3fb464(0x130)](clients)),localStorage[_0x3fb464(0x15f)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x5942bf){}},'loadLocal'(){const _0x2d136f=a3_0x163bd8;try{const _0x118040=localStorage[_0x2d136f(0x168)](KEY_SESSIONS);if(_0x118040)sessions=JSON['parse'](_0x118040);const _0x2fd4bb=localStorage[_0x2d136f(0x168)](KEY_CLIENTS);if(_0x2fd4bb)clients=JSON[_0x2d136f(0x1d5)](_0x2fd4bb);const _0x418944=localStorage['getItem'](KEY_SETTINGS);if(_0x418944){const _0x2d9d7a=JSON[_0x2d136f(0x1d5)](_0x418944);if(_0x2d9d7a[_0x2d136f(0x1d4)])availabilityPattern=_0x2d9d7a[_0x2d136f(0x1d4)];if(_0x2d9d7a[_0x2d136f(0x226)])specialRanges=_0x2d9d7a[_0x2d136f(0x226)];if(_0x2d9d7a[_0x2d136f(0x1cd)])dateExceptions=_0x2d9d7a[_0x2d136f(0x1cd)];}}catch(_0x24fbe5){}},async 'syncLoad'(){const _0x5cd80f=a3_0x163bd8,_0x21a64a=new Date(),_0x3fffb1=_0x21a64a[_0x5cd80f(0x12f)]()+'-'+String(_0x21a64a[_0x5cd80f(0x136)]()+0x1)[_0x5cd80f(0x219)](0x2,'0'),_0x448f46=new Date(_0x21a64a);_0x448f46[_0x5cd80f(0x193)](_0x21a64a['getMonth']()+0x1);const _0x1195a5=_0x448f46['getFullYear']()+'-'+String(_0x448f46[_0x5cd80f(0x136)]()+0x1)[_0x5cd80f(0x219)](0x2,'0'),_0x17c2b6=Date[_0x5cd80f(0x176)]();try{const _0x212c6b=window[_0x5cd80f(0x19f)]?.[_0x5cd80f(0x200)],_0x31f66c=_0x212c6b?.[_0x5cd80f(0x18b)]||'',[_0x22ffe9,_0x4fecd4]=await Promise[_0x5cd80f(0x1d2)]([fetch(API_URL,{'method':'POST','body':JSON[_0x5cd80f(0x130)]({'action':_0x5cd80f(0x1e1),'init_data':_0x31f66c,'month_str':_0x3fffb1})})[_0x5cd80f(0x217)](_0x3302f5=>_0x3302f5['json']()),fetch(API_URL,{'method':'POST','body':JSON['stringify']({'action':_0x5cd80f(0x1e1),'init_data':_0x31f66c,'month_str':_0x1195a5})})[_0x5cd80f(0x217)](_0x509977=>_0x509977[_0x5cd80f(0x1aa)]())]);if(lastUserActionTime>_0x17c2b6){console[_0x5cd80f(0x1db)](_0x5cd80f(0x151));return;}if(_0x22ffe9['ok'])this['applyData'](_0x22ffe9[_0x5cd80f(0x14c)],_0x3fffb1);if(_0x4fecd4['ok'])this[_0x5cd80f(0x139)](_0x4fecd4[_0x5cd80f(0x14c)],_0x1195a5);this[_0x5cd80f(0x13d)]();}catch(_0x2d8834){}},'applyData'(_0x1d6fb1,_0x308d60){const _0x1e0e6f=a3_0x163bd8;if(!_0x1d6fb1)return;if(_0x1d6fb1['settings']){if(_0x1d6fb1[_0x1e0e6f(0x17a)][_0x1e0e6f(0x1d4)])availabilityPattern=_0x1d6fb1['settings'][_0x1e0e6f(0x1d4)];if(_0x1d6fb1[_0x1e0e6f(0x17a)][_0x1e0e6f(0x226)])specialRanges=_0x1d6fb1[_0x1e0e6f(0x17a)]['ranges'];if(_0x1d6fb1['settings'][_0x1e0e6f(0x1cd)])dateExceptions=_0x1d6fb1[_0x1e0e6f(0x17a)][_0x1e0e6f(0x1cd)];}if(_0x1d6fb1[_0x1e0e6f(0x1af)]&&Array['isArray'](_0x1d6fb1[_0x1e0e6f(0x1af)]))clients=_0x1d6fb1['clients'];_0x1d6fb1[_0x1e0e6f(0x1f1)]&&(coachProfiles={...coachProfiles,..._0x1d6fb1[_0x1e0e6f(0x1f1)]}),_0x1d6fb1[_0x1e0e6f(0x16a)]&&(sessions=sessions[_0x1e0e6f(0x205)](_0xdaf90f=>!_0xdaf90f[_0x1e0e6f(0x1e5)][_0x1e0e6f(0x1a5)](_0x308d60)),Object['keys'](_0x1d6fb1[_0x1e0e6f(0x16a)])[_0x1e0e6f(0x144)](_0x57f012=>{const _0x2a0f54=_0x1e0e6f,_0xd41bdd=_0x1d6fb1[_0x2a0f54(0x16a)][_0x57f012];_0xd41bdd[_0x2a0f54(0x144)](_0x580cd5=>{const _0x3430df=_0x2a0f54;sessions[_0x3430df(0x154)]({'id':_0x580cd5['i'],'clientId':_0x580cd5['c'],'coachId':_0x580cd5[_0x3430df(0x14d)],'dateStr':_0x308d60+'-'+_0x57f012['padStart'](0x2,'0'),'start':_0x580cd5['s'],'end':_0x580cd5['e'],'note':_0x580cd5['n']||'','status':_0x580cd5['st']||_0x3430df(0x140),'seriesId':_0x580cd5[_0x3430df(0x1bb)]});});})),reRenderBlocks();}};function init(){const _0x3fbd17=a3_0x163bd8;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById']('matrixViewport')[_0x3fbd17(0x1fb)](_0x3fbd17(0x1f3),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x3fbd17(0x148)]();}function renderTimeColumn(){const _0x1b9244=a3_0x163bd8,_0x2850c3=document[_0x1b9244(0x1a3)](_0x1b9244(0x1c8)),_0x27b9dd=document[_0x1b9244(0x1a3)]('timeLineBadge');_0x2850c3[_0x1b9244(0x187)]='',_0x2850c3[_0x1b9244(0x1fa)](_0x27b9dd);for(let _0x1c800e=0x0;_0x1c800e<0x18;_0x1c800e++){const _0xe39db0=document[_0x1b9244(0x1fd)]('div');_0xe39db0[_0x1b9244(0x14a)]='time-label';if(_0x1c800e>0x0)_0xe39db0[_0x1b9244(0x187)]=_0x1b9244(0x1f8)+String(_0x1c800e)[_0x1b9244(0x219)](0x2,'0')+':00</span>';_0x2850c3['appendChild'](_0xe39db0);}}function renderDayRange(_0x14f388,_0x4ba051){const _0x2b39bd=a3_0x163bd8,_0xe0a2af=document[_0x2b39bd(0x1a3)]('daysHeaderTrack'),_0x2cd224=document[_0x2b39bd(0x1a3)](_0x2b39bd(0x1fc)),_0xb66995=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x758417=new Date();_0x758417['setHours'](0x0,0x0,0x0,0x0);const _0x536ff0=getLocalDateStr(new Date());for(let _0x5d5b23=_0x14f388;_0x5d5b23<=_0x4ba051;_0x5d5b23++){const _0x308b6b=new Date(_0x758417);_0x308b6b[_0x2b39bd(0x214)](_0x308b6b[_0x2b39bd(0x1ad)]()+_0x5d5b23);const _0x3dead7=getLocalDateStr(_0x308b6b);let _0x2afa16=_0x308b6b[_0x2b39bd(0x21c)]()-0x1;if(_0x2afa16===-0x1)_0x2afa16=0x6;const _0x6b7271=_0x3dead7===_0x536ff0,_0x40804c=document[_0x2b39bd(0x1fd)](_0x2b39bd(0x1ea));_0x40804c[_0x2b39bd(0x14a)]=_0x2b39bd(0x206)+(_0x6b7271?_0x2b39bd(0x1e8):''),_0x40804c['setAttribute'](_0x2b39bd(0x173),_0x3dead7),_0x40804c[_0x2b39bd(0x187)]=_0x2b39bd(0x1d3)+_0xb66995[_0x2afa16]+'</div><div\x20class=\x22dch-num\x22>'+_0x308b6b[_0x2b39bd(0x1ad)]()+_0x2b39bd(0x1cf),_0xe0a2af[_0x2b39bd(0x1fa)](_0x40804c);const _0x539b18=document['createElement'](_0x2b39bd(0x1ea));_0x539b18[_0x2b39bd(0x14a)]='day-column\x20'+(_0x6b7271?_0x2b39bd(0x1e8):''),_0x539b18['setAttribute'](_0x2b39bd(0x173),_0x3dead7),_0x539b18[_0x2b39bd(0x20f)](_0x2b39bd(0x1f2),_0x2afa16),_0x2cd224[_0x2b39bd(0x1fa)](_0x539b18);}}function reRenderBlocks(){const _0x1caa16=a3_0x163bd8;document[_0x1caa16(0x142)](_0x1caa16(0x175))[_0x1caa16(0x144)](_0x4e6cf4=>{const _0x3703ee=_0x1caa16;_0x4e6cf4[_0x3703ee(0x142)](_0x3703ee(0x152))['forEach'](_0x13fd3b=>_0x13fd3b['remove']());const _0x594228=_0x4e6cf4['getAttribute'](_0x3703ee(0x173)),_0x22bc44=parseInt(_0x4e6cf4[_0x3703ee(0x203)](_0x3703ee(0x1f2))),_0x2389b2=Math[_0x3703ee(0x134)](_0x4e6cf4[_0x3703ee(0x210)]);(availabilityPattern[_0x22bc44]||[])['forEach'](_0x275e0b=>{const _0x1572ba=_0x3703ee,_0x5ac560=document[_0x1572ba(0x1fd)](_0x1572ba(0x1ea));_0x5ac560[_0x1572ba(0x14a)]=_0x1572ba(0x135),_0x5ac560[_0x1572ba(0x22a)]['top']=_0x275e0b*GRID_H+'px',_0x5ac560[_0x1572ba(0x22a)][_0x1572ba(0x1e0)]='-'+_0x2389b2+_0x1572ba(0x1c3)+_0x275e0b*GRID_H+'px',_0x4e6cf4[_0x1572ba(0x1fa)](_0x5ac560);});if(specialRanges['length']>0x0){const _0x1f7ef9=new Date(_0x594228+'T00:00:00')[_0x3703ee(0x204)](),_0x41661b=new Date(_0x594228+_0x3703ee(0x19a))['getTime']();specialRanges[_0x3703ee(0x144)](_0x2d3f97=>{const _0x181466=_0x3703ee,_0x2ba2fa=new Date(_0x2d3f97[_0x181466(0x1e4)])[_0x181466(0x204)](),_0x1f60a9=new Date(_0x2d3f97[_0x181466(0x1f7)])[_0x181466(0x204)](),_0x435a99=Math['max'](_0x1f7ef9,_0x2ba2fa),_0x3d16f1=Math[_0x181466(0x159)](_0x41661b,_0x1f60a9);if(_0x435a99<_0x3d16f1){const _0x18b471=(_0x435a99-_0x1f7ef9)/0x36ee80*GRID_H,_0x557dc2=(_0x3d16f1-_0x435a99)/0x36ee80*GRID_H,_0x166f84=document[_0x181466(0x1fd)](_0x181466(0x1ea));_0x557dc2>=23.5*GRID_H?(_0x166f84[_0x181466(0x14a)]='day-off-overlay\x20stripe-bg',_0x166f84[_0x181466(0x22a)]['backgroundPosition']='-'+_0x2389b2+_0x181466(0x179)):(_0x166f84[_0x181466(0x14a)]='blocked-range-part\x20stripe-bg',_0x166f84[_0x181466(0x22a)][_0x181466(0x227)]=_0x18b471+'px',_0x166f84[_0x181466(0x22a)][_0x181466(0x196)]=_0x557dc2+'px',_0x166f84[_0x181466(0x22a)][_0x181466(0x1e0)]='-'+_0x2389b2+'px\x20-'+_0x18b471+'px'),_0x4e6cf4[_0x181466(0x1fa)](_0x166f84);}});}renderEventsForColumn(_0x4e6cf4,_0x594228);});}function renderEventsForColumn(_0x27695a,_0x7a01c1){const _0x5dec1b=a3_0x163bd8,_0x219b89=sessions[_0x5dec1b(0x205)](_0x14c972=>_0x14c972[_0x5dec1b(0x1e5)]===_0x7a01c1),_0x51b1c0=_0x219b89[_0x5dec1b(0x220)](_0x3ab92f=>{const _0x51a30a=_0x5dec1b,[_0x5a17ff,_0x44d76b]=_0x3ab92f[_0x51a30a(0x1e4)]['split'](':')[_0x51a30a(0x220)](Number),[_0x3eb6a2,_0x292bd7]=_0x3ab92f[_0x51a30a(0x1f7)][_0x51a30a(0x1b1)](':')[_0x51a30a(0x220)](Number);return{'data':_0x3ab92f,'start':_0x5a17ff*0x3c+_0x44d76b,'end':_0x3eb6a2*0x3c+_0x292bd7,'colIndex':0x0};});_0x51b1c0['sort']((_0xe13cbe,_0x239fdf)=>_0xe13cbe[_0x5dec1b(0x1e4)]-_0x239fdf[_0x5dec1b(0x1e4)]||_0x239fdf[_0x5dec1b(0x1f7)]-_0x239fdf['start']-(_0xe13cbe['end']-_0xe13cbe[_0x5dec1b(0x1e4)]));const _0x8a7b9a=[];_0x51b1c0[_0x5dec1b(0x144)](_0x56a70a=>{const _0x5248e1=_0x5dec1b;let _0x71df3=![];for(let _0xae083e=0x0;_0xae083e<_0x8a7b9a[_0x5248e1(0x201)];_0xae083e++){const _0x55f6f3=_0x8a7b9a[_0xae083e];if(_0x56a70a[_0x5248e1(0x1e4)]>=_0x55f6f3[_0x55f6f3[_0x5248e1(0x201)]-0x1]['end']){_0x55f6f3['push'](_0x56a70a),_0x56a70a[_0x5248e1(0x16b)]=_0xae083e,_0x71df3=!![];break;}}!_0x71df3&&(_0x8a7b9a[_0x5248e1(0x154)]([_0x56a70a]),_0x56a70a[_0x5248e1(0x16b)]=_0x8a7b9a[_0x5248e1(0x201)]-0x1);}),_0x51b1c0[_0x5dec1b(0x144)](_0x42bce8=>{const _0x283e33=_0x5dec1b;let _0x4773c6=0x0;_0x51b1c0[_0x283e33(0x144)](_0x5d2804=>{const _0xc246de=_0x283e33;if(Math[_0xc246de(0x1f9)](_0x42bce8[_0xc246de(0x1e4)],_0x5d2804[_0xc246de(0x1e4)])<Math[_0xc246de(0x159)](_0x42bce8[_0xc246de(0x1f7)],_0x5d2804['end'])&&_0x5d2804[_0xc246de(0x16b)]>_0x4773c6)_0x4773c6=_0x5d2804[_0xc246de(0x16b)];});const _0x17f713=_0x4773c6+0x1,_0x1141f9=0x64/_0x17f713,_0x5f4c47=_0x42bce8['colIndex']*_0x1141f9,_0x7fdf10=document[_0x283e33(0x1fd)](_0x283e33(0x1ea)),_0x45ea01=_0x42bce8[_0x283e33(0x14c)];let _0x2c5125=_0x283e33(0x209);if(clients&&clients['length']>0x0){const _0x669637=clients[_0x283e33(0x15d)](_0x1dfe2a=>String(_0x1dfe2a['id'])===String(_0x45ea01[_0x283e33(0x1c9)]));if(_0x669637&&_0x669637[_0x283e33(0x141)])_0x2c5125=_0x669637[_0x283e33(0x141)];}const _0x678dea=_0x45ea01[_0x283e33(0x18a)]===_0x283e33(0x1a0),_0x4cae5c=_0x678dea?0x1:0.45;_0x7fdf10[_0x283e33(0x14a)]=_0x283e33(0x19b)+(_0x678dea?_0x283e33(0x160):''),_0x7fdf10[_0x283e33(0x22a)][_0x283e33(0x1ec)]=hexToRgba(_0x2c5125,_0x4cae5c),_0x7fdf10[_0x283e33(0x22a)][_0x283e33(0x146)]=_0x2c5125;const _0x4ea3b5=_0x42bce8['start']/0x3c*GRID_H,_0x13fd02=(_0x42bce8[_0x283e33(0x1f7)]-_0x42bce8[_0x283e33(0x1e4)])/0x3c*GRID_H;_0x7fdf10[_0x283e33(0x22a)][_0x283e33(0x227)]=_0x4ea3b5+'px',_0x7fdf10[_0x283e33(0x22a)][_0x283e33(0x196)]=Math[_0x283e33(0x1f9)](_0x13fd02,0x14)+'px',_0x7fdf10['style'][_0x283e33(0x1ef)]=_0x283e33(0x229)+_0x1141f9+_0x283e33(0x1bd),_0x7fdf10[_0x283e33(0x22a)][_0x283e33(0x22b)]=_0x283e33(0x229)+_0x5f4c47+_0x283e33(0x1b3),_0x7fdf10['style']['zIndex']=0xa+_0x42bce8['colIndex'];if(_0x1141f9<0x55)_0x7fdf10[_0x283e33(0x137)]['add'](_0x283e33(0x1ab));let _0x5afcad='';if(_0x45ea01[_0x283e33(0x15a)])_0x5afcad+=_0x283e33(0x19e);if(_0x678dea)_0x5afcad+=_0x283e33(0x1e3);_0x7fdf10['innerHTML']=_0x283e33(0x198)+_0x45ea01[_0x283e33(0x1e4)]+'\x20-\x20'+_0x45ea01['end']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5afcad+_0x283e33(0x1d8),_0x7fdf10[_0x283e33(0x191)]=_0xc314e9=>{const _0x30987e=_0x283e33;_0xc314e9[_0x30987e(0x17f)](),openDetails(_0x45ea01);},_0x27695a[_0x283e33(0x1fa)](_0x7fdf10);});}function openAnalytics(){const _0x2e8cdc=a3_0x163bd8,_0x15de3f=document[_0x2e8cdc(0x15b)](_0x2e8cdc(0x1c7));setAnalyticsPeriod(_0x2e8cdc(0x170),_0x15de3f),openSheet(_0x2e8cdc(0x1b9));}function setAnalyticsPeriod(_0x55470d,_0x236cb5){const _0x160445=a3_0x163bd8;currentAnPeriod=_0x55470d,document[_0x160445(0x142)](_0x160445(0x1c7))['forEach'](_0x2adde0=>_0x2adde0[_0x160445(0x137)]['remove']('active'));if(_0x236cb5)_0x236cb5[_0x160445(0x137)]['add'](_0x160445(0x1ae));const _0x25936f=document['getElementById'](_0x160445(0x16f));_0x25936f[_0x160445(0x22a)][_0x160445(0x1f6)]=_0x55470d===_0x160445(0x18d)?_0x160445(0x1bc):'none';const _0xa61222=new Date();let _0x12b525=new Date(),_0x93d0b=new Date();if(_0x55470d==='week')_0x12b525=getStartOfWeek(_0xa61222),_0x93d0b=new Date(_0x12b525),_0x93d0b['setDate'](_0x93d0b[_0x160445(0x1ad)]()+0x6);else{if(_0x55470d===_0x160445(0x1c2))_0x12b525=new Date(_0xa61222[_0x160445(0x12f)](),_0xa61222['getMonth'](),0x1),_0x93d0b=new Date(_0xa61222[_0x160445(0x12f)](),_0xa61222[_0x160445(0x136)]()+0x1,0x0);else{!document[_0x160445(0x1a3)](_0x160445(0x186))[_0x160445(0x166)]&&(document[_0x160445(0x1a3)](_0x160445(0x186))['value']=getLocalDateStr(_0xa61222),document[_0x160445(0x1a3)](_0x160445(0x19d))[_0x160445(0x166)]=getLocalDateStr(_0xa61222));refreshAnalytics();return;}}document[_0x160445(0x1a3)](_0x160445(0x186))['value']=getLocalDateStr(_0x12b525),document['getElementById'](_0x160445(0x19d))[_0x160445(0x166)]=getLocalDateStr(_0x93d0b),refreshAnalytics();}function refreshAnalytics(){const _0x457a91=a3_0x163bd8,_0x88ff31=document['getElementById'](_0x457a91(0x186))[_0x457a91(0x166)],_0x17e5f4=document[_0x457a91(0x1a3)]('anEnd')[_0x457a91(0x166)];if(!_0x88ff31||!_0x17e5f4)return;const _0x2bde6d=sessions[_0x457a91(0x205)](_0x1fecb6=>_0x1fecb6['dateStr']>=_0x88ff31&&_0x1fecb6['dateStr']<=_0x17e5f4&&_0x1fecb6[_0x457a91(0x18a)]!=='cancelled'),_0xe5de3a=_0x2bde6d[_0x457a91(0x201)],_0x1b9d93=_0x2bde6d[_0x457a91(0x205)](_0x17a66a=>_0x17a66a[_0x457a91(0x18a)]==='completed')[_0x457a91(0x201)],_0x4849e9=_0xe5de3a>0x0?Math['round'](_0x1b9d93/_0xe5de3a*0x64):0x0;document[_0x457a91(0x1a3)](_0x457a91(0x208))[_0x457a91(0x1a2)]=_0x4849e9+'%',document[_0x457a91(0x1a3)](_0x457a91(0x16c))['textContent']=_0x1b9d93+_0x457a91(0x202)+_0xe5de3a+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x4cd4f3=document[_0x457a91(0x1a3)]('anDonutCircle'),_0x589cb4=0x2*Math['PI']*0x23,_0x2db42c=_0x589cb4-_0x4849e9/0x64*_0x589cb4;_0x4cd4f3[_0x457a91(0x22a)][_0x457a91(0x1a6)]=_0x2db42c;const _0x230941={};_0x2bde6d[_0x457a91(0x144)](_0x180100=>{const _0x48200b=_0x457a91,_0x59f4f8=_0x180100[_0x48200b(0x20a)]||_0x48200b(0x20b);if(!_0x230941[_0x59f4f8]){const _0x4a5a0e='#'+_0x59f4f8[_0x48200b(0x1a4)]()[_0x48200b(0x1de)](0x0,0x6);_0x230941[_0x59f4f8]={'total':0x0,'done':0x0,'color':_0x4a5a0e};}_0x230941[_0x59f4f8][_0x48200b(0x1dd)]++;if(_0x180100[_0x48200b(0x18a)]==='completed')_0x230941[_0x59f4f8][_0x48200b(0x184)]++;});const _0x1407c9=document['getElementById'](_0x457a91(0x228));_0x1407c9['innerHTML']='';const _0x28afe4=Object[_0x457a91(0x199)](_0x230941)[_0x457a91(0x222)]((_0x128d60,_0x561c73)=>_0x561c73[0x1][_0x457a91(0x1dd)]-_0x128d60[0x1]['total']);if(_0x28afe4[_0x457a91(0x201)]===0x0){_0x1407c9['innerHTML']=_0x457a91(0x1ce);return;}_0x28afe4[_0x457a91(0x144)](([_0x1ff2d0,_0x157046])=>{const _0x22a0de=_0x457a91,_0x377630=Math[_0x22a0de(0x134)](_0x157046['done']/_0x157046[_0x22a0de(0x1dd)]*0x64),_0x2864e3=document[_0x22a0de(0x1fd)](_0x22a0de(0x1ea));_0x2864e3[_0x22a0de(0x14a)]=_0x22a0de(0x20d),_0x2864e3[_0x22a0de(0x22a)][_0x22a0de(0x146)]=_0x157046[_0x22a0de(0x141)],_0x2864e3['innerHTML']=_0x22a0de(0x1dc)+_0x1ff2d0['substr'](0x0,0x5)+_0x22a0de(0x13c)+_0x157046['done']+_0x22a0de(0x1eb)+_0x157046[_0x22a0de(0x1dd)]+_0x22a0de(0x21f)+_0x377630+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1407c9[_0x22a0de(0x1fa)](_0x2864e3);});}function openDetails(_0x5c8241){const _0x51a00f=a3_0x163bd8;currentSession=_0x5c8241;const _0x2bf95d=new Date(_0x5c8241[_0x51a00f(0x1e5)]),_0x1fd1b7=_0x2bf95d[_0x51a00f(0x17c)](_0x51a00f(0x1c6),{'weekday':_0x51a00f(0x192),'day':_0x51a00f(0x15c),'month':_0x51a00f(0x192)});document[_0x51a00f(0x1a3)](_0x51a00f(0x155))[_0x51a00f(0x1a2)]=_0x1fd1b7['charAt'](0x0)[_0x51a00f(0x213)]()+_0x1fd1b7[_0x51a00f(0x12e)](0x1),document[_0x51a00f(0x1a3)](_0x51a00f(0x131))[_0x51a00f(0x1a2)]=_0x5c8241[_0x51a00f(0x1e4)]+_0x51a00f(0x189)+_0x5c8241[_0x51a00f(0x1f7)],document[_0x51a00f(0x1a3)]('detNote')['textContent']=_0x5c8241[_0x51a00f(0x13f)]||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x2d7ba5=document[_0x51a00f(0x1a3)](_0x51a00f(0x1c1)),_0x1f35fc=document[_0x51a00f(0x1a3)]('cancelContainer'),_0x3e4218=_0x1f35fc['querySelector']('.btn-cancel'),_0x2255ae=_0x1f35fc[_0x51a00f(0x15b)](_0x51a00f(0x218)),_0x5eee5d=document[_0x51a00f(0x1a3)](_0x51a00f(0x1b5));if(_0x5c8241[_0x51a00f(0x18a)]==='completed')_0x2d7ba5[_0x51a00f(0x1a2)]='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0x2d7ba5[_0x51a00f(0x22a)][_0x51a00f(0x141)]='var(--acc-green)',_0x1f35fc[_0x51a00f(0x22a)][_0x51a00f(0x1f6)]=_0x51a00f(0x1b2);else{_0x2d7ba5[_0x51a00f(0x1a2)]=_0x51a00f(0x1e2),_0x2d7ba5[_0x51a00f(0x22a)][_0x51a00f(0x141)]=_0x51a00f(0x20c),_0x1f35fc[_0x51a00f(0x22a)][_0x51a00f(0x1f6)]=_0x51a00f(0x1ac);const _0x2c71c0=new Date(_0x5c8241['dateStr']+'T'+_0x5c8241['start']),_0x2d2513=new Date(),_0x132e74=(_0x2c71c0-_0x2d2513)/(0x3e8*0x3c*0x3c),_0x3026e5=coachProfiles[_0x5c8241[_0x51a00f(0x20a)]]&&coachProfiles[_0x5c8241['coachId']][_0x51a00f(0x1a1)]?parseInt(coachProfiles[_0x5c8241[_0x51a00f(0x20a)]][_0x51a00f(0x1a1)]):0x18;if(_0x3026e5===0x0||_0x132e74>=_0x3026e5)_0x3e4218[_0x51a00f(0x22a)][_0x51a00f(0x1f6)]=_0x51a00f(0x1ac),_0x2255ae[_0x51a00f(0x22a)][_0x51a00f(0x1f6)]=_0x51a00f(0x1ac),_0x5eee5d[_0x51a00f(0x22a)][_0x51a00f(0x1f6)]=_0x51a00f(0x1b2);else{_0x3e4218['style'][_0x51a00f(0x1f6)]=_0x51a00f(0x1b2),_0x2255ae[_0x51a00f(0x22a)][_0x51a00f(0x1f6)]=_0x51a00f(0x1b2),_0x5eee5d['style']['display']=_0x51a00f(0x1ac);let _0x29c4c0=_0x3026e5===0x0?_0x51a00f(0x178):'–∑–∞\x20'+_0x3026e5+_0x51a00f(0x207);_0x5eee5d[_0x51a00f(0x1a2)]=_0x51a00f(0x132)+_0x29c4c0+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document[_0x51a00f(0x1a3)](_0x51a00f(0x17b))[_0x51a00f(0x137)]['add'](_0x51a00f(0x1ae)),document[_0x51a00f(0x1a3)](_0x51a00f(0x14e))['classList'][_0x51a00f(0x1b6)](_0x51a00f(0x1c0));}function a3_0x3e8e(_0x1be7e6,_0x1a0d05){_0x1be7e6=_0x1be7e6-0x12e;const _0x811f4=a3_0x11ff();let _0x50ef89=_0x811f4[_0x1be7e6];return _0x50ef89;}function closeAllSheets(){const _0x4e08fc=a3_0x163bd8;document['getElementById']('overlay')[_0x4e08fc(0x137)][_0x4e08fc(0x185)](_0x4e08fc(0x1ae)),document[_0x4e08fc(0x142)]('.sheet')['forEach'](_0x42b0ff=>_0x42b0ff[_0x4e08fc(0x137)][_0x4e08fc(0x185)](_0x4e08fc(0x1c0)));}function openSheet(_0x3d0b23){const _0x20c02d=a3_0x163bd8;document[_0x20c02d(0x1a3)](_0x20c02d(0x17b))[_0x20c02d(0x137)][_0x20c02d(0x1b6)]('active'),document[_0x20c02d(0x1a3)](_0x3d0b23)[_0x20c02d(0x137)][_0x20c02d(0x1b6)](_0x20c02d(0x1c0));}function getLocalDateStr(_0xe4e2b7){const _0x199148=a3_0x163bd8,_0x222f4b=_0xe4e2b7[_0x199148(0x12f)](),_0x5f47d1=String(_0xe4e2b7[_0x199148(0x136)]()+0x1)['padStart'](0x2,'0'),_0x5083a9=String(_0xe4e2b7['getDate']())[_0x199148(0x219)](0x2,'0');return _0x222f4b+'-'+_0x5f47d1+'-'+_0x5083a9;}function getStartOfWeek(_0x3a8995){const _0x297d29=a3_0x163bd8,_0x21b0a4=new Date(_0x3a8995),_0x13c7b1=_0x21b0a4['getDay'](),_0x14531d=_0x21b0a4[_0x297d29(0x1ad)]()-_0x13c7b1+(_0x13c7b1===0x0?-0x6:0x1);return _0x21b0a4['setDate'](_0x14531d),_0x21b0a4['setHours'](0x0,0x0,0x0,0x0),_0x21b0a4;}function scrollToToday(){const _0x5618a8=getLocalDateStr(new Date());setTimeout(()=>{const _0x391545=a3_0x3e8e,_0x348349=document[_0x391545(0x15b)](_0x391545(0x1ca)+_0x5618a8+'\x22]');if(_0x348349){const _0xcd3915=document[_0x391545(0x1a3)]('matrixViewport'),_0x4b8094=_0x348349[_0x391545(0x210)]-_0xcd3915['clientWidth']/0x2+_0x348349[_0x391545(0x1a8)]/0x2;_0xcd3915[_0x391545(0x169)]({'left':_0x4b8094,'behavior':'auto'}),_0xcd3915[_0x391545(0x158)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x5a39be=a3_0x163bd8,_0x48ce0b=new Date(),_0x373e5f=document['getElementById'](_0x5a39be(0x211)),_0x1b295f=document[_0x5a39be(0x1a3)]('timeLineBadge'),_0x3c6b89=(_0x48ce0b['getHours']()*0x3c+_0x48ce0b[_0x5a39be(0x223)]())/0x3c*GRID_H;_0x373e5f[_0x5a39be(0x22a)]['top']=_0x3c6b89+'px',_0x373e5f[_0x5a39be(0x22a)][_0x5a39be(0x1f6)]='block',_0x1b295f[_0x5a39be(0x22a)][_0x5a39be(0x227)]=_0x3c6b89+'px',_0x1b295f[_0x5a39be(0x22a)][_0x5a39be(0x1f6)]=_0x5a39be(0x1ac),_0x1b295f['textContent']=String(_0x48ce0b[_0x5a39be(0x1e9)]())[_0x5a39be(0x219)](0x2,'0')+':'+String(_0x48ce0b[_0x5a39be(0x223)]())[_0x5a39be(0x219)](0x2,'0');}function onScroll(){const _0x37947c=a3_0x163bd8,_0x33fb28=document[_0x37947c(0x1a3)](_0x37947c(0x17d)),_0x4e74ad=document[_0x37947c(0x142)](_0x37947c(0x1cc));for(let _0x4be720 of _0x4e74ad)if(_0x4be720[_0x37947c(0x210)]>=_0x33fb28[_0x37947c(0x174)]){const _0x5393ad=new Date(_0x4be720[_0x37947c(0x203)]('data-date'));document[_0x37947c(0x1a3)](_0x37947c(0x18c))[_0x37947c(0x1a2)]=_0x5393ad['toLocaleString']('ru',{'month':_0x37947c(0x192)})[_0x37947c(0x213)]()+'\x20'+_0x5393ad[_0x37947c(0x12f)]();break;}}function showToast(_0x58f69b){const _0x4613bb=a3_0x163bd8,_0x82b610=document['getElementById'](_0x4613bb(0x143));_0x82b610[_0x4613bb(0x1a2)]=_0x58f69b,_0x82b610[_0x4613bb(0x137)][_0x4613bb(0x1b6)]('show'),setTimeout(()=>_0x82b610[_0x4613bb(0x137)][_0x4613bb(0x185)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x9808f5=a3_0x163bd8,_0x5dcd05=document[_0x9808f5(0x1a3)](_0x9808f5(0x17d)),_0x346170=_0x5dcd05['scrollLeft'],_0x6447d0=_0x5dcd05['scrollWidth'],_0x323c6d=_0x5dcd05[_0x9808f5(0x13b)];if(_0x6447d0-(_0x346170+_0x323c6d)<0x12c){const _0x471ae0=endOffset;endOffset+=0xe,renderDayRange(_0x471ae0+0x1,endOffset),reRenderBlocks();}if(_0x346170<0x12c){const _0x451497=startOffset;startOffset-=0xe,prependDays(startOffset,_0x451497-0x1),_0x5dcd05[_0x9808f5(0x174)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x28dd0b,_0x3e6db1){const _0x4bf642=a3_0x163bd8,_0x12cda0=document['getElementById'](_0x4bf642(0x21d)),_0x244865=document[_0x4bf642(0x1a3)]('gridColumns'),_0x2457fb=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x241395=new Date();_0x241395[_0x4bf642(0x1c4)](0x0,0x0,0x0,0x0);const _0xd47700=getLocalDateStr(new Date()),_0x4df168=document[_0x4bf642(0x1d6)](),_0x27f254=document[_0x4bf642(0x1d6)]();for(let _0x2d010a=_0x28dd0b;_0x2d010a<=_0x3e6db1;_0x2d010a++){const _0x4ec2ad=new Date(_0x241395);_0x4ec2ad[_0x4bf642(0x214)](_0x4ec2ad[_0x4bf642(0x1ad)]()+_0x2d010a);const _0x4d8689=getLocalDateStr(_0x4ec2ad);let _0x2fff50=_0x4ec2ad[_0x4bf642(0x21c)]()-0x1;if(_0x2fff50===-0x1)_0x2fff50=0x6;const _0x5a86ac=_0x4d8689===_0xd47700,_0x6f38da=document[_0x4bf642(0x1fd)]('div');_0x6f38da[_0x4bf642(0x14a)]=_0x4bf642(0x206)+(_0x5a86ac?'today':''),_0x6f38da[_0x4bf642(0x20f)]('data-date',_0x4d8689),_0x6f38da[_0x4bf642(0x187)]=_0x4bf642(0x1d3)+_0x2457fb[_0x2fff50]+_0x4bf642(0x1a7)+_0x4ec2ad[_0x4bf642(0x1ad)]()+_0x4bf642(0x1cf),_0x4df168['appendChild'](_0x6f38da);const _0x523e44=document['createElement']('div');_0x523e44[_0x4bf642(0x14a)]=_0x4bf642(0x1bf)+(_0x5a86ac?_0x4bf642(0x1e8):''),_0x523e44[_0x4bf642(0x20f)](_0x4bf642(0x173),_0x4d8689),_0x523e44[_0x4bf642(0x20f)](_0x4bf642(0x1f2),_0x2fff50),_0x27f254[_0x4bf642(0x1fa)](_0x523e44);}_0x12cda0[_0x4bf642(0x19c)](_0x4df168,_0x12cda0[_0x4bf642(0x13e)]),_0x244865[_0x4bf642(0x19c)](_0x27f254,_0x244865['querySelector'](_0x4bf642(0x175)));}function a3_0x11ff(){const _0x5b1393=['rs-time-btn','data-date','scrollLeft','.day-column','now','initDataUnsafe','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','px\x200px','settings','overlay','toLocaleDateString','matrixViewport','offClick','stopPropagation','fontWeight','17646wuqbtH','\x20–≤\x20','error','done','remove','anStart','innerHTML','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','\x20-\x20','status','initData','headerMonth','custom','rsSlotsGrid','setBackgroundColor','client_cancel','onclick','long','setMonth','.rs-date-chip','41745LijxWK','height','Critical\x20TMA\x20Error:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','entries','T23:59:59','event-card','insertBefore','anEnd','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','Telegram','completed','cancel_window','textContent','getElementById','toString','startsWith','strokeDashoffset','</div><div\x20class=\x22dch-num\x22>','offsetWidth','Error\x20setting\x20back\x20button:','json','mini','block','getDate','active','clients','show','split','none','%\x20+\x202px)','608lUAXIN','cancelHint','add','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','user','analyticsSheet','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','sid','flex','%\x20-\x204px)','301QcEeng','day-column\x20','open','detStatus','month','px\x20-','setHours','constructor','ru-RU','.period-switch\x20.p-btn','timeColumn','clientId','.day-col-header[data-date=\x22','findIndex','.day-col-header','exceptions','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','</div>','button','test','all','<div\x20class=\x22dch-day\x22>','pattern','parse','createDocumentFragment','Error\x20setting\x20color:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ready','5370273BVSLXd','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','total','substr','search','backgroundPosition','client_load','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','start','dateStr','join','location','today','getHours','div','</span>\x20/\x20','backgroundColor','visible','ccYesBtn','width','uc_client_sessions','coach_profiles','data-day-idx','scroll','</div><div\x20class=\x22rs-day-num\x22>','3729056JqEOxm','display','end','<span>','max','appendChild','addEventListener','gridColumns','createElement','DOMContentLoaded','get_slots','WebApp','length','\x20–∏–∑\x20','getAttribute','getTime','filter','day-col-header\x20','\x20—á.','anPercent','#0a84ff','coachId','Unknown','var(--acc-blue)','client-stat-card','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','setAttribute','offsetLeft','globalTimeLine','1348120jbyRqV','toUpperCase','setDate','–û—Ç–º–µ–Ω–µ–Ω–æ','rs-date-chip','then','.btn-reschedule','padStart','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','POST','getDay','daysHeaderTrack','2465559eCKihu','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','map','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','sort','getMinutes','rsDatesTrack','reschedule','ranges','top','analyticsList','calc(','style','left','slice','getFullYear','stringify','detTime','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','round','blocked-slot\x20stripe-bg','getMonth','classList','floor','applyData','customConfirm','clientWidth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','saveLocally','firstChild','note','planned','color','querySelectorAll','toast','forEach','rgba(','borderLeftColor','ccText','syncLoad','600','className','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','data','cid','detailsSheet','(((.+)+)+)+$','618322vGTQRG','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','uc_client_list','push','detDate','BackButton','#050505','scrollTop','min','seriesId','querySelector','numeric','find','disableVerticalSwipes','setItem','\x20status-completed','expand','rgba(10,\x20132,\x20255,\x20','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','4JueKSm','value','ccTitle','getItem','scrollTo','calendar','colIndex','anTotalStats','router.html','apply','anCustomDates','week','v9.5-CLIENT-ANALYTICS'];a3_0x11ff=function(){return _0x5b1393;};return a3_0x11ff();}function hexToRgba(_0xc8b924,_0x16679a){const _0x594170=a3_0x163bd8;let _0x195d38;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x594170(0x1d1)](_0xc8b924))return _0x195d38=_0xc8b924['substring'](0x1)[_0x594170(0x1b1)](''),_0x195d38['length']==0x3&&(_0x195d38=[_0x195d38[0x0],_0x195d38[0x0],_0x195d38[0x1],_0x195d38[0x1],_0x195d38[0x2],_0x195d38[0x2]]),_0x195d38='0x'+_0x195d38[_0x594170(0x1e6)](''),_0x594170(0x145)+[_0x195d38>>0x10&0xff,_0x195d38>>0x8&0xff,_0x195d38&0xff]['join'](',')+','+_0x16679a+')';return _0x594170(0x162)+_0x16679a+')';}let confirmResolver=null;function showCustomConfirm(_0x48fcca,_0x3a0194,_0xcecc0d=!![]){const _0x1eeb9c=a3_0x163bd8;document[_0x1eeb9c(0x1a3)](_0x1eeb9c(0x167))[_0x1eeb9c(0x1a2)]=_0x48fcca,document[_0x1eeb9c(0x1a3)](_0x1eeb9c(0x147))[_0x1eeb9c(0x1a2)]=_0x3a0194;const _0x26fdac=document['getElementById'](_0x1eeb9c(0x1ee));return _0xcecc0d?(_0x26fdac[_0x1eeb9c(0x22a)]['color']='#ff453a',_0x26fdac[_0x1eeb9c(0x22a)][_0x1eeb9c(0x180)]=_0x1eeb9c(0x149)):(_0x26fdac['style'][_0x1eeb9c(0x141)]=_0x1eeb9c(0x209),_0x26fdac[_0x1eeb9c(0x22a)][_0x1eeb9c(0x180)]='600'),new Promise(_0x373556=>{const _0x7802b4=_0x1eeb9c;confirmResolver=_0x373556,document[_0x7802b4(0x1a3)](_0x7802b4(0x13a))[_0x7802b4(0x137)]['add']('visible');});}function resolveCustomConfirm(_0xc9e35a){const _0x211d40=a3_0x163bd8;document[_0x211d40(0x1a3)]('customConfirm')[_0x211d40(0x137)][_0x211d40(0x185)](_0x211d40(0x1ed));if(confirmResolver)confirmResolver(_0xc9e35a);}async function tryCancelCurrentSession(){const _0x37d72a=a3_0x163bd8;if(!currentSession)return;const _0x11eabd=await showCustomConfirm(_0x37d72a(0x163),'–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?',!![]);if(!_0x11eabd)return;const _0x5eff56=currentSession;closeAllSheets(),sessions=sessions[_0x37d72a(0x205)](_0x1d3cc8=>_0x1d3cc8['id']!==_0x5eff56['id']),reRenderBlocks(),showToast(_0x37d72a(0x215)),lastUserActionTime=Date[_0x37d72a(0x176)]();try{const _0x2f3cba=window[_0x37d72a(0x19f)]?.[_0x37d72a(0x200)],_0x32ea94=await fetch(API_URL,{'method':_0x37d72a(0x21b),'body':JSON[_0x37d72a(0x130)]({'action':_0x37d72a(0x190),'init_data':_0x2f3cba?.[_0x37d72a(0x18b)]||'','coachId':_0x5eff56[_0x37d72a(0x20a)],'dateStr':_0x5eff56[_0x37d72a(0x1e5)],'sessionId':_0x5eff56['id']})});if(_0x32ea94['ok'])DataManager[_0x37d72a(0x13d)]();}catch(_0xb28ea9){showToast(_0x37d72a(0x188));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0xa6a107=a3_0x163bd8;if(!currentSession)return;document['getElementById'](_0xa6a107(0x14e))[_0xa6a107(0x137)][_0xa6a107(0x185)](_0xa6a107(0x1c0)),document['getElementById']('rescheduleSheet')[_0xa6a107(0x137)][_0xa6a107(0x1b6)](_0xa6a107(0x1c0));const _0x541b47=document['getElementById'](_0xa6a107(0x224)),_0x182813=document[_0xa6a107(0x1a3)]('rsSlotsGrid');_0x541b47[_0xa6a107(0x187)]='',_0x182813['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x348d8c,_0x2d4a6a]=currentSession[_0xa6a107(0x1e4)][_0xa6a107(0x1b1)](':')[_0xa6a107(0x220)](Number),[_0xa5b151,_0x4a9d70]=currentSession[_0xa6a107(0x1f7)][_0xa6a107(0x1b1)](':')[_0xa6a107(0x220)](Number),_0x1b5e4c=_0xa5b151*0x3c+_0x4a9d70-(_0x348d8c*0x3c+_0x2d4a6a);try{const _0x2ac113=window[_0xa6a107(0x19f)]?.[_0xa6a107(0x200)],_0x4d5685=await fetch(API_URL,{'method':_0xa6a107(0x21b),'body':JSON[_0xa6a107(0x130)]({'action':_0xa6a107(0x1ff),'coachId':currentSession['coachId'],'duration':_0x1b5e4c,'init_data':_0x2ac113?.[_0xa6a107(0x18b)]||'','excludeSessionId':currentSession['id']})}),_0x154509=await _0x4d5685[_0xa6a107(0x1aa)]();_0x154509['ok']&&_0x154509[_0xa6a107(0x14c)]?(availableSlotsCache=_0x154509['data'],renderRescheduleDates()):_0x182813[_0xa6a107(0x187)]=_0xa6a107(0x20e);}catch(_0x4470ce){_0x182813['innerHTML']=_0xa6a107(0x14b);}}function renderRescheduleDates(){const _0x4570e1=a3_0x163bd8,_0x2981d6=document[_0x4570e1(0x1a3)]('rsDatesTrack');_0x2981d6[_0x4570e1(0x187)]='';const _0x4cb1d4=Object['keys'](availableSlotsCache)[_0x4570e1(0x222)](),_0x74dc4=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x4cb1d4[_0x4570e1(0x201)]===0x0){document['getElementById']('rsSlotsGrid')[_0x4570e1(0x187)]=_0x4570e1(0x133);return;}_0x4cb1d4[_0x4570e1(0x144)]((_0x1f17d3,_0x4ee9bc)=>{const _0x59d62a=_0x4570e1,_0x317d99=new Date(_0x1f17d3),_0xdceea7=_0x74dc4[_0x317d99[_0x59d62a(0x21c)]()],_0x3f24d4=_0x317d99[_0x59d62a(0x1ad)](),_0x147d2f=document[_0x59d62a(0x1fd)](_0x59d62a(0x1ea));_0x147d2f[_0x59d62a(0x14a)]=_0x59d62a(0x216);if(_0x4ee9bc===0x0)_0x147d2f[_0x59d62a(0x137)]['add']('active');_0x147d2f[_0x59d62a(0x187)]='<div\x20class=\x22rs-day-name\x22>'+_0xdceea7+_0x59d62a(0x1f4)+_0x3f24d4+_0x59d62a(0x1cf),_0x147d2f[_0x59d62a(0x191)]=()=>selectRsDate(_0x1f17d3,_0x147d2f),_0x2981d6[_0x59d62a(0x1fa)](_0x147d2f);}),selectRsDate(_0x4cb1d4[0x0],_0x2981d6[_0x4570e1(0x13e)]);}function selectRsDate(_0x1a5426,_0x66d948){const _0x1bb051=a3_0x163bd8;selectedRsDate=_0x1a5426,document[_0x1bb051(0x142)](_0x1bb051(0x194))[_0x1bb051(0x144)](_0x1d61e8=>_0x1d61e8['classList'][_0x1bb051(0x185)]('active'));if(_0x66d948)_0x66d948['classList'][_0x1bb051(0x1b6)](_0x1bb051(0x1ae));const _0x4201c7=document[_0x1bb051(0x1a3)](_0x1bb051(0x18e));_0x4201c7[_0x1bb051(0x187)]='';const _0x4cd8dc=availableSlotsCache[_0x1a5426]||[];if(_0x4cd8dc[_0x1bb051(0x201)]===0x0){_0x4201c7[_0x1bb051(0x187)]=_0x1bb051(0x20e);return;}_0x4cd8dc[_0x1bb051(0x144)](_0x188f8d=>{const _0x3579fb=_0x1bb051,_0x2f44c1=document[_0x3579fb(0x1fd)](_0x3579fb(0x1d0));_0x2f44c1['className']=_0x3579fb(0x172),_0x2f44c1['textContent']=_0x188f8d,_0x2f44c1[_0x3579fb(0x191)]=()=>confirmReschedule(_0x188f8d),_0x4201c7[_0x3579fb(0x1fa)](_0x2f44c1);});}async function confirmReschedule(_0xf0d75b){const _0x5ceeb7=a3_0x163bd8,_0x45e505=new Date(selectedRsDate),_0x5bcd0e=_0x45e505[_0x5ceeb7(0x17c)](_0x5ceeb7(0x1c6),{'day':_0x5ceeb7(0x15c),'month':'long'}),_0x1e17f1=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏',_0x5ceeb7(0x21a)+_0x5bcd0e+_0x5ceeb7(0x182)+_0xf0d75b+'?',![]);if(!_0x1e17f1)return;closeAllSheets(),showToast(_0x5ceeb7(0x221)),lastUserActionTime=Date['now']();const _0x2c3910=currentSession[_0x5ceeb7(0x1e5)],_0x1539f9=currentSession['id'],[_0x17cc40,_0x667c00]=currentSession[_0x5ceeb7(0x1e4)][_0x5ceeb7(0x1b1)](':')[_0x5ceeb7(0x220)](Number),[_0x24f6e8,_0x4b47f9]=currentSession['end'][_0x5ceeb7(0x1b1)](':')['map'](Number),_0x46839d=_0x24f6e8*0x3c+_0x4b47f9-(_0x17cc40*0x3c+_0x667c00),[_0x2b2924,_0x3faa2a]=_0xf0d75b[_0x5ceeb7(0x1b1)](':')[_0x5ceeb7(0x220)](Number),_0x154915=_0x2b2924*0x3c+_0x3faa2a+_0x46839d,_0x413089=Math[_0x5ceeb7(0x138)](_0x154915/0x3c),_0x20393a=_0x154915%0x3c,_0x51b544=String(_0x413089)[_0x5ceeb7(0x219)](0x2,'0')+':'+String(_0x20393a)[_0x5ceeb7(0x219)](0x2,'0'),_0x4d018e=sessions[_0x5ceeb7(0x1cb)](_0x44e5be=>_0x44e5be['id']===_0x1539f9);_0x4d018e!==-0x1&&(sessions[_0x4d018e][_0x5ceeb7(0x1e5)]=selectedRsDate,sessions[_0x4d018e][_0x5ceeb7(0x1e4)]=_0xf0d75b,sessions[_0x4d018e][_0x5ceeb7(0x1f7)]=_0x51b544,reRenderBlocks());try{const _0x47ccd3=window['Telegram']?.[_0x5ceeb7(0x200)],_0x30ed6b=await fetch(API_URL,{'method':_0x5ceeb7(0x21b),'body':JSON[_0x5ceeb7(0x130)]({'action':_0x5ceeb7(0x225),'init_data':_0x47ccd3?.[_0x5ceeb7(0x18b)]||'','oldSessionId':_0x1539f9,'oldDate':_0x2c3910,'newDate':selectedRsDate,'newTime':_0xf0d75b,'coachId':currentSession[_0x5ceeb7(0x20a)]})}),_0x1a0240=await _0x30ed6b[_0x5ceeb7(0x1aa)]();!_0x1a0240['ok']?(showToast(_0x5ceeb7(0x164)),DataManager[_0x5ceeb7(0x148)]()):(showToast(_0x5ceeb7(0x1ba)),DataManager[_0x5ceeb7(0x13d)]());}catch(_0x5b849f){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x163bd8(0x1fb)](a3_0x163bd8(0x1fe),init);