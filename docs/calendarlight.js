const a3_0x359894=a3_0x1fd3;(function(_0x3fea68,_0x1fdb78){const _0x4ddcf8=a3_0x1fd3,_0x5e49f5=_0x3fea68();while(!![]){try{const _0x1ed11f=-parseInt(_0x4ddcf8(0x1d1))/0x1*(-parseInt(_0x4ddcf8(0x238))/0x2)+parseInt(_0x4ddcf8(0x1d6))/0x3*(-parseInt(_0x4ddcf8(0x1b0))/0x4)+-parseInt(_0x4ddcf8(0x1ff))/0x5*(-parseInt(_0x4ddcf8(0x1d7))/0x6)+parseInt(_0x4ddcf8(0x18a))/0x7+parseInt(_0x4ddcf8(0x196))/0x8+-parseInt(_0x4ddcf8(0x1fb))/0x9*(-parseInt(_0x4ddcf8(0x1d4))/0xa)+parseInt(_0x4ddcf8(0x1cb))/0xb*(-parseInt(_0x4ddcf8(0x1e3))/0xc);if(_0x1ed11f===_0x1fdb78)break;else _0x5e49f5['push'](_0x5e49f5['shift']());}catch(_0x19e7ab){_0x5e49f5['push'](_0x5e49f5['shift']());}}}(a3_0x3f7c,0x1dda0));const APP_VERSION=a3_0x359894(0x260),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c,KEY_SESSIONS=a3_0x359894(0x1a7),KEY_SETTINGS=a3_0x359894(0x194),KEY_CLIENTS=a3_0x359894(0x184);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x359894(0x223),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x25dc52=a3_0x359894,_0x41f54c=(function(){let _0xbd0615=!![];return function(_0x24aeca,_0x3c1c33){const _0x5095f9=_0xbd0615?function(){const _0x52ada7=a3_0x1fd3;if(_0x3c1c33){const _0x29679c=_0x3c1c33[_0x52ada7(0x1dd)](_0x24aeca,arguments);return _0x3c1c33=null,_0x29679c;}}:function(){};return _0xbd0615=![],_0x5095f9;};}()),_0x31ce0b=_0x41f54c(this,function(){const _0x58e49c=a3_0x1fd3;return _0x31ce0b['toString']()[_0x58e49c(0x269)](_0x58e49c(0x248))[_0x58e49c(0x209)]()[_0x58e49c(0x1fd)](_0x31ce0b)[_0x58e49c(0x269)](_0x58e49c(0x248));});_0x31ce0b();try{const _0x4bcf25=window[_0x25dc52(0x26e)]?.[_0x25dc52(0x1d0)];if(!_0x4bcf25)return;_0x4bcf25['ready'](),_0x4bcf25['expand']();try{_0x4bcf25[_0x25dc52(0x1ef)](_0x25dc52(0x1c1)),_0x4bcf25[_0x25dc52(0x26b)]&&_0x4bcf25[_0x25dc52(0x26b)](_0x25dc52(0x1c1));}catch(_0x11ef11){console[_0x25dc52(0x262)](_0x25dc52(0x241),_0x11ef11);}try{_0x4bcf25[_0x25dc52(0x1e9)]&&(_0x4bcf25[_0x25dc52(0x1e9)][_0x25dc52(0x22a)](),_0x4bcf25[_0x25dc52(0x1e9)][_0x25dc52(0x227)](),_0x4bcf25['BackButton'][_0x25dc52(0x19d)](function(){const _0x2c51bc=_0x25dc52;window[_0x2c51bc(0x25a)]['href']='router.html';}));}catch(_0x14d57b){console[_0x25dc52(0x262)]('Error\x20setting\x20back\x20button:',_0x14d57b);}try{if(_0x4bcf25[_0x25dc52(0x1d2)])_0x4bcf25['disableVerticalSwipes']();}catch(_0x47a19d){}}catch(_0x31fd57){console['error'](_0x25dc52(0x1da),_0x31fd57);}}());function a3_0x1fd3(_0x4ec0dc,_0x4c161e){_0x4ec0dc=_0x4ec0dc-0x181;const _0x56d94a=a3_0x3f7c();let _0x3c9747=_0x56d94a[_0x4ec0dc];return _0x3c9747;}function isAdmin(){const _0x4912ec=a3_0x359894;try{const _0x335451=Number(window[_0x4912ec(0x26e)]?.[_0x4912ec(0x1d0)]?.['initDataUnsafe']?.[_0x4912ec(0x24f)]?.['id']);return _0x335451===0xbaf7174;}catch(_0x361814){return![];}}const DataManager={'saveLocally'(){const _0x2ced1c=a3_0x359894;try{localStorage['setItem'](KEY_SESSIONS,JSON[_0x2ced1c(0x235)](sessions)),localStorage[_0x2ced1c(0x1a1)](KEY_CLIENTS,JSON[_0x2ced1c(0x235)](clients)),localStorage[_0x2ced1c(0x1a1)](KEY_SETTINGS,JSON[_0x2ced1c(0x235)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x5ec88e){}},'loadLocal'(){const _0xa50cf2=a3_0x359894;try{const _0x1153e6=localStorage[_0xa50cf2(0x273)](KEY_SESSIONS);if(_0x1153e6)sessions=JSON[_0xa50cf2(0x239)](_0x1153e6);const _0x52e4ca=localStorage['getItem'](KEY_CLIENTS);if(_0x52e4ca)clients=JSON[_0xa50cf2(0x239)](_0x52e4ca);const _0x1f5264=localStorage['getItem'](KEY_SETTINGS);if(_0x1f5264){const _0x28689d=JSON[_0xa50cf2(0x239)](_0x1f5264);if(_0x28689d[_0xa50cf2(0x1bc)])availabilityPattern=_0x28689d['pattern'];if(_0x28689d[_0xa50cf2(0x20c)])specialRanges=_0x28689d[_0xa50cf2(0x20c)];if(_0x28689d[_0xa50cf2(0x192)])dateExceptions=_0x28689d[_0xa50cf2(0x192)];}}catch(_0x487e85){}},async 'syncLoad'(){const _0xbd5d20=a3_0x359894,_0x4d814e=new Date(),_0x396921=_0x4d814e['getFullYear']()+'-'+String(_0x4d814e[_0xbd5d20(0x1a9)]()+0x1)[_0xbd5d20(0x1d8)](0x2,'0'),_0x454d70=new Date(_0x4d814e);_0x454d70['setMonth'](_0x4d814e[_0xbd5d20(0x1a9)]()+0x1);const _0xef38e9=_0x454d70[_0xbd5d20(0x23c)]()+'-'+String(_0x454d70['getMonth']()+0x1)[_0xbd5d20(0x1d8)](0x2,'0'),_0x25f10d=Date['now']();try{const _0x3a1ba2=window['Telegram']?.[_0xbd5d20(0x1d0)],_0x25a755=_0x3a1ba2?.[_0xbd5d20(0x24b)]||'',[_0x4ee5ba,_0x3a6a9e]=await Promise[_0xbd5d20(0x186)]([fetch(API_URL,{'method':_0xbd5d20(0x1c3),'body':JSON['stringify']({'action':_0xbd5d20(0x264),'init_data':_0x25a755,'month_str':_0x396921})})[_0xbd5d20(0x217)](_0x4c4ad1=>_0x4c4ad1['json']()),fetch(API_URL,{'method':_0xbd5d20(0x1c3),'body':JSON[_0xbd5d20(0x235)]({'action':_0xbd5d20(0x264),'init_data':_0x25a755,'month_str':_0xef38e9})})[_0xbd5d20(0x217)](_0x59b7f6=>_0x59b7f6[_0xbd5d20(0x216)]())]);if(lastUserActionTime>_0x25f10d){console[_0xbd5d20(0x262)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x4ee5ba['ok'])this[_0xbd5d20(0x245)](_0x4ee5ba[_0xbd5d20(0x1b8)],_0x396921);if(_0x3a6a9e['ok'])this['applyData'](_0x3a6a9e['data'],_0xef38e9);this['saveLocally']();}catch(_0x2c7ff3){}},'applyData'(_0x42de90,_0x356707){const _0x5d5c13=a3_0x359894;if(!_0x42de90)return;if(_0x42de90[_0x5d5c13(0x1e7)]){if(_0x42de90['settings'][_0x5d5c13(0x1bc)])availabilityPattern=_0x42de90[_0x5d5c13(0x1e7)]['pattern'];if(_0x42de90[_0x5d5c13(0x1e7)][_0x5d5c13(0x20c)])specialRanges=_0x42de90[_0x5d5c13(0x1e7)]['ranges'];if(_0x42de90[_0x5d5c13(0x1e7)][_0x5d5c13(0x192)])dateExceptions=_0x42de90[_0x5d5c13(0x1e7)][_0x5d5c13(0x192)];}if(_0x42de90[_0x5d5c13(0x1a4)]&&Array[_0x5d5c13(0x1fc)](_0x42de90[_0x5d5c13(0x1a4)]))clients=_0x42de90['clients'];_0x42de90[_0x5d5c13(0x1bf)]&&(coachProfiles={...coachProfiles,..._0x42de90[_0x5d5c13(0x1bf)]}),_0x42de90[_0x5d5c13(0x1b7)]&&(sessions=sessions[_0x5d5c13(0x1e6)](_0x4703a4=>!_0x4703a4[_0x5d5c13(0x211)][_0x5d5c13(0x25c)](_0x356707)),Object['keys'](_0x42de90[_0x5d5c13(0x1b7)])[_0x5d5c13(0x207)](_0x4aa953=>{const _0x2087a0=_0x5d5c13,_0x289c8e=_0x42de90[_0x2087a0(0x1b7)][_0x4aa953];_0x289c8e[_0x2087a0(0x207)](_0x54c433=>{const _0x4dcc03=_0x2087a0;sessions[_0x4dcc03(0x225)]({'id':_0x54c433['i'],'clientId':_0x54c433['c'],'coachId':_0x54c433[_0x4dcc03(0x1db)],'dateStr':_0x356707+'-'+_0x4aa953[_0x4dcc03(0x1d8)](0x2,'0'),'start':_0x54c433['s'],'end':_0x54c433['e'],'note':_0x54c433['n']||'','status':_0x54c433['st']||_0x4dcc03(0x271),'seriesId':_0x54c433['sid']});});})),reRenderBlocks();}};function init(){const _0xcb913c=a3_0x359894;DataManager[_0xcb913c(0x1eb)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0xcb913c(0x250)](_0xcb913c(0x1f0))[_0xcb913c(0x1d5)](_0xcb913c(0x206),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0xcb913c(0x19f)]();}function renderTimeColumn(){const _0x2c8532=a3_0x359894,_0x5123b5=document[_0x2c8532(0x250)](_0x2c8532(0x1ac)),_0xf50cc1=document[_0x2c8532(0x250)]('timeLineBadge');_0x5123b5[_0x2c8532(0x261)]='',_0x5123b5[_0x2c8532(0x1bd)](_0xf50cc1);for(let _0x2932c3=0x0;_0x2932c3<0x18;_0x2932c3++){const _0x175403=document['createElement']('div');_0x175403[_0x2c8532(0x1fe)]=_0x2c8532(0x256);if(_0x2932c3>0x0)_0x175403[_0x2c8532(0x261)]=_0x2c8532(0x236)+String(_0x2932c3)[_0x2c8532(0x1d8)](0x2,'0')+_0x2c8532(0x1c7);_0x5123b5[_0x2c8532(0x1bd)](_0x175403);}}function renderDayRange(_0x519b80,_0x1b8190){const _0x56a05e=a3_0x359894,_0x3ff9bf=document[_0x56a05e(0x250)](_0x56a05e(0x1a5)),_0x590d73=document[_0x56a05e(0x250)](_0x56a05e(0x198)),_0x41f683=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x490831=new Date();_0x490831[_0x56a05e(0x247)](0x0,0x0,0x0,0x0);const _0x464018=getLocalDateStr(new Date());for(let _0x45b7f3=_0x519b80;_0x45b7f3<=_0x1b8190;_0x45b7f3++){const _0x242121=new Date(_0x490831);_0x242121[_0x56a05e(0x1a2)](_0x242121['getDate']()+_0x45b7f3);const _0x221963=getLocalDateStr(_0x242121);let _0x2df789=_0x242121['getDay']()-0x1;if(_0x2df789===-0x1)_0x2df789=0x6;const _0x472691=_0x221963===_0x464018,_0x4f0759=document['createElement'](_0x56a05e(0x22f));_0x4f0759[_0x56a05e(0x1fe)]=_0x56a05e(0x19e)+(_0x472691?'today':''),_0x4f0759[_0x56a05e(0x23f)](_0x56a05e(0x1dc),_0x221963),_0x4f0759['innerHTML']=_0x56a05e(0x19c)+_0x41f683[_0x2df789]+'</div><div\x20class=\x22dch-num\x22>'+_0x242121[_0x56a05e(0x218)]()+_0x56a05e(0x1c2),_0x3ff9bf[_0x56a05e(0x1bd)](_0x4f0759);const _0x252e81=document[_0x56a05e(0x210)](_0x56a05e(0x22f));_0x252e81[_0x56a05e(0x1fe)]=_0x56a05e(0x185)+(_0x472691?_0x56a05e(0x25e):''),_0x252e81[_0x56a05e(0x23f)]('data-date',_0x221963),_0x252e81[_0x56a05e(0x23f)](_0x56a05e(0x18d),_0x2df789),_0x590d73[_0x56a05e(0x1bd)](_0x252e81);}}function reRenderBlocks(){const _0x4e88c8=a3_0x359894;document['querySelectorAll'](_0x4e88c8(0x237))[_0x4e88c8(0x207)](_0x44470a=>{const _0x5e021b=_0x4e88c8;_0x44470a[_0x5e021b(0x203)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x5e021b(0x207)](_0x31df18=>_0x31df18[_0x5e021b(0x276)]());const _0x2d7f8f=_0x44470a[_0x5e021b(0x26f)](_0x5e021b(0x1dc)),_0x47aba7=parseInt(_0x44470a[_0x5e021b(0x26f)](_0x5e021b(0x18d))),_0x37fa05=Math[_0x5e021b(0x23e)](_0x44470a[_0x5e021b(0x21b)]);(availabilityPattern[_0x47aba7]||[])['forEach'](_0x1ce940=>{const _0x29a7c2=_0x5e021b,_0x240f02=document[_0x29a7c2(0x210)](_0x29a7c2(0x22f));_0x240f02['className']=_0x29a7c2(0x1f9),_0x240f02[_0x29a7c2(0x1cd)][_0x29a7c2(0x212)]=_0x1ce940*GRID_H+'px',_0x240f02[_0x29a7c2(0x1cd)][_0x29a7c2(0x182)]='-'+_0x37fa05+_0x29a7c2(0x25d)+_0x1ce940*GRID_H+'px',_0x44470a[_0x29a7c2(0x1bd)](_0x240f02);});if(specialRanges[_0x5e021b(0x19b)]>0x0){const _0xbcd605=new Date(_0x2d7f8f+'T00:00:00')['getTime'](),_0x4fa0ec=new Date(_0x2d7f8f+_0x5e021b(0x1df))[_0x5e021b(0x232)]();specialRanges[_0x5e021b(0x207)](_0xc70913=>{const _0x54149c=_0x5e021b,_0x381c06=new Date(_0xc70913[_0x54149c(0x263)])['getTime'](),_0x7492ef=new Date(_0xc70913[_0x54149c(0x1f8)])[_0x54149c(0x232)](),_0x4f5a78=Math[_0x54149c(0x1a0)](_0xbcd605,_0x381c06),_0x3cb134=Math[_0x54149c(0x1ee)](_0x4fa0ec,_0x7492ef);if(_0x4f5a78<_0x3cb134){const _0x4a7c3b=(_0x4f5a78-_0xbcd605)/0x36ee80*GRID_H,_0x55d498=(_0x3cb134-_0x4f5a78)/0x36ee80*GRID_H,_0x3eb996=document[_0x54149c(0x210)](_0x54149c(0x22f));_0x55d498>=23.5*GRID_H?(_0x3eb996[_0x54149c(0x1fe)]='day-off-overlay\x20stripe-bg',_0x3eb996['style'][_0x54149c(0x182)]='-'+_0x37fa05+'px\x200px'):(_0x3eb996[_0x54149c(0x1fe)]='blocked-range-part\x20stripe-bg',_0x3eb996['style']['top']=_0x4a7c3b+'px',_0x3eb996[_0x54149c(0x1cd)]['height']=_0x55d498+'px',_0x3eb996[_0x54149c(0x1cd)][_0x54149c(0x182)]='-'+_0x37fa05+_0x54149c(0x25d)+_0x4a7c3b+'px'),_0x44470a['appendChild'](_0x3eb996);}});}renderEventsForColumn(_0x44470a,_0x2d7f8f);});}function renderEventsForColumn(_0x3257e4,_0x392c16){const _0x47acf1=a3_0x359894,_0x37a7b0=sessions[_0x47acf1(0x1e6)](_0x4c73e2=>_0x4c73e2[_0x47acf1(0x211)]===_0x392c16),_0x30e57f=_0x37a7b0[_0x47acf1(0x255)](_0xbfaae9=>{const _0x2ca541=_0x47acf1,[_0xac9ad0,_0x3778c4]=_0xbfaae9[_0x2ca541(0x263)][_0x2ca541(0x1ae)](':')[_0x2ca541(0x255)](Number),[_0x20428e,_0x4ebb8b]=_0xbfaae9['end'][_0x2ca541(0x1ae)](':')[_0x2ca541(0x255)](Number);return{'data':_0xbfaae9,'start':_0xac9ad0*0x3c+_0x3778c4,'end':_0x20428e*0x3c+_0x4ebb8b,'colIndex':0x0};});_0x30e57f['sort']((_0xc7fb0f,_0x7fd37c)=>_0xc7fb0f[_0x47acf1(0x263)]-_0x7fd37c[_0x47acf1(0x263)]||_0x7fd37c[_0x47acf1(0x1f8)]-_0x7fd37c[_0x47acf1(0x263)]-(_0xc7fb0f[_0x47acf1(0x1f8)]-_0xc7fb0f[_0x47acf1(0x263)]));const _0x39ec43=[];_0x30e57f[_0x47acf1(0x207)](_0xcfa805=>{const _0x1d4ca8=_0x47acf1;let _0x3e8c70=![];for(let _0xfdc16e=0x0;_0xfdc16e<_0x39ec43[_0x1d4ca8(0x19b)];_0xfdc16e++){const _0x54556f=_0x39ec43[_0xfdc16e];if(_0xcfa805['start']>=_0x54556f[_0x54556f[_0x1d4ca8(0x19b)]-0x1]['end']){_0x54556f[_0x1d4ca8(0x225)](_0xcfa805),_0xcfa805[_0x1d4ca8(0x1c9)]=_0xfdc16e,_0x3e8c70=!![];break;}}!_0x3e8c70&&(_0x39ec43['push']([_0xcfa805]),_0xcfa805[_0x1d4ca8(0x1c9)]=_0x39ec43[_0x1d4ca8(0x19b)]-0x1);}),_0x30e57f[_0x47acf1(0x207)](_0x165822=>{const _0xb0ceac=_0x47acf1;let _0x2cefd6=0x0;_0x30e57f[_0xb0ceac(0x207)](_0x493b92=>{const _0xbcb8c8=_0xb0ceac;if(Math[_0xbcb8c8(0x1a0)](_0x165822[_0xbcb8c8(0x263)],_0x493b92[_0xbcb8c8(0x263)])<Math['min'](_0x165822[_0xbcb8c8(0x1f8)],_0x493b92[_0xbcb8c8(0x1f8)])&&_0x493b92['colIndex']>_0x2cefd6)_0x2cefd6=_0x493b92[_0xbcb8c8(0x1c9)];});const _0x4f3236=_0x2cefd6+0x1,_0x420238=0x64/_0x4f3236,_0x298930=_0x165822[_0xb0ceac(0x1c9)]*_0x420238,_0x4ca83e=document[_0xb0ceac(0x210)](_0xb0ceac(0x22f)),_0xc5b2b6=_0x165822[_0xb0ceac(0x1b8)];let _0x360569='#0a84ff';if(clients&&clients['length']>0x0){const _0xac9aab=clients[_0xb0ceac(0x24c)](_0x42b87c=>String(_0x42b87c['id'])===String(_0xc5b2b6[_0xb0ceac(0x1c0)]));if(_0xac9aab&&_0xac9aab[_0xb0ceac(0x26c)])_0x360569=_0xac9aab[_0xb0ceac(0x26c)];}const _0x40666b=_0xc5b2b6['status']===_0xb0ceac(0x1e8),_0x1ffdb6=_0x40666b?0x1:0.45;_0x4ca83e[_0xb0ceac(0x1fe)]='event-card'+(_0x40666b?'\x20status-completed':''),_0x4ca83e[_0xb0ceac(0x1cd)][_0xb0ceac(0x24d)]=hexToRgba(_0x360569,_0x1ffdb6),_0x4ca83e[_0xb0ceac(0x1cd)][_0xb0ceac(0x26a)]=_0x360569;const _0x1f4659=_0x165822[_0xb0ceac(0x263)]/0x3c*GRID_H,_0x1deeff=(_0x165822[_0xb0ceac(0x1f8)]-_0x165822['start'])/0x3c*GRID_H;_0x4ca83e['style']['top']=_0x1f4659+'px',_0x4ca83e[_0xb0ceac(0x1cd)][_0xb0ceac(0x1ad)]=Math[_0xb0ceac(0x1a0)](_0x1deeff,0x14)+'px',_0x4ca83e['style']['width']=_0xb0ceac(0x230)+_0x420238+_0xb0ceac(0x20b),_0x4ca83e[_0xb0ceac(0x1cd)][_0xb0ceac(0x1cc)]='calc('+_0x298930+_0xb0ceac(0x25b),_0x4ca83e['style'][_0xb0ceac(0x213)]=0xa+_0x165822[_0xb0ceac(0x1c9)];if(_0x420238<0x55)_0x4ca83e[_0xb0ceac(0x229)][_0xb0ceac(0x1e5)]('mini');let _0x1b6e90='';if(_0xc5b2b6[_0xb0ceac(0x278)])_0x1b6e90+=_0xb0ceac(0x1ca);if(_0x40666b)_0x1b6e90+=_0xb0ceac(0x20a);_0x4ca83e[_0xb0ceac(0x261)]=_0xb0ceac(0x21a)+_0xc5b2b6[_0xb0ceac(0x263)]+'\x20-\x20'+_0xc5b2b6[_0xb0ceac(0x1f8)]+_0xb0ceac(0x244)+_0x1b6e90+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ca83e[_0xb0ceac(0x253)]=_0x5de691=>{const _0x426f38=_0xb0ceac;_0x5de691[_0x426f38(0x20e)](),openDetails(_0xc5b2b6);},_0x3257e4[_0xb0ceac(0x1bd)](_0x4ca83e);});}function openAnalytics(){const _0x307f99=a3_0x359894,_0x5a398e=document[_0x307f99(0x22e)](_0x307f99(0x1be));setAnalyticsPeriod('week',_0x5a398e),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x38e1fd,_0x3bb390){const _0x570d84=a3_0x359894;currentAnPeriod=_0x38e1fd,document[_0x570d84(0x203)](_0x570d84(0x1be))[_0x570d84(0x207)](_0x5bdc7d=>_0x5bdc7d[_0x570d84(0x229)][_0x570d84(0x276)](_0x570d84(0x234)));if(_0x3bb390)_0x3bb390[_0x570d84(0x229)][_0x570d84(0x1e5)](_0x570d84(0x234));const _0xff8463=document[_0x570d84(0x250)](_0x570d84(0x1b2));_0xff8463['style']['display']=_0x38e1fd===_0x570d84(0x1ec)?_0x570d84(0x21f):_0x570d84(0x1ab);const _0x20ecb5=new Date();let _0x4db5fd=new Date(),_0x49cde9=new Date();if(_0x38e1fd===_0x570d84(0x223))_0x4db5fd=getStartOfWeek(_0x20ecb5),_0x49cde9=new Date(_0x4db5fd),_0x49cde9[_0x570d84(0x1a2)](_0x49cde9[_0x570d84(0x218)]()+0x6);else{if(_0x38e1fd==='month')_0x4db5fd=new Date(_0x20ecb5['getFullYear'](),_0x20ecb5[_0x570d84(0x1a9)](),0x1),_0x49cde9=new Date(_0x20ecb5[_0x570d84(0x23c)](),_0x20ecb5[_0x570d84(0x1a9)]()+0x1,0x0);else{!document[_0x570d84(0x250)](_0x570d84(0x219))[_0x570d84(0x21e)]&&(document['getElementById'](_0x570d84(0x219))[_0x570d84(0x21e)]=getLocalDateStr(_0x20ecb5),document[_0x570d84(0x250)](_0x570d84(0x1aa))['value']=getLocalDateStr(_0x20ecb5));refreshAnalytics();return;}}document['getElementById']('anStart')[_0x570d84(0x21e)]=getLocalDateStr(_0x4db5fd),document[_0x570d84(0x250)](_0x570d84(0x1aa))[_0x570d84(0x21e)]=getLocalDateStr(_0x49cde9),refreshAnalytics();}function refreshAnalytics(){const _0x33e1aa=a3_0x359894,_0x3c11ed=document[_0x33e1aa(0x250)](_0x33e1aa(0x219))[_0x33e1aa(0x21e)],_0x493215=document[_0x33e1aa(0x250)]('anEnd')[_0x33e1aa(0x21e)];if(!_0x3c11ed||!_0x493215)return;const _0x25ebbd=sessions[_0x33e1aa(0x1e6)](_0x1d8e62=>_0x1d8e62[_0x33e1aa(0x211)]>=_0x3c11ed&&_0x1d8e62[_0x33e1aa(0x211)]<=_0x493215&&_0x1d8e62[_0x33e1aa(0x221)]!==_0x33e1aa(0x215)),_0x5f0429=_0x25ebbd[_0x33e1aa(0x19b)],_0x5ebd15=_0x25ebbd[_0x33e1aa(0x1e6)](_0x153621=>_0x153621[_0x33e1aa(0x221)]===_0x33e1aa(0x1e8))[_0x33e1aa(0x19b)],_0x2f3e5d=_0x5f0429>0x0?Math[_0x33e1aa(0x23e)](_0x5ebd15/_0x5f0429*0x64):0x0;document['getElementById'](_0x33e1aa(0x1a8))[_0x33e1aa(0x199)]=_0x2f3e5d+'%',document[_0x33e1aa(0x250)](_0x33e1aa(0x1f5))[_0x33e1aa(0x199)]=_0x5ebd15+_0x33e1aa(0x24a)+_0x5f0429+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x179e4d=document['getElementById'](_0x33e1aa(0x1e2)),_0x4aab39=0x2*Math['PI']*0x23,_0x7f775a=_0x4aab39-_0x2f3e5d/0x64*_0x4aab39;_0x179e4d[_0x33e1aa(0x1cd)]['strokeDashoffset']=_0x7f775a;const _0x30809e={};_0x25ebbd['forEach'](_0xe4fb06=>{const _0x1c18a1=_0x33e1aa,_0x35d459=_0xe4fb06['coachId']||_0x1c18a1(0x1f1);if(!_0x30809e[_0x35d459]){const _0x2199fd='#'+_0x35d459[_0x1c18a1(0x209)]()['substr'](0x0,0x6);_0x30809e[_0x35d459]={'total':0x0,'done':0x0,'color':_0x2199fd};}_0x30809e[_0x35d459][_0x1c18a1(0x1f3)]++;if(_0xe4fb06[_0x1c18a1(0x221)]===_0x1c18a1(0x1e8))_0x30809e[_0x35d459][_0x1c18a1(0x1c6)]++;});const _0x16cf05=document[_0x33e1aa(0x250)]('analyticsList');_0x16cf05['innerHTML']='';const _0x4014ef=Object[_0x33e1aa(0x246)](_0x30809e)[_0x33e1aa(0x26d)]((_0x43d997,_0x3384bc)=>_0x3384bc[0x1][_0x33e1aa(0x1f3)]-_0x43d997[0x1][_0x33e1aa(0x1f3)]);if(_0x4014ef[_0x33e1aa(0x19b)]===0x0){_0x16cf05[_0x33e1aa(0x261)]=_0x33e1aa(0x222);return;}_0x4014ef['forEach'](([_0x2e8361,_0x380322])=>{const _0x3b7e4b=_0x33e1aa,_0x3b9454=Math[_0x3b7e4b(0x23e)](_0x380322[_0x3b7e4b(0x1c6)]/_0x380322['total']*0x64),_0x3846be=document['createElement'](_0x3b7e4b(0x22f));_0x3846be[_0x3b7e4b(0x1fe)]='client-stat-card',_0x3846be[_0x3b7e4b(0x1cd)][_0x3b7e4b(0x26a)]=_0x380322['color'],_0x3846be[_0x3b7e4b(0x261)]=_0x3b7e4b(0x23a)+_0x2e8361[_0x3b7e4b(0x22b)](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x380322['done']+_0x3b7e4b(0x1d3)+_0x380322[_0x3b7e4b(0x1f3)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20'+_0x3b9454+_0x3b7e4b(0x1e0),_0x16cf05[_0x3b7e4b(0x1bd)](_0x3846be);});}function openDetails(_0x4917e6){const _0x252b12=a3_0x359894;currentSession=_0x4917e6;const _0x212a14=new Date(_0x4917e6[_0x252b12(0x211)]),_0x314846=_0x212a14[_0x252b12(0x1f2)](_0x252b12(0x190),{'weekday':_0x252b12(0x231),'day':_0x252b12(0x277),'month':_0x252b12(0x231)});document[_0x252b12(0x250)](_0x252b12(0x1af))['textContent']=_0x314846[_0x252b12(0x18b)](0x0)[_0x252b12(0x242)]()+_0x314846['slice'](0x1),document['getElementById'](_0x252b12(0x1cf))[_0x252b12(0x199)]=_0x4917e6[_0x252b12(0x263)]+_0x252b12(0x23b)+_0x4917e6[_0x252b12(0x1f8)],document[_0x252b12(0x250)]('detNote')[_0x252b12(0x199)]=_0x4917e6[_0x252b12(0x195)]||_0x252b12(0x205);const _0xc7db46=document[_0x252b12(0x250)](_0x252b12(0x1e4)),_0x23101b=document[_0x252b12(0x250)]('cancelContainer'),_0x16c1d9=_0x23101b[_0x252b12(0x22e)](_0x252b12(0x252)),_0x44c2c9=_0x23101b[_0x252b12(0x22e)]('.btn-reschedule'),_0x4e5a23=document['getElementById'](_0x252b12(0x193));if(_0x4917e6[_0x252b12(0x221)]===_0x252b12(0x1e8))_0xc7db46['textContent']=_0x252b12(0x1fa),_0xc7db46[_0x252b12(0x1cd)][_0x252b12(0x26c)]=_0x252b12(0x1ce),_0x23101b[_0x252b12(0x1cd)][_0x252b12(0x201)]=_0x252b12(0x1ab);else{_0xc7db46[_0x252b12(0x199)]='üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞',_0xc7db46[_0x252b12(0x1cd)][_0x252b12(0x26c)]=_0x252b12(0x265),_0x23101b[_0x252b12(0x1cd)][_0x252b12(0x201)]=_0x252b12(0x254);const _0x55d9b1=new Date(_0x4917e6['dateStr']+'T'+_0x4917e6[_0x252b12(0x263)]),_0x5de150=new Date(),_0x175cd6=(_0x55d9b1-_0x5de150)/(0x3e8*0x3c*0x3c),_0x3ad2f9=coachProfiles[_0x4917e6[_0x252b12(0x187)]]&&coachProfiles[_0x4917e6[_0x252b12(0x187)]]['cancel_window']?parseInt(coachProfiles[_0x4917e6[_0x252b12(0x187)]][_0x252b12(0x268)]):0x18;if(_0x3ad2f9===0x0||_0x175cd6>=_0x3ad2f9)_0x16c1d9[_0x252b12(0x1cd)][_0x252b12(0x201)]=_0x252b12(0x254),_0x44c2c9[_0x252b12(0x1cd)][_0x252b12(0x201)]=_0x252b12(0x254),_0x4e5a23[_0x252b12(0x1cd)][_0x252b12(0x201)]=_0x252b12(0x1ab);else{_0x16c1d9['style'][_0x252b12(0x201)]='none',_0x44c2c9[_0x252b12(0x1cd)][_0x252b12(0x201)]=_0x252b12(0x1ab),_0x4e5a23[_0x252b12(0x1cd)][_0x252b12(0x201)]=_0x252b12(0x254);let _0x2ab67a=_0x3ad2f9===0x0?_0x252b12(0x202):_0x252b12(0x233)+_0x3ad2f9+'\x20—á.';_0x4e5a23[_0x252b12(0x199)]=_0x252b12(0x24e)+_0x2ab67a+_0x252b12(0x1e1);}}document[_0x252b12(0x250)](_0x252b12(0x249))[_0x252b12(0x229)][_0x252b12(0x1e5)](_0x252b12(0x234)),document[_0x252b12(0x250)](_0x252b12(0x20f))[_0x252b12(0x229)][_0x252b12(0x1e5)]('open');}function closeAllSheets(){const _0x3c5617=a3_0x359894;document['getElementById'](_0x3c5617(0x249))['classList'][_0x3c5617(0x276)](_0x3c5617(0x234)),document['querySelectorAll'](_0x3c5617(0x1b4))[_0x3c5617(0x207)](_0x15e5fb=>_0x15e5fb[_0x3c5617(0x229)]['remove'](_0x3c5617(0x1c8)));}function openSheet(_0x539325){const _0x55c7a6=a3_0x359894;document[_0x55c7a6(0x250)]('overlay')[_0x55c7a6(0x229)]['add']('active'),document[_0x55c7a6(0x250)](_0x539325)['classList'][_0x55c7a6(0x1e5)](_0x55c7a6(0x1c8));}function getLocalDateStr(_0x1c0092){const _0x42b91=a3_0x359894,_0x4da8e1=_0x1c0092['getFullYear'](),_0x554870=String(_0x1c0092[_0x42b91(0x1a9)]()+0x1)['padStart'](0x2,'0'),_0x13e436=String(_0x1c0092[_0x42b91(0x218)]())[_0x42b91(0x1d8)](0x2,'0');return _0x4da8e1+'-'+_0x554870+'-'+_0x13e436;}function getStartOfWeek(_0x11d984){const _0x3c6497=a3_0x359894,_0x44aa03=new Date(_0x11d984),_0x570348=_0x44aa03[_0x3c6497(0x1d9)](),_0x17efd0=_0x44aa03['getDate']()-_0x570348+(_0x570348===0x0?-0x6:0x1);return _0x44aa03[_0x3c6497(0x1a2)](_0x17efd0),_0x44aa03[_0x3c6497(0x247)](0x0,0x0,0x0,0x0),_0x44aa03;}function scrollToToday(){const _0x42f7c4=getLocalDateStr(new Date());setTimeout(()=>{const _0x375e8a=a3_0x1fd3,_0x5a185d=document[_0x375e8a(0x22e)](_0x375e8a(0x275)+_0x42f7c4+'\x22]');if(_0x5a185d){const _0x5bf147=document['getElementById']('matrixViewport'),_0x54cc42=_0x5a185d['offsetLeft']-_0x5bf147[_0x375e8a(0x1a3)]/0x2+_0x5a185d[_0x375e8a(0x1b1)]/0x2;_0x5bf147[_0x375e8a(0x1b5)]({'left':_0x54cc42,'behavior':_0x375e8a(0x1b9)}),_0x5bf147[_0x375e8a(0x1f6)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x4d5b66=a3_0x359894,_0x46a28a=new Date(),_0x13dc4c=document[_0x4d5b66(0x250)](_0x4d5b66(0x189)),_0x3149c9=document[_0x4d5b66(0x250)](_0x4d5b66(0x1ba)),_0x30242d=(_0x46a28a[_0x4d5b66(0x18c)]()*0x3c+_0x46a28a[_0x4d5b66(0x18f)]())/0x3c*GRID_H;_0x13dc4c[_0x4d5b66(0x1cd)][_0x4d5b66(0x212)]=_0x30242d+'px',_0x13dc4c[_0x4d5b66(0x1cd)][_0x4d5b66(0x201)]=_0x4d5b66(0x254),_0x3149c9[_0x4d5b66(0x1cd)]['top']=_0x30242d+'px',_0x3149c9[_0x4d5b66(0x1cd)][_0x4d5b66(0x201)]=_0x4d5b66(0x254),_0x3149c9[_0x4d5b66(0x199)]=String(_0x46a28a[_0x4d5b66(0x18c)]())['padStart'](0x2,'0')+':'+String(_0x46a28a[_0x4d5b66(0x18f)]())[_0x4d5b66(0x1d8)](0x2,'0');}function a3_0x3f7c(){const _0x238954=['stopPropagation','detailsSheet','createElement','dateStr','top','zIndex','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','cancelled','json','then','getDate','anStart','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','offsetLeft','#ff453a','rs-time-btn','value','flex','600','status','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','week','keys','push','button','offClick','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','classList','show','substr','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','insertBefore','querySelector','div','calc(','long','getTime','–∑–∞\x20','active','stringify','<span>','.day-column','11216PafvJp','parse','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','\x20-\x20','getFullYear','customConfirm','round','setAttribute','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','Error\x20setting\x20color:','toUpperCase','fontWeight','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','applyData','entries','setHours','(((.+)+)+)+$','overlay','\x20–∏–∑\x20','initData','find','backgroundColor','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','user','getElementById','rgba(10,\x20132,\x20255,\x20','.btn-cancel','onclick','block','map','time-label','findIndex','test','rs-date-chip','location','%\x20+\x202px)','startsWith','px\x20-','today','DOMContentLoaded','v9.5-CLIENT-ANALYTICS','innerHTML','log','start','client_load','var(--acc-blue)','saveLocally','rsSlotsGrid','cancel_window','search','borderLeftColor','setBackgroundColor','color','sort','Telegram','getAttribute','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','planned','toLocaleString','getItem','ccText','.day-col-header[data-date=\x22','remove','numeric','seriesId','.rs-date-chip','#0a84ff','backgroundPosition','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','uc_client_list','day-column\x20','all','coachId','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','globalTimeLine','1600193IwSuAy','charAt','getHours','data-day-idx','</div><div\x20class=\x22rs-day-num\x22>','getMinutes','ru-RU','ccTitle','exceptions','cancelHint','uc_client_settings','note','1664960ossKsm','floor','gridColumns','textContent','<div\x20class=\x22rs-day-name\x22>','length','<div\x20class=\x22dch-day\x22>','onClick','day-col-header\x20','syncLoad','max','setItem','setDate','clientWidth','clients','daysHeaderTrack','.day-col-header','uc_client_sessions','anPercent','getMonth','anEnd','none','timeColumn','height','split','detDate','4dZyOVi','offsetWidth','anCustomDates','–û—Ç–º–µ–Ω–µ–Ω–æ','.sheet','scrollTo','ccYesBtn','calendar','data','auto','timeLineBadge','scrollLeft','pattern','appendChild','.period-switch\x20.p-btn','coach_profiles','clientId','#050505','</div>','POST','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','done',':00</span>','open','colIndex','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','2737405UiFucd','left','style','var(--acc-green)','detTime','WebApp','2SGanLF','disableVerticalSwipes','</span>\x20/\x20','162790xDMxCY','addEventListener','627600iNDJeY','30xPdqtb','padStart','getDay','Critical\x20TMA\x20Error:','cid','data-date','apply','firstChild','T23:59:59','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','anDonutCircle','12fRtJnn','detStatus','add','filter','settings','completed','BackButton','visible','loadLocal','custom','\x20–≤\x20','min','setHeaderColor','matrixViewport','Unknown','toLocaleDateString','total','get_slots','anTotalStats','scrollTop','reschedule','end','blocked-slot\x20stripe-bg','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','27OFZivH','isArray','constructor','className','83555KFWmsy','</div><div\x20class=\x22dch-num\x22>','display','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','querySelectorAll','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','scroll','forEach','join','toString','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','%\x20-\x204px)','ranges','createDocumentFragment'];a3_0x3f7c=function(){return _0x238954;};return a3_0x3f7c();}function onScroll(){const _0x3b4bf5=a3_0x359894,_0x8985ea=document['getElementById'](_0x3b4bf5(0x1f0)),_0x4e092b=document['querySelectorAll'](_0x3b4bf5(0x1a6));for(let _0x1ac64f of _0x4e092b)if(_0x1ac64f[_0x3b4bf5(0x21b)]>=_0x8985ea['scrollLeft']){const _0x193d60=new Date(_0x1ac64f['getAttribute']('data-date'));document[_0x3b4bf5(0x250)]('headerMonth')['textContent']=_0x193d60[_0x3b4bf5(0x272)]('ru',{'month':'long'})[_0x3b4bf5(0x242)]()+'\x20'+_0x193d60['getFullYear']();break;}}function showToast(_0x2a7eb9){const _0x56ce5d=a3_0x359894,_0x4bc56e=document[_0x56ce5d(0x250)]('toast');_0x4bc56e[_0x56ce5d(0x199)]=_0x2a7eb9,_0x4bc56e[_0x56ce5d(0x229)][_0x56ce5d(0x1e5)](_0x56ce5d(0x22a)),setTimeout(()=>_0x4bc56e[_0x56ce5d(0x229)][_0x56ce5d(0x276)](_0x56ce5d(0x22a)),0x7d0);}function handleInfiniteScroll(){const _0x5a79f6=a3_0x359894,_0x2cce4e=document['getElementById'](_0x5a79f6(0x1f0)),_0x274f78=_0x2cce4e[_0x5a79f6(0x1bb)],_0x177ad9=_0x2cce4e['scrollWidth'],_0x4037a2=_0x2cce4e[_0x5a79f6(0x1a3)];if(_0x177ad9-(_0x274f78+_0x4037a2)<0x12c){const _0x41a9eb=endOffset;endOffset+=0xe,renderDayRange(_0x41a9eb+0x1,endOffset),reRenderBlocks();}if(_0x274f78<0x12c){const _0x82cd77=startOffset;startOffset-=0xe,prependDays(startOffset,_0x82cd77-0x1),_0x2cce4e[_0x5a79f6(0x1bb)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x1db255,_0x42baf2){const _0x315da8=a3_0x359894,_0x165e3d=document[_0x315da8(0x250)]('daysHeaderTrack'),_0x1ad0fd=document[_0x315da8(0x250)](_0x315da8(0x198)),_0x13f4ae=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x2b8d7f=new Date();_0x2b8d7f[_0x315da8(0x247)](0x0,0x0,0x0,0x0);const _0x216ba8=getLocalDateStr(new Date()),_0x241328=document[_0x315da8(0x20d)](),_0x1bd854=document[_0x315da8(0x20d)]();for(let _0x575e0e=_0x1db255;_0x575e0e<=_0x42baf2;_0x575e0e++){const _0x13a3d7=new Date(_0x2b8d7f);_0x13a3d7[_0x315da8(0x1a2)](_0x13a3d7['getDate']()+_0x575e0e);const _0xe3f479=getLocalDateStr(_0x13a3d7);let _0x5751b2=_0x13a3d7['getDay']()-0x1;if(_0x5751b2===-0x1)_0x5751b2=0x6;const _0x59b3c0=_0xe3f479===_0x216ba8,_0x348fe0=document[_0x315da8(0x210)](_0x315da8(0x22f));_0x348fe0[_0x315da8(0x1fe)]=_0x315da8(0x19e)+(_0x59b3c0?_0x315da8(0x25e):''),_0x348fe0['setAttribute'](_0x315da8(0x1dc),_0xe3f479),_0x348fe0['innerHTML']='<div\x20class=\x22dch-day\x22>'+_0x13f4ae[_0x5751b2]+_0x315da8(0x200)+_0x13a3d7[_0x315da8(0x218)]()+'</div>',_0x241328['appendChild'](_0x348fe0);const _0x1da635=document[_0x315da8(0x210)](_0x315da8(0x22f));_0x1da635[_0x315da8(0x1fe)]=_0x315da8(0x185)+(_0x59b3c0?_0x315da8(0x25e):''),_0x1da635[_0x315da8(0x23f)](_0x315da8(0x1dc),_0xe3f479),_0x1da635[_0x315da8(0x23f)](_0x315da8(0x18d),_0x5751b2),_0x1bd854[_0x315da8(0x1bd)](_0x1da635);}_0x165e3d[_0x315da8(0x22d)](_0x241328,_0x165e3d['firstChild']),_0x1ad0fd[_0x315da8(0x22d)](_0x1bd854,_0x1ad0fd['querySelector'](_0x315da8(0x237)));}function hexToRgba(_0x249c8c,_0xf0ced3){const _0x2bfa70=a3_0x359894;let _0x44de68;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x2bfa70(0x258)](_0x249c8c))return _0x44de68=_0x249c8c['substring'](0x1)[_0x2bfa70(0x1ae)](''),_0x44de68['length']==0x3&&(_0x44de68=[_0x44de68[0x0],_0x44de68[0x0],_0x44de68[0x1],_0x44de68[0x1],_0x44de68[0x2],_0x44de68[0x2]]),_0x44de68='0x'+_0x44de68[_0x2bfa70(0x208)](''),'rgba('+[_0x44de68>>0x10&0xff,_0x44de68>>0x8&0xff,_0x44de68&0xff][_0x2bfa70(0x208)](',')+','+_0xf0ced3+')';return _0x2bfa70(0x251)+_0xf0ced3+')';}let confirmResolver=null;function showCustomConfirm(_0x4f5201,_0x577d54,_0x2264b8=!![]){const _0x1a51a5=a3_0x359894;document['getElementById'](_0x1a51a5(0x191))[_0x1a51a5(0x199)]=_0x4f5201,document[_0x1a51a5(0x250)](_0x1a51a5(0x274))[_0x1a51a5(0x199)]=_0x577d54;const _0x38f71c=document[_0x1a51a5(0x250)](_0x1a51a5(0x1b6));return _0x2264b8?(_0x38f71c['style'][_0x1a51a5(0x26c)]=_0x1a51a5(0x21c),_0x38f71c[_0x1a51a5(0x1cd)][_0x1a51a5(0x243)]=_0x1a51a5(0x220)):(_0x38f71c[_0x1a51a5(0x1cd)]['color']=_0x1a51a5(0x181),_0x38f71c[_0x1a51a5(0x1cd)][_0x1a51a5(0x243)]='600'),new Promise(_0x6d9d3b=>{const _0x43313d=_0x1a51a5;confirmResolver=_0x6d9d3b,document['getElementById'](_0x43313d(0x23d))[_0x43313d(0x229)][_0x43313d(0x1e5)](_0x43313d(0x1ea));});}function resolveCustomConfirm(_0x2e62de){const _0x15c694=a3_0x359894;document[_0x15c694(0x250)](_0x15c694(0x23d))[_0x15c694(0x229)][_0x15c694(0x276)](_0x15c694(0x1ea));if(confirmResolver)confirmResolver(_0x2e62de);}async function tryCancelCurrentSession(){const _0x3e30cd=a3_0x359894;if(!currentSession)return;const _0x1ddfaa=await showCustomConfirm(_0x3e30cd(0x270),_0x3e30cd(0x1c5),!![]);if(!_0x1ddfaa)return;const _0x155f37=currentSession;closeAllSheets(),sessions=sessions['filter'](_0xe4cf72=>_0xe4cf72['id']!==_0x155f37['id']),reRenderBlocks(),showToast(_0x3e30cd(0x1b3)),lastUserActionTime=Date['now']();try{const _0x236c21=window['Telegram']?.[_0x3e30cd(0x1d0)],_0x18045e=await fetch(API_URL,{'method':_0x3e30cd(0x1c3),'body':JSON[_0x3e30cd(0x235)]({'action':'client_cancel','init_data':_0x236c21?.[_0x3e30cd(0x24b)]||'','coachId':_0x155f37[_0x3e30cd(0x187)],'dateStr':_0x155f37[_0x3e30cd(0x211)],'sessionId':_0x155f37['id']})});if(_0x18045e['ok'])DataManager[_0x3e30cd(0x266)]();}catch(_0x3ac05a){showToast(_0x3e30cd(0x188));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x177a5b=a3_0x359894;if(!currentSession)return;document['getElementById'](_0x177a5b(0x20f))[_0x177a5b(0x229)][_0x177a5b(0x276)]('open'),document[_0x177a5b(0x250)]('rescheduleSheet')[_0x177a5b(0x229)][_0x177a5b(0x1e5)](_0x177a5b(0x1c8));const _0x512ab5=document['getElementById']('rsDatesTrack'),_0x319189=document[_0x177a5b(0x250)]('rsSlotsGrid');_0x512ab5[_0x177a5b(0x261)]='',_0x319189[_0x177a5b(0x261)]='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0xf6b60f,_0x5d546a]=currentSession[_0x177a5b(0x263)][_0x177a5b(0x1ae)](':')[_0x177a5b(0x255)](Number),[_0x2b4eb3,_0x1fb39f]=currentSession['end']['split'](':')[_0x177a5b(0x255)](Number),_0x523bdf=_0x2b4eb3*0x3c+_0x1fb39f-(_0xf6b60f*0x3c+_0x5d546a);try{const _0x494aa9=window[_0x177a5b(0x26e)]?.['WebApp'],_0x3906a7=await fetch(API_URL,{'method':_0x177a5b(0x1c3),'body':JSON[_0x177a5b(0x235)]({'action':_0x177a5b(0x1f4),'coachId':currentSession[_0x177a5b(0x187)],'duration':_0x523bdf,'init_data':_0x494aa9?.[_0x177a5b(0x24b)]||'','excludeSessionId':currentSession['id']})}),_0x5cf549=await _0x3906a7[_0x177a5b(0x216)]();_0x5cf549['ok']&&_0x5cf549[_0x177a5b(0x1b8)]?(availableSlotsCache=_0x5cf549[_0x177a5b(0x1b8)],renderRescheduleDates()):_0x319189[_0x177a5b(0x261)]=_0x177a5b(0x183);}catch(_0x5814cc){_0x319189[_0x177a5b(0x261)]=_0x177a5b(0x228);}}function renderRescheduleDates(){const _0x15eb25=a3_0x359894,_0xf993ad=document[_0x15eb25(0x250)]('rsDatesTrack');_0xf993ad[_0x15eb25(0x261)]='';const _0x2c751a=Object[_0x15eb25(0x224)](availableSlotsCache)[_0x15eb25(0x26d)](),_0x58ee9f=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x2c751a[_0x15eb25(0x19b)]===0x0){document[_0x15eb25(0x250)](_0x15eb25(0x267))[_0x15eb25(0x261)]=_0x15eb25(0x22c);return;}_0x2c751a[_0x15eb25(0x207)]((_0x4067b0,_0x32b003)=>{const _0x11f19d=_0x15eb25,_0x2dbdc4=new Date(_0x4067b0),_0x344b96=_0x58ee9f[_0x2dbdc4[_0x11f19d(0x1d9)]()],_0x31f5f3=_0x2dbdc4[_0x11f19d(0x218)](),_0x19d881=document['createElement'](_0x11f19d(0x22f));_0x19d881[_0x11f19d(0x1fe)]=_0x11f19d(0x259);if(_0x32b003===0x0)_0x19d881[_0x11f19d(0x229)]['add'](_0x11f19d(0x234));_0x19d881[_0x11f19d(0x261)]=_0x11f19d(0x19a)+_0x344b96+_0x11f19d(0x18e)+_0x31f5f3+_0x11f19d(0x1c2),_0x19d881['onclick']=()=>selectRsDate(_0x4067b0,_0x19d881),_0xf993ad['appendChild'](_0x19d881);}),selectRsDate(_0x2c751a[0x0],_0xf993ad[_0x15eb25(0x1de)]);}function selectRsDate(_0x2150ae,_0x1a89e9){const _0x333f08=a3_0x359894;selectedRsDate=_0x2150ae,document[_0x333f08(0x203)](_0x333f08(0x279))[_0x333f08(0x207)](_0x21d961=>_0x21d961[_0x333f08(0x229)][_0x333f08(0x276)](_0x333f08(0x234)));if(_0x1a89e9)_0x1a89e9[_0x333f08(0x229)][_0x333f08(0x1e5)](_0x333f08(0x234));const _0x48b2cd=document[_0x333f08(0x250)]('rsSlotsGrid');_0x48b2cd[_0x333f08(0x261)]='';const _0x463513=availableSlotsCache[_0x2150ae]||[];if(_0x463513[_0x333f08(0x19b)]===0x0){_0x48b2cd['innerHTML']=_0x333f08(0x183);return;}_0x463513[_0x333f08(0x207)](_0x57f168=>{const _0x33efb1=_0x333f08,_0x4ddf39=document[_0x33efb1(0x210)](_0x33efb1(0x226));_0x4ddf39[_0x33efb1(0x1fe)]=_0x33efb1(0x21d),_0x4ddf39[_0x33efb1(0x199)]=_0x57f168,_0x4ddf39[_0x33efb1(0x253)]=()=>confirmReschedule(_0x57f168),_0x48b2cd[_0x33efb1(0x1bd)](_0x4ddf39);});}async function confirmReschedule(_0xe29591){const _0x412aea=a3_0x359894,_0x5076d8=new Date(selectedRsDate),_0x504382=_0x5076d8[_0x412aea(0x1f2)](_0x412aea(0x190),{'day':_0x412aea(0x277),'month':_0x412aea(0x231)}),_0x32cef5=await showCustomConfirm(_0x412aea(0x240),_0x412aea(0x1c4)+_0x504382+_0x412aea(0x1ed)+_0xe29591+'?',![]);if(!_0x32cef5)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date['now']();const _0x1b4dea=currentSession[_0x412aea(0x211)],_0x218004=currentSession['id'],[_0x21a237,_0xb7439b]=currentSession[_0x412aea(0x263)][_0x412aea(0x1ae)](':')['map'](Number),[_0x1de177,_0x524c85]=currentSession[_0x412aea(0x1f8)]['split'](':')[_0x412aea(0x255)](Number),_0x1409e4=_0x1de177*0x3c+_0x524c85-(_0x21a237*0x3c+_0xb7439b),[_0x428494,_0x16981d]=_0xe29591['split'](':')[_0x412aea(0x255)](Number),_0x1a1272=_0x428494*0x3c+_0x16981d+_0x1409e4,_0x47a5f9=Math[_0x412aea(0x197)](_0x1a1272/0x3c),_0x344193=_0x1a1272%0x3c,_0x55b7a4=String(_0x47a5f9)['padStart'](0x2,'0')+':'+String(_0x344193)[_0x412aea(0x1d8)](0x2,'0'),_0x495425=sessions[_0x412aea(0x257)](_0x2abf57=>_0x2abf57['id']===_0x218004);_0x495425!==-0x1&&(sessions[_0x495425][_0x412aea(0x211)]=selectedRsDate,sessions[_0x495425][_0x412aea(0x263)]=_0xe29591,sessions[_0x495425][_0x412aea(0x1f8)]=_0x55b7a4,reRenderBlocks());try{const _0x5e6ed4=window['Telegram']?.[_0x412aea(0x1d0)],_0x144e62=await fetch(API_URL,{'method':_0x412aea(0x1c3),'body':JSON['stringify']({'action':_0x412aea(0x1f7),'init_data':_0x5e6ed4?.['initData']||'','oldSessionId':_0x218004,'oldDate':_0x1b4dea,'newDate':selectedRsDate,'newTime':_0xe29591,'coachId':currentSession[_0x412aea(0x187)]})}),_0x5b123a=await _0x144e62['json']();!_0x5b123a['ok']?(showToast(_0x412aea(0x204)),DataManager[_0x412aea(0x19f)]()):(showToast(_0x412aea(0x214)),DataManager[_0x412aea(0x266)]());}catch(_0x590ac3){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x359894(0x1d5)](a3_0x359894(0x25f),init);