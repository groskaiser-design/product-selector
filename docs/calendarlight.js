const a3_0x3b189c=a3_0x5468;(function(_0x3edd88,_0x12057e){const _0x36ed35=a3_0x5468,_0x2bc9e7=_0x3edd88();while(!![]){try{const _0x5f53f4=-parseInt(_0x36ed35(0x206))/0x1*(-parseInt(_0x36ed35(0x256))/0x2)+parseInt(_0x36ed35(0x24d))/0x3*(parseInt(_0x36ed35(0x257))/0x4)+-parseInt(_0x36ed35(0x1f4))/0x5+-parseInt(_0x36ed35(0x1ac))/0x6*(parseInt(_0x36ed35(0x1f5))/0x7)+parseInt(_0x36ed35(0x1ea))/0x8+parseInt(_0x36ed35(0x283))/0x9*(-parseInt(_0x36ed35(0x29a))/0xa)+-parseInt(_0x36ed35(0x23a))/0xb*(parseInt(_0x36ed35(0x1d5))/0xc);if(_0x5f53f4===_0x12057e)break;else _0x2bc9e7['push'](_0x2bc9e7['shift']());}catch(_0xcf0a3){_0x2bc9e7['push'](_0x2bc9e7['shift']());}}}(a3_0x382e,0x52871));const APP_VERSION='v9.5-CLIENT-ANALYTICS',API_URL=a3_0x3b189c(0x19f),GRID_H=0x3c,KEY_SESSIONS=a3_0x3b189c(0x1d8),KEY_SETTINGS=a3_0x3b189c(0x1a2),KEY_CLIENTS=a3_0x3b189c(0x26c);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x3b189c(0x228),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x541c2e=a3_0x3b189c,_0x3c9b6d=(function(){let _0x4ccea1=!![];return function(_0x4ce2f2,_0x1caa83){const _0x2046d1=_0x4ccea1?function(){if(_0x1caa83){const _0x2e6c9d=_0x1caa83['apply'](_0x4ce2f2,arguments);return _0x1caa83=null,_0x2e6c9d;}}:function(){};return _0x4ccea1=![],_0x2046d1;};}()),_0x44bbd7=_0x3c9b6d(this,function(){const _0x1c7a00=a3_0x5468;return _0x44bbd7[_0x1c7a00(0x28a)]()[_0x1c7a00(0x252)]('(((.+)+)+)+$')[_0x1c7a00(0x28a)]()[_0x1c7a00(0x1e3)](_0x44bbd7)[_0x1c7a00(0x252)](_0x1c7a00(0x25c));});_0x44bbd7();try{const _0x1e7e93=window[_0x541c2e(0x1b6)]?.[_0x541c2e(0x1e8)];if(!_0x1e7e93)return;_0x1e7e93['ready'](),_0x1e7e93[_0x541c2e(0x222)]();try{_0x1e7e93[_0x541c2e(0x1da)](_0x541c2e(0x266)),_0x1e7e93[_0x541c2e(0x297)]&&_0x1e7e93[_0x541c2e(0x297)](_0x541c2e(0x266));}catch(_0x26bb0d){console[_0x541c2e(0x23d)](_0x541c2e(0x22d),_0x26bb0d);}try{_0x1e7e93['BackButton']&&(_0x1e7e93['BackButton'][_0x541c2e(0x1d4)](),_0x1e7e93[_0x541c2e(0x23b)]['offClick'](),_0x1e7e93[_0x541c2e(0x23b)][_0x541c2e(0x1b9)](function(){const _0x1a8c1c=_0x541c2e;window['location']['href']=_0x1a8c1c(0x296);}));}catch(_0x498b0d){console[_0x541c2e(0x23d)](_0x541c2e(0x229),_0x498b0d);}try{if(_0x1e7e93[_0x541c2e(0x21a)])_0x1e7e93[_0x541c2e(0x21a)]();}catch(_0x58fe11){}}catch(_0x1ca026){console['error']('Critical\x20TMA\x20Error:',_0x1ca026);}}());function isAdmin(){const _0x98cb8b=a3_0x3b189c;try{const _0x38c40f=Number(window[_0x98cb8b(0x1b6)]?.['WebApp']?.[_0x98cb8b(0x209)]?.[_0x98cb8b(0x1ad)]?.['id']);return _0x38c40f===0xbaf7174;}catch(_0x3f9a6d){return![];}}const DataManager={'saveLocally'(){const _0x17fb1b=a3_0x3b189c;try{localStorage[_0x17fb1b(0x261)](KEY_SESSIONS,JSON[_0x17fb1b(0x200)](sessions)),localStorage[_0x17fb1b(0x261)](KEY_CLIENTS,JSON[_0x17fb1b(0x200)](clients)),localStorage['setItem'](KEY_SETTINGS,JSON[_0x17fb1b(0x200)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x4d6abe){}},'loadLocal'(){const _0x54a033=a3_0x3b189c;try{const _0x1f1bc5=localStorage[_0x54a033(0x1f6)](KEY_SESSIONS);if(_0x1f1bc5)sessions=JSON['parse'](_0x1f1bc5);const _0x4a97d6=localStorage[_0x54a033(0x1f6)](KEY_CLIENTS);if(_0x4a97d6)clients=JSON[_0x54a033(0x1fc)](_0x4a97d6);const _0x1e79c3=localStorage[_0x54a033(0x1f6)](KEY_SETTINGS);if(_0x1e79c3){const _0x447a55=JSON['parse'](_0x1e79c3);if(_0x447a55[_0x54a033(0x1f8)])availabilityPattern=_0x447a55[_0x54a033(0x1f8)];if(_0x447a55[_0x54a033(0x294)])specialRanges=_0x447a55[_0x54a033(0x294)];if(_0x447a55[_0x54a033(0x1c2)])dateExceptions=_0x447a55[_0x54a033(0x1c2)];}}catch(_0x417288){}},async 'syncLoad'(){const _0x281c14=a3_0x3b189c,_0x78876d=new Date(),_0x18283d=_0x78876d[_0x281c14(0x1c6)]()+'-'+String(_0x78876d['getMonth']()+0x1)[_0x281c14(0x289)](0x2,'0'),_0x3444b5=new Date(_0x78876d);_0x3444b5[_0x281c14(0x1c0)](_0x78876d[_0x281c14(0x21f)]()+0x1);const _0x2781da=_0x3444b5[_0x281c14(0x1c6)]()+'-'+String(_0x3444b5[_0x281c14(0x21f)]()+0x1)[_0x281c14(0x289)](0x2,'0'),_0xc9e06=Date['now']();try{const _0x445828=window[_0x281c14(0x1b6)]?.[_0x281c14(0x1e8)],_0x3df2a0=_0x445828?.[_0x281c14(0x218)]||'',[_0x2e3acb,_0xf881a7]=await Promise['all']([fetch(API_URL,{'method':_0x281c14(0x276),'body':JSON[_0x281c14(0x200)]({'action':_0x281c14(0x27c),'init_data':_0x3df2a0,'month_str':_0x18283d})})[_0x281c14(0x1e4)](_0x7df2c4=>_0x7df2c4[_0x281c14(0x295)]()),fetch(API_URL,{'method':'POST','body':JSON[_0x281c14(0x200)]({'action':_0x281c14(0x27c),'init_data':_0x3df2a0,'month_str':_0x2781da})})[_0x281c14(0x1e4)](_0x308b6c=>_0x308b6c[_0x281c14(0x295)]())]);if(lastUserActionTime>_0xc9e06){console[_0x281c14(0x23d)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x2e3acb['ok'])this[_0x281c14(0x1df)](_0x2e3acb[_0x281c14(0x292)],_0x18283d);if(_0xf881a7['ok'])this['applyData'](_0xf881a7['data'],_0x2781da);this['saveLocally']();}catch(_0x5694e3){}},'applyData'(_0x2a4790,_0x363bea){const _0x5930bc=a3_0x3b189c;if(!_0x2a4790)return;if(_0x2a4790[_0x5930bc(0x21c)]){if(_0x2a4790['settings'][_0x5930bc(0x1f8)])availabilityPattern=_0x2a4790[_0x5930bc(0x21c)][_0x5930bc(0x1f8)];if(_0x2a4790[_0x5930bc(0x21c)]['ranges'])specialRanges=_0x2a4790[_0x5930bc(0x21c)][_0x5930bc(0x294)];if(_0x2a4790[_0x5930bc(0x21c)][_0x5930bc(0x1c2)])dateExceptions=_0x2a4790[_0x5930bc(0x21c)][_0x5930bc(0x1c2)];}if(_0x2a4790[_0x5930bc(0x27e)]&&Array[_0x5930bc(0x208)](_0x2a4790['clients']))clients=_0x2a4790[_0x5930bc(0x27e)];_0x2a4790['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x2a4790[_0x5930bc(0x225)]}),_0x2a4790[_0x5930bc(0x274)]&&(sessions=sessions[_0x5930bc(0x235)](_0x1182af=>!_0x1182af[_0x5930bc(0x232)][_0x5930bc(0x239)](_0x363bea)),Object['keys'](_0x2a4790[_0x5930bc(0x274)])['forEach'](_0x1462ba=>{const _0x5a768d=_0x5930bc,_0x306af4=_0x2a4790[_0x5a768d(0x274)][_0x1462ba];_0x306af4['forEach'](_0x256e49=>{const _0x4a2dfc=_0x5a768d;sessions[_0x4a2dfc(0x1e6)]({'id':_0x256e49['i'],'clientId':_0x256e49['c'],'coachId':_0x256e49[_0x4a2dfc(0x247)],'dateStr':_0x363bea+'-'+_0x1462ba[_0x4a2dfc(0x289)](0x2,'0'),'start':_0x256e49['s'],'end':_0x256e49['e'],'note':_0x256e49['n']||'','status':_0x256e49['st']||_0x4a2dfc(0x1c9),'seriesId':_0x256e49['sid']});});})),reRenderBlocks();}};function init(){const _0x465ef2=a3_0x3b189c;DataManager['loadLocal'](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x465ef2(0x1c7)](_0x465ef2(0x1fd))['addEventListener'](_0x465ef2(0x1bf),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function a3_0x5468(_0x12b2f9,_0x458bf9){_0x12b2f9=_0x12b2f9-0x19f;const _0x27a53b=a3_0x382e();let _0x4ae778=_0x27a53b[_0x12b2f9];return _0x4ae778;}function renderTimeColumn(){const _0x2ebe8f=a3_0x3b189c,_0x692c73=document['getElementById'](_0x2ebe8f(0x1cd)),_0x14be09=document['getElementById'](_0x2ebe8f(0x1ff));_0x692c73[_0x2ebe8f(0x1b4)]='',_0x692c73[_0x2ebe8f(0x227)](_0x14be09);for(let _0x4ee58d=0x0;_0x4ee58d<0x18;_0x4ee58d++){const _0x49dc86=document[_0x2ebe8f(0x238)](_0x2ebe8f(0x25e));_0x49dc86[_0x2ebe8f(0x28f)]='time-label';if(_0x4ee58d>0x0)_0x49dc86['innerHTML']=_0x2ebe8f(0x212)+String(_0x4ee58d)[_0x2ebe8f(0x289)](0x2,'0')+_0x2ebe8f(0x1a7);_0x692c73[_0x2ebe8f(0x227)](_0x49dc86);}}function renderDayRange(_0x458c9,_0x259f67){const _0x753d02=a3_0x3b189c,_0x1b8e29=document[_0x753d02(0x1c7)](_0x753d02(0x211)),_0x14d67a=document[_0x753d02(0x1c7)](_0x753d02(0x290)),_0x3737b0=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x9f6ff=new Date();_0x9f6ff[_0x753d02(0x255)](0x0,0x0,0x0,0x0);const _0x2539b2=getLocalDateStr(new Date());for(let _0x32d61f=_0x458c9;_0x32d61f<=_0x259f67;_0x32d61f++){const _0x3adf18=new Date(_0x9f6ff);_0x3adf18[_0x753d02(0x234)](_0x3adf18[_0x753d02(0x1f2)]()+_0x32d61f);const _0x8d2d9a=getLocalDateStr(_0x3adf18);let _0xfb3de8=_0x3adf18[_0x753d02(0x244)]()-0x1;if(_0xfb3de8===-0x1)_0xfb3de8=0x6;const _0x5777e1=_0x8d2d9a===_0x2539b2,_0xb7f085=document[_0x753d02(0x238)](_0x753d02(0x25e));_0xb7f085['className']=_0x753d02(0x250)+(_0x5777e1?'today':''),_0xb7f085[_0x753d02(0x28b)](_0x753d02(0x24f),_0x8d2d9a),_0xb7f085['innerHTML']=_0x753d02(0x1ab)+_0x3737b0[_0xfb3de8]+_0x753d02(0x26d)+_0x3adf18[_0x753d02(0x1f2)]()+_0x753d02(0x29b),_0x1b8e29['appendChild'](_0xb7f085);const _0x32edc5=document[_0x753d02(0x238)](_0x753d02(0x25e));_0x32edc5[_0x753d02(0x28f)]=_0x753d02(0x288)+(_0x5777e1?_0x753d02(0x1f7):''),_0x32edc5[_0x753d02(0x28b)](_0x753d02(0x24f),_0x8d2d9a),_0x32edc5[_0x753d02(0x28b)](_0x753d02(0x264),_0xfb3de8),_0x14d67a[_0x753d02(0x227)](_0x32edc5);}}function reRenderBlocks(){const _0x5c8729=a3_0x3b189c;document[_0x5c8729(0x1d1)]('.day-column')[_0x5c8729(0x258)](_0x539b39=>{const _0x3f88c1=_0x5c8729;_0x539b39[_0x3f88c1(0x1d1)](_0x3f88c1(0x25b))[_0x3f88c1(0x258)](_0x524742=>_0x524742[_0x3f88c1(0x22b)]());const _0x490f95=_0x539b39[_0x3f88c1(0x1e7)](_0x3f88c1(0x24f)),_0x530276=parseInt(_0x539b39[_0x3f88c1(0x1e7)](_0x3f88c1(0x264))),_0xd31e7c=Math['round'](_0x539b39[_0x3f88c1(0x22a)]);(availabilityPattern[_0x530276]||[])['forEach'](_0x219e80=>{const _0x1e1c0f=_0x3f88c1,_0x388dfe=document[_0x1e1c0f(0x238)](_0x1e1c0f(0x25e));_0x388dfe[_0x1e1c0f(0x28f)]='blocked-slot\x20stripe-bg',_0x388dfe[_0x1e1c0f(0x277)][_0x1e1c0f(0x219)]=_0x219e80*GRID_H+'px',_0x388dfe['style'][_0x1e1c0f(0x223)]='-'+_0xd31e7c+'px\x20-'+_0x219e80*GRID_H+'px',_0x539b39['appendChild'](_0x388dfe);});if(specialRanges[_0x3f88c1(0x230)]>0x0){const _0x2c3ceb=new Date(_0x490f95+_0x3f88c1(0x1ce))[_0x3f88c1(0x21e)](),_0x202351=new Date(_0x490f95+_0x3f88c1(0x1de))[_0x3f88c1(0x21e)]();specialRanges[_0x3f88c1(0x258)](_0x57ffa8=>{const _0x59470d=_0x3f88c1,_0x535f13=new Date(_0x57ffa8[_0x59470d(0x1a6)])[_0x59470d(0x21e)](),_0xc80df1=new Date(_0x57ffa8[_0x59470d(0x280)])['getTime'](),_0x3e63d0=Math[_0x59470d(0x1f0)](_0x2c3ceb,_0x535f13),_0x497ac6=Math[_0x59470d(0x204)](_0x202351,_0xc80df1);if(_0x3e63d0<_0x497ac6){const _0xc1720d=(_0x3e63d0-_0x2c3ceb)/0x36ee80*GRID_H,_0x1302bb=(_0x497ac6-_0x3e63d0)/0x36ee80*GRID_H,_0x1e0e7a=document[_0x59470d(0x238)](_0x59470d(0x25e));_0x1302bb>=23.5*GRID_H?(_0x1e0e7a[_0x59470d(0x28f)]=_0x59470d(0x21b),_0x1e0e7a[_0x59470d(0x277)][_0x59470d(0x223)]='-'+_0xd31e7c+'px\x200px'):(_0x1e0e7a[_0x59470d(0x28f)]=_0x59470d(0x1d3),_0x1e0e7a[_0x59470d(0x277)]['top']=_0xc1720d+'px',_0x1e0e7a[_0x59470d(0x277)]['height']=_0x1302bb+'px',_0x1e0e7a[_0x59470d(0x277)][_0x59470d(0x223)]='-'+_0xd31e7c+'px\x20-'+_0xc1720d+'px'),_0x539b39[_0x59470d(0x227)](_0x1e0e7a);}});}renderEventsForColumn(_0x539b39,_0x490f95);});}function renderEventsForColumn(_0x38e3d0,_0x1aa049){const _0x2641ef=a3_0x3b189c,_0x529d63=sessions[_0x2641ef(0x235)](_0x1607ea=>_0x1607ea[_0x2641ef(0x232)]===_0x1aa049),_0x1751a5=_0x529d63[_0x2641ef(0x248)](_0xefea9a=>{const _0x145f6a=_0x2641ef,[_0x230798,_0x280607]=_0xefea9a[_0x145f6a(0x1a6)][_0x145f6a(0x22e)](':')['map'](Number),[_0x4fd0a1,_0x19662b]=_0xefea9a['end']['split'](':')['map'](Number);return{'data':_0xefea9a,'start':_0x230798*0x3c+_0x280607,'end':_0x4fd0a1*0x3c+_0x19662b,'colIndex':0x0};});_0x1751a5[_0x2641ef(0x1a0)]((_0x51c4ce,_0x1ead3)=>_0x51c4ce['start']-_0x1ead3[_0x2641ef(0x1a6)]||_0x1ead3[_0x2641ef(0x280)]-_0x1ead3['start']-(_0x51c4ce[_0x2641ef(0x280)]-_0x51c4ce[_0x2641ef(0x1a6)]));const _0x5d2c66=[];_0x1751a5[_0x2641ef(0x258)](_0x41261f=>{const _0x110309=_0x2641ef;let _0x190506=![];for(let _0x4ecf60=0x0;_0x4ecf60<_0x5d2c66['length'];_0x4ecf60++){const _0x31cfcb=_0x5d2c66[_0x4ecf60];if(_0x41261f[_0x110309(0x1a6)]>=_0x31cfcb[_0x31cfcb[_0x110309(0x230)]-0x1][_0x110309(0x280)]){_0x31cfcb['push'](_0x41261f),_0x41261f[_0x110309(0x242)]=_0x4ecf60,_0x190506=!![];break;}}!_0x190506&&(_0x5d2c66[_0x110309(0x1e6)]([_0x41261f]),_0x41261f['colIndex']=_0x5d2c66['length']-0x1);}),_0x1751a5[_0x2641ef(0x258)](_0x350e7f=>{const _0x5641de=_0x2641ef;let _0x499f42=0x0;_0x1751a5['forEach'](_0x6146c7=>{const _0x4f9ad3=a3_0x5468;if(Math[_0x4f9ad3(0x1f0)](_0x350e7f[_0x4f9ad3(0x1a6)],_0x6146c7[_0x4f9ad3(0x1a6)])<Math[_0x4f9ad3(0x204)](_0x350e7f['end'],_0x6146c7[_0x4f9ad3(0x280)])&&_0x6146c7[_0x4f9ad3(0x242)]>_0x499f42)_0x499f42=_0x6146c7[_0x4f9ad3(0x242)];});const _0x1b5071=_0x499f42+0x1,_0x1bdeed=0x64/_0x1b5071,_0x3d978f=_0x350e7f[_0x5641de(0x242)]*_0x1bdeed,_0x19e0b0=document[_0x5641de(0x238)](_0x5641de(0x25e)),_0x393132=_0x350e7f[_0x5641de(0x292)];let _0x1441a4=_0x5641de(0x27b);if(clients&&clients[_0x5641de(0x230)]>0x0){const _0x34934f=clients['find'](_0x45472e=>String(_0x45472e['id'])===String(_0x393132[_0x5641de(0x1ae)]));if(_0x34934f&&_0x34934f['color'])_0x1441a4=_0x34934f[_0x5641de(0x271)];}const _0x136b20=_0x393132[_0x5641de(0x281)]===_0x5641de(0x213),_0x31b864=_0x136b20?0x1:0.45;_0x19e0b0[_0x5641de(0x28f)]=_0x5641de(0x1b1)+(_0x136b20?'\x20status-completed':''),_0x19e0b0['style']['backgroundColor']=hexToRgba(_0x1441a4,_0x31b864),_0x19e0b0[_0x5641de(0x277)][_0x5641de(0x24e)]=_0x1441a4;const _0x9e3470=_0x350e7f[_0x5641de(0x1a6)]/0x3c*GRID_H,_0x4d1d7b=(_0x350e7f[_0x5641de(0x280)]-_0x350e7f[_0x5641de(0x1a6)])/0x3c*GRID_H;_0x19e0b0[_0x5641de(0x277)][_0x5641de(0x219)]=_0x9e3470+'px',_0x19e0b0[_0x5641de(0x277)][_0x5641de(0x293)]=Math[_0x5641de(0x1f0)](_0x4d1d7b,0x14)+'px',_0x19e0b0[_0x5641de(0x277)][_0x5641de(0x23f)]=_0x5641de(0x269)+_0x1bdeed+_0x5641de(0x285),_0x19e0b0[_0x5641de(0x277)][_0x5641de(0x24a)]=_0x5641de(0x269)+_0x3d978f+_0x5641de(0x207),_0x19e0b0['style'][_0x5641de(0x1b2)]=0xa+_0x350e7f[_0x5641de(0x242)];if(_0x1bdeed<0x55)_0x19e0b0[_0x5641de(0x254)]['add'](_0x5641de(0x1b8));let _0x425c5a='';if(_0x393132['seriesId'])_0x425c5a+=_0x5641de(0x1dd);if(_0x136b20)_0x425c5a+=_0x5641de(0x26b);_0x19e0b0[_0x5641de(0x1b4)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>'+_0x393132['start']+'\x20-\x20'+_0x393132[_0x5641de(0x280)]+_0x5641de(0x226)+_0x425c5a+_0x5641de(0x270),_0x19e0b0[_0x5641de(0x26f)]=_0x1edd49=>{_0x1edd49['stopPropagation'](),openDetails(_0x393132);},_0x38e3d0[_0x5641de(0x227)](_0x19e0b0);});}function openAnalytics(){const _0x358631=a3_0x3b189c,_0x2084e9=document['querySelector'](_0x358631(0x28d));setAnalyticsPeriod(_0x358631(0x228),_0x2084e9),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x12a8eb,_0x1701bd){const _0x137103=a3_0x3b189c;currentAnPeriod=_0x12a8eb,document['querySelectorAll'](_0x137103(0x28d))['forEach'](_0xfa97e=>_0xfa97e[_0x137103(0x254)]['remove']('active'));if(_0x1701bd)_0x1701bd[_0x137103(0x254)][_0x137103(0x203)](_0x137103(0x25a));const _0x3e19e2=document[_0x137103(0x1c7)](_0x137103(0x233));_0x3e19e2['style']['display']=_0x12a8eb===_0x137103(0x25f)?_0x137103(0x1d2):_0x137103(0x1dc);const _0x3c4013=new Date();let _0x5e463e=new Date(),_0x3fa97c=new Date();if(_0x12a8eb===_0x137103(0x228))_0x5e463e=getStartOfWeek(_0x3c4013),_0x3fa97c=new Date(_0x5e463e),_0x3fa97c[_0x137103(0x234)](_0x3fa97c[_0x137103(0x1f2)]()+0x6);else{if(_0x12a8eb===_0x137103(0x26e))_0x5e463e=new Date(_0x3c4013[_0x137103(0x1c6)](),_0x3c4013[_0x137103(0x21f)](),0x1),_0x3fa97c=new Date(_0x3c4013[_0x137103(0x1c6)](),_0x3c4013[_0x137103(0x21f)]()+0x1,0x0);else{!document[_0x137103(0x1c7)](_0x137103(0x24c))[_0x137103(0x1b3)]&&(document[_0x137103(0x1c7)]('anStart')[_0x137103(0x1b3)]=getLocalDateStr(_0x3c4013),document[_0x137103(0x1c7)](_0x137103(0x27a))['value']=getLocalDateStr(_0x3c4013));refreshAnalytics();return;}}document[_0x137103(0x1c7)](_0x137103(0x24c))['value']=getLocalDateStr(_0x5e463e),document[_0x137103(0x1c7)]('anEnd')[_0x137103(0x1b3)]=getLocalDateStr(_0x3fa97c),refreshAnalytics();}function refreshAnalytics(){const _0x2aab2c=a3_0x3b189c,_0x3ec4d8=document['getElementById'](_0x2aab2c(0x24c))[_0x2aab2c(0x1b3)],_0x14ff8f=document[_0x2aab2c(0x1c7)](_0x2aab2c(0x27a))['value'];if(!_0x3ec4d8||!_0x14ff8f)return;const _0x4c379a=sessions[_0x2aab2c(0x235)](_0x58a961=>_0x58a961[_0x2aab2c(0x232)]>=_0x3ec4d8&&_0x58a961['dateStr']<=_0x14ff8f&&_0x58a961[_0x2aab2c(0x281)]!==_0x2aab2c(0x1f1)),_0x196ec7=_0x4c379a[_0x2aab2c(0x230)],_0x4582e6=_0x4c379a[_0x2aab2c(0x235)](_0x3f2e94=>_0x3f2e94['status']===_0x2aab2c(0x213))[_0x2aab2c(0x230)],_0x53fb0e=_0x196ec7>0x0?Math[_0x2aab2c(0x1b5)](_0x4582e6/_0x196ec7*0x64):0x0;document[_0x2aab2c(0x1c7)](_0x2aab2c(0x1ec))[_0x2aab2c(0x1eb)]=_0x53fb0e+'%',document[_0x2aab2c(0x1c7)]('anTotalStats')[_0x2aab2c(0x1eb)]=_0x4582e6+'\x20–∏–∑\x20'+_0x196ec7+'\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ';const _0x1038e4=document[_0x2aab2c(0x1c7)](_0x2aab2c(0x1cb)),_0x49ba29=0x2*Math['PI']*0x23,_0x1a1e34=_0x49ba29-_0x53fb0e/0x64*_0x49ba29;_0x1038e4[_0x2aab2c(0x277)][_0x2aab2c(0x210)]=_0x1a1e34;const _0x58ebae={};_0x4c379a['forEach'](_0x13f851=>{const _0x191646=_0x2aab2c,_0x3d5993=_0x13f851[_0x191646(0x1a5)]||_0x191646(0x224);if(!_0x58ebae[_0x3d5993]){const _0x5e2ca0='#'+_0x3d5993[_0x191646(0x28a)]()[_0x191646(0x263)](0x0,0x6);_0x58ebae[_0x3d5993]={'total':0x0,'done':0x0,'color':_0x5e2ca0};}_0x58ebae[_0x3d5993][_0x191646(0x1be)]++;if(_0x13f851[_0x191646(0x281)]==='completed')_0x58ebae[_0x3d5993]['done']++;});const _0x29ea6f=document['getElementById']('analyticsList');_0x29ea6f[_0x2aab2c(0x1b4)]='';const _0x257d31=Object[_0x2aab2c(0x22c)](_0x58ebae)[_0x2aab2c(0x1a0)]((_0x58c9fe,_0x171fa1)=>_0x171fa1[0x1][_0x2aab2c(0x1be)]-_0x58c9fe[0x1]['total']);if(_0x257d31['length']===0x0){_0x29ea6f[_0x2aab2c(0x1b4)]='<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>';return;}_0x257d31[_0x2aab2c(0x258)](([_0x2182af,_0xbda6d8])=>{const _0x2f0bb6=_0x2aab2c,_0x394b89=Math[_0x2f0bb6(0x1b5)](_0xbda6d8[_0x2f0bb6(0x260)]/_0xbda6d8[_0x2f0bb6(0x1be)]*0x64),_0x1db18c=document[_0x2f0bb6(0x238)](_0x2f0bb6(0x25e));_0x1db18c['className']=_0x2f0bb6(0x27d),_0x1db18c['style'][_0x2f0bb6(0x24e)]=_0xbda6d8[_0x2f0bb6(0x271)],_0x1db18c[_0x2f0bb6(0x1b4)]=_0x2f0bb6(0x1e9)+_0x2182af[_0x2f0bb6(0x263)](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0xbda6d8['done']+'</span>\x20/\x20'+_0xbda6d8[_0x2f0bb6(0x1be)]+_0x2f0bb6(0x267)+_0x394b89+_0x2f0bb6(0x1d7),_0x29ea6f[_0x2f0bb6(0x227)](_0x1db18c);});}function openDetails(_0x570aa3){const _0x2824bd=a3_0x3b189c;currentSession=_0x570aa3;const _0x409f66=new Date(_0x570aa3[_0x2824bd(0x232)]),_0x4caeab=_0x409f66[_0x2824bd(0x1ef)](_0x2824bd(0x1a4),{'weekday':_0x2824bd(0x284),'day':_0x2824bd(0x205),'month':_0x2824bd(0x284)});document[_0x2824bd(0x1c7)](_0x2824bd(0x20e))[_0x2824bd(0x1eb)]=_0x4caeab['charAt'](0x0)['toUpperCase']()+_0x4caeab[_0x2824bd(0x291)](0x1),document[_0x2824bd(0x1c7)](_0x2824bd(0x1ee))[_0x2824bd(0x1eb)]=_0x570aa3[_0x2824bd(0x1a6)]+_0x2824bd(0x20f)+_0x570aa3[_0x2824bd(0x280)],document['getElementById'](_0x2824bd(0x202))[_0x2824bd(0x1eb)]=_0x570aa3['note']||_0x2824bd(0x25d);const _0xa4a852=document[_0x2824bd(0x1c7)](_0x2824bd(0x253)),_0xba1070=document[_0x2824bd(0x1c7)](_0x2824bd(0x1ca)),_0x292a67=_0xba1070[_0x2824bd(0x1fb)](_0x2824bd(0x240)),_0x50aa37=_0xba1070[_0x2824bd(0x1fb)]('.btn-reschedule'),_0x5f27b8=document[_0x2824bd(0x1c7)](_0x2824bd(0x20b));if(_0x570aa3[_0x2824bd(0x281)]===_0x2824bd(0x213))_0xa4a852['textContent']=_0x2824bd(0x1ba),_0xa4a852['style'][_0x2824bd(0x271)]=_0x2824bd(0x236),_0xba1070[_0x2824bd(0x277)][_0x2824bd(0x1c4)]=_0x2824bd(0x1dc);else{_0xa4a852['textContent']=_0x2824bd(0x1db),_0xa4a852[_0x2824bd(0x277)][_0x2824bd(0x271)]=_0x2824bd(0x27f),_0xba1070['style'][_0x2824bd(0x1c4)]='block';const _0x45988b=new Date(_0x570aa3[_0x2824bd(0x232)]+'T'+_0x570aa3[_0x2824bd(0x1a6)]),_0x59d3ba=new Date(),_0x20154e=(_0x45988b-_0x59d3ba)/(0x3e8*0x3c*0x3c),_0xe4353a=coachProfiles[_0x570aa3[_0x2824bd(0x1a5)]]&&coachProfiles[_0x570aa3[_0x2824bd(0x1a5)]][_0x2824bd(0x214)]?parseInt(coachProfiles[_0x570aa3['coachId']]['cancel_window']):0x18;if(_0xe4353a===0x0||_0x20154e>=_0xe4353a)_0x292a67[_0x2824bd(0x277)]['display']=_0x2824bd(0x21d),_0x50aa37[_0x2824bd(0x277)][_0x2824bd(0x1c4)]=_0x2824bd(0x21d),_0x5f27b8[_0x2824bd(0x277)]['display']=_0x2824bd(0x1dc);else{_0x292a67[_0x2824bd(0x277)][_0x2824bd(0x1c4)]=_0x2824bd(0x1dc),_0x50aa37[_0x2824bd(0x277)][_0x2824bd(0x1c4)]=_0x2824bd(0x1dc),_0x5f27b8['style'][_0x2824bd(0x1c4)]=_0x2824bd(0x21d);let _0x227d9c=_0xe4353a===0x0?_0x2824bd(0x246):_0x2824bd(0x1af)+_0xe4353a+_0x2824bd(0x268);_0x5f27b8[_0x2824bd(0x1eb)]=_0x2824bd(0x272)+_0x227d9c+_0x2824bd(0x259);}}document[_0x2824bd(0x1c7)](_0x2824bd(0x20a))['classList']['add'](_0x2824bd(0x25a)),document[_0x2824bd(0x1c7)](_0x2824bd(0x1fa))[_0x2824bd(0x254)]['add'](_0x2824bd(0x22f));}function closeAllSheets(){const _0x4e921c=a3_0x3b189c;document[_0x4e921c(0x1c7)](_0x4e921c(0x20a))[_0x4e921c(0x254)]['remove'](_0x4e921c(0x25a)),document['querySelectorAll'](_0x4e921c(0x1a8))[_0x4e921c(0x258)](_0x378895=>_0x378895['classList']['remove'](_0x4e921c(0x22f)));}function openSheet(_0x52361d){const _0x436666=a3_0x3b189c;document[_0x436666(0x1c7)](_0x436666(0x20a))[_0x436666(0x254)][_0x436666(0x203)](_0x436666(0x25a)),document[_0x436666(0x1c7)](_0x52361d)[_0x436666(0x254)]['add'](_0x436666(0x22f));}function a3_0x382e(){const _0x251a2d=['now','10107zGzQsE','long','%\x20-\x204px)','saveLocally','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','day-column\x20','padStart','toString','setAttribute','rs-date-chip','.period-switch\x20.p-btn','globalTimeLine','className','gridColumns','slice','data','height','ranges','json','router.html','setBackgroundColor','fontWeight','floor','1420nTgcnT','</div>','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','sort','scrollTop','uc_client_settings','createDocumentFragment','ru-RU','coachId','start',':00</span>','.sheet','rsSlotsGrid','scrollLeft','<div\x20class=\x22dch-day\x22>','1985046VHZlll','user','clientId','–∑–∞\x20','test','event-card','zIndex','value','innerHTML','round','Telegram','scrollWidth','mini','onClick','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','#ff453a','findIndex','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','total','scroll','setMonth','getHours','exceptions','keys','display','get_slots','getFullYear','getElementById','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','planned','cancelContainer','anDonutCircle','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','timeColumn','T00:00:00','rescheduleSheet','auto','querySelectorAll','flex','blocked-range-part\x20stripe-bg','show','12IqhQUF','.day-col-header[data-date=\x22','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','uc_client_sessions','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','setHeaderColor','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','none','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','T23:59:59','applyData','getMinutes','toast','.day-col-header','constructor','then','headerMonth','push','getAttribute','WebApp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','3638376uDvtgo','textContent','anPercent','clientWidth','detTime','toLocaleDateString','max','cancelled','getDate','join','746835OcBiGq','14suJBTV','getItem','today','pattern','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','detailsSheet','querySelector','parse','matrixViewport','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','timeLineBadge','stringify','firstChild','detNote','add','min','numeric','2JRNjqW','%\x20+\x202px)','isArray','initDataUnsafe','overlay','cancelHint','customConfirm','insertBefore','detDate','\x20-\x20','strokeDashoffset','daysHeaderTrack','<span>','completed','cancel_window','<div\x20class=\x22rs-day-name\x22>','toUpperCase','visible','initData','top','disableVerticalSwipes','day-off-overlay\x20stripe-bg','settings','block','getTime','getMonth','toLocaleString','ccText','expand','backgroundPosition','Unknown','coach_profiles','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','appendChild','week','Error\x20setting\x20back\x20button:','offsetLeft','remove','entries','Error\x20setting\x20color:','split','open','length','scrollTo','dateStr','anCustomDates','setDate','filter','var(--acc-green)','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','createElement','startsWith','2259334bxuLql','BackButton','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','log','rsDatesTrack','width','.btn-cancel','.rs-date-chip','colIndex','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','getDay','.day-column','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','cid','map','DOMContentLoaded','left','rgba(','anStart','249YhdRVw','borderLeftColor','data-date','day-col-header\x20','rgba(10,\x20132,\x20255,\x20','search','detStatus','classList','setHours','424776ParRJm','30572rOobeN','forEach','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','active','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','(((.+)+)+)+$','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','div','custom','done','setItem','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','substr','data-day-idx','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','#050505','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','\x20—á.','calc(','\x20–≤\x20','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','uc_client_list','</div><div\x20class=\x22dch-num\x22>','month','onclick','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','color','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','button','calendar','rs-time-btn','POST','style','600','</div><div\x20class=\x22rs-day-num\x22>','anEnd','#0a84ff','client_load','client-stat-card','clients','var(--acc-blue)','end','status'];a3_0x382e=function(){return _0x251a2d;};return a3_0x382e();}function getLocalDateStr(_0x5c88c9){const _0x23ae3c=a3_0x3b189c,_0x4a65ba=_0x5c88c9['getFullYear'](),_0x4436f7=String(_0x5c88c9['getMonth']()+0x1)[_0x23ae3c(0x289)](0x2,'0'),_0x2332e2=String(_0x5c88c9[_0x23ae3c(0x1f2)]())[_0x23ae3c(0x289)](0x2,'0');return _0x4a65ba+'-'+_0x4436f7+'-'+_0x2332e2;}function getStartOfWeek(_0x3702ee){const _0x4a13fb=a3_0x3b189c,_0x1795c3=new Date(_0x3702ee),_0x107a18=_0x1795c3[_0x4a13fb(0x244)](),_0x16d2a7=_0x1795c3[_0x4a13fb(0x1f2)]()-_0x107a18+(_0x107a18===0x0?-0x6:0x1);return _0x1795c3['setDate'](_0x16d2a7),_0x1795c3[_0x4a13fb(0x255)](0x0,0x0,0x0,0x0),_0x1795c3;}function scrollToToday(){const _0x329a41=getLocalDateStr(new Date());setTimeout(()=>{const _0x44f971=a3_0x5468,_0x4cd4b1=document[_0x44f971(0x1fb)](_0x44f971(0x1d6)+_0x329a41+'\x22]');if(_0x4cd4b1){const _0x5eecc2=document[_0x44f971(0x1c7)](_0x44f971(0x1fd)),_0x5a6502=_0x4cd4b1['offsetLeft']-_0x5eecc2[_0x44f971(0x1ed)]/0x2+_0x4cd4b1['offsetWidth']/0x2;_0x5eecc2[_0x44f971(0x231)]({'left':_0x5a6502,'behavior':_0x44f971(0x1d0)}),_0x5eecc2[_0x44f971(0x1a1)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x42406b=a3_0x3b189c,_0x4db44e=new Date(),_0x36dd95=document[_0x42406b(0x1c7)](_0x42406b(0x28e)),_0x3a1e3d=document[_0x42406b(0x1c7)](_0x42406b(0x1ff)),_0x2c04bd=(_0x4db44e[_0x42406b(0x1c1)]()*0x3c+_0x4db44e['getMinutes']())/0x3c*GRID_H;_0x36dd95[_0x42406b(0x277)]['top']=_0x2c04bd+'px',_0x36dd95[_0x42406b(0x277)][_0x42406b(0x1c4)]=_0x42406b(0x21d),_0x3a1e3d[_0x42406b(0x277)][_0x42406b(0x219)]=_0x2c04bd+'px',_0x3a1e3d['style']['display']=_0x42406b(0x21d),_0x3a1e3d[_0x42406b(0x1eb)]=String(_0x4db44e[_0x42406b(0x1c1)]())['padStart'](0x2,'0')+':'+String(_0x4db44e[_0x42406b(0x1e0)]())['padStart'](0x2,'0');}function onScroll(){const _0x77a98d=a3_0x3b189c,_0xac80da=document[_0x77a98d(0x1c7)](_0x77a98d(0x1fd)),_0x5f0f8e=document[_0x77a98d(0x1d1)](_0x77a98d(0x1e2));for(let _0x12cf09 of _0x5f0f8e)if(_0x12cf09['offsetLeft']>=_0xac80da[_0x77a98d(0x1aa)]){const _0x12d06f=new Date(_0x12cf09[_0x77a98d(0x1e7)](_0x77a98d(0x24f)));document['getElementById'](_0x77a98d(0x1e5))[_0x77a98d(0x1eb)]=_0x12d06f[_0x77a98d(0x220)]('ru',{'month':_0x77a98d(0x284)})[_0x77a98d(0x216)]()+'\x20'+_0x12d06f[_0x77a98d(0x1c6)]();break;}}function showToast(_0x2ee5e3){const _0x484d99=a3_0x3b189c,_0x2545df=document['getElementById'](_0x484d99(0x1e1));_0x2545df[_0x484d99(0x1eb)]=_0x2ee5e3,_0x2545df[_0x484d99(0x254)][_0x484d99(0x203)](_0x484d99(0x1d4)),setTimeout(()=>_0x2545df[_0x484d99(0x254)][_0x484d99(0x22b)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x514268=a3_0x3b189c,_0x574249=document[_0x514268(0x1c7)]('matrixViewport'),_0x34851e=_0x574249[_0x514268(0x1aa)],_0x321af4=_0x574249[_0x514268(0x1b7)],_0x2aa528=_0x574249[_0x514268(0x1ed)];if(_0x321af4-(_0x34851e+_0x2aa528)<0x12c){const _0x434b99=endOffset;endOffset+=0xe,renderDayRange(_0x434b99+0x1,endOffset),reRenderBlocks();}if(_0x34851e<0x12c){const _0x4e5277=startOffset;startOffset-=0xe,prependDays(startOffset,_0x4e5277-0x1),_0x574249[_0x514268(0x1aa)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x25f946,_0x46df54){const _0x74682d=a3_0x3b189c,_0x52edb2=document[_0x74682d(0x1c7)](_0x74682d(0x211)),_0x3f71b3=document[_0x74682d(0x1c7)](_0x74682d(0x290)),_0x25415c=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x5199e0=new Date();_0x5199e0[_0x74682d(0x255)](0x0,0x0,0x0,0x0);const _0x439ef7=getLocalDateStr(new Date()),_0x2a54ab=document[_0x74682d(0x1a3)](),_0x2f4b52=document[_0x74682d(0x1a3)]();for(let _0x17b809=_0x25f946;_0x17b809<=_0x46df54;_0x17b809++){const _0x17accf=new Date(_0x5199e0);_0x17accf[_0x74682d(0x234)](_0x17accf[_0x74682d(0x1f2)]()+_0x17b809);const _0x1c18cf=getLocalDateStr(_0x17accf);let _0x1564c8=_0x17accf['getDay']()-0x1;if(_0x1564c8===-0x1)_0x1564c8=0x6;const _0xe560d0=_0x1c18cf===_0x439ef7,_0x12cfdd=document['createElement'](_0x74682d(0x25e));_0x12cfdd[_0x74682d(0x28f)]=_0x74682d(0x250)+(_0xe560d0?_0x74682d(0x1f7):''),_0x12cfdd[_0x74682d(0x28b)](_0x74682d(0x24f),_0x1c18cf),_0x12cfdd[_0x74682d(0x1b4)]='<div\x20class=\x22dch-day\x22>'+_0x25415c[_0x1564c8]+_0x74682d(0x26d)+_0x17accf[_0x74682d(0x1f2)]()+_0x74682d(0x29b),_0x2a54ab[_0x74682d(0x227)](_0x12cfdd);const _0x4376b8=document[_0x74682d(0x238)](_0x74682d(0x25e));_0x4376b8[_0x74682d(0x28f)]='day-column\x20'+(_0xe560d0?_0x74682d(0x1f7):''),_0x4376b8[_0x74682d(0x28b)]('data-date',_0x1c18cf),_0x4376b8[_0x74682d(0x28b)](_0x74682d(0x264),_0x1564c8),_0x2f4b52[_0x74682d(0x227)](_0x4376b8);}_0x52edb2['insertBefore'](_0x2a54ab,_0x52edb2[_0x74682d(0x201)]),_0x3f71b3[_0x74682d(0x20d)](_0x2f4b52,_0x3f71b3['querySelector'](_0x74682d(0x245)));}function hexToRgba(_0x14b0ac,_0x5632ff){const _0x5e249a=a3_0x3b189c;let _0x557a03;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x5e249a(0x1b0)](_0x14b0ac))return _0x557a03=_0x14b0ac['substring'](0x1)['split'](''),_0x557a03['length']==0x3&&(_0x557a03=[_0x557a03[0x0],_0x557a03[0x0],_0x557a03[0x1],_0x557a03[0x1],_0x557a03[0x2],_0x557a03[0x2]]),_0x557a03='0x'+_0x557a03['join'](''),_0x5e249a(0x24b)+[_0x557a03>>0x10&0xff,_0x557a03>>0x8&0xff,_0x557a03&0xff][_0x5e249a(0x1f3)](',')+','+_0x5632ff+')';return _0x5e249a(0x251)+_0x5632ff+')';}let confirmResolver=null;function showCustomConfirm(_0xd05ac4,_0x551686,_0x39bf94=!![]){const _0x5176be=a3_0x3b189c;document[_0x5176be(0x1c7)]('ccTitle')[_0x5176be(0x1eb)]=_0xd05ac4,document[_0x5176be(0x1c7)](_0x5176be(0x221))[_0x5176be(0x1eb)]=_0x551686;const _0x21f998=document['getElementById']('ccYesBtn');return _0x39bf94?(_0x21f998[_0x5176be(0x277)]['color']=_0x5176be(0x1bb),_0x21f998['style'][_0x5176be(0x298)]='600'):(_0x21f998['style']['color']=_0x5176be(0x27b),_0x21f998[_0x5176be(0x277)][_0x5176be(0x298)]=_0x5176be(0x278)),new Promise(_0x32c3b3=>{const _0x13292b=_0x5176be;confirmResolver=_0x32c3b3,document[_0x13292b(0x1c7)](_0x13292b(0x20c))[_0x13292b(0x254)][_0x13292b(0x203)](_0x13292b(0x217));});}function resolveCustomConfirm(_0x4a163e){const _0x4a3da8=a3_0x3b189c;document['getElementById'](_0x4a3da8(0x20c))[_0x4a3da8(0x254)]['remove'](_0x4a3da8(0x217));if(confirmResolver)confirmResolver(_0x4a163e);}async function tryCancelCurrentSession(){const _0x397025=a3_0x3b189c;if(!currentSession)return;const _0x483652=await showCustomConfirm(_0x397025(0x1bd),_0x397025(0x287),!![]);if(!_0x483652)return;const _0x3066c3=currentSession;closeAllSheets(),sessions=sessions[_0x397025(0x235)](_0x70faf2=>_0x70faf2['id']!==_0x3066c3['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x397025(0x282)]();try{const _0x52c481=window[_0x397025(0x1b6)]?.[_0x397025(0x1e8)],_0x42edc1=await fetch(API_URL,{'method':_0x397025(0x276),'body':JSON['stringify']({'action':'client_cancel','init_data':_0x52c481?.[_0x397025(0x218)]||'','coachId':_0x3066c3[_0x397025(0x1a5)],'dateStr':_0x3066c3[_0x397025(0x232)],'sessionId':_0x3066c3['id']})});if(_0x42edc1['ok'])DataManager[_0x397025(0x286)]();}catch(_0x266fc7){showToast(_0x397025(0x262));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x525e99=a3_0x3b189c;if(!currentSession)return;document[_0x525e99(0x1c7)](_0x525e99(0x1fa))[_0x525e99(0x254)][_0x525e99(0x22b)]('open'),document[_0x525e99(0x1c7)](_0x525e99(0x1cf))[_0x525e99(0x254)][_0x525e99(0x203)](_0x525e99(0x22f));const _0x270847=document[_0x525e99(0x1c7)](_0x525e99(0x23e)),_0xd0b170=document[_0x525e99(0x1c7)](_0x525e99(0x1a9));_0x270847['innerHTML']='',_0xd0b170['innerHTML']=_0x525e99(0x1fe);const [_0x46523e,_0x961b0]=currentSession[_0x525e99(0x1a6)]['split'](':')['map'](Number),[_0x5a466b,_0x3f4046]=currentSession[_0x525e99(0x280)][_0x525e99(0x22e)](':')[_0x525e99(0x248)](Number),_0x418904=_0x5a466b*0x3c+_0x3f4046-(_0x46523e*0x3c+_0x961b0);try{const _0x1f5857=window[_0x525e99(0x1b6)]?.[_0x525e99(0x1e8)],_0x46ecb9=await fetch(API_URL,{'method':_0x525e99(0x276),'body':JSON[_0x525e99(0x200)]({'action':_0x525e99(0x1c5),'coachId':currentSession[_0x525e99(0x1a5)],'duration':_0x418904,'init_data':_0x1f5857?.[_0x525e99(0x218)]||'','excludeSessionId':currentSession['id']})}),_0x2c2984=await _0x46ecb9[_0x525e99(0x295)]();_0x2c2984['ok']&&_0x2c2984['data']?(availableSlotsCache=_0x2c2984['data'],renderRescheduleDates()):_0xd0b170['innerHTML']=_0x525e99(0x1cc);}catch(_0x3800b1){_0xd0b170[_0x525e99(0x1b4)]=_0x525e99(0x1d9);}}function renderRescheduleDates(){const _0x24f439=a3_0x3b189c,_0x45b888=document[_0x24f439(0x1c7)](_0x24f439(0x23e));_0x45b888[_0x24f439(0x1b4)]='';const _0x131aa0=Object[_0x24f439(0x1c3)](availableSlotsCache)['sort'](),_0x3a71fe=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x131aa0['length']===0x0){document['getElementById'](_0x24f439(0x1a9))[_0x24f439(0x1b4)]=_0x24f439(0x23c);return;}_0x131aa0[_0x24f439(0x258)]((_0x32d8e8,_0x437f0c)=>{const _0x31cd7c=_0x24f439,_0x314584=new Date(_0x32d8e8),_0x311fd2=_0x3a71fe[_0x314584['getDay']()],_0x923d67=_0x314584['getDate'](),_0x487434=document[_0x31cd7c(0x238)]('div');_0x487434['className']=_0x31cd7c(0x28c);if(_0x437f0c===0x0)_0x487434[_0x31cd7c(0x254)]['add'](_0x31cd7c(0x25a));_0x487434['innerHTML']=_0x31cd7c(0x215)+_0x311fd2+_0x31cd7c(0x279)+_0x923d67+_0x31cd7c(0x29b),_0x487434[_0x31cd7c(0x26f)]=()=>selectRsDate(_0x32d8e8,_0x487434),_0x45b888['appendChild'](_0x487434);}),selectRsDate(_0x131aa0[0x0],_0x45b888[_0x24f439(0x201)]);}function selectRsDate(_0x46ebde,_0x1f66cd){const _0x2c4650=a3_0x3b189c;selectedRsDate=_0x46ebde,document['querySelectorAll'](_0x2c4650(0x241))[_0x2c4650(0x258)](_0x343c4c=>_0x343c4c[_0x2c4650(0x254)]['remove'](_0x2c4650(0x25a)));if(_0x1f66cd)_0x1f66cd[_0x2c4650(0x254)][_0x2c4650(0x203)]('active');const _0x43f6c2=document[_0x2c4650(0x1c7)](_0x2c4650(0x1a9));_0x43f6c2['innerHTML']='';const _0x25f6d9=availableSlotsCache[_0x46ebde]||[];if(_0x25f6d9[_0x2c4650(0x230)]===0x0){_0x43f6c2[_0x2c4650(0x1b4)]=_0x2c4650(0x1cc);return;}_0x25f6d9[_0x2c4650(0x258)](_0x4ad2d4=>{const _0x36b56b=_0x2c4650,_0x1c98ee=document[_0x36b56b(0x238)](_0x36b56b(0x273));_0x1c98ee[_0x36b56b(0x28f)]=_0x36b56b(0x275),_0x1c98ee[_0x36b56b(0x1eb)]=_0x4ad2d4,_0x1c98ee[_0x36b56b(0x26f)]=()=>confirmReschedule(_0x4ad2d4),_0x43f6c2[_0x36b56b(0x227)](_0x1c98ee);});}async function confirmReschedule(_0x4af760){const _0x1dd4d5=a3_0x3b189c,_0x2f9708=new Date(selectedRsDate),_0x35d183=_0x2f9708[_0x1dd4d5(0x1ef)]('ru-RU',{'day':'numeric','month':_0x1dd4d5(0x284)}),_0x2dee6e=await showCustomConfirm(_0x1dd4d5(0x1f9),_0x1dd4d5(0x243)+_0x35d183+_0x1dd4d5(0x26a)+_0x4af760+'?',![]);if(!_0x2dee6e)return;closeAllSheets(),showToast(_0x1dd4d5(0x237)),lastUserActionTime=Date['now']();const _0x1192f2=currentSession['dateStr'],_0x3abf52=currentSession['id'],[_0xa1b351,_0x572398]=currentSession['start'][_0x1dd4d5(0x22e)](':')[_0x1dd4d5(0x248)](Number),[_0x506624,_0x478c5f]=currentSession['end']['split'](':')[_0x1dd4d5(0x248)](Number),_0x2fc096=_0x506624*0x3c+_0x478c5f-(_0xa1b351*0x3c+_0x572398),[_0xcc6b71,_0x4c9fb7]=_0x4af760[_0x1dd4d5(0x22e)](':')[_0x1dd4d5(0x248)](Number),_0x94b754=_0xcc6b71*0x3c+_0x4c9fb7+_0x2fc096,_0x42279a=Math[_0x1dd4d5(0x299)](_0x94b754/0x3c),_0xbf2a41=_0x94b754%0x3c,_0x1f4c1c=String(_0x42279a)[_0x1dd4d5(0x289)](0x2,'0')+':'+String(_0xbf2a41)[_0x1dd4d5(0x289)](0x2,'0'),_0x198989=sessions[_0x1dd4d5(0x1bc)](_0x40781c=>_0x40781c['id']===_0x3abf52);_0x198989!==-0x1&&(sessions[_0x198989]['dateStr']=selectedRsDate,sessions[_0x198989][_0x1dd4d5(0x1a6)]=_0x4af760,sessions[_0x198989][_0x1dd4d5(0x280)]=_0x1f4c1c,reRenderBlocks());try{const _0x42f632=window[_0x1dd4d5(0x1b6)]?.[_0x1dd4d5(0x1e8)],_0x477ef2=await fetch(API_URL,{'method':'POST','body':JSON[_0x1dd4d5(0x200)]({'action':'reschedule','init_data':_0x42f632?.['initData']||'','oldSessionId':_0x3abf52,'oldDate':_0x1192f2,'newDate':selectedRsDate,'newTime':_0x4af760,'coachId':currentSession['coachId']})}),_0x437c2d=await _0x477ef2['json']();!_0x437c2d['ok']?(showToast(_0x1dd4d5(0x265)),DataManager['syncLoad']()):(showToast(_0x1dd4d5(0x1c8)),DataManager[_0x1dd4d5(0x286)]());}catch(_0x2f12bf){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document['addEventListener'](a3_0x3b189c(0x249),init);