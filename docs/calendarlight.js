const a3_0x1e0b54=a3_0x3d8e;(function(_0x34957e,_0x12303e){const _0x43144e=a3_0x3d8e,_0x153744=_0x34957e();while(!![]){try{const _0x39dc06=parseInt(_0x43144e(0x1ab))/0x1+parseInt(_0x43144e(0x1ad))/0x2*(parseInt(_0x43144e(0x267))/0x3)+-parseInt(_0x43144e(0x1a6))/0x4+-parseInt(_0x43144e(0x210))/0x5*(-parseInt(_0x43144e(0x1f4))/0x6)+-parseInt(_0x43144e(0x1d8))/0x7+parseInt(_0x43144e(0x249))/0x8*(-parseInt(_0x43144e(0x238))/0x9)+parseInt(_0x43144e(0x225))/0xa;if(_0x39dc06===_0x12303e)break;else _0x153744['push'](_0x153744['shift']());}catch(_0xae9332){_0x153744['push'](_0x153744['shift']());}}}(a3_0x1403,0x3e3b9));const APP_VERSION=a3_0x1e0b54(0x1b2),API_URL=a3_0x1e0b54(0x1c9),GRID_H=0x3c,KEY_SESSIONS=a3_0x1e0b54(0x208),KEY_SETTINGS=a3_0x1e0b54(0x1a0),KEY_CLIENTS=a3_0x1e0b54(0x20f);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x1e0b54(0x21b),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x1ae418=a3_0x1e0b54,_0x11dc79=(function(){let _0x46568f=!![];return function(_0x38279d,_0x13fc50){const _0x2ae62f=_0x46568f?function(){const _0x5d0bc1=a3_0x3d8e;if(_0x13fc50){const _0x381d6b=_0x13fc50[_0x5d0bc1(0x240)](_0x38279d,arguments);return _0x13fc50=null,_0x381d6b;}}:function(){};return _0x46568f=![],_0x2ae62f;};}()),_0x1e80d1=_0x11dc79(this,function(){const _0x49abd4=a3_0x3d8e;return _0x1e80d1['toString']()['search'](_0x49abd4(0x218))[_0x49abd4(0x216)]()['constructor'](_0x1e80d1)[_0x49abd4(0x1ed)](_0x49abd4(0x218));});_0x1e80d1();try{const _0x4e814f=window[_0x1ae418(0x1db)]?.['WebApp'];if(!_0x4e814f)return;_0x4e814f[_0x1ae418(0x269)](),_0x4e814f['expand']();try{_0x4e814f[_0x1ae418(0x1cf)](_0x1ae418(0x22f)),_0x4e814f['setBackgroundColor']&&_0x4e814f[_0x1ae418(0x24d)](_0x1ae418(0x22f));}catch(_0x4775be){console[_0x1ae418(0x1ec)]('Error\x20setting\x20color:',_0x4775be);}try{_0x4e814f[_0x1ae418(0x254)]&&(_0x4e814f[_0x1ae418(0x254)][_0x1ae418(0x277)](),_0x4e814f[_0x1ae418(0x254)][_0x1ae418(0x1d6)](),_0x4e814f[_0x1ae418(0x254)][_0x1ae418(0x1a1)](function(){const _0x265c47=_0x1ae418;window['location'][_0x265c47(0x27a)]=_0x265c47(0x264);}));}catch(_0x1b0689){console[_0x1ae418(0x1ec)]('Error\x20setting\x20back\x20button:',_0x1b0689);}try{if(_0x4e814f[_0x1ae418(0x1e4)])_0x4e814f[_0x1ae418(0x1e4)]();}catch(_0x451847){}}catch(_0x5bc3ad){console[_0x1ae418(0x1dd)]('Critical\x20TMA\x20Error:',_0x5bc3ad);}}());function isAdmin(){const _0x4f1b5d=a3_0x1e0b54;try{const _0x28bd9d=Number(window['Telegram']?.[_0x4f1b5d(0x24e)]?.[_0x4f1b5d(0x1d7)]?.[_0x4f1b5d(0x24f)]?.['id']);return _0x28bd9d===0xbaf7174;}catch(_0x3dd01c){return![];}}const DataManager={'saveLocally'(){const _0x3372a9=a3_0x1e0b54;try{localStorage[_0x3372a9(0x1a4)](KEY_SESSIONS,JSON[_0x3372a9(0x212)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON[_0x3372a9(0x212)](clients)),localStorage[_0x3372a9(0x1a4)](KEY_SETTINGS,JSON[_0x3372a9(0x212)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x35d490){}},'loadLocal'(){const _0x182faf=a3_0x1e0b54;try{const _0x4912a6=localStorage[_0x182faf(0x1b3)](KEY_SESSIONS);if(_0x4912a6)sessions=JSON[_0x182faf(0x228)](_0x4912a6);const _0x487b23=localStorage[_0x182faf(0x1b3)](KEY_CLIENTS);if(_0x487b23)clients=JSON[_0x182faf(0x228)](_0x487b23);const _0x2a18c0=localStorage['getItem'](KEY_SETTINGS);if(_0x2a18c0){const _0x5cfa9f=JSON[_0x182faf(0x228)](_0x2a18c0);if(_0x5cfa9f[_0x182faf(0x27c)])availabilityPattern=_0x5cfa9f['pattern'];if(_0x5cfa9f[_0x182faf(0x28f)])specialRanges=_0x5cfa9f[_0x182faf(0x28f)];if(_0x5cfa9f[_0x182faf(0x200)])dateExceptions=_0x5cfa9f[_0x182faf(0x200)];}}catch(_0x31481c){}},async 'syncLoad'(){const _0x4de11c=a3_0x1e0b54,_0x17d42a=new Date(),_0x3bfaed=_0x17d42a['getFullYear']()+'-'+String(_0x17d42a[_0x4de11c(0x215)]()+0x1)[_0x4de11c(0x258)](0x2,'0'),_0x271ec2=new Date(_0x17d42a);_0x271ec2[_0x4de11c(0x262)](_0x17d42a['getMonth']()+0x1);const _0x28121b=_0x271ec2[_0x4de11c(0x1c3)]()+'-'+String(_0x271ec2['getMonth']()+0x1)[_0x4de11c(0x258)](0x2,'0'),_0x34bade=Date['now']();try{const _0x1a2e7f=window[_0x4de11c(0x1db)]?.[_0x4de11c(0x24e)],_0x568b68=_0x1a2e7f?.[_0x4de11c(0x255)]||'',[_0x4480a5,_0x52fd27]=await Promise['all']([fetch(API_URL,{'method':_0x4de11c(0x1a7),'body':JSON[_0x4de11c(0x212)]({'action':'client_load','init_data':_0x568b68,'month_str':_0x3bfaed})})[_0x4de11c(0x206)](_0x30ebec=>_0x30ebec[_0x4de11c(0x20e)]()),fetch(API_URL,{'method':_0x4de11c(0x1a7),'body':JSON[_0x4de11c(0x212)]({'action':_0x4de11c(0x1f2),'init_data':_0x568b68,'month_str':_0x28121b})})[_0x4de11c(0x206)](_0x4907ea=>_0x4907ea[_0x4de11c(0x20e)]())]);if(lastUserActionTime>_0x34bade){console['log'](_0x4de11c(0x22a));return;}if(_0x4480a5['ok'])this[_0x4de11c(0x1ac)](_0x4480a5[_0x4de11c(0x26b)],_0x3bfaed);if(_0x52fd27['ok'])this[_0x4de11c(0x1ac)](_0x52fd27[_0x4de11c(0x26b)],_0x28121b);this[_0x4de11c(0x26c)]();}catch(_0x4f33fd){}},'applyData'(_0x265496,_0x3393d0){const _0x330763=a3_0x1e0b54;if(!_0x265496)return;if(_0x265496['settings']){if(_0x265496[_0x330763(0x1fa)][_0x330763(0x27c)])availabilityPattern=_0x265496[_0x330763(0x1fa)][_0x330763(0x27c)];if(_0x265496[_0x330763(0x1fa)][_0x330763(0x28f)])specialRanges=_0x265496[_0x330763(0x1fa)][_0x330763(0x28f)];if(_0x265496[_0x330763(0x1fa)][_0x330763(0x200)])dateExceptions=_0x265496['settings'][_0x330763(0x200)];}if(_0x265496[_0x330763(0x22b)]&&Array[_0x330763(0x273)](_0x265496[_0x330763(0x22b)]))clients=_0x265496['clients'];_0x265496['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x265496[_0x330763(0x28d)]}),_0x265496[_0x330763(0x217)]&&(sessions=sessions[_0x330763(0x247)](_0xaac3e5=>!_0xaac3e5[_0x330763(0x19c)][_0x330763(0x27f)](_0x3393d0)),Object[_0x330763(0x1d5)](_0x265496[_0x330763(0x217)])['forEach'](_0x263f0c=>{const _0x384ba6=_0x330763,_0x5f575b=_0x265496[_0x384ba6(0x217)][_0x263f0c];_0x5f575b[_0x384ba6(0x283)](_0x213c0a=>{const _0xe0ed6e=_0x384ba6;sessions[_0xe0ed6e(0x1d3)]({'id':_0x213c0a['i'],'clientId':_0x213c0a['c'],'coachId':_0x213c0a['cid'],'dateStr':_0x3393d0+'-'+_0x263f0c[_0xe0ed6e(0x258)](0x2,'0'),'start':_0x213c0a['s'],'end':_0x213c0a['e'],'note':_0x213c0a['n']||'','status':_0x213c0a['st']||_0xe0ed6e(0x28c),'seriesId':_0x213c0a[_0xe0ed6e(0x1e2)]});});})),reRenderBlocks();}};function init(){const _0x2a5b94=a3_0x1e0b54;DataManager[_0x2a5b94(0x1b5)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document[_0x2a5b94(0x1fc)](_0x2a5b94(0x244))[_0x2a5b94(0x278)](_0x2a5b94(0x1fb),()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x2a5b94(0x203)]();}function renderTimeColumn(){const _0x2df118=a3_0x1e0b54,_0x3a2dc8=document[_0x2df118(0x1fc)](_0x2df118(0x23c)),_0x2a0f02=document['getElementById'](_0x2df118(0x261));_0x3a2dc8[_0x2df118(0x21c)]='',_0x3a2dc8[_0x2df118(0x213)](_0x2a0f02);for(let _0xfcca95=0x0;_0xfcca95<0x18;_0xfcca95++){const _0x514ffa=document[_0x2df118(0x265)](_0x2df118(0x223));_0x514ffa[_0x2df118(0x1e3)]='time-label';if(_0xfcca95>0x0)_0x514ffa[_0x2df118(0x21c)]=_0x2df118(0x230)+String(_0xfcca95)['padStart'](0x2,'0')+_0x2df118(0x1c5);_0x3a2dc8['appendChild'](_0x514ffa);}}function renderDayRange(_0x5c4656,_0x31db7f){const _0x1d0fc4=a3_0x1e0b54,_0x4c4ed7=document[_0x1d0fc4(0x1fc)]('daysHeaderTrack'),_0x1c3e6f=document[_0x1d0fc4(0x1fc)]('gridColumns'),_0x190587=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1cade7=new Date();_0x1cade7[_0x1d0fc4(0x1e8)](0x0,0x0,0x0,0x0);const _0xf6d6da=getLocalDateStr(new Date());for(let _0x470533=_0x5c4656;_0x470533<=_0x31db7f;_0x470533++){const _0x3d602c=new Date(_0x1cade7);_0x3d602c[_0x1d0fc4(0x1e9)](_0x3d602c[_0x1d0fc4(0x214)]()+_0x470533);const _0x16aa95=getLocalDateStr(_0x3d602c);let _0x29858a=_0x3d602c[_0x1d0fc4(0x1a2)]()-0x1;if(_0x29858a===-0x1)_0x29858a=0x6;const _0x545e6d=_0x16aa95===_0xf6d6da,_0x26015e=document[_0x1d0fc4(0x265)](_0x1d0fc4(0x223));_0x26015e[_0x1d0fc4(0x1e3)]=_0x1d0fc4(0x279)+(_0x545e6d?_0x1d0fc4(0x1c2):''),_0x26015e[_0x1d0fc4(0x256)](_0x1d0fc4(0x287),_0x16aa95),_0x26015e[_0x1d0fc4(0x21c)]='<div\x20class=\x22dch-day\x22>'+_0x190587[_0x29858a]+_0x1d0fc4(0x21a)+_0x3d602c[_0x1d0fc4(0x214)]()+_0x1d0fc4(0x1f0),_0x4c4ed7['appendChild'](_0x26015e);const _0x2e5729=document[_0x1d0fc4(0x265)](_0x1d0fc4(0x223));_0x2e5729[_0x1d0fc4(0x1e3)]=_0x1d0fc4(0x271)+(_0x545e6d?'today':''),_0x2e5729[_0x1d0fc4(0x256)](_0x1d0fc4(0x287),_0x16aa95),_0x2e5729[_0x1d0fc4(0x256)]('data-day-idx',_0x29858a),_0x1c3e6f['appendChild'](_0x2e5729);}}function reRenderBlocks(){const _0x46b521=a3_0x1e0b54;document[_0x46b521(0x268)](_0x46b521(0x204))['forEach'](_0x1ffbb0=>{const _0x52e4d9=_0x46b521;_0x1ffbb0['querySelectorAll']('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')[_0x52e4d9(0x283)](_0x2daca7=>_0x2daca7['remove']());const _0x401004=_0x1ffbb0['getAttribute'](_0x52e4d9(0x287)),_0x5d5de0=parseInt(_0x1ffbb0['getAttribute'](_0x52e4d9(0x22d))),_0x4d1e91=Math['round'](_0x1ffbb0[_0x52e4d9(0x1c4)]);(availabilityPattern[_0x5d5de0]||[])[_0x52e4d9(0x283)](_0xf39937=>{const _0x34576e=_0x52e4d9,_0x126083=document[_0x34576e(0x265)](_0x34576e(0x223));_0x126083[_0x34576e(0x1e3)]=_0x34576e(0x24a),_0x126083[_0x34576e(0x1b4)][_0x34576e(0x20a)]=_0xf39937*GRID_H+'px',_0x126083[_0x34576e(0x1b4)]['backgroundPosition']='-'+_0x4d1e91+_0x34576e(0x211)+_0xf39937*GRID_H+'px',_0x1ffbb0[_0x34576e(0x213)](_0x126083);});if(specialRanges['length']>0x0){const _0x5a9f65=new Date(_0x401004+_0x52e4d9(0x257))[_0x52e4d9(0x1ca)](),_0x37007c=new Date(_0x401004+'T23:59:59')['getTime']();specialRanges[_0x52e4d9(0x283)](_0x272ec3=>{const _0x4e947d=_0x52e4d9,_0x3f7cba=new Date(_0x272ec3[_0x4e947d(0x19b)])[_0x4e947d(0x1ca)](),_0x293c1d=new Date(_0x272ec3[_0x4e947d(0x21d)])[_0x4e947d(0x1ca)](),_0x247092=Math[_0x4e947d(0x274)](_0x5a9f65,_0x3f7cba),_0x14ff9d=Math[_0x4e947d(0x209)](_0x37007c,_0x293c1d);if(_0x247092<_0x14ff9d){const _0x76ec64=(_0x247092-_0x5a9f65)/0x36ee80*GRID_H,_0x117730=(_0x14ff9d-_0x247092)/0x36ee80*GRID_H,_0x226d23=document['createElement']('div');_0x117730>=23.5*GRID_H?(_0x226d23['className']=_0x4e947d(0x1d2),_0x226d23['style'][_0x4e947d(0x1e1)]='-'+_0x4d1e91+_0x4e947d(0x25f)):(_0x226d23[_0x4e947d(0x1e3)]='blocked-range-part\x20stripe-bg',_0x226d23[_0x4e947d(0x1b4)][_0x4e947d(0x20a)]=_0x76ec64+'px',_0x226d23[_0x4e947d(0x1b4)][_0x4e947d(0x1a9)]=_0x117730+'px',_0x226d23[_0x4e947d(0x1b4)][_0x4e947d(0x1e1)]='-'+_0x4d1e91+_0x4e947d(0x211)+_0x76ec64+'px'),_0x1ffbb0['appendChild'](_0x226d23);}});}renderEventsForColumn(_0x1ffbb0,_0x401004);});}function renderEventsForColumn(_0x1ab909,_0x1f9802){const _0x3f87b0=a3_0x1e0b54,_0x19f593=sessions[_0x3f87b0(0x247)](_0x48f33e=>_0x48f33e[_0x3f87b0(0x19c)]===_0x1f9802),_0x23ddd0=_0x19f593[_0x3f87b0(0x1f1)](_0x86a011=>{const _0x17131e=_0x3f87b0,[_0x1fe79a,_0x1f1d1c]=_0x86a011[_0x17131e(0x19b)][_0x17131e(0x1cc)](':')[_0x17131e(0x1f1)](Number),[_0x52738e,_0x577d7f]=_0x86a011[_0x17131e(0x21d)][_0x17131e(0x1cc)](':')[_0x17131e(0x1f1)](Number);return{'data':_0x86a011,'start':_0x1fe79a*0x3c+_0x1f1d1c,'end':_0x52738e*0x3c+_0x577d7f,'colIndex':0x0};});_0x23ddd0[_0x3f87b0(0x1da)]((_0x2c9fc6,_0x2acdff)=>_0x2c9fc6[_0x3f87b0(0x19b)]-_0x2acdff[_0x3f87b0(0x19b)]||_0x2acdff[_0x3f87b0(0x21d)]-_0x2acdff[_0x3f87b0(0x19b)]-(_0x2c9fc6['end']-_0x2c9fc6[_0x3f87b0(0x19b)]));const _0xe3cff1=[];_0x23ddd0[_0x3f87b0(0x283)](_0x40990f=>{const _0x134e73=_0x3f87b0;let _0x10e3c0=![];for(let _0x2c510b=0x0;_0x2c510b<_0xe3cff1[_0x134e73(0x1ea)];_0x2c510b++){const _0x2787bf=_0xe3cff1[_0x2c510b];if(_0x40990f[_0x134e73(0x19b)]>=_0x2787bf[_0x2787bf['length']-0x1][_0x134e73(0x21d)]){_0x2787bf[_0x134e73(0x1d3)](_0x40990f),_0x40990f['colIndex']=_0x2c510b,_0x10e3c0=!![];break;}}!_0x10e3c0&&(_0xe3cff1[_0x134e73(0x1d3)]([_0x40990f]),_0x40990f[_0x134e73(0x202)]=_0xe3cff1[_0x134e73(0x1ea)]-0x1);}),_0x23ddd0['forEach'](_0x1a9ca4=>{const _0x2ef138=_0x3f87b0;let _0xbacb5f=0x0;_0x23ddd0['forEach'](_0x5ac18b=>{const _0x3bec06=a3_0x3d8e;if(Math[_0x3bec06(0x274)](_0x1a9ca4[_0x3bec06(0x19b)],_0x5ac18b[_0x3bec06(0x19b)])<Math[_0x3bec06(0x209)](_0x1a9ca4['end'],_0x5ac18b[_0x3bec06(0x21d)])&&_0x5ac18b[_0x3bec06(0x202)]>_0xbacb5f)_0xbacb5f=_0x5ac18b[_0x3bec06(0x202)];});const _0x449de8=_0xbacb5f+0x1,_0x2fb0a4=0x64/_0x449de8,_0x29fec6=_0x1a9ca4[_0x2ef138(0x202)]*_0x2fb0a4,_0x12a205=document[_0x2ef138(0x265)]('div'),_0x144799=_0x1a9ca4[_0x2ef138(0x26b)];let _0x20be99=_0x2ef138(0x263);if(clients&&clients['length']>0x0){const _0x645671=clients[_0x2ef138(0x250)](_0xf57aed=>String(_0xf57aed['id'])===String(_0x144799[_0x2ef138(0x1f7)]));if(_0x645671&&_0x645671['color'])_0x20be99=_0x645671[_0x2ef138(0x27e)];}const _0x8025f8=_0x144799['status']==='completed',_0x144f91=_0x8025f8?0x1:0.45;_0x12a205['className']=_0x2ef138(0x1eb)+(_0x8025f8?_0x2ef138(0x1b1):''),_0x12a205[_0x2ef138(0x1b4)][_0x2ef138(0x23e)]=hexToRgba(_0x20be99,_0x144f91),_0x12a205[_0x2ef138(0x1b4)][_0x2ef138(0x1af)]=_0x20be99;const _0x594713=_0x1a9ca4[_0x2ef138(0x19b)]/0x3c*GRID_H,_0x46ffd9=(_0x1a9ca4[_0x2ef138(0x21d)]-_0x1a9ca4['start'])/0x3c*GRID_H;_0x12a205[_0x2ef138(0x1b4)]['top']=_0x594713+'px',_0x12a205['style'][_0x2ef138(0x1a9)]=Math[_0x2ef138(0x274)](_0x46ffd9,0x14)+'px',_0x12a205[_0x2ef138(0x1b4)][_0x2ef138(0x1b6)]='calc('+_0x2fb0a4+'%\x20-\x204px)',_0x12a205['style']['left']=_0x2ef138(0x1bf)+_0x29fec6+_0x2ef138(0x276),_0x12a205[_0x2ef138(0x1b4)][_0x2ef138(0x290)]=0xa+_0x1a9ca4[_0x2ef138(0x202)];if(_0x2fb0a4<0x55)_0x12a205[_0x2ef138(0x270)][_0x2ef138(0x226)](_0x2ef138(0x28b));let _0x119b69='';if(_0x144799[_0x2ef138(0x1c0)])_0x119b69+=_0x2ef138(0x21f);if(_0x8025f8)_0x119b69+=_0x2ef138(0x1b0);_0x12a205['innerHTML']=_0x2ef138(0x1cd)+_0x144799[_0x2ef138(0x19b)]+'\x20-\x20'+_0x144799[_0x2ef138(0x21d)]+_0x2ef138(0x235)+_0x119b69+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x12a205[_0x2ef138(0x23b)]=_0x4f9e89=>{const _0x4d2362=_0x2ef138;_0x4f9e89[_0x4d2362(0x1d0)](),openDetails(_0x144799);},_0x1ab909[_0x2ef138(0x213)](_0x12a205);});}function openAnalytics(){const _0x1899ba=a3_0x1e0b54,_0xcb48e3=document[_0x1899ba(0x252)](_0x1899ba(0x1f8));setAnalyticsPeriod('week',_0xcb48e3),openSheet('analyticsSheet');}function a3_0x3d8e(_0x19fe13,_0x1d7dec){_0x19fe13=_0x19fe13-0x19b;const _0xfcd370=a3_0x1403();let _0xa1314c=_0xfcd370[_0x19fe13];return _0xa1314c;}function setAnalyticsPeriod(_0x3eaad8,_0x227f57){const _0x56b650=a3_0x1e0b54;currentAnPeriod=_0x3eaad8,document[_0x56b650(0x268)](_0x56b650(0x1f8))[_0x56b650(0x283)](_0x5be954=>_0x5be954['classList'][_0x56b650(0x291)](_0x56b650(0x1b9)));if(_0x227f57)_0x227f57[_0x56b650(0x270)][_0x56b650(0x226)](_0x56b650(0x1b9));const _0x378170=document[_0x56b650(0x1fc)]('anCustomDates');_0x378170['style'][_0x56b650(0x1d9)]=_0x3eaad8==='custom'?_0x56b650(0x251):_0x56b650(0x1bd);const _0x29c8b6=new Date();let _0x14389=new Date(),_0x5477a4=new Date();if(_0x3eaad8===_0x56b650(0x21b))_0x14389=getStartOfWeek(_0x29c8b6),_0x5477a4=new Date(_0x14389),_0x5477a4[_0x56b650(0x1e9)](_0x5477a4[_0x56b650(0x214)]()+0x6);else{if(_0x3eaad8==='month')_0x14389=new Date(_0x29c8b6[_0x56b650(0x1c3)](),_0x29c8b6[_0x56b650(0x215)](),0x1),_0x5477a4=new Date(_0x29c8b6['getFullYear'](),_0x29c8b6[_0x56b650(0x215)]()+0x1,0x0);else{!document[_0x56b650(0x1fc)](_0x56b650(0x25c))[_0x56b650(0x222)]&&(document[_0x56b650(0x1fc)](_0x56b650(0x25c))[_0x56b650(0x222)]=getLocalDateStr(_0x29c8b6),document[_0x56b650(0x1fc)]('anEnd')[_0x56b650(0x222)]=getLocalDateStr(_0x29c8b6));refreshAnalytics();return;}}document[_0x56b650(0x1fc)](_0x56b650(0x25c))['value']=getLocalDateStr(_0x14389),document[_0x56b650(0x1fc)](_0x56b650(0x1cb))[_0x56b650(0x222)]=getLocalDateStr(_0x5477a4),refreshAnalytics();}function refreshAnalytics(){const _0x5e1969=a3_0x1e0b54,_0x32ee9d=document[_0x5e1969(0x1fc)](_0x5e1969(0x25c))[_0x5e1969(0x222)],_0x5ea895=document['getElementById'](_0x5e1969(0x1cb))[_0x5e1969(0x222)];if(!_0x32ee9d||!_0x5ea895)return;const _0x116ea2=sessions[_0x5e1969(0x247)](_0x34e235=>_0x34e235['dateStr']>=_0x32ee9d&&_0x34e235[_0x5e1969(0x19c)]<=_0x5ea895&&_0x34e235['status']!==_0x5e1969(0x285)),_0x5027fa=_0x116ea2[_0x5e1969(0x1ea)],_0x86fdbf=_0x116ea2['filter'](_0x57fd31=>_0x57fd31['status']===_0x5e1969(0x260))[_0x5e1969(0x1ea)],_0x8ecc2f=_0x5027fa>0x0?Math['round'](_0x86fdbf/_0x5027fa*0x64):0x0;document[_0x5e1969(0x1fc)](_0x5e1969(0x1ce))[_0x5e1969(0x26f)]=_0x8ecc2f+'%',document[_0x5e1969(0x1fc)]('anTotalStats')[_0x5e1969(0x26f)]=_0x86fdbf+_0x5e1969(0x239)+_0x5027fa+_0x5e1969(0x25e);const _0x358a93=document[_0x5e1969(0x1fc)]('anDonutCircle'),_0x510fd7=0x2*Math['PI']*0x23,_0x1c77a7=_0x510fd7-_0x8ecc2f/0x64*_0x510fd7;_0x358a93[_0x5e1969(0x1b4)][_0x5e1969(0x243)]=_0x1c77a7;const _0x1dda5b={};_0x116ea2['forEach'](_0x228f91=>{const _0x1c622b=_0x5e1969,_0x5ae52d=_0x228f91[_0x1c622b(0x1e6)]||'Unknown';if(!_0x1dda5b[_0x5ae52d]){const _0x1a7c0b='#'+_0x5ae52d[_0x1c622b(0x216)]()[_0x1c622b(0x1b8)](0x0,0x6);_0x1dda5b[_0x5ae52d]={'total':0x0,'done':0x0,'color':_0x1a7c0b};}_0x1dda5b[_0x5ae52d]['total']++;if(_0x228f91[_0x1c622b(0x25a)]===_0x1c622b(0x260))_0x1dda5b[_0x5ae52d]['done']++;});const _0x14fdd4=document[_0x5e1969(0x1fc)](_0x5e1969(0x26e));_0x14fdd4[_0x5e1969(0x21c)]='';const _0x5da1ad=Object[_0x5e1969(0x28e)](_0x1dda5b)[_0x5e1969(0x1da)]((_0x57020d,_0xe1f6e5)=>_0xe1f6e5[0x1][_0x5e1969(0x275)]-_0x57020d[0x1][_0x5e1969(0x275)]);if(_0x5da1ad['length']===0x0){_0x14fdd4[_0x5e1969(0x21c)]=_0x5e1969(0x23f);return;}_0x5da1ad['forEach'](([_0x16cc86,_0x2b8ac4])=>{const _0x581b5c=_0x5e1969,_0x5254ec=Math[_0x581b5c(0x1d1)](_0x2b8ac4[_0x581b5c(0x20b)]/_0x2b8ac4[_0x581b5c(0x275)]*0x64),_0x8f68c1=document[_0x581b5c(0x265)](_0x581b5c(0x223));_0x8f68c1[_0x581b5c(0x1e3)]=_0x581b5c(0x1e5),_0x8f68c1[_0x581b5c(0x1b4)][_0x581b5c(0x1af)]=_0x2b8ac4[_0x581b5c(0x27e)],_0x8f68c1[_0x581b5c(0x21c)]=_0x581b5c(0x288)+_0x16cc86['substr'](0x0,0x5)+_0x581b5c(0x253)+_0x2b8ac4[_0x581b5c(0x20b)]+_0x581b5c(0x19d)+_0x2b8ac4['total']+_0x581b5c(0x22e)+_0x5254ec+_0x581b5c(0x19e),_0x14fdd4['appendChild'](_0x8f68c1);});}function openDetails(_0x3320cf){const _0x191980=a3_0x1e0b54;currentSession=_0x3320cf;const _0x16f10e=new Date(_0x3320cf[_0x191980(0x19c)]),_0x5c239b=_0x16f10e[_0x191980(0x219)](_0x191980(0x242),{'weekday':_0x191980(0x1aa),'day':'numeric','month':_0x191980(0x1aa)});document[_0x191980(0x1fc)](_0x191980(0x20d))[_0x191980(0x26f)]=_0x5c239b[_0x191980(0x1a3)](0x0)[_0x191980(0x246)]()+_0x5c239b[_0x191980(0x1ba)](0x1),document[_0x191980(0x1fc)](_0x191980(0x1bb))[_0x191980(0x26f)]=_0x3320cf[_0x191980(0x19b)]+_0x191980(0x1c7)+_0x3320cf[_0x191980(0x21d)],document[_0x191980(0x1fc)](_0x191980(0x26a))[_0x191980(0x26f)]=_0x3320cf[_0x191980(0x25b)]||_0x191980(0x220);const _0x4941dc=document[_0x191980(0x1fc)]('detStatus'),_0x514d83=document[_0x191980(0x1fc)]('cancelContainer'),_0x192e77=_0x514d83[_0x191980(0x252)]('.btn-cancel'),_0x3e2cf4=_0x514d83[_0x191980(0x252)]('.btn-reschedule'),_0x2d3e22=document['getElementById'](_0x191980(0x231));if(_0x3320cf[_0x191980(0x25a)]===_0x191980(0x260))_0x4941dc[_0x191980(0x26f)]='‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞',_0x4941dc['style']['color']='var(--acc-green)',_0x514d83[_0x191980(0x1b4)][_0x191980(0x1d9)]='none';else{_0x4941dc[_0x191980(0x26f)]=_0x191980(0x205),_0x4941dc[_0x191980(0x1b4)][_0x191980(0x27e)]=_0x191980(0x234),_0x514d83[_0x191980(0x1b4)][_0x191980(0x1d9)]=_0x191980(0x241);const _0x327643=new Date(_0x3320cf[_0x191980(0x19c)]+'T'+_0x3320cf[_0x191980(0x19b)]),_0x4289eb=new Date(),_0x5ca639=(_0x327643-_0x4289eb)/(0x3e8*0x3c*0x3c),_0x33b487=coachProfiles[_0x3320cf[_0x191980(0x1e6)]]&&coachProfiles[_0x3320cf[_0x191980(0x1e6)]]['cancel_window']?parseInt(coachProfiles[_0x3320cf['coachId']][_0x191980(0x1f5)]):0x18;if(_0x33b487===0x0||_0x5ca639>=_0x33b487)_0x192e77['style'][_0x191980(0x1d9)]=_0x191980(0x241),_0x3e2cf4['style']['display']=_0x191980(0x241),_0x2d3e22[_0x191980(0x1b4)]['display']=_0x191980(0x1bd);else{_0x192e77[_0x191980(0x1b4)][_0x191980(0x1d9)]=_0x191980(0x1bd),_0x3e2cf4[_0x191980(0x1b4)][_0x191980(0x1d9)]=_0x191980(0x1bd),_0x2d3e22[_0x191980(0x1b4)]['display']=_0x191980(0x241);let _0xf866d9=_0x33b487===0x0?_0x191980(0x23a):'–∑–∞\x20'+_0x33b487+_0x191980(0x232);_0x2d3e22[_0x191980(0x26f)]=_0x191980(0x1be)+_0xf866d9+_0x191980(0x237);}}document[_0x191980(0x1fc)](_0x191980(0x23d))['classList'][_0x191980(0x226)]('active'),document[_0x191980(0x1fc)](_0x191980(0x1ee))[_0x191980(0x270)][_0x191980(0x226)](_0x191980(0x233));}function closeAllSheets(){const _0x1bd8b2=a3_0x1e0b54;document[_0x1bd8b2(0x1fc)](_0x1bd8b2(0x23d))[_0x1bd8b2(0x270)][_0x1bd8b2(0x291)](_0x1bd8b2(0x1b9)),document['querySelectorAll'](_0x1bd8b2(0x19f))[_0x1bd8b2(0x283)](_0x2fd10b=>_0x2fd10b[_0x1bd8b2(0x270)][_0x1bd8b2(0x291)](_0x1bd8b2(0x233)));}function openSheet(_0x213655){const _0x3b24af=a3_0x1e0b54;document[_0x3b24af(0x1fc)]('overlay')['classList'][_0x3b24af(0x226)]('active'),document['getElementById'](_0x213655)[_0x3b24af(0x270)][_0x3b24af(0x226)](_0x3b24af(0x233));}function getLocalDateStr(_0x500231){const _0x49f707=a3_0x1e0b54,_0x676c1=_0x500231['getFullYear'](),_0x40664a=String(_0x500231['getMonth']()+0x1)[_0x49f707(0x258)](0x2,'0'),_0x985649=String(_0x500231[_0x49f707(0x214)]())['padStart'](0x2,'0');return _0x676c1+'-'+_0x40664a+'-'+_0x985649;}function getStartOfWeek(_0x35f745){const _0x1dd20c=a3_0x1e0b54,_0x441682=new Date(_0x35f745),_0x37f90f=_0x441682[_0x1dd20c(0x1a2)](),_0x58d54e=_0x441682[_0x1dd20c(0x214)]()-_0x37f90f+(_0x37f90f===0x0?-0x6:0x1);return _0x441682[_0x1dd20c(0x1e9)](_0x58d54e),_0x441682[_0x1dd20c(0x1e8)](0x0,0x0,0x0,0x0),_0x441682;}function scrollToToday(){const _0x27ce5b=getLocalDateStr(new Date());setTimeout(()=>{const _0x58ab63=a3_0x3d8e,_0x528e42=document[_0x58ab63(0x252)](_0x58ab63(0x1f3)+_0x27ce5b+'\x22]');if(_0x528e42){const _0x17f123=document['getElementById'](_0x58ab63(0x244)),_0x1e3b20=_0x528e42[_0x58ab63(0x1c4)]-_0x17f123[_0x58ab63(0x27d)]/0x2+_0x528e42['offsetWidth']/0x2;_0x17f123[_0x58ab63(0x266)]({'left':_0x1e3b20,'behavior':_0x58ab63(0x248)}),_0x17f123[_0x58ab63(0x224)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x52229a=a3_0x1e0b54,_0x21a4ce=new Date(),_0x47243f=document[_0x52229a(0x1fc)](_0x52229a(0x201)),_0x3eae07=document[_0x52229a(0x1fc)]('timeLineBadge'),_0x449484=(_0x21a4ce[_0x52229a(0x289)]()*0x3c+_0x21a4ce[_0x52229a(0x1de)]())/0x3c*GRID_H;_0x47243f[_0x52229a(0x1b4)][_0x52229a(0x20a)]=_0x449484+'px',_0x47243f[_0x52229a(0x1b4)][_0x52229a(0x1d9)]=_0x52229a(0x241),_0x3eae07['style'][_0x52229a(0x20a)]=_0x449484+'px',_0x3eae07[_0x52229a(0x1b4)][_0x52229a(0x1d9)]='block',_0x3eae07[_0x52229a(0x26f)]=String(_0x21a4ce[_0x52229a(0x289)]())[_0x52229a(0x258)](0x2,'0')+':'+String(_0x21a4ce[_0x52229a(0x1de)]())['padStart'](0x2,'0');}function onScroll(){const _0x5bd073=a3_0x1e0b54,_0x544054=document['getElementById'](_0x5bd073(0x244)),_0x543663=document[_0x5bd073(0x268)](_0x5bd073(0x1dc));for(let _0x4df691 of _0x543663)if(_0x4df691['offsetLeft']>=_0x544054[_0x5bd073(0x1f6)]){const _0x355781=new Date(_0x4df691[_0x5bd073(0x229)](_0x5bd073(0x287)));document['getElementById']('headerMonth')[_0x5bd073(0x26f)]=_0x355781[_0x5bd073(0x1c8)]('ru',{'month':_0x5bd073(0x1aa)})[_0x5bd073(0x246)]()+'\x20'+_0x355781['getFullYear']();break;}}function showToast(_0xe71d1a){const _0x45529b=a3_0x1e0b54,_0x3dec02=document[_0x45529b(0x1fc)](_0x45529b(0x1e7));_0x3dec02[_0x45529b(0x26f)]=_0xe71d1a,_0x3dec02[_0x45529b(0x270)][_0x45529b(0x226)](_0x45529b(0x277)),setTimeout(()=>_0x3dec02[_0x45529b(0x270)][_0x45529b(0x291)]('show'),0x7d0);}function handleInfiniteScroll(){const _0x70fdea=a3_0x1e0b54,_0x3db672=document[_0x70fdea(0x1fc)](_0x70fdea(0x244)),_0x3225ee=_0x3db672[_0x70fdea(0x1f6)],_0x813e1a=_0x3db672[_0x70fdea(0x282)],_0x19980e=_0x3db672['clientWidth'];if(_0x813e1a-(_0x3225ee+_0x19980e)<0x12c){const _0x28a258=endOffset;endOffset+=0xe,renderDayRange(_0x28a258+0x1,endOffset),reRenderBlocks();}if(_0x3225ee<0x12c){const _0x5eda39=startOffset;startOffset-=0xe,prependDays(startOffset,_0x5eda39-0x1),_0x3db672[_0x70fdea(0x1f6)]+=0xe*0x41,reRenderBlocks();}}function a3_0x1403(){const _0x309e25=['completed','timeLineBadge','setMonth','#0a84ff','router.html','createElement','scrollTo','172308zDPfBu','querySelectorAll','ready','detNote','data','saveLocally','</div><div\x20class=\x22rs-day-num\x22>','analyticsList','textContent','classList','day-column\x20','now','isArray','max','total','%\x20+\x202px)','show','addEventListener','day-col-header\x20','href','rgba(','pattern','clientWidth','color','startsWith','<div\x20class=\x22dch-day\x22>','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','scrollWidth','forEach','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','cancelled','customConfirm','data-date','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','getHours','button','mini','planned','coach_profiles','entries','ranges','zIndex','remove','start','dateStr','</span>\x20/\x20','%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.sheet','uc_client_settings','onClick','getDay','charAt','setItem','rsDatesTrack','1756136iFEKZT','POST','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','height','long','421353AUwoEq','applyData','16jWJeVk','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','borderLeftColor','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','\x20status-completed','v9.5-CLIENT-ANALYTICS','getItem','style','loadLocal','width','rsSlotsGrid','substr','active','slice','detTime','createDocumentFragment','none','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','calc(','seriesId','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','today','getFullYear','offsetLeft',':00</span>','reschedule','\x20-\x20','toLocaleString','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','getTime','anEnd','split','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','anPercent','setHeaderColor','stopPropagation','round','day-off-overlay\x20stripe-bg','push','#ff453a','keys','offClick','initDataUnsafe','1643845iYflmH','display','sort','Telegram','.day-col-header','error','getMinutes','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','substring','backgroundPosition','sid','className','disableVerticalSwipes','client-stat-card','coachId','toast','setHours','setDate','length','event-card','log','search','detailsSheet','ccTitle','</div>','map','client_load','.day-col-header[data-date=\x22','6jPKrtl','cancel_window','scrollLeft','clientId','.period-switch\x20.p-btn','findIndex','settings','scroll','getElementById','visible','test','<div\x20class=\x22rs-day-name\x22>','exceptions','globalTimeLine','colIndex','syncLoad','.day-column','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','then','.rs-date-chip','uc_client_sessions','min','top','done','floor','detDate','json','uc_client_list','230730YysQqf','px\x20-','stringify','appendChild','getDate','getMonth','toString','calendar','(((.+)+)+)+$','toLocaleDateString','</div><div\x20class=\x22dch-num\x22>','week','innerHTML','end','join','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','insertBefore','value','div','scrollTop','1744070FBlvNi','add','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','parse','getAttribute','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','clients','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','data-day-idx','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','#050505','<span>','cancelHint','\x20—á.','open','var(--acc-blue)','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','fontWeight','\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞','129465zipiQe','\x20–∏–∑\x20','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','onclick','timeColumn','overlay','backgroundColor','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','apply','block','ru-RU','strokeDashoffset','matrixViewport','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','toUpperCase','filter','auto','96LWonqd','blocked-slot\x20stripe-bg','get_slots','rs-time-btn','setBackgroundColor','WebApp','user','find','flex','querySelector','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','BackButton','initData','setAttribute','T00:00:00','padStart','600','status','note','anStart','ccText','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','px\x200px'];a3_0x1403=function(){return _0x309e25;};return a3_0x1403();}function prependDays(_0x342cce,_0x3ae75c){const _0x4f18bb=a3_0x1e0b54,_0x584c2b=document[_0x4f18bb(0x1fc)]('daysHeaderTrack'),_0x222124=document[_0x4f18bb(0x1fc)]('gridColumns'),_0x133bee=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x4ecf81=new Date();_0x4ecf81[_0x4f18bb(0x1e8)](0x0,0x0,0x0,0x0);const _0x47dd46=getLocalDateStr(new Date()),_0x5e2477=document['createDocumentFragment'](),_0xc525a4=document[_0x4f18bb(0x1bc)]();for(let _0x22719a=_0x342cce;_0x22719a<=_0x3ae75c;_0x22719a++){const _0x2babd9=new Date(_0x4ecf81);_0x2babd9[_0x4f18bb(0x1e9)](_0x2babd9[_0x4f18bb(0x214)]()+_0x22719a);const _0xd077dc=getLocalDateStr(_0x2babd9);let _0x93b83d=_0x2babd9[_0x4f18bb(0x1a2)]()-0x1;if(_0x93b83d===-0x1)_0x93b83d=0x6;const _0x4656f4=_0xd077dc===_0x47dd46,_0x5adcd3=document[_0x4f18bb(0x265)]('div');_0x5adcd3[_0x4f18bb(0x1e3)]=_0x4f18bb(0x279)+(_0x4656f4?_0x4f18bb(0x1c2):''),_0x5adcd3['setAttribute']('data-date',_0xd077dc),_0x5adcd3[_0x4f18bb(0x21c)]=_0x4f18bb(0x280)+_0x133bee[_0x93b83d]+_0x4f18bb(0x21a)+_0x2babd9[_0x4f18bb(0x214)]()+_0x4f18bb(0x1f0),_0x5e2477[_0x4f18bb(0x213)](_0x5adcd3);const _0x22e0f0=document[_0x4f18bb(0x265)](_0x4f18bb(0x223));_0x22e0f0[_0x4f18bb(0x1e3)]=_0x4f18bb(0x271)+(_0x4656f4?'today':''),_0x22e0f0['setAttribute']('data-date',_0xd077dc),_0x22e0f0[_0x4f18bb(0x256)](_0x4f18bb(0x22d),_0x93b83d),_0xc525a4[_0x4f18bb(0x213)](_0x22e0f0);}_0x584c2b[_0x4f18bb(0x221)](_0x5e2477,_0x584c2b['firstChild']),_0x222124[_0x4f18bb(0x221)](_0xc525a4,_0x222124[_0x4f18bb(0x252)]('.day-column'));}function hexToRgba(_0x58963f,_0x53b4ce){const _0x316176=a3_0x1e0b54;let _0x34141f;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x316176(0x1fe)](_0x58963f))return _0x34141f=_0x58963f[_0x316176(0x1e0)](0x1)[_0x316176(0x1cc)](''),_0x34141f[_0x316176(0x1ea)]==0x3&&(_0x34141f=[_0x34141f[0x0],_0x34141f[0x0],_0x34141f[0x1],_0x34141f[0x1],_0x34141f[0x2],_0x34141f[0x2]]),_0x34141f='0x'+_0x34141f[_0x316176(0x21e)](''),_0x316176(0x27b)+[_0x34141f>>0x10&0xff,_0x34141f>>0x8&0xff,_0x34141f&0xff][_0x316176(0x21e)](',')+','+_0x53b4ce+')';return'rgba(10,\x20132,\x20255,\x20'+_0x53b4ce+')';}let confirmResolver=null;function showCustomConfirm(_0x23713a,_0x56f65e,_0x446708=!![]){const _0x5ee5ab=a3_0x1e0b54;document[_0x5ee5ab(0x1fc)](_0x5ee5ab(0x1ef))['textContent']=_0x23713a,document[_0x5ee5ab(0x1fc)](_0x5ee5ab(0x25d))[_0x5ee5ab(0x26f)]=_0x56f65e;const _0x5c46ea=document[_0x5ee5ab(0x1fc)]('ccYesBtn');return _0x446708?(_0x5c46ea[_0x5ee5ab(0x1b4)][_0x5ee5ab(0x27e)]=_0x5ee5ab(0x1d4),_0x5c46ea[_0x5ee5ab(0x1b4)][_0x5ee5ab(0x236)]='600'):(_0x5c46ea['style'][_0x5ee5ab(0x27e)]='#0a84ff',_0x5c46ea[_0x5ee5ab(0x1b4)][_0x5ee5ab(0x236)]=_0x5ee5ab(0x259)),new Promise(_0x52d329=>{const _0x488223=_0x5ee5ab;confirmResolver=_0x52d329,document[_0x488223(0x1fc)](_0x488223(0x286))['classList'][_0x488223(0x226)](_0x488223(0x1fd));});}function resolveCustomConfirm(_0x2750d9){const _0x3c22ee=a3_0x1e0b54;document['getElementById'](_0x3c22ee(0x286))[_0x3c22ee(0x270)][_0x3c22ee(0x291)](_0x3c22ee(0x1fd));if(confirmResolver)confirmResolver(_0x2750d9);}async function tryCancelCurrentSession(){const _0x1a18da=a3_0x1e0b54;if(!currentSession)return;const _0x28eb03=await showCustomConfirm(_0x1a18da(0x284),'–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?',!![]);if(!_0x28eb03)return;const _0x117e3b=currentSession;closeAllSheets(),sessions=sessions[_0x1a18da(0x247)](_0x53e6d7=>_0x53e6d7['id']!==_0x117e3b['id']),reRenderBlocks(),showToast('–û—Ç–º–µ–Ω–µ–Ω–æ'),lastUserActionTime=Date[_0x1a18da(0x272)]();try{const _0x282142=window[_0x1a18da(0x1db)]?.[_0x1a18da(0x24e)],_0x4b56c4=await fetch(API_URL,{'method':_0x1a18da(0x1a7),'body':JSON[_0x1a18da(0x212)]({'action':'client_cancel','init_data':_0x282142?.[_0x1a18da(0x255)]||'','coachId':_0x117e3b[_0x1a18da(0x1e6)],'dateStr':_0x117e3b[_0x1a18da(0x19c)],'sessionId':_0x117e3b['id']})});if(_0x4b56c4['ok'])DataManager['saveLocally']();}catch(_0x14580d){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x2924a2=a3_0x1e0b54;if(!currentSession)return;document['getElementById'](_0x2924a2(0x1ee))['classList'][_0x2924a2(0x291)](_0x2924a2(0x233)),document[_0x2924a2(0x1fc)]('rescheduleSheet')[_0x2924a2(0x270)][_0x2924a2(0x226)]('open');const _0x5d116d=document[_0x2924a2(0x1fc)](_0x2924a2(0x1a5)),_0x4a3734=document['getElementById'](_0x2924a2(0x1b7));_0x5d116d[_0x2924a2(0x21c)]='',_0x4a3734[_0x2924a2(0x21c)]=_0x2924a2(0x281);const [_0x471a2e,_0x43d676]=currentSession['start'][_0x2924a2(0x1cc)](':')['map'](Number),[_0x5450cf,_0x46c12e]=currentSession['end'][_0x2924a2(0x1cc)](':')[_0x2924a2(0x1f1)](Number),_0x1a44b8=_0x5450cf*0x3c+_0x46c12e-(_0x471a2e*0x3c+_0x43d676);try{const _0x50785d=window[_0x2924a2(0x1db)]?.[_0x2924a2(0x24e)],_0x5363a1=await fetch(API_URL,{'method':'POST','body':JSON[_0x2924a2(0x212)]({'action':_0x2924a2(0x24b),'coachId':currentSession[_0x2924a2(0x1e6)],'duration':_0x1a44b8,'init_data':_0x50785d?.[_0x2924a2(0x255)]||'','excludeSessionId':currentSession['id']})}),_0x2a1f70=await _0x5363a1[_0x2924a2(0x20e)]();_0x2a1f70['ok']&&_0x2a1f70[_0x2924a2(0x26b)]?(availableSlotsCache=_0x2a1f70[_0x2924a2(0x26b)],renderRescheduleDates()):_0x4a3734['innerHTML']=_0x2924a2(0x22c);}catch(_0x4c8e1e){_0x4a3734['innerHTML']=_0x2924a2(0x1ae);}}function renderRescheduleDates(){const _0x276e62=a3_0x1e0b54,_0x1a3e3d=document['getElementById'](_0x276e62(0x1a5));_0x1a3e3d['innerHTML']='';const _0x4d9398=Object['keys'](availableSlotsCache)[_0x276e62(0x1da)](),_0x528113=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x4d9398[_0x276e62(0x1ea)]===0x0){document[_0x276e62(0x1fc)](_0x276e62(0x1b7))['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x4d9398[_0x276e62(0x283)]((_0x14db9e,_0x4fb568)=>{const _0x1ae7a4=_0x276e62,_0xa2b36d=new Date(_0x14db9e),_0x1a9696=_0x528113[_0xa2b36d[_0x1ae7a4(0x1a2)]()],_0x4100d2=_0xa2b36d[_0x1ae7a4(0x214)](),_0x28164e=document[_0x1ae7a4(0x265)](_0x1ae7a4(0x223));_0x28164e[_0x1ae7a4(0x1e3)]='rs-date-chip';if(_0x4fb568===0x0)_0x28164e[_0x1ae7a4(0x270)][_0x1ae7a4(0x226)](_0x1ae7a4(0x1b9));_0x28164e['innerHTML']=_0x1ae7a4(0x1ff)+_0x1a9696+_0x1ae7a4(0x26d)+_0x4100d2+_0x1ae7a4(0x1f0),_0x28164e[_0x1ae7a4(0x23b)]=()=>selectRsDate(_0x14db9e,_0x28164e),_0x1a3e3d[_0x1ae7a4(0x213)](_0x28164e);}),selectRsDate(_0x4d9398[0x0],_0x1a3e3d['firstChild']);}function selectRsDate(_0xb0ec06,_0x2ca55f){const _0x201cd4=a3_0x1e0b54;selectedRsDate=_0xb0ec06,document['querySelectorAll'](_0x201cd4(0x207))[_0x201cd4(0x283)](_0x29c34d=>_0x29c34d[_0x201cd4(0x270)][_0x201cd4(0x291)](_0x201cd4(0x1b9)));if(_0x2ca55f)_0x2ca55f[_0x201cd4(0x270)][_0x201cd4(0x226)](_0x201cd4(0x1b9));const _0x17f3a9=document['getElementById']('rsSlotsGrid');_0x17f3a9[_0x201cd4(0x21c)]='';const _0x5cf91d=availableSlotsCache[_0xb0ec06]||[];if(_0x5cf91d['length']===0x0){_0x17f3a9[_0x201cd4(0x21c)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x5cf91d[_0x201cd4(0x283)](_0x4e39f5=>{const _0x56c5db=_0x201cd4,_0x5b9e76=document[_0x56c5db(0x265)](_0x56c5db(0x28a));_0x5b9e76[_0x56c5db(0x1e3)]=_0x56c5db(0x24c),_0x5b9e76[_0x56c5db(0x26f)]=_0x4e39f5,_0x5b9e76['onclick']=()=>confirmReschedule(_0x4e39f5),_0x17f3a9[_0x56c5db(0x213)](_0x5b9e76);});}async function confirmReschedule(_0x2fc8dc){const _0x528eff=a3_0x1e0b54,_0x557d37=new Date(selectedRsDate),_0x267a19=_0x557d37[_0x528eff(0x219)]('ru-RU',{'day':'numeric','month':_0x528eff(0x1aa)}),_0x56049e=await showCustomConfirm(_0x528eff(0x245),_0x528eff(0x1c1)+_0x267a19+'\x20–≤\x20'+_0x2fc8dc+'?',![]);if(!_0x56049e)return;closeAllSheets(),showToast(_0x528eff(0x1a8)),lastUserActionTime=Date['now']();const _0x55edc1=currentSession[_0x528eff(0x19c)],_0x1efe14=currentSession['id'],[_0x1ca742,_0xd8251b]=currentSession[_0x528eff(0x19b)][_0x528eff(0x1cc)](':')[_0x528eff(0x1f1)](Number),[_0x5928ba,_0x13806e]=currentSession['end'][_0x528eff(0x1cc)](':')[_0x528eff(0x1f1)](Number),_0x43991f=_0x5928ba*0x3c+_0x13806e-(_0x1ca742*0x3c+_0xd8251b),[_0x1e2511,_0x5dc232]=_0x2fc8dc[_0x528eff(0x1cc)](':')['map'](Number),_0x5b5fd4=_0x1e2511*0x3c+_0x5dc232+_0x43991f,_0x5934c6=Math[_0x528eff(0x20c)](_0x5b5fd4/0x3c),_0xdb7c00=_0x5b5fd4%0x3c,_0x8a3ee1=String(_0x5934c6)[_0x528eff(0x258)](0x2,'0')+':'+String(_0xdb7c00)[_0x528eff(0x258)](0x2,'0'),_0xbc1e8b=sessions[_0x528eff(0x1f9)](_0x5113d6=>_0x5113d6['id']===_0x1efe14);_0xbc1e8b!==-0x1&&(sessions[_0xbc1e8b][_0x528eff(0x19c)]=selectedRsDate,sessions[_0xbc1e8b][_0x528eff(0x19b)]=_0x2fc8dc,sessions[_0xbc1e8b][_0x528eff(0x21d)]=_0x8a3ee1,reRenderBlocks());try{const _0x35aa61=window[_0x528eff(0x1db)]?.[_0x528eff(0x24e)],_0x2a5421=await fetch(API_URL,{'method':_0x528eff(0x1a7),'body':JSON[_0x528eff(0x212)]({'action':_0x528eff(0x1c6),'init_data':_0x35aa61?.[_0x528eff(0x255)]||'','oldSessionId':_0x1efe14,'oldDate':_0x55edc1,'newDate':selectedRsDate,'newTime':_0x2fc8dc,'coachId':currentSession[_0x528eff(0x1e6)]})}),_0xbfb1e5=await _0x2a5421[_0x528eff(0x20e)]();!_0xbfb1e5['ok']?(showToast(_0x528eff(0x227)),DataManager[_0x528eff(0x203)]()):(showToast(_0x528eff(0x1df)),DataManager[_0x528eff(0x26c)]());}catch(_0x404db2){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}document[a3_0x1e0b54(0x278)]('DOMContentLoaded',init);