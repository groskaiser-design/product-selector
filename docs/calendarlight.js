const a3_0x5c8b5d=a3_0x4000;(function(_0x3543d5,_0x349777){const _0x27228f=a3_0x4000,_0x63efef=_0x3543d5();while(!![]){try{const _0x4ad821=-parseInt(_0x27228f(0x80))/0x1*(-parseInt(_0x27228f(0xda))/0x2)+-parseInt(_0x27228f(0x137))/0x3+-parseInt(_0x27228f(0xe1))/0x4+parseInt(_0x27228f(0xfb))/0x5*(parseInt(_0x27228f(0x14e))/0x6)+-parseInt(_0x27228f(0x141))/0x7*(-parseInt(_0x27228f(0xe8))/0x8)+-parseInt(_0x27228f(0x96))/0x9*(-parseInt(_0x27228f(0x134))/0xa)+-parseInt(_0x27228f(0xea))/0xb;if(_0x4ad821===_0x349777)break;else _0x63efef['push'](_0x63efef['shift']());}catch(_0x2aab1b){_0x63efef['push'](_0x63efef['shift']());}}}(a3_0x30b9,0xa73c9));const APP_VERSION=a3_0x5c8b5d(0xf4),API_URL=a3_0x5c8b5d(0xd1),GRID_H=0x3c,KEY_SESSIONS=a3_0x5c8b5d(0xfe),KEY_SETTINGS=a3_0x5c8b5d(0x127),KEY_CLIENTS=a3_0x5c8b5d(0x93);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x5c8b5d(0x147),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x3fce2f=a3_0x5c8b5d,_0x3fd8b4=(function(){let _0x4ff84b=!![];return function(_0x13d767,_0x3af958){const _0x20ebcf=_0x4ff84b?function(){const _0x4f4cad=a3_0x4000;if(_0x3af958){const _0x1de129=_0x3af958[_0x4f4cad(0x101)](_0x13d767,arguments);return _0x3af958=null,_0x1de129;}}:function(){};return _0x4ff84b=![],_0x20ebcf;};}()),_0x498b47=_0x3fd8b4(this,function(){const _0x33d594=a3_0x4000;return _0x498b47[_0x33d594(0xb0)]()['search']('(((.+)+)+)+$')[_0x33d594(0xb0)]()['constructor'](_0x498b47)[_0x33d594(0x8b)](_0x33d594(0x13d));});_0x498b47();try{const _0x2f342c=window[_0x3fce2f(0x148)]?.['WebApp'];if(!_0x2f342c)return;_0x2f342c['ready'](),_0x2f342c['expand']();try{_0x2f342c[_0x3fce2f(0x85)](_0x3fce2f(0xd4)),_0x2f342c[_0x3fce2f(0xef)]&&_0x2f342c['setBackgroundColor']('#050505');}catch(_0x96a767){console['log'](_0x3fce2f(0xcb),_0x96a767);}try{_0x2f342c[_0x3fce2f(0xf3)]&&(_0x2f342c['BackButton'][_0x3fce2f(0xbf)](),_0x2f342c['BackButton']['offClick'](),_0x2f342c[_0x3fce2f(0xf3)]['onClick'](function(){const _0x51c521=_0x3fce2f;window[_0x51c521(0xe5)][_0x51c521(0xae)]=_0x51c521(0x79);}));}catch(_0x2cabfa){console['log']('Error\x20setting\x20back\x20button:',_0x2cabfa);}try{if(_0x2f342c[_0x3fce2f(0xac)])_0x2f342c['disableVerticalSwipes']();}catch(_0x28dd20){}}catch(_0x3c7d76){console['error'](_0x3fce2f(0x110),_0x3c7d76);}}());function isAdmin(){const _0x3e7f16=a3_0x5c8b5d;try{const _0x36d788=Number(window['Telegram']?.[_0x3e7f16(0xe3)]?.['initDataUnsafe']?.[_0x3e7f16(0xc7)]?.['id']);return _0x36d788===0xbaf7174;}catch(_0x1767db){return![];}}const DataManager={'saveLocally'(){const _0x1e933d=a3_0x5c8b5d;try{localStorage[_0x1e933d(0x14d)](KEY_SESSIONS,JSON[_0x1e933d(0x104)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON[_0x1e933d(0x104)](clients)),localStorage[_0x1e933d(0x14d)](KEY_SETTINGS,JSON[_0x1e933d(0x104)]({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x793c34){}},'loadLocal'(){const _0x346eec=a3_0x5c8b5d;try{const _0x12a7a9=localStorage[_0x346eec(0x92)](KEY_SESSIONS);if(_0x12a7a9)sessions=JSON[_0x346eec(0x73)](_0x12a7a9);const _0x105275=localStorage[_0x346eec(0x92)](KEY_CLIENTS);if(_0x105275)clients=JSON[_0x346eec(0x73)](_0x105275);const _0x456a11=localStorage[_0x346eec(0x92)](KEY_SETTINGS);if(_0x456a11){const _0x572a43=JSON['parse'](_0x456a11);if(_0x572a43['pattern'])availabilityPattern=_0x572a43['pattern'];if(_0x572a43[_0x346eec(0x8c)])specialRanges=_0x572a43[_0x346eec(0x8c)];if(_0x572a43[_0x346eec(0x108)])dateExceptions=_0x572a43[_0x346eec(0x108)];}}catch(_0x584643){}},async 'syncLoad'(){const _0x1a965d=a3_0x5c8b5d,_0x1c5c76=new Date(),_0x7a6fc9=_0x1c5c76[_0x1a965d(0x86)]()+'-'+String(_0x1c5c76[_0x1a965d(0xd2)]()+0x1)['padStart'](0x2,'0'),_0x295679=new Date(_0x1c5c76);_0x295679[_0x1a965d(0xdb)](_0x1c5c76[_0x1a965d(0xd2)]()+0x1);const _0x25d222=_0x295679[_0x1a965d(0x86)]()+'-'+String(_0x295679[_0x1a965d(0xd2)]()+0x1)[_0x1a965d(0x144)](0x2,'0'),_0x3a17de=Date[_0x1a965d(0xa7)]();try{const _0x3e1e33=window[_0x1a965d(0x148)]?.[_0x1a965d(0xe3)],_0x33c351=_0x3e1e33?.['initData']||'',[_0x729c6c,_0xafad9c]=await Promise['all']([fetch(API_URL,{'method':_0x1a965d(0x157),'body':JSON[_0x1a965d(0x104)]({'action':_0x1a965d(0x88),'init_data':_0x33c351,'month_str':_0x7a6fc9})})[_0x1a965d(0x125)](_0x3b5490=>_0x3b5490[_0x1a965d(0xa0)]()),fetch(API_URL,{'method':_0x1a965d(0x157),'body':JSON[_0x1a965d(0x104)]({'action':'client_load','init_data':_0x33c351,'month_str':_0x25d222})})[_0x1a965d(0x125)](_0x1db855=>_0x1db855[_0x1a965d(0xa0)]())]);if(lastUserActionTime>_0x3a17de){console[_0x1a965d(0x12b)]('Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response');return;}if(_0x729c6c['ok'])this[_0x1a965d(0x9e)](_0x729c6c['data'],_0x7a6fc9);if(_0xafad9c['ok'])this[_0x1a965d(0x9e)](_0xafad9c[_0x1a965d(0x9c)],_0x25d222);this[_0x1a965d(0xa8)]();}catch(_0x53736f){}},'applyData'(_0x4ee481,_0x42b852){const _0xfee128=a3_0x5c8b5d;if(!_0x4ee481)return;if(_0x4ee481['settings']){if(_0x4ee481[_0xfee128(0xf0)][_0xfee128(0x145)])availabilityPattern=_0x4ee481[_0xfee128(0xf0)]['pattern'];if(_0x4ee481[_0xfee128(0xf0)]['ranges'])specialRanges=_0x4ee481[_0xfee128(0xf0)][_0xfee128(0x8c)];if(_0x4ee481[_0xfee128(0xf0)][_0xfee128(0x108)])dateExceptions=_0x4ee481['settings']['exceptions'];}if(_0x4ee481[_0xfee128(0xa4)]&&Array['isArray'](_0x4ee481[_0xfee128(0xa4)]))clients=_0x4ee481['clients'];_0x4ee481[_0xfee128(0x89)]&&(coachProfiles={...coachProfiles,..._0x4ee481[_0xfee128(0x89)]}),_0x4ee481['calendar']&&(sessions=sessions['filter'](_0x9b3771=>!_0x9b3771[_0xfee128(0xca)]['startsWith'](_0x42b852)),Object[_0xfee128(0x150)](_0x4ee481[_0xfee128(0xd0)])[_0xfee128(0xee)](_0x3694e6=>{const _0x56d06c=_0xfee128,_0x3efce0=_0x4ee481['calendar'][_0x3694e6];_0x3efce0[_0x56d06c(0xee)](_0x54c4c8=>{const _0x4448d6=_0x56d06c;sessions[_0x4448d6(0x11c)]({'id':_0x54c4c8['i'],'clientId':_0x54c4c8['c'],'coachId':_0x54c4c8['cid'],'dateStr':_0x42b852+'-'+_0x3694e6[_0x4448d6(0x144)](0x2,'0'),'start':_0x54c4c8['s'],'end':_0x54c4c8['e'],'note':_0x54c4c8['n']||'','status':_0x54c4c8['st']||_0x4448d6(0xeb),'seriesId':_0x54c4c8[_0x4448d6(0x90)]});});})),reRenderBlocks();}};function init(){const _0x52c74b=a3_0x5c8b5d;DataManager[_0x52c74b(0xe2)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x52c74b(0x76))[_0x52c74b(0xbb)]('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager[_0x52c74b(0x122)]();}function renderTimeColumn(){const _0x55d5d8=a3_0x5c8b5d,_0x1f3af7=document[_0x55d5d8(0x87)](_0x55d5d8(0x15b)),_0x4f00fa=document[_0x55d5d8(0x87)](_0x55d5d8(0x74));_0x1f3af7['innerHTML']='',_0x1f3af7[_0x55d5d8(0x8e)](_0x4f00fa);for(let _0x31cd46=0x0;_0x31cd46<0x18;_0x31cd46++){const _0x177eb3=document[_0x55d5d8(0xa2)]('div');_0x177eb3['className']=_0x55d5d8(0x95);if(_0x31cd46>0x0)_0x177eb3[_0x55d5d8(0xd8)]=_0x55d5d8(0x159)+String(_0x31cd46)['padStart'](0x2,'0')+_0x55d5d8(0x8d);_0x1f3af7[_0x55d5d8(0x8e)](_0x177eb3);}}function renderDayRange(_0x39eb17,_0xc2f417){const _0x11fb2c=a3_0x5c8b5d,_0x547e6a=document[_0x11fb2c(0x87)](_0x11fb2c(0xa1)),_0x1aa72e=document[_0x11fb2c(0x87)](_0x11fb2c(0x107)),_0x385237=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x1adb4f=new Date();_0x1adb4f[_0x11fb2c(0xe9)](0x0,0x0,0x0,0x0);const _0x4e0927=getLocalDateStr(new Date());for(let _0x4b66f0=_0x39eb17;_0x4b66f0<=_0xc2f417;_0x4b66f0++){const _0x4f8174=new Date(_0x1adb4f);_0x4f8174['setDate'](_0x4f8174['getDate']()+_0x4b66f0);const _0xf10977=getLocalDateStr(_0x4f8174);let _0x2af448=_0x4f8174[_0x11fb2c(0xf7)]()-0x1;if(_0x2af448===-0x1)_0x2af448=0x6;const _0x566977=_0xf10977===_0x4e0927,_0x26cb29=document[_0x11fb2c(0xa2)](_0x11fb2c(0x71));_0x26cb29[_0x11fb2c(0x81)]=_0x11fb2c(0xdf)+(_0x566977?_0x11fb2c(0xd9):''),_0x26cb29[_0x11fb2c(0xf6)](_0x11fb2c(0xf1),_0xf10977),_0x26cb29['innerHTML']=_0x11fb2c(0x111)+_0x385237[_0x2af448]+_0x11fb2c(0x12c)+_0x4f8174[_0x11fb2c(0xc0)]()+_0x11fb2c(0x91),_0x547e6a[_0x11fb2c(0x8e)](_0x26cb29);const _0x228527=document[_0x11fb2c(0xa2)]('div');_0x228527[_0x11fb2c(0x81)]=_0x11fb2c(0x10b)+(_0x566977?_0x11fb2c(0xd9):''),_0x228527[_0x11fb2c(0xf6)](_0x11fb2c(0xf1),_0xf10977),_0x228527[_0x11fb2c(0xf6)](_0x11fb2c(0x9b),_0x2af448),_0x1aa72e['appendChild'](_0x228527);}}function reRenderBlocks(){const _0x7476cf=a3_0x5c8b5d;document['querySelectorAll']('.day-column')[_0x7476cf(0xee)](_0x5385b0=>{const _0x1f3da0=_0x7476cf;_0x5385b0[_0x1f3da0(0x9a)]('.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card')['forEach'](_0x3eefca=>_0x3eefca[_0x1f3da0(0x13e)]());const _0x2565f2=_0x5385b0[_0x1f3da0(0x14c)](_0x1f3da0(0xf1)),_0x4935d5=parseInt(_0x5385b0[_0x1f3da0(0x14c)](_0x1f3da0(0x9b))),_0xe81d09=Math[_0x1f3da0(0x82)](_0x5385b0['offsetLeft']);(availabilityPattern[_0x4935d5]||[])[_0x1f3da0(0xee)](_0x22048c=>{const _0x51c6ca=_0x1f3da0,_0x14d763=document[_0x51c6ca(0xa2)]('div');_0x14d763['className']=_0x51c6ca(0x75),_0x14d763['style']['top']=_0x22048c*GRID_H+'px',_0x14d763[_0x51c6ca(0x112)][_0x51c6ca(0x6f)]='-'+_0xe81d09+_0x51c6ca(0x121)+_0x22048c*GRID_H+'px',_0x5385b0[_0x51c6ca(0x8e)](_0x14d763);});if(specialRanges['length']>0x0){const _0x356734=new Date(_0x2565f2+_0x1f3da0(0x146))[_0x1f3da0(0x128)](),_0x4bab60=new Date(_0x2565f2+'T23:59:59')[_0x1f3da0(0x128)]();specialRanges['forEach'](_0x1f769c=>{const _0x1c95ac=_0x1f3da0,_0x51911e=new Date(_0x1f769c[_0x1c95ac(0x11d)])[_0x1c95ac(0x128)](),_0xafd4b1=new Date(_0x1f769c['end'])[_0x1c95ac(0x128)](),_0x445801=Math[_0x1c95ac(0xb6)](_0x356734,_0x51911e),_0x2da76d=Math[_0x1c95ac(0x14a)](_0x4bab60,_0xafd4b1);if(_0x445801<_0x2da76d){const _0x1b6449=(_0x445801-_0x356734)/0x36ee80*GRID_H,_0x5f5ab2=(_0x2da76d-_0x445801)/0x36ee80*GRID_H,_0x599213=document[_0x1c95ac(0xa2)](_0x1c95ac(0x71));_0x5f5ab2>=23.5*GRID_H?(_0x599213[_0x1c95ac(0x81)]='day-off-overlay\x20stripe-bg',_0x599213[_0x1c95ac(0x112)]['backgroundPosition']='-'+_0xe81d09+'px\x200px'):(_0x599213[_0x1c95ac(0x81)]=_0x1c95ac(0xbe),_0x599213['style'][_0x1c95ac(0xe6)]=_0x1b6449+'px',_0x599213[_0x1c95ac(0x112)][_0x1c95ac(0xd7)]=_0x5f5ab2+'px',_0x599213['style'][_0x1c95ac(0x6f)]='-'+_0xe81d09+_0x1c95ac(0x121)+_0x1b6449+'px'),_0x5385b0[_0x1c95ac(0x8e)](_0x599213);}});}renderEventsForColumn(_0x5385b0,_0x2565f2);});}function renderEventsForColumn(_0x437e7f,_0x110148){const _0x4dd608=a3_0x5c8b5d,_0x1d0e0f=sessions[_0x4dd608(0xf8)](_0x31dc2c=>_0x31dc2c[_0x4dd608(0xca)]===_0x110148),_0xa41d1a=_0x1d0e0f[_0x4dd608(0x123)](_0x1c976f=>{const _0x48cd5c=_0x4dd608,[_0x7d9d36,_0x564057]=_0x1c976f[_0x48cd5c(0x11d)][_0x48cd5c(0x133)](':')['map'](Number),[_0x31ab11,_0x42f68b]=_0x1c976f[_0x48cd5c(0x7d)][_0x48cd5c(0x133)](':')[_0x48cd5c(0x123)](Number);return{'data':_0x1c976f,'start':_0x7d9d36*0x3c+_0x564057,'end':_0x31ab11*0x3c+_0x42f68b,'colIndex':0x0};});_0xa41d1a[_0x4dd608(0x156)]((_0x30c855,_0x446740)=>_0x30c855['start']-_0x446740[_0x4dd608(0x11d)]||_0x446740['end']-_0x446740['start']-(_0x30c855[_0x4dd608(0x7d)]-_0x30c855[_0x4dd608(0x11d)]));const _0x2786ee=[];_0xa41d1a[_0x4dd608(0xee)](_0x5651e0=>{const _0x7b2aca=_0x4dd608;let _0x3863b2=![];for(let _0x487f68=0x0;_0x487f68<_0x2786ee['length'];_0x487f68++){const _0x471b44=_0x2786ee[_0x487f68];if(_0x5651e0[_0x7b2aca(0x11d)]>=_0x471b44[_0x471b44[_0x7b2aca(0x10c)]-0x1]['end']){_0x471b44['push'](_0x5651e0),_0x5651e0[_0x7b2aca(0x9f)]=_0x487f68,_0x3863b2=!![];break;}}!_0x3863b2&&(_0x2786ee['push']([_0x5651e0]),_0x5651e0[_0x7b2aca(0x9f)]=_0x2786ee[_0x7b2aca(0x10c)]-0x1);}),_0xa41d1a[_0x4dd608(0xee)](_0x3f6a1b=>{const _0xe78a0b=_0x4dd608;let _0x2302a8=0x0;_0xa41d1a[_0xe78a0b(0xee)](_0x54ae76=>{const _0x39b2ce=_0xe78a0b;if(Math[_0x39b2ce(0xb6)](_0x3f6a1b[_0x39b2ce(0x11d)],_0x54ae76[_0x39b2ce(0x11d)])<Math[_0x39b2ce(0x14a)](_0x3f6a1b[_0x39b2ce(0x7d)],_0x54ae76[_0x39b2ce(0x7d)])&&_0x54ae76[_0x39b2ce(0x9f)]>_0x2302a8)_0x2302a8=_0x54ae76[_0x39b2ce(0x9f)];});const _0x487a40=_0x2302a8+0x1,_0x1338f8=0x64/_0x487a40,_0x1a7ffc=_0x3f6a1b[_0xe78a0b(0x9f)]*_0x1338f8,_0x1b9485=document[_0xe78a0b(0xa2)](_0xe78a0b(0x71)),_0x5be67b=_0x3f6a1b['data'];let _0x4da6b2=_0xe78a0b(0x117);if(clients&&clients['length']>0x0){const _0x239339=clients[_0xe78a0b(0x119)](_0x37ddab=>String(_0x37ddab['id'])===String(_0x5be67b['clientId']));if(_0x239339&&_0x239339[_0xe78a0b(0x149)])_0x4da6b2=_0x239339[_0xe78a0b(0x149)];}const _0x12593e=_0x5be67b[_0xe78a0b(0xc2)]==='completed',_0x1fd487=_0x12593e?0x1:0.45;_0x1b9485[_0xe78a0b(0x81)]=_0xe78a0b(0xbc)+(_0x12593e?_0xe78a0b(0xc4):''),_0x1b9485[_0xe78a0b(0x112)]['backgroundColor']=hexToRgba(_0x4da6b2,_0x1fd487),_0x1b9485[_0xe78a0b(0x112)][_0xe78a0b(0x12a)]=_0x4da6b2;const _0x12f8f1=_0x3f6a1b[_0xe78a0b(0x11d)]/0x3c*GRID_H,_0x545597=(_0x3f6a1b[_0xe78a0b(0x7d)]-_0x3f6a1b[_0xe78a0b(0x11d)])/0x3c*GRID_H;_0x1b9485[_0xe78a0b(0x112)][_0xe78a0b(0xe6)]=_0x12f8f1+'px',_0x1b9485[_0xe78a0b(0x112)][_0xe78a0b(0xd7)]=Math[_0xe78a0b(0xb6)](_0x545597,0x14)+'px',_0x1b9485[_0xe78a0b(0x112)][_0xe78a0b(0x7f)]=_0xe78a0b(0x158)+_0x1338f8+_0xe78a0b(0x129),_0x1b9485['style']['left']=_0xe78a0b(0x158)+_0x1a7ffc+_0xe78a0b(0x100),_0x1b9485[_0xe78a0b(0x112)][_0xe78a0b(0xfa)]=0xa+_0x3f6a1b[_0xe78a0b(0x9f)];if(_0x1338f8<0x55)_0x1b9485[_0xe78a0b(0x151)]['add']('mini');let _0x168299='';if(_0x5be67b['seriesId'])_0x168299+=_0xe78a0b(0x138);if(_0x12593e)_0x168299+=_0xe78a0b(0x11f);_0x1b9485[_0xe78a0b(0xd8)]=_0xe78a0b(0xd3)+_0x5be67b[_0xe78a0b(0x11d)]+'\x20-\x20'+_0x5be67b[_0xe78a0b(0x7d)]+_0xe78a0b(0xb9)+_0x168299+_0xe78a0b(0x135),_0x1b9485[_0xe78a0b(0x12f)]=_0x281508=>{_0x281508['stopPropagation'](),openDetails(_0x5be67b);},_0x437e7f[_0xe78a0b(0x8e)](_0x1b9485);});}function openAnalytics(){const _0xfa671e=a3_0x5c8b5d,_0x525f55=document[_0xfa671e(0x130)](_0xfa671e(0xa9));setAnalyticsPeriod(_0xfa671e(0x147),_0x525f55),openSheet(_0xfa671e(0x11b));}function setAnalyticsPeriod(_0x23c7c4,_0x5ee750){const _0x274cf1=a3_0x5c8b5d;currentAnPeriod=_0x23c7c4,document[_0x274cf1(0x9a)](_0x274cf1(0xa9))['forEach'](_0x562d51=>_0x562d51['classList'][_0x274cf1(0x13e)](_0x274cf1(0x72)));if(_0x5ee750)_0x5ee750[_0x274cf1(0x151)]['add'](_0x274cf1(0x72));const _0x1960f1=document['getElementById'](_0x274cf1(0x142));_0x1960f1[_0x274cf1(0x112)][_0x274cf1(0x115)]=_0x23c7c4==='custom'?_0x274cf1(0x131):_0x274cf1(0xa5);const _0x16fde5=new Date();let _0x4412b7=new Date(),_0x2fab83=new Date();if(_0x23c7c4===_0x274cf1(0x147))_0x4412b7=getStartOfWeek(_0x16fde5),_0x2fab83=new Date(_0x4412b7),_0x2fab83[_0x274cf1(0xb7)](_0x2fab83[_0x274cf1(0xc0)]()+0x6);else{if(_0x23c7c4===_0x274cf1(0x78))_0x4412b7=new Date(_0x16fde5[_0x274cf1(0x86)](),_0x16fde5[_0x274cf1(0xd2)](),0x1),_0x2fab83=new Date(_0x16fde5[_0x274cf1(0x86)](),_0x16fde5[_0x274cf1(0xd2)]()+0x1,0x0);else{!document['getElementById'](_0x274cf1(0xb1))[_0x274cf1(0x152)]&&(document[_0x274cf1(0x87)]('anStart')[_0x274cf1(0x152)]=getLocalDateStr(_0x16fde5),document[_0x274cf1(0x87)](_0x274cf1(0xc9))[_0x274cf1(0x152)]=getLocalDateStr(_0x16fde5));refreshAnalytics();return;}}document['getElementById'](_0x274cf1(0xb1))[_0x274cf1(0x152)]=getLocalDateStr(_0x4412b7),document['getElementById'](_0x274cf1(0xc9))[_0x274cf1(0x152)]=getLocalDateStr(_0x2fab83),refreshAnalytics();}function refreshAnalytics(){const _0x38b5a9=a3_0x5c8b5d,_0x3622cc=document['getElementById']('anStart')['value'],_0x37f5a2=document[_0x38b5a9(0x87)](_0x38b5a9(0xc9))[_0x38b5a9(0x152)];if(!_0x3622cc||!_0x37f5a2)return;const _0x1fa9c8=sessions[_0x38b5a9(0xf8)](_0x122c37=>_0x122c37[_0x38b5a9(0xca)]>=_0x3622cc&&_0x122c37[_0x38b5a9(0xca)]<=_0x37f5a2&&_0x122c37[_0x38b5a9(0xc2)]!=='cancelled'),_0x53bb4a=_0x1fa9c8[_0x38b5a9(0x10c)],_0x148e28=_0x1fa9c8[_0x38b5a9(0xf8)](_0x2bec0d=>_0x2bec0d[_0x38b5a9(0xc2)]===_0x38b5a9(0xd5))['length'],_0x5d6143=_0x53bb4a>0x0?Math[_0x38b5a9(0x82)](_0x148e28/_0x53bb4a*0x64):0x0;document['getElementById']('anPercent')[_0x38b5a9(0x15c)]=_0x5d6143+'%',document['getElementById'](_0x38b5a9(0x126))[_0x38b5a9(0x15c)]=_0x148e28+_0x38b5a9(0xc1)+_0x53bb4a+_0x38b5a9(0x139);const _0x1ee77e=document[_0x38b5a9(0x87)]('anDonutCircle'),_0x294364=0x2*Math['PI']*0x23,_0xbcad3b=_0x294364-_0x5d6143/0x64*_0x294364;_0x1ee77e[_0x38b5a9(0x112)][_0x38b5a9(0xbd)]=_0xbcad3b;const _0x296ed8={};_0x1fa9c8['forEach'](_0x5eb468=>{const _0x4a55e5=_0x38b5a9,_0x283e9e=_0x5eb468[_0x4a55e5(0x10f)]||_0x4a55e5(0x109);if(!_0x296ed8[_0x283e9e]){const _0x2274bb='#'+_0x283e9e[_0x4a55e5(0xb0)]()[_0x4a55e5(0xaa)](0x0,0x6);_0x296ed8[_0x283e9e]={'total':0x0,'done':0x0,'color':_0x2274bb};}_0x296ed8[_0x283e9e][_0x4a55e5(0x15d)]++;if(_0x5eb468[_0x4a55e5(0xc2)]===_0x4a55e5(0xd5))_0x296ed8[_0x283e9e][_0x4a55e5(0x8f)]++;});const _0x3828c6=document[_0x38b5a9(0x87)](_0x38b5a9(0xba));_0x3828c6['innerHTML']='';const _0x20c813=Object[_0x38b5a9(0x77)](_0x296ed8)[_0x38b5a9(0x156)]((_0x203716,_0x6b2796)=>_0x6b2796[0x1][_0x38b5a9(0x15d)]-_0x203716[0x1][_0x38b5a9(0x15d)]);if(_0x20c813['length']===0x0){_0x3828c6[_0x38b5a9(0xd8)]=_0x38b5a9(0xce);return;}_0x20c813[_0x38b5a9(0xee)](([_0x2c23ab,_0x4379ec])=>{const _0x5510af=_0x38b5a9,_0x1ab3e5=Math[_0x5510af(0x82)](_0x4379ec[_0x5510af(0x8f)]/_0x4379ec['total']*0x64),_0x582141=document[_0x5510af(0xa2)](_0x5510af(0x71));_0x582141[_0x5510af(0x81)]=_0x5510af(0xfc),_0x582141[_0x5510af(0x112)][_0x5510af(0x12a)]=_0x4379ec['color'],_0x582141[_0x5510af(0xd8)]=_0x5510af(0x83)+_0x2c23ab[_0x5510af(0xaa)](0x0,0x5)+_0x5510af(0xed)+_0x4379ec[_0x5510af(0x8f)]+_0x5510af(0x10d)+_0x4379ec[_0x5510af(0x15d)]+_0x5510af(0x120)+_0x1ab3e5+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3828c6[_0x5510af(0x8e)](_0x582141);});}function openDetails(_0x5bb868){const _0x49fe22=a3_0x5c8b5d;currentSession=_0x5bb868;const _0x28ce39=new Date(_0x5bb868[_0x49fe22(0xca)]),_0x113539=_0x28ce39[_0x49fe22(0x12e)]('ru-RU',{'weekday':_0x49fe22(0x113),'day':_0x49fe22(0x8a),'month':_0x49fe22(0x113)});document['getElementById'](_0x49fe22(0x7c))[_0x49fe22(0x15c)]=_0x113539[_0x49fe22(0xc6)](0x0)[_0x49fe22(0x10e)]()+_0x113539[_0x49fe22(0xf5)](0x1),document['getElementById'](_0x49fe22(0xdc))[_0x49fe22(0x15c)]=_0x5bb868['start']+_0x49fe22(0x102)+_0x5bb868['end'],document[_0x49fe22(0x87)](_0x49fe22(0x97))[_0x49fe22(0x15c)]=_0x5bb868['note']||_0x49fe22(0x7b);const _0x4fe305=document['getElementById'](_0x49fe22(0xcc)),_0x34c9ed=document[_0x49fe22(0x87)]('cancelContainer'),_0x3580e9=_0x34c9ed[_0x49fe22(0x130)](_0x49fe22(0xaf)),_0x3a79f7=_0x34c9ed[_0x49fe22(0x130)]('.btn-reschedule'),_0x53f7a9=document[_0x49fe22(0x87)]('cancelHint');if(_0x5bb868[_0x49fe22(0xc2)]==='completed')_0x4fe305[_0x49fe22(0x15c)]=_0x49fe22(0xb4),_0x4fe305[_0x49fe22(0x112)][_0x49fe22(0x149)]=_0x49fe22(0x99),_0x34c9ed[_0x49fe22(0x112)]['display']=_0x49fe22(0xa5);else{_0x4fe305[_0x49fe22(0x15c)]=_0x49fe22(0xc3),_0x4fe305[_0x49fe22(0x112)]['color']=_0x49fe22(0xa6),_0x34c9ed[_0x49fe22(0x112)][_0x49fe22(0x115)]='block';const _0x4c2f9e=new Date(_0x5bb868[_0x49fe22(0xca)]+'T'+_0x5bb868[_0x49fe22(0x11d)]),_0x1600b5=new Date(),_0x32cf98=(_0x4c2f9e-_0x1600b5)/(0x3e8*0x3c*0x3c),_0x1dbd9c=coachProfiles[_0x5bb868[_0x49fe22(0x10f)]]&&coachProfiles[_0x5bb868['coachId']][_0x49fe22(0xfd)]?parseInt(coachProfiles[_0x5bb868[_0x49fe22(0x10f)]]['cancel_window']):0x18;if(_0x1dbd9c===0x0||_0x32cf98>=_0x1dbd9c)_0x3580e9[_0x49fe22(0x112)][_0x49fe22(0x115)]='block',_0x3a79f7['style'][_0x49fe22(0x115)]=_0x49fe22(0x14f),_0x53f7a9[_0x49fe22(0x112)][_0x49fe22(0x115)]='none';else{_0x3580e9[_0x49fe22(0x112)][_0x49fe22(0x115)]=_0x49fe22(0xa5),_0x3a79f7[_0x49fe22(0x112)][_0x49fe22(0x115)]=_0x49fe22(0xa5),_0x53f7a9[_0x49fe22(0x112)][_0x49fe22(0x115)]=_0x49fe22(0x14f);let _0x1bf9a8=_0x1dbd9c===0x0?'–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è':_0x49fe22(0x13c)+_0x1dbd9c+'\x20—á.';_0x53f7a9[_0x49fe22(0x15c)]=_0x49fe22(0xdd)+_0x1bf9a8+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document['getElementById']('overlay')[_0x49fe22(0x151)][_0x49fe22(0x140)](_0x49fe22(0x72)),document[_0x49fe22(0x87)](_0x49fe22(0xe0))['classList'][_0x49fe22(0x140)](_0x49fe22(0x136));}function a3_0x4000(_0x271c30,_0x143f61){_0x271c30=_0x271c30-0x6f;const _0x309c48=a3_0x30b9();let _0x1881c7=_0x309c48[_0x271c30];return _0x1881c7;}function closeAllSheets(){const _0x4bee9a=a3_0x5c8b5d;document[_0x4bee9a(0x87)](_0x4bee9a(0x132))[_0x4bee9a(0x151)][_0x4bee9a(0x13e)](_0x4bee9a(0x72)),document[_0x4bee9a(0x9a)](_0x4bee9a(0x12d))[_0x4bee9a(0xee)](_0x49df6c=>_0x49df6c[_0x4bee9a(0x151)][_0x4bee9a(0x13e)](_0x4bee9a(0x136)));}function openSheet(_0x48d852){const _0x231f9b=a3_0x5c8b5d;document[_0x231f9b(0x87)](_0x231f9b(0x132))['classList'][_0x231f9b(0x140)](_0x231f9b(0x72)),document[_0x231f9b(0x87)](_0x48d852)['classList'][_0x231f9b(0x140)](_0x231f9b(0x136));}function getLocalDateStr(_0x5124c2){const _0x2cfbba=a3_0x5c8b5d,_0x2cd4d5=_0x5124c2[_0x2cfbba(0x86)](),_0x5e6988=String(_0x5124c2['getMonth']()+0x1)[_0x2cfbba(0x144)](0x2,'0'),_0x4bf3d1=String(_0x5124c2[_0x2cfbba(0xc0)]())[_0x2cfbba(0x144)](0x2,'0');return _0x2cd4d5+'-'+_0x5e6988+'-'+_0x4bf3d1;}function a3_0x30b9(){const _0x59e307=['</div>','getItem','uc_client_list','scrollTop','time-label','1107hxIoEQ','detNote','visible','var(--acc-green)','querySelectorAll','data-day-idx','data','rescheduleSheet','applyData','colIndex','json','daysHeaderTrack','createElement','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','clients','none','var(--acc-blue)','now','saveLocally','.period-switch\x20.p-btn','substr','scrollLeft','disableVerticalSwipes','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','href','.btn-cancel','toString','anStart','getHours','getMinutes','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','rs-date-chip','max','setDate','auto','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','analyticsList','addEventListener','event-card','strokeDashoffset','blocked-range-part\x20stripe-bg','show','getDate','\x20–∏–∑\x20','status','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','\x20status-completed','<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>','charAt','user','scrollWidth','anEnd','dateStr','Error\x20setting\x20color:','detStatus','get_slots','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','ccTitle','calendar','https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec','getMonth','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','#050505','completed','–û—Ç–º–µ–Ω–µ–Ω–æ','height','innerHTML','today','2706EVrrOO','setMonth','detTime','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','DOMContentLoaded','day-col-header\x20','detailsSheet','1503128dEHlem','loadLocal','WebApp','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','location','top','initData','6932104uElbaS','setHours','8680925kCkzNl','planned','.rs-date-chip','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>','forEach','setBackgroundColor','settings','data-date','rgba(10,\x20132,\x20255,\x20','BackButton','v9.5-CLIENT-ANALYTICS','slice','setAttribute','getDay','filter','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>','zIndex','20edKiJN','client-stat-card','cancel_window','uc_client_sessions','customConfirm','%\x20+\x202px)','apply','\x20-\x20','headerMonth','stringify','.day-col-header[data-date=\x22','rsDatesTrack','gridColumns','exceptions','Unknown','clientWidth','day-column\x20','length','</span>\x20/\x20','toUpperCase','coachId','Critical\x20TMA\x20Error:','<div\x20class=\x22dch-day\x22>','style','long','#ff453a','display','<div\x20class=\x22rs-day-name\x22>','#0a84ff','test','find','rgba(','analyticsSheet','push','start','toLocaleString','<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','px\x20-','syncLoad','map','ccText','then','anTotalStats','uc_client_settings','getTime','%\x20-\x204px)','borderLeftColor','log','</div><div\x20class=\x22dch-num\x22>','.sheet','toLocaleDateString','onclick','querySelector','flex','overlay','split','38670FzfGzD','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','open','2305461upnRGR','<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','</div><div\x20class=\x22rs-day-num\x22>','join','–∑–∞\x20','(((.+)+)+)+$','remove','globalTimeLine','add','7icMqVd','anCustomDates','fontWeight','padStart','pattern','T00:00:00','week','Telegram','color','min','offsetLeft','getAttribute','setItem','1242672nJMoOc','block','keys','classList','value','rsSlotsGrid','insertBefore','offsetWidth','sort','POST','calc(','<span>','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','timeColumn','textContent','total','toast','backgroundPosition','.day-column','div','active','parse','timeLineBadge','blocked-slot\x20stripe-bg','matrixViewport','entries','month','router.html','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫','detDate','end','600','width','331eHIdEO','className','round','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#','createDocumentFragment','setHeaderColor','getFullYear','getElementById','client_load','coach_profiles','numeric','search','ranges',':00</span>','appendChild','done','sid'];a3_0x30b9=function(){return _0x59e307;};return a3_0x30b9();}function getStartOfWeek(_0xed48ac){const _0x34a070=a3_0x5c8b5d,_0x5c5e75=new Date(_0xed48ac),_0x4d12d1=_0x5c5e75[_0x34a070(0xf7)](),_0xc670f4=_0x5c5e75['getDate']()-_0x4d12d1+(_0x4d12d1===0x0?-0x6:0x1);return _0x5c5e75['setDate'](_0xc670f4),_0x5c5e75['setHours'](0x0,0x0,0x0,0x0),_0x5c5e75;}function scrollToToday(){const _0x3bb4cb=getLocalDateStr(new Date());setTimeout(()=>{const _0xdbc95=a3_0x4000,_0x307354=document[_0xdbc95(0x130)](_0xdbc95(0x105)+_0x3bb4cb+'\x22]');if(_0x307354){const _0x5b5b50=document[_0xdbc95(0x87)](_0xdbc95(0x76)),_0x30d29a=_0x307354['offsetLeft']-_0x5b5b50[_0xdbc95(0x10a)]/0x2+_0x307354[_0xdbc95(0x155)]/0x2;_0x5b5b50['scrollTo']({'left':_0x30d29a,'behavior':_0xdbc95(0xb8)}),_0x5b5b50[_0xdbc95(0x94)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x195109=a3_0x5c8b5d,_0x122fb1=new Date(),_0x2fcd94=document[_0x195109(0x87)](_0x195109(0x13f)),_0x55b623=document[_0x195109(0x87)](_0x195109(0x74)),_0x38c5b0=(_0x122fb1[_0x195109(0xb2)]()*0x3c+_0x122fb1[_0x195109(0xb3)]())/0x3c*GRID_H;_0x2fcd94[_0x195109(0x112)]['top']=_0x38c5b0+'px',_0x2fcd94[_0x195109(0x112)][_0x195109(0x115)]='block',_0x55b623[_0x195109(0x112)]['top']=_0x38c5b0+'px',_0x55b623[_0x195109(0x112)][_0x195109(0x115)]='block',_0x55b623[_0x195109(0x15c)]=String(_0x122fb1[_0x195109(0xb2)]())['padStart'](0x2,'0')+':'+String(_0x122fb1['getMinutes']())[_0x195109(0x144)](0x2,'0');}function onScroll(){const _0x1d9854=a3_0x5c8b5d,_0x3cda06=document[_0x1d9854(0x87)]('matrixViewport'),_0x531ab6=document['querySelectorAll']('.day-col-header');for(let _0x470102 of _0x531ab6)if(_0x470102[_0x1d9854(0x14b)]>=_0x3cda06[_0x1d9854(0xab)]){const _0x4144d6=new Date(_0x470102[_0x1d9854(0x14c)](_0x1d9854(0xf1)));document[_0x1d9854(0x87)](_0x1d9854(0x103))[_0x1d9854(0x15c)]=_0x4144d6[_0x1d9854(0x11e)]('ru',{'month':_0x1d9854(0x113)})[_0x1d9854(0x10e)]()+'\x20'+_0x4144d6[_0x1d9854(0x86)]();break;}}function showToast(_0x40e885){const _0xfc009d=a3_0x5c8b5d,_0x577ba6=document['getElementById'](_0xfc009d(0x15e));_0x577ba6['textContent']=_0x40e885,_0x577ba6[_0xfc009d(0x151)][_0xfc009d(0x140)](_0xfc009d(0xbf)),setTimeout(()=>_0x577ba6[_0xfc009d(0x151)][_0xfc009d(0x13e)](_0xfc009d(0xbf)),0x7d0);}function handleInfiniteScroll(){const _0x5ca90e=a3_0x5c8b5d,_0x16db79=document[_0x5ca90e(0x87)]('matrixViewport'),_0x3c9796=_0x16db79[_0x5ca90e(0xab)],_0x41e38a=_0x16db79[_0x5ca90e(0xc8)],_0x3dbc75=_0x16db79[_0x5ca90e(0x10a)];if(_0x41e38a-(_0x3c9796+_0x3dbc75)<0x12c){const _0x4ce197=endOffset;endOffset+=0xe,renderDayRange(_0x4ce197+0x1,endOffset),reRenderBlocks();}if(_0x3c9796<0x12c){const _0x457262=startOffset;startOffset-=0xe,prependDays(startOffset,_0x457262-0x1),_0x16db79[_0x5ca90e(0xab)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0xd76118,_0x188f07){const _0x318690=a3_0x5c8b5d,_0x347ea3=document['getElementById'](_0x318690(0xa1)),_0x2d58d9=document['getElementById'](_0x318690(0x107)),_0xd98b24=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x93914e=new Date();_0x93914e[_0x318690(0xe9)](0x0,0x0,0x0,0x0);const _0x520c3e=getLocalDateStr(new Date()),_0x59853c=document['createDocumentFragment'](),_0x461a09=document[_0x318690(0x84)]();for(let _0x3b8355=_0xd76118;_0x3b8355<=_0x188f07;_0x3b8355++){const _0x4769d3=new Date(_0x93914e);_0x4769d3[_0x318690(0xb7)](_0x4769d3['getDate']()+_0x3b8355);const _0x2f9bc1=getLocalDateStr(_0x4769d3);let _0x5efa96=_0x4769d3[_0x318690(0xf7)]()-0x1;if(_0x5efa96===-0x1)_0x5efa96=0x6;const _0x5447e0=_0x2f9bc1===_0x520c3e,_0xf14b12=document['createElement']('div');_0xf14b12[_0x318690(0x81)]=_0x318690(0xdf)+(_0x5447e0?_0x318690(0xd9):''),_0xf14b12['setAttribute'](_0x318690(0xf1),_0x2f9bc1),_0xf14b12['innerHTML']=_0x318690(0x111)+_0xd98b24[_0x5efa96]+'</div><div\x20class=\x22dch-num\x22>'+_0x4769d3[_0x318690(0xc0)]()+_0x318690(0x91),_0x59853c[_0x318690(0x8e)](_0xf14b12);const _0x3b9161=document[_0x318690(0xa2)](_0x318690(0x71));_0x3b9161[_0x318690(0x81)]=_0x318690(0x10b)+(_0x5447e0?_0x318690(0xd9):''),_0x3b9161[_0x318690(0xf6)](_0x318690(0xf1),_0x2f9bc1),_0x3b9161[_0x318690(0xf6)](_0x318690(0x9b),_0x5efa96),_0x461a09[_0x318690(0x8e)](_0x3b9161);}_0x347ea3[_0x318690(0x154)](_0x59853c,_0x347ea3['firstChild']),_0x2d58d9[_0x318690(0x154)](_0x461a09,_0x2d58d9[_0x318690(0x130)](_0x318690(0x70)));}function hexToRgba(_0xc34cc8,_0x41bfe8){const _0x590152=a3_0x5c8b5d;let _0x4cc991;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x590152(0x118)](_0xc34cc8))return _0x4cc991=_0xc34cc8['substring'](0x1)[_0x590152(0x133)](''),_0x4cc991[_0x590152(0x10c)]==0x3&&(_0x4cc991=[_0x4cc991[0x0],_0x4cc991[0x0],_0x4cc991[0x1],_0x4cc991[0x1],_0x4cc991[0x2],_0x4cc991[0x2]]),_0x4cc991='0x'+_0x4cc991[_0x590152(0x13b)](''),_0x590152(0x11a)+[_0x4cc991>>0x10&0xff,_0x4cc991>>0x8&0xff,_0x4cc991&0xff][_0x590152(0x13b)](',')+','+_0x41bfe8+')';return _0x590152(0xf2)+_0x41bfe8+')';}let confirmResolver=null;function showCustomConfirm(_0x54d94a,_0xe8260b,_0x282364=!![]){const _0x4aec02=a3_0x5c8b5d;document[_0x4aec02(0x87)](_0x4aec02(0xcf))[_0x4aec02(0x15c)]=_0x54d94a,document[_0x4aec02(0x87)](_0x4aec02(0x124))['textContent']=_0xe8260b;const _0x455cc8=document['getElementById']('ccYesBtn');return _0x282364?(_0x455cc8[_0x4aec02(0x112)][_0x4aec02(0x149)]=_0x4aec02(0x114),_0x455cc8['style'][_0x4aec02(0x143)]=_0x4aec02(0x7e)):(_0x455cc8['style'][_0x4aec02(0x149)]=_0x4aec02(0x117),_0x455cc8[_0x4aec02(0x112)]['fontWeight']=_0x4aec02(0x7e)),new Promise(_0x268742=>{const _0x99d9e=_0x4aec02;confirmResolver=_0x268742,document[_0x99d9e(0x87)]('customConfirm')[_0x99d9e(0x151)][_0x99d9e(0x140)](_0x99d9e(0x98));});}function resolveCustomConfirm(_0x343d1e){const _0x27ec6b=a3_0x5c8b5d;document[_0x27ec6b(0x87)](_0x27ec6b(0xff))[_0x27ec6b(0x151)][_0x27ec6b(0x13e)](_0x27ec6b(0x98));if(confirmResolver)confirmResolver(_0x343d1e);}async function tryCancelCurrentSession(){const _0x10deaf=a3_0x5c8b5d;if(!currentSession)return;const _0x5de4e2=await showCustomConfirm('–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏',_0x10deaf(0xad),!![]);if(!_0x5de4e2)return;const _0x4b59c4=currentSession;closeAllSheets(),sessions=sessions[_0x10deaf(0xf8)](_0xdb680e=>_0xdb680e['id']!==_0x4b59c4['id']),reRenderBlocks(),showToast(_0x10deaf(0xd6)),lastUserActionTime=Date[_0x10deaf(0xa7)]();try{const _0x3acf18=window[_0x10deaf(0x148)]?.[_0x10deaf(0xe3)],_0x118851=await fetch(API_URL,{'method':_0x10deaf(0x157),'body':JSON[_0x10deaf(0x104)]({'action':'client_cancel','init_data':_0x3acf18?.[_0x10deaf(0xe7)]||'','coachId':_0x4b59c4[_0x10deaf(0x10f)],'dateStr':_0x4b59c4[_0x10deaf(0xca)],'sessionId':_0x4b59c4['id']})});if(_0x118851['ok'])DataManager[_0x10deaf(0xa8)]();}catch(_0x32c524){showToast(_0x10deaf(0xa3));}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x43e763=a3_0x5c8b5d;if(!currentSession)return;document[_0x43e763(0x87)]('detailsSheet')[_0x43e763(0x151)]['remove'](_0x43e763(0x136)),document[_0x43e763(0x87)](_0x43e763(0x9d))[_0x43e763(0x151)][_0x43e763(0x140)](_0x43e763(0x136));const _0x3dd08d=document['getElementById'](_0x43e763(0x106)),_0x4fa626=document['getElementById'](_0x43e763(0x153));_0x3dd08d[_0x43e763(0xd8)]='',_0x4fa626['innerHTML']='<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>';const [_0x5e514f,_0x5e6fce]=currentSession['start'][_0x43e763(0x133)](':')['map'](Number),[_0x17e1cf,_0x1a7c0b]=currentSession[_0x43e763(0x7d)]['split'](':')[_0x43e763(0x123)](Number),_0x3feee8=_0x17e1cf*0x3c+_0x1a7c0b-(_0x5e514f*0x3c+_0x5e6fce);try{const _0x408a45=window['Telegram']?.[_0x43e763(0xe3)],_0x2b59f9=await fetch(API_URL,{'method':_0x43e763(0x157),'body':JSON[_0x43e763(0x104)]({'action':_0x43e763(0xcd),'coachId':currentSession[_0x43e763(0x10f)],'duration':_0x3feee8,'init_data':_0x408a45?.[_0x43e763(0xe7)]||'','excludeSessionId':currentSession['id']})}),_0xa24c32=await _0x2b59f9[_0x43e763(0xa0)]();_0xa24c32['ok']&&_0xa24c32['data']?(availableSlotsCache=_0xa24c32['data'],renderRescheduleDates()):_0x4fa626[_0x43e763(0xd8)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x22e097){_0x4fa626[_0x43e763(0xd8)]=_0x43e763(0xc5);}}function renderRescheduleDates(){const _0x1411c6=a3_0x5c8b5d,_0x50bade=document[_0x1411c6(0x87)](_0x1411c6(0x106));_0x50bade['innerHTML']='';const _0x128540=Object[_0x1411c6(0x150)](availableSlotsCache)[_0x1411c6(0x156)](),_0x984b2b=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x128540[_0x1411c6(0x10c)]===0x0){document[_0x1411c6(0x87)](_0x1411c6(0x153))[_0x1411c6(0xd8)]=_0x1411c6(0xf9);return;}_0x128540[_0x1411c6(0xee)]((_0x28a5e7,_0x1fa195)=>{const _0x94d52c=_0x1411c6,_0x566f1d=new Date(_0x28a5e7),_0x20040b=_0x984b2b[_0x566f1d[_0x94d52c(0xf7)]()],_0x453141=_0x566f1d[_0x94d52c(0xc0)](),_0x4d4f68=document[_0x94d52c(0xa2)](_0x94d52c(0x71));_0x4d4f68[_0x94d52c(0x81)]=_0x94d52c(0xb5);if(_0x1fa195===0x0)_0x4d4f68[_0x94d52c(0x151)][_0x94d52c(0x140)](_0x94d52c(0x72));_0x4d4f68[_0x94d52c(0xd8)]=_0x94d52c(0x116)+_0x20040b+_0x94d52c(0x13a)+_0x453141+_0x94d52c(0x91),_0x4d4f68[_0x94d52c(0x12f)]=()=>selectRsDate(_0x28a5e7,_0x4d4f68),_0x50bade[_0x94d52c(0x8e)](_0x4d4f68);}),selectRsDate(_0x128540[0x0],_0x50bade['firstChild']);}function selectRsDate(_0x25a1db,_0x5d76a3){const _0x4f7c9d=a3_0x5c8b5d;selectedRsDate=_0x25a1db,document[_0x4f7c9d(0x9a)](_0x4f7c9d(0xec))[_0x4f7c9d(0xee)](_0xb2854e=>_0xb2854e['classList'][_0x4f7c9d(0x13e)](_0x4f7c9d(0x72)));if(_0x5d76a3)_0x5d76a3['classList']['add'](_0x4f7c9d(0x72));const _0x5ad65a=document[_0x4f7c9d(0x87)](_0x4f7c9d(0x153));_0x5ad65a[_0x4f7c9d(0xd8)]='';const _0x49a2c2=availableSlotsCache[_0x25a1db]||[];if(_0x49a2c2[_0x4f7c9d(0x10c)]===0x0){_0x5ad65a[_0x4f7c9d(0xd8)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';return;}_0x49a2c2[_0x4f7c9d(0xee)](_0x4c2189=>{const _0x297b20=_0x4f7c9d,_0x29ba9d=document[_0x297b20(0xa2)]('button');_0x29ba9d[_0x297b20(0x81)]='rs-time-btn',_0x29ba9d['textContent']=_0x4c2189,_0x29ba9d[_0x297b20(0x12f)]=()=>confirmReschedule(_0x4c2189),_0x5ad65a[_0x297b20(0x8e)](_0x29ba9d);});}async function confirmReschedule(_0x350ffc){const _0x17b01b=a3_0x5c8b5d,_0x4e1ddc=new Date(selectedRsDate),_0x2429e1=_0x4e1ddc[_0x17b01b(0x12e)]('ru-RU',{'day':'numeric','month':'long'}),_0x3c9543=await showCustomConfirm('–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏',_0x17b01b(0x15a)+_0x2429e1+'\x20–≤\x20'+_0x350ffc+'?',![]);if(!_0x3c9543)return;closeAllSheets(),showToast('–ü–µ—Ä–µ–Ω–æ—Å–∏–º...'),lastUserActionTime=Date[_0x17b01b(0xa7)]();const _0x3acd82=currentSession['dateStr'],_0x3341b4=currentSession['id'],[_0x2e2df8,_0xce255f]=currentSession[_0x17b01b(0x11d)][_0x17b01b(0x133)](':')['map'](Number),[_0x541c6e,_0x232e28]=currentSession[_0x17b01b(0x7d)][_0x17b01b(0x133)](':')[_0x17b01b(0x123)](Number),_0x523be7=_0x541c6e*0x3c+_0x232e28-(_0x2e2df8*0x3c+_0xce255f),[_0x20852f,_0x4c28ef]=_0x350ffc[_0x17b01b(0x133)](':')[_0x17b01b(0x123)](Number),_0x18b4df=_0x20852f*0x3c+_0x4c28ef+_0x523be7,_0x39872b=Math['floor'](_0x18b4df/0x3c),_0xb07e7a=_0x18b4df%0x3c,_0x42902a=String(_0x39872b)['padStart'](0x2,'0')+':'+String(_0xb07e7a)['padStart'](0x2,'0'),_0x464bd5=sessions['findIndex'](_0x2faabd=>_0x2faabd['id']===_0x3341b4);_0x464bd5!==-0x1&&(sessions[_0x464bd5][_0x17b01b(0xca)]=selectedRsDate,sessions[_0x464bd5]['start']=_0x350ffc,sessions[_0x464bd5][_0x17b01b(0x7d)]=_0x42902a,reRenderBlocks());try{const _0x3bff09=window['Telegram']?.[_0x17b01b(0xe3)],_0x256ec9=await fetch(API_URL,{'method':_0x17b01b(0x157),'body':JSON['stringify']({'action':'reschedule','init_data':_0x3bff09?.[_0x17b01b(0xe7)]||'','oldSessionId':_0x3341b4,'oldDate':_0x3acd82,'newDate':selectedRsDate,'newTime':_0x350ffc,'coachId':currentSession[_0x17b01b(0x10f)]})}),_0x5de589=await _0x256ec9[_0x17b01b(0xa0)]();!_0x5de589['ok']?(showToast(_0x17b01b(0xe4)),DataManager[_0x17b01b(0x122)]()):(showToast(_0x17b01b(0x7a)),DataManager['saveLocally']());}catch(_0x3a93f3){showToast(_0x17b01b(0xa3));}}document[a3_0x5c8b5d(0xbb)](a3_0x5c8b5d(0xde),init);