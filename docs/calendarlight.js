const a3_0x4dc838=a3_0x40f6;(function(_0x1ef11b,_0xbe3ec9){const _0x230822=a3_0x40f6,_0x10ad3b=_0x1ef11b();while(!![]){try{const _0x5e1172=parseInt(_0x230822(0x215))/0x1*(parseInt(_0x230822(0x187))/0x2)+-parseInt(_0x230822(0x175))/0x3+-parseInt(_0x230822(0x180))/0x4*(-parseInt(_0x230822(0x1d7))/0x5)+-parseInt(_0x230822(0x1d9))/0x6*(parseInt(_0x230822(0x1fb))/0x7)+-parseInt(_0x230822(0x149))/0x8*(parseInt(_0x230822(0x1c1))/0x9)+parseInt(_0x230822(0x21b))/0xa+-parseInt(_0x230822(0x13e))/0xb*(parseInt(_0x230822(0x181))/0xc);if(_0x5e1172===_0xbe3ec9)break;else _0x10ad3b['push'](_0x10ad3b['shift']());}catch(_0x5405f1){_0x10ad3b['push'](_0x10ad3b['shift']());}}}(a3_0x4d78,0x7a9ca));const APP_VERSION=a3_0x4dc838(0x211),API_URL='https://script.google.com/macros/s/AKfycbxXxlp8PCCZ6dBlc4fyKafLKNDPIv8FQJV663YHp3vp5lcbtvH9CmRsrs9hccEC1weJRQ/exec',GRID_H=0x3c,KEY_SESSIONS='uc_client_sessions',KEY_SETTINGS=a3_0x4dc838(0x16e),KEY_CLIENTS=a3_0x4dc838(0x1bc);let startOffset=-0x1e,endOffset=0x3c,sessions=[],clients=[],availabilityPattern={0x0:[],0x1:[],0x2:[],0x3:[],0x4:[],0x5:[],0x6:[]},specialRanges=[],dateExceptions={},updateInterval,isScrolling=![],currentAnPeriod=a3_0x4dc838(0x133),coachProfiles={},currentSession=null,lastUserActionTime=0x0;(function initTMA(){const _0x21c3a3=a3_0x4dc838,_0x34fc07=(function(){let _0x3d4acf=!![];return function(_0x84adf3,_0x45bee2){const _0x41a932=_0x3d4acf?function(){if(_0x45bee2){const _0x361e81=_0x45bee2['apply'](_0x84adf3,arguments);return _0x45bee2=null,_0x361e81;}}:function(){};return _0x3d4acf=![],_0x41a932;};}()),_0xe7ff21=_0x34fc07(this,function(){const _0x53f216=a3_0x40f6;return _0xe7ff21[_0x53f216(0x178)]()['search'](_0x53f216(0x185))['toString']()[_0x53f216(0x20f)](_0xe7ff21)['search'](_0x53f216(0x185));});_0xe7ff21();try{const _0x2d3c7a=window['Telegram']?.[_0x21c3a3(0x17c)];if(!_0x2d3c7a)return;_0x2d3c7a[_0x21c3a3(0x1b0)](),_0x2d3c7a[_0x21c3a3(0x1cf)]();try{_0x2d3c7a['setHeaderColor'](_0x21c3a3(0x156)),_0x2d3c7a['setBackgroundColor']&&_0x2d3c7a['setBackgroundColor'](_0x21c3a3(0x156));}catch(_0x39c17f){console[_0x21c3a3(0x1c0)](_0x21c3a3(0x216),_0x39c17f);}try{_0x2d3c7a[_0x21c3a3(0x1f0)]&&(_0x2d3c7a['BackButton'][_0x21c3a3(0x221)](),_0x2d3c7a['BackButton']['offClick'](),_0x2d3c7a[_0x21c3a3(0x1f0)][_0x21c3a3(0x220)](function(){const _0x450c1d=_0x21c3a3;window[_0x450c1d(0x164)][_0x450c1d(0x184)]=_0x450c1d(0x1d0);}));}catch(_0x2e888b){console[_0x21c3a3(0x1c0)](_0x21c3a3(0x167),_0x2e888b);}try{if(_0x2d3c7a[_0x21c3a3(0x130)])_0x2d3c7a[_0x21c3a3(0x130)]();}catch(_0x4b3760){}}catch(_0x3626aa){console['error']('Critical\x20TMA\x20Error:',_0x3626aa);}}());function isAdmin(){const _0x146d42=a3_0x4dc838;try{const _0x182639=Number(window[_0x146d42(0x1e5)]?.['WebApp']?.['initDataUnsafe']?.[_0x146d42(0x1b3)]?.['id']);return _0x182639===0xbaf7174;}catch(_0xd790b1){return![];}}const DataManager={'saveLocally'(){const _0x1dd64c=a3_0x4dc838;try{localStorage[_0x1dd64c(0x153)](KEY_SESSIONS,JSON[_0x1dd64c(0x1cb)](sessions)),localStorage['setItem'](KEY_CLIENTS,JSON[_0x1dd64c(0x1cb)](clients)),localStorage[_0x1dd64c(0x153)](KEY_SETTINGS,JSON['stringify']({'pattern':availabilityPattern,'ranges':specialRanges,'exceptions':dateExceptions}));}catch(_0x5cd0de){}},'loadLocal'(){const _0x59eb12=a3_0x4dc838;try{const _0x281eb5=localStorage[_0x59eb12(0x173)](KEY_SESSIONS);if(_0x281eb5)sessions=JSON[_0x59eb12(0x159)](_0x281eb5);const _0x272732=localStorage['getItem'](KEY_CLIENTS);if(_0x272732)clients=JSON['parse'](_0x272732);const _0x1f5d21=localStorage[_0x59eb12(0x173)](KEY_SETTINGS);if(_0x1f5d21){const _0x330488=JSON[_0x59eb12(0x159)](_0x1f5d21);if(_0x330488[_0x59eb12(0x1e9)])availabilityPattern=_0x330488[_0x59eb12(0x1e9)];if(_0x330488[_0x59eb12(0x1a8)])specialRanges=_0x330488[_0x59eb12(0x1a8)];if(_0x330488[_0x59eb12(0x213)])dateExceptions=_0x330488['exceptions'];}}catch(_0x36d3ba){}},async 'syncLoad'(){const _0x383804=a3_0x4dc838,_0x130127=new Date(),_0x2ebcd7=_0x130127[_0x383804(0x15c)]()+'-'+String(_0x130127[_0x383804(0x1cc)]()+0x1)[_0x383804(0x1be)](0x2,'0'),_0xef32d8=new Date(_0x130127);_0xef32d8['setMonth'](_0x130127[_0x383804(0x1cc)]()+0x1);const _0x5d1173=_0xef32d8[_0x383804(0x15c)]()+'-'+String(_0xef32d8[_0x383804(0x1cc)]()+0x1)['padStart'](0x2,'0'),_0xae5667=Date[_0x383804(0x182)]();try{const _0x709050=window[_0x383804(0x1e5)]?.[_0x383804(0x17c)],_0x2314ab=_0x709050?.[_0x383804(0x14e)]||'',[_0x578a87,_0x4253a9]=await Promise[_0x383804(0x1c7)]([fetch(API_URL,{'method':_0x383804(0x13c),'body':JSON[_0x383804(0x1cb)]({'action':_0x383804(0x14c),'init_data':_0x2314ab,'month_str':_0x2ebcd7})})[_0x383804(0x1fa)](_0x391c41=>_0x391c41[_0x383804(0x212)]()),fetch(API_URL,{'method':_0x383804(0x13c),'body':JSON[_0x383804(0x1cb)]({'action':_0x383804(0x14c),'init_data':_0x2314ab,'month_str':_0x5d1173})})[_0x383804(0x1fa)](_0x42dab7=>_0x42dab7[_0x383804(0x212)]())]);if(lastUserActionTime>_0xae5667){console['log'](_0x383804(0x198));return;}if(_0x578a87['ok'])this[_0x383804(0x171)](_0x578a87[_0x383804(0x143)],_0x2ebcd7);if(_0x4253a9['ok'])this[_0x383804(0x171)](_0x4253a9['data'],_0x5d1173);this[_0x383804(0x170)]();}catch(_0x487fc8){}},'applyData'(_0x44c152,_0x232d20){const _0x325cc3=a3_0x4dc838;if(!_0x44c152)return;if(_0x44c152[_0x325cc3(0x177)]){if(_0x44c152['settings']['pattern'])availabilityPattern=_0x44c152[_0x325cc3(0x177)][_0x325cc3(0x1e9)];if(_0x44c152[_0x325cc3(0x177)][_0x325cc3(0x1a8)])specialRanges=_0x44c152[_0x325cc3(0x177)]['ranges'];if(_0x44c152[_0x325cc3(0x177)][_0x325cc3(0x213)])dateExceptions=_0x44c152['settings']['exceptions'];}if(_0x44c152['clients']&&Array[_0x325cc3(0x1d2)](_0x44c152[_0x325cc3(0x1c8)]))clients=_0x44c152['clients'];_0x44c152['coach_profiles']&&(coachProfiles={...coachProfiles,..._0x44c152[_0x325cc3(0x18e)]}),_0x44c152[_0x325cc3(0x1e8)]&&(sessions=sessions[_0x325cc3(0x19b)](_0x5c8cb1=>!_0x5c8cb1[_0x325cc3(0x1f6)]['startsWith'](_0x232d20)),Object['keys'](_0x44c152['calendar'])['forEach'](_0x5a6c9c=>{const _0x5b5ff1=_0x325cc3,_0xce4e26=_0x44c152[_0x5b5ff1(0x1e8)][_0x5a6c9c];_0xce4e26[_0x5b5ff1(0x1e7)](_0x1ffab6=>{const _0x359f86=_0x5b5ff1;sessions[_0x359f86(0x137)]({'id':_0x1ffab6['i'],'clientId':_0x1ffab6['c'],'coachId':_0x1ffab6[_0x359f86(0x1eb)],'dateStr':_0x232d20+'-'+_0x5a6c9c[_0x359f86(0x1be)](0x2,'0'),'start':_0x1ffab6['s'],'end':_0x1ffab6['e'],'note':_0x1ffab6['n']||'','status':_0x1ffab6['st']||_0x359f86(0x201),'seriesId':_0x1ffab6[_0x359f86(0x1a2)]});});})),reRenderBlocks();}};function init(){const _0x37cbcd=a3_0x4dc838;DataManager[_0x37cbcd(0x219)](),renderTimeColumn(),renderDayRange(startOffset,endOffset),scrollToToday(),startClock(),reRenderBlocks(),document['getElementById'](_0x37cbcd(0x163))['addEventListener']('scroll',()=>{isScrolling=!![],onScroll(),handleInfiniteScroll();},{'passive':!![]}),DataManager['syncLoad']();}function renderTimeColumn(){const _0x471a4e=a3_0x4dc838,_0x37a8f2=document[_0x471a4e(0x14a)](_0x471a4e(0x1bf)),_0x39b1b6=document[_0x471a4e(0x14a)](_0x471a4e(0x20a));_0x37a8f2[_0x471a4e(0x145)]='',_0x37a8f2[_0x471a4e(0x1b7)](_0x39b1b6);for(let _0x4022e8=0x0;_0x4022e8<0x18;_0x4022e8++){const _0x36ab97=document['createElement']('div');_0x36ab97[_0x471a4e(0x14b)]=_0x471a4e(0x1bd);if(_0x4022e8>0x0)_0x36ab97[_0x471a4e(0x145)]=_0x471a4e(0x1a1)+String(_0x4022e8)[_0x471a4e(0x1be)](0x2,'0')+_0x471a4e(0x1a9);_0x37a8f2[_0x471a4e(0x1b7)](_0x36ab97);}}function renderDayRange(_0x2f2222,_0x141ff3){const _0x19c683=a3_0x4dc838,_0x35f6b6=document['getElementById']('daysHeaderTrack'),_0x50d18f=document[_0x19c683(0x14a)](_0x19c683(0x1ce)),_0x38f088=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x3522ae=new Date();_0x3522ae[_0x19c683(0x1fe)](0x0,0x0,0x0,0x0);const _0x1554ff=getLocalDateStr(new Date());for(let _0x5c9bfa=_0x2f2222;_0x5c9bfa<=_0x141ff3;_0x5c9bfa++){const _0x3e874a=new Date(_0x3522ae);_0x3e874a[_0x19c683(0x154)](_0x3e874a['getDate']()+_0x5c9bfa);const _0x539269=getLocalDateStr(_0x3e874a);let _0x3d0ce1=_0x3e874a[_0x19c683(0x16a)]()-0x1;if(_0x3d0ce1===-0x1)_0x3d0ce1=0x6;const _0x4e26e0=_0x539269===_0x1554ff,_0x3fe104=document['createElement'](_0x19c683(0x165));_0x3fe104[_0x19c683(0x14b)]=_0x19c683(0x19c)+(_0x4e26e0?_0x19c683(0x161):''),_0x3fe104[_0x19c683(0x21a)](_0x19c683(0x1f7),_0x539269),_0x3fe104['innerHTML']=_0x19c683(0x1b1)+_0x38f088[_0x3d0ce1]+_0x19c683(0x20d)+_0x3e874a['getDate']()+_0x19c683(0x1af),_0x35f6b6[_0x19c683(0x1b7)](_0x3fe104);const _0x3e0e68=document[_0x19c683(0x191)](_0x19c683(0x165));_0x3e0e68[_0x19c683(0x14b)]=_0x19c683(0x183)+(_0x4e26e0?_0x19c683(0x161):''),_0x3e0e68['setAttribute'](_0x19c683(0x1f7),_0x539269),_0x3e0e68[_0x19c683(0x21a)]('data-day-idx',_0x3d0ce1),_0x50d18f[_0x19c683(0x1b7)](_0x3e0e68);}}function reRenderBlocks(){const _0x4964fc=a3_0x4dc838;document['querySelectorAll']('.day-column')[_0x4964fc(0x1e7)](_0x32dcc2=>{const _0x51f899=_0x4964fc;_0x32dcc2['querySelectorAll'](_0x51f899(0x1e4))[_0x51f899(0x1e7)](_0xd03341=>_0xd03341['remove']());const _0xfb1391=_0x32dcc2['getAttribute']('data-date'),_0x48ecea=parseInt(_0x32dcc2['getAttribute'](_0x51f899(0x217))),_0xb0e1d9=Math[_0x51f899(0x135)](_0x32dcc2['offsetLeft']);(availabilityPattern[_0x48ecea]||[])[_0x51f899(0x1e7)](_0x3c8285=>{const _0x389d7f=_0x51f899,_0x3bd520=document['createElement'](_0x389d7f(0x165));_0x3bd520[_0x389d7f(0x14b)]=_0x389d7f(0x1b9),_0x3bd520['style'][_0x389d7f(0x188)]=_0x3c8285*GRID_H+'px',_0x3bd520['style']['backgroundPosition']='-'+_0xb0e1d9+'px\x20-'+_0x3c8285*GRID_H+'px',_0x32dcc2[_0x389d7f(0x1b7)](_0x3bd520);});if(specialRanges[_0x51f899(0x195)]>0x0){const _0x4393fe=new Date(_0xfb1391+_0x51f899(0x1c2))['getTime'](),_0x5a545d=new Date(_0xfb1391+_0x51f899(0x1e3))[_0x51f899(0x1e6)]();specialRanges[_0x51f899(0x1e7)](_0x372525=>{const _0x597563=_0x51f899,_0x44cda0=new Date(_0x372525[_0x597563(0x16b)])[_0x597563(0x1e6)](),_0x3593f4=new Date(_0x372525[_0x597563(0x17e)])[_0x597563(0x1e6)](),_0xf13809=Math['max'](_0x4393fe,_0x44cda0),_0x1f824d=Math[_0x597563(0x1db)](_0x5a545d,_0x3593f4);if(_0xf13809<_0x1f824d){const _0x4d1aa6=(_0xf13809-_0x4393fe)/0x36ee80*GRID_H,_0x2666ae=(_0x1f824d-_0xf13809)/0x36ee80*GRID_H,_0x38d004=document[_0x597563(0x191)]('div');_0x2666ae>=23.5*GRID_H?(_0x38d004[_0x597563(0x14b)]=_0x597563(0x1a6),_0x38d004['style'][_0x597563(0x160)]='-'+_0xb0e1d9+'px\x200px'):(_0x38d004[_0x597563(0x14b)]=_0x597563(0x194),_0x38d004[_0x597563(0x17b)][_0x597563(0x188)]=_0x4d1aa6+'px',_0x38d004[_0x597563(0x17b)][_0x597563(0x18f)]=_0x2666ae+'px',_0x38d004[_0x597563(0x17b)][_0x597563(0x160)]='-'+_0xb0e1d9+_0x597563(0x1ec)+_0x4d1aa6+'px'),_0x32dcc2[_0x597563(0x1b7)](_0x38d004);}});}renderEventsForColumn(_0x32dcc2,_0xfb1391);});}function renderEventsForColumn(_0x252df3,_0x4de42a){const _0x19fbc9=a3_0x4dc838,_0x35e425=sessions[_0x19fbc9(0x19b)](_0x54fd44=>_0x54fd44[_0x19fbc9(0x1f6)]===_0x4de42a),_0x268778=_0x35e425['map'](_0x37e0c6=>{const _0x15f7cf=_0x19fbc9,[_0x5ec82e,_0xd1bb23]=_0x37e0c6['start'][_0x15f7cf(0x134)](':')[_0x15f7cf(0x158)](Number),[_0x4a14b5,_0x62005d]=_0x37e0c6[_0x15f7cf(0x17e)][_0x15f7cf(0x134)](':')['map'](Number);return{'data':_0x37e0c6,'start':_0x5ec82e*0x3c+_0xd1bb23,'end':_0x4a14b5*0x3c+_0x62005d,'colIndex':0x0};});_0x268778[_0x19fbc9(0x1d4)]((_0x212ffb,_0x13e4d8)=>_0x212ffb[_0x19fbc9(0x16b)]-_0x13e4d8[_0x19fbc9(0x16b)]||_0x13e4d8[_0x19fbc9(0x17e)]-_0x13e4d8['start']-(_0x212ffb[_0x19fbc9(0x17e)]-_0x212ffb[_0x19fbc9(0x16b)]));const _0x581113=[];_0x268778[_0x19fbc9(0x1e7)](_0x30a17a=>{const _0x28e361=_0x19fbc9;let _0x5cf323=![];for(let _0x59e97d=0x0;_0x59e97d<_0x581113['length'];_0x59e97d++){const _0x3974f2=_0x581113[_0x59e97d];if(_0x30a17a[_0x28e361(0x16b)]>=_0x3974f2[_0x3974f2[_0x28e361(0x195)]-0x1][_0x28e361(0x17e)]){_0x3974f2['push'](_0x30a17a),_0x30a17a[_0x28e361(0x1f3)]=_0x59e97d,_0x5cf323=!![];break;}}!_0x5cf323&&(_0x581113[_0x28e361(0x137)]([_0x30a17a]),_0x30a17a['colIndex']=_0x581113[_0x28e361(0x195)]-0x1);}),_0x268778['forEach'](_0x50c5b5=>{const _0x169abf=_0x19fbc9;let _0x1c84b8=0x0;_0x268778[_0x169abf(0x1e7)](_0x2ed245=>{const _0x153a87=_0x169abf;if(Math[_0x153a87(0x1ad)](_0x50c5b5['start'],_0x2ed245['start'])<Math[_0x153a87(0x1db)](_0x50c5b5['end'],_0x2ed245['end'])&&_0x2ed245[_0x153a87(0x1f3)]>_0x1c84b8)_0x1c84b8=_0x2ed245[_0x153a87(0x1f3)];});const _0x20e934=_0x1c84b8+0x1,_0x498fc6=0x64/_0x20e934,_0xc66b97=_0x50c5b5['colIndex']*_0x498fc6,_0x4098ad=document[_0x169abf(0x191)]('div'),_0x1de078=_0x50c5b5['data'];let _0x2982a0=_0x169abf(0x14d);if(clients&&clients[_0x169abf(0x195)]>0x0){const _0x478927=clients[_0x169abf(0x1ef)](_0x2a19eb=>String(_0x2a19eb['id'])===String(_0x1de078[_0x169abf(0x174)]));if(_0x478927&&_0x478927[_0x169abf(0x21c)])_0x2982a0=_0x478927[_0x169abf(0x21c)];}const _0x21abb9=_0x1de078[_0x169abf(0x207)]===_0x169abf(0x203),_0x469546=_0x21abb9?0x1:0.45;_0x4098ad['className']=_0x169abf(0x140)+(_0x21abb9?'\x20status-completed':''),_0x4098ad[_0x169abf(0x17b)][_0x169abf(0x144)]=hexToRgba(_0x2982a0,_0x469546),_0x4098ad[_0x169abf(0x17b)][_0x169abf(0x209)]=_0x2982a0;const _0x544cd1=_0x50c5b5['start']/0x3c*GRID_H,_0x243320=(_0x50c5b5[_0x169abf(0x17e)]-_0x50c5b5[_0x169abf(0x16b)])/0x3c*GRID_H;_0x4098ad['style'][_0x169abf(0x188)]=_0x544cd1+'px',_0x4098ad[_0x169abf(0x17b)][_0x169abf(0x18f)]=Math['max'](_0x243320,0x14)+'px',_0x4098ad['style'][_0x169abf(0x20c)]=_0x169abf(0x1ca)+_0x498fc6+'%\x20-\x204px)',_0x4098ad[_0x169abf(0x17b)]['left']='calc('+_0xc66b97+_0x169abf(0x206),_0x4098ad['style']['zIndex']=0xa+_0x50c5b5[_0x169abf(0x1f3)];if(_0x498fc6<0x55)_0x4098ad['classList']['add'](_0x169abf(0x20b));let _0x4bc9bd='';if(_0x1de078['seriesId'])_0x4bc9bd+='<svg\x20class=\x22card-icon\x20ev-recurring-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222.5\x22><path\x20d=\x22M21.5\x202v6h-6M2.5\x2022v-6h6M2\x2011.5a10\x2010\x200\x200\x201\x2018.8-4.3M22\x2012.5a10\x2010\x200\x200\x201-18.8\x204.3\x22/></svg>';if(_0x21abb9)_0x4bc9bd+='<svg\x20class=\x22card-icon\x20ev-status-icon\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x223\x22><polyline\x20points=\x2220\x206\x209\x2017\x204\x2012\x22/></svg>';_0x4098ad['innerHTML']=_0x169abf(0x13b)+_0x1de078[_0x169abf(0x16b)]+_0x169abf(0x214)+_0x1de078[_0x169abf(0x17e)]+_0x169abf(0x204)+_0x4bc9bd+_0x169abf(0x172),_0x4098ad[_0x169abf(0x1ac)]=_0x573892=>{const _0x3d089c=_0x169abf;_0x573892[_0x3d089c(0x12f)](),openDetails(_0x1de078);},_0x252df3['appendChild'](_0x4098ad);});}function openAnalytics(){const _0x2cd0a7=a3_0x4dc838,_0x13f8c2=document['querySelector'](_0x2cd0a7(0x152));setAnalyticsPeriod(_0x2cd0a7(0x133),_0x13f8c2),openSheet('analyticsSheet');}function setAnalyticsPeriod(_0x3f6091,_0x4e795f){const _0x17f2f1=a3_0x4dc838;currentAnPeriod=_0x3f6091,document['querySelectorAll']('.period-switch\x20.p-btn')[_0x17f2f1(0x1e7)](_0x428a27=>_0x428a27[_0x17f2f1(0x1e2)][_0x17f2f1(0x12b)](_0x17f2f1(0x1b4)));if(_0x4e795f)_0x4e795f[_0x17f2f1(0x1e2)][_0x17f2f1(0x16c)](_0x17f2f1(0x1b4));const _0x225ca2=document[_0x17f2f1(0x14a)](_0x17f2f1(0x162));_0x225ca2[_0x17f2f1(0x17b)][_0x17f2f1(0x13a)]=_0x3f6091===_0x17f2f1(0x1a5)?_0x17f2f1(0x1f1):'none';const _0x26662c=new Date();let _0x199c8f=new Date(),_0x18523e=new Date();if(_0x3f6091==='week')_0x199c8f=getStartOfWeek(_0x26662c),_0x18523e=new Date(_0x199c8f),_0x18523e[_0x17f2f1(0x154)](_0x18523e[_0x17f2f1(0x21e)]()+0x6);else{if(_0x3f6091===_0x17f2f1(0x169))_0x199c8f=new Date(_0x26662c[_0x17f2f1(0x15c)](),_0x26662c[_0x17f2f1(0x1cc)](),0x1),_0x18523e=new Date(_0x26662c[_0x17f2f1(0x15c)](),_0x26662c[_0x17f2f1(0x1cc)]()+0x1,0x0);else{!document[_0x17f2f1(0x14a)](_0x17f2f1(0x1ed))[_0x17f2f1(0x1b2)]&&(document['getElementById'](_0x17f2f1(0x1ed))[_0x17f2f1(0x1b2)]=getLocalDateStr(_0x26662c),document['getElementById']('anEnd')[_0x17f2f1(0x1b2)]=getLocalDateStr(_0x26662c));refreshAnalytics();return;}}document[_0x17f2f1(0x14a)](_0x17f2f1(0x1ed))[_0x17f2f1(0x1b2)]=getLocalDateStr(_0x199c8f),document['getElementById'](_0x17f2f1(0x15b))['value']=getLocalDateStr(_0x18523e),refreshAnalytics();}function a3_0x40f6(_0xc3cda,_0x4edfab){_0xc3cda=_0xc3cda-0x12b;const _0x53727f=a3_0x4d78();let _0x12f761=_0x53727f[_0xc3cda];return _0x12f761;}function refreshAnalytics(){const _0x415811=a3_0x4dc838,_0x30ef97=document[_0x415811(0x14a)]('anStart')['value'],_0x1c60e9=document[_0x415811(0x14a)](_0x415811(0x15b))[_0x415811(0x1b2)];if(!_0x30ef97||!_0x1c60e9)return;const _0x46fa16=sessions[_0x415811(0x19b)](_0x4ede8d=>_0x4ede8d[_0x415811(0x1f6)]>=_0x30ef97&&_0x4ede8d[_0x415811(0x1f6)]<=_0x1c60e9&&_0x4ede8d[_0x415811(0x207)]!=='cancelled'),_0x57263e=_0x46fa16[_0x415811(0x195)],_0x2bab41=_0x46fa16[_0x415811(0x19b)](_0x4fc3f0=>_0x4fc3f0['status']===_0x415811(0x203))['length'],_0x3fe740=_0x57263e>0x0?Math[_0x415811(0x135)](_0x2bab41/_0x57263e*0x64):0x0;document['getElementById'](_0x415811(0x1a3))['textContent']=_0x3fe740+'%',document[_0x415811(0x14a)](_0x415811(0x1d1))[_0x415811(0x1fc)]=_0x2bab41+'\x20–∏–∑\x20'+_0x57263e+_0x415811(0x202);const _0x336c69=document['getElementById']('anDonutCircle'),_0x445722=0x2*Math['PI']*0x23,_0x8c1085=_0x445722-_0x3fe740/0x64*_0x445722;_0x336c69[_0x415811(0x17b)]['strokeDashoffset']=_0x8c1085;const _0x4207eb={};_0x46fa16[_0x415811(0x1e7)](_0x9bf29f=>{const _0x238992=_0x415811,_0x20481c=_0x9bf29f[_0x238992(0x131)]||_0x238992(0x1c9);if(!_0x4207eb[_0x20481c]){const _0x5ea6d4='#'+_0x20481c[_0x238992(0x178)]()[_0x238992(0x189)](0x0,0x6);_0x4207eb[_0x20481c]={'total':0x0,'done':0x0,'color':_0x5ea6d4};}_0x4207eb[_0x20481c]['total']++;if(_0x9bf29f[_0x238992(0x207)]==='completed')_0x4207eb[_0x20481c][_0x238992(0x147)]++;});const _0x3b1079=document[_0x415811(0x14a)](_0x415811(0x13f));_0x3b1079[_0x415811(0x145)]='';const _0x8565bc=Object[_0x415811(0x16f)](_0x4207eb)[_0x415811(0x1d4)]((_0xe2e20c,_0x27642f)=>_0x27642f[0x1][_0x415811(0x1a4)]-_0xe2e20c[0x1][_0x415811(0x1a4)]);if(_0x8565bc[_0x415811(0x195)]===0x0){_0x3b1079['innerHTML']=_0x415811(0x1e1);return;}_0x8565bc[_0x415811(0x1e7)](([_0x224941,_0x166cd8])=>{const _0x49b2c8=_0x415811,_0x2e6138=Math[_0x49b2c8(0x135)](_0x166cd8[_0x49b2c8(0x147)]/_0x166cd8[_0x49b2c8(0x1a4)]*0x64),_0x374c46=document[_0x49b2c8(0x191)](_0x49b2c8(0x165));_0x374c46[_0x49b2c8(0x14b)]=_0x49b2c8(0x142),_0x374c46[_0x49b2c8(0x17b)]['borderLeftColor']=_0x166cd8[_0x49b2c8(0x21c)],_0x374c46[_0x49b2c8(0x145)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-row-top\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-name\x22>–¢—Ä–µ–Ω–µ—Ä\x20#'+_0x224941[_0x49b2c8(0x189)](0x0,0x5)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22csc-nums\x22><span>'+_0x166cd8[_0x49b2c8(0x147)]+_0x49b2c8(0x15e)+_0x166cd8[_0x49b2c8(0x1a4)]+_0x49b2c8(0x157)+_0x2e6138+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3b1079['appendChild'](_0x374c46);});}function a3_0x4d78(){const _0x138b68=['fontWeight','overlay','then','7niBbTo','textContent','ru-RU','setHours','scrollTo','cancelContainer','planned','\x20–≤—ã–ø–æ–ª–Ω–µ–Ω–æ','completed','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','syncLoad','%\x20+\x202px)','status','rs-time-btn','borderLeftColor','timeLineBadge','mini','width','</div><div\x20class=\x22dch-num\x22>','block','constructor','–ü–µ—Ä–µ–Ω–æ—Å\x20–∑–∞–ø–∏—Å–∏','v9.5-CLIENT-ANALYTICS','json','exceptions','\x20-\x20','1AGzcWc','Error\x20setting\x20color:','data-day-idx','insertBefore','loadLocal','setAttribute','5498660QSAXZN','color','‚úÖ\x20–ó–∞–≤–µ—Ä—à–µ–Ω–∞','getDate','cancelHint','onClick','show','toUpperCase','remove','toLocaleString','rgba(10,\x20132,\x20255,\x20','none','stopPropagation','disableVerticalSwipes','coachId','customConfirm','week','split','round','scrollTop','push','getAttribute','.btn-reschedule','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-title\x22>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ev-time\x22>','POST','–£—Å–ø–µ—à–Ω–æ\x20–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ','5137WTQMwa','analyticsList','event-card','findIndex','client-stat-card','data','backgroundColor','innerHTML','globalTimeLine','done','long','25496uTEhHH','getElementById','className','client_load','#0a84ff','initData','ccTitle','charAt','rs-date-chip','.period-switch\x20.p-btn','setItem','setDate','auto','#050505','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-track\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-fill\x22\x20style=\x22width:\x20','map','parse','detailsSheet','anEnd','getFullYear','600','</span>\x20/\x20','addEventListener','backgroundPosition','today','anCustomDates','matrixViewport','location','div','.day-column','Error\x20setting\x20back\x20button:','#ff453a','month','getDay','start','add','headerMonth','uc_client_settings','entries','saveLocally','applyData','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getItem','clientId','788547mGCioL','reschedule','settings','toString','ccText','daysHeaderTrack','style','WebApp','cancel_window','end','toLocaleDateString','100gwQgrS','29616vYkNuh','now','day-column\x20','href','(((.+)+)+)+$','scrollWidth','1961374TLJkgN','top','substr','keys','scrollLeft','.btn-cancel','visible','coach_profiles','height','üìÖ\x20–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞','createElement','offsetLeft','<div\x20class=\x22rs-day-name\x22>','blocked-range-part\x20stripe-bg','length','rsDatesTrack','–û—Ç–º–µ–Ω–µ–Ω–æ','Sync\x20ignored:\x20User\x20action\x20is\x20newer\x20than\x20server\x20response','<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>','clientWidth','filter','day-col-header\x20','\x20—á.','.day-col-header[data-date=\x22','rescheduleSheet','firstChild','<span>','sid','anPercent','total','custom','day-off-overlay\x20stripe-bg','button','ranges',':00</span>','–ü–µ—Ä–µ–Ω–æ—Å–∏–º...','offsetWidth','onclick','max','.rs-date-chip','</div>','ready','<div\x20class=\x22dch-day\x22>','value','user','active','slice','getHours','appendChild','–ò–∑–º–µ–Ω–µ–Ω–∏—è\x20–≤–æ–∑–º–æ–∂–Ω—ã\x20—Ç–æ–ª—å–∫–æ\x20','blocked-slot\x20stripe-bg','join','var(--acc-green)','uc_client_list','time-label','padStart','timeColumn','log','396bpXDHo','T00:00:00','substring','–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏','numeric','open','all','clients','Unknown','calc(','stringify','getMonth','test','gridColumns','expand','router.html','anTotalStats','isArray','<div\x20class=\x22rs-loader\x22>–ü–æ–∏—Å–∫\x20—Å–≤–æ–±–æ–¥–Ω—ã—Ö\x20–æ–∫–æ—à–µ–∫...</div>','sort','–í—ã\x20–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ\x20—Ö–æ—Ç–∏—Ç–µ\x20–æ—Ç–º–µ–Ω–∏—Ç—å\x20—ç—Ç—É\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É?','querySelector','121825YbPPbd','rsSlotsGrid','490962beoEet','–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É\x20–Ω–∞\x20','min','–≤\x20–ª—é–±–æ–µ\x20–≤—Ä–µ–º—è','createDocumentFragment','–û—à–∏–±–∫–∞\x20–ø–µ—Ä–µ–Ω–æ—Å–∞!','DOMContentLoaded','.day-col-header','<div\x20class=\x22empty-state\x22>–ù–µ—Ç\x20—Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫\x20–∑–∞\x20—ç—Ç–æ—Ç\x20–ø–µ—Ä–∏–æ–¥</div>','classList','T23:59:59','.blocked-slot,\x20.day-off-overlay,\x20.blocked-range-part,\x20.event-card','Telegram','getTime','forEach','calendar','pattern','.sheet','cid','px\x20-','anStart','rgba(','find','BackButton','flex','querySelectorAll','colIndex','–û—Ç–º–µ–Ω–∞\x20–∑–∞–ø–∏—Å–∏','\x20–≤\x20','dateStr','data-date'];a3_0x4d78=function(){return _0x138b68;};return a3_0x4d78();}function openDetails(_0x5e64c3){const _0x56097d=a3_0x4dc838;currentSession=_0x5e64c3;const _0x568697=new Date(_0x5e64c3[_0x56097d(0x1f6)]),_0x3ca41f=_0x568697['toLocaleDateString'](_0x56097d(0x1fd),{'weekday':'long','day':_0x56097d(0x1c5),'month':_0x56097d(0x148)});document[_0x56097d(0x14a)]('detDate')[_0x56097d(0x1fc)]=_0x3ca41f[_0x56097d(0x150)](0x0)[_0x56097d(0x222)]()+_0x3ca41f[_0x56097d(0x1b5)](0x1),document[_0x56097d(0x14a)]('detTime')[_0x56097d(0x1fc)]=_0x5e64c3[_0x56097d(0x16b)]+_0x56097d(0x214)+_0x5e64c3['end'],document[_0x56097d(0x14a)]('detNote')[_0x56097d(0x1fc)]=_0x5e64c3['note']||'–ë–µ–∑\x20–∑–∞–º–µ—Ç–æ–∫';const _0x495cb0=document['getElementById']('detStatus'),_0x1cde9f=document[_0x56097d(0x14a)](_0x56097d(0x200)),_0x556888=_0x1cde9f['querySelector'](_0x56097d(0x18c)),_0x2a6885=_0x1cde9f[_0x56097d(0x1d6)](_0x56097d(0x139)),_0x59751e=document[_0x56097d(0x14a)](_0x56097d(0x21f));if(_0x5e64c3['status']===_0x56097d(0x203))_0x495cb0[_0x56097d(0x1fc)]=_0x56097d(0x21d),_0x495cb0['style'][_0x56097d(0x21c)]=_0x56097d(0x1bb),_0x1cde9f[_0x56097d(0x17b)][_0x56097d(0x13a)]=_0x56097d(0x12e);else{_0x495cb0[_0x56097d(0x1fc)]=_0x56097d(0x190),_0x495cb0[_0x56097d(0x17b)][_0x56097d(0x21c)]='var(--acc-blue)',_0x1cde9f[_0x56097d(0x17b)][_0x56097d(0x13a)]=_0x56097d(0x20e);const _0x5deb11=new Date(_0x5e64c3['dateStr']+'T'+_0x5e64c3[_0x56097d(0x16b)]),_0x25ba82=new Date(),_0x5cb2f0=(_0x5deb11-_0x25ba82)/(0x3e8*0x3c*0x3c),_0x3b867c=coachProfiles[_0x5e64c3[_0x56097d(0x131)]]&&coachProfiles[_0x5e64c3['coachId']][_0x56097d(0x17d)]?parseInt(coachProfiles[_0x5e64c3[_0x56097d(0x131)]][_0x56097d(0x17d)]):0x18;if(_0x3b867c===0x0||_0x5cb2f0>=_0x3b867c)_0x556888[_0x56097d(0x17b)][_0x56097d(0x13a)]=_0x56097d(0x20e),_0x2a6885[_0x56097d(0x17b)]['display']=_0x56097d(0x20e),_0x59751e['style']['display']=_0x56097d(0x12e);else{_0x556888['style']['display']=_0x56097d(0x12e),_0x2a6885['style']['display']='none',_0x59751e[_0x56097d(0x17b)][_0x56097d(0x13a)]=_0x56097d(0x20e);let _0x23c7aa=_0x3b867c===0x0?_0x56097d(0x1dc):'–∑–∞\x20'+_0x3b867c+_0x56097d(0x19d);_0x59751e[_0x56097d(0x1fc)]=_0x56097d(0x1b8)+_0x23c7aa+'\x20–¥–æ\x20–Ω–∞—á–∞–ª–∞';}}document['getElementById']('overlay')[_0x56097d(0x1e2)][_0x56097d(0x16c)](_0x56097d(0x1b4)),document['getElementById'](_0x56097d(0x15a))[_0x56097d(0x1e2)][_0x56097d(0x16c)](_0x56097d(0x1c6));}function closeAllSheets(){const _0x4eacf6=a3_0x4dc838;document[_0x4eacf6(0x14a)]('overlay')['classList']['remove'](_0x4eacf6(0x1b4)),document[_0x4eacf6(0x1f2)](_0x4eacf6(0x1ea))[_0x4eacf6(0x1e7)](_0x49fd0e=>_0x49fd0e[_0x4eacf6(0x1e2)][_0x4eacf6(0x12b)](_0x4eacf6(0x1c6)));}function openSheet(_0xfe7cb){const _0x153e67=a3_0x4dc838;document['getElementById'](_0x153e67(0x1f9))[_0x153e67(0x1e2)][_0x153e67(0x16c)](_0x153e67(0x1b4)),document['getElementById'](_0xfe7cb)['classList'][_0x153e67(0x16c)]('open');}function getLocalDateStr(_0x292ec6){const _0x207eca=a3_0x4dc838,_0x4d1be4=_0x292ec6[_0x207eca(0x15c)](),_0xef768a=String(_0x292ec6[_0x207eca(0x1cc)]()+0x1)[_0x207eca(0x1be)](0x2,'0'),_0x4e5605=String(_0x292ec6[_0x207eca(0x21e)]())['padStart'](0x2,'0');return _0x4d1be4+'-'+_0xef768a+'-'+_0x4e5605;}function getStartOfWeek(_0x32284f){const _0x2bcb60=a3_0x4dc838,_0x326750=new Date(_0x32284f),_0x2055da=_0x326750[_0x2bcb60(0x16a)](),_0x590f0e=_0x326750[_0x2bcb60(0x21e)]()-_0x2055da+(_0x2055da===0x0?-0x6:0x1);return _0x326750[_0x2bcb60(0x154)](_0x590f0e),_0x326750[_0x2bcb60(0x1fe)](0x0,0x0,0x0,0x0),_0x326750;}function scrollToToday(){const _0x8a8482=getLocalDateStr(new Date());setTimeout(()=>{const _0x330d2d=a3_0x40f6,_0x23c3cb=document[_0x330d2d(0x1d6)](_0x330d2d(0x19e)+_0x8a8482+'\x22]');if(_0x23c3cb){const _0xc2c7a2=document[_0x330d2d(0x14a)]('matrixViewport'),_0x498d4f=_0x23c3cb[_0x330d2d(0x192)]-_0xc2c7a2[_0x330d2d(0x19a)]/0x2+_0x23c3cb[_0x330d2d(0x1ab)]/0x2;_0xc2c7a2[_0x330d2d(0x1ff)]({'left':_0x498d4f,'behavior':_0x330d2d(0x155)}),_0xc2c7a2[_0x330d2d(0x136)]=0x9*GRID_H;}},0x32);}function startClock(){updateClock();if(updateInterval)clearInterval(updateInterval);updateInterval=setInterval(updateClock,0xea60);}function updateClock(){const _0x17d75a=a3_0x4dc838,_0x21c5e3=new Date(),_0x1a49a7=document[_0x17d75a(0x14a)](_0x17d75a(0x146)),_0xa7e59=document[_0x17d75a(0x14a)]('timeLineBadge'),_0x4691a0=(_0x21c5e3[_0x17d75a(0x1b6)]()*0x3c+_0x21c5e3['getMinutes']())/0x3c*GRID_H;_0x1a49a7[_0x17d75a(0x17b)]['top']=_0x4691a0+'px',_0x1a49a7[_0x17d75a(0x17b)]['display']='block',_0xa7e59[_0x17d75a(0x17b)]['top']=_0x4691a0+'px',_0xa7e59['style']['display']=_0x17d75a(0x20e),_0xa7e59[_0x17d75a(0x1fc)]=String(_0x21c5e3[_0x17d75a(0x1b6)]())['padStart'](0x2,'0')+':'+String(_0x21c5e3['getMinutes']())[_0x17d75a(0x1be)](0x2,'0');}function onScroll(){const _0x585a05=a3_0x4dc838,_0x575030=document['getElementById'](_0x585a05(0x163)),_0x175b64=document[_0x585a05(0x1f2)](_0x585a05(0x1e0));for(let _0x41a153 of _0x175b64)if(_0x41a153[_0x585a05(0x192)]>=_0x575030['scrollLeft']){const _0x254e60=new Date(_0x41a153[_0x585a05(0x138)](_0x585a05(0x1f7)));document[_0x585a05(0x14a)](_0x585a05(0x16d))[_0x585a05(0x1fc)]=_0x254e60[_0x585a05(0x12c)]('ru',{'month':'long'})['toUpperCase']()+'\x20'+_0x254e60['getFullYear']();break;}}function showToast(_0x569bd4){const _0x1cdeb9=a3_0x4dc838,_0x2a0f54=document[_0x1cdeb9(0x14a)]('toast');_0x2a0f54[_0x1cdeb9(0x1fc)]=_0x569bd4,_0x2a0f54[_0x1cdeb9(0x1e2)][_0x1cdeb9(0x16c)]('show'),setTimeout(()=>_0x2a0f54[_0x1cdeb9(0x1e2)][_0x1cdeb9(0x12b)](_0x1cdeb9(0x221)),0x7d0);}function handleInfiniteScroll(){const _0x228f4a=a3_0x4dc838,_0x15d432=document['getElementById'](_0x228f4a(0x163)),_0x413d63=_0x15d432[_0x228f4a(0x18b)],_0x5395c6=_0x15d432[_0x228f4a(0x186)],_0x58f1a3=_0x15d432[_0x228f4a(0x19a)];if(_0x5395c6-(_0x413d63+_0x58f1a3)<0x12c){const _0x5e321f=endOffset;endOffset+=0xe,renderDayRange(_0x5e321f+0x1,endOffset),reRenderBlocks();}if(_0x413d63<0x12c){const _0x44d0e1=startOffset;startOffset-=0xe,prependDays(startOffset,_0x44d0e1-0x1),_0x15d432[_0x228f4a(0x18b)]+=0xe*0x41,reRenderBlocks();}}function prependDays(_0x5b227b,_0x34fecd){const _0x39ccad=a3_0x4dc838,_0xf95ea3=document[_0x39ccad(0x14a)](_0x39ccad(0x17a)),_0x1e82ee=document[_0x39ccad(0x14a)]('gridColumns'),_0x3834a8=['–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë','–í–°'],_0x462832=new Date();_0x462832[_0x39ccad(0x1fe)](0x0,0x0,0x0,0x0);const _0x193e9c=getLocalDateStr(new Date()),_0x35d4b0=document[_0x39ccad(0x1dd)](),_0x2acd3f=document[_0x39ccad(0x1dd)]();for(let _0x213817=_0x5b227b;_0x213817<=_0x34fecd;_0x213817++){const _0xe9fe=new Date(_0x462832);_0xe9fe['setDate'](_0xe9fe[_0x39ccad(0x21e)]()+_0x213817);const _0x28104b=getLocalDateStr(_0xe9fe);let _0x3f45b2=_0xe9fe[_0x39ccad(0x16a)]()-0x1;if(_0x3f45b2===-0x1)_0x3f45b2=0x6;const _0x234656=_0x28104b===_0x193e9c,_0x447b53=document['createElement']('div');_0x447b53['className']=_0x39ccad(0x19c)+(_0x234656?_0x39ccad(0x161):''),_0x447b53[_0x39ccad(0x21a)](_0x39ccad(0x1f7),_0x28104b),_0x447b53['innerHTML']=_0x39ccad(0x1b1)+_0x3834a8[_0x3f45b2]+_0x39ccad(0x20d)+_0xe9fe['getDate']()+_0x39ccad(0x1af),_0x35d4b0[_0x39ccad(0x1b7)](_0x447b53);const _0x512a5c=document['createElement'](_0x39ccad(0x165));_0x512a5c['className']=_0x39ccad(0x183)+(_0x234656?_0x39ccad(0x161):''),_0x512a5c[_0x39ccad(0x21a)](_0x39ccad(0x1f7),_0x28104b),_0x512a5c['setAttribute'](_0x39ccad(0x217),_0x3f45b2),_0x2acd3f['appendChild'](_0x512a5c);}_0xf95ea3[_0x39ccad(0x218)](_0x35d4b0,_0xf95ea3[_0x39ccad(0x1a0)]),_0x1e82ee[_0x39ccad(0x218)](_0x2acd3f,_0x1e82ee[_0x39ccad(0x1d6)](_0x39ccad(0x166)));}function hexToRgba(_0x18184d,_0x3315ab){const _0x26a6bf=a3_0x4dc838;let _0x53a943;if(/^#([A-Fa-f0-9]{3}){1,2}$/[_0x26a6bf(0x1cd)](_0x18184d))return _0x53a943=_0x18184d[_0x26a6bf(0x1c3)](0x1)['split'](''),_0x53a943[_0x26a6bf(0x195)]==0x3&&(_0x53a943=[_0x53a943[0x0],_0x53a943[0x0],_0x53a943[0x1],_0x53a943[0x1],_0x53a943[0x2],_0x53a943[0x2]]),_0x53a943='0x'+_0x53a943[_0x26a6bf(0x1ba)](''),_0x26a6bf(0x1ee)+[_0x53a943>>0x10&0xff,_0x53a943>>0x8&0xff,_0x53a943&0xff]['join'](',')+','+_0x3315ab+')';return _0x26a6bf(0x12d)+_0x3315ab+')';}let confirmResolver=null;function showCustomConfirm(_0x498fc5,_0x399f46,_0x5ab3b1=!![]){const _0x450466=a3_0x4dc838;document[_0x450466(0x14a)](_0x450466(0x14f))[_0x450466(0x1fc)]=_0x498fc5,document[_0x450466(0x14a)](_0x450466(0x179))[_0x450466(0x1fc)]=_0x399f46;const _0xa87eea=document[_0x450466(0x14a)]('ccYesBtn');return _0x5ab3b1?(_0xa87eea['style']['color']=_0x450466(0x168),_0xa87eea['style'][_0x450466(0x1f8)]=_0x450466(0x15d)):(_0xa87eea[_0x450466(0x17b)][_0x450466(0x21c)]=_0x450466(0x14d),_0xa87eea[_0x450466(0x17b)][_0x450466(0x1f8)]=_0x450466(0x15d)),new Promise(_0x25191d=>{const _0x5ed20b=_0x450466;confirmResolver=_0x25191d,document['getElementById']('customConfirm')[_0x5ed20b(0x1e2)]['add'](_0x5ed20b(0x18d));});}function resolveCustomConfirm(_0x4f8228){const _0x1e51be=a3_0x4dc838;document[_0x1e51be(0x14a)](_0x1e51be(0x132))[_0x1e51be(0x1e2)][_0x1e51be(0x12b)]('visible');if(confirmResolver)confirmResolver(_0x4f8228);}async function tryCancelCurrentSession(){const _0x2ef865=a3_0x4dc838;if(!currentSession)return;const _0x48df51=await showCustomConfirm(_0x2ef865(0x1f4),_0x2ef865(0x1d5),!![]);if(!_0x48df51)return;const _0x32750d=currentSession;closeAllSheets(),sessions=sessions[_0x2ef865(0x19b)](_0x425560=>_0x425560['id']!==_0x32750d['id']),reRenderBlocks(),showToast(_0x2ef865(0x197)),lastUserActionTime=Date['now']();try{const _0xddd7b9=window['Telegram']?.['WebApp'],_0x488a05=await fetch(API_URL,{'method':_0x2ef865(0x13c),'body':JSON[_0x2ef865(0x1cb)]({'action':'client_cancel','init_data':_0xddd7b9?.['initData']||'','coachId':_0x32750d['coachId'],'dateStr':_0x32750d[_0x2ef865(0x1f6)],'sessionId':_0x32750d['id']})});if(_0x488a05['ok'])DataManager['saveLocally']();}catch(_0x3c3543){showToast('–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏');}}let availableSlotsCache={},selectedRsDate=null;async function startRescheduleFlow(){const _0x273509=a3_0x4dc838;if(!currentSession)return;document[_0x273509(0x14a)](_0x273509(0x15a))[_0x273509(0x1e2)]['remove']('open'),document[_0x273509(0x14a)](_0x273509(0x19f))[_0x273509(0x1e2)][_0x273509(0x16c)](_0x273509(0x1c6));const _0x466742=document['getElementById']('rsDatesTrack'),_0x3ce67c=document[_0x273509(0x14a)](_0x273509(0x1d8));_0x466742[_0x273509(0x145)]='',_0x3ce67c[_0x273509(0x145)]=_0x273509(0x1d3);const [_0x30ed75,_0x2d7b96]=currentSession[_0x273509(0x16b)][_0x273509(0x134)](':')['map'](Number),[_0x2f151a,_0x11c9fe]=currentSession[_0x273509(0x17e)][_0x273509(0x134)](':')[_0x273509(0x158)](Number),_0x29e01f=_0x2f151a*0x3c+_0x11c9fe-(_0x30ed75*0x3c+_0x2d7b96);try{const _0x4ee936=window[_0x273509(0x1e5)]?.[_0x273509(0x17c)],_0x4954b1=await fetch(API_URL,{'method':_0x273509(0x13c),'body':JSON['stringify']({'action':'get_slots','coachId':currentSession['coachId'],'duration':_0x29e01f,'init_data':_0x4ee936?.['initData']||'','excludeSessionId':currentSession['id']})}),_0x3c3c0d=await _0x4954b1['json']();_0x3c3c0d['ok']&&_0x3c3c0d['data']?(availableSlotsCache=_0x3c3c0d['data'],renderRescheduleDates()):_0x3ce67c[_0x273509(0x145)]='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20–º–µ—Å—Ç</div>';}catch(_0x10fd49){_0x3ce67c[_0x273509(0x145)]='<div\x20class=\x22rs-empty\x22>–û—à–∏–±–∫–∞\x20—Å–µ—Ç–∏</div>';}}function renderRescheduleDates(){const _0x3f2607=a3_0x4dc838,_0x54e29c=document[_0x3f2607(0x14a)](_0x3f2607(0x196));_0x54e29c['innerHTML']='';const _0x187915=Object[_0x3f2607(0x18a)](availableSlotsCache)['sort'](),_0x5c2428=['–í–°','–ü–ù','–í–¢','–°–†','–ß–¢','–ü–¢','–°–ë'];if(_0x187915[_0x3f2607(0x195)]===0x0){document['getElementById']('rsSlotsGrid')['innerHTML']='<div\x20class=\x22rs-empty\x22>–ù–µ—Ç\x20—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ\x20–≤—Ä–µ–º–µ–Ω–∏\x20–Ω–∞\x20–±–ª–∏–∂–∞–π—à–∏–µ\x2014\x20–¥–Ω–µ–π</div>';return;}_0x187915[_0x3f2607(0x1e7)]((_0x384d5e,_0x5ed8b7)=>{const _0x14593d=_0x3f2607,_0x255511=new Date(_0x384d5e),_0x4630cd=_0x5c2428[_0x255511[_0x14593d(0x16a)]()],_0x2bfe3e=_0x255511['getDate'](),_0x5c83d=document[_0x14593d(0x191)](_0x14593d(0x165));_0x5c83d['className']=_0x14593d(0x151);if(_0x5ed8b7===0x0)_0x5c83d[_0x14593d(0x1e2)]['add']('active');_0x5c83d[_0x14593d(0x145)]=_0x14593d(0x193)+_0x4630cd+'</div><div\x20class=\x22rs-day-num\x22>'+_0x2bfe3e+_0x14593d(0x1af),_0x5c83d['onclick']=()=>selectRsDate(_0x384d5e,_0x5c83d),_0x54e29c['appendChild'](_0x5c83d);}),selectRsDate(_0x187915[0x0],_0x54e29c[_0x3f2607(0x1a0)]);}function selectRsDate(_0x1ac94a,_0x2a2d9b){const _0x480d0a=a3_0x4dc838;selectedRsDate=_0x1ac94a,document['querySelectorAll'](_0x480d0a(0x1ae))[_0x480d0a(0x1e7)](_0x81e241=>_0x81e241[_0x480d0a(0x1e2)]['remove'](_0x480d0a(0x1b4)));if(_0x2a2d9b)_0x2a2d9b[_0x480d0a(0x1e2)][_0x480d0a(0x16c)]('active');const _0x5ec0a0=document[_0x480d0a(0x14a)](_0x480d0a(0x1d8));_0x5ec0a0[_0x480d0a(0x145)]='';const _0x2c46df=availableSlotsCache[_0x1ac94a]||[];if(_0x2c46df[_0x480d0a(0x195)]===0x0){_0x5ec0a0[_0x480d0a(0x145)]=_0x480d0a(0x199);return;}_0x2c46df[_0x480d0a(0x1e7)](_0x4db4a3=>{const _0x3a49ee=_0x480d0a,_0x111868=document['createElement'](_0x3a49ee(0x1a7));_0x111868[_0x3a49ee(0x14b)]=_0x3a49ee(0x208),_0x111868[_0x3a49ee(0x1fc)]=_0x4db4a3,_0x111868[_0x3a49ee(0x1ac)]=()=>confirmReschedule(_0x4db4a3),_0x5ec0a0['appendChild'](_0x111868);});}async function confirmReschedule(_0x2ceaed){const _0x43e331=a3_0x4dc838,_0x3fe802=new Date(selectedRsDate),_0x5639a7=_0x3fe802[_0x43e331(0x17f)](_0x43e331(0x1fd),{'day':_0x43e331(0x1c5),'month':'long'}),_0x2397e3=await showCustomConfirm(_0x43e331(0x210),_0x43e331(0x1da)+_0x5639a7+_0x43e331(0x1f5)+_0x2ceaed+'?',![]);if(!_0x2397e3)return;closeAllSheets(),showToast(_0x43e331(0x1aa)),lastUserActionTime=Date[_0x43e331(0x182)]();const _0x433d2a=currentSession[_0x43e331(0x1f6)],_0x284bf7=currentSession['id'],[_0x3d22f8,_0x9afe89]=currentSession[_0x43e331(0x16b)][_0x43e331(0x134)](':')[_0x43e331(0x158)](Number),[_0x4ecab9,_0x429229]=currentSession['end'][_0x43e331(0x134)](':')[_0x43e331(0x158)](Number),_0x9143c3=_0x4ecab9*0x3c+_0x429229-(_0x3d22f8*0x3c+_0x9afe89),[_0x20d655,_0x557410]=_0x2ceaed[_0x43e331(0x134)](':')[_0x43e331(0x158)](Number),_0x456094=_0x20d655*0x3c+_0x557410+_0x9143c3,_0x92c3a=Math['floor'](_0x456094/0x3c),_0x45d1d9=_0x456094%0x3c,_0x4eb71b=String(_0x92c3a)[_0x43e331(0x1be)](0x2,'0')+':'+String(_0x45d1d9)[_0x43e331(0x1be)](0x2,'0'),_0x5b69ae=sessions[_0x43e331(0x141)](_0x238c08=>_0x238c08['id']===_0x284bf7);_0x5b69ae!==-0x1&&(sessions[_0x5b69ae]['dateStr']=selectedRsDate,sessions[_0x5b69ae][_0x43e331(0x16b)]=_0x2ceaed,sessions[_0x5b69ae]['end']=_0x4eb71b,reRenderBlocks());try{const _0x1561cf=window[_0x43e331(0x1e5)]?.[_0x43e331(0x17c)],_0x26e386=await fetch(API_URL,{'method':_0x43e331(0x13c),'body':JSON[_0x43e331(0x1cb)]({'action':_0x43e331(0x176),'init_data':_0x1561cf?.[_0x43e331(0x14e)]||'','oldSessionId':_0x284bf7,'oldDate':_0x433d2a,'newDate':selectedRsDate,'newTime':_0x2ceaed,'coachId':currentSession[_0x43e331(0x131)]})}),_0x1226b7=await _0x26e386[_0x43e331(0x212)]();!_0x1226b7['ok']?(showToast(_0x43e331(0x1de)),DataManager[_0x43e331(0x205)]()):(showToast(_0x43e331(0x13d)),DataManager[_0x43e331(0x170)]());}catch(_0xbf2834){showToast(_0x43e331(0x1c4));}}document[a3_0x4dc838(0x15f)](a3_0x4dc838(0x1df),init);