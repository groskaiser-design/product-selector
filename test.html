<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
<title>Ultima Dashboard</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  :root {
    /* --- –¶–í–ï–¢–ê (Deep Space) --- */
    --bg-dark: #0f0c29;
    --bg-gradient: radial-gradient(circle at 50% 0%, #43306d 0%, #0f0c29 60%);
    
    /* --- –ú–ê–¢–ï–†–ò–ê–õ–´ --- */
    --surface-base: rgba(22, 20, 40, 0.7);
    --surface-card: rgba(255, 255, 255, 0.06);
    --surface-card-hover: rgba(255, 255, 255, 0.1);
    
    /* --- –î–ï–¢–ê–õ–ò–ó–ê–¶–ò–Ø --- */
    --border-light: 1px solid rgba(255, 255, 255, 0.12);
    --border-highlight: 1px solid rgba(255, 255, 255, 0.25); /* –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω—å */
    --shadow-card: 0 4px 24px rgba(0, 0, 0, 0.4);
    
    /* --- –¢–ò–ü–û–ì–†–ê–§–ò–ö–ê --- */
    --font-stack: -apple-system, BlinkMacSystemFont, 'SF Pro Text', Roboto, sans-serif;
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.55);
    --text-tertiary: rgba(255, 255, 255, 0.35);
    
    /* --- –ê–ö–¶–ï–ù–¢–´ --- */
    --accent-orange: #ff9f0a;
    --accent-blue: #0a84ff;
    --accent-green: #30d158;
    
    /* --- –†–ê–ó–ú–ï–†–´ --- */
    --pad: 16px;
    --r-xl: 24px;
    --r-l: 18px;
    --r-m: 14px;
  }

  /* === –ë–ê–ó–ê === */
  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  
  body {
    font-family: var(--font-stack);
    background-color: var(--bg-dark);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-y: auto;
    -webkit-font-smoothing: antialiased; /* –ß–µ—Ç–∫–∏–µ —à—Ä–∏—Ñ—Ç—ã –Ω–∞ iOS */
  }

  /* –°–ª–æ–∂–Ω—ã–π —Ñ–æ–Ω —Å —à—É–º–æ–º */
  .background {
    position: fixed; inset: 0; z-index: -1;
    background: var(--bg-gradient);
  }
  .noise {
    position: fixed; inset: 0; z-index: -1;
    opacity: 0.04;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    pointer-events: none;
  }

  .page-content {
    max-width: 480px; margin: 0 auto;
    padding: var(--pad);
    padding-top: calc(var(--pad) + env(safe-area-inset-top));
    padding-bottom: calc(80px + env(safe-area-inset-bottom));
    display: flex; flex-direction: column; gap: 24px;
  }

  /* === 1. HEADER (Minimalism) === */
  .header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 8px;
  }
  .user-block {
    display: flex; flex-direction: column;
  }
  .greeting {
    font-size: 13px; color: var(--text-secondary); 
    text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600;
  }
  .username {
    font-size: 26px; font-weight: 800; letter-spacing: -0.5px;
    background: linear-gradient(to right, #fff, #ccc);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }
  
  .avatar {
    width: 44px; height: 44px; border-radius: 50%;
    background: var(--surface-card);
    border: var(--border-light);
    display: flex; align-items: center; justify-content: center;
    overflow: hidden; position: relative;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }
  .avatar img { width: 100%; height: 100%; object-fit: cover; }
  .avatar-text { font-weight: 700; font-size: 16px; color: #fff; }

  /* === 2. WIDGET AREA (High Impact) === */
  /* –û–¥–∏–Ω –≥–ª–∞–≤–Ω—ã–π –≤–∏–¥–∂–µ—Ç —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Ñ–æ–∫—É—Å–æ–º */
  .hero-widget {
    position: relative;
    height: 160px;
    border-radius: var(--r-xl);
    padding: 20px;
    display: flex; flex-direction: column; justify-content: space-between;
    overflow: hidden;
    
    /* Glass Effect High Quality */
    background: rgba(255, 255, 255, 0.04);
    backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);
    border: var(--border-light);
    border-top: var(--border-highlight); /* –°–≤–µ—Ç —Å–≤–µ—Ä—Ö—É */
    box-shadow: var(--shadow-card);
  }
  
  /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
  .hero-widget::after {
    content: ''; position: absolute; top: 0; right: 0; width: 100%; height: 100%;
    background: radial-gradient(circle at 100% 0%, rgba(255, 159, 10, 0.15), transparent 50%);
    pointer-events: none;
  }

  .hw-header { display: flex; justify-content: space-between; align-items: flex-start; z-index: 2; }
  .hw-title { font-size: 14px; font-weight: 600; color: var(--text-secondary); display: flex; align-items: center; gap: 6px; }
  .hw-title span { color: var(--accent-orange); } /* –ò–∫–æ–Ω–∫–∞ –æ–≥–Ω—è —Ü–≤–µ—Ç–æ–º */
  
  .hw-main-val { font-size: 36px; font-weight: 800; line-height: 1; letter-spacing: -1px; margin-top: 4px; }
  .hw-unit { font-size: 16px; font-weight: 500; color: var(--text-secondary); margin-left: 4px; }

  .hw-footer { z-index: 2; }
  .progress-track {
    height: 6px; width: 100%; background: rgba(255,255,255,0.1);
    border-radius: 10px; margin-bottom: 8px; overflow: hidden;
  }
  .progress-fill {
    height: 100%; width: 60%; /* Dynamic */
    background: linear-gradient(90deg, #ff9f0a, #ffcc00);
    border-radius: 10px;
    box-shadow: 0 0 12px rgba(255, 159, 10, 0.4);
  }
  
  .hw-macros { display: flex; gap: 16px; font-size: 12px; font-weight: 500; color: var(--text-secondary); }
  .macro-val { color: #fff; font-weight: 700; margin-left: 3px; }

  /* –¢–æ—á–∫–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –ø–æ–¥ –≤–∏–¥–∂–µ—Ç–æ–º */
  .dots { display: flex; justify-content: center; gap: 6px; margin-top: -12px; margin-bottom: 8px;}
  .dot { width: 4px; height: 4px; border-radius: 50%; background: var(--text-tertiary); }
  .dot.active { background: #fff; width: 12px; border-radius: 4px; opacity: 0.8; }


  /* === 3. BENTO GRID (Navigation) === */
  /* –°–µ—Ç–∫–∞ —Å—Ç–∞–ª–∞ —É–º–Ω–æ–π. –ì–ª–∞–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –±–æ–ª—å—à–µ, –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ */
  .bento-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ */
    grid-auto-rows: 90px; /* –ë–∞–∑–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ */
    gap: 12px;
  }

  /* –ö–ª–∞—Å—Å—ã —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–ª–∏—Ç–æ–∫ */
  .tile {
    position: relative;
    border-radius: var(--r-l);
    background: var(--surface-card);
    border: var(--border-light);
    /* –°–≤–µ—Ç —Å–≤–µ—Ä—Ö—É –¥–ª—è –æ–±—ä–µ–º–∞ */
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1); 
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    cursor: pointer;
    transition: transform 0.1s, background 0.2s;
    overflow: hidden;
  }
  .tile:active { transform: scale(0.97); background: var(--surface-card-hover); }

  /* –ë–æ–ª—å—à–∏–µ –ø–ª–∏—Ç–∫–∏ (2x1) */
  .tile.wide { grid-column: span 2; align-items: flex-start; padding: 16px; }
  .tile.wide .icon-box { margin-bottom: auto; } /* –ò–∫–æ–Ω–∫–∞ —Å–≤–µ—Ä—Ö—É */
  
  /* –û–±—ã—á–Ω—ã–µ –ø–ª–∏—Ç–∫–∏ (1x1) - –∑–∞–Ω–∏–º–∞—é—Ç 1 –∫–æ–ª–æ–Ω–∫—É –≤ 4-–∫–æ–ª–æ–Ω–æ—á–Ω–æ–π —Å–µ—Ç–∫–µ? –ù–µ—Ç, –ª—É—á—à–µ 2x2 –≤ 6 –∏–ª–∏ 1.3 */
  /* –î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º –ø—Ä–æ—â–µ: —Å–µ—Ç–∫–∞ 2 –∫–æ–ª–æ–Ω–∫–∏. */
  .menu-section-title {
    font-size: 15px; font-weight: 700; color: var(--text-secondary);
    margin-bottom: -8px; margin-top: 8px; padding-left: 4px;
  }

  .smart-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* 2 –±–æ–ª—å—à–∏–µ –∫–æ–ª–æ–Ω–∫–∏ */
    gap: 12px;
  }
  
  /* –í–Ω—É—Ç—Ä–∏ –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ */
  .sub-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
    grid-column: span 2;
  }

  /* –°—Ç–∏–ª–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
  .card {
    background: var(--surface-card);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: var(--r-l);
    padding: 16px;
    position: relative;
    display: flex; flex-direction: column;
    justify-content: space-between;
    height: 110px;
    transition: all 0.2s;
  }
  .card:active { background: rgba(255,255,255,0.12); transform: scale(0.98); }

  .card-icon {
    width: 36px; height: 36px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    background: rgba(255,255,255,0.07);
    margin-bottom: 10px;
  }
  .card-icon img { width: 22px; height: 22px; opacity: 0.9; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
  
  .card-title { font-size: 14px; font-weight: 600; line-height: 1.2; color: rgba(255,255,255,0.9); }
  .card-sub { font-size: 11px; font-weight: 500; color: var(--text-tertiary); margin-top: 2px; }

  /* –ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ) */
  .card.small {
    height: auto; aspect-ratio: 1;
    align-items: center; justify-content: center;
    gap: 8px; padding: 10px;
  }
  .card.small .card-icon { margin-bottom: 0; background: transparent; width: 32px; height: 32px; }
  .card.small .card-title { font-size: 12px; text-align: center; }
  .card.small .card-sub { display: none; }

  /* –ê–∫—Ü–µ–Ω—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (–°–∫–∞–Ω–µ—Ä/–û—Ç—á–µ—Ç) */
  .card.accent {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.03));
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  .card.accent .card-icon { background: var(--accent-blue); color: #fff; }

  /* === 4. BOTTOM NAV (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫) === */
  /* –í–º–µ—Å—Ç–æ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É —Å–¥–µ–ª–∞–µ–º –ø—Ä–æ—Å—Ç–æ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–Ω–∏–∑—É */
  .settings-list {
    margin-top: 12px;
    border-radius: var(--r-l);
    background: var(--surface-card);
    border: var(--border-light);
    overflow: hidden;
  }
  .settings-item {
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    cursor: pointer;
  }
  .settings-item:last-child { border-bottom: none; }
  .settings-item:active { background: rgba(255,255,255,0.05); }
  
  .s-left { display: flex; align-items: center; gap: 12px; }
  .s-icon { font-size: 18px; opacity: 0.7; width: 24px; text-align: center; }
  .s-text { font-size: 15px; font-weight: 500; }
  .s-arrow { font-size: 14px; opacity: 0.3; transform: rotate(-90deg); }

</style>
</head>
<body>

<div class="background"></div>
<div class="noise"></div>

<div class="page-content">
  
  <div class="header">
    <div class="user-block">
      <div class="greeting">–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º,</div>
      <div class="username" id="userName">–ì–æ—Å—Ç—å</div>
    </div>
    <div class="avatar" id="userAvatar">
      <div class="avatar-text">?</div>
    </div>
  </div>

  <div>
    <div class="hero-widget" onclick="haptic('medium')">
      <div class="hw-header">
        <div class="hw-title"><span>üî•</span> –°–µ–≥–æ–¥–Ω—è</div>
        <div class="hw-title" style="font-size:12px; opacity:0.6;">–¶–µ–ª—å: 2100</div>
      </div>
      
      <div>
        <div style="display:flex; align-items:baseline;">
          <div class="hw-main-val">1,250</div>
          <div class="hw-unit">–∫–∫–∞–ª</div>
        </div>
        
        <div class="progress-track">
          <div class="progress-fill" style="width: 60%"></div>
        </div>
        
        <div class="hw-macros">
          <div>–ë: <span class="macro-val">80</span></div>
          <div>–ñ: <span class="macro-val">40</span></div>
          <div>–£: <span class="macro-val">150</span></div>
        </div>
      </div>
    </div>
    <div class="dots">
      <div class="dot active"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>

  <div class="menu-section-title">–î–Ω–µ–≤–Ω–∏–∫</div>
  <div class="smart-grid">
    <div class="card accent" onclick="nav('scanner.html')">
      <div class="card-icon"><img src="https://groskaiser-design.github.io/icons/diary.svg" alt=""></div>
      <div>
        <div class="card-title">–î–Ω–µ–≤–Ω–∏–∫</div>
        <div class="card-sub">–í–Ω–µ—Å—Ç–∏ –ø—Ä–∏–µ–º –ø–∏—â–∏</div>
      </div>
    </div>
    
    <div class="card" onclick="nav('kbju.html')">
      <div class="card-icon" style="background: rgba(48, 209, 88, 0.15);"><img src="https://groskaiser-design.github.io/icons/clipboard.svg" alt=""></div>
      <div>
        <div class="card-title">–ú–æ–π –ø–ª–∞–Ω</div>
        <div class="card-sub">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ö–ë–ñ–£</div>
      </div>
    </div>
  </div>

  <div class="menu-section-title">–¢–µ–ª–æ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
  <div class="smart-grid" style="grid-template-columns: repeat(3, 1fr);">
    <div class="card small" onclick="nav('measurements.html')">
      <div class="card-icon"><img src="https://groskaiser-design.github.io/icons/scales.svg" alt=""></div>
      <div class="card-title">–ó–∞–º–µ—Ä—ã</div>
    </div>
    
    <div class="card small" onclick="nav('2.html')">
      <div class="card-icon"><img src="https://groskaiser-design.github.io/icons/analytics.svg" alt=""></div>
      <div class="card-title">–ê–Ω–∞–ª–∏–∑</div>
    </div>
    
    <div class="card small" onclick="nav('ai.html')">
      <div class="card-icon"><img src="https://groskaiser-design.github.io/icons/ai.svg" alt=""></div>
      <div class="card-title">AI –ö–æ—É—á</div>
    </div>
  </div>

  <div class="menu-section-title">–ï—â—ë</div>
  <div class="settings-list">
    <div class="settings-item" onclick="nav('#profile')">
      <div class="s-left">
        <div class="s-icon"><img src="https://groskaiser-design.github.io/icons/profile.svg" style="width:20px; opacity:0.8;"></div>
        <div class="s-text">–ü—Ä–æ—Ñ–∏–ª—å</div>
      </div>
      <div class="s-arrow">‚åÑ</div>
    </div>
    <div class="settings-item" onclick="nav('#subs')">
      <div class="s-left">
        <div class="s-icon"><img src="https://groskaiser-design.github.io/icons/rub.svg" style="width:20px; opacity:0.8;"></div>
        <div class="s-text">–ü–æ–¥–ø–∏—Å–∫–∞</div>
      </div>
      <div class="s-arrow">‚åÑ</div>
    </div>
    <div class="settings-item" onclick="nav('#help')">
      <div class="s-left">
        <div class="s-icon"><img src="https://groskaiser-design.github.io/icons/question.svg" style="width:20px; opacity:0.8;"></div>
        <div class="s-text">–ü–æ–º–æ—â—å</div>
      </div>
      <div class="s-arrow">‚åÑ</div>
    </div>
  </div>

</div>

<script>
  // === TG SETUP ===
  const tg = window.Telegram?.WebApp;
  if (tg) {
    tg.ready();
    tg.expand();
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç —Ö–µ–¥–µ—Ä–∞ –ø–æ–¥ –Ω–∞—à —Ñ–æ–Ω (—Ç–µ–º–Ω—ã–π)
    tg.setHeaderColor('#0f0c29'); 
    tg.setBackgroundColor('#0f0c29');
    tg.BackButton?.hide();
  }

  function haptic(style = 'light') {
    try { tg?.HapticFeedback?.impactOccurred(style); } catch(e){}
  }

  function nav(url) {
    haptic('light');
    if (url && url !== '#') {
      setTimeout(() => window.location.href = url, 80);
    } else {
      tg?.showPopup({ title: '–°–∫–æ—Ä–æ', message: '–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ' });
    }
  }

  // === DATA LOAD ===
  function loadProfile() {
    const u = tg?.initDataUnsafe?.user || { first_name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä' };
    document.getElementById('userName').textContent = u.first_name;
    
    if (u.photo_url) {
      document.getElementById('userAvatar').innerHTML = `<img src="${u.photo_url}" alt="avatar">`;
    }
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  document.addEventListener('DOMContentLoaded', () => {
    loadProfile();
  });

</script>
</body>
</html>
