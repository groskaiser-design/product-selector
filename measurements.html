держи полный текущий файл `measurements.html` (как есть). если нужно — могу сразу внести правки прямо в код и отдать обновлённую версию.

[Скачать файл](sandbox:/mnt/data/measurements.html)

```html
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="color-scheme" content="light dark" />
<title>Замеры тела</title>
<style>
  :root{
    --bg:#0b0e12;
    --panel:#12161c;
    --panel-2:#0f141a;
    --text:#e9eef6;
    --muted:#a8b3c2;
    --brand:#66c2ff;
    --accent:#23d18b;
    --danger:#ff6b6b;
    --warn:#ffd166;
    --card:#11151b;
    --shadow: 0 8px 24px rgba(0,0,0,.35), inset 0 1px rgba(255,255,255,.03);
    --radius:16px;
    --radius-sm:10px;
    --gap:14px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:
      radial-gradient(1200px 800px at 110% -10%, rgba(102,194,255,.06), transparent 55%),
      radial-gradient(1000px 700px at -10% 10%, rgba(35,209,139,.05), transparent 45%),
      linear-gradient(180deg, #0a0d12 0%, #0c1117 100%);
    color:var(--text);
    font:15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  .app{
    max-width:880px;
    margin:0 auto;
    padding:22px 16px 28px;
  }

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:18px;
  }
  .title{
    display:flex;align-items:center;gap:10px
  }
  .title .dot{
    width:10px;height:10px;border-radius:50%;
    background:var(--accent);
    box-shadow:0 0 0 6px rgba(35,209,139,.16), 0 0 28px rgba(35,209,139,.35);
  }
  h1{
    margin:0;font-size:18px;font-weight:700;letter-spacing:.2px
  }
  .status{
    font-size:12px;color:var(--muted)
  }

  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.02), transparent 35%) , var(--panel);
    border:1px solid rgba(255,255,255,.05);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
  }

  .section{
    padding:14px 14px 10px;
    margin-bottom:14px;
  }
  .section h2{
    font-size:13px;font-weight:700;margin:0 0 10px;color:#cfe6ff; letter-spacing:.3px
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:var(--gap);
  }
  @media (min-width:720px){
    .grid{grid-template-columns:repeat(3,minmax(0,1fr))}
  }

  .field{
    background:var(--panel-2);
    border:1px solid rgba(255,255,255,.06);
    border-radius:var(--radius-sm);
    padding:10px 10px 12px;
    position:relative;
    box-shadow:inset 0 1px rgba(255,255,255,.04);
  }
  .label{
    display:flex;align-items:center;justify-content:space-between;
    font-size:12px;color:var(--muted);margin-bottom:8px
  }
  .value{
    display:flex;align-items:center;gap:8px
  }
  .value .big{
    font-size:22px;font-weight:800;letter-spacing:.2px
  }
  .unit{font-size:12px;color:var(--muted)}
  .hint{font-size:12px;color:#9fb3c9;margin-top:6px}

  /* wheel */
  .wheel{
    display:flex;gap:6px;align-items:center;justify-content:flex-start
  }
  .wheel-col{
    width:64px;height:100px;overflow:auto;scroll-snap-type:y mandatory;
    border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,.02), transparent 30%);
    border:1px solid rgba(255,255,255,.06);
  }
  .wheel-col::-webkit-scrollbar{width:0;height:0}
  .wheel-item{
    height:32px;display:flex;align-items:center;justify-content:center;
    scroll-snap-align:center; font-weight:600; color:#cfe0f7
  }
  .wheel-item.dim{color:#6f8299;font-weight:500}
  .sep{width:12px;text-align:center;color:#6f8299;font-weight:700}

  /* footer */
  .footer{
    position:sticky; bottom:0; left:0; right:0;
    padding:12px 10px 12px; background:linear-gradient(180deg, rgba(12,17,23,0), #0c1117 45%);
    margin-top:16px; z-index:5
  }
  .bar{
    display:flex; gap:10px; align-items:center; justify-content:space-between;
  }
  .btn{
    display:inline-flex;align-items:center;justify-content:center; gap:8px;
    padding:12px 16px; border-radius:14px; font-weight:800;
    border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg,#16202b,#121a23);
    color:#eaf2ff; box-shadow:var(--shadow); cursor:pointer; user-select:none; -webkit-tap-highlight-color:transparent;
  }
  .btn[disabled]{opacity:.55; pointer-events:none}
  .btn.primary{
    background:linear-gradient(180deg, #2a81ff, #2261ff);
    border-color:rgba(64,140,255,.45);
    box-shadow:0 10px 30px rgba(42,129,255,.35), inset 0 1px rgba(255,255,255,.25);
  }
  .btn.success{
    background:linear-gradient(180deg, #1bd189, #12b071);
    border-color:rgba(35,209,139,.4);
    box-shadow:0 10px 28px rgba(35,209,139,.35), inset 0 1px rgba(255,255,255,.25);
  }

  .pill{
    padding:8px 10px; border-radius:999px; background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.08); color:#cfe0f7; font-weight:700; font-size:12px;
  }

  .toast{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom:24px; background:#0f141a; border:1px solid rgba(255,255,255,.1);
    color:#eaf2ff; padding:10px 14px; border-radius:12px;
    box-shadow:var(--shadow); z-index:50; display:none
  }
  .toast.show{display:block}

  .muted{color:var(--muted)}
  .row{display:flex; align-items:center; gap:10px}
  .spacer{flex:1}
  .ghost{opacity:.7}
</style>
</head>
<body>
  <div class="app" id="app">
    <header class="card section" style="padding:10px 12px;">
      <div class="title">
        <span class="dot" id="dot"></span>
        <div>
          <h1>Замеры</h1>
          <div class="status" id="status">готово</div>
        </div>
      </div>
      <div class="pill" id="date-pill">сегодня</div>
    </header>

    <section class="card section">
      <h2>Основные</h2>
      <div class="grid" id="grid-main"></div>
    </section>

    <section class="card section">
      <h2>Окружности</h2>
      <div class="grid" id="grid-circ"></div>
    </section>

    <section class="card section">
      <h2>Служебное</h2>
      <div class="row">
        <div class="pill" id="ver-pill">v?</div>
        <div class="pill ghost" id="tz-pill">UTC</div>
        <div class="spacer"></div>
        <button class="btn" id="btn-selftest">self-test</button>
      </div>
      <div class="hint" id="hint"></div>
    </section>

    <div class="footer">
      <div class="bar">
        <button class="btn" id="btn-reset">Сбросить</button>
        <button class="btn primary" id="btn-save">
          <span id="save-text">Сохранить</span>
          <span id="save-spin" style="display:none">…</span>
        </button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

<script>
(() => {
  const VERSION = '1.15.0';
  const API_URL = 'REPLACE_WITH_DEPLOYED_URL'; // <— сюда твой Apps Script web app URL
  const FIELD_ORDER = ['weight','height','fat','neck','shoulders','chest','waist','bicep_l_rel','bicep_r_rel','bicep_l_flex','bicep_r_flex','thigh_l','thigh_r','calf_l','calf_r','hips','wrist','knee','ankle'];
  const FIELD_META = {
    weight:{label:'Вес', unit:'кг', min:40, max:250, step:0.1, def:80},
    height:{label:'Рост', unit:'см', min:120, max:230, step:1, def:175},
    fat:{label:'Жир', unit:'%', min:3, max:60, step:0.1},
    neck:{label:'Шея', unit:'см', min:20, max:70, step:0.1},
    shoulders:{label:'Плечи', unit:'см', min:60, max:180, step:0.5},
    chest:{label:'Грудь', unit:'см', min:60, max:160, step:0.5},
    waist:{label:'Талия', unit:'см', min:40, max:160, step:0.5},
    bicep_l_rel:{label:'Бицепс L (расс.)', unit:'см', min:15, max:70, step:0.5},
    bicep_r_rel:{label:'Бицепс R (расс.)', unit:'см', min:15, max:70, step:0.5},
    bicep_l_flex:{label:'Бицепс L (напр.)', unit:'см', min:15, max:70, step:0.5},
    bicep_r_flex:{label:'Бицепс R (напр.)', unit:'см', min:15, max:70, step:0.5},
    thigh_l:{label:'Бедро L', unit:'см', min:30, max:100, step:0.5},
    thigh_r:{label:'Бедро R', unit:'см', min:30, max:100, step:0.5},
    calf_l:{label:'Икра L', unit:'см', min:25, max:70, step:0.5},
    calf_r:{label:'Икра R', unit:'см', min:25, max:70, step:0.5},
    hips:{label:'Бёдра', unit:'см', min:70, max:160, step:0.5},
    wrist:{label:'Запястье', unit:'см', min:10, max:30, step:0.1},
    knee:{label:'Колено', unit:'см', min:25, max:60, step:0.1},
    ankle:{label:'Лодыжка', unit:'см', min:15, max:35, step:0.1}
  };
  const MAIN = ['weight','height','fat','waist'];
  const GRID_MAIN = document.getElementById('grid-main');
  const GRID_CIRC = document.getElementById('grid-circ');
  const statusEl = document.getElementById('status');
  const datePill = document.getElementById('date-pill');
  const verPill = document.getElementById('ver-pill');
  const tzPill = document.getElementById('tz-pill');
  const toastEl = document.getElementById('toast');
  const btnSave = document.getElementById('btn-save');
  const btnReset = document.getElementById('btn-reset');
  const btnSelf = document.getElementById('btn-selftest');
  const saveText = document.getElementById('save-text');
  const saveSpin = document.getElementById('save-spin');

  const SS_KEY_DRAFT = 'meas_draft_v4';
  const SS_KEY_LAST = 'meas_last_sent';
  const TZ = Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC';

  verPill.textContent = 'v' + VERSION;
  tzPill.textContent = TZ;

  // Telegram
  const tg = window.Telegram && window.Telegram.WebApp ? window.Telegram.WebApp : null;
  if (tg) {
    try { tg.ready(); tg.expand(); tg.disableVerticalSwipes && tg.disableVerticalSwipes(); } catch(_) {}
  }

  // Utils
  const clamp = (v, a, b) => Math.min(b, Math.max(a, v));
  const num = (x) => (x===''||x==null||Number.isNaN(Number(x))) ? null : Number(x);
  const fmt = (x) => (x==null ? '' : (Math.round(x*10)/10).toString().replace('.', ','));

  function todayISO(){
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,'0');
    const day = String(d.getDate()).padStart(2,'0');
    return `${y}-${m}-${day}`;
  }
  const TODAY = todayISO();
  datePill.textContent = TODAY;

  function toast(msg, ms=1800){
    toastEl.textContent = msg;
    toastEl.classList.add('show');
    setTimeout(()=>toastEl.classList.remove('show'), ms);
  }

  // Fetch wrapper with telemetry
  async function callBackend(action, payload){
    const init_data = tg ? tg.initData : (window.__tgInitData || '');
    const body = { action, init_data, tz: TZ, ...payload };
    const t0 = performance.now();
    let res, json;
    try{
      res = await fetch(API_URL, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(body),
        cache:'no-store',
      });
      json = await res.json().catch(()=>({ok:false,error:'bad_json'}));
    }catch(err){
      json = {ok:false,error:String(err)};
    }
    const dt = Math.round(performance.now() - t0);
    console.debug('[api]', action, dt+'ms', json);
    return json;
  }

  // WHEEL UI
  function makeWheelCol(from, to, step, current){
    const col = document.createElement('div');
    col.className = 'wheel-col';
    const items = [];
    for (let v=from; v<=to+1e-9; v = Math.round((v+step)*10)/10){
      const item = document.createElement('div');
      item.className = 'wheel-item';
      item.textContent = (step>=1) ? String(v) : v.toFixed(1).replace('.', ',');
      items.push(item);
      col.appendChild(item);
    }
    // center to current
    setTimeout(()=>{
      const i = Math.round((current-from)/step);
      const target = items[i] || items[0];
      const y = target.offsetTop - 34;
      col.scrollTo({top:y, behavior:'instant'});
    }, 0);

    // pick on scroll end
    let t;
    col.addEventListener('scroll', ()=>{
      clearTimeout(t);
      t = setTimeout(()=>{
        const sc = col.scrollTop + col.clientHeight/2;
        let nearest = 0, dist = 1e9;
        items.forEach((el, idx)=>{
          const center = el.offsetTop + el.offsetHeight/2;
          const d = Math.abs(center - sc);
          if (d<dist){ dist = d; nearest = idx; }
        });
        const snapY = items[nearest].offsetTop - 34;
        col.scrollTo({top:snapY, behavior:'smooth'});
        col.dispatchEvent(new CustomEvent('pick', {detail:{index:nearest}}));
      }, 90);
    });
    return col;
  }

  function makeField(key){
    const meta = FIELD_META[key];
    const card = document.createElement('div');
    card.className = 'field';
    card.dataset.key = key;

    const lab = document.createElement('div');
    lab.className = 'label';
    lab.innerHTML = `<span>${meta.label}</span><span class="unit">${meta.unit}</span>`;

    const val = document.createElement('div'); val.className = 'value';
    const big = document.createElement('div'); big.className = 'big'; big.textContent = '—';
    val.append(big);

    const hint = document.createElement('div'); hint.className = 'hint'; hint.textContent = `${fmt(meta.def ?? '')}`;

    const wheel = document.createElement('div'); wheel.className = 'wheel';
    // convert step to wheel of int + fraction if step<1
    if (meta.step < 1){
      const mult = Math.round(1/meta.step); // e.g. 10
      const iv = Math.floor((meta.def ?? meta.min));
      const fv = Math.round(((meta.def ?? meta.min)-iv)*mult);

      const colInt = makeWheelCol(Math.floor(meta.min), Math.floor(meta.max), 1, iv);
      const sep = document.createElement('div'); sep.className='sep'; sep.textContent=',';
      const colFrac = makeWheelCol(0, mult-1, 1, fv);

      const update = () => {
        const i = colInt.querySelector('.wheel-item:nth-child(n)'); // dummy to ensure layout
      };

      // subscribe to pick
      colInt.addEventListener('pick', (e)=>{
        const idx = e.detail.index;
        const value = Math.floor(meta.min) + idx + (num(hint.dataset.fv)||0)*(meta.step);
        hint.dataset.iv = Math.floor(meta.min) + idx;
        const valNow = (Number(hint.dataset.iv)||0) + (Number(hint.dataset.fv)||0)*meta.step;
        big.textContent = fmt(valNow);
        hint.textContent = fmt(valNow);
        data[key] = valNow;
      });
      colFrac.addEventListener('pick', (e)=>{
        const idx = e.detail.index;
        hint.dataset.fv = idx;
        const valNow = (Number(hint.dataset.iv)||0) + idx*meta.step;
        big.textContent = fmt(valNow);
        hint.textContent = fmt(valNow);
        data[key] = valNow;
      });

      wheel.append(colInt, sep, colFrac);
      hint.dataset.iv = iv; hint.dataset.fv = fv;
      const startVal = iv + fv*meta.step;
      big.textContent = fmt(startVal);
      hint.textContent = fmt(startVal);
      data[key] = startVal;

    } else {
      const col = makeWheelCol(meta.min, meta.max, meta.step, meta.def ?? meta.min);
      col.addEventListener('pick', (e)=>{
        const v = clamp(meta.min + e.detail.index*meta.step, meta.min, meta.max);
        big.textContent = fmt(v);
        hint.textContent = fmt(v);
        data[key] = v;
      });
      const startVal = meta.def ?? meta.min;
      big.textContent = fmt(startVal);
      hint.textContent = fmt(startVal);
      data[key] = startVal;
      wheel.append(col);
    }

    card.append(lab, val, wheel, hint);
    return card;
  }

  // mount fields
  const data = {};
  const els = {};
  FIELD_ORDER.forEach((k)=>{
    const card = makeField(k);
    els[k] = card;
    (MAIN.includes(k) ? GRID_MAIN : GRID_CIRC).appendChild(card);
  });

  // Draft restore
  try{
    const draft = JSON.parse(sessionStorage.getItem(SS_KEY_DRAFT) || 'null');
    if (draft && draft.data){
      Object.keys(draft.data).forEach((k)=>{
        if (data[k]!=null && typeof draft.data[k]==='number'){
          data[k] = draft.data[k];
          const big = els[k].querySelector('.big');
          const hint = els[k].querySelector('.hint');
          big.textContent = fmt(data[k]);
          hint.textContent = fmt(data[k]);
        }
      });
    }
  }catch(_){}

  // periodic draft save
  setInterval(()=> {
    try{ sessionStorage.setItem(SS_KEY_DRAFT, JSON.stringify({data, day: TODAY})); }catch(_){}
  }, 1200);

  // INIT
  (async function init(){
    statusEl.textContent = 'загрузка…';
    const res = await callBackend('init', {});
    if (res && res.ok && res.last && res.last.data){
      Object.keys(res.last.data).forEach((k)=>{
        if (res.last.data[k] != null){
          data[k] = res.last.data[k];
          const big = els[k].querySelector('.big');
          const hint = els[k].querySelector('.hint');
          big.textContent = fmt(data[k]);
          hint.textContent = fmt(data[k]);
        }
      });
      statusEl.textContent = 'загружено';
    } else {
      statusEl.textContent = 'готово';
    }
  })();

  // Buttons
  let saving = false;
  btnSave.addEventListener('click', async () => {
    if (saving) return;
    saving = true;
    btnSave.setAttribute('disabled','');
    saveText.style.display='none';
    saveSpin.style.display='inline';

    const payload = {
      save_id: crypto.randomUUID(),
      client_day_local: TODAY,
      t_client: Date.now(),
      source:'webapp',
      app_version: VERSION,
      data: data
    };
    const res = await callBackend('save', payload);
    if (res && res.ok){
      toast('Сохранено ✓');
      statusEl.textContent = 'сохранено';
      try{ localStorage.setItem(SS_KEY_LAST, JSON.stringify({data, day:TODAY, ts:Date.now()})); }catch(_){}
      if (tg && tg.HapticFeedback){ try{ tg.HapticFeedback.impactOccurred('medium'); }catch(_){ } }
      btnSave.classList.add('success');
      setTimeout(()=>btnSave.classList.remove('success'), 900);
    } else {
      toast('Ошибка сохранения');
      statusEl.textContent = 'ошибка';
      if (tg && tg.HapticFeedback){ try{ tg.HapticFeedback.notificationOccurred('error'); }catch(_){ } }
    }

    saveSpin.style.display='none';
    saveText.style.display='inline';
    btnSave.removeAttribute('disabled');
    saving = false;
  });

  btnReset.addEventListener('click', ()=>{
    FIELD_ORDER.forEach((k)=>{
      const meta = FIELD_META[k];
      const v = meta.def ?? meta.min;
      data[k] = v;
      const big = els[k].querySelector('.big');
      const hint = els[k].querySelector('.hint');
      big.textContent = fmt(v);
      hint.textContent = fmt(v);
    });
    toast('Поля сброшены');
  });

  btnSelf.addEventListener('click', async ()=>{
    const res = await callBackend('selftest', {});
    toast('Self test отправлен');
    console.log('selftest→', res);
  });

})();
</script>
</body>
</html>
```
