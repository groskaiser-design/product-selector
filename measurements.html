<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Measurements — Prototype</title>

<style>
/* ===== Base ===== */
:root{
  --bg1:#667eea; --bg2:#764ba2;
  --glass: rgba(255,255,255,.16);
  --glass-b: rgba(255,255,255,.26);
  --card: rgba(255,255,255,.14);
  --shadow: 0 12px 34px rgba(0,0,0,.22);
  --radius: 20px;
  --grad: linear-gradient(135deg,#6f77f1 0%,#7f58c3 100%);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
  color:#fff;
  background: radial-gradient(120% 140% at 10% 0%, #7383f2 0%, transparent 40%),
              radial-gradient(120% 140% at 100% 0%, #8857c8 0%, transparent 42%),
              linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%);
  background-attachment: fixed; /* цельный фон */
}
.container{max-width:560px;margin:0 auto;padding:22px 16px 120px}

/* ===== Card / Section ===== */
.section{
  background: var(--card);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border:1px solid rgba(255,255,255,.25);
  border-radius: var(--radius);
  box-shadow: 0 1px 0 rgba(255,255,255,.35) inset, var(--shadow);
  margin-bottom:18px;
  overflow:hidden;
}
.sec-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 16px 14px 20px;
}
.sec-title{font-weight:800;font-size:18px;letter-spacing:.2px}
.sec-toggle{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px;height:36px;border-radius:999px;
  background: rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.25);
  cursor:pointer; transition:transform .25s ease, background .2s ease;
  transform-origin: right center; /* крутится через правую сторону */
}
.sec-toggle:hover{background: rgba(255,255,255,.18)}
.sec-toggle svg{width:18px;height:18px;transition:transform .28s ease}
.section.collapsed .sec-toggle svg{transform:rotate(180deg)}
.sec-body{padding:14px 16px 18px 16px; border-top:1px solid rgba(255,255,255,.15)}
.section.collapsed .sec-body{display:none}

/* ===== SAVE dock (как в Product Selector) ===== */
.save-dock{
  position: fixed; left:50%; bottom:18px; transform:translateX(-50%);
  width: min(560px, 92vw); z-index:100;
}
.save-panel{
  background:#fff; color:#111; border-radius:22px; box-shadow: var(--shadow);
  padding:14px 14px 16px; 
}
.save-btn{
  width:100%; height:56px; border-radius:16px; border:none; cursor:pointer;
  font-size:18px; font-weight:800; color:#fff;
  background: var(--grad);
  box-shadow: 0 10px 24px rgba(90,72,200,.45), inset 0 1px 0 rgba(255,255,255,.35);
  display:flex; align-items:center; justify-content:center; gap:10px;
}
.save-btn:active{transform:translateY(1px)}
.save-btn svg{width:22px;height:22px;fill:#fff}

/* ===== Wheels (2-колонки: целая и десятая) ===== */
.field{background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.25);
  border-radius:16px; padding:12px 12px 14px; margin-bottom:12px}
.field-label{font-size:13px;opacity:.9;margin-bottom:8px;display:flex;justify-content:space-between}
.wheels{display:grid; grid-template-columns:1fr 64px; gap:8px; align-items:center}
.wcol{
  position:relative; height:120px; overflow:hidden; border-radius:12px;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2)
}
.wcol ul{list-style:none; padding:0; margin:0; text-align:center}
.wcol li{height:40px; line-height:40px; font-size:20px; color:#e9e9ff; opacity:.55}
.wcol li.active{font-size:28px; font-weight:800; color:#fff; opacity:1}
.wcol:before, .wcol:after{
  content:""; position:absolute; left:0; right:0; height:40px; z-index:2;
  pointer-events:none;
}
.wcol:before{top:0; background:linear-gradient(to bottom, rgba(15,0,32,.55), rgba(15,0,32,0))}
.wcol:after{bottom:0;background:linear-gradient(to top, rgba(15,0,32,.55), rgba(15,0,32,0))}
.center-line{
  position:absolute; left:8px; right:8px; top:50%; height:36px; margin-top:-18px;
  border-radius:10px; background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.22)
}
.sep{
  display:flex; align-items:center; justify-content:center; height:120px; font-size:28px; font-weight:800;
  opacity:.9
}

/* колесо с белой пробегающей шкалой под пальцем */
.wcol .glow{
  position:absolute; left:0; right:0; top:50%; height:2px; background:#fff; opacity:.0; transform:translateY(-1px);
  transition:opacity .15s ease;
}
.wcol.drag .glow{opacity:.9; box-shadow:0 0 18px #fff}

/* helper */
.small-note{font-size:12px;opacity:.75;margin-top:6px}

/* для iOS — принудительно показываем индикатор прокрутки */
.wcol{ -webkit-overflow-scrolling: touch; overflow-y: scroll; scrollbar-width: thin; }
.wcol::-webkit-scrollbar{width:6px}
.wcol::-webkit-scrollbar-thumb{background:rgba(255,255,255,.35);border-radius:999px}
</style>
</head>
<body>
  <div class="container">

    <!-- Анкета -->
    <section class="section" id="sec-form">
      <div class="sec-head">
        <div class="sec-title">Анкета замеров</div>
        <button class="sec-toggle" aria-label="Свернуть/развернуть" data-toggle="#sec-form">
          <!-- caret -->
          <svg viewBox="0 0 24 24" fill="none"><path d="M7 10l5 5 5-5" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
      <div class="sec-body">
        <!-- Вес (кг, десятая) -->
        <div class="field">
          <div class="field-label"><span>Вес</span><span>кг</span></div>
          <div class="wheels" data-field="weight">
            <div class="wcol" data-min="0" data-max="250">
              <div class="center-line"></div><div class="glow"></div>
              <ul></ul>
            </div>
            <div class="sep">,</div>
            <div class="wcol" data-min="0" data-max="9">
              <div class="center-line"></div><div class="glow"></div>
              <ul></ul>
            </div>
          </div>
          <div class="small-note">Проведи по колёсам. Белая линия «горит» во время движения.</div>
        </div>

        <!-- Рост (см, десятая) -->
        <div class="field">
          <div class="field-label"><span>Рост</span><span>см</span></div>
          <div class="wheels" data-field="height">
            <div class="wcol" data-min="0" data-max="250">
              <div class="center-line"></div><div class="glow"></div>
              <ul></ul>
            </div>
            <div class="sep">,</div>
            <div class="wcol" data-min="0" data-max="9">
              <div class="center-line"></div><div class="glow"></div>
              <ul></ul>
            </div>
          </div>
        </div>

        <!-- …добавишь остальные поля по этому же паттерну… -->
      </div>
    </section>

    <!-- Аналитика -->
    <section class="section" id="sec-analytics">
      <div class="sec-head">
        <div class="sec-title">Аналитика</div>
        <button class="sec-toggle" aria-label="Свернуть/развернуть" data-toggle="#sec-analytics">
          <svg viewBox="0 0 24 24" fill="none"><path d="M7 10l5 5 5-5" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
      <div class="sec-body" style="height:260px;display:flex;align-items:center;justify-content:center;opacity:.85">
        [здесь будет график]
      </div>
    </section>

    <!-- Выводы -->
    <section class="section" id="sec-insights">
      <div class="sec-head">
        <div class="sec-title">Выводы</div>
        <button class="sec-toggle" aria-label="Свернуть/развернуть" data-toggle="#sec-insights">
          <svg viewBox="0 0 24 24" fill="none"><path d="M7 10l5 5 5-5" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
      <div class="sec-body">
        <div style="background:#fff;color:#111;border-radius:14px;padding:14px 16px">
          Здесь аккуратно вставим текст от ИИ из ячейки — с базовой типографикой.
        </div>
      </div>
    </section>

  </div>

  <!-- SAVE dock -->
  <div class="save-dock">
    <div class="save-panel">
      <button class="save-btn" id="saveBtn" type="button">
        <!-- floppy -->
        <svg viewBox="0 0 24 24"><path d="M4 4h12l4 4v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm10 0v6H6V4h8z"/></svg>
        Сохранить
      </button>
    </div>
  </div>

<script>
/* ===== Аккордеоны: поворот через правую сторону ===== */
document.querySelectorAll('.sec-toggle').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const id = btn.dataset.toggle;
    const sec = document.querySelector(id);
    sec.classList.toggle('collapsed');
  });
});

/* ===== Wheels ===== */
function fillWheel(ul, min, max){
  // добиваем пустую строку сверху/снизу для центрирования
  ul.innerHTML = '<li></li>';
  for(let n=min; n<=max; n++){ ul.innerHTML += `<li>${n}</li>`; }
  ul.innerHTML += '<li></li>';
}
function initWheel(col){
  const ul = col.querySelector('ul');
  const min = +col.dataset.min, max = +col.dataset.max;
  fillWheel(ul, min, max);

  // стартовая позиция: середина
  const h = 40; // item height
  let idx = 1; // по умолчанию первый реальный элемент
  col.scrollTop = (idx)*h;

  const glow = col.querySelector('.glow');

  function applyActive(){
    const it = Math.round(col.scrollTop / h);
    Array.from(ul.children).forEach((li,i)=>li.classList.toggle('active', i===it));
  }
  applyActive();

  let dragging = false, t;
  col.addEventListener('scroll', ()=>{
    applyActive();
    if(!dragging){ dragging = true; col.classList.add('drag'); glow.style.opacity='1'; }
    clearTimeout(t);
    t = setTimeout(()=>{
      dragging = false; col.classList.remove('drag'); glow.style.opacity='0';
      // привязка к ближайшей «черте»
      const snap = Math.round(col.scrollTop / h) * h;
      col.scrollTo({ top:snap, behavior:'smooth' });
    }, 90);
  }, {passive:true});
}

document.querySelectorAll('.wcol').forEach(initWheel);

/* ===== Save (заглушка) ===== */
document.getElementById('saveBtn').addEventListener('click',()=>{
  // здесь позже вставим сбор значений из всех wheels
  alert('Сохраним замеры (заглушка).');
});
</script>
</body>
</html>
