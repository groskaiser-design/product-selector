<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Measurements — clean</title>
<style>
:root{
  --bg1:#667eea; --bg2:#764ba2;
  --card: rgba(255,255,255,.14);
  --brd:  rgba(255,255,255,.25);
  --shadow: 0 12px 34px rgba(0,0,0,.22);
  --radius: 20px;
  --grad: linear-gradient(135deg,#6f77f1 0%,#7f58c3 100%);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
  color:#fff;
  background: radial-gradient(120% 140% at 10% 0%, #7383f2 0%, transparent 40%),
              radial-gradient(120% 140% at 100% 0%, #8857c8 0%, transparent 42%),
              linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%);
  background-attachment: fixed;
}
.container{max-width:560px;margin:0 auto;padding:22px 16px 40px}

/* ===== Card / Section ===== */
.section{
  background: var(--card);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border:1px solid var(--brd);
  border-radius: var(--radius);
  box-shadow: 0 1px 0 rgba(255,255,255,.35) inset, var(--shadow);
  margin-bottom:18px;
  overflow:hidden;
}
.sec-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 16px 14px 20px;
}
.sec-title{font-weight:800;font-size:18px;letter-spacing:.2px}
.sec-toggle{
  width:28px;height:28px;border:0;background:transparent;color:#fff;cursor:pointer;
  display:grid;place-items:center;transform-origin:right center; /* крутится через ПРАВУЮ сторону */
  transition:transform .28s ease;
}
.sec-toggle svg{width:18px;height:18px}
.section.expanded .sec-toggle{transform:rotate(180deg)} /* вверх */
.sec-body{padding:14px 16px 18px 16px;border-top:1px solid rgba(255,255,255,.15);display:none}
.section.expanded .sec-body{display:block}

/* ===== Wheels (в один ряд: целая , десятая) ===== */
.field{background:rgba(255,255,255,.12); border:1px solid var(--brd);
  border-radius:16px; padding:12px; margin-bottom:12px}
.field-label{font-size:13px;opacity:.9;margin-bottom:8px;display:flex;justify-content:space-between}

.wheels{
  display:grid; grid-template-columns: 1fr 16px 64px; /* целая | запятая | десятая */
  align-items:center; gap:4px; /* прижал колёса друг к другу */
  width:100%;
}
.wcol{
  position:relative; height:120px; overflow:hidden; border-radius:12px;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2)
}
.wcol ul{list-style:none; padding:0; margin:0; text-align:center}
.wcol li{height:40px; line-height:40px; font-size:20px; color:#e9e9ff; opacity:.55}
.wcol li.active{font-size:28px; font-weight:800; color:#fff; opacity:1}
.wcol:before, .wcol:after{
  content:""; position:absolute; left:0; right:0; height:40px; z-index:2; pointer-events:none;
}
.wcol:before{top:0; background:linear-gradient(to bottom, rgba(15,0,32,.55), rgba(15,0,32,0))}
.wcol:after{bottom:0;background:linear-gradient(to top, rgba(15,0,32,.55), rgba(15,0,32,0))}
.center-line{
  position:absolute; left:6px; right:6px; top:50%; height:36px; margin-top:-18px;
  border-radius:10px; background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.22)
}
.glow{
  position:absolute; left:0; right:0; top:50%; height:2px; background:#fff; opacity:0; transform:translateY(-1px);
  transition:opacity .15s ease;
}
.wcol.drag .glow{opacity:.9; box-shadow:0 0 18px #fff}

.sep{display:flex;align-items:center;justify-content:center;font-weight:800;opacity:.9}

/* iOS — делаем скроллбар видимым */
.wcol{ -webkit-overflow-scrolling: touch; overflow-y: scroll; scrollbar-width: thin; }
.wcol::-webkit-scrollbar{width:6px}
.wcol::-webkit-scrollbar-thumb{background:rgba(255,255,255,.35);border-radius:999px}

/* ===== Save внутри анкеты ===== */
.form-actions{display:flex;justify-content:flex-end;margin-top:10px}
.save-btn{
  min-width:180px;height:48px;border-radius:14px;border:0;cursor:pointer;color:#fff;font-weight:800;font-size:16px;
  background:var(--grad); box-shadow:0 10px 24px rgba(90,72,200,.45), inset 0 1px 0 rgba(255,255,255,.35);
}
.save-btn:active{transform:translateY(1px)}
</style>
</head>
<body>
  <div class="container">

    <!-- Анкета -->
    <section class="section expanded" id="sec-form">
      <div class="sec-head">
        <div class="sec-title">Анкета замеров</div>
        <button class="sec-toggle" aria-label="Свернуть/развернуть" data-target="#sec-form">
          <!-- caret (вниз по умолчанию; развёрнутый блок крутит до ↑ через правую сторону) -->
          <svg viewBox="0 0 24 24" fill="none"><path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
      <div class="sec-body">
        <!-- Вес -->
        <div class="field">
          <div class="field-label"><span>Вес</span><span>кг</span></div>
          <div class="wheels" data-field="weight">
            <div class="wcol" data-min="0" data-max="250">
              <div class="center-line"></div><div class="glow"></div><ul></ul>
            </div>
            <div class="sep">,</div>
            <div class="wcol" data-min="0" data-max="9">
              <div class="center-line"></div><div class="glow"></div><ul></ul>
            </div>
          </div>
        </div>

        <!-- Рост -->
        <div class="field">
          <div class="field-label"><span>Рост</span><span>см</span></div>
          <div class="wheels" data-field="height">
            <div class="wcol" data-min="0" data-max="250">
              <div class="center-line"></div><div class="glow"></div><ul></ul>
            </div>
            <div class="sep">,</div>
            <div class="wcol" data-min="0" data-max="9">
              <div class="center-line"></div><div class="glow"></div><ul></ul>
            </div>
          </div>
        </div>

        <!-- …далее по этому же паттерну остальные поля… -->

        <div class="form-actions">
          <button class="save-btn" id="saveBtn" type="button">Сохранить</button>
        </div>
      </div>
    </section>

    <!-- Аналитика -->
    <section class="section" id="sec-analytics">
      <div class="sec-head">
        <div class="sec-title">Аналитика</div>
        <button class="sec-toggle" aria-label="Свернуть/развернуть" data-target="#sec-analytics">
          <svg viewBox="0 0 24 24" fill="none"><path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
      <div class="sec-body" style="height:220px;display:flex;align-items:center;justify-content:center;opacity:.85">
        [тут будет график]
      </div>
    </section>

    <!-- Выводы -->
    <section class="section" id="sec-insights">
      <div class="sec-head">
        <div class="sec-title">Выводы</div>
        <button class="sec-toggle" aria-label="Свернуть/развернуть" data-target="#sec-insights">
          <svg viewBox="0 0 24 24" fill="none"><path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>
      <div class="sec-body">
        <div style="background:#fff;color:#111;border-radius:14px;padding:14px 16px">
          Здесь аккуратно вставим текст от ИИ из ячейки — с базовой типографикой.
        </div>
      </div>
    </section>

  </div>

<script>
/* ===== Аккордеоны ===== */
document.querySelectorAll('.sec-toggle').forEach(b=>{
  b.addEventListener('click',()=>{
    const sec = document.querySelector(b.dataset.target);
    sec.classList.toggle('expanded');
  });
});

/* ===== Wheels ===== */
function fillWheel(ul, min, max){
  ul.innerHTML = '<li></li>';              // пустой сверху
  for(let n=min; n<=max; n++){ ul.innerHTML += `<li>${n}</li>`; }
  ul.innerHTML += '<li></li>';             // пустой снизу
}
function initWheel(col){
  const ul = col.querySelector('ul');
  const min = +col.dataset.min, max = +col.dataset.max;
  fillWheel(ul, min, max);

  const h = 40; // высота пункта
  let tHandle;
  const glow = col.querySelector('.glow');

  function setActive(){
    const i = Math.round(col.scrollTop / h);
    Array.from(ul.children).forEach((li,idx)=>li.classList.toggle('active', idx===i));
  }
  setActive();

  col.addEventListener('scroll', ()=>{
    setActive();
    col.classList.add('drag'); glow.style.opacity='1';
    clearTimeout(tHandle);
    tHandle = setTimeout(()=>{
      col.classList.remove('drag'); glow.style.opacity='0';
      const snap = Math.round(col.scrollTop / h) * h;
      col.scrollTo({ top:snap, behavior:'smooth' });
    }, 90);
  }, {passive:true});
}

document.querySelectorAll('.wcol').forEach(initWheel);

/* ===== Save (заглушка) ===== */
document.getElementById('saveBtn').addEventListener('click',()=>{
  alert('Сохраняем (заглушка).');
});
</script>
</body>
</html>
